[{"tags": ["sql", "perl", "escaping"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1477527188, "post_id": 40273267, "comment_id": 67807760, "body": "whether it is secure or not, it is silly to use it instead of just <code>$myquery=&#39;SELECT * FROM customers WHERE clientName=? AND pass=?&#39;; ...; $sth-&gt;execute( param(&#39;name&#39;), param(&#39;pass&#39;) );</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1477535177, "post_id": 40273267, "comment_id": 67809561, "body": "@ysth, I heard you want to use quote for performance reasons, because the DB isn&#39;t capable of making some optimizations if it doesn&#39;t know the type of the parameters in advance. That said, I heard that some DBD actually replace the parameters with quoted values before passing the query to the DB engine rather than passing the provided query and parameters."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1477535443, "post_id": 40273267, "comment_id": 67809625, "body": "@J.Doe, The only issue I can think of if one of information leak if the query gets logged somewhere. Any insecurities (bugs) in <code>quote</code> should be reported immediately, and will be fixed immediately."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1477539523, "post_id": 40273267, "comment_id": 67810526, "body": "@ikegami the performance thing is almost never an issue for real. It can be with true server-side prepared queries, but e.g. DBD::mysql doesn&#39;t use those by default for that reason. In normal situations the performance is the same. Some DBDs do actually just quote in the driver, as you say, and others pass the query to the server as a data structure with SQL and values separate, but the types are known."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477539565, "post_id": 40273267, "comment_id": 67810538, "body": "@ikegami however there <i>is</i> an issue here, which is with <code>param</code>&#39;s list-context behavior and <code>quote</code>&#39;s optional second arg. I&#39;ve explained it in my answer."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1477539721, "post_id": 40273267, "comment_id": 67810562, "body": "@hobbs, Of course they&#39;re known,  but at execute-time, not prepare-time."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477539814, "post_id": 40273267, "comment_id": 67810592, "body": "@ikegami yes, but that&#39;s my point. Both with quote, and with most DBD&#39;s behavior with placeholders, there <i>is</i> no advance prepare-time. The server gets the statement and executes it immediately. So it has the full information available to it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1477540121, "post_id": 40273267, "comment_id": 67810652, "body": "@hobbs, You didn&#39;t say anything about most DBD doing this. And is that true? Does it matter if most do it if the one you use doesn&#39;t?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477540131, "post_id": 40273267, "comment_id": 67810656, "body": "@ikegami I saw Netanel Rubin cited in the PDF and I knew what it had to be."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477540167, "post_id": 40273267, "comment_id": 67810665, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/126781/discussion-between-hobbs-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519685224, "post_id": 40273267, "comment_id": 85002113, "body": "@ikegami Quoting should never help performance much, and can hurt depending on the database.  If the database optimizes query plans carefully, then preparing SQL is expensive and quoting hurts you. Oracle is an extreme case.  On the other extreme, MySQL really doesn&#39;t care what you do since it doesn&#39;t try to do a good job of optimizing query plans."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "edited": false, "score": 0, "creation_date": 1519692700, "post_id": 40273267, "comment_id": 85004178, "body": "@btilly, All my comment points out is that the &quot;common knowledge&quot; that placeholders should always be used isn&#39;t always correct. All I know is that tye found that placeholders slowed down his db code. By how much and for what is besides the point, which is that you should check the performance of using placeholders vs avoiding them if performance is a concern for you."}, {"owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1519693573, "post_id": 40273267, "comment_id": 85004371, "body": "@ikegami If the performance difference was significant in his case, I would consider it a bug.  In the case of Oracle, the difference has been very large in the past.  Worse yet, the places where it places stress is inside the database, in a way that I&#39;ve seen actually take the database down."}, {"owner": {"reputation": 1988, "user_id": 2966673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5UVR0.jpg?s=128&g=1", "display_name": "floww", "link": "https://stackoverflow.com/users/2966673/floww"}, "edited": false, "score": 0, "creation_date": 1548539028, "post_id": 40273267, "comment_id": 95578991, "body": "Well, the questions and the code look pretty similar to the one of a popular CTF hacking challenge."}], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 6851121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffedecc15597ce78241b4f70a7f9b31c?s=128&d=identicon&r=PG&f=1", "display_name": "blr", "link": "https://stackoverflow.com/users/6851121/blr"}, "is_accepted": false, "score": 1, "last_activity_date": 1477522213, "creation_date": 1477522213, "answer_id": 40273364, "question_id": 40273267, "link": "https://stackoverflow.com/questions/40273267/is-perl-function-dbh-quote-still-secure/40273364#40273364", "title": "Is perl function dbh-&gt;quote still secure?", "body": "<p>You may want to reach out to <a href=\"http://dbi.perl.org/support/\" rel=\"nofollow\">dbi-users mailing list</a> to ask for what vulnerabilities exist. Adding a quote doesn't making things bad as long as you are escaping them. You still make sure you are aware of all <a href=\"https://www.owasp.org/index.php/SQL_injection\" rel=\"nofollow\">SQL injections attacks</a>. You may also want to avoid passing your password as a url GET parameter (prefer POST requests), since urls (along with any params) are not encrypted and can be easily read. </p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477539783, "post_id": 40275686, "comment_id": 67810585, "body": "Ah cool! I think newer versions of <code>param</code> warn when you use it in list context to avoid surprises like this"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 11, "last_activity_date": 1492065636, "last_edit_date": 1492065636, "creation_date": 1477539277, "answer_id": 40275686, "question_id": 40273267, "link": "https://stackoverflow.com/questions/40273267/is-perl-function-dbh-quote-still-secure/40275686#40275686", "title": "Is perl function dbh-&gt;quote still secure?", "body": "<p>The problem mostly doesn't lie with <code>quote</code> per se. <code>quote</code> is secure if used properly (although it's not the best choice in this situation). However, if <code>param</code> is the <code>param</code> from CGI.pm, or from anything else that has similar behavior, you have a big problem.</p>\n\n<p>You see, <code>param</code> is context-sensitive. In scalar context, if the parameter has a single value (<code>name=foo</code>), it returns that value, and if the parameter has multiple values (<code>name=foo&amp;name=bar</code>) it returns an arrayref. In <em>list</em> context, it returns a list of values, whether there are zero, one, or many. The argument list of a method (such as <code>quote</code>) is a list context. That means that someone using your app can cause <code>quote</code> to receive <em>two</em> values, and <code>quote</code>'s optional second argument is an SQL data type that the first argument should be treated as. If the data type is a non-string type like <code>NUMERIC</code>, then <code>quote</code> will pass its first argument through <em>without any quoting</em>. This constitutes an opportunity for SQL injection.</p>\n\n<p>Recommendations:</p>\n\n<ol>\n<li><p>Although <code>quote</code> is safe when used properly, placeholders are better, safer, and harder to use wrong. Use DBI placeholders whenever possible, instead of <code>quote</code>.</p></li>\n<li><p>Don't use CGI's <code>param</code> in argument lists, hash constructors, or any other place where it could return an unexpected number of items and ruin your day. Either put <code>scalar</code> out front, assign to a scalar, or assign to an array. Or, better yet, avoid CGI.pm and workalike interfaces entirely.</p></li>\n<li><p>Don't store passwords as plaintext in the database. If anyone ever <em>does</em> get access to parts of your database, your users' passwords will be exposed to them. Passwords should be <a href=\"https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords\">hashed</a> and there are good, easy-to-use Perl modules for doing so (<a href=\"https://metacpan.org/pod/Authen::Passphrase\" rel=\"nofollow noreferrer\">Authen::Passphrase</a> comes to mind).</p></li>\n<li><p>Don't pass passwords as URL parameters. URLs are easily leaked through HTTP referers, browser history, careless copy/paste, etc. Passwords should be POSTed in forms, preferably over a secure connection.</p></li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 7077570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91bb1cccfcae1de8ea068fc88ad4f44?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/7077570/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2324, "favorite_count": 0, "accepted_answer_id": 40275686, "answer_count": 2, "score": 2, "last_activity_date": 1492065636, "creation_date": 1477521658, "last_edit_date": 1477566264, "question_id": 40273267, "link": "https://stackoverflow.com/questions/40273267/is-perl-function-dbh-quote-still-secure", "title": "Is perl function dbh-&gt;quote still secure?", "body": "<p>I am currently writing a small script in perl to connect to my db, retrieve some data, and show it to the user. The data retrieved depends of parameters given by the user.</p>\n\n<p>I am using <code>dbh-&gt;quote</code> to escape the quotes:</p>\n\n<pre><code>...\nmy $dbh=DBI-&gt;connect(***);\n\nmy $myquery=\"SELECT * FROM customers WHERE clientName =\".$dbh-&gt;quote(param('name')) . \" AND pass =\".$dbh-&gt;quote(param('pass'));\nmy $sth=$dbh-&gt;prepare($myquery);\n$sth-&gt;execute();\n\nmy $output=$sth-&gt;fetch();\nif ($output){\n    print @$output;\n}\n...\n</code></pre>\n\n<p>A friend told me that it might not be secure, and that he read that someone found a vulnerability. I am just beginning with perl, but <strong>I would like to understand what is that vulnerability.</strong></p>\n\n<p>After some digging I found <a href=\"http://pen-testing.sans.org/resources/papers/gwapt/burp-suiteup-fancy-scanning-mechanisms-125890\" rel=\"nofollow\">this document (pdf)</a> that seems to talk about it, but I am not able to reproduce the bug.</p>\n"}, {"tags": ["regex", "string", "perl", "scripting"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477512929, "post_id": 40271097, "comment_id": 67802690, "body": "+1 for showing your attempts! Note that <code>[\u2026]</code> denotes a <i>character class</i> which basically means <i>one (arbitrary) character of the characters between <code>[</code> and <code>]</code></i>. So <code>[ab\\dL]</code> matches <i>one of</i> <code>a</code>, <code>b</code>, a digit, or <code>L</code> and not all of them in a row."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1506643920, "post_id": 40271097, "comment_id": 79914956, "body": "A reminder in case this fell through the cracks, see: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477513233, "post_id": 40271211, "comment_id": 67802839, "body": "@ikegami  Yes, thank you -- was just editing, to clean up and add error checking and such.  Thank you for the edit."}, {"owner": {"reputation": 53, "user_id": 4913477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6affde31bc13835f51c928c763a4ec69?s=128&d=identicon&r=PG&f=1", "display_name": "squadguy", "link": "https://stackoverflow.com/users/4913477/squadguy"}, "edited": false, "score": 0, "creation_date": 1477533723, "post_id": 40271211, "comment_id": 67809230, "body": "Thank you!  I stole the idea for file handling and opening a file from your post.  In my code I write to the file, but I had no idea how to open a file in perl.  Also, I haven&#39;t sat down to fully go through your regex, yet.  I needed to get this script up, but I plan on going through.  Regex is something I really want to be solid at.  Thank you for your response @zdim"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 4913477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6affde31bc13835f51c928c763a4ec69?s=128&d=identicon&r=PG&f=1", "display_name": "squadguy", "link": "https://stackoverflow.com/users/4913477/squadguy"}, "edited": false, "score": 0, "creation_date": 1477534854, "post_id": 40271211, "comment_id": 67809500, "body": "@squadguy Great, I&#39;m glad that it&#39;s useful beyond the regex.  This is indeed a basic way to handle a file, which will cover most needs.  But you want to work through basics.One set of sources is Perl&#39;s documentation, and as for files it&#39;s firstly <a href=\"http://perldoc.perl.org/perlopentut.html\" rel=\"nofollow noreferrer\">perlopentut</a>. The other is your favorite book.  The same goes for regex. Work through basics carefully and you&#39;ll immediately have a very useful tool.  After the basics it&#39;s <i>much</i> easier to keep picking up."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 53, "user_id": 4913477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6affde31bc13835f51c928c763a4ec69?s=128&d=identicon&r=PG&f=1", "display_name": "squadguy", "link": "https://stackoverflow.com/users/4913477/squadguy"}, "edited": false, "score": 0, "creation_date": 1477535519, "post_id": 40271211, "comment_id": 67809647, "body": "@squadguy  I added to the regex explanation a little bit, it may be worth re-reading."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477548999, "post_id": 40271211, "comment_id": 67813519, "body": "@ikegami Thank you for further comments!  I was hoping to make it clear, while I am hesitatant to post something here which may allow suspect data to pass. I&#39;d rather err on the other side.  However, you are right, there are other ways. It did require a bit more, and some editing around.  Thank you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1507741305, "last_edit_date": 1507741305, "creation_date": 1477512242, "answer_id": 40271211, "question_id": 40271097, "link": "https://stackoverflow.com/questions/40271097/using-regex-to-extract-a-matching-pattern-from-a-string-and-assign-it-to-a-varia/40271211#40271211", "title": "Using regex to extract a matching pattern from a string and assign it to a variable using perl", "body": "<p>Since you nailed down the format</p>\n\n<pre><code>my ($section, $id, $name) = \n    $string =~ /^\\s* ([^(]+) \\(\\s* ([^)]+) \\)\\s* (.+) $/x;\n</code></pre>\n\n<p>The key here is the <em>negated character class</em>, <code>[^...]</code>, which matches any one character other than those listed inside following the <code>^</code> (which makes it \"negated\"). The un-escaped parenthesis <em>capture</em> the match, except inside a character class <code>[]</code> where they are taken as literal.</p>\n\n<p>It first matches all consecutive characters other than <code>(</code>, so up to first <code>(</code>, what is captured by the pair of <code>( )</code> around it. Then all other than <code>)</code>, so up to the first closing paren, also captured by its own pair <code>( )</code>. This comes between literal parenthesis <code>\\( ... \\)</code>, which are outside of <code>( )</code> since we don't want them captured. Then all the rest is captured, <code>(.+)</code>, requiring at least some characters since <code>+</code> means <em>one</em> or more. Note though that these can be spaces. We exclude possible leading white space from the first capture, by matching it specifically before the capturing parenthesis, and extract (some of) possible spaces around id-parenthesis.</p>\n\n<p>The <code>/x</code> modifier allows use of spaces (and comments and newlines) inside, what helps reaadbility. The match operator returns a list of all matches, which we assign to variables. Note, even if there is only one match it still returns (it as) a list. See <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">Regular Expressions Tutorial (perlretut)</a>.</p>\n\n<p>Then, assuming that you have the catalog in a file</p>\n\n<pre><code>use warnings 'all';\nuse strict;\nuse feature 'say';\n\nmy $file = 'catalog.txt';\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (my $line = &lt;$fh&gt;) \n{\n    next if $line =~ /^\\s*$/;  # skip empty lines\n\n    # Strip leading and trailing white space\n    $line =~ s{^\\s*|\\s*$}{}g;\n\n    my ($section, $id, $name) = \n        $line =~ /^ ([^(]+) \\(\\s* ([^)]+) \\)\\s* (.+) $/x\n            or do {\n                warn \"Error with expected format -- \";\n                next;\n            };\n\n    say \"$section, $id, $name\";\n}\nclose $fh;\n</code></pre>\n\n<p>I use <code>s{}{}</code> delimiters since <code>s///</code> confuse markup's syntax highlighter with this pattern, which is also a good demonstration since these sometimes help readability a lot.</p>\n\n<p>You would store the retrieved variables in a suitable data structure. Any combination of arrays and hashes (and their references) comes to mind, depending on what need be done with them later.  See <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">Cookbook of Data Structures (perldsc)</a>.</p>\n\n<p>Note on the error handling.  Since none of the matches involve <code>*</code> (allowing <em>zero</em> matches -- nothing), if any component of your format isn't as expected there won't be a match at all and we get an error.  The <code>.+</code> is extremely permissive but it still requires <em>something</em> to be there. This is why the trailing space is first stripped, so that the last pattern <code>(.+)</code> cannot be satisfied by spaces alone.</p>\n\n<p>If the only objective <em>is</em> the course id and we are <em>certain</em> that the first parenthesis are around it</p>\n\n<pre><code>my ($id) = $line =~ / \\(\\s* ([^)]+) \\) /x  or do { ... };\n</code></pre>\n\n<p>We now only need to match and capture the middle piece, something inside parenthesis.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4913477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6affde31bc13835f51c928c763a4ec69?s=128&d=identicon&r=PG&f=1", "display_name": "squadguy", "link": "https://stackoverflow.com/users/4913477/squadguy"}, "edited": false, "score": 0, "creation_date": 1477533493, "post_id": 40271673, "comment_id": 67809184, "body": "I stole parts of you while loop and the regex you provided and included them in my code.  I still haven&#39;t really sat down to digest your regex yet, but it&#39;s on my shortlist.  I plan on learning perl for its text processing power.  I really appreciate your response - I wouldn&#39;t have been able to construct that regex."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1477515475, "last_edit_date": 1477515475, "creation_date": 1477514172, "answer_id": 40271673, "question_id": 40271097, "link": "https://stackoverflow.com/questions/40271097/using-regex-to-extract-a-matching-pattern-from-a-string-and-assign-it-to-a-varia/40271673#40271673", "title": "Using regex to extract a matching pattern from a string and assign it to a variable using perl", "body": "<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nwhile( my $line = &lt;DATA&gt; ) {\n    if (my ($courseID) = ($line =~ /[^(]+\\(([^)]+)\\)/) ) {\n        print \"course-ID = $courseID; -- line was $line\";\n    }\n}\n\n__DATA__\nBIO-2109-01 (12345) Introduction to Biology\nCHM-3501-F2-01 (54321) Introduction to Chemistry\nIDS-3250-01 (98765) History of US (1860-2000)\nSPN-1234-02-F1 (45678) Spanish History (1900-2010)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>course-ID = 12345; -- line was BIO-2109-01 (12345) Introduction to Biology\ncourse-ID = 54321; -- line was CHM-3501-F2-01 (54321) Introduction to Chemistry\ncourse-ID = 98765; -- line was IDS-3250-01 (98765) History of US (1860-2000)\ncourse-ID = 45678; -- line was SPN-1234-02-F1 (45678) Spanish History (1900-2010)\n</code></pre>\n\n<p>The pattern I used, <code>/[^(]+\\(([^)]+)\\)/</code>, can also be written as</p>\n\n<pre><code>/ [^(]+     # 1 or more characters that are not a '('\n  \\(        # a literal '('. You must escape that because you don't want\n            # to start it a capture group.\n  ([^)]+)   # 1 or more chars that are not a ')'.\n            # The sorrounding '(' and ')' capture this match\n  \\)        # a literal ')'\n/x\n</code></pre>\n\n<p>The <code>/x</code> modifier allows you to insert spaces, comments, and even newlines right in the pattern.</p>\n\n<hr>\n\n<p>Just in case you're unsure about the <code>/x</code>. You can indeed write:</p>\n\n<pre><code>while( my $line = &lt;DATA&gt; ) {\n    if (my ($courseID) = ($line =~ / [^(]+   # \u2026\n                                     \\(      # \u2026\n                                     ([^)]+) # \u2026\n                                     \\)      # \u2026\n                                    /x ) ) {\n        print \"course-ID = $courseID; -- line was $line\";\n    }\n}\n</code></pre>\n\n<p>That's probably <strong>not nice to read</strong> but you can also store the regex in a <strong>separate variable</strong>:</p>\n\n<pre><code>my $pattern = \n    qr/ [^(]+     # 1 or more characters that are not a '('\n        \\(        # a literal '(' (you must escape it)\n        ([^)]+)   # 1 or more chars that are not a ')'.\n                  # The sorrounding '(' and ')' capture this match\n        \\)        # a literal ')'\n      /x;\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>if (my ($courseID) = ($line =~ $pattern)) {\n    \u2026\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4913477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6affde31bc13835f51c928c763a4ec69?s=128&d=identicon&r=PG&f=1", "display_name": "squadguy", "link": "https://stackoverflow.com/users/4913477/squadguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1507741305, "creation_date": 1477511801, "last_edit_date": 1477533333, "question_id": 40271097, "link": "https://stackoverflow.com/questions/40271097/using-regex-to-extract-a-matching-pattern-from-a-string-and-assign-it-to-a-varia", "title": "Using regex to extract a matching pattern from a string and assign it to a variable using perl", "body": "<p>I am seeking advice on extracting a section of a string, that is always occurs as the first instance data between parenthesis using perl and regex and assign that value to a variable.</p>\n\n<p>Here is the precise situation, I am using perl and regex to extract the courseID from a university catalog and assign it to a variable.  Please consider the following:</p>\n\n<ul>\n<li>BIO-2109-01 (12345) Introduction to Biology</li>\n<li>CHM-3501-F2-01 (54321) Introduction to Chemistry</li>\n<li>IDS-3250-01 (98765) History of US (1860-2000)</li>\n<li>SPN-1234-02-F1 (45678) Spanish History (1900-2010)</li>\n</ul>\n\n<p>The typical format is [course-section-name] [(courseID)] [courseName]</p>\n\n<p>My goal is to create a script which can take each entry, one at a time, assign it to a variable and then use regex to extract only the courseID and assign only the courseID to a variable.</p>\n\n<p>My approach has been to use search and replace to replace everything not matching that with '' and then saving what is left (the courseID) to the variable.  Here are a few examples of what I have tried the following:</p>\n\n<pre><code>$string = \"BIO-2109-01 (12345) Introduction to Biology\";\n($courseID = $string) =~ s/[^\\d\\d\\d\\d\\d]//g;\nprint $courseID;\n</code></pre>\n\n<p>Result: 21090112345 --- printing the course-section-name and courseID</p>\n\n<pre><code>$string = \"BIO-2109-01 (12345) Introduction to Biology\";\n$($courseID = $string) =~ s/[^\\b\\(\\d{5}\\)]\\b//g;\nprint $courseID;\n</code></pre>\n\n<p>Result:  210901(12345) --- printing course-section-name, parens, and courseID</p>\n\n<p>So I haven't had much luck with search and replace - however I found this nugget:</p>\n\n<pre><code>\\(([^\\)]+)\\)\n</code></pre>\n\n<p>On <a href=\"http://regexr.com/\" rel=\"nofollow\">http://regexr.com/</a> that will match the parens section.  However, it would also match multiple parans, including for example (abc).</p>\n\n<p>I'm not really sure at this point how to do something like this:</p>\n\n<pre><code>$string = \"BIO-2109-01 (12345) Introduction to Biology\";\n($courseID = $string) =~ [magicRegex_goes_here];\nprint courseID;     \n</code></pre>\n\n<p>result 12345</p>\n\n<p>OR, better:</p>\n\n<pre><code>$string = IDS-3250-01 (98765) History of US (1860-2000)\n($courseID = $string) =~ [magicRegex_goes_here];\nprint courseID;\n</code></pre>\n\n<p>result 98765</p>\n\n<p>Any advice or direction would be greatly appreciated.  I have tried everything I know and can research in regards to regex to solve this problem.  If there is anymore information I can include please ask away. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>use warnings 'all';\nuse strict;\nuse feature 'say';\n\nmy $file = './data/enrollment.csv';      #File this script generates\nmy $course = \"\";                         #Complete course string [name-of-course] [(courseID)] [course_name]\nmy @arrayCourses = \"\";                   #Array of courseIDs\nmy $i = \"\";                              #i in for loop\nmy $courseID = \"\";                       #Extracted course ID\nmy $userName = \"\";                       #Username of person we are enrolling\nmy $action = \"add,\";                     #What we are doing to user\nmy $permission = \"teacher,\";             #What permissions to assign to user\nmy $stringToPrint = \"\";                  #Concatinated string to write to file\nmy $n = \"\\n\";                            #\\n\nmy $c = \",\";                             #,\n\n#BEGIN PROGRAM\n\nprint \"Enter the username \\n\";\n\nchomp($userName = &lt;STDIN&gt;);               #Get the enrollee username from user\n\nprint \"\\n\";\n\nprint \"Enter course name and press enter.  Enter 'x' to end. \\n\";  #prompt for course names\n\nwhile ($course ne 'x') {\n        chomp($course = &lt;STDIN&gt;);\n        if ($course ne \"x\") {\n                if (($courseID) = ($course =~ /[^(]+\\(([^)]+)\\)/) ) {     #nasty regex to extract courseID - thnx PerlDuck and zdim\n                        push @arrayCourses, $courseID;                    #put the courseID into array\n                }\n                else {\n                        print \"Cannot process last entry check it\";\n                }\n        }\n        else {\n                last;\n        }\n}\n\nshift @arrayCourses;                      #Remove first entry from array - add,teacher,,username\n\nopen(my $fh,'&gt;', $file);                  #open file\n\nfor $i (@arrayCourses)                    #write array to file\n{\n        $stringToPrint= join \"\", $action, $permission, $i, $c, $userName, $n ;\n        print $fh $stringToPrint;\n}\n\nclose $fh;\n</code></pre>\n\n<p>That'll do it!  Suggestions or improvements are always welcome!  Thanks @PerlDuck and @zdim</p>\n"}, {"tags": ["arrays", "perl", "hash", "cgi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1477505252, "post_id": 40269148, "comment_id": 67798556, "body": "Always use <code>use strict; use warnings;</code>! You use a variable named <code>$toppings</code>, but you never (declared or) assigned a value to such a variable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1477505315, "post_id": 40269148, "comment_id": 67798593, "body": "Also, the fact that <code>%size</code> isn&#39;t used is suggests the presence of a second problem."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 0, "last_activity_date": 1477549113, "last_edit_date": 1477549113, "creation_date": 1477547500, "answer_id": 40277061, "question_id": 40269148, "link": "https://stackoverflow.com/questions/40269148/why-is-this-perl-cgi-program-not-calculating-items-in-hash-array/40277061#40277061", "title": "Why is this Perl CGI Program not calculating items in hash array?", "body": "<p>You defined a hash <code>%size</code> but never use it? Where are the values of $toppings?</p>\n\n<p>Anyway, see here is a way to display the value of the key 'Large' just to give an idea on how to use hash.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %size = (Regular  =&gt; \"6\",\n            Large =&gt; \"8\",\n            Family  =&gt; \"11\",\n           );\n\nprint $size{Large};\n</code></pre>\n\n<p>You can also assign the keys to an array</p>\n\n<pre><code>my @Sizes = keys %size;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 0, "last_activity_date": 1477554916, "creation_date": 1477554916, "answer_id": 40279179, "question_id": 40269148, "link": "https://stackoverflow.com/questions/40269148/why-is-this-perl-cgi-program-not-calculating-items-in-hash-array/40279179#40279179", "title": "Why is this Perl CGI Program not calculating items in hash array?", "body": "<p>As other have mentioned, you should alway include <code>use strict</code> and <code>use warnings</code> in your code. That would point out some of your problems.</p>\n\n<p>Let's look at your code.</p>\n\n<pre><code># This defines a hash mapping sizes of pizza to price\nmy %size = ('Regular' =&gt; 6.00,\n        'Large' =&gt; 8.00,\n        'Family' =&gt; 11.00);\n\n# And this gets the size parameter from the user's request.\n# Presumably, this value should be one of the keys from the %size hash.\nmy $size = param('size');\n\n# This gets an array of all of the toppings the user has selected.\nmy @toppings = param('toppings');\n\n# Each topping adds \u00a31.25 to the price, so to get the total price\n# for toppings, we need to multiply the number of toppings by 1.25.\n# But that's not what you're doing here. You're using a new scalar \n# variable called $toppings. This will be undef and will therefore\n# be interpreted as zero.\n# This problem would have been picked up by \"use strict\"\nmy $total_topping = $toppings * 1.25;\n\n# And here you're adding $size to $total_toppings to get the\n# total price of the pizza. But $size doesn't contain the price,\n# it contains the description of the size. Any of your sizes will\n# be interpreted as 0 when used as a number. So $total will end\n# up as 0 + 0 = 0.\n# This problem would have been picked up by \"use warnings\".\nmy $total = $size + $total_topping;\nprint ('Total Due: $total');\n</code></pre>\n\n<p>So, you had two errors:</p>\n\n<ol>\n<li>You used <code>$toppings</code> instead of <code>@toppings</code> to get the number of toppings.</li>\n<li>You forgot to translate the size name to the size price.</li>\n</ol>\n\n<p>Your code should look more like this:</p>\n\n<pre><code>my %size = (Regular =&gt; 6.00,\n            Large   =&gt; 8.00,\n            Family  =&gt; 11.00);\n\nmy $size = param{'size');\n# Check for valid size\nif (! exists $size{$size}) {\n  die \"$size is not a valid size of pizza\";\n}\n# Convert name of size to cost of size.\nmy $size_cost = $size{$size};\n\nmy @toppings = param('toppings');\n\n# Array in scalar context gives number of elements\nmy $total_toppings = @toppings * 1.25;\n\nmy $total = $size_cost + $total_topping;\nprint ('Total Due: $total');\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7076587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61af9c8b954347d50b646f4e7a3df2ee?s=128&d=identicon&r=PG&f=1", "display_name": "r2d222", "link": "https://stackoverflow.com/users/7076587/r2d222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 40279179, "answer_count": 2, "score": -3, "last_activity_date": 1477554916, "creation_date": 1477504780, "question_id": 40269148, "link": "https://stackoverflow.com/questions/40269148/why-is-this-perl-cgi-program-not-calculating-items-in-hash-array", "title": "Why is this Perl CGI Program not calculating items in hash array?", "body": "<p>I wrote a program that allows users to pick the size of the product and put the sizes in a hash array. However, when I try to code the part where it adds up all the toppings listed (the user can pick multiple toppings but just 1 size), my formula is not working.</p>\n\n<pre><code>my %size = ('Regular' =&gt; 6.00,\n        'Large' =&gt; 8.00,\n        'Family' =&gt; 11.00);\n\nmy $size = param('size');\n\nmy @toppings = param('toppings');\n\nmy $total_topping = $toppings * 1.25;\nmy $total = $size + $total_topping;\nprint ('Total Due: $total');\n</code></pre>\n"}, {"tags": ["perl", "file", "seek", "tell"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477581344, "post_id": 40269036, "comment_id": 67834836, "body": "Why do you not want to use <code>Tie::File</code>? I think it would be ideal for this purpose."}, {"owner": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1477907770, "post_id": 40269036, "comment_id": 67934082, "body": "@Borodin Even the Tie::File wil read the file into an array, won&#39;t that be memory consuming ? Can the -memory option of the module be some help in that case ?"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "edited": false, "score": 0, "creation_date": 1477505108, "post_id": 40269154, "comment_id": 67798480, "body": "my point is can&#39;t we overwrite that line with nothing, so that the line ceases to exist and the next line come up automatically?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1477505237, "post_id": 40269154, "comment_id": 67798544, "body": "<code>This is third line\\n</code> occupies 19 characters. You can only replace it with other 19 characters."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "edited": false, "score": 0, "creation_date": 1477505280, "post_id": 40269154, "comment_id": 67798576, "body": "@H.Burns  Right, that&#39;s the thing -- there is no &#39;nothing&#39;, it&#39;s bytes that are there, so some content. The only way to &quot;remove&quot; it is to move the rest. Imagine a line of little boxes, each with a piece inside -- there has to be <i>something</i> in each.  There is no way in the filesystem to magically pluck out a box.  The only thing we can do is to move the content of the next box into one we want &quot;removed,&quot; etc. The bytes at the end may be discarded."}, {"owner": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "edited": false, "score": 0, "creation_date": 1477505664, "post_id": 40269154, "comment_id": 67798791, "body": "@zdim That sounds ok to me, could you please demonstrate a bit of code for moving the content into the one we want to remove and discard the end ?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "edited": false, "score": 0, "creation_date": 1477506251, "post_id": 40269154, "comment_id": 67799128, "body": "@H.Burns  I added a simple example.  It can of course be written more properly, with <code>if-else</code> branches etc, if there is a more complicated algorithm for what to move."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "edited": false, "score": 2, "creation_date": 1477506460, "post_id": 40269154, "comment_id": 67799269, "body": "@H.Burns, Think of files as pieces of grid paper. You can&#39;t remove a portion of the file any more than you can remove squares from the page. If you want to remove something from the file/page, you need to copy every subsequent byte/square into earlier bytes/squares. The exception is that you can delete from the end of the file by playing with its size."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477507211, "post_id": 40269154, "comment_id": 67799733, "body": "If you always want to remove the third line, then <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles\" rel=\"nofollow noreferrer\"><code>$.</code></a> (the current line number, 1-based) could help: <code>print $fh_out $_  unless ($. == 3);</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "edited": false, "score": 0, "creation_date": 1477510209, "post_id": 40269154, "comment_id": 67801301, "body": "@H.Burns  I added a comment on replacing only what is necessary -- I think it&#39;s not worthed, unless there is a demonstrated problem with rewriting the whole file.  I also added a link to a <code>perlfaq5</code> item on this."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1533279830, "last_edit_date": 1533279830, "creation_date": 1477504803, "answer_id": 40269154, "question_id": 40269036, "link": "https://stackoverflow.com/questions/40269036/deleting-a-line-from-a-huge-file-in-perl/40269154#40269154", "title": "Deleting a line from a huge file in Perl", "body": "<p>A file is a sequence of bytes. We can <em>replace</em> (overwrite) some of them, but how would we <em>remove</em> them? Once a file is written its bytes cannot be 'pulled out' of the sequence or 'blanked' in any way. (The ones at the end of the file can be dismissed, by truncating the file as needed.) </p>\n\n<p>The rest of the content has to move 'up', so that what follows the text to be removed overwrites it. We have to rewrite the rest of the file. In practice it is often far simpler to rewrite the whole file. </p>\n\n<p>As a very basic example</p>\n\n<pre><code>use warnings 'all';\nuse strict;\nuse File::Copy qw(move);\n\nmy $file_in = '...';\nmy $file_out = '...';  # best use `File::Temp`\n\nopen my $fh_in,  '&lt;', $file_in  or die \"Can't open $file_in: $!\";\nopen my $fh_out, '&gt;', $file_out or die \"Can't open $file_out: $!\";\n\n# Remove a line with $pattern\nmy $pattern = qr/this line goes/;\n\nwhile (&lt;$fh_in&gt;) \n{\n    print $fh_out $_  unless /$pattern/;\n}\nclose $fh_in;\nclose $fh_out;\n\n# Rename the new fie into the original one, thus replacing it\nmove ($file_out, $file_in) or die \"Can't move $file_out to $file_in: $!\";\n</code></pre>\n\n<p>This writes every line of input file into the output file, unless a line matches a given pattern. Then that file is renamed, replacing the original (what does not involve data copy). See <a href=\"http://perldoc.perl.org/perlfaq5.html#How-do-I-change,-delete,-or-insert-a-line-in-a-file,-or-append-to-the-beginning-of-a-file?\" rel=\"nofollow noreferrer\">this topic in perlfaq5</a>.</p>\n\n<p>Since we really use a temporary file I'd recommend the core module <a href=\"http://perldoc.perl.org/File/Temp.html\" rel=\"nofollow noreferrer\">File::Temp</a> for that.</p>\n\n<hr>\n\n<p>This may be made more efficient, but far more complicated, by opening in update <code>'+&lt;'</code> mode so to overwrite only a portion of the file. You iterate until the line with the pattern, record (<code>tell</code>) its position and the line length, then copy all remaining lines in memory. Then <code>seek</code> back to the position minus length of that line, and dump the copied rest of the file, overwriting the line and all that follows it. </p>\n\n<p>Note that now the data for the rest of the file is copied <em>twice</em>, albeit one copy is in memory. Going to this trouble may make sense if the line to be removed is far down a very large file. If there are more lines to remove this gets messier.</p>\n\n<hr>\n\n<p>Writing out a new file and copying it over the original changes the file's <em>inode</em> number.  That may be a problem for some tools or procedures, and if it is you can instead update the original by either</p>\n\n<ul>\n<li><p>Once the new file is written out, open it for reading and open the original for writing. This clobbers the original file.  Then read from the new file and write to the original one, thus copying the content back to the same inode.  Remove the new file when done.</p></li>\n<li><p>Open the original file in read-write mode (<code>'+&lt;'</code>) to start with. Once the new file is written, <code>seek</code> to the beginning of the original (or to the place from which to overwrite) and write to it the content of the new file. Remember to also set the end-of-file if the new file is shorter,</p>\n\n<pre><code>truncate $fh, tell($fh); \n</code></pre></li>\n</ul>\n\n<p>after copying is done.  This requires some care and the first way is probably generally safer.</p>\n\n<p>If the file weren't huge the new \"file\" can be \"written\" in memory, as an array or a string.</p>\n"}, {"comments": [{"owner": {"reputation": 4093, "user_id": 675462, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4ce47f47105a3bd1ca4700f02b5deff1?s=128&d=identicon&r=PG", "display_name": "papaiatis", "link": "https://stackoverflow.com/users/675462/papaiatis"}, "edited": false, "score": 0, "creation_date": 1477642838, "post_id": 40269478, "comment_id": 67859338, "body": "Why is the downvote? OP asked a method to delete a line from a huge file in perl. It does what he wants."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477677154, "post_id": 40269478, "comment_id": 67878380, "body": "Perhaps because this is not exactly a Perl solution but merely a sed solution. Also, the content of <code>$return</code> is useless. It&#39;s always empty. (I wasn&#39;t the downvoter, btw.)"}], "tags": [], "owner": {"reputation": 4093, "user_id": 675462, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4ce47f47105a3bd1ca4700f02b5deff1?s=128&d=identicon&r=PG", "display_name": "papaiatis", "link": "https://stackoverflow.com/users/675462/papaiatis"}, "is_accepted": false, "score": 0, "last_activity_date": 1477505908, "creation_date": 1477505908, "answer_id": 40269478, "question_id": 40269036, "link": "https://stackoverflow.com/questions/40269036/deleting-a-line-from-a-huge-file-in-perl/40269478#40269478", "title": "Deleting a line from a huge file in Perl", "body": "<p>Use <code>sed</code> command from Linux command line in Perl:</p>\n\n<pre><code>my $return = `sed -i '3d' text.txt`;\n</code></pre>\n\n<p>Where \"3d\" means delete the 3rd row. </p>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": -1, "last_activity_date": 1477683148, "creation_date": 1477683148, "answer_id": 40312054, "question_id": 40269036, "link": "https://stackoverflow.com/questions/40269036/deleting-a-line-from-a-huge-file-in-perl/40312054#40312054", "title": "Deleting a line from a huge file in Perl", "body": "<p>It is useful to look at <code>perlrun</code> and see how perl itself modifies a file 'in-place.'</p>\n\n<p>Given:</p>\n\n<pre><code>$ cat text.txt\nThis is fist line\nThis is second line\nThis is third line\nThis is fourth line\nThis is fifth line\n</code></pre>\n\n<p>You can apparently 'modify in-place', sed like, by using the <code>-i</code> and <code>-p</code> switch to invoke Perl:</p>\n\n<pre><code>$ perl -i -pe 's/This is third line\\s*//' text.txt\n$ cat text.txt\nThis is fist line\nThis is second line\nThis is fourth line\nThis is fifth line\n</code></pre>\n\n<p>But if you consult the Perl Cookbook recipe 7.9 (or look at <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\">perlrun</a>) you will see that this:</p>\n\n<pre><code>$ perl -i -pe 's/This is third line\\s*//' text.txt\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>while (&lt;&gt;) {\n    if ($ARGV ne $oldargv) {           # are we at the next file?\n        rename($ARGV, $ARGV . '.bak');\n        open(ARGVOUT, \"&gt;$ARGV\");       # plus error check\n        select(ARGVOUT);\n        $oldargv = $ARGV;\n    }\n    s/This is third line\\s*//;\n}\ncontinue{\n    print;\n}\nselect (STDOUT);                      # restore default output\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 5539711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb41bfcbbdfc3fd5992f8b9da1bf99ae?s=128&d=identicon&r=PG&f=1", "display_name": "H.Burns", "link": "https://stackoverflow.com/users/5539711/h-burns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 1, "accepted_answer_id": 40269154, "answer_count": 3, "score": 4, "last_activity_date": 1533279830, "creation_date": 1477504408, "question_id": 40269036, "link": "https://stackoverflow.com/questions/40269036/deleting-a-line-from-a-huge-file-in-perl", "title": "Deleting a line from a huge file in Perl", "body": "<p>I have huge text file and first five lines of it reads as below :</p>\n\n<pre><code>This is fist line\nThis is second line\nThis is third line\nThis is fourth line\nThis is fifth line\n</code></pre>\n\n<p>Now, I want to write something at a random position of the third line of that file which will replace the characters in that line by the new string I am writing. I am able to achieve that with the below code :</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @pos = (0);\nopen my $fh, \"+&lt;\", \"text.txt\";\n\nwhile(&lt;$fh) {\n    push @pos, tell($fh);\n}\n\nseek $fh , $pos[2]+1, 0;\nprint $fh \"HELLO\";\n\nclose($fh);\n</code></pre>\n\n<p>However, I am not able to figure out with the same kind of approach how can I delete the entire third line from that file so that the texts reads below :</p>\n\n<pre><code>This is fist line\nThis is second line\nThis is fourth line\nThis is fifth line\n</code></pre>\n\n<p>I do not want to read the entire file into an array, neither do I want to use Tie::File. Is it possible to achieve my requirement using seek and tell ? A solution will be very helpful. </p>\n"}, {"tags": ["perl", "bioinformatics", "redundancy", "qiime"], "answers": [{"tags": [], "owner": {"reputation": 3060, "user_id": 1515117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/317094104136ef2e6487bf5a61fb8217?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/1515117/vince"}, "is_accepted": true, "score": 1, "last_activity_date": 1477506549, "creation_date": 1477506549, "answer_id": 40269664, "question_id": 40268755, "link": "https://stackoverflow.com/questions/40268755/eliminate-redundant-in-a-list-with-perl/40269664#40269664", "title": "eliminate redundant in a list with perl", "body": "<p>I suspect issue is with:</p>\n\n<pre><code>@taxon_list =$_;\n</code></pre>\n\n<p>It is not appended to, but instead overwritten with the current element. </p>\n\n<p>Try:</p>\n\n<pre><code>push @taxon_list, $_;\n</code></pre>\n\n<p>You can also move the following outside the loop:</p>\n\n<pre><code>@final_list = uniq @taxon_list;\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 40269664, "answer_count": 1, "score": 1, "last_activity_date": 1478456197, "creation_date": 1477503476, "last_edit_date": 1478456197, "question_id": 40268755, "link": "https://stackoverflow.com/questions/40268755/eliminate-redundant-in-a-list-with-perl", "title": "eliminate redundant in a list with perl", "body": "<p>Hi I made this script to extract all phylum from a OTUs file obtained from qiime using silva database,  I added a subroutine to eliminate duplicate taxon and extract all no redundant (one of each taxon), my problem is that I just get the las line (only one taxa)</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse Getopt::Long;\n\nmy ($imput, $output, $line, $phylum, @taxon_list, @final_list);\nGetOptions (\n           'in=s'    =&gt;\\$imput,\n           'ou=s'   =&gt;\\$output,\n           'k'      =&gt;\\$phylum,\n\n           );\n\nif (!$imput or !$output){\n    exit;\n    print \"Error\";\n}\n\n\n\n#SUBRUTINE TO ELIMINATE DUPLICATES\n# --------------------------------------------------------------------------------------------\nsub uniq {\n  my %seen;\n  grep !$seen{$_}++, @_;\n}\n# --------------------------------------------------------------------------------------------\n\nopen INPUTFILE, \"&lt;\", \"$imput\", or die \"can`t open file\\n\";\nopen OUTPUTFILE, \"&gt;\", \"$output\" or die \"can`t creat file\\n\";\n\nwhile (&lt;INPUTFILE&gt;){\n$line=$_;\nchomp($line);\n    if ($line=~ m/^#/g){\n        next;\n    }\n    elsif($phylum){\n        my @kingd=($line=~m/D_1__(.*);D_2/g);\n        foreach (@kingd){\n            if ($_=~/^$/){\n                next;\n            }\n            elsif ($_=~ m/^[Uu]nknown/g){\n                next;\n                }\n            elsif ($_=~ m/^[Uu]ncultured$/g){\n                next;\n            }\n            elsif ($_=~ m/^[Uu]nidentified$/g){\n\n            }\n            else {\n                @taxon_list =$_;\n\n                    @final_list = uniq @taxon_list;\n            }\n        }\n    }\n}\n\nprint OUTPUTFILE \"@final_list\\n\";\n\nclose INPUTFILE;\nclose OUTPUTFILE;\nexit;\n</code></pre>\n"}, {"tags": ["perl", "browser", "command-line", "cgi"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1477503526, "post_id": 40268691, "comment_id": 67797609, "body": "try checking for errors in your connect call: <code>connect($dsn, &quot;root&quot;, &quot;...&quot;, {RaiseError =&gt; 1}) or die $DBI::errstr;</code>"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1477503626, "post_id": 40268691, "comment_id": 67797668, "body": "...and I&#39;d recommend creating a new user specific to the db, instead of using root, particularly for a web service."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477508022, "post_id": 40268691, "comment_id": 67800180, "body": "<i>Not working</i> is not the very best problem description. Do you get a 500 error or simply no output on client side? Did you have a look at your webserver&#39;s error.log? What&#39;s in there?"}, {"owner": {"reputation": 23, "user_id": 3535685, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000037521199/picture?type=large", "display_name": "Haris", "link": "https://stackoverflow.com/users/3535685/haris"}, "edited": false, "score": 0, "creation_date": 1477508145, "post_id": 40268691, "comment_id": 67800241, "body": "<code>my $dbh = DBI-&gt;connect($dsn, &quot;root&quot;, &quot;bukanjombloboy&quot;, {RaiseError =&gt; 1}) or die $DBI::errstr;</code> I try this but still not working."}, {"owner": {"reputation": 23, "user_id": 3535685, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000037521199/picture?type=large", "display_name": "Haris", "link": "https://stackoverflow.com/users/3535685/haris"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477508236, "post_id": 40268691, "comment_id": 67800286, "body": "@PerlDuck there is no output on the page and no error given in webserver&#39;s error.log"}, {"owner": {"reputation": 23, "user_id": 3535685, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000037521199/picture?type=large", "display_name": "Haris", "link": "https://stackoverflow.com/users/3535685/haris"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477508654, "post_id": 40268691, "comment_id": 67800504, "body": "@PerlDuck I think I found the problem. I checked error.log and I found this <code>install_driver(mysql) failed: Can&#39;t load &#39;C:&#47;Strawberry&#47;perl&#47;vendor&#47;lib&#47;auto&#47;DBD&#47;mysql&#47;mysql.xs.dll&#39; for module DBD::mysql: load_file:The specified module could not be found at C:&#47;Strawberry&#47;perl&#47;lib&#47;DynaLoader.pm line 193.</code> what probably cause this problem ? I have checked MySQL.xs.dll"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4261560"}, "is_accepted": false, "score": 0, "last_activity_date": 1477505354, "creation_date": 1477505354, "answer_id": 40269330, "question_id": 40268691, "link": "https://stackoverflow.com/questions/40268691/perl-print-syntax-not-working-when-run-on-browser-cgi/40269330#40269330", "title": "Perl print syntax not working when run on browser CGI", "body": "<p>It could be a issue with the EOL, in the line:</p>\n\n<pre><code>my $dbh = DBI-&gt;connect ($dsn, \"root\", \"bukanjombloboy\");\n</code></pre>\n\n<p>Check all your EOL are equal in all lines.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 3535685, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000037521199/picture?type=large", "display_name": "Haris", "link": "https://stackoverflow.com/users/3535685/haris"}, "is_accepted": false, "score": 0, "last_activity_date": 1477509001, "creation_date": 1477509001, "answer_id": 40270353, "question_id": 40268691, "link": "https://stackoverflow.com/questions/40268691/perl-print-syntax-not-working-when-run-on-browser-cgi/40270353#40270353", "title": "Perl print syntax not working when run on browser CGI", "body": "<p>I have found the solution.\nThe problem is APACHE webserver doesn't have permission to access the library so I have to run XAMPP on administrator mode.</p>\n"}], "owner": {"reputation": 23, "user_id": 3535685, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000037521199/picture?type=large", "display_name": "Haris", "link": "https://stackoverflow.com/users/3535685/haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477509001, "creation_date": 1477503238, "question_id": 40268691, "link": "https://stackoverflow.com/questions/40268691/perl-print-syntax-not-working-when-run-on-browser-cgi", "title": "Perl print syntax not working when run on browser CGI", "body": "<p><code>print</code> syntax not working after <code>my $dbh = DBI-&gt;connect($dsn, \"username\", \"password\");</code> has been called. But when I put print syntax on the top of <code>my $dbh = DBI-&gt;connect($dsn, \"username\", \"password\");</code> <code>print</code> work properly. This case happen when I run this code through browser using CGI and when I run this code in command-line both work properly.</p>\n\n<p>Here are the code:</p>\n\n<pre><code>#!\"C:\\Strawberry\\perl\\bin\\perl.exe\"\nuse CGI qw(:standard);\nuse DBI;\nuse JSON;\n\nprint header(\"application/json\");\n\nmy $dsn = \"DBI:mysql:database=webservices;host=localhost;port=3306\";\n\nprint \"test\"; #work properly\nmy $dbh = DBI-&gt;connect($dsn, \"root\", \"bukanjombloboy\");\nprint \"test\"; #not working    \n\nmy $result = $dbh-&gt;prepare(\"SELECT * FROM news\");\n$result-&gt;execute();\n\nmy $json_text = to_json($result-&gt;fetchall_arrayref());\nprint $json_text;\n\n$dbh-&gt;disconnect();\n</code></pre>\n\n<p>Sorry for my bad English, thanks anyway.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477499744, "post_id": 40266503, "comment_id": 67795568, "body": "Notes. (1) If you match on <code>$_</code> you don&#39;t need to write it -- <code>while (&#47;...&#47;xg)</code> will do.  (Nothing really wrong with having <code>$_</code> either.)  (2) You want all matches in a string -- <code>push @array, &#47;...&#47;xg;</code>.  The <code>m&#47;</code> (match operator) returns a list of matches. You don&#39;t have to go one by one."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 2217903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/us1b5.jpg?s=128&g=1", "display_name": "ardavey", "link": "https://stackoverflow.com/users/2217903/ardavey"}, "is_accepted": true, "score": 2, "last_activity_date": 1477498462, "last_edit_date": 1477498462, "creation_date": 1477497990, "answer_id": 40267137, "question_id": 40266503, "link": "https://stackoverflow.com/questions/40266503/perl-perl-regex-for-extracting-values-from-complex-lines/40267137#40267137", "title": "Perl: perl regex for extracting values from complex lines", "body": "<p>You are catching every integer because your regex has no restrictions on which characters can (or can not) come before/after the integer.  Remember that the <a href=\"http://perldoc.perl.org/perlre.html#%2Fx\" rel=\"nofollow\"><code>/x</code> modifier</a> only serves to allow whitespace/comments inside your pattern for readability.</p>\n\n<p>Without knowing a bit more about the possible structure of your output data, this modification achieves the desired output:</p>\n\n<pre><code>  while ( $_ =~ m! [^[{/\\w] ( [+-]?\\d+ ) [^/\\w]!xg ) {\n    push @array, ($1);\n  }\n</code></pre>\n\n<p>I have added rules before and after the integer to exclude certain characters.  So now, we will only capture if:</p>\n\n<ul>\n<li>There is no <code>[</code>, <code>{</code>, <code>/</code>, or <em>word</em> character immediately before the number</li>\n<li>There is no <code>/</code> or <em>word</em> character immediately after the number</li>\n</ul>\n\n<p>If your data could have 2-digit numbers in the <code>{ N}</code> blocks (e.g. <code>PCH {12}</code>) then this will not capture those and the pattern will need to become much more complex.  This solution is therefore quite brittle, without knowing more of the rules about your target data.</p>\n"}], "owner": {"reputation": 13, "user_id": 7075916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbb0e61cc93eed4da28cb3d6454bd6b?s=128&d=identicon&r=PG&f=1", "display_name": "pros89", "link": "https://stackoverflow.com/users/7075916/pros89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 40267137, "answer_count": 1, "score": 1, "last_activity_date": 1477498462, "creation_date": 1477496212, "last_edit_date": 1477496254, "question_id": 40266503, "link": "https://stackoverflow.com/questions/40266503/perl-perl-regex-for-extracting-values-from-complex-lines", "title": "Perl: perl regex for extracting values from complex lines", "body": "<p>Input log file:</p>\n\n<pre><code> Nservdrx_cycle 4       servdrx4_cycle\n HCS_cellinfo_st[10]     (type = (LTE { 2}),cell_param_id = (28)\n freq_info =  (10560),band_ind = (rsrp_rsrq{ -1}),Qoffset1 = (0)\n Pcompensation = (0),Qrxlevmin = (-20),cell_id = (7), \n agcreserved{3} = ({ 0, 0, 0 }))    \n channelisation_code1   16/5 { 4}   channelisation_code1\n sync_ul_info_st_   (availiable_sync_ul_code = (15),uppch_desired_power = \n (20),power_ramping_step = (3),max_sync_ul_trans = (8),uppch_position_info =\n (0))\n trch_type  PCH { 7}    trch_type8      \n last_report    0   zeroth bit\n</code></pre>\n\n<p>I was trying to extract only integer for my above inputs but I am facing some\n  issue with if the string contain integer at the beginning and at the end </p>\n\n<p>For ( e.g agcreserved{3},HCS_cellinfo_st[10],Qoffset1) \n  here I don't want to ignore {3},[10] and 1 but in my code it does.\n  since I was extracting only integer.</p>\n\n<p>Here I have written simple regex for extracting only integer.</p>\n\n<p>MY SIMPLE CODE:</p>\n\n<pre><code> use strict;\n use warnings;\n my $Ipfile  = 'data.txt';\n open my $FILE, \"&lt;\", $Ipfile or die \"Couldn't open input file: $!\";\n my @array;\n while(&lt;$FILE&gt;)\n {\n  while ($_ =~ m/( [+-]?\\d+ )/xg)\n  { \n   push @array, ($1);\n  }\n\n }\nprint \"@array \\n\";\n</code></pre>\n\n<p>output what I am getting for above inputs:</p>\n\n<blockquote>\n  <p>4 4 10 2 28 10560 -1 1 0 0 -20 7 3 0 0 0 1 16 5 4 1 15 20 3 8 0 7 8 0</p>\n</blockquote>\n\n<p>expected output:</p>\n\n<blockquote>\n  <p>4 2 28 10560 -1 0 0 -20 7 0 0 0 4 15 20 3 8 0 7 0</p>\n</blockquote>\n\n<p>If  some body can help me with explanation ?</p>\n"}, {"tags": ["regex", "perl", "awk", "sed", "quotes"], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 2447053, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2cbb8685bba7ea9d52ab96e7f49a9ca4?s=128&d=identicon&r=PG", "display_name": "BDR", "link": "https://stackoverflow.com/users/2447053/bdr"}, "edited": false, "score": 0, "creation_date": 1477496333, "post_id": 40266009, "comment_id": 67793391, "body": "Wow, what a quick and efficient answer ! Thanks for the explanation also. Is there a good documentation of all parameters available (like SKIP, ...) ?"}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "reply_to_user": {"reputation": 194, "user_id": 2447053, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2cbb8685bba7ea9d52ab96e7f49a9ca4?s=128&d=identicon&r=PG", "display_name": "BDR", "link": "https://stackoverflow.com/users/2447053/bdr"}, "edited": false, "score": 0, "creation_date": 1477497181, "post_id": 40266009, "comment_id": 67793956, "body": "see <a href=\"http://www.rexegg.com/backtracking-control-verbs.html\" rel=\"nofollow noreferrer\">rexegg.com/backtracking-control-verbs.html</a> and <a href=\"http://www.rexegg.com/regex-best-trick.html\" rel=\"nofollow noreferrer\">rexegg.com/regex-best-trick.html</a>"}], "tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": true, "score": 2, "last_activity_date": 1477548637, "last_edit_date": 1495535252, "creation_date": 1477494841, "answer_id": 40266009, "question_id": 40265880, "link": "https://stackoverflow.com/questions/40265880/replace-spaces-differently-depending-on-outside-or-inside-single-quotes/40266009#40266009", "title": "Replace spaces differently depending on outside or inside single quotes", "body": "<pre><code>$ s=\"active=1 'oldest active'=0s disabled=0 'function call'=0\"\n$ echo \"$s\" | perl -pe \"s/'[^']*'(*SKIP)(*F)| /|/g; s/ /_/g\"\nactive=1|'oldest_active'=0s|disabled=0|'function_call'=0\n</code></pre>\n\n<p>Two step replacement:</p>\n\n<ul>\n<li>First, <code>'[^']*'(*SKIP)(*F)</code> will skip all patterns surrounded by <code>'</code> and replace the remaining spaces with <code>|</code></li>\n<li>Second, the spaces now left inside <code>'</code> will be replaced with <code>_</code></li>\n</ul>\n\n<p><br>\nAlternate solution:</p>\n\n<pre><code>$ echo \"$s\" | perl -pe \"s/'[^']*'/$&amp; =~ s| |_|gr/ge; s/ /|/g\"\nactive=1|'oldest_active'=0s|disabled=0|'function_call'=0\n</code></pre>\n\n<ul>\n<li>Inspired from <a href=\"https://stackoverflow.com/a/40249679/4082052\">this answer</a></li>\n<li><code>'[^']*'/$&amp; =~ s| |_|gr/ge</code> replace all spaces in matched pattern <code>'[^']*'</code> using another substitute command. The <code>e</code> modifier allows using command instead of string in replacement section</li>\n<li>the remaining spaces are then taken care with <code>s/ /|/g</code></li>\n</ul>\n\n<p><br>\nFurther reading:</p>\n\n<ul>\n<li><a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlre.html</a></li>\n<li><a href=\"http://www.rexegg.com/backtracking-control-verbs.html\" rel=\"nofollow noreferrer\">http://www.rexegg.com/backtracking-control-verbs.html</a></li>\n<li><a href=\"http://www.rexegg.com/regex-best-trick.html\" rel=\"nofollow noreferrer\">http://www.rexegg.com/regex-best-trick.html</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1477495777, "creation_date": 1477495777, "answer_id": 40266348, "question_id": 40265880, "link": "https://stackoverflow.com/questions/40265880/replace-spaces-differently-depending-on-outside-or-inside-single-quotes/40266348#40266348", "title": "Replace spaces differently depending on outside or inside single quotes", "body": "<p>We can use the regular expression inside the loop.</p>\n\n<pre><code>$str = \"active=1 'oldest active'=0s disabled=0 'function call'=0\";\nprint \"\\nBEF: $str\\n\";\n$str =~s#active=1 'oldest active'=0s disabled=0 'function call'=0# my $tmp=$&amp;; $tmp=~s/\\'([^\\']*)\\'/my $tes=$&amp;; $tes=~s{ }{\\_}g; ($tes)/ge; $tmp=~s/ /\\|/g; ($tmp); #ge;\nprint \"\\nAFT: $str\\n\";\n</code></pre>\n\n<p>May be some short ways will be there apart from this.</p>\n"}, {"comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1477498447, "post_id": 40266592, "comment_id": 67794808, "body": "Good catch @Sundeep. It is fixed now."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1477498432, "last_edit_date": 1592644375, "creation_date": 1477496484, "answer_id": 40266592, "question_id": 40265880, "link": "https://stackoverflow.com/questions/40265880/replace-spaces-differently-depending-on-outside-or-inside-single-quotes/40266592#40266592", "title": "Replace spaces differently depending on outside or inside single quotes", "body": "<p>Using gnu awk <code>FPAT</code>, you can do this:</p>\n<pre><code>s=&quot;active=1 'oldest active'=0s disabled=0 'function call'=0&quot;\n\nawk -v OFS=&quot;|&quot; -v FPAT=&quot;'[^']*'[^[:blank:]]*|[^[:blank:]]+&quot; '{\n   for (i=1; i&lt;=NF; i++) gsub(/[[:blank:]]/, &quot;_&quot;, $i)} 1' &lt;&lt;&lt; &quot;$s&quot;\n\nactive=1|'oldest_active'=0s|disabled=0|'function_call'=0\n</code></pre>\n<ul>\n<li>In <code>FPAT</code> regex we use alternation to create fields of all single-quoted values+non-space value i.e. <code>'[^']*'[^[:blank:]]*</code> OR non-whitespace values i.e. <code>[^[:blank:]]+</code> from input.</li>\n<li>Using <code>gsub</code> we just replace all spaces with <code>_</code> since we will only get spaces inside single quotes in all the fields.</li>\n<li>Finally using <code>OFS='|'</code> we delimit output with <code>|</code></li>\n</ul>\n<p><strong>Reference:</strong> <a href=\"https://www.gnu.org/s/gawk/manual/gawk.pdf\" rel=\"nofollow noreferrer\">Effective AWK Programming</a></p>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 1, "last_activity_date": 1477497779, "creation_date": 1477497779, "answer_id": 40267066, "question_id": 40265880, "link": "https://stackoverflow.com/questions/40265880/replace-spaces-differently-depending-on-outside-or-inside-single-quotes/40267066#40267066", "title": "Replace spaces differently depending on outside or inside single quotes", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -r \":a;s/^([^']*('[^ ']*')*[^']*'[^' ]*) /\\1_/;ta;y/ /|/\" file\n</code></pre>\n\n<p>This first replaces all spaces in  quoted strings by <code>_</code>'s and then translates the remaining spaces to <code>|</code>'s.</p>\n"}, {"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1477532317, "post_id": 40268189, "comment_id": 67808884, "body": "no need to use double quotes... <code>perl -047 -pe &#39;($.%2)?s&#47; &#47;|&#47;g:s&#47; &#47;_&#47;g;&#39;</code>"}, {"owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1477680895, "post_id": 40268189, "comment_id": 67880154, "body": "true. sign of a bash amateur."}], "tags": [], "owner": {"reputation": 543, "user_id": 2751338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce5ca563d190132ed3a654d33593dc?s=128&d=identicon&r=PG&f=1", "display_name": "albe", "link": "https://stackoverflow.com/users/2751338/albe"}, "is_accepted": false, "score": 1, "last_activity_date": 1477501399, "creation_date": 1477501399, "answer_id": 40268189, "question_id": 40265880, "link": "https://stackoverflow.com/questions/40265880/replace-spaces-differently-depending-on-outside-or-inside-single-quotes/40268189#40268189", "title": "Replace spaces differently depending on outside or inside single quotes", "body": "<p>@anubhava's solution calls to mind a old-school perl solution:</p>\n\n<pre><code>$ echo $s | perl -047 -pe \"(\\$.%2)?s/ /|/g:s/ /_/g;\"\nactive=1|'oldest_active'=0s|disabled=0|'function_call'=0\n</code></pre>\n\n<p>divide the lines by single quotes (047) and sub based on even/odd.</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1477503828, "creation_date": 1477503828, "answer_id": 40268853, "question_id": 40265880, "link": "https://stackoverflow.com/questions/40265880/replace-spaces-differently-depending-on-outside-or-inside-single-quotes/40268853#40268853", "title": "Replace spaces differently depending on outside or inside single quotes", "body": "<pre><code>$ awk -F\\' '{OFS=FS; for (i=1;i&lt;=NF;i++) gsub(/ /,(i%2?\"|\":\"_\"),$i)}1' file\nactive=1|'oldest_active'=0s|disabled=0|'function_call'=0\n</code></pre>\n"}], "owner": {"reputation": 194, "user_id": 2447053, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2cbb8685bba7ea9d52ab96e7f49a9ca4?s=128&d=identicon&r=PG", "display_name": "BDR", "link": "https://stackoverflow.com/users/2447053/bdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 1, "accepted_answer_id": 40266009, "answer_count": 6, "score": 2, "last_activity_date": 1477548637, "creation_date": 1477494487, "last_edit_date": 1477497622, "question_id": 40265880, "link": "https://stackoverflow.com/questions/40265880/replace-spaces-differently-depending-on-outside-or-inside-single-quotes", "title": "Replace spaces differently depending on outside or inside single quotes", "body": "<p>I have input which has some fields </p>\n\n<ul>\n<li>separated by spaces, </li>\n<li>some other are enclosed in quotes and also seperated by spaces</li>\n</ul>\n\n<p>Here is an example input:</p>\n\n<pre><code>active=1 'oldest active'=0s disabled=0 'function call'=0\n</code></pre>\n\n<p>I would like to replace :</p>\n\n<ul>\n<li>all spaces outside quotes by <code>|</code> and </li>\n<li>all inside quotes by <code>_</code> </li>\n</ul>\n\n<p>Output would be:</p>\n\n<pre><code>active=1|'oldest_active'=0s|disabled=0|'function_call'=0\n</code></pre>\n\n<p>I tried different solutions with <code>sed</code> or <code>perl</code> found on the web but did not managed to do want I want.</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "edited": false, "score": 1, "creation_date": 1477496138, "post_id": 40264779, "comment_id": 67793272, "body": "Usually problems with speed of XML parsing are related to incorrect choicing  XML parser type (DOM based or event based). But in your situation it seems that size of xml file is not too huge to affect performance. Also try to examine what amount of memory is used by your script."}, {"owner": {"reputation": 303, "user_id": 5765277, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-swG-f0kZpSA/AAAAAAAAAAI/AAAAAAAAANw/PZrFjfmUSy0/photo.jpg?sz=128", "display_name": "VolleyballAddictSandiego", "link": "https://stackoverflow.com/users/5765277/volleyballaddictsandiego"}, "reply_to_user": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "edited": false, "score": 0, "creation_date": 1477582742, "post_id": 40264779, "comment_id": 67835839, "body": "There&#39;s no doubt about it, the childNodes approach is faster than the findValue approach, by a factor of 15 times. I have another xml file with 30,000 rows of 30 fields each, and it took 15 seconds using childNodes, and 3.7 minutes using findValue."}, {"owner": {"reputation": 303, "user_id": 5765277, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-swG-f0kZpSA/AAAAAAAAAAI/AAAAAAAAANw/PZrFjfmUSy0/photo.jpg?sz=128", "display_name": "VolleyballAddictSandiego", "link": "https://stackoverflow.com/users/5765277/volleyballaddictsandiego"}, "reply_to_user": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "edited": false, "score": 0, "creation_date": 1477886446, "post_id": 40264779, "comment_id": 67927867, "body": "Check this out. (1) restart windows PC.  (2) run perl script using strawberry perl. duration = 186 seconds.  (3) run perl script using strawberry perl again. duration = 26 seconds. (4) restart windows pc. (5) run perl script using strawberry perl. (6) duration = 186 seconds.  So the lesson learned here is that xml file memory caching plays a major role in how long it takes to run the script."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 5765277, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-swG-f0kZpSA/AAAAAAAAAAI/AAAAAAAAANw/PZrFjfmUSy0/photo.jpg?sz=128", "display_name": "VolleyballAddictSandiego", "link": "https://stackoverflow.com/users/5765277/volleyballaddictsandiego"}, "edited": false, "score": 1, "creation_date": 1477506089, "post_id": 40266756, "comment_id": 67799044, "body": "sounds like a reasonable explanation for the slowdown, but it surprises me, because in that inner-most FOREACH it should only be finding nodes inside one occurrence of an   &#39;array/item&#39;   element."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4261560"}, "reply_to_user": {"reputation": 303, "user_id": 5765277, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-swG-f0kZpSA/AAAAAAAAAAI/AAAAAAAAANw/PZrFjfmUSy0/photo.jpg?sz=128", "display_name": "VolleyballAddictSandiego", "link": "https://stackoverflow.com/users/5765277/volleyballaddictsandiego"}, "edited": false, "score": 1, "creation_date": 1477507157, "post_id": 40266756, "comment_id": 67799695, "body": "I looked a snippet code of the findvalue method and seems to be doing a lot of checks to match the search."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4261560"}, "is_accepted": false, "score": 1, "last_activity_date": 1477506585, "last_edit_date": 1477506585, "creation_date": 1477496955, "answer_id": 40266756, "question_id": 40264779, "link": "https://stackoverflow.com/questions/40264779/why-is-findvalue-incredibly-slow-libxml/40266756#40266756", "title": "Why is findvalue incredibly slow (LibXML)", "body": "<p>In your approach A, I think the findvalue method creates a loop that reads internally all content.\nWhat I would do is try to program something similar to the approach B</p>\n"}, {"tags": [], "owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "is_accepted": false, "score": 2, "last_activity_date": 1477519690, "last_edit_date": 1477519690, "creation_date": 1477517805, "answer_id": 40272497, "question_id": 40264779, "link": "https://stackoverflow.com/questions/40264779/why-is-findvalue-incredibly-slow-libxml/40272497#40272497", "title": "Why is findvalue incredibly slow (LibXML)", "body": "<p>I would try something more like:</p>\n\n<pre><code>use XML::Rules;\n\nmy @rules = (\n  item =&gt; [\n    'array' =&gt; sub {\n      my $item = $_[1];\n      print \"index: $item-&gt;{index} value: $item-&gt;{value}\\n\";\n    },\n  ],\n  'index,value' =&gt; 'content',\n  _default =&gt; undef,\n);\n\nmy $xr = XML::Rules-&gt;new(\n  rules =&gt; \\@rules,\n);\n$xr-&gt;parse($xml);\n# or\n$xr-&gt;parse_file($xml_file);\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 5765277, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-swG-f0kZpSA/AAAAAAAAAAI/AAAAAAAAANw/PZrFjfmUSy0/photo.jpg?sz=128", "display_name": "VolleyballAddictSandiego", "link": "https://stackoverflow.com/users/5765277/volleyballaddictsandiego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1477519690, "creation_date": 1477491582, "question_id": 40264779, "link": "https://stackoverflow.com/questions/40264779/why-is-findvalue-incredibly-slow-libxml", "title": "Why is findvalue incredibly slow (LibXML)", "body": "<p>There are 30,000 sets of data in array/item.\nOn my work server, (A) takes 30 minutes and (B) takes 5 seconds.\nOn my home computer, (A) and (B) both take 5 seconds.</p>\n\n<p>Why is (A) so slow on my work server?</p>\n\n<pre><code>===========================================\n                    foreach my $node2 ($node1-&gt;findnodes('array/item')){\n\n= APPROACH (A) ============================\n                        $xml_index = $node2-&gt;findvalue('index');\n                        $xml_value = $node2-&gt;findvalue('value');\n\n= APPROACH (B) ============================\n                        foreach my $node3 ($node2-&gt;childNodes){\n                            if($node3-&gt;nodeType() == XML_ELEMENT_NODE){\n                                if($node3-&gt;getName() eq \"index\"){\n                                    $xml_index=$node3-&gt;to_literal();\n                                }\n                                if($node3-&gt;getName() eq \"value\"){   \n                                    $xml_value=$node3-&gt;to_literal();\n                                }\n                            }\n                        }\n===========================================\n</code></pre>\n\n<p>And if you need to see the whole thing -</p>\n\n<pre><code>#! /usr/bin/perl -w\n\nuse warnings;\nuse strict;\nuse XML::LibXML;\nuse POSIX qw( strftime );\nuse File::Basename;\n\nmy $parser = XML::LibXML-&gt;new();\n\nmy $filebase; my $file; my $int; my $boolDone; my $str;\nmy $line; my $whole; my $name; my $inputfilename;my $inputfolder;my $outputfile; my $doc; my $dt;my $dt1;my $dt2;my $dto_type;\nmy $xml_index; my $xml_value;\n\n# INPUT\n$inputfolder = \".\";\nopendir (DIR, $inputfolder) or die $!;\n\nwhile ($inputfilename = readdir(DIR)){\n    # one loop per file\n    next if $inputfilename eq '.';\n    next if $inputfilename eq '..';\n\n    if(substr($inputfilename,-4) eq \".dto\"){\n        $doc = $parser-&gt;parse_file($inputfolder.\"/\".$inputfilename);\n        $dto_type = $doc-&gt;findvalue('object/class');\n\n        if($dto_type eq \"sshp.escs.cecs.mips.data.MipsPeerStatusObject_TImpl\"){\n            print \"Importing File: \".$inputfilename.\"\\n\";\n\n            #OUTPUT\n            $outputfile = &amp;ExtractFilenameNoExt($inputfilename);\n            $outputfile = $outputfile.\".csv\";\n            open(my $fh, '&gt;', $outputfile) or die \"Error '$outputfile' $!\";\n\n            #csv file headers\n            $line = \"index,\".\"value\";\n            print $fh $line.\"\\n\";\n\n            $int = 1;\n            foreach my $node1 ($doc-&gt;findnodes('object/field/object/field/object/field/object/field')){\n                if($node1-&gt;findvalue('name') eq \"statusData\"){\n                    foreach my $node2 ($node1-&gt;findnodes('array/item')){\n\n#                       $xml_index = $node2-&gt;findvalue('index');\n#                       $xml_value = $node2-&gt;findvalue('value');\n\n                        foreach my $node3 ($node2-&gt;childNodes){\n                            if($node3-&gt;nodeType() == XML_ELEMENT_NODE){\n                                if($node3-&gt;getName() eq \"index\"){\n                                    $xml_index=$node3-&gt;to_literal();\n                                }\n                                if($node3-&gt;getName() eq \"value\"){   \n                                    $xml_value=$node3-&gt;to_literal();\n                                }\n                            }\n                        }\n\n                        $line = $xml_index.\",\".$xml_value;\n                        print $fh $line.\"\\n\";\n                        $xml_index = \"\";\n                        $xml_value = \"\";\n\n                        if($int %10000 == 0){\n                            print $int.\"\\n\";\n                        }\n                        $int++;\n                    }\n                }\n            }\n            close $fh;\n        }\n    }\n}\n\nmy $elapsed_seconds = time - $^T;\nprint \"duration: \".$elapsed_seconds.\" seconds\";\n\nsub ExtractFilenameNoExt(){\n    my ($file) = @_;\n    $file = basename($file);\n    return substr($file,0,(length($file)-length(ExtractExt($file))-1));\n}\nsub ExtractExt{\n    my ($file) = @_;\n    return substr($file, rindex($file, '.') + 1);\n}\n</code></pre>\n\n<p>And if you need to see a sample of the xml -</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;object&gt;\n  &lt;field&gt;\n    &lt;object&gt;\n      &lt;field&gt;\n        &lt;object&gt;\n          &lt;field&gt;\n            &lt;object&gt;\n              &lt;field&gt;\n                &lt;name&gt;statusData&lt;/name&gt;\n                &lt;class&gt;[B&lt;/class&gt;\n                &lt;array&gt;\n                  &lt;class&gt;[B&lt;/class&gt;\n                  &lt;size&gt;30152&lt;/size&gt;\n                  &lt;item&gt;\n                    &lt;class&gt;java.lang.Byte&lt;/class&gt;\n                    &lt;index&gt;0&lt;/index&gt;\n                    &lt;value&gt;0&lt;/value&gt;\n                  &lt;/item&gt;\n                  &lt;item&gt;\n                    &lt;class&gt;java.lang.Byte&lt;/class&gt;\n                    &lt;index&gt;1&lt;/index&gt;\n                    &lt;value&gt;0&lt;/value&gt;\n                  &lt;/item&gt;\n                  &lt;item&gt;\n                    &lt;class&gt;java.lang.Byte&lt;/class&gt;\n                    &lt;index&gt;30150&lt;/index&gt;\n                    &lt;value&gt;-63&lt;/value&gt;\n                  &lt;/item&gt;\n                  &lt;item&gt;\n                    &lt;class&gt;java.lang.Byte&lt;/class&gt;\n                    &lt;index&gt;30151&lt;/index&gt;\n                    &lt;value&gt;-24&lt;/value&gt;\n                  &lt;/item&gt;\n                &lt;/array&gt;\n              &lt;/field&gt;\n            &lt;/object&gt;\n          &lt;/field&gt;\n        &lt;/object&gt;\n      &lt;/field&gt;\n    &lt;/object&gt;\n  &lt;/field&gt;\n&lt;/object&gt;\n</code></pre>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1477482763, "post_id": 40260201, "comment_id": 67783520, "body": "I am surprised that you got away with your previous question, but you at least showed some effort in trying something yourself. In this case you have simply thrown out a requirement, asking that your work be done for you. That is unacceptable. Stack Overflow is a place where programmers may ask their peers about some code or a problem that has defied their own efforts for a significant time: it isn&#39;t a place to get your work done for free, although there are people here who are thirsty for experience points who will help you out anyway (see below)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1477482993, "post_id": 40260201, "comment_id": 67783663, "body": "<i>&quot;As I am working on a Windows system, preferably I use a one-line Perl script like&quot;</i> Please explain yourself. Why do you think that a one-line program is more suited to Windows? In general, &quot;one-liners&quot; are much more difficult to debug and to understand, and should be attempted only by seasoned Perl programmers. You need a very good excuse not to write a proper program if you expect to use the code more than once, or to pass it on to other people."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477483217, "post_id": 40260201, "comment_id": 67783827, "body": "@Borodin I post much more comments than answer (I have a lot of example if you doubt that), even when my comment could be an acceptable answer, just because I feel like some people might suggest better answers... I would hardly call myself thirsty for reputation. As it happens I like writing one-liners, and the OP had made a decent effort on writing the question (even if he didn&#39;t show any code he had tried), so that&#39;s why I posted my answer."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477485528, "post_id": 40260201, "comment_id": 67785372, "body": "@Dada: I accept that, but I&#39;m not sure why you think a high ratio of comments to answers should be a good thing. Regarding &quot;one-liners&quot;, I can understand how they may interest you, but I don&#39;t think they should ever be written for public consumption unless the situation specifically requires it. After all, code golf is also interesting, but a &quot;golfed&quot; solution is an inexpressive one and should be confined to recreation. Most importantly, a &quot;one-liner&quot; involves the command-line processor, and a command that works on Windows won&#39;t work on Linux. A proper program stands a much better chance."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477485629, "post_id": 40260201, "comment_id": 67785452, "body": "@Dada: It looks superficially like this question requires a one-line solution, but I don&#39;t understand the OP&#39;s reasoning, and <code>perl -e &quot;...&quot;</code> has only disadvantages over <code>perl program.pl</code>. A lot of lessons can be learned from <a href=\"http://search.cpan.org/~jhi/perl-5.8.1/win32/bin/pl2bat.pl\" rel=\"nofollow noreferrer\"><b>pl2bat</b></a> if it&#39;s essential that the Perl code be in the same file as the shell commands."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477485951, "post_id": 40260201, "comment_id": 67785668, "body": "@Borodin I just meant that if I was thirsty for rep, I could post my comments as answers, and most of them would have positive score, but I don&#39;t (as a response to your ~&quot;see bellow, he just wants rep&quot; which wasn&#39;t true). As for one-liners, it&#39;s indeed not as robust and portable as code in files, but when the question is about getting an easy task done, I see nothing wrong with using a one-liner, it&#39;s faster to write, doesn&#39;t require creating a file (hmm, that may sound like a cheap argument)..."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477486129, "post_id": 40260201, "comment_id": 67785800, "body": "@Borodin And I feel like once you stop using oneliners, then well, you shouldn&#39;t use <code>-n</code> or <code>-i</code> as well because it&#39;s not as readable as a <code>for(@ARGV)</code> or creating the temporary file of <code>-i</code> on your own etc... I think understanding one-liners is only a problem for people who don&#39;t know perl, and who would anyway have a hard time understand the more verbose file version of the one-liner..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1477486179, "post_id": 40260201, "comment_id": 67785841, "body": "@Dada: I was most upset that you considered helping this OP, who wrote only a requirement and asked for a solution. They don&#39;t deserve your expertise. But in general I think you should post anything that looks like an answer as an answer. That way you will get proper peer scrutiny and appropriate privileges on the site."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477486412, "post_id": 40260201, "comment_id": 67785999, "body": "@Dada: I completely agree: no command-line switches should be used. Ever. The one exception is the awkward <code>-i</code> which doesn&#39;t even work on Windows without a parameter. The alternative is the awkward <code>$^I = &#39;.bak&#39;</code>, and since it&#39;s unusual and scary to want to overwrite your input file, I generally pretend that the facility doesn&#39;t exist."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477486548, "post_id": 40260201, "comment_id": 67786109, "body": "@Borodin I see what you mean, and even if we don&#39;t have the same opinion of one-liners, I think your point is valid. Usually, when someone is just asking for code I ask them what they&#39;ve tried, but this time I felt like the question wasn&#39;t that bad, at least he took the time to write it in an understandable way... Thanks for your comments anyway, I like hearing argument I didn&#39;t thought about. (I&#39;d like to continue this discussion a bit, should we move it to the chat?)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477487115, "post_id": 40260201, "comment_id": 67786503, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/126727/discussion-between-borodin-and-dada\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1477483336, "post_id": 40260352, "comment_id": 67783907, "body": "This uses the very nasty unbalanced braces that presume the structure of the code that <code>perl -ne</code> will generate. It&#39;s far from self-documenting and, while you may do what you like to yourself in a private place, please don&#39;t expose yourself to the more polite world at large. Also, <code>%h</code> is a hash: we know it&#39;s a hash because you index it with braces, so there&#39;s no need to call it <code>%h</code>. It contains counts, so perhaps <code>%c</code> or <code>%count</code> or <code>%n</code>?"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477483470, "post_id": 40260352, "comment_id": 67783990, "body": "@Borodin I guess you&#39;re right, I changed it to an <code>END</code> block, it will be more readable and robust. For the record (not an excuse), I learned to use <code>}{</code> because I saw it on one of your answers (long ago). I renamed the hash <code>count</code> has you suggested, thanks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477483672, "post_id": 40260352, "comment_id": 67784113, "body": "@Dada: Please give me a reference. I would be astonished if I indulged in such unpleasantries, but I guess we all have to grow up. It is the sort of thing that is pursued by people who like the awful <a href=\"https://metacpan.org/pod/perlsecret\" rel=\"nofollow noreferrer\">perlsecret</a> module; unfortunately its presence on CPAN gives it a lot of authority that it doesn&#39;t deserve"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477484348, "post_id": 40260352, "comment_id": 67784569, "body": "@Borodin It was months or years ago, I have no idea what was the question you were answering, but I&#39;m pretty sure it was one of your answers. But it doesn&#39;t matter, I agree that it&#39;s better to use an <code>END</code> block on Stackoverflow."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477485175, "post_id": 40260352, "comment_id": 67785128, "body": "@Dada: Thanks Let me know if you uncover it. I have cringed once or twice at some older answers of mine, so it&#39;s not impossible."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 1, "last_activity_date": 1477489694, "last_edit_date": 1495540897, "creation_date": 1477479149, "answer_id": 40260352, "question_id": 40260201, "link": "https://stackoverflow.com/questions/40260201/one-line-program-to-delete-files-with-few-header-lines/40260352#40260352", "title": "One-line program to delete files with few header lines", "body": "<p>Next time, please try to write some code by yourself to solve the problem, and only after come ask for help. You will learn more if you do that, and we won't feel like you're just asking us to write your code.<br>\nThe problem is very simple though, so here's a solution.</p>\n\n<p><strong>Note</strong> that this solution should be considered as a quick fix. Borodin suggested cleaner, easier to understand and more portable way to do this <a href=\"https://stackoverflow.com/a/40263070/4990392\">here</a>.</p>\n\n<p>I would suggest doing this with perl like this :</p>\n\n<pre><code>perl -nE \"$count{$ARGV}++ if /^&gt;/; END { unlink grep { $count{$_} &lt;= 3 } keys %count }\" *.fa\n</code></pre>\n\n<p>(for the record, I'm using double-quotes<code>\"</code> as the delimiter of the string since you are on windows, but if anyone wish to use this on an unix system, just change the double-quotes <code>\"</code> for some single-quotes<code>'</code>).</p>\n\n<p><strong>Explanations:</strong></p>\n\n<ul>\n<li><code>-n</code> surround the code with <code>while(&lt;&gt;){...}</code>, which will read the files one by one. </li>\n<li>With <code>$count{$ARGV}++ if /^&gt;/</code> we count the number of headers in each file : <code>$ARGV</code> holds the name of the file being read, and <code>/^&gt;/</code> is true only if the line starts with <code>&gt;</code>, ie. it's a header line.</li>\n<li>Finally ( the <code>END { .. }</code> part), we delete (with the function <code>unlink</code>) the files that have 3 headers or less : <code>keys %count</code> gives all the file names, and <code>grep { $count{$_} &lt;= 3 }</code> retains only the files that have 3 or less header lines to delete them.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1477487033, "creation_date": 1477487033, "answer_id": 40263070, "question_id": 40260201, "link": "https://stackoverflow.com/questions/40260201/one-line-program-to-delete-files-with-few-header-lines/40263070#40263070", "title": "One-line program to delete files with few header lines", "body": "<p>Use a program. \"One-liners\" are inscrutable, non-portable, and very hard to debug</p>\n\n<p>This does as you ask. I hope it's clear that I have commented out the <code>unlink</code> call for testing purposes: it would be a pain to regenerate the <code>*.fa</code> files each time</p>\n\n<p>You will probably want to change <code>'[0-9].fa'</code> to just <code>*.fa</code>. I had other files in my own directory that I didn't want to be considered</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nwhile ( my $file = glob '[0-9].fa' ) {\n\n    open my $fh, '&lt;', $file;\n    my $headers = grep /^&gt;/, &lt;$fh&gt;;\n\n    #unlink $file if $headers &lt;= 3;\n    print qq{deleting \"$file\"\\n} if $headers &lt;= 3;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>deleting \"2.fa\"\ndeleting \"3.fa\"\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 6721235, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/23fa68ad6b31e6f77364306a70edd954?s=128&d=identicon&r=PG&f=1", "display_name": "J.Carter", "link": "https://stackoverflow.com/users/6721235/j-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1477489694, "creation_date": 1477478731, "last_edit_date": 1495541342, "question_id": 40260201, "link": "https://stackoverflow.com/questions/40260201/one-line-program-to-delete-files-with-few-header-lines", "title": "One-line program to delete files with few header lines", "body": "<p>This is the next part of my earlier question <a href=\"https://stackoverflow.com/questions/40256438/perl-one-liner-to-keep-only-desired-lines\"><em>perl one-liner to keep only desired lines</em></a>. Here I have many <code>*.fa</code> files in a folder.</p>\n\n<p>Suppose for three files: <code>1.fa</code>, <code>2.fa</code>, <code>3.fa</code></p>\n\n<p>The contents of them are as follows:</p>\n\n<h3>1.fa</h3>\n\n<pre><code>&gt;djhnk_9\nabfgdddcfdafaf\nygdugidg\n&gt;kjvk.80\njdsfkdbfdkfadf\n&gt;jnck_q2\nfdgsdfjghsjhsfddf\n&gt;7ytiu98\nihdlfwdfjdlfl]ol\n</code></pre>\n\n<h3>2.fa</h3>\n\n<pre><code>&gt;cj76\ndkjfhkdjcfhdjk\n&gt;67q32\nnscvsdkvklsflplsad\n&gt;kbvbk\ncbjfdikjbfadkjfbka\n</code></pre>\n\n<h3>3.fa</h3>\n\n<pre><code>&gt;1290.5\nmnzmnvjbsdjb\n</code></pre>\n\n<p>The lines that start with a <code>&gt;</code> are the <em>headers</em> and the rest are the <em>feature</em> lines.</p>\n\n<p>I want to delete those files that have 3 or fewer header lines. Here, file <code>2.fa</code> and file <code>3.fa</code> should be deleted.</p>\n\n<p>As I am working on a Windows system, preferably I use a one-line Perl script like:</p>\n\n<pre><code>for %%F in (\"*.fa\") do  perl ...\n</code></pre>\n\n<p>Is there a one-line program for that?</p>\n"}, {"tags": ["perl", "gmail-api"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1477487602, "post_id": 40261922, "comment_id": 67786843, "body": "I had a comment typed out two hours ago about the module being 10 years old, but I think I went to lunch and forgot to hit enter... :P"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1477483821, "creation_date": 1477483821, "answer_id": 40261922, "question_id": 40259860, "link": "https://stackoverflow.com/questions/40259860/how-to-mark-mails-in-gmail-as-read-and-delete-them-using-mailwebmailgmail/40261922#40261922", "title": "How to mark mails in Gmail as &#39;read&#39; and Delete them using Mail::Webmail::Gmail, using Perl script?", "body": "<p><a href=\"https://metacpan.org/pod/distribution/Mail-Webmail-Gmail/lib/Mail/Webmail/Gmail.pm\" rel=\"nofollow\">That module</a> was last updated in 2006 and the documentation says:</p>\n\n<blockquote>\n  <p>Because Gmail is currently in Beta testing, expect this module to break as they make updates to thier interface. I will attempt to keep this module in line with the changes they make, but, if after updating to the newest version of this module, the feature that you require still doesn't work, please contact me with the issue.</p>\n</blockquote>\n\n<p>You could try contacting the author, but with ten years since the last release, it looks like he lost interest.</p>\n\n<p>But GMail has an IMAP interface. So you should be able to do what you want with a module like <a href=\"https://metacpan.org/pod/Mail::IMAPClient\" rel=\"nofollow\">Mail::IMAPClient</a>.</p>\n"}], "owner": {"reputation": 516, "user_id": 2224218, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f7db38a8b0010381be6cde932b0f8b7b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/2224218/subhash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1481098758, "creation_date": 1477477828, "last_edit_date": 1481098758, "question_id": 40259860, "link": "https://stackoverflow.com/questions/40259860/how-to-mark-mails-in-gmail-as-read-and-delete-them-using-mailwebmailgmail", "title": "How to mark mails in Gmail as &#39;read&#39; and Delete them using Mail::Webmail::Gmail, using Perl script?", "body": "<p>Using Perl , I need to read mails in Gmail, mark them as 'read' and delete them.</p>\n\n<p>I have tried the below code as given in <a href=\"http://search.cpan.org/dist/Mail-Webmail-Gmail/lib/Mail/Webmail/Gmail.pm\" rel=\"nofollow\">http://search.cpan.org/dist/Mail-Webmail-Gmail/lib/Mail/Webmail/Gmail.pm</a></p>\n\n<pre><code>use Mail::Webmail::Gmail;\nuse Data::Dumper;\n\nmy $gmail = Mail::Webmail::Gmail-&gt;new(\n  username =&gt; 'user@gmail.com', password =&gt; 'password',\n);\nprint Dumper $gmail;\n\nmy @labels = $gmail-&gt;get_labels();\nprint Dumper @labels;\n\nmy $messages = $gmail-&gt;get_messages( label =&gt; $labels[0] );\nprint Dumper $messages;\n</code></pre>\n\n<p>Not able to get the labels, messages.\nWhat is missing here ?</p>\n\n<p>Is there any other way I could achieve these tasks in Perl.</p>\n\n<p>Thanks in advance.\nSubhash</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1477473378, "post_id": 40258232, "comment_id": 67777680, "body": "You could ship your own shell environment with the product. Essentially a script that sets all the right versions and then runs a bash. You start that first, and then launch the product from inside."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1477473883, "post_id": 40258232, "comment_id": 67778025, "body": "Also, you can define the settings declaratively, e.g. in a hash: <code>&#39;v0.1&#39; =&gt; { VAR1 =&gt; &#39;a&#39;, VAR2 =&gt; &#39;b&#39; }, &#39;v0.2&#39; =&gt; { VAR1 =&gt; &#39;c&#39;, VAR2 =&gt; &#39;d&#39; }</code> etc."}, {"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1477483253, "post_id": 40258232, "comment_id": 67783852, "body": "Thanks a lot ...for the inputs..."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1477555632, "post_id": 40263610, "comment_id": 67817393, "body": "Thank you neuhaus...will go through it."}, {"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "reply_to_user": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1477561374, "post_id": 40263610, "comment_id": 67820963, "body": "ok if you have questions about a particular detail, just post. If this solves your issue please mark the answer as solution. Thanks."}], "tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": true, "score": 0, "last_activity_date": 1477488500, "creation_date": 1477488500, "answer_id": 40263610, "question_id": 40258232, "link": "https://stackoverflow.com/questions/40258232/can-i-fix-a-component-version-to-a-product-release-in-perl/40263610#40263610", "title": "can i fix a component version to a product release in perl", "body": "<p>Put the environment variabales into a hash for every release.\nMake a list of these hashes for all releases.</p>\n\n<p>Then go through the list of hashes, look for the environment variables, if you find one, set the other ones. You're done. If not, go through the rest of the hash. If you didn't find anything, go to the next has in the list and repeat.</p>\n\n<p>Recommended reading: \"<em>perldoc perldata</em>\"</p>\n\n<p>I hope that's enough to get your started.</p>\n"}], "owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 40263610, "answer_count": 1, "score": 0, "last_activity_date": 1477488500, "creation_date": 1477473280, "question_id": 40258232, "link": "https://stackoverflow.com/questions/40258232/can-i-fix-a-component-version-to-a-product-release-in-perl", "title": "can i fix a component version to a product release in perl", "body": "<p>My problem is as follows: </p>\n\n<p>I have a system which consists of several components.\nEach release consists of versions for the components. Basically indicating to the end user that he has to set a list of environment variables to have comptabile and stable version of components.</p>\n\n<p>This needs user to specifically set all the components versions which is a pain as sometimes he might miss few as we have a huge list.</p>\n\n<p>The current solution i have is a very brute force algo where i check what version of a single component and setting the other environment variables for all other components. This needs user to set just one environment variable.\nBut the problem with this approach going forward would be a bunch of ifels in perl in my code which would only increase.</p>\n\n<pre><code>   if (defined $ENV{VARIABLE_NAME}) {\n      my $x = $ENV{$VARIABLE_NAME} ;\n      if ( $x =~ /version/){\n      $ENV{VAR1} = \"a\";\n      $ENV{VAR2} = \"b\";\n  } elsif (){} elsif(){}\n</code></pre>\n\n<p>}</p>\n\n<p>Is there a better approach...any inputs would be helpful.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1477470349, "post_id": 40257107, "comment_id": 67775701, "body": "The description of the problem is completely unclear to me.  What error are you getting?  Also, <i>please</i> <code>use warnings;</code> (and <code>use strict;</code>) -- with it you&#39;d be warned against the <i>slice</i> <code>@unique_names[$i]</code>, which should be the scalar <code>$unique_names[$i]</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477470711, "post_id": 40257107, "comment_id": 67775925, "body": "Why are you doing an if statement within an if statement and then again a foreach for the same array you did a foreach earlier? You are creating unnecessary loops. <code>$outputfolder</code> is used only once? <code>@uniquenames[$i] can be written as </code>$uniquenames[$I]` @files only used once, where is the rest of the script?"}, {"owner": {"reputation": 300, "user_id": 3414765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ceb9cda3259dc4a3f1b7a3b8098081c4?s=128&d=identicon&r=PG&f=1", "display_name": "Dodzik", "link": "https://stackoverflow.com/users/3414765/dodzik"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477470799, "post_id": 40257107, "comment_id": 67775974, "body": "@zdim I&#39;m using <code>strict</code> and <code>warnings</code>, but I ignored warning. After correction, it still doesn&#39;t work. Please read update to my post"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477470873, "post_id": 40257107, "comment_id": 67776020, "body": "Alright -- that would&#39;ve not been the reason.  But do use <code>$array[$i]</code>, I don&#39;t know of a reason not to."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 1, "creation_date": 1477470926, "post_id": 40257107, "comment_id": 67776052, "body": "again, how must we know where line 71 is? where is the rest of the script? or at least indicate where line 71 is."}, {"owner": {"reputation": 300, "user_id": 3414765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ceb9cda3259dc4a3f1b7a3b8098081c4?s=128&d=identicon&r=PG&f=1", "display_name": "Dodzik", "link": "https://stackoverflow.com/users/3414765/dodzik"}, "edited": false, "score": 0, "creation_date": 1477471280, "post_id": 40257107, "comment_id": 67776240, "body": "To be honest it&#39;s my first touch with perl.  Line 71 is <code>open(my $OUTFILE, &quot;&gt;&gt;&quot;, $outputFolder . $file_name) or die $!;</code>, please see comment in code above. I can upload whole code, but I don&#39;t think it&#39;s necessary since I checked values in arrays, and they are correct. I think this might be some trivial error, that I cannot see"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477471304, "post_id": 40257107, "comment_id": 67776254, "body": "ok, show me where $outputfolder is defined"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477471310, "post_id": 40257107, "comment_id": 67776260, "body": "@Dodzik  I don&#39;t see anything ... the error means that <code>$outputFolder . $file_name</code> doesn&#39;t translate into a valid file name at all.  Is the location you show a valid path?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477471480, "post_id": 40257107, "comment_id": 67776367, "body": "@Dodzik  Another comment, just so.  Since you don&#39;t use <code>$i</code>, iterate over the names: <code>foreach my $uniq_file (@unique_names) { ... }</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477471748, "post_id": 40257107, "comment_id": 67776555, "body": "@Dodzik A comment.  You can do: <code>my @data = grep { &#47;$uniq_file&#47; } @lines;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 3414765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ceb9cda3259dc4a3f1b7a3b8098081c4?s=128&d=identicon&r=PG&f=1", "display_name": "Dodzik", "link": "https://stackoverflow.com/users/3414765/dodzik"}, "edited": false, "score": 1, "creation_date": 1477473586, "post_id": 40257616, "comment_id": 67777824, "body": "Actually <code>&quot;&gt;&gt; $outputFolder.$file_name&quot;</code> solved my problem. Thanks!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 300, "user_id": 3414765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ceb9cda3259dc4a3f1b7a3b8098081c4?s=128&d=identicon&r=PG&f=1", "display_name": "Dodzik", "link": "https://stackoverflow.com/users/3414765/dodzik"}, "edited": false, "score": 2, "creation_date": 1477474131, "post_id": 40257616, "comment_id": 67778182, "body": "awesome. try to also use the first if as I did, it will reduce the number of loops created. that will effectively match $file with  <code>PT_FCT_Sales*.out</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1477483474, "post_id": 40257616, "comment_id": 67783991, "body": "I&#39;d change that to <code>open(my $OUTFILE, &#39;&gt;&gt;&#39;, &quot;$outputFolder.$file_name&quot;) or die ...</code>. The three-argument version of <code>open()</code> is inherently safer."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": true, "score": 0, "last_activity_date": 1477472244, "last_edit_date": 1477472244, "creation_date": 1477471461, "answer_id": 40257616, "question_id": 40257107, "link": "https://stackoverflow.com/questions/40257107/perl-invalid-argument-when-saving-file/40257616#40257616", "title": "Perl invalid argument when saving file", "body": "<p>here is a slightly better solution. Untested. so will edit and fix as I go along. Please provide where $outputfolder is defined.</p>\n\n<pre><code>foreach my $file (@Files){\nif ($file =~ /^PT_FCT_Sales.*\\.out$/i){\n        open(my $INFILE,  \"&lt;\", $file) or die $!;\n        @lines = &lt;$INFILE&gt;;\n        foreach (my $i = 0; $i &lt; @unique_names; $i++) {\n            my $file_name = join('', $unique_names[$i]);\n            my @data;\n            while (&lt;$INFILE&gt;) {\n                if ($line =~ $unique_names[$i] ) {\n                    push (@data, $line);\n                }\n            }\n            open(my $OUTFILE, \"&gt;&gt; $outputFolder.$file_name\") or die $!; #error appears here\n            print $OUTFILE @data;\n            close $OUTFILE;\n\n            }\n            close $INFILE or die \"Can't close input file\";\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 300, "user_id": 3414765, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ceb9cda3259dc4a3f1b7a3b8098081c4?s=128&d=identicon&r=PG&f=1", "display_name": "Dodzik", "link": "https://stackoverflow.com/users/3414765/dodzik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 40257616, "answer_count": 1, "score": 0, "last_activity_date": 1477472244, "creation_date": 1477469989, "last_edit_date": 1477471915, "question_id": 40257107, "link": "https://stackoverflow.com/questions/40257107/perl-invalid-argument-when-saving-file", "title": "Perl invalid argument when saving file", "body": "<p>I want to compare contents of two files in my script. In order to do so I'm loading files into arrays. First file contains unique names that I'm searching in second file. Problem isn't related to comparing, but then I have to save results into file, which name contains values from <code>@unique_names</code> array. Error appears in line where I'm creating file after comparison. \nExample of <code>$file_name</code> contents: <code>PT_FCT_Sales_20161003.out</code> and result of <code>print $outputFolder . $ file_name</code> is <code>c:\\Strawberry\\PT_FCT_Sales_20161003.out</code></p>\n\n<pre><code>foreach my $file (@Files){\n    if ($file =~ /out$/i){\n        if ($file =~ /PT_FCT_Sales_/i){\n            open(my $INFILE,  \"&lt;\", $file) or die $!;\n\n            @lines = &lt;$INFILE&gt;;\n\n            foreach (my $i = 0; $i &lt; @unique_names; $i++) {\n                my $file_name = join('', @unique_names[$i]);\n                #print $file_name;\n                my @data;\n                foreach $line (@lines) {\n                    if ($line =~ @unique_names[$i] ) {\n                        push (@data, $line);\n                    }\n                }\n\n                open(my $OUTFILE, \"&gt;&gt;\", $outputFolder . $file_name) or die $!; #error appears here\n                print $OUTFILE @data;\n                close $OUTFILE;\n\n            }\n            close $INFILE or die \"Can't close input file\";\n        }\n    }\n}\n</code></pre>\n\n<p>EDIT: Error says: Invalid argument at test.pl line 71,  line 6.\nPlease note this isn't whole script, just a cut off related to the problem. </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1477468158, "post_id": 40256523, "comment_id": 67774504, "body": "This works for the sample data. If there were non-digit characters it would not work as intended by the OP"}], "tags": [], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "is_accepted": false, "score": 1, "last_activity_date": 1477468641, "last_edit_date": 1477468641, "creation_date": 1477468024, "answer_id": 40256523, "question_id": 40256438, "link": "https://stackoverflow.com/questions/40256438/perl-one-liner-to-keep-only-desired-lines/40256523#40256523", "title": "perl one-liner to keep only desired lines", "body": "<p>This:</p>\n\n<pre><code>perl -ne 'print if /:\\s*(\\d+\\s*-\\s*\\d+\\s*,?\\s*)+\\s*$/' input.txt\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>NP_414685.4: 15-26, 131-138, 441-465\nNP_418580.2: 493-500\nNP_418780.2: 36-48, 44-66\nNP_418473.3: 1-19, 567-1093\n</code></pre>\n\n<p>I'm not sure if you want to match lines that are possibly like this:</p>\n\n<pre><code>NP_418580.2: 493-500, asdf\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>NP_418580.2: asdf\n</code></pre>\n\n<p>This answer will not print these lines, if given to it.</p>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 2, "last_activity_date": 1477468145, "creation_date": 1477468145, "answer_id": 40256556, "question_id": 40256438, "link": "https://stackoverflow.com/questions/40256438/perl-one-liner-to-keep-only-desired-lines/40256556#40256556", "title": "perl one-liner to keep only desired lines", "body": "<p>This way:</p>\n\n<pre><code>perl -i.bak -ne 'print if /:\\s+\\d+-\\d/' input.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1477502326, "last_edit_date": 1477502326, "creation_date": 1477468625, "answer_id": 40256708, "question_id": 40256438, "link": "https://stackoverflow.com/questions/40256438/perl-one-liner-to-keep-only-desired-lines/40256708#40256708", "title": "perl one-liner to keep only desired lines", "body": "<p>First, <code>print unless</code> means <code>print if not</code> -- opposite to what you want.</p>\n\n<p>More to the point, it doesn't make sense using both <code>-n</code> and <code>-p</code>, and when you do <code>-p</code> overrides the other.  While both of them open the input file(s) and set up the loop over lines, <code>-p</code> also prints <code>$_</code> for <em>every</em> iteration.  So with it you are reprinting every line.  See <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>.</p>\n\n<p>Finally, you seem to be deleting the <code>.bak</code> file ... ?  Then don't make it. Use just <code>-i</code></p>\n\n<p>Altogether</p>\n\n<pre><code>perl -i -ne 'print if /:\\s*\\d+\\s*-\\s*\\d+/' input.txt\n</code></pre>\n\n<p>If you do want to keep the backup file use <code>-i.bak</code> instead of <code>-i</code></p>\n\n<hr>\n\n<p>You can see the code equivalent to a one-liner with particular options with <a href=\"http://perldoc.perl.org/B/Deparse.html\" rel=\"nofollow noreferrer\">B::Deparse</a> (via <a href=\"http://perldoc.perl.org/O.html\" rel=\"nofollow noreferrer\">O</a> module)</p>\n\n<p>Try: <code>perl -MO=Deparse -ne 1</code> and <code>perl -MO=Deparse -pe 1</code></p>\n"}], "owner": {"reputation": 331, "user_id": 6721235, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/23fa68ad6b31e6f77364306a70edd954?s=128&d=identicon&r=PG&f=1", "display_name": "J.Carter", "link": "https://stackoverflow.com/users/6721235/j-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 40256708, "answer_count": 3, "score": 2, "last_activity_date": 1477502326, "creation_date": 1477467736, "question_id": 40256438, "link": "https://stackoverflow.com/questions/40256438/perl-one-liner-to-keep-only-desired-lines", "title": "perl one-liner to keep only desired lines", "body": "<p>I have a text file (input.txt) like this:</p>\n\n<pre><code>NP_414685.4: 15-26, 131-138, 441-465\nNP_418580.2: 493-500\nNP_418780.2: 36-48, 44-66\nNP_418345.2:\nNP_418473.3: 1-19, 567-1093\nNP_418398.2:\n</code></pre>\n\n<p>I want a perl one-liner that keeps only those lines in file where \":\" is followed by number range (that means, here, the lines containing \"NP_418345.2:\" and \"NP_418398.2:\" get deleted). For this I have tried: </p>\n\n<pre><code>perl  -ni -e \"print unless /: \\d/\" -pi.bak input.txt del input.txt.bak\n</code></pre>\n\n<p>But it shows exactly same output as the input file.\nWhat will be the exact pattern that I can match here?\nThanks</p>\n"}, {"tags": ["perl", "openssl", "centos6"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477464897, "post_id": 40248701, "comment_id": 67772676, "body": "Let me just get the question correct, you are trying to eliminate any whitespace from the password field in order to ensure it works? or specifically to make it work even if there is whitespace in the password?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477472468, "post_id": 40248701, "comment_id": 67777069, "body": "@user2082599 from the previous question and the description here, I believe the password may contain whitespace. If it does, the program fails because the whitespace gets lost in the command line arguments. And quoting it doesn&#39;t work."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477472496, "post_id": 40248701, "comment_id": 67777088, "body": "@James can you please highlight which of the arguments is the password? That&#39;s not clear to me."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477472527, "post_id": 40248701, "comment_id": 67777116, "body": "@simbabque: I&#39;m pretty sure it&#39;s <code>$args-&gt;{keypass}</code>."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1477473135, "post_id": 40248701, "comment_id": 67777508, "body": "BTW, note that passing passwords on the command line is generally considered insecure: if any untrusted users can run code on the same server (even under an unprivileged account), they can see the password simply by running <code>ps ax</code>. The <a href=\"https://www.openssl.org/docs/manmaster/apps/openssl.html#Pass-Phrase-Options\" rel=\"nofollow noreferrer\">openssl manual</a> notes this, and warns that <code>pass:</code> &quot;should only be used where security is not important.&quot;"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1477473633, "post_id": 40248701, "comment_id": 67777854, "body": "@IlmariKaronen the irony being that <i>ssl</i> sort of implies that security is important ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477473701, "post_id": 40248701, "comment_id": 67777904, "body": "You could try if <a href=\"https://v1.metacpan.org/pod/String::ShellQuote\" rel=\"nofollow noreferrer\">v1.metacpan.org/pod/String::ShellQuote</a> does the right thing for you."}], "answers": [{"comments": [{"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "edited": false, "score": 0, "creation_date": 1477489126, "post_id": 40261066, "comment_id": 67788084, "body": "The difficulty I have is that is all very unfamiliar to me.  I am hacking at a very old third party script written in a language of which I have only cursory knowledge; and whose original author has moved on and abandoned it.  I needed to get this to work with a few minor changes to the default values for key sizes and change the signature hash algorithms to meet current expectations.  Unfortunately for me I stumbled over this problem by accident and being me would like to get a proper solution.  The easy work-around is simply do not use a pass-phrase with white-space.  But that seems wrong."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "edited": false, "score": 0, "creation_date": 1477508750, "post_id": 40261066, "comment_id": 67800541, "body": "@JamesB.Byrne: Unfortunately, some of the parts that you&#39;ll need to modify are in the code that you replaced with <code>. . .</code> in your question. Specifically, there&#39;s presumably an IPC::Run <code>start()</code> call somewhere in there that you need to modify to take an array reference instead of a string. This does probably need at least basic familiarity with Perl. If you don&#39;t have that, your choices are basically 1) grab a good introductory Perl book and learn, 2) find someone else who knows more Perl than you do, or 3) give up, document the bug and move on."}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "edited": false, "score": 0, "creation_date": 1477513252, "post_id": 40261066, "comment_id": 67802847, "body": "First I need to establish our replacement PKI. At the moment it appears that this will not be a problem since I seem to have surmounted or evaded the roadblocks I encountered.  A rewrite of the code to switch the entire program from string to array arguments is not possible until I find the time, which resource is in minuscule supply.  I can change the pass-phrase on the key directly using openssl which gives the desired result and avoids having to reprogram the script -- a process that would no doubt uncover other warts."}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1477481132, "last_edit_date": 1492086990, "creation_date": 1477481132, "answer_id": 40261066, "question_id": 40248701, "link": "https://stackoverflow.com/questions/40248701/how-does-one-provide-ipcrun-with-an-argument-set-by-user-input-that-contains-e/40261066#40261066", "title": "How does one provide IPC::Run with an argument set by user input that contains embedded whitespace", "body": "<p>To answer your literal question, let me <a href=\"http://search.cpan.org/perldoc?IPC%3A%3ARun#Syntax\" rel=\"nofollow noreferrer\">quote the IPC::Run manual</a>:</p>\n\n<blockquote>\n  <p>\"<code>run()</code>, <code>start()</code>, and <code>harness()</code> can all take a harness specification as input. A harness specification is either a single string to be passed to the systems' shell [&hellip;] or a list of commands, io operations, and/or timers/timeouts to execute.\"</p>\n</blockquote>\n\n<p>To prevent the command arguments being parsed by the shell (which is what's causing things to break when the arguments contain spaces), you should not pass them as a single string, but as a reference to an array that contains each individual argument as a single string, something like this:</p>\n\n<pre><code>my @cmd = (\"-out\", $args-&gt;{keyfile}, $args-&gt;{keysize});\nunshift @cmd, (\"-des3\", \"-passout\", \"pass:$args-&gt;{keypass}\") if defined $args-&gt;{keypass};\n# ...\nmy $h = start [\"openssl\", \"genrsa\", @cmd], \\$in, \\$out;  # or something equivalent\n</code></pre>\n\n<p>(The code you've posted seems to be using IPC::Run via some custom interface layer; since you haven't shown us exactly what that layer looks like, I've replace it with a simple call to IPC::Run::start.)</p>\n\n<hr>\n\n<p>In any case, note that passing passwords on the command line is generally considered insecure: if any untrusted users can run code on the same server (even under an unprivileged account), they can see the password simply by running <code>ps ax</code>. The <a href=\"https://www.openssl.org/docs/manmaster/apps/openssl.html#Pass-Phrase-Options\" rel=\"nofollow noreferrer\">openssl manual</a> notes this, and warns that <code>pass:<i>password</i></code> \"should only be used where security is not important.\"</p>\n\n<p>A safer alternative would be to <a href=\"https://unix.stackexchange.com/questions/29111/safe-way-to-pass-password-for-1-programs-in-bash\">send the password over a separate file descriptor</a>.  Conveniently, IPC::Run makes this pretty easy:</p>\n\n<pre><code>my @cmd = (\"-out\", $args-&gt;{keyfile}, $args-&gt;{keysize});\nunshift @cmd, (\"-des3\", \"-passout\", \"fd:3\") if defined $args-&gt;{keypass};\n# ...\nmy $h = start [\"openssl\", \"genrsa\", @cmd], '&lt;', \\$in, '&gt;', \\$out, '3&lt;', \\$args-&gt;{keypass};\n</code></pre>\n\n<p>Here, the password is passed over the file descriptor number 3; if you need to pass in multiple passwords, you can use file descriptors 4, 5, etc. for those.  (Descriptors 0, 1 and 2 are stdin, stdout and stderr.)</p>\n\n<p><sup><em>Disclaimer:</em> This is, obviously, all untested code.  I'm not an expert on IPC::Run, so I may have made some silly command syntax errors or other mistakes.  Please test thoroughly before using!</sup></p>\n"}], "owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 40261066, "answer_count": 1, "score": 3, "last_activity_date": 1477481132, "creation_date": 1477425651, "last_edit_date": 1477472339, "question_id": 40248701, "link": "https://stackoverflow.com/questions/40248701/how-does-one-provide-ipcrun-with-an-argument-set-by-user-input-that-contains-e", "title": "How does one provide IPC::Run with an argument set by user input that contains embedded whitespace", "body": "<p>centos-6.8 perl, v5.10.1 (*) built for x86_64-linux-thread-multi</p>\n\n<p>This question descends from this one <a href=\"https://stackoverflow.com/questions/40162613/where-is-the-shell-command-called-which-invokes-openssl-commands\">Where is the shell command called which invokes OpenSSL commands?</a>.  Briefly I am hacking a very old Perl script used to maintain an internal private PKI so that the default signature hashes and key sizes meet current browser requirements.</p>\n\n<p>I have these snippets of code:</p>\n\n<pre><code>. . .    \n$args-&gt;{keypass} = $self-&gt;getPassword(\"Private key password\",1)\n  unless $args-&gt;{keypass};    \n$self-&gt;warn(\"# Password argument: $args-&gt;{keypass}\\n\") if $ENV{CSPDEBUG};\nmy $cmd = \"-out $args-&gt;{keyfile} $args-&gt;{keysize}\";\n$cmd = \"-des3 -passout pass:$args-&gt;{keypass} \".$cmd if defined($args-&gt;{keypass});\n$self-&gt;{openssl}-&gt;cmd('genrsa',$cmd,$args);\n. . .\n$self-&gt;{openssl}-&gt;cmd('req',\"-x509 $common_args -new -out $cacert\",$args);\n. . .\nuse IPC::Run qw( start pump finish timeout new_appender new_chunker);\n. . .\nsub cmd\n  {\n    my $self = shift;\n    my $cmd = shift;\n    my $cmdline = shift;\n    my $args = shift;\n    my $conf;\n    my $cfgcmd;\n. . .\n    $self-&gt;{_handle}-&gt;pump while length ${$self-&gt;{_in}};\n. . .\n</code></pre>\n\n<p>If the password argument value that the user provides contains no white space then this code performs as desired.  If it does contain embedded white space then the code fails silently.  If the argument passed to <code>keypass</code> is concatenated with starting and ending single-quotes then the code likewise fails silently.  In both cases of failure the script nonetheless reports success.</p>\n\n<p>Why?</p>\n\n<p>What change is necessary to make this code work whether the user input contains spaces or not?</p>\n"}, {"tags": ["regex", "perl", "expression"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477425176, "post_id": 40248541, "comment_id": 67759439, "body": "just change the separator : <code>s&#47;...&#47;$&amp;=~s%...%...%r&#47;e</code> (you of course need the <code>&#47;e</code> modifier). Your code is pretty strange though, maybe you should explain a little bit more what you&#39;re trying to do so we can help more. In particular, <code>$1</code> is undef, and even if it were defined, without the <code>&#47;r</code> modifier, your nested regex is useless."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1477425443, "post_id": 40248541, "comment_id": 67759615, "body": "See <a href=\"http://stackoverflow.com/q/17866072/176646\">Replace pattern with one space per character in Perl</a>"}, {"owner": {"reputation": 297, "user_id": 4308196, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh3.googleusercontent.com/-hmPGRvJRQQc/AAAAAAAAAAI/AAAAAAAAACo/lIGQgaoNhSA/photo.jpg?sz=128", "display_name": "Vitt Volt", "link": "https://stackoverflow.com/users/4308196/vitt-volt"}, "edited": false, "score": 0, "creation_date": 1477425577, "post_id": 40248541, "comment_id": 67759689, "body": "Thanks a lot! The s%%%r expression worked well. This is exactly what I have been looking for which I did not find in other documents."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1477425710, "post_id": 40248541, "comment_id": 67759766, "body": "@VittVolt: The point of <code>%</code> is that it is a different delimiter from <code>&#47;</code> used in the main enclosing regex. You may use other regex delimiters, too."}], "answers": [{"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1477462481, "post_id": 40249679, "comment_id": 67771511, "body": "cool, I always used to use a <code>sub</code> for such cases.. didn&#39;t think of using <code>r</code> flag... also <code>tr</code> can be used when needed with the same <code>r</code> flag"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1477462745, "post_id": 40249679, "comment_id": 67771625, "body": "I am before using the method <code>$str=~s&#47;$foo&#47;my $tmp=$&amp;; $tmp=~s#.#-#g; ($tmp);&#47;ge;</code> However, <code>$str =~ s&#47;($foo)&#47;$1=~s#.#-#gr&#47;ge;</code> is awesome of code."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1477467945, "post_id": 40249679, "comment_id": 67774376, "body": "<a href=\"http://stackoverflow.com/a/40256454/133939\"><code>s&#47;($foo)&#47;&#39;-&#39; x length($1)&#47;gie</code></a> is less clumsy"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1477468245, "post_id": 40249679, "comment_id": 67774554, "body": "@Zaid: It won&#39;t work if you need to replace only specific subpattern from the matches. So, &quot;clumsy&quot; is not appropriate here, my answer is generic for the current problem (actually, I think OP is looking for such a generic solution, otherwise, I would close as a dupe of <a href=\"http://stackoverflow.com/q/17866072/176646\">stackoverflow.com/q/17866072/176646</a>)."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1477471827, "post_id": 40249679, "comment_id": 67776615, "body": "@WiktorStribi\u017cew Not sure what you mean by more complex tasks. Is it not possible to define <code>my $foo = &quot;f..|t..&quot;;</code>?"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1477476497, "post_id": 40249679, "comment_id": 67779672, "body": "I think you&#39;re addressing a more generic scenario then, which the OP didn&#39;t require in this question (<i>&quot;I would like to replace any occurrence of the word stored in $foo with the same number of &quot;-&quot;, case insensitive.&quot;</i>). I had assumed this is what you were addressing, which is why I felt that <code>$1 =~ s#.#-#gr</code> was clumsier than <code>&#39;-&#39; x length($1)</code>"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 6, "last_activity_date": 1477429494, "creation_date": 1477429494, "answer_id": 40249679, "question_id": 40248541, "link": "https://stackoverflow.com/questions/40248541/perl-regular-expression-inside-regular-expression/40249679#40249679", "title": "Perl regular expression inside regular expression", "body": "<p>You certainly need the <code>e</code> modifier to be able to use </p>\n\n<pre><code>$str = 'banana';\n$foo = 'na';\n$str =~ s/$foo/$&amp;=~s#.#-#gr/ge;\nprint $str;\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/lyIEPk\">online Perl demo</a></p>\n\n<p>Note that the outer regex uses <code>/</code> regex delimiters, while the inner one contains different ones (you can use your favorite two here).</p>\n\n<p>The <code>e</code> modifier is obligatory with the outer pattern, and you also need to pass <code>r</code> modifier to the inner one to avoid <em>Modification of a read-only value</em> issue.</p>\n\n<p>Also note that before Perl v.5.20, you'd better avoid <code>$&amp;</code> and enclose the whole pattern with <code>(...)</code> capturing group:</p>\n\n<pre><code>$str =~ s/($foo)/$1=~s#.#-#gr/ge;\n          ^    ^ ^^ \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1477468410, "post_id": 40256454, "comment_id": 67774661, "body": "The solution is already referenced to in the <a href=\"http://stackoverflow.com/questions/40248541/perl-regular-expression-inside-regular-expression/40249679?noredirect=1#comment67759615_40248541\">ThisSuitIsBlackNot&#39;s comment</a>. It cannot be expanded for more complex tasks."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1477467789, "last_edit_date": 1592644375, "creation_date": 1477467789, "answer_id": 40256454, "question_id": 40248541, "link": "https://stackoverflow.com/questions/40248541/perl-regular-expression-inside-regular-expression/40256454#40256454", "title": "Perl regular expression inside regular expression", "body": "<h3>Nesting a <code>s///</code> inside another <code>s///</code> isn't necessary here</h3>\n<p>I know this doesn't answer the question, but answers the need:</p>\n<pre><code>$_ = &quot;footastic Funtastic Fantastic&quot;;\nmy $foo = &quot;f..&quot;;\ns/($foo)/'-' x length($1)/gie;\nprint;  # ---tastic ---tastic ---tastic\n</code></pre>\n"}], "owner": {"reputation": 297, "user_id": 4308196, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh3.googleusercontent.com/-hmPGRvJRQQc/AAAAAAAAAAI/AAAAAAAAACo/lIGQgaoNhSA/photo.jpg?sz=128", "display_name": "Vitt Volt", "link": "https://stackoverflow.com/users/4308196/vitt-volt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 40249679, "answer_count": 2, "score": 5, "last_activity_date": 1477490684, "creation_date": 1477425056, "last_edit_date": 1477490684, "question_id": 40248541, "link": "https://stackoverflow.com/questions/40248541/perl-regular-expression-inside-regular-expression", "title": "Perl regular expression inside regular expression", "body": "<p>I would like to ask if it is possible to put another regular expression inside the RHS of a substitution match expression with the \"e\" modifier.</p>\n\n<p>For example, I would like to replace any occurrence of the word stored in $foo with <strong>the same number of \"-\"</strong>, case insensitive.</p>\n\n<p>For example:</p>\n\n<pre><code>$str =~ s/($foo)/$temp = $1; $temp ~= s/./-//gie;\n</code></pre>\n\n<p>But it constantly gives syntax error when compiling, while</p>\n\n<pre><code>$str =~ s/($foo)/$temp = $1; $temp = \"---\"/gie; \n</code></pre>\n\n<p>does work. </p>\n\n<p>I guess I did not properly escape the slashes, any ideas?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1477421275, "post_id": 40247420, "comment_id": 67757216, "body": "also <code>ref($x)</code> will show that autovivification occurred."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1477421443, "post_id": 40247420, "comment_id": 67757317, "body": "@\u0421\u0443\u0445\u043e\u043927 thanks! I didn&#39;t think of that at the time; answer updated"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 19, "last_activity_date": 1477421730, "last_edit_date": 1477421730, "creation_date": 1477421112, "answer_id": 40247420, "question_id": 40246957, "link": "https://stackoverflow.com/questions/40246957/why-does-map-mask-the-undefined-value-error/40247420#40247420", "title": "Why does map() mask the &#39;undefined value&#39; error?", "body": "<p>This is due to the way that <a href=\"http://perldoc.perl.org/functions/map.html\">map()</a> does aliasing (it's essentially using a <code>for()</code> loop). What's happening is that the aref is being used in l-value context, and therefore is being <a href=\"https://www.effectiveperlprogramming.com/2011/04/understand-autovivification/\">auto-vivified</a> into existence.</p>\n\n<p>In your former example, you're attempting to use the aref directly in r-value context, which is why it generates the error (because no auto-vivification happens).</p>\n\n<p>You can simplify your test to use <code>for()</code>, and you'll get the same result as with <code>map()</code>:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $x;\n\nfor (@{ $x }){\n    print \"$_\\n\";\n}\n</code></pre>\n\n<p>...no output.</p>\n\n<p>To visually see that <code>$x</code> was auto-vivified as an array reference, you can use the <a href=\"http://perldoc.perl.org/functions/ref.html\">ref()</a> function:</p>\n\n<pre><code>my $x;\nmy @a = map $_, @{ $x };\n\nprint ref $x;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ARRAY\n</code></pre>\n"}], "owner": {"reputation": 10395, "user_id": 275088, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b931a4a3164d36350c78dd67ed8a9f99?s=128&d=identicon&r=PG", "display_name": "planetp", "link": "https://stackoverflow.com/users/275088/planetp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 40247420, "answer_count": 1, "score": 16, "last_activity_date": 1477421730, "creation_date": 1477419486, "question_id": 40246957, "link": "https://stackoverflow.com/questions/40246957/why-does-map-mask-the-undefined-value-error", "title": "Why does map() mask the &#39;undefined value&#39; error?", "body": "<p>I'm wondering why a call to <code>map</code> in the second snippet makes the 'undefined value' error gone?</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $x;\nmy @a = @{ $x }; # error: Can't use an undefined value as an ARRAY reference\n</code></pre>\n\n<p>Compare to: </p>\n\n<pre><code>use strict;\nuse warnings;\nmy $x;\nmy @a = map $_, @{ $x }; # no error, @a is empty\n</code></pre>\n"}, {"tags": ["regex", "perl", "regex-negation"], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1477423268, "post_id": 40245500, "comment_id": 67758277, "body": "Technically your regex also removes files ending with <code>&quot;.pl\\n&quot;</code>, not just <code>&quot;.pl&quot;</code>. To fix that you&#39;d have to use <code>&#47;\\.pl\\z&#47;</code>."}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 5, "last_activity_date": 1477414232, "creation_date": 1477414232, "answer_id": 40245500, "question_id": 40245364, "link": "https://stackoverflow.com/questions/40245364/perl-exclude-files-that-end-with-a-certain-file-extension/40245500#40245500", "title": "Perl: Exclude files that end with a certain file extension", "body": "<p>A common way is to use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"noreferrer\">grep</a> to exclude items in a list:</p>\n\n<pre><code>my @files = grep { !/\\.pl$/ } glob(\".* *\");\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 5406949, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/99d29ed48d5b26657df4af37cff0fb7e?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/5406949/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1477415138, "creation_date": 1477413702, "question_id": 40245364, "link": "https://stackoverflow.com/questions/40245364/perl-exclude-files-that-end-with-a-certain-file-extension", "title": "Perl: Exclude files that end with a certain file extension", "body": "<p>I would like to get all files in, say, the working directory, excluding files that, for example, end with .pl. So test.pl should be excluded but not test.txt or test.xyz</p>\n\n<p>The expression <code>glob(\".* *\")</code> matches all the files in a working directory and seems to be working well. Except for the part of excluding files that end with .pl. I have tried several expression including <code>*(?!.pl)</code> but none seem to work.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1477409629, "post_id": 40243997, "comment_id": 67750200, "body": "Just in case you haven&#39;t been beaten over the head with this yet: <a href=\"http://stackoverflow.com/q/33267765/176646\">Why is XML::Simple \u201cDiscouraged\u201d?</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477410190, "post_id": 40243997, "comment_id": 67750617, "body": "I am not sure what the typo is you made when transcribing your code here. This is <b>not</b> the code that produces this error message. I can&#39;t reproduce it either. Anyway, the right syntax is pretty clear."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1477473320, "last_edit_date": 1477473320, "creation_date": 1477409857, "answer_id": 40244155, "question_id": 40243997, "link": "https://stackoverflow.com/questions/40243997/accessing-xml-data-using-perl-xmlsimple/40244155#40244155", "title": "Accessing xml data using perl XML::Simple", "body": "<p>You are using the wrong syntax.</p>\n\n<pre><code>#                   here ...   and here\n#                    V               V\nforeach my $member (@($xml-&gt;{Members})) { ... }\n</code></pre>\n\n<p>To dereference, you need curly braces <code>{}</code>, not parenthesis <code>()</code>.</p>\n\n<p>Once you've fixed that (which I think was a typo in the question, not in your real code), you have:</p>\n\n<pre><code>foreach my $member ( @{ $xml-&gt;{Members} } ) {\n    print \"Age: $xml-&gt;{Age}\";\n}\n</code></pre>\n\n<p>But that's still wrong. You want to access the <code>$member</code>, not the whole <code>$xml</code> structure, because that doesn't have an <code>Age</code>, does it?</p>\n\n<pre><code>foreach my $member ( @{ $xml-&gt;{Members} } ) {\n    print \"Age: $member-&gt;{Age}\\n\";\n}\n</code></pre>\n\n<p>That will give you</p>\n\n<pre><code>Age: 19\nAge: 18\nAge: 21\nAge: 22\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 3871995, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2bb1300ddf9fdd16f9dfb41ceb2520b6?s=128&d=identicon&r=PG&f=1", "display_name": "user3871995", "link": "https://stackoverflow.com/users/3871995/user3871995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477473320, "creation_date": 1477409470, "last_edit_date": 1477410127, "question_id": 40243997, "link": "https://stackoverflow.com/questions/40243997/accessing-xml-data-using-perl-xmlsimple", "title": "Accessing xml data using perl XML::Simple", "body": "<p>I have some xml data, the dump looks like this:</p>\n\n<pre><code> $VAR1 = {\n      'Members' =&gt; [\n                        {\n                          'Age' =&gt; '19',\n                          'Name' =&gt; 'Bob'\n                        },\n                        {\n                          'Age' =&gt; '18',\n                          'Name' =&gt; 'Jane'\n                        },\n                        {\n                          'Age' =&gt; '21',\n                          'Name' =&gt; 'Pat'\n                        },\n                        {\n                          'Age' =&gt; '22',\n                          'Name' =&gt; 'June'\n                        }\n                      ],\n      'Sports' =&gt; [\n                           {\n                             'Players' =&gt; '20',\n                             'Name' =&gt; 'Tennis'\n                           },\n                           {\n                             'Players' =&gt; '35',\n                             'Name' =&gt; 'Basketball'\n                           }\n                         ],\n       };    \n</code></pre>\n\n<p>I have tried the following code to print out the data:</p>\n\n<pre><code>foreach my $member (@($xml-&gt;{Members})) {\n    print(\"Age: $xml-&gt;{Age}\");\n}\n</code></pre>\n\n<p>But keep getting errors like:</p>\n\n<blockquote>\n  <p>Can't use string (\"4\") as a HASH ref while \"strict refs\" in use</p>\n</blockquote>\n\n<p>Any idea why this won't work?</p>\n"}, {"tags": ["perl", "moose", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1477408665, "post_id": 40243560, "comment_id": 67749497, "body": "Please include the test script. Your <code>check_name</code> is correct. Something else must be wrong."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1477409655, "post_id": 40243560, "comment_id": 67750215, "body": "It looks like you might be calling <code>check_name()</code> as a class method rather than an object method. But without seeing the call to <code>check_name()</code> we can&#39;t be sure. Please <a href=\"http://stackoverflow.com/posts/40243560/edit\">edit your question</a> to add the code that calls <code>check_name()</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1477409741, "post_id": 40243560, "comment_id": 67750281, "body": "I was thinking that too, but I also think it might be related to what&#39;s going on with the <i>config file</i> there. Because in a test script, there wouldn&#39;t be a ConfigLoader plugin @Dave."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1477409828, "post_id": 40243560, "comment_id": 67750342, "body": "Agreed. But without seeing the actual code this is all just guesswork :-)"}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1477410682, "post_id": 40243560, "comment_id": 67750994, "body": "I&#39;ve edited to discuss and show the test stuff. Thanks."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477410718, "post_id": 40243560, "comment_id": 67751013, "body": "When you say test script, are we talking about unit tests?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1477410757, "post_id": 40243560, "comment_id": 67751038, "body": "That&#39;s exactly what Dave said. You need to <i>instantiate</i> first. Writing an answer."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1477412043, "post_id": 40244733, "comment_id": 67751899, "body": "Just fix it @Dave ;)"}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 1, "creation_date": 1477412669, "post_id": 40244733, "comment_id": 67752324, "body": "Thank you for this extremely detailed response, which allowed me to see what was happening. The test suite was in fact already set up as you suggest, with ctx_request. But most tests were not called through Catalyst, i.e. not using any Catalyst magic, so just gave the module name as <code>MyApp::Model::Foo</code>. In this case I did need to use all the Cat internals, so simply changing the call to <code>my $name_check = $c-&gt;model(&#39;Foo&#39;)-&gt;check_name()</code> was all that I needed."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1477417232, "post_id": 40244733, "comment_id": 67754947, "body": "@user1235777 if you want real unit tests then creating your own objects is fine. For Models and maybe Views that makes sense. For controllers I feel they rely to much on the Context to work well without responses, unless you have a lot of helpers in there. But then that&#39;s a good reason to refactor anyway. Most of the time I have specific test configurations for test suite. Using a local suffix and setting the ENV variable for it in your test runner is pretty neat. That&#39;s also why I wouldn&#39;t recommend a test just to check if a value got set by Catalyst. It will break alright if hadn&#39;t anyway.:)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1477412049, "last_edit_date": 1477412049, "creation_date": 1477411624, "answer_id": 40244733, "question_id": 40243560, "link": "https://stackoverflow.com/questions/40243560/moose-accessors-in-catalyst-cant-use-string-as-hash-ref-error/40244733#40244733", "title": "Moose accessors in Catalyst (&quot;Can&#39;t use string as HASH ref&quot; error)", "body": "<p>It appears you want to do a kind-of unit-test, or maybe an integration test, and verify if your application is getting the correct data from the configuration file.</p>\n\n<p>Catalyst components (Models, Views and Controller) are Moose objects, you've got that right. In order for them to have Moose magic (which isn't really magic), you need to instantiate them. You can't just call an accessor as a class method.</p>\n\n<pre><code>use MyApp::Model::Foo;\nmy $name_check = MyApp::Model::Foo-&gt;new-&gt;check_name();\n</code></pre>\n\n<p>But that wouldn't work, because now you've got a <em>new</em> instance of the model object, and it doesn't have the name set through the config.</p>\n\n<p>Catalyst internally takes care of creating the objects for you, including their configuration. You said you have a Catalyst running. You can use <a href=\"https://v1.metacpan.org/pod/Catalyst::Test\" rel=\"nofollow\">Catalyst::Test</a> to go in there, get a context object <code>$c</code> and then use the <code>model</code> accessor to get you the right kind of model object that has been given the configuration.</p>\n\n<p>The <code>ctx_request</code> function lets Catalyst handle a request and returns the actual <a href=\"http://p3rl.org/HTTP::Response\" rel=\"nofollow\">HTTP::Response</a> object as well as the context object. You can then work with that context.</p>\n\n<pre><code>use Catalyst::Test 'MyApp';\nuse Test::More;\n\nmy ( $res, $c ) = ctx_request('/');\nok defined $c-&gt;model('Foo')-&gt;name, 'Name is defined';\n</code></pre>\n\n<p>You probably already have Catalyst::Test in your test stack somewhere. If not, you're doing something weird.</p>\n\n<p>Note that this doesn't work if you want the session that's attached to a certain user, so if you have a <a href=\"http://p3rl.org/Test::WWW::Mechanize::Catalyst\" rel=\"nofollow\">Test::WWW::Mechanize::Catalyst</a> or another user agent that has a session cookie, you will need to extract the cookie and build your own <a href=\"http://p3rl.org/HTTP::Request\" rel=\"nofollow\">HTTP::Request</a> object, than use the user agents cookie jar to put the cookie into that request before you pass it to <code>ctx_request</code>.</p>\n\n<p>Also note that the test you're doing is not very useful, unless you're building the code that does the configuration reading. And even then, you can build unit tests that don't require a full running Catalyst.</p>\n"}], "owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 1, "accepted_answer_id": 40244733, "answer_count": 1, "score": 2, "last_activity_date": 1477412049, "creation_date": 1477408257, "last_edit_date": 1477410659, "question_id": 40243560, "link": "https://stackoverflow.com/questions/40243560/moose-accessors-in-catalyst-cant-use-string-as-hash-ref-error", "title": "Moose accessors in Catalyst (&quot;Can&#39;t use string as HASH ref&quot; error)", "body": "<p>Very simple question:</p>\n\n<pre><code>package MyApp::Model::Foo;\nuse Moose;\nuse namespace::autoclean;\nextends 'Catalyst::Model';\nhas 'firstname' =&gt; ( is =&gt; 'ro', isa =&gt; 'Str' ); # to be populated in config file\n\n# ...\n\nsub check_name {\n  my $self = shift;\n  my $firstname = $self-&gt;firstname;\n  # ...\n}\n</code></pre>\n\n<p>When I call <code>check_name()</code> from a test script, at the \"$self->firstname\" line I get the error <code>Can't use string (\"MyApp::Model::Foo\") as a HASH ref while \"strict refs\" in use at reader MyApp::Model::Foo::firstname</code>. How am I supposed to use this?</p>\n\n<p>I can't reproduce the test stuff as it's too extensive, but by the time I run the test script, I've called a setup script that loads the Catalyst application (and thus reads the Catalyst config file), deploys and populates database tables, etc.</p>\n\n<p>The test script worked fine in the original version (which did not take a value from the config file; that's what I'm trying to do now; originally I passed in a value), and the relevant bit is simply</p>\n\n<pre><code>my $name_check = MyApp::Model::Foo-&gt;check_name();\nok(defined $name_check, \"Name is OK\");\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1477389136, "post_id": 40236660, "comment_id": 67735610, "body": "What is your question?"}, {"owner": {"reputation": 5280, "user_id": 494501, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oxK3a.jpg?s=128&g=1", "display_name": "0xCAFEBABE", "link": "https://stackoverflow.com/users/494501/0xcafebabe"}, "edited": false, "score": 2, "creation_date": 1477389249, "post_id": 40236660, "comment_id": 67735691, "body": "<code>$iden1</code> is invalid for a certain input line, therefor <code>$fh{$iden1}</code> results in an invalid file handle, therefor <code>-&gt;print</code> cannot be called on it."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1477389421, "post_id": 40236660, "comment_id": 67735783, "body": "You could check for <code>definedness</code> and create a new filehandle before trying to print.  <code>$fh{$iden1} ||= Filehandle-&gt;new(&quot;&gt;$ARGV[2]&#47;$iden1&quot;);  $fh{$iden1}-&gt;print(...);</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1477395655, "post_id": 40236660, "comment_id": 67739735, "body": "@Jack: Perhaps more importantly than the way it looks, adding line numbers makes it very awkward to copy and paste your code so that we can try it ourselves. If you need to refer to a specific line in your code then it&#39;s best to add a comment that highlights the line. You could even get fancy and use Perl&#39;s preprocessor that acts on comments, so that <code>#line 42</code> followed by <code>die</code> on the next line will display <code>Died at &lt;source file name&gt; line 42</code> at run time. The hash <code>#</code> must be the first character on the line."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477396635, "post_id": 40236660, "comment_id": 67740384, "body": "Drop <code>FileHandle</code> and use <code>open $fh{$iden}, &#39;&gt;&#39;, $outputfile or die $!</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7068644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273ca18234c475b0dfa9b7249714aa8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7068644/jack"}, "edited": false, "score": 0, "creation_date": 1477392064, "post_id": 40237120, "comment_id": 67737489, "body": "I checked. The outputfiles had been generated."}, {"owner": {"reputation": 13, "user_id": 7068644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273ca18234c475b0dfa9b7249714aa8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7068644/jack"}, "edited": false, "score": 0, "creation_date": 1477392217, "post_id": 40237120, "comment_id": 67737577, "body": "However, the outputfiles are all empty."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1919238"}, "is_accepted": false, "score": 1, "last_activity_date": 1477390131, "creation_date": 1477390131, "answer_id": 40237120, "question_id": 40236660, "link": "https://stackoverflow.com/questions/40236660/cant-call-method-print-on-an-undefined-value/40237120#40237120", "title": "Can&#39;t call method &quot;print&quot; on an undefined value", "body": "<p><strong>You don't have any error handling on this line:</strong></p>\n\n<pre><code>$fh{$iden}=FileHandle-&gt;new(\"&gt;$outputfile\");\n</code></pre>\n\n<p>It's possible that opening a filehandle is silently failing, and only producing an error when you try to print to it. For example, if you have specified an invalid filename.</p>\n\n<p>Also, <strong>you never check if <code>$iden1</code> and <code>$iden2</code> are names of open filehandles that actually exist.</strong>  It's possible one of them does not exist.</p>\n\n<p>In particular, you aren't removing a newline from <code>$line1</code>, so if <code>$iden1</code> and <code>$iden2</code> happen to be the last values on the line, this will be included in the name you are trying to use, and it will fail.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7068644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273ca18234c475b0dfa9b7249714aa8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7068644/jack"}, "edited": false, "score": 0, "creation_date": 1477394970, "post_id": 40237158, "comment_id": 67739253, "body": "I found the problem after I used the way you suggested. Thanks!"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1477390220, "creation_date": 1477390220, "answer_id": 40237158, "question_id": 40236660, "link": "https://stackoverflow.com/questions/40236660/cant-call-method-print-on-an-undefined-value/40237158#40237158", "title": "Can&#39;t call method &quot;print&quot; on an undefined value", "body": "<p>In your first <code>while</code> loop, you set up a hash of filehandles that you will write to later. The keys in this hash are the \"iden\" strings from the first file passed to the program.</p>\n\n<p>Later, you parse another file and use the \"iden\" values in that file to choose which filehandle to write data to. But one (or more) of the \"iden\" values in the second file is missing from the first file. So that filehandle can't be found in the <code>%fh</code> hash. Because you don't check for that, you get `undef back from the hash and you can't print to an undefined filehandle.</p>\n\n<p>To fix it, put a check before trying to use one of the filehandles from the <code>%fh</code> hash.</p>\n\n<pre><code>die \"Unknown fh identifier '$iden1'\" unless exists $fh{$iden1};\ndie \"Unknown fh identifier '$iden2'\" unless exists $fh{$iden2};\n$fh{$iden1}-&gt;print($line1);\n$fh{$iden2}-&gt;print($line2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1477403333, "post_id": 40240328, "comment_id": 67745494, "body": "I think you have an error in the final <code>print</code>s. You want to print <code>$line0</code> to <code>$fh{$iden0}</code> and <code>$line1</code> to <code>$fh{$iden1}</code>. You&#39;re printing <code>$line0</code> to both filehandles."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477406442, "post_id": 40240328, "comment_id": 67747894, "body": "You&#39;re saying it&#39;s important to <code>close</code> the filehandles as soon as possible, but you let them go out of scope, which implicitly closes them. While that&#39;s valid and I&#39;d do the same, I believe in the context of your answer an explanation would be useful."}, {"owner": {"reputation": 13, "user_id": 7068644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273ca18234c475b0dfa9b7249714aa8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7068644/jack"}, "edited": false, "score": 0, "creation_date": 1477445912, "post_id": 40240328, "comment_id": 67766963, "body": "I checked the inputfile (<code>$ARGV[3]</code>) acorrding to the Dave Cross advice. There are some format errors about inputfile (<code>$ARGV[3]</code>).  It is not the code error. The <code>keys</code> of <code>%fh</code> is not match the <code>$id</code>s. Although outputfiles are generated, they are all empty files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1477472681, "post_id": 40240328, "comment_id": 67777225, "body": "@DaveCross: Thank you very much. Now that I&#39;m back at a PC I&#39;ve been able to fix what I think was a valiant attempt at writing Perl code on my tablet! Even <code>print $fh{$iden0} $line0</code> is a syntax error, which needs to be <code>print { $fh{$iden0} } $line0</code>. There was also a missing semicolon in <code>next unless $input;</code>. I appreciate your scrutiny."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1477473350, "post_id": 40240328, "comment_id": 67777664, "body": "@simbabque: I wrote that <b><i>output</i></b> handles should be closed early. There is very little chance or impact if an input handle fails to close successfully, and they may be left languishing if it makes the code more accessible. The only output handles here are the ones in <code>%fh</code>, which I close explicitly in a loop at the end of the code. I&#39;ve added a proper test for success as well, which should have been there in the first place. I appreciate your comment: it&#39;s always nice to feel that my mistakes will be caught."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477473498, "post_id": 40240328, "comment_id": 67777756, "body": "At least on a tablet you have an almost proper keyboard. I start struggling when I comment from my phone in the bus and have to put inline code with backticks."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477473725, "post_id": 40240328, "comment_id": 67777923, "body": "@simbabque: Try <a href=\"https://play.google.com/store/apps/details?id=org.pocketworkstation.pckeyboard&amp;hl=en_GB\" rel=\"nofollow noreferrer\"><b>Hacker&#39;s Keyboard</b></a> if you&#39;re running Android. You get backticks as well as cursor keys, Ctrl, Alt, and Esc."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477474218, "post_id": 40240328, "comment_id": 67778240, "body": "@Borodin I&#39;ll try that, thanks. Usually I use Switfkey. But it says <i>are you missing the key layout you&#39;re used from your computer?</i> \u2013 I would never be able to write on my phone with <a href=\"http://i.imgur.com/LX3s5dS.jpg\" rel=\"nofollow noreferrer\">this thing</a>! :D"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477481214, "post_id": 40240328, "comment_id": 67782623, "body": "@simbabque: Haha. That looks very edible! Swiftkey is excellent for writing English, but gets in the way if you&#39;re using symbols and precise spacing."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477487856, "post_id": 40240328, "comment_id": 67787041, "body": "@Borodin not sure I would want to eat <a href=\"https://deskthority.net/wiki/Keycap_construction#PBT\" rel=\"nofollow noreferrer\">PBT keycaps</a>, but the brown Cherry MX switche underneath might be nicely crunchy. :) I&#39;ll try the Hacker&#39;s Keyboard next time I have to write something from the phone. Already installed it."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1477473511, "last_edit_date": 1477473511, "creation_date": 1477399448, "answer_id": 40240328, "question_id": 40236660, "link": "https://stackoverflow.com/questions/40236660/cant-call-method-print-on-an-undefined-value/40240328#40240328", "title": "Can&#39;t call method &quot;print&quot; on an undefined value", "body": "<p>Please remember that the primary worth of a Stack Overflow post is not to fix your particular problem, but to help the thousands of others who may be stuck in the same way. With that in mind, <em>\"I fixed it, thanks, bye\"</em> is more than a little selfish</p>\n\n<p>As I said in my comment, using <code>open</code> directly on a hash element is much preferable to involving <code>FileHandle</code>. Perl will <em>autovivify</em> the hash element and create a file handle for you, and most people at all familiar with Perl will thank you for not making them read up again on the <code>FileHandle</code> documentation</p>\n\n<p>I rewrote your code like this, which is much more Perlish and relies less on \"magic numbers\" to access <code>@ARGV</code>. You should really assign <code>@ARGV</code> to a list of named scalars, or - better still - use <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow\"><code>Getopt::Long</code></a> so that they are named anyway</p>\n\n<p>You should <code>open</code> your file handles as <em>late</em> as possible, and <code>close</code> the <strong><em>output</em></strong> handles <em>early</em>. This is effected most easily by using <em>lexical file handles</em> and limiting their scope to a block. Perl will implicitly close lexical handles for you when they go out of scope</p>\n\n<p>There is no need to <code>chomp</code> the contents of <code>@ARGV</code>unless you could be be called under strange and errant circumstances, in which case you need to do a <em>hell</em> of a lot more to verify the input</p>\n\n<p>You never use the result of <code>$input[0] =~ /([^\\/]+)$/</code> or the variables <code>$out</code> and <code>$lane</code>, so I removed them</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\n# $ARGV[0] -- input file\n# $ARGV[1] -- output log file\n# $ARGV[2] -- directory for outputs per ident\n# $ARGV[3] -- 1, $input[0]\n# $ARGV[4] -- 2, $input[1] or undef\n\ndie \"Fix the parameters\" unless @ARGV == 4 or @ARGV == 5;\n\nmy @input = @ARGV[3,4];\n\nmy %fh;\n\n{\n    open my $fh, '&lt;', $ARGV[0] or die $!;\n\n    while ( &lt;$fh&gt; ) {\n        my $id         = ( split )[0];\n        my $outputfile = \"$ARGV[2]/$id\";\n        open $fh{$id}, '&gt;', $outputfile or die qq{Unable to open \"$outputfile\" for output: $!};\n    }\n}\n\nopen my $log_fh, '&gt;', $ARGV[1] or die qq{Unable to open \"$ARGV[1]\" for output: $!};\n\nfor my $input ( @input ) {\n\n    next unless $input; # skip unspecified parameters\n\n    my @path = split qr|/|, $input;   # Really should be done by File::Spec\n    print $log_fh \"#$path[-1]\\n\";     # Or File::Basename\n\n    open my $fh, '&lt;', $input or die qq{Unable to open \"$input\" for input: $!};\n\n    while ( my $line0 = &lt;$fh&gt; ) {\n\n        chomp $line0;\n\n        my $line1 = &lt;$fh&gt;;\n        chomp $line1;\n\n        my ($id0, $iden0) = (split /\\t/, $line0)[6,7];\n        my ($id1, $iden1) = (split /\\t/, $line1)[6,7];\n\n        if ( $id0 eq '+' and $id1 eq '-' ) {\n\n            $fh{$_} or die qq{No output file for \"$_\"} for $iden0, $iden1;\n\n            print { $fh{$iden0} } $line0;\n            print { $fh{$iden1} } $line1;\n        }\n    }\n}\n\nwhile ( my ($iden, $fh) = each %fh ) {\n    close $fh or die qq{Unable to close file handle for \"$iden\": $!};\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7068644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273ca18234c475b0dfa9b7249714aa8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7068644/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "accepted_answer_id": 40240328, "answer_count": 3, "score": -1, "last_activity_date": 1477473511, "creation_date": 1477388850, "last_edit_date": 1477390310, "question_id": 40236660, "link": "https://stackoverflow.com/questions/40236660/cant-call-method-print-on-an-undefined-value", "title": "Can&#39;t call method &quot;print&quot; on an undefined value", "body": "<p><strong>Can't call method print on an undefined value in line 40  line 2.</strong> </p>\n\n<p>Here is the code. I use FileHandle to settle files:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse FileHandle;\n\ndie unless (@ARGV ==4|| @ARGV ==5);\n\nmy @input =();\n$input[0]=$ARGV[3];\n$input[1]=$ARGV[4] if ($#ARGV==4);\nchomp @input;\n$input[0] =~ /([^\\/]+)$/;\nmy $out = \"$1.insert\";\nmy $lane= \"$1\";\n\nmy %fh=();\nopen (Info,\"&gt;$ARGV[1]\")  || die \"$!\";\nopen (AA,\"&lt;$ARGV[0]\")   || die \"$!\";\n\nwhile(&lt;AA&gt;){\n    chomp;\n    my @inf=split;\n    my $iden=$inf[0];\n    my $outputfile=\"$ARGV[2]/$iden\";\n    $fh{$iden}=FileHandle-&gt;new(\"&gt;$outputfile\");\n}\nclose AA;\n\nforeach my $input (@input) {\n    open (IN, \"&lt;$input\" ) or die \"$!\" ;\n    my @path=split (/\\//,$input);\n    print Info \"#$path[-1]\\n\";\n    while (&lt;IN&gt;) {\n        my $line1 = $_;\n        my ($id1,$iden1) = (split \"\\t\", $line1)[6,7];\n        my $line2 = &lt;IN&gt; ;\n        my ($id2,$iden2) = (split \"\\t\", $line2)[6,7];\n        if ($id1 eq '+' &amp;&amp; $id2 eq '-') {\n            my @inf=split(/\\t/,$line1);\n            $fh{$iden1}-&gt;print($line1);\n            $fh{$iden2}-&gt;print($line2);\n        }\n    }\n    close IN;\n}\n</code></pre>\n\n<p>I\u2019ve tried multiple variations of this, but none of them seem to work. Any ideas? </p>\n"}, {"tags": ["perl", "exporter"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1477387135, "post_id": 40235793, "comment_id": 67734246, "body": "You should also include stubs for the functions you&#39;re exporting so we can copy/paste it and try."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477389399, "post_id": 40235793, "comment_id": 67735766, "body": "We need to see more than this as <b>simbabque</b> says. Please show a <code>main.pl</code> that uses these modules and displays the same issue"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 6677819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd31a5abc18a4ff84927da58d8b0e35a?s=128&d=identicon&r=PG&f=1", "display_name": "osiv", "link": "https://stackoverflow.com/users/6677819/osiv"}, "edited": false, "score": 0, "creation_date": 1477398531, "post_id": 40237904, "comment_id": 67741775, "body": "Can you type in details of phrase &quot;...to delay the binding...&quot;?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 67, "user_id": 6677819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd31a5abc18a4ff84927da58d8b0e35a?s=128&d=identicon&r=PG&f=1", "display_name": "osiv", "link": "https://stackoverflow.com/users/6677819/osiv"}, "edited": false, "score": 0, "creation_date": 1477475453, "post_id": 40237904, "comment_id": 67779026, "body": "@osiv: The term <i>late binding</i> is a bit of a misnomer here. It properly refers to the <i>object-oriented</i> concept whereby a method call is resolved <i>at run time</i> according to the principle of inheritance, and not at compile time. It is the method that Perl uses. What I meant here was the more general idea of establishing the meaning of any identifier at run time."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 67, "user_id": 6677819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd31a5abc18a4ff84927da58d8b0e35a?s=128&d=identicon&r=PG&f=1", "display_name": "osiv", "link": "https://stackoverflow.com/users/6677819/osiv"}, "edited": false, "score": 1, "creation_date": 1477475612, "post_id": 40237904, "comment_id": 67779111, "body": "@osiv: <code>use</code> employs an implicit <code>BEGIN</code> block, so the module is compiled, and any symbols are imported, during the compilation phase. <code>require</code> is executed at run time, so you can break the loop of dependencies by using at least one <code>require</code>, when the loop becomes a <i>chain</i> with a beginning and an end. You will often see <code>require</code> in a CPAN module for this exact reason."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1477392253, "creation_date": 1477392253, "answer_id": 40237904, "question_id": 40235793, "link": "https://stackoverflow.com/questions/40235793/modules-use-each-other-in-cycle-compilation-error-in-perl/40237904#40237904", "title": "Modules use each other in cycle. Compilation error in Perl", "body": "<p>You need to use <code>require</code> instead of <code>use</code> somewhere in the loop of dependencies so as to delay the binding. It is most convenient with a module that exports nothing, as otherwise you need to write an explicit <code>import</code> call</p>\n\n<p>In your case <code>LIB::Common::Logger::Log</code> doesn't use <code>Export</code>, so putting</p>\n\n<pre><code>require LIB::Common::Logger::Log\n</code></pre>\n\n<p>into <code>LIB/Common/Utils.pm</code> fixes the problem</p>\n\n<p><em>You have access to the code that isn't working, and you could have saved us a lot of time by simply showing the malfunctioning code. You ignored two comments asking for more information so I have set up these files</em></p>\n\n<p>Note that this code does nothing: it simply compiles</p>\n\n<h3>LIB/Common/Utils.pm</h3>\n\n<pre><code>package LIB::Common::Utils;\n\nuse Exporter 'import';\n\nour @EXPORT_OK = qw/\n    GetDirCheckSum\n    AreDirsEqual\n    onError\n    Throw\n/;\n\nrequire LIB::Common::Logger::Log;\n\nsub GetDirCheckSum { }\n\nsub AreDirsEqual { }\n\nsub onError { }\n\nsub Throw { }\n\n1;\n</code></pre>\n\n<h3>LIB/Common/Logger/EnvConfigMgr.pm</h3>\n\n<pre><code>package LIB::Common::EnvConfigMgr;\n\nuse Exporter 'import';\n\nour @EXPORT = qw/ TransformShellVars ExpandString InitSearchLocations /;\nour @EXPORT_OK = 'Expand';\n\nuse LIB::Common::Utils 'Throw';\n\nsub TransformShellVars { }\n\nsub ExpandString { }\n\nsub InitSearchLocations { }\n\nsub Expand { }\n\n1;\n</code></pre>\n\n<h3>LIB/Common/Logger/Log.pm</h3>\n\n<pre><code>package LIB::Common::Logger::Log;\n\nuse Log::Log4perl;\n\nuse LIB::Common::EnvConfigMgr 'Expand';\n\n1;\n</code></pre>\n\n<h3>main.pl</h3>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse FindBin;\nuse lib $FindBin::Bin;\n\nuse LIB::Common::Utils;\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6677819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd31a5abc18a4ff84927da58d8b0e35a?s=128&d=identicon&r=PG&f=1", "display_name": "osiv", "link": "https://stackoverflow.com/users/6677819/osiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 40237904, "answer_count": 1, "score": -1, "last_activity_date": 1477392253, "creation_date": 1477386410, "last_edit_date": 1477387087, "question_id": 40235793, "link": "https://stackoverflow.com/questions/40235793/modules-use-each-other-in-cycle-compilation-error-in-perl", "title": "Modules use each other in cycle. Compilation error in Perl", "body": "<p>There are 3 modules, so that they use each other by pattern\na -> b -> c -> a. I cannot compile such case.</p>\n\n<p>For instance,</p>\n\n<p>I get a compilation error</p>\n\n<pre><code>\"Throw\" is not exported by the LIB::Common::Utils module\nCan't continue after import errors at /root/bin/ppm/LIB/Common/EnvConfigMgr.pm line 13\nBEGIN failed--compilation aborted at /root/bin/ppm/LIB/Common/EnvConfigMgr.pm line 13.\n</code></pre>\n\n<p>Utils.pm</p>\n\n<pre><code>use Exporter qw(import);\nour @EXPORT_OK = qw(\n        GetDirCheckSum\n        AreDirsEqual\n        onError\n        Throw);\nuse LIB::Common::Logger::Log;\n</code></pre>\n\n<p>Log.pm</p>\n\n<pre><code>use Log::Log4perl;\n\nuse LIB::Common::EnvConfigMgr qw/Expand/;\n</code></pre>\n\n<p>EnvConfigMgr.pm</p>\n\n<pre><code>use Exporter qw(import);\n\nour @EXPORT = qw(TransformShellVars ExpandString InitSearchLocations);\nour @EXPORT_OK = qw(Expand);\n\nuse LIB::Common::Utils qw/Throw/;\n</code></pre>\n\n<p>Why doesn't it get compiled and how to make it work?</p>\n"}, {"tags": ["string", "perl", "search", "perl-module"], "comments": [{"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 1, "creation_date": 1477384542, "post_id": 40235112, "comment_id": 67732564, "body": "<code>$string =~ &#47;systemfile.*\\.elf&#47;</code> and you should check out <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlre.html</a>"}, {"owner": {"reputation": 67, "user_id": 6187954, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-5VTopX-72lM/AAAAAAAAAAI/AAAAAAAAABA/749aiJKdadQ/photo.jpg?sz=128", "display_name": "Hariprasad C R", "link": "https://stackoverflow.com/users/6187954/hariprasad-c-r"}, "reply_to_user": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1477386129, "post_id": 40235112, "comment_id": 67733588, "body": "Yea that solved It, thanks"}, {"owner": {"reputation": 67, "user_id": 6187954, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-5VTopX-72lM/AAAAAAAAAAI/AAAAAAAAABA/749aiJKdadQ/photo.jpg?sz=128", "display_name": "Hariprasad C R", "link": "https://stackoverflow.com/users/6187954/hariprasad-c-r"}, "reply_to_user": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1477386176, "post_id": 40235112, "comment_id": 67733621, "body": "can you post it as answer, so that i can put correct answer"}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1477389847, "post_id": 40235112, "comment_id": 67736087, "body": "There you go, posted"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477392268, "post_id": 40235112, "comment_id": 67737610, "body": "and what if a file exist called 64bitsystemfile.elfde? you will still get a match for systemfile and .elf"}], "answers": [{"comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 67, "user_id": 6187954, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-5VTopX-72lM/AAAAAAAAAAI/AAAAAAAAABA/749aiJKdadQ/photo.jpg?sz=128", "display_name": "Hariprasad C R", "link": "https://stackoverflow.com/users/6187954/hariprasad-c-r"}, "edited": false, "score": 1, "creation_date": 1477386020, "post_id": 40235176, "comment_id": 67733512, "body": "@HariprasadCR: The index function searches for one string within another, but <b>without</b> the wildcard-like behavior of a full regular-expression pattern match"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 67, "user_id": 6187954, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-5VTopX-72lM/AAAAAAAAAAI/AAAAAAAAABA/749aiJKdadQ/photo.jpg?sz=128", "display_name": "Hariprasad C R", "link": "https://stackoverflow.com/users/6187954/hariprasad-c-r"}, "edited": false, "score": 0, "creation_date": 1477386081, "post_id": 40235176, "comment_id": 67733554, "body": "@HariprasadCR So for me it sounds like you have to do two separate checks if you want to use <code>index</code>"}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": true, "score": 3, "last_activity_date": 1477385803, "last_edit_date": 1477385803, "creation_date": 1477384531, "answer_id": 40235176, "question_id": 40235112, "link": "https://stackoverflow.com/questions/40235112/search-a-specific-sub-string-pattern-in-a-string-using-perl/40235176#40235176", "title": "search a specific sub string pattern in a string using perl", "body": "<p>You can use the pattermatching</p>\n\n<pre><code>if ($string =~ /systemfile\\d\\d\\.elf$/){\n   # DoSomething\n}\n</code></pre>\n\n<p><code>\\d</code> stands for a digit (0-9)</p>\n\n<p><code>$</code> stands for end of string</p>\n"}, {"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1477388786, "post_id": 40235581, "comment_id": 67735392, "body": "I agree with using an explicit <code>m</code> on the match operator so that you can change the delimiter. But I think that the single quote is a terrible choice of alternative. It makes the regex look like a string. I would have probably gone with <code>m[systemfile(16|32)\\.elf$]</code>."}], "tags": [], "owner": {"reputation": 11224, "user_id": 1620937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/689410968ffb0f422e790bd6a48b3d9e?s=128&d=identicon&r=PG", "display_name": "Orab&#238;g", "link": "https://stackoverflow.com/users/1620937/orab%c3%aeg"}, "is_accepted": false, "score": 1, "last_activity_date": 1477386034, "last_edit_date": 1477386034, "creation_date": 1477385731, "answer_id": 40235581, "question_id": 40235112, "link": "https://stackoverflow.com/questions/40235112/search-a-specific-sub-string-pattern-in-a-string-using-perl/40235581#40235581", "title": "search a specific sub string pattern in a string using perl", "body": "<p>Well</p>\n\n<pre><code>if( $mainstring =~ m'/systemfile(16|32)\\.elf$' ) {\n   say\" Found the string\";\n}\n</code></pre>\n\n<p>does the job.</p>\n\n<hr>\n\n<p>For your informations :</p>\n\n<pre><code>$string =~ m' ... '\n</code></pre>\n\n<p>is the same than</p>\n\n<pre><code>$string =~ / ... /\n</code></pre>\n\n<p>which checks the string against the given regular expression. This is one of the most useful features of the Perl language.</p>\n\n<p>More info at <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">http://perldoc.perl.org/perlre.html</a></p>\n\n<p>(I did use the m'' syntax to improve readability, because of the presence of another '/' character in the regexp. I could also write <code>/\\/systemfile\\d+\\.elf$/</code></p>\n"}, {"comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1477388688, "post_id": 40236013, "comment_id": 67735320, "body": "You should escape the last dot, because it is the character dot not the placeholder"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1477389246, "post_id": 40236013, "comment_id": 67735688, "body": "@Jens. true, I never tested the code. Will update it, although it will work regardless of it being wrong :) so by not escaping the . it will accept systemfile00.self as a match as well, here we want to match exactly .elf only. Thanks for spotting it"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477391398, "post_id": 40236013, "comment_id": 67737071, "body": "Actually, &quot;systemfile..&quot; is at the end of the string, so you don&#39;t want that <code>^</code> at the start (and you example string should rather be <code>&#39;&#47;home&#47;me&#47;Desktop&#47;MyWork&#47;systemfile&#47;directory&#47;systemfile09.e&zwnj;&#8203;lf&#39;</code> for instance). Moreover, <code>.*</code> will match anything including strings like <code>systemfile&#47;not&#47;the&#47;right&#47;one&#47;.elf</code> ... So definitely not what the OP would like."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477391740, "post_id": 40236013, "comment_id": 67737276, "body": "ok, I missed the part where he wanted the entire string, so we should then drop the ^. However he specifies &quot;substring in the format systemfile*.elf&quot; which means systemfile&quot;anythinghere&quot;.elf so could be systemfile16.elf, systemfile32.elf or sytemfile64bit.elf in my view."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 0, "last_activity_date": 1477391960, "last_edit_date": 1477391960, "creation_date": 1477386994, "answer_id": 40236013, "question_id": 40235112, "link": "https://stackoverflow.com/questions/40235112/search-a-specific-sub-string-pattern-in-a-string-using-perl/40236013#40236013", "title": "search a specific sub string pattern in a string using perl", "body": "<pre><code>use strict;\nuse warnings;\n\nmy $string = 'systemfile16.elf';\nif ($string =~ /^systemfile.*\\.elf$/) {\nprint \"Found string $string\";\n  } else {\nprint \"String not found\";\n</code></pre>\n\n<p>will match systemfile'anythinghere'.elf if you have a set directory.</p>\n\n<p>if you want to search entire string, including directory then:</p>\n\n<pre><code>my $string = 'c:\\\\windows\\\\system\\\\systemfile16.elf';\nif ($string =~ /systemfile.*\\.elf$/) {\nprint \"Found string $string\";\n  } else {\nprint \"String not found\";\n</code></pre>\n\n<p>if you only want to match 2 systemfile then 2 numeric characters .elf then use the other methods mentioned above by other answers. but if you want systemanything.elf then use one of these.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477390739, "post_id": 40237010, "comment_id": 67736665, "body": "This will also match <code>*systemfile*.elf*</code> the OP specifically says he wants to match systemfile*.elf hence why I answered <code>if ($string =~ &#47;^systemfile.*.\\.elf$&#47;);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477392008, "post_id": 40237010, "comment_id": 67737441, "body": "and I made the same mistake by assuming he wanted to match the filename only without path. :)"}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 0, "creation_date": 1477460955, "post_id": 40237010, "comment_id": 67770919, "body": "this will match strings with the full path as well"}], "tags": [], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "is_accepted": false, "score": 0, "last_activity_date": 1477390188, "last_edit_date": 1477390188, "creation_date": 1477389813, "answer_id": 40237010, "question_id": 40235112, "link": "https://stackoverflow.com/questions/40235112/search-a-specific-sub-string-pattern-in-a-string-using-perl/40237010#40237010", "title": "search a specific sub string pattern in a string using perl", "body": "<pre><code>if ($string =~ /systemfile.*\\.elf/) {\n    # Do something with the string.\n}\n</code></pre>\n\n<p>That should match only the strings you seek (given that every time, a given string is stored in <code>$string</code>). Inside the curly brackets you should write your logic.</p>\n\n<p>The <code>.</code> stands for \"any character\" and the <code>*</code> stands for \"as many times you see the last character\". So, <code>.*</code> means \"any character as many times you see it\". If you know that the string will end in this pattern, then it will be safer to add <code>$</code> at the end of the pattern to mark that the string should end with this:</p>\n\n<pre><code>$string =~ /systemfile.*\\.elf$/\n</code></pre>\n\n<p>Just don't forget to <code>chomp $string</code> to avoid any line-breaks that might mess with your desired output.</p>\n"}], "owner": {"reputation": 67, "user_id": 6187954, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-5VTopX-72lM/AAAAAAAAAAI/AAAAAAAAABA/749aiJKdadQ/photo.jpg?sz=128", "display_name": "Hariprasad C R", "link": "https://stackoverflow.com/users/6187954/hariprasad-c-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1948, "favorite_count": 0, "accepted_answer_id": 40235176, "answer_count": 4, "score": 1, "last_activity_date": 1477391960, "creation_date": 1477384346, "last_edit_date": 1495542737, "question_id": 40235112, "link": "https://stackoverflow.com/questions/40235112/search-a-specific-sub-string-pattern-in-a-string-using-perl", "title": "search a specific sub string pattern in a string using perl", "body": "<p>I'm a newbie to perl, I went through this <a href=\"https://stackoverflow.com/questions/7283274/check-whether-a-string-contains-a-substring\">Check whether a string contains a substring</a> to how to check a substring is present in a string, Now my scenario is little different </p>\n\n<p>I have a string like </p>\n\n<p><code>/home/me/Desktop/MyWork/systemfile/directory/systemfile64.elf</code> ,</p>\n\n<p>In the end this might be <code>systemfile32.elf</code> or <code>systemfile16.elf</code>,so In my perl script I need to check whether this string contains a a substring in the format systemfile*.elf.\nHow can I achieve this in perl ?</p>\n\n<p>I'm planing to do like this </p>\n\n<pre><code>if(index($mainstring, _serach_for_pattern_systemfile*.elf_ ) ~= -1) {\n    say\" Found the string\";\n}\n</code></pre>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1477386629, "post_id": 40231134, "comment_id": 67733929, "body": "Does it really print <code>REF(0x35c320)</code>? I&#39;ve never seen Perl print a reference preceded with &quot;REF&quot;. Usually, it would be the type of reference - &quot;HASH&quot;, &quot;ARRAY&quot; or something like that."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1477387144, "post_id": 40231134, "comment_id": 67734251, "body": "On every version of Perl I have tested it on, this code does the right thing. I get no extra reference displayed. If you run just this code, does it still display that extra reference? I think that output is generated by other code that you are not showing us. If this code (and only this code) generates the output you show, then please <a href=\"http://stackoverflow.com/posts/40231134/edit\">edit your question</a> to add the Perl version and operating system that you are using."}], "answers": [{"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "reply_to_user": {"reputation": 1792, "user_id": 3068500, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0cf641fb92b7fd2625f7690aac7f424c?s=128&d=identicon&r=PG&f=1", "display_name": "Gambit2007", "link": "https://stackoverflow.com/users/3068500/gambit2007"}, "edited": false, "score": 0, "creation_date": 1477382837, "post_id": 40231287, "comment_id": 67731518, "body": "@Gambit2007 That behavior is mentioned in <a href=\"http://perldoc.perl.org/perlop.html#Gory-details-of-parsing-quoted-constructs\" rel=\"nofollow noreferrer\">perlop</a>, in the &quot;Interpolation&quot; paragraph : the words &quot;most of the time&quot;, &quot;heuristic estimators&quot;, &quot;not strictly predictable&quot; and &quot;usually correct&quot; speak for themselves!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1477386963, "post_id": 40231287, "comment_id": 67734134, "body": "This doesn&#39;t sound right to me. Given that it is printing &quot;Cleopatra&quot;, Perl is clearly walking the data structure correctly. The <code>REF(0x35c320)</code> must be generated by code that we aren&#39;t seeing here. The documentation you have pointed to is about parsing text in operators like <code>s&#47;&#47;&#47;</code> - it has nothing to do with this current situation."}], "tags": [], "owner": {"reputation": 3262, "user_id": 4023951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cupR7.png?s=128&g=1", "display_name": "Anton Codes", "link": "https://stackoverflow.com/users/4023951/anton-codes"}, "is_accepted": true, "score": 1, "last_activity_date": 1477368960, "creation_date": 1477368960, "answer_id": 40231287, "question_id": 40231134, "link": "https://stackoverflow.com/questions/40231134/reference-to-a-hash-of-a-hash/40231287#40231287", "title": "Reference to a hash of a hash", "body": "<p>Depending on which version of perl and which OS you are using you will get slightly different results.  The trouble really comes from having quotes in your print statement.  If instead your code was</p>\n\n<pre><code>my $hhref = {'ancient' =&gt; {'Adam' =&gt; 'Eve',\n                      'Antony' =&gt; 'Cleopatra'}, \n         'modern' =&gt; {'Clyde' =&gt; 'Bonnie'}};\nprint $hhref-&gt;{'ancient'}{'Antony'};\nprint \"\\n\";\n</code></pre>\n\n<p>then it will print correctly.  Why?  Well, perl has trouble understanding what you mean.  Do you mean \"$hhref\" followed by \"->{'ancient'}{'Antony'}\", or do you mean \"$hhref->{'ancient'}\" followed by \"{'ancient'}\", or is it all together as one variable?  Outside of a string the compiler is exact but inside a string it has to make guesses at what you mean because white space is used differently and not deterministically like it is in code.</p>\n\n<p>Basically, if you want variables to be interpreted correctly every time then reference them outside of quotes in perl.</p>\n"}], "owner": {"reputation": 1792, "user_id": 3068500, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0cf641fb92b7fd2625f7690aac7f424c?s=128&d=identicon&r=PG&f=1", "display_name": "Gambit2007", "link": "https://stackoverflow.com/users/3068500/gambit2007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 40231287, "answer_count": 1, "score": 1, "last_activity_date": 1572514173, "creation_date": 1477367824, "last_edit_date": 1572514173, "question_id": 40231134, "link": "https://stackoverflow.com/questions/40231134/reference-to-a-hash-of-a-hash", "title": "Reference to a hash of a hash", "body": "<p>I have the following code:</p>\n\n<pre><code>my $hhref = {'ancient' =&gt; {'Adam' =&gt; 'Eve',\n                          'Antony' =&gt; 'Cleopatra'}, \n             'modern' =&gt; {'Clyde' =&gt; 'Bonnie'}};\nprint \"$hhref-&gt;{'ancient'}{'Antony'}\\n\";\n</code></pre>\n\n<p>Which prints out:</p>\n\n<pre><code>REF(0x35c320)Cleopatra\n</code></pre>\n\n<p>And I really don't understand why. Why doesn't it just print <code>Cleopatra</code>?</p>\n"}, {"tags": ["perl", "raspberry-pi", "perlbrew"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1477347901, "post_id": 40228495, "comment_id": 67720191, "body": "5.25.6 is a brand new development release. It just came out on October 20. Unless you&#39;re testing new perl features, you should use the latest stable version, 5.24.0 (or is it 5.24.1?)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1477350340, "last_edit_date": 1477350340, "creation_date": 1477349462, "answer_id": 40228805, "question_id": 40228495, "link": "https://stackoverflow.com/questions/40228495/what-am-i-doing-wrong-when-i-try-to-install-a-version-of-perl-using-perlbrew-on/40228805#40228805", "title": "What am I doing wrong when I try to install a version of perl using perlbrew on a raspberry pi?", "body": "<p><code>perlbrew</code> always says <code>perl-XXX is successfully installed</code> for some reason, so disregard that message.</p>\n\n<p>As you can clearly see, a test failed, and the installer itself reported a failure (<code>Result: FAIL</code>). Someone familiar with the process will also notice the output is missing the long list of names of files being copied characteristic of the actual installation portion of the process.</p>\n\n<p>Your Perl wasn't successfully installed, and it was because of a test failure.</p>\n\n<hr>\n\n<p>To debug failed tests, you can go to the build directory and run the test with the harness, or without for more details.</p>\n\n<pre><code>cd \"${PERLBREW_ROOT:-$HOME/perl5/perlbrew}\"/build/perl-5.25.6\n\nt/TEST re/fold_grind.t            # With harness.\n\n./perl -Ilib t/re/fold_grind.t    # Show the actual output of the script.\n</code></pre>\n\n<p>(Tests must be run from the base directory, but <code>TEST</code>'s argument is a path relative to <code>t</code>.)</p>\n\n<hr>\n\n<p>That said, you probably didn't mean to install a development (odd-numbered) version of Perl rather than a stable version. Start by trying to install 5.24.0 instead.</p>\n"}], "owner": {"reputation": 33, "user_id": 4425942, "user_type": "registered", "profile_image": "https://graph.facebook.com/771029821/picture?type=large", "display_name": "David Nicholas Kayal", "link": "https://stackoverflow.com/users/4425942/david-nicholas-kayal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477350340, "creation_date": 1477347660, "question_id": 40228495, "link": "https://stackoverflow.com/questions/40228495/what-am-i-doing-wrong-when-i-try-to-install-a-version-of-perl-using-perlbrew-on", "title": "What am I doing wrong when I try to install a version of perl using perlbrew on a raspberry pi?", "body": "<p>I am trying to install a version of perl on a raspberry pi using perlbrew.  I am getting the following output:</p>\n\n<pre><code>    ../lib/warnings.t .................................................. ok\n\n    Test Summary Report\n    -------------------\n    re/fold_grind.t                                                  (Wstat: 9 Tests: 116 Failed: 0)\n      Non-zero wait status: 9\n      Parse errors: No plan found in TAP output\n    Files=2506, Tests=951126, 13788 wallclock secs (2169.34 usr 66.77 sys + 10394.74 cusr 392.13 csys = 13022.98 CPU)\n    Result: FAIL\n    makefile:854: recipe for target 'test_harness' failed\n    make: *** [test_harness] Error 1\n    perl-5.25.6 is successfully installed.\n    yayster@raspberrypi ~ $ perlbrew list\n    yayster@raspberrypi ~ $ perlbrew available | head\n      perl-5.25.6\n      perl-5.24.0\n      perl-5.22.2\n      perl-5.20.3\n      perl-5.18.4\n      perl-5.16.3\n      perl-5.14.4\n      perl-5.12.5\n      perl-5.10.1\n      perl-5.8.9\n    yayster@raspberrypi ~ $ history | tail -n 5\n      516  perlbrew install perl-5.25.6\n      517  perlbrew -v install perl-5.25.6\n      518  perlbrew list\n      519  perlbrew available | head\n      520  history | tail -n 5\n    yayster@raspberrypi ~ $\n</code></pre>\n\n<p>If anyone could tell me why I am encountering such difficulty, I would be very appreciative.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477355447, "post_id": 40228470, "comment_id": 67722207, "body": "Are you just looking for a total kmer count or do you need a file with all the kmers?"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 1, "creation_date": 1477355507, "post_id": 40228470, "comment_id": 67722225, "body": "Generating about 20M substrings shouldn&#39;t take <i>that</i> long even though that loop isn&#39;t very efficient. How big (bytes and records) is your input file? You could use the following for your last <code>while</code> loop to avoid a large amount of string modifications: <code>for my $i (0..length($sequence)-$k) {     print OUTPUT substr($sequence, $i, $k), &quot;\\n&quot;; }</code>"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477356125, "post_id": 40228470, "comment_id": 67722353, "body": "@ChrisCharley I need a file with all the kmers. I just need to use wc -l command to make sure that I have 20m kmers in total."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1477356495, "post_id": 40228470, "comment_id": 67722413, "body": "@mbethke I&#39;m not exactly sure what&#39;s the size of the input file. But I am assuming the size should be greater than 20mb. And I tried your modification, but it still takes forever for the code to be executed."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477356874, "post_id": 40228470, "comment_id": 67722515, "body": "On a 20,000 size fasta file I have on my computer, I generated almost 20,000 overlapping kmers."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477357271, "post_id": 40228470, "comment_id": 67722617, "body": "@ChrisCharley I don&#39;t know why, but it is taking forever to execute the file. I do not know what is the exact file size, but it should be containing 20m kmers in total."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1477357374, "post_id": 40228470, "comment_id": 67722644, "body": "@mbethke Actually, I tried out your modification, it gave me 1 billion k-mers according to the wc -l command on Linux."}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1477357652, "post_id": 40228470, "comment_id": 67722717, "body": "@Sunny: if the input is that big, you&#39;ll get quite a bit more than 20 million sequences; my wild-ass estimate (35,000 sequences of 500 bytes each) is about 255 million. Still nothing that should kill the process; on reasonably recent hardware it should be possible in a couple of minutes. You could try printing input record numbers to monitor progress. Edit: OK, a billion sounds realistic; so it&#39;s working now?"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1477358019, "post_id": 40228470, "comment_id": 67722812, "body": "@mbethke It&#39;s indeed executing a lot quicker than it used to be. Edit:I just found out why I accidentally made a typo and made it repeat endlessly. (Now fixed). However, I&#39;m getting 23m k-mers instead of 20m (the expected amount)."}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1477358769, "post_id": 40228470, "comment_id": 67723005, "body": "The number of overlapping k-mers in a sequence is <code>length($sequence)-$k+1</code>, so you could easily calculate it for every record. E.g. in your read loop <code>printf &quot;Sequence length is %d; generating %d k-mers of length %d (%d bytes total)&quot;, length($sequence), length($sequence)-$k+1, $k, (length($sequence)-$k+1)*$k;</code>"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1477359429, "post_id": 40228470, "comment_id": 67723161, "body": "@mbethke Thank you very much for the help. I can understand the concept in your code. I&#39;m just surprised how there are 2m extra k-mers appearing in my text file; and I am trying to figure out what I have done wrong."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477359694, "post_id": 40228470, "comment_id": 67723213, "body": "One problem that may be adding the number of kmers too high (23M instead of 20M), you should <code>chomp $line</code> to remove the <code>&gt;</code> at the end of the line (your input record separator). Although, that may not entirely account for the extra 2M."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477360174, "post_id": 40228470, "comment_id": 67723332, "body": "@ChrisCharley The chomp doesn&#39;t make any difference, as I&#39;ve removed the <code>&gt;</code> with <code>$&#47;=&quot;&gt;&quot;;</code>. Thanks for the advise."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477360397, "post_id": 40228470, "comment_id": 67723375, "body": "That doesn&#39;t remove it. The statement<code>$&#47;=&quot;&gt;&quot;;</code> just sets the input record separator, (<code>$&#47;</code>), to <code>&gt;</code>. So it reads one chunk (sequence) at a time. It is still necessary to remove it."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1477360691, "post_id": 40228470, "comment_id": 67723437, "body": "@ChrisCharley I see. It still shows the same amount of k-mers, so I am not sure what&#39;s wrong with it."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1477365993, "post_id": 40230507, "comment_id": 67724603, "body": "I tested out your code, it&#39;s also giving my 23m k-mers, exactly the same as the one I wrote. I am assuming that the extra 2m k-mers comes from &#39;repeated&#39; k-mers (k-mers of exactly same sequence)."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1477366087, "post_id": 40230507, "comment_id": 67724625, "body": "Is there a way to make it print out only distinct k-mers? Thanks."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1477366969, "post_id": 40230507, "comment_id": 67724814, "body": "@Sunny, I edited my code to eliminate duplicate kmers and the results show about 10% less kmers (w/o the duplicates)."}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1477367536, "post_id": 40230507, "comment_id": 67724942, "body": "I do not have the Devel::Size module here. Is there a standard perl way of doing it? Thanks."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1477367797, "post_id": 40230507, "comment_id": 67724996, "body": "@Sunny You don&#39;t need that module for your program. I had it in there so that I could measure the size of the <code>%seen</code> hash. (That last line is included in the code above)"}, {"owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1477368456, "post_id": 40230507, "comment_id": 67725131, "body": "I see! It works perfectly fine now, it takes a bit longer to execute, but it has the exact amount of kmers shown as expected result. May I ask one more question, if I want to count the total number of each distinct kmer, how would I add the code to it? Thanks."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "edited": false, "score": 0, "creation_date": 1477413325, "post_id": 40230507, "comment_id": 67752731, "body": "From the command line, <code>perl -0 -ne &quot;print tr&#47;\\n&#47;&#47;&quot; kmers.txt</code>"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 3, "last_activity_date": 1477367644, "last_edit_date": 1477367644, "creation_date": 1477363071, "answer_id": 40230507, "question_id": 40228470, "link": "https://stackoverflow.com/questions/40228470/find-and-print-all-overlapping-k-mers/40230507#40230507", "title": "Find and print all overlapping k-mers", "body": "<p>Not sure why you're not getting your desired results.</p>\n\n<p>I thought I'd post the 2 programs I've used following your problem description.</p>\n\n<p>The first one just counts the kmers in a file I used for testing, (<code>fasta_dat.txt</code>). It doesn't print them out but is just a check to see how many kmers there are.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Bio::SeqIO;\n\nmy $in  = Bio::SeqIO-&gt;new( -file   =&gt; \"fasta_dat.txt\" ,\n                           -format =&gt; 'fasta');\n\nmy $count_kmers;\nmy $k = 15;\nwhile ( my $seq = $in-&gt;next_seq) {\n    $count_kmers += $seq-&gt;length - $k + 1;\n}\n\nprint $count_kmers;\n\n__END__\nC:\\Old_Data\\perlp&gt;perl t9.pl\n18657\n</code></pre>\n\n<p>You can see the count (after the <code>__END__</code> token), 18657. This count agreed with the count of the kmers when I printed them out using your code.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.014;\nuse Devel::Size 'total_size';\n\nmy $k = 15;\nmy $input = 'fasta_dat.txt';\nmy $output = 'kmers.txt';\nmy $match_count = 0;\n\n#Open File\nunless (open(FASTA, \"&lt;\", $input)){\n    die \"Unable to open fasta file\", $!;\n    }\n\n    #Unwraps the FASTA format file\n    $/=\"&gt;\";\n    #Separate header and sequence\n    #Remove spaces\nunless (open(OUTPUT, \"&gt;\", $output)){\n    die \"Unable to open file\", $!;\n}\n\n&lt;FASTA&gt;; # discard 'first' 'empty' record\n\nmy %seen;\nwhile (my $line = &lt;FASTA&gt;){\n    chomp $line;\n    my($header, @seq) = split(/\\n/, $line);\n    my $sequence = join '', @seq;\n\n    for my $i (0 .. length($sequence) - $k) {\n        my $kmer = substr($sequence, $i, $k);\n        print OUTPUT $kmer, \"\\n\" unless $seen{$kmer}++;\n    }\n}\nprint total_size(\\%seen);\n</code></pre>\n\n<p><strong>Update</strong> Tests I ran showed about a 100 times increase in memory for the hash size. The number of kmers in my test were about 18500. That resulted in a hash size of 1.8MB.</p>\n\n<p>For your data, with kmers of 22M, would result in a hash size ~ 2.2GB. Don't know if this would exceed your memory capacity.</p>\n"}], "owner": {"reputation": 69, "user_id": 6338276, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a916995cf48a565f47353675b9729470?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/6338276/kaiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 40230507, "answer_count": 1, "score": 4, "last_activity_date": 1477371617, "creation_date": 1477347536, "last_edit_date": 1477371617, "question_id": 40228470, "link": "https://stackoverflow.com/questions/40228470/find-and-print-all-overlapping-k-mers", "title": "Find and print all overlapping k-mers", "body": "<p>I am trying to write a perl program that reads a fasta file and prints out a text file containing all available (overlapping) length 15 k-mers from the sequence (fasta) file. This program works perfectly fine when I'm searching for non-overlapping k-mers, but when I coded it to find overlapping k-mers, it takes forever for it to execute and Cygwin ended up killed program after 12 hours. (I left the match_count there to count the total, please feel free to ignore that line)</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $k = 15;\nmy $input = 'fasta.fasta';\nmy $output = 'text.txt';\nmy $match_count = 0;\n\n#Open File\nunless (open(FASTA, \"&lt;\", $input)){\n    die \"Unable to open fasta file\", $!;\n    }\n\n    #Unwraps the FASTA format file\n    $/=\"&gt;\";\n    #Separate header and sequence\n    #Remove spaces\nunless (open(OUTPUT, \"&gt;\", $output)){\ndie \"Unable to open file\", $!;\n}\n\n    while (my $line = &lt;FASTA&gt;){\n            my($header, @seq) = split(/\\n/, $line);\n                    my $sequence = join '', @seq;\n\n    while (length($sequence) &gt;= $k){\n        $sequence =~ m/(.{$k})/;\n        print OUTPUT \"$1\\n\";\n        $sequence = substr($sequence, 1, length($sequence)-1);\n    }\n}\n</code></pre>\n\n<p>The result I am looking for is:</p>\n\n<pre><code>A total of 20938309 k-mers printed in the text file when I use the wc -l command.\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl", "hex"], "comments": [{"owner": {"reputation": 956, "user_id": 5758637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AjRiy.jpg?s=128&g=1", "display_name": "Michael Armes", "link": "https://stackoverflow.com/users/5758637/michael-armes"}, "edited": false, "score": 1, "creation_date": 1477339410, "post_id": 40226548, "comment_id": 67716632, "body": "Would this help? <a href=\"http://stackoverflow.com/questions/36731370/convert-64-bit-hex-to-nanoseconds-timestamps\">http://stackoverflow.com/questions/36731370/convert-64-bit-h&zwnj;&#8203;ex-to-nanoseconds-ti&zwnj;&#8203;mestamps</a>"}, {"owner": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "reply_to_user": {"reputation": 956, "user_id": 5758637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AjRiy.jpg?s=128&g=1", "display_name": "Michael Armes", "link": "https://stackoverflow.com/users/5758637/michael-armes"}, "edited": false, "score": 0, "creation_date": 1477339721, "post_id": 40226548, "comment_id": 67716770, "body": "the link tells about doing it in c++, I am using perl to convert, i am very close but missing on last bit."}], "answers": [{"comments": [{"owner": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "edited": false, "score": 0, "creation_date": 1477340524, "post_id": 40226758, "comment_id": 67717167, "body": "I am using: if (defined($opt_gmt)) {     # GMT always wins.     $converter = \\&amp;my_gmtime; } elsif (defined($opt_local)) {     # localtime requested.     $converter = \\&amp;my_localtime; } else {     # Default is localtime.     $converter = \\&amp;my_localtime; }"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "edited": false, "score": 0, "creation_date": 1477340608, "post_id": 40226758, "comment_id": 67717213, "body": "Adjusted accordingly. It&#39;s really weird that <code>$opt_gmt = 0;</code> causes UTC to be used, though."}, {"owner": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "edited": false, "score": 0, "creation_date": 1477407110, "post_id": 40226758, "comment_id": 67748369, "body": "just a follow up ,can it be done without using any other module? but the core??"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "edited": false, "score": 1, "creation_date": 1477412814, "post_id": 40226758, "comment_id": 67752424, "body": "Yes, See the first half of my answer. It only uses core Perl."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1477341442, "last_edit_date": 1477341442, "creation_date": 1477340019, "answer_id": 40226758, "question_id": 40226548, "link": "https://stackoverflow.com/questions/40226548/how-to-get-nano-second-granularity-from-hex-time/40226758#40226758", "title": "How to get nano second granularity from hex time?", "body": "<p><code>POSIX::strftime</code> doesn't support fractional seconds, so you need to build the output in parts.</p>\n\n<pre><code>use POSIX qw( strftime );\n\nmy $opt_gmt = 1;\nmy $hex = '580a9272.0a9ce167';\n\nmy ($s, $ns) = map hex($_), split /\\./, $hex;\nmy $formatted_ns = sprintf(\"%09d\", $ns);\nmy $formatted = strftime(\"%a %b %d %H:%M:%S.$formatted_ns %Y\",\n    defined($opt_gmt) ? gmtime($s) : localtime($s));\n\nsay $formatted;  # Fri Oct 21 22:10:58.178053479 2016\n</code></pre>\n\n<p>DateTime has native support for nanoseconds, so that presents an alternative.</p>\n\n<pre><code>use DateTime qw( );\n\nmy $opt_gmt = 1;\nmy $hex = '580a9272.0a9ce167';\n\nmy ($s, $ns) = map hex($_), split /\\./, $hex;\nmy $dt = DateTime-&gt;from_epoch( epoch =&gt; $s );\n$dt-&gt;set_nanosecond( $ns );\n$dt-&gt;set_time_zone( defined($opt_gmt) ? 'UTC' : 'local' );\n\nsay $dt-&gt;strftime(\"%a %b %d %H:%M:%S.%N %Y\");  # Fri Oct 21 22:10:58.178053479 2016\n</code></pre>\n"}], "owner": {"reputation": 522, "user_id": 3904661, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/86fO8.jpg?s=128&g=1", "display_name": "MikasaAckerman", "link": "https://stackoverflow.com/users/3904661/mikasaackerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 4, "accepted_answer_id": 40226758, "answer_count": 1, "score": 5, "last_activity_date": 1477355952, "creation_date": 1477339215, "question_id": 40226548, "link": "https://stackoverflow.com/questions/40226548/how-to-get-nano-second-granularity-from-hex-time", "title": "How to get nano second granularity from hex time?", "body": "<p>I am trying to convert hex time(getting first output from kernel module) into nanosecond granularity,</p>\n\n<pre><code>580a9272.0a9ce167 \n</code></pre>\n\n<p>and I am trying to convert it using perl into human readable format:</p>\n\n<pre><code>while (&lt;&gt;) {\ns/^([a-fA-F0-9]+)(\\.)([a-fA-F0-9]+)(\\s+.*)/sprintf(\"%s%s%s%s\",&amp;$converter(hex($1)), $2, hex($3), $4)/oe;\n} continue {\nprint;\n}\n</code></pre>\n\n<p>output : Fri Oct 21 18:10:58 2016.178053479</p>\n\n<p>Converter uses localtime() and gmtime() directly\nI want time with nano granularity and then year.Any help is highly appreciated.</p>\n"}, {"tags": ["perl", "pdf-generation", "pdftk"], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 661440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd32692c3bb8c4161d4e78c9041abb69?s=128&d=identicon&r=PG", "display_name": "Finbar Crago", "link": "https://stackoverflow.com/users/661440/finbar-crago"}, "is_accepted": true, "score": 0, "last_activity_date": 1477471203, "last_edit_date": 1477471203, "creation_date": 1477469796, "answer_id": 40257055, "question_id": 40224786, "link": "https://stackoverflow.com/questions/40224786/pdftk-background-image/40257055#40257055", "title": "PDF::Tk Background Image", "body": "<p>PDF::Tk is not exactly intuitive, <code>call_pdftk($INPUT, $OUTPUT, @ARGS)</code> executes <code>pdftk $INPUT @ARGS output $OUTPUT</code>... You can get help on what to feed to @ARGS from <a href=\"https://linux.die.net/man/1/pdftk\" rel=\"nofollow\">man pdftk</a>.</p>\n\n<pre><code>my $pdftk = PDF::Tk-&gt;new;\n$pdftk-&gt;call_pdftk(\\$PDF_AS_STRING, \\$OUT, 'background', 'bg.pdf');\n\nprint \"Content-Type: application/pdf\\r\\n\";\nprint \"Content-Disposition: attachment; filename=done.pdf\\r\\n\\r\\n\";\nprint $OUT;\n</code></pre>\n\n<hr>\n\n<p>Alternatively you might want to take a look at something like <a href=\"https://metacpan.org/pod/HTML%3A%3AHTMLDoc\" rel=\"nofollow\">HTML::HTMLDoc</a> which has support for <code>&lt;body background=\"bg.jpg\"&gt;</code> and a <code>set_bodyimage($image)</code> function.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use HTML::HTMLDoc;\nmy $htmldoc = new HTML::HTMLDoc;\n$htmldoc-&gt;set_html_content(&lt;&lt;\"EOF\");\n&lt;html&gt;&lt;body&gt;   \nThis is my &lt;b&gt;pdf&lt;/b&gt;...\n&lt;/body&gt;&lt;/html&gt;\nEOF\n\n$htmldoc-&gt;set_bodyimage('bg.png');\nprint $htmldoc-&gt;generate_pdf()-&gt;to_string();\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 6780437, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3a4c11e152223b02b50c56099c73d8ca?s=128&d=identicon&r=PG&f=1", "display_name": "BlowFish", "link": "https://stackoverflow.com/users/6780437/blowfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 40257055, "answer_count": 1, "score": 0, "last_activity_date": 1477471203, "creation_date": 1477332614, "last_edit_date": 1477349253, "question_id": 40224786, "link": "https://stackoverflow.com/questions/40224786/pdftk-background-image", "title": "PDF::Tk Background Image", "body": "<p>I have a code that spits out a bunch of lines of HTML, turns into PSLines, with turns into PDF Lines.  After the PDF lines I need PDF::Tk to insert a background image.  </p>\n\n<p>Below is my code, with a comment on where I think I need the code.  Can anyone help me with this code snippet?</p>\n\n<pre><code>sub printFilePdf {\n    my $unique_id = shift;\n    my ($file) = \"$OUTFILES/$id.html\";\n\n    open(my $htmlFH, '&lt;', $file) or die \"Can't open file $file $!\\n\";\n\n    my $processId = open2(\\*POUT, \\*PIN, qq(html2ps -U -f /home/apache/cgi-bin/test/html2psrc-tst));\n\n    my @lines = &lt;$htmlFH&gt;;\n    print PIN @lines;\n    close PIN;\n\n    my @psLines;\n    while (&lt;POUT&gt;) \n    {\n        chomp;\n        push(@psLines,$_);\n    }\n    waitpid $processId, 0;\n\n    $processId = open2(\\*POUT, \\*PIN, qq(ps2pdf -sPAPERSIZE=letter - -));\n    print PIN \"$_\\n\" foreach(@psLines);\n    close PIN;\n\n    my @pdfLines;\n    while (&lt;POUT&gt;) {\n        chomp;\n        push(@pdfLines, $_);\n    }\n    waitpid $processId, 0;\n\n    #Insert Code Here\n\n    print \"Content-Type: application/pdf\\n\";\n    print \"Content-Disposition: attachment; filename=driverhistoryrecord.pdf\\n\\n\";\n    print \"$_\\n\" foreach(@pdfLines);\n    }\n</code></pre>\n"}, {"tags": ["perl", "perl-packager", "pp-perl-par-packager"], "answers": [{"tags": [], "owner": {"reputation": 2063, "user_id": 72234, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/DOqkL.jpg?s=128&g=1", "display_name": "flamey", "link": "https://stackoverflow.com/users/72234/flamey"}, "is_accepted": true, "score": 1, "last_activity_date": 1477391819, "creation_date": 1477391819, "answer_id": 40237737, "question_id": 40224550, "link": "https://stackoverflow.com/questions/40224550/missing-libexpat-1-dll-error-for-executable-made-with-pp/40237737#40237737", "title": "Missing &#39;libexpat-1_.dll&#39; error for executable made with pp", "body": "<p>I had a typo in DLL name. Using <code>-l</code> option resolved issue. Specifying modules in the command wasn't necessary, as pp scans script for the used modules, and includes them automatically. Built it with:</p>\n\n<pre><code>pp -l \"libexpat-1__.dll\" -o test.exe test.pl\n</code></pre>\n"}], "owner": {"reputation": 2063, "user_id": 72234, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/DOqkL.jpg?s=128&g=1", "display_name": "flamey", "link": "https://stackoverflow.com/users/72234/flamey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1843, "favorite_count": 0, "accepted_answer_id": 40237737, "answer_count": 1, "score": 0, "last_activity_date": 1477407535, "creation_date": 1477331699, "last_edit_date": 1477407535, "question_id": 40224550, "link": "https://stackoverflow.com/questions/40224550/missing-libexpat-1-dll-error-for-executable-made-with-pp", "title": "Missing &#39;libexpat-1_.dll&#39; error for executable made with pp", "body": "<p>I made <code>exe</code> file with pp using Strawberry Perl, but when I run it on another machine, I get following error:</p>\n\n<pre><code>The program can't start because libexpat-1__.dll is missing from your computer. Try reinstalling the program to fix this problem. \n</code></pre>\n\n<p>I make the executable with this command:</p>\n\n<pre><code>pp -M FindBin -M DateTime -M DateTime::Format::JSON::MicrosoftDateFormat -M DateTime::Format::DateParse -M REST::Client -M JSON::XS -M Spreadsheet::ParseExcel -M Spreadsheet::ParseXLSX -M Log::Log4perl::Tiny -o test.exe test.pl\n</code></pre>\n\n<p>I tried using <code>-a \"c:\\strawberry\\c\\bin\\libexpat-1_.dll\"</code> (didn't help) and <code>-l \"c:\\strawberry\\c\\bin\\libexpat-1_.dll\"</code> (\"Can't find shared library..\" error).</p>\n\n<p>How can I resolve this issue?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477331371, "post_id": 40224392, "comment_id": 67712416, "body": "Where does <code>$fh</code> come from? Because you use <code>strict</code> and <code>warnings</code> (thanks for that!) you must get some error. Not?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477331539, "post_id": 40224392, "comment_id": 67712496, "body": "Your <code>$find</code> contains <code>mySql1</code> with a trailing <code>1</code> and thus won&#39;t catch the 2nd and 3rd line (because they only contain <code>mySql2</code> and <code>\u20263</code>)."}, {"owner": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477332010, "post_id": 40224392, "comment_id": 67712736, "body": "$fh is the file handler for input file and the input file has multiple lines just i want to search line contain  mySql"}, {"owner": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477332198, "post_id": 40224392, "comment_id": 67712839, "body": "let say line mysql1 10,10,10  which is match then i am reading first value but why i ma skipping rest of two values"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477332276, "post_id": 40224392, "comment_id": 67712883, "body": "Look at my comment above! You search for <code>mySql1</code> and that is only contained in your first line."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1477339847, "post_id": 40224392, "comment_id": 67716832, "body": "The past participle of &quot;split&quot; is just &quot;split&quot;: there is no &quot;splitted&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477333465, "post_id": 40224672, "comment_id": 67713489, "body": "if the input is mySqul1{3}   {10,10,10} type this word work ..?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477333755, "post_id": 40224672, "comment_id": 67713638, "body": "Of course not. The different input needs a different pattern."}, {"owner": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477334055, "post_id": 40224672, "comment_id": 67713770, "body": "Any suggestions what would be the change if the input is mySqul1{3} {10,10,10} ?"}, {"owner": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477334257, "post_id": 40224672, "comment_id": 67713871, "body": "your code is doing matching and replacement in the same line but what i was doing in first matching then substitution in different line as while loop read file line by line so i am able to read only first line my understating is correct ?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477334575, "post_id": 40224672, "comment_id": 67714038, "body": "You can drop the <code>if (&#47;^mySql&#47;)</code> because the following replacement will do nothing if the search string isn&#39;t found. Your code is &quot;if the line starts with &#39;mySql&#39; then replace lines starting with &#39;mySql&#39; with \u2026&quot;. My code just skips the first check because it is unnecessary."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 1, "creation_date": 1477334733, "post_id": 40224672, "comment_id": 67714124, "body": "For your now different input you can try this: <code>s&#47;^mySq(u?)l(\\d)\\{3\\} \\{(\\d+),\\3,\\3\\} type&#47;&quot;mySq${1}l$2 $3\\n&quot; x 3&#47;e;</code>. I didn&#39;t test it and I also do not know what your expected output is."}, {"owner": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 0, "creation_date": 1477335087, "post_id": 40224672, "comment_id": 67714337, "body": "@expecting the same output but with different input type is &quot;mySql1{3} {10,10,10} &quot; ."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "edited": false, "score": 3, "creation_date": 1477335582, "post_id": 40224672, "comment_id": 67714600, "body": "Now you again changed your input. The word <code>type</code> is missing and suddenly the <code>u</code> in <code>mySqul</code> disappeared. Programming is about precision. Please be more careful when asking questions here. The people answering here are doing this in their spare time and for free. We don&#39;t like guesswork and moving targets. I answered your original question according to your specification. If you have another question, feel free to post it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1477340426, "post_id": 40224672, "comment_id": 67717119, "body": "@PerlDuck: You&#39;ve allowed a dialogue to continue far too long without explaining the &quot;one question, optional enhancements&quot; model. Any &quot;yes, but&quot; comments should be directed to a new question."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": -1, "last_activity_date": 1477333601, "last_edit_date": 1477333601, "creation_date": 1477332185, "answer_id": 40224672, "question_id": 40224392, "link": "https://stackoverflow.com/questions/40224392/unable-to-read-the-splited-lines-after-replacement/40224672#40224672", "title": "unable to read the splited lines after replacement", "body": "<p><strong>Script</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n    s/^mySql(\\d)    # the literal string 'mySql' followed by a digit.\n                    # We capture that digit as $1.\n      \\s            # a space\n      (\\d+),        # digits (your '10'), followed by a ',', captured as $2\n      \\2,           # that very same digits again (i.e. again '10')\n      \\2            # once again\n      \\s            # a space\n      type          # literal 'type'\n      /mySql$1 $2\\nmySql$1 $2\\nmySql$1 $2\\n/x;\n    print;\n}\n\n__DATA__\nmySql1 10,10,10 type\nmySql2 10,10,10 type\nmySql3 10,10,10 type\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>mySql1 10\nmySql1 10\nmySql1 10\n\nmySql2 10\nmySql2 10\nmySql2 10\n\nmySql3 10\nmySql3 10\nmySql3 10\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>I added the <code>/x</code> switch to the <code>s///</code> command. It allows for\ncomments and such in the find-pattern. I explained the regex\nin the code above. </p>\n\n<p>The replacement is simply three times <code>mySql$1 $2\\n</code>. <code>$1</code> is the\ncontent of the first capture group (your digits 1, 2, 3), and\n<code>$2</code> is the content of the second capture group (your 10).</p>\n\n<p>Note that this will work only for your exact input. It will <em>not</em> catch any of the following:</p>\n\n<pre><code>mySql4 11,12,13 type      # different numbers\nmySql5 10,10,10,10 type   # not three numbers (but four)\nmySql10 10,10,10 type     # two digits after 'mySql'\n</code></pre>\n\n<p>But that was how you specified your question.</p>\n"}], "owner": {"reputation": 1, "user_id": 7065664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ff6b664fb23e2bd4f6f028805097b8?s=128&d=identicon&r=PG&f=1", "display_name": "mat", "link": "https://stackoverflow.com/users/7065664/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1477357655, "creation_date": 1477331080, "last_edit_date": 1477357655, "question_id": 40224392, "link": "https://stackoverflow.com/questions/40224392/unable-to-read-the-splited-lines-after-replacement", "title": "unable to read the splited lines after replacement", "body": "<p>My input:</p>\n\n<pre><code>mySql1 10,10,10 type  \nmySql2 10,10,10 type\nmySql3 10,10,10 type\n</code></pre>\n\n<p>I was trying to search the string mysql in my input file and want to split \nthis way then I want to read split string line by line.</p>\n\n<pre><code>mySql 10\nmySql 10\nmySql 10 \n</code></pre>\n\n<p>I am able to read the first split line \"mysql 10\", but i am missing \nnext two lines.</p>\n\n<p>What could be the problem with my code?</p>\n\n<p>my code:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $find =\"mySql1 10,10,10 type\";\nmy $replace =\"\\nmySql1 10\\nmySql1 10\\nmySql1 10 \";\n\nwhile(&lt;$fh&gt;)\n{\n    if (/^mySql/)\n    {\n        s/$find/$replace/;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "indexing"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1477317420, "post_id": 40220046, "comment_id": 67703877, "body": "I&#39;ve fixed the indentation on your code. I&#39;m constantly astonished how many people try to write code with seemingly random indentation!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1477317779, "post_id": 40220046, "comment_id": 67704140, "body": "<code>perltidy -pbp</code> ftw!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1477324038, "post_id": 40220046, "comment_id": 67708321, "body": "It would help a lot if you showed the sort of output that you wanted."}], "answers": [{"comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1477379661, "post_id": 40220355, "comment_id": 67729602, "body": "What should the output be if the same file is supplied twice?"}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1477381435, "post_id": 40220355, "comment_id": 67730637, "body": "@reinierpost if the same file is supplied twice, the word count would double for that file. That particular (and eyebrow-raising?) scenario can be allayed by pre-processing <code>@ARGV</code> before it gets to the <code>while</code> loop: <code>use List::Util qw(sum uniq); BEGIN { @ARGV = uniq @ARGV }</code>"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1477393516, "post_id": 40220355, "comment_id": 67738334, "body": "Or by printing and clearing the hash on <a href=\"http://perldoc.perl.org/functions/eof.html\" rel=\"nofollow noreferrer\"><code>eof</code></a>."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 4, "last_activity_date": 1477395117, "last_edit_date": 1477395117, "creation_date": 1477317434, "answer_id": 40220355, "question_id": 40220046, "link": "https://stackoverflow.com/questions/40220046/perl-printing-out-the-file-where-a-word-occurs/40220355#40220355", "title": "Perl: Printing out the file where a word occurs", "body": "<p>The filename is accessible through <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\"><code>$ARGV</code></a>.</p>\n\n<p>You can use this to build a nested hash with the filename and word as keys:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util 'sum';\n\nwhile (&lt;&gt;) {\n    $count{$word}{$ARGV}++ for map +lc, /\\w+/g;\n}\n\nforeach my $word ( keys %count ) {\n\n    my @files = keys %$word;  # All files containing lc $word\n    print \"Total word count for '$word': \", sum( @{ $count{$word} }{@files} ), \"\\n\";\n\n    for my $file ( @files ) {\n        print \"$count{$word}{$file} counts of '$word' detected in '$file'\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1477317695, "creation_date": 1477317695, "answer_id": 40220445, "question_id": 40220046, "link": "https://stackoverflow.com/questions/40220046/perl-printing-out-the-file-where-a-word-occurs/40220445#40220445", "title": "Perl: Printing out the file where a word occurs", "body": "<p>Using an array seems reasonable, if you don't visit any file more than once - then you can always just check the last value stored in the array. Otherwise, use a hash.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %count;\nmy %in_file;\nwhile (&lt;&gt;) {\n    my $casefoldstr = lc;\n    for my $str ($casefoldstr =~ /\\w+/g) {\n        ++$count{$str};\n        push @{ $in_file{$str} }, $ARGV\n            unless ref $in_file{$str} &amp;&amp; $in_file{$str}[-1] eq $ARGV;\n    }\n}\n\nforeach my $str (sort keys %count) {\n    printf  \"$str $count{$str}: @{ $in_file{$str} }\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 5406949, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/99d29ed48d5b26657df4af37cff0fb7e?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/5406949/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 40220445, "answer_count": 2, "score": 0, "last_activity_date": 1477395117, "creation_date": 1477316632, "last_edit_date": 1477322167, "question_id": 40220046, "link": "https://stackoverflow.com/questions/40220046/perl-printing-out-the-file-where-a-word-occurs", "title": "Perl: Printing out the file where a word occurs", "body": "<p>I am trying to write a small program that takes from command line file(s) and prints out the number of occurrence of a word from all files and in which file it occurs. The first part, finding the number of occurrence of a word, seems to work well. </p>\n\n<p>However, I am struggling with the second part, namely, finding in which file (i.e. file name) the word occurs. I am thinking of using an array that stores the word but don\u2019t know if this is the best way, or what is the best way.\nThis is the code I have so far and seems to work well for the part that counts the number of times a word occurs in given file(s):</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %count;\n\nwhile (&lt;&gt;) {\n\n  my $casefoldstr = lc $_;\n\n  foreach my $str ($casefoldstr =~ /\\w+/g) {\n    $count{$str}++;\n  }\n}\n\nforeach my $str (sort keys %count) {\n  printf  \"$str $count{$str}:\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "linker-errors", "pp-perl-par-packager"], "owner": {"reputation": 63, "user_id": 4764142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8ed4e031865bdef2683cd2a398d2866a?s=128&d=identicon&r=PG&f=1", "display_name": "Sanchita Ghai", "link": "https://stackoverflow.com/users/4764142/sanchita-ghai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1477316653, "creation_date": 1477315884, "last_edit_date": 1477316653, "question_id": 40219792, "link": "https://stackoverflow.com/questions/40219792/link-perl-xsub-via-perl-packager", "title": "Link perl xsub via Perl packager", "body": "<p>I have created one perl xsub to call a C function from my perl script.But the problem is that I cannot install that xsub directly by \"make install'.The xsub has been created by make command already in the mentioned folder.I have to use it without installing it.Also I am using Perl packager to create executable for my perl script.here is my make file-</p>\n\n<pre><code>    PP=/usr/local/bin/pp\n    INSTALL=/usr/bin/install\n    PROG=nsgslbautosync\n    SDIR=../scripts\n    SRCS=$(SDIR)/syncgslbconfig.pl\n\n    nsgslbautosync:$(SRCS) \n       $(PP) --lib GslbSync/lib/GslbSync.pm --link GslbSync/blib/arch/auto/GslbSync/GslbSync.so -o $@ $&lt;\n</code></pre>\n\n<p>Now the problem is that even after linking the xsub,I am getting the following error on running the script-</p>\n\n<pre><code>    Can't locate GslbSync.pm in @INC (@INC contains: CODE(0x802941930)/var/tmp/par-726f6f74/cache-dbeb96ca0c7f9489e2bfc7a2fc11650939727dbd/inc/lib /var/tmp/par-726f6f74/cache-dbeb96ca0c7f9489e2bfc7a2fc11650939727dbd/inc CODE(0x80226dde0)CODE(0x802276060)) at script/syncgslbconfig.pl line 20.\n    BEGIN failed--compilation aborted at script/syncgslbconfig.pl line .ERROR: \n</code></pre>\n\n<p>I even tried to link the xsub in my script by using \"use lib\" but no luck, got the same error.</p>\n"}, {"tags": ["c", "perl", "debugging", "crash", "benchmarking"], "comments": [{"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1477318370, "post_id": 40219744, "comment_id": 67704577, "body": "This looks like something different than <a href=\"https://github.com/briandfoy/perlbench\" rel=\"nofollow noreferrer\">github.com/briandfoy/perlbench</a>, but if it isn&#39;t you can create an issue on GitHub."}, {"owner": {"reputation": 2817, "user_id": 1864317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/593ff754b31a4e1174a6fd7c6f511a9e?s=128&d=identicon&r=PG", "display_name": "stanm", "link": "https://stackoverflow.com/users/1864317/stanm"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1477904558, "post_id": 40219744, "comment_id": 67932551, "body": "It is different indeed. I was not aware of <a href=\"https://github.com/briandfoy/perlbench\" rel=\"nofollow noreferrer\">github.com/briandfoy/perlbench</a> . The one in this question is a part of the SPEC CPU 2006 benchmark suite and is using (an old version of) the perl interpreter as a benchmark for C compilers and/or hardware;OS;etc."}], "answers": [{"comments": [{"owner": {"reputation": 240629, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1477320299, "post_id": 40219745, "comment_id": 67705950, "body": "In the GNU C dialect of the C language, you could probably also use <code>__attribute__((packed))</code> to get the same effect.  Interesting approach to use bitfields to get struct packing without any non-portable syntax."}, {"owner": {"reputation": 2817, "user_id": 1864317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/593ff754b31a4e1174a6fd7c6f511a9e?s=128&d=identicon&r=PG", "display_name": "stanm", "link": "https://stackoverflow.com/users/1864317/stanm"}, "reply_to_user": {"reputation": 240629, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1477904240, "post_id": 40219745, "comment_id": 67932394, "body": "We tried using <code>__attribute__((packed))</code> first (it is supposed to work on both GCC and clang) but that didn&#39;t change the memory layout (possibly we used it wrong). Then we assumed bit fields won&#39;t help either so we went through a lot of different approaches before trying this easy one and it worked. But it&#39;s definitely duct tape."}, {"owner": {"reputation": 240629, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1477908407, "post_id": 40219745, "comment_id": 67934369, "body": "gcc has a warning if you put it before the <code>struct</code> keyword, instead of <code>struct __attribute((packed)) regnode_1</code>, enabled with <code>-Wall</code> at least.  BTW, I&#39;m not seeing any padding with just the normal definition, in the x86-64 SystemV ABI.  Does the Windows ABI struct-layout rules result in padding for this struct?  <a href=\"https://godbolt.org/g/CTmfef\" rel=\"nofollow noreferrer\">Take a look on Godbolt</a>, which targets x86-64 Linux by default (System V ABI).  I put in some commented-out <code>unsigned :1</code> anonymous padding to show that it does have a different effect on the packed/non-packed structs, but that they&#39;re the same without."}], "tags": [], "owner": {"reputation": 2817, "user_id": 1864317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/593ff754b31a4e1174a6fd7c6f511a9e?s=128&d=identicon&r=PG", "display_name": "stanm", "link": "https://stackoverflow.com/users/1864317/stanm"}, "is_accepted": true, "score": 4, "last_activity_date": 1477315753, "creation_date": 1477315753, "answer_id": 40219745, "question_id": 40219744, "link": "https://stackoverflow.com/questions/40219744/perlbench-results-in-segfault-outside-the-spec-2006-harness/40219745#40219745", "title": "perlbench results in segfault outside the SPEC 2006 harness", "body": "<p>The segfault is caused by a garbage value of the variable <code>n</code> on the pointed out line. Inspecting the code shows that the value comes from the field <code>arg1</code> of an object of type:</p>\n\n<pre><code>struct regnode_1 {\n    U8  flags;\n    U8  type;\n    U16 next_off;\n    U32 arg1;\n};\n</code></pre>\n\n<p>Inspecting the memory location of the object shows that it is not packed, i.e. there is 32bit padding between <code>next_off</code> and <code>arg1</code>:</p>\n\n<pre><code>(gdb) x/16xb scan\n0x7f4978:       0xde    0x2d    0x02    0x00    0x00    0x00    0x00    0x00\n0x7f4980:       0x00    0x11    0x0d    0x00    0x00    0x00    0x00    0x00\n(gdb) print/x n\n$1 = 0xd1100\n</code></pre>\n\n<p>This is suspicious. There's pointer and type conversion going on in <code>perlbench</code>, so perhaps type size assumptions fail somewhere. Compiling with <code>multilib</code> yields a working benchmark and examining the memory verifies that there is no padding.</p>\n\n<p>Forcing the structure into a bitfield fixes the crash when performing a 64-bit compile:</p>\n\n<pre><code>struct regnode_1 {\n    U8  flags : 8;\n    U8  type : 8;\n    U16 next_off : 16;\n    U32 arg1 : 32;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "is_accepted": false, "score": 2, "last_activity_date": 1485361785, "last_edit_date": 1485361785, "creation_date": 1485358507, "answer_id": 41855552, "question_id": 40219744, "link": "https://stackoverflow.com/questions/40219744/perlbench-results-in-segfault-outside-the-spec-2006-harness/41855552#41855552", "title": "perlbench results in segfault outside the SPEC 2006 harness", "body": "<p>This is how our little investigation progressed:</p>\n\n<p>At first we thought it was some padding issue, but as Peter pointed out on <a href=\"https://godbolt.org/g/CTmfef\" rel=\"nofollow noreferrer\">Godbolt</a>, no such thing occurs. So, the packing or not of the structure did not change anything.</p>\n\n<p>Then, I got suspicious of the (clearly twisted) way that Perl handles pointers. The majority of the casts are violating strict aliasing as defined by the standard. Since the segmentation fault happened on a pointer cast, namely:</p>\n\n<pre><code>struct regnode {\n    U8  flags;\n    U8  type;\n    U16 next_off;\n};\n</code></pre>\n\n<p>to</p>\n\n<pre><code>struct regnode_1 {\n    U8  flags;\n    U8  type;\n    U16 next_off;\n    U32 arg1;\n};\n</code></pre>\n\n<p>However, enabling it with the <code>-fstrict-aliasing</code> flags didn't change anything. Although it qualifies as undefined behaviour, there is no overlap in memory, since the elements/nodes of the regular expression that is being currently parsed are laid out separately in memory.</p>\n\n<p>Going deeper and checking the LLVM IR for the <code>switch</code> block in question, I got this in <code>regexec.ll</code></p>\n\n<pre><code>; truncated\n%876 = load %struct.regnode*, %struct.regnode** %scan, align 8, !dbg !8005\n%877 = bitcast %struct.regnode* %876 to %struct.regnode_1*, !dbg !8005\n%arg11715 = getelementptr inbounds %struct.regnode_1, %struct.regnode_1* %877, i32 0, i32 3, !dbg !8005\n%878 = load i64, i64* %arg11715, align 8, !dbg !8005\nstore i64 %878, i64* %n, align 8, !dbg !8006\n; truncated\n</code></pre>\n\n<p>The load/store instructions are using a 64-bit integer, which means that the pointer in C is interpreted as pointing to an 8 bytes integer (instead of 4). Thus, gathering 2 bytes outside the current regex node <code>struct</code> bounds for calculating the value of <code>arg1</code>. This value is in turn used as an array index which ultimately causes a segfault crash when it is out of array bounds.</p>\n\n<p>Back to tracing where <code>U32</code> is interpreted as a 64-bit unsigned integer. Looking into file <code>spec_config.h</code>, the conditional compilation leads (at least in my machine) to a preprocessor block that starts with</p>\n\n<pre><code>#elif !defined(SPEC_CPU_GOOFY_DATAMODEL)\n</code></pre>\n\n<p>which, according to a code comment in the surrounding area, is supposed to correspond to a ILP32 data model (see also <a href=\"http://en.cppreference.com/w/c/language/arithmetic_types\" rel=\"nofollow noreferrer\">this</a>). However, <code>U32TYPE</code> is defined as an <code>unsigned long</code>, which on my machine is 64 bits.</p>\n\n<p>So, the fix is to change the definition to</p>\n\n<pre><code>#define U32TYPE uint32_t\n</code></pre>\n\n<p>which, as stated in <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">this</a>, is guaranteed to be <em>exactly</em> 32 bits (if supported).</p>\n"}, {"comments": [{"owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1516889952, "post_id": 48444492, "comment_id": 83881609, "body": "I&#39;d swear that I couldn&#39;t find any relevant preprocessor def, but obviously, I must have missed something in the benchmark flag configuration file. I&#39;ll have another look your suggestion and report back when time permits."}, {"owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "reply_to_user": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1516892305, "post_id": 48444492, "comment_id": 83883388, "body": "Well, I was mostly prepping the script for CPU2017 when I hit that segfault, seemingly like the guy before me while adjusting it for 2006. I&#39;ve no idea how I should&#39;ve guessed the right flag out of the blue."}], "tags": [], "owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "is_accepted": false, "score": 2, "last_activity_date": 1516892217, "last_edit_date": 1516892217, "creation_date": 1516888180, "answer_id": 48444492, "question_id": 40219744, "link": "https://stackoverflow.com/questions/40219744/perlbench-results-in-segfault-outside-the-spec-2006-harness/48444492#48444492", "title": "perlbench results in segfault outside the SPEC 2006 harness", "body": "<p>I'd like to complement the other answers by saying that it was enough for us to add <code>-DSPEC_CPU_LP64</code> to work around the segfault (<code>-DSPEC_LP64</code> in CPU2017). Would be nice if the SPEC group would add this to their FAQ. This also seems to  apply to <code>gcc</code>, <code>cactusADM</code>, <code>povray</code> and <code>wrf</code>.</p>\n\n<p>We have a python script generating the config files for us, I'll talk to people and see if I can share what we have so far to get it running for our compiler.</p>\n\n<p>Edit: Seems to be accesible from the outside anyway, so here you go: <a href=\"https://git.scc.kit.edu/IPDSnelting/spec.py/blob/9029decf173e3106317bce127943aabc9d516b2d/spec.py\" rel=\"nofollow noreferrer\"><code>spec.py</code></a></p>\n"}], "owner": {"reputation": 2817, "user_id": 1864317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/593ff754b31a4e1174a6fd7c6f511a9e?s=128&d=identicon&r=PG", "display_name": "stanm", "link": "https://stackoverflow.com/users/1864317/stanm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 1, "accepted_answer_id": 40219745, "answer_count": 3, "score": 4, "last_activity_date": 1516892217, "creation_date": 1477315753, "last_edit_date": 1477904628, "question_id": 40219744, "link": "https://stackoverflow.com/questions/40219744/perlbench-results-in-segfault-outside-the-spec-2006-harness", "title": "perlbench results in segfault outside the SPEC 2006 harness", "body": "<p>This might be overly specific, but posting here as it might help someone else who's trying to compile/run the SPEC 2006 benchmarks outside the default SPEC benchmark harness. (Our reason of doing this is comparing compiling strategies and code coverage, while the SPEC harness is focused on performance of the resulting code only).</p>\n\n<p>When performing a ref run of perlbench the benchmark crashes with a segmentation fault:</p>\n\n<pre><code>    Program received signal SIGSEGV, Segmentation fault.\n0x00000000004f6868 in S_regmatch (prog=0x832144)\n\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/regexec.c:3024\n3024            PL_reg_start_tmp[n] = locinput;\n(gdb) bt\n#0  0x00000000004f6868 in S_regmatch (prog=0x832144)\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/regexec.c:3024\n#1  0x00000000004f22cf in S_regtry (prog=0x8320c0, startpos=0x831e70 \"o\")\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/regexec.c:2196\n#2  0x00000000004eba71 in Perl_regexec_flags (prog=0x8320c0, stringarg=0x831e70 \"o\", strend=0x831e71 \"\", \n    strbeg=0x831e70 \"o\", minend=0, sv=0x7e2528, data=0x0, flags=3)\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/regexec.c:1910\n#3  0x00000000004b33bb in Perl_pp_match ()\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/pp_hot.c:1340\n#4  0x00000000004fcde4 in Perl_runops_standard ()\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/run.c:37\n#5  0x000000000046bf57 in S_run_body (oldscope=1)\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/perl.c:2017\n#6  0x000000000046b9f6 in perl_run (my_perl=0x7bf010)\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/perl.c:1934\n#7  0x000000000047add2 in main (argc=4, argv=0x7fffffffe178, env=0x7fffffffe1a0)\n    at &lt;path-to-spec&gt;/CPU2006/400.perlbench/src/perlmain.c:98\n</code></pre>\n\n<p>The execution environment is 64-bit Linux and the behaviour is observed with both the latest gcc and clang.</p>\n\n<p>What causes this crash?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 1, "creation_date": 1477300840, "post_id": 40214672, "comment_id": 67693562, "body": "Works fine for me using Perl 5.22.1 on Linux. Dumps <code>$VAR1 = qr&#47;^1610209_&#47;;</code> and prints out <code>matched</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1477321606, "post_id": 40214672, "comment_id": 67706763, "body": "Can you please show the exact code you ran by copy-and-pasting the entire script verbatim, without changing it? I get a syntax error when I run what you&#39;ve shown (&quot;Undefined subroutine &amp;main::Dumper&quot;). When I fix that, it prints &quot;matched&quot;; maybe you didn&#39;t notice it because it appears right before the prompt, with no space (e.g. <code>matchedfoo$</code> if your prompt is <code>foo$</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1477300937, "creation_date": 1477300937, "answer_id": 40214861, "question_id": 40214672, "link": "https://stackoverflow.com/questions/40214672/perl-qr-to-quote-regex-behaving-differently/40214861#40214861", "title": "perl qr to quote regex behaving differently", "body": "<p>Works For Me!\u2122</p>\n\n<p>Are you on Windows? That final print my not be displayed because STDOUT (ie. printing to the screen) is often line-buffered. That means it doesn't display until it sees a newline. If that's the final line of your program it might never display before the window closes.</p>\n\n<p>Try <code>print \"matched\\n\";</code> instead.</p>\n\n<p>For more info, read <a href=\"http://perl.plover.com/FAQs/Buffering.html\" rel=\"nofollow\">Suffering From Buffering</a>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 0, "last_activity_date": 1477301350, "creation_date": 1477301350, "answer_id": 40214994, "question_id": 40214672, "link": "https://stackoverflow.com/questions/40214672/perl-qr-to-quote-regex-behaving-differently/40214994#40214994", "title": "perl qr to quote regex behaving differently", "body": "<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\nmy $orderId = \"1610209\";\nmy $pdfFilename = \"1610209_1.pdf\";\nmy $re = qr/^${orderId}_/;\n\nif($pdfFilename =~ $re) {\nprint \"matched Dumper($re)\\n\";\n} else {\nprint \"not matched Dumper ($re)\\n\";\n}\n</code></pre>\n\n<p>which returns</p>\n\n<pre><code>matched Dumper((?^:^1610209))\n</code></pre>\n\n<p>however, why use data dumper?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $orderId = \"1610209\";\nmy $pdfFilename = \"1610209_1.pdf\";\nif($pdfFilename =~ /^$orderId/) {\n    print \"Matched $orderId with $pdfFilename\\n\";\n} else {\n    print \"Not Matched $orderId with $pdfFilename\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1477329163, "creation_date": 1477329163, "answer_id": 40223882, "question_id": 40214672, "link": "https://stackoverflow.com/questions/40214672/perl-qr-to-quote-regex-behaving-differently/40223882#40223882", "title": "perl qr to quote regex behaving differently", "body": "<p>That code matches. If you've found otherwise, that's not the program you ran.</p>\n\n<hr>\n\n<p>Are you sure you don't actually have the following?</p>\n\n<pre><code>my $orderId = \"1610209\\n\";\n</code></pre>\n\n<p><code>chomp</code> lines you read from files to remove trailing newlines.</p>\n"}], "owner": {"reputation": 501, "user_id": 2515337, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/23df530af23257756e35736c00f2dc60?s=128&d=identicon&r=PG", "display_name": "GrSrv", "link": "https://stackoverflow.com/users/2515337/grsrv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1477329163, "creation_date": 1477300436, "last_edit_date": 1477301157, "question_id": 40214672, "link": "https://stackoverflow.com/questions/40214672/perl-qr-to-quote-regex-behaving-differently", "title": "perl qr to quote regex behaving differently", "body": "<p>Here's my code:</p>\n\n<pre><code>my $orderId = \"1610209\";\n$pdfFilename = \"1610209_1.pdf\";\nmy $re = qr/^${orderId}_/;\nprint Dumper($re);\n\nif($pdfFilename =~ $re) {\n    print \"matched\";\n}\n</code></pre>\n\n<p>It' not matching!!\nDumper prints: $VAR1 = qr/(?^:^1610209_)/;</p>\n\n<p>What could be wrong?\nMy environment:</p>\n\n<p>perl -v</p>\n\n<p>This is perl 5, version 18, subversion 2 (v5.18.2) built for x86_64-linux-gnu-thread-multi</p>\n\n<p>lsb_release -a</p>\n\n<p>Distributor ID: Ubuntu\nDescription:    Ubuntu 14.04.2 LTS\nRelease:    14.04\nCodename:   trusty</p>\n"}, {"tags": ["perl", "google-api", "google-drive-api", "google-oauth"], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1477299456, "post_id": 40214299, "comment_id": 67692708, "body": "I did check the clock. It is spot on.  When you say &quot;authenticate your code again&quot; what do you mean exactly?"}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 2, "creation_date": 1477299521, "post_id": 40214299, "comment_id": 67692742, "body": "Oauth2, pop up the window ask for access.   You are using a refresh token where did you get it? Your script needed permission to write to your Google drive account."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1477299612, "post_id": 40214299, "comment_id": 67692794, "body": "This is a perl script doing the work which retrieves the secret from a .yml file on my server. When I look at my Google console, I can see the credentials for the Google Drive API and everything matches up with what is in my .yml file."}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1477299717, "post_id": 40214299, "comment_id": 67692860, "body": "We are not talking about a secret here or the project on Google Developer console.  We are talking about how you authenticated your script to write to your person Google Drive account.   You must be using a refresh token or you wouldn&#39;t be seeing &quot;Token refresh failed&quot;  where is the refresh token and how did you get it?"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1477299774, "post_id": 40214299, "comment_id": 67692898, "body": "Also, I can see the .yml file is getting updated with latest access token as evidenced by the timestamp of the .yml file."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1477299837, "post_id": 40214299, "comment_id": 67692939, "body": "The Net::Google::Drive::Simple perl module is supposed to handle this all for me, from what I understand. The .yml file contains the refresh token."}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1477299888, "post_id": 40214299, "comment_id": 67692981, "body": "Indeed it does.  However if the Refresh token is no longer valid you will need to authenticate the code again and get a new Refresh token."}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1477299994, "post_id": 40214299, "comment_id": 67693049, "body": "<a href=\"http://search.cpan.org/~mschilli/Net-Google-Drive-Simple-0.12/lib/Net/Google/Drive/Simple.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~mschilli/Net-Google-Drive-Simple-0.12/lib/N&zwnj;&#8203;et/&hellip;</a>  check the section getting started.   &quot;It also contains a refresh token that this library uses to get a new access token transparently when the old one is about to expire.&quot;"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1477300917, "post_id": 40214299, "comment_id": 67693606, "body": "Ok, I see there is a script I&#39;m supposed to run. It starts up a server. Unfortunately, I&#39;m having trouble connecting to it but that&#39;s another problem. Thanks for your help."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 1, "creation_date": 1477302179, "post_id": 40214299, "comment_id": 67694358, "body": "OK, I was able to connect to the server and log into google and the .yml file was updated and everything works again. Thanks again!"}], "tags": [], "owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "is_accepted": true, "score": 2, "last_activity_date": 1477299269, "creation_date": 1477299269, "answer_id": 40214299, "question_id": 40214126, "link": "https://stackoverflow.com/questions/40214126/getting-400-bad-request-and-invalid-grant-message-with-netgoogledrive/40214299#40214299", "title": "Getting &quot;400 Bad Request&quot; and &quot;invalid_grant&quot; message with &quot;Net::Google::Drive::Simple&quot;", "body": "<p><strong>First thing to check:</strong></p>\n\n<p>Your server\u2019s clock is not in sync with <a href=\"https://en.wikipedia.org/wiki/Network_Time_Protocol\" rel=\"nofollow\">NTP</a>. (Solution: check the server time if its incorrect fix it. )</p>\n\n<p><strong>Second thing to check:</strong> </p>\n\n<p>Your refresh token is not valid you need a new one.   Authenticate your code again.</p>\n\n<p>Possible reasons for a refresh token to no longer work.</p>\n\n<ol>\n<li>User revoked it in their Google account. </li>\n<li>Refresh token hasn't been used to get a new access token in six months.</li>\n<li>Maximum number of refresh tokens for a user reached: If a user authenticates your application you get a refresh token associated with the user who authenticated it.  If the user runs it again and you get a second refresh token.  You can have up to 25 outstanding refresh tokens for each user at which point the first one given will expire and no longer work.  This is why its important to always save the most resent refresh token for a user.</li>\n</ol>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1664, "favorite_count": 0, "accepted_answer_id": 40214299, "answer_count": 1, "score": 2, "last_activity_date": 1477300224, "creation_date": 1477298659, "last_edit_date": 1477300224, "question_id": 40214126, "link": "https://stackoverflow.com/questions/40214126/getting-400-bad-request-and-invalid-grant-message-with-netgoogledrive", "title": "Getting &quot;400 Bad Request&quot; and &quot;invalid_grant&quot; message with &quot;Net::Google::Drive::Simple&quot;", "body": "<p>I'm using <code>[Net::Google::Drive::Simple][1]</code> to fetch a document from the web and place it on my Google Drive. The script was working fine until I recently started getting the following error: <code>Token refresh failed at /usr/local/share/perl/5.20.2/OAuth/Cmdline.pm line 76</code>.</p>\n\n<p>Printing out the headers from the response from Google shows the following:</p>\n\n<pre><code>HTTP/1.1 400 Bad Request\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\nConnection: close\nDate: Mon, 24 Oct 2016 08:32:13 GMT\nPragma: no-cache\nAccept-Ranges: none\nServer: GSE\nVary: Accept-Encoding\nContent-Type: application/json; charset=utf-8\nExpires: Mon, 01 Jan 1990 00:00:00 GMT\nAlt-Svc: quic=\":443\"; ma=2592000; v=\"36,35,34\"\nClient-Date: Mon, 24 Oct 2016 08:32:13 GMT\nClient-Peer: 2607:f8b0:4006:80e::200d:443\nClient-Response-Num: 1\nClient-SSL-Cert-Issuer: /C=US/O=Google Inc/CN=Google Internet Authority G2\nClient-SSL-Cert-Subject: /C=US/ST=California/L=Mountain View/O=Google Inc/CN=accounts.google.com\nClient-SSL-Cipher: ECDHE-RSA-AES128-SHA\nClient-SSL-Socket-Class: IO::Socket::SSL\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-XSS-Protection: 1; mode=block\n\n{\n  \"error\" : \"invalid_grant\"\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1477293418, "post_id": 40212392, "comment_id": 67689318, "body": "<a href=\"http://stackoverflow.com/q/3638949/133939\">Related question</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 6921229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d1e8d0a5288d7ebcf029fd228fa3949?s=128&d=identicon&r=PG&f=1", "display_name": "Magesh04", "link": "https://stackoverflow.com/users/6921229/magesh04"}, "is_accepted": false, "score": 0, "last_activity_date": 1477294978, "creation_date": 1477294978, "answer_id": 40213096, "question_id": 40212392, "link": "https://stackoverflow.com/questions/40212392/group-input-values-using-perl/40213096#40213096", "title": "Group input values using Perl", "body": "<p>I have used here regular expression to pull all worker id into an array. try similar way for all your inputs.</p>\n\n<pre><code>my @workerid=();\nwhile ($seq =~ /Worker_id:\\s*(\\w+)/g)\n{\npush @workerid, $1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1477296799, "post_id": 40213125, "comment_id": 67691170, "body": "This assumes that the keys come in a certain order. That&#39;s not a robust assumption."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1477297493, "post_id": 40213125, "comment_id": 67691539, "body": "For the multi-line ones? Yes, that&#39;s true. Edited with something a bit more robust."}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1477298036, "post_id": 40213125, "comment_id": 67691830, "body": "@Sobrique : Thanks for the alternative (+1) and introducing me to array of hashes , (still a beginner.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477314315, "post_id": 40213125, "comment_id": 67701614, "body": "Those regex matches shouldn&#39;t have global <code>&#47;g</code> modifiers."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1477317086, "last_edit_date": 1477317086, "creation_date": 1477295074, "answer_id": 40213125, "question_id": 40212392, "link": "https://stackoverflow.com/questions/40212392/group-input-values-using-perl/40213125#40213125", "title": "Group input values using Perl", "body": "<p>First off - I wouldn't use separate arrays. A single data structure - an array of hashes - looks more sensible for your use case.</p>\n\n<p>Secondly - <code>$/</code> is your friend. It's the record separator, and lets you iterate 'record by record' - and you have a clear one of <code>------</code></p>\n\n<p>And that looks something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nlocal $/ = \"\\n--\";\n\nmy @records;\n\nwhile (&lt;DATA&gt;) {\n   chomp;\n   my ($worker) = m/Worker_id: (.*)/;\n   next unless $worker;\n   my ($name)    = m/Name: (.*)/;\n   my ($checkin) = m/Checkin_Time: (.*)/;\n\n   #slightly more complicated patterns for multi-line fields\n   #searches for lines, terminated by a word: at start of line,\n   #end of record or ---- on a line. \n   my ($address) = m/Address: (.*?)(?:\\n\\w+:|\\n---|\\Z)/ms; #make capture non-greedy\n   my ($access)  = m/Access:\\s*\\n(.*)(?:\\n\\w+:|\\n--|\\Z)/ms;\n   $address =~ s/\\s*\\n\\s*/, /g;\n   push(\n      @records,\n      {  worker  =&gt; $worker,\n         name    =&gt; $name,\n         checkin =&gt; $checkin,\n         access  =&gt; $access,\n         address =&gt; $address\n      }\n   );\n\n}\n\nprint Dumper \\@records;\n\n__DATA__\n------------------------------------------------------------\nWorker_id: 8CA980\nName: User1\nCheckin_Time: Mon, 6 Jun 2016 09:09:28 \nAddress: Floor: 1\n         Street: lane 2 \n         City: Some city\n         State: Some state\nAccess: \n/org/company/building_1\n/org/company/building_2\n/org/company/building_3\n------------------------------------------------------------\nWorker_id: 128AD6\nName: User2\nCheckin_Time: Mon, 6 Jun 2016 10:09:28 \nAddress: Floor: 2\n         Street: lane 3 \n         City: Some city\n         State: Some state\nAccess: \n/org/company/building_1\n/org/company/building_2\n------------------------------------------------------------\nWorker_id: 699A0\nName: User1\nCheckin_Time: Mon, 6 Jun 2016 08:15:00 \nAddress: Floor: 1\n         Street: lane 3 \n         City: Some city\n         State: Some state\nAccess: \n/org/company/building_1\n------------------------------------------------------------\n</code></pre>\n\n<p>It might also make sense to array-ify your 'access' field:</p>\n\n<pre><code>     access  =&gt; [split /\\n/, $access],\n</code></pre>\n\n<p>But this gives you as output:</p>\n\n<pre><code>$VAR1 = [\n          {\n            'address' =&gt; 'Floor: 1, Street: lane 2, City: Some city, State: Some state, ',\n            'access' =&gt; [\n                          '/org/company/building_1',\n                          '/org/company/building_2',\n                          '/org/company/building_3'\n                        ],\n            'checkin' =&gt; 'Mon, 6 Jun 2016 09:09:28 ',\n            'worker' =&gt; '8CA980',\n            'name' =&gt; 'User1'\n          },\n          {\n            'worker' =&gt; '128AD6',\n            'address' =&gt; 'Floor: 2, Street: lane 3, City: Some city, State: Some state, ',\n            'access' =&gt; [\n                          '/org/company/building_1',\n                          '/org/company/building_2'\n                        ],\n            'checkin' =&gt; 'Mon, 6 Jun 2016 10:09:28 ',\n            'name' =&gt; 'User2'\n          },\n          {\n            'name' =&gt; 'User1',\n            'address' =&gt; 'Floor: 1, Street: lane 3, City: Some city, State: Some state, ',\n            'access' =&gt; [\n                          '/org/company/building_1'\n                        ],\n            'checkin' =&gt; 'Mon, 6 Jun 2016 08:15:00 ',\n            'worker' =&gt; '699A0'\n          }\n        ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1477297743, "post_id": 40213143, "comment_id": 67691683, "body": "What about Access?"}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1477298121, "post_id": 40213143, "comment_id": 67691866, "body": "@Essex Boy : Appreciate your input and an alternative suggestion."}], "tags": [], "owner": {"reputation": 6351, "user_id": 3498962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9tW.jpg?s=128&g=1", "display_name": "Essex Boy", "link": "https://stackoverflow.com/users/3498962/essex-boy"}, "is_accepted": false, "score": 1, "last_activity_date": 1477295139, "creation_date": 1477295139, "answer_id": 40213143, "question_id": 40212392, "link": "https://stackoverflow.com/questions/40212392/group-input-values-using-perl/40213143#40213143", "title": "Group input values using Perl", "body": "<p>Using your input with the script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nundef $/;\nmy $content = &lt;ARGV&gt;;\nmy @list1 = split(/-+\\s+/,$content);\nfor (@list1) {\n    if ($_) {\n        my @list2 = split(/\\n(?=\\S)/,$_);\n        print \"element 1=$list2[0]\\n\\n\";\n        print \"element 2=$list2[1]\\n\\n\";\n        print \"element 3=$list2[2]\\n\\n\";\n        print \"element 4=$list2[3]\\n\\n\";\n    }\n}\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>element 1=Worker_id: 8CA980\n\nelement 2=Name: User1\n\nelement 3=Checkin_Time: Mon, 6 Jun 2016 09:09:28\n\nelement 4=Address: Floor: 1\n         Street: lane 2\n         City: Some city\n         State: Some state\n\nelement 1=Worker_id: 128AD6\n\nelement 2=Name: User2\n\nelement 3=Checkin_Time: Mon, 6 Jun 2016 10:09:28\n\nelement 4=Address: Floor: 2\n         Street: lane 3\n         City: Some city\n         State: Some state\n\nelement 1=Worker_id: 699A0\n\nelement 2=Name: User1\n\nelement 3=Checkin_Time: Mon, 6 Jun 2016 08:15:00\n\nelement 4=Address: Floor: 1\n         Street: lane 3\n         City: Some city\n         State: Some state\n</code></pre>\n\n<p>The key is the positive lookahead \\n(?=\\S) where I split on a new line followed by somthing that is not a white space.</p>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1477297972, "post_id": 40213297, "comment_id": 67691805, "body": "This will break if the order of any of the items changes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1477299886, "post_id": 40213297, "comment_id": 67692980, "body": "@schwern, Yes it will, but as mentioned there are easier and better ways, but I just amended his current code to push the values and assuming the file will always remain the same."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 1, "last_activity_date": 1477296955, "last_edit_date": 1477296955, "creation_date": 1477295707, "answer_id": 40213297, "question_id": 40212392, "link": "https://stackoverflow.com/questions/40212392/group-input-values-using-perl/40213297#40213297", "title": "Group input values using Perl", "body": "<p>There are many simpler ways but seeing as this is for an assignment, I just add some things to your code.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.010;\n\nmy @temp;\nmy @temp1;\nmy $k;\n\nmy @workerIDs;\nmy @name;\nmy @CheckTimes;\nmy @Address;\n\nopen (my $FH, '&lt;', 'C:\\\\temp\\\\somefile.txt') or die \"Can't read file: $!\\n\";\n$/ = \"*****\"; # to change the default input separator from new line to some other\nwhile (&lt;$FH&gt;) {\n@temp=split(/-{6,}/, $_);\n}\nclose ($FH);\nshift(@temp); #used shift as there was a empty array field\n\nfor ( $k=0; $k&lt;@temp; $k++) {\n@temp1 = split(/\\n/, $temp[$k]);\n    $temp1[1] =~ s/Worker_id://g;    # not needed, just throwing out the identifiers\n    $temp1[2] =~ s/Name://g;\n    $temp1[3] =~ s/Checkin_Time://g;\n    $temp1[4] =~ s/Address://g;\n    $temp1[4] =~ s/\\s+//g;    # not needed, just throwing out whitespace.\n    $temp1[5] =~ s/\\s+//g;\n    $temp1[6] =~ s/\\s+//g;\n    $temp1[7] =~ s/\\s+//g;\n\npush @workerIDs, \"$temp1[1]\\n\";\npush @name, \"$temp1[2]\\n\";\npush @CheckTimes, \"$temp1[3]\\n\";\npush @Address, \"$temp1[4], $temp1[5], $temp1[6], $temp1[7]\\n\";\n\n}\n\nprint \"All WorkerIDs\\n\";\nprint @workerIDs;\nprint \"All Names\\n\";\nprint @name;\nprint \"All Check in Times\\n\";\nprint @CheckTimes;\nprint \"All addresses\\n\";\nprint @Address;\n</code></pre>\n\n<p>where the results will be:</p>\n\n<pre><code>All WorkerIDs\n8CA980\n128AD6\n699A0\nAll Names\nUser1\nUser2\nUser1\nAll Check in Times\nMon, 6 Jun 2016 09:09:28\nMon, 6 Jun 2016 10:09:28\nMon, 6 Jun 2016 08:15:00\nAll addresses\nFloor:1, Street:lane2, City:Somecity, State:Somestate\nFloor:2, Street:lane3, City:Somecity, State:Somestate\nFloor:1, Street:lane3, City:Somecity, State:Somestate\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 1, "creation_date": 1477300946, "post_id": 40213826, "comment_id": 67693617, "body": "@Thanks Schwern, looks like a bit advanced to me (Perl beginner) but certainly something to investigate."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1477298009, "last_edit_date": 1477298009, "creation_date": 1477297706, "answer_id": 40213826, "question_id": 40212392, "link": "https://stackoverflow.com/questions/40212392/group-input-values-using-perl/40213826#40213826", "title": "Group input values using Perl", "body": "<p>It's a shame, that format is <em>really</em> close to <a href=\"http://yaml.org/\" rel=\"nofollow\">YAML</a>. Then you could parse it with <a href=\"http://metacpan.org/pod/YAML::XS\" rel=\"nofollow\">YAML::XS</a>. This is what it would look like.</p>\n\n<pre><code>Worker_id: 8CA980\nName: User1\nCheckin_Time: Mon, 6 Jun 2016 09:09:28 \nAddress:\n    Floor: 1\n    Street: lane 2 \n    City: Some city\n    State: Some state\nAccess: \n    - /org/company/building_1\n    - /org/company/building_2\n    - /org/company/building_3\n</code></pre>\n\n<hr>\n\n<p>You can write a little parser for your format. Your format has six sorts of lines.</p>\n\n<ul>\n<li>The record separator.</li>\n<li>A pair.</li>\n<li>A subpair.\n\n<ul>\n<li>Indented</li>\n<li>Inline</li>\n</ul></li>\n<li>The start of a list.</li>\n<li>An element of a list.</li>\n</ul>\n\n<p>To handle lists and subpairs you need to track the current key so you know what key to add to. Since there's state to track, I wrote a little WorkerParser class to hold the current worker and key. You could do without the object, it just makes it tider to hold onto state variables.</p>\n\n<pre><code>package WorkerParser;\nuse Moo;\n\nhas fh =&gt;\n  is        =&gt; 'ro',\n  required  =&gt; 1;\n\nhas worker =&gt;\n  is        =&gt; 'ro',\n  default   =&gt; sub { {} };\n\nhas key =&gt;\n  is        =&gt; 'rw';\n</code></pre>\n\n<p>I used <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow\">Moo</a>, a lightweight object system. You don't have to, it's just convenient. The object takes a filehandle to read from, and it can store the current key it's adding to, and the worker it's building. The worker defaults to an empty hash.</p>\n\n<pre><code>sub read_worker {\n    my $self = shift;\n\n    my $fh = $self-&gt;fh;\n    while( my $line = &lt;$fh&gt; ) {\n        chomp $line;\n\n        # Spotted a boundry\n        if ( $line =~ /^-{6,}$/ ) {\n            # If we parsed a worker, we're done.\n            if ( $self-&gt;seen_worker ) {\n                last;\n            }\n            # Otherwise this is the first line, keep going.\n            else {\n                next;\n            }\n        }\n        else {\n            $self-&gt;parseline($line);\n        }\n    }\n\n    return $self-&gt;seen_worker ? $self-&gt;worker : ();\n}\n</code></pre>\n\n<p>This is the basic read loop. If you see a <code>------</code> you're done unless you didn't read any worker info yet, in which case keep going. Otherwise, parse the line. This neatly separates parsing the worker from finding the beginning and end.</p>\n\n<pre><code>sub splitpair {\n    my $self = shift;\n    my $pair = shift;\n\n    return split /\\s*:\\s*/, $pair, 2;\n}\n</code></pre>\n\n<p>A method to ensure we always split pairs the same way.</p>\n\n<pre><code>sub parseline {\n    my $self = shift;\n    my $line = shift;\n\n    my($key, $val) = $self-&gt;splitpair($line);\n\n    # An element of a list.\n    if( !defined $val ) {\n        push @{$self-&gt;worker-&gt;{ +$self-&gt;key }}, $line;\n    }\n    # The start of a list.\n    elsif( !length $val ) {\n        $self-&gt;key($key);\n        $self-&gt;worker-&gt;{ +$self-&gt;key } = [];\n    }\n    # Indented subpair.\n    elsif( $key =~ s/^\\s+// ) {\n        $self-&gt;worker-&gt;{ +$self-&gt;key }{$key} = $val;\n    }\n    # Inline subpair.\n    elsif( $val =~ /:/ ) {\n        $self-&gt;key($key);\n        my($subkey, $subval) = $self-&gt;splitpair($val);\n        $self-&gt;worker-&gt;{$key}{$subkey} = $subval;\n    }\n    # A pair.\n    else {\n        $self-&gt;key($key);\n        $self-&gt;worker-&gt;{$key} = $val;\n    }\n\n    return;\n}\n</code></pre>\n\n<p>This is the meat. It checks for all the different possible lines and processes them. When a new key is encountered, it's remembered in <code>$self-&gt;key</code> so if the next line is a subkey or a list element it knows what key to add to.</p>\n\n<p>The advantage of this approach over the others, is it fully parses the data while making no assumptions about what keys have what types of values, nor does it make any assumptions about the key order. This makes it robust and flexible.</p>\n\n<pre><code>my @workers;\nwhile( my $worker = WorkerParser-&gt;new(fh =&gt; \\*DATA)-&gt;read_worker ) {\n    push @workers, $worker;\n}\n</code></pre>\n\n<p>You use it by creating a WorkerParser and reading a worker. There's a new WorkerParser for each worker because it's safer to throw out a used object than the try and reset the state.</p>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 40213125, "answer_count": 5, "score": 1, "last_activity_date": 1477317086, "creation_date": 1477292354, "last_edit_date": 1477293251, "question_id": 40212392, "link": "https://stackoverflow.com/questions/40212392/group-input-values-using-perl", "title": "Group input values using Perl", "body": "<p>I have decided to learn Perl and try to implement it for my assignment. Below is the flat file that has worker details.</p>\n\n<pre><code>------------------------------------------------------------\nWorker_id: 8CA980\nName: User1\nCheckin_Time: Mon, 6 Jun 2016 09:09:28 \nAddress: Floor: 1\n         Street: lane 2 \n         City: Some city\n         State: Some state\nAccess: \n/org/company/building_1\n/org/company/building_2\n/org/company/building_3\n------------------------------------------------------------\nWorker_id: 128AD6\nName: User2\nCheckin_Time: Mon, 6 Jun 2016 10:09:28 \nAddress: Floor: 2\n         Street: lane 3 \n         City: Some city\n         State: Some state\nAccess: \n/org/company/building_1\n/org/company/building_2\n------------------------------------------------------------\nWorker_id: 699A0\nName: User1\nCheckin_Time: Mon, 6 Jun 2016 08:15:00 \nAddress: Floor: 1\n         Street: lane 3 \n         City: Some city\n         State: Some state\nAccess: \n/org/company/building_1\n------------------------------------------------------------\n</code></pre>\n\n<p>What I'm trying to accomplish is to parse and store the file values like,</p>\n\n<pre><code>@worker = &lt;all the worker ids&gt;\n@name = &lt;all the worker names&gt;\n@time = &lt;all the worker check-in time&gt;\n@address = &lt;worker address&gt;\n@access = &lt;worker's access&gt;\n</code></pre>\n\n<p>My code snippet:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nopen (my $FH, '&lt;', 'C:\\\\temp\\\\details.txt') or die \"Can't read file: $!\\n\";\n$/ = \"*****\"; # to change the default input separator from new line to some other\nwhile (&lt;$FH&gt;) {\n    @temp=split(/-{6,}/, $_);\n}\nclose ($FH);\nshift(@temp); #used shift as there was a empty array field\n\nfor ( $k=0; $k&lt;@temp; $k++) {\n    @temp1 = split(/\\n/, $temp[$k]);\n    @temp2 =  @temp1;   \n    print \"1st VALUE ===&gt; $temp2[0]\\n\";\n    print \"2nd VALUE ===&gt; $temp2[1]\\n\";\n    print \"3rd VALUE ===&gt; $temp2[3]\\n\";\n    ......\n    .....\n}\n</code></pre>\n\n<p><strong>Output is</strong> </p>\n\n<pre><code>1st VALUE ===&gt;\n2nd VALUE ===&gt; Worker_id: 8CA980\n3rd VALUE ===&gt; Checkin_Time: Mon, 6 Jun 2016 09:09:28\n4th VALUE ===&gt; Address: Floor: 1\n5th VALUE ===&gt;           Street: lane 2\n6th VALUE ===&gt;           City: Some city\n7th VALUE ===&gt;           State: Some state\n8th VALUE ===&gt; Access:\n\n1st VALUE ===&gt;\n2nd VALUE ===&gt; Worker_id: 128AD6\n3rd VALUE ===&gt; Checkin_Time: Mon, 6 Jun 2016 10:09:28\n4th VALUE ===&gt; Address: Floor: 2\n5th VALUE ===&gt;           Street: lane 3\n6th VALUE ===&gt;           City: Some city\n7th VALUE ===&gt;           State: Some state\n8th VALUE ===&gt; Access:\n\n.........\n</code></pre>\n\n<p>Since I'm splitting values based on the new line,  Address and Access details <strong>are not</strong> getting stored as a single array element or value.I'm not quite getting the effective logic to organize the details to my above mentioned array format.</p>\n\n<p>Yes , the dirty way would be splitting the values based on every unique id like - Worker_id then Name,Time so on but that would be absurd.</p>\n\n<p>Could you please help me here with any suggestions? Thanks.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477280327, "post_id": 40210277, "comment_id": 67684929, "body": "<code>@array[0]</code> is a one-element slice containing <code>$array[0]</code>. Do you mean <code>@{ $array[0] }</code>?"}, {"owner": {"reputation": 1407, "user_id": 1379631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43196d39cc9385202a4719cc64a4f71?s=128&d=identicon&r=PG&f=1", "display_name": "reflective_mind", "link": "https://stackoverflow.com/users/1379631/reflective-mind"}, "edited": false, "score": 0, "creation_date": 1477282134, "post_id": 40210277, "comment_id": 67685228, "body": "Unclear question. We can only guess what you try to do unless you provide more info, e.g. whats inside <code>@array</code>."}, {"owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "reply_to_user": {"reputation": 1407, "user_id": 1379631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43196d39cc9385202a4719cc64a4f71?s=128&d=identicon&r=PG&f=1", "display_name": "reflective_mind", "link": "https://stackoverflow.com/users/1379631/reflective-mind"}, "edited": false, "score": 0, "creation_date": 1477283364, "post_id": 40210277, "comment_id": 67685479, "body": "@inferno I apologize I asked the question in haste, I have added my code to help clarify."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1477288974, "post_id": 40210277, "comment_id": 67687243, "body": "Always use <code>use strict; use warnings qw( all );</code>! These shouldn&#39;t be commented."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1477289031, "post_id": 40210277, "comment_id": 67687259, "body": "<code>%hash = map { split } &lt;&gt;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1477289134, "post_id": 40210277, "comment_id": 67687307, "body": "@Matt Jacob, If there&#39;s only two fields per line."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477289455, "post_id": 40210277, "comment_id": 67687425, "body": "@ikegami True, but I&#39;m not about to download a GB of data from an FTP server in order to find out."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1477292964, "post_id": 40210277, "comment_id": 67689090, "body": "Why is this downvoted? The question shows research effort, is useful and clear."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477322940, "post_id": 40210277, "comment_id": 67707612, "body": "If there&#39;s truly GB of data, you&#39;ll probably need a 64-bit build of Perl to have enough addressable space. You&#39;ll also need quite a lot of RAM to avoid extreme performance degredation from swapping."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 0, "creation_date": 1477327176, "post_id": 40210277, "comment_id": 67710211, "body": "@Zaid Look at the edit history for the original question, which is probably where the downvotes were accumulated."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1477323018, "last_edit_date": 1477323018, "creation_date": 1477289037, "answer_id": 40211629, "question_id": 40210277, "link": "https://stackoverflow.com/questions/40210277/creating-hash-from-array-in-perl/40211629#40211629", "title": "creating hash from array in perl", "body": "<p><code>@array[0]</code> (an array slice, used to return multiple elements) is a bad way of writing <code>$array[0]</code> (an array lookup, used to return a single element). <code>use warnings;</code> would have told you this.</p>\n\n<hr>\n\n<p>To set a hash element, one uses</p>\n\n<pre><code>$hash{$key} = $val;\n</code></pre>\n\n<p>So the code becomes</p>\n\n<pre><code>my %hash;\nwhile (&lt;&gt;) {\n    chomp;\n    my @fields = split /\\t/;\n    $hash{ $fields[0] } = $fields[1];\n}\n</code></pre>\n\n<p>Better yet,</p>\n\n<pre><code>my %hash;\nwhile (&lt;&gt;) {\n    chomp;\n    my ($key, $val) = split /\\t/;\n    $hash{$key} = $val;\n}\n</code></pre>\n\n<hr>\n\n<p>The name of the file implies the fields are tab-separated, not whitespace separated, so I switched</p>\n\n<pre><code>split ' '\n</code></pre>\n\n<p>to</p>\n\n<pre><code>split /\\t/\n</code></pre>\n\n<p>This required the addition of <code>chomp</code>.</p>\n"}], "owner": {"reputation": 654, "user_id": 6934386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/278a5391531847eac423e6a9ea44ab92?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Weise", "link": "https://stackoverflow.com/users/6934386/kyle-weise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 40211629, "answer_count": 1, "score": -1, "last_activity_date": 1477334205, "creation_date": 1477279610, "last_edit_date": 1477334205, "question_id": 40210277, "link": "https://stackoverflow.com/questions/40210277/creating-hash-from-array-in-perl", "title": "creating hash from array in perl", "body": "<p>I have an array that I want to convert into a hash table. Basically, I want <code>@array[0]</code> to be the keys of the hash, and <code>@array[1]</code> to be the values of the hash. Is there an easy way to do this in perl? The code I have so far is as follows:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse diagnostics;\n\nunless( open(INFILE, \"&lt;\", 'scratch/Drosophila/fb_synonym_fb_2014_05.tsv')) {\ndie \"Cannot open file for reading: \", $!;\n\nwhile(&lt;INFILE&gt;) {\nmy @values = split();\n#convert values[0] to keys, values[1] to values\n}\n</code></pre>\n\n<p>the file is available for download  <a href=\"ftp://ftp.flybase.net/releases/FB2014_05/dmel_r6.02/fasta/\" rel=\"nofollow\">here</a></p>\n"}, {"tags": ["perl", "moose", "hashref"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1477277360, "post_id": 40210008, "comment_id": 67684342, "body": "Try <code>keys %{ $go-&gt;{is_as} }</code> if it is a hash reference, or just <code>@{ $go-&gt;{is_as} }</code> if it is an array reference."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477277442, "post_id": 40210008, "comment_id": 67684361, "body": "<code>local $&#47; = &#47;\\[Term\\]|\\[Typedef\\]&#47;;</code> doesn&#39;t set <code>$&#47;</code> to a regex. It matches the regex against <code>$_</code> and assigns the boolean result to <code>$&#47;</code> (effectively <code>&quot;1&quot;</code> or <code>&quot;&quot;</code>)."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1477277465, "post_id": 40210008, "comment_id": 67684367, "body": "<a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477277506, "post_id": 40210008, "comment_id": 67684379, "body": "You&#39;re not supposed to access object internals directly (<code>-&gt;{...}</code>), especially not with Moose."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477277662, "post_id": 40210008, "comment_id": 67684406, "body": "If you just want a count, <code>my $isaCount = @{ $go-&gt;get_is_as };</code> (assuming the rest of your code is correct (I&#39;d have to see GO2.pm to be sure))."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477277864, "post_id": 40210008, "comment_id": 67684454, "body": "<code>for my $is_a (@{ $go-&gt;get_is_as }) { ok( $is_a ); }</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477278193, "post_id": 40210008, "comment_id": 67684531, "body": "<a href=\"http://perldoc.perl.org/perlobj.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlobj.html</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477278334, "post_id": 40210008, "comment_id": 67684569, "body": "All those <code>get_foo</code> accessors are odd. I assume this is done by MooseX::FollowPBP? The usual style is <code>foo</code> accessors with no <code>get_</code> or <code>set_</code> prefix. (Also, large chunks of PBP are at least questionable or outright bad advice.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477278433, "post_id": 40210008, "comment_id": 67684591, "body": "Your <code>$&#47;</code> code happens to work because you set <code>$_</code> to an empty string, which doesn&#39;t match <code>&#47;\\[Term\\]|\\[Typedef\\]&#47;</code>, so it returns a boolean false value, which (when stringified) turns into the empty string, <code>&quot;&quot;</code>. Setting <code>$&#47;</code> to an empty string means to read whole paragraphs (and <code>chomp</code> will remove all trailing newlines in this mode)."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1477278518, "post_id": 40210008, "comment_id": 67684612, "body": "<code>foreach my $is_a ( @{ $go-&gt;get_is_as() } ) {  ok(defined $is_a); $altIdCount++; }</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1477313605, "post_id": 40210008, "comment_id": 67701136, "body": "Note that setting <code>$&#47;</code> to a regex pattern won&#39;t do what you want. It will split the input on the literal string you have provided, and since your pattern doesn&#39;t exist in your data you will simply read all of the data at once."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1477289862, "last_edit_date": 1477289862, "creation_date": 1477289543, "answer_id": 40211727, "question_id": 40210008, "link": "https://stackoverflow.com/questions/40210008/unblessed-hashref-error/40211727#40211727", "title": "Unblessed Hashref error", "body": "<p><code>keys($ref)</code> was an experimental feature that has been abandoned. You shouldn't be using it. You must pass an hash (<code>keys(%...)</code>) or an array (<code>keys(@...)</code>) to <code>keys</code>.</p>\n\n<hr>\n\n<p>To get the keys of a referenced array:</p>\n\n<pre><code>keys(@{ $ref })\n</code></pre>\n\n<p>Or simply:</p>\n\n<pre><code>0 .. $#{ $ref }\n</code></pre>\n\n<hr>\n\n<p>Of course, there's the issue of you accessing the internals of the object. Your code should probably be:</p>\n\n<pre><code>my $is_as_s = $go-&gt;get_is_as();\nmy $isaCount = @$is_as_s;\n\nfor my $is_as ( @$is_as_s ) {\n   ok($is_as);\n}\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 5970435, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-QIJDTLwYZp0/AAAAAAAAAAI/AAAAAAAAAVo/i7mdJ5_UBaE/photo.jpg?sz=128", "display_name": "Jamie Leigh", "link": "https://stackoverflow.com/users/5970435/jamie-leigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 40211727, "answer_count": 1, "score": 2, "last_activity_date": 1477289862, "creation_date": 1477277071, "question_id": 40210008, "link": "https://stackoverflow.com/questions/40210008/unblessed-hashref-error", "title": "Unblessed Hashref error", "body": "<p>I have been learning Moose and am struggling with my tests, I keep getting the error message</p>\n\n<pre><code>Type of argument to keys on reference must be unblessed hashref or arrayref at ./GO2.t line 40, &lt;DATA&gt; chunk 1.\n</code></pre>\n\n<p>I've included my .t script, I'm not sure how to fix this error and haven't found any answers to what exactly an unblessed hashref is. I didn't include everything from DATA, just a few iterations. \nI'm thinking that I am calling the hash incorrectly </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse GO2;\nuse MooseX::FollowPBP;\n\nuse Test::More tests =&gt; 44;\n\n#Initialize $_ to prevent warnings in redefinition of $/ as RegEx\n$_ = '';\nlocal $/ = /\\[Term\\]|\\[Typedef\\]/;\n\nwhile (&lt;DATA&gt;) {\n\n    # Remove end-of-line characters\n    chomp;\n\n    # parse the record using a regular expression\n    my $longGoDesc = $_;\n\n    #Create a new GO object\n    my $go = GO2-&gt;new( 'longGoDesc' =&gt; $longGoDesc);\n\n    # ok is a test function that prints ok if the test is true, and\n    ok( defined $go-&gt;get_id() );\n    ok( defined $go-&gt;get_def() );\n    ok( defined $go-&gt;get_name() );\n    ok( defined $go-&gt;get_namespace() );\n\n    # Initialize is_a counter\n    my $isaCount = 0;\n\n    #Loop through the is_a array reference\n    foreach my $isaRef ( keys $go-&gt;{is_as} ) {\n #Make sure the is_a is defined\n            ok( $go-&gt;get_is_as()-&gt;[$isaRef] );\n\n            #Increment is_a counter\n            $isaCount++;\n    }\n\n    #Make sure at least one is_a\n    ok( $isaCount &gt; 0 );\n\n    # Initialize alt_id counter\n    my $altIdCount = 0;\n\n    # Check for alt_id\n#       if ( defined $go-&gt;{alt_ids} ) {\n\n            #Loop through is_a\n            foreach my $altIdRef ( keys $go-&gt;{alt_ids} ) {\n                    ok( $go-&gt;get_alt_ids()-&gt;[$altIdRef] );\n\n                    # Increment alt_id counter\n                    $altIdCount++;\n\n\n    }\n\n    #Make sure at least one alt_id\n    ok( $altIdCount &gt; 0 );\n}\n\n# Indicate that tests are done\ndone_testing();\n\n# Everything below __END__ is treated as input for the DATA filehandle.\n __END__\n[Term]\nid: GO:2001315\nname: UDP-4-deoxy-4-formamido-beta-L-arabinopyranose biosynthetic process\nnamespace: biological_process\nalt_id: GO:0019901\ndef: \"The chemical reactions and pathways resulting in the formation of a UDP-4-deoxy-4-formamido-beta-L-arabinopyranose.\" [CHEBI:47027, GOC:yaf, UniPathway:UPA00032]\nsynonym: \"UDP-4-deoxy-4-formamido-beta-L-arabinopyranose anabolism\" EXACT [GOC:obol]\nsynonym: \"UDP-4-deoxy-4-formamido-beta-L-arabinopyranose biosynthesis\" EXACT [GOC:obol]\nsynonym: \"UDP-4-deoxy-4-formamido-beta-L-arabinopyranose formation\" EXACT [GOC:obol]\nsynonym: \"UDP-4-deoxy-4-formamido-beta-L-arabinopyranose synthesis\" EXACT [GOC:obol]\nis_a: GO:0009226 ! nucleotide-sugar biosynthetic process\nis_a: GO:0046349 ! amino sugar biosynthetic process\nis_a: GO:2001313 ! UDP-4-deoxy-4-formamido-beta-L-arabinopyranose metabolic process\n\n[Term]\nid: GO:2001316\nname: kojic acid metabolic process\nnamespace: biological_process\nalt_id: GO:0019902\ndef: \"The chemical reactions and pathways involving kojic acid.\" [CHEBI:43572, GOC:di]\nsynonym: \"5-hydroxy-2-(hydroxymethyl)-4H-pyran-4-one metabolic process\" EXACT [CHEBI:43572, GOC:obol]\nsynonym: \"5-hydroxy-2-(hydroxymethyl)-4H-pyran-4-one metabolism\" EXACT [CHEBI:43572, GOC:obol]\nsynonym: \"C6H6O4 metabolic process\" RELATED [CHEBI:43572, GOC:obol]\nsynonym: \"C6H6O4 metabolism\" RELATED [CHEBI:43572, GOC:obol]\nsynonym: \"kojic acid metabolism\" EXACT [GOC:obol]\nis_a: GO:0034308 ! primary alcohol metabolic process\nis_a: GO:0042180 ! cellular ketone metabolic process\nis_a: GO:0046483 ! heterocycle metabolic process\nis_a: GO:1901360 ! organic cyclic compound metabolic process\n\n[Term]\nid: GO:2001317\nname: kojic acid biosynthetic process\nnamespace: biological_process\nalt_id: GO:0019903\ndef: \"The chemical reactions and pathways resulting in the formation of kojic acid.\" [CHEBI:43572, GOC:di]\nsynonym: \"5-hydroxy-2-(hydroxymethyl)-4H-pyran-4-one anabolism\" EXACT [CHEBI:43572, GOC:obol]\nsynonym: \"5-hydroxy-2-(hydroxymethyl)-4H-pyran-4-one biosynthesis\" EXACT [CHEBI:43572, GOC:obol]\nsynonym: \"5-hydroxy-2-(hydroxymethyl)-4H-pyran-4-one biosynthetic process\" EXACT [CHEBI:43572, GOC:obol]\nsynonym: \"5-hydroxy-2-(hydroxymethyl)-4H-pyran-4-one formation\" EXACT [CHEBI:43572, GOC:obol]\nsynonym: \"5-hydroxy-2-(hydroxymethyl)-4H-pyran-4-one synthesis\" EXACT [CHEBI:43572, GOC:obol]\nsynonym: \"C6H6O4 anabolism\" RELATED [CHEBI:43572, GOC:obol]\nsynonym: \"C6H6O4 biosynthesis\" RELATED [CHEBI:43572, GOC:obol]\nsynonym: \"C6H6O4 biosynthetic process\" RELATED [CHEBI:43572, GOC:obol]\nsynonym: \"C6H6O4 formation\" RELATED [CHEBI:43572, GOC:obol]\nsynonym: \"C6H6O4 synthesis\" RELATED [CHEBI:43572, GOC:obol]\nsynonym: \"kojic acid anabolism\" EXACT [GOC:obol]\nsynonym: \"kojic acid biosynthesis\" EXACT [GOC:obol]\nsynonym: \"kojic acid formation\" EXACT [GOC:obol]\nsynonym: \"kojic acid synthesis\" EXACT [GOC:obol]\nis_a: GO:0018130 ! heterocycle biosynthetic process\nis_a: GO:0034309 ! primary alcohol biosynthetic process\nis_a: GO:0042181 ! ketone biosynthetic process\nis_a: GO:1901362 ! organic cyclic compound biosynthetic process\nis_a: GO:2001316 ! kojic acid metabolic process\nsynonym: \"Roundabout signalling pathway involved in muscle cell chemotaxis toward tendon cell\" EXACT [GOC:obol]\nsynonym: \"Roundabout signalling pathway involved in muscle cell chemotaxis towards tendon cell\" EXACT [GOC:obol]\nis_a: GO:0035385 ! Roundabout signaling pathway\nrelationship: part_of GO:0036061 ! muscle cell chemotaxis toward tendon cell\n\n[Term]\nid: GO:2001284\nname: regulation of BMP secretion\nnamespace: biological_process\nalt_id: GO:0019904\ndef: \"Any process that modulates the frequency, rate or extent of BMP secretion.\" [GOC:sart]\nsynonym: \"regulation of BMP protein secretion\" EXACT [GOC:obol]\nsynonym: \"regulation of bone morphogenetic protein secretion\" EXACT [GOC:obol]\nis_a: GO:0010646 ! regulation of cell communication\nis_a: GO:0023051 ! regulation of signaling\n</code></pre>\n"}, {"tags": ["perl", "tr"], "answers": [{"comments": [{"owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 0, "creation_date": 1477237719, "post_id": 40204518, "comment_id": 67674028, "body": "It works for me too, thank you. Any idea why <code>tr</code> seems to need these pragmas, while <code>s</code> does not?"}, {"owner": {"reputation": 95982, "user_id": 17279, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a08771c878da3724492f3056d5eca168?s=128&d=identicon&r=PG", "display_name": "zoul", "link": "https://stackoverflow.com/users/17279/zoul"}, "reply_to_user": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "edited": false, "score": 4, "creation_date": 1477237917, "post_id": 40204518, "comment_id": 67674068, "body": "I was just going to say something about character string vs. byte string semantics, but see @Wumpus\u2019s answer, I think it explains the issue much better."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477326614, "post_id": 40204518, "comment_id": 67709914, "body": "@zoul, I&#39;m glad you didn&#39;t; This has nothing to do with the two internal storage formats."}, {"owner": {"reputation": 95982, "user_id": 17279, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a08771c878da3724492f3056d5eca168?s=128&d=identicon&r=PG", "display_name": "zoul", "link": "https://stackoverflow.com/users/17279/zoul"}, "edited": false, "score": 0, "creation_date": 1477330533, "post_id": 40204518, "comment_id": 67711951, "body": "I don\u2019t know about the internal storage, but the way I see it, the bug was caused by the programmer treating the string as a collection of UTF-8 characters and Perl (without the Unicode pragmas) seeing them as ASCII strings \u2013 or collection of bytes. That\u2019s what I meant by character vs. byte string semantics."}], "tags": [], "owner": {"reputation": 95982, "user_id": 17279, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a08771c878da3724492f3056d5eca168?s=128&d=identicon&r=PG", "display_name": "zoul", "link": "https://stackoverflow.com/users/17279/zoul"}, "is_accepted": false, "score": 4, "last_activity_date": 1477235817, "creation_date": 1477235817, "answer_id": 40204518, "question_id": 40204462, "link": "https://stackoverflow.com/questions/40204462/perl-tr-is-not-doing-what-i-expect-whereas-s-is/40204518#40204518", "title": "Perl: tr/// is not doing what I expect whereas s/// is", "body": "<p>This works as expected for me:</p>\n\n<pre><code>use v5.10;\nuse utf8;\nuse open qw/:std :utf8/;\n\nmy $str1 = '\u00e8\u00ee\u00fc';\nmy $str2 = $str1;\n$str1 =~ tr/\u00ee/i/;\nsay $str1; # \u00e8i\u00fc\n$str2 =~ s/\u00ee/i/;\nsay $str2; # \u00e8i\u00fc\n</code></pre>\n\n<p>The <code>use utf8</code> pragma enables UTF-8 for literals in the source code, the <code>use open</code> pragma switches STDOUT to UTF-8.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 18, "last_activity_date": 1477327062, "last_edit_date": 1477327062, "creation_date": 1477237757, "answer_id": 40204756, "question_id": 40204462, "link": "https://stackoverflow.com/questions/40204462/perl-tr-is-not-doing-what-i-expect-whereas-s-is/40204756#40204756", "title": "Perl: tr/// is not doing what I expect whereas s/// is", "body": "<p>When you don't have <code>use utf8;</code>, but you are viewing the code with a utf8 text editor, you're not seeing it the way perl sees it. You think you have a single character in the left half of your <code>s///</code> and <code>tr///</code> but because it's multiple bytes, perl sees it as multiple characters.</p>\n\n<p>What you think perl sees:</p>\n\n<pre><code>my $str1 = \"\\xE8\\xEE\\xFC\";\nmy $str2 = $str1;\n$str1 =~ tr/\\xEE/i/;\nprint \"$str1\\n\";\n$str2 =~ s/\\xEE/i/;\nprint \"$str2\\n\";\n</code></pre>\n\n<p>What perl actually sees:</p>\n\n<pre><code>my $str1 = \"\\xC3\\xA8\\xC3\\xAE\\xC3\\xBC\";\nmy $str2 = $str1;\n$str1 =~ tr/\\xC3\\xAE/i/;\nprint \"$str1\\n\";\n$str2 =~ s/\\xC3\\xAE/i/;\nprint \"$str2\\n\";\n</code></pre>\n\n<p>With <code>s///</code>, since none of the characters are regexp operators, you're just doing a substring search. You're searching for a multi-character substring. And you find it, because the same thing that happened in your <code>s///</code> is also happening in your string literals: the characters you think are in there really aren't, but the multi-character sequence <em>is</em>.</p>\n\n<p>In <code>tr///</code> on the other hand, multiple characters aren't treated as a sequence, they're treated as a set. Each character (byte) is handled separately when it is found. And that doesn't get you the results you want, because changing the individual bytes of a utf8 string is never what you want.</p>\n\n<p>The fact that you can run simple ASCII-oriented substring search that knows nothing about utf8, and get the correct result on a utf8 string, is considered a good backward-compatibility feature of utf8, as opposed to other encodings like ucs2/utf16 or ucs4.</p>\n\n<hr>\n\n<p>The solution is to tell perl the source is encoded using UTF-8 by adding <code>use utf8;</code>. You'll also need to encode your outputs to match what your terminal expects.</p>\n\n<pre><code>use utf8;                             # The source is encoded using UTF-8.\nuse open ':std', ':encoding(UTF-8)';  # The terminal provides/expects UTF-8.\nmy $str1 = '\u00e8\u00ee\u00fc';\nmy $str2 = $str1;\n$str1 =~ tr/\u00ee/i/;\nprint \"$str1\\n\";\n$str2 =~ s/\u00ee/i/;\nprint \"$str2\\n\";\n</code></pre>\n"}], "owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 2, "accepted_answer_id": 40204756, "answer_count": 2, "score": 11, "last_activity_date": 1477327062, "creation_date": 1477235497, "last_edit_date": 1477238333, "question_id": 40204462, "link": "https://stackoverflow.com/questions/40204462/perl-tr-is-not-doing-what-i-expect-whereas-s-is", "title": "Perl: tr/// is not doing what I expect whereas s/// is", "body": "<p>I want to remove diacritic signs in some strings. <code>tr///</code> should do the job but fails (see below). I thought I had an encoding/decoding problem, but I noticed <code>s///</code> works as I expect. Could somebody explain why?</p>\n\n<p>Here is an example of results I get:</p>\n\n<pre><code>my $str1 = '\u00e8\u00ee\u00fc';\nmy $str2 = $str1;\n$str1 =~ tr/\u00ee/i/;\nprint \"$str1\\n\"; # =&gt; i\ufffdiii\ufffd\n$str2 =~ s/\u00ee/i/;\nprint \"$str2\\n\"; # =&gt; \u00e8i\u00fc\n</code></pre>\n\n<p>Note that <code>tr///</code> also modified the first and third characters of the string, not just the middle one.</p>\n\n<p><strong>Edit:</strong> I use Ubuntu 16.04 with Mate desktop environment.</p>\n"}, {"tags": ["regex", "perl", "teradata"], "answers": [{"comments": [{"owner": {"reputation": 782, "user_id": 4634344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e50eb89ee938625107a73e1ede71f639?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4634344/diego"}, "edited": false, "score": 0, "creation_date": 1477229813, "post_id": 40203064, "comment_id": 67671602, "body": "&#39;dfasdf my.domaine.home.com fadsfas&#39;  is also a vaild string for me, there is not necessary an https:// in the beginning. I need to match &quot;anything that looks like a domain name&quot;."}], "tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": -1, "last_activity_date": 1477226764, "creation_date": 1477226764, "answer_id": 40203064, "question_id": 40202784, "link": "https://stackoverflow.com/questions/40202784/regex-capturing-to-start-at-b-or-end-of-www/40203064#40203064", "title": "regex capturing to start at \\b or end of (www\\.)", "body": "<pre><code>\\b(?:https:\\/\\/(?:www\\.)?)([^\\/\\s]+)\n</code></pre>\n\n<p>This regex looks for <code>https://</code> with or without <code>www.</code>, then returns the rest of the result until it reaches a <code>/</code> or space.</p>\n\n<p>See the example on <a href=\"https://www.regex101.com/r/NjR11m/3\" rel=\"nofollow\">regex101</a></p>\n"}, {"comments": [{"owner": {"reputation": 656, "user_id": 1400623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f9a87e67ea7db19e63802f9c4c1964?s=128&d=identicon&r=PG&f=1", "display_name": "Phu Ngo", "link": "https://stackoverflow.com/users/1400623/phu-ngo"}, "edited": false, "score": 0, "creation_date": 1477227241, "post_id": 40203136, "comment_id": 67670836, "body": "<code>-</code> is included in <code>[a-z0-9-]</code>"}, {"owner": {"reputation": 4837, "user_id": 6791802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64abd0ee599a9f701add1abe4e2d6124?s=128&d=identicon&r=PG&f=1", "display_name": "cco", "link": "https://stackoverflow.com/users/6791802/cco"}, "reply_to_user": {"reputation": 656, "user_id": 1400623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f9a87e67ea7db19e63802f9c4c1964?s=128&d=identicon&r=PG&f=1", "display_name": "Phu Ngo", "link": "https://stackoverflow.com/users/1400623/phu-ngo"}, "edited": false, "score": 0, "creation_date": 1477227811, "post_id": 40203136, "comment_id": 67670983, "body": "I see what you mean.  I was confused because the given regex did not match the example string in the question, but did (partially) match when I took out <code>xn--</code>; I&#39;ve edited my answer."}], "tags": [], "owner": {"reputation": 4837, "user_id": 6791802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64abd0ee599a9f701add1abe4e2d6124?s=128&d=identicon&r=PG&f=1", "display_name": "cco", "link": "https://stackoverflow.com/users/6791802/cco"}, "is_accepted": true, "score": 1, "last_activity_date": 1477227595, "last_edit_date": 1477227595, "creation_date": 1477227177, "answer_id": 40203136, "question_id": 40202784, "link": "https://stackoverflow.com/questions/40202784/regex-capturing-to-start-at-b-or-end-of-www/40203136#40203136", "title": "regex capturing to start at \\b or end of (www\\.)", "body": "<p>The problem with <code>www.</code> being included in the match seems to be because you're using the 0th group (which is the full match, not just the capturing groups).  While I don't know how to change that, it is possible to reformulate the regex so that group 0 and group 1 have the same value, like so:</p>\n\n<pre><code>\\b(?!www\\.)([-a-z0-9]{1,63}(?:\\.[-a-z0-9]{1,63})+)\n</code></pre>\n\n<p>This just says the match can't start at <code>www.</code>, rather than allowing the match to start there and then having to ignore it.</p>\n\n<p>I've made a <a href=\"http://%20https://www.regex101.com/r/NjR11m/2\" rel=\"nofollow\">modified version</a> of your regex that shows how it works.  Note that if you want to match names with mixed-case alphanumerics you'll need to add <code>A-Z</code> to the <code>a-z0-9</code>, or turn on case-insensitivity; matching non-ascii domain names is more work, and left for the interested reader to work out.</p>\n"}], "owner": {"reputation": 782, "user_id": 4634344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e50eb89ee938625107a73e1ede71f639?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4634344/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 40203136, "answer_count": 2, "score": -1, "last_activity_date": 1477304493, "creation_date": 1477224905, "last_edit_date": 1477304493, "question_id": 40202784, "link": "https://stackoverflow.com/questions/40202784/regex-capturing-to-start-at-b-or-end-of-www", "title": "regex capturing to start at \\b or end of (www\\.)", "body": "<p>I am trying to capture first occurence of anything that looks like a domain name from a string. For examaple <code>my.domain.home.com</code> from <code>'dfasdf https://www.my.domain.home.com fadsfas'</code>. I am using <code>\\b</code> assertion or non-capturing group <code>(?:www\\.)</code> to mark the start of my capturing group. But instead I get <code>www.my.domain.home.com</code> i.e. the <code>www.</code> is not stripped out.</p>\n\n<p>This is my full regex:</p>\n\n<pre><code>\\b(?:www\\.)((?=[a-z0-9-]{1,63}\\.)(xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,63}\\b\n</code></pre>\n\n<p>this is the part that I am unsure of:</p>\n\n<pre><code>\\b(?:www\\.)\n</code></pre>\n\n<p>how can I make my capturing start at the beginning of the word OR end of 'www.'? </p>\n\n<p>[CLARIFICATION]\nIf there is no 'www.' it should capture at the beginning of the word. If there is 'www.' it should start capturing after the dot in 'www.' at the beginning of the possible domain string.</p>\n\n<p>I have checked it with <a href=\"https://www.regex101.com/r/NjR11m/1/tests\" rel=\"nofollow\">https://www.regex101.com/r/NjR11m/1/tests</a> as well but my final destination is Teradata 15.10 regex which is said to be compliant with the Perl dialect. So if you could help me with in the Perl context I guess I will be fine.</p>\n\n<pre><code> SELECT 'dfasdf https://www.my.domain.home.com fadsfas' AS string, \n REGEXP_SUBSTR(string, \n '\\b(?:www\\.)((?=[a-z0-9-]{1,63}\\.)(xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,63}\\b'\n) AS url_to_match;\n</code></pre>\n\n<p>For <code>'dfasdf https://my.domain.home.com fadsfas'</code> it should return <code>my.domain.home.com</code> as well.</p>\n\n<p>Additional examples of the strings that should also return <code>my.domain.home.com</code></p>\n\n<p><code>'dfasdf my.domain.home.com fadsfas'</code> </p>\n\n<p><code>'dfasdf ,my.domain.home.com-- fadsfas'</code> </p>\n\n<p><code>'dfasdf www.my.domain.home.com#fadsfas'</code> </p>\n\n<p>[SOLUTION]</p>\n\n<pre><code> REGEXP_SUBSTR(LOWER(string), \n '\\b(?!www\\.)((?=[a-z0-9-]{1,63}\\.)(xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,63}\\b'\n ) \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1477222602, "post_id": 40202252, "comment_id": 67669675, "body": "You can use <code>2&gt;&amp;1</code> to redirect stderr to stdout. For example: <code>$log = `service someservice restart 2&gt;&amp;1` </code>"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 3, "creation_date": 1477240108, "post_id": 40202252, "comment_id": 67674698, "body": "I suggest going a different direction.  Instead of using backticks, I&#39;d use <b>IPC::Open3</b> so that you can capture stdout and stderr in separate vars.  The stdout is logged as info and the stderr is logged as a warn or error."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1477241052, "post_id": 40202252, "comment_id": 67675013, "body": "Another suggestion would be to wrap the execution and logging in a sub.  Create a hash of the items that are to be executed and pass a specific hash element (key/value) to the sub for it to execute and log results."}, {"owner": {"reputation": 87, "user_id": 1593874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aff1dd3119968bf75edb77eae62f22e6?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1593874/pavel"}, "edited": false, "score": 0, "creation_date": 1477246341, "post_id": 40202252, "comment_id": 67676831, "body": "Thanks! I&#39;m a noob in Perl. Is it possible to show small example?"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1477258300, "post_id": 40202252, "comment_id": 67680512, "body": "Try <code>perldoc IPC::Open3</code> for detailed explanations and examples."}, {"owner": {"reputation": 87, "user_id": 1593874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aff1dd3119968bf75edb77eae62f22e6?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1593874/pavel"}, "edited": false, "score": 0, "creation_date": 1477258691, "post_id": 40202252, "comment_id": 67680620, "body": "I&#39;m interesting in sub and hash of the items."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1477282150, "creation_date": 1477282150, "answer_id": 40210558, "question_id": 40202252, "link": "https://stackoverflow.com/questions/40202252/logging-stdout-and-stderr-for-several-commands-in-backticks/40210558#40210558", "title": "Logging stdout and stderr for several commands in backticks", "body": "<p>Following Ron Bergin's suggestion, here is an example using <a href=\"http://perldoc.perl.org/IPC/Open3.html\" rel=\"nofollow\">IPC::Open3</a></p>\n\n<p><strong>/tmp/log4perl.conf</strong></p>\n\n<pre><code>log4perl.logger.test_app               = INFO, FileAppndr1\nlog4perl.appender.FileAppndr1          = Log::Log4perl::Appender::File\nlog4perl.appender.FileAppndr1.filename = /tmp/test_app.log\nlog4perl.appender.FileAppndr1.layout   = Log::Log4perl::Layout::SimpleLayout\n</code></pre>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse IPC::Open3;\nuse Log::Log4perl;\nuse Symbol 'gensym'; # Create anonymous glob (filehandle)\n\nLog::Log4perl::init(\"/tmp/log4perl.conf\");\nmy $logger = Log::Log4perl-&gt;get_logger(\"test_app\");\n$logger-&gt;info('-'x40); # New run\n\nmy @tasks = (\n    [ 'ls', '-lt', '/tmp/test_app.log' ], # ok\n    [ 'df', '-h'                       ], # ok\n    [ 'grep', 'foo', '/var/log/foo'    ], # error\n);\n\nfor my $task (@tasks) {\n    run_command($task);\n}\n\nsub run_command {\n    my ($command_with_args) = @_;\n    my ($writer, $reader, $error);\n    $error = gensym;\n    my $pid = open3($writer, $reader, $error, @$command_with_args);\n\n    waitpid( $pid, 0 );\n    my $child_exit_status = $? &gt;&gt; 8;\n\n    $logger-&gt;info(\"Running [ \" . join(' ', @$command_with_args) . \" ]\");\n\n    {\n        local $/; # Read all of $reader/$error at one go, but do not affect rest of program\n        if ($child_exit_status) {\n            $logger-&gt;error(\"ERROR: Got status code [ $child_exit_status ]\");\n            $logger-&gt;error(\"Error Message:\\n\" . &lt;$error&gt;);\n        } else {\n            $logger-&gt;info(\"SUCCESS\");\n            $logger-&gt;info(\"Output:\\n\" . &lt;$reader&gt;);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong> - /tmp/test_app.log</p>\n\n<pre><code>INFO - ----------------------------------------\nINFO - Running [ ls -lt /tmp/test_app.log ]\nINFO - SUCCESS\nINFO - Output:\n-rw-rw-r-- 1 felix felix 29129 Oct 24 00:06 /tmp/test_app.log\n\nINFO - Running [ df -h ]\nINFO - SUCCESS\nINFO - Output:\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/xvda2       30G   13G   18G  41% /\ndevtmpfs        3.6G     0  3.6G   0% /dev\n/dev/xvdh       100G   25G   76G  25% /data/home\n\nINFO - Running [ grep foo /var/log/foo ]\nERROR - ERROR: Got status code [ 2 ]\nERROR - Error Message:\ngrep: /var/log/foo: No such file or directory\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 1593874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aff1dd3119968bf75edb77eae62f22e6?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/1593874/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1477282150, "creation_date": 1477221178, "last_edit_date": 1477232767, "question_id": 40202252, "link": "https://stackoverflow.com/questions/40202252/logging-stdout-and-stderr-for-several-commands-in-backticks", "title": "Logging stdout and stderr for several commands in backticks", "body": "<p>I need to logging stdout and stderr for several commands in backticks.</p>\n\n<pre><code>my $logger = Log::Log4perl-&gt;get_logger(\"test_app\");\n...\nmy $log;\n$log = `service someservice restart`;\n\n$logger-&gt;info(\"someservice: $log\");\n\n$log = `~/scripts/test.pl param1`;\n$logger-&gt;info(\"test.pl: $log\");\n\n$log = `~/scripts/script.pl param2`;\n$logger-&gt;info(\"script.pl: $log\");\n\n$log = `~/scripts/env.pl param3`;\n$logger-&gt;info(\"env.pl: $log\");\n\n$log = `~/scripts/monitor.pl param4`;\n$logger-&gt;info(\"monitor.pl: $log\");\n</code></pre>\n\n<p>In this case only stdout will be logged. How can I logged stderr too?</p>\n\n<p>This code looks ugly. Is there way to write it more gracefully?</p>\n"}, {"tags": ["regex", "bash", "perl", "sed", "solaris"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 2, "creation_date": 1477220078, "post_id": 40202020, "comment_id": 67669028, "body": "since patterns are mutually exclusive you can write: <code>sed -n -e &#39;&#47;^a_[a-zA-Z0-9]*$&#47;p;&#47;^[a-zA-Z0-9]*$&#47;p;&#39;</code> or <code>sed -n -e &#39;&#47;^a_[a-zA-Z0-9]*$&#47;p;&#39; -e &#39;&#47;^[a-zA-Z0-9]*$&#47;p;&#39;</code>. Note that if you only need to filter, you can also use grep."}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1477223959, "post_id": 40202020, "comment_id": 67670017, "body": "<code>sed -n -E &#39;&#47;^[a-zA-Z0-9]*$|^a_[a-zA-Z0-9]*$&#47;p&#39;</code> works for me on GNU sed, how exactly is it failing for you?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1477220652, "last_edit_date": 1477220652, "creation_date": 1477220272, "answer_id": 40202136, "question_id": 40202020, "link": "https://stackoverflow.com/questions/40202020/sed-regex-with-alternative-on-solaris-doesnt-work/40202136#40202136", "title": "sed regex with alternative on Solaris doesn&#39;t work", "body": "<p>With Perl</p>\n\n<pre><code>perl -ne 'print if /^(a_)?[a-zA-Z0-9]*$/' input.txt\n</code></pre>\n\n<p>The <code>(a_)?</code> matches <code>a_</code> one-or-zero times, so optionally. It may or may not be there. </p>\n\n<p>The <code>(a_)</code> also <em>captures</em> the match, what is not needed. So you can use <code>(?:a_)?</code> instead.  The <code>?:</code> makes <code>()</code> only group what is inside (so <code>?</code> applies to the whole thing), but not remember it.</p>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 1, "last_activity_date": 1477223886, "creation_date": 1477223886, "answer_id": 40202631, "question_id": 40202020, "link": "https://stackoverflow.com/questions/40202020/sed-regex-with-alternative-on-solaris-doesnt-work/40202631#40202631", "title": "sed regex with alternative on Solaris doesn&#39;t work", "body": "<p>with <code>grep</code></p>\n\n<pre><code>$ grep -xiE '(a_)?[a-z0-9]*' ip.txt\ngrtad\na_pitr\nbaman\n12353\nai345\n</code></pre>\n\n<ul>\n<li><code>-x</code> match whole line</li>\n<li><code>-i</code> ignore case</li>\n<li><code>-E</code> extended regex, if not available, use <code>grep -xi '\\(a_\\)\\?[a-z0-9]*'</code></li>\n<li><code>(a_)?</code> zero or one time match <code>a_</code></li>\n<li><code>[a-z0-9]*</code> zero or more alphabets or numbers</li>\n</ul>\n\n<p><br>\nWith <code>sed</code></p>\n\n<pre><code>sed -nE '/^(a_)?[a-zA-Z0-9]*$/p' ip.txt\n</code></pre>\n\n<p>or, with GNU <code>sed</code></p>\n\n<pre><code>sed -nE '/^(a_)?[a-z0-9]*$/Ip' ip.txt\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7060018, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202613861703656/picture?type=large", "display_name": "Peter F", "link": "https://stackoverflow.com/users/7060018/peter-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 1, "accepted_answer_id": 40202136, "answer_count": 2, "score": 2, "last_activity_date": 1477223886, "creation_date": 1477219321, "question_id": 40202020, "link": "https://stackoverflow.com/questions/40202020/sed-regex-with-alternative-on-solaris-doesnt-work", "title": "sed regex with alternative on Solaris doesn&#39;t work", "body": "<p>Currently I'm trying to use sed with regex on Solaris but it doesn't work. \nI need to show only lines matching to my regex.</p>\n\n<pre><code>sed -n -E '/^[a-zA-Z0-9]*$|^a_[a-zA-Z0-9]*$/p'\n</code></pre>\n\n<p>input file:</p>\n\n<pre><code>grtad\na_pitr\n_aupa\na__as\nbaman\n12353\nai345\nki_ag\n-MXx2\n!!!23\n+_)@*\n</code></pre>\n\n<p>I want to show only lines matching to above regex:</p>\n\n<pre><code>grtad\na_pitr\nbaman\n12353\nai345\n</code></pre>\n\n<p>Is there another way to use alternative? Is it possible in perl?\nThanks for any solutions. </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 661440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd32692c3bb8c4161d4e78c9041abb69?s=128&d=identicon&r=PG", "display_name": "Finbar Crago", "link": "https://stackoverflow.com/users/661440/finbar-crago"}, "is_accepted": false, "score": 2, "last_activity_date": 1477207469, "last_edit_date": 1477207469, "creation_date": 1477207137, "answer_id": 40200533, "question_id": 40200103, "link": "https://stackoverflow.com/questions/40200103/i-would-like-remove-only-spaces-and-ignore-tabs-in-a-string/40200533#40200533", "title": "I would like remove only spaces and ignore tabs in a string", "body": "<p>Tabs are ascii character 0x09; spaces are 0x20. Replacing spaces will not affect tabs...</p>\n\n<pre><code>$str = \"1 2 3\\t4 5 6\\t7 8 9\\n\";\n$str =~ s/ //g;\n# $str is now \"123\\t456\\t789\\n\"\n</code></pre>\n\n<p>Take a look at <a href=\"http://perldoc.perl.org/perlrequick.html#Search-and-replace\" rel=\"nofollow\">perlrequick</a> for an introduction to regular expressions.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "edited": false, "score": 0, "creation_date": 1477311938, "post_id": 40213866, "comment_id": 67700027, "body": "Great comment, I used this a long time ago and actually forgot about it :)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1477297834, "creation_date": 1477297834, "answer_id": 40213866, "question_id": 40200103, "link": "https://stackoverflow.com/questions/40200103/i-would-like-remove-only-spaces-and-ignore-tabs-in-a-string/40213866#40213866", "title": "I would like remove only spaces and ignore tabs in a string", "body": "<p>[I wouldn't usually answer a \"write my code for me\" question like this, but I thought it was important to have an answer giving an alternative to the existing regex-based answer.]</p>\n\n<p>Whilst you can use <code>s/.../.../</code> to remove characters from a string, it's probably overkill to invoke all of the power of Perl's regex engine to do something as simple as that. The transliteration operator (<code>tr/.../.../</code>) has a <code>/d</code> option that deletes specific characters from its target string.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $str = \"1 2 3\\t4 5 6\\t7 8 9\\n\";\n\nprint $str;\n\n$str =~ tr/ //d;\n\nprint $str;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1477297834, "creation_date": 1477202996, "question_id": 40200103, "link": "https://stackoverflow.com/questions/40200103/i-would-like-remove-only-spaces-and-ignore-tabs-in-a-string", "title": "I would like remove only spaces and ignore tabs in a string", "body": "<p>String has both spaces and tabs. I would like to remove all the occurrences of spaces in the string but keep the tab spaces as is. \nWould like to preserve the tabs so that I can use tab-delimiter option in excel when I import the text file\nThanks</p>\n"}, {"tags": ["linux", "perl", "serial-port", "tty"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477203258, "post_id": 40199573, "comment_id": 67665461, "body": "Maybe this is clear to all but -- what is the question?  What is <code>$ob-&gt;read</code>?"}, {"owner": {"reputation": 125, "user_id": 2342257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UctgO.jpg?s=128&g=1", "display_name": "Asam Padeh", "link": "https://stackoverflow.com/users/2342257/asam-padeh"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477204537, "post_id": 40199573, "comment_id": 67665683, "body": "$ob-&gt;read prints the right boot up message however it missed that keyword most of the time. In putty console, user have to press Enter once he sees that keyword to come to device config menu, otherwise booting up continues normally (similar like PC restart then user press F2 to enter BIOS menu). . Is perl too slow so react?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477204836, "post_id": 40199573, "comment_id": 67665723, "body": "Thanks for the explantion. But ... what class/module is it?  What does <code>read</code> method return? You are reading into two variables -- which gets what? What does it mean &quot;<i>missed that keyword</i>&quot;?  If it gets the message with the keyword how does it miss it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477208342, "post_id": 40199573, "comment_id": 67666333, "body": "Can <code>read</code> supply a line at a time, as it is printed?  Then you can do <code>while (read(...))</code> and check for the message, as each line is received.  For example.  Can you let us know what class/module <code>$ob</code> is from? Or can you clarify what/how <code>read</code> does?"}, {"owner": {"reputation": 125, "user_id": 2342257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UctgO.jpg?s=128&g=1", "display_name": "Asam Padeh", "link": "https://stackoverflow.com/users/2342257/asam-padeh"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477218916, "post_id": 40199573, "comment_id": 67668718, "body": "Hi, this is my first serial port script, so not able to comment further. Now I can stop the boot message by sending &quot;\\n&quot; from beginning (not detecting the Booting_up keyword). The effect is still same, to stop the boot message.  But now see strange behaviour after sending that $ob-&gt;write(&quot;\\n\\n&quot;) I can not send more than 16 characters with the subsequent $ob-&gt;write      <code>$ob-&gt;write(&quot;\\n\\n&quot;);     sleep 3;     $ob-&gt;write(&quot;cmd&quot;); &#47;&#47; cmd length only 16 chars</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477219157, "post_id": 40199573, "comment_id": 67668792, "body": "OK.  This, <code>$ob-&gt;read</code>, this is an object of some class which comes from some module, correct?  The <code>$ob</code> was created somehow -- I am asking what that module is -- like, <code>my $ob = Some::Name-&gt;new(...);</code> or some such. This would help because then I can look up what <code>read</code> does and may be able to help."}, {"owner": {"reputation": 125, "user_id": 2342257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UctgO.jpg?s=128&g=1", "display_name": "Asam Padeh", "link": "https://stackoverflow.com/users/2342257/asam-padeh"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477219251, "post_id": 40199573, "comment_id": 67668819, "body": "oh sorry forget to give the link i read: <a href=\"http://www.foo.be/docs/tpj/issues/vol4_1/tpj0401-0020.html\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477219344, "post_id": 40199573, "comment_id": 67668841, "body": "Ah!  Thank you, that should help.  It is very late here so I&#39;ll look at it tomorrow at some time and come back here."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477330420, "post_id": 40199573, "comment_id": 67711898, "body": "I posted something for you to try, but -- what do you mean by &quot;<i>Kernel is Linux</i>&quot;?  The link you offer is about <code>Win32::SerialPort</code>, not Linux."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1477380303, "post_id": 40199573, "comment_id": 67729954, "body": "Please <i>state the question in the title</i>."}, {"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477497029, "post_id": 40199573, "comment_id": 67793859, "body": "This question makes me consider a cool little boot analysis raspberry pie appliance that you attach to the console port of systems that aren&#39;t booting completely.  Oh that Raspberry pi, what a &quot;guy.&quot;"}, {"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477497727, "post_id": 40199573, "comment_id": 67794361, "body": "Discussion/clarification has been faint, and question quality is not high, though there are interesting answers.  Hopefully it improves."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1482815831, "post_id": 40199573, "comment_id": 69881254, "body": "PLease see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2082599"}, "is_accepted": false, "score": 0, "last_activity_date": 1477311488, "creation_date": 1477311488, "answer_id": 40218232, "question_id": 40199573, "link": "https://stackoverflow.com/questions/40199573/perl-deviceserialport/40218232#40218232", "title": "Perl Device::SerialPort", "body": "<p>Perhaps rather index the string?</p>\n\n<pre><code>($count, $result) = $ob-&gt;read(300); # at least 300 chars coming till keyword appear\n\n$substring = 'Booting_up';\n if (index($result, $substring) != -1) {\n   print \"send Enter ..\\n\";\n   sleep 1;\n   $ob-&gt;write(\"\\r\\n\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477329491, "post_id": 40223846, "comment_id": 67711421, "body": "The first block of code here might not do what we expect.   The exit condition doesn&#39;t seem correct.  I don&#39;t know exactly how read(300) behaves, but it either returns fewer bytes when the file is closed or  when there&#39;s a pause and there aren&#39;t 300 bytes to read since the last read()....  Either way, the loop exit doesn&#39;t sound right, since the serial port will never close itself..."}, {"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477329634, "post_id": 40223846, "comment_id": 67711494, "body": "From the documentation: Because all the tied methods block, they should ALWAYS be used with timeout settings and are not suitable for background operations and polled loops. The sysread method may return fewer characters than requested when a timeout occurs. The method call is still considered successful. If a sysread times out after receiving some characters, the actual elapsed time may be as much as twice the programmed limit. If no bytes are received, the normal timing applies."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477329682, "post_id": 40223846, "comment_id": 67711526, "body": "@BenPen  While the docs don&#39;t say much, they do say that <code>$count</code> is the number of bytes read and offer an example which is pretty much my <code>last ...</code> statement.  So I think loop exit is fine.  What isn&#39;t clear is whether the <code>$result</code> is filled, but one would have to try."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477329826, "post_id": 40223846, "comment_id": 67711584, "body": "@BenPen  Why do you quote tied methods?  Is <code>read</code> one of those?  It doesn&#39;t appear to be.  As for timeouts, that&#39;s a different concern.  The OP doesn&#39;t offer details.  The only clear thing is that it likely doesn&#39;t read enough data.  I&#39;ll wait for clarification on how this works (or doesn&#39;t)."}, {"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477329999, "post_id": 40223846, "comment_id": 67711662, "body": "Well, if you look at the I/O modes, there is polling, or blocking.  blocking read waits until 300 bytes to be ready, and poling returns immediately with all the bytes it has.  Both are problematic, right?  One blocks on the last 300 bytes if the output pauses, the other exits the loop too soon, mostly."}, {"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477330032, "post_id": 40223846, "comment_id": 67711687, "body": "The timeouts section is enlightening.  <a href=\"http://search.cpan.org/~bbirth/Win32-SerialPort-0.22/lib/Win32/SerialPort.pm#Configuration_and_Capability_Methods\" rel=\"nofollow noreferrer\">search.cpan.org/~bbirth/Win32-SerialPort-0.22/lib/Win32/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477330840, "post_id": 40223846, "comment_id": 67712107, "body": "@BenPen  Sure, there is a whole lot more.  Like I say in the answer, it is rather low level.  I&#39;d really read a few bytes at a time, patch the total read, and search that. However there is no detail in OP so I think that all we can do is wait for response and clarifications.  (I have to assume that they got the configuration down.)"}, {"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477404535, "post_id": 40223846, "comment_id": 67746451, "body": "That&#39;s cool.  At that point, blocking would be a better setting, but both would probably work."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477430049, "post_id": 40223846, "comment_id": 67762183, "body": "@BenPen  Thanks for the suggestion, I did something along those lines. (The original 9 was a miscounted lenght, thanks for bringing it up :)  Note that editing posts so to change/add phrases or language is usually a tricky business (which is probably why they rejected it) -- but thank you for the attempt to improve the post!"}, {"owner": {"reputation": 361, "user_id": 2129481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525348ee13623bc031e5e336d465a782?s=128&d=identicon&r=PG", "display_name": "BenPen", "link": "https://stackoverflow.com/users/2129481/benpen"}, "edited": false, "score": 0, "creation_date": 1477430433, "post_id": 40223846, "comment_id": 67762386, "body": "Yeah, there&#39;s plenty of learning curve left for me...  I try to not care overly about the strangeness of Reputation gathering, but it&#39;s a meritocracy around here, so meh, gotta get on the same page to not be stuck as a newbie."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1477502793, "last_edit_date": 1495540419, "creation_date": 1477328991, "answer_id": 40223846, "question_id": 40199573, "link": "https://stackoverflow.com/questions/40199573/perl-deviceserialport/40223846#40223846", "title": "Perl Device::SerialPort", "body": "<p>It appears that you are using <a href=\"http://search.cpan.org/~bbirth/Win32-SerialPort-0.22/lib/Win32/SerialPort.pm\" rel=\"nofollow noreferrer\">Win32::SerialPort</a> module, or perhaps <a href=\"http://search.cpan.org/~cook/Device-SerialPort-1.002/SerialPort.pm\" rel=\"nofollow noreferrer\">Device::SerialPort</a> which </p>\n\n<blockquote>\n  <p>provides an object-based user interface essentially identical to the one provided by the Win32::SerialPort module.</p>\n</blockquote>\n\n<p>Its method <code>read</code> takes the number of bytes to read and returns the number read and writes them into the given string.</p>\n\n<p>You may be \"<em>missing</em>\" the phrase because it's past the 300-mark, and your code doesn't read any further. Try to loop, getting a few bytes at a time and adding them up, thus building the string in small reads.</p>\n\n<pre><code>my bytes_in = 10;    # length of pattern, but it does NOT ensure anything\nmy ($read, $result);\n\nwhile (1) \n{\n    my ($count, $read) = $ob-&gt;read( $bytes_in ); \n\n    $result = $result . $read;\n    if ($result =~ m/Booting_up/) {  # is it \"Booting_up\" or \"Booting up\" ?\n        print \"send Enter ...\\n\";\n        sleep 1;                     # is this needed?\n        $ob-&gt;write(\"\\r\\n\");\n        # last;                      # in case this is all you need to do\n    }\n\n    last if $count != $bytes_in;     # done reading \n}\n</code></pre>\n\n<p>I don't put the <code>$ob-&gt;read</code> statement in the loop condition since the documentation isn't crystal clear on how the method works.  You may also be able to simply use</p>\n\n<pre><code>while ( my ($count, $read) = $ob-&gt;read( $bytes_in ) ) {\n    $result = $result . $read;\n    if ($result =~ m/Booting_up/s) { \n        # ...\n    }\n    last if $count != $bytes_in;\n}\n</code></pre>\n\n<p>We read a small number of bytes at a time to prevent problems with either <em>polling</em> or <em>blocking</em> reads, brought up in comments by <a href=\"https://stackoverflow.com/users/2129481/benpen\">BenPen</a>. See <a href=\"http://search.cpan.org/~bbirth/Win32-SerialPort-0.22/lib/Win32/SerialPort.pm#Configuration_and_Capability_Methods\" rel=\"nofollow noreferrer\">Configuration and capability methods</a>.</p>\n\n<p>You can first read those first 300 bytes that precede the pattern in one go and then start reading a few (or one) at a time, which would also lead to the quickest identification of the phrase.</p>\n\n<p>This can be tweaked further but let's first see what it does as it stands (I cannot test).</p>\n\n<p>Documentation also offers a few other methods which may be useful, in particular <code>readline</code> and <code>streamline</code>.  As this is all rather low level there are yet other ways but if you got all else working perhaps this will be enough to complete it.</p>\n"}], "owner": {"reputation": 125, "user_id": 2342257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UctgO.jpg?s=128&g=1", "display_name": "Asam Padeh", "link": "https://stackoverflow.com/users/2342257/asam-padeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1206, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1477502793, "creation_date": 1477197557, "last_edit_date": 1477292239, "question_id": 40199573, "link": "https://stackoverflow.com/questions/40199573/perl-deviceserialport", "title": "Perl Device::SerialPort", "body": "<p>Looking for right way to detect one keyword during board boot up message.\nAfter keyword detected, send Enter key after one second.\nKernel is Linux.</p>\n\n<pre><code># Serial port inisialisation is finished here.\n\n# Read boot message\n($count, $result) = $ob-&gt;read(300); # at least 300 chars coming till keyword appear\n\nif ($result =~ m/Booting_up/) {\n    print \"send Enter ...\\n\";\n    sleep 1;\n    $ob-&gt;write(\"\\r\\n\");\n}\n</code></pre>\n\n<p>Thanks for hint</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477167474, "post_id": 40196400, "comment_id": 67659112, "body": "At first glance I&#39;d say the first two curlies <code>{}</code> in <code>s&#47;abcdef1{3} {\\n&#47;\u2026</code> must be escaped. Else they mean <code>abcdef</code> followed by <i>exactly</i> three letters <code>1</code>, i.e. <code>abcdef111</code>. Try <code>s&#47;abcdef1\\{3\\} {\\n&#47;\u2026</code>."}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477167982, "post_id": 40196400, "comment_id": 67659270, "body": "look like its not satisfying if condition."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477168144, "post_id": 40196400, "comment_id": 67659309, "body": "Ahh, I missed that. You added <code>use strict&#47;warnings</code>. Didn&#39;t you get any warnings?. I think <code>if (&#47;$abcdef1&#47;)</code> tries to interpolate the variable <code>$abcdef1</code>. Escape the dollar, too: <code>if (&#47;\\$abcdef1&#47;)</code>."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1477168174, "post_id": 40196400, "comment_id": 67659317, "body": "Try using a regex like <code>&#47;^(abcdef1)\\{(\\d+)\\} \\{(.*)\\}&#47;</code>, then extract the data you need from <code>$3</code>"}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1477169199, "post_id": 40196400, "comment_id": 67659610, "body": "I have tried both the approaches but not working"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1477169620, "post_id": 40196400, "comment_id": 67659742, "body": "@sam Simply print the content of <code>$1</code> followed by each of the extracted items from <code>$3</code> to get the desired output."}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1477170452, "post_id": 40196400, "comment_id": 67659992, "body": "i was doing this way if (/^(abcdef1)\\{(\\d+)\\} \\{(.*)\\}/)     { \t  s/abcdef1{3} {\\n/abcdef1{3} {\\nabcdef1 0x55\\nabcdef1 0x55\\nabcdef1 0x55\\n/gm;       print $1; \t  print $2; \t  print $3;     }"}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1477170485, "post_id": 40196400, "comment_id": 67660000, "body": "not getting desired output"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1477170793, "post_id": 40196400, "comment_id": 67660099, "body": "You do not need the substitution. But first extract the values from <code>$3</code>. Then  do  <code>print &quot;$start $_\\n&quot; for @values</code> where <code>$start</code> is <code>$1</code> and <code>@values</code> are the extracted values from <code>$3</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477186051, "post_id": 40197411, "comment_id": 67663080, "body": "<code>[^}\\s](?:[^}]*[^}\\s])?</code> is the reliable replacement for <code>.*?</code>."}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1477201356, "post_id": 40197411, "comment_id": 67665179, "body": "I have tried with first approach but not getting desired output."}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1477244204, "post_id": 40197411, "comment_id": 67676082, "body": "I have tried second approach also but its not working."}, {"owner": {"reputation": 136, "user_id": 825584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fa9289fb05ad51299dfede83a09392?s=128&d=identicon&r=PG", "display_name": "codebard", "link": "https://stackoverflow.com/users/825584/codebard"}, "reply_to_user": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1477261192, "post_id": 40197411, "comment_id": 67681269, "body": "@sam I updated the answer to generalize the first capture pattern"}, {"owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "edited": false, "score": 0, "creation_date": 1477286527, "post_id": 40197411, "comment_id": 67686375, "body": "this output i am getting for above input  &quot;abcdef1{3} { 0x55, 0x55, 0x55 } abcdef1{3} { 0x55, 0x55, 0x55 } abcdef2 0x55 abcdef2 0x55 abcdef2{2} { 0x55, 0x55}&quot; one more things i need append the output in  file from the line i am reading"}], "tags": [], "owner": {"reputation": 136, "user_id": 825584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74fa9289fb05ad51299dfede83a09392?s=128&d=identicon&r=PG", "display_name": "codebard", "link": "https://stackoverflow.com/users/825584/codebard"}, "is_accepted": true, "score": 3, "last_activity_date": 1477261142, "last_edit_date": 1477261142, "creation_date": 1477172992, "answer_id": 40197411, "question_id": 40196400, "link": "https://stackoverflow.com/questions/40196400/how-to-append-and-the-line-once-the-matched-pattern-is-found/40197411#40197411", "title": "How to append and the line once the matched pattern is found", "body": "<p>Note in <a href=\"https://metacpan.org/pod/distribution/perl/pod/perlre.pod\" rel=\"nofollow\">perlre</a> and <a href=\"http://www.regular-expressions.info/\" rel=\"nofollow\">RE.info</a> that using <code>$</code> and <code>{ ... }</code> have special meanings within regular expressions. You may not see output because you are missing at least one print statement. The first curly enclosure (ie: <code>{\\d+}</code>) could be optional unless you want to validate the length of the series in the second enclosure.</p>\n\n<p>Your loop may look something like:</p>\n\n<pre><code>while (&lt;$my_fh&gt;) {\n  if (/\n      ^               # beginning of line\n      ([^{]+)         # the base pattern captured in $1 (\"non-left curly braces\")\n      .*              # any number of characters\n      \\{\\s*(.*?)\\s*\\} # the data section surrounded by curlies captured in $2\n      $               # end of line\n      /x)          # allow whitespace and comments\n  {\n    for my $val (split /, /, $2) {\n      print \"$1 $val\\n\";\n    }\n  } else {\n    print;\n  }\n}\n</code></pre>\n\n<p>Or more tersely:</p>\n\n<pre><code>while (my $line = &lt;$my_fh&gt;) {\n  if ($line =~ /^([^{]+).*\\{\\s*(.*?)\\s*\\}$/) {\n    $line = '';\n    $line .= \"$1 $_\\n\" for split /, /, $2;\n  }\n  print $line;\n}\n</code></pre>\n\n<p>The <code>?</code> in the pattern <code>.*?</code> indicates a non-greedy match. In this case, it avoids matching the whitespace next to the second right curly brace. </p>\n"}], "owner": {"reputation": 73, "user_id": 4209468, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bc881fb4d07484891835a2217668e970?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4209468/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 40197411, "answer_count": 1, "score": 0, "last_activity_date": 1477261142, "creation_date": 1477166089, "last_edit_date": 1495541797, "question_id": 40196400, "link": "https://stackoverflow.com/questions/40196400/how-to-append-and-the-line-once-the-matched-pattern-is-found", "title": "How to append and the line once the matched pattern is found", "body": "<p>I want to search the string in a file and if the search string is found \nthen I want to replace the three line based on value in curly braces.</p>\n\n<p>I was going through one of solution from stack overflow</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3422268/perl-insert-lines-after-a-match-\">Perl - Insert lines after a match is found in a file</a>\n    is-found-in-a-file</p>\n\n<p>But the things are not working for me \ninput_file:</p>\n\n<pre><code>abcdef1{3} { 0x55, 0x55, 0x55 }\nabcdef2{2} { 0x55, 0x55}\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $ipfile  = 'input.txt';\nopen my $my_fh \"&lt;\", $ipfile  or die \"Couldn't open input file: $!\";\nwhile(&lt;$my_fh&gt;)\n{\n if (/$abcdef1/)\n {\n s/abcdef1{3} {\\n/abcdef1{3} {\\nabcdef1 0x55\\nabcdef1 0x55\\nabcdef1 \n 0x55\\n/gm;\n\n}\n}\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>abcdef1 0x55\nabcdef1 0x55\nabcdef1 0x55\nabcdef2 0x55\nabcdef2 0x55\n</code></pre>\n\n<p>Any help with explanation would be grateful.</p>\n"}, {"tags": ["regex", "perl", "replace"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1477162396, "post_id": 40195819, "comment_id": 67657460, "body": "What have you tried? What difficulties are you having? Could you show us the code you&#39;ve written so far to solve this?"}, {"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477167266, "post_id": 40195819, "comment_id": 67659036, "body": "Well, for example, stuff like perl -pe &#39;s/(\\w+)/&quot;$1&quot;/g&#39; ... it doesn&#39;t work because \\w also picks up the numerics."}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 2, "creation_date": 1477167425, "post_id": 40195819, "comment_id": 67659096, "body": "That&#39;s a start at least. I think using a csv parser would be the best approach. But I&#39;m not familiar with them, so for a quick fix, I can suggest something like <code>perl -pe &#39;s%[^,\\n]+%$&amp;=~&#47;^\\d+$&#47;?$&amp;:qq{&quot;$&amp;&quot;}%ge&#39;</code>."}, {"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477167793, "post_id": 40195819, "comment_id": 67659209, "body": "@PerlDuck I tried \\D but that didn&#39;t have the desired effect for me unfortunatley."}, {"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1477167851, "post_id": 40195819, "comment_id": 67659226, "body": "@Dada I think I&#39;ll simply refer to you as the big daddy of Regex.   That&#39;s one spectacular one-liner !  As for CSV parsers, you&#39;re probably right, although to be honest I didn&#39;t even know there was such a thing until you metioned it !"}], "answers": [{"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1477197966, "post_id": 40197079, "comment_id": 67664686, "body": "why not use <code>-F,</code> to get the split into <code>@F</code> array?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1477201361, "post_id": 40197079, "comment_id": 67665181, "body": "@Sundeep  Sure, possible.  Along with a whole host of other good tricks -- this was meant to be very basic, just like a normal easy script would do."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1477501590, "last_edit_date": 1477501590, "creation_date": 1477170564, "answer_id": 40197079, "question_id": 40195819, "link": "https://stackoverflow.com/questions/40195819/adding-quotes-to-a-csv-using-perl/40197079#40197079", "title": "Adding quotes to a CSV using perl", "body": "<p>It seems that you are after a one-liner. Here is a basic one</p>\n\n<pre><code>perl -lpe '$_ = join \",\", map /^\\d+$/ ? $_ : \"\\\"$_\\\"\", split \",\";' input.csv\n</code></pre>\n\n<p>Splits each line by <code>,</code> and passes obtained list to <code>map</code>. There each element is tested for digits-only <code>/^\\d+$/</code> and passed untouched, or padded with <code>\"</code> otherwise.  Then <code>map</code>'s return is joined by <code>,</code>.</p>\n\n<p>The <code>-l</code> removes newline, what is needed since <code>\"</code> pad the whole line. The result is assigned back to <code>$_</code> in order to be able to use <code>-p</code> so that there is no need for explicit print. </p>\n\n<p>The code is very easily used in a script, if you don't insist on an one-liner.</p>\n\n<p>Processing of csv files is far better done by modules, for example <a href=\"http://search.cpan.org/~makamaka/Text-CSV-1.33/lib/Text/CSV.pm\" rel=\"nofollow\">Text::CSV</a></p>\n"}, {"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 5, "last_activity_date": 1477189312, "creation_date": 1477189312, "answer_id": 40198912, "question_id": 40195819, "link": "https://stackoverflow.com/questions/40195819/adding-quotes-to-a-csv-using-perl/40198912#40198912", "title": "Adding quotes to a CSV using perl", "body": "<p>I recommend not reinventing the wheel, but rather to use an already existing module, as zdim recommends.  Here is your example using <a href=\"http://search.cpan.org/~hmbrand/Text-CSV_XS-1.25/CSV_XS.pm\">Text::CSV_XS</a></p>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nuse Text::CSV_XS;\nuse Scalar::Util qw( looks_like_number );\n\nmy $csv = Text::CSV_XS-&gt;new();\nwhile (my $row = $csv-&gt;getline(*STDIN)) {\n    my @quoted_row = map { looks_like_number($_) ? $_ : '\"'. $_ .'\"' } @$row;\n    print join(',',@quoted_row) . \"\\n\";\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>cat input | perl test.pl\n\"A\",01,\"ALPHA\"\n00,\"D\",\"CHARLIE\"\n\"E\",\"F\",02\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 1, "last_activity_date": 1477198479, "last_edit_date": 1477198479, "creation_date": 1477198140, "answer_id": 40199629, "question_id": 40195819, "link": "https://stackoverflow.com/questions/40195819/adding-quotes-to-a-csv-using-perl/40199629#40199629", "title": "Adding quotes to a CSV using perl", "body": "<p>Another one-liner, input file modified to add a line with alphanumeric fields</p>\n\n<pre><code>$ cat ip.csv \nA,01,ALPHA\n00,D,CHARLIE\nE,F,02\n23,AB12,53C\n\n$ perl -F, -lane 's/.*[^0-9].*/\"$&amp;\"/ foreach(@F); print join \",\", @F' ip.csv \n\"A\",01,\"ALPHA\"\n00,\"D\",\"CHARLIE\"\n\"E\",\"F\",02\n23,\"AB12\",\"53C\"\n</code></pre>\n\n<p><br>\nTo modify OP's attempt:</p>\n\n<pre><code>$ perl -pe 's/(^|,)\\K\\d+(?=,|$)(*SKIP)(*F)|\\w+/\"$&amp;\"/g' ip.csv \n\"A\",01,\"ALPHA\"\n00,\"D\",\"CHARLIE\"\n\"E\",\"F\",02\n23,\"AB12\",\"53C\"\n</code></pre>\n\n<ul>\n<li><code>(^|,)\\K\\d+(?=,|$)(*SKIP)(*F)</code> this will skip the fields with digits alone and the alternate pattern <code>\\w+</code> will get replaced</li>\n</ul>\n"}], "owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 40198912, "answer_count": 3, "score": 1, "last_activity_date": 1477501590, "creation_date": 1477162315, "last_edit_date": 1477167315, "question_id": 40195819, "link": "https://stackoverflow.com/questions/40195819/adding-quotes-to-a-csv-using-perl", "title": "Adding quotes to a CSV using perl", "body": "<p>I've got a CSV that looks as follows:</p>\n\n<pre><code>A,01,ALPHA\n00,D,CHARLIE\nE,F,02\n</code></pre>\n\n<p>This is the desired file after transformation:</p>\n\n<pre><code>\"A\",01,\"ALPHA\"\n00,\"D\",\"CHARLIE\"\n\"E\",\"F\",02\n</code></pre>\n\n<p>As you can see, the fields that are entirely numeric are left unquoted, whilst the alpha (or alphanumeric ones) are quoted.</p>\n\n<p>What would be a sensible way to go about this in Perl ?</p>\n\n<p>Already commented below, but I've tried stuff like </p>\n\n<pre><code>perl -pe 's/(\\w+)/\"$1\"/g'\n</code></pre>\n\n<p>And that doesn't work because \\w obviously picks up the numerics.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477162455, "post_id": 40195747, "comment_id": 67657486, "body": "Sorry my bad,i dont know.i don&#39;t see any perl option there :)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1477162919, "post_id": 40195747, "comment_id": 67657644, "body": "Just reverse the order of the two loops to get the desired output"}, {"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1477163609, "post_id": 40195747, "comment_id": 67657880, "body": "Can u write the sample code,im new in perl...thanks"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477163697, "post_id": 40195747, "comment_id": 67657917, "body": "@andrew99 I just posted an answer. Should I further elaborate?"}, {"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1477164125, "post_id": 40195747, "comment_id": 67658078, "body": "I don&#39;t understand the answer sir,yeah it would be nice if u can elaborate it further,coz im new"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1477164715, "post_id": 40195980, "comment_id": 67658256, "body": "Thanks,it work now.can u explain me the error part.cause i don&#39;t understand the different with my script."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1477165858, "post_id": 40195980, "comment_id": 67658609, "body": "You&#39;re welcome. I almost got desperate. Consider this: You need 3 items from 3 shops. <b>Your code says</b> &quot;Go to shop_1 and buy item_1, then go to shop_2 and buy item_1, then go to shop_3 and buy item_1. After that, do the same for shop_2 and shop_3.&quot; <b>My code says</b> &quot;Go to shop_1 and buy items_1, _2, _3. Then go to shop_2 and _3 and do the same.&quot;. The result is the same, it&#39;s just a different order."}, {"owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "edited": false, "score": 0, "creation_date": 1477166804, "post_id": 40195980, "comment_id": 67658902, "body": "yeay,thanks!very clear explanation!i really got it now.thanks for the humble and patient!"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 1, "last_activity_date": 1477164353, "last_edit_date": 1477164353, "creation_date": 1477163301, "answer_id": 40195980, "question_id": 40195747, "link": "https://stackoverflow.com/questions/40195747/how-to-read-array-line-in-sequence-from-input/40195980#40195980", "title": "How to read array line in sequence from Input", "body": "<p>You are iterating over all your sites and then (for each site) add the domain to the current site.</p>\n\n<p>In pseudocode this is:</p>\n\n<pre><code>foreach site\n    foreach domain\n       print site + domain\n</code></pre>\n\n<p>Swap your loops so that the logic is</p>\n\n<pre><code>foreach domain\n    foreach site\n        print site + domain\n</code></pre>\n\n<p>Note that this is pseudocode, not Perl.</p>\n\n<hr>\n\n<p>In \"real\" Perl this would look like:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $file = 'sites.txt';\nopen( my $fh, '&lt;:encoding(UTF-8)', $file )\n  or die \"Couldn't open file !'$file' $!\";\n\nmy @rows = &lt;$fh&gt;;\nchomp @rows;\n\nmy @domains = qw(.com .net .org);\n\nforeach my $dns (@domains) {\n    foreach my $site (@rows) {\n        print \"$site$dns\\n\";\n    }\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>site1.com\nsite2.com\nsite3.com\nsite1.net\nsite2.net\nsite3.net\nsite1.org\nsite2.org\nsite3.org\n</code></pre>\n\n<p>Please <strong>always</strong> include <code>use strict;</code> and <code>use warnings;</code> on top of your scripts. These two statements will show you the most common errors in your code.</p>\n"}], "owner": {"reputation": 27, "user_id": 6780943, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5aa345ac3eb2e6032d8129a0286b0ce9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew99", "link": "https://stackoverflow.com/users/6780943/andrew99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477164353, "creation_date": 1477161817, "last_edit_date": 1477162450, "question_id": 40195747, "link": "https://stackoverflow.com/questions/40195747/how-to-read-array-line-in-sequence-from-input", "title": "How to read array line in sequence from Input", "body": "<p>I have some trouble\nwith array, how to read an array line in sequence from Input.\nHere's my code.</p>\n\n<p><strong>sites.txt</strong>: (input file)</p>\n\n<pre><code>site1\nsite2\nsite3\n</code></pre>\n\n<p><strong>program</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\n\nmy $file = 'sites.txt';\nopen(my $fh, '&lt;:encoding(UTF-8)', $file)\n     or die \"Couldn't open file !'$file' $!\";\n\nmy @rows = &lt;$fh&gt;;\nchomp @rows;\nforeach my $site (@rows) {\n    $sitename    = $site;\n    @domains     = qw(.com .net .org);\n    foreach $dns (@domains){\n        $domain = $dns;\n        print \"$site$dns\\n\";\n    }\n}\n</code></pre>\n\n<p>and the output is like this</p>\n\n<pre><code>site1.com\nsite1.net\nsite1.org\nsite2.com\nsite2.net\nsite2.org\nsite3.com\nsite3.net\nsite3.org\n</code></pre>\n\n<p>I understand until that point,but i want make it the first element of array from @domains\nreading until the end of Input line first,\nthen looping back to the 1st line of Input and going to the next element of array so \nthe output would be like this,</p>\n\n<pre><code>site1.com\nsite2.com\nsite3.com\nsite1.net\nsite2.net\nsite3.net\nsite1.org\nsite2.org\nsite3.org\n</code></pre>\n\n<p>it possible doing it? or need another module.sorry for basic question \nI'll be really appreciated for the Answers.\nthanks :)</p>\n"}, {"tags": ["arrays", "perl", "sorting"], "comments": [{"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1477152480, "post_id": 40194192, "comment_id": 67654332, "body": "The carriage return character (0x0d) is shown as <code>^M</code> in Vim, if <code>fileformat=unix</code>. Are you viewing the file in Vim?"}, {"owner": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "reply_to_user": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1477153485, "post_id": 40194192, "comment_id": 67654673, "body": "I&#39;m viewing the file in Unix via the less command which usually separates carriage returns fine, should I not be worried for sorting if I&#39;m viewing in a texteditor after?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1477153513, "post_id": 40194192, "comment_id": 67654680, "body": "<code>perl -pe &#39;s&#47;[\\r\\n]+&#47;\\n&#47;&#39; yourfile</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1477154399, "post_id": 40194192, "comment_id": 67654967, "body": "That would help, but I never recommend it to someone with an example command, because meddling with someone&#39;s source data is nasty."}], "answers": [{"tags": [], "owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1477191408, "last_edit_date": 1477191408, "creation_date": 1477154076, "answer_id": 40194492, "question_id": 40194192, "link": "https://stackoverflow.com/questions/40194192/sort-file-by-column/40194492#40194492", "title": "Sort file by column", "body": "<p>The main issue is that you're using the <code>'\\s'</code> literal instead of a regular\nexpression. You probably meant one or more spaces, i.e. <code>/s+/</code>.</p>\n\n<p>Another issue is due to nun-numeric <code>P-value</code> passed to the <code>&lt;=&gt;</code> operator. I\nsuggest shifting the header off the array before calling <code>sort</code>.</p>\n\n<p>Writing the output file should be performed outside of the <code>while (&lt;$in&gt;)</code> loop.</p>\n\n<p>Also, I suggest skipping empty lines:</p>\n\n<pre><code>while (&lt;$in&gt;) {\n    chomp;  #removes new line\n    push @array, $_ if $_;\n}\n</code></pre>\n\n<p>Here is a fixed version:</p>\n\n<pre><code>use strict; use warnings;\n\ndie \"Please specify a suitable text file\\n\" if (@ARGV != 1);\nmy ($infile) = @ARGV;\n\n#create outputfile\nmy $outfile = \"MetaAnalysis_Sorted.txt\";\n\n#create filehandles\nopen (my $in, \" &lt; $infile\") or die \"error reading $infile. $!\";\nopen (my $out, \" &gt;&gt; $outfile\") or die \"error creating $outfile. $!\";\n\n\nmy @array;\nwhile (&lt;$in&gt;) {\n    chomp;  #removes new line\n    push @array, $_ if $_;\n}\n\n\nmy $head = shift @array;\nprint $out \"$head\\n\";\n\nmy @sorted = sort {\n  (split /\\s+/, $a)[5] &lt;=&gt; (split /\\s+/, $b)[5];\n} @array;\nprint $out join( \"\\n\", @sorted ).\"\\n\\n\";\n\nclose $in;\nclose $out;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1477210156, "last_edit_date": 1592644375, "creation_date": 1477209726, "answer_id": 40200826, "question_id": 40194192, "link": "https://stackoverflow.com/questions/40194192/sort-file-by-column/40200826#40200826", "title": "Sort file by column", "body": "<p>The sequence <code>^M</code> is used by many editors and text utilities to indicate Ctrl-M, or <em>carriage-return</em>. It looks like your file has been saved with just a carriage-return (CR) at the end of each line. That's very unusual. Linux uses just a linefeed (LF) while Windows uses the two characters CR LF. Only much older Macintosh systems used just CR</p>\n<p>The regex character sequence <code>\\R</code> can be very useful for this kind of file. It will match any one of LF, CR LF, or just CR. Unfortunately, you can't set the input line separator to a regex pattern -- it must be a literal string, so you will have to read the whole file into a single string and then use <code>split</code></p>\n<p>This program shows the idea, but it is hard to tell where any blank lines may appear in your sample data, and it is also artificially line-wrapped in the middle of records. This should work fine as long as you provide an unmodified data file for input</p>\n<h3>sort_by_col6.pl</h3>\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @infile = do {\n    local $/;\n    split /\\R/, &lt;&gt;;\n};\n\nlocal $\\ = &quot;\\n&quot;;\n\nprint shift @infile;    # Print header line\nprint for sort { (split ' ', $a)[5] &lt;=&gt; (split ' ', $b) } @infile;\n</code></pre>\n<p>You will need to run it from the command prompt like this to redirect the output</p>\n<pre><code>$ perl sort_by_col6.pl my_input.txt &gt; MetaAnalysis_Sorted.txt\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6738488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b6a6255b0cd473954d78851ce99148?s=128&d=identicon&r=PG&f=1", "display_name": "89pies", "link": "https://stackoverflow.com/users/6738488/89pies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477210156, "creation_date": 1477152257, "last_edit_date": 1477208195, "question_id": 40194192, "link": "https://stackoverflow.com/questions/40194192/sort-file-by-column", "title": "Sort file by column", "body": "<p></p>\n\n<p>I'm trying to sort a file that looks like this </p>\n\n<pre><code>MarkerName      Allele1 Allele2 Weight  Zscore  P-value Direction^Mrs217377     t       c       6806    1.121   0.2625  +++^Mrs4668077\n  a       g       6806    -0.038  0.9696  --+^Mrs16855496 a       g       4106    -0.092  0.9268  ??-^Mrs217386   a       g       6806\n    0.814   0.4158  +++^Mrs2075070  a       g       6806    -0.699  0.4844  --+^Mrs10187002 a       t       4106    0.099   0.9208  ??+^Mrs12785983 t       c       6806    -1.092  0.2747  +--^Mrs1100405  t       c       6806    -0.872  0.3831  +--^Mrs12155014 t       c\n       6806    0.081   0.9358  ++-^Mrs2287619  t       c       6806    -2.221  0.02632 ---^M\n</code></pre>\n\n<p>After the seventh white space there is a <code>^M</code> character instead of a simple newline. I'm not exactly sure how to deal with it or whether I can just ignore it.\nI'm trying to sort each line by the P-Value (sixth) column.</p>\n\n<p>Like this:</p>\n\n<pre><code>MarkerName      Allele1 Allele2 Weight  Zscore  P-value Direction\nrs2287619       t       c       6806    -2.221  0.02632 ---\nrs217377        t       c       6806    1.121   0.2625  +++\nrs12785983      t       c       6806    -1.092  0.2747  +--\nrs1100405       t       c       6806    -0.872  0.3831  +--\nrs217386        a       g       6806    0.814   0.4158  +++\nrs2075070       a       g       6806    -0.699  0.4844  --+\nrs10187002      a       t       4106    0.099   0.9208  ??+\nrs16855496      a       g       4106    -0.092  0.9268  ??-\nrs4668077       a       g       6806    -0.038  0.9696  --+\n</code></pre>\n\n<p>So far I have this Perl code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict; \nuse warnings;\n\ndie \"Please specify a suitable text file\\n\" if (@ARGV != 1);\nmy ($infile) = @ARGV;\n\n# create outputfile\nmy $outfile = \"MetaAnalysis_Sorted.txt\";\n\n# create filehandles\nopen (my $in, \" &lt; $infile\") or die \"error reading $infile. $!\";\nopen (my $out, \" &gt;&gt; $outfile\") or die \"error creating $outfile. $!\";\n\n\nmy @array;\n\nwhile ( &lt;$in&gt; ) {\n    chomp;  # removes newline\n    push @array, $_;\n    my @sorted = sort { (split '\\s', $a)[5] &lt;=&gt; (split '\\s', $b)[5] } @array;\n    print $out join( \"\\n\", @sorted ).\"\\n\\n\";\n}\n\nclose $in;\nclose $out; \n</code></pre>\n\n<p>I've tried converting the original file with <code>dos2unix</code> but it didn't work.</p>\n"}, {"tags": ["perl", "awk", "replace", "sed"], "comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1477153773, "post_id": 40194132, "comment_id": 67654775, "body": "if they are all line by line, try <code>sed &#39;s&#47;^[^[]*\\[&#47;{&#47;; s&#47;\\]}$&#47;}&#47;&#39; file</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1477153874, "post_id": 40194132, "comment_id": 67654812, "body": "Is that latter valid JSON? Even so though - why not just use a JSON parser?"}, {"owner": {"reputation": 674, "user_id": 2422271, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bce7feabd9e592d79f76d567bf658758?s=128&d=identicon&r=PG", "display_name": "Narwhal", "link": "https://stackoverflow.com/users/2422271/narwhal"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1477153983, "post_id": 40194132, "comment_id": 67654840, "body": "@Sobrique I just want to take out of array so if I import into mongo or rethink they get object ids"}, {"owner": {"reputation": 674, "user_id": 2422271, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bce7feabd9e592d79f76d567bf658758?s=128&d=identicon&r=PG", "display_name": "Narwhal", "link": "https://stackoverflow.com/users/2422271/narwhal"}, "reply_to_user": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1477258848, "post_id": 40194132, "comment_id": 67680662, "body": "@Sundeep YES! thank you"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1477154137, "creation_date": 1477154137, "answer_id": 40194501, "question_id": 40194132, "link": "https://stackoverflow.com/questions/40194132/how-to-replace-pattern-range-using-awk-or-sed/40194501#40194501", "title": "How to replace pattern range using awk or sed", "body": "<p>Something like this will do the trick I think:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse JSON;\nuse Data::Dumper;\n\nmy $json_str =\n  '{\"foods\":[{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, \u00bd cup, 6 spears\",\"food\":\"Asparagus\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, \u00bd cup\",\"food\":\"Beans, green\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, \u00bd cup cooked\",\"food\":\"Bok choy/Chinese cabbage (Choi sum)\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, \u00bd cup\",\"food\":\"Broccoli\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, \u00bd cup, 4 sprouts\",\"food\":\"Brussels sprouts\"},{\"fgid\":\"vf\",\"fgcat_id\":\"2\",\"srvg_sz\":\"125 mL, \u00bd cup, 1 large\",\"food\":\"Carrots\"}]}';\n\nmy $json_obj = from_json($json_str);\nprint Dumper \\$json_obj;\nmy $json_arr = $json_obj -&gt; {foods}; \nprint to_json ( $json_arr, { pretty =&gt; 1 } );\n</code></pre>\n\n<p>I'm actually fairly sure your second example isn't actually valid JSON, as you can't do a 'sort of array' without using <code>[]</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 674, "user_id": 2422271, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bce7feabd9e592d79f76d567bf658758?s=128&d=identicon&r=PG", "display_name": "Narwhal", "link": "https://stackoverflow.com/users/2422271/narwhal"}, "edited": false, "score": 0, "creation_date": 1477258772, "post_id": 40207848, "comment_id": 67680645, "body": "&quot;unterminated substitute pattern&quot;. I am using OSX if that matters."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1477325915, "post_id": 40207848, "comment_id": 67709511, "body": "Although this code may help to solve the problem, it doesn&#39;t explain <i>why</i> and/or <i>how</i> it answers the question. Providing this additional context  would significantly improve its long-term educational value. Please <a href=\"https://stackoverflow.com/posts/40207848/edit\">edit</a> your answer to add explanation, including what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 2682, "user_id": 6404949, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-ksf1VmNZnPA/AAAAAAAAAAI/AAAAAAAAExQ/uleAWJ-xbJg/photo.jpg?sz=128", "display_name": "VIPIN KUMAR", "link": "https://stackoverflow.com/users/6404949/vipin-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1477336700, "last_edit_date": 1477336700, "creation_date": 1477257039, "answer_id": 40207848, "question_id": 40194132, "link": "https://stackoverflow.com/questions/40194132/how-to-replace-pattern-range-using-awk-or-sed/40207848#40207848", "title": "How to replace pattern range using awk or sed", "body": "<p>try this - </p>\n\n<pre><code>sed -e '1s/{/{{/' -e '$s/\\(.*\\)]/\\1/'\n</code></pre>\n\n<p>Below is the explanation:\n-e is used to use multiple sed operation \n1s is to select first line\n$s is to select last line\n(.*)]/\\1is to replace last occurrence of [.</p>\n"}], "owner": {"reputation": 674, "user_id": 2422271, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/bce7feabd9e592d79f76d567bf658758?s=128&d=identicon&r=PG", "display_name": "Narwhal", "link": "https://stackoverflow.com/users/2422271/narwhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477336700, "creation_date": 1477151910, "question_id": 40194132, "link": "https://stackoverflow.com/questions/40194132/how-to-replace-pattern-range-using-awk-or-sed", "title": "How to replace pattern range using awk or sed", "body": "<p>Some people format their JSON files where all the main data elements are inside an array. I want to promote the array elements to be json objects.</p>\n\n<p>In other words ... I want to take any generic text file like this:</p>\n\n<blockquote>\n  <p>{\"foods\":[{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup, 6 spears\",\"food\":\"Asparagus\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup\",\"food\":\"Beans, green\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup cooked\",\"food\":\"Bok choy/Chinese cabbage (Choi sum)\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup\",\"food\":\"Broccoli\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup, 4 sprouts\",\"food\":\"Brussels sprouts\"},{\"fgid\":\"vf\",\"fgcat_id\":\"2\",\"srvg_sz\":\"125 mL, &frac12; cup, 1 large\",\"food\":\"Carrots\"}]}</p>\n</blockquote>\n\n<p>and find replace the range of text from the <strong>first \"{\"</strong> to the <strong>first \"[\"</strong> and just replace it with \"{{\", and (in a separate command?) at the end replace the \"]\" so that it looks like this:</p>\n\n<blockquote>\n  <p>{{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup, 6 spears\",\"food\":\"Asparagus\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup\",\"food\":\"Beans, green\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup cooked\",\"food\":\"Bok choy/Chinese cabbage (Choi sum)\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup\",\"food\":\"Broccoli\"},{\"fgid\":\"vf\",\"fgcat_id\":\"1\",\"srvg_sz\":\"125 mL, &frac12; cup, 4 sprouts\",\"food\":\"Brussels sprouts\"},{\"fgid\":\"vf\",\"fgcat_id\":\"2\",\"srvg_sz\":\"125 mL, &frac12; cup, 1 large\",\"food\":\"Carrots\"}}</p>\n</blockquote>\n\n<p>But I would like this to be for any similar file so I don't know the length of the \"foods\" text (or sometimes there are other elements before the array that I also want to wipe out before the first \"[\" starts). This would help me deal with Open Data from the Canadian government as all the JSON is in one object in an array. Thank you. I would be happy to use either sed or awk.</p>\n"}, {"tags": ["perl", "loops", "factorial"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1477149659, "post_id": 40193661, "comment_id": 67653470, "body": "Needs a <code>chomp</code>, and <code>==</code> is a numeric comparison - you probably want <code>eq</code>"}, {"owner": {"reputation": 35, "user_id": 7050573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f66e9486d840be7ef68987ea5ea7b40?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan B", "link": "https://stackoverflow.com/users/7050573/ryan-b"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1477153170, "post_id": 40193661, "comment_id": 67654563, "body": "When I run it, it immediately closes itself, despite <code>system(&quot;pause&quot;);</code> Do you know why that would happen by looking at the code?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1477153323, "post_id": 40193661, "comment_id": 67654617, "body": "When I try your very code then I get <code>Scalar found where operator expected at err.pl line 15, near &quot;$num $num&quot; \t(Missing operator before $num?) Backslash found where operator expected at err.pl line 18, near &quot;$fact\\&quot; \t(Missing operator before \\?) syntax error at err.pl line 5, near &quot;while $decision &quot; syntax error at err.pl line 15, near &quot;$num $num &quot; Execution of err.pl aborted due to compilation errors.</code>, i.e. Perl doesn&#39;t even get the chance to consider your <code>system(&quot;pause&quot;)</code> line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477206114, "post_id": 40193661, "comment_id": 67665926, "body": "As previously mentioned <code>Enter a positive # more than 0:</code> should be <code>Enter a non-negative integer:</code>. Zero is a perfectly <a href=\"https://en.wikipedia.org/wiki/Factorial\" rel=\"nofollow noreferrer\">valid</a> input, and you don&#39;t need to change anything else for it to work!"}], "answers": [{"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 0, "last_activity_date": 1477209448, "last_edit_date": 1477209448, "creation_date": 1477153152, "answer_id": 40194341, "question_id": 40193661, "link": "https://stackoverflow.com/questions/40193661/perl-trying-to-use-a-while-loop-to-ask-the-user-if-they-want-to-do-that-again/40194341#40194341", "title": "perl - Trying to use a while loop to ask the user if they want to do that again", "body": "<p>Always add <code>use warnings</code> and <code>use strict</code> to the beginning of your program. \nThere are a number of typos in your code that would have been caught by this. </p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\n\nprint \"Welcome! Would you like to calculate a factorial? Enter 'Y' or 'N': \";\n\nmy $answer = &lt;STDIN&gt;;\nchomp($answer);\n\nwhile($answer =~ /^[Yy]$/){\n    my $fact = 1;\n    print\"Enter a positive number greater than 0: \";\n\n    my $num = &lt;STDIN&gt;;\n    chomp($num);\n    my $number_for_printing = $num;\n\n    while($num &gt; 0){\n        $fact = $fact * $num;\n        $num--;\n    }\n    print \"The factorial of $number_for_printing is: $fact\\n\";\n\n    print\"Calculate another factorial? Enter 'Y' or 'N': \";\n    $answer = &lt;STDIN&gt;;\n    chomp($answer);\n}\n\nprint \"Goodbye!\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477206266, "post_id": 40194342, "comment_id": 67665954, "body": "<code>sleep(5)</code> is not a suitable replacement for <code>system(&quot;pause&quot;)</code>. Besides, there really isn&#39;t need for either with this program."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477206722, "post_id": 40194342, "comment_id": 67666041, "body": "Tip: The standard is to use lower-case letters in the prompt, except for the default. that would make the prompt <code>y&#47;N</code>. Also, one should accept both the lower-case and upper-case inputs here, so <code>$decision eq &#39;Y&#39;</code> should be <code>fc($decision) eq &#39;y&#39;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477206915, "post_id": 40194342, "comment_id": 67666078, "body": "Tip: <code>--$num;</code> would be an alternative to <code>$num  = $num - 1;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477209616, "post_id": 40194342, "comment_id": 67666596, "body": "Tip: <code>while ( $num &gt;= 2 )</code> would be a little more clear than <code>while ( $num &gt; 1 )</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477231960, "post_id": 40194342, "comment_id": 67672308, "body": "@ikegami All your comments are perfectly valid. Indeed, there is room for improvement. I just wanted to give an answer with as little differences to the OP as possible. I presume the <code>sleep</code> or <code>pause</code> should only prevent Windows from immediately closing the window when the script is double-clicked, so that one can see its output."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 4, "last_activity_date": 1477153154, "creation_date": 1477153154, "answer_id": 40194342, "question_id": 40193661, "link": "https://stackoverflow.com/questions/40193661/perl-trying-to-use-a-while-loop-to-ask-the-user-if-they-want-to-do-that-again/40194342#40194342", "title": "perl - Trying to use a while loop to ask the user if they want to do that again", "body": "<p>Your program is <em>almost</em> right, just a few issues:</p>\n\n<ol>\n<li><strong>Please get used to always add <code>use strict;</code> and <code>use warnings;</code> to your scripts.</strong> They will\n(beyond other things) force you to declare all the variables you use (with <code>my $num=\u2026;</code>)\nand warn you about common errors (like typos). Some people consider it a bug that \n<code>use strict;</code> and <code>use warnings;</code> aren't turned on by default.</li>\n<li>When reading a line from STDIN (or some other filehandle) the read line will contain the\ntrailing newline character \"\\n\". For your comparison to work you must get rid of that using\nthe <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow\"><code>chomp</code></a> function.</li>\n<li>There are two different sets of comparison operators in Perl: one for strings and one for numbers.\nNumbers are compared with <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, and <code>!=</code>. For strings you must use\n<code>lt</code> (less-than), <code>gt</code>, <code>le</code> (less-or-equal), <code>ge</code>, <code>eq</code>, and <code>ne</code>. If you use one of the number\noperators on strings Perl will try to interpret your string as a number, so <code>$decision == \"Y\"</code>\nwould check whether <code>$decision</code> is <code>0</code>. If you had <code>use warnings;</code> Perl would have noticed you.\nUse <code>$decision eq \"Y\"</code> instead.</li>\n<li>The outer <code>while</code> loop had a trailing <code>;</code> just after the comparison which will give you an endless\nloop or a no-op (depending on the content of <code>$decision</code>). </li>\n<li>You forgot the <code>=</code> in <code>$num  = $num - 1;</code>.</li>\n<li>You forgot the quotes <code>\"</code> around <code>print \"$fact\\n\";</code></li>\n<li><code>system(\"pause\")</code> only works on Windows where <code>pause</code> is an external command. On Linux (where\nI just tested) there is no such command and <code>system(\"pause\")</code> fails with <code>command not found</code>.\nI replaced it with <code>sleep(5);</code> which simply waits 5 seconds.</li>\n</ol>\n\n<p>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nprint \"Welcome! Would you like to calculate a factorial? Y/N\\n\";\n\nmy $decision = &lt;STDIN&gt;;\nchomp($decision);    # remove trailing \"\\n\" from $decision\n\nwhile ( $decision eq 'Y' ) {\n    print \"Enter a positive # more than 0: \\n\";\n\n    my $num = &lt;STDIN&gt;;\n    chomp($num);\n    my $fact = 1;\n\n    while ( $num &gt; 1 ) {\n        $fact = $fact * $num;\n        $num  = $num - 1;\n    }\n\n    print \"$fact\\n\";\n    print \"Calculate another factorial? Y/N\\n\";\n    $decision = &lt;STDIN&gt;;\n    chomp($decision);\n}\nprint \"ok.\\n\";\n\nsleep(5);    # wait 5 seconds\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7050573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f66e9486d840be7ef68987ea5ea7b40?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan B", "link": "https://stackoverflow.com/users/7050573/ryan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 40194342, "answer_count": 2, "score": 0, "last_activity_date": 1477209448, "creation_date": 1477149044, "question_id": 40193661, "link": "https://stackoverflow.com/questions/40193661/perl-trying-to-use-a-while-loop-to-ask-the-user-if-they-want-to-do-that-again", "title": "perl - Trying to use a while loop to ask the user if they want to do that again", "body": "<p>(New to perl)\nI have a small perl program that calculates factorials. I'd like to use a while loop so that after the user gets a result, they will be asked \"Calculate another factorial? Y/N\" and have Y run the code again &amp; have N end the program.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>print\"Welcome! Would you like to calculate a factorial? Y/N\\n\";\n\n$decision = &lt;STDIN&gt;;\n\nwhile $decision == \"Y\";\n{\n    print\"Enter a positive # more than 0: \\n\";\n\n    $num = &lt;STDIN&gt;;\n    $fact = 1;\n\n    while($num&gt;1)\n    {\n        $fact = $fact * $num;\n        $num $num - 1;\n    }\n\n    print $fact\\n;\n    print\"Calculate another factorial? Y/N\\n\";\n    $decision = &lt;STDIN&gt;;\n}\nsystem(\"pause\");\n</code></pre>\n\n<p>What's giving me trouble is where to put the while loop and how to make the Y/N option work.  I'm also unclear about <code>system(\"pause\")</code> and <code>sleep</code> functions. I do know that <code>system(\"pause\")</code> makes my programs work though.</p>\n"}, {"tags": ["perl", "fork"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1477129991, "post_id": 40190657, "comment_id": 67647815, "body": "After the <code>if-else</code> both parent and child continue, so they both go for the second iteration. During which you fork again. Print something (to screen) right after <code>foreach</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477189177, "post_id": 40190657, "comment_id": 67663577, "body": "A comment. This is fun and useful. But it comes with things that one must know (ang with gotchas) and I suggest careful study of literature along with play. Some sources: <a href=\"http://perldoc.perl.org/functions/fork.html\" rel=\"nofollow noreferrer\">fork</a>, <a href=\"http://perldoc.perl.org/functions/exec.html\" rel=\"nofollow noreferrer\">exec</a>, <a href=\"http://perldoc.perl.org/functions/wait.html\" rel=\"nofollow noreferrer\">wait</a>, <a href=\"http://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow noreferrer\">waitpid</a>, and (at least some of) <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a>. Then Perl Cookbook, supposedly &quot;outdated&quot; but also really not -- with <i>plenty</i> of crucial information.  And then there are many modules."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7056627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08a280d6b2c10a8526bde8e4a8ec005?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/7056627/mayur"}, "edited": false, "score": 0, "creation_date": 1477159408, "post_id": 40190720, "comment_id": 67656539, "body": "Thank you for your prompt response! it explains everything"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1477130361, "last_edit_date": 1495541203, "creation_date": 1477130044, "answer_id": 40190720, "question_id": 40190657, "link": "https://stackoverflow.com/questions/40190657/linux-perl-fork-loop-without-exiting-child-process/40190720#40190720", "title": "Linux - Perl fork loop without exiting child process", "body": "<p>It's because the point at which you <code>fork()</code> both processes start at <em>exactly the same point</em>. </p>\n\n<p>So 'child 1' will continue to run, and continue through the loop, and run 'iteration 2'.</p>\n\n<p>So parent will fork twice, child 1 will fork once, and child 2 - because it's the last loop iteration - will not fork at all. </p>\n\n<p>I would suggest you really should consider <a href=\"http://search.cpan.org/~yanick/Parallel-ForkManager-1.19/lib/Parallel/ForkManager.pm\" rel=\"nofollow noreferrer\"><code>Parallel::ForkManager</code></a> because it simplifies this a lot. And also - turn on <code>use strict;</code> and <code>use warnings</code>. And don't use single letter variables, especially not <code>$a</code>. </p>\n\n<p>Here's some <a href=\"https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons\">example code</a> of how to use <code>Parallel::ForkManager</code>. </p>\n\n<p>However to address your problem - sticking a <code>last</code> in the child stanza will cause it to bail out of the loop. </p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7056627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08a280d6b2c10a8526bde8e4a8ec005?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/7056627/mayur"}, "edited": false, "score": 0, "creation_date": 1477159508, "post_id": 40194841, "comment_id": 67656578, "body": "Thanks Andre for your help !"}], "tags": [], "owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "is_accepted": false, "score": 1, "last_activity_date": 1477156261, "creation_date": 1477156261, "answer_id": 40194841, "question_id": 40190657, "link": "https://stackoverflow.com/questions/40190657/linux-perl-fork-loop-without-exiting-child-process/40194841#40194841", "title": "Linux - Perl fork loop without exiting child process", "body": "<p>You are not waiting child process in your loop. There is an good explanation about fork in loops here:</p>\n\n<p><a href=\"http://perlmaven.com/fork\" rel=\"nofollow\">http://perlmaven.com/fork</a></p>\n\n<p>There is a manual too.</p>\n\n<p><a href=\"http://perldoc.perl.org/perlfork.html\" rel=\"nofollow\">http://perldoc.perl.org/perlfork.html</a></p>\n\n<p>Try to be careful about all possibilities in a fork. Treat problems matters! A simple, good and recommended way to implement: </p>\n\n<pre><code>use strict;\nuse warning;\nuse Carp qw/confess/;\nmy $pid = fork;\n\nif(!defined($pid)){\n  confess \"\\nWhy you hates me, O.S.? Why?\\nANSWER: $!\\n\\n\";\n}\nelsif($pid == 0){\n  #Child process. Do something and exit\n}\nelse{\n  #Parent process\n  waitpid $pid,0; \n}\n</code></pre>\n\n<p>There is another features related that is not described in this example. To read more about it, please checkout the <a href=\"http://perldoc.perl.org/perlfork.html\" rel=\"nofollow\">manual</a> linked above</p>\n\n<p>Checkout <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow\">Parallel::ForkManager</a> too! </p>\n"}], "owner": {"reputation": 13, "user_id": 7056627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08a280d6b2c10a8526bde8e4a8ec005?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/7056627/mayur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 40190720, "answer_count": 2, "score": 1, "last_activity_date": 1477156261, "creation_date": 1477129631, "question_id": 40190657, "link": "https://stackoverflow.com/questions/40190657/linux-perl-fork-loop-without-exiting-child-process", "title": "Linux - Perl fork loop without exiting child process", "body": "<p>I'm new to fork concept. I'm trying a simple script with fork loop expecting to execute twice but end up with 3 occurrence. is it because i did not exit the child process ? can you clarify please  </p>\n\n<p>script :</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen(my $fh, '&gt;', 'report.txt');\nprint $fh \"before invoke fork \\n\";\nclose $fh;\n\n@list = (1, 2);\n\nforeach $a (@list){\n\n    if($pid = fork){\n       open(my $fh, '&gt;&gt;', 'report.txt');\n       print $fh \"Parent process! $a $pid\\n\";\n       close $fh;\n\n    }else {\n       open(my $fh, '&gt;&gt;', 'report.txt');\n       print $fh \"Child process $a $pid\\n\";\n       close $fh;\n    }\n}\n</code></pre>\n\n<p>output: </p>\n\n<p>before invoke fork\nMy second report generated by perl 1 1808\nMy second report generated by perl 2 1809\nMy thrid report generated by perl 2 0\nMy thrid report generated by perl 1 0\nMy second report generated by perl 2 1810\nMy thrid report generated by perl 2 0</p>\n"}, {"tags": ["perl", "deadlock"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1477131449, "post_id": 40189625, "comment_id": 67648198, "body": "Seems like the pipe capacity is limited to 64K, see <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow noreferrer\">pipe(7)</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477172002, "post_id": 40189625, "comment_id": 67660405, "body": "I don&#39;t know whether the &quot;<i>capacity</i>&quot; may be related to some kind of buffering? The <code>setvbuf</code> from <code>IO::Handle</code> can change buffer sizes.  Unfortunately I can&#39;t test whether it would help with this since it is &quot;<i>not implemented on this architecture</i>&quot;.   Btw, for me it happens between 65K and 66K. Running on CentOS 7, v5.16."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477186326, "post_id": 40189625, "comment_id": 67663140, "body": "The deadlock has nothing to do with the use of buffering. Smaller pipes would still deadlock. In fact, they would do so sooner."}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 4, "last_activity_date": 1477341598, "last_edit_date": 1477341598, "creation_date": 1477140774, "answer_id": 40192400, "question_id": 40189625, "link": "https://stackoverflow.com/questions/40189625/deadlocks-due-to-buffering-how-does-it-work/40192400#40192400", "title": "Deadlocks due to buffering. How does it work?", "body": "<p>The reason for the deadlock seems to be that the pipes get filled up when writing and no one reads from them. According to <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow\">pipe(7)</a>:</p>\n\n<blockquote>\n  <p>If a process attempts to write to a full pipe (see below), then\n  write(2) blocks until sufficient data has been read from the pipe to\n  allow the write to complete.</p>\n  \n  <p>A pipe has a limited capacity.  If the pipe is full, then a write(2)\n  will block or fail, depending on whether the O_NONBLOCK flag is set.\n  Different implementations have different limits for the pipe capacity.\n  Applications should not rely on a particular capacity: an application\n  should be designed so that a reading process consumes data as soon as\n  it is available, so that a writing process does not remain blocked.</p>\n  \n  <p>In Linux versions before 2.6.11, the capacity of a pipe was the same\n  as the system page size (e.g., 4096 bytes on i386).  Since Linux\n  2.6.11, the pipe capacity is 65536 bytes.  Since Linux 2.6.35, the default pipe capacity is 65536 bytes</p>\n</blockquote>\n\n<p>Hence, the parent writes a long string to the child's STDIN pipe, the pipe gets filled up, which causes the parent to block. At the same time the child is writing a long string to parents reader pipe, this also gets filled up and the child blocks. So the child is waiting for the parent to read from its reader pipe, while the parent is waiting for the child to read from its STDIN pipe. A so-called deadlock.</p>\n\n<p>I tried for fun to solve this by using <code>select</code>, <code>fcntl</code>, <code>sysread</code> and <code>syswrite</code>. Since <code>syswrite</code> will block if we try to write more than the capacity of the pipe, I used <code>fcntl</code> to make the writer handle non blocking. In that case, <code>syswrite</code> will write as much as possible to the pipe, and then return immediately with the number of bytes it actually wrote. </p>\n\n<p>Note: only <code>parent.pl</code> needs to be changed (which is also desired, since we should not assume to have access to the child's source). Here is \nthe modified <code>parent.pl</code> that will prevent the deadlock:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse Errno qw( EAGAIN );\nuse Fcntl;\nuse IO::Select;\nuse IPC::Open2;\n\nuse constant READ_BUF_SIZE =&gt; 8192;\nuse constant WRITE_BUF_SIZE =&gt; 8192;\n\nmy $test_size = 80_000; # How many bytes to write?\nmy $pid = open2( my $reader, my $writer, 'child.pl' );\n\nmake_filehandle_non_blocking( $writer );\n\nmy $long_string = '0123456789' x ($test_size / 10);\nprintf \"Parent: writing long string ( length: %d )\\n\", length $long_string;\nmy $sel_writers = IO::Select-&gt;new( $writer );\nmy $sel_readers = IO::Select-&gt;new( $reader );\nmy $read_offset = 0;\nmy $write_offset = 0;\nmy $child_output = '';\nwhile (1) {\n    last if $sel_readers-&gt;count() == 0 &amp;&amp; $sel_writers-&gt;count() == 0;\n    my @sel_result = IO::Select::select( $sel_readers, $sel_writers, undef );\n    my @read_ready = @{ $sel_result[0] };\n    my @write_ready = @{ $sel_result[1] };\n    if ( @write_ready ) {\n        my $bytes_written = syswrite $writer, $long_string, WRITE_BUF_SIZE, $write_offset;\n        if ( !defined $bytes_written ) {\n            die \"syswrite failed: $!\" if $! != EAGAIN;\n            $bytes_written = 0;\n        }\n        $write_offset += $bytes_written;\n        if ( $write_offset &gt;= length $long_string ) {\n            $sel_writers-&gt;remove( $writer );\n            close $writer;\n        }\n    }\n    if ( @read_ready ) {\n        my $bytes_read = sysread $reader, $child_output, READ_BUF_SIZE, $read_offset;\n        if ( !defined $bytes_read ) {\n            die \"sysread failed: $!\" if $! != EAGAIN;\n            $bytes_read = 0;\n        }\n        elsif ( $bytes_read == 0 ) {\n            $sel_readers-&gt;remove( $reader );\n            close $reader;\n        }\n        $read_offset += $bytes_read;\n    }\n}\nprintf \"Parent: Got output with length %d..\\n\", length $child_output;\nsay \"Parent: Reaping child..\";\nwaitpid( $pid, 0 );\nmy $child_exit_status = $? &gt;&gt; 8;\nsay \"Parent: Child exited with status: $child_exit_status\";\n\nsub make_filehandle_non_blocking {\n    my ( $fh ) = @_;\n\n    my $flags = fcntl $fh, F_GETFL, 0\n      or die \"Couldn't get flags for file handle : $!\\n\";\n    fcntl $fh, F_SETFL, $flags | O_NONBLOCK\n      or die \"Couldn't set flags for file handle: $!\\n\";\n\n}\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 4, "accepted_answer_id": 40192400, "answer_count": 1, "score": 7, "last_activity_date": 1477341598, "creation_date": 1477122319, "last_edit_date": 1495535248, "question_id": 40189625, "link": "https://stackoverflow.com/questions/40189625/deadlocks-due-to-buffering-how-does-it-work", "title": "Deadlocks due to buffering. How does it work?", "body": "<p>The following question is a response to a comment about deadlocking in <a href=\"https://stackoverflow.com/a/40173603/2173773\">this</a> answer. I am curious how deadlocks come about, so I created a test program: There is a parent process that writes a lot of data to the childs STDIN, whereas the child also writes a lot of data to the parent's reader handle. It turns out  that there will be a deadlock if the data size exceeds 80K (Ubuntu 16.04): </p>\n\n<p><strong>parent.pl</strong>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse IPC::Open2;\n\nmy $test_size = 80_000; # How many bytes to write?\nmy $pid = open2( my $reader, my $writer, 'child.pl' );\n\nmy $long_string = '0123456789' x ($test_size / 10);\nprintf \"Parent: writing long string ( length: %d )\\n\", length $long_string;\nprint $writer $long_string;\nclose $writer;\nsay \"Parent: Trying to read childs ouput..\";\nmy $output = do { local $/; &lt;$reader&gt; };\nprintf \"Parent: Got output with length %d..\\n\", length $output;\nclose $reader;\nsay \"Parent: Reaping child..\";\nwaitpid( $pid, 0 );\nmy $child_exit_status = $? &gt;&gt; 8;\nsay \"Parent: Child exited with status: $child_exit_status\";\n</code></pre>\n\n<p><strong>child.pl</strong>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $test_size = 80_000; # How many bytes to write?\nmy $child_log_filename = 'childlog.txt';\n\nopen ( my $log, '&gt;', $child_log_filename ) or die \"Could not create log file: $!\";\n\nsay $log \"Child is running..\";\n\nmy $long_string = '0123456789' x ($test_size / 10);\nsay $log \"Length of output string: \" . length $long_string;\nsay $long_string;\n\nmy $input = do { local $/; &lt;STDIN&gt; };\nsay $log \"Length of input string: \" . length $input;\nexit 2;\n</code></pre>\n\n<p>Why does this program deadlock?</p>\n"}, {"tags": ["regex", "perl", "shell"], "comments": [{"owner": {"reputation": 33452, "user_id": 296452, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/15ba69c4116f6646b861202252d953ab?s=128&d=identicon&r=PG", "display_name": "Andreas Wederbrand", "link": "https://stackoverflow.com/users/296452/andreas-wederbrand"}, "edited": false, "score": 1, "creation_date": 1477082342, "post_id": 40185080, "comment_id": 67637730, "body": "how does the input file look?"}, {"owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1477082530, "post_id": 40185080, "comment_id": 67637813, "body": "@maria This information should go into the question, not into a comment. Just <a href=\"https://stackoverflow.com/posts/40185080/edit\">edit</a> the question."}, {"owner": {"reputation": 37, "user_id": 6143001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4987e0eef989e4c87c3366b0f76dfc20?s=128&d=identicon&r=PG&f=1", "display_name": "maria", "link": "https://stackoverflow.com/users/6143001/maria"}, "edited": false, "score": 0, "creation_date": 1477082877, "post_id": 40185080, "comment_id": 67637975, "body": "ok sorry about that"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477090405, "post_id": 40185080, "comment_id": 67640577, "body": "And the problem is... ?"}, {"owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "edited": false, "score": 0, "creation_date": 1477179653, "post_id": 40185080, "comment_id": 67662041, "body": "Please add expected output."}], "answers": [{"tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": false, "score": 0, "last_activity_date": 1477265061, "last_edit_date": 1477265061, "creation_date": 1477103827, "answer_id": 40187790, "question_id": 40185080, "link": "https://stackoverflow.com/questions/40185080/using-regular-expressions-extracting-data/40187790#40187790", "title": "Using regular expressions, extracting data", "body": "<p>It looks like your input data is composed of <strong>fixed-width columns</strong>, which means you need to base your solution on <strong>column (character) positions</strong> rather than fields delineated by separators:</p>\n\n<pre><code>$ tail +5 data.txt | cut -c 12-15,16-20,47-48\n\nBIOL 310  W\nCIBI 300  B\nCIBI 300  D\nCIBI 300  W\nQUIM 300  F\nQUIM 300  F\nCCOM 303  F\n</code></pre>\n\n<ul>\n<li><code>tail +5</code> skips the header lines</li>\n<li><code>cut -c 12-15,16-20,47-48</code> specifies the strings to extract as a list of column-position ranges; in the case of the 2nd and 3rd output fields, this includes the space character preceding the field.</li>\n</ul>\n\n<hr>\n\n<p>Original answer, before the requirements were clarified:</p>\n\n<p>In case you simply want to ignore the header lines, a simple fix would be:</p>\n\n<pre><code>awk 'NF &gt;= 11 { print $1, $2 }' data.txt\n</code></pre>\n\n<p>It looks like all data rows have (at least) 11 fields, so <code>NF &gt;= 11</code> ensures that only data rows are processed, and <code>print $1, $2</code> simply prints the first 2 whitespace-separated fields, separated by <code>awk</code>'s default output separator (<code>OFS</code>), which is a space.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1477326827, "post_id": 40208603, "comment_id": 67710047, "body": "Although this code may help to solve the problem, it doesn&#39;t explain <i>why</i> and/or <i>how</i> it answers the question. Providing this additional context  would significantly improve its long-term educational value. Please <a href=\"https://stackoverflow.com/posts/40208603/edit\">edit</a> your answer to add explanation, including what limitations and assumptions apply."}, {"owner": {"reputation": 37, "user_id": 6143001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4987e0eef989e4c87c3366b0f76dfc20?s=128&d=identicon&r=PG&f=1", "display_name": "maria", "link": "https://stackoverflow.com/users/6143001/maria"}, "edited": false, "score": 0, "creation_date": 1477331672, "post_id": 40208603, "comment_id": 67712565, "body": "Can you also tell how can I negate W and F from  the 5th colummn"}, {"owner": {"reputation": 37, "user_id": 6143001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4987e0eef989e4c87c3366b0f76dfc20?s=128&d=identicon&r=PG&f=1", "display_name": "maria", "link": "https://stackoverflow.com/users/6143001/maria"}, "edited": false, "score": 0, "creation_date": 1477331857, "post_id": 40208603, "comment_id": 67712661, "body": "I just want to display ABCD not W F"}, {"owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "edited": false, "score": 0, "creation_date": 1477339011, "post_id": 40208603, "comment_id": 67716453, "body": "If you mean the column placed under E in PLACE I can&#39;t see any A or C."}, {"owner": {"reputation": 37, "user_id": 6143001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4987e0eef989e4c87c3366b0f76dfc20?s=128&d=identicon&r=PG&f=1", "display_name": "maria", "link": "https://stackoverflow.com/users/6143001/maria"}, "edited": false, "score": 0, "creation_date": 1477358005, "post_id": 40208603, "comment_id": 67722810, "body": "Theres a B and D. If you can help that will be great"}, {"owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "edited": false, "score": 0, "creation_date": 1477435346, "post_id": 40208603, "comment_id": 67764424, "body": "awk &#39;NR&gt;4{print $1,$2&quot;\\t&quot;,$(NF-5)}&#39; file | awk &#39;$3!~/W|F/&#39; CIBI 300\t B CIBI 300\t D Not much but this is all I can produce."}], "tags": [], "owner": {"reputation": 1371, "user_id": 5056806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfa01ad122fc89b571651ffbbc34ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Claes Wikner", "link": "https://stackoverflow.com/users/5056806/claes-wikner"}, "is_accepted": false, "score": 0, "last_activity_date": 1477326307, "last_edit_date": 1477326307, "creation_date": 1477263227, "answer_id": 40208603, "question_id": 40185080, "link": "https://stackoverflow.com/questions/40185080/using-regular-expressions-extracting-data/40208603#40208603", "title": "Using regular expressions, extracting data", "body": "<pre><code>awk 'NR&gt;4{print $1,$2\"\\t\",$(NF-5)}' file\n\nBIOL 310     W\nCIBI 300     B\nCIBI 300     D\nCIBI 300     W\nQUIM 300     F\nQUIM 300     F\nCCOM 303     F\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6143001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4987e0eef989e4c87c3366b0f76dfc20?s=128&d=identicon&r=PG&f=1", "display_name": "maria", "link": "https://stackoverflow.com/users/6143001/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1477376378, "creation_date": 1477082247, "last_edit_date": 1477326758, "question_id": 40185080, "link": "https://stackoverflow.com/questions/40185080/using-regular-expressions-extracting-data", "title": "Using regular expressions, extracting data", "body": "<p>Hi I am using shell command line and trying to extract course first two column and the grade column from a file. </p>\n\n<p>I am using</p>\n\n<pre><code> cat data.txt | cut -d ' ' -f 1,2\n</code></pre>\n\n<p>By this code I am also getting (001234), Student Id and some other subscripts in my output which I don't need . How can I only get 3-4 letter words from these column as that's what I believe should be done.\nHeres the input file</p>\n\n<pre><code>                                          ATT    ERN  CrGPA    Qpts\n                                          ---    ---  -----    ----\n    *     Student Id -\n                (001234) UNIV OF SOME COOL PLACE\n           BIOL 310  GENERAL BIOLOGY  BIOS 101 W       3.00    0.00                   0.00    0.00  20081\n           CIBI 300  FUND OF BIOL I   BIOS 110 B       3.00   3.00   3.00    9.00  20072\n           CIBI 300  FUND OF BIOL II  BIOS 120 D       3.00   3.00   3.00    3.00  20082\n           CIBI 300  FUND OF BIOL II  BIOS 120 W       3.00   0.00   0.00    0.00  20102\n           QUIM 300  GEN CHEMISTRY I  CHEM 121 F       3.00   0.00   3.00    0.00  20091\n           QUIM 300  GEN CHEMISTRY I CHEM 121L F       1.00   0.00   1.00    0.00  20091\n           CSC 303  FUNDMTL STRUCTU   CSC100+ F       3.00   0.00   3.00    0.00  20091\n</code></pre>\n\n<p>result should be</p>\n\n<pre><code>  BIOL 310     W\n  CIBI 300     B\n  CIBI 300     D\n  CIBI 300     W \n  So on..\n</code></pre>\n\n<p>Note CSC in column 1 is 3 letter</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 4, "creation_date": 1477081438, "post_id": 40184879, "comment_id": 67637331, "body": "Change your array assignment to:  <code>my @techarray = (&#39;json.jquery..&#39;, &#39;php.linux.&#39;);</code>"}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1477081941, "post_id": 40184879, "comment_id": 67637537, "body": "@techarray is an output from &quot;split&quot; method."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1477082105, "post_id": 40184879, "comment_id": 67637617, "body": "If your problem can&#39;t be reproduced as written in the question, then you need to create a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477082325, "post_id": 40184879, "comment_id": 67637717, "body": "Can you explain what that means, <i><code>@techarray</code> is an output from &quot;split&quot; method</i> ?"}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477082510, "post_id": 40184879, "comment_id": 67637800, "body": "@zdim.  I just updated my question for the Split method."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477082663, "post_id": 40184879, "comment_id": 67637875, "body": "What you have now, after the edit, <i>should</i> work just as it stands.  The <code>split</code> returns a list and you feed it into the array <code>@techarray</code>.  All good. What is commented out now, <code>@techarray = [ ... ]</code> was wrong."}, {"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477083098, "post_id": 40184879, "comment_id": 67638081, "body": "Hey @zdim, I am sorry. I again updated my question."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477083513, "post_id": 40184879, "comment_id": 67638269, "body": "Inside <code>check_val</code>, <code>@techarray</code> does not contain what you think it does."}], "answers": [{"comments": [{"owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "edited": false, "score": 0, "creation_date": 1477082345, "post_id": 40185006, "comment_id": 67637732, "body": "Wow... You are right. I just defined an arrayref and then dereferenced and that starts working. :)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477084357, "post_id": 40185006, "comment_id": 67638643, "body": "In your second example, <code>@array</code> would contain everything and <code>$search_id</code> would be <code>undef</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1477086548, "last_edit_date": 1495541799, "creation_date": 1477081939, "answer_id": 40185006, "question_id": 40184879, "link": "https://stackoverflow.com/questions/40184879/perl-find-out-if-x-is-an-element-in-an-array/40185006#40185006", "title": "Perl find out if X is an element in an array", "body": "<p>You are using an <em>anonymous array</em> <code>[ ... ]</code> there, which as a scalar (reference) is then assigned to <code>@techarray</code>, as its only element. It is like <code>@arr = 'a';</code>. An array is defined by <code>( ... )</code>.</p>\n\n<p>A remedy is to either define an array, <code>my @techarray = ( ... )</code>, or to properly define an arrayref and then dereference when you search</p>\n\n<pre><code>my $rtecharray = [ .... ];\nif (grep {$_ eq $search_id} @$rtecharray) {\n    # ....\n}\n</code></pre>\n\n<p>For all kinds of list manipulations have a look at <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> and <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::MoreUtils</a>.</p>\n\n<hr>\n\n<p><em>Updated to changes in the question, as the sub was added</em></p>\n\n<p>This has something else, which is more instructive.</p>\n\n<p>As you pass an array to a function it is passed as a flat list of its elements. Then in the function the first <code>shift</code> picks up the first element, \nand then the second <code>shift</code> picks up the second one. </p>\n\n<p>Then the search is over the array with only <code>'json.jquery..'</code> element, for <code>'php.linux.'</code> string. </p>\n\n<p>Instead, you can pass a reference, </p>\n\n<pre><code>check_val(\\@techarray, $search_id);\n</code></pre>\n\n<p>and use it as such in the function.</p>\n\n<hr>\n\n<p><strong>Note</strong> that if you pass the array and get arguments in the function as</p>\n\n<pre><code>my (@array, $search_id) = @_;  # WRONG\n</code></pre>\n\n<p>you are in fact <em>getting all of <code>@_</code> into <code>@array</code></em>.</p>\n\n<p>See, for example, <a href=\"https://stackoverflow.com/questions/39670453/odd-number-of-elements-in-hash-assignment-with-default/39670787#39670787\">this post</a> (passing to function) and <a href=\"https://stackoverflow.com/questions/39502670/perl-subroutine-returning-array-and-str-but-they-are-getting-merged/39502917#39502917\">this post</a> (returning from function).</p>\n\n<p>In general I'd recommend passing lists by reference.</p>\n"}], "owner": {"reputation": 3105, "user_id": 912111, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/u3FQz.jpg?s=128&g=1", "display_name": "Raja", "link": "https://stackoverflow.com/users/912111/raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 40185006, "answer_count": 1, "score": 0, "last_activity_date": 1477086548, "creation_date": 1477081332, "last_edit_date": 1477083062, "question_id": 40184879, "link": "https://stackoverflow.com/questions/40184879/perl-find-out-if-x-is-an-element-in-an-array", "title": "Perl find out if X is an element in an array", "body": "<p>I don't know why small things are too not working for me in Perl. I am sorry for that. </p>\n\n<p>I have been trying it around 2 hrs but i couldn't get the results. </p>\n\n<pre><code>my $technologies = 'json.jquery..,php.linux.';\nmy @techarray = split(',',$technologies);\n\n#my @techarray = [\n#          'json.jquery..',\n#          'php.linux.'\n#        ];\n\nmy $search_id = 'json.jquery..';\n\ncheck_val(@techarray, $search_id);\n</code></pre>\n\n<p>And i am doing a \"if\" to search the above item in array. but it is not working for me.</p>\n\n<pre><code> sub check_val{\n        my @techarray = shift;\n        my $search_id = shift;\n          if (grep {$_ eq $search_id} @techarray) {\n                print \"It is there \\n\";\n            }else{\n                print \"It is not there \\n\";\n            }\n     }\n</code></pre>\n\n<p>Output: It always going to else condition and returns \"It is not there!\" :( </p>\n\n<p>Any idea. Am i done with any stupid mistakes?  </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1477080847, "post_id": 40184706, "comment_id": 67637051, "body": "You need to escape the pipes in the regex: <code>$_ =~ &#47;^&gt;gi\\|(\\d*?)\\|&#47;s</code>"}], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 6878574, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2721dd31ca4fb59a161189cb5c7cca9a?s=128&d=identicon&r=PG&f=1", "display_name": "J0HN_TIT0R", "link": "https://stackoverflow.com/users/6878574/j0hn-tit0r"}, "edited": false, "score": 0, "creation_date": 1477086198, "post_id": 40184863, "comment_id": 67639368, "body": "Thanks man, that was it!  I wasn&#39;t thinking about special characters"}], "tags": [], "owner": {"reputation": 131, "user_id": 3014371, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/675f66ec033d7a56a7ddc5d7e6f9bc12?s=128&d=identicon&r=PG", "display_name": "GWP", "link": "https://stackoverflow.com/users/3014371/gwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1477081258, "creation_date": 1477081258, "answer_id": 40184863, "question_id": 40184706, "link": "https://stackoverflow.com/questions/40184706/having-trouble-capturing-storing-strings-in-perl-regular-expression/40184863#40184863", "title": "Having trouble capturing storing strings in Perl regular expression?", "body": "<p>| means OR in a regex.  Escape it.  (Seems like perl figured out what you \"really\" meant when it was at the end of the capture group and didn't have a 2nd operand)</p>\n"}], "owner": {"reputation": 293, "user_id": 6878574, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2721dd31ca4fb59a161189cb5c7cca9a?s=128&d=identicon&r=PG&f=1", "display_name": "J0HN_TIT0R", "link": "https://stackoverflow.com/users/6878574/j0hn-tit0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1477081258, "creation_date": 1477080509, "question_id": 40184706, "link": "https://stackoverflow.com/questions/40184706/having-trouble-capturing-storing-strings-in-perl-regular-expression", "title": "Having trouble capturing storing strings in Perl regular expression?", "body": "<p>So I've been working around with this problem for a while now.</p>\n\n<p>I have a file with one hundred FASTA sequences arranged like this:</p>\n\n<p>>gi|192567|gb|AAA37417.1| cystic fibrosis transmembrane conductance regulator [Mus musculus]\nMQKSPLEKASFISKLFFSWTTPILRKGYRHHLELSDIYQAPSADSADHLSEKLEREWDREQASKKNPQLIHALRRCFFWRFLFYGILLYLGEVTKAVQPVLLGRIIASYDPENKVERSIAIYLGIGLCLLFIVRTLLLHPAIFGLHRIGMQMRTAMFSLIYKKTLKLSSRVLDKISIGQLVSLLSNNLNKFDEGLALAHFIWIAPLQVTLLMGLLWDLLQFSAFCGLGLLIILVIFQAILGKMMVKYRDQRAAKINERLVITSEIIDNIYSVKAYCWESAMEKMIENLREVELKMTRKAAYMRFFTSSAFFFSGFFVVFLSVLPYTVINGIVLRKIFTTISFCIVLRMSVTRQFPTAVQIWYDSFGMIRKIQDFLQKQEYKVLEYNLMTTGIIMENVTAFWEEGFGELLQKAQQSNGDRKHSSDENNVSFSHLCLVGNPVLKNINLNIEKGEMLAITGSTGLGKTSLLMLILGELEASEGIIKHSGRVSFCSQFSWIMPGTIKENIIFGVSYDEYRYKSVVKACQLQQDITKFAEQDNTVLGEGGVTLSGGQRARISLARAVYKDADLYLLDSPFGYLDVFTEEQVFESCVCKLMANKTRILVTSKMEHLRKADKILILHQGTSYFYGTFSELQSLRPSFSSKLMGYDTFDQFTEERRSSILTETLRRFSVDDSSAPWSKPKQSFRQTGEVGEKRKNSILNSFSSVRKISIVQKTPLCIDGESDDLQEKRLSLVPDSEQGEAALPRSNMIATGPTFPGRRRQSVLDLMTFTPNSGSSNLQRTRTSIRKISLVPQISLNEVDVYSRRLSQDSTLNITEEINEEDLKECFLDDVIKIPPVTTWNTYLRYFTLHKGLLLVLIWCVLVFLVEVAASLFVLWLLKNNPVNSGNNGTKISNSSYVVIITSTSFYYIFYIYVGVADTLLALSLFRGLPLVHTLITASKILHRKMLHSILHAPMSTISKLKAGGILNRFSKDIAILDDFLPLTIFDFIQLVFIVIGAIIVVSALQPYIFLATVPGLVVFILLRAYFLHTAQQLKQLESEGRSPIFTHLVTSLKGLWTLRAFRRQTYFETLFHKALNLHTANWFMYLATLRWFQMRIDMIFVLFFIVVTFISILTTGEGEGTAGIILTLAMNIMSTLQWAVNSSIDTDSLMRSVSRVFKFIDIQTEESMYTQIIKELPREGSSDVLVIKNEHVKKSDIWPSGGEMVVKDLTVKYMDDGNAVLENISFSISPGQRVGLLGRTGSGKSTLLSAFLRMLNIKGDIEIDGVSWNSVTLQEWRKAFGVITQKVFIFSGTFRQNLDPNGKWKDEEIWKVADEVGLKSVIEQFPGQLNFTLVDGGYVLSHGHKQLMCLARSVLSKAKIILLDEPSAHLDPITYQVIRRVLKQAFAGCTVILCEHRIEAMLDCQRFLVIEESNVWQYDSLQALLSEKSIFQQAISSSEKMRFFQGRHSSKHKPRTQITALKEETEEEVQETRL</p>\n\n<p>I've written a subroutine that opens the file, and reads each sequence one at a time.  For each sequence I would like to add both the gi number at the beginning and the long sequence in capital letters as strings to a growing array.  However, I'm having trouble writing a regular expression to store these values.  Here is my current subroutine, which I tweaked to see if I was actually storing the gi number:</p>\n\n<pre><code>sub getFASTA {\n    my ($filename) = @_;\n    my @FASTA_arr;\n    $/ = \"\\n\\n\";\n    open (my $fh, '&lt;', $filename) or\n            die (\"Could not open file: $filename\");\n    while (&lt;$fh&gt;) {\n            chomp $_;\n            $_ =~ /^&gt;gi|(\\d*?)|/s;\n            say \"$1\";\n    }\n    close $fh;\n    #say join(\" \", @FASTA_arr);\n}\n</code></pre>\n\n<p>However, trying to run this returns:</p>\n\n<pre><code>Use of uninitialized value $1 in string at sequenceAlignment.pl line 30, &lt;$fh&gt; chunk 1.\n</code></pre>\n\n<p>This is returned for each sequence, so 100 times in total.</p>\n\n<p>So any idea of what is wrong?  I'm almost certain that it is a problem with the regular expression, because when I changed it to \"$_ =~ /(>gi|)/s;\", it worked correctly, just with 100 \">gi|\"s printing out.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477077914, "post_id": 40184025, "comment_id": 67635604, "body": "There&#39;s no <code>DATA</code> in your code."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477078182, "post_id": 40184025, "comment_id": 67635779, "body": "What should the output be?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477078216, "post_id": 40184025, "comment_id": 67635797, "body": "Can you explain how you arrived at the regex <code>&#47;{(.0?)}&#47;</code>? What is each part meant to do?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477078254, "post_id": 40184025, "comment_id": 67635814, "body": "<code>s&#47;\\{ (\\d+)\\}&#47;sprintf(&#39;{ %#x}&#39;, $1)&#47;ge</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1477078468, "post_id": 40184025, "comment_id": 67635944, "body": "@MattJacob <code>%#x</code> doesn&#39;t work for 0. You need <code>0x%x</code>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477078576, "post_id": 40184025, "comment_id": 67635996, "body": "@melpomene It was a 90% solution ;-)"}, {"owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "edited": false, "score": 0, "creation_date": 1477078796, "post_id": 40184025, "comment_id": 67636092, "body": "Initially i was checking with regex (/{(.*?)}/) this regex able to search all the value inside {} braces but in my case i wanted to go with each value. if the line contain {3} i do not need search and replacement."}, {"owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "edited": false, "score": 0, "creation_date": 1477079047, "post_id": 40184025, "comment_id": 67636217, "body": "output should be {0x00,0x00,0x01,0x02,0x07}"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477079461, "post_id": 40184025, "comment_id": 67636419, "body": "OK, so change the format string to <code>0x%02x</code>. You could at least read the docs for <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>sprintf</code></a> on your own..."}, {"owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477080045, "post_id": 40184025, "comment_id": 67636697, "body": "@MattJacob not working for me please check"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477080082, "post_id": 40184025, "comment_id": 67636715, "body": "Please check what?"}, {"owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1477080498, "post_id": 40184025, "comment_id": 67636902, "body": "@MattJacob Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1477085733, "post_id": 40184585, "comment_id": 67639184, "body": "Preserve existing spaces (without requiring them): <code>s&#47;\\{\\s*\\K(\\d+)(?=\\s*\\})&#47; sprintf(&#39;0x%02x&#39;, $1) &#47;ge</code>"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 0, "last_activity_date": 1477079955, "creation_date": 1477079955, "answer_id": 40184585, "question_id": 40184025, "link": "https://stackoverflow.com/questions/40184025/seach-and-replace-the-value-inside-curely-braces/40184585#40184585", "title": "seach and replace the value inside curely braces", "body": "<p>Save it as <code>script.pl</code> and invoke it as <code>$ perl script.pl input.txt</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n    s/\\{ (\\d+)\\}/sprintf('{ 0x%02x}', $1)/ge;\n    print;\n}\n</code></pre>\n\n<p>The <code>e</code> <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">regex modifier</a> evaluates the right-hand side as an expression.</p>\n"}], "owner": {"reputation": 9, "user_id": 6871400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fb068edfcb50c025923441f565def62?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/6871400/ria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 40184585, "answer_count": 1, "score": -2, "last_activity_date": 1477079955, "creation_date": 1477077494, "last_edit_date": 1477078596, "question_id": 40184025, "link": "https://stackoverflow.com/questions/40184025/seach-and-replace-the-value-inside-curely-braces", "title": "seach and replace the value inside curely braces", "body": "<p>I want to search the value between curly braces for each line in a file\nand replace the corresponding value with \n0x0 (For e.g. 1-->0x01,7-->0x07)</p>\n\n<p>Initially i was checking with regex (/{(.*?)}/) this regex able to search all the value inside {} braces.\ninput Data:</p>\n\n<pre><code> abc_def  xxxx { 0} xxx\n my_new_type new{ 0}    my_new_type \n c++_programming    MY_NPYR{ 1} c++_programming \n cprogramming   ABCCDDDDRRRRTTTT { 2}   cprogramming    \n perlbook   NEW{ 7} xxxxx   \n</code></pre>\n\n<p>code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $file  = 'input.txt';\nopen my $fh, \"&lt;\", $file  or die \"Couldn't open input file: $!\";\nwhile (&lt;$fh&gt;) \n{\n\nif (/{(.0?)}/)\n{\n s/0/0x00/;             \n}\nelsif (/{(.1?)}/)\n{\ns/1/0x01/;            \n}\nelsif (/{(.2?)}/)\n{\n s/2/0x02/;             \n}\nelsif (/{(.7?)}/)\n{\n s/7/0x07/;            \n}\n\n}\n</code></pre>\n\n<p>any help with explanation would be grateful.</p>\n"}, {"tags": ["string", "perl", "debugging"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1477077317, "post_id": 40183692, "comment_id": 67635283, "body": "Whatever it is you&#39;re trying to do, <code>index</code> and <code>substr</code> are almost certainly the wrong tools for the job."}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 0, "last_activity_date": 1477081411, "creation_date": 1477081411, "answer_id": 40184894, "question_id": 40183692, "link": "https://stackoverflow.com/questions/40183692/perl-index-skips-search-value/40184894#40184894", "title": "perl index skips search value", "body": "<p>The problem is in this line:</p>\n\n<p><code>$space = index($ivalue, \" \", $space + $i++);</code></p>\n\n<p>instead of using <code>$i</code>, make that <code>$space + 1</code></p>\n"}], "owner": {"reputation": 760, "user_id": 4231932, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-CHIXIk16xzI/AAAAAAAAAAI/AAAAAAAAAFg/acB7fWSy6jk/photo.jpg?sz=128", "display_name": "Alexander McNulty", "link": "https://stackoverflow.com/users/4231932/alexander-mcnulty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 40184894, "answer_count": 1, "score": -1, "last_activity_date": 1477081411, "creation_date": 1477076240, "question_id": 40183692, "link": "https://stackoverflow.com/questions/40183692/perl-index-skips-search-value", "title": "perl index skips search value", "body": "<p>I am writing a program that is heavily dependent on the perl's index function to take strings. My objective so to break this string into a series of substrings that do not have any spaces.</p>\n\n<p>The problem that I am having is that in the second half of the loop the index function starts skipping spaces.</p>\n\n<p>I am using the test data:</p>\n\n<blockquote>\n  <p>1 12 a 2 5 P Q</p>\n</blockquote>\n\n<p>I am expecting to get: </p>\n\n<blockquote>\n  <p>1, 12, a, 2, 5, P, Q,</p>\n</blockquote>\n\n<p>Instead I get:</p>\n\n<blockquote>\n  <p>1, 12, a, 2 5, P Q,</p>\n</blockquote>\n\n<p>My code follows:</p>\n\n<pre><code>use 5.010;\nuse strict;\nuse warnings;\n\nmy $ivalue = &lt;stdin&gt;;\nchomp($ivalue);\n$ivalue = $ivalue . \" \";\nmy $current;\nmy $space = 0;\nmy $safespace = 0;\nmy $lastspace = 0;\nmy $closestspace = 0;\nmy $i = 0;\n# Test data - 1 12 a 2 5 P Q\nwhile ($space != -1){\n  $space = index($ivalue, \" \", $space + $i++);\n  $closestspace = $space - $lastspace;                      \n  #print $lastspace . \" \" . $space . \" = \" . $closestspace . \"; \";\n  $current = substr($ivalue, $lastspace, $closestspace);\n  #say \"substring = \" . $current;\n  $lastspace = $space + 1;\n}\n</code></pre>\n\n<p>Thanks ahead of time! If anyone has any suggestion on how to improve the way I asked my question or on my code in general those are appreciated as well.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1477071126, "post_id": 40182374, "comment_id": 67632149, "body": "How are you executing <code>@command</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1477075290, "post_id": 40182518, "comment_id": 67634307, "body": "Tip: <code>print {$log} $_ while &lt;$echo&gt;;</code> reduces the memory overhead."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1477074332, "last_edit_date": 1477074332, "creation_date": 1477071603, "answer_id": 40182518, "question_id": 40182374, "link": "https://stackoverflow.com/questions/40182374/perl-is-respecting-as-a-regular-character-rather-an-output-redirection/40182518#40182518", "title": "Perl is respecting &#39;&lt;&#39; as a regular character rather an output redirection", "body": "<p>I assume the full code is:</p>\n\n<pre><code>my @command = ('downloadImage', '-url', $url, '&gt;', $log);\nsystem @command;\n</code></pre>\n\n<p><code>system</code> has two modes. <code>system $command</code> will run <code>$command</code> in the shell.</p>\n\n<pre><code># This will write 'foo' to the file 'bar'\nsystem \"echo foo &gt; bar\";\n</code></pre>\n\n<p><code>system @command</code> is really <code>system $program, @args</code>. It will bypass the shell and run the <code>$program</code> with <code>@args</code>.</p>\n\n<pre><code># This will print 'foo &gt; bar'\nsystem \"echo\", \"foo\", \"&gt;\", \"bar\"\n</code></pre>\n\n<p>So if you want to do output redirection like that you could join @command together.</p>\n\n<pre><code>system join \" \", @command;\n</code></pre>\n\n<p>But that can run into shell quoting issues. It's safer, faster, and more portable to do the redirection yourself in Perl using a <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\">piped open</a>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nopen my $echo, \"-|\", \"echo\", \"foo\";\nopen my $log, \"&gt;\", \"some.log\";\n\nprint {$log} &lt;$echo&gt;;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1477075576, "post_id": 40183130, "comment_id": 67634449, "body": "(I only included IPC::Open3 because it&#39;s bundled with Perl. It&#39;s honestly too low-level for most uses.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1477076167, "last_edit_date": 1477076167, "creation_date": 1477074021, "answer_id": 40183130, "question_id": 40182374, "link": "https://stackoverflow.com/questions/40182374/perl-is-respecting-as-a-regular-character-rather-an-output-redirection/40183130#40183130", "title": "Perl is respecting &#39;&lt;&#39; as a regular character rather an output redirection", "body": "<p>Doing</p>\n\n<pre><code>system('downloadImage', '-url', $url, '&gt;', $log)\n</code></pre>\n\n<p>in Perl is the same as doing</p>\n\n<pre><code>'downloadImage' '-url' \"$url\" '&gt;' \"$log\"\n</code></pre>\n\n<p>in the shell. This executes <code>downloadImage</code> with four arguments, one of which is <code>&gt;</code>. The shell command you were trying to execute is the following:</p>\n\n<pre><code>'downloadImage' '-url' \"$url\" &gt; \"$log\"\n</code></pre>\n\n<p>If you want to execute that shell command, you first need a shell. The following is how you should achieve this:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\n\nmy @cmd = ('downloadImage', '-url', $url);\n\nmy $shell_cmd = shell_quote(@cmd) . ' &gt;' . shell_quote($log);\nsystem($shell_cmd);  # Short for system('/bin/sh', '-c', $shell_cmd);\n</code></pre>\n\n<hr>\n\n<p>However, there are lots of downsides to using a shell. Here are some alternatives:</p>\n\n<pre><code>use IPC::Open3 qw( open3 );\n\nmy @cmd = ('downloadImage', '-url', $url);\n\n{\n   open(local *CHILD_STDIN, '&lt;', '/dev/null')\n      or die(\"Can't open \\\"/dev/null\\\": $!\\n\");\n\n   open(local *CHILD_STDOUT, '&gt;', $log)\n      or die(\"Can't create \\\"$log\\\": $!\\n\");\n\n   my $pid = open3('&lt;&amp;CHILD_STDIN', '&gt;&amp;CHILD_STDOUT', '&gt;&amp;STDERR', @cmd);\n   waitpid($pid, 0);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use IPC::Run3 qw( run3 );\n\nmy @cmd = ('downloadImage', '-url', $url);\n\nrun3(\\@cmd, \\undef, $log);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use IPC::Run qw( run );\n\nmy @cmd = ('downloadImage', '-url', $url);\n\nrun(\\@cmd, '&lt;', '/dev/null', '&gt;', $log);\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 3569927, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/469b6e395aa38f051b8e449aa6ac1061?s=128&d=identicon&r=PG&f=1", "display_name": "Ria", "link": "https://stackoverflow.com/users/3569927/ria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1477085566, "creation_date": 1477070968, "last_edit_date": 1477074297, "question_id": 40182374, "link": "https://stackoverflow.com/questions/40182374/perl-is-respecting-as-a-regular-character-rather-an-output-redirection", "title": "Perl is respecting &#39;&lt;&#39; as a regular character rather an output redirection", "body": "<p>I would like some help figuring this particular coding problem. </p>\n\n<p>I have a perl script (#1) that calls another perl script(#2). In #1, I call #2 to also redirect its output to a log file. like so</p>\n\n<pre><code>my @command = ('downloadImage', '-url', $url, '&gt;', $log);\n</code></pre>\n\n<p>this commands runs fine when it runs on the terminal. \nDo I have to use some other kind of special character to tell perl that > is output redirection not just some regular character?</p>\n\n<p>I run it as:    </p>\n\n<pre><code>system(@command);\n</code></pre>\n"}, {"tags": ["regex", "perl", "ubuntu", "replace"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1477068514, "post_id": 40181727, "comment_id": 67630824, "body": "the extraction must have altered it. e.g.: check line endings."}, {"owner": {"reputation": 121, "user_id": 6949642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d48ca19a69ef5cb4ff0e2f36111b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Stygies", "link": "https://stackoverflow.com/users/6949642/stygies"}, "edited": false, "score": 0, "creation_date": 1477069243, "post_id": 40181727, "comment_id": 67631196, "body": "is the -p flag needed, given it&#39;s in-place?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 121, "user_id": 6949642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d48ca19a69ef5cb4ff0e2f36111b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Stygies", "link": "https://stackoverflow.com/users/6949642/stygies"}, "edited": false, "score": 1, "creation_date": 1477069560, "post_id": 40181727, "comment_id": 67631365, "body": "@Stygies yes, without it there&#39;s no implicit loop and no implicit print"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1477070625, "post_id": 40181727, "comment_id": 67631887, "body": "Sorry for my dumb question but: did you wait long enough? I mean did the command return? Processing &#189; GB of data can take quite a while."}], "answers": [{"comments": [{"owner": {"reputation": 1978, "user_id": 671644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8PAtl.jpg?s=128&g=1", "display_name": "Marco Fedele", "link": "https://stackoverflow.com/users/671644/marco-fedele"}, "edited": false, "score": 1, "creation_date": 1477469468, "post_id": 40189077, "comment_id": 67775219, "body": "The csv was an export from a db of an old server. There is a field that contains <i>AS100</i> or is empty. After some unsuccessful imports, we find out that some of these values has a carriage return, and that it was impossible to manage this issue during the export phase"}], "tags": [], "owner": {"reputation": 76, "user_id": 882529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d78eb70f74ad1dde6892e5798bac3d1?s=128&d=identicon&r=PG", "display_name": "Magnus Bodin", "link": "https://stackoverflow.com/users/882529/magnus-bodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1477118055, "creation_date": 1477118055, "answer_id": 40189077, "question_id": 40181727, "link": "https://stackoverflow.com/questions/40181727/linux-console-perl-replace-not-working-on-large-file/40189077#40189077", "title": "Linux console perl replace not working on large file", "body": "<p>If you have room, try to do this instead to look at the substitution as it is done to another file:</p>\n\n<pre><code>    perl -pe 's/AS100\\n/AS100/g' test.csv | tee &gt; test2.csv\n</code></pre>\n\n<p>My question is though, is it only the rows ending with AS100 that needs the newline removal?</p>\n"}, {"tags": [], "owner": {"reputation": 1978, "user_id": 671644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8PAtl.jpg?s=128&g=1", "display_name": "Marco Fedele", "link": "https://stackoverflow.com/users/671644/marco-fedele"}, "is_accepted": true, "score": 0, "last_activity_date": 1477469339, "creation_date": 1477469339, "answer_id": 40256931, "question_id": 40181727, "link": "https://stackoverflow.com/questions/40181727/linux-console-perl-replace-not-working-on-large-file/40256931#40256931", "title": "Linux console perl replace not working on large file", "body": "<p>After trying everything, I found out that in the original file the pattern was:</p>\n\n<pre><code>As100\\r\n</code></pre>\n\n<p>and that the <strong>\\n</strong> was a conversion done by Sublime Text when saving the test file.</p>\n\n<p>So the correct code to do the trick was:</p>\n\n<pre><code>perl -i -pe 's/AS100\\r/AS100/g' test.csv \n</code></pre>\n"}], "owner": {"reputation": 1978, "user_id": 671644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8PAtl.jpg?s=128&g=1", "display_name": "Marco Fedele", "link": "https://stackoverflow.com/users/671644/marco-fedele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 40256931, "answer_count": 2, "score": 0, "last_activity_date": 1477469339, "creation_date": 1477068339, "question_id": 40181727, "link": "https://stackoverflow.com/questions/40181727/linux-console-perl-replace-not-working-on-large-file", "title": "Linux console perl replace not working on large file", "body": "<p>On ubuntu I'm running a console perl replace on a csv file of ~500MB. This is the call:</p>\n\n<pre><code>perl -i -pe 's/AS100\\n/AS100/g' test.csv \n</code></pre>\n\n<p>Before run it on the complete file, I extracted a subset of it of ~30MB and run this script successfully.</p>\n\n<p>When running on the full file, no substitution is done, and no error or message is showed.</p>\n\n<p>I've tried also with sed, but the behavior is the same.</p>\n\n<p>How can I solve this issue?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["perl", "dbi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1477067840, "post_id": 40181543, "comment_id": 67630461, "body": "Turn on <a href=\"https://metacpan.org/pod/DBI#TRACING\" rel=\"nofollow noreferrer\">tracing</a>. Also, enable <a href=\"https://metacpan.org/pod/DBI#RaiseError\" rel=\"nofollow noreferrer\"><code>RaiseError</code></a> so you don&#39;t have to manually check for errors after every call. And always <code>use strict;</code>!"}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1477070353, "post_id": 40181543, "comment_id": 67631736, "body": "Hi @ThisSuitIsBlackNot, I used  strict to check, there is still no error showing."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477070410, "post_id": 40181713, "comment_id": 67631758, "body": "Hi I run these code in Linux, and I tried your code and add the RaiseError. There is nothing change and showing."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477070613, "post_id": 40181713, "comment_id": 67631879, "body": "@Kyan Maybe <code>logMsg</code> doesn&#39;t work? Try a deliberately wrong password to make an error happen. Also check you&#39;re running the code you think you are."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477071379, "post_id": 40181713, "comment_id": 67632287, "body": "I think logMsg is working, because I use it on other place, and it print the error and message."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477071747, "post_id": 40181713, "comment_id": 67632446, "body": "@Kyan You use it with a 0? Is the log level set properly? Why assume? Try a print or something. Or try to put something into the database."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477072107, "post_id": 40181713, "comment_id": 67632639, "body": "yes, I try to put something into the database, but first I need to connect to the database. I wrote and printed a word out before the code $dbh, but another word which I use to print after the code $dbh is not working."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477072187, "post_id": 40181713, "comment_id": 67632680, "body": "&#39;print &quot;Hello&quot;;&#39;     &#39; # Establish database connection&#39;     &#39;$dbh = DBI-&gt;connect(&quot;dbi:ODBC:DSN=$dbName;Server=$dbHost&quot;,                          $dbUser,                          $dbPassword);&#39;  &#39;print &quot;World&quot;;&#39;"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477072600, "post_id": 40181713, "comment_id": 67632916, "body": "@Kyan Is the connection hanging? Turn on tracing like I suggested in my comment on your question."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1477073341, "post_id": 40181713, "comment_id": 67633305, "body": "@ThisSuitIsBlackNot Hi, I check the tracing stuff, but I still have no idea how to turn on it."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477073553, "post_id": 40181713, "comment_id": 67633423, "body": "@Kyan Add <code>DBI-&gt;trace(&#39;4|CON&#39;);</code> before your call to <code>connect</code> and edit the output into your question."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477074086, "post_id": 40181713, "comment_id": 67633667, "body": "@Kyan I get the feeling you&#39;re trying to run this code via a remote web server or something. Any errors should be in the server&#39;s error log. Are you checking that? Also it would be much easier to debug this problem by running the program on the command line."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477315817, "post_id": 40181713, "comment_id": 67702641, "body": "@Schwern Hi, thanks for your help, I checked the log file, the problem is no error in the log file."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477327882, "post_id": 40181713, "comment_id": 67710576, "body": "Is that possible I miss the DBI::ODBC? I already installed DBI. Should I install the ODBC stuff?"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477334605, "post_id": 40181713, "comment_id": 67714051, "body": "@Kyan Yes, you need a database driver, <a href=\"https://metacpan.org/pod/DBD::ODBC\" rel=\"nofollow noreferrer\">DBD::ODBC</a>. But more importantly you need to find out where your errors are going. Try a program that&#39;s just <code>die</code> and find the error."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477337121, "post_id": 40181713, "comment_id": 67715387, "body": "@Schwern thank you very much, I am doing the ODBC driver first. If I get the result, I will post the answer."}, {"owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477413649, "post_id": 40181713, "comment_id": 67752940, "body": "@Schwern Hi, I tried to install the ODBC and I used the comment:  apt-get install odbcinst     After I installed, I check the ODBC if it installed properly, and I got the error: odbcinst: SQLGetPrivateProfileString failed with. I searched online but didn&#39;t find the answer. Do you know how to fix it? Thanks."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "edited": false, "score": 0, "creation_date": 1477414808, "post_id": 40181713, "comment_id": 67753579, "body": "@Kyan Nope, sorry. You should ask a new question about that."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 0, "last_activity_date": 1477068245, "creation_date": 1477068245, "answer_id": 40181713, "question_id": 40181543, "link": "https://stackoverflow.com/questions/40181543/perl-database-connection/40181713#40181713", "title": "Perl database connection", "body": "<p>I can't find anything wrong with your code, unless <code>logMsg</code> just doesn't work, but it's a tedious way to go about using DBI.</p>\n\n<p>Rather than checking if something went wrong with DBI, it's much better to set DBI to throw an error. You can do this with <a href=\"https://metacpan.org/pod/DBI#RaiseError\" rel=\"nofollow\">RaiseError</a>.</p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\n              \"dbi:ODBC:DSN=$dbName;Server=$dbHost\",\n              $dbUser, $dbPassword,\n              { RaiseError =&gt; 1 }\n          );\n</code></pre>\n\n<p>Now if DBI has a failure, including trying to connect, it will throw an error and stop the program. This avoids having to check for an error every time you use the database (you'll forget).</p>\n"}, {"tags": [], "owner": {"reputation": 1618, "user_id": 7281091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeIC6.jpg?s=128&g=1", "display_name": "sameera lakshitha", "link": "https://stackoverflow.com/users/7281091/sameera-lakshitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1482818049, "creation_date": 1482818049, "answer_id": 41339730, "question_id": 40181543, "link": "https://stackoverflow.com/questions/40181543/perl-database-connection/41339730#41339730", "title": "Perl database connection", "body": "<pre><code> DBI;\n $dbh = DBI-&gt;connect('Your_Database_Name', 'user_id','Password');\n my $sth = $dbh-&gt;prepare (\"select * from Table_name\");\n $sth-&gt;execute();\n my @row_ary = $sth-&gt;hetshrow_array;\n foreach $item (@row_ary)\n {\n print \"$item\\n\";\n }\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 5812643, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/CjMrZ.jpg?s=128&g=1", "display_name": "ccy", "link": "https://stackoverflow.com/users/5812643/ccy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 40181713, "answer_count": 2, "score": 2, "last_activity_date": 1586966827, "creation_date": 1477067622, "last_edit_date": 1586966827, "question_id": 40181543, "link": "https://stackoverflow.com/questions/40181543/perl-database-connection", "title": "Perl database connection", "body": "<p>I am new in perl, and I need to connect the database use DBI. My code as follows:</p>\n\n<pre><code>use LWP::Simple;\nuse XML::Simple qw(:strict);\nuse Data::Dumper;\nuse DBI;\nuse Getopt::Long;\nuse IO::Uncompress::Gunzip qw(gunzip $GunzipError);\nuse IO::File;\nuse warnings;\n\n $dbh = DBI-&gt;connect(\"dbi:);\n\n\n  if (!$dbh) {\n    &amp;logMsg(0, \"$DBI::errstr\");\n    die;\n  } else {&amp;logMsg(0,\"Connection to $dbName DB OK\")}\n</code></pre>\n\n<p>I already set the values. Its kind like connection failed, but I didn't get any errors. I also check the log file, there is nothing showing. What can I do for checking the errors? Thanks for any comments and help.</p>\n"}, {"tags": ["perl", "xml-twig"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1477060689, "post_id": 40179208, "comment_id": 67626067, "body": "Your XML and your xpath expression do not match. You have <code>sec</code> and <code>section</code> respectively. Instead of apologizing for dirty code, you could <a href=\"https://stackoverflow.com/posts/40179208/edit\">edit</a> and at least provide a full working example with a <code>DATA</code> section that we can copy/paste. Have you tried solving it yourself yet?"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1477062430, "post_id": 40179712, "comment_id": 67627351, "body": "Great and awesome. Its works fine both of the levels I tried."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1477061412, "creation_date": 1477061412, "answer_id": 40179712, "question_id": 40179208, "link": "https://stackoverflow.com/questions/40179208/change-attribute-value-if-condition-matches-in-second-or-third-level-section-ele/40179712#40179712", "title": "Change attribute value if condition matches in second or third level section elements", "body": "<p>First you need to fix your xpath expression. Your elements are called <code>&lt;sec</code>>, not <code>&lt;section&gt;</code>. Then you need to use the right expression to target the <code>&lt;def-list&gt;</code> elements. They don't directly precede the second <code>&lt;sec&gt;</code>, so you need to use two slashes <code>//</code>.</p>\n\n<pre><code>sec/sec//def-list\n</code></pre>\n\n<p>Now for the handler, you can take the element and <a href=\"https://v1.metacpan.org/pod/XML::Twig#ancestors-optional_condition\">go up its tree</a> to find <code>&lt;sec&gt;</code>s. We put that into a list and take the first one, which is another element. On that, we <a href=\"https://v1.metacpan.org/pod/XML::Twig#set_att-att-att_value\">set the attribute</a>. That's it.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nmy $t = XML::Twig-&gt;new(\n    twig_handlers =&gt; { 'sec/sec//def-list' =&gt; \\&amp;Check_deflist },\n    pretty_print  =&gt; 'indented'\n)-&gt;parse( \\*DATA )-&gt;print;\n\nsub Check_deflist {\n    ( $_-&gt;ancestors('sec') )[0]-&gt;set_att( att1 =&gt; 'deflist' );\n}\n\n__DATA__\n&lt;sec id=\"sec1\"&gt;\n&lt;title&gt;Section level 1&lt;/title&gt;\n&lt;p&gt;.......&lt;/p&gt;\n    &lt;sec id=\"sec1.1\"&gt;\n    &lt;title&gt;Section level 2&lt;/title&gt;\n    &lt;p&gt;&lt;def-list&gt;&lt;p&gt;...&lt;/p&gt;...&lt;/def-list&gt;&lt;/p&gt;\n    &lt;/sec&gt;\n&lt;/sec&gt;\n</code></pre>\n\n<p>Output with pretty-print:</p>\n\n<pre><code>&lt;sec id=\"sec1\"&gt;\n  &lt;title&gt;Section level 1&lt;/title&gt;\n  &lt;p&gt;.......&lt;/p&gt;\n  &lt;sec att1=\"deflist\" id=\"sec1.1\"&gt;\n    &lt;title&gt;Section level 2&lt;/title&gt;\n    &lt;p&gt;\n      &lt;def-list&gt;&lt;p&gt;...&lt;/p&gt;...&lt;/def-list&gt;\n    &lt;/p&gt;\n  &lt;/sec&gt;\n&lt;/sec&gt;\n</code></pre>\n\n<p>It will also work if there is more than one <code>&lt;def-list&gt;</code> in a second level <code>&lt;sec&gt;</code>.</p>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 40179712, "answer_count": 1, "score": 2, "last_activity_date": 1477061554, "creation_date": 1477059998, "last_edit_date": 1477061554, "question_id": 40179208, "link": "https://stackoverflow.com/questions/40179208/change-attribute-value-if-condition-matches-in-second-or-third-level-section-ele", "title": "Change attribute value if condition matches in second or third level section elements", "body": "<p>Now I have a XML File and to be modified the Section level attribute (Second or Third level particularly). For eg:</p>\n\n<p>Input:  </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;article&gt;\n&lt;front&gt;&lt;/front&gt;\n&lt;body&gt;\n&lt;sec id=\"sec1\"&gt;\n&lt;title&gt;1. Introduction&lt;/title&gt;&lt;p&gt;The cerebrospinal venous system has been the focus of many studies in the last few years, because of the hypothesized involvement of insufficient extracranial venous drainage in central nervous system disorders such as multiple sclerosis, normal-pressure hydrocephalus, and transient monocular blindness [&lt;xref ref-type=\"bibr\" rid=\"B1\"&gt;1&lt;/xref&gt;&amp;ndash;&lt;xref ref-type=\"bibr\" rid=\"B4\"&gt;4&lt;/xref&gt;]. An insufficiency in venous blood drainage can be due to the presence of single or multiple stenosis on the main routes of cerebrospinal venous system [&lt;xref ref-type=\"bibr\" rid=\"B5\"&gt;5&lt;/xref&gt;].&lt;/p&gt;\n&lt;sec id=\"sec1.1\"&gt;\n&lt;title&gt;Section level 2&lt;/title&gt;\n&lt;p&gt;&lt;def-list&gt;&lt;def-item&gt;&lt;term&gt;term I:&lt;/term&gt;&lt;def&gt;&lt;p&gt;defintion I&lt;/p&gt;&lt;/def&gt;&lt;/def-item&gt;&lt;def-item&gt;&lt;term&gt;term 2:&lt;/term&gt;&lt;def&gt;&lt;p&gt;defintion 2&lt;/p&gt;&lt;/def&gt;&lt;/def-item&gt;&lt;/def-list&gt;In the past years, great efforts have been made to develop excellent algorithms and tools for the processing and analyzing of traditional BS-Seq data [&lt;xref ref-type=\"bibr\" rid=\"B7\"&gt;7&lt;/xref&gt;&amp;#x2013;&lt;xref ref-type=\"bibr\" rid=\"B10\"&gt;10&lt;/xref&gt;] but none for hairpin-BS-Seq data. In this study, we designed and implemented HBS-tools and compared them against other state-of-the-art mapping tools. Our result indicated that HBS-tools have a reduced mapping time and improved mapping efficiency.&lt;/p&gt;\n&lt;/sec&gt;\n&lt;/sec&gt;&lt;/body&gt;\n&lt;/article&gt;\n</code></pre>\n\n<p>If Second or Third level section elements precedes def-list then I have insert the attribute for the particular section level <code>att1=\"deflist\"</code>.</p>\n\n<p>Expected Output:  </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;article&gt;\n&lt;front&gt;&lt;/front&gt;\n&lt;body&gt;\n&lt;sec id=\"sec1\"&gt;\n&lt;title&gt;1. Introduction&lt;/title&gt;&lt;p&gt;The cerebrospinal venous system has been the focus of many studies in the last few years, because of the hypothesized involvement of insufficient extracranial venous drainage in central nervous system disorders such as multiple sclerosis, normal-pressure hydrocephalus, and transient monocular blindness [&lt;xref ref-type=\"bibr\" rid=\"B1\"&gt;1&lt;/xref&gt;&amp;ndash;&lt;xref ref-type=\"bibr\" rid=\"B4\"&gt;4&lt;/xref&gt;]. An insufficiency in venous blood drainage can be due to the presence of single or multiple stenosis on the main routes of cerebrospinal venous system [&lt;xref ref-type=\"bibr\" rid=\"B5\"&gt;5&lt;/xref&gt;].&lt;/p&gt;\n&lt;sec id=\"sec1.1\" att1=\"deflist\"&gt;\n&lt;title&gt;Section level 2&lt;/title&gt;\n&lt;p&gt;&lt;def-list&gt;&lt;def-item&gt;&lt;term&gt;term I:&lt;/term&gt;&lt;def&gt;&lt;p&gt;defintion I&lt;/p&gt;&lt;/def&gt;&lt;/def-item&gt;&lt;def-item&gt;&lt;term&gt;term 2:&lt;/term&gt;&lt;def&gt;&lt;p&gt;defintion 2&lt;/p&gt;&lt;/def&gt;&lt;/def-item&gt;&lt;/def-list&gt;In the past years, great efforts have been made to develop excellent algorithms and tools for the processing and analyzing of traditional BS-Seq data [&lt;xref ref-type=\"bibr\" rid=\"B7\"&gt;7&lt;/xref&gt;&amp;#x2013;&lt;xref ref-type=\"bibr\" rid=\"B10\"&gt;10&lt;/xref&gt;] but none for hairpin-BS-Seq data. In this study, we designed and implemented HBS-tools and compared them against other state-of-the-art mapping tools. Our result indicated that HBS-tools have a reduced mapping time and improved mapping efficiency.&lt;/p&gt;\n&lt;/sec&gt;\n&lt;/sec&gt;&lt;/body&gt;\n&lt;/article&gt;\n</code></pre>\n\n<p>MyCode:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nmy $t= XML::Twig-&gt;new( twig_handlers =&gt; \n               { 'sec/section/def-list' =&gt; \\&amp;Check_deflist }\n               )\n          -&gt;parsefile('input.xml');\n\nsub Check_deflist\n{  }\n</code></pre>\n\n<p>Apologies for the dirty code... Anyone could help me on this one and it would be appreciated.</p>\n"}, {"tags": ["perl", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1477059068, "post_id": 40178750, "comment_id": 67624811, "body": "If your application isn&#39;t under a heavy load, simply wrapping the write in a <code>try&#47;catch</code> and retrying several times should fix all the problems."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1477059660, "post_id": 40178750, "comment_id": 67625269, "body": "I guess this comment is directed at the question. In any case I would rather synchronize the accesses."}], "tags": [], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "is_accepted": true, "score": 1, "last_activity_date": 1477058724, "creation_date": 1477058724, "answer_id": 40178750, "question_id": 40178638, "link": "https://stackoverflow.com/questions/40178638/multiple-writes-to-sqlite-from-perl/40178750#40178750", "title": "Multiple writes to SQLite from Perl", "body": "<p>You can't. SQLite doesn't allow concurrent writes.</p>\n\n<p>From <a href=\"https://www.sqlite.org/lockingv3.html\" rel=\"nofollow\">official documentation</a>:</p>\n\n<blockquote>\n  <p>To write to a database, a process must first acquire a SHARED lock as\n  described above (possibly rolling back incomplete changes if there is\n  a hot journal). After a SHARED lock is obtained, a RESERVED lock must\n  be acquired.</p>\n  \n  <p>A RESERVED lock means that the process is planning on writing to the\n  database file at some point in the future but that it is currently\n  just reading from the file. Only a single RESERVED lock may be active\n  at one time, though multiple SHARED locks can coexist with a single\n  RESERVED lock. RESERVED differs from PENDING in that new SHARED locks\n  can be acquired while there is a RESERVED lock.</p>\n</blockquote>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 40178750, "answer_count": 1, "score": 0, "last_activity_date": 1477058724, "creation_date": 1477058420, "question_id": 40178638, "link": "https://stackoverflow.com/questions/40178638/multiple-writes-to-sqlite-from-perl", "title": "Multiple writes to SQLite from Perl", "body": "<p>Assume I have two Perl scripts connected to the same SQLite database. If one of the scripts is writing to the database, and the other one also tries to write to the database, will the second script connection get disconnected? or will its input get stored in some SQLite cache and SQLite will eventually commit the writes after the writes from the first script are done?   </p>\n\n<p>I don't want my second script connection die just because SQLIte locks the db because of the writes from the first script. Is this what would happen if both scripts write to the database?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "telnet"], "comments": [{"owner": {"reputation": 85, "user_id": 4580758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7429c7715a4fed4594b1e9955f1132d4?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/4580758/jennifer"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1477057269, "post_id": 40177756, "comment_id": 67623509, "body": "Edited to include the definition of $telnet"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1477058462, "post_id": 40177756, "comment_id": 67624366, "body": "Looks to me like your existing code should work? What problems are you having? Why do you think it doesn&#39;t work?"}, {"owner": {"reputation": 85, "user_id": 4580758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7429c7715a4fed4594b1e9955f1132d4?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/4580758/jennifer"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1477081252, "post_id": 40177756, "comment_id": 67637243, "body": "It&#39;s just not executing the script at all.  It will execute from a normal command prompt telnet session, but it won&#39;t through how I&#39;m doing it in perl."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1477296482, "post_id": 40177756, "comment_id": 67691032, "body": "But what evidence do you have that the script isn&#39;t being executed? Are you expecting to see output? Are you expecting to see some effect on the remote server? Saying &quot;it&#39;s just not executing the script at all&quot; isn&#39;t really answering my question."}], "owner": {"reputation": 85, "user_id": 4580758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7429c7715a4fed4594b1e9955f1132d4?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/4580758/jennifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1477126345, "creation_date": 1477055974, "last_edit_date": 1477077507, "question_id": 40177756, "link": "https://stackoverflow.com/questions/40177756/how-to-execute-a-script-from-a-perl-telnet-session", "title": "How to execute a script from a Perl telnet session?", "body": "<p>I'm fairly inexperienced with Perl, but I'm trying to create a Perl script which will run on a server that creates a telnet session to one of it's specific client machines and executes one of the scripts that resides on that client machine (so that it runs on the client, instead of trying to run it on the server).</p>\n\n<p>I can't seem to find any examples of this kind of functionality, so I'm not even sure if it's possible.</p>\n\n<p>This is what I initially thought would work:</p>\n\n<pre><code>my $telnet = Net::Telnet-&gt;new(Host=&gt; $machineName, Timeout =&gt; 60) or die \"Failed to create Telnet instance!\";\n$telnet-&gt;cmd(\"C:\\\\TestScript.cmd\");\n</code></pre>\n\n<p>If I can't use telnet in Perl to accomplish this, is there something else that would do what I need that you could suggest?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "iframe", "selenium-webdriver"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 2, "creation_date": 1477052038, "post_id": 40175791, "comment_id": 67619843, "body": "Cross post, already answered at <a href=\"http://perlmonks.com/?node_id=1174446\" rel=\"nofollow noreferrer\">perlmonks.com/?node_id=1174446</a>"}], "answers": [{"tags": [], "owner": {"reputation": 158, "user_id": 5575897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09bdbc12fa775478cb067ee68536ae0f?s=128&d=identicon&r=PG&f=1", "display_name": "Kuldeep Yadav", "link": "https://stackoverflow.com/users/5575897/kuldeep-yadav"}, "is_accepted": false, "score": 1, "last_activity_date": 1477052077, "last_edit_date": 1477052077, "creation_date": 1477050810, "answer_id": 40176060, "question_id": 40175791, "link": "https://stackoverflow.com/questions/40175791/finding-elements-in-a-site-with-iframes-using-perl-selenium/40176060#40176060", "title": "Finding elements in a site with iframes using Perl selenium", "body": "<p>Find iframe then switch to iframe\nand use xpath for find iframe:-</p>\n\n<pre><code> e.g. //iframe[@class=\"value of class\"] \n\n  $element = $driver-&gt;find_element('coolestWidgetEvah','id');\n  $driver-&gt;switch_to_frame('frameName');\n</code></pre>\n\n<p>Let me guess to switch to default content in perl:</p>\n\n<pre><code>  $driver-&gt;switch_to_frame('defaultcontent');\n</code></pre>\n\n<p>swith to default content is work for java check before use.</p>\n"}, {"tags": [], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "is_accepted": true, "score": 0, "last_activity_date": 1481776366, "creation_date": 1481776366, "answer_id": 41156480, "question_id": 40175791, "link": "https://stackoverflow.com/questions/40175791/finding-elements-in-a-site-with-iframes-using-perl-selenium/41156480#41156480", "title": "Finding elements in a site with iframes using Perl selenium", "body": "<p>On proper researching I can answer my query. To switch to a frame we can use following two options:</p>\n\n<ol>\n<li>Switching to a frame using its id:</li>\n</ol>\n\n<blockquote>\n  <p>$driver->switch_to_frame('frame_id');</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>Switching to a frame using xpath to the frame:</li>\n</ol>\n\n<blockquote>\n  <p>$driver->switch_to_frame($driver->find_element_by_xpath(\".//*[\\@id='id1']/div[2]/div/iframe\"));</p>\n</blockquote>\n\n<ol start=\"3\">\n<li>There is an option to switch to frame using the frame number but it becomes hard in case of sites having two many frames to have a count.</li>\n</ol>\n\n<p>Note: We can only work with web elements present in a frame when we switch to a frame.</p>\n\n<p>Now to switch back to the default frame use:</p>\n\n<blockquote>\n  <p>$driver->switch_to_frame();</p>\n</blockquote>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 41156480, "answer_count": 2, "score": -3, "last_activity_date": 1481776366, "creation_date": 1477050096, "last_edit_date": 1478030448, "question_id": 40175791, "link": "https://stackoverflow.com/questions/40175791/finding-elements-in-a-site-with-iframes-using-perl-selenium", "title": "Finding elements in a site with iframes using Perl selenium", "body": "<p>Currently I am automating interaction with a website which has iframes. Some without id's also and they are not in same hierarchy. I want to click a <code>&lt;a&gt; &lt;/a&gt;</code> tag but not able to do so. Also read posts for how to do it in Java but there is nothing to come back to default content in Perl (or I did not find).</p>\n\n<p>Someone having experience on it or having any links to any site explaining this would be very helpful. Please note that I am implementing this in Perl using \nSelenium::Chrome.</p>\n"}, {"tags": ["perl", "dist-zilla"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1541115882, "post_id": 40173743, "comment_id": 93116890, "body": "I&#39;ll just point out for reference that you should be very careful with limiting the maximum version of a dependency. While the feature is there and works on modern toolchain, CPAN is not a package manager, so if another dependency decides it needs a newer version of that module than you allow, the CPAN installer won&#39;t be able to work it out; you can&#39;t have two versions of the same module installed. Additionally there&#39;s nothing preventing the newer version from just being installed by some later process, since this version check will only happen when your module is installed."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477044990, "post_id": 40173941, "comment_id": 67615311, "body": "Note that I can&#39;t verify this."}, {"owner": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "edited": false, "score": 1, "creation_date": 1477052191, "post_id": 40173941, "comment_id": 67619948, "body": "(How do I edit comments?) I set <code>Search::Elasticsearch   = &gt;= 2.03, &lt; 5.00</code> and upgraded Search::Elasticsearch, and now <code>listdeps --missing</code> lists it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "edited": false, "score": 0, "creation_date": 1477053342, "post_id": 40173941, "comment_id": 67620752, "body": "@fab there is a = too much I think. You can only say that edit comments for five minutes. There is an edit link. If your comment is the last one you can also copy it, delete it, paste and add and then post it."}, {"owner": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "edited": false, "score": 0, "creation_date": 1477057093, "post_id": 40173941, "comment_id": 67623382, "body": "Doesn&#39;t show up for me, I guess I need more karma. I think the dist.ini still needs to be valid INI; if I remove the <code>=</code> dzil complains that ``Search::Elasticsearch   &gt;&#39; is not a module name`."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "edited": false, "score": 0, "creation_date": 1477057860, "post_id": 40173941, "comment_id": 67623937, "body": "I&#39;m looking through github: <a href=\"https://github.com/search?p=11&amp;q=language%3AINI+%22%5BPrereqs%5D%22&amp;ref=searchresults&amp;type=Code&amp;utf8=%E2%9C%93\" rel=\"nofollow noreferrer\">github.com/&hellip;</a> try finding a file that has this kind of syntax and hope that works ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "edited": false, "score": 0, "creation_date": 1477058912, "post_id": 40173941, "comment_id": 67624703, "body": "@Fabrice see above"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1742, "user_id": 132319, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9265668ccda89e3007dcef4409aa3381?s=128&d=identicon&r=PG", "display_name": "Kit Peters", "link": "https://stackoverflow.com/users/132319/kit-peters"}, "edited": false, "score": 1, "creation_date": 1487795198, "post_id": 40173941, "comment_id": 71950062, "body": "@KitPeters you&#39;re right. The <code>=</code> is required, because the whole <code>&gt;= 1.2, != 1.5, &lt; 2.0</code> together is the <i>version string</i>. I see it too now. Will update. Thanks for pointing it out."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1487795921, "last_edit_date": 1592644375, "creation_date": 1477044798, "answer_id": 40173941, "question_id": 40173743, "link": "https://stackoverflow.com/questions/40173743/declaring-dependencies-on-specific-versions-of-perl-modules-using-distzilla/40173941#40173941", "title": "Declaring dependencies on specific versions of Perl modules using Dist::Zilla", "body": "<p><a href=\"https://metacpan.org/pod/Dist::Zilla::Prereqs\" rel=\"nofollow noreferrer\">Dist::Zilla::Prereqs</a> uses CPAN::Meta::Spec to do the prereqs. That doc describes the syntax in the <a href=\"https://metacpan.org/pod/CPAN::Meta::Spec#Version-Ranges\" rel=\"nofollow noreferrer\">Version Ranges</a> chapter.</p>\n<blockquote>\n<p>Some fields (prereq, optional_features) indicate the particular\nversion(s) of some other module that may be required as a\nprerequisite. This section details the Version Range type used to\nprovide this information.</p>\n<p>The simplest format for a Version Range is just the version number\nitself, e.g. 2.4. This means that at least version 2.4 must be\npresent. To indicate that any version of a prerequisite is okay, even\nif the prerequisite doesn't define a version at all, use the version\n0.</p>\n<p>Alternatively, a version range may use the operators &lt; (less than), &lt;=\n(less than or equal), &gt; (greater than), &gt;= (greater than or equal), ==\n(equal), and != (not equal). For example, the specification &lt; 2.0\nmeans that any version of the prerequisite less than 2.0 is suitable.</p>\n<p>For more complicated situations, version specifications may be AND-ed\ntogether using commas. The specification &gt;= 1.2, != 1.5, &lt; 2.0\nindicates a version that must be at least 1.2, less than 2.0, and not\nequal to 1.5.</p>\n</blockquote>\n<p>So your prereqs would become:</p>\n<pre><code>[Prereqs]\nPlack = &gt;= 1.0000, &lt; 2.0000\nPlack = == 0.9990\nOther::Module = &gt;= 1.2, != 1.5, &lt; 2.0\n</code></pre>\n<p>Note the single <code>=</code> that separates the module name (key) from the version or version range (value).</p>\n<p>Those versions mean:</p>\n<ul>\n<li>\n<blockquote>\n<p>&gt;= 1.0000, &lt; 2.0000</p>\n</blockquote>\n<p>Larger or equal to 1.0000 and smaller than 2.0000</p>\n</li>\n<li>\n<blockquote>\n<p>== 0.9990</p>\n</blockquote>\n<p>Exactly version 0.9990</p>\n</li>\n<li>\n<blockquote>\n<p>= 1.2, != 1.5, &lt; 2.0</p>\n</blockquote>\n<p>Greater or equal to 12 and not 1.5 and smaller than 2.0</p>\n</li>\n</ul>\n<p>As you can see, that's exactly the same as for the cpanfile or Module::Build.</p>\n"}, {"tags": [], "owner": {"reputation": 1742, "user_id": 132319, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9265668ccda89e3007dcef4409aa3381?s=128&d=identicon&r=PG", "display_name": "Kit Peters", "link": "https://stackoverflow.com/users/132319/kit-peters"}, "is_accepted": false, "score": 2, "last_activity_date": 1487886969, "last_edit_date": 1487886969, "creation_date": 1487785095, "answer_id": 42398564, "question_id": 40173743, "link": "https://stackoverflow.com/questions/40173743/declaring-dependencies-on-specific-versions-of-perl-modules-using-distzilla/42398564#42398564", "title": "Declaring dependencies on specific versions of Perl modules using Dist::Zilla", "body": "<p>simbaque above was almost right, and Fabrice Gabolde had the rest (I don't know how to link names).</p>\n\n<p>The way to do this:</p>\n\n<pre><code>[Prereqs]\nPlack = &gt;= 1.000, &lt; 2.000\nOther::Module = == 1.0\nOther::Other::Module = &gt;= 1.2, != 1.5, &lt; 2.0\n</code></pre>\n\n<p>ETA: simbaque has since corrected their answer; leaving this one for posterity.</p>\n"}], "owner": {"reputation": 95, "user_id": 5321341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926171279c9a7b096d08ab9266ee2cec?s=128&d=identicon&r=PG", "display_name": "Fabrice Gabolde", "link": "https://stackoverflow.com/users/5321341/fabrice-gabolde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 40173941, "answer_count": 2, "score": 5, "last_activity_date": 1487886969, "creation_date": 1477044180, "question_id": 40173743, "link": "https://stackoverflow.com/questions/40173743/declaring-dependencies-on-specific-versions-of-perl-modules-using-distzilla", "title": "Declaring dependencies on specific versions of Perl modules using Dist::Zilla", "body": "<p>I have been using Dist::Zilla for a project at work, and I've declared all my dependencies in the <code>[Prereqs / Requires]</code> section. That's fine so far.</p>\n\n<p>Now I found that the latest version of one of my dependencies breaks backwards compatibility, so I want to limit the range of versions that I depend on. Something like what <code>cpanm</code> supports:</p>\n\n<pre><code># from perldoc cpanm\ncpanm Plack~\"&gt;= 1.0000, &lt; 2.0000\"  # latest of 1.xxxx\ncpanm Plack@0.9990                 # specific version. same as Plack~\"== 0.9990\"\n</code></pre>\n\n<p>Or <code>Module::Build</code>:</p>\n\n<pre><code>'Other::Module' =&gt; '&gt;= 1.2, != 1.5, &lt; 2.0',\n</code></pre>\n\n<p>In general, how do I declare this type of dependency using Dist::Zilla?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477042725, "post_id": 40172951, "comment_id": 67613868, "body": "Do you want to read the output of <code>foo</code>?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477042751, "post_id": 40172951, "comment_id": 67613889, "body": "Yes and place it to <code>$_</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477042784, "post_id": 40172951, "comment_id": 67613911, "body": "So you want to use <code>foo</code> to change the content of <code>$_</code>. Is this in a one-liner?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477042984, "post_id": 40172951, "comment_id": 67614077, "body": "Well, yes it looks like a one-liner, but I want to do in in a Perl script. I am processing some files through some filters before doing something else with the content."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477043137, "post_id": 40172951, "comment_id": 67614178, "body": "In a one-liner I&#39;d probably invoke perl twice. Something like <code>$ echo &quot;foobar&quot; | perl -pe &#39;s&#47;f&#47;ff&#47;&#39; | wc -c | perl -pe &#39;$_ *= 2&#39;</code> so you don&#39;t have to care about all of the escaping."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477043465, "post_id": 40172951, "comment_id": 67614385, "body": "@simbabque Yes of course as one-liner it&#39;s easy. My current workaround is to save <code>$_</code> to a temporary file then use <code>qx{cat $temp | foo}</code> which is ugly."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1477043831, "post_id": 40172951, "comment_id": 67614589, "body": "@PerlDuck yes, it would. You came too late, the answer where we discussed that in a comment has already been deleted and you can&#39;t see those yet."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477043908, "post_id": 40172951, "comment_id": 67614635, "body": "Regarding the temporary file, why not do <code>qx{foo &lt;$temp_filename}</code>? Then you don&#39;t need <code>cat</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1477044065, "post_id": 40173603, "comment_id": 67614722, "body": "Good but I would prefer using only core-modules. Currently I use <code>File::Temp</code> but I don&#39;t like it"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 5, "creation_date": 1477044169, "post_id": 40173603, "comment_id": 67614797, "body": "@nowox both IPC::Open2 and FileHandle have been <i>first released with perl 5</i> according to my <code>corelist</code>. I believe that means since the initial release of Perl 5. It doesn&#39;t get more core-module than that. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 3, "creation_date": 1477044208, "post_id": 40173603, "comment_id": 67614825, "body": "By the way, File::Temp came with 5.6.1."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477076560, "post_id": 40173603, "comment_id": 67634949, "body": "BAD! This &quot;solution&quot; suffers from a race condition. Your programs could deadlock."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477076648, "post_id": 40173603, "comment_id": 67634996, "body": "@ikegami can you explain how to fix it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1477076887, "post_id": 40173603, "comment_id": 67635098, "body": "If the parent writes enough to the pipe attached to the child&#39;s STDIN, and if the child outputs enough to the pipe attached to its STDOUT before it reads from its STDIN, there will be a deadlock. (This can be as little as 4KB on some systems.) The solution involved using something like <code>select</code>, threads, etc. The better solution is to use a tool that has already solved the problem for you (IPC::Run3 or IPC::Run). IPC::Open2 and IPC::Open3 are too low-level to be useful in most circumstances."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1477077331, "post_id": 40173603, "comment_id": 67635294, "body": "If you didn&#39;t want to capture the output, using <code>open2(&#39;&gt;&amp;STDOUT&#39;, $writer, ...)</code> would avoid the issue. But then you could simply use <code>open(my $writer, &#39;|-&#39;, ...)</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477122331, "post_id": 40173603, "comment_id": 67645940, "body": "@ikegami <i>&quot;there will be a deadlock&quot;</i>. Interesting, I created a follow-up question <a href=\"http://stackoverflow.com/q/40189625/2173773\">here</a>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1477121846, "last_edit_date": 1495541799, "creation_date": 1477043793, "answer_id": 40173603, "question_id": 40172951, "link": "https://stackoverflow.com/questions/40172951/how-to-pipe-the-content-of-a-variable-as-stdin-in-a-qx-statement-in-perl/40173603#40173603", "title": "How to pipe the content of a variable as STDIN in a qx{} statement in Perl?", "body": "<p>This answer is a very naive approach. It's prone to deadlock. <strong>Don't use it!</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/40172951/how-to-pipe-the-content-of-a-variable-as-stdin-in-a-qx-statement-in-perl/40173603#comment67635098_40173603\">ikegami explains in a comment</a> below:</p>\n\n<blockquote>\n  <p>If the parent writes enough to the pipe attached to the child's STDIN, and if the child outputs enough to the pipe attached to its STDOUT before it reads from its STDIN, there will be a deadlock. (This can be as little as 4KB on some systems.) The solution involved using something like select, threads, etc. The better solution is to use a tool that has already solved the problem for you (IPC::Run3 or IPC::Run). IPC::Open2 and IPC::Open3 are too low-level to be useful in most circumstances</p>\n</blockquote>\n\n<p>I'll leave the original answer, but encourage readers to pick the solution from one of the other answers instead.</p>\n\n<hr>\n\n<p>You can use <code>open2</code> from <a href=\"http://perldoc.perl.org/IPC/Open2.html\" rel=\"nofollow noreferrer\">IPC::Open2</a> to read and write to the same process.</p>\n\n<p>Now you don't need to care about escaping anything.</p>\n\n<pre><code>use IPC::Open2;\nuse FileHandle;\n\nmy $writer = FileHandle-&gt;new;\nmy $reader = FileHandle-&gt;new;\n\nmy $pid = open2( $reader, $writer, 'wc -c' );\n\n# write to the pipe\nprint $writer 'some content that need to be escaped &amp;&gt;|\\\"$\\'`\\s\\\\';\n\n# tell it you're done\n$writer-&gt;close;\n\n# read the out of the pipe\nmy $line = &lt;$reader&gt;;\nprint $line;\n</code></pre>\n\n<p>This will print <code>48</code>.</p>\n\n<p>Note that you can't use double quotes <code>\"\"</code> for the exact input you showed because the number of backslashes <code>\\</code> is wrong.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">perldoc <code>open</code></a> and <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">perlipc</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1477074422, "creation_date": 1477074422, "answer_id": 40183235, "question_id": 40172951, "link": "https://stackoverflow.com/questions/40172951/how-to-pipe-the-content-of-a-variable-as-stdin-in-a-qx-statement-in-perl/40183235#40183235", "title": "How to pipe the content of a variable as STDIN in a qx{} statement in Perl?", "body": "<p>I like the solution provided by @simbabque since it avoids calling the Shell. Anyway, for comparison, a shorter solution can be obtained using Bash (but avoiding <code>echo</code>)  by using a Bash <code>Here string</code>:</p>\n\n<pre><code>$_ = q{some content that need to be escaped &amp;&gt;|\\\"$\\'`\\s\\\\};\n$_ =~ s/'/'\"'\"'/g; # Bash needs single quotes to be escaped\nsystem 'bash', '-c', \"foo &lt;&lt;&lt; '$_'\";\n</code></pre>\n\n<p>And, if you need to capture the output of the command:</p>\n\n<pre><code>use Capture::Tiny 'capture_stdout';\nmy $res = capture_stdout { system 'bash', '-c', \"foo &lt;&lt;&lt; '$_'\" };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1477077570, "post_id": 40183728, "comment_id": 67635417, "body": "I like the <code>IPC::Run</code> solutions. Seems very simple! The first solution is using <code>printf</code> instead of <code>echo</code>, what would be the advantage of using <code>printf</code> instead of <code>echo</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1477077872, "post_id": 40183728, "comment_id": 67635582, "body": "@H&#229;kon H&#230;gland, It&#39;s very hard to properly pass arbitrary values to <code>echo</code> because they could be interpreted as options. Also, some versions of <code>echo</code> recognize <code>\\ </code> escapes, requiring further system-dependent escaping."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1477078871, "last_edit_date": 1477078871, "creation_date": 1477076400, "answer_id": 40183728, "question_id": 40172951, "link": "https://stackoverflow.com/questions/40172951/how-to-pipe-the-content-of-a-variable-as-stdin-in-a-qx-statement-in-perl/40183728#40183728", "title": "How to pipe the content of a variable as STDIN in a qx{} statement in Perl?", "body": "<p>The following assume <code>@cmd</code> contains the program and its arguments (if any).</p>\n\n<pre><code>my @cmd = ('foo');\n</code></pre>\n\n<hr>\n\n<p>If you want to capture the output, you can use any of the following:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nmy $cmd1 = shell_quote('printf', '%s', $_);\nmy $cmd2 = shell_quote(@cmd);\nmy $output = qx{$cmd1 | $cmd2};\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use IPC::Run3 qw( run3 );\nrun3(\\@cmd, \\$_, \\my $output);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use IPC::Run qw( run );\nrun(\\@cmd, \\$_, \\my $output);\n</code></pre>\n\n<hr>\n\n<p>If you don't want to capture the output, you can use any of the following:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nmy $cmd1 = shell_quote('printf', '%s', $_);\nmy $cmd2 = shell_quote(@cmd);\nsystem(\"$cmd1 | $cmd2\");\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>system('/bin/sh', '-c', 'printf \"%s\" \"$0\" | \"$@\"', $_, @cmd);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nmy $cmd = shell_quote(@cmd);\nopen(my $pipe, '|-', $cmd);\nprint($pipe $_);\nclose($pipe);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>open(my $pipe, '|-', '/bin/sh', '-c', '\"$@\"', 'dummy', @cmd);\nprint($pipe $_);\nclose($pipe);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use IPC::Run3 qw( run3 );\nrun3(\\@cmd, \\$_);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use IPC::Run qw( run );\nrun(\\@cmd, \\$_);\n</code></pre>\n\n<hr>\n\n<p>If you don't want to capture the output, but you don't want to see it either, you can use any of the following:</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nmy $cmd1 = shell_quote('printf', '%s', $_);\nmy $cmd2 = shell_quote(@cmd);\nsystem(\"$cmd1 | $cmd2 &gt;/dev/null\");\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>system('/bin/sh', '-c', 'printf \"%s\" \"$0\" | \"$@\" &gt;/dev/null', $_, @cmd);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use String::ShellQuote qw( shell_quote );\nmy $cmd = shell_quote(@cmd);\nopen(my $pipe, '|-', \"$cmd &gt;/dev/null\");\nprint($pipe $_);\nclose($pipe);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>open(my $pipe, '|-', '/bin/sh', '-c', '\"$@\" &gt;/dev/null', 'dummy', @cmd);\nprint($pipe $_);\nclose($pipe);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use IPC::Run3 qw( run3 );\nrun3(\\@cmd, \\$_, \\undef);\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>use IPC::Run qw( run );\nrun(\\@cmd, \\$_, \\undef);\n</code></pre>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li><p>The solutions using <code>printf</code> will impose a limit on the size of the data to pass to the program's STDIN.</p></li>\n<li><p>The solutions using <code>printf</code> are unable to pass a NUL to the program's STDIN.</p></li>\n<li><p>The presented solutions that use IPC::Run3 and IPC::Run don't involve a shell. This avoids problems.</p></li>\n<li><p>You should probably use <code>system</code> and <code>capture</code> from IPC::System::Simple instead of the builtin <code>system</code> and <code>qx</code> to get \"free\" error checking.</p></li>\n</ul>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 2, "accepted_answer_id": 40173603, "answer_count": 3, "score": 4, "last_activity_date": 1477121846, "creation_date": 1477041950, "last_edit_date": 1477042735, "question_id": 40172951, "link": "https://stackoverflow.com/questions/40172951/how-to-pipe-the-content-of-a-variable-as-stdin-in-a-qx-statement-in-perl", "title": "How to pipe the content of a variable as STDIN in a qx{} statement in Perl?", "body": "<p>I basically would like to do this: </p>\n\n<pre><code>$_ = \"some content that need to be escaped &amp;&gt;|\\\"$\\'`\\s\\\\\";\nqx{echo $_ | foo}\n</code></pre>\n\n<p>There are two problems here. First the content of <code>$_</code> needs to be escaped as it can contain binary data. Second, invoking <code>echo</code> might be slightly inefficient. </p>\n\n<p>How can I simply pipe some content as STDIN to a command in Perl?</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1477032903, "post_id": 40169771, "comment_id": 67608288, "body": "You don&#39;t need parenthesis after <code>return</code>.  More importantly, note that <code>return;</code> (without anything)  in fact returns <code>undef</code>.  If you want to indicate that all went well -- which is always a very good idea -- you normally do <code>return 1;</code>."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1477039023, "post_id": 40169771, "comment_id": 67611576, "body": "@zdim only in scalar context"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1477040659, "post_id": 40169771, "comment_id": 67612553, "body": "@ysth Yes, good point, thank you.  In list context it&#39;s a different game, in this sense."}, {"owner": {"reputation": 936, "user_id": 2066126, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/224ed6420ee88dea389bb21ca1cfa0aa?s=128&d=identicon&r=PG", "display_name": "TheAmigo", "link": "https://stackoverflow.com/users/2066126/theamigo"}, "edited": false, "score": 0, "creation_date": 1477078327, "post_id": 40169771, "comment_id": 67635857, "body": "Also remove the parens after &quot;sub answer&quot;."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7017426"}, "edited": false, "score": 0, "creation_date": 1477031907, "post_id": 40169869, "comment_id": 67607800, "body": "If i have another subroutine named as question1(now i want to pass question and question1 subroutine inside subroutine answer how can pass it)"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1477032053, "post_id": 40169869, "comment_id": 67607889, "body": "Take reference of question1 like question i.e.  <code>my $question1_subref = \\&amp;question1;</code> and pass it to sub <code>answer</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1477038436, "post_id": 40169869, "comment_id": 67611233, "body": "<i>&quot;It may lead to interesting case of closures&quot;</i> That is irrelevant and out of context. There is no closure here."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 3, "last_activity_date": 1477033053, "last_edit_date": 1477033053, "creation_date": 1477031732, "answer_id": 40169869, "question_id": 40169771, "link": "https://stackoverflow.com/questions/40169771/how-to-pass-a-subroutine-as-a-parameter-to-another-subroutine/40169869#40169869", "title": "How to pass a subroutine as a parameter to another subroutine", "body": "<p>You can take subroutine reference using <code>\\&amp;subname</code> syntax and then, you can easily pass it to other subroutine as arguments like a scalar. This is documented in <a href=\"http://perldoc.perl.org/perlsub.html#Lexical-Subroutines\" rel=\"nofollow\"><code>perlsub</code></a> and <a href=\"http://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow\"><code>perlref</code></a>. Later you can dereference it using <a href=\"http://perldoc.perl.org/perlop.html#The-Arrow-Operator\" rel=\"nofollow\"><code>Arrow operator(-&gt;)</code></a>.</p>\n\n<pre><code>sub question {\n    print \"question the term\";\n    return 1;\n}\n\nmy $question_subref = \\&amp;question;\nanswer($question_subref); \n\nsub answer {\n    my $question_subref = shift;\n    print \"subroutine question is used as parameters\";\n    # call it using arrow operator if needed\n    $question_subref -&gt; ();\n    return 1;\n} \n</code></pre>\n\n<p>Or you can create an anonymous subroutine by not naming it. It may lead to interesting case of <a href=\"http://perldoc.perl.org/perlref.html#Making-References\" rel=\"nofollow\"><code>closures</code></a></p>\n\n<pre><code>my $question = sub  {\n                        print \"question the term\";\n                        return 1;\n                     };\nanswer($question);\n\n# you can call it using arrow operator later.\n$question -&gt; ();\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7017426"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 40169869, "answer_count": 1, "score": 1, "last_activity_date": 1477038164, "creation_date": 1477031362, "last_edit_date": 1477038164, "question_id": 40169771, "link": "https://stackoverflow.com/questions/40169771/how-to-pass-a-subroutine-as-a-parameter-to-another-subroutine", "title": "How to pass a subroutine as a parameter to another subroutine", "body": "<p>I want to pass a subroutine as a parameter to another subroutine.</p>\n\n<p>Subroutine <code>question</code> should be passed as parameter to subroutine <code>answer</code>? How can I do it with Perl?</p>\n\n<pre><code>question();\n\nsub question {\n    print \"question the term\";\n    return();\n}\n\nsub answer() {\n    print \"subroutine question is used as parameters\";\n    return();\n}\n</code></pre>\n"}, {"tags": ["perl", "shell", "tcl"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 2, "creation_date": 1477027868, "post_id": 40169037, "comment_id": 67606085, "body": "Did you try to solve this and where did you fail?"}, {"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "reply_to_user": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1477028055, "post_id": 40169037, "comment_id": 67606150, "body": "I&#39;ve not code anything yet for it. Just wondering if somebody have comes across anything like this before."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1477038772, "post_id": 40169037, "comment_id": 67611428, "body": "@DiveshRastogi: You should at least <i>try</i>. Stack Overflow is a source of <i>help</i>, not a place to get your work done for free."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 0, "creation_date": 1477030587, "post_id": 40169257, "comment_id": 67607151, "body": "Thanks J Atwal. This is an interesting solution but just works for last two patterns. I roughly have 11K lines in my file and 8k contain same kind of pattern."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 2, "creation_date": 1477039128, "post_id": 40169257, "comment_id": 67611628, "body": "@DiveshRastogi: Your question doesn&#39;t mention that at all. How are we supposed to divine information that you don&#39;t provide?"}, {"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 0, "creation_date": 1477287757, "post_id": 40169257, "comment_id": 67686807, "body": "resolved with tcl solution mentioned along with the problem statement."}], "tags": [], "owner": {"reputation": 162, "user_id": 3539775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892a66074a0512f0fcf3018bb03d9a3d?s=128&d=identicon&r=PG", "display_name": "J Singh", "link": "https://stackoverflow.com/users/3539775/j-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1477029284, "last_edit_date": 1495542803, "creation_date": 1477028925, "answer_id": 40169257, "question_id": 40169037, "link": "https://stackoverflow.com/questions/40169037/move-a-pattern-from-specific-line-to-end-of-that-rule/40169257#40169257", "title": "Move a pattern from specific line to end of that rule", "body": "<p>Tested following regex in VIM and it does exactly what you require:</p>\n\n<pre><code>%s/hideOFF\\(\\_.*\\)}/\\1\\rhideOFF\\r}/i\n\n**Explanation:**\n%s - Search across the file \n\\( \\) - Used to capture a group of text to be used in replace section \n\\_.* - Capture everything, including new lines \n\\1 - Insert captured group here  \n\\r - new line\n</code></pre>\n\n<p>I referred to following two sources: </p>\n\n<blockquote>\n  <p><a href=\"http://vim.wikia.com/wiki/Search_across_multiple_lines\" rel=\"nofollow noreferrer\">http://vim.wikia.com/wiki/Search_across_multiple_lines</a> &amp; \n  <a href=\"https://stackoverflow.com/questions/19902089/vim-regex-capture-groups\">Vim Regex Capture Groups</a></p>\n</blockquote>\n\n<p>Original text:\n<a href=\"https://i.stack.imgur.com/znPmO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/znPmO.png\" alt=\"enter image description here\"></a></p>\n\n<p>After Regex:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BVyVK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BVyVK.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 0, "creation_date": 1477030489, "post_id": 40169300, "comment_id": 67607116, "body": "Thanks Inian. Unfortunately, that solution works for only first pattern and reaming patterns remain as it is."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 2, "creation_date": 1477030606, "post_id": 40169300, "comment_id": 67607158, "body": "@DiveshRastogi: You provided only a single pattern in your question. What do you mean remaining patterns?"}], "tags": [], "owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "is_accepted": false, "score": 1, "last_activity_date": 1477029538, "last_edit_date": 1477029538, "creation_date": 1477029173, "answer_id": 40169300, "question_id": 40169037, "link": "https://stackoverflow.com/questions/40169037/move-a-pattern-from-specific-line-to-end-of-that-rule/40169300#40169300", "title": "Move a pattern from specific line to end of that rule", "body": "<p>You can use <a href=\"http://www.csb.yale.edu/userguides/wordprocess/vi-summary.html\" rel=\"nofollow\"><code>ex</code> text-editor</a> which is available in all Unix/Linux variants to achieve this, in simple/single line as</p>\n\n<pre><code>printf '%s\\n' '/hideOFF' 'd' '/}' '-' 'put' 'wq' | ex file\n</code></pre>\n\n<p>The <code>ex</code> editor constructs are similar to the <code>vi</code>'s syntax. The logic I adopted for this is as below (Remember as if you are opening the file in <code>vi</code>/<code>vim</code>)</p>\n\n<ol>\n<li>Searching for the pattern <code>hideOFF</code> as <code>'/hideOFF'</code>, deleting it using <code>d</code> command key.</li>\n<li>Now searching for the close-brace <code>/}</code>, <code>-</code> and <code>put</code> writes the line from the register above the brace</li>\n<li><code>wq</code> writes back the contents to the file.</li>\n</ol>\n\n<p>You can see it working below.</p>\n\n<pre><code>$ cat file\nrule tmap {\n\n  hideON\n   student_analysis Sam -expr \"marks(Sam)\" -gt 0\n  hideOFF\n\n  -Designate [ School = \"ABC]\n  -Designate [ Name = \"Sam\" ]\n  -Designate [ Country= \"ABC]\n  -Designate [ State = \"Sam\"]\n  -Designate [ ROLL Number= \"Sam\"]\n}\n</code></pre>\n\n<p>Running the command directly on command-line:-</p>\n\n<pre><code>$ printf '%s\\n' '/hideOFF' 'd' '/}' '-' 'put' 'wq' | ex file\n$ cat file\nrule tmap {\n\n  hideON\n   student_analysis Sam -expr \"marks(Sam)\" -gt 0\n\n  -Designate [ School = \"ABC]\n  -Designate [ Name = \"Sam\" ]\n  -Designate [ Country= \"ABC]\n  -Designate [ State = \"Sam\"]\n  -Designate [ ROLL Number= \"Sam\"]\n  hideOFF\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 0, "creation_date": 1477287165, "post_id": 40169342, "comment_id": 67686587, "body": "#!/usr/bin/tclsh set fileData [lindex $argv 0 ] set fp [open $fileData r] set data [read $fp] set lines [split [string trim $data] \\n] set hideoff {} foreach line $lines {   if {[regexp {^\\s<i>hideoff\\s</i>} $line match ] == 1 } {         set hideend $line    } elseif {[regexp {^\\s*\\}\\s*} $line match ] == 1 } {         puts $hideoff         puts $line     } else {         puts $line     } }"}, {"owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "edited": false, "score": 0, "creation_date": 1477287298, "post_id": 40169342, "comment_id": 67686640, "body": "Thanks Peter. I replaced string trim with regexp and it worked for my case. thanks for your help."}], "tags": [], "owner": {"reputation": 12685, "user_id": 488796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bec8145ec10828cf4988b6b2005bafa?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lewerin", "link": "https://stackoverflow.com/users/488796/peter-lewerin"}, "is_accepted": true, "score": 0, "last_activity_date": 1477043428, "last_edit_date": 1477043428, "creation_date": 1477029412, "answer_id": 40169342, "question_id": 40169037, "link": "https://stackoverflow.com/questions/40169037/move-a-pattern-from-specific-line-to-end-of-that-rule/40169342#40169342", "title": "Move a pattern from specific line to end of that rule", "body": "<p>(Tcl solution)\nYou can do that by reprinting lines. You look at them first, skip the line you want to move and then print it when you see the line you want it inserted before.</p>\n\n<pre><code>set lines [split [string trim $data] \\n]\n\nset hideoff {}\nforeach line $lines {\n    if {[string trim $line] eq \"hideOFF\"} {\n        set hideoff $line\n    } elseif {[string trim $line] eq \"\\}\"} {\n        puts $hideoff\n        puts $line\n    } else {\n        puts $line\n    }\n}\n</code></pre>\n\n<p>Another Tcl solution:</p>\n\n<pre><code>regsub -all {(\\s*hideOFF)([^\\}]+)} $data \\\\2\\\\1\\n\n</code></pre>\n\n<p>Both solutions work for multiple blocks. </p>\n\n<p>Documentation:\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/expr.htm\" rel=\"nofollow\" title=\"string equal to operator\">eq (operator)</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/foreach.htm\" rel=\"nofollow\" title=\"Iterate over all elements in one or more lists\">foreach</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/if.htm\" rel=\"nofollow\" title=\"Execute scripts conditionally\">if</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/puts.htm\" rel=\"nofollow\" title=\"Write to a channel\">puts</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/regsub.htm\" rel=\"nofollow\" title=\"Perform substitutions based on regular expression pattern matching\">regsub</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/set.htm\" rel=\"nofollow\" title=\"Read and write variables\">set</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/split.htm\" rel=\"nofollow\" title=\"Split a string into a proper Tcl list\">split</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/string.htm\" rel=\"nofollow\" title=\"Manipulate strings\">string</a>,\n<a href=\"http://www.tcl.tk/man/tcl/TclCmd/re_syntax.htm\" rel=\"nofollow\" title=\"Syntax of Tcl regular expressions\">Syntax of Tcl regular expressions</a></p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1477122455, "last_edit_date": 1477122455, "creation_date": 1477031202, "answer_id": 40169732, "question_id": 40169037, "link": "https://stackoverflow.com/questions/40169037/move-a-pattern-from-specific-line-to-end-of-that-rule/40169732#40169732", "title": "Move a pattern from specific line to end of that rule", "body": "<p>You need to re-write the file, and once you are doing that it's very simple with any language.  </p>\n\n<p>Go line by line and copy them to a new file. When you come to <code>hideOFF</code> line <em>do not write it</em> to the new file, just save into a variable. Then, when you come to the closing brace of that block write out the variable (with the line) and the brace.  This will have moved the line with <code>hideOFF</code> right before the line with the brace.  </p>\n\n<p>You'll need a flag to know when you enter and leave a block.</p>\n\n<p>Please try it out and let us know how it is going.</p>\n"}], "owner": {"reputation": 47, "user_id": 4065418, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/1616275414/picture?type=large", "display_name": "Divesh Rastogi", "link": "https://stackoverflow.com/users/4065418/divesh-rastogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1477047862, "accepted_answer_id": 40169342, "answer_count": 4, "score": -2, "last_activity_date": 1477287440, "creation_date": 1477027710, "last_edit_date": 1477287440, "question_id": 40169037, "link": "https://stackoverflow.com/questions/40169037/move-a-pattern-from-specific-line-to-end-of-that-rule", "closed_reason": "Needs more focus", "title": "Move a pattern from specific line to end of that rule", "body": "<p>I am wondering how can I move a pattern placed after certain line to another location of a rule.</p>\n\n<p>Consider the following example, </p>\n\n<pre><code>rule tmap {\n\n  hideON \n   student_analysis Sam -expr \"marks(Sam)\" -gt 0\n  hideOFF\n\n  -Designate [ School = \"ABC]\n  -Designate [ Name = \"Sam\" ]\n  -Designate [ Country= \"ABC]\n  -Designate [ State = \"Sam\"]\n  -Designate [ ROLL Number= \"Sam\"]\n}\n</code></pre>\n\n<p>where hideOFF needs to be moved from student_analysis to just before the end curly braces. Output file should have something like</p>\n\n<pre><code>rule tmap {\n\n      hideON \n       student_analysis Sam -expr \"marks(Sam)\" -gt 0\n\n\n      -Designate [ School = \"ABC]\n      -Designate [ Name = \"Sam\" ]\n      -Designate [ Country= \"ABC]\n      -Designate [ State = \"Sam\"]\n      -Designate [ ROLL Number= \"Sam\"]\n     hideOFF\n    }\n</code></pre>\n\n<p>Just to add these -Designate entries might be in a single row so number of row should not be a criterion. I might have my input file like</p>\n\n<pre><code> rule tmap {\n\n      hideON \n       student_analysis Sam -expr \"marks(Sam)\" -gt 0\n      hideOff\n\n      -Designate [ School = \"ABC] -Designate [ Name = \"Sam\" ] -Designate [ Country= \"ABC] -Designate [ State = \"Sam\"] -Designate [ ROLL Number= \"Sam\"]\n\n    }\n</code></pre>\n\n<p>In case if you need more clarification, please let me know.</p>\n\n<p>Final solution Based on Peters help</p>\n\n<pre><code>#!/usr/bin/tclsh\nset fileData [lindex $argv 0 ]\nset fp [open $fileData r]\nset data [read $fp]\nset lines [split [string trim $data] \\n]\nset hideoff {}\nforeach line $lines {\n  if {[regexp {^\\s*hideoff\\s*} $line match ] == 1 } {\n        set hideoff $line\n   } elseif {[regexp {^\\s*\\}\\s*} $line match ] == 1 } {\n        puts $hideoff\n        puts $line\n    } else {\n        puts $line\n    }\n}\n</code></pre>\n\n<p>Thanks everyone for so nice suggestions.</p>\n"}, {"tags": ["perl", "cgi-bin"], "answers": [{"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1477026214, "last_edit_date": 1477026214, "creation_date": 1477025292, "answer_id": 40168614, "question_id": 40168438, "link": "https://stackoverflow.com/questions/40168438/perl-cgi-bin-auto-complete/40168614#40168614", "title": "Perl cgi-bin auto complete", "body": "<p>Alone Perl-CGI it can't do.</p>\n\n<p>Try to use javascript inside your CGI script. I added the sample html and javascript below</p>\n\n<p>HTML code</p>\n\n<pre><code>&lt;form&gt;\n    &lt;input type=\"text\" id=\"someid\" onkeyup=\"myfunc()\" style=\"width:150px\"/&gt;\n        &lt;div id='auto_div' style=\"position:absolute; width:150px; height:100px;\"&gt;\n        &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Javascript with AJAX call</p>\n\n<pre><code>function myfunc()\n{\n    var val = document.getElementById(\"someid\").value;\n\n\n    xmlhttp.onreadystatechange=function()\n    {\n        if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)\n        {\n            var res = xmlhttp.responseText;         \n            document.getElementById(\"auto_div\").innerHTML= res;\n        }   \n    }\n\n    xmlhttp.open(\"GET\",\"database.pl?input_value=\"+val,true);\n    xmlhttp.send();\n}\n</code></pre>\n\n<p>Trigger the <code>myfunc</code> function on every keyup (<code>onkeyup()</code>) then get the value of input tag. Then pass the value from the DB connecting perl file using ajax the result of the output will store into the <code>res</code> variable then write the conent into the <code>auto_div</code></p>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1477026070, "post_id": 40168751, "comment_id": 67605447, "body": "@Atwal Okay well. How it will fetch from DB?"}, {"owner": {"reputation": 162, "user_id": 3539775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892a66074a0512f0fcf3018bb03d9a3d?s=128&d=identicon&r=PG", "display_name": "J Singh", "link": "https://stackoverflow.com/users/3539775/j-singh"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1477026168, "post_id": 40168751, "comment_id": 67605481, "body": "Using an AJAX call to make an HTTP request would be the right way. Check out below answer: <a href=\"http://stackoverflow.com/questions/29204934/how-to-populate-dependable-drop-down-using-ajax-and-php\" title=\"how to populate dependable drop down using ajax and php\">stackoverflow.com/questions/29204934/&hellip;</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1477036940, "post_id": 40168751, "comment_id": 67610436, "body": "Why use AJAX at all? If the list was small but is becoming <i>unmanagable</i> for a drop down we can asume that it&#39;s less than a few kilobyte. There is no harm in just building the whole <code>&lt;datalist&gt;</code> element will all <code>&lt;option&gt;</code>s in the backend and include it in the rendered HTML. You don&#39;t have to fetch everything asynchronously. Often the pragmatic way is not only the easiest, but also the most useful one."}], "tags": [], "owner": {"reputation": 162, "user_id": 3539775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892a66074a0512f0fcf3018bb03d9a3d?s=128&d=identicon&r=PG", "display_name": "J Singh", "link": "https://stackoverflow.com/users/3539775/j-singh"}, "is_accepted": false, "score": 3, "last_activity_date": 1478018723, "last_edit_date": 1478018723, "creation_date": 1477026013, "answer_id": 40168751, "question_id": 40168438, "link": "https://stackoverflow.com/questions/40168438/perl-cgi-bin-auto-complete/40168751#40168751", "title": "Perl cgi-bin auto complete", "body": "<p>HTML5 has a nifty tag for Autocomplete Dropdown, <code>&lt;datalist&gt;</code>. Below is the usage definition for this tag as found on w3schools.com:</p>\n\n<blockquote>\n  <p>Definition and Usage The <code>&lt;datalist&gt;</code> tag specifies a list of\n  pre-defined options for an <code>&lt;input&gt;</code> element.</p>\n  \n  <p>The <code>&lt;datalist&gt;</code> tag is used to provide an \"autocomplete\" feature on\n   elements. Users will see a drop-down list of pre-defined\n  options as they input data.</p>\n  \n  <p>Use the <code>&lt;input&gt;</code> element's list attribute to bind it together with a\n  <code>&lt;datalist&gt;</code> element.</p>\n</blockquote>\n\n<p>Code Example:</p>\n\n<pre><code>&lt;input list=\"browsers\"&gt;\n\n&lt;datalist id=\"browsers\"&gt;\n  &lt;option value=\"Internet Explorer\"&gt;\n  &lt;option value=\"Firefox\"&gt;\n  &lt;option value=\"Chrome\"&gt;\n  &lt;option value=\"Opera\"&gt;\n  &lt;option value=\"Safari\"&gt;\n&lt;/datalist&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/KPXvf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KPXvf.png\" alt=\"enter image description here\"></a></p>\n\n<p>For more details, refer to this link: <a href=\"http://www.w3schools.com/tags/tag_datalist.asp\" rel=\"nofollow noreferrer\">http://www.w3schools.com/tags/tag_datalist.asp</a></p>\n"}], "owner": {"reputation": 382, "user_id": 1074593, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/706d207f52039950986cf38f096d7fa7?s=128&d=identicon&r=PG", "display_name": "user1074593", "link": "https://stackoverflow.com/users/1074593/user1074593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 40168614, "answer_count": 2, "score": 0, "last_activity_date": 1478018723, "creation_date": 1477024147, "question_id": 40168438, "link": "https://stackoverflow.com/questions/40168438/perl-cgi-bin-auto-complete", "title": "Perl cgi-bin auto complete", "body": "<p>I have a very simple website that I built using Perl cgi-bin. I have one form field that displays all the application codes in my small company. Since the application list was small, I used a simple drop down list. However, with growing number of applications, the drop down is turning out to be unmanageable. Is it possible to use auto-complete for this field using Perl cgi ?</p>\n\n<p>Edit : The application names are stored in a database table. I pull the application list from the database.</p>\n"}, {"tags": ["javascript", "perl"], "comments": [{"owner": {"reputation": 1136, "user_id": 4421782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5c7fb77e4052aaf554aec08e3e8f2212?s=128&d=identicon&r=PG&f=1", "display_name": "RJM", "link": "https://stackoverflow.com/users/4421782/rjm"}, "edited": false, "score": 2, "creation_date": 1477018319, "post_id": 40167525, "comment_id": 67603530, "body": "You need boil your huge amount of code down to a minimal example that exhibits the problem, and then post that example."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1477028100, "post_id": 40167525, "comment_id": 67606165, "body": "Tip: <code>my $username = defined param(&quot;username&quot;) ? param(&quot;username&quot;) : undef;</code> can be shortened to <code>my $username = param(&quot;username&quot;);</code>"}, {"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477032483, "post_id": 40167525, "comment_id": 67608074, "body": "@ikegami thanks I&#39;ll keep that in mind :)"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "edited": false, "score": 0, "creation_date": 1477032441, "post_id": 40169825, "comment_id": 67608051, "body": "I wanted to avoid cookies and databases. Is there any other option?"}, {"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "edited": false, "score": 0, "creation_date": 1477035077, "post_id": 40169825, "comment_id": 67609464, "body": "So I implemented cookies in one scenario but I&#39;m hitting an error. I added an extra line in the cgi: <code>my $CookieMessage = defined param(&quot;CookieMessage&quot;) ? param(&quot;CookieMessage&quot;) : undef;</code>  and another extra line in the GUI code: <code>query += &quot;&amp;CookieMessage=&quot; + encodeURIComponent(document.cookie);</code> but when the email goes out through PERL, <code>$CookieMessage</code> turns out to be empty"}, {"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "edited": false, "score": 0, "creation_date": 1477035300, "post_id": 40169825, "comment_id": 67609569, "body": "I also noticed that when I read the cookie in the GUI, it gives me the correct value along with some other unnecessary values. <code>document.cookie = returnedResult[&quot;message&quot;]; alert(document.cookie);</code>"}, {"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "edited": false, "score": 0, "creation_date": 1477035610, "post_id": 40169825, "comment_id": 67609739, "body": "Okay I could solve my first issue. Turns out I was inserting the statement in the wrong place. But I still don&#39;t understand why I get extra information like <code>s_nr=1476866212523; username=nikhilh; </code> in the cookie value"}, {"owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "edited": false, "score": 0, "creation_date": 1477037442, "post_id": 40169825, "comment_id": 67610708, "body": "Okay solved the second issue as well. Turns out I wasn&#39;t deleting the previous cookies so they kinda got appended. Thanks @duskwuff for pointing out that cookies are the only way to go :)"}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1477031547, "creation_date": 1477031547, "answer_id": 40169825, "question_id": 40167525, "link": "https://stackoverflow.com/questions/40167525/retaining-the-value-of-a-variable-in-perl/40169825#40169825", "title": "Retaining the value of a variable in Perl", "body": "<p><code>state</code> only preserves the value of a variable within a single process. When running as CGI, there's a new process for each HTTP request.</p>\n\n<p>If you want to store state across requests, you will need to persist it somewhere that survives across requests -- for instance, by storing it in a cookie, in a session, or in a database.</p>\n"}], "owner": {"reputation": 301, "user_id": 6173767, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-qPqJcB8w5ec/AAAAAAAAAAI/AAAAAAAAAhM/EDZ9zfjf6G8/photo.jpg?sz=128", "display_name": "Nikhil Hegde", "link": "https://stackoverflow.com/users/6173767/nikhil-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 40169825, "answer_count": 1, "score": -1, "last_activity_date": 1477031547, "creation_date": 1477017690, "last_edit_date": 1477028200, "question_id": 40167525, "link": "https://stackoverflow.com/questions/40167525/retaining-the-value-of-a-variable-in-perl", "title": "Retaining the value of a variable in Perl", "body": "<p>I've a GUI front-end (HTML and JavaScript) a Perl back-end. On clicking a certain button on the home page of the front-end, the Perl back-end receives a specific argument. So this argument leads to change of value of a variable (<code>$checkInfo</code>) which is then given back to the GUI. The GUI now pops up a message which displays <code>$checkInfo</code> and on closing the pop-up, another page (say page 2) opens. On page 2 is a certain button which emails <code>$checkInfo</code> to a certain email address.</p>\n\n<p>The problem I'm facing is that <code>$checkInfo</code> is equal to <code>\"\"</code> on page 2. On page 1, the back-end returns <code>$checkInfo = something</code> to the GUI but that value is lost when I go to page 2. I've tried declaring $value as <code>state $checkInfo</code> but that doesn't work either. I use <code>$checkInfo</code> only in the <code>main()</code> function.</p>\n\n<p>In the code, all you need to know is that <code>preSubmitCheck::autoSubmitCheck</code> return the value such that <code>$checkInfo-&gt;{rc} != 0</code> and in the first iteration <code>$mode ne 'ticket'</code> but <code>$mode eq 'ticket'</code> in the second iteration. In the second iteration, I need the value of $checkInfo to be the same as the first iteration value. </p>\n\n<p>Perl code:</p>\n\n<pre><code>my $username = defined param(\"username\") ? param(\"username\") : undef;\nmy $action = defined param(\"run_type\") ? param(\"run_type\") : undef;\nmy $cit_suite = defined param(\"cit_suite\") ? param(\"cit_suite\") : undef;\nmy $buildroot = defined param(\"buildroot\") ? param(\"buildroot\") : undef;\nmy $site = defined param(\"site\") ? lc(param(\"site\")) : undef;\nmy $branch = defined param(\"branch\") ? param(\"branch\") : undef;\nmy $hw = defined param(\"hw\") ? param(\"hw\") : undef;\nmy $variant = defined param(\"variant\") ? param(\"variant\") : undef;\nmy $num_runs = defined param(\"num_runs\") ? param(\"num_runs\") : undef;\nmy $justification = defined param(\"justification\") ? param(\"justification\") : undef;\nmy $mode = defined param(\"userAction\") ? param(\"userAction\") : undef;\nmy $jobID = defined param(\"jobID\") ? param(\"jobID\") : undef;\nmy $cancel_type = defined param(\"canceltype\") ? param(\"canceltype\") : undef;\n\n    state $checkInfo;\n    my $error;\n    my %rtn = (\n           rc =&gt; 0,\n           message =&gt; \"All is well.\"\n           );\n\n    if($mode ne \"ticket\") {\n        $checkInfo = preSubmitCheck::autoSubmitCheck($site,$username,$num_runs);\n    }\n    if(defined $checkInfo &amp;&amp; $checkInfo-&gt;{rc} == 0){\n        my $target = 1;\n    }\n    else {\n        if($mode eq \"ticket\"){\n            $error = $checkInfo-&gt;{message};\n            my $rtnFromTicket = sendTicket(\n                username =&gt; $username,\n                cit_suite =&gt; $cit_suite,\n                action =&gt; $action,\n                buildroot =&gt; $buildroot,\n                site =&gt; $site,\n                branch =&gt; $branch,\n                hw =&gt; $hw,\n                variant =&gt; $variant,\n                num_runs =&gt; $original_num_runs,\n                justification =&gt; $justification,\n                errorMessage =&gt; $error\n               );\n            $rtn{rc} = 2;\n            $allMessage .= \" Your job couldn't be automatically submitted: \". $error;\n            $allMessage .= \" Email info: \". $rtnFromTicket -&gt; {message};\n            $rtn{message} = $allMessage;\n            print \"00delimiter00\";       # use as a delimiter to split from useless print information, and make the front end got the json data.\n            print to_json(\\%rtn);\n            exit $rtn{rc};\n        }\n        else{\n            $error = $checkInfo-&gt;{message};\n            $rtn{rc} = $checkInfo-&gt;{rc};\n            if($rtn{rc} == 6) {\n                $allMessage .= \" Your job couldn't be automatically submitted: \". $error. \" You can schedule your run or open a ticket with the SMOKES team.\";\n            }\n            else {\n                $allMessage .= \" Your job couldn't be automatically submitted: \". $error;\n            }\n            $rtn{message} = $allMessage;\n            print \"00delimiter00\";       # use as a delimiter to split from useless print information, and make the front end got the json data.\n            print to_json(\\%rtn);\n            exit $rtn{rc};\n        }\n     }\n</code></pre>\n\n<p>GUI code:</p>\n\n<pre><code>var query = \"username=&lt;% $ARGS{username} %&gt;\";\nif(Mode==\"all\"){\n    query += \"&amp;run_type=Presub_smoke\";\n} \nelse {\n    query += \"&amp;run_type=CIT\" + \"&amp;cit_suite=\" + document.getElementById(\"citsuite\").value;\n}\nquery += \"&amp;buildroot=\" + encodeURIComponent(document.getElementById(\"buildroot\").value);\nquery += \"&amp;site=\" + encodeURIComponent(document.getElementById(\"remoteSite\").value);\nquery += \"&amp;branch=\" + encodeURIComponent(document.getElementById(\"branch\").value);\nquery += \"&amp;hw=\" + encodeURIComponent(document.getElementById(\"hwtype\").value);\nquery += \"&amp;variant=\" + encodeURIComponent(document.getElementById(\"variant\").value);\nquery += \"&amp;num_runs=\" + document.getElementById(\"num_runs\").value;\nquery += \"&amp;justification=\" + encodeURIComponent(document.getElementById(\"justification\").value);\nquery += \"&amp;userAction=\" + encodeURIComponent(action);\nvar submitFcts = new Array();\nsubmitFcts[3] = \"updateSubmitInfo\";\nsubmitFcts[4] = \"return_request\";\nmakeUserRequest2(\"&lt;% $CGI_form_path %&gt;\", query, submitFcts, \"\");\n</code></pre>\n\n<p>I hope this suffices for answering my question. Thanks!</p>\n"}, {"tags": ["perl", "loops", "syntax", "while-loop", "factorial"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1477027939, "post_id": 40166563, "comment_id": 67606108, "body": "Factorial is actually defined for zero (0! = 1), so you should be asking for a non-negative number instead"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1477015855, "post_id": 40166632, "comment_id": 67602964, "body": "pause doesn&#39;t do what sleep does, I think: <a href=\"https://technet.microsoft.com/en-us/library/cc732683(v=ws.11).aspx\" rel=\"nofollow noreferrer\">technet.microsoft.com/en-us/library/cc732683(v=ws.11).aspx</a>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1477018559, "post_id": 40166632, "comment_id": 67603577, "body": "@ysth Yeah. What I really think is going on is Windows has a tendency to immediately close the window upon program termination. I&#39;ve seen variations on this to prevent that from happening. One is to use <code>&lt;STDIN&gt;</code> to wait until the user hits enter."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1477027458, "post_id": 40166632, "comment_id": 67605928, "body": "also, the original program was completely correct except that it should have said <code>print length $fact</code> instead if <code>print $fact</code>.  (just kidding)"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1477010366, "last_edit_date": 1495535552, "creation_date": 1477010366, "answer_id": 40166632, "question_id": 40166563, "link": "https://stackoverflow.com/questions/40166563/perl-short-factorial-calculator-returning-long-strings-of-1s/40166632#40166632", "title": "perl - short factorial calculator returning long strings of 1&#39;s", "body": "<p>The problem is this line:</p>\n\n<pre><code>$fact = $fact x $num;\n</code></pre>\n\n<p><a href=\"http://perldoc.perl.org/perlop.html#Multiplicative-Operators\" rel=\"nofollow noreferrer\"><code>x</code></a> is not the multiplication operator in Perl. It is used to repeat things. <code>1 x 5</code> will produce <code>\"11111\"</code>.</p>\n\n<p>Instead you want <code>*</code>.</p>\n\n<pre><code>$fact = $fact * $num;\n</code></pre>\n\n<p>Which can be written using <code>*=</code>.</p>\n\n<pre><code>$fact *= $num;\n</code></pre>\n\n<hr>\n\n<p>A few other issues...</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8023959/ddg#8024241\">Get used to <code>strict</code> and <code>warnings</code> now</a>. By default, Perl will let you use variables without declaring them. They are global, which is bad for reasons you'll learn later. Right now it means if you have a typo in a variable name like <code>$face</code> Perl won't tell you about it.</p>\n\n<p>Looping over a list of numbers is better done with a <code>for</code> loop over a <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">range using <code>..</code></a>.</p>\n\n<pre><code># Loop from 1 to $num setting $factor each time.\nfor my $factor (1..$num) {\n    $fact *= $factor;\n}\n</code></pre>\n\n<p>Instead of using a system call to pause the program, use <a href=\"http://perldoc.perl.org/functions/sleep.html\" rel=\"nofollow noreferrer\"><code>sleep</code></a>.</p>\n"}], "owner": {"reputation": 35, "user_id": 7050573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f66e9486d840be7ef68987ea5ea7b40?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan B", "link": "https://stackoverflow.com/users/7050573/ryan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 40166632, "answer_count": 1, "score": 3, "last_activity_date": 1477010366, "creation_date": 1477009738, "question_id": 40166563, "link": "https://stackoverflow.com/questions/40166563/perl-short-factorial-calculator-returning-long-strings-of-1s", "title": "perl - short factorial calculator returning long strings of 1&#39;s", "body": "<p>I'm trying to make a program that calculates the factorial of a number. I'm not very familiar with perl, so I think I'm missing some grammar rule.</p>\n\n<p>When I enter 5 the program should return 120. Instead it returns a few dozen 1's. When I try other numbers I still get 1's, but more or less of them depending on if I enter a higher or lower number.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>print\"enter a positive # more than 0: \\n\";\n\n$num = &lt;STDIN&gt;;\n$fact = 1;\n\nwhile($num&gt;1)\n(\n    $fact = $fact x $num;\n    $num = $num - 1;\n)\n\nprint $fact;\nsystem(\"pause\");\n</code></pre>\n\n<p>This is my first post to stack Overflow, so I hope I obeyed all theposting rules.</p>\n"}, {"tags": ["perl", "stderr"], "comments": [{"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1477008512, "post_id": 40166280, "comment_id": 67601358, "body": "<a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/open.html</a> - Search for the word &quot;dup&quot;"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1477012626, "post_id": 40166280, "comment_id": 67602234, "body": "@Miller I want it not to go to the screen and only to the file"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1477073520, "last_edit_date": 1477073520, "creation_date": 1477015825, "answer_id": 40167280, "question_id": 40166280, "link": "https://stackoverflow.com/questions/40166280/how-to-redirect-stderr-within-script/40167280#40167280", "title": "How to redirect STDERR within script?", "body": "<p>This is what I do</p>\n\n<pre><code>open STDERR, '&gt;', \"$errfile\"\n    or warn \"Cannot redirect STDERR to $errfile: $!\";\n</code></pre>\n\n<p>If this is in a library, call <code>carp</code> instead of <code>warn</code>. That requires <code>use Carp;</code>, for core module <a href=\"http://perldoc.perl.org/Carp.html\" rel=\"nofollow\">Carp</a>.</p>\n\n<p>In case the <code>STDERR</code> stream will need to be restored first save it, as shown in <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\">open</a>.</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477073520, "creation_date": 1477007448, "last_edit_date": 1477064787, "question_id": 40166280, "link": "https://stackoverflow.com/questions/40166280/how-to-redirect-stderr-within-script", "title": "How to redirect STDERR within script?", "body": "<p>I can redirect <code>STDERR</code> from the command line by doing:</p>\n\n<pre><code>perl myscript.pl 2&gt; err.txt\n</code></pre>\n\n<p>How can I do this within the script so that the person running the script doesn't have to do it?</p>\n"}, {"tags": ["apache", "perl", "cgi"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1477065955, "post_id": 40165874, "comment_id": 67629442, "body": "Works for me. It might help to show your Apache config."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1477065871, "post_id": 40166076, "comment_id": 67629397, "body": "Where does the OP say he&#39;s using suexec? SetEnv works fine without it."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1477067817, "post_id": 40166076, "comment_id": 67630449, "body": "It&#39;s a best guess. suexec is on by default in many web server configurations, and it neatly explains why environment variables would be missing."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1477067865, "last_edit_date": 1477067865, "creation_date": 1477006048, "answer_id": 40166076, "question_id": 40165874, "link": "https://stackoverflow.com/questions/40165874/setenv-or-passenv-variables-for-cgi-bin-perl-script/40166076#40166076", "title": "SetEnv or PassEnv Variables for cgi bin perl script", "body": "<p>For security reasons, Apache's <a href=\"https://httpd.apache.org/docs/current/suexec.html\" rel=\"nofollow\">suexec</a> wrapper clears all environment variables that don't appear on its whitelist. Generally speaking, this whitelist only includes variables that are part of the CGI interface: <code>DOCUMENT_ROOT</code>, <code>REQUEST_METHOD</code>, <code>SCRIPT_FILENAME</code>, <em>etc</em>, as well as any variable starting with <code>HTTP_</code> (from HTTP headers).</p>\n\n<p>Unfortunately, this makes <code>SetEnv</code> basically useless when suexec is enabled. This is a known limitation, but is difficult to solve without introducing potential security vulnerabilities.</p>\n"}], "owner": {"reputation": 8641, "user_id": 732539, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d33cc4a619410535e0176138c6971ba3?s=128&d=identicon&r=PG", "display_name": "K2xL", "link": "https://stackoverflow.com/users/732539/k2xl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1477067865, "creation_date": 1477004715, "question_id": 40165874, "link": "https://stackoverflow.com/questions/40165874/setenv-or-passenv-variables-for-cgi-bin-perl-script", "title": "SetEnv or PassEnv Variables for cgi bin perl script", "body": "<p>Have an apache project and a perl script in cgi-bin that needs to read from env variables.</p>\n\n<p>Using <code>PassEnv</code> or <code>SetEnv</code> in the apache config the variables don't show up when looping through the env variables in perl</p>\n\n<p><code>foreach $key (sort keys(%ENV)) {\n  print \"$key = $ENV{$key}&lt;p&gt;\";\n}\n</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["perl", "mailx"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1476997708, "post_id": 40164438, "comment_id": 67597873, "body": "Are you sure this is the whole Perl file? What is <code>MAIL</code>?"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 2, "creation_date": 1476999087, "post_id": 40164438, "comment_id": 67598536, "body": "Always put <code>use strict; use warnings;</code> !!!"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1477001283, "post_id": 40164438, "comment_id": 67599473, "body": "And check the return values of <code>open</code> and, for pipes, maybe <code>close</code> as well."}], "answers": [{"tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 2, "last_activity_date": 1477051615, "last_edit_date": 1477051615, "creation_date": 1476999314, "answer_id": 40164944, "question_id": 40164438, "link": "https://stackoverflow.com/questions/40164438/mailx-not-sending-email-in-perl/40164944#40164944", "title": "Mailx not sending email in Perl", "body": "<p>Tested OK (note <code>mail -v</code>):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; use warnings;\n\nsub emailSender{ \n   my $RECIPIENT = 'test@test.com';\n   my $FROM = 'test@test.com';\n   my $SUBJECT = \"test subject\";\n   my $BODY = shift;\n\n   open (MAIL, \"|mail -v -s \\\"$SUBJECT\\\" $RECIPIENT\");\n   print MAIL $BODY;\n   close MAIL;\n}\n\nemailSender(\"This is a test\");\n</code></pre>\n\n<p>But for the coding style, I would keep UPPER CASE VARIABLES only for system or Perl internals</p>\n"}], "owner": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582254485, "creation_date": 1476997147, "last_edit_date": 1476999125, "question_id": 40164438, "link": "https://stackoverflow.com/questions/40164438/mailx-not-sending-email-in-perl", "title": "Mailx not sending email in Perl", "body": "<p>I am trying to send an email in perl to myself and I can not get mailx to work correctly. Here is the whole perl file I have:</p>\n\n<pre><code>#!/usr/bin/perl\n\nsub emailSender{\n   $RECIPIENT = \"test\\@test.com\";\n   $FROM = \"test\\@test.com\";\n   $SUBJECT = \"test subject\";\n   $BODY = @_[0];\n\n   open (MAIL, \"|mailx -s \\\"$SUBJECT\\\" $RECIPIENT\");\n   print MAIL $BODY;\n   close MAIL;\n}\n\nemailSender(\"This is a test\");\n</code></pre>\n\n<p>I am not getting any errors or warnings when I run the script. It runs correctly but does not send an email. Am I missing something here? I can't find anything in the manual.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1476995541, "post_id": 40163731, "comment_id": 67596824, "body": "Contrary to what you said, <code>&amp;$f</code> doesn&#39;t check if there are any negative values in <code>@A</code>. It simply checks if <i>its argument</i>, <code>$x</code>, is negative."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1476995547, "post_id": 40163731, "comment_id": 67596833, "body": "Have a look at the rest of your code and show where <code>$f</code> is set. There must be some <code>$f = \\&amp;actual_function;</code> or <code>$f = sub {\u2026};</code>. And <i>that</i> is the function that gets called for each <code>$x</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476995816, "post_id": 40163731, "comment_id": 67596987, "body": "For all we know, <code>$f-&gt;()</code> could be <code>sub { -1 }</code>. We don&#39;t know what it does."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476995853, "post_id": 40163731, "comment_id": 67597000, "body": "@simbabque, Except we were told, even though somewhat incorrectly."}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1476994975, "creation_date": 1476994975, "answer_id": 40163863, "question_id": 40163731, "link": "https://stackoverflow.com/questions/40163731/need-to-know-how-the-following-code-works/40163863#40163863", "title": "Need to know how the following code works", "body": "<p><code>$f</code> isn't a function, it's a <em>reference</em> to a function.  So, you're looping through each value in the array <code>@A</code>, setting <code>$x</code> to each in turn, and using that <code>$x</code> as a parameter to whatever function <code>$f</code> points at.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1476995067, "creation_date": 1476995067, "answer_id": 40163888, "question_id": 40163731, "link": "https://stackoverflow.com/questions/40163731/need-to-know-how-the-following-code-works/40163888#40163888", "title": "Need to know how the following code works", "body": "<p>Your <code>$f</code> is a code reference, not a function. That means it can be passed around like any other variable. It takes one argument (each element of <code>@A</code> in turn), and returns something that is then inverted. Without seeing the definition of <code>$f</code>, we can't explain how it works.</p>\n\n<p>If you don't know where it's defined in your code, you could use <a href=\"https://metacpan.org/pod/B::Deparse\" rel=\"nofollow\">B::Deparse</a> to take a look. Just put this over your <code>foreach</code> loop and then run. It will output an approximation of the code that was used to define <code>$f</code>.</p>\n\n<pre><code>require B::Deparse;\nprint B::Deparse-&gt;new-&gt;coderef2text($f);\n# foreach ...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6929156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d857c478e605a1e8e176d152154fc3e7?s=128&d=identicon&r=PG&f=1", "display_name": "CHANDNI MITTAL", "link": "https://stackoverflow.com/users/6929156/chandni-mittal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1476995067, "creation_date": 1476994484, "last_edit_date": 1476994728, "question_id": 40163731, "link": "https://stackoverflow.com/questions/40163731/need-to-know-how-the-following-code-works", "title": "Need to know how the following code works", "body": "<pre><code>foreach my $x (@A) {  # read: \"for each element x in array A ...\"\n    if ( ! ($f-&gt;($x)) ) {\n        $answer = 0;\n    }\n}\n</code></pre>\n\n<p>I came across these lines of code. <code>f</code> appears to be a function for checking if there are any negative values in array, return false, if all values are true, only then return true. But I did not get how function <code>f</code> can do this.</p>\n"}, {"tags": ["bash", "perl", "openssl", "centos6"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476992101, "post_id": 40162613, "comment_id": 67594966, "body": "We&#39;re missing too much code to answer your questions. <code>$self</code> is the object, and <code>$self-&gt;{openssl}</code> is an attribute of that object. It in turn contains another object, because it&#39;s calling the method <code>cmd</code> on it. Please look for other occurrences of <code>$self-&gt;{openssl}</code>, preferably the one where it&#39;s defined. Also include the top of the program with all the <code>use</code> and <code>require</code> statements."}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476992640, "post_id": 40162613, "comment_id": 67595289, "body": "You are right and I knew it from the outset.  The whole script is available at the public github repository given in the introduction: <a href=\"https://github.com/byrnejb/rcsp\" rel=\"nofollow noreferrer\">github.com/byrnejb/rcsp</a> .  What I have posted here is overlong as it is."}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476993097, "post_id": 40162613, "comment_id": 67595549, "body": "And I discovered the technically correct answer to my question as posed. the system call is at the tail end of the script as shown in the additional code fragment I just posted.  I just do not know how that portion of the script gets invoked from where the command line is created. And that is essentially what I need explained to me."}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476993698, "post_id": 40162613, "comment_id": 67595903, "body": "I updated the code fragments with the script header info requested.  There are dozens of lines containing  <code>$self-&gt;{openssl}</code>.  What would the definition statement look like?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476993878, "post_id": 40162613, "comment_id": 67595994, "body": "I found it already on github. It&#39;s a CSP::OpenSSL object. That class is defined in the same file. There are several <code>package</code>s in that one .pm file. <a href=\"https://github.com/byrnejb/rcsp/blob/master/CSP.pm#L1401\" rel=\"nofollow noreferrer\">Here</a> it is pushing to some handle. That might be where it issues the command. I&#39;m still reading code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476994407, "post_id": 40162613, "comment_id": 67596247, "body": "Start reading from <a href=\"https://github.com/byrnejb/rcsp/blob/master/CSP.pm#L1358\" rel=\"nofollow noreferrer\">github.com/byrnejb/rcsp/blob/master/CSP.pm#L1358</a>. it uses <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a> to open a pipe that it can read and write to in pieces. So the commands get issued where it <code>pump</code>s into the handle. The debug just shows the commands it runs."}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476996045, "post_id": 40162613, "comment_id": 67597095, "body": "I am actually working on the csp040 branch.  The file you found in the root directory is not used anywhere - it was just copied there at some point to aid in restoring things to their original condition in the blib/lib directory. It is gone from the working branch.  That said I have located the statement in the working copy and am now reading on how this stuff is supposed to work.   I will have other questions once I have digested the new material."}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477411266, "post_id": 40162613, "comment_id": 67751384, "body": "This is the line in the working copy of CSP.pm <a href=\"https://github.com/byrnejb/rcsp/blob/csp040/blib/lib/CSP.pm#L1442\" rel=\"nofollow noreferrer\">github.com/byrnejb/rcsp/blob/csp040/blib/lib/CSP.pm#L1442</a>"}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477421788, "post_id": 40162613, "comment_id": 67757511, "body": "I tracked this problem down to the presence of single quotes surrounding the password input string.  Without the quotes a password with a space in it causes the openssl comand to fail.  With the quotes the openssl command works if the pas phrase contains a space but perl will not execute the openssl command."}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477427046, "post_id": 40162613, "comment_id": 67760510, "body": "@simbabque If you would like to enter the answer to this question, which is essentially found in your last comment, then I will mark it as correct."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477471896, "post_id": 40162613, "comment_id": 67776667, "body": "I think you should answer the question yourself. If you feel you don&#39;t deserve the credit, make it community wiki, but I feel you did most of the work, so you should just answer yourself. You can quote my comment if it helped. ;)"}, {"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1477490318, "post_id": 40162613, "comment_id": 67789016, "body": "It helped. A great deal."}], "answers": [{"tags": [], "owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "is_accepted": true, "score": 0, "last_activity_date": 1477491330, "last_edit_date": 1477491330, "creation_date": 1477490947, "answer_id": 40264543, "question_id": 40162613, "link": "https://stackoverflow.com/questions/40162613/how-and-where-is-openssl-called-in-this-script/40264543#40264543", "title": "How and Where is OpenSSL called in this script?", "body": "<p>Per @simbabque comment the place that the openssl call is made is here:</p>\n\n<pre><code>1398    use IPC::Run qw( start pump finish timeout new_appender new_chunker);\n        . . .\n1418    sub cmd\n1419      {\n1420        my $self = shift;\n1421        my $cmd = shift;\n1422        my $cmdline = shift;\n1423        my $args = shift;\n1424        \n1425        my $conf;\n1426        my $cfgcmd;\n        . . .\n1448        $self-&gt;{_handle}-&gt;pump while length ${$self-&gt;{_in}};\n        . . .\n</code></pre>\n\n<p>The underlying difficulty is the use of embedded white-space in the pass-phrase.  As written the code passes arguments to <code>IPC:Run</code> as a concatenated string.  For arguments passed as a string IPC:Run uses white-space as an argument delimiter. The correct method of dealing with this is to refactor the code to use an array to pass arguments instead.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11807814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660701d78d78cd3df443496af9abe082?s=128&d=identicon&r=PG", "display_name": "leifj", "link": "https://stackoverflow.com/users/11807814/leifj"}, "is_accepted": false, "score": 0, "last_activity_date": 1563533301, "creation_date": 1563533301, "answer_id": 57110874, "question_id": 40162613, "link": "https://stackoverflow.com/questions/40162613/how-and-where-is-openssl-called-in-this-script/57110874#57110874", "title": "How and Where is OpenSSL called in this script?", "body": "<p>I'm the original author of that package and I abandoned it long ago for reasons that should be apparent. Go take a look at <a href=\"https://github.com/leifj/ici\" rel=\"nofollow noreferrer\">https://github.com/leifj/ici</a> for something a bit more maintainable (even tho its just basically bash-scripts)</p>\n"}], "owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 40264543, "answer_count": 2, "score": 1, "last_activity_date": 1563533301, "creation_date": 1476990461, "last_edit_date": 1477491147, "question_id": 40162613, "link": "https://stackoverflow.com/questions/40162613/how-and-where-is-openssl-called-in-this-script", "title": "How and Where is OpenSSL called in this script?", "body": "<p>centos-6.8\nperl, v5.10.1 (*) built for x86_64-linux-thread-multi</p>\n\n<p>I am attempting to update a Perl script called CSP. My experience with the script is limited to running it on rare occasions when we needed a new server certificate. I contacted the author of the original script, Leif Johansson, but I did not receive a response. The revised project that I am presently working on and refer to below can be found at <a href=\"https://github.com/byrnejb/rcsp/tree/csp040\" rel=\"nofollow\">https://github.com/byrnejb/rcsp/tree/csp040</a>.</p>\n\n<p>That is the background.  My programming experience with Perl is negligible.  Thus my questions here may be naive. </p>\n\n<p>I have these code fragments in <code>./blib/lib/CSP.pm</code>:</p>\n\n<pre><code>. . .\npackage CSP;\n\nuse strict;\nuse vars qw($VERSION @ISA @EXPORT @EXPORT_OK);\n\nrequire Exporter;\nrequire AutoLoader;\nuse IO::File;\nuse Term::Prompt;\nuse POSIX qw(strftime);\nuse Date::Calc qw(Day_of_Week Gmtime Add_Delta_Days Add_Delta_DHMS);\nuse Sys::Hostname;\n\n@ISA = qw(Exporter AutoLoader);\n# Items to export into callers namespace by default. Note: do not export\n# names by default without a very good reason. Use EXPORT_OK instead.\n# Do not simply export all your public functions/methods/constants.\n@EXPORT = qw();\n@EXPORT_OK = qw($_openssl);\n$VERSION = '0.40';\n\n\n# Preloaded methods go here.\n\n# Autoload methods go after =cut, and are processed by the autosplit program.\n\n$CSP::_openssl='openssl';\n\n. . .\n\n$CSP::_openssl='openssl';\n. . .\nsub genkey\n  {\n    my $self = shift;\n    my $args = shift;\n\n    $self-&gt;die(\"Required parameter keyfile missing\")\n      unless $args-&gt;{keyfile};\n\n    $args-&gt;{keysize} = 4096 unless $args-&gt;{keysize} &gt; 0;\n    $args-&gt;{keypass} = \"'\" . $self-&gt;getPassword(\"Private key password\",1) . \"'\"\n      unless $args-&gt;{keypass};\n\n    $self-&gt;warn(\"# Password argument: $args-&gt;{keypass}\\n\") if $ENV{CSPDEBUG};\n\n    my $cmd = \"-out $args-&gt;{keyfile} $args-&gt;{keysize}\";\n    $cmd = \"-des3 -passout pass:$args-&gt;{keypass} \".$cmd if defined($args-&gt;{keypass});\n    $self-&gt;{openssl}-&gt;cmd('genrsa',$cmd,$args);\n  }\n\n ## Generate and optionally self-sign the request\n  my $process;\n  my $what;\n  my $common_args = \"-$args-&gt;{digest} -days $args-&gt;{days} \".\n    \" -key $cakey -passin pass:$args-&gt;{keypass}\";\n  if ($args-&gt;{csrfile})\n    {\n      $self-&gt;{openssl}-&gt;cmd('req',\"-new $common_args -out $args-&gt;{csrfile}\",$args);\n      $what = \"generated CA request for\";\n    }\n  else\n    {\n      $self-&gt;{openssl}-&gt;cmd('req',\"-x509 $common_args -new -out $cacert\",$args);\n      $what = \"initialized self-signed\";\n    }\n\n  $self-&gt;warn(\"Successfully $what CA $self-&gt;{name}\")\n    if $args-&gt;{verbose};\n      }\n  }\n\nsub checkCA\n  {\n    my $self = shift;\n    my $dir = $self-&gt;caDir();\n\n    $self-&gt;die(\"Uninitialized CA: missing or unreadable ca certificate in $dir\")\n      unless -r \"$dir/ca.crt\";\n\n    $self-&gt;die(\"Uninitialized CA: missing or unreadable ca private key in $dir\")\n      unless -r \"$dir/private/ca.key\";\n\n    $dir;\n  }\n. . .\n</code></pre>\n\n<p>And towards the end of the script file this:</p>\n\n<pre><code>. . .\n    $self-&gt;{csp} = $csp;\n\n    $cmd = '' if $cmd eq 'dummy';\n\n    my $engine = \"-engine opensc\" if $ENV{CSP_OPENSC};\n\n    my $redirect = ($args-&gt;{verbose} == 0 &amp;&amp; $rw ne 'r' ? \"&gt;/dev/null 2&gt;&amp;1\" : \"\");\n    warn \"${lp}$self-&gt;{openssl} $cmd $cfgcmd $cmdline ${redirect}${rp}\"\n      if $ENV{CSPDEBUG};\n    if ($rw eq 's')\n      {\n  $self-&gt;{rc} = system(\"$self-&gt;{openssl} $cmd $engine $cfgcmd $cmdline ${redirect}\");\n      }\n    else\n      {\n  open $self-&gt;{fh},\"${lp}$self-&gt;{openssl} $cmd $engine $cfgcmd $cmdline ${redirect}${rp}\" or\n    $self-&gt;{csp}-&gt;die(\"Unable to execute: $!\");\n      }\n\n    $self;\n  }\n. . .\n</code></pre>\n\n<p>When I run this using the following command line with debugging on:</p>\n\n<pre><code>csp HLL_ROOT init \\\n  --keysize=4096 \\\n  --days=7318 \\\n  --url=ca.harte-lyne.ca \\\n  --email=certificates@harte-lyne.ca \\\n  --digest=sha512 \\\n  --verbose \\\n  \"CN=HLL_ROOT,OU=Networked Data Services,O=Harte &amp; Lyne Limited,L=Hamilton,ST=Ontario,C=CA,DC=harte-lyne,DC=ca\"\n</code></pre>\n\n<p>Then I see this:</p>\n\n<pre><code>openssl genrsa  -des3 -passout pass:'a test' -out /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/private/ca.key 4096\n</code></pre>\n\n<p>followed by:</p>\n\n<pre><code>openssl genrsa  -des3 -passout pass:'a test' -out /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/private/ca.key 4096\n</code></pre>\n\n<p>and ending with:</p>\n\n<pre><code>[CSP][HLL_ROOT] Successfully initialized self-signed CA HLL_ROOT\n</code></pre>\n\n<p>However, the expected outputs of ca.key and ca.crt are not found in the directories shown as arguments in the commands above.  </p>\n\n<pre><code>$ find /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT -name ca\\.\\*\n$ \n</code></pre>\n\n<p>Yet, if I copy and paste those exact commands into my bash session shell they work.</p>\n\n<pre><code>openssl genrsa  -des3 -passout pass:'a test' -out /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/private/ca.key 4096\nGenerating RSA private key, 4096 bit long modulus\n.....................................++\n........................++\ne is 65537 (0x10001)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>openssl req  -config /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/tmp/csp-8154.conf  -x509 -sha512 -days 7318  -key /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/private/ca.key -passin pass:'a test' -new -out /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/ca.crt\n</code></pre>\n\n<p>yields:</p>\n\n<pre><code>$ find /home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT -name ca\\.\\*\n/home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/private/ca.key\n/home/byrnejb/Projects/Software/rcsp/ca_test_a/csp/HLL_ROOT/ca.crt\n</code></pre>\n\n<p>That seems to me that the commands are being created properly but that the openssl utility is not being called.  As there is no branching code in the section where these commands are generated I conclude that the construct  <code>$self-&gt;{openssl}-&gt;cmd('req',\"-x509 $common_args -new -out $cacert\",$args);</code> is the actual call to openssl but I do not know how this is meant to work.</p>\n\n<p>How is this supposed to work?  Why is it not working?  </p>\n\n<p>And should not the return code from openssl be checked?</p>\n"}, {"tags": ["regex", "perl", "gnu", "raspberry-pi2"], "comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1477367492, "post_id": 40162021, "comment_id": 67724931, "body": "Note that your Perl command assigns a string <i>literal</i> to variable <code>$t</code>. <code>grep -o</code> relates to the <code>grep</code> <i>utility</i>, which is unrelated to Perl. How do shell scripts enter the picture?"}], "answers": [{"tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": true, "score": 1, "last_activity_date": 1477382135, "last_edit_date": 1477382135, "creation_date": 1476988877, "answer_id": 40162131, "question_id": 40162021, "link": "https://stackoverflow.com/questions/40162021/extracting-data-from-a-file-using-perl/40162131#40162131", "title": "extracting data from a file using perl", "body": "<p>The <em>proper way</em> :</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; use warnings;\n\nmy $fic = './Fruit.txt';\n\nopen my $fh, \"&lt;\", $fic\n    or die(\"An error hapenned opening file\\n\");\n\nwhile (&lt;$fh&gt;) {\n    print if /Apple/i;\n}\n\nclose $fic;\n</code></pre>\n\n<p>Or :</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict; use warnings;\n\nwhile (&lt;&gt;) {\n    print if /Apple/i;\n}\n</code></pre>\n\n<p>Usage : </p>\n\n<pre><code>./script.pl Fruits.txt\n</code></pre>\n\n<p>Or the concise way: </p>\n\n<pre><code>perl -ne 'print if /whatever/' file\n</code></pre>\n\n<p>The bad way (non portable) that you seems to try :</p>\n\n<pre><code>my $file = qx(cat Fruits.txt);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $file = `cat Fruits.txt`;\n           ~              ~\n</code></pre>\n\n<p>Note <em>the backticks</em></p>\n"}, {"tags": [], "owner": {"reputation": 430, "user_id": 661440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd32692c3bb8c4161d4e78c9041abb69?s=128&d=identicon&r=PG", "display_name": "Finbar Crago", "link": "https://stackoverflow.com/users/661440/finbar-crago"}, "is_accepted": false, "score": 1, "last_activity_date": 1477025480, "creation_date": 1477025480, "answer_id": 40168648, "question_id": 40162021, "link": "https://stackoverflow.com/questions/40162021/extracting-data-from-a-file-using-perl/40168648#40168648", "title": "extracting data from a file using perl", "body": "<pre><code># Rather than rely on the external program cat\n# you can \"slurp\" the contents of Fruits.txt into $t.\n\nopen my $fh, \"&lt;\", \"Fruits.txt\";\nmy $t = do { local $/; &lt;$fh&gt; };\nclose $fh;    \n\n\n# The following is true if 'apple' appears anywhere in $t\n# (it will also match 'apples', 'grappled', etc...)\n\nif($t =~ /apple/){\n    print \"There is an apple!\\n\";\n}\n\n# If Fruits.txt is more structured, you can also do things like:    \n\nprint \"There is a $1!\\n\" if $t =~ /^fruit=(.+)/;\n</code></pre>\n\n<p>I recommend a read of <a href=\"http://perldoc.perl.org/perlrequick.html\" rel=\"nofollow\">perlrequick</a> for more information on regular expressions.</p>\n"}, {"comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 1, "creation_date": 1477232671, "post_id": 40176973, "comment_id": 67672528, "body": "<code>perl -ne &#39;print if &#47;whatever&#47;&#39; &lt;FILE_PATH&gt;</code>"}], "tags": [], "owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1477053769, "creation_date": 1477053769, "answer_id": 40176973, "question_id": 40162021, "link": "https://stackoverflow.com/questions/40162021/extracting-data-from-a-file-using-perl/40176973#40176973", "title": "extracting data from a file using perl", "body": "<p>Perl line command \"ultra lazy\" trick:</p>\n\n<pre><code>perl -e 'while(&lt;&gt;){print \"\\n$_\\n\" if $_ =~ /whatever/}' &lt;FILE_PATH&gt;\n</code></pre>\n\n<p>:V</p>\n"}], "owner": {"reputation": 37, "user_id": 6143001, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4987e0eef989e4c87c3366b0f76dfc20?s=128&d=identicon&r=PG&f=1", "display_name": "maria", "link": "https://stackoverflow.com/users/6143001/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "accepted_answer_id": 40162131, "answer_count": 3, "score": -1, "last_activity_date": 1477382135, "creation_date": 1476988485, "last_edit_date": 1477086084, "question_id": 40162021, "link": "https://stackoverflow.com/questions/40162021/extracting-data-from-a-file-using-perl", "title": "extracting data from a file using perl", "body": "<p>Using Perl in Shell script, I am trying to extract word \"apple\" from a text file called \"Fruit.txt\"(The file holds name of different fruits) </p>\n\n<p>For that I created a created a script as follow:</p>\n\n<pre><code>#!/usr/bin/perl\n$t = 'cat Fruit.txt';\n</code></pre>\n\n<p>How can I now extract substring (in this case apple) from this file using grep - o. Thank you</p>\n"}, {"tags": ["regex", "string", "perl", "count"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1476988191, "post_id": 40161858, "comment_id": 67592715, "body": "You&#39;re using <code>m&#47;&#47;g</code> in scalar context, which steps through the string match-by-match."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1476988233, "post_id": 40161858, "comment_id": 67592741, "body": "Don&#39;t use <code>-w</code> (it&#39;s been obsolete since 2000, when <code>use warnings;</code> was introduced)."}, {"owner": {"reputation": 23, "user_id": 7049473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26737f5f41820d078c8e21cc866d65a5?s=128&d=identicon&r=PG&f=1", "display_name": "sfoy", "link": "https://stackoverflow.com/users/7049473/sfoy"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1476990041, "post_id": 40161858, "comment_id": 67593824, "body": "Thank you for telling me about the <code>-w</code>. I did not know that.  You&#39;re right, the <code>m&#47;&#47;g</code> is in scalar context, but the @instance_array should convert that into list context. The command seems to work fine without the conditional, I just don&#39;t know what happened to the &quot;CD&quot; when the conditional is added."}, {"owner": {"reputation": 23, "user_id": 7049473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26737f5f41820d078c8e21cc866d65a5?s=128&d=identicon&r=PG&f=1", "display_name": "sfoy", "link": "https://stackoverflow.com/users/7049473/sfoy"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1476991008, "post_id": 40161858, "comment_id": 67594371, "body": "<a href=\"http://stackoverflow.com/questions/1849329/is-there-a-perl-shortcut-to-count-the-number-of-matches-in-a-string]\" title=\"is there a perl shortcut to count the number of matches in a string%5d\">stackoverflow.com/questions/1849329/&hellip;</a> Discusses using this technique to count the number of matches in a query string. I know others have used the technique; I just do not know why it is not including &quot;CD&quot; when counting."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7049473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26737f5f41820d078c8e21cc866d65a5?s=128&d=identicon&r=PG&f=1", "display_name": "sfoy", "link": "https://stackoverflow.com/users/7049473/sfoy"}, "edited": false, "score": 0, "creation_date": 1476996058, "post_id": 40163536, "comment_id": 67597107, "body": "Thank you Davvid. I tested the <code>pos</code> command in various places throughout my code and I understand what is going on now. Thank you so much for your help and the excellent explanation."}], "tags": [], "owner": {"reputation": 1529, "user_id": 6711406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abb204a87fed156f928c702a4806513?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Grabowski", "link": "https://stackoverflow.com/users/6711406/dave-grabowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1476993786, "creation_date": 1476993786, "answer_id": 40163536, "question_id": 40161858, "link": "https://stackoverflow.com/questions/40161858/counting-strings-in-regexs-after-a-conditional-in-perl/40163536#40163536", "title": "Counting Strings in Regexs After A Conditional in Perl", "body": "<p>Just remove <code>/g</code> in your condition i.e.:</p>\n\n<pre><code>if ($string =~ m/C./g)\n</code></pre>\n\n<p>For the <code>if</code> condition you shouldn't use <code>/g</code>. This is because it's changing the <code>pos</code> of the regex. You can use it, though, e.g. in <code>while</code> loop.</p>\n\n<p>To see how it's being changed you can print it after that <code>if</code> statement:</p>\n\n<pre><code>print pos $string;\n</code></pre>\n\n<p>You will see that it's changed to <code>4</code>. To reset the pos:</p>\n\n<pre><code>pos($string) = 0;\n</code></pre>\n\n<p>However, it's not recommended. Just don't use <code>/g</code> in the <code>if</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6698345, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yJoNMUHFb-Q/AAAAAAAAAAI/AAAAAAAAAD0/mb1vzLz_yIs/photo.jpg?sz=128", "display_name": "EvilArtist", "link": "https://stackoverflow.com/users/6698345/evilartist"}, "is_accepted": false, "score": 0, "last_activity_date": 1477029736, "last_edit_date": 1477029736, "creation_date": 1477029586, "answer_id": 40169386, "question_id": 40161858, "link": "https://stackoverflow.com/questions/40161858/counting-strings-in-regexs-after-a-conditional-in-perl/40169386#40169386", "title": "Counting Strings in Regexs After A Conditional in Perl", "body": "<p>try this: </p>\n\n<pre><code>my @matches = ($string =~ /(regex)/g);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 631, "user_id": 6252353, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh3.googleusercontent.com/-g5fley8sHyg/AAAAAAAAAAI/AAAAAAAAAeg/R_WrMAny8wg/photo.jpg?sz=128", "display_name": "Andre Carneiro", "link": "https://stackoverflow.com/users/6252353/andre-carneiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1477055369, "creation_date": 1477055369, "answer_id": 40177522, "question_id": 40161858, "link": "https://stackoverflow.com/questions/40161858/counting-strings-in-regexs-after-a-conditional-in-perl/40177522#40177522", "title": "Counting Strings in Regexs After A Conditional in Perl", "body": "<p>About your regex \"/C./\"</p>\n\n<p>This certainly will be a problem because you're not restricting the regex criteria. The character '.' as you're using means \"literally\" <strong>anything</strong> to Perl regex engine. Now, supposing that you're trying to find <strong>the character</strong> '.', you must escape the \".\" character inside your regex statement like this: </p>\n\n<pre><code>/^C\\.$/\n</code></pre>\n\n<p>If you want to capture the \"matches\", you must mark what you want to bring from each match with groups between parenthesis. Something like that:</p>\n\n<p>/(whatever)(foo)(bar)/</p>\n\n<p>Matches results in Perl are stored in special variables and are submited to scope rules. Some variables are $_, $1, $2,..., \"$n\" when '$n' is the nth group defined inside the regular expression, and is just \"illustrative\" and doesn't exists as special variable in fact. Considering the example above:</p>\n\n<pre><code>my $string = \"Perl regex rocks!\";\nmy ($match1, $match2, $match3) = ($1,$2,$3) if $string =~ /^(\\w+)\\s(\\w+)\\s(\\w+)!$/;\n\n#$match1 = \"Perl\"\n#$match2 = \"regex\"\n#$match3 = \"rocks\"\n</code></pre>\n\n<p>Links of Perl regular expression: </p>\n\n<p><a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">http://perldoc.perl.org/perlre.html</a></p>\n\n<p><a href=\"http://perldoc.perl.org/perlreref.html\" rel=\"nofollow\">http://perldoc.perl.org/perlreref.html</a></p>\n\n<p>Beautiful book about Regular expressions(tons of examples in Perl)</p>\n\n<p><a href=\"http://shop.oreilly.com/product/9780596528126.do\" rel=\"nofollow\">http://shop.oreilly.com/product/9780596528126.do</a></p>\n"}], "owner": {"reputation": 23, "user_id": 7049473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26737f5f41820d078c8e21cc866d65a5?s=128&d=identicon&r=PG&f=1", "display_name": "sfoy", "link": "https://stackoverflow.com/users/7049473/sfoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 40163536, "answer_count": 3, "score": 2, "last_activity_date": 1477055369, "creation_date": 1476987955, "question_id": 40161858, "link": "https://stackoverflow.com/questions/40161858/counting-strings-in-regexs-after-a-conditional-in-perl", "title": "Counting Strings in Regexs After A Conditional in Perl", "body": "<p>Storing all matching strings in an array in Perl does not seem to work correctly if I do it after a simple conditional involving the query string. Does anyone know why this is? I have some code below that illustrates this:</p>\n\n<pre><code>#!/usr/local/bin/perl -w\n\nuse warnings;\nuse strict;\n\nmy  ($string,    \n    @instance_array,   \n    );\n\n$string = 'ABCDCECFCG';\nprint \"String: $string\\n\\n\";\n\n# PRINT INSTANCE ARRAY BEFORE CONDITIONAL\n@instance_array = $string =~ m/C./g;\nprint \"BEFORE CONDITIONAL\\n@instance_array\\n\"; print scalar @instance_array; print \"\\n\\n\";\nundef @instance_array;\n\n##############################################\n\n#if (@instance_array = $string =~ m/C./g)\nif ($string =~ m/C./g)\n    {\n    # PRINT INSTANCE ARRAY INSIDE CONDITIONAL\n    print \"INSIDE CONDITIONAL\\n@instance_array\\n\"; print scalar @instance_array; print \"\\n\\n\";        \n    };\n\nprint \"String: $string\\n\\n\";    \nundef @instance_array;\n\n############################################\n\n# PRINT INSTANCE ARRAY AFTER CONDITIONAL\n@instance_array = $string =~ m/C./g;\nprint \"AFTER CONDITIONAL\\n@instance_array\\n\"; print scalar @instance_array; print \"\\n\\n\";\nundef @instance_array;\n\n# PRINT FINAL INSTANCE ARRAY\n@instance_array = $string =~ m/C./g;\nprint \"AFTER CONDITIONAL\\n@instance_array\\n\"; print scalar @instance_array; print \"\\n\\n\";\nundef @instance_array;\n\nexit;\n</code></pre>\n\n<p>Notice that the \"BEFORE CONDITIONAL\" @instance_array output is correct (i.e., there are four matches for the regex), the one inside the conditional is undefined (as it should be), but the \"AFTER CONDITIONAL\" @instance_array is missing the \"CD\" match. Also notice that the \"FINAL\" @instance_array is also correct, even though it is the exact same code as that used to print the \"AFTER CONDITIONAL\" @instance_array. </p>\n\n<p>According to the $string print statement after the conditional, the conditional does not appear change the query $string in any way. </p>\n\n<p>Another interesting thing to note: If I send all the matches to the @instance_array in the simple conditional (this line is commented out above the simple conditional), then all four matches are correctly placed in the array. </p>\n\n<p>Does anyone know why the initial match (\"CD\") is not entering the @instance_array? Perhaps it is storing the \"CD\" match in an internal variable (like $1, even though I know this is not quite correct) and not properly reinitializing it after the conditional?</p>\n\n<p>Thank you for your help everyone.</p>\n"}, {"tags": ["perl", "nginx", "docker", "load-balancing"], "comments": [{"owner": {"reputation": 4800, "user_id": 4930423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d0eea67e2712f2444609d636a6e9ca?s=128&d=identicon&r=PG", "display_name": "programmerq", "link": "https://stackoverflow.com/users/4930423/programmerq"}, "edited": false, "score": 0, "creation_date": 1476986647, "post_id": 40160933, "comment_id": 67591765, "body": "What does the &quot;fails to execute login&quot; look like? a 502 error? something else?"}, {"owner": {"reputation": 4800, "user_id": 4930423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d0eea67e2712f2444609d636a6e9ca?s=128&d=identicon&r=PG", "display_name": "programmerq", "link": "https://stackoverflow.com/users/4930423/programmerq"}, "edited": false, "score": 2, "creation_date": 1476986701, "post_id": 40160933, "comment_id": 67591802, "body": "It looks like your pearlbee and pearlbee2 service are identical. It might be better to define only one service, and then scale it to two instances with <code>docker-compose scale pearlbee=2</code>"}, {"owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "reply_to_user": {"reputation": 4800, "user_id": 4930423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d0eea67e2712f2444609d636a6e9ca?s=128&d=identicon&r=PG", "display_name": "programmerq", "link": "https://stackoverflow.com/users/4930423/programmerq"}, "edited": false, "score": 0, "creation_date": 1476992786, "post_id": 40160933, "comment_id": 67595378, "body": "Its not an 502 error it just returns me to the same page ...."}, {"owner": {"reputation": 1247, "user_id": 5105757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65536e6866a9bbbf2a400baa624b4980?s=128&d=identicon&r=PG", "display_name": "Keenan Lawrence", "link": "https://stackoverflow.com/users/5105757/keenan-lawrence"}, "edited": false, "score": 0, "creation_date": 1477042238, "post_id": 40160933, "comment_id": 67613547, "body": "As programmerq said, the services are identical if they&#39;re the same server. If you&#39;re only running one server, change the port number to something else"}, {"owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "reply_to_user": {"reputation": 4800, "user_id": 4930423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d0eea67e2712f2444609d636a6e9ca?s=128&d=identicon&r=PG", "display_name": "programmerq", "link": "https://stackoverflow.com/users/4930423/programmerq"}, "edited": false, "score": 0, "creation_date": 1477159805, "post_id": 40160933, "comment_id": 67656667, "body": "I&#39;ve deleted my &#39;pearlbee2 service&#39; and played with docker-compose scale pearlbee=2. It starts new instances of pearlbee but when i checked inside the &#39;nginx container&#39; with &#39;nslookup&#39; igot only one ip listed. So i think that the load balancer doset work poperly. The output of <code>nslookup</code>was : <code>Address 1: 172.22.0.5 settingupnginx_pearlbee_1.settingupnginx_default</code> @programmerq @Keenan Lawrence"}, {"owner": {"reputation": 4800, "user_id": 4930423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d0eea67e2712f2444609d636a6e9ca?s=128&d=identicon&r=PG", "display_name": "programmerq", "link": "https://stackoverflow.com/users/4930423/programmerq"}, "edited": false, "score": 1, "creation_date": 1477206068, "post_id": 40160933, "comment_id": 67665917, "body": "Take a look at my github repository I created to illustrate how all this works: <a href=\"https://github.com/programmerq/scaletest\" rel=\"nofollow noreferrer\">github.com/programmerq/scaletest</a>  If you try to resolve <code>pearlbee</code>, it should return all the containers associated with that service."}, {"owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "reply_to_user": {"reputation": 4800, "user_id": 4930423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d0eea67e2712f2444609d636a6e9ca?s=128&d=identicon&r=PG", "display_name": "programmerq", "link": "https://stackoverflow.com/users/4930423/programmerq"}, "edited": false, "score": 0, "creation_date": 1477212797, "post_id": 40160933, "comment_id": 67667227, "body": "Thanks you very much programmerq adding a resolver like your example suggest added the missing containers. @programmerq"}, {"owner": {"reputation": 1720, "user_id": 989659, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/84d2d1476d96b093bd0f180412db2460?s=128&d=identicon&r=PG", "display_name": "Srgrn", "link": "https://stackoverflow.com/users/989659/srgrn"}, "edited": false, "score": 0, "creation_date": 1497164148, "post_id": 40160933, "comment_id": 75956900, "body": "so what was the solution? i&#39;m using <a href=\"https://github.com/jwilder/nginx-proxy\" rel=\"nofollow noreferrer\">github.com/jwilder/nginx-proxy</a> which acutally can configure it for you automatically. however you hadn&#39;t specifed the error so i guess you solved it?"}], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1476984883, "creation_date": 1476984883, "question_id": 40160933, "link": "https://stackoverflow.com/questions/40160933/failing-to-debug-nginx-load-balancer", "title": "Failing to debug Nginx load-balancer", "body": "<p>I'm trying to set up a load balancer using Nginx for a perl Dancer2 app which runs inside docker containers. \nAnd i have this problem i don't know how to debug:\nIf in my <code>nginx.conf</code>  i set  just one server in to the <code>upstrem block it runs fine.</code> But the second i add an other server it fails to execute login\nMy <code>nginx.conf</code> file looks like this:</p>\n\n<pre><code>worker_processes 2;\nevents { worker_connections 512; }\nhttp {\n\n\n    upstream pb {\n\n        server pearlbee:5000 weight=10 max_fails=3 fail_timeout=30s; \n        server pearlbee2:5000 weight=10 max_fails=3 fail_timeout=30s; \n    }\n\n\n\n    server {\n\n    listen *:80;\n        location / {\n\n\n        proxy_pass http://pb;\n\n\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n\n\n        #proxy_redirect     off;\n        #proxy_set_header   Host $host;\n        #proxy_set_header   X-Real-IP $remote_addr;\n        #proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n        #proxy_set_header   X-Forwarded-Host $server_name;\n\n    }\n\n }\n\n}\n</code></pre>\n\n<p>My <code>docker-compose</code> file looks like this :</p>\n\n<pre><code>version: '2'\nservices:\n  web:\n    image: nginx\n    ports:\n      - \"80:80\"\n    volumes:\n      # here i pass my configuration to nginx \n       - ./nginx.conf:/etc/nginx/nginx.conf\n    links:\n      - pearlbee  \n    volumes_from:\n      - pearlbee  \n  pearlbee:\n    build: pearlbee\n    command: carton exec  starman   bin/app.psgi\n    #ports:\n     #- \"5000:5000\"\n\n    volumes:\n      - ./config.yml:/config.yml  \n    environment:\n      - MYSQL_PASSWORD=secret\n\n    depends_on:\n      - mysql\n  pearlbee2:\n    build: pearlbee\n    command: carton exec  starman   bin/app.psgi\n    ports:\n     - \"5000\"\n\n    volumes:\n      - ./config.yml:/config.yml  \n    environment:\n      - MYSQL_PASSWORD=secret\n\n    depends_on:\n      - mysql    \n  mysql:\n    image: mysql\n    environment:\n      - MYSQL_ROOT_PASSWORD=secret\n      - MYSQL_USER=root    \n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1476983958, "creation_date": 1476983958, "answer_id": 40160660, "question_id": 40160064, "link": "https://stackoverflow.com/questions/40160064/perl-use-variable-under-a-pattern-regex/40160660#40160660", "title": "perl use variable under a pattern regex", "body": "<p>Single quotes don't interpolate variables; double quotes do.</p>\n\n<pre><code>my $project = \"SDK\"; # or whatever\nmy $JIRA_regex = \"(^| )($project)-(\\\\d+)\";\nprint \"pattern = $JIRA_regex\\n\";\n</code></pre>\n\n<p>(Note that I had to escape the backslash to get a literal <code>\\d</code> into the string.)</p>\n\n<p>There are some other things to consider:</p>\n\n<ul>\n<li>Is <code>$project</code> supposed to be interpreted as a regex? (Probably not, in which case it should be wrapped in <code>\\Q</code> <code>\\E</code> or <code>quotemeta()</code>.)</li>\n<li>Does <code>$JIRA_regex</code> have to be a plain string? If not, it's easier to make it a regex object.</li>\n</ul>\n\n<p>In which case a better solution would be:</p>\n\n<pre><code>my $project = \"SDK\"; # or whatever\nmy $JIRA_regex = qr/(^| )(\\Q$project\\E)-(\\d+)/;\nprint \"pattern = $JIRA_regex\\n\";\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7049167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/299315324aa69ea16fb93bc073b970f6?s=128&d=identicon&r=PG&f=1", "display_name": "elmak", "link": "https://stackoverflow.com/users/7049167/elmak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1205, "favorite_count": 0, "accepted_answer_id": 40160660, "answer_count": 1, "score": -2, "last_activity_date": 1477120310, "creation_date": 1476981859, "last_edit_date": 1477120310, "question_id": 40160064, "link": "https://stackoverflow.com/questions/40160064/perl-use-variable-under-a-pattern-regex", "title": "perl use variable under a pattern regex", "body": "<p>How to use variable in the pattern ? </p>\n\n<p>Please I want to this :</p>\n\n<pre><code>my $project=\"SDK\" //or something that i will get it after calling some function.\nmy $JIRA_regex = '(^| )($project)-(\\d+)';\nprint \"pattern = $JIRA_regex\\n\";\n</code></pre>\n\n<p>Output is not good : </p>\n\n<pre><code>(^| )($project)-(\\d+)\n</code></pre>\n\n<hr>\n\n<p>Thank you :)</p>\n\n<p>1 - Yes I want to use $project, as string value to match or a regex too:</p>\n\n<p>2 - $JIRA_regex will be matched further on the code.</p>\n\n<p>This is my code that it works fine now :</p>\n\n<pre><code>my $repo=$ARGV[0];\nmy $comment=$ARGV[1];\n\nmy $project_pattern=\"[A-Z]{2,5}\";\n\nif ($repo =~ \"test1.git\" or $repo =~ \"test2.git\")\n{\n    $project_pattern = \"\\QSDK\\E\";\n}\n\nmy $JIRA_regex = \"(^| )($project_pattern)-(\\\\d+)\";\n\nif ( $comment =~ /$JIRA_regex/m )\n{\n    print \"matched $2-$3\\n\";\n}\nelse\n{\n    print \"not matched\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl", "xlsx", "corrupt"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1476976427, "post_id": 40158171, "comment_id": 67585447, "body": "Your description of the problem is very vague."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1476977793, "post_id": 40158171, "comment_id": 67586405, "body": "I think that at the very least we&#39;d need to know how you were generating the XLSX file. Can you give us a minimal example that we can run?"}, {"owner": {"reputation": 1445, "user_id": 78792, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4aacb6b73ab7fb4bcfd1772745475d3?s=128&d=identicon&r=PG", "display_name": "benrifkah", "link": "https://stackoverflow.com/users/78792/benrifkah"}, "edited": false, "score": 0, "creation_date": 1476984904, "post_id": 40158171, "comment_id": 67590698, "body": "Have you checked to see if this problem is only happening on certain versions of Excel? Did someone change your script recently without you knowing it? Have any Perl modules it&#39;s using been updated? Have you recently started getting the data from a different source? Try disabling the code that generates &quot;/xl/worksheets/sheet1.xml&quot; if possible. Do you still get the problem?"}, {"owner": {"reputation": 555, "user_id": 1560371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/24aaf6434f3d900036367ef49faf55b5?s=128&d=identicon&r=PG", "display_name": "Arthur bauer", "link": "https://stackoverflow.com/users/1560371/arthur-bauer"}, "edited": false, "score": 0, "creation_date": 1477042857, "post_id": 40158171, "comment_id": 67613979, "body": "&gt;Have you checked to see if this problem is only happening on certain versions of Excel?"}], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 1560371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/24aaf6434f3d900036367ef49faf55b5?s=128&d=identicon&r=PG", "display_name": "Arthur bauer", "link": "https://stackoverflow.com/users/1560371/arthur-bauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1477321220, "creation_date": 1477321220, "answer_id": 40221559, "question_id": 40158171, "link": "https://stackoverflow.com/questions/40158171/find-corrupt-data-in-xlsx-file/40221559#40221559", "title": "Find corrupt data in xlsx file", "body": "<p><br/> As expected, the problem was coming from text cells containing numbers having an E in the middle.<br/>I used the following steps to identify the erronous cells.<br/>\n1. Wrote small Java class to read the file. The class was checking the cell type and displaying the value afterwards.<br/>The java program generated an Exception at some line \"Cannot get a numeric value from a text cell\" even If I was correctly checking the cell type before displaying the content.<br/>\n2. I checked the opened Excel file at that line and found that the cell contains only 'inf'.<br/>\n3. I  opened the file using open office and looked at the same cells. They contain 0.<br/>\n4. I debugged the program generating the data and found out that these cells contain data like '914E5514'. Seems that E which was interpreted by Excel as an exponent.<br/>We changed the program to use the format '@' for that cell and this solved the issue.<br/>\nThank you.</p>\n"}, {"tags": [], "owner": {"reputation": 850, "user_id": 5951401, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6f1d76341f66d519a026366df8e2653a?s=128&d=identicon&r=PG", "display_name": "ChrisRob", "link": "https://stackoverflow.com/users/5951401/chrisrob"}, "is_accepted": false, "score": 0, "last_activity_date": 1590668347, "creation_date": 1590668347, "answer_id": 62064537, "question_id": 40158171, "link": "https://stackoverflow.com/questions/40158171/find-corrupt-data-in-xlsx-file/62064537#62064537", "title": "Find corrupt data in xlsx file", "body": "<p>Thank you very much, you helped me a lot by saying that 1 particular content item may be the root problem.</p>\n\n<p>My corrupted content was <code>https://www.example.com XYZ ... ASDAS</code> \nSolution: <code>www.example.com XYZ ... ASDAS</code> </p>\n\n<p>This is something which cannot be handled by excel. Would be nice to have a list of thing which do not work</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15716025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce0fd7dabc03da0c71e43df52f74248?s=128&d=identicon&r=PG&f=1", "display_name": "ZorroOP", "link": "https://stackoverflow.com/users/15716025/zorroop"}, "is_accepted": false, "score": -1, "last_activity_date": 1619072464, "last_edit_date": 1619072464, "creation_date": 1618999784, "answer_id": 67193710, "question_id": 40158171, "link": "https://stackoverflow.com/questions/40158171/find-corrupt-data-in-xlsx-file/67193710#67193710", "title": "Find corrupt data in xlsx file", "body": "<p>I gather that you are using perl script and have been facing the usual Excel corruption related to \u201cUnreadable content\u201d. After being on many forums and Q &amp; As, I found out that this happens mostly in large sized Excel files or files with complex formulae. Please don\u2019t worry, there are many workarounds to fix this. I am sharing them below:</p>\n<p>Workaround 1 : Move the Excel File to a New Folder</p>\n<p>Some of the users have reported that they were able to open their Excel file, following the \u2018Excel unreadable content\u2019 error, by simply moving the file to a different folder. I hope this works for you as well.</p>\n<p>Workaround 2: Install Visual Basic Component</p>\n<p>At times, it is found that installing the 'Visual Basic' component of MS Office 2010 resolves error message. To do so, follow these steps:</p>\n<p>\u2022   Go to Control Panel &gt;&gt; Programs &gt;&gt; select Microsoft Office 2010.</p>\n<p>\u2022   Tap Change, and then select Add or Remove Programs.</p>\n<p>\u2022   Next, click the \u201c + \u201c sign provided next to Office Shared Features.</p>\n<p>\u2022   Click Visual Basic for Applications. After that, right-click and choose Run from My Computer, and hit the Continue button.</p>\n<p>\u2022   Reboot your system when this process finishes.</p>\n<p>\u2022   Now check if the issue has been resolved or not.</p>\n<p>You can check out this <a href=\"https://social.technet.microsoft.com/Forums/Lync/en-US/e5692c4a-924d-44a5-985b-7878f3eb26de/corrupted-excel-file-repair?forum=excel\" rel=\"nofollow noreferrer\">thread</a></p>\n"}], "owner": {"reputation": 555, "user_id": 1560371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/24aaf6434f3d900036367ef49faf55b5?s=128&d=identicon&r=PG", "display_name": "Arthur bauer", "link": "https://stackoverflow.com/users/1560371/arthur-bauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1556, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1619072464, "creation_date": 1476975992, "last_edit_date": 1476977306, "question_id": 40158171, "link": "https://stackoverflow.com/questions/40158171/find-corrupt-data-in-xlsx-file", "title": "Find corrupt data in xlsx file", "body": "<p>We are generating xlsx files using a perl script. Files usually contains thousands of records. This makes spotting errors a very difficult operation.\nThis process was working since years without problems.<br/>\nThis week we got a request to check a file which contains errors. While opening Excel prompted that the file contains errors and asked whether we want to repair them.<br/>\n<a href=\"https://i.stack.imgur.com/KRLNS.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/KRLNS.jpg\" alt=\"enter image description here\"></a>\nIn fact we do not want to recover the data but want to know which part of the file is corrupt. The error should be coming from corrupt data and we are interested to identify these data.\nthe log message shows the following:<br/></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n    &lt;recoveryLog xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"&gt;\n&lt;logFileName&gt;error068200_01.xml&lt;/logFileName&gt; &lt;/br&gt;\n&lt;summary&gt;Errors were detected in file 'D:\\Temp\\20161020\\file_name.xlsx'&lt;/summary&gt;\n&lt;repairedRecords summary=\"Following is a list of repairs:\"&gt;&lt;repairedRecord&gt;Repaired Records: Cell information from /xl/worksheets/sheet1.xml part&lt;/repairedRecord&gt;\n&lt;/repairedRecords&gt;\n&lt;/recoveryLog&gt;\n</code></pre>\n\n<p>The error should come from corrupt data. Is there any tool/method which helps to spot this corrupt data? \nI tried renaming it a zip file, extracting it and opening it via an XML editor but was not able to find any errors in XML file.<br/>\nWe also checked that the different XML file structures are fine.</p>\n\n<p>Thank you and best regards</p>\n"}, {"tags": ["regex", "perl", "multiple-matches"], "comments": [{"owner": {"reputation": 1581, "user_id": 2848117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7uhq.png?s=128&g=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/2848117/dom"}, "edited": false, "score": 0, "creation_date": 1481169517, "post_id": 40155257, "comment_id": 69270469, "body": "Please don&#39;t vandalize your own post."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1481169522, "post_id": 40155257, "comment_id": 69270471, "body": "Do not vandalize your questions"}], "answers": [{"comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1476969218, "post_id": 40155366, "comment_id": 67579540, "body": "Yes you are right. You can now use it in scalar context to get the count, like <code>print scalar @matches</code>. Try it and find out."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1476969374, "post_id": 40155366, "comment_id": 67579642, "body": "I have added examples in the answer to clear your doubt. Hope that helps."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1476969647, "post_id": 40155366, "comment_id": 67579829, "body": "Share the update code. You can edit your question to include that."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1476970320, "post_id": 40155366, "comment_id": 67580326, "body": "Just checked the updated question. You are doing it wrong. You should write the <code>@matches</code> in while loop line. See my updated answer."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1476970545, "post_id": 40155366, "comment_id": 67580525, "body": "I&#39;m pretty sure you need the global <code>&#47;g</code> flag to get all matches within your first couple of examples."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1476970681, "post_id": 40155366, "comment_id": 67580651, "body": "@stevieb: Yes. I have already used the <code>&#47;g</code> flag in both examples."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1476970746, "post_id": 40155366, "comment_id": 67580697, "body": "sorry, I didn&#39;t mean examples. I meant up at the top of the post: <code>my @matches = $string =~ &#47;pattern&#47;</code> and <code>my $matches = () = $string =~ &#47;pattern&#47;</code>"}, {"owner": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1476970752, "post_id": 40155366, "comment_id": 67580701, "body": "Thanks for your patience, Chankey. I tried writing the @ matches in the while loop line. However, the output now outputs a 1 in front of every pattern match. For example:  Count of matches:1CCCGGAAGC Count of matches:1CCCGGAAGC Count of matches:1CCCGGAAGC Count of matches:1CCCGGAAGC"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 0, "creation_date": 1476971311, "post_id": 40155366, "comment_id": 67581185, "body": "It&#39;s printing 1 because it&#39;s finding only one occurrence of <code>([TC]C[CT]GGAAGC)</code> in each line. Please clearly mention what is the output that you are expecting?"}, {"owner": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1476971773, "post_id": 40155366, "comment_id": 67581668, "body": "I need the output to list every pattern match found. I also need it to find the total number of matches found. For example: TCTGGAGC CCTGGAGC TCCGGAGC 3 matches found."}, {"owner": {"reputation": 1445, "user_id": 78792, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4aacb6b73ab7fb4bcfd1772745475d3?s=128&d=identicon&r=PG", "display_name": "benrifkah", "link": "https://stackoverflow.com/users/78792/benrifkah"}, "reply_to_user": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1476981051, "post_id": 40155366, "comment_id": 67588485, "body": "@Ashley do you want to print each match as it&#39;s found, then when the script is done print the count of all matches? If so you need a variable to store the number of matches and add to it every time the while loop matches. Then print that variable at the end outside of all loops. Georg&#39;s answer has an example. Your code prints the count each time through the while loop. Sometimes that&#39;s zero so you get &quot;TCCG...\\n0TCT...&quot; because it prints: match, count (without newline), next match. Invite me to chat if this is unclear and you want more details."}, {"owner": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "reply_to_user": {"reputation": 1445, "user_id": 78792, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4aacb6b73ab7fb4bcfd1772745475d3?s=128&d=identicon&r=PG", "display_name": "benrifkah", "link": "https://stackoverflow.com/users/78792/benrifkah"}, "edited": false, "score": 0, "creation_date": 1476982696, "post_id": 40155366, "comment_id": 67589479, "body": "@benrifkah I don&#39;t want to print the count number of each match every time a match is found. I just want to print the final, total number of matches at the bottom of the output. I am having a hard time removing the count number that is listed in front of each match from Georg&#39;s answer. And to be honest, I cannot figure out how to start/invite you to chat!"}, {"owner": {"reputation": 1445, "user_id": 78792, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4aacb6b73ab7fb4bcfd1772745475d3?s=128&d=identicon&r=PG", "display_name": "benrifkah", "link": "https://stackoverflow.com/users/78792/benrifkah"}, "edited": false, "score": 0, "creation_date": 1476983042, "post_id": 40155366, "comment_id": 67589655, "body": "@You want to print the count only once at the end. That&#39;s what my comment said and that is what Georg&#39;s answer does."}, {"owner": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "reply_to_user": {"reputation": 1445, "user_id": 78792, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4aacb6b73ab7fb4bcfd1772745475d3?s=128&d=identicon&r=PG", "display_name": "benrifkah", "link": "https://stackoverflow.com/users/78792/benrifkah"}, "edited": false, "score": 0, "creation_date": 1476983142, "post_id": 40155366, "comment_id": 67589706, "body": "@benrifkah I see now. Everything is working great. Thanks for your help!"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1476971162, "last_edit_date": 1476971162, "creation_date": 1476968872, "answer_id": 40155366, "question_id": 40155257, "link": "https://stackoverflow.com/questions/40155257/counting-number-of-pattern-matches-in-perl/40155366#40155366", "title": "Counting number of pattern matches in Perl", "body": "<blockquote>\n  <p>counting the number of occurrences of each pattern match</p>\n</blockquote>\n\n<pre><code>my @matches = $string =~ /pattern/g\n</code></pre>\n\n<p><code>@matches</code> array will contain all the matched parts. You can then do below to get the count.</p>\n\n<pre><code>print scalar @matches\n</code></pre>\n\n<p>Or you could directly write</p>\n\n<pre><code>my $matches = () = $string =~ /pattern/\n</code></pre>\n\n<p>I would suggest you to use the former as you might need to check \"what was matched\" in future (perhaps for debugging?).</p>\n\n<p>Example 1:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $string = 'John Doe John Done';\nmy $matches = () = $string =~ /John/g;\nprint $matches; #prints 2\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $string = 'John Doe John Done';\nmy @matches = $string =~ /John/g;\nprint \"@matches\"; #prints John John\nprint scalar @matches; #prints 2\n</code></pre>\n\n<p>Edit:</p>\n\n<pre><code>while ( my @matches = $seq  =~ /([TC]C[CT]GGAAGC)/g) {\n    print $1, \"\\n\";\n    print \"Count of matches:\". scalar @matches;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 6921229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d1e8d0a5288d7ebcf029fd228fa3949?s=128&d=identicon&r=PG&f=1", "display_name": "Magesh04", "link": "https://stackoverflow.com/users/6921229/magesh04"}, "reply_to_user": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "edited": false, "score": 0, "creation_date": 1477290273, "post_id": 40155483, "comment_id": 67687787, "body": "sorry for delay results comes out with good count. but problem with our inner while loop please remove that and try.  #  while ( $seq  =~ /([TC]C[CT]GGAAGC)/g) {   #                          print $1, &quot;\\n&quot;;                             my @matches = $seq =~ /([TC]C[CT]GGAAGC)/g;                             print scalar @matches;    # }"}], "tags": [], "owner": {"reputation": 41, "user_id": 6921229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d1e8d0a5288d7ebcf029fd228fa3949?s=128&d=identicon&r=PG&f=1", "display_name": "Magesh04", "link": "https://stackoverflow.com/users/6921229/magesh04"}, "is_accepted": false, "score": 1, "last_activity_date": 1476969155, "creation_date": 1476969155, "answer_id": 40155483, "question_id": 40155257, "link": "https://stackoverflow.com/questions/40155257/counting-number-of-pattern-matches-in-perl/40155483#40155483", "title": "Counting number of pattern matches in Perl", "body": "<pre><code>my @count = ($seq  =~ /([TC]C[CT]GGAAGC)/g);\nprint scalar @count ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 2, "last_activity_date": 1476978915, "creation_date": 1476978915, "answer_id": 40159154, "question_id": 40155257, "link": "https://stackoverflow.com/questions/40155257/counting-number-of-pattern-matches-in-perl/40159154#40159154", "title": "Counting number of pattern matches in Perl", "body": "<p>As you have written the code, you have to count the  matches yourself:</p>\n\n<pre><code>local $/ = \"&gt;\";\nmy $count = 0;\n\n#scan through fasta file \nwhile (&lt;FASTA&gt;) {\n    chomp;\n    if ( $_ =~ /^(.*?)$(.*)$/ms) {\n            my $header = $1;\n            my $seq = $2;\n            $seq =~ s/\\R//g; # \\R removes line breaks \n                    while ( $seq  =~ /([TC]C[CT]GGAAGC)/g) {\n                            print $1, \"\\n\";\n                            $count = $count +1;\n            }\n    }\n}\nprint \"Fount $count matches\\n\";\n</code></pre>\n\n<p>should do the job.</p>\n\n<p>HTH Georg</p>\n"}], "owner": {"reputation": 303, "user_id": 7048060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96a3440d502edb392034a77e4c1d70fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/7048060/ashley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3372, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1481169490, "creation_date": 1476968578, "last_edit_date": 1481169490, "question_id": 40155257, "link": "https://stackoverflow.com/questions/40155257/counting-number-of-pattern-matches-in-perl", "title": "Counting number of pattern matches in Perl", "body": "<p>I am VERY new to perl, and to programming in general. \nI have been searching for the past couple of days on how to count the number of pattern matches; I have had a hard time understanding others solutions and applying them to the code I have already written. </p>\n\n<p>Basically, I have a sequence and I need to find all the patterns that match [TC]C[CT]GGAAGC </p>\n\n<p>I believe I have that part down. but I am stuck on counting the number of occurrences of each pattern match. Does anyone know how to edit the code I already have to do this? Any advice is welcomed. Thanks! </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse diagnostics;\n\n# open fasta file for reading \nunless( open( FASTA, \"&lt;\", '/scratch/Drosophila/dmel-all-chromosome-    r6.02.fasta' )) {\n    die \"Can't open dmel-all-chromosome-r6.02.fasta for reading:\", $!;\n}\n\n#split the fasta record\nlocal $/ = \"&gt;\";\n\n#scan through fasta file \nwhile (&lt;FASTA&gt;) {\n    chomp;\n    if ( $_ =~ /^(.*?)$(.*)$/ms) {\n            my $header = $1;\n            my $seq = $2;\n            $seq =~ s/\\R//g; # \\R removes line breaks \n                    while ( $seq  =~ /([TC]C[CT]GGAAGC)/g) {\n                            print $1, \"\\n\";\n            }\n    }\n}\n</code></pre>\n\n<p>Update, I have added in </p>\n\n<pre><code>my @matches = $seq =~ /([TC]C[CT]GGAAGC)/g;\n                            print scalar @matches; \n</code></pre>\n\n<p>In the code below. However, it seems to be outputting 0 in front of each pattern match, instead of outputting the total sum of all pattern matches.  </p>\n\n<pre><code>while (&lt;FASTA&gt;) {\n    chomp;\n    if ( $_ =~ /^(.*?)$(.*)$/ms) {\n            my $header = $1;\n            my $seq = $2;\n            $seq =~ s/\\R//g; # \\R removes line breaks \n                    while ( $seq  =~ /([TC]C[CT]GGAAGC)/g) {\n                            print $1, \"\\n\";\n                            my @matches = $seq =~ /([TC]C[CT]GGAAGC)/g;\n                            print scalar @matches;\n    }\n    }\n}\n</code></pre>\n\n<p>Edit: I need the output to list ever pattern match found. I also need it to find the total number of matches found. For example:</p>\n\n<p>CCTGGAAGC</p>\n\n<p>TCTGGAAGC</p>\n\n<p>TCCGGAAGC</p>\n\n<p>3 matches found </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1476965003, "post_id": 40153859, "comment_id": 67576662, "body": "Try this: <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/Exporter.html</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "edited": false, "score": 0, "creation_date": 1476965663, "post_id": 40153859, "comment_id": 67577052, "body": "@rubikonx9: You should explain that in more detail and put it in an answer."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4953005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d36d2c16e06a98c9e6f87a2641af5837?s=128&d=identicon&r=PG&f=1", "display_name": "Jagdish Rapata", "link": "https://stackoverflow.com/users/4953005/jagdish-rapata"}, "edited": false, "score": 0, "creation_date": 1476969295, "post_id": 40155039, "comment_id": 67579589, "body": "simbabque covered an example in detail which I suggest everyone should read, but accepting this as answer as this is more precise and explained to the point, which immediately cleared up the doubts that I had."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 6, "last_activity_date": 1476967977, "creation_date": 1476967977, "answer_id": 40155039, "question_id": 40153859, "link": "https://stackoverflow.com/questions/40153859/usage-of-qwconst-with-use-statement/40155039#40155039", "title": "Usage of qw(:const) with use statement", "body": "<pre><code>use libExample qw(:const)\n</code></pre>\n\n<p>will pick all names in <code>$EXPORT_TAGS{const}</code> anonymous array and will import them to current namespace.</p>\n\n<p>Whereas</p>\n\n<pre><code>use libExample qw(const)\n</code></pre>\n\n<p>will pick const and will import it in current namespace.</p>\n\n<p>There are also other variants:</p>\n\n<pre><code>[!]name         This name only\n[!]:DEFAULT     All names in @EXPORT\n[!]:tag         All names in $EXPORT_TAGS{tag} anonymous array\n[!]/pattern/    All names in @EXPORT and @EXPORT_OK which match\n</code></pre>\n\n<p>Please go through <a href=\"http://perldoc.perl.org/Exporter.html\">Exporter</a> documentation for more details on the topic.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 8, "last_activity_date": 1476968218, "creation_date": 1476968218, "answer_id": 40155132, "question_id": 40153859, "link": "https://stackoverflow.com/questions/40153859/usage-of-qwconst-with-use-statement/40155132#40155132", "title": "Usage of qw(:const) with use statement", "body": "<p>The syntax <code>use Foo qw(:const)</code> is using the EXPORT_TAGS feature in <a href=\"https://v1.metacpan.org/pod/Exporter#Specialised-Import-Lists\" rel=\"noreferrer\">Exporter</a>.</p>\n\n<p>When you set up your library module, you usually have a bunch of functions or class variables. Then you configure Exporter by telling it what to export by default</p>\n\n<pre><code>package Foo;\nuse Exporter;\n\nour @EXPORT = qw( frobnicate );\n\nsub frobnicate { ... }\n</code></pre>\n\n<p>or when they are asked for.</p>\n\n<pre><code>OUR @EXPORT_OK = qw( frobnicate barnicate );\n\nsub barnicate { ... }\n</code></pre>\n\n<p>But you can also tell it to group things together, so the user of your library does not need to list all the methods. Consider this example.</p>\n\n<pre><code>package Foo;\nuse Exporter;\n\nour @EXPORT_OK qw(monday tuesday wednesday thursday friday saturday sunday);\n\nsub monday { ... }\nsub tuesday { ... }\nsub wednesday { ... }\nsub thursday { ... }\nsub friday { ... }\nsub saturday { ... }\nsub sunday { ... }\n</code></pre>\n\n<p>Now if I wanted all the working days, I'd have to do this:</p>\n\n<pre><code>use Foo qw(monday tuesday wednesday thursday friday);\n</code></pre>\n\n<p>That's one long line. Instead, it would be super useful if those could be grouped. Well, they can be. If you do this instead in your library:</p>\n\n<pre><code>package Foo;\nuse Exporter;\n\nour %EXPORT_TAGS = ( \n    working_days =&gt; [ \n      qw(monday tuesday wednesday thursday friday)\n    ],\n    weekend_days =&gt; [\n      qw(saturday sunday)\n    ]\n);\n\n# ...\n</code></pre>\n\n<p>We can then use it with one tag instead of five function names:</p>\n\n<pre><code>use Foo qw(:working_days);\n</code></pre>\n\n<p>Note that this is equivalent:</p>\n\n<pre><code>use Foo ':working_days';\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4953005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d36d2c16e06a98c9e6f87a2641af5837?s=128&d=identicon&r=PG&f=1", "display_name": "Jagdish Rapata", "link": "https://stackoverflow.com/users/4953005/jagdish-rapata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 40155039, "answer_count": 2, "score": 6, "last_activity_date": 1476968288, "creation_date": 1476964878, "last_edit_date": 1476968288, "question_id": 40153859, "link": "https://stackoverflow.com/questions/40153859/usage-of-qwconst-with-use-statement", "title": "Usage of qw(:const) with use statement", "body": "<p>Sorry for a very basic question, but I'm beginner level at Perl and could not find a suitable explanation on SO (or anywhere else!) for this question. I understand I can write a few examples and try to decipher this but I can really use some knowledge from the experts.</p>\n\n<p>I'm going through some code where the developer has sourced libraries using:</p>\n\n<pre><code>use libExample qw(:const)\n</code></pre>\n\n<p>Now from what I understand this means sourcing the constants from libExample but would really like to know how this works. </p>\n\n<ol>\n<li><p>Why can't I simply say: <code>use libExample qw(const)</code>\n(Trying to understand relevance of <code>:</code>)</p></li>\n<li><p>Is there something we can/should write in <code>libExample.pm</code> itself to make other developers utilizing this library to mention such options in place of const that is.</p></li>\n</ol>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "edited": false, "score": 0, "creation_date": 1477046569, "post_id": 40154065, "comment_id": 67616341, "body": "Hi Dave, i am getting syntax error at line 12 , near &quot;say join&quot;."}, {"owner": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "edited": false, "score": 0, "creation_date": 1477046642, "post_id": 40154065, "comment_id": 67616391, "body": "i am running this script using putty and version is v4.8.4."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "edited": false, "score": 0, "creation_date": 1477046700, "post_id": 40154065, "comment_id": 67616424, "body": "Have you included the <code>use 5.010</code> line? And which version of Perl are you using?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "edited": false, "score": 0, "creation_date": 1477047107, "post_id": 40154065, "comment_id": 67616665, "body": "The version of putty isn&#39;t very useful information. The version of Perl is."}, {"owner": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "edited": false, "score": 0, "creation_date": 1477050241, "post_id": 40154065, "comment_id": 67618614, "body": "here it is showing version 5.8.4  .So i used &quot;use v5.8.4&quot;. But  i am getting syntax error at line 12."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "edited": false, "score": 0, "creation_date": 1477050923, "post_id": 40154065, "comment_id": 67619067, "body": "Perl 5.8.4 was released in 2004. Why on Earth would you use a version of Perl that is over twelve years old? I added the <code>use 5.010</code> line specifically because I use syntax that only became available in Perl 5.10. If you want to run my code on older versions of Perl then you will need to replace <code>say</code> with <code>print</code>."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "edited": false, "score": 0, "creation_date": 1477057598, "post_id": 40154065, "comment_id": 67623754, "body": "Say &quot;thank you&quot; on Stack Overflow by <a href=\"http://stackoverflow.com/help/someone-answers\">accepting an answer</a>."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1477050987, "last_edit_date": 1477050987, "creation_date": 1476965454, "answer_id": 40154065, "question_id": 40153700, "link": "https://stackoverflow.com/questions/40153700/append-the-nested-case-statement-content-with-outer-case-statements-content-usi/40154065#40154065", "title": "Append the nested case statement content with outer case statement&#39;s content using perl", "body": "<p>Keep an array containing the current levels. Push another level onto it whenever you see a <code>xxx)</code> line and pop the latest one off when you see a <code>;;</code> line. Then you just need to look for the assignment statements.</p>\n\n<p>This seems to work for your test data.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n# We use modern Perl here - specifically say()\nuse 5.010;\n\nmy @levels;\n\nwhile (&lt;DATA&gt;) {\n  if (/(\\w+)\\)/) {\n    push @levels, $1;\n  }\n  if (/(\\w+=\"\\w+\")/) {\n    say join(':', @levels), \":$1\";\n  }\n  if (/;;/) {\n    pop @levels;\n  }\n}\n\n__DATA__\ncase name in\n   ABSI) one=\"1\"\n         two=\"2\"\n    ;;\n   DEV)\n        one=\"11\"\n         two=\"22\"\n\n           case nest in\n              kmr) three=\"3\"\n               ;;\n              sug) four=\"4\"\n                   five=\"5\"\n                case next_level in\n\n                      CAC)six=\"6\"\n                      ;;\n                  esac\n              ;;\n            esac\n      ;;\n\n   DUL) seven=\"7\"\n         nine=\"9\"\n           case again in\n\n            NOV) six=\"66\"\n                      ten=\"10\"\n                  ;;\n               esac\n        ;;\nesac\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>ABSI:one=\"1\"\nABSI:two=\"2\"\nDEV:one=\"11\"\nDEV:two=\"22\"\nDEV:kmr:three=\"3\"\nDEV:sug:four=\"4\"\nDEV:sug:five=\"5\"\nDEV:sug:CAC:six=\"6\"\nDUL:seven=\"7\"\nDUL:nine=\"9\"\nDUL:NOV:six=\"66\"\nDUL:NOV:ten=\"10\"\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6928301, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6f1121327732ca684a74294bc7edeae?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6928301/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 40154065, "answer_count": 1, "score": 1, "last_activity_date": 1477050987, "creation_date": 1476964458, "question_id": 40153700, "link": "https://stackoverflow.com/questions/40153700/append-the-nested-case-statement-content-with-outer-case-statements-content-usi", "title": "Append the nested case statement content with outer case statement&#39;s content using perl", "body": "<p>In this situation we have to deal with nested case statements, which you can observe by seeing the input file and output.<br>\n     <strong>INPUT FILE</strong>  </p>\n\n<pre><code>case name in      \n   ABSI) one=\"1\"     \n         two=\"2\"    \n    ;;    \n   DEV)                 \n        one=\"11\"       \n         two=\"22\"       \n\n           case nest in    \n              kmr) three=\"3\"\n               ;;\n              sug) four=\"4\"\n                   five=\"5\"\n                case next_level in\n\n                      CAC)six=\"6\"\n                      ;;\n                  esac\n              ;;\n            esac\n      ;;\n\n   DUL) seven=\"7\"  \n         nine=\"9\"  \n           case again in  \n\n            NOV) six=\"66\"\n                      ten=\"10\"\n                  ;;\n               esac\n        ;;\nesac      \n</code></pre>\n\n<p>**OUTPUT SHOULD BE **  </p>\n\n<pre><code>ABSI:one=\"1\"  \nABSI:two=\"2\"  \nDEV:one=\"11\"  \nDEV:two=\"22\"  \nDEV:kmr:three=\"3\"  \nDEV:sug:four=\"4\"  \nDEV:sug:five=\"5\"  \nDEV:sug:CAC:six=\"6\"  \nDUL:seven=\"7\"  \nDUL:nine=\"9\"  \nDUL:NOV:six=\"66\"  \nDUL:NOV:ten=\"10\"  \n</code></pre>\n\n<hr>\n\n<p>I got the output for one level nested case statement. first I saved the content between first \"case\" and last \"esac\" (same as \"end\") in a temp file and run the below given script </p>\n\n<pre><code> open (data,\"&lt;input.txt\");  \nwhile (&lt;data&gt;) {  \n$para1;  $para2;    \n  unless (/case/../esac/){  \n      if(/(.*)\\)(.*)$/) {  \n    $para1=$1;  \n     $var=$2;         \n     }  \n     else  {  $var=$_; }  \nprint $para1.$var.\"\\n\";  \n}  \n   if (/case/../esac/)  {  \n        if(/(.*)\\)(.*)$/) {  \n       $para2=$1;    \n       $var=$2;         \n       }  \n      else  {  $var=$_; }          \nprint $para1.$para2.$var.\"\\n\";  \n}   }  \nclose data;\n</code></pre>\n\n<p>I need your help and suggestion to get output for multiple nested case statement.<br>\nThank you.</p>\n"}, {"tags": ["perl", "odata"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1476964367, "post_id": 40153367, "comment_id": 67576202, "body": "Can you please <a href=\"http://stackoverflow.com/posts/40153367/edit\">edit your question</a> to add the output you get from adding <code>print Dumper $client-&gt;responseContent()</code> to your code. It seems that what you&#39;re getting back isn&#39;t valid JSON."}, {"owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1476969910, "post_id": 40153367, "comment_id": 67580009, "body": "Hi i edited my post, thank you!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1476970245, "post_id": 40153367, "comment_id": 67580259, "body": "What does <code>$client-&gt;responseCode</code> contain? There&#39;s a <a href=\"http://stackoverflow.com/questions/31516238/perl-rest-client-authentication-issue\">similar discussion here</a> but it doesn&#39;t look like they found a solution."}, {"owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1476971111, "post_id": 40153367, "comment_id": 67580996, "body": "<code>$client-&gt;responseCode</code> seems to be an empty string.."}, {"owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1476971846, "post_id": 40153367, "comment_id": 67581731, "body": "With the fix from Dave i got a big step forward, i get: <code>&#39;Can\\&#39;t connect to 10.0.0.1:443 (certificate verify failed)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "edited": false, "score": 0, "creation_date": 1476971236, "post_id": 40155999, "comment_id": 67581102, "body": "Hi Thanks for the tipp!! But i get: <code>Can&#39;t locate object method &quot;SetFollow&quot; via package &quot;REST::Client&quot;</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "edited": false, "score": 0, "creation_date": 1476971310, "post_id": 40155999, "comment_id": 67581183, "body": "@msrDigit Sorry. That&#39;s a typo. It&#39;s <code>setFollow()</code>, not <code>SetFollow()</code>. Fixed now."}, {"owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "edited": false, "score": 0, "creation_date": 1476971457, "post_id": 40155999, "comment_id": 67581333, "body": "I hoped i found someone who got already a solution for this, because i dont really understand the usage of theses Modules. Before i waste more time of yours, i can use the python Script to connect and give it over to Perl..."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "edited": false, "score": 0, "creation_date": 1476971576, "post_id": 40155999, "comment_id": 67581449, "body": "@msrDigit: Are you saying that this fix doesn&#39;t work? In that case I&#39;m all out of ideas, I&#39;m afraid."}, {"owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "edited": false, "score": 0, "creation_date": 1476971625, "post_id": 40155999, "comment_id": 67581496, "body": "oh cool, now i got the error <code>LWP::Protocol::https::Socket: SSL connect attempt failed error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "edited": false, "score": 1, "creation_date": 1476972210, "post_id": 40155999, "comment_id": 67582016, "body": "I don&#39;t have time to investigate further but Googling &#39;<a href=\"https://www.google.co.uk/search?q=perl+lwp%3A%3Aprotocol%3A%3Ahttps+%22SSL+connect+attempt+failed%22\" rel=\"nofollow noreferrer\">perl lwp::protocol::https &quot;SSL connect attempt failed&quot;</a> gives plenty of things to try."}, {"owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "edited": false, "score": 0, "creation_date": 1477391898, "post_id": 40155999, "comment_id": 67737379, "body": "Hi tested some things without success. I Think it is somthing about the oData authentication. I will keep you informed.."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 1, "last_activity_date": 1476971275, "last_edit_date": 1476971275, "creation_date": 1476970455, "answer_id": 40155999, "question_id": 40153367, "link": "https://stackoverflow.com/questions/40153367/perl-requests-get-via-redfish/40155999#40155999", "title": "Perl requests GET via Redfish", "body": "<p>I found <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=65804\" rel=\"nofollow\">this bug report for REST::Client</a> which seems relevant.</p>\n\n<blockquote>\n  <p>If you don't set Follow to true then the module uses LWP::UserAgent's\n  simple_request method. This means authentication does not work.</p>\n</blockquote>\n\n<p>Looking at the module's documentation, it seems likely that the fix is to add</p>\n\n<pre><code>$client-&gt;setFollow(1);\n</code></pre>\n\n<p>before you try to use the client.</p>\n"}], "owner": {"reputation": 50, "user_id": 4255457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hjBFCa4BFSM/AAAAAAAAAAI/AAAAAAAAABQ/Px-WsNaWGhk/photo.jpg?sz=128", "display_name": "msrDigit", "link": "https://stackoverflow.com/users/4255457/msrdigit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 40155999, "answer_count": 1, "score": 1, "last_activity_date": 1476971275, "creation_date": 1476963471, "last_edit_date": 1476967559, "question_id": 40153367, "link": "https://stackoverflow.com/questions/40153367/perl-requests-get-via-redfish", "title": "Perl requests GET via Redfish", "body": "<p>i only find examples for Python to GET infos via redfish.\nHere is my Perl Code Snippet that i already got:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse MIME::Base64;\nuse JSON;\nuse Data::Dumper;\nuse Getopt::Long;\nuse REST::Client;\n\nmy $client = REST::Client-&gt;new(host =&gt; $host);\nmy $encoded_auth = encode_base64(\"$user:$password\", '');\n\n # Get the incident with sys_id declared above\n $client-&gt;GET(\"/redfish/v1\",\n              {'Authorization' =&gt; \"Basic $encoded_auth\",\n               'Accept' =&gt; 'application/json'});\n\nmy $perlScalar = decode_json $client-&gt;responseContent();\nprint Dumper $client-&gt;responseContent();\n</code></pre>\n\n<p>I get a empty string from Dumper, so i think the connect is not correct. This Script is functional against a HP REST API Device.</p>\n\n<p>I really dont understand how to do this, with ::JSON Module.. perhaps someone of you got already done  this?</p>\n\n<p>Kind Regards</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1476953962, "post_id": 40148965, "comment_id": 67568826, "body": "This isn&#39;t hard. What have you tried and what went wrong? Is this homework?"}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 1, "creation_date": 1476957738, "post_id": 40148965, "comment_id": 67571580, "body": "File::Find - <a href=\"http://search.cpan.org/~rjbs/perl-5.24.0/ext/File-Find/lib/File/Find.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~rjbs/perl-5.24.0/ext/File-Find/lib/File/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "edited": false, "score": 1, "creation_date": 1476960354, "post_id": 40148965, "comment_id": 67573285, "body": "@yonyon100: Probably <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a> since no recursion is required."}, {"owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1476960593, "post_id": 40148965, "comment_id": 67573436, "body": "@Borodin was in the middle of editing my answer to include that as well"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6941832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a650958a30a77b361325d8802488ec?s=128&d=identicon&r=PG&f=1", "display_name": "ozzy", "link": "https://stackoverflow.com/users/6941832/ozzy"}, "edited": false, "score": 0, "creation_date": 1476954115, "post_id": 40149528, "comment_id": 67568932, "body": "all my file are in the same directory, I got a lot of file actually more than 5 file,so I still can use as above?"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1476953688, "last_edit_date": 1495541957, "creation_date": 1476953007, "answer_id": 40149528, "question_id": 40148965, "link": "https://stackoverflow.com/questions/40148965/how-to-extend-a-program-that-works-for-one-file-to-act-on-every-file-in-a-direct/40149528#40149528", "title": "How to extend a program that works for one file to act on every file in a directory", "body": "<p>Use an array to store file names and then loop over them. At the end of loop rename output files or copy them somewhere so that they do not get overwritten in next iteration.</p>\n\n<pre><code>my @files = qw(checking1.txt checking2.txt checking3.txt checking4.txt checking5.txt);\nforeach my $filename (@files){\n    open (my $fh, \"&lt;\", $filename) or die $!;\n    #perform operations on $filename using filehandle $fh\n    #rename output files    \n}\n</code></pre>\n\n<p>Now for the above to work you need to make sure the files are in the same directory. If not then:</p>\n\n<ul>\n<li>Provide absolute path to each file in <code>@files</code> array</li>\n<li>Traverse directory to find desired files</li>\n</ul>\n\n<p>If you want to traverse the directory then see:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/22566/how-do-i-read-in-the-contents-of-a-directory-in-perl\">How do I read in the contents of a directory in Perl?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/2476019/how-can-i-recursively-read-out-directories-in-perl\">How can I recursively read out directories in Perl?</a></p></li>\n</ul>\n\n<p>Also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1479741/why-is-three-argument-open-calls-with-autovivified-filehandles-a-perl-best-pract\">Use 3 args open</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings\">Always use strict; use warnings; in your Perl program</a></li>\n</ul>\n\n<p>and give proper names to the variables. For eg:</p>\n\n<pre><code>@arr_file = &lt;MYFILE&gt;;\n</code></pre>\n\n<p>should be written as</p>\n\n<pre><code>@lines = &lt;MYFILE&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 2, "last_activity_date": 1476958025, "creation_date": 1476958025, "answer_id": 40151373, "question_id": 40148965, "link": "https://stackoverflow.com/questions/40148965/how-to-extend-a-program-that-works-for-one-file-to-act-on-every-file-in-a-direct/40151373#40151373", "title": "How to extend a program that works for one file to act on every file in a directory", "body": "<p>Your all files in same directory means put the program inside the directory then run it. </p>\n\n<p>For read the file from a directory use <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow\">glob</a></p>\n\n<pre><code>while (my $filename =&lt;*.txt&gt;) # change the file extension whatever you want\n{\n\n    open my $fh, \"&lt;\" , $filename or die \"Error opening $!\\n\";\n\n    #do your stuff here\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "is_accepted": false, "score": 0, "last_activity_date": 1476960443, "last_edit_date": 1495540111, "creation_date": 1476959466, "answer_id": 40151910, "question_id": 40148965, "link": "https://stackoverflow.com/questions/40148965/how-to-extend-a-program-that-works-for-one-file-to-act-on-every-file-in-a-direct/40151910#40151910", "title": "How to extend a program that works for one file to act on every file in a directory", "body": "<ol>\n<li><p>Why not <code>use</code><a href=\"http://search.cpan.org/~rjbs/perl-5.24.0/ext/File-Find/lib/File/Find.pm\" rel=\"nofollow noreferrer\"><code>File::Find</code></a>? Makes changing files in directories very easy. Just supply the start directory.\nIt's not always the best choice, depends on your needs, but it's useful and easy almost every time I need to modify a lot of files all at once.</p></li>\n<li><p>Another option is to just loop through the files, but in this case you'll have to supply the file names.</p></li>\n<li><p>As <a href=\"https://stackoverflow.com/users/3961170/mkhun\">mkHun</a> pointed out a <code>glob</code> can be helpful.</p></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 6941832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a650958a30a77b361325d8802488ec?s=128&d=identicon&r=PG&f=1", "display_name": "ozzy", "link": "https://stackoverflow.com/users/6941832/ozzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1476960443, "creation_date": 1476951247, "last_edit_date": 1476953919, "question_id": 40148965, "link": "https://stackoverflow.com/questions/40148965/how-to-extend-a-program-that-works-for-one-file-to-act-on-every-file-in-a-direct", "title": "How to extend a program that works for one file to act on every file in a directory", "body": "<p>I wrote a program to check for misspellings or unused data in a text file. Now, I want to check all files in a directory using the same process.</p>\n\n<p>Here are a few lines of the script that I run for the first file:</p>\n\n<pre><code>open MYFILE, 'checking1.txt' or die $!;\n@arr_file = &lt;MYFILE&gt;;\nclose (MYFILE);\n\nopen FILE_1, '&gt;text1' or die $!;\nopen FILE_2, '&gt;Output' or die $!;\nopen FILE_3, '&gt;Output2' or die $!;\nopen FILE_4, '&gt;text2' or die $!;\n\nfor ($i = 0; $i &lt;= $#arr_file; $i++) {\n\n    if ( $arr_file[$i-1] =~  /\\s+\\S+\\_name\\s+ (\\S+)\\;/ ) {\n           print FILE_1 \"name : $i  $1\\n\";\n    }\n\n...\n</code></pre>\n\n<p>I used only one file, <code>checking1.txt</code>, to execute the script, but now I want to do the same process for all files in the <code>all_file_directory</code></p>\n"}, {"tags": ["perl", "unicode", "utf-8", "perl-module", "collation"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1476938849, "post_id": 40145434, "comment_id": 67560823, "body": "Does the HTML page use different Unicode normalization than the strings in your code?  See <a href=\"http://www.modernperlbooks.com/mt/2013/01/why-unicode-normalization-matters.html\" rel=\"nofollow noreferrer\">modernperlbooks.com/mt/2013/01/&hellip;</a>"}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1476939639, "post_id": 40145434, "comment_id": 67561054, "body": "How can I verify that? If I use this as in the link you shared, use Unicode::Normalize; use open qw/:std :utf8/; The output turns into garbage even on print $p-&gt;get_trimmed_text without comparison."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1476939937, "post_id": 40145434, "comment_id": 67561138, "body": "Hmmmm, what kind of garbage?  Which Perl version?  Anyway, just a thought -- I don&#39;t really pretend to <i>know</i> what&#39;s wrong here."}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1476940108, "post_id": 40145434, "comment_id": 67561202, "body": "Perl v5.20.2. Something like : &#227;&#227;&#169;&#227;&#164;&#227;&#227;&#183;&#227;&#188;&#227;&#227;&#170;&#227;&#183;&#227;&#188;"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1476940374, "post_id": 40145434, "comment_id": 67561298, "body": "Without being able to guess the encoding of that, a hex dump of a few bytes would be more helpful.  See also the <a href=\"/tags/character-encoding/info\">Stack Overflow <code>character-encoding</code> tag wiki</a> for some tips."}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1476940411, "post_id": 40145434, "comment_id": 67561318, "body": "OK. The garbage happens without the use of utf8::decode($html); Still the comparison wouldnt work."}], "answers": [{"comments": [{"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "edited": false, "score": 2, "creation_date": 1476941213, "post_id": 40145977, "comment_id": 67561595, "body": "OMG ! Thanks a million ! Awesome. You save me a day."}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "edited": false, "score": 0, "creation_date": 1476941564, "post_id": 40145977, "comment_id": 67561707, "body": "Haha. You are welcome. I understand that such tasks are generally complex and tedious but thanks to <a href=\"https://www.perl.org/\" rel=\"nofollow noreferrer\">Perl</a> and <a href=\"http://www.cpan.org/modules/\" rel=\"nofollow noreferrer\">CPAN</a> modules which make our lives easy :)"}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "edited": false, "score": 0, "creation_date": 1476942852, "post_id": 40145977, "comment_id": 67562243, "body": "hmm, I just tried the same thing which works for yahoo with a local server, the compare_strs returns me -1 all the time :("}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "reply_to_user": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "edited": false, "score": 0, "creation_date": 1476943034, "post_id": 40145977, "comment_id": 67562323, "body": "I would suggest posting a new question with a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "edited": false, "score": 0, "creation_date": 1476943123, "post_id": 40145977, "comment_id": 67562364, "body": "difficult coz the server is only accessible through vpn, hence you cant test."}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "edited": false, "score": 1, "creation_date": 1476944423, "post_id": 40145977, "comment_id": 67563016, "body": "I found the issue. The encoding of what was returned from the local server was not utf-8. Thanks to Encode::Guess I managed to have it converted to utf8 ! Thanks again for your help!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1476947316, "post_id": 40145977, "comment_id": 67564608, "body": "There&#39;s absolutely no reason to use Unicode::Collate here."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 1, "last_activity_date": 1476957568, "last_edit_date": 1495540114, "creation_date": 1476940604, "answer_id": 40145977, "question_id": 40145434, "link": "https://stackoverflow.com/questions/40145434/issue-comparing-japanese-characters/40145977#40145977", "title": "Issue comparing Japanese characters", "body": "<p>Please see <a href=\"https://stackoverflow.com/a/40147636/257635\">ikegami's answer</a>. Mine is just an alternate approach which does not address the actual issue with your code.</p>\n\n<hr>\n\n<p><strong><a href=\"https://metacpan.org/pod/Unicode::Collate\" rel=\"nofollow noreferrer\">Unicode::Collate</a> to the rescue!</strong></p>\n\n<p>Note that I added below in your code.</p>\n\n<pre><code>use Unicode::Collate;\nuse open qw/:std :utf8/;\nmy $Collator = Unicode::Collate-&gt;new();\nsub compare_strs\n{\n    my ( $str1, $str2 ) = @_;\n    # Treat vars as strings by quoting. \n    # Possibly incorrect/irrelevant approach. \n    return $Collator-&gt;cmp(\"$str1\", \"$str2\");\n}\n</code></pre>\n\n<p><strong>Note:</strong> <code>compare_strs</code> subroutine will return 1 (when $str1 is greater than $str2) or 0 (when $str1 is equal to $str2) or -1 (when $str1 is less than $str2).</p>\n\n<p>Below is the complete working code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse Unicode::Collate;\nuse open qw/:std :utf8/;\nuse Encode qw(decode encode is_utf8);\nuse Encode::Guess;\nuse Data::Dumper;\nuse LWP::UserAgent;\nuse HTTP::Cookies;\nuse Cwd;\nuse HTML::TokeParser;\nmy $local_dir = getcwd;\nmy $browser = LWP::UserAgent-&gt;new();\nmy $cookie_jar = HTTP::Cookies-&gt;new(\n   file     =&gt; $local_dir . \"/cookies.lwp\",\n   autosave =&gt; 1,\n);\n$browser-&gt;cookie_jar( $cookie_jar );\npush @{ $browser-&gt;requests_redirectable }, 'POST';\n$browser-&gt;requests_redirectable;\nmy $Collator = Unicode::Collate-&gt;new();\nsub compare_strs\n{\n    my ( $str1, $str2 ) = @_;\n    # Treat vars as strings by quoting. \n    # Possibly incorrect/irrelevant approach. \n    return $Collator-&gt;cmp(\"$str1\", \"$str2\");\n}\nmy $response   = $browser-&gt;get(\"http://www.yahoo.co.jp/\");\nmy $html = $response-&gt;content;\n#print $html;\nutf8::decode($html);\nmy $p = HTML::TokeParser-&gt;new( \\$html );\n\n# dispatch table with subs to handle the different types of tokens\nmy %dispatch = (\n   S  =&gt; sub { $_[0]-&gt;[4] }, # Start tag\n   E  =&gt; sub { $_[0]-&gt;[2] }, # End tag\n   T  =&gt; sub { $_[0]-&gt;[1] }, # Text\n   C  =&gt; sub { $_[0]-&gt;[1] }, # Comment\n   D  =&gt; sub { $_[0]-&gt;[1] }, # Declaration\n   PI =&gt; sub { $_[0]-&gt;[2] }, # Process Instruction\n);\n\nmy $string = '\u793e\u4f1a\u7684\u8cac\u4efb';\nwhile ( my $token = $p-&gt;get_tag('a') ) {\n        my $text = $p-&gt;get_trimmed_text;\n        unless (compare_strs($text, $string)){\n          print $text;\n          print \"\\n\";\n        }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>chankeypathak@perl:~/Desktop$ perl test.pl \n\u793e\u4f1a\u7684\u8cac\u4efb\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1476947348, "post_id": 40147636, "comment_id": 67564624, "body": "Oops, it was that simple. +1."}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "edited": false, "score": 1, "creation_date": 1476948763, "post_id": 40147636, "comment_id": 67565507, "body": "Yes. I noticed the issue with the encoding returned by the server, that&#39;s how i fixed my second issue. Anyway thanks both of you."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 6, "last_activity_date": 1476947414, "last_edit_date": 1476947414, "creation_date": 1476947160, "answer_id": 40147636, "question_id": 40145434, "link": "https://stackoverflow.com/questions/40145434/issue-comparing-japanese-characters/40147636#40147636", "title": "Issue comparing Japanese characters", "body": "<p>You expect your two calls to <code>$p-&gt;get_trimmed_text</code> to return the same string, but it returns a different token each time it's called. Replace</p>\n\n<pre><code>print $p-&gt;get_trimmed_text if $p-&gt;get_trimmed_text eq '\u793e\u4f1a\u7684\u8cac\u4efb';\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my $text = $p-&gt;get_trimmed_text;\nprint $text if $text eq '\u793e\u4f1a\u7684\u8cac\u4efb';\n</code></pre>\n\n<hr>\n\n<p>You shouldn't assume the HTML is encoded using UTF-8. Replace</p>\n\n<pre><code>my $html = $response-&gt;content;\nutf8::decode($html);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>my $html = $response-&gt;decoded_content;\n</code></pre>\n\n<hr>\n\n<p>Also need to encode your outputs. One way is by adding the following:</p>\n\n<pre><code>use encode ':std', ':encoding(UTF-8)';\n</code></pre>\n"}], "owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 1, "accepted_answer_id": 40145977, "answer_count": 2, "score": 3, "last_activity_date": 1476957568, "creation_date": 1476937265, "last_edit_date": 1476955577, "question_id": 40145434, "link": "https://stackoverflow.com/questions/40145434/issue-comparing-japanese-characters", "title": "Issue comparing Japanese characters", "body": "<p>I am struggling to use <a href=\"https://metacpan.org/pod/HTML::TokeParser\" rel=\"nofollow\"><code>HTML::TokeParser</code></a>\nto parse an HTML document that contains Japanese characters.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>use utf8;\n\nuse Encode qw(decode encode is_utf8);\nuse Encode::Guess;\nuse Data::Dumper;\nuse LWP::UserAgent;\nuse HTTP::Cookies;\nuse Cwd;\nuse HTML::TokeParser;\n\nmy $local_dir = getcwd;\n\nmy $browser = LWP::UserAgent-&gt;new();\n\nmy $cookie_jar = HTTP::Cookies-&gt;new(\n   file     =&gt; $local_dir . \"/cookies.lwp\",\n   autosave =&gt; 1,\n);\n\n$browser-&gt;cookie_jar( $cookie_jar );\n\npush @{ $browser-&gt;requests_redirectable }, 'POST';\n$browser-&gt;requests_redirectable;\n\nmy $response = $browser-&gt;get(\"http://www.yahoo.co.jp/\");\nmy $html = $response-&gt;content;\nprint $html;\nutf8::decode($html);\n\nmy $p = HTML::TokeParser-&gt;new( \\$html );\n\n# dispatch table with subs to handle the different types of tokens\n\nmy %dispatch = (\n   S  =&gt; sub { $_[0]-&gt;[4] }, # Start tag\n   E  =&gt; sub { $_[0]-&gt;[2] }, # End tag\n   T  =&gt; sub { $_[0]-&gt;[1] }, # Text\n   C  =&gt; sub { $_[0]-&gt;[1] }, # Comment\n   D  =&gt; sub { $_[0]-&gt;[1] }, # Declaration\n   PI =&gt; sub { $_[0]-&gt;[2] }, # Process Instruction\n);\n\nwhile ( my $token = $p-&gt;get_tag('a') ) {\n        print $p-&gt;get_trimmed_text if $p-&gt;get_trimmed_text eq '\u793e\u4f1a\u7684\u8cac\u4efb';\n        print \"\\n\";\n}\n</code></pre>\n\n<p>This doesn't display anything on my terminal, but if I just do a <code>print $p-&gt;get_trimmed_text</code> then the output is OK.</p>\n\n<p>Here are a few hexdump lines corresponding to <code>print $p-&gt;get_trimmed_text</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0000000 490a 746e 7265 656e 2074 7845 6c70 726f\n0000010 7265 81e3 e4ae 92ba 8fe6 e89b a8a1 a4e7\n0000020 e3ba ab81 81e3 e3a4 8481 81e3 0aa6 9fe7\n0000030 e5b3 9db7 81e9 e3bc 8982 9be5 e5bd 8586\n0000040 a4e5 e396 ae81 83e3 e397 ad83 82e3 e3b4\n0000050 ab83 83e3 e395 a182 83e3 e3bc 8c81 86e7\n0000060 e68a ac9c 94e6 e6af b48f 320a e334 ab82\n0000070 89e6 e380 ae81 b4e7 e885 8991 90e5 e68d\n0000080 8089 82e3 e692 a597 b8e5 e3b0 8a82 82e3\n0000090 e3b3 bc83 82e3 e4b9 95bb abe7 e38b a681\n00000a0 81e3 e7a7 b9b4 bbe4 0a8b 83e3 e39e af82\n00000b0 83e3 e389 8a83 83e3 e3ab 8983 82e3 e384\n00000c0 8783 83e3 e38b bc83 82e3 e3ba ae81 81e3\n00000d0 e58a 97be 81e3 e3aa af82 83e3 e3bc 9d83\n00000e0 83e3 e9b3 8d85 bfe4 0aa1 a8e8 e88e 96ab\n00000f0 bce4 e39a 8c80 83e3 e392 a983 83e3 e3aa\n0000100 bc83 b0e6 e58f 9d8b 88e5 e3a9 8d80 3235\n0000110 e525 9986 9ce7 4e9f 5745 e50a a7a4 98e9\n</code></pre>\n\n<p>It seems like the comparison does not work.</p>\n\n<p>I can use only <code>HTML::TokeParser</code> because that's the only module installed on the server and I can't install anything else.</p>\n"}, {"tags": ["perl", "class", "constructor", "reference", "std"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1476962126, "post_id": 40144120, "comment_id": 67574445, "body": "I would recommend against using <code>Class::STD</code> ... It was part of the inside-out class thing that was a brief fad. It makes everything cumbersome."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1476947186, "post_id": 40147260, "comment_id": 67564537, "body": "Since the startup penalty that Moose used to have is not there any more, there is no real reason to recommend Mouse at this time. <a href=\"https://v1.metacpan.org/pod/Any::Moose\" rel=\"nofollow noreferrer\">Any::Moose</a>, which was used to pick between the two, has been deprecated in favor of Moo."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476947246, "post_id": 40147260, "comment_id": 67564573, "body": "On a cheery note, why not include Mo and <a href=\"https://v1.metacpan.org/pod/M\" rel=\"nofollow noreferrer\">M</a> too? ;-)"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1476947765, "post_id": 40147260, "comment_id": 67564889, "body": "And exterminated the Mouse :)"}, {"owner": {"reputation": 59, "user_id": 6872898, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3bf423536f307d2bee55b45b0c088cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6872898/thomas"}, "edited": false, "score": 0, "creation_date": 1476984603, "post_id": 40147260, "comment_id": 67590498, "body": "Hey xxfelixxx, awesome thanks! Would it be possible to get the version with Class::Std tho because I&#39;ve been trying for hours, and I couldn&#39;t make it work. So I would like very much to see what did I miss :)"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1477030623, "post_id": 40147260, "comment_id": 67607165, "body": "Updated with a <code>Class::Std</code> version for comparison."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 5, "last_activity_date": 1477030436, "last_edit_date": 1477030436, "creation_date": 1476946018, "answer_id": 40147260, "question_id": 40144120, "link": "https://stackoverflow.com/questions/40144120/make-a-class-on-perl-classstd/40147260#40147260", "title": "Make a class on Perl (class::Std)", "body": "<p>Since you are learning the more modern style, might I recommend that you give <a href=\"https://metacpan.org/pod/Moose\" rel=\"nofollow\">Moose</a> or <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow\">Moo</a> a try, as they attempt to simplify the object-oriented perl experience, as we as making it much more powerful.  These modules have been introduced after <code>Class::Std</code> came about, and represent a more modern approach to creating object.  The differences between Moose / Moo (and some others, like <a href=\"https://metacpan.org/pod/Mo\" rel=\"nofollow\">Mo</a> or <a href=\"https://metacpan.org/pod/M\" rel=\"nofollow\">M (joke)</a>) is that Moose gives you the full power of Object Meta Programming, while Moo strives for less power, but more speed.</p>\n\n<p>Here is an example of your code, using Moo:</p>\n\n<p><strong>test.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse MyClass;\nmy $obj = MyClass-&gt;new(LogPath =&gt; '/var/log/messages');\n$obj-&gt;run();\n1;\n</code></pre>\n\n<p><strong>MyClass.pm</strong></p>\n\n<pre><code>package MyClass;\nuse Moo; # Moose / Mouse / Moo\n\nhas LogPath =&gt; (\n    is =&gt; 'ro',    # Read Only\n    required =&gt; 1, # Required\n    isa =&gt; sub {\n        my ($path) = @_;\n        die \"LogPath must be a SCALAR\" if (ref $path);\n        die \"LogPath [$path] must be a real path\" unless -f $path;\n    },\n);\n\nsub run {\n    my ($self) = @_;\n    print \"MyClass::run()\\n\";\n    my $path = $self-&gt;LogPath();\n    print \"About to do something with LogPath [ $path ]\\n\";\n}\n\n1;\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>perl test.pl\nMyClass::run()\nAbout to do something with LogPath [ /var/log/messages ]\n</code></pre>\n\n<hr>\n\n<p>As requested, for comparison, here is the same object, but this time created using <a href=\"http://search.cpan.org/~chorny/Class-Std-0.013/lib/Class/Std.pm\" rel=\"nofollow\">Class::Std</a>.  Please note how much more code/boilerplate is required with the <code>Class::Std</code> solution vs <code>Moo</code>:</p>\n\n<p><strong>test_class_std.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse MyClassStd;\nmy $obj = MyClassStd-&gt;new({ LogPath =&gt; '/var/log/messages' });\n$obj-&gt;run();\nprint $obj-&gt;get_description() . \"\\n\";\n</code></pre>\n\n<p><strong>MyClassStd.pm</strong></p>\n\n<pre><code>package MyClassStd;\n\nuse Class::Std;\n\n# Create storage for object attributes...\n# The syntax '%foo : ATTR' applies the attribute named ATTR to the hash %foo.\n# For more info on how this works, see: perldoc attributes\n\n# Create one hash per attribute, these will be private to the class\nmy %log_paths   : ATTR;\n\n# These fields will be available via $obj-&gt;get_foo() methods\nmy %public_data : ATTR;\n\n# Handle initialization of objects of this class...\nsub BUILD {\n    my ($self, $object_id, $args) = @_;\n    my $path = check_path( $args-&gt;{ LogPath } );\n    $log_paths{ $object_id } = $path;\n    $public_data{ $object_id }{ description } = \"LogPath is set to [ $path ]\";\n}\n\n# Handle cleanup of objects of this class...\nsub DEMOLISH {\n    my ($self, $object_id) = @_;\n    # Objects will be removed from the hashes automatically\n    # Add any other cleanup code here\n}\n\n# Handle unknown method calls...\nsub AUTOMETHOD {\n    my ($self, $object_id, @args) = @_;\n\n    my $method_name = $_; # Method name passed in $_\n    # Return any public data...\n    if ( $method_name =~ m/^get_(.*)/ ) {\n        my $get_what = $1;\n        return sub {\n            return $public_data{$object_id}{$get_what};\n        }\n    }\n\n    warn \"Can't call $method_name on \", ref $self, \" object\";\n\n    return; # The call is declined by not returning a sub ref\n}\n\nsub run {\n    my ($self) = @_;\n\n    print \"MyClassStd::run()\\n\";\n    my ($path) = $log_paths{ ident $self };\n    print \"About to do something with LogPath [ $path ]\\n\";\n\n}\n\nsub check_path {\n    my ($path) = @_;\n\n    die \"LogPath must be a SCALAR\" if ( ref $path );\n    die \"LogPath [ $path] must be a real path\" unless -f $path;\n\n    return $path;\n}\n\n1;\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>MyClassStd::run()\nAbout to do something with LogPath [ /var/log/messages ]\nLogPath is set to [ /var/log/messages ]\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6872898, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3bf423536f307d2bee55b45b0c088cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6872898/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485372381, "creation_date": 1476927641, "last_edit_date": 1485372381, "question_id": 40144120, "link": "https://stackoverflow.com/questions/40144120/make-a-class-on-perl-classstd", "title": "Make a class on Perl (class::Std)", "body": "<p>I'm asking for your help on Perl stuff. </p>\n\n<p>I currently have my code working well by creating a new object and then using it to run a function, but I would like to use more recent ways of coding with Perl (using <code>class:Std</code> and integrated <code>BUILD</code>/<code>START</code> functions)</p>\n\n<p>So right now my code looks like that, I call <code>new</code> with a path to a log file and then run one function:</p>\n\n<pre><code># Called from another perl script\nuse MyClass;\nmy $Obj = MyClass-&gt;new('/usr/me/path.log');\n$Obj-&gt;run();\n\n# My module\npackage MyClass;\n\nsub new {\n    shift if ( defined($_[0] eq 'MyClass') );\n    my %args  = validate( @_,{ LogPath =&gt; { type =&gt; SCALAR, optional =&gt; 0 }, } );\n\n    my $self;\n    $self-&gt;{plistPath} = $_[1];\n    return bless $self;\n}\n\nsub run {\n    my $self = shift;\n    ...\n    ...\n}\n</code></pre>\n\n<p>And what I would like to have is a thing like that:</p>\n\n<pre><code>use Class::Std\n\nsub BUILD {\n    my $self = shift;\n    my $ident = shift;\n\n    my %args  = validate( @_, { LogPath =&gt; { type =&gt; SCALAR, optional =&gt; 0 }, } );\n\n    print \"My log path:\".$args{LogPath}.\"\\n\";\n\n    $self-&gt;{logPath} = $args{LogPath};\n\n    return bless $self;\n}\n\nsub run {\n    my $self = shift;\n\n    print $self-&gt;{logPath};\n\n    ....\n}\n</code></pre>\n\n<p>But this doesn't work, it prints well the log path into the <code>BUILD</code> (I just wanted to check here if it works), but I can't get it to register the path into <code>$self-&gt;{logPath}</code> to use it in my other functions. It tells me that it is not a Hash reference.</p>\n\n<p>From the tutorials I've done, I think <code>BUILD</code> shouldn't return the <code>$self</code> as it is created automatically with <code>Class::Std</code>, but I don't know how to do.</p>\n\n<p>Your help would be greatly appreciated, if you have any advice.</p>\n\n<p>Thanks a lot,\nTim.</p>\n"}, {"tags": ["perl", "www-mechanize"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1476924729, "post_id": 40143751, "comment_id": 67557406, "body": "Looking at the code, the error message should have the form <code>&quot;Unable to write to $filename: $!&quot;</code>, not what you posted. Which version of WWW::Mechanize are you using?"}, {"owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "edited": false, "score": 1, "creation_date": 1476941878, "post_id": 40143751, "comment_id": 67561823, "body": "Could you share the complete code?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1476942036, "post_id": 40143751, "comment_id": 67561885, "body": "Could you try with another output path, say <code>&#47;tmp&#47;image.png</code> ?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1476942164, "post_id": 40143751, "comment_id": 67561938, "body": "What are your options to <code>WWW::Mechanize-&gt;new(...);</code> ?  i.e. Are you using the $mech object directly with <code>autocheck =&gt; 0</code> or subclassing the $mech object, which turns off the checking ?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1476946946, "post_id": 40143751, "comment_id": 67564408, "body": "Is that line last line in the code you show actually line 209 in the full code?"}, {"owner": {"reputation": 129, "user_id": 6669003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d6d8f0db03cf2468997a8765218fea2e?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya J.", "link": "https://stackoverflow.com/users/6669003/aditya-j"}, "edited": false, "score": 0, "creation_date": 1476998876, "post_id": 40143751, "comment_id": 67598444, "body": "Ah I suppose I forget to mention what the line numbers were. The last line is indeed line 209."}, {"owner": {"reputation": 129, "user_id": 6669003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d6d8f0db03cf2468997a8765218fea2e?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya J.", "link": "https://stackoverflow.com/users/6669003/aditya-j"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1477056967, "post_id": 40143751, "comment_id": 67623280, "body": "Update: @xxfelixxx&#39;s suggestion worked"}], "owner": {"reputation": 129, "user_id": 6669003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d6d8f0db03cf2468997a8765218fea2e?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya J.", "link": "https://stackoverflow.com/users/6669003/aditya-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476941896, "creation_date": 1476924444, "last_edit_date": 1476941896, "question_id": 40143751, "link": "https://stackoverflow.com/questions/40143751/saving-an-image-using-wwwmechanize", "title": "Saving an image using WWW::Mechanize", "body": "<p>Here's a snippet of code:</p>\n\n<pre><code>my $image = $mech-&gt;find_image(n =&gt; 8);\n$mech-&gt;get($image -&gt; URI);\n$mech-&gt;save_content(\"image.png\");\n</code></pre>\n\n<p>I'm trying to find and save the 8th image on the page. This is working (I am getting image.png, and the correct image as well), however I still get this error:</p>\n\n<pre><code>Unable to write to output file at code.pl line 209.\n</code></pre>\n\n<p>This is truly puzzling considering I can open the output file, but I keep getting an error saying the output file could not be written! The code terminates here, and I can't move past. I need help resolving this error.</p>\n"}]