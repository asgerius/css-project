[{"tags": ["perl", "arguments"], "answers": [{"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": true, "score": 1, "last_activity_date": 1467249912, "last_edit_date": 1592644375, "creation_date": 1467243352, "answer_id": 38111747, "question_id": 38111618, "link": "https://stackoverflow.com/questions/38111618/using-perl-command-line-arguments-in-the-format-of-both-while-argv1-possi/38111747#38111747", "title": "Using perl command line arguments in the format of both while(&lt;&gt;) ARGV[1], possibly using a shift command?", "body": "<p>The typical way this is done, is to assign @ARGV to a list of variables so the script documents what you were expecting to be passed</p>\n<pre><code>my ($file, $count) = @ARGV ;\n</code></pre>\n<p>Of course, this doesn't actually check the validity of what - if anything - is actually passed.  If you want that, there are many options processing modules to choose from. Many like <a href=\"https://metacpan.org/pod/Getopt::Long\" rel=\"nofollow noreferrer\">Getopt::Long</a> but I prefer <a href=\"https://metacpan.org/pod/Getopt::Lucid\" rel=\"nofollow noreferrer\">Getopt::Lucid.</a>  YMMV.</p>\n<p>As with most things perl, Gabor Szabo has a great page about @ARGV <a href=\"http://perlmaven.com/argv-in-perl\" rel=\"nofollow noreferrer\">here</a>.  You may find this quote from it useful:</p>\n<blockquote>\n<h2>How to extract the command line arguments from <code>@ARGV</code></h2>\n<p><code>@ARGV</code> is just a regular array in Perl. The only difference from arrays that you create, is that it does not need to be declared and it is populated by Perl when your script starts.</p>\n<p>Aside from these issue, you can handle it as a regular array. You can go over the elements using <code>foreach</code>, or access them one by one using an index: <code>$ARGV[0]</code>.</p>\n<p>You can also use shift, unshift, pop or push on this array.</p>\n<p>Indeed, not only can you fetch the content of <code>@ARGV</code>, you can also change it.</p>\n<p>If you expect a single value on the command line you can check what was it, or if it was provided at all by looking at <code>$ARGV[0]</code>. If you expect two variables you will also check <code>$ARGV[1]</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1467243799, "last_edit_date": 1467243799, "creation_date": 1467243430, "answer_id": 38111761, "question_id": 38111618, "link": "https://stackoverflow.com/questions/38111618/using-perl-command-line-arguments-in-the-format-of-both-while-argv1-possi/38111761#38111761", "title": "Using perl command line arguments in the format of both while(&lt;&gt;) ARGV[1], possibly using a shift command?", "body": "<p><code>&lt;&gt;</code> reads from the <a href=\"https://metacpan.org/pod/perlvar#ARGV2\" rel=\"nofollow\"><code>ARGV</code></a> filehandle, which you can think of as a concatenation of all the filenames in <a href=\"https://metacpan.org/pod/perlvar#ARGV1\" rel=\"nofollow\"><code>@ARGV</code></a>. The <code>ARGV</code> filehandle won't be initialized until <code>&lt;&gt;</code> is called, so it is safe to manipulate <code>@ARGV</code> before your while loop.</p>\n\n<pre><code>my $val = pop @ARGV;             # take last argument\nmy ($val) = splice @ARGV, 1, 1;  # take 2nd argument\n...\nwhile (&lt;&gt;) {      # now ARGV fh uses whatever is currently in @ARGV\n    my ($one,$two,$three) = split;\n    if ($one &gt; $val) { ... }\n}\n</code></pre>\n\n<p>Also note that if <code>@ARGV</code> is empty, the <code>&lt;&gt;</code> operator will read from standard input. So long as you empty the <code>@ARGV</code> array before you try to read from <code>&lt;&gt;</code>, something like this will also work with <code>&lt;&gt;</code>:</p>\n\n<pre><code>./script.pl 50 &lt; text.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1467563569, "creation_date": 1467563569, "answer_id": 38172003, "question_id": 38111618, "link": "https://stackoverflow.com/questions/38111618/using-perl-command-line-arguments-in-the-format-of-both-while-argv1-possi/38172003#38172003", "title": "Using perl command line arguments in the format of both while(&lt;&gt;) ARGV[1], possibly using a shift command?", "body": "<p>I recommend you rearrange the order of the arguments</p>\n\n<pre><code>./script.pl 50 text.txt\n</code></pre>\n\n<p>Putting the file name(s) last is a more common practice, and it simplifies the needed code to the following:</p>\n\n<pre><code>my $limit = shift(@ARGV);\n\nwhile (&lt;&gt;) {\n    my @fields = split;\n    if ($fields[0] &gt; $limit) {\n        ...\n    }\n}\n</code></pre>\n\n<p>The trick is to remove all but the file names from <code>@ARGV</code> before <code>while (&lt;&gt;)</code>.</p>\n\n<p>This practice has the additional advantage that the following will simply read from STDIN:</p>\n\n<pre><code>./script.pl 50\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 38111747, "answer_count": 3, "score": 2, "last_activity_date": 1467563569, "creation_date": 1467242407, "question_id": 38111618, "link": "https://stackoverflow.com/questions/38111618/using-perl-command-line-arguments-in-the-format-of-both-while-argv1-possi", "title": "Using perl command line arguments in the format of both while(&lt;&gt;) ARGV[1], possibly using a shift command?", "body": "<p>I basically want to the do something like</p>\n\n<pre><code>while(&lt;&gt;){\n     my ($one, $two, $three) = split;\n     if ($one &gt; ARGV[1]){\n          #some commands\n     }\n}\n</code></pre>\n\n<p>Where I would invoke it like</p>\n\n<pre><code>./script.pl text.txt 50\n</code></pre>\n\n<p>But obviously I don't want the while loop to read anything from 50\nAny ideas on the best cleanest way to do this, like if I could shift the command line arguments somehow</p>\n"}, {"tags": ["perl", "parsing"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1467229985, "post_id": 38108769, "comment_id": 63651366, "body": "<code>&quot;97&quot;</code> does indeed not look like a number, unlike <code>97</code>. It sounds like your fields have quotes in them."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1467239646, "post_id": 38108852, "comment_id": 63655818, "body": "@user3781528 You did get the direct answer, which is great, but I think you should have a look at updates here, just so."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1558513081, "last_edit_date": 1558513081, "creation_date": 1467229722, "answer_id": 38108852, "question_id": 38108769, "link": "https://stackoverflow.com/questions/38108769/converting-string-to-number-argument-isn-t-number-error/38108852#38108852", "title": "Converting string to number \u201cArgument isn\u2019t number error\u201d", "body": "<p>That error is due to extra quotes, but I'd first mention a coding problem. Adding values by doing <code>looks_like_number($var) + ...</code> is an error.\nThe <a href=\"http://perldoc.perl.org/Scalar/Util.html#looks_like_number\" rel=\"nofollow noreferrer\">looks_like_number</a>, from <a href=\"http://perldoc.perl.org/Scalar/Util.html\" rel=\"nofollow noreferrer\">Scalar::Util</a>,</p>\n\n<blockquote>\n  <p>Returns true if perl thinks EXPR is a number.</p>\n</blockquote>\n\n<p>It is meant for <em>testing</em> whether a variable is numeric. It returns either a zero or a large positive integer.  So you need to test first to see which ones are numbers, by filtering by <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> for example, and only then use those as numbers.</p>\n\n<p>As explained in the <a href=\"https://stackoverflow.com/a/38108921/4653379\">answer by perlduck</a>, it is clear that there is extra quoting around. However, I'd be careful with merely removing all quotes as you may expose something which indeed isn't a number. Also, possible quotes <em>inside</em> strings may be needed, if other processing is involved.  </p>\n\n<p>I would still finally test the variables, cleaned up of enclosing quotes, by <code>looks_like_number</code> and assemble those that are numeric.  Perhaps</p>\n\n<pre><code>use List::Util qw(sum);\n# Remove extra (leading and trailing) quotes, for example\nmy @references   = map { s/^\"//; s/\"$//; $_ } ($forward_reference, ...);\nmy @numeric_refs = grep { looks_like_number($_) } @references;\nmy $total_reads  = sum @numeric_refs;\n</code></pre>\n\n<p>Here <code>sum</code> from the core <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> module is used.  All of the above can go in one statement, if nothing other than summing is done, since each operation returns and takes a list. </p>\n\n<hr>\n\n<p>Better yet, you can parse tab-delimited files with <a href=\"http://search.cpan.org/~makamaka/Text-CSV-1.33/lib/Text/CSV.pm\" rel=\"nofollow noreferrer\">Text::CSV</a>, which handles quotes very nicely.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Text::CSV;\nuse List::Util qw(sum);\n\nmy $csv = Text::CSV-&gt;new( \n    { binary =&gt; 1, sep_char =&gt; \"\\t\", allow_loose_quotes =&gt; 1 } \n) or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag ();\n\nmy $file = $tsv_file_new;\nopen my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n\nwhile (my $row = $csv-&gt;getline($fh)) {\n    my @fields = @$row;\n    # process. quotes around fields are gone\n    # ...\n    my @references = ($forward_reference, ...);\n    my $total_reads = sum grep { looks_like_number($_) } @references;\n}\n$csv-&gt;eof or $csv-&gt;error_diag();\nclose $fh;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1467273713, "post_id": 38108921, "comment_id": 63666881, "body": "As an alternative - pattern match out the numeric component: <code>my ($num) = $str =~ m&#47;(\\d+)&#47;;</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1467280685, "post_id": 38108921, "comment_id": 63671567, "body": "@Sobrique Far better. Stripping off the quotes like I did is the quick&#39;n&#39;dirty sledge hammer approach."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 6, "last_activity_date": 1467230014, "creation_date": 1467230014, "answer_id": 38108921, "question_id": 38108769, "link": "https://stackoverflow.com/questions/38108769/converting-string-to-number-argument-isn-t-number-error/38108921#38108921", "title": "Converting string to number \u201cArgument isn\u2019t number error\u201d", "body": "<p>Your error message already says it: <em>Argument \"\"97\"\" isn't numeric</em>. This happens when the <em>number</em> is actually a string <em>which is surrounded by quotes (<code>\"</code>),</em> like so:</p>\n\n<pre><code>my $num = '\"42\"';\nmy $sum = $num + 1;\n</code></pre>\n\n<p>This gives:</p>\n\n<blockquote>\n  <p>Argument \"\"42\"\" isn't numeric in addition (+) at...</p>\n</blockquote>\n\n<p>Try to get rid of the quotes from your <em>numbers</em>:</p>\n\n<pre><code>$num =~ s/\"//g;\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1424, "favorite_count": 0, "accepted_answer_id": 38108921, "answer_count": 2, "score": 2, "last_activity_date": 1558513081, "creation_date": 1467229475, "last_edit_date": 1467234802, "question_id": 38108769, "link": "https://stackoverflow.com/questions/38108769/converting-string-to-number-argument-isn-t-number-error", "title": "Converting string to number \u201cArgument isn\u2019t number error\u201d", "body": "<p>I\u2019m parsing tab delimited files.  Several columns are not being recognizes as numbers even though they are clearly numeric.  When I try to sum up these values errors are display : <code>Argument \"\"97\"\" isn't numeric in addition (+)</code> and Perl returns 0. </p>\n\n<p>I\u2019ve tried using <code>Scalar::Util qw(looks_like_number);</code> but it produced the same result '0'. Is there something else I can try?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>open my $out_fh, '&gt;', $final_variants or die qq{Unable to open \"$final_variants\" for output: $!};\n\nopen my $in_fh, '&lt;', $tsv_file_new\n            or die qq{Unable to open \"$tsv_file_new\" for input: $!};\n\nwhile ( &lt;$in_fh&gt; ) {\n\n        my @fields = split;\n\n        my $forward_reference = $fields[67];\n        my $reverse_reference = $fields[68];\n        my $forward_variant_reads = $fields[77];\n        my $reverse_variant_reads = $fields[78];\n\n        my $total_reads = (looks_like_number($forward_reference))\n                + (looks_like_number($reverse_reference))\n                + (looks_like_number($forward_variant_reads))\n                + (looks_like_number($reverse_variant_reads));\n\n        my $current_final_line = $headerline . \"\\t\"\n                    . $forward_reference . \"\\t\"\n                    . $reverse_reference . \"\\t\"\n                    . $forward_variant_reads . \"\\t\"\n                    . $reverse_variant_reads . \"\\t\"\n                    . $total_reads . \"\\t\";\n\n        print $out_fh $current_final_line, \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 3719, "user_id": 5216668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUnxO.jpg?s=128&g=1", "display_name": "Will Barnwell", "link": "https://stackoverflow.com/users/5216668/will-barnwell"}, "edited": false, "score": 1, "creation_date": 1467229028, "post_id": 38108492, "comment_id": 63650908, "body": "you probably want <code>0-9</code> instead of <code>1-9</code>"}, {"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "reply_to_user": {"reputation": 3719, "user_id": 5216668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUnxO.jpg?s=128&g=1", "display_name": "Will Barnwell", "link": "https://stackoverflow.com/users/5216668/will-barnwell"}, "edited": false, "score": 0, "creation_date": 1467229676, "post_id": 38108492, "comment_id": 63651219, "body": "That is true, I&#39;ll change the in the question."}], "answers": [{"comments": [{"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467229803, "post_id": 38108627, "comment_id": 63651283, "body": "I have to use 5.12 so your solution is perfect. Thanks!"}, {"owner": {"reputation": 3719, "user_id": 5216668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UUnxO.jpg?s=128&g=1", "display_name": "Will Barnwell", "link": "https://stackoverflow.com/users/5216668/will-barnwell"}, "edited": false, "score": 0, "creation_date": 1467230121, "post_id": 38108627, "comment_id": 63651430, "body": "change regex to match answer <code>0-9</code> instead of <code>1-9</code>"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 4, "last_activity_date": 1467230964, "last_edit_date": 1467230964, "creation_date": 1467228989, "answer_id": 38108627, "question_id": 38108492, "link": "https://stackoverflow.com/questions/38108492/perl-regular-expressions-troubles/38108627#38108627", "title": "Perl regular expressions troubles", "body": "<p>The return value of <code>s///</code> is <em>the number of substitutions it made</em>, which in your case is 9. If you are using at least perl 5.14, add the <code>r</code> flag to the substitution:</p>\n\n<blockquote>\n  <p>If the \"/r\" (non-destructive) option is used then it runs the\n  substitution on a copy of the string and instead of returning the\n  number of substitutions, it returns the copy whether or not a\n  substitution occurred. The original string is never changed when\n  \"/r\" is used. The copy will always be a plain string, even if the\n  input is an object or a tied variable.</p>\n</blockquote>\n\n<p>Otherwise, go through a temporary variable like this:</p>\n\n<pre><code>my $version = $rowref-&gt;[5];\n$version =~ s/([^0-9\\.])//g;\n$artifact-&gt;set_att(version =&gt; $version);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1467234292, "last_edit_date": 1467234292, "creation_date": 1467229024, "answer_id": 38108640, "question_id": 38108492, "link": "https://stackoverflow.com/questions/38108492/perl-regular-expressions-troubles/38108640#38108640", "title": "Perl regular expressions troubles", "body": "<p>The regex substitution changes the varialbe in place but returns the number of substitutions it made (<code>1</code> without the <code>/g</code> modifier, if it was succesful). </p>\n\n<pre><code>my $str = 'words 123';\nmy $ret = $str =~ s/\\d/numbers/g;\nsay \"Got $ret. String is now: $str\";\n</code></pre>\n\n<p>You can do the substitution first, <code>$rowref-&gt;[5] =~ s/...//;</code>, and then use the changed variable.</p>\n"}], "owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 38108627, "answer_count": 2, "score": 1, "last_activity_date": 1467234292, "creation_date": 1467228528, "last_edit_date": 1467229691, "question_id": 38108492, "link": "https://stackoverflow.com/questions/38108492/perl-regular-expressions-troubles", "title": "Perl regular expressions troubles", "body": "<p>I have a variable <code>$rowref-&gt;[5]</code> which contains the string:</p>\n\n<pre><code>\"  1.72.1.13.3.5  (ISU)\"\n</code></pre>\n\n<p>I am using <code>XML::Twig</code> to build modify an XML file and this variable contains the information for the version number of something. So I want to get rid of the whitespaces and the (ISU). I tried to use a substitution and <code>XML::Twig</code> to set the attribute:</p>\n\n<pre><code>$artifact-&gt;set_att(version=&gt; $rowref-&gt;[5] =~ s/([^0-9\\.])//g)\n</code></pre>\n\n<p>Interestingly what I got in my output was </p>\n\n<pre><code>&lt;artifact [...] version=\"9\"/&gt;\n</code></pre>\n\n<p>I don't understand what I am doing wrong. I checked with a <a href=\"http://regexr.com/\" rel=\"nofollow\">regular expression tester</a> and it seems fine. Can somebody spot my error?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 3, "creation_date": 1467225009, "post_id": 38107016, "comment_id": 63648595, "body": "Your code looks broken, for example, the line   } elsif($line =~ /^&gt;\\/) {  . Check your posted code, please."}, {"owner": {"reputation": 1562, "user_id": 6529697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c3aa4d20f07bc0be2bf548c4fec98ed?s=128&d=identicon&r=PG&f=1", "display_name": "PyPingu", "link": "https://stackoverflow.com/users/6529697/pypingu"}, "reply_to_user": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1467234230, "post_id": 38107016, "comment_id": 63653540, "body": "Yeah I&#39;m aware of that backslash. Without it the formatting on this site went haywire, I couldn&#39;t work out why but it isn&#39;t in my actual code."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1467234620, "post_id": 38107016, "comment_id": 63653715, "body": "I sympathize with that!  I&#39;ve edited your post to correct the error, and suppress further wrong coloring by the editor.  You can do that by adding another slash in a comment on the same line, <code># &#47;</code>.  I also added a statement (in that comment) on what it is for.  If you don&#39;t like this please go ahead and change it, by all means.  (But you don&#39;t want to post code that&#39;s wrong, no matter the format.)"}, {"owner": {"reputation": 1562, "user_id": 6529697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c3aa4d20f07bc0be2bf548c4fec98ed?s=128&d=identicon&r=PG&f=1", "display_name": "PyPingu", "link": "https://stackoverflow.com/users/6529697/pypingu"}, "edited": false, "score": 0, "creation_date": 1467234713, "post_id": 38107016, "comment_id": 63653764, "body": "Ah thanks! Do you know why that was affecting the coloring?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467234890, "post_id": 38107016, "comment_id": 63653827, "body": "Well, it&#39;s these slashes (and/or other special symbols), whichever way they are paired (or not).  I don&#39;t know how the editor parses things, but regex often results in this problem.  (I am not certain that it is always the <code>&#47;</code> that will turn it off, but it may be some other one.)  That itself is finicky, too -- it has to be <code># &#47;</code> and only after that can you add text."}, {"owner": {"reputation": 1562, "user_id": 6529697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c3aa4d20f07bc0be2bf548c4fec98ed?s=128&d=identicon&r=PG&f=1", "display_name": "PyPingu", "link": "https://stackoverflow.com/users/6529697/pypingu"}, "edited": false, "score": 0, "creation_date": 1467238161, "post_id": 38107016, "comment_id": 63655252, "body": "Hmm quite curious, I was very confused as it looked absolutely fine in my text editor of choice (sublime)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467267262, "post_id": 38107016, "comment_id": 63663376, "body": "Oh, I mean it is the problem with the markdown/editor <i>here</i>, when you paste your code in this editor.  It highlights things etc, and somewhere there those multiple slashes (when combined with some other characters) in a regex confuse it."}], "answers": [{"comments": [{"owner": {"reputation": 1562, "user_id": 6529697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c3aa4d20f07bc0be2bf548c4fec98ed?s=128&d=identicon&r=PG&f=1", "display_name": "PyPingu", "link": "https://stackoverflow.com/users/6529697/pypingu"}, "edited": false, "score": 0, "creation_date": 1467234683, "post_id": 38107813, "comment_id": 63653751, "body": "Thanks this is the exact sort of solution I was looking for!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1562, "user_id": 6529697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c3aa4d20f07bc0be2bf548c4fec98ed?s=128&d=identicon&r=PG&f=1", "display_name": "PyPingu", "link": "https://stackoverflow.com/users/6529697/pypingu"}, "edited": false, "score": 0, "creation_date": 1467266961, "post_id": 38107813, "comment_id": 63663259, "body": "@PerlPingu  Great :)  Very glad to hear to that, thanks."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1595657212, "last_edit_date": 1595657212, "creation_date": 1467226089, "answer_id": 38107813, "question_id": 38107016, "link": "https://stackoverflow.com/questions/38107016/using-try-and-catch-to-move-past-errors/38107813#38107813", "title": "Using Try and Catch to move past errors", "body": "<p>You are completely right that you want to see, log, and review all errors (and warnings). The mechanism and syntax provided by <a href=\"http://search.cpan.org/%7Eether/Try-Tiny-0.24/lib/Try/Tiny.pm\" rel=\"nofollow noreferrer\">Try::Tiny</a> is meant to be bare-bones and simple to use.</p>\n<pre><code>use warnings;\nuse strict;\nuse feature qw(say);\nuse Try::Tiny;\n\nmy @fastas = &lt;*.fasta&gt;;\n\nmy $errlog = 'error_log.txt';\nopen my $fh_err, '&gt;', $errlog  or die &quot;Can't open $errlog for writing: $!&quot;;\n\nforeach my $file (@fastas) {\n    try {\n        # processing, potentially throwing a die\n    }\n    catch {\n        say $fh_err &quot;Error with $file: $_&quot;;   # NOTE, it is $_ (not $! or $@)\n    };\n}\nclose $fh_err;\n\n# Remove the log if empty\nif (-z $errlog) { \n    say &quot;No errors logged, removing $errlog&quot;;\n    unlink $errlog or warn &quot;Can't unlink $errlog: $!&quot;;\n}    \n</code></pre>\n<p>You can save names of files for which the processing  failed, with <code>push @failed_files, $file</code> inside the <code>catch { }</code> block.  Then the code can attempt again after the main processing, if you know that errors are mostly due to random connection problems. And having the list of failed files is handy.</p>\n<p>Note that with v5.14 the problems that this module addresses <a href=\"http://perldoc.perl.org/perl5140delta.html#Exception-Handling\" rel=\"nofollow noreferrer\">were fixed</a>, so that a normal use of <a href=\"http://perldoc.perl.org/5.8.8/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a> is fine. It is mostly a matter of preference at this point, but note that <code>Try::Tiny</code> has a few twists of its own.  See <a href=\"https://stackoverflow.com/questions/10364975/is-trytiny-still-recommended-for-exception-handling-in-perl-5-14-or-later\">this post</a> for a discussion.</p>\n<p>This addresses the question of the simple exception handling, not the rest of the code.</p>\n"}], "owner": {"reputation": 1562, "user_id": 6529697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c3aa4d20f07bc0be2bf548c4fec98ed?s=128&d=identicon&r=PG&f=1", "display_name": "PyPingu", "link": "https://stackoverflow.com/users/6529697/pypingu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "accepted_answer_id": 38107813, "answer_count": 1, "score": 1, "last_activity_date": 1595657212, "creation_date": 1467223425, "last_edit_date": 1467234410, "question_id": 38107016, "link": "https://stackoverflow.com/questions/38107016/using-try-and-catch-to-move-past-errors", "title": "Using Try and Catch to move past errors", "body": "<p>This is my first question so I apologise in advance if I format/ask it all wrong. </p>\n\n<p>I am using Perl to extract a string from a file, submit a web form, and download a new file created by the web-page. The aim is to have it run for 30,000 files in a loop, which I estimate will take ~8 days. I am using WWW::Selenium and WWW::Mechanize to perform the web automation. The issue I have is that if for some reason a page doesn't load properly or the internet drops for a period of time then the script exits and gives an error message like(depending on which stage it failed at):</p>\n\n<pre><code>Error requesting http://localhost:4444/selenium-server/driver/:\nERROR: Could not find element attribute: link=Download PDB File@href\n</code></pre>\n\n<p>I would like the script to continue running, moving onto the next round of the loop so I don't have to worry if a single round of the loop throws an error. My research suggests that using <code>Try::Tiny</code> may be the best solution. Currently I have the script below using only <code>try{...}</code> which seems to suppress any error and allow the script to continue through the files. However I'm concerned that this seems to be a very blunt solution and provides me no insight into which/why files failed. </p>\n\n<p>Ideally I would want to print the filename and error message for each occurence to another file that could then be reviewed once the script is complete but I am struggling to understand how to use <code>catch{...}</code> to do this or if that is even the correct solution. </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse WWW::Selenium;\nuse WWW::Mechanize;\nuse Try::Tiny;\n\n\nmy @fastas = &lt;*.fasta&gt;;\nforeach my $file (@fastas) {\ntry{\n\nopen(my $fh, \"&lt;\", $file);\nmy $sequence;\nmy $id = substr($file, 0, -6);\nwhile (my $line = &lt;$fh&gt;) {\n\n        ## discard fasta header line\n        } elsif($line =~ /^&gt;/) {     # / (turn off wrong coloring)\n            next;\n\n        ## keep line, add to sequence string\n        } else {\n            $sequence .= $line;\n        }\n    }\nclose ($fh);\n\nmy $sel = WWW::Selenium-&gt;new( host =&gt; \"localhost\",\n                              port =&gt; 4444,\n                              browser =&gt; \"*firefox\",\n                              browser_url =&gt; \"http://www.myurl.com\",\n                            );\n\n$sel-&gt;start;\n$sel-&gt;open(\"http://www.myurl.com\");\n$sel-&gt;type(\"chain1\", $sequence);\n$sel-&gt;type(\"chain2\", \"EVQLVESGPGLVQPGKSLRLSCVASGFTFSGYGMHWVRQAPGKGLEWIALIIYDESNKYYADSVKGRFTISRDNSKNTLYLQMSSLRAEDTAVFYCAKVKFYDPTAPNDYWGQGTLVTVSS\");\n$sel-&gt;click(\"css=input.btn.btn-success\");\n$sel-&gt;wait_for_page_to_load(\"30000\");\n\n## Wait through the holding page - will timeout after 5 mins\n$sel-&gt;wait_for_element_present(\"link=Download PDB File\", \"300000\");\n## Get the filename part of link\n$sel-&gt;wait_for_page_to_load(\"30000\");\nmy $pdbName = $sel-&gt;get_attribute(\"link=Download PDB File\\@href\");\n## Concatenate it with the main domain\nmy $link = \"http://www.myurl.com/\" . $pdbName;\n$sel-&gt;stop;\n\nmy $mech = WWW::Mechanize-&gt;new( autocheck =&gt; 1 );\n$mech -&gt; get($link);\n#print $mech -&gt; content();\n$mech -&gt; save_content($id . \".pdb\");\n};\n\n}\n</code></pre>\n"}, {"tags": ["json", "git", "perl"], "answers": [{"tags": [], "owner": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "is_accepted": false, "score": 0, "last_activity_date": 1467245742, "creation_date": 1467245742, "answer_id": 38112056, "question_id": 38106607, "link": "https://stackoverflow.com/questions/38106607/git-log-json-with-changed-files/38112056#38112056", "title": "Git log JSON *with changed files*", "body": "<p>I know little about Perl. Here is my way to get the changed files of a commit. Hope it helps.</p>\n\n<pre><code>git log -1 &lt;sha1&gt; --pretty=%h --name-only | tail -n +3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": true, "score": 1, "last_activity_date": 1472802285, "last_edit_date": 1472802285, "creation_date": 1467292021, "answer_id": 38124074, "question_id": 38106607, "link": "https://stackoverflow.com/questions/38106607/git-log-json-with-changed-files/38124074#38124074", "title": "Git log JSON *with changed files*", "body": "<p>I've added <code>--name-only</code> parameter support to the original Noah Sussman's script so you can get the list of changed files using this command:</p>\n\n<pre><code>git log2json --name-only\n</code></pre>\n\n<p>The amended script is <a href=\"https://gist.github.com/dmegorov/b64dcea2eed31e02c916fc6ed9111f4f#file-git-log2json-sh\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 498, "user_id": 1123294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ESO6g.png?s=128&g=1", "display_name": "watkinsmatthewp", "link": "https://stackoverflow.com/users/1123294/watkinsmatthewp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 1, "accepted_answer_id": 38124074, "answer_count": 2, "score": 0, "last_activity_date": 1472802285, "creation_date": 1467221977, "last_edit_date": 1495541315, "question_id": 38106607, "link": "https://stackoverflow.com/questions/38106607/git-log-json-with-changed-files", "title": "Git log JSON *with changed files*", "body": "<p>I need to get the output of a git log command formatted as JSON. I like the approach suggested in <a href=\"https://stackoverflow.com/questions/4600445/git-log-output-to-xml-json-or-yaml\">Git log output to XML, JSON, or YAML?</a> to use a custom git log pretty formatter and a light layer of perl processing on top using the command <a href=\"https://gist.githubusercontent.com/textarcana/1306223/raw/bf185bdf6dc2a70316d36769a7d31584afc2fd95/git-log2json.sh\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>git log \\\n--pretty=format:'{%n  \"commit\": \"%H\",%n  \"author\": \"%an &lt;%ae&gt;\",%n  \"date\": \"%ad\",%n  \"message\": \"%f\"%n},' \\\n$@ | \\\nperl -pe 'BEGIN{print \"[\"}; END{print \"]\\n\"}' | \\\nperl -pe 's/},]/}]/'\n</code></pre>\n\n<p>This works fantastic for getting those certain fields, but I also need the list of files changed that is returned from using the --name-status flag included in the JSON output.</p>\n\n<p>I've tried various approaches but I'm at a loss at how to approach this. My gut tells me I'm missing something obvious. Any ideas?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["database", "perl", "hash", "reference"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1467227018, "post_id": 38106106, "comment_id": 63649823, "body": "Your logic doesn&#39;t make any sense.  Assuming you fix the <code>==</code> to <code>=~</code> on the first line, your first elsif is catching cases where both <code>$comments</code> contains &#39;DTN&#39; and <code>$revenue</code> is 300.  For this to be skipped and the next elsif to be executed, one of those two conditions has to be false.  The 2nd elsif again checks for <code>$revenue</code> equal to 300.  If that&#39;s true, it must mean that <code>$comments</code> does not contain &#39;DTN&#39;.  But then both of your two clauses within the second elsif are checking to see that <code>$comments</code> contains (other text and) &#39;DTN&#39;.  Those two blocks will never be hit."}, {"owner": {"reputation": 9, "user_id": 6529624, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/48fde6b752c61020de0fd265492643aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edccccch", "link": "https://stackoverflow.com/users/6529624/edccccch"}, "reply_to_user": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1467307718, "post_id": 38106106, "comment_id": 63690605, "body": "@PaulL Thanks so much. It was the logic problem that causes the wrong output! You are awesome"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6529624, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/48fde6b752c61020de0fd265492643aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edccccch", "link": "https://stackoverflow.com/users/6529624/edccccch"}, "edited": false, "score": 0, "creation_date": 1467221300, "post_id": 38106298, "comment_id": 63646319, "body": "So /^DTN$/i means exactly matches and case insensitive? I tried it but still the output counts are the number of revenues that are 300 ignoring the comments fields"}, {"owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "reply_to_user": {"reputation": 9, "user_id": 6529624, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/48fde6b752c61020de0fd265492643aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edccccch", "link": "https://stackoverflow.com/users/6529624/edccccch"}, "edited": false, "score": 1, "creation_date": 1467221596, "post_id": 38106298, "comment_id": 63646494, "body": "Yes. &#39;^&#39; means beginning of the string and &#39;$&#39; means the end. Without the full script or the input, and expected output, there&#39;s only so much we can do."}], "tags": [], "owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "is_accepted": false, "score": 2, "last_activity_date": 1467220908, "creation_date": 1467220908, "answer_id": 38106298, "question_id": 38106106, "link": "https://stackoverflow.com/questions/38106106/perl-reference-hash-with-two-similar-words-not-all-counted/38106298#38106298", "title": "perl reference hash with two similar words not all counted", "body": "<p>The first \n<code>elsif ($comments == /DTN/i and $revenue == 300)</code> is all wrong.</p>\n\n<p>You want <code>elsif ($comments =~ /DTN/i and $revenue == 300)</code> </p>\n\n<p>or I suspect probably actually you want <code>elsif ($comments =~ /^DTN$/i and $revenue == 300)</code> to give you an exact match, not a match anywhere in the $comments string because without that, you'll never hit the <code>$class=</code> statements below.</p>\n"}], "owner": {"reputation": 9, "user_id": 6529624, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/48fde6b752c61020de0fd265492643aa?s=128&d=identicon&r=PG&f=1", "display_name": "Edccccch", "link": "https://stackoverflow.com/users/6529624/edccccch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467220908, "creation_date": 1467220282, "question_id": 38106106, "link": "https://stackoverflow.com/questions/38106106/perl-reference-hash-with-two-similar-words-not-all-counted", "title": "perl reference hash with two similar words not all counted", "body": "<p>I am writing a Perl project and am facing the problem as followed:\nI have a large input file which has a comment file and a revenue field. The comment field could have DTN or Cluster Master DTN and both would have revenue of 300 to be counted into their own category. \nThe following is part of the code:</p>\n\n<pre><code>elsif ($comments == /DTN/i and $revenue == 300)\n{\n    $class = 'DTN';\n}\n\nelsif ($revenue == 300)\n{\n    if ($comments =~ /cluster master\\+DTN/i)\n    {\n        $class = 'SLA Cluster Master + DTN';\n    }\n    elsif ($comments =~ /cluster master and DTN/i)\n    {   \n        $class = 'SLA Cluster Master + DTN';\n    }\n}\n</code></pre>\n\n<p>In the output tho, it counts the number of revenue that is 300 to be the number of DTN field and it only counts the comments of 'cluster master+DTN'  as the SLA Cluster Master + DTN instead of 'cluster master and DTN' which should also be counted in. \nI have no idea what's going on and how to fix the problem. Is there anybody else having the same problem?</p>\n"}, {"tags": ["perl", "hash", "merge", "hash-of-hashes"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467222091, "post_id": 38102913, "comment_id": 63646777, "body": "Just a note -- remember that you want the constructor to return a proper object, so the <code>new</code> method should return a <code>bless</code>-ed ref so that the calling code has a proper thing to work with. Normally it is <code>new</code> that will do <code>return bless $self, $class</code>. Inside of that method, so inside the class, you can of course call other subs to organize work."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467213674, "post_id": 38103473, "comment_id": 63641315, "body": "yeah I only want a single key, my thinking of using references was that the hashes are already created in the new() method which consumes both of these. This has given me a better understanding, I&#39;m just not sure when passing the output of one into the other, should I be blessing outputs <code>$first_param</code> is meant to be <code>&quot;UNABLE_TO_PING SWITCH_ERROR&quot;</code> , after code is removed."}, {"owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467214460, "post_id": 38103473, "comment_id": 63641911, "body": "All blessing does is associate a package name with a given reference for use in method lookup, so usually you would just have it on the top level object."}, {"owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467214558, "post_id": 38103473, "comment_id": 63641968, "body": "And if you were saying you want the error message to be the key of the value, you can do that <code>$error-&gt;{$message} = $hashRef</code>"}], "tags": [], "owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1467212765, "creation_date": 1467212765, "answer_id": 38103473, "question_id": 38102913, "link": "https://stackoverflow.com/questions/38102913/how-to-add-a-scalar-value-string-to-an-existing-hash-in-perl/38103473#38103473", "title": "How to add a scalar value (string) to an existing hash in Perl", "body": "<p>I'm going to start with the simple explanation of how to merge a hash in perl, it's pretty simple.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Printer;\n\nmy (%a, %b, %c);\n\n%a = (a =&gt; 1, b =&gt; 2);\n%b = (a =&gt; 0, c =&gt; 3, d =&gt; 4);\n%c = (%a, %b);\n\np(%c); # { a =&gt; 0, b =&gt; 2, c =&gt; 3, d =&gt; 4 }\n</code></pre>\n\n<p>You'll note with the <code>a</code> keys that if there are duplicates whatever value appears in the second set will be the one that 'wins'.</p>\n\n<p>I honestly have no idea what that second function is doing because it references variables that don't exist on practically every line. (The create one also does this but only on a couple lines).</p>\n\n<p>From your description I think you only want a single key added so you don't really need to do that though, you should be able to just add the key to the original object: <code>$error-&gt;{messsage} = $message</code></p>\n\n<p>But assuming you did want to pass two hash references in and merge them, it would look something like this:</p>\n\n<pre><code>sub merge {\n    my ($first, $second) = @_;\n    my %merged = (%$first, %$second);\n    return bless \\%merged, $class;\n}\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 1, "accepted_answer_id": 38103473, "answer_count": 1, "score": 0, "last_activity_date": 1598211146, "creation_date": 1467211330, "last_edit_date": 1598211146, "question_id": 38102913, "link": "https://stackoverflow.com/questions/38102913/how-to-add-a-scalar-value-string-to-an-existing-hash-in-perl", "title": "How to add a scalar value (string) to an existing hash in Perl", "body": "<p>I just want to know what the process is behind merging a value into a hash.\nI have a hash which has 5 to 6 keys depending on if the error outputs runtime values. The method that takes in the arguments also take an error message string in first, also. I want it to be able to add this error message string into the hash, to make one big hash basically.</p>\n<p>This is how the method would be called:</p>\n<pre><code>ASC::Builder::Error-&gt;new(&quot;Simple error message here&quot;, code =&gt; &quot;UNABLE_TO_PING_SWITCH_ERROR&quot;, switch_ip =&gt; $ip3, timeout =&gt; $t1);\n</code></pre>\n<ul>\n<li><p>The last two values assign runtime parameters/values to keys inside the context key in the error hash.</p>\n</li>\n<li><p>Here is a look at the error hash:</p>\n<pre><code> use constant ERROR_CODE =&gt; {\n      UNABLE_TO_PING_SWITCH_ERROR =&gt; {\n          category =&gt; 'Connection Error',\n          template =&gt; 'Could not ping switch %s in %s seconds.',\n          context =&gt; [qw(switch_ip timeout)],\n          tt =&gt; {template =&gt; 'disabled'},\n          fatal =&gt; 1,\n          wiki_page =&gt; 'www.error-solution.com/ERROR_CODE_A',\n      }\n };\n</code></pre>\n</li>\n</ul>\n<h1>Here is my method to manipulate the error hash and construct the message</h1>\n<pre><code>sub _create_error_hash { \n    my $error_string = shift;                                                                                                                                                              if(defined($params{code}) {                    \n    my $first_param = delete $params{code};                                                                                                                                                            \n        foreach my $key (@{$first_param-&gt;{context}}) {                                                                                                                                                     \n            $first_param-&gt;{$key} = $key;                                                                                                                                                                   \n        }                                                                                                                                                                                                  \n        my @template_args = map { $first_param-&gt;{$_}} @{$first_param-&gt;{context} };                                                                                                                         \n        $first_param-&gt;{message} = sprintf($first_param-&gt;{template}, @template_args);                                                                  }                                                     \n        return bless $first_param;                                                                                                                                                                         \n    }\n\nsub _merge_hashes {\n    my ($message = {message =&gt; $messsage}, $first_param = {first_param =&gt; $first_param}) = @ _;\n    #merge these two hashes and bless into $class (don't know how to merge hashes)\n    my %merged_hash = ($message, $first_param);\n    return bless $merged_hash, $class;\n}\n</code></pre>\n<p>The output of <code>_create_hash</code> should be the input for <code>_merge_hashes</code>\nNot sure if I have handled that properly. These methods will be use inside the new method (which is a mess right now) hence why it's not included.</p>\n<p>That's just an attempt , of an example I seen on perlmonks, Here is the link:\n<a href=\"http://www.perlmonks.org/?node_id=14263\" rel=\"nofollow noreferrer\">http://www.perlmonks.org/?node_id=14263</a></p>\n"}, {"tags": ["perl", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 7, "last_activity_date": 1467210476, "creation_date": 1467210476, "answer_id": 38102599, "question_id": 38102558, "link": "https://stackoverflow.com/questions/38102558/why-does-datetimes-strftime-give-the-wrong-year-when-i-subtract-days-from-dates/38102599#38102599", "title": "Why does DateTime&#39;s strftime give the wrong year when I subtract days from dates near the end of a year?", "body": "<p>The strftime code <code>%G</code> is for the year according to the <a href=\"https://en.wikipedia.org/wiki/ISO_week_date\">ISO 8601 week number calendar</a>. Days at the end of December might be in the following ISO year, and days at the beginning of January might be in the previous one. Use <code>%Y</code> instead.</p>\n"}], "owner": {"reputation": 55, "user_id": 6223882, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/4yCGg.png?s=128&g=1", "display_name": "cterra", "link": "https://stackoverflow.com/users/6223882/cterra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 38102599, "answer_count": 1, "score": 2, "last_activity_date": 1467211929, "creation_date": 1467210364, "last_edit_date": 1467211929, "question_id": 38102558, "link": "https://stackoverflow.com/questions/38102558/why-does-datetimes-strftime-give-the-wrong-year-when-i-subtract-days-from-dates", "title": "Why does DateTime&#39;s strftime give the wrong year when I subtract days from dates near the end of a year?", "body": "<p>I have to open some logs that have a date in the filename. So I am trying to open all the files through a certain date.</p>\n\n<p>I'm using <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow\">DateTime</a>. I do:</p>\n\n<pre><code>do \n{\n    $datechoice = $today-&gt;strftime('%G%m%d'); #YearMonthDay\n    $date_for_graph = $today-&gt;strftime('%d/%m/%G');\n    # unshift @Log_Period_Time, \"$date_for_graph\";\n    print $datechoice.\" - \".$date_for_graph.\"&lt;br&gt;\";\n    $today-&gt;subtract(days =&gt; 1);\n} while($datechoice &gt; 20141107);\n</code></pre>\n\n<p>But the output shows the wrong year for dates near the end of a year: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>20160109 - 09/01/2016\n20160108 - 08/01/2016\n20160107 - 07/01/2016\n20160106 - 06/01/2016\n20160105 - 05/01/2016\n20160104 - 04/01/2016\n20150103 - 03/01/2015  &lt;-- Should be 2016\n20150102 - 02/01/2015\n20150101 - 01/01/2015\n20151231 - 31/12/2015\n20151230 - 30/12/2015\n20151229 - 29/12/2015\n...\n20150103 - 03/01/2015\n20150102 - 02/01/2015\n20150101 - 01/01/2015\n20151231 - 31/12/2015\n20151230 - 30/12/2015\n20151229 - 29/12/2015\n20141228 - 28/12/2014  &lt;-- Should be 2015\n20141227 - 27/12/2014\n20141226 - 26/12/2014\n</code></pre>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["python", "mysql", "perl"], "answers": [{"tags": [], "owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "is_accepted": true, "score": 0, "last_activity_date": 1467210676, "creation_date": 1467210676, "answer_id": 38102678, "question_id": 38102029, "link": "https://stackoverflow.com/questions/38102029/translating-a-perl-code-utilising-the-dbi-module-to-python-with-mysqldb/38102678#38102678", "title": "Translating a perl code, utilising the DBI module, to python with MySQLdb", "body": "<p>You should be able to run the code to discover equivalency, but yes those two things are equivalent.</p>\n\n<p>The thing that causes the syntax to be odd in the perl example is that perl had a very strict separation of scalars, arrays, and hashes in its early days and arrays and hashes could only have scalars as their stored values. This was quickly improved by adding references into perl which are scalars that point to arrays and hashes, but the syntax was already set with that separation so additional operations had to be added to the language.</p>\n\n<p>As a result, the first line is taking a reference to an array of array references and dereferencing the outer reference so that it is now an array of array references. It then loops over all those references inside it, dereferences them and takes the first element in the array.  Because <code>@$t[0]</code> looks odd usually you would see it written as <code>$t-&gt;[0]</code> which doesn't require you to know that the array dereference operator (<code>@</code>) binds tighter than the element access operator (<code>[0]</code>).</p>\n"}], "owner": {"reputation": 111, "user_id": 5755035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4b1a15ac9eab1297505af336d7ce5fa?s=128&d=identicon&r=PG&f=1", "display_name": "id5h", "link": "https://stackoverflow.com/users/5755035/id5h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 38102678, "answer_count": 1, "score": 0, "last_activity_date": 1487436764, "creation_date": 1467209088, "last_edit_date": 1487436764, "question_id": 38102029, "link": "https://stackoverflow.com/questions/38102029/translating-a-perl-code-utilising-the-dbi-module-to-python-with-mysqldb", "title": "Translating a perl code, utilising the DBI module, to python with MySQLdb", "body": "<p>I have little python experience, and I have zero perl knowledge, but I need to translate a perl code that connects to a MySQL server into python.</p>\n\n<p>In the perl subroutine, after the standard connectivity actions, the code that appears is:</p>\n\n<pre><code>my @tmp = @{$dbh-&gt;selectall_arrayref( $sql )};\n\nmy @types;\nforeach my $t (@tmp) {\npush @types, @$t[0];\n}\n\nreturn @types;\n</code></pre>\n\n<p>where $sql is the MySQL selection query. What I would do in a python function is:</p>\n\n<pre><code>cursor = conn.cursor()\ncursor.execute( sql )\ntmp = cursor.fetchall()\ntypes = list( len( tmp ) )\nfor item in tmp :\n    types.append( item[0] )\n\nreturn types\n</code></pre>\n\n<p>My question is what does @$t[0] contain and is that equivalent to the item[0] in tmp?</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467212170, "post_id": 38102030, "comment_id": 63640233, "body": "I am quite happy with your solution, but I just stumbled over a case where it is not working. There is a file which contains no whitespaces but does contain a version number after the extension (something like: <code>xyz.pj1.4.0</code>) how could I catch that?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467212321, "post_id": 38102030, "comment_id": 63640358, "body": "@UsefulUserName: How do you want to classify it? As 1, 2, or 3? Or do you want to add a new class for such cases?"}, {"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467212553, "post_id": 38102030, "comment_id": 63640556, "body": "Case 3. I need to kick out/ignore anything that is not formatted properly."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467212659, "post_id": 38102030, "comment_id": 63640613, "body": "@UsefulUserName: How can you tell whether <code>abc.x1</code> is a file name or a file name with a version number with whitespace missing?"}, {"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467212849, "post_id": 38102030, "comment_id": 63640733, "body": "If you are thinking I&#39;m guessing, you are right. ;) But <code>.xlsx1.4.0</code> does not look like an extension for me. I&#39;m going to check with my principal. Hold on."}, {"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467213183, "post_id": 38102030, "comment_id": 63640963, "body": "Yeah they will have to be ignored. Found some more with <code>.zip1.3</code>, <code>docx2.4</code> and so on."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 1, "creation_date": 1467214037, "post_id": 38102030, "comment_id": 63641607, "body": "@UsefulUserName: What about <code>} elsif (&#47; |[0-9]\\.[0-9]+$&#47; || !&#47;\\.&#47;) {</code> for Ignoring? It might also work without the <code>&#47; |</code> at the beginning."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1467209090, "creation_date": 1467209090, "answer_id": 38102030, "question_id": 38101650, "link": "https://stackoverflow.com/questions/38101650/perl-using-regular-expressions-to-identify-file-extensions-in-a-list-of-files/38102030#38102030", "title": "Perl using regular expressions to identify file extensions in a list of files", "body": "<p>It seems easier to check 3 before 2:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    if (/\\.pj$/) {\n        print \"Doing something with $_\\n\";\n\n    } elsif (/ / || ! /\\./) {\n        print \"Ignoring $_\\n\";\n\n    } else {\n        print \"Doing something else with $_\\n\";\n    }\n}\n\n__DATA__\na.pj\nb.pj\nnull\nc.xlsx\ngibberishWithNoExtension\nd.pj\nf.docx\ng.pj 1.17 and 1.15.1.1\n</code></pre>\n\n<p>Note the backslash in the first regex. Bare dot matches anything but newline, but you don't want to match <code>a.xpj</code>. The dollar sign is needed to prevent matching <code>a.pjx</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1467256125, "creation_date": 1467256125, "answer_id": 38113341, "question_id": 38101650, "link": "https://stackoverflow.com/questions/38101650/perl-using-regular-expressions-to-identify-file-extensions-in-a-list-of-files/38113341#38113341", "title": "Perl using regular expressions to identify file extensions in a list of files", "body": "<p><a href=\"http://www.metacpan.org/module/File::Basename\" rel=\"nofollow\">File::Basename</a>'s <code>fileparse</code> can handle this. Give it the regex up want to use and it breaks up the filename:</p>\n\n<pre><code>use v5.10;\nuse File::Basename qw(fileparse);\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my( $name, $dir, $suffix ) = fileparse( $_, qr/\\.[^.]+\\z/ );\n    say \"$_ -&gt; $suffix\";\n}\n</code></pre>\n\n<p>You mention that you want to ignore some endings as extensions. You can tailor the regex to do that.</p>\n\n<p>Once you have the extension you can branch on that any way that you like. </p>\n"}, {"comments": [{"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467392947, "post_id": 38132251, "comment_id": 63730900, "body": "I had thought about something like that. The problem is that I don&#39;t know and never will know all the extensions contained in the list. And even if I did, the script might be used with other lists that contain yet different files with different extensions. Thank you though, it would have been a very neat solution."}], "tags": [], "owner": {"reputation": 332, "user_id": 1226168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365ffe5a8d4bfb016dc5528e49e9a7f6?s=128&d=identicon&r=PG", "display_name": "daniel souza", "link": "https://stackoverflow.com/users/1226168/daniel-souza"}, "is_accepted": false, "score": 1, "last_activity_date": 1467319633, "last_edit_date": 1467319633, "creation_date": 1467316878, "answer_id": 38132251, "question_id": 38101650, "link": "https://stackoverflow.com/questions/38101650/perl-using-regular-expressions-to-identify-file-extensions-in-a-list-of-files/38132251#38132251", "title": "Perl using regular expressions to identify file extensions in a list of files", "body": "<p>I known that you have a good asnwer, but I would like to do something like this:</p>\n\n<pre><code>open (INP, \"&lt;path_of_file/file_list.txt\") or die $!:\nwhile( &lt;INP&gt; ) {\n    chomp ( $_ );\n    #~ whatever followed by dot '\\.', then extension captured in a group '$1'\n    #~ line must be evaluated as true only if its ended with a extension name\n    #~ otherwise it'll be ignored (as you expect to do)\n    if ( $_ =~ m/\\.(.+)$/ ) {\n        if( $1 eq \"pj\" ) { #~ 1) If the extension is \".pj\" do something.\n            #~ do something with pj extension\n        } elsif ( $1 eq \"xlsx\" ) { # and other 'elses' rule 2)\n            #~ do something with xlsx extension\n        } elsif ( $1 eq \"docx\" ) {\n            #~ do something with docx extension\n        } elsif ( $1 eq \"...\" ) {\n            #~ do something with ... extension\n        } else {\n            #~ do something with not expected extension\n        }\n    else { #~ rule 3) If there is something else after the extension\n        #~ not a text formated as a file name followed by extension\n    }\n}\nclose (INP);\n</code></pre>\n\n<p>The reason to do something like this is that you need only one regex evaluation to perform what you want for each file extension you expect to handle.</p>\n"}], "owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 1, "accepted_answer_id": 38102030, "answer_count": 3, "score": 1, "last_activity_date": 1467319633, "creation_date": 1467208292, "question_id": 38101650, "link": "https://stackoverflow.com/questions/38101650/perl-using-regular-expressions-to-identify-file-extensions-in-a-list-of-files", "title": "Perl using regular expressions to identify file extensions in a list of files", "body": "<p>I have a long list of files and I am trying to make decisions based on their extensions. This whole thing has to be part of a perl-program of mine. Here is an example for the list:</p>\n\n<pre><code>a.pj\nb.pj\nnull\nc.xlsx\ngibberishWithNoExtension\nd.pj\nf.docx \ng.pj 1.17 and 1.15.1.1\n</code></pre>\n\n<p>The decision rules are:</p>\n\n<pre><code>1) If the extension is \".pj\" do something.\n2) If the extension is anything else do something else\n3) If there is something else after the extension (like version numbers) or there is no extension at all: ignore it\n</code></pre>\n\n<p>The first point should be fairly easy. I guess it would look like this:</p>\n\n<pre><code>my $string = a.pj;\nif ($string =~ /.pj/) {\n    say 'success!'\n}\n</code></pre>\n\n<p>But I am stuck on the other cases. Especially when it comes to identifying point 3. Could some of you help me to find the right regular expressions?</p>\n"}, {"tags": ["perl", "rsa", "private-key", "public-key", "passphrase"], "comments": [{"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467205875, "post_id": 38100472, "comment_id": 63635098, "body": "Please add a snippet of the <i>actual Perl code</i> that you believe demonstrates the ability to &quot;decrypt encrypted content without a pass-phrase.&quot; Be as <i>specific</i> as possible."}, {"owner": {"reputation": 506, "user_id": 3359563, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/436f40e356a2a4f00ef7ff7de727db15?s=128&d=identicon&r=PG", "display_name": "Ramzendo", "link": "https://stackoverflow.com/users/3359563/ramzendo"}, "reply_to_user": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1467206722, "post_id": 38100472, "comment_id": 63635704, "body": "Hi Mike, I added a snippet to prove my point. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 729, "user_id": 3069115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9220d416e46ec9b73cab61afbb26798b?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Tom", "link": "https://stackoverflow.com/users/3069115/tim-tom"}, "is_accepted": true, "score": 2, "last_activity_date": 1467211474, "creation_date": 1467211474, "answer_id": 38102969, "question_id": 38100472, "link": "https://stackoverflow.com/questions/38100472/how-to-generate-passphrase-protected-rsa-keys-in-perl/38102969#38102969", "title": "How to generate passphrase protected RSA keys in Perl", "body": "<p>The passphrase for RSA is only used in regards to saving or reading the key on disk. At no point in your operation did you save the private key to disk so it is already unencrypted in memory.</p>\n\n<p>From the private key documentation, you can see how to hide and save it to disc (the $master_private object you have is already an object of that type)</p>\n\n<p><a href=\"https://metacpan.org/pod/Crypt::RSA::Key::Private\" rel=\"nofollow\">https://metacpan.org/pod/Crypt::RSA::Key::Private</a></p>\n"}], "owner": {"reputation": 506, "user_id": 3359563, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/436f40e356a2a4f00ef7ff7de727db15?s=128&d=identicon&r=PG", "display_name": "Ramzendo", "link": "https://stackoverflow.com/users/3359563/ramzendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "accepted_answer_id": 38102969, "answer_count": 1, "score": 0, "last_activity_date": 1467211474, "creation_date": 1467205544, "last_edit_date": 1467206628, "question_id": 38100472, "link": "https://stackoverflow.com/questions/38100472/how-to-generate-passphrase-protected-rsa-keys-in-perl", "title": "How to generate passphrase protected RSA keys in Perl", "body": "<p>I'm trying to generate a public and private key with passphrase protection in Perl but I haven't found anything useful.</p>\n\n<p>Until now I have found this link <a href=\"http://search.cpan.org/~vipul/Crypt-RSA-1.57/lib/Crypt/RSA.pm\" rel=\"nofollow\">http://search.cpan.org/~vipul/Crypt-RSA-1.57/lib/Crypt/RSA.pm</a> which seems very promising. However, I can decrypt my message without any passphrase although I have created them with a passphrase.</p>\n\n<p>The other link was this <a href=\"http://www.perlmonks.org/?node_id=903458\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=903458</a> but when I create my keys (in order to store them in the DB) I still can decrypt without using a passphrase.</p>\n\n<p>In summary, I need a library which allows me to encrypt text using private keys using a passphrase for both.</p>\n\n<p>Thanks for your help!</p>\n\n<p>PD: Please no PGP encryption. </p>\n\n<p>UPDATE</p>\n\n<p>Here is a pice of code that does not work as expected:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nuse 5.010;\nuse Crypt::RSA;\n\nmy $rsa = new Crypt::RSA;\n\nmy ($master_public, $master_private) = $rsa-&gt;keygen(\n   Identity =&gt; \"Someone\",\n   Size     =&gt; 1024,\n   Password =&gt; \"this is a password or passphare\",\n) or die $rsa-&gt;errstr();\n\nmy $cyphertext = $rsa-&gt;encrypt (\n   Message    =&gt; \"My Message that I want to encrypt\",\n   Key        =&gt; $master_public,\n   Armour     =&gt; 1,\n) or die $rsa-&gt;errstr();\n\nmy $text = $rsa-&gt;decrypt (\n    Cyphertext =&gt; $cyphertext,\n    Key        =&gt; $master_private,\n    Armour     =&gt; 1,\n    # Here I expect to add the user's passphrase\n) or die $rsa-&gt;errstr();\n\nsay $text;\n</code></pre>\n"}, {"tags": ["perl", "scripting", "vmware", "powercli"], "comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1467214497, "post_id": 38099613, "comment_id": 63641934, "body": "When you changed your <code>foreach (@$eventArray) {...}</code> loop to <code>foreach ($eventArray) {...}</code>, you changed it to iterate over a <i>reference</i> (Remember that the <code>$</code> sigil is for scalars). In fact, your new code doesn&#39;t use <code>$eventArray</code> at all (either through an explicit iterating variable or implicitly through <code>$_</code>). Subroutines in Perl (and other scripting languages like Ruby) implicitly return the last evaluated statement (which is <code>print</code> in this case, as you correctly guessed)."}, {"owner": {"reputation": 21, "user_id": 6528389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83611bbfab3a786d14ec1f17a11506f4?s=128&d=identicon&r=PG&f=1", "display_name": "egkennedy93", "link": "https://stackoverflow.com/users/6528389/egkennedy93"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1467215339, "post_id": 38099613, "comment_id": 63642542, "body": "So is that the reason why i&#39;m getting a hash returned when I run it?"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1467215528, "post_id": 38099613, "comment_id": 63642693, "body": "Probably not. At least, not entirely. It is probably because <code>description</code> is an object, not a simple string (<a href=\"https://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.TaskDescription.html\" rel=\"nofollow noreferrer\">see this</a>)."}], "owner": {"reputation": 21, "user_id": 6528389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83611bbfab3a786d14ec1f17a11506f4?s=128&d=identicon&r=PG&f=1", "display_name": "egkennedy93", "link": "https://stackoverflow.com/users/6528389/egkennedy93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1467214868, "creation_date": 1467203455, "last_edit_date": 1467214868, "question_id": 38099613, "link": "https://stackoverflow.com/questions/38099613/vmware-vcli-perl-who-done-it-script", "title": "VMware vCLI Perl &quot;who done it&quot; script", "body": "<p>I've been trying to do this for a while and I just can't seem to understand the vCLI SDK. I believe the MO that I want to use is \n<code>ServiceContent-&gt;Task Manager</code>, then print out the recent task. Here is my subroutine for doing it: </p>\n\n<pre><code>sub TaskManager {\n    my $begin;\n    my $mor = Vim::get_service_content()-&gt;taskManager;\n    my $taskmanager_view = Vim::get_view(mo_ref =&gt; $mor);\n\n    my $my_filterSpec = TaskFilterSpec-&gt;new();\n    my $eventArray = $taskmanager_view-&gt;CreateCollectorForTasks(filter =&gt; $my_filterSpec);\n    foreach (@$eventArray) {\n        # my $collector_view = Vim::get_view(mo_ref =&gt; $eventArray);\n        print $_-&gt;recentTask . \"\\n\";\n    }\n}\n</code></pre>\n\n<p>When I run this I either get:</p>\n\n<p>Not an ARRAY reference at ./TaskManager.pl line 43.</p>\n\n<p>When I change this, I then get:</p>\n\n<p><code>subroutine &amp;ManagedObjectReference::recentTask called at ./TaskManager.pl line 45</code></p>\n\n<p>Here's one of the DOCS I've been looking at </p>\n\n<p><a href=\"https://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.TaskManager.html\" rel=\"nofollow\">https://www.vmware.com/support/developer/vc-sdk/visdk400pubs/ReferenceGuide/vim.TaskManager.html</a></p>\n\n<p>I also have some conversations happening here:\n<a href=\"https://www.reddit.com/r/vmware/comments/4qfaql/help_with_vcli_perl_script/\" rel=\"nofollow\">https://www.reddit.com/r/vmware/comments/4qfaql/help_with_vcli_perl_script/</a></p>\n\n<hr>\n\n<p>EDIT: I changed my subroutine to the following:</p>\n\n<pre><code>sub TaskManager {\n    my $begin;\n    my $mor = Vim::get_service_content()-&gt;taskManager;\n    my $taskmanager_view = Vim::get_view(mo_ref =&gt; $mor);\n    my $my_filterSpec = TaskFilterSpec-&gt;new();\n    my $eventArray = $taskmanager_view-&gt;CreateCollectorForTasks(filter =&gt; $my_filterSpec);\n    foreach ($eventArray) {\n        my $newRecentTask = $taskmanager_view-&gt;description;\n        print $newRecentTask . \"\\n\";\n    }\n}\n</code></pre>\n\n<p>But the problem is that the print statement is returning a hash value, not something I can use. Any ideas how to get something readable?</p>\n"}, {"tags": ["perl", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 5109649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1tgCc.jpg?s=128&g=1", "display_name": "dhana govindarajan", "link": "https://stackoverflow.com/users/5109649/dhana-govindarajan"}, "edited": false, "score": 0, "creation_date": 1467203924, "post_id": 38098943, "comment_id": 63633629, "body": "what is the sorting algorithm is used for the perl advanced sort operator now.For the latest version what type of sorting algorithm it is using"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 220, "user_id": 5109649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1tgCc.jpg?s=128&g=1", "display_name": "dhana govindarajan", "link": "https://stackoverflow.com/users/5109649/dhana-govindarajan"}, "edited": false, "score": 0, "creation_date": 1467209806, "post_id": 38098943, "comment_id": 63638436, "body": "@dhanagovidarajan According to the comments in the <a href=\"https://github.com/Perl/perl5/blob/cc93400aa5a8d556c56c28a8de644bd178d050d4/pp_sort.c#L71\" rel=\"nofollow noreferrer\">source</a>, it uses a binary merge sort. There&#39;s a description of the algorithm in the comments <a href=\"https://github.com/Perl/perl5/blob/cc93400aa5a8d556c56c28a8de644bd178d050d4/pp_sort.c#L139\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1467201687, "creation_date": 1467201687, "answer_id": 38098943, "question_id": 38098723, "link": "https://stackoverflow.com/questions/38098723/how-the-perl-advanced-sort-is-sorting-the-values-by-using-the-a-and-b-values-i/38098943#38098943", "title": "How the Perl advanced sort is sorting the values by using the $a and $b values in the sort function", "body": "<p><a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow\"><code>perldoc sort</code></a>:</p>\n\n<blockquote>\n  <p>Perl 5.6 and earlier used a quicksort algorithm to implement sort. That algorithm was not stable and could go quadratic. (A stable sort preserves the input order of elements that compare equal. Although quicksort's run time is O(NlogN) when averaged over all arrays of length N, the time can be O(N**2), quadratic behavior, for some inputs.) In 5.7, the quicksort implementation was replaced with a stable mergesort algorithm whose worst-case behavior is O(NlogN). </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 220, "user_id": 5109649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1tgCc.jpg?s=128&g=1", "display_name": "dhana govindarajan", "link": "https://stackoverflow.com/users/5109649/dhana-govindarajan"}, "edited": false, "score": 0, "creation_date": 1467264554, "post_id": 38100420, "comment_id": 63662287, "body": "but how it is internally sort the values and which method of sorting it takes for sort the values in perl advacned sort."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": true, "score": 2, "last_activity_date": 1467205408, "creation_date": 1467205408, "answer_id": 38100420, "question_id": 38098723, "link": "https://stackoverflow.com/questions/38098723/how-the-perl-advanced-sort-is-sorting-the-values-by-using-the-a-and-b-values-i/38100420#38100420", "title": "How the Perl advanced sort is sorting the values by using the $a and $b values in the sort function", "body": "<p><a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow\">Sort</a> function in Perl sort the values according to <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">Ascii table</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>my @num = (21, 3, 14, 5);\nmy @sorted = sort @num;\nprint join(',', @sorted), \"\\n\";\n</code></pre>\n\n<p>This will give the output:</p>\n\n<pre><code>14,21,3,5\n</code></pre>\n\n<p>So here 14 and 21 is before that 3, but you were expecting 3 first. So here when it was comparing 21 and 3, it compares them as string. Means it was comparing the first character of both string i.e. <code>2</code> and <code>3</code>, and 2 comes before that 3 in Ascii table, so it put 21 before 3.</p>\n\n<p>By default Perl doesn't understand that you want to sort them as numbers.</p>\n\n<p>So to solve this we use a comparison operator <code>&lt;=&gt;</code> which compare this array elements as numbers.</p>\n\n<p>To sort them in ascending and descending order we use <code>$a</code> and <code>$b</code>. When you write a code block <code>{$a &lt;=&gt; $b}</code>, it tells to Perl that for each pair of elements in the input, passes them to as <code>$a</code> and <code>$b</code>, and it compare and return:</p>\n\n<ul>\n<li><code>-1</code> if <code>$a</code> is less than <code>$b</code></li>\n<li><code>1</code> if <code>$a</code> is greater than <code>$b</code></li>\n<li><code>0</code> if <code>$a</code> equals <code>$b</code></li>\n</ul>\n"}], "owner": {"reputation": 220, "user_id": 5109649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1tgCc.jpg?s=128&g=1", "display_name": "dhana govindarajan", "link": "https://stackoverflow.com/users/5109649/dhana-govindarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 3, "closed_date": 1467220624, "accepted_answer_id": 38100420, "answer_count": 2, "score": 2, "last_activity_date": 1467205408, "creation_date": 1467201089, "last_edit_date": 1467203482, "question_id": 38098723, "link": "https://stackoverflow.com/questions/38098723/how-the-perl-advanced-sort-is-sorting-the-values-by-using-the-a-and-b-values-i", "closed_reason": "Needs details or clarity", "title": "How the Perl advanced sort is sorting the values by using the $a and $b values in the sort function", "body": "<pre><code>@array=sort{$a &lt;=&gt; $b} @input;\n@input = qw \\  3 4 5 1 6 3 9 \\;\n</code></pre>\n\n<p>so here how the perl internally sort the values.</p>\n\n<p>so by which way the values are sorted in the perl advanced sorting and which sort method it is used to sort the values and how?</p>\n"}, {"tags": ["json", "perl", "debian"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1467201155, "post_id": 38098195, "comment_id": 63631758, "body": "There is also <a href=\"https://metacpan.org/pod/Test::JSON\" rel=\"nofollow noreferrer\">metacpan.org/pod/Test::JSON</a> which has an <code>is_valid_json</code> function, but it creates a Test::Harness and prints TAP output. However, you can borrow its functionality."}], "answers": [{"comments": [{"owner": {"reputation": 1824, "user_id": 2086839, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/xK91o.jpg?s=128&g=1", "display_name": "Simon.", "link": "https://stackoverflow.com/users/2086839/simon"}, "edited": false, "score": 0, "creation_date": 1467203956, "post_id": 38098326, "comment_id": 63633660, "body": "I didn&#39;t use eval as it was suggested that the footprint is abit big when using it, however i did use the method of catching the exception using <code>Try::Tiny</code>. Thanks for your help :)"}], "tags": [], "owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "is_accepted": true, "score": 6, "last_activity_date": 1616507429, "last_edit_date": 1616507429, "creation_date": 1467199937, "answer_id": 38098326, "question_id": 38098195, "link": "https://stackoverflow.com/questions/38098195/perl-json-validation-function/38098326#38098326", "title": "Perl JSON validation function", "body": "<p>You may <code>decode_json</code> in eval and see if it will throw an exception.</p>\n"}, {"tags": [], "owner": {"reputation": 716, "user_id": 6507170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdjYE.png?s=128&g=1", "display_name": "priojeet priyom", "link": "https://stackoverflow.com/users/6507170/priojeet-priyom"}, "is_accepted": false, "score": 0, "last_activity_date": 1616416108, "creation_date": 1616416108, "answer_id": 66746045, "question_id": 38098195, "link": "https://stackoverflow.com/questions/38098195/perl-json-validation-function/66746045#66746045", "title": "Perl JSON validation function", "body": "<p>There isn't a simple json validation function available (yet).</p>\n<p>One way to do so is like following:</p>\n<pre><code>try {\n    decode_json_utf8($json_string)\n} catch($e) {\n    print(&quot;invalid json. Error: $e&quot;);\n}\n</code></pre>\n<p>Another way to achieve this is:</p>\n<pre><code>eval {decode_json_utf8($json_string)}; \n\nprint &quot;json error&quot; if $@;\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 2086839, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/xK91o.jpg?s=128&g=1", "display_name": "Simon.", "link": "https://stackoverflow.com/users/2086839/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 0, "accepted_answer_id": 38098326, "answer_count": 2, "score": 3, "last_activity_date": 1616507429, "creation_date": 1467199577, "question_id": 38098195, "link": "https://stackoverflow.com/questions/38098195/perl-json-validation-function", "title": "Perl JSON validation function", "body": "<p>I'm using the Perl module, JSON when handling JSON data in a perl script.</p>\n\n<p>I was looking to use <code>valid_json</code> from the <code>JSON::Parser</code> module, however it looks as though the version i'm using, 2.53 has deprecated this. \nReading the docs for 2.53, i cannot see any validation functions. </p>\n\n<p>Am i just to rely on <code>decode_json</code>, &amp; <code>encode_json</code> returns to tell me that a JSON string is invalid?</p>\n"}, {"tags": ["perl", "geocaching"], "comments": [{"owner": {"reputation": 2588, "user_id": 6391367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46374371254718a7e9dffe4449e516a1?s=128&d=identicon&r=PG&f=1", "display_name": "explv", "link": "https://stackoverflow.com/users/6391367/explv"}, "edited": false, "score": 3, "creation_date": 1467197227, "post_id": 38097262, "comment_id": 63629045, "body": "This is not Java, it&#39;s Perl."}, {"owner": {"reputation": 21, "user_id": 6527968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34267910a8c0e774250a7c2fd5e1b87f?s=128&d=identicon&r=PG&f=1", "display_name": "LockWolf", "link": "https://stackoverflow.com/users/6527968/lockwolf"}, "reply_to_user": {"reputation": 2588, "user_id": 6391367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46374371254718a7e9dffe4449e516a1?s=128&d=identicon&r=PG&f=1", "display_name": "explv", "link": "https://stackoverflow.com/users/6391367/explv"}, "edited": false, "score": 0, "creation_date": 1467209552, "post_id": 38097262, "comment_id": 63638227, "body": "Thanks both of you. What was the corrected script? Could you share it? Thanks in advance. Lock and Wolf"}], "answers": [{"comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1467226262, "post_id": 38102580, "comment_id": 63649361, "body": "There is no need to rename the scalar <code>$a</code> to <code>$b</code>. The array <code>@a</code> and scalar <code>$a</code> can coexist."}], "tags": [], "owner": {"reputation": 2588, "user_id": 6391367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46374371254718a7e9dffe4449e516a1?s=128&d=identicon&r=PG&f=1", "display_name": "explv", "link": "https://stackoverflow.com/users/6391367/explv"}, "is_accepted": false, "score": 2, "last_activity_date": 1467278807, "last_edit_date": 1467278807, "creation_date": 1467210429, "answer_id": 38102580, "question_id": 38097262, "link": "https://stackoverflow.com/questions/38097262/i-cannot-find-the-errorerror-geocaching-mystery/38102580#38102580", "title": "I cannot find the errorerror. Geocaching Mystery", "body": "<p>The corrected script is:</p>\n\n<pre><code>use strict;\nmy @a = (32,69,34,46,5,19,4);\nmy $a = 39;\nprintf(\"%s%d\\a%s%0.1f\\b%0.0f%s\\t\", chr(78), 061, chr($a[2]-2), 0xa+0x1b/1-2*5, 0b110101111101001000/0x3e8, chr($a));\nprintf(\"%s%#.3d%s%s%d%s%0.0f'\\n\", chr($a[1]), 013, chr($a[0]), chr($a[0]+16), 0x05, chr($a[3]-$a+$a[6]*$a[4]+$a[5]), 0xF07A8/0b1111101000);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>N49 27.221'     E011 05.985'\n</code></pre>\n\n<p>List of errors:</p>\n\n<ol>\n<li><code>$a</code> declared as a scalar when it is an array, should be <code>@a</code></li>\n<li>Missing commas in the print statements</li>\n<li>Extra right bracket in the second print statement (the right bracket before the last one).</li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 6527968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34267910a8c0e774250a7c2fd5e1b87f?s=128&d=identicon&r=PG&f=1", "display_name": "LockWolf", "link": "https://stackoverflow.com/users/6527968/lockwolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1467278807, "creation_date": 1467196986, "last_edit_date": 1467214282, "question_id": 38097262, "link": "https://stackoverflow.com/questions/38097262/i-cannot-find-the-errorerror-geocaching-mystery", "title": "I cannot find the errorerror. Geocaching Mystery", "body": "<p>I'm confused about this code. It's part of a geocaching puzzle. I read it as far as I could understand. But I never used java for my own.<br>\nI hope someone can help me correcting it. </p>\n\n<pre><code>use strict; \n$a = (32,69,34,46,5,19,4) my $a = 39;\nprintf(\"%s%d\\a%s%0.1f\\b%0.0f%s\\t\" chr(78) 061 chr($a[2]-2) 0xa+0x1b/1-2*5 0b110101111101001000/0x3e8 chr($a));\nprintf(\"%s%#.3d%s%s%d%s%0.0f'\\n\" chr($a[1]) 013 chr($a[0]) chr($a[0]+16) 0x05 chr($a[3]-$a+$a[6]*$a[4]+$a[5])) 0xF07A8/0b1111101000);\n</code></pre>\n\n<p>Many thanks for any help\nLockeAndWolf</p>\n"}, {"tags": ["perl", "xml-twig"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1467192599, "post_id": 38095500, "comment_id": 63625898, "body": "Nice.  Yes, leave it, that&#39;s good. You can also accept your own answer, which I think is a good idea here."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1467193512, "post_id": 38095500, "comment_id": 63626568, "body": "It will take another couple of hours before they can accept their answer, though."}], "tags": [], "owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "is_accepted": true, "score": 3, "last_activity_date": 1467193442, "last_edit_date": 1467193442, "creation_date": 1467192355, "answer_id": 38095500, "question_id": 38094943, "link": "https://stackoverflow.com/questions/38094943/perl-xmltwig-copying-without-children/38095500#38095500", "title": "Perl XML::Twig Copying without children", "body": "<p>Nevermind, I found a way. Going to leave it here if ever somebody else looks for something similar. All you have to do is use <code>cut_children</code>.\nI did it like this:</p>\n\n<pre><code>my $nodeCopy = $node-&gt;copy();       #copy the node\n$nodeCopy-&gt;paste('before', $node);  #paste the node\n$node-&gt;cut_children();             #remove children from the original node\n</code></pre>\n"}], "owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 38095500, "answer_count": 1, "score": 2, "last_activity_date": 1467193660, "creation_date": 1467191043, "last_edit_date": 1467193660, "question_id": 38094943, "link": "https://stackoverflow.com/questions/38094943/perl-xmltwig-copying-without-children", "title": "Perl XML::Twig Copying without children", "body": "<p>Is it possible to use somthing like</p>\n\n<pre><code>my $nodeCopy = $node-&gt;copy();\n</code></pre>\n\n<p>without copying the children? I can't find anything on the <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm\" rel=\"nofollow\">page on CPAN</a> about it. But maybe I'm missing something?</p>\n"}, {"tags": ["arrays", "string", "perl"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1467193135, "post_id": 38094282, "comment_id": 63626313, "body": "Be wary of <code>lc</code> when comparing different character sets, as some international variants do slightly strange things."}], "tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 1, "last_activity_date": 1467189174, "creation_date": 1467189174, "answer_id": 38094282, "question_id": 38094185, "link": "https://stackoverflow.com/questions/38094185/sorting-of-uppercase-and-lowercase-strings/38094282#38094282", "title": "Sorting of uppercase and lowercase strings", "body": "<p>you can set your sorting criteria by converting to lowercase of uppercase.</p>\n\n<pre><code>@array = sort { lc($a) cmp lc($b) } @array;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "edited": false, "score": 0, "creation_date": 1467191989, "post_id": 38094286, "comment_id": 63625464, "body": "The fc is faster than the comparison of lowercase strings. The reason for this might be that string conversion is avoided."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "edited": false, "score": 0, "creation_date": 1467192349, "post_id": 38094286, "comment_id": 63625717, "body": "@scs Doesn&#39;t surprise. (Did you benchmark it?) It is an internal method used to implement those escapes.  It&#39;s probably optimized a lot, and it may actually not copy data. It&#39;s the right way to do this.  Note, the <code>feature</code> doesn&#39;t have to be loaded if there is <code>use v5.16;</code> or higher in place."}, {"owner": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "edited": false, "score": 0, "creation_date": 1467193175, "post_id": 38094286, "comment_id": 63626344, "body": "Use v5.17 or higher. v5.16 crashes. I did a quick (lazy) benchmarking that alternates normal sort and the different sort algorithms of the answers in a loop. The fc was the fastest algorithm. Better benchmarking would require creating a large array and run the sorting algorithms on it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "edited": false, "score": 0, "creation_date": 1467193345, "post_id": 38094286, "comment_id": 63626457, "body": "@scs Nice, thanks for info. The crashing ... I have v5.16.3 here, it&#39;s fine. Go figure."}, {"owner": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "edited": false, "score": 0, "creation_date": 1467193790, "post_id": 38094286, "comment_id": 63626772, "body": "The error is &quot;Undefined subroutine &amp;main::fc called at ../sorttest.pl line 33.&quot;. To reproduce the error, it is necessary to first delete the use v.5.16, run perl and then add it again. It then crashes and stops crashing if use v5.16 is replaced by use v5.17. I have perl v5.18."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "edited": false, "score": 0, "creation_date": 1467194333, "post_id": 38094286, "comment_id": 63627155, "body": "@scs <code>use 5.16;</code> works perfect for me; I also have 5.18. What you tell sounds as if Perl has a memory between the invocations. I&#39;m sure I misunderstood you ;-)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "edited": false, "score": 0, "creation_date": 1467194561, "post_id": 38094286, "comment_id": 63627306, "body": "@scs It sounds like you nailed a bug there, in your build of v5.16."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1467357061, "last_edit_date": 1467357061, "creation_date": 1467189183, "answer_id": 38094286, "question_id": 38094185, "link": "https://stackoverflow.com/questions/38094185/sorting-of-uppercase-and-lowercase-strings/38094286#38094286", "title": "Sorting of uppercase and lowercase strings", "body": "<p>You need case insensitive sorting, accomplished by explicitly specifying the sorting criterion</p>\n\n<pre><code>my @sorted = sort { \"\\L$a\" cmp \"\\L$b\" } @array;\n</code></pre>\n\n<p>or, better</p>\n\n<pre><code>use feature qw(fc);\nmy @sorted = sort { fc($a) cmp fc($b) } @array;\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/fc.html\" rel=\"nofollow\"><code>fc</code></a> is specifically made for this. Also see it in <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow\"><code>sort</code></a>, under <em>Examples</em>.</p>\n"}], "owner": {"reputation": 435, "user_id": 4024268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ae69e75675507ce00e886ec14ac57a42?s=128&d=identicon&r=PG&f=1", "display_name": "scs", "link": "https://stackoverflow.com/users/4024268/scs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 38094286, "answer_count": 2, "score": 0, "last_activity_date": 1467357061, "creation_date": 1467188846, "question_id": 38094185, "link": "https://stackoverflow.com/questions/38094185/sorting-of-uppercase-and-lowercase-strings", "title": "Sorting of uppercase and lowercase strings", "body": "<p>I am trying to <strong>sort uppercase and lowercase strings</strong> in perl in <strong>alphabetical order</strong>. However, for some reason perl <strong>first sorts the uppercase strings and then the lowercase strings</strong> (see example below).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @array = (\"abc\",\"def\",\"PQR\",\"STW\");\n@array = sort @array;\n\nforeach (@array){\n    print \"$_ \\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>PQR \nSTW \nabc \ndef \n</code></pre>\n"}, {"tags": ["xml", "perl"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1467187389, "creation_date": 1467187389, "answer_id": 38093720, "question_id": 38092842, "link": "https://stackoverflow.com/questions/38092842/deleting-the-first-child-of-every-node-in-an-xml-file-in-perl/38093720#38093720", "title": "Deleting the first child of every node in an xml file in perl", "body": "<pre><code>This seems to do the trick:\n\n#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new ( pretty_print =&gt; 'indented_a') -&gt; parsefile('sample.xml');\n\nforeach my $element ( $twig -&gt; get_xpath('./a') ) {\n   $element -&gt; first_child('b') -&gt; delete;\n}\n$twig -&gt; print; \n</code></pre>\n\n<p>However it <em>looks</em> like you're deleting the nodes with 'null ids'. </p>\n\n<p>So how about:</p>\n\n<pre><code>$_ -&gt; delete for $twig -&gt; get_xpath('./a/b[@id=\"\"]');\n</code></pre>\n\n<p>(NB: Can use <code>//a</code> if you want 'anywhere within the structure')</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1467233332, "last_edit_date": 1467233332, "creation_date": 1467187787, "answer_id": 38093853, "question_id": 38092842, "link": "https://stackoverflow.com/questions/38092842/deleting-the-first-child-of-every-node-in-an-xml-file-in-perl/38093853#38093853", "title": "Deleting the first child of every node in an xml file in perl", "body": "<p>Your code works for me, just as it stands.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse XML::Twig;\n\nmy $file = 'data_sample.xml';\nmy $t = XML::Twig-&gt;new(pretty_print =&gt; 'indented');\n$t-&gt;parsefile( $file );\nmy $root = $t-&gt;root;\n\nmy @kids = $root-&gt;children('a');\n# $_-&gt;print for @kids;\n\nforeach my $delA (@kids) {\n    $delA-&gt;first_child-&gt;delete();\n}\n\n$_-&gt;print for @kids;\n</code></pre>\n\n<p>The print shows that the empty elements at <code>first_child</code> are gone</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;a&gt;\n  &lt;b id=\"2\"/&gt;\n  &lt;b id=\"3\"/&gt;\n  &lt;b id=\"4\"/&gt;\n&lt;/a&gt;\n&lt;a&gt;\n  &lt;b id=\"5\"/&gt;\n&lt;/a&gt;\n&lt;a&gt;\n  &lt;b id=\"6\"/&gt;\n  ...\n</code></pre>\n"}], "owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 38093720, "answer_count": 2, "score": 1, "last_activity_date": 1467233332, "creation_date": 1467184686, "question_id": 38092842, "link": "https://stackoverflow.com/questions/38092842/deleting-the-first-child-of-every-node-in-an-xml-file-in-perl", "title": "Deleting the first child of every node in an xml file in perl", "body": "<p>I've got an XML-file where the first children of a node are all empty, so I would like to delete them using <code>XML::Twig</code>. The XML file might look like this:</p>\n\n<pre><code>&lt;stuff&gt;\n    &lt;a&gt;\n        &lt;b id=\"\"/&gt;\n        &lt;b id=\"2\"/&gt;\n        &lt;b id=\"3\"/&gt;\n        &lt;b id=\"4\"/&gt;\n    &lt;/a&gt;\n    &lt;a&gt;\n        &lt;b id=\"\"/&gt;\n        &lt;b id=\"5\"/&gt;\n    &lt;/a&gt;\n    &lt;a&gt;\n        &lt;b id=\"\"/&gt;\n        &lt;b id=\"6\"/&gt;\n        &lt;b id=\"7\"/&gt;\n        &lt;b id=\"8\"/&gt;\n        &lt;b id=\"9\"/&gt;\n        &lt;b id=\"10\"/&gt;\n        &lt;b id=\"11\"/&gt;\n    &lt;/a&gt;\n    &lt;a&gt;\n        &lt;b id=\"\"/&gt;\n        &lt;b id=\"12\"/&gt;\n        &lt;b id=\"13\"/&gt;\n        &lt;b id=\"14\"/&gt;\n    &lt;/a&gt;\n&lt;/stuff&gt;\n</code></pre>\n\n<p>So what I am trying to do is delete every first <code>&lt;b&gt;</code> child of every given <code>&lt;a&gt;</code> node. The way I've tried to do it is derived from the <a href=\"http://search.cpan.org/~mirod/XML-Twig-3.49/Twig.pm#Loading_an_XML_document_and_processing_it\" rel=\"nofollow\">XML::Twig site on CPAN</a>:</p>\n\n<pre><code>my @a = $root-&gt;children('a');\nforeach my $delA (@a) {\n    $delA-&gt;first_child-&gt;delete();\n}\n</code></pre>\n\n<p>But it's not working. I don't have a whole lot of experience with Perl, so I am wondering if I misunderstood how the array is build here. Can somebody point out what I am doing wrong and what I should do instead?</p>\n"}, {"tags": ["regex", "list", "perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1467224066, "post_id": 38089758, "comment_id": 63647998, "body": "In HTML the end tag for <code>&lt;a&gt;</code> elements is mandatory. You cannot use XML-style self-closing tag syntax."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1467223971, "last_edit_date": 1467223971, "creation_date": 1467191064, "answer_id": 38094951, "question_id": 38089758, "link": "https://stackoverflow.com/questions/38089758/perl-how-to-list-ids-from-multiple-html/38094951#38094951", "title": "Perl: How to list ids from multiple HTML?", "body": "<p>Some people think that the easiest way involves a regex:</p>\n\n<pre><code>use v5.22;\nwhile( &lt;&lt;&gt;&gt; ) {\n    next unless /&lt;a id=\"(.*?)\"/;\n    say \"$ARGV: $1\";\n    }\n</code></pre>\n\n<p>That might get you the answer quickly in a dirty way. That could be acceptable for a quick one-off task. I'm using the <a href=\"https://www.effectiveperlprogramming.com/2015/05/use-perl-5-22s-operator-for-safe-command-line-handling/\" rel=\"nofollow\">extra-safe double diamond that v5.22 added</a>.</p>\n\n<p>If you need something more robust, such as <a href=\"http://www.metacpan.org/module/Mojo::DOM\" rel=\"nofollow\">Mojo::DOM</a>:</p>\n\n<pre><code>use v5.22;\nuse Mojo::DOM;\n\nforeach my $file ( @ARGV ) {\n    my $data = do { local( @ARGV, $/ ) = $file; &lt;&lt;&gt;&gt; };\n    my $dom = Mojo::DOM-&gt;new( $data );\n    my @ids = $dom-&gt;find( 'a[id]' )-&gt;map( attr =&gt; 'id' )-&gt;each;\n    say \"$ARGV: @ids\";\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5708320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200a0f239d3b26d0a4fbc6be44c68e69?s=128&d=identicon&r=PG&f=1", "display_name": "Bhishma", "link": "https://stackoverflow.com/users/5708320/bhishma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1467223971, "creation_date": 1467170098, "last_edit_date": 1467170375, "question_id": 38089758, "link": "https://stackoverflow.com/questions/38089758/perl-how-to-list-ids-from-multiple-html", "title": "Perl: How to list ids from multiple HTML?", "body": "<p>I have multiple HTML files in a subfolder. Each HTML page have the multiple page ids like this <code>&lt;a id=\"page_1\"/&gt;</code>, <code>&lt;a id=\"page_2\"/&gt;</code>, <code>&lt;a id=\"page_3\"/&gt;</code>, et cetera. I wish to list page ids which is in which HTML page like <code>page_3:index.html</code>, <code>page_4:chapter.html</code>, <code>page_5:content.html</code></p>\n\n<p>How can I do that?</p>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 2, "creation_date": 1467176722, "post_id": 38089629, "comment_id": 63617023, "body": "Have you tried to sorround your <code>$dbh-&gt;execute($p1,$p2$&quot;p3,$p4)</code> with <code>eval{ $dbh-&gt;execute(...); }or do{ #print some warning; next; }</code>?"}, {"owner": {"reputation": 307, "user_id": 4318947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-o892L4p6i_o/AAAAAAAAAAI/AAAAAAAABHY/74bgsfS3lxY/photo.jpg?sz=128", "display_name": "Sree", "link": "https://stackoverflow.com/users/4318947/sree"}, "reply_to_user": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1467183205, "post_id": 38089629, "comment_id": 63619893, "body": "I am getting same error - Database execute failed. ERROR MESSAGE:   OpenClient message: LAYER = (0) ORIGIN = (0) SEVERITY = (78) NUMBER = (51) Server dev, database dev    Message String: Attempt to initiate a new Adaptive Server operation with results pending"}, {"owner": {"reputation": 307, "user_id": 4318947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-o892L4p6i_o/AAAAAAAAAAI/AAAAAAAABHY/74bgsfS3lxY/photo.jpg?sz=128", "display_name": "Sree", "link": "https://stackoverflow.com/users/4318947/sree"}, "reply_to_user": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1467183292, "post_id": 38089629, "comment_id": 63619940, "body": "How to clear this error. I am unclear if this is DBI or SQL error"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1467193452, "post_id": 38089629, "comment_id": 63626520, "body": "It looks like that error is coming from the SQL server. Do you know where in  your program it is issued? Your code doesn&#39;t have any error handling through DBI. Is it something that DBI maybe does inside of <code>execute</code>? Are there any <i>at foo.pm line 123</i> things in the error message that you didn&#39;t show? Adding example DDL with a <code>CREATE</code> of that stored procedure and/or table you are accessing, and a statement that you prepare to create this error as well as the Perl code that prepares would help. You can <a href=\"https://stackoverflow.com/posts/38089629/edit\">edit</a> the question to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1467206716, "post_id": 38089629, "comment_id": 63635697, "body": "What DBI version, what DBD driver and version?  This <a href=\"http://stackoverflow.com/a/22407578/132382\">error message suggests an old bug in the DBD::Sybase driver, fixed long ago.</a>"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1467255962, "post_id": 38089629, "comment_id": 63659925, "body": "<code>execute</code> is not a method of database handles as your code suggests, and <code>dbh</code> is either a bareword, a function, or a typo.  Can you please show us representative code that produces the error?"}], "answers": [{"tags": [], "owner": {"reputation": 1975, "user_id": 975123, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/77b6e3032b52ff422b1f4457df337bbe?s=128&d=identicon&r=PG", "display_name": "mekazu", "link": "https://stackoverflow.com/users/975123/mekazu"}, "is_accepted": false, "score": 0, "last_activity_date": 1467204934, "creation_date": 1467204934, "answer_id": 38100244, "question_id": 38089629, "link": "https://stackoverflow.com/questions/38089629/perl-executing-dbi-execute-in-loop/38100244#38100244", "title": "Perl Executing DBI execute in Loop", "body": "<p>Ensure you disable <code>RaiseError</code> (default: false) when creating the handle. You can use <code>PrintWarn</code> (default: false) and <code>PrintError</code> (default: true) to save you doing it yourself:</p>\n\n<pre><code>$dbh = DBI-&gt;connect($dsn, $user, $password,\n                { RaiseError =&gt; 0, PrintWarn =&gt; 1, PrintError =&gt; 1 });\nmy $sth = $dbh-&gt;prepare($query);\nforeach my $file (@filelist)\n{\n  #..  get param1 , param2 , param3, param4 from $file\n  unless ( $sth-&gt;execute($param1,$param2,$param3,$param4) )\n  {\n      #warning already printed \n      next;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 4318947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-o892L4p6i_o/AAAAAAAAAAI/AAAAAAAABHY/74bgsfS3lxY/photo.jpg?sz=128", "display_name": "Sree", "link": "https://stackoverflow.com/users/4318947/sree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 721, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467271891, "creation_date": 1467169118, "last_edit_date": 1467271891, "question_id": 38089629, "link": "https://stackoverflow.com/questions/38089629/perl-executing-dbi-execute-in-loop", "title": "Perl Executing DBI execute in Loop", "body": "<p>I have a perl script which prepares a statement with params 1,2,3,4 using DBI interface .The prepare statement executes a stored procedure with 4 params.Then it runs a foreach loop and does execute </p>\n\n<p>If the parameters are not right the stored procedure throws error and execute fails. I am interested in printing a warning and proceeding to next set of params. </p>\n\n<p>After the first execute failure for an \"invalid parameter\", I get \"Attempt to initiate a new Adaptive Server operation with results pending\" as errmsg in SQL execute for subsequent loop iteration.</p>\n\n<pre><code>foreach my $file (@filelist)\n{\n  #..  get param1 , param2 , param3, param4 from $file\n  unless ( dbh-&gt;execute($param1,$param2,$param3,$param4) )\n  {\n      #print some warning \n      next;\n  }\n}\n</code></pre>\n\n<p>How do I continue processing with this error?</p>\n\n<p>These are the version I am using    </p>\n\n<pre><code>&gt;perl -MDBI -e 'DBI-&gt; installed_versions;'\n      Perl            : 5.010001    (x86_64-linux-thread-multi)\n      OS              : linux       (2.6.18-348.12.1.el5)\n      DBI             : 1.609\n      DBD::Sybase     : 1.15\n      DBD::Sponge     : 12.010002\n      DBD::SQLite     : 1.27\n      DBD::Proxy      : install_driver(Proxy) failed: Can't locate  RPC/PlClient.pm in @INC\n      DBD::Informix   : 2013.0521\n      DBD::Gofer      : 0.011565\n      DBD::File       : 0.37\n      DBD::ExampleP   : 12.010007\n      DBD::DBM        : 0.03\n</code></pre>\n\n<p>I added <code>{ RaiseError =&gt; 0, PrintWarn =&gt; 1, PrintError =&gt; 1 }</code>  in the connect as suggested by mekazu, (The code is exact same as yours mekazu ) but it is not helping still getting the same error. </p>\n\n<p>In foreach  I get success, \niteration 1 no error</p>\n\n<p>iteration 2 gives a stored procedure error </p>\n\n<blockquote>\n  <p>\" Database execute failed. ERROR MESSAGE: Server message number=52001\n  severity=16 state=1 line=124 server=dev procedure=sp1 text=Data\n  Error:Invalid parameter: P1</p>\n</blockquote>\n\n<p>iteration 3 </p>\n\n<blockquote>\n  <p>Database execute failed. ERROR MESSAGE: OpenClient message: LAYER =\n  (0) ORIGIN = (0) SEVERITY = (78) NUMBER = (51) Server dev, database\n  dev Message String: Attempt to initiate a new Adaptive Server\n  operation with results pending</p>\n</blockquote>\n\n<p>iteration 4</p>\n\n<blockquote>\n  <p>Database execute failed. ERROR MESSAGE: OpenClient message: LAYER =\n  (0) ORIGIN = (0) SEVERITY = (78) NUMBER = (51) Server dev, database\n  dev Message String: Attempt to initiate a new Adaptive Server\n  operation with results pending</p>\n</blockquote>\n"}, {"tags": ["perl", "global-variables", "packages"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467184320, "post_id": 38089431, "comment_id": 63620532, "body": "The <code>system</code> returns <code>0</code> on success. So if you get inside your <code>if</code> block it means that the command (itself) <code>git rev-parse HEAD</code> failed. Then the same will happen for it in <code>qx</code> (backticks).  I suspect that this isn&#39;t what you have in mind? As for the error you are getting, I have no idea. It means that the variable <code>$branch</code> isn&#39;t declared which is weird."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467185693, "post_id": 38089431, "comment_id": 63621418, "body": "Can you reduce your code to a short, runnable program which demonstrates the problem? Using the code posted in the question (with the logic in the <code>if</code> reversed, for reasons @zdim already explained), I am unable to reproduce the errors you describe. Aside from the text being formatted poorly (linefeeds at the end of <code>$branch</code> and <code>$revision</code>), it works perfectly for me."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467185758, "post_id": 38089431, "comment_id": 63621458, "body": "@zdim - thanks. I have not gotten that far because of the Global Symbol errors (but I suspected it)."}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1467227845, "post_id": 38089431, "comment_id": 63650281, "body": "I sincerely doubt that code is giving those errors.  The errors are complaining that you used two unknown array variables <code>@branch</code> and <code>@revision</code>, where no such array variables are in your posted code.  More than likely, your actual code that generated those errors incorrectly has <code>@branch</code> and <code>@revision</code> (or perhaps something like <code>$branch[0]</code> and <code>$revision[0]</code>) rather than <code>$branch</code> and <code>$revision</code> on line 237, and you fixed it when you retyped it here, but not in your original source."}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "is_accepted": false, "score": 0, "last_activity_date": 1467178753, "creation_date": 1467178753, "answer_id": 38091188, "question_id": 38089431, "link": "https://stackoverflow.com/questions/38089431/printing-variables-and-global-symbol-xxx-requires-explicit-package/38091188#38091188", "title": "Printing variables and &quot;global symbol $XXX requires explicit package&quot;", "body": "<p>I can't test your script, but this part should be like this:</p>\n\n<pre><code>if(`git rev-parse HEAD 2&gt;&amp;1` !~ /Not a git repository/) {\n    chomp(my $revision = `git rev-parse HEAD | cut -c1-16`); \n    chomp(my $branch = `git rev-parse --abbrev-ref HEAD`);\n    print \"Git repo: $branch ($revision)\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467178753, "creation_date": 1467167830, "last_edit_date": 1495542778, "question_id": 38089431, "link": "https://stackoverflow.com/questions/38089431/printing-variables-and-global-symbol-xxx-requires-explicit-package", "title": "Printing variables and &quot;global symbol $XXX requires explicit package&quot;", "body": "<p>I have the following Perl. It attempts to detect a Git Clone (as opposed to an offline zip) and print the repo information. The idea is, if <code>git rev-parse</code> fails, then its probably not a Git repo.</p>\n\n<pre><code>if (system \"git rev-parse HEAD\") {                         # Line 234\n    my $revision = `git rev-parse HEAD | cut 1-16`;        # Line 235\n    my $branch = `git rev-parse --abbrev-ref HEAD`;        # Line 236\n    print \"Git repo: $branch ($revision)\\n\";               # Line 237\n}                                                          # Line 238\n</code></pre>\n\n<p>It results in the errors below. If I am parsing <a href=\"https://stackoverflow.com/q/797127/608639\">What's the differences between system and backticks and pipes in Perl</a> and <a href=\"https://stackoverflow.com/q/3854651\">How can I store the result of a system command in a Perl variable</a> correctly, it should work.</p>\n\n<p>According to <a href=\"https://stackoverflow.com/q/6181381\">How to print variables in Perl</a>, <code>print \"Git repo: $branch ($revision)\\n\"</code> should work. Based on <a href=\"https://stackoverflow.com/q/16594713\">Global symbol requires explicit package</a>, the Q&amp;A says to use <code>@</code> instead of <code>$</code>. I tried to <code>print \"Git repo: @branch (@revision)\\n\"</code>, but it resulted in the same errors (with a different symbol).</p>\n\n<p>I have two questions:</p>\n\n<ul>\n<li><p>Why does Perl think the variable is a package?</p></li>\n<li><p>What is wrong with the Perl, and how do I fix it?</p></li>\n</ul>\n\n<hr>\n\n<pre class=\"lang-none prettyprint-override\"><code>Global symbol \"@branch\" requires explicit package name at ./Configure line 237.\nGlobal symbol \"@revision\" requires explicit package name at ./Configure line 237.\n</code></pre>\n"}, {"tags": ["php", "perl", "nginx", "cgi", "fastcgi"], "comments": [{"owner": {"reputation": 3750, "user_id": 1105015, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/996b29e26a9da215e1637df637cabb48?s=128&d=identicon&r=PG", "display_name": "Rob Starling", "link": "https://stackoverflow.com/users/1105015/rob-starling"}, "edited": false, "score": 0, "creation_date": 1467179828, "post_id": 38088082, "comment_id": 63618189, "body": "Just making the suffix .fcgi doesn&#39;t make that example into a FastCGI program; it&#39;s still a traditional CGI program"}, {"owner": {"reputation": 341, "user_id": 5075892, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20de7a7dc03648876690efefa4c11635?s=128&d=identicon&r=PG&f=1", "display_name": "trynacode", "link": "https://stackoverflow.com/users/5075892/trynacode"}, "reply_to_user": {"reputation": 3750, "user_id": 1105015, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/996b29e26a9da215e1637df637cabb48?s=128&d=identicon&r=PG", "display_name": "Rob Starling", "link": "https://stackoverflow.com/users/1105015/rob-starling"}, "edited": false, "score": 0, "creation_date": 1467212706, "post_id": 38088082, "comment_id": 63640648, "body": "Is there something that I have to include in the FastCGI program? Like <code>use fast:cgi</code> or something like that?"}, {"owner": {"reputation": 3750, "user_id": 1105015, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/996b29e26a9da215e1637df637cabb48?s=128&d=identicon&r=PG", "display_name": "Rob Starling", "link": "https://stackoverflow.com/users/1105015/rob-starling"}, "edited": false, "score": 0, "creation_date": 1467253678, "post_id": 38088082, "comment_id": 63659413, "body": "unfortunately, it&#39;s nowhere near that simple last time i looked into it -- while the standard cgi API is &quot;for each request, the server calls your program with env vars to describe the request and with the body (if any) on stdin and your program is expected to emit a response on stdout and exit&quot;, the fcgi API expects your program to be constantly running and handle requests handed to it on a socket -- in that way, it&#39;s really more like a server. See <a href=\"https://en.wikipedia.org/wiki/FastCGI\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/FastCGI</a>"}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 5075892, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20de7a7dc03648876690efefa4c11635?s=128&d=identicon&r=PG&f=1", "display_name": "trynacode", "link": "https://stackoverflow.com/users/5075892/trynacode"}, "edited": false, "score": 0, "creation_date": 1467212672, "post_id": 38091375, "comment_id": 63640625, "body": "Could you go into further details regarding &quot;it can only connect to FastCGI processes that are already running&quot;. I know I could just use a different server but I was told to use NGINX so I&#39;d like to at least try to run CGI scripts on it."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 341, "user_id": 5075892, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20de7a7dc03648876690efefa4c11635?s=128&d=identicon&r=PG&f=1", "display_name": "trynacode", "link": "https://stackoverflow.com/users/5075892/trynacode"}, "edited": false, "score": 0, "creation_date": 1467214067, "post_id": 38091375, "comment_id": 63641633, "body": "Whoever told you that was giving you bad advice. Again: nginx cannot run CGI scripts."}, {"owner": {"reputation": 341, "user_id": 5075892, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20de7a7dc03648876690efefa4c11635?s=128&d=identicon&r=PG&f=1", "display_name": "trynacode", "link": "https://stackoverflow.com/users/5075892/trynacode"}, "edited": false, "score": 0, "creation_date": 1467214130, "post_id": 38091375, "comment_id": 63641685, "body": "Sorry, FCGI* scripts. It&#39;s able to run those from what I&#39;ve understood, correct?"}, {"owner": {"reputation": 341, "user_id": 5075892, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20de7a7dc03648876690efefa4c11635?s=128&d=identicon&r=PG&f=1", "display_name": "trynacode", "link": "https://stackoverflow.com/users/5075892/trynacode"}, "edited": false, "score": 0, "creation_date": 1467214167, "post_id": 38091375, "comment_id": 63641706, "body": "Or if you have any useful links I could follow that explains how to set up FCGI scripts, that&#39;d be great also. Haven&#39;t found anything too helpful after looking into it for a couple days."}, {"owner": {"reputation": 3750, "user_id": 1105015, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/996b29e26a9da215e1637df637cabb48?s=128&d=identicon&r=PG", "display_name": "Rob Starling", "link": "https://stackoverflow.com/users/1105015/rob-starling"}, "reply_to_user": {"reputation": 341, "user_id": 5075892, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20de7a7dc03648876690efefa4c11635?s=128&d=identicon&r=PG&f=1", "display_name": "trynacode", "link": "https://stackoverflow.com/users/5075892/trynacode"}, "edited": false, "score": 0, "creation_date": 1467335499, "post_id": 38091375, "comment_id": 63702152, "body": "@trynacode i added an answer with more info. maybe that&#39;ll help."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 2, "last_activity_date": 1467179604, "creation_date": 1467179604, "answer_id": 38091375, "question_id": 38088082, "link": "https://stackoverflow.com/questions/38088082/running-cgi-scripts-on-nginx/38091375#38091375", "title": "Running CGI scripts on NGINX", "body": "<p>nginx does not support CGI scripts, and cannot launch FastCGI scripts on its own \u2014 it can only connect to FastCGI processes that are already running.</p>\n\n<p>If you want to run CGI scripts, use a web server that supports them, such as Apache. While there are some workarounds, they will just confuse you at this stage.</p>\n"}, {"tags": [], "owner": {"reputation": 3750, "user_id": 1105015, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/996b29e26a9da215e1637df637cabb48?s=128&d=identicon&r=PG", "display_name": "Rob Starling", "link": "https://stackoverflow.com/users/1105015/rob-starling"}, "is_accepted": true, "score": 1, "last_activity_date": 1467254412, "last_edit_date": 1467254412, "creation_date": 1467254090, "answer_id": 38113043, "question_id": 38088082, "link": "https://stackoverflow.com/questions/38088082/running-cgi-scripts-on-nginx/38113043#38113043", "title": "Running CGI scripts on NGINX", "body": "<p>Search for <a href=\"https://www.google.com/search?q=fastcgi+cgi+wrapper\" rel=\"nofollow\">\"fastcgi wrapper\"</a> to find various programs designed to bridge the gap between \"modern\" webservers that don't like spawning processes to handle requests and traditional CGI programs.</p>\n\n<pre><code>[nginx       ]    one socket     [wrapper     ]  ,-- forks a single subprocess\n[runs        ] == connection ==&gt; [also runs   ] ---- running your CGI program\n[continuously]    per request    [continuously]  `-- for each request\n</code></pre>\n\n<p>While the standard CGI API is \"for each request, the server calls your program with env vars to describe the request and with the body (if any) on stdin and your program is expected to emit a response on stdout and exit\", the fcgi API expects your program to be constantly running and handle requests handed to it on a socket -- in that way, it's really more like a server. See <a href=\"http://en.wikipedia.org/wiki/FastCGI\" rel=\"nofollow\">http://en.wikipedia.org/wiki/FastCGI</a></p>\n"}], "owner": {"reputation": 341, "user_id": 5075892, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/20de7a7dc03648876690efefa4c11635?s=128&d=identicon&r=PG&f=1", "display_name": "trynacode", "link": "https://stackoverflow.com/users/5075892/trynacode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2096, "favorite_count": 0, "accepted_answer_id": 38113043, "answer_count": 2, "score": 0, "last_activity_date": 1467254412, "creation_date": 1467157822, "last_edit_date": 1495542166, "question_id": 38088082, "link": "https://stackoverflow.com/questions/38088082/running-cgi-scripts-on-nginx", "title": "Running CGI scripts on NGINX", "body": "<p>I know this question has already been asked, but there were no clear answers on that question (<a href=\"https://stackoverflow.com/questions/11667489/how-to-run-cgi-scripts-on-nginx\">How to run CGI scripts on Nginx</a>) that would help me. In my case, I have installed NGINX by using source code, and have fixed my .config file so that I can read .php files using FASTCGI successfully. However, I am having quite some issues when it comes to running CGI scripts. I know I have FAST CGI installed and set up, so am I supposed to be naming these .cgi files .fcgi instead? Or am I supposed to include someway for the .cgi file to know that it is working with FAST CGI?? I tried toying around with the nginf.conf file to include .fcgi, and it looks something like this right now:</p>\n\n<pre><code>worker_processes  2;\n\npid        logs/nginx.pid;\nerror_log syslog:server=unix:/dev/log,facility=local7,tag=nginx,severity=error;\n\nevents {\nworker_connections  1024;\n}\n\n\nhttp {\ninclude       mime.types;\ndefault_type  application/octet-stream;\n\naccess_log syslog:server=unix:/dev/log,facility=local7,tag=nginx,severity=info combined;\n\nsendfile        on;\nkeepalive_timeout  65;\n\n\nserver {\n    listen       80;\n    server_name  localhost;\n        root   /home/parallels/Downloads/user_name/nginx/html;\n    location / {\n\n index index.html index.htm new.html;\n        autoindex on;\n    }\n\nlocation ~ \\.php$ {\nfastcgi_split_path_info ^(.+\\.php)(/.+)$;\nfastcgi_pass 127.0.0.1:9000;\n #fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;\nfastcgi_param  HTTPS              off;\ninclude fastcgi_params;\nfastcgi_buffer_size 16k;\nfastcgi_buffers 4 16k;\n}\nlocation ~ \\.pl|fcgi$ {\n  try_files $uri =404;\n  gzip off;\n  fastcgi_pass  127.0.0.1:9000;\n  fastcgi_index index.pl;\n  #fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n  include fastcgi_params;\n  } \n\n    #error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   html;\n    }\n}\n}\n</code></pre>\n\n<p>However, whenever I run a .fcgi script such as </p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Content-type: text/html\\n\\n\";\nprint \"&lt;html&gt;&lt;body&gt;Hello, world.&lt;/body&gt;&lt;/html&gt;\";\n</code></pre>\n\n<p>I am greeted with a screen that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2kA6W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2kA6W.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm pretty sure this is not normal; I should just be seeing <code>Hello, world.</code> on my screen, not all the code as well. Please let me know if my thinking that is actually wrong and this is supposed to be the correct output.</p>\n\n<p>Additionally, on a side note, if I had this as my <code>files.fcgi</code> file:</p>\n\n<pre><code>#!/usr/bin/perl\nmy $output = `ls`;\nprint $output\n</code></pre>\n\n<p>Running something like this returns a list of all files in the directory that the .fcgi file is located in. Is there anyway I could display this on the web browser? Looking at examples online, it seems like people have been able to just run <code>file.fcgi</code> on their browser and see the output of the shell command (which led me to believe I'm doing something wrong, because when I run it on the command line it lists all the files but on the browser, it just prints out my code). Does anyone know what I could possibly doing wrong, assuming I am doing something wrong. If you need any more information, please let me know! </p>\n\n<p>Thank you, and have a good day!</p>\n"}, {"tags": ["perl", "pack", "unpack"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467156161, "post_id": 38087689, "comment_id": 63611904, "body": "I don&#39;t think that <code>pack</code> can be made to simply honor what&#39;s in the string at those other positions, if that&#39;s what you mean. It concatenates.  It is the job of <code>substr</code> to do that (but with one at the time)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467156421, "post_id": 38087689, "comment_id": 63611979, "body": "So what do you want to be at those other places, up to <code>3</code> and between <code>hi</code> and <code>8</code>?  The original parts of <code>$str</code>? Then what happens with those ranges that were unpacked -- do they also stay as they had been (so then they are duplicated in the output string)?"}, {"owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467160395, "post_id": 38087689, "comment_id": 63612990, "body": "@zdim At this point I don&#39;t really care about the other positions.  The question is a general one about how to reorder the positions of the fields in the <code>pack</code> arguments per the pack template.  Of course it would be great to be able to blank or NUL them out by choice."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467160752, "post_id": 38087689, "comment_id": 63613083, "body": "OK.  But, one has to choose what to do with them -- or, what do we write? If it&#39;s &quot;re-order&quot; that may imply that what was at <code>3-5</code> is now at <code>12-14</code> (and vice versa), and that is fine. Or, perhaps you want &#39;blank&#39; (spaces) instead.  Do you take a 16-char long string to re-order, or do you pick elements from <i>a</i> string and write out a 16-char long string, with the rest being .... zero? Spaces? NULL (gasp)?  There are nice solutions but it does matter what the whole job is. Or I may be completely misunderstanding it.  Can you post some input and output -- source and what you want to get?"}, {"owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467162109, "post_id": 38087689, "comment_id": 63613399, "body": "@zdim See edits.  The input to <code>unpack</code> is <code>$str</code>.  The output to <code>pack</code> should be <code>$str</code> (or similar)."}, {"owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467162495, "post_id": 38087689, "comment_id": 63613480, "body": "@zdim Maybe it&#39;s not clear, but <code>unpack</code> is parsing <code>$str</code> in <b>right-to-left</b> order instead of the usual left-to-right order.  That works fine.  But when I try to use <code>pack</code> to recreate the original <code>$str</code> by supplying the fields to be <code>pack</code>ed in, say, right-to-left order, the positioning format construct <code>@POS</code> which worked fine with <code>unpack</code> fails miserably to reproduce the same original <code>$str</code> value (or similar) with <code>pack</code>."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 3, "creation_date": 1467162988, "post_id": 38087689, "comment_id": 63613595, "body": "@JohnWiersba zdim&#39;s first comment is your answer: pack doesn&#39;t do that. If you amend your question to &quot;how do I do this in perl?&quot; there are of course many ways. Even ways that could key off of the pack template, if that&#39;s essential. But if the question is &quot;how do I do this with pack?&quot; the answer is &quot;you don&#39;t&quot; :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467181929, "post_id": 38087689, "comment_id": 63619194, "body": "@JohnWiersba  What I posted reflects my current understanding of what you are thinking about.  (It&#39;s <code>substr</code> functionality, if I am right.)  Writing in comments didn&#39;t make sense -- please let me know whether this addresses your quest and whether I can add some other solutions."}], "answers": [{"comments": [{"owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "edited": false, "score": 0, "creation_date": 1467208668, "post_id": 38091876, "comment_id": 63637405, "body": "Thanks, @zdim.  See my answer below for one way which avoids <code>substr</code> and looping.  I was hoping I was just missing something in the <code>pack</code> documentation, since <code>unpack</code> was so easy to use to extract fields using an out-of-order specification."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "edited": false, "score": 0, "creation_date": 1467220920, "post_id": 38091876, "comment_id": 63646101, "body": "@JohnWiersba Nice, that&#39;s a kind of a thing I had in mind -- you can process things in many ways, and <code>join</code> and <code>map</code> are right for that kind of manipulations. I suggested <code>substr</code> to keep in line with your original idea, to efficiently write to parts of the string (it is very efficient). Also, given its syntax, it should be farily clean code. Or, since you were reaching for <code>pack</code>, to use it but will all parts, rearranged.  I can add these approaches to what I posted, if it&#39;s of some use."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "edited": false, "score": 0, "creation_date": 1467221126, "post_id": 38091876, "comment_id": 63646215, "body": "@JohnWiersba  They aren&#39;t the same -- <code>unpack</code> starts with a string, and thus <i>can</i> pull things out (while that&#39;s not its primary use). But <code>pack</code> has to write out a new string, and it has nowhere to go but to concat&#39; all pieces that it&#39;s given.  The functionality you wanted is provided by <code>substr</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1571263025, "last_edit_date": 1571263025, "creation_date": 1467181676, "answer_id": 38091876, "question_id": 38087689, "link": "https://stackoverflow.com/questions/38087689/how-to-use-perls-pack-function-to-reorder-fields/38091876#38091876", "title": "How to use perl&#39;s pack function to reorder fields", "body": "<p>You cannot have <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">pack</a> write at specific locations inside of a string. It doesn't move around a string with a \"<em>cursor</em>\" of sorts that can be repositioned -- but it rather just concatenates everything given to it and writes a new string with that.</p>\n\n<blockquote>\n  <p>pack TEMPLATE,LIST<br>\n  Takes a LIST of values and converts it into a string using the rules given by the TEMPLATE. The resulting string is the concatenation of the converted values. [...]</p>\n</blockquote>\n\n<p>Further down the page, the docs also say</p>\n\n<blockquote>\n  <p>You must yourself do any alignment or padding by inserting, for example, enough <code>\"x\"</code>es while packing. There is no way for <code>pack</code> and <code>unpack</code> to know where characters are going to or coming from, so they handle their output and input as flat sequences of characters.</p>\n</blockquote>\n\n<p>You can, of course, write out the string in any way you want, but only by re-arranging your template (if attempted out of order it fills as necessary per <code>@</code>, going from zero and thus overwriting for each value), and writing out or filling the \"<em>intermediate positions</em>\" as well. So you can say</p>\n\n<pre><code>my $str = \"...hi...defgabc\";\nmy $fmt = q{@12 a3 @8 a4 @3 a2};\n\nmy @parts = unpack $fmt, $str;\n# Add to @parts and template what need be in between or change $fmt to get all\nmy $res = pack \"A3A4A2\", @parts;\n</code></pre>\n\n<p>Then you could extract all parts of the original string, rearrange them or build a suitable index mask, and <code>pack</code> it. I understand that you know that and don't want it, but <code>pack</code> just can't do other than to write out the whole string. </p>\n\n<p>As for writing parts of the string, this is precisely the job of <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\">substr</a>. So perhaps you could write a little loop using <code>@fmt</code> and/or <code>@parts</code>, in which <code>substr</code> is going to replace sequences of given lengths at needed locations. However, <code>pack</code>-ing it all at once should be far more efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "is_accepted": true, "score": 1, "last_activity_date": 1467208538, "creation_date": 1467208538, "answer_id": 38101774, "question_id": 38087689, "link": "https://stackoverflow.com/questions/38087689/how-to-use-perls-pack-function-to-reorder-fields/38101774#38101774", "title": "How to use perl&#39;s pack function to reorder fields", "body": "<p>Apparently there is no way for <code>pack</code> to do that directly.  Here is one way of doing it, which avoids looping and using <code>substr</code>.  However, compared with the easy comprehensibility of <code>unpack</code>ing, it's not very satisfactory.  I was hoping that I had misunderstood something in the <code>pack</code> documentation that would really allow <code>pack</code> to be the reverse of <code>unpack</code> for placement of fields within the <code>pack</code>ed string.</p>\n\n<pre><code>use strict; use warnings;\nmy $str = \"...hi...defgabc\";\nmy @pos = (\n   { pos =&gt; 12, len =&gt; 3 }, \n   { pos =&gt;  8, len =&gt; 4 }, \n   { pos =&gt;  3, len =&gt; 2 }, \n);\nmy $fmt = join \" \", map { \"\\@$_-&gt;{pos} a$_-&gt;{len}\" } @pos;\n# q{@12 a3 @8 a4 @3 a2};\n\nmy @a = unpack $fmt, $str;\nprint \"&lt;$_&gt;\\n\" for @a;\nprint \"\\n\";\n\nmy @sorted_idxes =\n   sort { $pos[$a]{pos} &lt;=&gt; $pos[$b]{pos}\n       or $pos[$a]{len} &lt;=&gt; $pos[$b]{len} }\n   0..$#pos;\n\nmy $sorted_fmt = join \" \", \n   map { \"\\@$pos[$_]-&gt;{pos} a$pos[$_]-&gt;{len}\" } @sorted_idxes;\n\nmy $out = pack $sorted_fmt, @a[@sorted_idxes];\n$out =~ s/\\0/./g;\nprint \"$out\\n\";\n</code></pre>\n"}], "owner": {"reputation": 538, "user_id": 490240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c64a9d5c93890e5043388e0f8508fc5?s=128&d=identicon&r=PG", "display_name": "jrw32982", "link": "https://stackoverflow.com/users/490240/jrw32982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 38101774, "answer_count": 2, "score": 1, "last_activity_date": 1571263025, "creation_date": 1467155272, "last_edit_date": 1467162642, "question_id": 38087689, "link": "https://stackoverflow.com/questions/38087689/how-to-use-perls-pack-function-to-reorder-fields", "title": "How to use perl&#39;s pack function to reorder fields", "body": "<p>I'm trying to reorder fields when building a string using <code>pack</code>, but I can't seem to get <code>pack</code> to do what I want.  For example, I want to populate a string with <code>abc</code> at offset 12, <code>defg</code> at offset 8, and <code>hi</code> at offset 3 (and whatever, presumably space or <code>\\0</code>, at offsets 0-2 and 5-7).</p>\n\n<pre><code>perl -e '\n   use strict; use warnings;\n   my $str = \"...hi...defgabc\";\n   my $fmt = q{@12 a3 @8 a4 @3 a2};\n\n   my @a = unpack $fmt, $str;\n   print \"&lt;$_&gt;\\n\" for @a;\n   print \"\\n\";\n\n   print unpack(\"H*\", pack($fmt, @a)), \"\\n\";\n'\n</code></pre>\n\n<p>This works fine for <code>unpack</code>ing fields in any order out of a string.  But for <code>pack</code>ing, it <code>\\0</code>-fills and truncates as <a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow\">documented</a>.  Is there any way to stop it from <code>\\0</code>-filling and truncating without reordering the <code>pack</code> template to produce the fields left-to-right?</p>\n\n<p>This question comes up when reading a field specification from an external source.  Of course it can be arranged for the <code>pack</code> template to be produced in left-to-right order and resulting list can be reordered to match the external field specification.  But it would sure be handy to reposition the <code>pack</code> \"cursor\" dynamically without filling in intermediate positions or truncating.</p>\n\n<p>In the above code, I would be happy if the return value of <code>pack(...)</code> was the same as <code>$str</code> with any byte for <code>.</code> (e.g. blank or <code>\\0</code>).</p>\n"}, {"tags": ["c++", "regex", "perl", "boost"], "comments": [{"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 2, "creation_date": 1467141151, "post_id": 38084354, "comment_id": 63605185, "body": "Did you compile with optimizations? Are you running in debug?"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1467141158, "post_id": 38084354, "comment_id": 63605189, "body": "Note that the second pattern in perl version isn&#39;t anchored at the end. Other thing, I don&#39;t use boost, but if I remember well the default mode use the ECMA regex engine, did you try to use the PCRE regex engine <i>(that has more optimization features)</i>?"}, {"owner": {"reputation": 43, "user_id": 4305143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a264d17aaa8567e5ab15dde72b2cb9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Yayahii", "link": "https://stackoverflow.com/users/4305143/yayahii"}, "edited": false, "score": 0, "creation_date": 1467141384, "post_id": 38084354, "comment_id": 63605317, "body": "I am compiling the c++ with ./test_script -lrt -lboost_regex  , then running that executable. And thanks, fixed that pattern."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1467141753, "post_id": 38084354, "comment_id": 63605522, "body": "But since your patterns are simple, you will probably obtain better results with a non-backtracking engine, try to use the ERE mode."}, {"owner": {"reputation": 43, "user_id": 4305143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a264d17aaa8567e5ab15dde72b2cb9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Yayahii", "link": "https://stackoverflow.com/users/4305143/yayahii"}, "edited": false, "score": 0, "creation_date": 1467141863, "post_id": 38084354, "comment_id": 63605578, "body": "These subsets of patterns might seem simpler, but some of the later ones get more complicated. But I can look into that."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1467142008, "post_id": 38084354, "comment_id": 63605655, "body": "You can also take a look at this topic: <a href=\"http://stackoverflow.com/questions/1759991/regular-expressions-performance-boost-vs-perl\" title=\"regular expressions performance boost vs perl\">stackoverflow.com/questions/1759991/&hellip;</a>"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1467142406, "post_id": 38084354, "comment_id": 63605894, "body": "...so you&#39;re compiling without optimizations?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1467142884, "post_id": 38084354, "comment_id": 63606171, "body": "@Yayahii You need to build your C++ application with optimizations turned <b>on</b>, meaning <code>-O2</code>, <code>-O3</code>, etc.  The results you&#39;re seeing are meaningless if you&#39;re timing an unoptimized build.  In addition, giving us results from an optimized build ensures we&#39;re not wasting our time trying to solve an issue when there is no issue."}, {"owner": {"reputation": 43, "user_id": 4305143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a264d17aaa8567e5ab15dde72b2cb9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Yayahii", "link": "https://stackoverflow.com/users/4305143/yayahii"}, "edited": false, "score": 0, "creation_date": 1467143391, "post_id": 38084354, "comment_id": 63606496, "body": "I&#39;m sorry as I&#39;m not exactly sure about optimization details. I thought -o dealt with most optimizations? The test results from above are from running this command: g++ -o test_script test_script.cpp -lrt -lboost_regex"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1467144039, "post_id": 38084354, "comment_id": 63606839, "body": "@Yayahii Your comment says 0.009 seconds, your edit to the question says 0.091. Which is it?"}, {"owner": {"reputation": 43, "user_id": 4305143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a264d17aaa8567e5ab15dde72b2cb9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Yayahii", "link": "https://stackoverflow.com/users/4305143/yayahii"}, "edited": false, "score": 0, "creation_date": 1467144254, "post_id": 38084354, "comment_id": 63606963, "body": "Comment contained a typo, it&#39;s 0.091."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1467149660, "post_id": 38084354, "comment_id": 63609580, "body": "@Yayahii The <code>-o</code> option is not for optimizations.  It is an object file directive.  Right now, you&#39;re compiling with the default <code>-O0</code> which is no optimizations and thus your question concerning performance is still uncertain wrt the timings you&#39;re showing us and your claim that Perl is faster than Boost.  Please <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.2/gcc/Optimize-Options.html#Optimize-Options\" rel=\"nofollow noreferrer\">see this</a>.  Please specify one of the options I mentioned (<code>-O2</code>, <code>-O3</code>, etc.)"}, {"owner": {"reputation": 43, "user_id": 4305143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a264d17aaa8567e5ab15dde72b2cb9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Yayahii", "link": "https://stackoverflow.com/users/4305143/yayahii"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1467150795, "post_id": 38084354, "comment_id": 63610077, "body": "@PaulMcKenzie , I have updated the question with the new times when I run these options. The new time is 0.091 vs 0.155, what it used to before."}, {"owner": {"reputation": 192, "user_id": 5185210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNqsL.png?s=128&g=1", "display_name": "oals", "link": "https://stackoverflow.com/users/5185210/oals"}, "edited": false, "score": 1, "creation_date": 1467192350, "post_id": 38084354, "comment_id": 63625718, "body": "I don&#39;t know a thing about Boost, but your Perl regexps start with <code>^</code> while your Boost ones don&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4305143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a264d17aaa8567e5ab15dde72b2cb9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Yayahii", "link": "https://stackoverflow.com/users/4305143/yayahii"}, "edited": false, "score": 0, "creation_date": 1467144142, "post_id": 38084681, "comment_id": 63606900, "body": "This could honestly be a part of it, though I am not sure that it would account alone for all this difference? Thank you, I will look into it."}], "tags": [], "owner": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "is_accepted": false, "score": 3, "last_activity_date": 1467225249, "last_edit_date": 1467225249, "creation_date": 1467141935, "answer_id": 38084681, "question_id": 38084354, "link": "https://stackoverflow.com/questions/38084354/perl-regular-expression-running-faster-than-c-boost-implementation/38084681#38084681", "title": "Perl Regular Expression running faster than C++ Boost Implementation", "body": "<p>In addition to turning on the compiler optimisation settings, try using the <code>boost::regex_constants::optimize</code> option which will direct the regex library to construct the most optimal regex state machine.</p>\n\n<pre><code>static void populateArray(){\nregexArray[1] =  boost::regex (\"\\\\/stuff\\\\/brands-([^\\\\/]*)\\\\/(.*)?\", boost::regex_constants::optimize);\n//continues on, 102 definitions. \n}\n</code></pre>\n\n<p>Also, be sure to pass by reference to <code>getRule</code> rather than by value because you don't want the potential overhead of a heap allocation.</p>\n\n<p>If you can make sure the compiler inlines the function, that would best.</p>\n\n<p>Also, as Oals commented above, you have not used the begin and end line anchors in the C++ regex expressions like you have in the Perl ones. ^...$</p>\n"}], "owner": {"reputation": 43, "user_id": 4305143, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a264d17aaa8567e5ab15dde72b2cb9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Yayahii", "link": "https://stackoverflow.com/users/4305143/yayahii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467225249, "creation_date": 1467140796, "last_edit_date": 1467143991, "question_id": 38084354, "link": "https://stackoverflow.com/questions/38084354/perl-regular-expression-running-faster-than-c-boost-implementation", "title": "Perl Regular Expression running faster than C++ Boost Implementation", "body": "<p>I am kind of confused as to what is happening here. Most benchmarks I have seen have Boost being close to Perl or even beating it in terms of performance. In my scripts however, my Perl implementation is faster in order of 5-6 times. </p>\n\n<p>I open files in both test_script.cpp &amp; test_script.pl and read in line by line, populating an array. Then, I run these strings against a list of regex definitions in a linear definition until they match, in which case nothing happens (I/O was removed for testing purposes) and then the next string is compared, etc until we have compared all strings. </p>\n\n<p>Test_script.pl: </p>\n\n<pre><code>#make incomingList, which contains all incoming strings\nmy $start = Time::HiRes::gettimeofday();\n\nforeach (@incomingList) {\n  my $inString = $_;\n  &amp;find_pattern($inString);\n}\n\nmy $end = Time::HiRes::gettimeofday();\nprintf(\"%.6f\\n\", $end - $start);\n</code></pre>\n\n<p>Find_pattern method: </p>\n\n<pre><code>sub find_pattern {\n  my $URLString = $_[0];\n\n  #1 rewrite\n  if($URLString =~ m/^\\/stuff\\/brands-([^\\/]*)\\/(.*)?$/) {\n\n  }\n  #2 rewrite\n  elsif($URLString =~ m/^\\/coupons(\\/.*)?$/){\n\n  }\n  #3 rewrite\n  elsif($URLString =~ m/^\\/han\\/(.+)$/){\n\n  }\n  # ...continues on, there are 100 patterns. \n}\n</code></pre>\n\n<p>Test_script.cpp: \n Main method: </p>\n\n<pre><code>populateArray();\n//make stringArr, which contains all incoming strings\nstruct timeval time;\ngettimeofday(&amp;time, NULL);\ndouble t1=time.tv_sec+(time.tv_usec/1000000.0);   \n\nfor(int j =0; j &lt; 10000; j++){\n  getRule(stringArr[j]);\n }\n\ngettimeofday(&amp;time, NULL);\ndouble t2=time.tv_sec+(time.tv_usec/1000000.0);\nprintf(\"%.6lf seconds elapsed\\n\", t2-t1);\n</code></pre>\n\n<p>populate array method: </p>\n\n<pre><code>static void populateArray(){\nregexArray[1] =  boost::regex (\"\\\\/stuff\\\\/brands-([^\\\\/]*)\\\\/(.*)?\");\nregexArray[2] =  boost::regex (\"\\\\/coupons(\\\\/.*)?\");\nregexArray[3] =  boost::regex (\"\\\\/han\\\\/(.+)\"); \n//continues on, 100 definitions. \n}\n</code></pre>\n\n<p>getRule method: </p>\n\n<pre><code>static void getRule(string inQuery){\n  for(int i =1; i &lt; 100; i++){\n    if(boost::regex_match(inQuery, regexArray[i])){\n      break; \n     }\n  }\n</code></pre>\n\n<p>I understand that it might seem a little odd that I'm doing a linear list of if else checks in perl, but that's because I have to reformat each rule independently later. Regardless, unless I'm misunderstanding something, these two scripts are pretty similar- they look down this list of regex definitions until they find a match, and then they continue with other incoming strings.</p>\n\n<p>So then why are these results so different?\nFor 100 rules (same used for both scripts) &amp; 10,000 inputs, \nThe .cpp averages to around 0.155 seconds, and the .pl  averages to around 0.028 seconds.\nEdit: With compiler optimization in place, the C++ script is operating at roughly 0.091 seconds, still slower. </p>\n\n<p>Any insight is appreciated. </p>\n"}, {"tags": ["regex", "perl", "regex-negation", "negative-lookahead"], "answers": [{"comments": [{"owner": {"reputation": 20552, "user_id": 460557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=128&d=identicon&r=PG", "display_name": "Jorge Campos", "link": "https://stackoverflow.com/users/460557/jorge-campos"}, "edited": false, "score": 0, "creation_date": 1467139363, "post_id": 38083775, "comment_id": 63604213, "body": "Hi Casimir, why <code>\\[(?:[^]]+?(?&lt;!-notme)\\])</code> also work? Instead of <code>++</code>, <code>+?</code> what is the difference between then? Just got curios as I was testing it on <a href=\"https://regex101.com/r/sV5gF7/1\" rel=\"nofollow noreferrer\">regex101.com/r/sV5gF7/1</a>"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 20552, "user_id": 460557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=128&d=identicon&r=PG", "display_name": "Jorge Campos", "link": "https://stackoverflow.com/users/460557/jorge-campos"}, "edited": false, "score": 2, "creation_date": 1467139627, "post_id": 38083775, "comment_id": 63604343, "body": "@JorgeCampos: <code>[^]]+</code> works also too, the only difference is the performance. With a lazy quantifier the lookbehind is tested for each character taken by <code>[^]]+?</code> <i>(until the lookbehind succeeds, but for each character the next token <code>]</code> will fail except for the last)</i>, with a greedy quantifier, the regex engine will try to backtrack to make the pattern succeed. But with a possessive quantifier, no choice, all characters are taken and the regex engine hasn&#39;t the right to backtrack."}, {"owner": {"reputation": 20552, "user_id": 460557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=128&d=identicon&r=PG", "display_name": "Jorge Campos", "link": "https://stackoverflow.com/users/460557/jorge-campos"}, "edited": false, "score": 0, "creation_date": 1467139990, "post_id": 38083775, "comment_id": 63604559, "body": "Great explanation. Thank you."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 2, "last_activity_date": 1467139770, "last_edit_date": 1467139770, "creation_date": 1467138811, "answer_id": 38083775, "question_id": 38083569, "link": "https://stackoverflow.com/questions/38083569/perl-regex-negative-set-matching-string-in-negative-lookahead/38083775#38083775", "title": "perl regex negative set matching string in negative lookahead", "body": "<p>You should change the pattern: <code>/\\[[^\\[\\]]+?(?!-notme)\\]$/</code> to</p>\n\n<pre><code>/\\[[^]]++(?&lt;!-notme)]$/\n#      ^ ^-------------- a negative loobehind before the closing bracket\n#      '---------------- a possessive quantifier to prevent backtracking\n</code></pre>\n\n<p>In this way, you are sure that \"-notme\" isn't tested at useless positions in the string.</p>\n\n<p>As you can see, it's possible to not escape a closing bracket in a character class if this one is at the first position or immediately after the negation caret. </p>\n"}], "owner": {"reputation": 196, "user_id": 2632748, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/502891829/picture?type=large", "display_name": "John Westlund", "link": "https://stackoverflow.com/users/2632748/john-westlund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 38083775, "answer_count": 1, "score": 1, "last_activity_date": 1467139770, "creation_date": 1467138096, "last_edit_date": 1467138823, "question_id": 38083569, "link": "https://stackoverflow.com/questions/38083569/perl-regex-negative-set-matching-string-in-negative-lookahead", "title": "perl regex negative set matching string in negative lookahead", "body": "<p>I'm trying to match any set of characters (inside square brackets) other then square brackets (<code>[^\\[\\]]+</code>) -- unless the last part of the string of characters matches <code>-notme</code>.</p>\n\n<pre><code>perl -sp -e 'if (/\\[[^\\[\\]]+?(?!-notme)\\]$/../^no/)\n { print \"#\"; s/^yes/$VAR/; }' -- -VAR=\"CHANGED\" /tmp/input\n</code></pre>\n\n<p>My input file looks like this:</p>\n\n<pre><code>-bash-4.2# cat /tmp/input \n[test-ing]\nyes\nyes\nno\nmaybe\n\n[test-ing-notme]\nyes\nyes\nno\nmaybe\n</code></pre>\n\n<p>But my output looks like:</p>\n\n<pre><code>#[test-ing]\n#CHANGED\n#CHANGED\n#no\nmaybe\n\n#[test-ing-notme]\n#CHANGED\n#CHANGED\n#no\nmaybe\n</code></pre>\n\n<p>My speculation is that the negative set is matching what my negative lookahead should be not matching -- hence my attempt with lazy matching of the negative set, but the result is the same as if it were a greedy match.</p>\n\n<p>My expectation would be that the output would look like:</p>\n\n<pre><code>#[test-ing]\n#CHANGED\n#CHANGED\n#no\nmaybe\n\n[test-ing-notme]\nyes\nyes\nno\nmaybe\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1467137596, "post_id": 38083020, "comment_id": 63603189, "body": "Which terminal are you using?"}, {"owner": {"reputation": 123, "user_id": 3697611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d420d66001fd51fce26362b5c40bbbca?s=128&d=identicon&r=PG&f=1", "display_name": "gzinho", "link": "https://stackoverflow.com/users/3697611/gzinho"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1467207404, "post_id": 38083020, "comment_id": 63636304, "body": "Good question @MattJacob: putty. But I can tell you that <b>Translation</b> &gt; <b>Remote character set</b> is UTF-8 is there anything more that I must set?"}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 3697611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d420d66001fd51fce26362b5c40bbbca?s=128&d=identicon&r=PG&f=1", "display_name": "gzinho", "link": "https://stackoverflow.com/users/3697611/gzinho"}, "is_accepted": true, "score": 1, "last_activity_date": 1467209804, "creation_date": 1467209804, "answer_id": 38102351, "question_id": 38083020, "link": "https://stackoverflow.com/questions/38083020/perl-generating-error-message-with-mojibake/38102351#38102351", "title": "Perl generating error message with mojibake", "body": "<p>It wasn't Perl, it was the terminal settings. </p>\n\n<p>As @MattJacob pointed out it could the terminal.</p>\n\n<p>I just made a test dumping the registry:</p>\n\n<pre><code>regedit /ea \"D:\\putty.reg.old\" HKEY_CURRENT_USER\\Software\\SimonTatham\\PuTTY\\Sessions\n</code></pre>\n\n<p><strong>The GUI of putty in the Translation > Remote character set was showing by default UTF-8 encoding. But it was not set</strong>. So I just change it to whatever encoding, saved the session and saved it again into putty.reg to do file comparison.</p>\n\n<pre><code>fc putty.reg.old putty.reg\n***** putty.reg.old\n\"Wordness224\"=\"2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2\"\n\"LineCodePage\"=\"\"\n\"CJKAmbigWide\"=dword:00000000\n***** PUTTY.REG\n\"Wordness224\"=\"2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2\"\n\"LineCodePage\"=\"ISO-8859-1:1998 (Latin-1, West Europe)\"\n\"CJKAmbigWide\"=dword:00000000\n*****\n</code></pre>\n\n<p>Now we see that the \"LineCodePage\"=\"\" was empty. Selecting UTF-8 now should work!</p>\n\n<pre><code>fc putty.reg.old putty.reg\n***** putty.reg.old\n\"Wordness224\"=\"2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2\"\n\"LineCodePage\"=\"\"\n\"CJKAmbigWide\"=dword:00000000\n***** PUTTY.REG\n\"Wordness224\"=\"2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2\"\n\"LineCodePage\"=\"UTF-8\"\n\"CJKAmbigWide\"=dword:00000000\n*****\n</code></pre>\n\n<p>Lets get into the server and test!</p>\n\n<pre><code>~(master \u2717) perl -e 'open(my $fh, \"&lt;\", \"teste\") or warn $!'\nArquivo ou diret\u00f3rio n\u00e3o encontrado at -e line 1.\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 3697611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d420d66001fd51fce26362b5c40bbbca?s=128&d=identicon&r=PG&f=1", "display_name": "gzinho", "link": "https://stackoverflow.com/users/3697611/gzinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 38102351, "answer_count": 1, "score": 1, "last_activity_date": 1467209804, "creation_date": 1467136187, "last_edit_date": 1467208894, "question_id": 38083020, "link": "https://stackoverflow.com/questions/38083020/perl-generating-error-message-with-mojibake", "title": "Perl generating error message with mojibake", "body": "<p>I'm learning Perl and in the system console I'm executing a script that shows the following weird characters:</p>\n\n<pre><code>open(my $fh, '&lt;', 'teste') or warn $!\nArquivo ou diret\u00c3\u00b3rio n\u00c3\u00a3o encontrado at reply input line 1.\n</code></pre>\n\n<p>The message should be: <code>Arquivo ou diret\u00f3rio n\u00e3o encontrado at reply input line 1.</code></p>\n\n<p>I think that it's <a href=\"https://pt.wikipedia.org/wiki/ISO_8859-1\" rel=\"nofollow\">iso-8859-1</a>.</p>\n\n<p>I would like to have everything UTF-8 encoded/interpreted so I've learned to put the following lines in the source:</p>\n\n<pre><code>use open qw/:std :utf8/; # entrada e sa\u00edda em utf8                                                                                         \nuse utf8; # c\u00f3digo fonte em utf8\n</code></pre>\n\n<p>On my system I've:</p>\n\n<pre><code>LANG=pt_BR.UTF-8\nLANGUAGE=pt_BR:pt:en\nLC_CTYPE=pt_BR.UTF-8\nLC_NUMERIC=\"pt_BR.UTF-8\"\nLC_TIME=\"pt_BR.UTF-8\"\nLC_COLLATE=\"pt_BR.UTF-8\"\nLC_MONETARY=\"pt_BR.UTF-8\"\nLC_MESSAGES=\"pt_BR.UTF-8\"\nLC_PAPER=\"pt_BR.UTF-8\"\nLC_NAME=\"pt_BR.UTF-8\"\nLC_ADDRESS=\"pt_BR.UTF-8\"\nLC_TELEPHONE=\"pt_BR.UTF-8\"\nLC_MEASUREMENT=\"pt_BR.UTF-8\"\nLC_IDENTIFICATION=\"pt_BR.UTF-8\"\nLC_ALL=\n</code></pre>\n\n<p>My terminal is handled by <a href=\"http://www.putty.org/\" rel=\"nofollow\">putty</a>.</p>\n\n<p>How to solve this?</p>\n"}, {"tags": ["perl", "soaplite"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1467143456, "post_id": 38082603, "comment_id": 63606533, "body": "@Ehsan Please don&#39;t add &quot;Thanks for your time :D&quot; to questions. It&#39;s unnecessary noise and doesn&#39;t belong in posts. Also, please don&#39;t use inline code formatting for things that aren&#39;t code, like &quot;xml&quot; (which should be &quot;XML&quot; anyway)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6524659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2606e1b468dbe44f43cae73b95dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "cccict", "link": "https://stackoverflow.com/users/6524659/cccict"}, "edited": false, "score": 0, "creation_date": 1467188266, "post_id": 38091151, "comment_id": 63623015, "body": "Hi, thank you for your help.  It is giving a syntax error at this line.    my $ua = Mojo::UserAgent -&gt; new;"}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "reply_to_user": {"reputation": 1, "user_id": 6524659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2606e1b468dbe44f43cae73b95dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "cccict", "link": "https://stackoverflow.com/users/6524659/cccict"}, "edited": false, "score": 0, "creation_date": 1467191041, "post_id": 38091151, "comment_id": 63624813, "body": "You have to install Mojo::UserAgent through CPAN. Type in your shell &quot;cpan install Mojo::UserAgent&quot;."}], "tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": 0, "last_activity_date": 1467178553, "creation_date": 1467178553, "answer_id": 38091151, "question_id": 38082603, "link": "https://stackoverflow.com/questions/38082603/soaplite-perl-basic-query/38091151#38091151", "title": "Soap::Lite Perl Basic Query", "body": "<p>Since there is no answer so far, I'm goingo to show you an alternative.\nYou can submit the request as raw post. SOAPAction might be declared in the header. Compiling the correct SOAP with SOAP::Lite is time intensive and nested elements are hard to read. The example does also support non-blocking calling style out of the box with a small modification.</p>\n\n<pre><code>use Mojo::UserAgent;\nuse strict;\nuse warnings;\n\n# User-Agent \nmy $ua = Mojo::UserAgent-&gt;new;\n\nmy $username = 'Username';\nmy $password = 'Password';\nmy $authtoken = 'Token';\n\nmy $message = &lt;&lt;\"SOAP_REQUEST\";\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n    &lt;soap:Header&gt;\n    &lt;CiSoapHeader xmlns=\"https://carrierintegrationapi.3tlogistics.net/\"&gt;\n      &lt;Username&gt;$username&lt;/Username&gt;\n      &lt;Password&gt;$password&lt;/Password&gt;\n      &lt;AuthenticationToken&gt;$authtoken&lt;/AuthenticationToken&gt;\n    &lt;/CiSoapHeader&gt;\n    &lt;/soap:Header&gt;\n  &lt;soap:Body&gt;\n  &lt;Login xmlns=\"https://carrierintegrationapi.3tlogistics.net/\" /&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\nSOAP_REQUEST\n\nmy $tx = $ua-&gt;post('https://carrierintegrationapi.3tlogistics.net/carrierintegrationapi.asm' =&gt; { 'Hello' =&gt; \"I'm a Header\" } =&gt; $message);\nprint $tx-&gt;res-&gt;body;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6524659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2606e1b468dbe44f43cae73b95dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "cccict", "link": "https://stackoverflow.com/users/6524659/cccict"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467178553, "creation_date": 1467134695, "last_edit_date": 1467143094, "question_id": 38082603, "link": "https://stackoverflow.com/questions/38082603/soaplite-perl-basic-query", "title": "Soap::Lite Perl Basic Query", "body": "<p>We have been given the below <code>xml</code> and need to translate into Perl.</p>\n\n<pre><code>POST /carrierintegrationapi.asmx HTTP/1.1\nHost: carrierintegrationapi.3tlogistics.net\nContent-Type: text/xml; charset=utf-8\nContent-Length: length\nSOAPAction: \"https://carrierintegrationapi.3tlogistics.net/Login\"\n\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n    &lt;soap:Header&gt;\n    &lt;CiSoapHeader xmlns=\"https://carrierintegrationapi.3tlogistics.net/\"&gt;\n      &lt;Username&gt;cccict&lt;/Username&gt;\n      &lt;Password&gt;xxxxxx&lt;/Password&gt;\n      &lt;AuthenticationToken&gt;string&lt;/AuthenticationToken&gt;\n    &lt;/CiSoapHeader&gt;\n    &lt;/soap:Header&gt;\n  &lt;soap:Body&gt;\n   &lt;Login xmlns=\"https://carrierintegrationapi.3tlogistics.net/\" /&gt;\n  &lt;/soap:Body&gt;\n &lt;/soap:Envelope&gt;';\n</code></pre>\n\n<p>Our attempt:</p>\n\n<pre><code>my $service = SOAP::Lite\n            -&gt; service    ('https://carrierintegrationapi.3tlogistics.net/carrierintegrationapi.asmx');\n\n my $AuthHeader = SOAP::Header-&gt;new(\n  name =&gt;'AuthenticationHeader',\n  attr =&gt; { xmlns =&gt; \"https://carrierintegrationapi.3tlogistics.net/\" },\n  value =&gt; {Username =&gt; 'cccict', Password =&gt; 'xxxxxx' },\n);\nmy $result = $service-&gt;GetIt($AuthHeader);\n</code></pre>\n\n<p>We get mismatched tag in <code>parser.pm</code>?</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467143584, "post_id": 38082224, "comment_id": 63606589, "body": "(1) Is this code exactly what you run?  You open the <code>$in</code> file with <code>&gt;</code>, so for writing.  Should be <code>&lt;</code> for reading.  Otherwise, the code you show should indeed prepend a line. (2) How do you want to &quot;<i>combine</i>&quot; these files? // There are other things that can be improved."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467149841, "post_id": 38082224, "comment_id": 63609658, "body": "I&#39;ve changed <code>$in to </code>$in, &#39;&lt;&#39;,` and it worked. However, when I ran the code that combines the files, each header row appeared four times. (2) I combine specific rows and columns from each file. Each file is exactly the same format, so I loop through an array of files and append one after another. Without the added headers it works great. thanks"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467150256, "post_id": 38082224, "comment_id": 63609859, "body": "For example, I exclude rows with CNV|intronic|synonymous|utr_3|utr_5 and only interested in particular columns that I modify before appending to the final file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467155306, "post_id": 38082224, "comment_id": 63611696, "body": "Thanks for the explanation.  If you need some code for that as well, I can add it to the answer below but then I would need it a bit more precise.  What I posted are comments on the rest of the code, along with the statement from my comment above about the actual error."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1533255576, "last_edit_date": 1533255576, "creation_date": 1467155213, "answer_id": 38087679, "question_id": 38082224, "link": "https://stackoverflow.com/questions/38082224/adding-custom-header-to-specific-files-in-a-directory/38087679#38087679", "title": "Adding custom header to specific files in a directory", "body": "<p>Apparently, the wrong <code>'&gt;'</code> when opening the file for <em>reading</em> was the problem and it got solved.</p>\n\n<p>However, I'd like to make a few comments on some of the rest of the code.</p>\n\n<ul>\n<li><p>The list of files is built by running external <code>ls</code> redirected to a file, then reading this file into an array. However, that is exactly the job of <a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"nofollow noreferrer\"><code>glob</code></a> and all of that is replaced by   </p>\n\n<pre><code>my @tsvfiles = glob \"$tsv_directory/FOCUS*.tsv\";\n</code></pre>\n\n<p>Then you don't need the <code>chomp</code> either, and the <code>chop</code> that is used would actually hurt since it removes the last <em>character</em>, not only the newline (or really <code>$/</code>).</p></li>\n<li><p>Use of <a href=\"http://perldoc.perl.org/functions/chop.html\" rel=\"nofollow noreferrer\"><code>chop</code></a> is probably not what you want. If you are removing the linefeed (<code>$/</code>) use <a href=\"http://perldoc.perl.org/functions/chomp.html\" rel=\"nofollow noreferrer\"><code>chomp</code></a></p></li>\n<li><p>To extract a match and assign it, a common idiom is  </p>\n\n<pre><code>my ($sample_id) = $tsv_file =~ m|([^/]+)-oncomine.tsv$| \n    or die \"Can't extract Sample ID: $!\";\n</code></pre>\n\n<p>Note that I also added <code>$!</code>, to actually print the error. Otherwise we just don't know what it was.</p></li>\n<li><p>The <code>unlink</code> and <code>rename</code> appear to be overwriting one file with another. You can do that by using <code>move</code> from the core module <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\"><code>File::Copy</code></a></p>\n\n<pre><code>use File::Copy qw(move);\nmove ($tsv_file_new, $tsv_file)  \n    or die \"Can't move $tsv_file to $tsv_file_new: $!\";\n</code></pre>\n\n<p>which renames the <code>_new</code> into <code>$tsv_file</code>, so overwriting it. </p></li>\n</ul>\n\n<hr>\n\n<p>As for how the files need to be combined, more precise explanation would be needed.</p>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 38087679, "answer_count": 1, "score": 2, "last_activity_date": 1533255576, "creation_date": 1467133404, "question_id": 38082224, "link": "https://stackoverflow.com/questions/38082224/adding-custom-header-to-specific-files-in-a-directory", "title": "Adding custom header to specific files in a directory", "body": "<p>I would like to add a unique one line header that pertains to each file FOCUS*.tsv file in a specified directory.  After that, I would like to combine all of these files into one file.</p>\n\n<p>First I\u2019ve tried <code>sed</code> command. </p>\n\n<pre><code>`my $cmd9 = `sed -i '1i$SampleID[4]' $tsv_file`;` print $cmd9;\n</code></pre>\n\n<p>It looked like it worked but after I\u2019ve combined all of these files into one file in the next section of the code, the inserted row was listed four times for each file. </p>\n\n<p>I\u2019ve tried the following Perl script to accomplish the same but it deleted the content of the file and only prints out the added header. </p>\n\n<p>I\u2019m looking for the simplest way to accomplish what I\u2019m looking for.\nHere is what I\u2019ve tried.</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse Tie::File;\n\nmy $home=\"/data/\";                                                     \nmy $tsv_directory = $home.\"test_all_runs/\".$ARGV[0];\nmy $tsvfiles = $home.\"test_all_runs/\".$ARGV[0].\"/tsv_files.txt\";\n\nmy @run_directory = (); @run_directory = split /\\//, $tsv_directory; print \"The run directory is #############\".$run_directory[3].\"\\n\";\n\nmy $cmd = `ls $tsv_directory/FOCUS*\\.tsv &gt; $tsvfiles`; #print \"$cmd\";\nmy $cmda = \"ls $tsv_directory/FOCUS*\\.tsv &gt; $tsvfiles\"; #print \"$cmda\";\n\nmy @tsvfiles =();\n#this code opens the vcf_files.txt file and passes each line into an array for indidivudal manipulation\nopen(TXT2, \"$tsvfiles\");\n        while (&lt;TXT2&gt;){  \n                push (@tsvfiles, $_);   \n                }\nclose(TXT2);\n\nforeach (@tsvfiles){\n        chop($_);\n}\n\n#this loop works fine\nfor my $tsv_file (@tsvfiles){\n\n      open my $in, '&gt;', $tsv_file or die \"Can't write new file: $!\";    \n      open my $out, '&gt;', \"$tsv_file.new\" or die \"Can't write new file: $!\";  \n\n    $tsv_file =~ m|([^/]+)-oncomine.tsv$| or die \"Can't extract Sample ID\";\n    my $sample_id = $1;\n    #print \"The sample ID is ############## $sample_id\\n\";\n    my $headerline = $run_directory[3].\"/\".$sample_id;\n    print $out $headerline;\n    while( &lt;$in&gt; ) {\n    print $out $_;\n    }\n\n    close $out;\n    close $in;\n\nunlink($tsv_file);\nrename(\"$tsv_file.new\", $tsv_file);\n\n}\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467133374, "post_id": 38082049, "comment_id": 63600781, "body": "I think that when you say <i>exits</i> you mean <i>exists</i>. I&#39;ve edited your question to use <i>occurs</i>, which is better English, but <i>appears</i> is also possible. You may roll back my edit if you prefer"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467140255, "post_id": 38082588, "comment_id": 63604689, "body": "You need to subtract <code>4</code>, not <code>5</code>. The OP gives the example (twice) of <code>7</code> vs <code>3</code> so I think they start counting <i>at</i> <code>5</code> (so it&#39;s <code>==1</code> for <code>5</code>)."}], "tags": [], "owner": {"reputation": 112, "user_id": 4555536, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b2ceb7a1e2e36a165764963bfdfc8794?s=128&d=identicon&r=PG&f=1", "display_name": "code_seeker", "link": "https://stackoverflow.com/users/4555536/code-seeker"}, "is_accepted": false, "score": 1, "last_activity_date": 1467134653, "creation_date": 1467134653, "answer_id": 38082588, "question_id": 38082049, "link": "https://stackoverflow.com/questions/38082049/count-how-many-times-a-word-occurs-in-a-file-and-email-if-word-appears-5-times/38082588#38082588", "title": "Count how many times a word occurs in a file and email if word appears 5+ times", "body": "<p>simple solution would be using comparison operator </p>\n\n<pre><code>if ( $counter &gt; 5 ) {\n     $counter -=  5;\n     ........\n     .......\n}\n</code></pre>\n\n<p><strong>if</strong> control structure executes only if its condition returns a true value.</p>\n"}], "owner": {"reputation": 145, "user_id": 6292987, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf408d91ad5f6adb872fb56220c1b85b?s=128&d=identicon&r=PG&f=1", "display_name": "connollyc4", "link": "https://stackoverflow.com/users/6292987/connollyc4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467134653, "creation_date": 1467132797, "last_edit_date": 1467133215, "question_id": 38082049, "link": "https://stackoverflow.com/questions/38082049/count-how-many-times-a-word-occurs-in-a-file-and-email-if-word-appears-5-times", "title": "Count how many times a word occurs in a file and email if word appears 5+ times", "body": "<p>I have a Perl script that counts how many times the word \"bad\" exits in a file, and if it exists it will send an email alert.</p>\n\n<p>I am trying to get the script to send an email only if the word \"bad\" occurs five or more times, and do nothing if the word occurs less than five. </p>\n\n<p>I am also trying to make it so that, if the word \"bad\" occurs five or more times, then start the count after five for the email alert.</p>\n\n<p>For example, if the word \"bad\" occurs seven times then the email alert says that the word bad occurs three times (always ignoring the first five times the word \"bad\" occurs in the file).</p>\n\n<p>Example of the output file</p>\n\n<pre><code>bad\nbad\nbad\nbad\nbad\nbad\nbad\n</code></pre>\n\n<p>since the word \"bad\" occurs seven times, an email alert should go out saying the word \"bad\" has been recorded three times.</p>\n\n<p>Here is the code so far:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nmy $file = 'output.txt';\nmy $mark = 'bad';\n\nopen my $f, \"&lt;$file\" or die \"Error open file: $!\\n\";\n\nmy $counter = 0;\n\nwhile ( my $line = &lt;$f&gt; ) {\n\n    if ( $line =~ /$mark/ ) {\n        $counter++;\n    }\n}\n\nif ( $counter ) {\n\n    my $body      = \"Warning the word bad was recorded $counter times\";\n    my $cmd_email = \"echo $body | mailx -s \\\"Alert error\\\" tneal01\\@gmail.com\";\n    system($cmd_email) == 0 or die \"Error sending email -- $!\";\n}\n</code></pre>\n"}, {"tags": ["regex", "perl", "telnet"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6523768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de0dc03db8e15bb872277b5a600335b?s=128&d=identicon&r=PG&f=1", "display_name": "jlvc05", "link": "https://stackoverflow.com/users/6523768/jlvc05"}, "is_accepted": true, "score": 1, "last_activity_date": 1467198721, "last_edit_date": 1467198721, "creation_date": 1467137069, "answer_id": 38083283, "question_id": 38079016, "link": "https://stackoverflow.com/questions/38079016/timed-out-waiting-for-login-prompt-telnet-perl/38083283#38083283", "title": "timed-out waiting for login prompt Telnet Perl", "body": "<p>I solved my problem :D</p>\n\n<p>It works for me using:</p>\n\n<pre><code>use Net::Telnet ();\n$t = new Net::Telnet (Host=&gt; \"192.168.10.15\", Port =&gt; 11052, Timeout =&gt; 5, Prompt =&gt; \"/Enter username and password/\");    \n$t-&gt;waitfor('/Enter username and password/'); \n$t-&gt;print('test test1');\n</code></pre>\n\n<p>In my case the sentence <code>$t-&gt;login('test', 'test1');</code> doesn't work, then I tried writing usr and pw on the same line <code>$t-&gt;print('test test1');</code> and it works!</p>\n"}], "owner": {"reputation": 11, "user_id": 6523768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de0dc03db8e15bb872277b5a600335b?s=128&d=identicon&r=PG&f=1", "display_name": "jlvc05", "link": "https://stackoverflow.com/users/6523768/jlvc05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 38083283, "answer_count": 1, "score": -1, "last_activity_date": 1467198721, "creation_date": 1467124185, "question_id": 38079016, "link": "https://stackoverflow.com/questions/38079016/timed-out-waiting-for-login-prompt-telnet-perl", "title": "timed-out waiting for login prompt Telnet Perl", "body": "<p>I have a problem to log in into a telnet prompt using perl</p>\n\n<p>this is my prompt:</p>\n\n<pre><code>Trying 192.168.10.15...\nConnected to 192.168.10.15.\nEscape character is '^]'.\n\nEnter username and password\n&gt;\n</code></pre>\n\n<p>And this is my code:</p>\n\n<pre><code>use Net::Telnet ();\n$t = new Net::Telnet (Port =&gt; 11052, Timeout =&gt; 10, Prompt =&gt; '/Enter username and password/ /\\n/ /&gt; $/i');\n$t-&gt;open(\"192.168.10.15\");\n$t-&gt;login('test', 'test1');\n@lines = $t-&gt;cmd(\"ls\");\nprint @lines;\n</code></pre>\n\n<p>But I have a message error: timed-out waiting for login prompt </p>\n\n<p>I tried using:</p>\n\n<pre><code>$t-&gt;waitfor('/Enter username and password/ /\\n/ /&gt; $/i');\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$-&gt;waitfor('/&gt; $/i');\n</code></pre>\n\n<p>can anybody help me with this?</p>\n"}, {"tags": ["string", "perl", "if-statement"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 6, "creation_date": 1467124060, "post_id": 38078832, "comment_id": 63594481, "body": "This is a bad practice. In Perl, it&#39;s best not to try to determine the type of values. You will break something. Instead, use different method names, named options, differences in the number of parameters, etc."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1467124148, "post_id": 38078832, "comment_id": 63594541, "body": "What are you actually trying to accomplish? There are ways to validate your input, beyond checking &#39;is it a string&#39;. You should probably be using one of those. (e.g. match a regular expression is probably a good bet)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1467124380, "post_id": 38078832, "comment_id": 63594695, "body": "Every scalar either is a string or can become one by being used as a string. Saying your method requires a string is not really saying anything at all. Do you want to make sure that the argument is not a reference? then use <code>ref</code>. Want to make sure it&#39;s not <code>undef</code>? Then use <code>defined</code>. If you&#39;re trying to distinguish strings from numbers - you want <code>foo(6)</code> to fail while <code>foo(&quot;6&quot;)</code> succeeds? - then the answer is please don&#39;t do that. It&#39;s hard to do because it&#39;s not a good idea."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467124424, "post_id": 38078832, "comment_id": 63594741, "body": "I had been dividing up the conditions by even number of arguments, and odd number of arguments followed by when there is exactly one argument, but my mentor/advisor said I should not be dividing up conditions based on the position of parameters. Will I just show you the different input types/cases that will be passed into my method? I will edit my question, maybe it will be clearer if I give some context? Matching a regular expression, I haven&#39;t seen how that works, but it could be an option"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1467124492, "post_id": 38078832, "comment_id": 63594804, "body": "If you expand on what you&#39;re getting and what you&#39;re trying to accomplish, we&#39;ll probably be able to give a much better answer. It&#39;s quite right, you shouldn&#39;t be relying on &#39;hard position&#39; of parameters (barring &#39;more than a couple&#39;). Passing in &#39;key-value&#39; to turn into a hash later works quite well, as does &#39;just&#39; iterating a similar list of objects."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1467126674, "post_id": 38078832, "comment_id": 63596473, "body": "Are you giving command line arguments and you want to check whether it is string or number?"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467127908, "post_id": 38078832, "comment_id": 63597381, "body": "no these will be called in the software&#39;s code like so: <code>ASC::Builder::Error-&gt;new(&quot;Phase x this occured because y was happening:&quot;, code =&gt; UNABLE_TO_PING_SWITCH_ERROR, switch_ip =&gt; $ip3, timeout =&gt; 30);</code>"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467127959, "post_id": 38078832, "comment_id": 63597412, "body": "I will add what the error hash looks like from the library, because that&#39;s where the more detailed error message info get pulled from and then constructed in the new method."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467130116, "post_id": 38080964, "comment_id": 63598801, "body": "okay, but how can ensure that there is a string first? or is that possible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467130718, "post_id": 38080964, "comment_id": 63599204, "body": "@Paul Russell, Well, you said &quot;there will always be an error message string first&quot;, so that&#39;s a rather useless check! /// What&#39;s suppose the point of the check? Validation? That would be unusual, but you could use <code>croak(&quot;usage&quot;) if !@_;</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1467132938, "last_edit_date": 1467132938, "creation_date": 1467129366, "answer_id": 38080964, "question_id": 38078832, "link": "https://stackoverflow.com/questions/38078832/how-to-check-if-the-first-variable-passed-into-a-method-is-a-string-perl/38080964#38080964", "title": "How to check if the first variable passed into a method is a string. Perl", "body": "<p>Supporting all of the following is simple:</p>\n\n<ul>\n<li><code>$class-&gt;new(\"s\")</code></li>\n<li><code>$class-&gt;new(\"s\", code =&gt; \"s\")</code></li>\n<li><code>$class-&gt;new(\"s\", code =&gt; \"s\", switch_ip =&gt; \"s\", timeout =&gt; \"s\")</code></li>\n</ul>\n\n<p>All you need is the following:</p>\n\n<pre><code>sub new {\n   my ($class, $msg, %opts) = @_;\n   ...\n}\n</code></pre>\n\n<p>You can checks such as the following to examine what the called provided:</p>\n\n<pre><code>if (exists($opts{code}))\nif (defined($opts{code}))\nif ($opts{code})\n</code></pre>\n\n<hr>\n\n<p>Despite saying that the string will always be provided, you now ask how to check if was provided. As such, you are probably trying to perform validation rather than polymorphism. You shouldn't waste your time doing this.</p>\n\n<p>Let's look at the hash reference example you gave. <code>ref($arg) eq 'HASH'</code> is wrong. That returns false for some hash references, and it returns false for some things that act like a reference to a hash. The following is a more proper check:</p>\n\n<pre><code>eval { %$arg; 1 }\n</code></pre>\n\n<p>The equivalent for strings would be the following:</p>\n\n<pre><code>eval { \"$arg\"; 1 }\n</code></pre>\n\n<p>Unfortunately, it will always return true! Every value can act as a string. That means the best thing you can do is simply to check if any argument is provided.</p>\n\n<pre><code>use Carp qw( croak );\n\ncroak(\"usage\") if !@_;\n</code></pre>\n\n<p>It's rare for Perl subs to perform argument validation. Not only is it tricky, it's also expensive. It also provides very little benefits. Bad or missing arguments usually results in exceptions or warnings shortly after.</p>\n\n<hr>\n\n<p>You might see suggestions to use <code>croak(\"usage\") if ref($arg);</code> (or worse, <code>die if ref($arg);</code>), but keep in mind that those will cause the rejection of perfectly fine objects that overload stringification (which is somewhat common), and they will fail to detect the problem with <code>ASC::Builder::Error-&gt;new(code =&gt; ...)</code> because <code>code</code> produces a string. Again, performing type-based argument validation is an expensive and buggy practice in Perl.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467208950, "post_id": 38081715, "comment_id": 63637705, "body": "I have kind of followed your solution, and I also realized I do not have to check for a string first too. I do get odd number of elements in hash assignment, but I have handled it like so ex. <code>my $self = delete $options{code};</code> , I think this should work. Thanks for your help."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467131793, "last_edit_date": 1467131793, "creation_date": 1467131714, "answer_id": 38081715, "question_id": 38078832, "link": "https://stackoverflow.com/questions/38078832/how-to-check-if-the-first-variable-passed-into-a-method-is-a-string-perl/38081715#38081715", "title": "How to check if the first variable passed into a method is a string. Perl", "body": "<p></p>\n\n<p>You may easily check only whether the error string is a simple scalar value or a reference. You would do that with <code>ref</code>, but you must consider what you want to do if the first parameter <em>isn't</em> a string</p>\n\n<p>You should write your constructor in the <code>ASC::Builder::Error</code> package along these lines</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sub new {\n    my $class = shift;\n    my ($error, %options) = @_;\n\n    die if ref $error;\n\n    bless { string =&gt; $error }, $class;\n}\n</code></pre>\n\n<p>This example simply dies, and so kills the program, if it is called with anything other than a simple string or number as the first parameter</p>\n\n<p>You may call it as</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ASC::Builder::Error-&gt;new('error')\n</code></pre>\n\n<p>or</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ASC::Builder::Error-&gt;new(42)\n</code></pre>\n\n<p>and all will be well. If you try</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ASC::Builder::Error-&gt;new('message', 'code')\n</code></pre>\n\n<p>then you will see a warning</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Odd number of elements in hash assignment\n</code></pre>\n\n<p>And you may make that warning fatal</p>\n\n<p>If there is anything more then you should explain</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1467208774, "post_id": 38089267, "comment_id": 63637526, "body": "Thank you for this great explanation, I just realized that there is no need to check for a string. it&#39;s not required."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1467223752, "last_edit_date": 1467223752, "creation_date": 1467166675, "answer_id": 38089267, "question_id": 38078832, "link": "https://stackoverflow.com/questions/38078832/how-to-check-if-the-first-variable-passed-into-a-method-is-a-string-perl/38089267#38089267", "title": "How to check if the first variable passed into a method is a string. Perl", "body": "<p>Putting the wisdom of your particular problem aside and channeling Jeff Foxworthy:</p>\n\n<ul>\n<li><p>If you have a scalar and it's not a reference, you might have a string.</p></li>\n<li><p>If your non-reference scalar doesn't look like a number, it might be a string.</p></li>\n<li><p>If your non-reference scalar looks like a number, it can still be a string.</p></li>\n<li><p>If your non-reference scalar has a different string and number value, it might be a dualvar.</p></li>\n</ul>\n\n<p>You know that your argument list is just that: a list. A list is a collection of scalar values. A scalar can be a reference or not a reference. I think you're looking for the not a reference case:</p>\n\n<pre><code>die \"You can't do that\" if ref $first_argument;\n</code></pre>\n\n<p>Past that, you'd have to do fancier things to determine if it's the sort of value that you want. This might also mean that you reject objects that pretend to be strings through overloading and whatnot.</p>\n\n<p>Perhaps you can make the first argument part of the key-value pairs that you pass. You can then access that key to extract the value and delete it before you use the remaining pairs.</p>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 38081715, "answer_count": 3, "score": 0, "last_activity_date": 1467223752, "creation_date": 1467123722, "last_edit_date": 1592644375, "question_id": 38078832, "link": "https://stackoverflow.com/questions/38078832/how-to-check-if-the-first-variable-passed-into-a-method-is-a-string-perl", "title": "How to check if the first variable passed into a method is a string. Perl", "body": "<p>I have no idea how to check for this. My method(if condition in method) should only work (execute) if the first argument passed in is a string. I know how to check other types, but I can't seem to find anything for checking for a string.</p>\n<p>For a hash I would do something like;</p>\n<pre><code>if(ref eq 'HASH') {...}\n</code></pre>\n<p>If someone could provide a simple example I'm sure I would be able to apply it to what I'm doing. I will put up the code for the method and an explanation for the whole operational details of the method if needed.</p>\n<h1>Added Information</h1>\n<p>This is a method for handling different types of errors in the software, here are the 3 possible input formats:</p>\n<pre><code>$class-&gt;new(&quot;error string message&quot;)\n$class-&gt;new(&quot;error string message&quot;, code =&gt; &quot;UNABLE_TO_PING_SWITCH_ERROR&quot;)\n$class-&gt;new(&quot;error string message&quot;, code =&gt; &quot;UNABLE_TO_PING_SWITCH_ERROR&quot;, switch_ip =&gt; $ip3, timeout =&gt; $timeout)\n</code></pre>\n<ul>\n<li><p>There will always be an error message string first.</p>\n</li>\n<li><p>With the 1st case there is also a hashref to an error hash structure that is located in a library,\nthis method new will go into a template processing if the word &quot;code&quot; exists as an arg. where the longer detailed error message is constructed. (I already have the logic for this).</p>\n</li>\n<li><p>But I have to add logic so that the error message string is added to the hash, so the output is one hash, and not strings.</p>\n</li>\n<li><p>The second case is very similar to the first, where there are parameters eg. switch_ip , which are inserted into the string using a similar template processing logic, (already have this too).</p>\n</li>\n<li><p>So I think the first and second cases can be handled in the same way, but I'm not sure, so separated them in this question.</p>\n</li>\n<li><p>The last case is just can error message string by itself, which at the minute I just insert it into a one key message hash { message =&gt; &quot;error string}.</p>\n</li>\n</ul>\n<p>So after all that how should I be checking or dividing up these error cases, At the minute my idea for the ones with code , is to dump the arguments into a hash and just use something like:</p>\n<pre><code> if(exists($param{code}) { doTemplateProcess()...}\n</code></pre>\n<p>I need to ensure that there is a string passed in first though. Which was my original question. Does any of my context information help? I hope I didn't go off the topic of my question, if so I'll open this a new question. Thanks.</p>\n<h1>Error hash - located in Type.pm</h1>\n<pre><code>use constant ERROR_CODE =&gt; {\n     UNABLE_TO_PING_SWITCH_ERROR =&gt; {\n         category =&gt; 'Connection Error:',\n         template =&gt; 'Could not ping switch %s in %s minutes',\n         tt =&gt; {template =&gt; 'disabled'},\n         fatal =&gt; 1,\n         wiki_page =&gt; www.error-solution.com/,\n      },\n }\n</code></pre>\n<hr />\n<h3>From comments:</h3>\n<p>These will be called in the software's code like so</p>\n<pre><code>ASC::Builder::Error-&gt;new(\n    &quot;Phase x this occured because y was happening:&quot;,\n    code      =&gt; UNABLE_TO_PING_SWITCH_ERROR,\n    switch_ip =&gt; $ip3,\n    timeout   =&gt; 30,\n);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5085585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lsb8e.gif?s=128&g=1", "display_name": "Calbrenar", "link": "https://stackoverflow.com/users/5085585/calbrenar"}, "is_accepted": false, "score": 0, "last_activity_date": 1467133089, "creation_date": 1467133089, "answer_id": 38082141, "question_id": 38078759, "link": "https://stackoverflow.com/questions/38078759/converting-an-ldif-into-webseal-group-import-not-printing-properly/38082141#38082141", "title": "Converting an LDIF into WebSEAL Group Import -- &quot; not printing properly", "body": "<p>Had to dos2unix the input file.</p>\n"}], "owner": {"reputation": 31, "user_id": 5085585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lsb8e.gif?s=128&g=1", "display_name": "Calbrenar", "link": "https://stackoverflow.com/users/5085585/calbrenar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467133089, "creation_date": 1467123534, "question_id": 38078759, "link": "https://stackoverflow.com/questions/38078759/converting-an-ldif-into-webseal-group-import-not-printing-properly", "title": "Converting an LDIF into WebSEAL Group Import -- &quot; not printing properly", "body": "<p>I took an LDIF and went through it line by line putting the DN into a variable $line and then matching out the cn into a variable $cn.  </p>\n\n<p>Now I simply want to print out all the lines like this:</p>\n\n<p>group import CNHERE \"DN HERE\" </p>\n\n<p>I should get one statement per each DN in the LDIF.  Instead any time I try to get it to print the \" \" around the $line variable I get the funky output below.</p>\n\n<pre><code>\"roup import CNNAMEHERE \"dn: CN=CNNAMEHERE,OU=Groups,DC=extranet,DC=DOMAIN,DC=com\n</code></pre>\n\n<p>Here is a sample DN line from the file.</p>\n\n<pre><code>dn: CN=CNNAMEHERE,OU=GROUPNAME,OU=Groups,DC=DOMAIN,DC=com\n</code></pre>\n\n<p>I know I could just print it out with a different character then find/replace the file or do a substitution match but I'd really like to know why it's doing this.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen (DATA, \"&lt;exportGroupsEmpty.ldf\") or die (\"Couldn't open file\");\n\nmy $line = \"\";\n\nwhile($line = &lt;DATA&gt;)\n{\n\n  #get DN\n  if ($line =~ m/^dn/)\n  {\n\n    my $cn = \"\";\n    $line =~ m/(dn: CN=)/;\n    $' =~ m/(,)/;\n    $cn = $`;\n    chomp($line);\n\n    print qq(group import $cn \"$line\"\\n);\n    #print $cn;\n    #print \" \" . $line . \"\\n\";\n\n  }\n\n}\n</code></pre>\n"}, {"tags": ["perl", "perlscript"], "comments": [{"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 6, "creation_date": 1467118623, "post_id": 38076798, "comment_id": 63590314, "body": "you can directly write your code in the question."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1467118761, "post_id": 38076798, "comment_id": 63590397, "body": "Looks linke you have to install a nativ library called libXML. Which OS do you use?"}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 0, "creation_date": 1467118933, "post_id": 38076798, "comment_id": 63590518, "body": "you can take all the element in an array and then follow : <b><a href=\"http://stackoverflow.com/questions/3011888/whats-the-most-efficient-way-to-check-for-duplicates-in-an-array-of-data-using\" title=\"whats the most efficient way to check for duplicates in an array of data using\">stackoverflow.com/questions/3011888/&hellip;</a></b> link"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 2, "creation_date": 1467119189, "post_id": 38076798, "comment_id": 63590712, "body": "Instead of adding image for reference, write your code and XML fine in the question. It would be helpful for people who want help you."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1467119394, "post_id": 38076798, "comment_id": 63590881, "body": "where is the title element in you sample file sorry image?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1467119615, "post_id": 38076798, "comment_id": 63591050, "body": "Please don&#39;t post a screenshot of your code. Just post your code. Ideally self contained as an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1467120021, "post_id": 38076798, "comment_id": 63591372, "body": "Please read and become familiar with Stack Overflow, and what sort of questions are acceptable. You should also read <a href=\"http://stackoverflow.com/questions/how-to-ask\"><i>How do I ask a good question?</i></a>. Images are occasionally useful, for instance to show the layout of a graphical display, but in general data and code should be posted as <i>text</i> so that we can copy it to experiment and reproduce the problem ourselves"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467120192, "post_id": 38076798, "comment_id": 63591498, "body": "I don&#39;t think the error is <code>Can&#39;t find LibXML</code>. Please post the <i>full error message</i>. It will include a source file path and a line number."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467120291, "post_id": 38076798, "comment_id": 63591582, "body": "Is this homework? Counting the occurrences of element names isn&#39;t generally a useful thing to do. You are welcome to ask about homework problems, but the nature of the answers should change to help you to learn"}, {"owner": {"reputation": 101, "user_id": 6523377, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/sofJv.jpg?s=128&g=1", "display_name": "S6633d", "link": "https://stackoverflow.com/users/6523377/s6633d"}, "edited": false, "score": 0, "creation_date": 1467176265, "post_id": 38076798, "comment_id": 63616857, "body": "is there any way to do this without using a libXML parser ?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1467192351, "post_id": 38076798, "comment_id": 63625719, "body": "@sureshbalaji it&#39;s a bad idea to avoid using a proper parser. What issues do you have with the answer I gave below?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467120445, "creation_date": 1467120445, "answer_id": 38077580, "question_id": 38076798, "link": "https://stackoverflow.com/questions/38076798/finding-out-duplicate-names-from-an-xml-file/38077580#38077580", "title": "Finding out duplicate names from an xml file", "body": "<p>You probably need to install the <code>XML::LibXML</code> module</p>\n"}, {"tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 0, "last_activity_date": 1467120700, "creation_date": 1467120700, "answer_id": 38077669, "question_id": 38076798, "link": "https://stackoverflow.com/questions/38076798/finding-out-duplicate-names-from-an-xml-file/38077669#38077669", "title": "Finding out duplicate names from an xml file", "body": "<p>You have to install the module <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a>, from the command line:</p>\n\n<pre><code>cpan XML::LibXML\n</code></pre>\n\n<p>Before doing so you need the non perl dependancies this module requires detailed in the <a href=\"https://metacpan.org/source/SHLOMIF/XML-LibXML-2.0126/README\" rel=\"nofollow\">README</a>:</p>\n\n<blockquote>\n  <p>Prior to installation you MUST have installed the libxml2 library. You\n  can get the latest libxml2 version from....</p>\n</blockquote>\n"}], "owner": {"reputation": 101, "user_id": 6523377, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/sofJv.jpg?s=128&g=1", "display_name": "S6633d", "link": "https://stackoverflow.com/users/6523377/s6633d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1467120700, "creation_date": 1467118379, "last_edit_date": 1467119789, "question_id": 38076798, "link": "https://stackoverflow.com/questions/38076798/finding-out-duplicate-names-from-an-xml-file", "title": "Finding out duplicate names from an xml file", "body": "<p>I have an xml file from which I have to find the duplicates.</p>\n\n<p>My XML file looks like this</p>\n\n<p><img src=\"https://i.stack.imgur.com/MEY3I.jpg\" alt=\"Reference XML\"></p>\n\n<p>I want to find the count of all element names</p>\n\n<p>I tried the following code to first take all the names into a text file:</p>\n\n<p><img src=\"https://i.stack.imgur.com/64tBd.jpg\" alt=\"Script I have wrote till now\"></p>\n\n<p>But this throws an error saying <code>Can't find LibXML</code>.</p>\n"}, {"tags": ["mysql", "perl", "bioinformatics"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1467113218, "post_id": 38074123, "comment_id": 63586374, "body": "Useful error message.  Your <code>@DNA</code> has more columns than the corresponding SQL statement knows about.  Find where the SQL statement is defined ( look for $sth4 further up in the code ), and see if you can figure out what to do.  You probably need to change the SQL to accommodate your data size."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1467113934, "post_id": 38074123, "comment_id": 63586877, "body": "You can see what SQL it is trying to run by turning on tracing: <a href=\"http://stackoverflow.com/questions/5885561/dump-prepared-sql-query-from-dbi-statement-in-perl\" title=\"dump prepared sql query from dbi statement in perl\">stackoverflow.com/questions/5885561/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 6522863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81636cd0c36a47d134efa8e5a2765117?s=128&d=identicon&r=PG&f=1", "display_name": "Chris H", "link": "https://stackoverflow.com/users/6522863/chris-h"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1467115425, "post_id": 38074123, "comment_id": 63587939, "body": "Thanks @xxfelixxx, this gives me something to go on."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467116359, "last_edit_date": 1467116359, "creation_date": 1467116016, "answer_id": 38075953, "question_id": 38074123, "link": "https://stackoverflow.com/questions/38074123/dbdmysqlst-execute-failed-called-with-181-bind-variables-when-172-are-neede/38075953#38075953", "title": "DBD::mysql::st execute failed: called with 181 bind variables when 172 are needed", "body": "<p>With 172 placeholders I assume the SQL statement has been produced automatically</p>\n\n<p>You need to look at the code around something like</p>\n\n<pre><code>my $sth4 = $dbh-&gt;prepare(...);\n</code></pre>\n\n<p>which contains 172 placeholders <code>?</code> whereas your statement</p>\n\n<pre><code>my @DNA1 = split (',', $array);\n</code></pre>\n\n<p>results in <code>@DNA1</code> having 181 elements</p>\n\n<p>The problem is in these lines</p>\n\n<pre><code>$array =~ tr/a-z/A-Z/;\n$array =~ s/(...)/$1 /g; \n$array =~ s/\\s+/,/g;\n</code></pre>\n\n<p>which clearly don't do what you think they do</p>\n\n<p>Show the contents of <code>$array</code> (in a new question) and describe the transformation that you really need and we will be able to help</p>\n\n<p>By the way, those are some awful variable names. <code>$array</code> is clearly not an array, and <code>@DBA1</code> is just some .. database list .. thing, and has capital letters for no good reason</p>\n"}], "owner": {"reputation": 1, "user_id": 6522863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81636cd0c36a47d134efa8e5a2765117?s=128&d=identicon&r=PG&f=1", "display_name": "Chris H", "link": "https://stackoverflow.com/users/6522863/chris-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467116359, "creation_date": 1467110901, "last_edit_date": 1467115640, "question_id": 38074123, "link": "https://stackoverflow.com/questions/38074123/dbdmysqlst-execute-failed-called-with-181-bind-variables-when-172-are-neede", "title": "DBD::mysql::st execute failed: called with 181 bind variables when 172 are needed", "body": "<p>I am getting this error</p>\n\n<pre><code>DBD::mysql::st execute failed: called with 181 bind variables when 172 are needed at line 110, &lt;$fh&gt; line 1.\n</code></pre>\n\n<p>I think the problem lies within this section of the code</p>\n\n<pre><code>while ( my $row = &lt;$fh&gt; ) {\n\n    chomp $row;\n\n    my @DNA = split('\\|', $row);  \n\n    my $participant_id = $DNA[0];\n    $participant_id =~ s/\\&gt;//g;\n\n    my $array = $DNA[1];\n\n    my $length = length $array;\n\n    $array =~ tr/a-z/A-Z/;\n    $array =~ s/(...)/$1 /g; \n    $array =~ s/\\s+/,/g;\n\n    my @DNA1 =   split (',', $array);\n    unshift @DNA1, $participant_id;\n\n    $sth4-&gt;execute(@DNA1);  # Line 110  \n}\n\n$sth4-&gt;finish;\n</code></pre>\n"}, {"tags": ["perl", "twitter", "cpan"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1467112879, "post_id": 38073389, "comment_id": 63586132, "body": "If you run <code>perl -v</code> which version do you get? This looks like you&#39;ve got two version of perl installed. Typical culprits are <code>&#47;usr&#47;bin&#47;perl</code> and <code>&#47;usr&#47;local&#47;bin&#47;perl</code> This  script has been explicitly told to use the former."}, {"owner": {"reputation": 53, "user_id": 5694217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03fca0cf8bf2ee4335485c58d4ed7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve W", "link": "https://stackoverflow.com/users/5694217/steve-w"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1467187545, "post_id": 38073389, "comment_id": 63622549, "body": "perl 5, version 20, subversion 2 (v5.20.2)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5694217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03fca0cf8bf2ee4335485c58d4ed7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve W", "link": "https://stackoverflow.com/users/5694217/steve-w"}, "edited": false, "score": 0, "creation_date": 1467187307, "post_id": 38075130, "comment_id": 63622400, "body": "So what do I do?  run from the user account <code>which perl</code> gives me <code>&#47;usr&#47;bin&#47;perl </code> but I have no idea how to fix this?  Not sure how to look at it with cron"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1467187644, "post_id": 38075130, "comment_id": 63622614, "body": "Change the  script - put <code>#!&#47;usr&#47;local&#47;bin&#47;perl</code>. Or <code>&#47;usr&#47;bin&#47;perl -MCPAN -e shell</code> and install the library you need in the the site perl."}, {"owner": {"reputation": 53, "user_id": 5694217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03fca0cf8bf2ee4335485c58d4ed7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve W", "link": "https://stackoverflow.com/users/5694217/steve-w"}, "edited": false, "score": 0, "creation_date": 1467188167, "post_id": 38075130, "comment_id": 63622946, "body": "<code>#!&#47;usr&#47;local&#47;bin&#47;perl</code> at the top of the file gives me <code>-bash: .&#47;speedtest.pl: &#47;usr&#47;bin&#47;local&#47;perl: bad interpreter: No such file or directory</code> when I run the file with <code>.&#47;speedtest.pl</code>. <code>&#47;usr&#47;bin&#47;perl -MCPAN -e shell</code> followed by <code>install Net::Twitter, tells me &#39;Net::Twitter is up to date (4.01020)</code>."}, {"owner": {"reputation": 53, "user_id": 5694217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03fca0cf8bf2ee4335485c58d4ed7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve W", "link": "https://stackoverflow.com/users/5694217/steve-w"}, "edited": false, "score": 0, "creation_date": 1467189479, "post_id": 38075130, "comment_id": 63623805, "body": "<code>sudo find &#47; -name Twitter.pm</code> gives:-  <code>&#47;home&#47;pi&#47;perl5&#47;lib&#47;perl5&#47;Net&#47;Twitter.pm</code> <code>&#47;home&#47;pi&#47;.cpanm&#47;work&#47;1467024190.19006&#47;Net-Twitter-4.01020&#47;li&zwnj;&#8203;b&#47;Net&#47;Twitter.pm</code> <code>&#47;home&#47;pi&#47;.cpanm&#47;work&#47;1467024190.19006&#47;Net-Twitter-4.01020&#47;bl&zwnj;&#8203;ib&#47;lib&#47;Net&#47;Twitter.p&zwnj;&#8203;m</code>"}, {"owner": {"reputation": 53, "user_id": 5694217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03fca0cf8bf2ee4335485c58d4ed7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve W", "link": "https://stackoverflow.com/users/5694217/steve-w"}, "edited": false, "score": 0, "creation_date": 1467190786, "post_id": 38075130, "comment_id": 63624657, "body": "Added <code>use lib &#39;&#47;home&#47;pi&#47;perl5&#47;lib&#47;perl5&#47;&#39;;</code> before <code>use Net::Twitter</code> seems to make it run with crontab,  I suspect that this is not the right way to do it but it seems to work"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467113720, "creation_date": 1467113720, "answer_id": 38075130, "question_id": 38073389, "link": "https://stackoverflow.com/questions/38073389/crontab-and-perl/38075130#38075130", "title": "Crontab and perl", "body": "<p>The Perl installation that you run from the command line is different from the one run by the system when a crontab job executes</p>\n\n<p>Try <code>which perl</code>, and then look at the output of the same command run under cron</p>\n\n<p>There are a few ways to fix this, depending on the configuration of your system. The most obvious is to use the full path to your own copy of perl, but while that will probably get things going it is probably a bad idea</p>\n"}, {"tags": [], "owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "is_accepted": false, "score": 1, "last_activity_date": 1467204812, "creation_date": 1467204812, "answer_id": 38100189, "question_id": 38073389, "link": "https://stackoverflow.com/questions/38073389/crontab-and-perl/38100189#38100189", "title": "Crontab and perl", "body": "<p>I think you may have installed Net::Twitter using your local account.\nLogging into root &amp; installing the module should fix this problem.</p>\n"}], "owner": {"reputation": 53, "user_id": 5694217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03fca0cf8bf2ee4335485c58d4ed7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve W", "link": "https://stackoverflow.com/users/5694217/steve-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467204812, "creation_date": 1467108898, "last_edit_date": 1467113486, "question_id": 38073389, "link": "https://stackoverflow.com/questions/38073389/crontab-and-perl", "title": "Crontab and perl", "body": "<p>I have an issue with a Perl script and the CPAN Twitter module.</p>\n\n<p>I have a script that runs speedtest, and am trying to post the result to Twitter.</p>\n\n<p>I have managed to get my script running manually by running ./speedtest.pl from my user account, however when I try and run it using crontab I get an error.</p>\n\n<p>I have installed <a href=\"https://metacpan.org/pod/Net::Twitter\" rel=\"nofollow\"><code>Net::Twitter</code></a>, <a href=\"https://metacpan.org/pod/File::HomeDir\" rel=\"nofollow\"><code>File::HomeDir</code></a> and <a href=\"https://metacpan.org/pod/Config::Tiny\" rel=\"nofollow\"><code>Config::Tiny</code></a> using </p>\n\n<pre><code>cpanm Net::Twitter\n</code></pre>\n\n<p>etc.</p>\n\n<p>(Note: no sudo) I get the following error when I run my script from my local crontab:-</p>\n\n<pre><code>Can't locate Net/Twitter.pm in @INC (you may need to install the \nNet::Twitter module) (@INC contains: /etc/perl /usr/local/lib/arm-linux-\ngnueabihf/perl/5.20.2 /usr/local/share/perl/5.20.2 /usr/lib/arm-linux-\ngnueabihf/perl5/5.20 /usr/share/perl5 /usr/lib/arm-linux-gnueabihf\n/perl/5.20 /usr/share/perl/5.20 /usr/local/lib/site_perl .) at /home/pi\n/speedtest.pl line 99.\nBEGIN failed--compilation aborted at /home/pi/speedtest.pl line 99.\n</code></pre>\n\n<p>Can someone please point me in the right direction? I suspect it has something to do with where <code>Net::Twitter</code> etc ended up but I've no idea how to fix it so that crontab knows where to find it.</p>\n\n<p><a href=\"http://stevewright.nz/speedtest.pl\" rel=\"nofollow\"><code>speedtest.pl</code> is here</a></p>\n"}, {"tags": ["arrays", "algorithm", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467106453, "post_id": 38071518, "comment_id": 63581994, "body": "Is this casual programming / a puzzle?"}, {"owner": {"reputation": 436, "user_id": 3452396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb7fab90063fb24cb4e28eee10177e11?s=128&d=identicon&r=PG&f=1", "display_name": "Tejash Desai", "link": "https://stackoverflow.com/users/3452396/tejash-desai"}, "edited": false, "score": 1, "creation_date": 1467107198, "post_id": 38071518, "comment_id": 63582485, "body": "should it not remove 8 so that the resulting number is even lesser than when you removed 3?"}, {"owner": {"reputation": 115, "user_id": 3807714, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/a2d09872d30b27dd2329ec0304fa558c?s=128&d=identicon&r=PG&f=1", "display_name": "Meticulous", "link": "https://stackoverflow.com/users/3807714/meticulous"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467109498, "post_id": 38071518, "comment_id": 63584006, "body": "@Borodin, It is a puzzle. @Tejash, Actually the result should be: <code>0221</code>, but my program outputs <code>0321</code>."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 1, "creation_date": 1467109528, "post_id": 38071518, "comment_id": 63584026, "body": "I don&#39;t understand the problem. In the given example, there are <code>9 digits</code> in input number and you have to remove <code>5</code> of them? In that case, remove <code>76583</code>, so resulting number will be <code>0221</code> which is lowest. Or am I missing something?"}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1467109619, "post_id": 38071518, "comment_id": 63584081, "body": "And, can you mention the constraints, like length of input (number) string, etc."}], "answers": [{"tags": [], "owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "is_accepted": false, "score": -2, "last_activity_date": 1467110157, "creation_date": 1467110157, "answer_id": 38073844, "question_id": 38071518, "link": "https://stackoverflow.com/questions/38071518/build-lowest-number-by-removing-n-digits-from-a-given-number/38073844#38073844", "title": "Build Lowest Number by Removing n digits from a given number", "body": "<p>A possible solution can be:</p>\n\n<ol>\n<li><p>Create an array having count of all digits, eg. in your case, this array will look like: <code>1,1,2,1,0,1,1,1,1,0</code></p></li>\n<li><p>Then, in a greedy manner, remove all <code>big</code> digits, as many as can be done. So, you remove 9s, but since its count is 0, you still need to remove 5 digits. Remove 8s, so you still need to remove 4 digits and so on.</p></li>\n<li><p>This case is kind of trivial, so you will be left with <code>2 2's, 1 1's and 1 0's</code>. In there were, say <code>3 4's</code> also in the number, you will then need to remove 1 4. So, you will remove the leftmost of partial removals required.</p></li>\n</ol>\n\n<p>Its a greedy approach, and works in O(n).</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 3807714, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/a2d09872d30b27dd2329ec0304fa558c?s=128&d=identicon&r=PG&f=1", "display_name": "Meticulous", "link": "https://stackoverflow.com/users/3807714/meticulous"}, "edited": false, "score": 0, "creation_date": 1467144621, "post_id": 38080507, "comment_id": 63607163, "body": "I have thought of another possible solution now that does this: Repeat d times(number of digits to delete): 1. Start traversing the array and find a pair of <code>int</code>s such that the first is greater than the other and remove it. 2. If not keep traversing and remove the last element you reach. 3. Repeat from step 1 on the newly formed number."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 115, "user_id": 3807714, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/a2d09872d30b27dd2329ec0304fa558c?s=128&d=identicon&r=PG&f=1", "display_name": "Meticulous", "link": "https://stackoverflow.com/users/3807714/meticulous"}, "edited": false, "score": 0, "creation_date": 1467152521, "post_id": 38080507, "comment_id": 63610734, "body": "I think it would work, and the code would be shorter."}, {"owner": {"reputation": 115, "user_id": 3807714, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/a2d09872d30b27dd2329ec0304fa558c?s=128&d=identicon&r=PG&f=1", "display_name": "Meticulous", "link": "https://stackoverflow.com/users/3807714/meticulous"}, "edited": false, "score": 0, "creation_date": 1467202815, "post_id": 38080507, "comment_id": 63632888, "body": "Yeah I hope. Thanks for your reply though!"}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 1, "last_activity_date": 1467128060, "creation_date": 1467128060, "answer_id": 38080507, "question_id": 38071518, "link": "https://stackoverflow.com/questions/38071518/build-lowest-number-by-removing-n-digits-from-a-given-number/38080507#38080507", "title": "Build Lowest Number by Removing n digits from a given number", "body": "<p>I think, the algorithm is straightforward:  </p>\n\n<p>Suppose, N is the number of digits to delete;<br>\n1. Find the first smallest digit in the first N digits, delete digits to the left of it, decrease N by the number of digits deleted.<br>\n2. if N>0 take the digits to the right and repeat the steps above.<br>\nOf course, we need to check for marginal cases, and to ensure the final number does not start with 0.<br>\nHere is the code draft: </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy ($number, $del)=@ARGV;\nmy @num = $number=~m{.}g;\nmy $curpos=0;\nmy @finalnum;\nfor(;;) {\n  last if $del &lt;=0 || $curpos+$del&gt;=@num;\n  my $minpos=$curpos;\n  for (my $i=$curpos;$i&lt;$curpos+$del+1 &amp;&amp; $i &lt; @num;$i++) {\n    if ($num[$i]&lt;$num[$minpos] &amp;&amp; !($curpos==0 &amp;&amp; $num[$i]==0)) {\n      $minpos=$i;\n    }\n  }\n  push @finalnum, $num[$minpos];\n  $del-=($minpos-$curpos);\n  $curpos=$minpos+1;\n}\npush @finalnum, @num[$curpos+$del..$#num] if $curpos+$del &lt; @num;\nprint join '', @finalnum;\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 3807714, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/a2d09872d30b27dd2329ec0304fa558c?s=128&d=identicon&r=PG&f=1", "display_name": "Meticulous", "link": "https://stackoverflow.com/users/3807714/meticulous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1762, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467128060, "creation_date": 1467104172, "question_id": 38071518, "link": "https://stackoverflow.com/questions/38071518/build-lowest-number-by-removing-n-digits-from-a-given-number", "title": "Build Lowest Number by Removing n digits from a given number", "body": "<p>It takes as input a number(string) and then the task is to remove n numbers to give a resulting lowest possible number, but you have to take care of the order, that is the constraint. You cannot change the order of the original numbers.</p>\n\n<p>I wanted it to work in O(n), so I did this:</p>\n\n<pre><code>#!/usr/bin/perl\n#lowestNS.pl\n#Date: 2016-06-28\n\nuse warnings;\nuse strict;\nuse utf8;\n\n(@ARGV == 2) or die \"2 args needed\";\nmy $num = $ARGV[0];\nmy $d = $ARGV[1];\nmy @arr;\n\nint($num) &gt; 0 or die \"Enter positive number\";\n\nprint \"Number in: $num\\nDel: $d\\n\";\n\nif(int($num) == 0) {\n    print \"Result: 0\\n\";\n    exit;\n}\nelse {\n    my $str = $num;\n    @arr = split(//, $str); #/Split on each number\n    #Split and multiply by reverse index, to give precedence to the order of numbers\n    for(my $i = 0; $i &lt; @arr; $i++) {\n        $arr[$i] *= (@arr - $i);\n    }\n}\n\nprint \"arr: \" . join(',' , @arr) . \"\\n\";\n\nfor (my $j = 0; $j &lt; $d; $j++) {\n    my $max = $arr[0];\n    my $m_index = -1;\n\n    #replace nth maximum with -1\n\n    for (my $i = 0; $i &lt; @arr; $i++) {\n        if($max &lt;= $arr[$i]) {\n            $max = $arr[$i];\n            $m_index = $i;\n        }\n    }\n    $arr[$m_index] = -1;\n}\n\n\n#return all numbers with value other than -1\n\nmy $result = \"\";\n\nfor (my $i = 0; $i &lt; @arr; $i++) {\n    if($arr[$i] != -1){\n        $result = $result . \"\" . $arr[$i]/(@arr - $i);\n    }\n}\n\nprint \"Result: $result\\n\";\n</code></pre>\n\n<p>It works in all cases, except, cases like: <br>\n<code>Number = 765028321</code>\n<code>Delete = 5</code> <br>\nThe problem is the removal of 7650<code>2</code>8321 when it should have removed the 765028<code>3</code>21.<br>\nbecause 2*5 > 3*3.</p>\n"}, {"tags": ["perl", "data-dumper"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 4, "creation_date": 1467100550, "post_id": 38069913, "comment_id": 63578178, "body": "Which part is unexpected?  Data::Dumper correctly identifies that there are multiple references to the same hash reference, and helpfully shows it."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1467103624, "post_id": 38069913, "comment_id": 63580082, "body": "@tripleee : I understand that Dumper is showing multiple references to the same reference.What I was expecting to see is full details of the hash of hash instead of the reference.Maybe my understanding of the output was slightly misplaced.Thanks for the clarification."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1467104015, "post_id": 38069913, "comment_id": 63580326, "body": "I am writing a longish explanation..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1467105259, "post_id": 38069913, "comment_id": 63581202, "body": "@AbhiNickz please do not use inline code formatting to highlight arbitrary words just because they look technical. Important terms or names can be emphasized using <i>italic</i>. Variable names, function names and other obvious pieces of code should be marked as <code>code</code>. Names of modules are generally just written without formatting here on the Perl tag on SO, like Data::Dumper.  I&#39;ve reversed your edit because it didn&#39;t improve the post."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1467106289, "post_id": 38069913, "comment_id": 63581873, "body": "Okay, Got it, but when i only changed the formatting in code, It displayed the error for minimum character change requirement so that&#39;s why I highlighted arbitrary words."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 1, "creation_date": 1467193163, "post_id": 38069913, "comment_id": 63626337, "body": "@AbhiNickz that&#39;s because your edit was too minor. Editing is useful, but you should always try to make the post better. Improve as much as you can, but don&#39;t just change stuff around. The <a href=\"http://stackoverflow.com/posts/38069913/revisions\">revision history is public</a>. Everyone can see what you did. You can read about the [later edit privilege at 2k rep] (<a href=\"http://stackoverflow.com/help/privileges/edit\">stackoverflow.com/help/privileges/edit</a>) and about <a href=\"http://stackoverflow.com/help/editing\">editing in general</a>. There are also various discussions on meta. <a href=\"http://meta.stackoverflow.com/q/253326/1331451\">This one</a> is nicely broad."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 6, "creation_date": 1467106994, "post_id": 38071589, "comment_id": 63582335, "body": "Very nice explanation. But if you set <code>$Data::Dumper::Deepcopy=1</code> then Data::Dumper will also avoid the references and print the real data twice."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "edited": false, "score": 0, "creation_date": 1467108438, "post_id": 38071589, "comment_id": 63583348, "body": "Really exhaustive and wonderful explanation.Thanks for the clarification and the effort."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1467104750, "last_edit_date": 1495540348, "creation_date": 1467104381, "answer_id": 38071589, "question_id": 38069913, "link": "https://stackoverflow.com/questions/38069913/unexpected-output-from-perl-dumper/38071589#38071589", "title": "Unexpected output from Perl Dumper", "body": "<p>As <a href=\"https://stackoverflow.com/questions/38069913/unexpected-output-from-perl-dumper#comment63578178_38069913\">tripleee says in their comment</a>, this is not wrong. I agree it might be unexpected. It happens because you are using the same reference several times in a data structure. It's due to how Perl's references work.</p>\n\n<p><strong>A short overview of references in Perl</strong> </p>\n\n<p>References are explained in <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>, <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>, <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a> and <a href=\"http://perldoc.perl.org/perllol.html\" rel=\"nofollow noreferrer\">perllol</a>. </p>\n\n<p>As soon as you have a data structure with more than one level in Perl, all levels after the first level are stored as references. The <code>-&gt;</code> operator is used to dereference them. Perls turns them back into hashes or arrays. You are basically traversing a data structure if you say <code>$foo-&gt;{bar}-&gt;{baz}</code> to get to the inner value.</p>\n\n<p>If you set <code>$foo-&gt;{bar}-&gt;{baz} = 123</code> directly, Perl will create all those references for you automagically. But you can also make references yourself.</p>\n\n<pre><code>my @numbers = (42, 23, 1337);\nmy $ref = \\@numbers;\n\nprint Dumper $ref;\n\n__END__\n$VAR1 = [ 42, 23, 1337 ]\n</code></pre>\n\n<p>This is a single reference to that array. If you use it more than once in the same data structure, it will show that.</p>\n\n<pre><code>my $hash = { \n    foo =&gt; $ref, \n    bar =&gt; $ref,\n};\n\n__END__\n\n$VAR1 = {\n      'foo' =&gt; [\n                 42,\n                 23,\n                 1337\n               ],\n      'bar' =&gt; $VAR1-&gt;{'foo'}\n};\n</code></pre>\n\n<p>Looks the same as your example, right? Let's try something else. If you print a reference in scalar context, Perl will tell you its address.</p>\n\n<pre><code>print \"$ref\";\n\n__END__\nARRAY(0x25df7b0)\n</code></pre>\n\n<p>We've all seen that, and we've all thought <em>something is seriously wrong</em> when we first saw it. Let's go back to our <code>$hash</code> from above.</p>\n\n<pre><code>say $hash-&gt;{foo};\nsay $hash-&gt;{bar};\n\n__END__\nARRAY(0x16257b0)\nARRAY(0x16257b0)\n</code></pre>\n\n<p>As you can see, it's the same address, because it's the same data structure.</p>\n\n<p><strong>Other Perl serializers</strong></p>\n\n<p>This is what your data structure looks with <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a>. </p>\n\n<pre><code>do {\n  my $a = {\n    bugAttributes =&gt; {\n      111 =&gt; { profiles =&gt; { profile1 =&gt; \"default1\" }, totalEffort =&gt; 0 },\n      222 =&gt; { profiles =&gt; 'fix', totalEffort =&gt; 0 },\n      333 =&gt; { profiles =&gt; 'fix', totalEffort =&gt; 0 },\n    },\n  };\n  $a-&gt;{bugAttributes}{222}{profiles} = $a-&gt;{bugAttributes}{111}{profiles};\n  $a-&gt;{bugAttributes}{333}{profiles} = $a-&gt;{bugAttributes}{111}{profiles};\n  $a;\n}\n1\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\">Data::Dump</a> is meant for creating output that is both human readable and can be put back into Perl. It's a bit more concise than <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a>. You can see that it also shows the values that are used more than once in your data structure.</p>\n\n<p>And this is what <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a> does to it.</p>\n\n<pre><code>\\ {\n    bugAttributes   {\n        111   {\n            profiles      {\n                profile1   \"default1\"\n            },\n            totalEffort   0\n        },\n        222   {\n            profiles      var{bugAttributes}{111}{profiles},\n            totalEffort   0\n        },\n        333   {\n            profiles      var{bugAttributes}{111}{profiles},\n            totalEffort   0\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a> is meant for human consumption only. You cannot run this as code, but instead it's meant to be easily readable. Again, it also shows that stuff is reused inside of the data structure.</p>\n\n<p>The conclusion from all of this is that those serializers do that because it is not easy to show that something is reused. Not even when you say it in Perl. </p>\n\n<p><strong>Why you can't see the whole data structure</strong></p>\n\n<p>If Perl would omit the fact that there are parts of the data structure that have been reused, the serialization would not be reversible. The result of reading it back in would be something else. That's of course not what you would do.</p>\n\n<p><strong>Serialization without reusing</strong></p>\n\n<p>To show that your data is in fact not lost and this is really just a way to show (and port) that things are reused inside of the data structure, I have converted it to JSON using the <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\">JSON module</a>, which is a portable format that can be used with Perl, but that <em>is not Perl</em>.</p>\n\n<pre><code>use JSON 'encode_json';\nsay JSON-&gt;new-&gt;pretty-&gt;encode( $phBugsRec);\n</code></pre>\n\n<p>Here is the result. It looks more like what you expected.</p>\n\n<pre><code>{\n   \"bugAttributes\" : {\n      \"333\" : {\n         \"profiles\" : {\n            \"profile1\" : \"default1\"\n         },\n         \"totalEffort\" : 0\n      },\n      \"111\" : {\n         \"totalEffort\" : 0,\n         \"profiles\" : {\n            \"profile1\" : \"default1\"\n         }\n      },\n      \"222\" : {\n         \"profiles\" : {\n            \"profile1\" : \"default1\"\n         },\n         \"totalEffort\" : 0\n      }\n   }\n}\n</code></pre>\n\n<p>That's because JSON is meant to be a portable format. It's for moving data around. There is <a href=\"http://www.json.org/\" rel=\"nofollow noreferrer\">an agreement on what it can contain</a>, and reusing data ist not part of that. Not every language that implements reading and writing JSON supports reuse of partial data structures<sup>1</sup>.</p>\n\n<p>It would also just be printed twice if we would convert to YAML or XML.</p>\n\n<p><sup>1) I don't have proof for that, but it gets the point accross</sup></p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1467192541, "post_id": 38072997, "comment_id": 63625851, "body": "I gave up using Data::Dumper about two years ago. Nowadays I only use Data::Printer for debugging, and I avoid using Data::Dumper for sharing data as well. That&#39;s what JSON and co are for. Or Sereal, or Freeze/Thaw. Anyway, nice find. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1467197129, "post_id": 38072997, "comment_id": 63628985, "body": "Oh. Well. I think in Cluj it&#39;s more likely you get your blood sucked out by Dracula. Next year&#39;s German Perl Workshop it is, then. Probably in Hamburg."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1467107886, "creation_date": 1467107886, "answer_id": 38072997, "question_id": 38069913, "link": "https://stackoverflow.com/questions/38069913/unexpected-output-from-perl-dumper/38072997#38072997", "title": "Unexpected output from Perl Dumper", "body": "<p>Use</p>\n\n<pre><code>$Data::Dumper::Deepcopy = 1;\nprint Dumper($phBugsRec);\n</code></pre>\n\n<p>From the <a href=\"http://perldoc.perl.org/Data/Dumper.html#Configuration-Variables-or-Methods\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <ul>\n  <li><p>$Data::Dumper::Deepcopy or $OBJ->Deepcopy([NEWVAL])</p>\n  \n  <p>Can be set to a boolean value to enable deep copies of structures. Cross-referencing will then only be done when absolutely essential (i.e., to break reference cycles). Default is 0.</p></li>\n  </ul>\n</blockquote>\n\n<p>Output is then:</p>\n\n<pre><code>$VAR1 = {\n  'bugAttributes' =&gt; {\n       '222' =&gt; {\n          'totalEffort' =&gt; 0,\n          'profiles' =&gt; {\n                          'profile1' =&gt; 'default1'\n                        }\n                },\n       '333' =&gt; {\n          'profiles' =&gt; {\n                          'profile1' =&gt; 'default1'\n                        },\n          'totalEffort' =&gt; 0\n                },\n       '111' =&gt; {\n          'profiles' =&gt; {\n                          'profile1' =&gt; 'default1'\n                        },\n          'totalEffort' =&gt; 0\n                }\n     }\n};\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 1, "accepted_answer_id": 38071589, "answer_count": 2, "score": 1, "last_activity_date": 1467107886, "creation_date": 1467099408, "last_edit_date": 1467104965, "question_id": 38069913, "link": "https://stackoverflow.com/questions/38069913/unexpected-output-from-perl-dumper", "title": "Unexpected output from Perl Dumper", "body": "<p>I was trying to assign one hash to another when I came across this unexpected situation.</p>\n\n<p>I was printing the dumper to validate if the hash is formed correctly.</p>\n\n<p>The Data::Dumper does provide the expected output when I iterate though the hash but it show some unexpected result when I print the entire hash.</p>\n\n<p>Please see the code snippet below. Any insight will be a great help.</p>\n\n<pre><code>my (@aBugs) = (111,222,333);\nmy $phBugsRec;\nmy $phProfiles;\n$phProfiles-&gt;{profiles} = { 'profile1' =&gt; 'default1' };\n</code></pre>\n\n<p>Forming the final hash:</p>\n\n<pre><code>foreach my $pBugNo(@aBugs){\n    $phBugsRec-&gt;{bugAttributes}{$pBugNo}{totalEffort} = 0;\n    $phBugsRec-&gt;{bugAttributes}{$pBugNo}{profiles}    = $phProfiles-&gt;{profiles};\n}\n</code></pre>\n\n<p>If I dump the entire hash, I am not getting the expected output:</p>\n\n<pre><code>print '&lt;pre&gt;'.Dumper($phBugsRec).'&lt;/pre&gt;';\n</code></pre>\n\n<hr>\n\n<pre><code>$VAR1 = {\n    'bugAttributes' =&gt; {\n        '333' =&gt; {\n            'totalEffort' =&gt; 0,\n            'profiles' =&gt; {\n                'profile1' =&gt; 'default1'\n            }\n        },\n        '111' =&gt; {\n            'totalEffort' =&gt; 0,\n            'profiles' =&gt; $VAR1-&gt;{'bugAttributes'}{'333'}{'profiles'}\n        },\n        '222' =&gt; {\n            'totalEffort' =&gt; 0,\n            'profiles' =&gt; $VAR1-&gt;{'bugAttributes'}{'333'}{'profiles'}\n        }\n    }\n};\n</code></pre>\n\n<p>But when I iterate over the hash, I get the expected output </p>\n\n<pre><code>foreach (sort keys $phBugsRec-&gt;{bugAttributes}){\n    print '&lt;pre&gt;'.$_.':'.Dumper($phBugsRec-&gt;{bugAttributes}{$_}).'&lt;/pre&gt;';\n}\n</code></pre>\n\n<hr>\n\n<pre><code>111:$VAR1 = {\n  'totalEffort' =&gt; 0,\n  'profiles' =&gt; {\n    'profile1' =&gt; 'default1'\n  }\n};\n222:$VAR1 = {\n  'totalEffort' =&gt; 0,\n  'profiles' =&gt; {\n    'profile1' =&gt; 'default1'\n  }\n};\n333:$VAR1 = {\n  'totalEffort' =&gt; 0,\n  'profiles' =&gt; {\n    'profile1' =&gt; 'default1'\n  }\n};\n</code></pre>\n"}, {"tags": ["arrays", "xml", "perl", "csv"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1467098468, "post_id": 38069467, "comment_id": 63576904, "body": "The <code>getline</code> method returns an <i>arrayref</i> -- just as you say, you are seeing a reference to an array.  You need <code>my @rows = @$row</code>, to <i>dereference</i> that into an array.  As for the rest, can you post a file (<code>b.txt</code>) that I can test with?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1467100994, "post_id": 38069467, "comment_id": 63578461, "body": "Will also need <code>output.xml</code>, unless you mean to write it from scratch (but then the code for it is wrong)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467102719, "post_id": 38069467, "comment_id": 63579486, "body": "You&#39;ve really written far too much code before you started testing, ending up with a lot of confused ideas and trial code that obfuscate the overall program. You should start by writing just a few lines that extract the values from the CSV and no more. Also, <i>always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of every Perl program. Don&#39;t use an ampersand <code>&amp;</code> when calling subroutines: just <code>buildXML()</code> is correct, and whatever resource you are using to learn Perl is very out of date if it tells you otherwise."}, {"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467103068, "post_id": 38069467, "comment_id": 63579740, "body": "@zdim I am building it from scratch. There is a sub buildXML. It builds a very simple structure. I will add it to my original question."}], "answers": [{"comments": [{"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467100304, "post_id": 38069658, "comment_id": 63578039, "body": "Thank you so far, but i am now getting the whole rows, instead of the one value i wanted to get."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 1, "creation_date": 1467103349, "post_id": 38069658, "comment_id": 63579926, "body": "@UsefulUserName  I&#39;ve added to the code, to get to all elements for the CSV and print them out, so you can see how it&#39;s packed.  As for XML, it&#39;s be nice to have <code>output.xml</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467104854, "post_id": 38069658, "comment_id": 63580878, "body": "@UsefulUserName  Thank you for the xml template.  I&#39;ve added the XML part to the code, now it&#39;s processing the whole thing. It does build the <code>output.xml</code>, but I don&#39;t know whether it is exactly what you want (looks reasonable)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467157351, "post_id": 38069658, "comment_id": 63612239, "body": "@UsefulUserName I am certain I posted a comment to you here but now it&#39;s gone (?).  Sorry if this repeats -- the code above has been cleaned up considerably.  For one thing, your code calls <code>new</code> <i>twice</i> and this shouldn&#39;t be done. This now is far simpler, as it should be.  As for XML, it only does exactly what you have already in the question."}, {"owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467194141, "post_id": 38069658, "comment_id": 63627022, "body": "This works fine for me and I am using this solutions since it leaves me some options that I need for other things I am working on."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "edited": false, "score": 0, "creation_date": 1467194718, "post_id": 38069658, "comment_id": 63627419, "body": "@UsefulUserName  Great, thanks for feedback. I did mean to leave it as close as possible to how you had it so that you can carry on with what you were doing."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1511931554, "last_edit_date": 1511931554, "creation_date": 1467098690, "answer_id": 38069658, "question_id": 38069467, "link": "https://stackoverflow.com/questions/38069467/iterating-through-csv-and-creating-an-xml-file/38069658#38069658", "title": "Iterating through CSV and creating an XML file", "body": "<p>The <a href=\"http://search.cpan.org/~makamaka/Text-CSV-1.33/lib/Text/CSV.pm#getline\" rel=\"nofollow noreferrer\"><code>getline</code></a> method of <code>Text::CSV</code> returns an arrayref</p>\n\n<blockquote>\n  <p>It reads a row from the IO object $io using $io->getline () and parses this row into an array ref.</p>\n</blockquote>\n\n<p>The <code>ARRAY(0x35e9360)</code> is indeed what you get when you print out array reference. This is usual, many parsers normally return a reference to an array for a row. So you need to dereference that, generally by <code>@{$arrayref}</code>, but in this case there is no ambiguity and one can drop the curlies, <code>@$arrayref</code>.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Text::CSV_XS;\nuse XML::Twig;\n\nmy $csv = Text::CSV_XS-&gt;new (\n    { binary =&gt; 1, sep_char =&gt; '|',  allow_loose_quotes =&gt; 1 }\n) or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag();\n\nmy $t = XML::Twig-&gt;new(pretty_print =&gt; 'indented');\n$t-&gt;parsefile('output.xml');\nmy $out_file = 'output.xml';\nopen my $fh_out, '&gt;&gt;', $out_file  or die \"Can't open $out_file for append: $!\";\nmy $root = $t-&gt;root;\n\nmy $file = 'b.txt';\nopen my $fh, \"&lt;:encoding(UTF-8)\", $file  or die \"Can't open $file: $!\";\n\nwhile (my $rowref = $csv-&gt;getline($fh)) {\n    #my @cols = @$rowref;\n    #print \"@cols\\n\";\n\n    my $builds = $root-&gt;first_child();  # get the builds node\n    my $xcr = $builds-&gt;first_child();   # get the xcr node\n    my $xcrCopy = $xcr-&gt;copy();         # copy the xcr node\n    $xcrCopy-&gt;paste('after', $xcr);     # paste the xcr node\n    $xcr-&gt;set_att(id =&gt; $rowref-&gt;[0]);  # or $cols[0];\n\n    print $fh_out $t-&gt;sprint();\n}\n</code></pre>\n\n<p>This prints (when <code>@cols</code> and its print are uncommented) for the CSV file</p>\n\n<pre>\nID Name Pos\n1 a 265\n2 b 950\n...\n</pre>\n\n<p>So we've read the file OK.</p>\n\n<p>The XML processing is copied from the question, except for the part that uses the CSV value. We take the first element of the current row, which is <code>$rowref-&gt;[0]</code> since <code>$rowref</code> is a reference.  (Or use an element from the dereferenced array, <code>$cols[0]</code>.)</p>\n\n<p>I don't know what output is expected but it is built out of the template and seems OK for this code.</p>\n\n<hr>\n\n<p>Note.  A single element of an array is a scalar, thus it bears a <code>$</code> -- so, \n<code>$cols[0]</code>.  If you were to extract multiple columns you could use an <em>array slice</em>, in which case the result is an array so it needs the <code>@</code>, for example <code>@cols[0,2]</code> is an array with the first and third element.  This can then be assigned to a list, for example <code>my ($c1, $c3) = @cols[0,2];</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1467554442, "last_edit_date": 1467554442, "creation_date": 1467105440, "answer_id": 38072032, "question_id": 38069467, "link": "https://stackoverflow.com/questions/38069467/iterating-through-csv-and-creating-an-xml-file/38072032#38072032", "title": "Iterating through CSV and creating an XML file", "body": "\n\n<p>This program appears to do as you require</p>\n\n<p>Links:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow\"><code>Text::CSV</code></a></li>\n<li><a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a></li>\n</ul>\n\n<p>After reverse-engineering your code to discover your what you're aiming for, I find that it's really a fairly simply problem. It would have helped a lot if you had explained your intention in terms of adding a new <code>xcr</code> element for each line in the CSV file, with attributes corresponding to the columns</p>\n\n<p>It's likely that you don't need the XML template file at all, or perhaps just the template <code>xcr</code> element with empty attributes is superfluous? I also wonder if you want to skip the header line from the CSV file? These changes are trivial, but I have left the code in the simplest state possible</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use utf8;\nuse strict;\nuse warnings 'all';\nuse autodie;\n\nuse Text::CSV;\nuse XML::Twig;\nuse Encode;\n\nuse constant XML_FILE =&gt; 'output.xml';\nuse constant CSV_FILE =&gt; 'b.txt';\n\nbuild_xml(XML_FILE);\n\nmy $csv = Text::CSV-&gt;new( {\n    sep_char           =&gt; '|',\n    binary             =&gt; 1,\n    allow_loose_quotes =&gt; 1,   # This is brought forward. Probably unnecessary\n} );\n\nmy $t = XML::Twig-&gt;new(\n    pretty_print =&gt; 'indented',\n);\n\n$t-&gt;parsefile(XML_FILE);\nmy ($xcr) = $t-&gt;findnodes('/project/builds/xcr');\n\nopen my $fh, '&lt;:encoding(utf8)', CSV_FILE;\n\nwhile ( my $row = $csv-&gt;getline($fh) ) {\n\n    my ($id, $name, $pos) = @$row;\n\n    my $xcr_copy = $xcr-&gt;copy;\n    $xcr_copy-&gt;set_att( id =&gt; $id, name =&gt; $name, pos =&gt; $pos );\n    $xcr_copy-&gt;paste( last_child =&gt; $xcr-&gt;parent );\n}\n\n$t-&gt;print;\n\n\nsub build_xml {\n\n    open my $fh, '&gt;', shift;\n\n    print $fh &lt;&lt;__END_XML__;\n&lt;?xml version='1.0' standalone='yes'?&gt;\n&lt;project&gt;\n  &lt;builds&gt;\n    &lt;xcr id=\"\" name=\"\" pos=\"\" /&gt;          \n  &lt;/builds&gt;\n&lt;/project&gt;\n__END_XML__\n\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" standalone=\"yes\"?&gt;\n&lt;project&gt;\n  &lt;builds&gt;\n    &lt;xcr id=\"\" name=\"\" pos=\"\"/&gt;\n    &lt;xcr id=\"ID\" name=\"Name\" pos=\"Pos\"/&gt;\n    &lt;xcr id=\"1\" name=\"a\" pos=\"265\"/&gt;\n    &lt;xcr id=\"2\" name=\"b\" pos=\"950\"/&gt;\n    &lt;xcr id=\"3\" name=\"c\" pos=\"23\"/&gt;\n    &lt;xcr id=\"4\" name=\"d\" pos=\"798\"/&gt;\n    &lt;xcr id=\"5\" name=\"e\" pos=\"826\"/&gt;\n    &lt;xcr id=\"6\" name=\"f\" pos=\"935\"/&gt;\n    &lt;xcr id=\"7\" name=\"g\" pos=\"852\"/&gt;\n    &lt;xcr id=\"8\" name=\"h\" pos=\"236\"/&gt;\n    &lt;xcr id=\"9\" name=\"i\" pos=\"642\"/&gt;\n  &lt;/builds&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>After reading your comment (stuff like this should be edited into the question) saying <em>\"I am building [the XML data] from scratch. There is a sub buildXML\"</em> I think this is more likely to be what you require. With <code>XML::Twig</code> it is simplest to parse some XML text instead of creating and linking individual <code>XML::Twig::Elt</code> objects</p>\n\n<p>The <code>$t</code> object starts with no <code>xcr</code> objects at all. They are all created through <code>XML::Twig::Elt-&gt;new</code> and pasted as the <code>last_child</code> of the <code>builds</code> element</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>require v5.14.1;  # For autodie\n\nuse utf8;\nuse strict;\nuse warnings 'all';\nuse autodie;\n\nuse Text::CSV;\nuse XML::Twig;\nuse Encode;\n\nuse constant XML_FILE =&gt; 'output.xml';\nuse constant CSV_FILE =&gt; 'b.txt';\n\nmy $t = XML::Twig-&gt;new(\n    pretty_print =&gt; 'indented',\n);\n\n$t-&gt;parse(&lt;&lt;END_XML);\n&lt;project&gt;\n  &lt;builds/&gt;\n&lt;/project&gt;\nEND_XML\n\nmy ($builds) = $t-&gt;findnodes('/project/builds');\n\n\nmy $csv = Text::CSV-&gt;new( {\n    sep_char =&gt; '|',\n    binary =&gt; 1,\n    allow_loose_quotes =&gt; 1,\n} );\n\n{\n    open my $fh, '&lt;:encoding(utf8)', CSV_FILE;\n    &lt;$fh&gt;; # Drop the header line\n\n    while ( my $row = $csv-&gt;getline($fh) ) {\n\n        my ($id, $name, $pos) = @$row;\n\n        my $xcr = XML::Twig::Elt-&gt;new(xcr =&gt; {\n            id   =&gt; $id,\n            name =&gt; $name,\n            pos  =&gt; $pos\n        });\n\n        $xcr-&gt;paste( last_child =&gt; $builds );\n    }\n}\n\nopen my $fh, '&gt;encoding(utf-8)', XML_FILE;\n$t-&gt;set_output_encoding('UTF-8');\n$t-&gt;print($fh, 'indented');\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project&gt;\n  &lt;builds&gt;\n    &lt;xcr id=\"1\" name=\"a\" pos=\"265\"/&gt;\n    &lt;xcr id=\"2\" name=\"b\" pos=\"950\"/&gt;\n    &lt;xcr id=\"3\" name=\"c\" pos=\"23\"/&gt;\n    &lt;xcr id=\"4\" name=\"d\" pos=\"798\"/&gt;\n    &lt;xcr id=\"5\" name=\"e\" pos=\"826\"/&gt;\n    &lt;xcr id=\"6\" name=\"f\" pos=\"935\"/&gt;\n    &lt;xcr id=\"7\" name=\"g\" pos=\"852\"/&gt;\n    &lt;xcr id=\"8\" name=\"h\" pos=\"236\"/&gt;\n    &lt;xcr id=\"9\" name=\"i\" pos=\"642\"/&gt;\n  &lt;/builds&gt;\n&lt;/project&gt;\n</code></pre>\n"}], "owner": {"reputation": 545, "user_id": 6220533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ea839a204f58c79eb968a8f6de362c5?s=128&d=identicon&r=PG&f=1", "display_name": "UsefulUserName", "link": "https://stackoverflow.com/users/6220533/usefulusername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 38069658, "answer_count": 2, "score": 2, "last_activity_date": 1511931554, "creation_date": 1467098141, "last_edit_date": 1467110821, "question_id": 38069467, "link": "https://stackoverflow.com/questions/38069467/iterating-through-csv-and-creating-an-xml-file", "title": "Iterating through CSV and creating an XML file", "body": "\n\n<p>I am trying to parse a CSV file in Perl and paste the information of some columns into an XML-file. I've never done anything in Perl, and my idea was to store the data into an array and then pull the information out of the array as I build it.</p>\n\n<p>I'm sure I am doing several things wrong, since I am not getting the value I am expecting but instead what looks like the array addresses in the memory (here is an example: <code>ARRAY(0x35e9360)</code>.</p>\n\n<p>Could somebody help me out and point me to a better solution?</p>\n\n<p>Here is the code in question:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Text::CSV;\nuse utf8;\nuse XML::Simple qw(XMLout);\nuse XML::Twig;\nuse File::Slurp;\nuse Encode;\n\n&amp;buildXML();\n\nmy $csv = Text::CSV-&gt;new( { binary =&gt; 1 } )    # should set binary attribute.\n        or die \"Cannot use CSV: \" . Text::CSV-&gt;error_diag();\n\n$csv = Text::CSV-&gt;new( { sep_char =&gt; '|' } );\n$csv = Text::CSV_XS-&gt;new( { allow_loose_quotes =&gt; 1 } );\n\nmy $t = XML::Twig-&gt;new( pretty_print =&gt; indented );\n$t-&gt;parsefile('output.xml');\n\n$out_file = \"output.xml\";\nopen( my $fh_out, '&gt;&gt;', $out_file ) or die \"unable to open $out_file for writing: $!\";\n\nmy $root = $t-&gt;root;                           #get the root\n\nopen my $fh, \"&lt;:encoding(utf8)\", \"b.txt\" or die \"text.txt: $!\";\n\nwhile ( my $row = $csv-&gt;getline($fh) ) {\n\n    my @rows = $row;\n\n    $builds = $root-&gt;first_child();            # get the builds node\n    $xcr    = $builds-&gt;first_child();          #get the xcr node\n\n    my $xcrCopy = $xcr-&gt;copy();                #copy the xcr node\n    $xcrCopy-&gt;paste( after, $xcr );            #paste the xcr node\n\n    $xcr-&gt;set_att( id =&gt; \"@rows[0]\" );\n    print {$fh_out} $t-&gt;sprint();\n}\n\n$csv-&gt;eof or $csv-&gt;error_diag();\n</code></pre>\n\n<p>Here is a testfile:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ID|Name|Pos\n1|a|265\n2|b|950\n3|c|23\n4|d|798\n5|e|826\n6|f|935\n7|g|852\n8|h|236\n9|i|642\n</code></pre>\n\n<p>Here is the XML that is build by the <code>buildXML()</code> sub. </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version='1.0' standalone='yes'?&gt;\n&lt;project&gt;\n  &lt;builds&gt;\n    &lt;xcr id=\"\" name=\"\" pos=\"\" /&gt;          \n  &lt;/builds&gt;\n&lt;/project&gt;\n</code></pre>\n"}, {"tags": ["mysql", "perl", "ini", "dbi", "dbd"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1467129733, "post_id": 38069370, "comment_id": 63598581, "body": "1) What operating system is your Perl script running on? 2) What is the full path to your my.ini file? 3) Does the user running the script have permission to read my.ini? 4) Can you please <a href=\"https://stackoverflow.com/posts/38069370/edit\">edit</a> the full contents of my.ini into your question?"}, {"owner": {"reputation": 177, "user_id": 1376661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112b44f8f07f00d309f2b49a7c3a65aa?s=128&d=identicon&r=PG", "display_name": "Andy Beverley", "link": "https://stackoverflow.com/users/1376661/andy-beverley"}, "edited": false, "score": 0, "creation_date": 1515354945, "post_id": 38069370, "comment_id": 83259755, "body": "Did you try to specify the file as well with <code>mysql_read_default_file=...</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5626852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a53fac6eeb176d0a04dbb9f8e2f5e2?s=128&d=identicon&r=PG&f=1", "display_name": "Wei Shi Shi", "link": "https://stackoverflow.com/users/5626852/wei-shi-shi"}, "edited": false, "score": 0, "creation_date": 1467125655, "post_id": 38070830, "comment_id": 63595667, "body": "Thank you for your response.However,that won&#39;t work for me.The fact is I have an CPAN package called UMLS::interface.when installing that module,such error raises.I checked the package source code and it written in following way:         my $dsn = &quot;DBI:mysql:umls;mysql_read_default_group=client;&quot;;         $db = DBI-&gt;connect($dsn);"}, {"owner": {"reputation": 1, "user_id": 5626852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a53fac6eeb176d0a04dbb9f8e2f5e2?s=128&d=identicon&r=PG&f=1", "display_name": "Wei Shi Shi", "link": "https://stackoverflow.com/users/5626852/wei-shi-shi"}, "edited": false, "score": 0, "creation_date": 1467125777, "post_id": 38070830, "comment_id": 63595780, "body": "So in order to Install that Package,I have to figure out why thIs line of code $dsn = &quot;DBI:mysql:umls;mysql_read_default_group=client;&quot;; $db = DBI-&gt;connect($dsn);  dose not work."}], "tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1467102147, "creation_date": 1467102147, "answer_id": 38070830, "question_id": 38069370, "link": "https://stackoverflow.com/questions/38069370/how-to-make-mysql-read-default-group-in-perl-dbi-work/38070830#38070830", "title": "How to make mysql_read_default_group in perl DBI work", "body": "<p>I read some documents to answar your problem and what I found is that you need to provide the username and password in different section and you need to mention the file name also. like </p>\n\n<pre><code>[myapp]\nhost=localhost\n\nuser=root\n\npassword=mypassword\n\ndatabase=umls\n\nport=3306\n</code></pre>\n\n<p>then </p>\n\n<pre><code>my $dbh = DBI-&gt;connect(\"DBI:mysql:test\"\n    . \";mysql_read_default_file=$ENV{HOME}/.my.cnf\"\n    .';mysql_read_default_group=myapp',\n    undef, \n    undef\n   ) or die \"something went wrong ($DBI::errstr)\";\n</code></pre>\n\n<p>Hope this will help you.</p>\n\n<p>Reference:\n<a href=\"http://www.perlmonks.org/?node_id=519356\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=519356</a> </p>\n"}], "owner": {"reputation": 1, "user_id": 5626852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5a53fac6eeb176d0a04dbb9f8e2f5e2?s=128&d=identicon&r=PG&f=1", "display_name": "Wei Shi Shi", "link": "https://stackoverflow.com/users/5626852/wei-shi-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1054, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467102147, "creation_date": 1467097830, "last_edit_date": 1467099444, "question_id": 38069370, "link": "https://stackoverflow.com/questions/38069370/how-to-make-mysql-read-default-group-in-perl-dbi-work", "title": "How to make mysql_read_default_group in perl DBI work", "body": "<p>I am trying to connect mysql using my.ini file as configuration.</p>\n\n<p>Here is my Perl code:</p>\n\n<pre><code>use DBI;\n\nmy $dsn = \"DBI:mysql:umls;mysql_read_default_group=client;\";\n\nmy $dbh = DBI-&gt;connect($dsn);\n</code></pre>\n\n<p>And here is <strong>my.ini</strong> file:</p>\n\n<pre><code>...\n\n[client]\n\nhost=localhost\n\nuser=root\n\npassword=mypassword\n\ndatabase=umls\n\nport=3306\n\n....\n</code></pre>\n\n<p>According to the official document(<a href=\"http://search.cpan.org/~capttofu/DBD-mysql-4.033/lib/DBD/mysql.pm\" rel=\"nofollow\">http://search.cpan.org/~capttofu/DBD-mysql-4.033/lib/DBD/mysql.pm</a>),\nthe DBI will use information from my.ini to connect mysql,However,it give me error like:<a href=\"http://i.stack.imgur.com/Z56X3.png\" rel=\"nofollow\">errors</a></p>\n\n<p>I think the problem is the DBI never read my.ini successfully so it use ODBC@localhost as a default instead.</p>\n\n<p>The connection will work if I just specify the user name and password inside connect().\nCan anyone help me figure out why <code>'mysql_read_default_group=client'</code> does not work?\nI will be much much appreciated!\nThanks</p>\n"}, {"tags": ["perl", "ubuntu", "cpan", "tkx"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1467089791, "post_id": 38067254, "comment_id": 63572969, "body": "Do you already have Tk installed?"}, {"owner": {"reputation": 59, "user_id": 5700823, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/95f4eb962eed02480dc17641f32cd408?s=128&d=identicon&r=PG&f=1", "display_name": "Adnan Haider", "link": "https://stackoverflow.com/users/5700823/adnan-haider"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1467089852, "post_id": 38067254, "comment_id": 63572992, "body": "Yes, TK is installed."}], "answers": [{"tags": [], "owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "is_accepted": false, "score": 1, "last_activity_date": 1562336240, "last_edit_date": 1562336240, "creation_date": 1467099983, "answer_id": 38070127, "question_id": 38067254, "link": "https://stackoverflow.com/questions/38067254/trouble-installing-tkx-perl-module-in-ubuntu-14-04/38070127#38070127", "title": "trouble installing Tkx perl module in Ubuntu 14.04", "body": "<p>The error is that the tests of the module don't pass successfully.</p>\n\n<p>One thing I would try first is to try to install the module with <code>cpan</code> or <code>cpanminus</code> (<code>cpan Tkx</code> or <code>cpanm Tkx</code>). You (or the Makefile.PL) may have missed something that could be causing this error.</p>\n\n<p>I see you already opened a <a href=\"https://rt.cpan.org/Ticket/Display.html?id=115662\" rel=\"nofollow noreferrer\">bug report</a> on CPAN. You can see in <a href=\"http://deps.cpantesters.org/?module=Tkx;perl=latest\" rel=\"nofollow noreferrer\">cpantesters</a> that this module has the tests broken (you could check with your particular Perl version) and there is also another <a href=\"https://rt.cpan.org/Ticket/Display.html?id=67823\" rel=\"nofollow noreferrer\">bug report</a> from 5 years ago reporting broken tests for the very same version that's currently on CPAN (1.09).</p>\n\n<p>Considering this I think your options is to skip the tests and see if it works for your purposes. </p>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 4896937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b849b641ff3f8495ba3ce610fbd6e6f3?s=128&d=identicon&r=PG", "display_name": "chrstphrchvz", "link": "https://stackoverflow.com/users/4896937/chrstphrchvz"}, "is_accepted": false, "score": 0, "last_activity_date": 1529115478, "creation_date": 1529115478, "answer_id": 50884445, "question_id": 38067254, "link": "https://stackoverflow.com/questions/38067254/trouble-installing-tkx-perl-module-in-ubuntu-14-04/50884445#50884445", "title": "trouble installing Tkx perl module in Ubuntu 14.04", "body": "<p>There's already a packaged version of Tkx for Ubuntu, so all it should take to get Tkx and any of its dependencies is:</p>\n\n<pre><code>sudo apt-get install libperl-tkx\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 4896937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b849b641ff3f8495ba3ce610fbd6e6f3?s=128&d=identicon&r=PG", "display_name": "chrstphrchvz", "link": "https://stackoverflow.com/users/4896937/chrstphrchvz"}, "is_accepted": false, "score": 1, "last_activity_date": 1614765446, "creation_date": 1614765446, "answer_id": 66454653, "question_id": 38067254, "link": "https://stackoverflow.com/questions/38067254/trouble-installing-tkx-perl-module-in-ubuntu-14-04/66454653#66454653", "title": "trouble installing Tkx perl module in Ubuntu 14.04", "body": "<p>I recently adopted Tkx and published release 1.10, which allows installation to proceed despite the t/tcl.t test 18 failure.</p>\n<p>The test failure appears to have been caused by unexpected but minor changes to error message formatting in newer Tcl.pm. Pending the issue actually being fixed, it is not something which Tkx should abort installation over.</p>\n"}], "owner": {"reputation": 59, "user_id": 5700823, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/95f4eb962eed02480dc17641f32cd408?s=128&d=identicon&r=PG&f=1", "display_name": "Adnan Haider", "link": "https://stackoverflow.com/users/5700823/adnan-haider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1614765446, "creation_date": 1467089355, "last_edit_date": 1467094067, "question_id": 38067254, "link": "https://stackoverflow.com/questions/38067254/trouble-installing-tkx-perl-module-in-ubuntu-14-04", "title": "trouble installing Tkx perl module in Ubuntu 14.04", "body": "<p>In order to install a package called PrimerMapper for designing primers on Ubuntu 14.04, I need to install a perl module called <strong>Tkx</strong> but facing trouble in installing it. So, kindly assist me in resolving this bug. \nFor your quick and easy reference, I am pasting complete commands of installation. Thanks a lot</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>**adnan@adnan-Inspiron-N5110[Tkx-1.09]** sudo perl Makefile.PL            \nWriting Makefile for Tkx\nWriting MYMETA.yml and MYMETA.json\n\n**adnan@adnan-Inspiron-N5110[Tkx-1.09]** sudo make                        \nSkip blib/lib/Tkx/Tutorial.pod (unchanged)\nSkip blib/lib/Tkx.pm (unchanged)\nSkip blib/lib/Tkx/MegaConfig.pm (unchanged)\nSkip blib/lib/Tkx/LabEntry.pm (unchanged)\ncp tkx-prove blib/script/tkx-prove\n/usr/bin/perl -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/tkx-prove\ncp tkx-ed blib/script/tkx-ed\n/usr/bin/perl -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/tkx-ed\nManifying blib/man1/tkx-ed.1p\nManifying blib/man3/Tkx::MegaConfig.3pm\nManifying blib/man3/Tkx::LabEntry.3pm\nManifying blib/man3/Tkx::Tutorial.3pm\nManifying blib/man3/Tkx.3pm\n\n**adnan@adnan-Inspiron-N5110[Tkx-1.09]** sudo make test                  \nPERL_DL_NONLAZY=1 /usr/bin/perl \"-MExtUtils::Command::MM\" \"-e\" \"test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/LabEntry.t ...... 1/2  (in cleanup) Can't call method \"DeleteCommand\" on an undefined value at /usr/local/lib/perl/5.18.2/Tcl.pm line 655 during global destruction.\nt/LabEntry.t ...... ok   \nt/mega-config.t ... ok   \nt/mega.t .......... ok   \nt/nul-char.t ...... ok   \nt/tcl-callback.t .. 1/7  (in cleanup) Can't call method \"DeleteCommand\" on an undefined value at /usr/local/lib/perl/5.18.2/Tcl.pm line 655 during global destruction.\nt/tcl-callback.t .. ok   \nt/tcl.t ........... 1/18 # Test 18 got: \"Tcl error 'Foo at /usr/local/lib/perl/5.18.2/Tcl.pm line 585.\\n' while invoking scalar result call:\\n\\t\\\"error Foo\\\" at /usr/local/lib/perl/5.18.2/Tcl.pm line 588.\\n\\tTcl::call('Tcl=SCALAR(0x1b2ce48)', 'error', 'Foo') called at /media/windows/NGS/GATK_FINAL_PIPELINE/PrimerMapper-master/Tkx-1.09/blib/lib/Tkx.pm line 329\\n\\teval {...} called at /media/windows/NGS/GATK_FINAL_PIPELINE/PrimerMapper-master/Tkx-1.09/blib/lib/Tkx.pm line 329\\n\\tTkx::i::call('error', 'Foo') called at /media/windows/NGS/GATK_FINAL_PIPELINE/PrimerMapper-master/Tkx-1.09/blib/lib/Tkx.pm line 51\\n\\tTkx::AUTOLOAD('Foo') called at t/tcl.t line 38\\n\\teval {...} called at t/tcl.t line 38\\n\" (t/tcl.t at line 39)\n#    Expected: \"Foo at t/tcl.t line 38.\\n\"\n#  t/tcl.t line 39 is: ok($@, \"Foo at @{[__FILE__]} line @{[__LINE__ - 1]}.\\n\");\nt/tcl.t ........... Failed 1/18 subtests \nt/tk.t ............ 12/12        (in cleanup) Can't call method \"DeleteCommand\" on an undefined value at /usr/local/lib/perl/5.18.2/Tcl.pm line 655 during global destruction.\nt/tk.t ............ ok     \nt/utf8.t .......... ok   \n\nTest Summary Report\n-------------------\nt/tcl.t         (Wstat: 0 Tests: 18 Failed: 1)\n  Failed test:  18\nFiles=8, Tests=54,  9 wallclock secs ( 0.15 usr  0.03 sys +  1.85 cusr  0.31 csys =  2.34 CPU)\nResult: FAIL\nFailed 1/8 test programs. 1/54 subtests failed.\nmake: *** [test_dynamic] Error 255\n  GAAS/Tkx-1.09.tar.gz\n  /usr/bin/make test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports GAAS/Tkx-1.09.tar.gz\nRunning make install\n  make test had returned bad status, won't install without force\nFailed during this command:\n GAAS/Tkx-1.09.tar.gz                         : make_test NO\n</code></pre>\n"}, {"tags": ["perl", "32bit-64bit"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1467083757, "post_id": 38066390, "comment_id": 63571308, "body": "Looks like your current system is 32-bit, although that may not be a good predictor for which you want.  Is your Windows 64-bit?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1467123915, "post_id": 38066390, "comment_id": 63594369, "body": "@Arjit, Contrary to what both answers say, 64-bit isn&#39;t necessarily faster than 32-bit. <a href=\"https://www.raymond.cc/blog/mozilla-firefox-64bit-build-performance-compared-to-32bit/\" rel=\"nofollow noreferrer\">Example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 1, "last_activity_date": 1467092028, "creation_date": 1467092028, "answer_id": 38067798, "question_id": 38066390, "link": "https://stackoverflow.com/questions/38066390/which-download-of-activestate-perl-5-24-do-i-need/38067798#38067798", "title": "which download of activestate perl 5.24 do i need?", "body": "<p>As your system is 64 bit. So I suggest you to install  <strong>64-bit, x64</strong> one. You can install 32 bit also. 64 bit system support both 64 bit and 32 bit. But in case of 64 bit performance will be better.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1383b510eb2dad625bf6068f7ef24d81?s=128&d=identicon&r=PG&f=1", "display_name": "user318814", "link": "https://stackoverflow.com/users/4364655/user318814"}, "edited": false, "score": 0, "creation_date": 1467200743, "post_id": 38076987, "comment_id": 63631449, "body": "Yes. In my case I&#39;m also using a separate AS product, pdk, which requires 32-bit version of perl. According to community.activestate.com/node/19481 &quot;The x86 installer for 5.24 is the one you want.&quot; I believe the x86 in archname=MSWin32-x86-multi-thread-64int was also key."}], "tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": false, "score": 0, "last_activity_date": 1467119734, "last_edit_date": 1467119734, "creation_date": 1467118874, "answer_id": 38076987, "question_id": 38066390, "link": "https://stackoverflow.com/questions/38066390/which-download-of-activestate-perl-5-24-do-i-need/38076987#38076987", "title": "which download of activestate perl 5.24 do i need?", "body": "<p>As Arijit says, you should <em>default</em> to the <strong>64-bit</strong> version as it will handle larger numerical values more efficiently and allows access to larger memory pools.</p>\n\n<h2>Exceptions include:</h2>\n\n<ul>\n<li>Your machine has less than 4GB of memory &amp; you need to be stingy with what you've got.</li>\n<li>You need to interface with a 32-bit only library on your computer for which you don't have access to a 64-bit version.  I know of at least one ODBC driver that <em>still</em> fits this bill.  Though for the customer that needs this I generally use perlapp to wrap up a dedicated 32-bit .exe file.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 4364655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1383b510eb2dad625bf6068f7ef24d81?s=128&d=identicon&r=PG&f=1", "display_name": "user318814", "link": "https://stackoverflow.com/users/4364655/user318814"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467119734, "creation_date": 1467083100, "last_edit_date": 1495535335, "question_id": 38066390, "link": "https://stackoverflow.com/questions/38066390/which-download-of-activestate-perl-5-24-do-i-need", "title": "which download of activestate perl 5.24 do i need?", "body": "<p>I'm running Windows 7 Home Premium 64-bit. I need to install the perl \n5.24 binary.</p>\n\n<p>at <a href=\"http://www.activestate.com/activeperl/downloads\" rel=\"nofollow noreferrer\">http://www.activestate.com/activeperl/downloads</a> I get two choices: \ndownload activeperl 5.24.0 for windows (x86)\ndownload activeperl 5.24.0 for windows  (64-bit, x64)</p>\n\n<p>Which of those two do I need?</p>\n\n<p>Call me dense but <em>I don't find my answer</em> at <a href=\"https://stackoverflow.com/questions/26168746/how-can-i-check-\">How can I check whether my Perl installation is 32 or 64 bit?</a>\nwhether-my-perl-installation-is-32-or-64-bit, although it does tell how to \ndisplay several version-related characteristics</p>\n\n<ul>\n<li><p>perl -V:ivsize says\nivsize='8';</p></li>\n<li><p>perl -V:archname says\narchname='MSWin32-x86-multi-thread-64int';</p></li>\n<li><p>perl -v says</p></li>\n</ul>\n\n<p>This is perl 5, version 20, subversion 1 (v5.20.1) built for MSWin32-x86-multi-thread-64int\n(with 1 registered patch, see perl -V for more detail)</p>\n\n<p>Copyright 1987-2014, Larry Wall</p>\n\n<p>Binary build 2000 [298557] provided by ActiveState </p>\n\n<p><a href=\"http://www.ActiveState.com\" rel=\"nofollow noreferrer\">http://www.ActiveState.com</a>\nBuilt Oct 15 2014 22:10:49</p>\n\n<p>Please help.\nPhil</p>\n"}, {"tags": ["perl", "crontab", "sudo"], "comments": [{"owner": {"reputation": 497, "user_id": 1245659, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9116cc9a250e0990ae2b0395b28aa875?s=128&d=identicon&r=PG", "display_name": "arcee123", "link": "https://stackoverflow.com/users/1245659/arcee123"}, "edited": false, "score": 1, "creation_date": 1467060972, "post_id": 38063022, "comment_id": 63565136, "body": "duplicate: <a href=\"http://stackoverflow.com/questions/18133498/how-to-use-perl-to-modify-crontab\" title=\"how to use perl to modify crontab\">stackoverflow.com/questions/18133498/&hellip;</a>"}, {"owner": {"reputation": 406, "user_id": 1879794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hOga3.jpg?s=128&g=1", "display_name": "MrCleanX", "link": "https://stackoverflow.com/users/1879794/mrcleanx"}, "edited": false, "score": 0, "creation_date": 1467062281, "post_id": 38063022, "comment_id": 63565698, "body": "<a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open - perldoc</a>"}, {"owner": {"reputation": 465, "user_id": 5503653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a755981f34fd3c89d1d55f88ca1fdafa?s=128&d=identicon&r=PG&f=1", "display_name": "Robidu", "link": "https://stackoverflow.com/users/5503653/robidu"}, "edited": false, "score": 0, "creation_date": 1467066010, "post_id": 38063022, "comment_id": 63567136, "body": "Maybe, but since the thread is closed, there&#39;s no way of posting any further questions - plus the solution shown there requires the script to have root privileges - which isn&#39;t the case here, as I have already stated in the initial post. Piping things into crontab itself furthermore is rather trivial, but the question here is how do I do this in conjunction with sudo?"}, {"owner": {"reputation": 406, "user_id": 1879794, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hOga3.jpg?s=128&g=1", "display_name": "MrCleanX", "link": "https://stackoverflow.com/users/1879794/mrcleanx"}, "edited": false, "score": 0, "creation_date": 1467068902, "post_id": 38063022, "comment_id": 63568013, "body": "Even if you get it all working, don&#39;t you still have to restart crond as root?"}, {"owner": {"reputation": 465, "user_id": 5503653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a755981f34fd3c89d1d55f88ca1fdafa?s=128&d=identicon&r=PG&f=1", "display_name": "Robidu", "link": "https://stackoverflow.com/users/5503653/robidu"}, "edited": false, "score": 0, "creation_date": 1467075800, "post_id": 38063022, "comment_id": 63569639, "body": "First of all, no. Second, this is absolutely no part of the question at hand."}], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 5503653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a755981f34fd3c89d1d55f88ca1fdafa?s=128&d=identicon&r=PG&f=1", "display_name": "Robidu", "link": "https://stackoverflow.com/users/5503653/robidu"}, "edited": false, "score": 0, "creation_date": 1467065595, "post_id": 38063946, "comment_id": 63567012, "body": "I&#39;ve already tried this, but to no avail. It yields the same result in either case. Furthermore, the way I take it is that -u isn&#39;t required, because root is implied when used without this parameter."}], "tags": [], "owner": {"reputation": 463, "user_id": 6511094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRJfm.jpg?s=128&g=1", "display_name": "D Hydar", "link": "https://stackoverflow.com/users/6511094/d-hydar"}, "is_accepted": false, "score": 0, "last_activity_date": 1467065114, "creation_date": 1467065114, "answer_id": 38063946, "question_id": 38063022, "link": "https://stackoverflow.com/questions/38063022/how-do-i-set-a-crontab-from-a-perl-script/38063946#38063946", "title": "How do I set a crontab from a Perl script?", "body": "<p>I think you're missing a \"-\" argument on the crontab. Without that, contab doesn't know that you want it to read from stdin. (Also, not using \"-u\" with sudo can be a bit dicey.)</p>\n\n<p>See \"man crontab\" for details...</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1468930869, "creation_date": 1468930869, "answer_id": 38458428, "question_id": 38063022, "link": "https://stackoverflow.com/questions/38063022/how-do-i-set-a-crontab-from-a-perl-script/38458428#38458428", "title": "How do I set a crontab from a Perl script?", "body": "<p>What MrCleanX probably intended to hint at with his reference <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><em>open - perldoc</em></a> is that</p>\n\n<blockquote>\n  <p>Open returns nonzero on success, the undefined value otherwise.</p>\n</blockquote>\n\n<p>So, by writing</p>\n\n<pre><code>  if(!open(CRON, \"| /usr/bin/sudo /usr/bin/crontab\"))\n</code></pre>\n\n<p>you are skipping the following block if the <code>open</code> succeeded instead of if it failed.</p>\n"}, {"tags": [], "owner": {"reputation": 465, "user_id": 5503653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a755981f34fd3c89d1d55f88ca1fdafa?s=128&d=identicon&r=PG&f=1", "display_name": "Robidu", "link": "https://stackoverflow.com/users/5503653/robidu"}, "is_accepted": false, "score": 0, "last_activity_date": 1497298930, "creation_date": 1497298930, "answer_id": 44508104, "question_id": 38063022, "link": "https://stackoverflow.com/questions/38063022/how-do-i-set-a-crontab-from-a-perl-script/44508104#44508104", "title": "How do I set a crontab from a Perl script?", "body": "<p>After letting this thing rest and then doing some reading (<code>man crontab</code> actually gave me the all-important hint) I just dropped the pipe in the <code>open</code> statement and instead wrote the crontab to a temporary file.\nWith that done, all I needed to do was invoking sudo /usr/bin/crontab /tmp/ without having to add a redirection to install the new crontab.</p>\n\n<p>Problem solved...</p>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1559154886, "creation_date": 1559154886, "answer_id": 56366636, "question_id": 38063022, "link": "https://stackoverflow.com/questions/38063022/how-do-i-set-a-crontab-from-a-perl-script/56366636#56366636", "title": "How do I set a crontab from a Perl script?", "body": "<p><code>sudo</code> consumes standard input in case a password is supplied, so it is not possible to pipe input to a sudo'ed command.</p>\n\n<p>To install a crontab, <code>crontab</code> supports the syntax</p>\n\n<pre><code>crontab FILE\n</code></pre>\n\n<p>So as a workaround you could write the crontab contents to a file and call</p>\n\n<pre><code>system(\"/usr/bin/sudo /usr/bin/crontab $FILE\");\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 5503653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a755981f34fd3c89d1d55f88ca1fdafa?s=128&d=identicon&r=PG&f=1", "display_name": "Robidu", "link": "https://stackoverflow.com/users/5503653/robidu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1559154886, "creation_date": 1467060722, "last_edit_date": 1467066287, "question_id": 38063022, "link": "https://stackoverflow.com/questions/38063022/how-do-i-set-a-crontab-from-a-perl-script", "title": "How do I set a crontab from a Perl script?", "body": "<p>I'm currently writing a CGI script in Perl that is supposed to read in a crontab (works), allows for easy manipulation in a web browser (TODO) and should finally set the crontab when editing it is done (fails).\nTo preemtively answer any questions on security: The script is reachable only within a VPN tunnel and so is invisible on the 'Net...</p>\n\n<p>Anyway, here's the code in question:</p>\n\n<pre><code>if($p_action eq 'set')\n  {\nmy $l_i = 1;\nmy $l_param;\n\n  if(!open(CRON, \"| /usr/bin/sudo /usr/bin/crontab\"))\n    {\n    print CRON \"CRON_TZ=$l_param\\n\" if(defined ($l_param = $cgi-&gt;param(\"cron_tz\")));\n    print CRON \"MAILTO=$l_param\\n\" if(defined ($l_param = $cgi-&gt;param(\"mailto\")));\n    print CRON \"SHELL=$l_param\\n\" if(($l_param = $cgi-&gt;param(\"shell\")) ne 'unset');\n\n    print CRON \"\\n\" if(defined $cgi-&gt;param(\"cron_tz\") || defined $cgi-&gt;param(\"mailto\") || $cgi-&gt;param('shell') ne 'unset');\n\n    while(defined $cgi-&gt;param(\"line$l_i-min\"))\n      {\nmy $l_min = $cgi-&gt;param(\"line$l_i-min\");\nmy $l_hour = $cgi-&gt;param(\"line$l_i-hour\");\nmy $l_day = $cgi-&gt;param(\"line$l_i-day\");\nmy $l_month = $cgi-&gt;param(\"line$l_i-month\");\nmy $l_wday = $cgi-&gt;param(\"line$l_i-wday\");\nmy $l_cmd = $cgi-&gt;param(\"line$l_i-cmd\");\n\n      print CRON \"- \" if($cgi-&gt;param(\"line$l_i-nolog\") eq 'Nolog');\n      print CRON $l_min.' ';\n      print CRON $l_hour.' ';\n      print CRON $l_day.' ';\n      print CRON $l_month.' ';\n      print CRON $l_wday.' ';\n      print CRON $l_cmd.\"\\n\";\n      $l_i++;\n      }\n\n    close(CRON);\n    }\n  }\n</code></pre>\n\n<p>I already have permitted both /usr/bin/crontab -l and /usr/bin/crontab in the sudoers file for execution by wwwrun.</p>\n\n<p>Although crontab is actually executed when opening the pipe, nothing, however, is passed to crontab and so resulting in an empty crontab. It appears that I'm missing something crucial here, but I don't possibly see what it could be. Any clues on how to get this thing unstuck?</p>\n\n<p>P.S.: I want to confine root privileges to as few lines of code as possible so running the script as root is not an option.</p>\n"}, {"tags": ["perl", "file", "directory", "subroutine"], "comments": [{"owner": {"reputation": 12658, "user_id": 5920214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4bbe6feca39eebe96274d3f07c44d9?s=128&d=identicon&r=PG", "display_name": "tfb", "link": "https://stackoverflow.com/users/5920214/tfb"}, "edited": false, "score": 0, "creation_date": 1467056165, "post_id": 38061715, "comment_id": 63562675, "body": "Your loop seems to be fairly confused: for each file name in <code>@ArrayofFiles</code> you open the file and then read each line from it.  Then you hand each line (complete with its trailing newline if any) to <code>loadSequence</code>, which treats that string as a filename and tries to open it.  Is that really what you want to do?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1467058074, "post_id": 38061715, "comment_id": 63563768, "body": "It&#39;s unrelated to the question, but you really should alter <code>loadSequence</code> to <code>return $sequence</code> instead of  <code>return \\$sequence</code>. The current form has no advantage, and it means you have to pepper your code with <code>$$RawSequence</code> everywhere which is confusing to everyone, <a href=\"http://stackoverflow.com/questions/38044668/perl-variable-is-printed-as-scalar0x7faf2b804240\">as you found in your previous question</a>"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1467096812, "post_id": 38061715, "comment_id": 63575899, "body": "Just a remark: if those FASTA files are more than a handful of lines you could make your life a lot easier by using one of the XS modules on CPAN for the Levenshtein parts. I&#39;m kinda partial to <a href=\"https://metacpan.org/pod/Text::Levenshtein::Flexible\" rel=\"nofollow noreferrer\">Text::Levenshtein::Flexible</a> but any of the XS ones is orders of magnitude faster than pure Perl."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1467056380, "creation_date": 1467056380, "answer_id": 38061950, "question_id": 38061715, "link": "https://stackoverflow.com/questions/38061715/no-such-file-when-opening-multiple-files-in-a-directory-but-no-error-when-ope/38061950#38061950", "title": "&quot;No such file&quot; when opening multiple files in a directory, but no error when opening only one file", "body": "<p>You seem to be trying to open files twice.  The line</p>\n\n<pre><code>my @ArrayofFiles = glob \"$dir/*.fasta\";\n</code></pre>\n\n<p>Gives you the list of files. Then </p>\n\n<pre><code>foreach my $file (@ArrayofFiles){\n    open (my $Opened, $file) or die \"can't open file: $!\"; \n    while (my $OpenedFile = &lt;$Opened&gt;) { \n        my $RawSequence = loadSequence($OpenedFile); \n        # ...\n</code></pre>\n\n<p>does the following, line by line. It iterates through files, opens each, reads a line from it, and then submits that <em>line</em> to the function <code>loadSequence()</code>.</p>\n\n<p>However, in that function you attempt to open a file again</p>\n\n<pre><code>sub loadSequence{\n    my ($sequenceFile) = @_;\n    my $sequence = \"\";\n    unless (open(FASTA, \"&lt;\", $sequenceFile)){\n    # ...\n</code></pre>\n\n<p>The <code>$sequenceFile</code> variable in the function is passed to the function as <code>$OpenedFile</code> -- which is a line in the file that is already opened and being read from, not the file name.  While I am not certain about details of your code, the error you show seems to be consistent with this.</p>\n\n<p>It may be that you are confusing the <code>glob</code>, which gives you the list of files, with the <code>opendir</code> which would indeed need a following <code>readdir</code> to access the files.\nTry renaming <code>$OpenedFile</code> to, say, <code>$line</code> (which it is) and see how it looks then.</p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 2, "last_activity_date": 1467057819, "creation_date": 1467057819, "answer_id": 38062318, "question_id": 38061715, "link": "https://stackoverflow.com/questions/38061715/no-such-file-when-opening-multiple-files-in-a-directory-but-no-error-when-ope/38062318#38062318", "title": "&quot;No such file&quot; when opening multiple files in a directory, but no error when opening only one file", "body": "<p>I just learned that \"FASTA file\" is a settled term. Wasn't aware of that and previously thought they are <em>some</em> files and contain filenames or something. As @zdim already said, you're opening these files twice.</p>\n\n<p>The following code gets a list of FASTA files (only the filenames) and then calls <code>loadSequence</code> with each such a filename. That subroutine then opens the given file, concatenates the none-<code>^&gt;</code> lines to one big line and returns it.</p>\n\n<pre><code># input:  the NAME of a FASTA file\n# return: all sequences in that file as one very long string\nsub loadSequence\n{\n    my ($fasta_filename) = @_;\n    my $sequence = \"\";\n    open( my $fasta_fh, '&lt;', $fasta_filename ) or die \"Cannot open $fasta_filename: $!\\n\";\n    while ( my $line = &lt;$fasta_fh&gt; ) {\n        chomp($line);\n        if ( $line !~ /^&gt;/ ) {\n            $sequence .= $line;    #if the line doesn't start with &gt; it is the sequence\n        }\n    }\n    close($fasta_fh);\n    return $sequence;\n}\n\n# ...\n\nmy $dir = '/Users/roblogan/Documents/FakeFastaFiles';\nmy @ArrayofFiles = glob \"$dir/*.fasta\";\nforeach my $filename (@ArrayofFiles) {\n    my $RawSequence = loadSequence($filename); \n    # ...\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 38062318, "answer_count": 2, "score": 0, "last_activity_date": 1467058858, "creation_date": 1467055494, "last_edit_date": 1467058858, "question_id": 38061715, "link": "https://stackoverflow.com/questions/38061715/no-such-file-when-opening-multiple-files-in-a-directory-but-no-error-when-ope", "title": "&quot;No such file&quot; when opening multiple files in a directory, but no error when opening only one file", "body": "<p>I can open one file in a directory and run the following code. However, when I try to use the same code on multiple files within a directory, I get an error regarding there not being a file.</p>\n\n<p>I have tried to make sure that I am naming the files correctly, that they are in the right format, that they are located in my current working directory, and that things are referenced correctly.</p>\n\n<p>I know a lot of people have had this error before and have posted similar questions, but any help would be appreciated.</p>\n\n<p>Working code: </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse diagnostics;\n\nuse List::Util qw( min max );\n\nmy $RawSequence = loadSequence(\"LDTest.fasta\");\nmy $windowSize  = 38;\nmy $stepSize    = 1;\nmy %hash;\nmy $s1;\nmy $s2;\nmy $dist;\n\nfor ( my $windowStart = 0; $windowStart &lt;= 140; $windowStart += $stepSize ) {\n\n    my $s1 = substr( $$RawSequence, $windowStart, $windowSize );\n    my $s2 = 'CGGAGCTTTACGAGCCGTAGCCCAAACAGTTAATGTAG';\n            # the 28 nt forward primer after the barcode plus the first 10 nt of the mtDNA dequence\n\n    my $dist = levdist( $s1, $s2 );\n\n    $hash{$dist} = $s1;\n\n    #print \"Distance between '$s1' and '$s2' is $dist\\n\";\n\n    sub levdist {\n        my ( $seq1, $seq2 ) = (@_)[ 0, 1 ];\n\n        my $l1 = length($s1);\n        my $l2 = length($s2);\n        my @s1 = split '', $seq1;\n        my @s2 = split '', $seq2;\n        my $distances;\n\n        for ( my $i = 0; $i &lt;= $l1; $i++ ) {\n            $distances-&gt;[$i]-&gt;[0] = $i;\n        }\n\n        for ( my $j = 0; $j &lt;= $l2; $j++ ) {\n            $distances-&gt;[0]-&gt;[$j] = $j;\n        }\n\n        for ( my $i = 1; $i &lt;= $l1; $i++ ) {\n\n            for ( my $j = 1; $j &lt;= $l2; $j++ ) {\n                my $cost;\n\n                if ( $s1[ $i - 1 ] eq $s2[ $j - 1 ] ) {\n                    $cost = 0;\n                }\n                else {\n                    $cost = 1;\n                }\n\n                $distances-&gt;[$i]-&gt;[$j] = minimum(\n                    $distances-&gt;[ $i - 1 ]-&gt;[ $j - 1 ] + $cost,\n                    $distances-&gt;[$i]-&gt;[ $j - 1 ] + 1,\n                    $distances-&gt;[ $i - 1 ]-&gt;[$j] + 1,\n                );\n            }\n        }\n\n        my $min_distance = $distances-&gt;[$l1]-&gt;[$l2];\n\n        for ( my $i = 0; $i &lt;= $l1; $i++ ) {\n            $min_distance = minimum( $min_distance, $distances-&gt;[$i]-&gt;[$l2] );\n        }\n\n        for ( my $j = 0; $j &lt;= $l2; $j++ ) {\n            $min_distance = minimum( $min_distance, $distances-&gt;[$l1]-&gt;[$j] );\n        }\n\n        return $min_distance;\n    }\n}\n\nsub minimum {\n    my $min = shift @_;\n\n    foreach (@_) {\n        if ( $_ &lt; $min ) {\n            $min = $_;\n        }\n    }\n\n    return $min;\n}\n\nsub loadSequence {\n    my ($sequenceFile) = @_;\n    my $sequence = \"\";\n\n    unless ( open( FASTA, \"&lt;\", $sequenceFile ) ) {\n        die $!;\n    }\n\n    while (&lt;FASTA&gt;) {\n        my $line = $_;\n        chomp($line);\n\n        if ( $line !~ /^&gt;/ ) {\n            $sequence .= $line;    #if the line doesn't start with &gt; it is the sequence\n        }\n    }\n\n    return \\$sequence;\n}\n\nmy @keys = sort { $a &lt;=&gt; $b } keys %hash;\nmy $BestMatch = $hash{ keys [0] };\n\nif ( $keys[0] &lt; 8 ) {\n    $$RawSequence =~ s/\\Q$BestMatch\\E/CGGAGCTTTACGAGCCGTAGCCCAAACAGTTAATGTAG/g;\n    print \"&gt;|Forward|Distance_of_Best_Match: $keys[0] |Sequence_of_Best_Match: $BestMatch\", \"\\n\",\n            \"$$RawSequence\", \"\\n\";\n}\n</code></pre>\n\n<p>Here is an abbreviated version of my non-working code. Things that haven't changed I didn't included: </p>\n\n<p>Headers and Globals:</p>\n\n<pre><code>my $dir          = (\"/Users/roblogan/Documents/FakeFastaFiles\");\nmy @ArrayofFiles = glob \"$dir/*.fasta\";\n\nforeach my $file ( @ArrayofFiles ) {\n\n    open( my $Opened, $file ) or die \"can't open file: $!\";\n\n    while ( my $OpenedFile = &lt;$Opened&gt; ) {\n\n        my $RawSequence = loadSequence($OpenedFile);\n\n        for ( ... ) {\n\n            ...;\n\n            print\n                    \"&gt;|Forward|Distance_of_Best_Match: $keys[0] |Sequence_of_Best_Match: $BestMatch\",\n                    \"\\n\", \"$$RawSequence\", \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>The exact error is: </p>\n\n<pre><code>Uncaught exception from user code:\n        No such file or directory at ./levenshtein_for_directory.pl line 93, &lt;$Opened&gt; line 1.\n    main::loadSequence('{\\rtf1\\ansi\\ansicpg1252\\cocoartf1404\\cocoasubrtf470\\x{a}') called at ./levenshtein_for_directory.pl line 22 \n</code></pre>\n\n<p>line 93: </p>\n\n<pre><code>     89 sub loadSequence{\n     90         my ($sequenceFile) = @_;\n     91         my $sequence = \"\";\n     92         unless (open(FASTA, \"&lt;\", $sequenceFile)){\n     93                 die $!;\n     94         } \n</code></pre>\n\n<p>Line 22: </p>\n\n<pre><code>     18         foreach my $file ( @ArrayofFiles ) {\n     19             open (my $Opened, $file) or die \"can't open file: $!\";\n     20             while (my $OpenedFile = &lt;$Opened&gt;) {\n     21 \n     22                 my $RawSequence = loadSequence($OpenedFile);\n     23 \n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1467087141, "post_id": 38059875, "comment_id": 63572159, "body": "And, since 5.24, the word &quot;perl6&quot; is not considered a match for &quot;perl&quot;, meaning that if a program with a perl6 shebang is run by the perl5 interpreter, it will re-exec perl6, rather than try to run it itself. <code>perlrun</code> doesn&#39;t appear to have been updated to reflect this."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1467087186, "post_id": 38059875, "comment_id": 63572170, "body": "(if you&#39;re really determined to get a loop, you can probably get one by symlinking perl 5.24 as <code>perl6</code>, since the loop-breaking condition <i>doesn&#39;t</i> have this exception.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1467087252, "post_id": 38059875, "comment_id": 63572190, "body": "@hobbs, The code to which I linked is for 5.24. Further details can be seen there, and in ThisSuitIsBlackNot&#39;s answer. I was limiting the answer to the scope of the question, but there are indeed other &quot;hidden&quot; rules."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 12, "last_activity_date": 1468691727, "last_edit_date": 1468691727, "creation_date": 1467048553, "answer_id": 38059875, "question_id": 38059830, "link": "https://stackoverflow.com/questions/38059830/how-does-perl-avoid-shebang-loops/38059875#38059875", "title": "How does Perl avoid shebang loops?", "body": "<p>The documentation for this feature is found in <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\">perlrun</a>.</p>\n\n<blockquote>\n  <p>If the <code>#!</code> line does not contain the word \"perl\" nor the word \"indir\", the program named after the <code>#!</code> is executed instead of the Perl interpreter. This is slightly bizarre, but it helps people on machines that don't do <code>#!</code>, because they can tell a program that their SHELL is <em>/usr/bin/perl</em>, and Perl will then dispatch the program to the correct interpreter for them.</p>\n</blockquote>\n\n<p>So, if the shebang contains <code>perl</code> or <code>indir</code>, the interpreter from the shebang line isn't executed.</p>\n\n<p><a href=\"http://perl5.git.perl.org/perl.git/blob/be2c0c650b028f54e427f2469a59942edfdff8a9:/toke.c#l5116\" rel=\"nofollow\">Additionally</a>, the interpreter from the shebang line isn't executed if <code>argv[0]</code> doesn't contain <code>perl</code>. This is what prevents the infinite loop in your example.</p>\n\n<ul>\n<li><p>When launched using <code>perl /tmp/pscript</code>,</p>\n\n<ol>\n<li>the kernel executes <code>perl /tmp/pscript</code>,</li>\n<li>then <code>perl</code> executes <code>/tmp/p /tmp/pscript</code>.</li>\n<li>At this point, <code>argv[0]</code> doesn't contain <code>perl</code>, so the shebang line is no longer relevant.</li>\n</ol></li>\n<li><p>When launched using <code>/tmp/pscript</code>,</p>\n\n<ol>\n<li>the kernel executes <code>/tmp/p /tmp/pscript</code>.</li>\n<li>At this point, <code>argv[0]</code> doesn't contain <code>perl</code>, so the shebang line is no longer relevant.</li>\n</ol></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1468691604, "post_id": 38063355, "comment_id": 64235591, "body": "Note: This assumes the OP launched the script using <code>perl &#47;tmp&#47;pscript</code>. The answer is slightly different when the script is launched using <code>&#47;tmp&#47;pscript</code>."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 12, "last_activity_date": 1467086187, "last_edit_date": 1467086187, "creation_date": 1467062028, "answer_id": 38063355, "question_id": 38059830, "link": "https://stackoverflow.com/questions/38059830/how-does-perl-avoid-shebang-loops/38063355#38063355", "title": "How does Perl avoid shebang loops?", "body": "<p>The relevant code is in <a href=\"https://github.com/Perl/perl5/blob/v5.24.0/toke.c#L5005\">toke.c</a>, the Perl lexer. If:</p>\n\n<ul>\n<li><p>line 1 begins with <code>#!</code> (optionally preceded by whitespace) AND</p></li>\n<li><p>does not contain <code>perl -</code> AND</p></li>\n<li><p>does not contain <code>perl</code> (unless followed by a <code>6</code>, i.e. <code>perl6</code>) AND</p></li>\n<li><p>(on \"DOSish\" platforms) does not contain a case-insensitive match of <code>perl</code> (e.g. <code>Perl</code>) AND</p></li>\n<li><p>does not contain <code>indir</code> AND</p></li>\n<li><p>the <code>-c</code> flag was not set on the command line AND</p></li>\n<li><p><code>argv[0]</code> contains <code>perl</code></p></li>\n</ul>\n\n<p>the program following the shebang is executed with <code>execv</code>. Otherwise, the lexer just keeps going; perl doesn't <code>exec</code> itself.</p>\n\n<p>As a result, you can do some pretty weird things with the shebang without perl trying to <code>exec</code> another interpreter:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    #!     perl\n#!foo perl\n#!fooperlbar -p\n#!perl 6\n#!PeRl          # on Windows\n</code></pre>\n\n<hr>\n\n<p>Your symlink example meets all of the conditions listed above, so why isn't there an infinite loop? You can see what's going on with <code>strace</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ln -s /usr/bin/perl foo\n$ echo '#!foo' &gt; bar\n$ strace perl bar 2&gt;&amp;1 | grep exec\nexecve(\"/bin/perl\", [\"perl\", \"bar\"], [/* 27 vars */]) = 0\nexecve(\"foo\", [\"foo\", \"bar\"], [/* 27 vars */]) = 0\n</code></pre>\n\n<p>Perl actually does <code>exec</code> the link, but because it doesn't contain <code>perl</code> in the name, the last condition is no longer met the second time around and the loop ends.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 1, "accepted_answer_id": 38063355, "answer_count": 2, "score": 10, "last_activity_date": 1468691727, "creation_date": 1467048379, "question_id": 38059830, "link": "https://stackoverflow.com/questions/38059830/how-does-perl-avoid-shebang-loops", "title": "How does Perl avoid shebang loops?", "body": "<p><code>perl</code> interprets the shebang itself and mimics the behavior of <code>exec*(2)</code>. I think it emulates the Linux behavior of splitting on all whitespace instead of BSD first-whitespace-only thing, but never mind that.</p>\n\n<p>Just as a quick demonstration <code>really_python.pl</code></p>\n\n<pre><code>#!/usr/bin/env python\n\n# the following line is correct Python but not correct Perl\nfrom collections import namedtuple\nprint \"hi\"\n</code></pre>\n\n<p>prints hi when invoked as <code>perl really_python.pl</code>.</p>\n\n<p>Also, the following programs will do the right thing regardless of whether they are invoked as <code>perl program</code> or <code>./program</code>.</p>\n\n<pre><code>#!/usr/bin/perl\nprint \"hi\\n\";\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#!/usr/bin/env perl\nprint \"hi\\n\";\n</code></pre>\n\n<p>I don't understand why the program isn't infinite looping. In either of the above cases, the shebang line either is or resolves to an absolute path to the <code>perl</code> interpreter. It seems like the next thing that should happen after that is <code>perl</code> parses the file, notices the shebang, and delegates to the shebang path (in this case itself). Does <code>perl</code> compare the shebang path to its own <code>ARGV[0]</code>? Does <code>perl</code> look at the shebang string and see if it contains <code>\"perl\"</code> as a substring?</p>\n\n<p>I tried to use a symlink to trigger the infinite loop behavior I was expecting.</p>\n\n<pre><code>$ ln -s /usr/bin/perl /tmp/p\n\n#!/tmp/p\nprint \"hi\\n\";\n</code></pre>\n\n<p>but that program printed \"hi\" regardless of how it was invoked.</p>\n\n<p>On OS X, however, I was able to trick <code>perl</code> into an infinite shebang loop with a script.</p>\n\n<p>Contents of <code>/tmp/pscript</code></p>\n\n<pre><code>#!/bin/sh\nperl \"$@\"\n</code></pre>\n\n<p>Contents of perl script</p>\n\n<pre><code>#!/tmp/pscript\nprint \"hi\\n\";\n</code></pre>\n\n<p>and this does infinite loop (on OS X, haven't tested it on Linux yet).</p>\n\n<p><code>perl</code> is clearly going to a lot of trouble to handle shebangs correctly in reasonable situations. It isn't confused by symlinks and isn't confused by normal <code>env</code> stuff. What exactly is it doing?</p>\n"}, {"tags": ["perl", "mason"], "comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1467048135, "post_id": 38059228, "comment_id": 63558381, "body": "You will have better chances if you show what you have done so far."}], "answers": [{"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": true, "score": 4, "last_activity_date": 1467073912, "creation_date": 1467073912, "answer_id": 38065269, "question_id": 38059228, "link": "https://stackoverflow.com/questions/38059228/get-the-request-url-in-htmlmason/38065269#38065269", "title": "Get the request URL in HTML::Mason", "body": "<p>In addition to the <code>$m</code> Mason request object you also have <code>$r</code> the Apache request object.  The <code>uri</code> method will return the path component of the requested URL:</p>\n\n<pre><code>my $url = $r-&gt;uri;\n</code></pre>\n\n<p>You can read more in the <a href=\"https://metacpan.org/pod/distribution/HTML-Mason/lib/HTML/Mason/Devel.pod#Request-Objects\" rel=\"nofollow\">Mason Developer's Manual</a>.</p>\n\n<p>If you want the requested URL including the query string, you can use the <code>unparsed_uri</code> method:</p>\n\n<pre><code>my $url_with_qs = $r-&gt;unparsed_uri;\n</code></pre>\n\n<p>You can read more in the <a href=\"https://metacpan.org/pod/Apache2::RequestRec\" rel=\"nofollow\">mod_perl documentation for Apache2::RequestRec</a>.</p>\n"}], "owner": {"reputation": 159, "user_id": 2190981, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yNFX1.jpg?s=128&g=1", "display_name": "Sayhan", "link": "https://stackoverflow.com/users/2190981/sayhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1504, "favorite_count": 0, "accepted_answer_id": 38065269, "answer_count": 1, "score": 1, "last_activity_date": 1467073912, "creation_date": 1467046082, "question_id": 38059228, "link": "https://stackoverflow.com/questions/38059228/get-the-request-url-in-htmlmason", "title": "Get the request URL in HTML::Mason", "body": "<p>How we can find the GET request URL in a perl website using HTML::Mason. I have tried using $m object from Mason.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1467051548, "post_id": 38058905, "comment_id": 63560156, "body": "Are you asking us to debug your code, or do you have a specific question?"}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1467059730, "post_id": 38058905, "comment_id": 63564553, "body": "Yes a debug, I&#39;m wondering why this happens &quot;with my original ARGV[0] that has about 1300 lines, it produces about 6000 lines of output to standard output somehow&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 0, "last_activity_date": 1467103109, "creation_date": 1467103109, "answer_id": 38071147, "question_id": 38058905, "link": "https://stackoverflow.com/questions/38058905/detecting-overlap-in-my-data-files-start-and-stop-positions-and-separating-them/38071147#38071147", "title": "detecting overlap in my data files start and stop positions and separating them", "body": "<p>Firstly, there is a mistake with this assignment: $i=$j; This way you overshoot one input line when an overlap occurs.\nSecondly, the inner cycle list should be ($i+1..$ARGV[3]-1), not ($i+1..$ARGV[3]).\nThirdly, you need to skip over processed lines when there are no overlap till the end of file. \nOtherwise you get the same lines over and over.\nIt can be done like this (note $new_i):</p>\n\n<pre><code>while ($i &lt; $ARGV[3]) {\n...\n    my $new_i=$i;\n    for my $j ($i+1..$ARGV[3]-1) {\n        $new_i=$j;\n        ...\n        else {\n            # you don't need this assignment\n            # $i=$j;\n            last;\n        }\n    }\n    $i=$new_i+1;\n}\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467103109, "creation_date": 1467044865, "last_edit_date": 1467066862, "question_id": 38058905, "link": "https://stackoverflow.com/questions/38058905/detecting-overlap-in-my-data-files-start-and-stop-positions-and-separating-them", "title": "detecting overlap in my data files start and stop positions and separating them", "body": "<p>This script I'm working with is intended to looked a through a file and detect moments of overlap, all the overlapping positions are put into new files.</p>\n\n<p>column 2 can be thought of as a start position and column 2 can be looked at as a stop position so in the example of </p>\n\n<pre><code>2 6 10 5\n2 9 13 5\n3 8 9 5\n</code></pre>\n\n<p>The first two lines would have overlap since the second starts at 9 and the first ends at 10 so they would be overlapped in the 9-10 position.\nThe third line does not have overlap however because the number in the first column is 3 and not 2 which is necessary criteria.</p>\n\n<p>Now that you understand what is meant by overlap</p>\n\n<p>The input in ARGV[0] is a file with is like </p>\n\n<pre><code>9   9000000 14100000    23\n9   9000000 32800000    4\n9   9000000 40200000    6\n9   9000000 42400000    5\n9   89600000    116700000   28\n9   89600000    129300000   8\n9   89600000    140273252   52\nS   0   24900000    2\nS   0   24900000    22\nS   0   37500000    2\nS   40000000 45000000 7\nS   42500000 47000000 9\n</code></pre>\n\n<p>Given this file ARGV[1] by the end will end up having in it</p>\n\n<pre><code>9   9000000 14100000    23\n9   89600000    116700000   28\nS   0   24900000    2\nS   40000000 45000000 7\n</code></pre>\n\n<p>This(which i will call z.txt later) will be passed to standard output</p>\n\n<pre><code>9   9000000 32800000    4\n9   9000000 40200000    6\n9   9000000 42400000    5\n9   89600000    129300000   8\n9   89600000    140273252   52\nS   0   24900000    22\nS   0   37500000    2\nS   42500000 47000000 9\n</code></pre>\n\n<p>ARGV[3] is essentially a wc -l #file | awk '{print $1}'\nof the file that ARGV[0] is</p>\n\n<p>This is the code</p>\n\n<pre><code>#!/usr/bin/perl\n# ARGV[0] is the name of the file which data will be read from(may have overlaps)\n# ARGV[1] is the name of the file which will be produced that will have no overlaps\n# ARGV[2] is the name of a directory\n# ARGV[3] is the number of lines that ARGV[0] will contain\n#The purpose of this script is to look through the data file and if there are overlaps then another layer is created\nuse warnings;\n#use strict;\n\n#Here I am just trying to open up my file in order to read from it\nmy $file = \"./$ARGV[0]\";\nmy @lines = do {\n    open my $fh, '&lt;', $file or die \"Can't open $file -- $!\";\n    &lt;$fh&gt;;\n};\n\n#Here I am assignning a secon file that will contain the overlaps\nmy $file2 = \"./$ARGV[2]/$ARGV[1]\";\nopen(my $fh, \"&gt;\", \"$file2\")\n        or die \"Can't open &gt; $file2: $!\";\n\n# For each element compare all following ones, but cut out\n# as soon as there's no overlap since data is sorted\nmy $i = 0;\nwhile ($i &lt; $ARGV[3]) {\n        my @ref_fields = split('\\s+', $lines[$i]);\n#This line is printed to the file handle because it shouldn't have any overlaps so everyline in this file will not overlap with any other\n        print $fh \"$ref_fields[0]\", \"\\t\", $ref_fields[1], \"\\t\", $ref_fields[2], \"\\t\", $ref_fields[3], \"\\n\";\n#The script then looks at the lines following the line just looked at\n        for my $j ($i+1..$ARGV[3]) {\n                my @curr_fields = split /\\s+/, $lines[$j];\n#if the line does overlap then print it to standard output\n                if ( $ref_fields[2] &gt; $curr_fields[1] ) {\n                        print $curr_fields[0], \"\\t\", $curr_fields[1], \"\\t\", $curr_fields[2], \"\\t\", $curr_fields[3], \"\\n\";\n                }\n                else {\n#if it doesn't, since all the file is sorted the overlaps are done with\n                        $i=$j;\n                        last;\n                }\n        }\n        $i++;\n}\n</code></pre>\n\n<p>Once this script is done then the standard output can be put in a file and run through the script again, so that the overlaps can be weeded out again</p>\n\n<p>unfortunately with my original ARGV[0] that has about 1300 lines, it produces about 6000 lines of output to standard output somehow</p>\n\n<p>Sorry if this is confusing, it's a tricky concept for me but ask any questions if you have them</p>\n\n<p>Thank-you</p>\n\n<p>Extra example</p>\n\n<p>If z.txt is run through this code again it should print to ARGV[1]</p>\n\n<pre><code>9   9000000 32800000    4\n9   89600000    129300000   8\nS   0   24900000    22\nS   42500000 47000000 9\n</code></pre>\n\n<p>And standard output it should print </p>\n\n<pre><code>9   9000000 40200000    6\n9   9000000 42400000    5\n9   89600000    140273252   52\nS   0   37500000    2\n</code></pre>\n"}, {"tags": ["perl", "awk"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1467045122, "post_id": 38058860, "comment_id": 63556719, "body": "That isn&#39;t the output the OP is asking for."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1467046662, "post_id": 38058860, "comment_id": 63557563, "body": "I was demonstrating the quoting logic, limit the number of machines should be an easy extension for the OP"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": -1, "last_activity_date": 1467044703, "creation_date": 1467044703, "answer_id": 38058860, "question_id": 38058703, "link": "https://stackoverflow.com/questions/38058703/print-list-on-a-single-line-from-a-pipe/38058860#38058860", "title": "Print list on a single line from a pipe", "body": "<pre><code>#!perl \n\nuse strict;\nuse warnings; \n\nwhile ( my $line = readline(*STDIN) ) {\n   chomp $line;\n   my @machines = split /\\|/, $line;\n   print join(',', map { '\"' . $_ . '\"' } @machines), \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ cat list.txt | perl test.pl \n\"Row1\",\"PCName\",\"PC1.local\"\n\"Row2\",\"PCName\",\"PC2.local\"\n\"Row3\",\"PCName\",\"PC3.local\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1467044724, "creation_date": 1467044724, "answer_id": 38058866, "question_id": 38058703, "link": "https://stackoverflow.com/questions/38058703/print-list-on-a-single-line-from-a-pipe/38058866#38058866", "title": "Print list on a single line from a pipe", "body": "<p>How about:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nprint join \",\", map { chomp; '\"'.(split /\\|/)[2].'\"' } &lt;DATA&gt; ;\n\n__DATA__\nRow1|PCName|PC1.local\nRow2|PCName|PC2.local\nRow3|PCName|PC3.local\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"PC1.local\",\"PC2.local\",\"PC3.local\"\n</code></pre>\n\n<p>As a one liner:</p>\n\n<pre><code>perl -e 'print join \",\", map { s/\\n//; q{\"}.(split /\\|/)[2].q{\"} } &lt;&gt;'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1467059009, "post_id": 38060231, "comment_id": 63564205, "body": "It needs to be <code>paste -s -d, -</code> (with a <code>-</code> for stdin instead of a file name) on OSX at least."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1467049962, "creation_date": 1467049962, "answer_id": 38060231, "question_id": 38058703, "link": "https://stackoverflow.com/questions/38058703/print-list-on-a-single-line-from-a-pipe/38060231#38060231", "title": "Print list on a single line from a pipe", "body": "<p>with unix toolset</p>\n\n<pre><code>$ cut -d'|' -f3 file | sed 's/.*/\"&amp;\"/' | paste -s -d,\n</code></pre>\n\n<p>extract third field, wrap with quotes, join with comma</p>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1467058837, "creation_date": 1467058837, "answer_id": 38062541, "question_id": 38058703, "link": "https://stackoverflow.com/questions/38058703/print-list-on-a-single-line-from-a-pipe/38062541#38062541", "title": "Print list on a single line from a pipe", "body": "<pre><code>$ awk -F'|' '{printf \"%s\\\"%s\\\"\", (NR&gt;1?\", \":\"\"), $3} END{print \"\"}' file\n\"PC1.local\", \"PC2.local\", \"PC3.local\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467067934, "last_edit_date": 1467067934, "creation_date": 1467065236, "answer_id": 38063971, "question_id": 38058703, "link": "https://stackoverflow.com/questions/38058703/print-list-on-a-single-line-from-a-pipe/38063971#38063971", "title": "Print list on a single line from a pipe", "body": "<p></p>\n\n<p>Here's a Perl one-line solution</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -le 'print join \", \", map { /([^|\\s]+)$/ &amp;&amp; qq{\"$1\"} } &lt;&gt;' myfile\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"PC1.local\", \"PC2.local\", \"PC3.local\"\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 2474912, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/i6p16.gif?s=128&g=1", "display_name": "JohnnyLoo", "link": "https://stackoverflow.com/users/2474912/johnnyloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "answer_count": 5, "score": -1, "last_activity_date": 1517598303, "creation_date": 1467044079, "last_edit_date": 1467065521, "question_id": 38058703, "link": "https://stackoverflow.com/questions/38058703/print-list-on-a-single-line-from-a-pipe", "title": "Print list on a single line from a pipe", "body": "\n\n<p>I have a list of PCs and I need to append quotes and commas to each of them so that I can do a SQL query</p>\n\n<p>List example</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Row1|PCName|PC1.local\nRow2|PCName|PC2.local\nRow3|PCName|PC3.local\n</code></pre>\n\n<p>and I need to get this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"PC1.local\", \"PC2.local\", \"PC3.local\", ......\n</code></pre>\n\n<p>Here is what I tried</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cat list.txt | awk -F\\| '{print $NF}' | perl -e 'while(&lt;&gt;){ print \"\\\"$_\\\", \";}'\n</code></pre>\n\n<p>I get this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\", \"PC1.local\n\", \"PC2.local\n\", \"PC3.local\n\", \"\n</code></pre>\n\n<p>How can I make those PCs show up in a single line and with the format that I need?</p>\n\n<p>I know using awk or perl might be overkill for this and it could be done using Perl alone or awk alone, but I'm interested in learning how to pipe things to Perl. How can I make Perl print those PC names in the format I need?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1467044109, "post_id": 38057637, "comment_id": 63556111, "body": "Does your input have numbered data, or have you just numbered the examples?"}], "answers": [{"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 0, "last_activity_date": 1467043474, "creation_date": 1467043474, "answer_id": 38058534, "question_id": 38057637, "link": "https://stackoverflow.com/questions/38057637/one-consolidated-regex-for-below-inputes/38058534#38058534", "title": "One consolidated regex for below inputes", "body": "<p>Try this:</p>\n\n<pre><code>#!/usr/bin/perl\nwhile(&lt;&gt;) {\n    next unless m{interface\\s+(\\S+)(\\s+(.+))?\\s*$};\n    print \"1st group:-$1\";\n    print \" 2nd group:-$3\" if $3 ne '';\n    print \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "is_accepted": false, "score": 0, "last_activity_date": 1467044422, "last_edit_date": 1467044422, "creation_date": 1467043915, "answer_id": 38058653, "question_id": 38057637, "link": "https://stackoverflow.com/questions/38057637/one-consolidated-regex-for-below-inputes/38058653#38058653", "title": "One consolidated regex for below inputes", "body": "<p>You have simple space-separated data. It looks like this might be an easier solution:</p>\n\n<pre><code>if ($line =~ /^interfaces/) {\n    chomp($line);\n    my @fields = split(/ /, $line, 3);\n\n    # Use $fields[1], and use $fields[2] if it is defined.\n    # Check with e.g., scalar(@fields) == 3\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": false, "score": 0, "last_activity_date": 1467044076, "creation_date": 1467044076, "answer_id": 38058702, "question_id": 38057637, "link": "https://stackoverflow.com/questions/38057637/one-consolidated-regex-for-below-inputes/38058702#38058702", "title": "One consolidated regex for below inputes", "body": "<p>Try this:</p>\n\n<pre><code>^\\s*interface\\s(\\S+)(.*)?\n</code></pre>\n\n<p>See <a href=\"http://rubular.com/r/Xvsq769leN\" rel=\"nofollow\">live demo</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1467044281, "creation_date": 1467044281, "answer_id": 38058748, "question_id": 38057637, "link": "https://stackoverflow.com/questions/38057637/one-consolidated-regex-for-below-inputes/38058748#38058748", "title": "One consolidated regex for below inputes", "body": "<p>Don't regex, use <code>split</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) { \n   chomp;\n   next unless /interface/;\n   my ( undef, undef, $if_name, $options ) = split / /, $_, 4;\n   print \"$if_name =&gt; \",$options // '(none)',\"\\n\";\n}\n\n__DATA__\n1. interface eth1/10.404 p2p \n2. interface ae0.100 p2p\n3. interface pool0 multibind lastresort\n4. interface loop0 loopback\n5. interface ae0.100\n6. interface loop0\n</code></pre>\n\n<p>Uses <code>//</code> which is the 'defined' conditional, to return either the value or the string '(none)'. </p>\n\n<p>output:</p>\n\n<pre><code>eth1/10.404 =&gt; p2p \nae0.100 =&gt; p2p\npool0 =&gt; multibind lastresort\nloop0 =&gt; loopback\nae0.100 =&gt; (none)\nloop0 =&gt; (none)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "is_accepted": false, "score": 0, "last_activity_date": 1467044348, "creation_date": 1467044348, "answer_id": 38058767, "question_id": 38057637, "link": "https://stackoverflow.com/questions/38057637/one-consolidated-regex-for-below-inputes/38058767#38058767", "title": "One consolidated regex for below inputes", "body": "<p>This seems to work for me :</p>\n\n<p><code>interface(\\s[\\w\\d\\/.]+)(.*)?</code></p>\n\n<p>Demo <a href=\"https://regex101.com/r/iV4vA3/1\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 67, "user_id": 5886828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c24bfdc6152eedeb98723edddc1eba67?s=128&d=identicon&r=PG&f=1", "display_name": "SwapnilM", "link": "https://stackoverflow.com/users/5886828/swapnilm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 38058748, "answer_count": 5, "score": 1, "last_activity_date": 1467044422, "creation_date": 1467040733, "last_edit_date": 1467042965, "question_id": 38057637, "link": "https://stackoverflow.com/questions/38057637/one-consolidated-regex-for-below-inputes", "title": "One consolidated regex for below inputes", "body": "<p>Can someone give consolidated regex for below inputs?</p>\n\n<pre><code>1. interface eth1/10.404 p2p \n2. interface ae0.100 p2p\n3. interface pool0 multibind lastresort\n4. interface loop0 loopback\n5. interface ae0.100\n6. interface loop0\n</code></pre>\n\n<p>I have created one but it is not giving me the desired output:</p>\n\n<pre><code>/^\\sinterface\\s(((\\w*\\/*\\w*.\\w*)\\s(\\w*.*))|((\\w*\\/*\\w*.\\w*)))/\n</code></pre>\n\n<p>The output I require is that from each input I receive the value as:</p>\n\n<ol>\n<li><ul>\n<li>1st group: eth1/10.404  </li>\n<li>2nd group: p2p</li>\n</ul></li>\n<li><ul>\n<li>1st group: ae0.100  </li>\n<li>2nd group: p2p</li>\n</ul></li>\n<li><ul>\n<li>1st group: pool0 </li>\n<li>2nd group: multibind lastresort</li>\n</ul></li>\n<li><ul>\n<li>1st group: loop0</li>\n<li>2nd group: loopback</li>\n</ul></li>\n<li><ul>\n<li>1st group: ae0.100</li>\n</ul></li>\n<li><ul>\n<li>1st group: loop0</li>\n</ul></li>\n</ol>\n\n<p>The above regex is not working for 3 inputs.</p>\n"}, {"tags": ["perl", "ssh", "sftp"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1467053774, "post_id": 38056996, "comment_id": 63561409, "body": "Cross posted in PerlMonks: <a href=\"http://perlmonks.org/?node_id=1166664\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1166664</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "edited": false, "score": 1, "creation_date": 1467050545, "post_id": 38057554, "comment_id": 63559599, "body": "Net::SFTP is &#39;pure perl&#39;, yet requires compiling some hairy math libraries. Net::SFTP::Foreign uses your system&#39;s existing &#39;ssh&#39; command...IMO, it&#39;s the simpler and preferred library for sftp."}, {"owner": {"reputation": 91, "user_id": 6381564, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/32afda75f32199383320fc76dc80f7b6?s=128&d=identicon&r=PG&f=1", "display_name": "Edu", "link": "https://stackoverflow.com/users/6381564/edu"}, "edited": false, "score": 0, "creation_date": 1467053198, "post_id": 38057554, "comment_id": 63561082, "body": "Thanks for the reply! I just tried the below. and it worked fine.  my $sftp = Net::SFTP::Foreign -&gt;new(host=&gt; $ftp_address, user =&gt; $ftp_user_id, password =&gt; $ftp_password ); $sftp-&gt;$direction($ftp_source, $ftp_target, conversion =&gt; &#39;unix2dos&#39; ) or die &quot;put failed: &quot; . $sftp-&gt;error;   The job went fine with the valid input parameters. But in the command line, its showing the following message.   SSH Server supporting SFTP and SCP password Enter password for icrestb  Can you please advice on how to avoid getting this password message?  Thanks"}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": false, "score": -1, "last_activity_date": 1505231707, "last_edit_date": 1505231707, "creation_date": 1467040443, "answer_id": 38057554, "question_id": 38056996, "link": "https://stackoverflow.com/questions/38056996/perl-netsftpforeign-password-authentication-no-key-exchange-setup-can-be-d/38057554#38057554", "title": "Perl Net::SFTP::Foreign password authentication . No key exchange setup can be done", "body": "<p>I do not see a point of using the Net::SFTP::Foreign, use the native Net::SFTP.</p>\n\n<hr>\n\n<p>Anyway, the <code>PreferredAuthentications</code> just lists your preference order of authentication mechanisms. The <code>publickey</code> does not refer to any specific key. It just says that the Net::SFTP::Foreign should try first password authentication, if that fails, try keyboard-interactive authentication, and only, if even that fails, try the public key authentication. Obviously, if you do not specify any key pair, the public key authentication won't be tried, even if listed.</p>\n\n<p>See also the <code>PreferredAuthentications</code> entry in the <a href=\"https://man.openbsd.org/ssh_config\" rel=\"nofollow noreferrer\"><code>ssh_config</code> man page</a>.</p>\n\n<p>If you want to use the password authentication no matter what, there's no point listing the other methods, list just the password:</p>\n\n<pre><code>-o =&gt; 'PreferredAuthentications=password'\n</code></pre>\n\n<hr>\n\n<p>The IO:Pty is needed to implement the password authentication using \nthe Net::SFTP::Foreign, but not when using the Net::SFTP (though that have other dependencies too).</p>\n"}], "owner": {"reputation": 91, "user_id": 6381564, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/32afda75f32199383320fc76dc80f7b6?s=128&d=identicon&r=PG&f=1", "display_name": "Edu", "link": "https://stackoverflow.com/users/6381564/edu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 934, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1505231707, "creation_date": 1467038822, "last_edit_date": 1467040617, "question_id": 38056996, "link": "https://stackoverflow.com/questions/38056996/perl-netsftpforeign-password-authentication-no-key-exchange-setup-can-be-d", "title": "Perl Net::SFTP::Foreign password authentication . No key exchange setup can be done", "body": "<p>I got the Net::SFTP::Foreign module installed and it is being worked fine for the key-exchange sftp set-up. But I need to set it up to have password based authentication where it should take the password that I passed to login.</p>\n\n<p>I have gone through multiple threads on this topic and found that it is somehow possible using IO:Pty module of Perl. Below is the command that I found to use.</p>\n\n<pre><code>my $sftp = Net::SFTP::Foreign-&gt;new(\n    $host, \n    user =&gt; $user, \n    password =&gt; $password,\n    more =&gt; [\n        -o =&gt; 'PreferredAuthentications=password,keyboard-interactive,***publickey***'\n    ],\n);\n</code></pre>\n\n<p>But here, in the preferred authentications, the public key is also being passed. </p>\n\n<p>Can anyone please help me on this? What is the public key that is being referred here?</p>\n\n<p>Also, installing IO::Pty along with Net::SFTP::Foreign modules can server my requirement?</p>\n\n<p>Please help.</p>\n\n<p>Thanks and Regards,<br>\nEdu</p>\n"}, {"tags": ["xml", "perl", "xpath", "xquery", "basex"], "comments": [{"owner": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1467061516, "post_id": 38056743, "comment_id": 63565372, "body": "Without (original) data, it is hard to give proper advice. For reasonable performance, using the right indices will be crucial. BaseX&#39; query info pane in the GUI (or enable the query info for command line queries) will help you understand when it uses which index. You can also <a href=\"http://docs.basex.org/wiki/Index_Module\" rel=\"nofollow noreferrer\">enforce index usage</a>. I&#39;d go for querying the text index using <a href=\"http://docs.basex.org/wiki/Index_Module#index:texts\" rel=\"nofollow noreferrer\"><code>index:texts</code></a> (I don&#39;t think you need the full text index here) for each word, then filter as needed and count the result."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1467062505, "post_id": 38056743, "comment_id": 63565791, "body": "@JensErat Because other users are also running other queries, it is not possible to index to my own needs unfortunately."}, {"owner": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1467062909, "post_id": 38056743, "comment_id": 63565969, "body": "An index is <i>crucial</i> for reasonable search performance. Creating the query will heavily speed up all following queries by magnitude (if used properly). Is there any reason <i>against</i> creating an index? Are you sure a text index is not already created anyway?"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1467063039, "post_id": 38056743, "comment_id": 63566035, "body": "I think I misunderstood what you mean by indices, then. Can you link me to any low-level documentation about indices in Basex?"}, {"owner": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 1, "creation_date": 1467063958, "post_id": 38056743, "comment_id": 63566428, "body": "The <a href=\"http://docs.basex.org/wiki/Indexes\" rel=\"nofollow noreferrer\">BaseX wiki page on indexes</a> contains a broad description on what indexes exist. There are some very basic indexes generated by default, and the query optimizer tries to use them whenever it is reasonable. For complex queries, it sometimes fails at realizing index usage would be reasonable. With very large amounts of data, using the index explicitly can sometimes speed-up query times by orders of magnitude."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1467146891, "post_id": 38056743, "comment_id": 63608354, "body": "Thank you for your replies thus far. I&#39;ll have to come back to you when I have some more time!"}], "answers": [{"tags": [], "owner": {"reputation": 608, "user_id": 6023509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee544f146506ea15cfd7d66f2b2e4ede?s=128&d=identicon&r=PG&f=1", "display_name": "Chondrops", "link": "https://stackoverflow.com/users/6023509/chondrops"}, "is_accepted": true, "score": 1, "last_activity_date": 1468250535, "creation_date": 1468250535, "answer_id": 38310643, "question_id": 38056743, "link": "https://stackoverflow.com/questions/38056743/most-efficient-way-to-count-occurrences-in-xquery-for-multiple-values/38310643#38310643", "title": "Most efficient way to count occurrences in XQuery for multiple values", "body": "<p>In general BaseX queries will be fastest (often, blindingly fast) if you leverage an index rather than making your query traverse a trillion nodes. BaseX creates the TEXT, ATTRIBUTE and TOKEN indices for you by default, unless you have modified the default DB creation options. (BaseX also tries to re-write queries to leverage the indices - although it's not always successful in this).</p>\n\n<p>So assuming that your databases have been built with an ATTRIBUTE index, you should be able to re-write your query along these lines:</p>\n\n<pre><code>db:attribute('dbname', 'accelerator', 'word')/parent::*\n</code></pre>\n\n<p>The db:attribute function as used above will return, for database 'dbname', the parent element of any attribute with 'accelerator' as the value for @word. Obviously you can predicate this query as much as needed, something like this, judging from your previous example:</p>\n\n<pre><code>db:attribute('dbname', 'accelerator', 'word')\n      [parent::node[@rel=\"hd\" and @pt=\"n\"]]\n      [ancestor::node\n        [@cat=\"np\"]\n        [child::node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"het\"]\n      ]\n    ]\n</code></pre>\n\n<p>Here is good documentation on the BaseX's index functionality. I've used it to great effect for speed querying of large (> 20 GB) databases.</p>\n\n<p><a href=\"http://docs.basex.org/wiki/Indexes\" rel=\"nofollow\">http://docs.basex.org/wiki/Indexes</a></p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 38310643, "answer_count": 1, "score": 6, "last_activity_date": 1468250535, "creation_date": 1467038148, "last_edit_date": 1467832257, "question_id": 38056743, "link": "https://stackoverflow.com/questions/38056743/most-efficient-way-to-count-occurrences-in-xquery-for-multiple-values", "title": "Most efficient way to count occurrences in XQuery for multiple values", "body": "<p>I have 1581 words that I need to look up in an XML corpus of Dutch (500 million words). This corpus itself is split up in many databases. (You can read why <a href=\"http://www.lrec-conf.org/proceedings/lrec2014/workshops/LREC2014Workshop-CMLC2%20Proceedings-rev2.pdf#page=20\" rel=\"nofollow\">here</a>.) We use BaseX as a server (version 7.9), which uses XQuery as input.</p>\n\n<p>I am interested in finding out how many times each word is in the corpus with a neuter determiner (<em>het</em>) or a non neuter determiner (<em>de</em>) - this is done by looking for an XPath structure that consists of an NP (noun phrase) which has two daughters, namely a determiner with as lemma <em>de</em> or <em>het</em>, and a head, which is the word I am interested in.</p>\n\n<p><strong>Example structures for <em>de</em></strong></p>\n\n<pre><code>/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"de\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"accelerator\"]]\n/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"de\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"accountant\"]]\n/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"de\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"ace\"]]\n/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"de\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"acroniem\"]]\n</code></pre>\n\n<p><strong>Example structures for <em>het</em></strong></p>\n\n<pre><code>/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"het\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"accelerator\"]]\n/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"het\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"accountant\"]]\n/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"het\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"ace\"]]\n/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"het\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"acroniem\"]]\n</code></pre>\n\n<p>In XQuery, I would it then do it like so, for each XPath structure:</p>\n\n<pre><code>count(for $node in db:open(\"mydatabase\")/treebank/tree/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"het\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"accelerator\"]] return $node)\n</code></pre>\n\n<p>This works just fine. The thing is, that this takes a long time. Each time, the same (thousands of) databases need to be opened sequentially, and this process is repeated for each word. My question is, isn't there a way to concatenate some queries. I have some ideas, but I'm not sure how to execute them - also, I'm not sure how many arguments BaseX can deal with.</p>\n\n<ol>\n<li>Merge <em>de</em> and <em>het</em> queries.</li>\n</ol>\n\n<p>This is probably the most straightforward case. By doing so, I at least cut the need of queries in half. But I do not know how to distinguish between the two when results are found. For instance, if I change my XPath code to:</p>\n\n<pre><code>... (@lemma=\"de\" or @lemma=\"het\") ...\n</code></pre>\n\n<p>I should find all cases, but how can I then distinguish between one or the other? In other words, if I use that XPath, I will get one number back from the count function in XQuery but there is no way for me to know which are <em>de</em> and which are <em>the</em>?</p>\n\n<ol start=\"2\">\n<li>The same idea can be applied to the word attribute near the end</li>\n</ol>\n\n<p>Instead of executing a new query for each word, I can concatenate them as follows:</p>\n\n<pre><code>... (@word=\"accelerator\" or @word=\"accountant\" or @word=\"ace\" or ...) ...\n</code></pre>\n\n<p>But again, how can I distinguish between these values? And can I put all 1581 values in one XPath? Can BaseX handle that?</p>\n\n<ol start=\"3\">\n<li>A for loop with a list of words which would then return back the results in XML format for a lot of words (maybe all, if BaseX can handle that).</li>\n</ol>\n\n<p>I am no expert in XQuery but in pseudo code I guess something like this is possible:</p>\n\n<pre><code>$wordlist = ['accelerator', 'accountant', 'ace', 'acroniem'];\n$determinerlist = ['de', 'het'];\n$db = 'mydatabase';\nforeach ($wordlist as $word) {\n  foreach ($determinerlist as $det) {\n    count(for $node in db:open(\"'.$db.'\")/treebank/tree/node[@cat=\"np\" and node[@rel=\"det\" and @pt=\"lid\" and @lemma=\"'.$det.'\"] and node[@rel=\"hd\" and @pt=\"n\" and @word=\"'.$word.'\"]] return $node);\n  }\n}\n</code></pre>\n\n<p>I'm not sure how to assign the count to array variables in XQuery, if that is possible, but XML output could look like this (but better variations are welcome of course):</p>\n\n<pre><code>&lt;results&gt;\n  &lt;result word=\"accelerator\"&gt;\n    &lt;neuter&gt;12&lt;/neuter&gt;\n    &lt;nonneuter&gt;3&lt;/nonneuter&gt;\n  &lt;/result&gt;\n  &lt;result word=\"accountant\"&gt;\n    &lt;neuter&gt;4&lt;/neuter&gt;\n    &lt;nonneuter&gt;0&lt;/nonneuter&gt;\n  &lt;/result&gt;\n  &lt;result word=\"ace\"&gt;\n    &lt;neuter&gt;14&lt;/neuter&gt;\n    &lt;nonneuter&gt;2&lt;/nonneuter&gt;\n  &lt;/result&gt;\n  &lt;result word=\"acroniem\"&gt;\n    &lt;neuter&gt;3&lt;/neuter&gt;\n    &lt;nonneuter&gt;7&lt;/nonneuter&gt;\n  &lt;/result&gt;\n&lt;/results&gt;\n</code></pre>\n\n<p>Which I could then run through with Perl with regular expressions or XML twig to get the values I need.</p>\n\n<p>As you can see the may issue is finding a suitable XQuery code that is efficient, and that takes into account that I have 1581 words to look up in a huge corpus, and that the amount of databases to go through are a lot as well (thousands). For each database look up, a new connection is made through Perl.</p>\n\n<p>If you have any questions, please comment and I'll try to answer as well as possible. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1467037902, "post_id": 38056583, "comment_id": 63551892, "body": "What does the data that your are reading from the <code>SEQ</code> filehandle look like?"}, {"owner": {"reputation": 605, "user_id": 5053351, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9891053d4bba049113d50d59f03cf6b?s=128&d=identicon&r=PG", "display_name": "BlueStarry", "link": "https://stackoverflow.com/users/5053351/bluestarry"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1467038049, "post_id": 38056583, "comment_id": 63551998, "body": "SEQ looks like this: &gt;chr1\\tACTGTAGTCTCATCCTAT...\\n&gt;chr2\\tACGTAGCTAGT....\\n and so on"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1467038361, "post_id": 38056583, "comment_id": 63552199, "body": "Can you edit the file example into your question? It is difficult to read in the comment section."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467039845, "post_id": 38056583, "comment_id": 63553161, "body": "You have a <code>foreach</code> inside a <code>while</code>, which will print all of the keys of the <code>%position</code> hash for every line of input. Is that what you&#39;re looking for?"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1467040387, "post_id": 38056583, "comment_id": 63553540, "body": "It looks like here is an real need for a book: <code>Using perl for genetics</code>. Many similar questions about reading FASTA files. Please don&#39;t reinvent the wheel 10-th times. Search METACPAN for <a href=\"https://metacpan.org/search?size=500&amp;q=fasta&amp;search_type=modules\" rel=\"nofollow noreferrer\">FASTA</a>, choose one of existing modules like <a href=\"https://metacpan.org/pod/Bio::DB::Fasta\" rel=\"nofollow noreferrer\">Bio::DB::Fasta</a> or <a href=\"https://metacpan.org/pod/GenOO::Data::File::FASTA\" rel=\"nofollow noreferrer\">GenOO::Data::File::FASTA</a>, install and use it. Sure will get better result as with your code-segments."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1467040685, "post_id": 38056583, "comment_id": 63553735, "body": "@jm666: <a href=\"http://amzn.to/2959dna\" rel=\"nofollow noreferrer\">There are several</a>. There&#39;s a real need for them to be <i>read</i>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467040775, "post_id": 38056583, "comment_id": 63553814, "body": "@Borodin touch&#233;! ;)"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467039650, "post_id": 38057048, "comment_id": 63553027, "body": "How can that possibly solve the problem described in the question?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 605, "user_id": 5053351, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9891053d4bba049113d50d59f03cf6b?s=128&d=identicon&r=PG", "display_name": "BlueStarry", "link": "https://stackoverflow.com/users/5053351/bluestarry"}, "edited": false, "score": 0, "creation_date": 1467040948, "post_id": 38057048, "comment_id": 63553930, "body": "@BlueStarry - Whose answer to what now?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467041008, "post_id": 38057048, "comment_id": 63553966, "body": "@Borodin - This was intended as a helpful push in the right direction. As is it&#39;s impossible to discern what the OP is actually trying to do"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1467066055, "post_id": 38057048, "comment_id": 63567148, "body": "@fugu: Then it belongs as a comment and not a solution"}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 0, "last_activity_date": 1467038993, "creation_date": 1467038993, "answer_id": 38057048, "question_id": 38056583, "link": "https://stackoverflow.com/questions/38056583/double-hash-entries-while-printing/38057048#38057048", "title": "Double hash entries while printing", "body": "<p>Start with this:</p>\n\n<pre><code>my %data;\nwhile(&lt;DATA&gt;){\n    chomp;\n    my ($chr, $seq) = split;\n    $data{$chr} = $seq;\n}\n\nprint Dumper \\%data;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1467065990, "creation_date": 1467065990, "answer_id": 38064109, "question_id": 38056583, "link": "https://stackoverflow.com/questions/38056583/double-hash-entries-while-printing/38064109#38064109", "title": "Double hash entries while printing", "body": "<p>You have a <code>foreach</code> loop inside a <code>while</code> which will print all of the keys of the <code>%position</code> hash for every line of input</p>\n\n<p>That will cause symptoms like what you're describing. Is that what you're looking for?</p>\n"}], "owner": {"reputation": 605, "user_id": 5053351, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9891053d4bba049113d50d59f03cf6b?s=128&d=identicon&r=PG", "display_name": "BlueStarry", "link": "https://stackoverflow.com/users/5053351/bluestarry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 38064109, "answer_count": 2, "score": -4, "last_activity_date": 1467065990, "creation_date": 1467037694, "last_edit_date": 1467039359, "question_id": 38056583, "link": "https://stackoverflow.com/questions/38056583/double-hash-entries-while-printing", "title": "Double hash entries while printing", "body": "<p>As part of a bigger program I've got a hash. I'm testing the program printing the keys but they are all duplicates, I don't know why</p>\n\n<pre><code>while ( my $line = &lt;SEQ&gt; ) {\n\n  chomp $line;\n  $line =~ s/&gt;//;\n\n  my ( @split1 ) = split( \"\\t\", $line );\n\n  foreach my $chr ( keys %position ) {\n\n     #print Dumper \\%position;\n     print \"$chr\\n\";\n\n     foreach my $pos ( sort keys %{ $position{$chr} } ) {\n\n        if ( $split1[0] =~ /$chr/ ) {\n           #print \"$chr\\t$pos\\n\";\n        }\n     }\n   }\n}\n</code></pre>\n\n<p><code>%position</code> is a nested hash, when I print the keys on <code>print \"$chr\\n\";</code> they are all doubled and I don't understand why.</p>\n\n<p>The file opened on handle <code>SEQ</code> looks like this:</p>\n\n<pre><code>&gt;chr1\\tACTGTAGTCTCATCCTAT...\n&gt;chr2\\tACGTAGCTAGT....\n</code></pre>\n\n<p>and so on </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1467039203, "post_id": 38056507, "comment_id": 63552768, "body": "Have you looked at Perl&#39;s Template module (<a href=\"http://template-toolkit.org/\" rel=\"nofollow noreferrer\">template-toolkit.org</a>) instead of inventing your own?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6518767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66743ceb62cafb0c9bf458ea5ebc9295?s=128&d=identicon&r=PG&f=1", "display_name": "BeingClever", "link": "https://stackoverflow.com/users/6518767/beingclever"}, "edited": false, "score": 0, "creation_date": 1467144239, "post_id": 38058213, "comment_id": 63606950, "body": "Thanks much, Jeff. Unfortunately, I get a <code>Use of uninitialized value $_ in pattern match</code> error on the <code>while (my $key</code> line when I run the code. I don&#39;t suppose you have any ideas?"}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "reply_to_user": {"reputation": 11, "user_id": 6518767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66743ceb62cafb0c9bf458ea5ebc9295?s=128&d=identicon&r=PG&f=1", "display_name": "BeingClever", "link": "https://stackoverflow.com/users/6518767/beingclever"}, "edited": false, "score": 0, "creation_date": 1467207943, "post_id": 38058213, "comment_id": 63636806, "body": "@BeingClever Yes. As mentioned, the <code>while</code> needs to be nested inside your I/O loop over the &quot;html&quot; file: <code>while (&lt;&gt;) { ...</code> or similar."}], "tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1467042459, "creation_date": 1467042459, "answer_id": 38058213, "question_id": 38056507, "link": "https://stackoverflow.com/questions/38056507/using-multiple-perl-regular-expressions-to-find-and-replace/38058213#38058213", "title": "Using multiple Perl regular expressions to find and replace", "body": "<p>I think the piece you are missing is the idea of using Perl's internal <code>grep</code> function, for searching a list of URL lines based on what you are calling your \"differentiator\".</p>\n\n<p>Slurp your URL lines into a Perl array (assuming there are a finite manageable number of them, so that memory is not clobbered):</p>\n\n<pre><code>open URLS, theUrlFile.txt or die \"Cannot open.\\n\";\nmy @urls = &lt;URLS&gt;;\n</code></pre>\n\n<p>Then within the loop over your file containing \"placeholders\":</p>\n\n<pre><code>while (my $key = /[a-z]+\\s([a-z0-9]+)\\.jpg/g) {\n  my @matches = grep $key, @urls;\n  if (@matches) {\n    s/[a-z]+\\s$key\\.jpg/$matches[0]/;\n  }\n}\n</code></pre>\n\n<p>You may also want to insert error/warning messages if <code>@matches != 1</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 6518767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66743ceb62cafb0c9bf458ea5ebc9295?s=128&d=identicon&r=PG&f=1", "display_name": "BeingClever", "link": "https://stackoverflow.com/users/6518767/beingclever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467042459, "creation_date": 1467037551, "question_id": 38056507, "link": "https://stackoverflow.com/questions/38056507/using-multiple-perl-regular-expressions-to-find-and-replace", "title": "Using multiple Perl regular expressions to find and replace", "body": "<p>I'm a Perl and regex newcomer in need of your expertise. </p>\n\n<p>I need to process text files that include placeholder lines like <code>Foo Bar1.jpg</code> and replace those with with corresponding URLs like <code>https:/baz/qux/Foo_Bar1.jpg</code>.  </p>\n\n<p>As you may have guessed, I'm working with HTML. The placeholder text refers to the filename, which is the only thing available when writing the document. That's why I have to use placeholder text. Ultimately, of course, I want to replace the filename with the URL (after I upload file to my CMS to get the URL). At that point, I have all of the information at hand \u2014 the filename and the URL. Of course, I could just paste the URLs over the placeholder names in the HTML document. In fact, I've done that. But I'm certain that there's a better way. </p>\n\n<p>In short, I have placeholder lines like this: </p>\n\n<pre><code>Foo Bar1.jpg\nFoo Bar2.jpg\nFoo Bar3.jpg\n</code></pre>\n\n<p>And I also have URL lines like this: </p>\n\n<pre><code>https:/baz/qux/Foo_Bar1.jpg\nhttps:/baz/qux/Foo_Bar2.jpg\nhttps:/baz/qux/Foo_Bar3.jpg\n</code></pre>\n\n<p>I want to find the placeholder string and capture a differentiator like <code>Bar1</code> with a regex. Then I want to use the captured part like <code>Bar1</code> to perform another regex search that matches part of the corresponding URL string, i.e. <code>https:/baz/qux/Foo_Bar1.jpg</code>. After a successful match, I want to replace the <code>Foo Bar1.jpg</code> line with <code>https:/baz/qux/Foo_Bar1.jpg</code>. </p>\n\n<p>Ultimately, I want to do that for every permutation, so that <code>https:/baz/qux/Foo_Bar2.jpg</code> also replaces <code>Foo Bar2.jpg</code> and so on. </p>\n\n<p>I've written regular expressions that match both the placeholder and the URL. That's not my problem, as far as I can tell. I can find the strings I need to process. For example, <code>/[a-z]+\\s([a-z0-9]+)\\.jpg/</code> successfully matches what I'm calling the placeholder text and captures what I'm calling the differentiator. </p>\n\n<p>However, though I've spent an embarrassing number of hours over the past week reading through Stack Overflow, various other sites and O'Reilly books on Pearl and Pearl Regular Expressions, I can't wrap my mind around how to process what I can find. </p>\n"}, {"tags": ["perl", "wxwidgets"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1467039786, "post_id": 38055521, "comment_id": 63553116, "body": "You can&#39;t get the height/width of the control (whatever &quot;control&quot; is) if this control is not realized completely. System does not know about it yet. And even if this information would be available - it will not be portable as GTK sizes are available ONLY for the realized windows."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1467047430, "post_id": 38055521, "comment_id": 63557985, "body": "Are you sure you need this?  The scrollbars should be set up correctly without yours handling it manually, with <code>wxWidgets</code> as well as any other toolkit. There are options for how they&#39;ll behave though. Is there something very special that you want to do?"}, {"owner": {"reputation": 39, "user_id": 5746693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/680ab802ec6d9482bdedf19e17826b19?s=128&d=identicon&r=PG&f=1", "display_name": "stepan", "link": "https://stackoverflow.com/users/5746693/stepan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467089996, "post_id": 38055521, "comment_id": 63573053, "body": "@zdim I think I need this information. I use wxVScrolledWindow class <a href=\"http://docs.wxwidgets.org/trunk/classwx_v_scrolled_window.html\" rel=\"nofollow noreferrer\">documentation</a>. When you want to use this class you need need to derive from it and implement the OnGetRowHeight() pure virtual method. You also must call SetRowCount() to let the base class know how many rows it should display..."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467096746, "post_id": 38055521, "comment_id": 63575852, "body": "A quick look at linked docs shows -- &quot;<i>not necessary to know the heights of all rows in advance \u2013 only those which are shown on the screen need to be measured;</i>&quot; and later is says that &quot;<i>You only need to draw the visible part of contents</i>&quot;.  This makes sense, getting the hidden part doesn&#39;t, since it&#39;s not realized. Is it this that you are still having a problem with?  I am not sure what you mean by &quot;<i>unable get the correct height of widgets</i>&quot;. I&#39;ll look into it if/when I can."}, {"owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "edited": false, "score": 0, "creation_date": 1467116966, "post_id": 38055521, "comment_id": 63589088, "body": "<code>GetSize()</code> always returns the correct value, whether a widget is hidden or not, so whatever it returns is the real height of your panel. You don&#39;t explain at all what are you doing, so it&#39;s impossible to even understand what the real problem is, let alone how to fix it."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 5746693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/680ab802ec6d9482bdedf19e17826b19?s=128&d=identicon&r=PG&f=1", "display_name": "stepan", "link": "https://stackoverflow.com/users/5746693/stepan"}, "is_accepted": true, "score": 0, "last_activity_date": 1468439530, "last_edit_date": 1495542150, "creation_date": 1468439530, "answer_id": 38360539, "question_id": 38055521, "link": "https://stackoverflow.com/questions/38055521/getting-height-of-a-wxwidgets-panel-which-is-not-fully-visible/38360539#38360539", "title": "Getting height of a wxWidgets panel which is not fully visible", "body": "<p>GetSize() method returned correct dimensions. Problem was using wxScrolledWindow class, because \"panels\" inside <strong>wxScrolledWindow</strong> only had dimensions such as the dimension of visible part of the wxScrolleWindow. Thus, method GetSize() seemed to be returning wrong height. Complete solution of this problem is desribed here <a href=\"https://stackoverflow.com/questions/10846567/resize-a-wxnotebook-when-content-sizes-changed\">Resize a wxNotebook when content sizes changed</a></p>\n"}], "owner": {"reputation": 39, "user_id": 5746693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/680ab802ec6d9482bdedf19e17826b19?s=128&d=identicon&r=PG&f=1", "display_name": "stepan", "link": "https://stackoverflow.com/users/5746693/stepan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 38360539, "answer_count": 1, "score": 2, "last_activity_date": 1468439530, "creation_date": 1467034825, "last_edit_date": 1467061598, "question_id": 38055521, "link": "https://stackoverflow.com/questions/38055521/getting-height-of-a-wxwidgets-panel-which-is-not-fully-visible", "title": "Getting height of a wxWidgets panel which is not fully visible", "body": "<p>I use <strong><em>wxWidgets</em></strong> and implement scrollbars in my simple application, and for correct scrollbar initialization I need to know the total height of widgets inside the scrolled area.</p>\n\n<p>I'm unable get the correct height of widgets which are not completely visible. </p>\n\n<p>Is there some way to get the height of theses hidden items? </p>\n\n<p><img src=\"https://i.stack.imgur.com/bFRFd.png\" alt=\"image from imgur.com\"></p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "edited": false, "score": 0, "creation_date": 1467033961, "post_id": 38055137, "comment_id": 63548811, "body": "Just to add:I am able to open the XML files in browser and i don&#39;t see any problem there. I tried searching in Perl XML Diff module documentation but couldn&#39;t find anything to help in this regards."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 1, "creation_date": 1467034007, "post_id": 38055137, "comment_id": 63548842, "body": "Can you post some sample XML files where this error happens? The problem probably isn&#39;t with your script."}, {"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1467034265, "post_id": 38055137, "comment_id": 63549027, "body": "Date in the XML file is something like this....and the nested structure is even bigger than this sample .....                                                          &lt;abc&gt;&lt;def&gt;&lt;ghi&gt;sample&lt;/ghi&gt;&lt;/def&gt;&lt;/abc&gt;                                            ...both xml files are along these lines....i don&#39;t have                                  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; this at the starting of both files."}, {"owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1467034610, "post_id": 38055137, "comment_id": 63549268, "body": "sorry Data not Date"}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "is_accepted": true, "score": 1, "last_activity_date": 1467103245, "creation_date": 1467103245, "answer_id": 38071186, "question_id": 38055137, "link": "https://stackoverflow.com/questions/38055137/xml-diff-failure-with-reason-1-parser-error-start-tag-expected-not-fou/38071186#38071186", "title": "xml diff failure with reason &quot;:1: parser error : Start tag expected, &#39;&lt;&#39; not found&quot; in perl", "body": "<p>I found the problem. I used the Data::Dumper to check the content of xml files , converted them to data structure using XMLin() and found that one of the xml files path was not working as expected.</p>\n\n<p>Thank you @AKHolland. Your comment made me look at the code which was passing the files for comparison.</p>\n\n<p>Lesson Learnt: Never assume your code is the culprit always. You can be correct at times :) </p>\n"}], "owner": {"reputation": 125, "user_id": 4577205, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2a3d629d3c27d219184e5901e9e617c?s=128&d=identicon&r=PG&f=1", "display_name": "pupil", "link": "https://stackoverflow.com/users/4577205/pupil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 38071186, "answer_count": 1, "score": 0, "last_activity_date": 1467103245, "creation_date": 1467033774, "question_id": 38055137, "link": "https://stackoverflow.com/questions/38055137/xml-diff-failure-with-reason-1-parser-error-start-tag-expected-not-fou", "title": "xml diff failure with reason &quot;:1: parser error : Start tag expected, &#39;&lt;&#39; not found&quot; in perl", "body": "<p>I have written a piece of code where i am having trouble with XML comparison.</p>\n\n<p>I have stored an xml file as reference for comparison with other generated files.\nI used the XML::Diff module for </p>\n\n<pre><code>  my $status = \"0\";\n  my $diff = XML::Diff-&gt;new();\n  my $diffgram = $diff-&gt;compare(-old =&gt;$file_1, -new=&gt;$file_2 );\n\n  if ($diffgram =~ /(xvcs:delete | xvcs:update | xvcs:insert)/) \n  {\n   $status =1;\n  }\n  return $status;\n</code></pre>\n\n<p>I am getting the error \":1: parser error : Start tag expected, '&lt;' not found\"\nCan someone tell me what i am doing wrong or am missing something.\nI checked the XML file and for me the reference file and the file i am using for comparison seem fine with regards to syntax. The files are not empty.</p>\n\n<p>My knowledge of XML is limited and any pointers here will be helpful.</p>\n\n<p>Regards,\nKP</p>\n"}, {"tags": ["perl", "redirect", "testing", "mojolicious", "test-more"], "answers": [{"tags": [], "owner": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "is_accepted": false, "score": 1, "last_activity_date": 1474175425, "last_edit_date": 1474175425, "creation_date": 1474168095, "answer_id": 39553660, "question_id": 38054279, "link": "https://stackoverflow.com/questions/38054279/fail-to-test-the-rendered-output-after-a-redirect-from-a-delete-route-mojolici/39553660#39553660", "title": "Fail to test the rendered output after a redirect from a DELETE route - Mojolicious", "body": "<p>Sorry no one answered this yet. I used to try to keep a closer eye on stack overflow but I got lazy :-P. This is a very interesting question. </p>\n\n<p>Standard redirects (301/302) use the same verb as the original request UNLESS the original request was a <code>POST</code> Interestingly, this behavior was not really intended. A redirect is supposed to use the same request method as the original, but the <code>POST</code>-><code>GET</code> redirect is so commonly intended that most browsers added this behavior even though it was against the original definition. However some people really wanted a <code>POST</code> to remain a <code>POST</code> and now it depended on the implementation. In fact this got so bad that HTTP added response statuses 307/308 which always redirects as the same http verb (ie <code>POST</code> -> <code>POST</code>), even thought that was already the official behavior of the old ones but that ship had sailed. This means that <code>POST</code>-><code>GET</code>, but <code>DELETE</code>-><code>DELETE</code> is the defacto behavior of the 301/302.</p>\n\n<p>This can be demonstrated in the following one liner (<code>$_</code> in these one-liners is the controller):</p>\n\n<pre><code>perl -Mojo -E 'del \"/delete\" =&gt; sub { $_-&gt;redirect_to(\"/\") }; any \"/\" =&gt; { inline =&gt; q[I got a &lt;%= $c-&gt;req-&gt;method %&gt;] }; app-&gt;start' get -r -v -M DELETE /delete\n\nDELETE /delete HTTP/1.1\nHost: 127.0.0.1:62690\nAccept-Encoding: gzip\nUser-Agent: Mojolicious (Perl)\nContent-Length: 0\n\nHTTP/1.1 302 Found\nDate: Sun, 18 Sep 2016 03:25:58 GMT\nServer: Mojolicious (Perl)\nLocation: /\nContent-Length: 0\n\nDELETE / HTTP/1.1\nContent-Length: 0\nUser-Agent: Mojolicious (Perl)\nHost: 127.0.0.1:62690\nAccept-Encoding: gzip\n\nHTTP/1.1 200 OK\nContent-Type: text/html;charset=UTF-8\nContent-Length: 5\nDate: Sun, 18 Sep 2016 03:25:58 GMT\nServer: Mojolicious (Perl)\n\nI got a DELETE\n</code></pre>\n\n<p>You can see that since my <code>/</code> route handles all methods we get a response, however the request was a <code>DELETE</code>. I see that in your app, you redirect to another named route whose url also handles <code>DELETE</code>. This is a source of your confusion as you are actually ending up there in your tests. Your redirect is effectively <code>DELETE /backups/&lt;&lt;id&gt;&gt;</code> -> <code>DELETE /backups</code>, if I'm reading your code correctly.</p>\n\n<p>Now as opposed to the people who wanted to keep <code>POST</code> as <code>POST</code>, what you want here is the opposite, you want to redirect from <code>DELETE</code> to <code>GET</code> because you are trying to show a response that is not the original resource. This is the defined behavior of the little-known 303 response in which any request method is redirected to a <code>GET</code>. Indeed this is what early browsers <em>should</em> have insisted on rather than breaking the 302.</p>\n\n<p>In the following example I modify the response code to 303 explicitly.</p>\n\n<pre><code>$ perl -Mojo -E 'del \"/delete\" =&gt; sub { $_-&gt;res-&gt;code(303); $_-&gt;redirect_to(\"/\") }; any \"/\" =&gt; { inline =&gt; q[I got a &lt;%= $c-&gt;req-&gt;method %&gt;] }; app-&gt;start' get -r -v -M DELETE /delete\nDELETE /delete HTTP/1.1\nUser-Agent: Mojolicious (Perl)\nHost: 127.0.0.1:62716\nAccept-Encoding: gzip\nContent-Length: 0\n\nHTTP/1.1 303 See Other\nLocation: /\nContent-Length: 0\nServer: Mojolicious (Perl)\nDate: Sun, 18 Sep 2016 03:27:19 GMT\n\nDELETE / HTTP/1.1\nUser-Agent: Mojolicious (Perl)\nAccept-Encoding: gzip\nContent-Length: 0\nHost: 127.0.0.1:62716\n\nHTTP/1.1 200 OK\nContent-Type: text/html;charset=UTF-8\nServer: Mojolicious (Perl)\nContent-Length: 5\nDate: Sun, 18 Sep 2016 03:27:19 GMT\n\nI got a DELETE\n</code></pre>\n\n<p>But whoops, that's still a <code>DELETE</code>! That's because there was a <a href=\"https://github.com/kraih/mojo/issues/999\" rel=\"nofollow\">bug</a> in Mojo::UserAgent so that it didn't handle 303s correctly. I'd suggest you still make the change to your code since browsers seem to handle 303s correctly. However since Mojo::UserAgent powers Test::Mojo, your tests can't test that behavior yet. Once <a href=\"https://github.com/kraih/mojo/issues/1000\" rel=\"nofollow\">fixed</a> you will see it work correctly, as my example does in my local branch:</p>\n\n<pre><code>$ perl -Ilib -Mojo -E 'del \"/delete\" =&gt; sub { $_-&gt;res-&gt;code(303); $_-&gt;redirect_to(\"/\") }; any \"/\" =&gt; { inline =&gt; q[I got a &lt;%= $c-&gt;req-&gt;method %&gt;] }; app-&gt;start' get -r -v -M DELETE /delete\nDELETE /delete HTTP/1.1                                                                  \nContent-Length: 0                                                                        \nUser-Agent: Mojolicious (Perl)                                                           \nHost: 127.0.0.1:64924                                                                    \nAccept-Encoding: gzip                                                                    \n\nHTTP/1.1 303 See Other                                                                   \nDate: Sun, 18 Sep 2016 04:59:37 GMT                                                      \nLocation: /                                                                              \nServer: Mojolicious (Perl)                                                               \nContent-Length: 0                                                                        \n\nGET / HTTP/1.1                                                                           \nContent-Length: 0                                                                        \nUser-Agent: Mojolicious (Perl)                                                           \nHost: 127.0.0.1:64924                                                                    \nAccept-Encoding: gzip                                                                    \n\nHTTP/1.1 200 OK                                                                          \nDate: Sun, 18 Sep 2016 04:59:37 GMT                                                      \nContent-Type: text/html;charset=UTF-8                                                    \nServer: Mojolicious (Perl)                                                               \nContent-Length: 12                                                                       \n\nI got a GET\n</code></pre>\n\n<p>To see more about redirect response types see <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection\" rel=\"nofollow\">https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection</a></p>\n"}], "owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1474175425, "creation_date": 1467031297, "last_edit_date": 1467046589, "question_id": 38054279, "link": "https://stackoverflow.com/questions/38054279/fail-to-test-the-rendered-output-after-a-redirect-from-a-delete-route-mojolici", "title": "Fail to test the rendered output after a redirect from a DELETE route - Mojolicious", "body": "<p>I currently expand my test suite to increase the test coverage. I want to test my controller and the html output that it renders, but I found a problem in using <em>delete</em> methods. Let me explain it in an example.</p>\n\n<p>I have a route:</p>\n\n<pre><code>$r-&gt;delete('/backups/:id')\n  -&gt;to('backup#delete_backup')\n  -&gt;name('backup_delete');\n</code></pre>\n\n<p>that points to the following function in the <code>backup</code> controller:</p>\n\n<pre><code>sub delete_backup {\n    my $self       = shift;\n    my $id         = $self-&gt;param('id');\n\n\n    if ( something ) {\n        $self-&gt;flash( msg =&gt; \"Backup id $id deleted!\" );\n    }\n    else{\n        $self-&gt;flash( msg =&gt; \"Cannot delete, backup id $id not found!\" );   \n    }\n    $self-&gt;redirect_to($self-&gt;url_for('backup_index'));\n}\n</code></pre>\n\n<p>where the method that handles the route <code>backup_index</code> just displays the <code>$msg</code> and shows few other irrelevant data.</p>\n\n<p>Next, I want to test this method, so I write a test:</p>\n\n<pre><code>$t_logged_in-&gt;ua-&gt;max_redirects(3);\nmy $page = $t_logged_in-&gt;app-&gt;url_for( 'backup_delete', id =&gt; $backup_id );\n$t_logged_in-&gt;delete_ok($page)\n            -&gt;status_isnt( 404, \"Checking: 404 $page\" )\n            -&gt;status_isnt( 500, \"Checking: 500 $page\" );\n</code></pre>\n\n<p>The test is passed. But now, I want to check if the text is correct on the web page that is shown after redirecting. So I do the following:</p>\n\n<pre><code>$t_logged_in-&gt;ua-&gt;max_redirects(3);\nmy $page = $t_logged_in-&gt;app-&gt;url_for( 'backup_delete', id =&gt; $backup_id );\n$t_logged_in-&gt;delete_ok($page)\n            -&gt;status_isnt( 404, \"Checking: 404 $page\" )\n            -&gt;status_isnt( 500, \"Checking: 500 $page\" )\n            -&gt;content_unlike(qr/Cannot delete,/i)\n            -&gt;content_like(qr/deleted/i);\n</code></pre>\n\n<p>The test fails. It fails because the content is empty, so the matching is done as there were:</p>\n\n<pre><code>'' =~ /deleted/i;\n'' !~ /Cannot delete,/i;\n</code></pre>\n\n<p>and this is of course false in both cases. Of course, in the browser, the redirects work perfectly and I see everything as designed in the test. I can change the method to <code>POST</code> or <code>GET</code> but I wanted to make the routing properly in the way an API would be designed.</p>\n\n<p><strong>Question</strong>: how to design the test such that the content can be matched after the redirect?</p>\n\n<p>For those who want to dig deeper, I give links to Github.</p>\n\n<ul>\n<li><a href=\"https://github.com/vikin91/BibSpace/blob/dev/lib/BibSpace.pm\" rel=\"nofollow\">Routing definition line 303</a></li>\n<li><a href=\"https://github.com/vikin91/BibSpace/blob/dev/lib/BibSpace/Controller/Backup.pm\" rel=\"nofollow\">Controller Backup function delete_backup line 135</a></li>\n<li><a href=\"https://github.com/vikin91/BibSpace/blob/dev/t/001_frontend_basic_backup.t\" rel=\"nofollow\">Functional Test of Backup Controller line 53</a></li>\n</ul>\n"}, {"tags": ["xml", "perl", "xslt", "libxslt"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1467028541, "post_id": 38053246, "comment_id": 63545167, "body": "You&#39;re missing a <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">Short, Self Contained, Correct Example</a>"}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1467029061, "post_id": 38053246, "comment_id": 63545524, "body": "@choroba Updated the question"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1467029466, "post_id": 38053246, "comment_id": 63545757, "body": "That&#39;s not self contained, example.xml and trans.xsl are missing."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1467031191, "post_id": 38053246, "comment_id": 63546896, "body": "The output file was created, but it&#39;s not an XML file."}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1467032300, "post_id": 38053246, "comment_id": 63547705, "body": "Yup, I know that. I have a much bigger use case for which I get the error message. :("}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1467034138, "post_id": 38053246, "comment_id": 63548931, "body": "So try to reduce the bigger use case. Remove unrelated parts until you have the minimal example, or you solve the issue."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1467048007, "post_id": 38053246, "comment_id": 63558312, "body": "See @Borodin&#39;s answer in your earlier question. You are not outputting an XML but a text as there is no root element. Specify text method in <code>&lt;xsl:output ...&#47;&gt;</code>, transform, and then save result string to file."}], "answers": [{"tags": [], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "is_accepted": false, "score": 0, "last_activity_date": 1467092711, "creation_date": 1467092711, "answer_id": 38067944, "question_id": 38053246, "link": "https://stackoverflow.com/questions/38053246/perl-xslt-transformation-output-to-file/38067944#38067944", "title": "Perl xslt transformation output to file", "body": "<p>I ended up finding the problem myself. It appears that </p>\n\n<pre><code>$stylesheet-&gt;output_file($results,$outfile);\n</code></pre>\n\n<p>statement was not able to create the file with the path supplied.\nThis path had few non existent directories. As such I ended up doing</p>\n\n<pre><code>my $dir = dirname($outfile);\nmkpath($dir);\n</code></pre>\n\n<p>after which I was able to save the output to <code>$outfile</code>.</p>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467092711, "creation_date": 1467028281, "last_edit_date": 1495541305, "question_id": 38053246, "link": "https://stackoverflow.com/questions/38053246/perl-xslt-transformation-output-to-file", "title": "Perl xslt transformation output to file", "body": "<p>I am using this <a href=\"https://stackoverflow.com/a/37727023/1410711\">this</a> answer to perform XSLT 1.0 tranformation. I intend save the output in another xml file. As such I add,</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::LibXSLT;\n\nmy ($xmlfile, $xsltfile,$outfile) = qw/ example.xml trans.xsl out.xml /;\n\nmy $xslt = XML::LibXSLT-&gt;new;\nmy $stylesheet = $xslt-&gt;parse_stylesheet_file($xsltfile);\nmy $results    = $stylesheet-&gt;transform_file($xmlfile);\n\n$stylesheet-&gt;output_file($results,$outfile);\n</code></pre>\n\n<p>This produces following error,</p>\n\n<pre><code>Can't coerce UNKNOWN to string in entersub at $LongPath/XML/LibXSLT.pm line 485.\n</code></pre>\n\n<p>Looking up online, I was able to find this <a href=\"http://blog.rlucas.net/ancient/cant-coerce-glob-to-string-in-entersub-means-file-not-found/\" rel=\"nofollow noreferrer\">blog</a> which mentions something similar.</p>\n\n<p>Am I missing something obvious?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p><strong>XML File</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-stylesheet type=\"xsl\" href=\"trans.xsl\"?&gt;\n&lt;Article&gt;\n  &lt;Title&gt;My Article&lt;/Title&gt;\n  &lt;Authors&gt;\n    &lt;Author&gt;Mr. Foo&lt;/Author&gt;\n    &lt;Author&gt;Mr. Bar&lt;/Author&gt;\n  &lt;/Authors&gt;\n  &lt;Body&gt;This is my article text.&lt;/Body&gt;\n&lt;/Article&gt;\n</code></pre>\n\n<p><strong>XSL File</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;    \n  &lt;xsl:output method=\"xml\"/&gt;    \n  &lt;xsl:template match=\"/\"&gt;\n    Article - &lt;xsl:value-of select=\"/Article/Title\"/&gt;\n    Authors: &lt;xsl:apply-templates select=\"/Article/Authors/Author\"/&gt;\n  &lt;/xsl:template&gt;    \n  &lt;xsl:template match=\"Author\"&gt;\n    - &lt;xsl:value-of select=\".\" /&gt;\n  &lt;/xsl:template&gt;    \n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"}, {"tags": ["perl", "bugzilla"], "comments": [{"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1467036408, "post_id": 38051878, "comment_id": 63550679, "body": "Bugzilla/Mailer.pm line 179 is a comment in my version. Which is yours? And it looks like the actual error message is missing from your quote."}, {"owner": {"reputation": 39, "user_id": 6518083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd6cd354c84e586297078929311e069?s=128&d=identicon&r=PG&f=1", "display_name": "srikanth", "link": "https://stackoverflow.com/users/6518083/srikanth"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1470054415, "post_id": 38051878, "comment_id": 64775569, "body": "I am using latest version of  Bugzilla 5.1.1."}], "owner": {"reputation": 39, "user_id": 6518083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cd6cd354c84e586297078929311e069?s=128&d=identicon&r=PG&f=1", "display_name": "srikanth", "link": "https://stackoverflow.com/users/6518083/srikanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467024637, "creation_date": 1467024123, "last_edit_date": 1467024637, "question_id": 38051878, "link": "https://stackoverflow.com/questions/38051878/mail-configuration-in-bugzilla", "title": "Mail configuration in Bugzilla", "body": "<p>I've installed bugzilla in my local machine (Windows 7) and its working good. But when I try to create a new account it says:</p>\n\n<pre><code>Traceback:\nat Bugzilla/Mailer.pm line 179.\n    Bugzilla::Mailer::MessageToMTA(...) called at Bugzilla/Token.pm line 89\n    Bugzilla::Token::issue_new_user_account_token(...) called at Bugzilla/User.pm line 2423\n    Bugzilla::User::check_and_send_account_creation_confirmation(...) called at C:/bugzilla/createaccount.cgi line 39\n</code></pre>\n\n<p>I followed the documentation provided in bugzilla. But unable to resolve this issue. Can anyone help this?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1467028169, "post_id": 38051605, "comment_id": 63544892, "body": "This is an extremely simply problem, and the issue seems to be that you don&#39;t know any Perl at all. Stack Overflow isn&#39;t a good place to learn a language"}], "answers": [{"tags": [], "owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "is_accepted": false, "score": 3, "last_activity_date": 1467023612, "creation_date": 1467023612, "answer_id": 38051719, "question_id": 38051605, "link": "https://stackoverflow.com/questions/38051605/perl-regex-replace-character-after-a-comma/38051719#38051719", "title": "Perl/Regex - Replace character after a comma", "body": "<p>You can use positive lookbehind:</p>\n\n<pre><code>(?&lt;=,)g\n</code></pre>\n\n<p>It matches \"g\" that is preceded by a \",\".</p>\n\n<p>Here's a demonstration:</p>\n\n<pre><code>~$ echo testWord1,go | perl -ne 's/(?&lt;=,)g/l/g; print;'\ntestWord1,lo\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": 2, "last_activity_date": 1467023942, "last_edit_date": 1467023942, "creation_date": 1467023690, "answer_id": 38051739, "question_id": 38051605, "link": "https://stackoverflow.com/questions/38051605/perl-regex-replace-character-after-a-comma/38051739#38051739", "title": "Perl/Regex - Replace character after a comma", "body": "<p>use in perl script</p>\n\n<pre><code>s/,g/,l/g\n</code></pre>\n\n<ul>\n<li><code>s</code>(first one): for substitute</li>\n<li><code>g</code>(last one): global</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1467023757, "creation_date": 1467023757, "answer_id": 38051755, "question_id": 38051605, "link": "https://stackoverflow.com/questions/38051605/perl-regex-replace-character-after-a-comma/38051755#38051755", "title": "Perl/Regex - Replace character after a comma", "body": "<p>In Perl:</p>\n\n<pre><code>my $str = \"testWord1,go\";\n$str =~ s/,g/,l/;\nprint $str, \"\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>testWord1,lo\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 241593, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d7e4eed5740c864a766640424643d5b?s=128&d=identicon&r=PG", "display_name": "Jaron787", "link": "https://stackoverflow.com/users/241593/jaron787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1467023942, "creation_date": 1467023301, "question_id": 38051605, "link": "https://stackoverflow.com/questions/38051605/perl-regex-replace-character-after-a-comma", "title": "Perl/Regex - Replace character after a comma", "body": "<p>I need help with a string manipulator either using Perl or Regex</p>\n\n<p>I need to replace the \"g\" character after the \",\" with an \"l\"</p>\n\n<p>Before</p>\n\n<pre><code>testWord1,go\n</code></pre>\n\n<p>After</p>\n\n<pre><code>testWord1,lo\n</code></pre>\n\n<p>What would be the best way to achieve this ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 2, "creation_date": 1467021895, "post_id": 38051067, "comment_id": 63541137, "body": "&quot;I am running the following perl script&quot; \u2014 How?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1467021946, "post_id": 38051067, "comment_id": 63541179, "body": "If <b>bash</b> is complaining that <code>&lt;</code> is unexpected token, how is it involved in this? There&#39;s no sign of any bash in your question (unless <code>&#47;usr&#47;bin&#47;perl</code> is the path of a strangely named bash binary instead of perl)"}, {"owner": {"reputation": 368, "user_id": 6430078, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204857806084476/picture?type=large", "display_name": "Sergio Bernardo", "link": "https://stackoverflow.com/users/6430078/sergio-bernardo"}, "edited": false, "score": 0, "creation_date": 1467023112, "post_id": 38051067, "comment_id": 63541854, "body": "if everything else fails, try to copy &amp; paste your script to a new file... you may have a hidden corrupted character somewhere..."}, {"owner": {"reputation": 1, "user_id": 6517934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VU-PSfVUH-8/AAAAAAAAAAI/AAAAAAAAADc/hCKah2o5aCg/photo.jpg?sz=128", "display_name": "Chetan Patil", "link": "https://stackoverflow.com/users/6517934/chetan-patil"}, "edited": false, "score": 0, "creation_date": 1467023150, "post_id": 38051067, "comment_id": 63541876, "body": "That is what am not getting why it is showing bash"}, {"owner": {"reputation": 1, "user_id": 6517934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VU-PSfVUH-8/AAAAAAAAAAI/AAAAAAAAADc/hCKah2o5aCg/photo.jpg?sz=128", "display_name": "Chetan Patil", "link": "https://stackoverflow.com/users/6517934/chetan-patil"}, "edited": false, "score": 0, "creation_date": 1467023323, "post_id": 38051067, "comment_id": 63541975, "body": "guys sorry i forgot to tell that am using this script to create a htpasswd file using below command                                                                       /usr/local/bin/htpasswd.pl &lt;user&gt; &lt;password&gt; &gt;&gt; /etc/nagios/htpasswd.users"}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 0, "creation_date": 1467023513, "post_id": 38051067, "comment_id": 63542101, "body": "syntax of your program is correct. you may have some problem with your input data."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1467054987, "post_id": 38051067, "comment_id": 63562078, "body": "<code>-bash:</code> indicates the program is being run by <code>bash</code>, not <code>perl</code>!!!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6517934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VU-PSfVUH-8/AAAAAAAAAAI/AAAAAAAAADc/hCKah2o5aCg/photo.jpg?sz=128", "display_name": "Chetan Patil", "link": "https://stackoverflow.com/users/6517934/chetan-patil"}, "edited": false, "score": 0, "creation_date": 1467023757, "post_id": 38051710, "comment_id": 63542255, "body": "even though replacing username &amp; password am getting the same error"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 1, "user_id": 6517934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VU-PSfVUH-8/AAAAAAAAAAI/AAAAAAAAADc/hCKah2o5aCg/photo.jpg?sz=128", "display_name": "Chetan Patil", "link": "https://stackoverflow.com/users/6517934/chetan-patil"}, "edited": false, "score": 0, "creation_date": 1467023875, "post_id": 38051710, "comment_id": 63542328, "body": "@ChetanPatil \u2014 I only get the error when I don&#39;t replace <code>&lt;username&gt;</code> and <code>&lt;password&gt;</code>. Did you replace the whole placeholder or did you leave the angle brackets in place? You have to replace the whole placeholder."}, {"owner": {"reputation": 1, "user_id": 6517934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VU-PSfVUH-8/AAAAAAAAAAI/AAAAAAAAADc/hCKah2o5aCg/photo.jpg?sz=128", "display_name": "Chetan Patil", "link": "https://stackoverflow.com/users/6517934/chetan-patil"}, "edited": false, "score": 0, "creation_date": 1467024017, "post_id": 38051710, "comment_id": 63542407, "body": "Got it Thank you Quentin i was doing mistake by using &lt;&gt; your solution worked"}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467023593, "creation_date": 1467023593, "answer_id": 38051710, "question_id": 38051067, "link": "https://stackoverflow.com/questions/38051067/running-a-perl-script-on-ubuntu-14-04/38051710#38051710", "title": "Running a Perl script on ubuntu 14.04", "body": "<blockquote>\n  <p>i forgot to tell that am using this script to create a htpasswd file using below command <code>/usr/local/bin/htpasswd.pl &lt;user&gt; &lt;password&gt; &gt;&gt; /etc/nagios/htpasswd.users</code></p>\n</blockquote>\n\n<p>You have to replace <code>&lt;user&gt;</code> and <code>&lt;password&gt;</code> with the username and password you want to pass as arguments.</p>\n\n<p>e.g.</p>\n\n<pre><code>/usr/local/bin/htpasswd.pl bob 'TjV7!cdbta1AGs' &gt;&gt; /etc/nagios/htpasswd.users\n</code></pre>\n\n<p><code>&lt;</code> and <code>&gt;</code> have special meaning on the command line, but in the instructions they are just indicating placeholders.</p>\n\n<p>The error message you are getting is because you have a second <code>&lt;</code> at the point where it is expecting the name of the file to use a STDIN.</p>\n"}, {"comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1467023906, "post_id": 38051782, "comment_id": 63542339, "body": "<code>&gt;&gt;</code> is fine, changing it will cause it to overwrite the file instead of appending to it. The error message is about <code>&lt;</code> not <code>&gt;</code>."}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1467023944, "post_id": 38051782, "comment_id": 63542360, "body": "I don&#39;t see how a permission issue would cause an unexpected token error."}], "tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": -1, "last_activity_date": 1467024255, "last_edit_date": 1467024255, "creation_date": 1467023850, "answer_id": 38051782, "question_id": 38051067, "link": "https://stackoverflow.com/questions/38051067/running-a-perl-script-on-ubuntu-14-04/38051782#38051782", "title": "Running a Perl script on ubuntu 14.04", "body": "<p>the problem is in the <code>&lt;user&gt;</code>  <code>&lt;password&gt;</code>. Use proper input </p>\n\n<p>example</p>\n\n<pre><code>/usr/local/bin/htpasswd.pl test 'pass' &gt;&gt; /etc/nagios/htpasswd.users\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6517934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VU-PSfVUH-8/AAAAAAAAAAI/AAAAAAAAADc/hCKah2o5aCg/photo.jpg?sz=128", "display_name": "Chetan Patil", "link": "https://stackoverflow.com/users/6517934/chetan-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467024255, "creation_date": 1467021788, "last_edit_date": 1467023765, "question_id": 38051067, "link": "https://stackoverflow.com/questions/38051067/running-a-perl-script-on-ubuntu-14-04", "title": "Running a Perl script on ubuntu 14.04", "body": "<p>I am running the following perl script</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\n\nif ( @ARGV != 2 ){\nprint \"usage: /usr/local/bin/htpasswd.pl &lt;username&gt; &lt;password&gt;\\n\";\n}\nelse {\nprint $ARGV[0].\":\".crypt($ARGV[1],$ARGV[1]).\"\\n\";\n}\n</code></pre>\n\n<p>but getting the error</p>\n\n<blockquote>\n  <p>-bash: syntax error near unexpected token `&lt;'</p>\n</blockquote>\n\n<p>I'am not getting why.\nSo can anybody tell me why am geting this error?\nGuys sorry i forgot to tell\nI am using this script to create htpasswd file using following command</p>\n\n<pre><code>/usr/local/bin/htpasswd.pl &lt;user&gt; &lt;password&gt; &gt;&gt; /etc/nagios/htpasswd.users\n</code></pre>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 5, "creation_date": 1467012413, "post_id": 38048067, "comment_id": 63535476, "body": "Quotes around <code>%-250s</code>?"}, {"owner": {"reputation": 6398, "user_id": 187808, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113b0b46b3de42ce4dee28c6006a85c5?s=128&d=identicon&r=PG", "display_name": "Tamas Rev", "link": "https://stackoverflow.com/users/187808/tamas-rev"}, "edited": false, "score": 0, "creation_date": 1467013479, "post_id": 38048067, "comment_id": 63536035, "body": "What happens when you <code>System.out.println</code> the command and run it manually? How does the perl script process the args?"}, {"owner": {"reputation": 1, "user_id": 3127443, "user_type": "registered", "profile_image": "https://graph.facebook.com/795547751/picture?type=large", "display_name": "michgerts", "link": "https://stackoverflow.com/users/3127443/michgerts"}, "edited": false, "score": 0, "creation_date": 1467013720, "post_id": 38048067, "comment_id": 63536174, "body": "Tried it, it&#39;s not that. :("}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1467013746, "post_id": 38048067, "comment_id": 63536190, "body": "don&#39;t use <code>exec(command)</code> but instead use <code>exec(cmdarray)</code>. In the first case a shell gets first executed so every special characters need to be protected. See <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html</a>."}, {"owner": {"reputation": 1, "user_id": 3127443, "user_type": "registered", "profile_image": "https://graph.facebook.com/795547751/picture?type=large", "display_name": "michgerts", "link": "https://stackoverflow.com/users/3127443/michgerts"}, "edited": false, "score": 0, "creation_date": 1467013783, "post_id": 38048067, "comment_id": 63536217, "body": "when i print the command it has the full description."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1467014367, "post_id": 38048067, "comment_id": 63536498, "body": "@michgerts Could you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1467021623, "post_id": 38048067, "comment_id": 63540935, "body": "+1 to @SteffenUllrich. <i>Very</i> important if any of those variables are user input -- think of what happens if someone set <code>description=;adduser foo</code> or something."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467042918, "last_edit_date": 1467042918, "creation_date": 1467017840, "answer_id": 38049689, "question_id": 38048067, "link": "https://stackoverflow.com/questions/38048067/perl-script-called-from-java-only-takes-partial-string-as-switch/38049689#38049689", "title": "Perl script called from Java only takes partial string as switch", "body": "<p>That is a strange format string. I see no reason to left-pad all comment strings to 250 characters in a command line, and if <code>comment</code> contains whitespace then the shell will split it into words before passing the result to <code>perl</code></p>\n\n<p>The answer appears to be to enclose the format specifier in quotes, and to escape all quotes in the comment string so that they don't terminate the parameter</p>\n\n<p>I've also changed the superfluous character width to a <em>precision</em>, which will limit the amount of text inserted if the value of <code>comment</code> happens to be longer than 250 characters</p>\n\n<pre><code>String myCommand = String.format(\"perl script/path -id 1304444077 -description \\\"%.250s\\\" -owner \\\"%s\\\"\",\n        comment.replaceAll(\"\\\"\", \"\\\\\\\"\"),\n        owner.replaceAll(\"\\\"\", \"\\\\\\\"\"));\n\nprocess = Runtime.getRuntime().exec(myCommand);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3127443, "user_type": "registered", "profile_image": "https://graph.facebook.com/795547751/picture?type=large", "display_name": "michgerts", "link": "https://stackoverflow.com/users/3127443/michgerts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467042918, "creation_date": 1467012210, "last_edit_date": 1467021120, "question_id": 38048067, "link": "https://stackoverflow.com/questions/38048067/perl-script-called-from-java-only-takes-partial-string-as-switch", "title": "Perl script called from Java only takes partial string as switch", "body": "<pre><code>String myCommand = String.format(\"perl script/path -id 1304444077 -description %250s -owner %s\", comment, owner);\nprocess = Runtime.getRuntime().exec(myCommand);\n</code></pre>\n\n<p>the script is called but only takes the first string for the description switch and the rest of the description is lost.</p>\n\n<p>When I run it in Unix it works fine and I get the entire description I'm looking for.</p>\n"}, {"tags": ["perl", "centos"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1466998606, "post_id": 38045285, "comment_id": 63530854, "body": "I suspect the file you are loading is not the one you think you are loading. Add <code>warn(&quot;Site::Contacts: $INC{&#39;Site&#47;Contacts.pm&#39;}&quot;);</code> before the line that dies and provide us the output."}, {"owner": {"reputation": 1, "user_id": 6516528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5834d89e2733f0325cf1566b3d2e127b?s=128&d=identicon&r=PG&f=1", "display_name": "user6516528", "link": "https://stackoverflow.com/users/6516528/user6516528"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466999405, "post_id": 38045285, "comment_id": 63530996, "body": "That was the clue I needed, thank you ikegami!  There was another library with the same filename that was being loaded first.  When I changed the order of the includes, the site works :)"}], "owner": {"reputation": 1, "user_id": 6516528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5834d89e2733f0325cf1566b3d2e127b?s=128&d=identicon&r=PG&f=1", "display_name": "user6516528", "link": "https://stackoverflow.com/users/6516528/user6516528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466996527, "creation_date": 1466996527, "question_id": 38045285, "link": "https://stackoverflow.com/questions/38045285/undefined-subroutine-after-copying-to-new-server", "title": "Undefined subroutine after copying to new server", "body": "<p>I'm moving a Perl CGI codebase from a Debian server to CentOS 6.7.</p>\n\n<p>When I load up the website, the front page works but is missing some stuff.  Another page throws a 500 error and the logs show:</p>\n\n<p>Undefined subroutine &amp;Site::Contacts::get_domain_id called at ../conf/Site/Akcii.pm line 21.</p>\n\n<p>File Akcii.pm in directory: [web path]/conf/Site</p>\n\n<pre><code>package Site::Akcii;\n\nuse MyWeb::Module;\n\nuse Site::Contacts;\n\n@ISA = qw/MyWeb::Module/;\n\nuse strict;\nuse warnings;\n\n...snip...\n\nsub init {\nmy $self = $_[0];\n\n    $self-&gt;init_params;\n\n    $self-&gt;{domain_id} = Site::Contacts::get_domain_id($self);\n</code></pre>\n\n<p>File Contacts.pm in directory: [web path]/conf/Site</p>\n\n<pre><code>package Site::Contacts;\n\nuse MyWeb::Module;\n\n@ISA = qw/MyWeb::Module/;\n\nuse strict;\nuse warnings;\n\n...snip...\n\nsub get_domain_id {\n    my $self = $_[0];\n...snip...\n</code></pre>\n\n<p>I am not a perl programmer and am at my wits end.  I've tried everything I know how.  </p>\n\n<p>Researching the error it sounds like it can't find the function, but the directory structure is the same, and the libraries are all linked correctly as far as I can tell.  </p>\n\n<p>The original server had perl 5.14 and the new one has 5.10.  I installed perl 5.14 and still got the same error.  </p>\n\n<p>I found out about NYTProf, installed and used it, but the output from that wasn't any help.  </p>\n"}, {"tags": ["perl", "variables", "reference", "scalar"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466990562, "post_id": 38044668, "comment_id": 63529338, "body": "By the way, <code>my %hash = ();</code> is redundant. You can simply write <code>my %hash;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1466991315, "post_id": 38044708, "comment_id": 63529462, "body": "Thanks for your quick and helpful response."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1466993278, "post_id": 38044708, "comment_id": 63529847, "body": "That&#39;s entirely the wrong soliton. <code>LongSubroutine</code> should be changed to return the string rather than a reference to it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1467175537, "post_id": 38044708, "comment_id": 63616608, "body": "@ikegami Depends on what <code>LongSubroutine</code> is and why it was written like that (e.g. it might come from a CPAN module)."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1466990429, "creation_date": 1466990429, "answer_id": 38044708, "question_id": 38044668, "link": "https://stackoverflow.com/questions/38044668/perl-variable-is-printed-as-scalar0x7faf2b804240/38044708#38044708", "title": "Perl: Variable is printed as SCALAR(0x7faf2b804240)", "body": "<p>Your \"working\" line uses <code>$$QuestionableVariable</code>, not <code>$QuestionableVariable</code>.</p>\n\n<blockquote>\n  <p>Now I will omit the long subroutines for readability's sake. I am assuming they won't help in solving this problem</p>\n</blockquote>\n\n<p>Bad assumption. Apparently <code>LongSubroutine</code> returns a reference to a scalar, not a plain string. That's why you get <code>SCALAR(0x7faf2b804240)</code> as output: That's what references look like when printed.</p>\n\n<p><code>$$QuestionableVariable</code> dereferences the reference to get at the contents, which seems to be working fine.</p>\n\n<p>If you change your last line to</p>\n\n<pre><code>print \"Distance_of_Best_Match: $keys[0] Sequence_of_best_match: $BestMatch\\n\", \"$$QuestionableVariable\\n\";\n</code></pre>\n\n<p>it should work as you expect.</p>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 38044708, "answer_count": 1, "score": 0, "last_activity_date": 1466990523, "creation_date": 1466990074, "last_edit_date": 1466990523, "question_id": 38044668, "link": "https://stackoverflow.com/questions/38044668/perl-variable-is-printed-as-scalar0x7faf2b804240", "title": "Perl: Variable is printed as SCALAR(0x7faf2b804240)", "body": "<p>I have a variable that performs well in one section of my code, but not in another. I will attempt to truncate my very long code to give you an idea of what is going on. I will name the variable in question simply \"$QuestionableVariable\". </p>\n\n<pre><code>    #!/usr/bin/perl \n    use warnings; \n    use strict;  \n\n    my $QuestionableVariable = LongSubroutine(\"file.txt\"); \n    my $WindowSize = 16; \n    my $StepSize = 1; \n    my %hash = (); \n\n    for ( \n            my $windowStart = 0; \n            $windowStart &lt;= 140; \n            $windowStart += $StepSize \n    ) \n    { \n    my $Variable_1 = substr($$QuestionableVariable, $windowStart, $WindowSize); #here $QuestionableVariable works well \n    my $Variable_2 = 'TAGCTAGCTAGCTAGC'; \n    my $dist = AnotherLongSubroutine($Variable_1, $Variable_2); \n    $hash{$dist} = $Variable_1; \n</code></pre>\n\n<p>Now I will omit the long subroutines for readability's sake. I am assuming they won't help in solving this problem, since I believe they produce my expected output without error. $QuestionableVariable works well in the above section of code but below I will show you the end of my program, after the appearance of the subroutines, where it does not work well. </p>\n\n<pre><code>    my @keys = sort {$a &lt;=&gt; $b} keys %hash; \n    my $BestMatch = $hash{keys[0]}; \n\n    print \"Distance_of_Best_Match: $keys[0] Sequence_of_best_match: $BestMatch\", \"\\n\", \"$QuestionableVariable\", \"\\n\";  \n</code></pre>\n\n<p>The code runs without error, but in place of the value of $QuestionableVariable I get SCALAR(0x7faf2b804240). \nHow can I get the value of the variable instead? \nThanks</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "edited": false, "score": 0, "creation_date": 1466986086, "post_id": 38044292, "comment_id": 63528514, "body": "sorry, it&#39;s a typo. But, the output of my code is DIV=3030"}, {"owner": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "edited": false, "score": 0, "creation_date": 1466986199, "post_id": 38044292, "comment_id": 63528528, "body": "The reason being is my file contains a lot DIV=25, DIV =31, DIV=21. But, I want them to be changed into DIV=30 in general"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "edited": false, "score": 1, "creation_date": 1466986203, "post_id": 38044292, "comment_id": 63528529, "body": "You shouldn&#39;t <i>type</i> your code into Stack Overflow. You must copy and paste it directly from the file you have run that isn&#39;t working. There&#39;s no way that code will produce <code>DIV=3030</code> from that data."}, {"owner": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "edited": false, "score": 0, "creation_date": 1466986542, "post_id": 38044292, "comment_id": 63528588, "body": "And again, it was my typo. And, I just fixed it. I apologized for it."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466985840, "creation_date": 1466985840, "answer_id": 38044292, "question_id": 38044262, "link": "https://stackoverflow.com/questions/38044262/replace-a-string-in-file/38044292#38044292", "title": "Replace a string in file", "body": "<p>The code you show certainly didn't change <code>DIV=30</code> into <code>DIV=3030</code>. It didn't do anything at all because you have opened your output file for input</p>\n\n<p>This line</p>\n\n<pre><code>open( OUT, \"&lt;test.txt\");\n</code></pre>\n\n<p>should look like this</p>\n\n<pre><code>open OUT, '&gt;', 'test.txt' or die $!;\n</code></pre>\n\n<p>Also, if you want to replace <code>DIV=30</code> with <code>DIV=25</code> then you need to write that. I think it's clear that the substitution</p>\n\n<pre><code>s/DIV=/DIV=25/\n</code></pre>\n\n<p>will change <code>DIV=30</code> into <code>DIV=2530</code>. Use this instead</p>\n\n<pre><code>s/DIV=30/DIV=25/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 4555536, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b2ceb7a1e2e36a165764963bfdfc8794?s=128&d=identicon&r=PG&f=1", "display_name": "code_seeker", "link": "https://stackoverflow.com/users/4555536/code-seeker"}, "is_accepted": true, "score": 0, "last_activity_date": 1467030312, "last_edit_date": 1467030312, "creation_date": 1466997862, "answer_id": 38045440, "question_id": 38044262, "link": "https://stackoverflow.com/questions/38044262/replace-a-string-in-file/38045440#38045440", "title": "Replace a string in file", "body": "<p>if you have multiple lines with different numeric numbers (i.e. DIV=25, DIV =31, DIV=21) you could do following.</p>\n\n<pre><code>s/DIV=\\d+/DIV=25/g\n</code></pre>\n\n<p>here \\d is to replace any digits and 'g' to perform this globally.</p>\n"}, {"tags": [], "owner": {"reputation": 1863, "user_id": 807131, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d81bbaf822883b608a42ac5fdb95350?s=128&d=identicon&r=PG", "display_name": "ddoxey", "link": "https://stackoverflow.com/users/807131/ddoxey"}, "is_accepted": false, "score": 1, "last_activity_date": 1467001891, "creation_date": 1467001891, "answer_id": 38045981, "question_id": 38044262, "link": "https://stackoverflow.com/questions/38044262/replace-a-string-in-file/38045981#38045981", "title": "Replace a string in file", "body": "<p>You can do that in one line of Perl at the command line:</p>\n\n<pre><code>perl -pi -e 's/DIV=25/DIV=30/' file.txt\n</code></pre>\n"}], "owner": {"reputation": 252, "user_id": 4692887, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/nHGer.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4692887/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38045440, "answer_count": 3, "score": -3, "last_activity_date": 1467030312, "creation_date": 1466985417, "last_edit_date": 1466986413, "question_id": 38044262, "link": "https://stackoverflow.com/questions/38044262/replace-a-string-in-file", "title": "Replace a string in file", "body": "<p>My file is like this</p>\n\n<pre><code>DIV=25\nFACILITY=11111\n</code></pre>\n\n<p>and I want to use Perl to replace DIV=25 into DIV=30. Below is my script to do it, but the output of the file is DIV=3030</p>\n\n<pre><code>open( IN_IOE, $FILE_NAME ) || die \"Cannot open file\";\nmy @line_ioe = &lt;IN_IOE&gt;;\nclose(IN_IOE);\nchomp @line_ioe;\n\nforeach $_ ( @line_ioe ) {\n    s/DIV=/DIV=30/\n}\n\nopen( OUT, \"&gt;test.txt\" );\nforeach $_ (@line_ioe) {\n    print OUT \"$_ \\n\";\n}\nclose(OUT);\n</code></pre>\n\n<p>The output of my file is</p>\n\n<pre><code>DIV=3030\nFACILITY=11111\n</code></pre>\n\n<p>Can anyone please show me how to replace that line in file with Perl, and point out where I was wrong.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 1, "creation_date": 1466959741, "post_id": 38040749, "comment_id": 63521508, "body": "Normally it is expected that you tell us what&#39;s not working in your current code... i.e. what you don&#39;t understand."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1466959813, "post_id": 38040749, "comment_id": 63521538, "body": "Do you want to move it to &quot;or $ARGV[0]&quot; or &quot;concatenated with $ARGV[0]&quot;?"}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466960843, "post_id": 38040749, "comment_id": 63521915, "body": "actually, I need to move the renamed .seg file to &quot;TestRun&quot; which is one directory down from &quot;test_all_runs&quot;. The name of this folder will always be different but /data/test_all_runs will always be the same. thanks"}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466962709, "post_id": 38040845, "comment_id": 63522515, "body": "it didn&#39;t rename the file for some reason. I&#39;ve posted the entire code with your suggestions.  Please take a look, Thanks"}], "tags": [], "owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "is_accepted": false, "score": 0, "last_activity_date": 1466959837, "creation_date": 1466959837, "answer_id": 38040845, "question_id": 38040749, "link": "https://stackoverflow.com/questions/38040749/bulk-rename-and-move-files-in-perl/38040845#38040845", "title": "Bulk rename and move files in Perl", "body": "<p>For the name file name modifications you could use <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow\"><code>File::Basename</code></a> module, which is part of the core.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse feature qw{say};\nuse File::Basename;\n\nmy $filePath = \"/data/test_all_runs/TestRun/Focus-HD753/QC/diffCoverage.seg\";\nmy ($filename, $directories, $extension) = fileparse($filePath, '.seg');\n\nmy $target = (split m{/}, $directories)[-2];\nsay \"Target: $target\";\n\nmy $newFilePath = \"$directories$target$extension\";\nsay $newFilePath;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Target: Focus-HD753\n/data/test_all_runs/TestRun/Focus-HD753/QC/Focus-HD753.seg\n</code></pre>\n\n<p>Then you can move it using <code>$ARGV[0]</code>  to the location you want (maybe with <a href=\"http://perldoc.perl.org/File/Copy.html\" rel=\"nofollow\"><code>File::Copy</code></a> ?)</p>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466961141, "post_id": 38041016, "comment_id": 63522015, "body": "Is it safe to move a file while \u2019F:F\u2019 is in progress?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1466961247, "post_id": 38041016, "comment_id": 63522052, "body": "@PerlDog: Hm, good question. Probably not :-) You can <a href=\"http://p3rl.org/push\" rel=\"nofollow noreferrer\">push</a> the file paths to an array and process it afterwards."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1466962271, "post_id": 38041016, "comment_id": 63522374, "body": "@PerlDog: Updated. I tested the old script and it moved the file twice in some cases."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466963054, "post_id": 38041016, "comment_id": 63522651, "body": "@choroba. I get an error Can&#39;t stat data: No such file or directory at <code>find({ wanted =&gt; \\&amp;find_seg, no_chdir =&gt; 1 }, $home);</code> thanks"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466963129, "post_id": 38041016, "comment_id": 63522681, "body": "@user3781528: Sorry, missing <code>&#47;</code> before <code>data</code>, as my system doesn&#39;t have <code>&#47;data</code>."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466963509, "post_id": 38041016, "comment_id": 63522808, "body": "the only thing that worked was  <code>#my @samplename = (); @samplename = split &#47;\\&#47;&#47;, $F; print &quot;The sample name is #############&quot;.$samplename[4].&quot;\\n&quot;;         #my $final_location = $location.$samplename[4].&quot;\\.seg&quot;;         #copy $F, $final_location;</code> which is not great and I would prefer to use a more sophisticated method like yours."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466963933, "post_id": 38041016, "comment_id": 63522942, "body": "Sorry, the second time I ran the code it worked great.  I can&#39;t understand why. The first time I ran it there were no errors but the files were not move/renamed. Thank you very much."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466964337, "post_id": 38041016, "comment_id": 63523070, "body": "Is it possible to search the sub directories for other types of files (.vcf and .tsv) simultaneously in the same routine without renaming them.  I would like also to search for .vcf/tsv files and move them to the same directory as the renamed .seg without renaming the .vcfs/.tsvs Thanks"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466964767, "post_id": 38041016, "comment_id": 63523212, "body": "@user3781528: Why not? Just store them into the @moves array, too, using the old name (<code>$path_parts[-1]</code>) instead of creating a new one."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466964950, "post_id": 38041016, "comment_id": 63523266, "body": "Also, it&#39;s dumping the renamed .seg files into &quot;test_all_runs&quot; but I would like to move them to &quot;TestRun&quot; folder instead. thanks"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466965054, "post_id": 38041016, "comment_id": 63523298, "body": "@user3781528: Fixed."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466967674, "post_id": 38041016, "comment_id": 63524113, "body": "Please clarify if the code is looking for .seq/.vcf files in a sub directory of &quot;test_all_runs&quot; or not?  Because I just accidentally moved hundreds of the vcf files from all the folders located in \\data directory and not in &quot;test_all_runs&quot; folder. I&#39;m going to have to manually copy and paste them back somehow. Please tell me how to change the code it it <code>copies</code> instead of <code>moves</code>. please ..."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466968101, "post_id": 38041016, "comment_id": 63524245, "body": "but why did it moved files from all folders in <code>&#47;data</code>? thanks"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1466968557, "post_id": 38041016, "comment_id": 63524389, "body": "If you don&#39;t walk the whole <code>&#47;data</code>, don&#39;t specify <code>$home</code> as the second parameter to <code>find</code>."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466968788, "post_id": 38041016, "comment_id": 63524480, "body": "you are saying it should be <code>find({ wanted =&gt; \\&amp;find_seg, no_chdir =&gt; 1 }, $home.&quot;&#47;test_all_runs&quot;);</code> correct?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1466969432, "post_id": 38041016, "comment_id": 63524669, "body": "<code>File::Spec-&gt;catdir($home, &#39;test_all_runs&#39;)</code> to keep it consistent."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 1, "creation_date": 1466969886, "post_id": 38041016, "comment_id": 63524801, "body": "Ok this worked. Thank you for a great lesson. hopefully IT will be able to restore the server to what it was yesterday. :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1466965133, "last_edit_date": 1466965133, "creation_date": 1466960779, "answer_id": 38041016, "question_id": 38040749, "link": "https://stackoverflow.com/questions/38040749/bulk-rename-and-move-files-in-perl/38041016#38041016", "title": "Bulk rename and move files in Perl", "body": "<p>Use <a href=\"http://p3rl.org/rename\" rel=\"nofollow\">rename</a> to move a file to a name destination and name. \n<a href=\"http://p3rl.org/File::Spec\" rel=\"nofollow\">File::Spec</a> makes the code OS independent. You can also check <a href=\"http://p3rl.org/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a> for similar tasks.</p>\n\n<p>The moves are saved in an array and excuted later, otherwise File::Find might move the same file several times as it walks the directories.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse File::Find;\nuse File::Spec;\n\nmy $home = \"/data\";\nmy @location_parts = ($home, 'test_all_runs', 'TestRun');\npush @location_parts, $ARGV[0] if @ARGV;\nmy $location = File::Spec-&gt;catdir(@location_parts);\n\nmy @moves;\nsub find_seg {\n    my $F = $File::Find::name;\n\n    if ($F =~ /\\.seg$/ ) {\n        my @path_parts = File::Spec-&gt;splitdir($F);\n        my $name = $path_parts[-3];\n        my $target = File::Spec-&gt;catdir($location, \"$name.seg\");\n        push @moves, [ $F, $target ];\n    }\n}\n\nfind({ wanted =&gt; \\&amp;find_seg, no_chdir =&gt; 1 }, $home);\nwhile (@moves) {\n    my ($F, $target) = @{ shift @moves };\n    warn \"$F -&gt; $target\";\n    rename $F, $target or warn \"Can't move to $target\";\n}\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 38041016, "answer_count": 2, "score": 0, "last_activity_date": 1466967931, "creation_date": 1466959152, "last_edit_date": 1466967931, "question_id": 38040749, "link": "https://stackoverflow.com/questions/38040749/bulk-rename-and-move-files-in-perl", "title": "Bulk rename and move files in Perl", "body": "<p>I\u2019m searching for a way to rename each found <code>.seg</code> file to include the name of a folder two directories above the <code>.seg</code> file.</p>\n\n<p>For example I found a <code>.seg</code> file in </p>\n\n<pre><code>/data/test_all_runs/TestRun/Focus-HD753/QC/diffCoverage.seg \n</code></pre>\n\n<p>and would like to rename it </p>\n\n<pre><code>Focus-HD753.seg\n</code></pre>\n\n<p>Once I renamed the file I would like to move it to </p>\n\n<pre><code>/data/test_all_runs/TestRun\n</code></pre>\n\n<p>or  <code>$ARGV[0]</code>. Here is my current code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse File::Find;\nuse File::Spec;\n\nmy $home = \"/data\";\nmy @location_parts = ($home, 'test_all_runs');\npush @location_parts, $ARGV[0] if @ARGV;\nmy $location = File::Spec-&gt;catdir(@location_parts);\n\nmy @moves;\nmy @vcf_moves;\nsub find_seg {\n    my $F = $File::Find::name;\n    if ($F =~ /\\.seg$/ ) {\n        my @path_parts = File::Spec-&gt;splitdir($F);\n        my $name = $path_parts[-3];\n        my $target = File::Spec-&gt;catdir($location, \"$name.seg\"); print $target;\n        push @moves, [ $F, $target ];\n    }\n}   \nfind({ wanted =&gt; \\&amp;find_seg, no_chdir =&gt; 1 }, $home);\n\nwhile (@moves) {\n    my ($F, $target) = @{ shift @moves };\n    warn \"$F -&gt; $target\";\n    rename $F, $target or warn \"Can't move to $target\";\n}\n\nsub find_vcf {\n    my $V = $File::Find::name;\n    if ($V =~ /(vcf$|oncomine\\.tsv$)/ ) {\n        my @path_parts = File::Spec-&gt;splitdir($V);\n       print \"The path_parts at 0 is #############\".$path_parts[0].\"\\n\";\n       print \"The path_parts at -1 is #############\".$path_parts[-1].\"\\n\";\n       print \"The path_parts at -2 is #############\".$path_parts[-2].\"\\n\";\n       print \"The path_parts at -3 is #############\".$path_parts[-3].\"\\n\";\n       print \"The path_parts at 1 is #############\".$path_parts[1].\"\\n\";\n       my $target_vcf = File::Spec-&gt;catdir($location, $path_parts[-1]); print $target_vcf;\n      push @vcf_moves, [ $V, $target_vcf ];\n      print \"$V\\n\";\n\n    }\n}\n\nfind({ wanted =&gt; \\&amp;find_vcf, no_chdir=&gt;1}, $home);\n\nwhile (@vcf_moves) {\n    my ($V, $target_vcf) = @{ shift @vcf_moves };\n    warn \"$V -&gt; $target_vcf\";\n    rename $V, $target_vcf or warn \"Can't move to $target_vcf\";\n}\n</code></pre>\n"}, {"tags": ["postgresql", "perl", "dancer"], "comments": [{"owner": {"reputation": 2922, "user_id": 378826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eed752c6937edcf8597e360c627582?s=128&d=identicon&r=PG", "display_name": "Dilettant", "link": "https://stackoverflow.com/users/378826/dilettant"}, "edited": false, "score": 0, "creation_date": 1466945474, "post_id": 38038550, "comment_id": 63517166, "body": "I think in the pg_hba file or whatever is its magic name there is noted which user can access via which interface the postgres database, so maybe additional settings must be made, to allow that new user access also via the interface chosen? Guessing, as I&#39;m not a Dancer too ;-)"}, {"owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "reply_to_user": {"reputation": 2922, "user_id": 378826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eed752c6937edcf8597e360c627582?s=128&d=identicon&r=PG", "display_name": "Dilettant", "link": "https://stackoverflow.com/users/378826/dilettant"}, "edited": false, "score": 1, "creation_date": 1466946797, "post_id": 38038550, "comment_id": 63517481, "body": "It worked after i added this to lines:      host    all         all         127.0.0.1/32          md5 and local   all         all                               trust."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466948437, "post_id": 38038550, "comment_id": 63517838, "body": "@DragosTrif: That isn&#39;t very clear for others hoping to get some help from this page. Where do these changes go? Please post an <i>answer</i> to your own question that describes your changes in context. You will also be able to accept your own answer"}], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "is_accepted": false, "score": 0, "last_activity_date": 1466953733, "creation_date": 1466953733, "answer_id": 38039875, "question_id": 38038550, "link": "https://stackoverflow.com/questions/38038550/dancer2-app-with-postgresql-database/38039875#38039875", "title": "Dancer2 app with PostgreSQL database", "body": "<p>I edited my pg_hba.conf file inside /etc/postgresql/9.3/main/pg_hba.conf\nby adding this lines :</p>\n\n<pre><code>    # IPv4 local connections:\n    host    all         all         127.0.0.1/32          md5\n    local   all         all                               trust\n</code></pre>\n\n<p>With these modifications my app logs in.</p>\n"}], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466953733, "creation_date": 1466944296, "last_edit_date": 1466944568, "question_id": 38038550, "link": "https://stackoverflow.com/questions/38038550/dancer2-app-with-postgresql-database", "title": "Dancer2 app with PostgreSQL database", "body": "<p>I'm trying to integrate a small PostgreSQL database in my Dancer2....\nAfter schema deployment I used this in my app.pm file to connect to the schema:</p>\n\n<pre><code>my $schema = My::Schema-&gt;connect(\"dbi:Pg:dbname=mytestdb;host=localhost;port=5432;\",\"test\",\"test\");\n</code></pre>\n\n<p>When I start my app I'm able to create a new user (which is inserted in the db) with this request:</p>\n\n<pre><code>post '/register' =&gt; sub {\n\n\n    my $username = params-&gt;{username};\n    my $fullname = params-&gt;{fullname};\n    my $password = params-&gt;{password};\n    warn \"The pass is |$password|\\n\";\n\n\n        my $saved_pass = &amp;crypt_password($password);   \n\n\n\n    $schema-&gt;resultset('User')-&gt;create({\n        username =&gt; $username, \n        fullname =&gt; $fullname,\n        password =&gt; $saved_pass,\n\n    }); \n\n    redirect '/';\n\n};\n</code></pre>\n\n<p>But when I attempt to log in using this:</p>\n\n<pre><code>post '/login' =&gt; sub {\n    my $username  = params-&gt;{username};\n    my $password  = params-&gt;{password}; \n\n\n\n     my $user = $schema-&gt;resultset('User')-&gt;search({ username =&gt; $username })-&gt;first;       \n\n\n\n\n        my ($success, $realm) = authenticate_user(\n            $username, $password\n        );\n\n\n        if ($success) {\n            session logged_in_user =&gt; $success;\n            session logged_in_user_realm =&gt; $realm;\n            session user =&gt; $user;\n\n\n\n        } else {\n             authentication failed\n        }       \n\n\n\n};\n</code></pre>\n\n<p>My app dies with this error:\n<code>DBIx::Class::Storage::DBI::catch {...} (): DBI Connection failed: DBI connect('dbname=mytestdb','test',...) failed: FATAL:  Peer authentication failed for user \"test\"</code>.</p>\n"}, {"tags": ["perl", "random", "rsa"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1466956473, "post_id": 38037322, "comment_id": 63520470, "body": "One thing to watch out for, import_random_seed probably should be called in each sub-process or thread, if your code uses fork or threads and if you&#39;re in an environment where the random generation uses a csprng. Otherwise the csprng used by the key generator could share the same seed."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466936681, "post_id": 38037502, "comment_id": 63514777, "body": "Note that I have never heard of this module before. Just looked at the documentation."}, {"owner": {"reputation": 41, "user_id": 6514557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647048f0ab97dcc4c689ca88b207acba?s=128&d=identicon&r=PG&f=1", "display_name": "Pilot", "link": "https://stackoverflow.com/users/6514557/pilot"}, "edited": false, "score": 0, "creation_date": 1466942380, "post_id": 38037502, "comment_id": 63516303, "body": "So basically on Windows it&#39;s suggested to call random_seed with something random. On *nix apparently that is not needed. But it&#39;s still unclear regarding import_random_seed - does it need to be called before every generate or just once?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 41, "user_id": 6514557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647048f0ab97dcc4c689ca88b207acba?s=128&d=identicon&r=PG&f=1", "display_name": "Pilot", "link": "https://stackoverflow.com/users/6514557/pilot"}, "edited": false, "score": 0, "creation_date": 1467015526, "post_id": 38037502, "comment_id": 63537107, "body": "@Pilot unfortunately I cannot answer that. I suggest you go take a look at the openSSL library documentation. That&#39;s what&#39;s used by this module, and it&#39;s also the one that had the <a href=\"https://en.wikipedia.org/wiki/Heartbleed\" rel=\"nofollow noreferrer\">Heartbleed</a> bug in 2014."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1466936660, "creation_date": 1466936660, "answer_id": 38037502, "question_id": 38037322, "link": "https://stackoverflow.com/questions/38037322/rsa-and-perl-how-randomness-is-achieved/38037502#38037502", "title": "RSA and Perl - how randomness is achieved?", "body": "<p>There is some information <a href=\"https://metacpan.org/source/PERLER/Crypt-OpenSSL-RSA-0.28/t/rsa.t#L53\" rel=\"nofollow\">in one of the test files</a> that come with Crypt::OpenSSL::RSA.</p>\n\n<blockquote>\n  <p>On platforms without a /dev/random, we need to manually seed.  In\n   real life, the following would stink, but for testing purposes, it\n   suffices to seed with any old thing, even if it is not actually\n   random.  We'll at least emulate seeding from Crypt::OpenSSL::Random,\n   which is what we would have to do in \"real life\", since the private\n   data used by the OpenSSL random library apparently does not span\n   across perl XS modules.</p>\n</blockquote>\n\n<p>So you would have to use that stuff and add more random randomness on Windows devices.</p>\n"}], "owner": {"reputation": 41, "user_id": 6514557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647048f0ab97dcc4c689ca88b207acba?s=128&d=identicon&r=PG&f=1", "display_name": "Pilot", "link": "https://stackoverflow.com/users/6514557/pilot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1466936660, "creation_date": 1466935415, "last_edit_date": 1466936428, "question_id": 38037322, "link": "https://stackoverflow.com/questions/38037322/rsa-and-perl-how-randomness-is-achieved", "title": "RSA and Perl - how randomness is achieved?", "body": "<p>The documentation of Crypt::OpenSSL::RSA seems to be vague regarding how randomness is achieved. For example, is it mandatory to call</p>\n\n<pre><code>Crypt::OpenSSL::RSA-&gt;import_random_seed();\n</code></pre>\n\n<p>before <strong>every</strong> call to</p>\n\n<pre><code>Crypt::OpenSSL::RSA-&gt;generate_key\n</code></pre>\n\n<p>or maybe calling import_random_seed once is enough even with multiple subsequent calls to generate_key?</p>\n\n<p>And what about <code>Crypt::OpenSSL::Random::random_seed($good_entropy)</code>? It's said to be not necessary if there is <code>/dev/random</code>, but what if it's Windows?</p>\n\n<p>I'm looking for advice by people that have experience using it.</p>\n"}, {"tags": ["perl", "encryption", "base64", "rijndael"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1466918991, "creation_date": 1466918991, "answer_id": 38035513, "question_id": 38035220, "link": "https://stackoverflow.com/questions/38035220/rijndael-cbc-encryption-decryption-in-perl/38035513#38035513", "title": "Rijndael CBC encryption decryption in Perl", "body": "<h2>Error 1</h2>\n\n<p>The following assigns the number of elements in <code>@_</code> (<code>1</code>) to <code>$mystring</code>:</p>\n\n<pre><code>my $my_string=@_;\n</code></pre>\n\n<p>You want:</p>\n\n<pre><code>my ($my_string) = @_;\n</code></pre>\n\n<h2>Error 2</h2>\n\n<p>You encoded the data using base64 during encryption, but you don't have a corresponding <code>decode_base64</code> during decryption.</p>\n\n<h2>Error 3</h2>\n\n<p>WHAT YOU HAVE IS VERY INSECURE!</p>\n\n<p>You're defying a number of security mechanisms by using <code>literal_key</code> with a text password and by using a constant <code>iv</code>.</p>\n\n<p>Note that padding with <code>null</code> only works if the plaintext can't contain NUL characters. It's not a very appropriate padding method.</p>\n\n<p>I don't know what are the implications of using a 16-byte key instead of the default 32-byte key.</p>\n\n<h2>Error 4</h2>\n\n<p><code>encode_base64</code> is being misused, since you don't want a newlines in the encoded string. Replace <code>encode_base64($s)</code> with <code>encode_base64($s, '')</code>.</p>\n\n<h2>Error 5</h2>\n\n<p>Your indenting sucks.</p>\n\n<h2>Solution</h2>\n\n<pre><code>#!/usr/bin/perl    \nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse Crypt::CBC   qw( );\nuse MIME::Base64 qw( encode_base64 decode_base64 );\n\nmy $key = 'length16length16';\n\nmy $cipher = Crypt::CBC-&gt;new({\n    cipher =&gt; 'Rijndael',\n    key    =&gt; $key,\n});\n\nsub decrypt {\n    my ($my_string) = @_;\n    return $cipher-&gt;decrypt(decode_base64($my_string));\n}\n\nsub encrypt {\n    my ($my_string) = @_;\n    return encode_base64($cipher-&gt;encrypt($my_string), '');\n}\n\n{\n    my $cc = '4111111111111111';\n    my $coded = encrypt($cc);\n    say $coded;\n    my $decoded = decrypt($coded);\n    say $decoded;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>U2FsdGVkX1/QYQrNSEadlko4jtKdjM+yNaW0ZnCAmhyHHz0NyDL+id6BsM2kVPGw\n4111111111111111\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6437905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0148e34a275395e33da0c81d21292357?s=128&d=identicon&r=PG&f=1", "display_name": "Fred Garvin", "link": "https://stackoverflow.com/users/6437905/fred-garvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 1, "accepted_answer_id": 38035513, "answer_count": 1, "score": 2, "last_activity_date": 1467047091, "creation_date": 1466915636, "last_edit_date": 1467047091, "question_id": 38035220, "link": "https://stackoverflow.com/questions/38035220/rijndael-cbc-encryption-decryption-in-perl", "title": "Rijndael CBC encryption decryption in Perl", "body": "<p>I have perl code for encrypting/decrypting below. The encryption seams to be working. The decryption isn't restoring the original. Original: 4111111111111111 Encrypted: IW7K95q8p1Wa89CQ2DoIxQ== Decrypted: \u00a7\u00c0@\u017d\u0152\u00a6\u00f5\u00fabp \nI need the decrytion to match the original. Any ideas? Any additional suggestions?</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature qw( say );\n\nuse Crypt::CBC   qw( );\nuse MIME::Base64 qw( encode_base64 decode_base64 );\n\nsub decrypt {\nmy $my_string=@_;\nmy $cipher = Crypt::CBC-&gt;new(\n{\n    'key'         =&gt; 'length16length16',\n    'cipher'      =&gt; 'Rijndael',\n    'iv'          =&gt; '1234567890abcdef',\n    'literal_key' =&gt; 1,\n    'padding'     =&gt; 'null',\n    'header'      =&gt; 'none',\n    keysize       =&gt; 128 / 8\n}\n);\nmy $return = $cipher-&gt;decrypt($my_string);\nreturn $return;\n}\n\nsub encrypt {\nmy $my_string=@_;\nmy $cipher = Crypt::CBC-&gt;new(\n{\n    'key'         =&gt; 'length16length16',\n    'cipher'      =&gt; 'Rijndael',\n    'iv'          =&gt; '1234567890abcdef',\n    'literal_key' =&gt; 1,\n    'padding'     =&gt; 'null',\n    'header'      =&gt; 'none',\n    keysize       =&gt; 128 / 8\n}\n);\nmy $return = encode_base64($cipher-&gt;encrypt($my_string));\nreturn $return;\n}\n\nmy $cc = '4111111111111111';\nmy $coded = encrypt($cc);\nsay $coded;\nmy $decoded = decrypt($coded);\nsay $decoded;\n</code></pre>\n"}, {"tags": ["perl", "anyevent", "dbd-pg"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466860923, "post_id": 38028943, "comment_id": 63498004, "body": "<a href=\"https://metacpan.org/pod/Return::MultiLevel\" rel=\"nofollow noreferrer\">Return::MultiLevel</a> is sort of like longjmp but I know nothing about Coro or how they would interact."}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466864028, "post_id": 38028943, "comment_id": 63498939, "body": "Return::MultiLevel doesn&#39;t pass my needs. Sorry."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1466873777, "post_id": 38028943, "comment_id": 63501833, "body": "This is unrelated to your question, but you should avoid <code>undef $timer</code> as it forces a garbage-collection cycle, and Perl is usually much better at knowing when it should free memory than you are. If you want to de-initialise a variable then write <code>$timer = undef</code>. Also, in this case, <code>$timer</code> goes out of scope and gets destroyed at the end of each iteration of the <code>for</code> loop anyway, so there&#39;s no point in changing its value."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466879345, "post_id": 38028943, "comment_id": 63503565, "body": "@Borodin Perl has no garbage collection cycles."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466880842, "post_id": 38028943, "comment_id": 63503978, "body": "@melpomene: It releases the memory for re-use. What would you prefer to call it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466882621, "post_id": 38028943, "comment_id": 63504535, "body": "@Borodin Well, it calls <code>free()</code>. I don&#39;t think that&#39;s comparable to garbage collection."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466882984, "post_id": 38028943, "comment_id": 63504627, "body": "@melpomene: It&#39;s doesn&#39;t call <code>free</code>, it retains the memory for its own use but deallocates it from the variable, and it&#39;s generally better not to force that to happen, otherwise you&#39;ll get into a deallocate/reallocate cycle which is wasteful"}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "edited": false, "score": 0, "creation_date": 1466891068, "post_id": 38028943, "comment_id": 63506635, "body": "I believe there&#39;s no difference between <code>undef $var</code> and <code>$var = undef</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1466908304, "post_id": 38028943, "comment_id": 63509468, "body": "@Anton Petrusevich, <code>undef $var;</code> is different than <code>$var = undef;</code>. The latter doesn&#39;t free any memory, making future use of the variable more efficient. It doesn&#39;t matter here (even though the same var is used for each loop pass, because it never contains anything other than undef or a reference), but using <code>undef $var;</code> is a bad habit."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466908974, "post_id": 38028943, "comment_id": 63509555, "body": "@Anton Petrusevich, What output are you getting? What problem are you having?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466960486, "post_id": 38028943, "comment_id": 63521773, "body": "@Anton Petrusevich, <code>perl -MDevel::Size=total_size -E&#39;$x = &quot;x&quot;x20; say total_size($x); $x=undef; say total_size($x); undef $x; say total_size($x);&#39;</code> prints 54, 54, 32 (exact numbers may vary). Notice that doing <code>$var=undef</code> did not change the size, while <code>undef $var;</code> did?"}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961003, "post_id": 38028943, "comment_id": 63521961, "body": "@ikegami Try <a href=\"http://pastebin.com/BCAPcuPy\" rel=\"nofollow noreferrer\">this</a>. It clearly shows than I am right"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961056, "post_id": 38028943, "comment_id": 63521987, "body": "@Anton Petrusevich, Stop trying to prove there&#39;s no difference after I showed there is one. The fact that <i>you</i> can&#39;t find one doesn&#39;t indicate there isn&#39;t one."}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961168, "post_id": 38028943, "comment_id": 63522027, "body": "@ikegami have you tried?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961187, "post_id": 38028943, "comment_id": 63522031, "body": "@Anton Petrusevich, Yes, but it only demonstrates that <i>you</i> couldn&#39;t find a difference even though there is one. Did you try mine?"}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "edited": false, "score": 0, "creation_date": 1466961338, "post_id": 38028943, "comment_id": 63522080, "body": "You are allocating scalar, it can be different due to some optimizations."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961391, "post_id": 38028943, "comment_id": 63522094, "body": "It is. <code>undef $var;</code> specifically disables optimizations. That&#39;s why you shouldn&#39;t use it."}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961421, "post_id": 38028943, "comment_id": 63522103, "body": "@ikegami have <i>you</i> found difference in my prorgam?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961469, "post_id": 38028943, "comment_id": 63522130, "body": "There is no difference in your program. I already said that yesterday. (&quot;<i>It doesn&#39;t matter here, but using <code>undef $var;</code> is a bad habit.</i>&quot;)"}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466961582, "post_id": 38028943, "comment_id": 63522167, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/115652/discussion-between-anton-petrusevich-and-ikegami\">continue this discussion in chat</a>."}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "edited": false, "score": 0, "creation_date": 1467034703, "post_id": 38028943, "comment_id": 63549337, "body": "I changed code in execute(), nothing changed. I get failing tests and then coredump. perl 5.20.3 and coro 6.51."}, {"owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1467042594, "post_id": 38028943, "comment_id": 63555032, "body": "@ikegami here is the <a href=\"https://gist.github.com/jef-sure/a55696b3f495ee5d590456d3145c6459\" rel=\"nofollow noreferrer\">output</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1467044196, "post_id": 38028943, "comment_id": 63556164, "body": "Don&#39;t spread your question over 4 pages, and leave out anything that&#39;s not necessary. Version of Coro and Perl are also obviously relevant here, so they should be provided. Coro 6.5 seems to be in flux (since another version was released since we last talked), so your testing needs to be performed with Perl 5.20 (or earlier) and Coro 6.49."}], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 0, "last_activity_date": 1466873824, "creation_date": 1466873824, "answer_id": 38030805, "question_id": 38028943, "link": "https://stackoverflow.com/questions/38028943/is-it-possible-to-make-something-like-longjump-in-perl-inside-ev-callbacks/38030805#38030805", "title": "Is it possible to make something like longjump in Perl inside EV callbacks?", "body": "<p>eval+die is the typical method in Perl.</p>\n\n<pre><code>eval { some_function( @args ); };\nif( $@ ){\n    # caught longjmp\n}\n...\nsub some_function {\n    ...\n    if( some_condition ){\n        die \"throw longjmp\"\n    }\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1467037481, "creation_date": 1466860757, "last_edit_date": 1467037481, "question_id": 38028943, "link": "https://stackoverflow.com/questions/38028943/is-it-possible-to-make-something-like-longjump-in-perl-inside-ev-callbacks", "title": "Is it possible to make something like longjump in Perl inside EV callbacks?", "body": "<p>I am trying to emulate synchronous control flow in an asynchronous environment.</p>\n\n<p>The purpose is to support DB requests without callbacks or blocking on request.</p>\n\n<p>I am trying to use the <a href=\"https://metacpan.org/pod/Coro\" rel=\"nofollow\"><code>Coro</code></a> module, but I think I don't understand it in full.</p>\n\n<p>Here are the code snippets: </p>\n\n<pre><code>sub execute {\n    my ($sth, @vars) = @_;\n\n    my $res   = $sth-&gt;SUPER::execute(@vars);\n    my $dbh   = $sth-&gt;{Database};\n    my $async = new Coro::State;\n    my $new;\n    $new = new Coro::State sub {\n        my $w;\n        while (!$dbh-&gt;pg_ready) {\n            $w = AnyEvent-&gt;io(\n                fh   =&gt; $dbh-&gt;{pg_socket},\n                poll =&gt; 'r',\n                cb   =&gt; sub {\n                    if($dbh-&gt;pg_ready) {\n                        $w = undef;\n                        $new-&gt;transfer($async);\n                    } \n                }\n            ) if not $w;\n            print \"run once before statement: $sth-&gt;{Statement}\\n\";\n            EV::run EV::RUN_ONCE;\n        }\n    };\n    $async-&gt;transfer($new);\n    $res = $dbh-&gt;pg_result;\n    $res;\n}\n</code></pre>\n\n<p>Here is the testing code:</p>\n\n<pre><code>my $cv = AE::cv;\n\nok(my $dbh = db_connect(), 'connected');\nok(my $sth = $dbh-&gt;prepare('select pg_sleep(2)'), 'prepared');\n\nmy $start_time = time;\nok($sth-&gt;execute(), 'executed');\n\nmy $duration = time - $start_time;\nok(($duration &gt; 1 &amp;&amp; $duration &lt; 3), 'slept');\nis(ref($dbh), 'DBIx::PgCoroAnyEvent::db', 'dbh class');\nis(ref($sth), 'DBIx::PgCoroAnyEvent::st', 'sth class');\n\nmy $status   = 0;\nmy $finished = 0;\n\nfor my $t (1 .. 10) {\n    $finished += 1 &lt;&lt; $t;\n}\n\nfor my $t (1 .. 10) {\n\n    my $timer;\n\n    $timer = AE::timer 0.01 + $t/100, 0, sub {\n\n        ok(my $dbh = db_connect(), \"connected $t\");\n        ok(my $sth = $dbh-&gt;prepare('select pg_sleep(' . $t . ')'), \"prepared $t\");\n        my $start_time = time;\n        ok($sth-&gt;execute(), \"executed $t\");\n\n        my $duration = time - $start_time;\n        ok(($duration &gt; $t - 1 &amp;&amp; $duration &lt; $t + 1), \"slept $t\");\n\n        print \"duration: $t: $duration\\n\";\n\n        $status += 1 &lt;&lt; $t;\n        if ($status == $finished) {\n            $cv-&gt;send;\n        }\n\n        undef $timer;\n    };\n}\n\n$cv-&gt;recv;\n</code></pre>\n\n<p>Full module and test scripts are here <a href=\"https://github.com/jef-sure/dbd-pg-cae/blob/master/lib/DBIx/PgCoroAnyEvent.pm\" rel=\"nofollow\"><code>DBIx::PgCoroAnyEvent</code></a> and here <a href=\"https://github.com/jef-sure/dbd-pg-cae/blob/master/t/01_sleeps.t\" rel=\"nofollow\"><code>01_sleeps.t</code></a></p>\n\n<p>Can someone have a look and explain me what is wrong there?</p>\n"}, {"tags": ["json", "perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1466860582, "post_id": 38028559, "comment_id": 63497930, "body": "I don&#39;t know if it is related, but there seems to be cases where <code>JSON::XS</code> does not handle tied variables: <a href=\"http://stackoverflow.com/questions/33738849/strange-behavior-of-a-tied-hash-in-perl-when-asking-for-an-arrayref\">Strange behavior of a tied hash in perl, when asking for an arrayref</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1466859542, "post_id": 38028671, "comment_id": 63497630, "body": "Thanks for your reply! I think I&#39;ve tried this before! When I use a hash for &#39;as_list&#39; the order is lost. If you &#39;print Dumper %r&#39; after $oh-&gt;as_list, it moves the JSON-Data &quot;result&quot; to the bottom. In other words the output is { &quot;number&quot; : { &quot;num&quot; : &quot;55&quot; }, &quot;result&quot; : { &quot;counter&quot;  : &quot;123&quot; } }. It seems only an array is working with Hash::Ordered?"}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": true, "score": 3, "last_activity_date": 1466864022, "last_edit_date": 1466864022, "creation_date": 1466858773, "answer_id": 38028671, "question_id": 38028559, "link": "https://stackoverflow.com/questions/38028559/hashordered-versus-tieixhash-with-jsonxs-encode/38028671#38028671", "title": "Hash::Ordered versus Tie::IxHash with JSON::XS encode", "body": "<p>Use the <a href=\"https://metacpan.org/pod/Hash::Ordered#TIED-INTERFACE\" rel=\"nofollow\">Hash::Ordered tied interface</a>:</p>\n\n<pre><code>my $json = JSON::XS-&gt;new;\n\ntie my %hash, \"Hash::Ordered\";\n\n$hash{'result'} = { 'counter' =&gt; \"123\" };\n$hash{'number1'} = { 'num' =&gt; '1' };\n$hash{'number2'} = { 'num' =&gt; '2' };\n$hash{'number3'} = { 'num' =&gt; '3' };\n$hash{'last'} = { 'num' =&gt; 'last' };\n\n$json-&gt;pretty(1);\nmy $jsondata = $json-&gt;encode(\\%hash);\n</code></pre>\n\n<p>And the JSON data you get is:</p>\n\n<pre><code>{\n   \"result\" : {\n      \"counter\" : \"123\"\n   },\n   \"number1\" : {\n      \"num\" : \"1\"\n   },\n   \"number2\" : {\n      \"num\" : \"2\"\n   },\n   \"number3\" : {\n      \"num\" : \"3\"\n   },\n   \"last\" : {\n      \"num\" : \"last\"\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1466956360, "post_id": 38031036, "comment_id": 63520442, "body": "Great example. I have encountered one problem. Run it like this: $oh-&gt;push( result =&gt; { counter =&gt; 123, z =&gt; 5, s =&gt; 8 }, number =&gt; { num =&gt; 55, p =&gt; 123 }); Ths will loss the order for the sub-elements inside the hash. {&quot;result&quot;: &quot;counter&quot;:123,&quot;s&quot;:8,&quot;z&quot;:5},&quot;number&quot;:{&quot;p&quot;:123,&quot;num&quot;:55}} How would I keep the order in this example?"}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1466960964, "post_id": 38031036, "comment_id": 63521953, "body": "I have just added the solution in an answer. Feel free to edit or remove my answer, if there is an easier way."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1466889702, "last_edit_date": 1466889702, "creation_date": 1466875271, "answer_id": 38031036, "question_id": 38028559, "link": "https://stackoverflow.com/questions/38028559/hashordered-versus-tieixhash-with-jsonxs-encode/38031036#38031036", "title": "Hash::Ordered versus Tie::IxHash with JSON::XS encode", "body": "<p>The object-oriented interface of <code>Hash::Ordered</code> is much faster that the tied interface, but some utilities (like <code>$json-&gt;encode</code>) require a real hash reference</p>\n\n<p>The way to get the best of both worlds is to tie a hash for use with those utilities, and use <code>tied</code> to extract the underlying <code>Hash::Ordered</code> object so that you can use the faster method calls to manipulate it</p>\n\n<p>This short program demonstrates. The only slow part of this code is when the hash is passed to <code>encode</code> to be translated to JSON. The <code>push</code> call doesn't use the tied interface and remains fast</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Hash::Ordered;\nuse JSON::XS;\n\nmy $json = JSON::XS-&gt;new-&gt;pretty;\n\ntie my %h, 'Hash::Ordered';\nmy $oh = tied %h;\n$oh-&gt;push( result =&gt; { counter =&gt; 123 }, number =&gt; { num =&gt; 55 } );\n\nprint $json-&gt;encode(\\%h), \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{\n   \"result\" : {\n      \"counter\" : 123\n   },\n   \"number\" : {\n      \"num\" : 55\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": 2, "last_activity_date": 1466961425, "last_edit_date": 1466961425, "creation_date": 1466960707, "answer_id": 38041002, "question_id": 38028559, "link": "https://stackoverflow.com/questions/38028559/hashordered-versus-tieixhash-with-jsonxs-encode/38041002#38041002", "title": "Hash::Ordered versus Tie::IxHash with JSON::XS encode", "body": "<p>The examples above work fine, but for multidimensional hashes there is an additional step needed to keep the order.  </p>\n\n<pre><code>use Hash::Ordered;\nuse JSON::XS;\nuse Data::Dumper;\n\nuse strict;\nuse warnings;   \n\nsub ordered_hash_ref {\n    tie my %hash, 'Hash::Ordered';\n    my $oh = tied %hash;\n    $oh-&gt;push(@_);\n    return \\%hash;\n};\n\nmy $json = JSON::XS-&gt;new-&gt;pretty;\ntie my %h, 'Hash::Ordered';\nmy $oh = tied %h;\n\n$oh-&gt;push(result =&gt; ordered_hash_ref(counter =&gt; 123, z =&gt; 5, s =&gt; 8),  address =&gt; ordered_hash_ref(Vorname =&gt; 'Max', \nNachname =&gt; 'Mustermann', Strasse =&gt; 'Feldweg', Hausnummer =&gt; 45));\n\nmy $pretty = $json-&gt;encode(\\%h);\nprint Dumper $pretty;\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>{\n   \"result\" : {\n      \"counter\" : 123,\n      \"z\" : 5,\n      \"s\" : 8\n   },\n   \"address\" : {\n      \"Vorname\" : \"Max\",\n      \"Nachname\" : \"Mustermann\",\n      \"Strasse\" : \"Feldweg\",\n      \"Hausnummer\" : 45\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 38028671, "answer_count": 3, "score": 7, "last_activity_date": 1466961425, "creation_date": 1466857931, "last_edit_date": 1466874275, "question_id": 38028559, "link": "https://stackoverflow.com/questions/38028559/hashordered-versus-tieixhash-with-jsonxs-encode", "title": "Hash::Ordered versus Tie::IxHash with JSON::XS encode", "body": "<p>I'm trying <a href=\"https://metacpan.org/pod/Hash::Ordered\" rel=\"nofollow\"><code>Hash::Ordered</code></a> instead of <a href=\"https://metacpan.org/pod/Tie::IxHash\" rel=\"nofollow\"><code>Tie::IxHash</code></a>, because it seems to be faster.</p>\n\n<p>While <code>Tie::IxHash</code> is working fine, I struggle with some problems with <code>Hash::Ordered</code>. The point is to have the hashes ordered (which are usually random in Perl).</p>\n\n<pre><code>use Hash::Ordered;\nuse JSON::XS;\nuse Data::Dumper;\n\nuse strict;\nuse warnings;\n\nmy $json = JSON::XS-&gt;new;\n\nmy $oh = Hash::Ordered-&gt;new;\n$oh-&gt;push('result' =&gt; { 'counter' =&gt; \"123\" }, 'number' =&gt; { 'num' =&gt; '55' });\n\nmy @r = $oh-&gt;as_list;\n\n$json-&gt;pretty(1);\nmy $jsondata = $json-&gt;encode(\\@r);\nprint Dumper $jsondata;\n</code></pre>\n\n<p>The result is odd:</p>\n\n<pre><code> [\n   \"result\",\n   {\n      \"counter\" : \"123\"\n   },\n   \"number\",\n   {\n      \"num\" : \"55\"\n   }\n]\n</code></pre>\n\n<p>Here is the working example with <code>Tie::IxHash</code>, I try to get the same results with <code>Hash::Ordered</code>.</p>\n\n<pre><code>use Data::Dumper;\nuse Tie::IxHash;\nuse JSON::XS;\n\nuse strict;\nuse warnings;\n\nmy $json = JSON::XS-&gt;new;\n\nmy %h;\ntie(%h, 'Tie::IxHash', result =&gt; { counter =&gt; \"123\" }, number =&gt; { num =&gt; '55' });\n\n  $json-&gt;pretty(1);\n  my $pretty_json = $json-&gt;encode(\\%h);\n\n  print Dumper $pretty_json;\n</code></pre>\n\n<p>Output </p>\n\n<pre><code>{\n   \"result\" : {\n      \"counter\" : \"123\"\n   },\n   \"number\" : {\n      \"num\" : \"55\"\n   }\n}\n</code></pre>\n"}, {"tags": ["perl", "file", "url-rewriting"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4075191, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001412583001/picture?type=large", "display_name": "Charllie Perdana", "link": "https://stackoverflow.com/users/4075191/charllie-perdana"}, "edited": false, "score": 0, "creation_date": 1466859731, "post_id": 38027952, "comment_id": 63497687, "body": "Anyway, i&#39;ve got another way and it works. Thanks, btw."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 57, "user_id": 4075191, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001412583001/picture?type=large", "display_name": "Charllie Perdana", "link": "https://stackoverflow.com/users/4075191/charllie-perdana"}, "edited": false, "score": 1, "creation_date": 1466872472, "post_id": 38027952, "comment_id": 63501449, "body": "@CharlliePerdana: If you have found &quot;another way&quot; that serves you better then please post it as a solution yourself. Although I know it may feel like this is &quot;your question&quot; and you&#39;re happy as long as you have working code, the primary purpose of a Stack Overflow page is to help the hundreds of others who arrive her with a similar issue. I recommend that you take a look at <a href=\"http://stackoverflow.com/help/someone-answers\"><i>What should I do when someone answers my question?</i></a>"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1466853827, "creation_date": 1466853827, "answer_id": 38027952, "question_id": 38027815, "link": "https://stackoverflow.com/questions/38027815/unable-to-write-the-output-into-a-file-in-perl/38027952#38027952", "title": "unable to write the output into a file in perl", "body": "<p>This works as expected</p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nopen(my $in, '&lt;', './in.txt');\nopen(my $out, '&gt;', './out.txt');\n\nmy %lines;\nwhile (&lt;$in&gt;) {\n    print $out $_ unless $lines{$_}++;\n}\n\nclose $in;\nclose $out;\n</code></pre>\n\n<p>Note the usage of the 3-argument open, lexical filehandles and the <code>autodie</code> pragma.</p>\n\n<p>Me as a fan of the usage of <a href=\"http://metacpan.org\" rel=\"nofollow\">CPAN</a> modules, would write the same as:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Path::Tiny;\nuse List::Util qw(uniq);\n\nmy $out_file = './out.txt';\nmy $in_file = './in.txt';\npath($out_file)-&gt;spew( uniq path($in_file)-&gt;lines );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 4075191, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001412583001/picture?type=large", "display_name": "Charllie Perdana", "link": "https://stackoverflow.com/users/4075191/charllie-perdana"}, "edited": false, "score": 0, "creation_date": 1466866094, "post_id": 38028149, "comment_id": 63499457, "body": "I have tried your suggest before, but it didn&#39;t work. And i fix it, Finally, i got another way. Thanks you for your response anyway."}], "tags": [], "owner": {"reputation": 11, "user_id": 6506162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VHgJv.jpg?s=128&g=1", "display_name": "Varkster", "link": "https://stackoverflow.com/users/6506162/varkster"}, "is_accepted": false, "score": 0, "last_activity_date": 1466855168, "creation_date": 1466855168, "answer_id": 38028149, "question_id": 38027815, "link": "https://stackoverflow.com/questions/38027815/unable-to-write-the-output-into-a-file-in-perl/38028149#38028149", "title": "unable to write the output into a file in perl", "body": "<p>Not quite sure what you want in common_element.txt, but I think the logic in the read loop is wrong. No need to increase the $lines twice, and only output if there is a match from existing data?</p>\n\n<p>Try:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(DATA,\"thiscommon.txt\");\nopen (FILE2, '&gt;common_element.txt') or die $!;\n\nmy %lines;\nwhile (&lt;DATA&gt;) {\n  print FILE2 if $lines{$_};\n  print if not $lines{$_}++;\n}\n\nclose DATA;\nclose FILE2;        \n</code></pre>\n\n<p>Only with your paths, obviously.</p>\n"}, {"comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1466857532, "post_id": 38028238, "comment_id": 63497117, "body": "You forgot to declare <code>$line</code>, your code won&#39;t compile. (just change your while condition to <code>(my $line = &lt;$in&gt;)</code> )"}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1466858156, "post_id": 38028238, "comment_id": 63497286, "body": "That started out just being the while loop, and then I decided I should also recommend 3-argument open and closing the files, and then that I might just as well provide complete code - and then I still forgot that :-( - But, thanks @Dada"}, {"owner": {"reputation": 57, "user_id": 4075191, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001412583001/picture?type=large", "display_name": "Charllie Perdana", "link": "https://stackoverflow.com/users/4075191/charllie-perdana"}, "edited": false, "score": 0, "creation_date": 1466859801, "post_id": 38028238, "comment_id": 63497701, "body": "No, actually this code is works for me. Anyway, i&#39;ve fix my code with another way. Thanks for your help, btw."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466872633, "post_id": 38028238, "comment_id": 63501491, "body": "<i>&quot;avoid using <code>$_</code>&quot;</i> That is a style choice. Most experienced Perl programmers are perfectly happy with using the &quot;pronoun variable&quot; <code>$_</code> and it can make code much clearer and more readable."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466872804, "post_id": 38028238, "comment_id": 63501538, "body": "<i>&quot;remembering to close the files&quot;</i> Perl will close all open file handles at the end of a run (or when a lexical file handle is destroyed at the end of a block) and is rarely necessary unless you want to be sure that an output file closed successfully, and you don&#39;t test the success of your <code>close</code> calls so they&#39;re pointless. Any code-breaking errors on input file handles will have happened before the end of the file."}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1466877562, "post_id": 38028238, "comment_id": 63503003, "body": "Yes, they don&#39;t matter here, but I believe it&#39;s better to always do so, to lower the risk of forgetting it somewhere that it does matter."}], "tags": [], "owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "is_accepted": false, "score": 1, "last_activity_date": 1466857990, "last_edit_date": 1466857990, "creation_date": 1466855655, "answer_id": 38028238, "question_id": 38027815, "link": "https://stackoverflow.com/questions/38027815/unable-to-write-the-output-into-a-file-in-perl/38028238#38028238", "title": "unable to write the output into a file in perl", "body": "<p>Your main problem probably is that <code>$lines{$_}++</code> changes the value of <code>$lines{$_}</code> so the second will never evaluate to false. You could probably fix your problem just by removing <code>++</code> on the first occurence. But for readability I would recommend wrapping both output lines with one if statement, avoid using <code>$_</code> and remembering to close the files, so something like:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %lines;\n\nopen(my $in, '&lt;', './in.txt');\nopen(my $out, '&gt;', './out.txt');\n\nwhile (my $line = &lt;$in&gt;) {\n    unless ($lines{$line}++) {\n        print STDOUT $line;\n        print {$out} $line\n    }\n}\n\nclose($in);\nclose($out);\n</code></pre>\n\n<p>As you can see, I also prefer lexical filehandles and 3-argument open.</p>\n"}], "owner": {"reputation": 57, "user_id": 4075191, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001412583001/picture?type=large", "display_name": "Charllie Perdana", "link": "https://stackoverflow.com/users/4075191/charllie-perdana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1466857990, "creation_date": 1466852890, "question_id": 38027815, "link": "https://stackoverflow.com/questions/38027815/unable-to-write-the-output-into-a-file-in-perl", "title": "unable to write the output into a file in perl", "body": "<p>I want to write the result of my code into a file , but it's not written into my file. My code is working and it's about removing duplicate line, but when i wanted to write the output into a file, the file is empty. This is my code:</p>\n\n<pre><code> use strict;\n    use warnings;\n\n    open(DATA,\"/root/Desktop/SIEMENS/printtokens/outputs/common_distinct/MR1/thiscommon.txt\");\n    open FILE2, \"&gt;/root/Desktop/SIEMENS/printtokens/outputs/common_distinct/MR1/common_element.txt\" or die $!;\n\n    my %lines;\n    #open DATA, $ARGV[0] or die \"Couldn't open $ARGV[0]: $!\\n\";\n    while (&lt;DATA&gt;) {\n    print if not $lines{$_}++;\n    print FILE2 if not $lines{$_}++;\n\n    }\n\n    close DATA;\n    close FILE2;\n</code></pre>\n"}, {"tags": ["perl", "variables", "awk", "chdir"], "comments": [{"owner": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "edited": false, "score": 2, "creation_date": 1466841340, "post_id": 38026252, "comment_id": 63493130, "body": "Where do you think the problem is? In the <code>perl</code> code? In the <code>awk</code> code? What is the expected output? What is the real output?"}, {"owner": {"reputation": 11, "user_id": 6511772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b179d123c684d391bff2e7f41a5f656a?s=128&d=identicon&r=PG&f=1", "display_name": "suresh babu", "link": "https://stackoverflow.com/users/6511772/suresh-babu"}, "reply_to_user": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "edited": false, "score": 0, "creation_date": 1466846138, "post_id": 38026252, "comment_id": 63494159, "body": "its not changing the direrctoy. actually I need like  above 70% disk inside that  disk which directory is consuming more space"}, {"owner": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "edited": false, "score": 0, "creation_date": 1466849406, "post_id": 38026252, "comment_id": 63494958, "body": "Then why do you not swap the perl lines <code>chdir</code>and <code>print</code> in order to print the output of <code>df -h</code>?"}, {"owner": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "edited": false, "score": 1, "creation_date": 1466849491, "post_id": 38026252, "comment_id": 63494974, "body": "Did yo u know that the <code>df -h</code> command splits long lines in two ones and then <code>awk</code>  code may not work?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 2841, "user_id": 2545194, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab05c442f50628acfcca2c70174f23e7?s=128&d=identicon&r=PG", "display_name": "Jdamian", "link": "https://stackoverflow.com/users/2545194/jdamian"}, "edited": false, "score": 2, "creation_date": 1466851948, "post_id": 38026252, "comment_id": 63495517, "body": "@Jdamian That&#39;s where the \u2019-P\u2019 switch kicks in."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 2, "creation_date": 1466854671, "post_id": 38026252, "comment_id": 63496294, "body": "I don&#39;t know perl but if calling awk from inside perl is the right thing to do then perl must have a stunning hole in it&#39;s functionality."}, {"owner": {"reputation": 11, "user_id": 6511772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b179d123c684d391bff2e7f41a5f656a?s=128&d=identicon&r=PG&f=1", "display_name": "suresh babu", "link": "https://stackoverflow.com/users/6511772/suresh-babu"}, "edited": false, "score": 0, "creation_date": 1466859356, "post_id": 38026252, "comment_id": 63497579, "body": "the above script is working fine till &quot;my $test=qx(&quot;df -h |awk \\+\\$5&gt;=70 {print \\$6} &quot;);&quot; after that not able to change directory. please help. one more whether its good use awk inside the perl script?"}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 6512437, "user_type": "registered", "profile_image": "https://graph.facebook.com/132433723848304/picture?type=large", "display_name": "Anton Petrusevich", "link": "https://stackoverflow.com/users/6512437/anton-petrusevich"}, "is_accepted": false, "score": 2, "last_activity_date": 1466866522, "last_edit_date": 1466866522, "creation_date": 1466865361, "answer_id": 38029580, "question_id": 38026252, "link": "https://stackoverflow.com/questions/38026252/awk-output-to-variable-and-change-directory/38029580#38029580", "title": "awk output to variable and change directory", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy @bigd = map { my @f = split \" \"; $f[5] } \n           grep { my @f = split \" \"; $f[4] =~ /^(\\d+)/ &amp;&amp; $1 &gt;= 70} \n           split \"\\n\", `df -hP`;\nprint \"big directories: $_\\n\" for @bigd;\nfor my $bigd (@bigd) {\n    chdir($bigd);\n    my @bigsubd = grep { my @f = split \" \"; $f[0] =~ /G/ }\n                  split \"\\n\", `du -sh *`;\n    print \"big subdirectories in $bigd:\\n\";\n    print \"$_\\n\" for @bigsubd;\n}\n</code></pre>\n\n<p>I belive you wanted to do something like this.</p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 3, "last_activity_date": 1466867208, "last_edit_date": 1466867208, "creation_date": 1466865489, "answer_id": 38029607, "question_id": 38026252, "link": "https://stackoverflow.com/questions/38026252/awk-output-to-variable-and-change-directory/38029607#38029607", "title": "awk output to variable and change directory", "body": "<p>No need to call <code>awk</code> in your case because Perl is quite good at splitting and printing certain lines itself. Your code has some issues:</p>\n\n<ol>\n<li><p>The code <code>qx(\"df -h |awk \\+\\$5&gt;=70 {print \\$6} \")</code> tries to execute the <strong><em>string</em></strong> <code>\"df -h | awk ...\"</code> as a command which fails because there is no such command called <code>\"df -h | awk\"</code>. When I run that code I get <code>sh: 1: df -h |awk +&gt;=70 {print } : not found</code>. You can fix that by dropping the quotes <code>\"</code> because <code>qx()</code> already <em>is</em> quoting. The variable <code>$test</code> is empty afterwards, so the <code>chdir</code> changes to your <code>$HOME</code> directory.</p></li>\n<li><p>Then you'll see the next error: <code>awk: line 1: syntax error at or near end of line</code>, because it calls <code>awk +\\$5&gt;=70 {print \\$6}</code>. Correct would be <code>awk '+\\$5&gt;=70 {print \\$6}'</code>, i.e. with ticks <code>'</code> around the <code>awk</code> scriptlet.</p></li>\n<li><p>As stated in a comment, <code>df -h</code> splits long lines into two lines. Example:</p>\n\n<pre><code>Filesystem           1K-blocks      Used Available Use% Mounted on\n/long/and/possibly/remote/file/system\n                     10735331328 10597534720 137796608  99% /local/directory\n</code></pre>\n\n<p>Use <code>df -hP</code> to get guaranteed column order and <em>one line output</em>.</p></li>\n<li><p>The last <code>system</code> call shows the directory usage (space) for all lines containing the letter <code>G</code>. I reckon that's not exactly what you want.</p></li>\n</ol>\n\n<p>I suggest the following Perl script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nforeach my $line ( qx(df -hP) ) {\n    my ($fs, $size, $used, $avail, $use, $target) = split(/\\s+/, $line);\n    next unless ($use =~ /^\\d+\\s*\\%$/); # skip header line\n\n    # now $use is e.g. '90%' and we drop the '%' sign:\n    $use =~ s/\\%$//;\n\n    if ($use &gt; 70) {\n        print \"almost full: $target; top 5 directories:\\n\";\n\n        # no need to chdir here. Simply use $target/* as search pattern,\n        # reverse-sort by \"human readable\" numbers, and show the top 5:\n        system(\"du -hs $target/* 2&gt;/dev/null | sort -hr | head -5\");\n        print \"\\n\\n\";\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6511772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b179d123c684d391bff2e7f41a5f656a?s=128&d=identicon&r=PG&f=1", "display_name": "suresh babu", "link": "https://stackoverflow.com/users/6511772/suresh-babu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466867208, "creation_date": 1466841064, "last_edit_date": 1466844310, "question_id": 38026252, "link": "https://stackoverflow.com/questions/38026252/awk-output-to-variable-and-change-directory", "title": "awk output to variable and change directory", "body": "<p>In the below script. am not able to change the directory.i need the output like above 70% disk inside that directory which one is consuming more space.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $test=qx(\"df -h |awk \\+\\$5&gt;=70 {print \\$6} \");\nchdir($test) or die \"$!\";\nprint $test;\nsystem(\"du -sh * | grep 'G'\");\n</code></pre>\n"}, {"tags": ["regex", "perl", "file"], "comments": [{"owner": {"reputation": 1, "user_id": 6511020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0uTZ6.png?s=128&g=1", "display_name": "flop", "link": "https://stackoverflow.com/users/6511020/flop"}, "edited": false, "score": 0, "creation_date": 1466816371, "post_id": 38023677, "comment_id": 63489086, "body": "Also, in php it would be really easy, just to transform the all search in one line only. The s regex modifier could be used with the good regex. But perl don&#39;t work as the preg_match_all that can be used in php :-("}], "answers": [{"tags": [], "owner": {"reputation": 534, "user_id": 6503620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6qzk.png?s=128&g=1", "display_name": "lexx9999", "link": "https://stackoverflow.com/users/6503620/lexx9999"}, "is_accepted": false, "score": 0, "last_activity_date": 1466814131, "creation_date": 1466814131, "answer_id": 38023781, "question_id": 38023677, "link": "https://stackoverflow.com/questions/38023677/perl-file-search-regex-multiple-infos-in-multiple-lines/38023781#38023781", "title": "Perl: file search regex multiple infos in multiple lines", "body": "<p>I don't know much about perl, but can provide some idea:</p>\n\n<pre><code>login= map();\nwhile( row=readrow())\n{\n   if(match(id version))\n     login[$1]=$2\n   else\n   if(match(id username userid ))\n   {\n     print \"user: \", $2,  \"version:\",login[$1], \"userid: $3\", \"sessionid: \", $1\n     delete login[$1]\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1466889373, "last_edit_date": 1466889373, "creation_date": 1466818702, "answer_id": 38024157, "question_id": 38023677, "link": "https://stackoverflow.com/questions/38023677/perl-file-search-regex-multiple-infos-in-multiple-lines/38024157#38024157", "title": "Perl: file search regex multiple infos in multiple lines", "body": "<p>Running your code gave me the result</p>\n\n<pre><code>4 : [AAA] User1 : 1.2.10\n</code></pre>\n\n<p>Your second regular expression is capturing the bracketed letters <em>and</em> the user name. This isn't what your desired output looks like.</p>\n\n<p>The second while loop exhausts the remainder of the file. And, this isn't what you want to do.</p>\n\n<p>Here is a program that will produce the output you want. (I created a file at the top of the program. You would not use this but instead, open your file 'mylogfile.log' just as you did in your code).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $fh, '&lt;', \\&lt;&lt;EOF;\n&lt;W&gt;2016-06-25 00:27:30.577 1 =&gt; &lt;4:(-1)&gt; Client version 1.2.10 (Win: 1.2.10)\n&lt;W&gt;2016-06-25 00:27:30.635 1 =&gt; &lt;4:[AAA] User1(1850)&gt; Authenticated\n&lt;W&gt;2016-06-25 00:27:30.635 1 =&gt; &lt;2:(-1)&gt; Client version 1.2.16 (Win: 1.2.16)\n&lt;W&gt;2016-06-25 00:27:30.687 1 =&gt; &lt;2:[AAA] User2(942)&gt; Authenticated\nEOF\n\n\nwhile (&lt;$fh&gt;) {\n    if (/&lt;(\\d+).+?Client version (\\d+\\.\\d+\\.\\d+)/) {\n        my ($id, $vers) = ($1, $2);\n\n        # read next line and capture name\n        if (&lt;$fh&gt; =~ /&lt;$id\\S+ ([^(]+)/) {\n            my $name = $1;\n            print join(\" : \", $id, $name, $vers), \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>In my second regular expression, the piece, <code>[^(]+</code>, is called a <em>negated class</em>. It matches non 'left parens' (1 or more times). This matches \"User1' and 'User2' in the line of the file.</p>\n\n<p><strong>Update:</strong> You can find info about character classes <a href=\"http://perldoc.perl.org/perlrequick.html#Using-character-classes\" rel=\"nofollow\">here</a>.</p>\n\n<p><strong>Update2:</strong> Looking at wolfrevokcats reply, I see he made a valid observation and his solution is the safer one.</p>\n"}, {"tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 1, "last_activity_date": 1466842442, "creation_date": 1466842442, "answer_id": 38026418, "question_id": 38023677, "link": "https://stackoverflow.com/questions/38023677/perl-file-search-regex-multiple-infos-in-multiple-lines/38026418#38026418", "title": "Perl: file search regex multiple infos in multiple lines", "body": "<p>I see in your log file that timestamps of corresponding rows are different.\nSo, I suppose, when two users log in at the same time, log records could get interspersed, for example:</p>\n\n<pre><code>&lt;W&gt;2016-06-25 00:27:30.577 1 =&gt; &lt;4:(-1)&gt; Client version 1.2.10 (Win: 1.2.10)\n&lt;W&gt;2016-06-25 00:27:30.635 1 =&gt; &lt;2:(-1)&gt; Client version 1.2.16 (Win: 1.2.16)\n&lt;W&gt;2016-06-25 00:27:30.635 1 =&gt; &lt;4:[AAA] User1(1850)&gt; Authenticated\n&lt;W&gt;2016-06-25 00:27:30.687 1 =&gt; &lt;2:[AAA] User2(942)&gt; Authenticated\n</code></pre>\n\n<p>If this is the case, I would suggest using a hash to remember ids:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $file = 'mylogfile.log';\nopen (my $fl, '&lt;:encoding(UTF-8)', $file)\n        or die 'File not found';\nmy %ids;\n\nwhile (my $row = &lt;$fl&gt;) {\n        if ($row =~ m/\\&lt;(\\d+).*\\&gt;\\sclient\\sversion\\s(\\d+.\\d+.\\d+)\\s/i) {\n        my ($id,$vers)=($1,$2);\n        $ids{$id}=$vers;\n    }\n    elsif ($row =~ m/\\&lt;(\\d+)\\:(.+)\\(\\d+\\)\\&gt;.*authenticated/i) {\n        if (defined $ids{$1}) {\n            print \"$1 : $2 : $ids{$1}\\n\";\n            delete $ids{$1};\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6511020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0uTZ6.png?s=128&g=1", "display_name": "flop", "link": "https://stackoverflow.com/users/6511020/flop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466889373, "creation_date": 1466813077, "last_edit_date": 1592644375, "question_id": 38023677, "link": "https://stackoverflow.com/questions/38023677/perl-file-search-regex-multiple-infos-in-multiple-lines", "title": "Perl: file search regex multiple infos in multiple lines", "body": "<p>Hello I have this in a file, multiple lines and from them I want to be able to get the User name and the version he's using.</p>\n<h1>File</h1>\n<pre><code>&lt;W&gt;2016-06-25 00:27:30.577 1 =&gt; &lt;4:(-1)&gt; Client version 1.2.10 (Win: 1.2.10)\n&lt;W&gt;2016-06-25 00:27:30.635 1 =&gt; &lt;4:[AAA] User1(1850)&gt; Authenticated\n&lt;W&gt;2016-06-25 00:27:30.635 1 =&gt; &lt;2:(-1)&gt; Client version 1.2.16 (Win: 1.2.16)\n&lt;W&gt;2016-06-25 00:27:30.687 1 =&gt; &lt;2:[AAA] User2(942)&gt; Authenticated\n</code></pre>\n<h1>Outpout wanted</h1>\n<pre><code>4 : User1 : 1.2.10\n2 : User2 : 1.2.16\n</code></pre>\n<p>So the datas for one client is on 2 lines.</p>\n<ul>\n<li>The first line get the version number.</li>\n<li>The second line the user name.</li>\n</ul>\n<p>I noticed that both lines have a match ID, in my example the user1 line match ID is 4: and 2: for the second user.</p>\n<p>So I started with something like this, but don't really work as intended and creating a second read to find the second line in the entire file is too much / not optimized.</p>\n<h1>Perl Script</h1>\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $file = 'mylogfile.log';\nopen (my $fl, '&lt;:encoding(UTF-8)', $file)\n        or die 'File not found';\n\nwhile (my $row = &lt;$fl&gt;) {\n        if ($row =~ m/\\&lt;(\\d+).*\\&gt;\\sclient\\sversion\\s(\\d+.\\d+.\\d+)\\s/i) {\n                my $id = $1;\n                my $vers = $2;\n                while (my $row1 = &lt;$fl&gt;) {\n                        if ($row1 =~ m/\\&lt;$id\\:(.+)\\(\\d+\\)\\&gt;/i) {\n                                my $name = $1;\n                                print &quot;$id : $name : $vers\\n&quot;;\n                        }\n                }\n        }\n}\n</code></pre>\n<p>If any perl guru have an idea, thanks! :-)</p>\n"}, {"tags": ["perl", "utf-8", "character-encoding"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1466806081, "post_id": 38022738, "comment_id": 63487172, "body": "You can run <code>perl -CA</code>."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1466806219, "post_id": 38022738, "comment_id": 63487201, "body": "@ThisSuitIsBlackNot: Good find."}], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1466806192, "answer_count": 0, "score": 0, "last_activity_date": 1466805836, "creation_date": 1466805836, "question_id": 38022738, "link": "https://stackoverflow.com/questions/38022738/is-there-a-way-to-decode-utf-8-characters-in-argv-by-default", "closed_reason": "Duplicate", "title": "Is there a way to decode UTF-8 characters in @ARGV by default?", "body": "<p>From what I understand, the <code>perl</code> interpreter does not automatically decode command-line arguments from terminal. This means, that if they contain wide characters, then one should handle them like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse I18N::Langinfo qw(langinfo CODESET);\nuse Encode qw(decode);\nuse Data::Dumper;\n\nbinmode STDOUT, ':utf8';\n\nmy $codeset = langinfo(CODESET); # returns 'UTF-8'\n\nprint Dumper \\@ARGV;\n\nforeach my $arg (@ARGV) {\n    push @new_ARGV, decode $codeset, $arg;\n}\n\n# Now, the strings inside @new_ARGV are in valid internal format\nprint Dumper \\@new_ARGV;\n</code></pre>\n\n<p>The above script gives result as following (the terminal and locale are set with <code>UTF-8</code>):</p>\n\n<pre><code>$ perl AC_351.pl \u015b\u00f3\u0105\n$VAR1 = [\n          '\u00c5\u00c3\u00b3\u00c4'\n        ];\n$VAR1 = [\n          \"\\x{15b}\\x{f3}\\x{105}\"\n        ];\n</code></pre>\n\n<p>Should I always decode command-line arguments like this or is there some setting or switch to tell Perl to handle this by itself?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466804764, "post_id": 38022493, "comment_id": 63486766, "body": "The real error is <code>ODBM_File.xs:128: error: too few arguments to function \u2018dbmclose\u2019</code>. Code 512 is irrelevant."}, {"owner": {"reputation": 189, "user_id": 5904690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4bbfc897c7bdd7ea1ed8282f6f7351e?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/5904690/max"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466805562, "post_id": 38022493, "comment_id": 63487001, "body": "Thanks. Changing the dbmclose() function seems to have solved the problem with running make."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1466805086, "creation_date": 1466805086, "answer_id": 38022598, "question_id": 38022493, "link": "https://stackoverflow.com/questions/38022493/odbm-file-xs-too-few-arguments-to-function-dbmclose-while-building-perl/38022598#38022598", "title": "ODBM_File.xs: too few arguments to function \u2018dbmclose\u2019 while building perl", "body": "<p>This is a <a href=\"https://metacpan.org/pod/release/RJBS/perl-5.22.0/INSTALL#error:-too-few-arguments-to-function-dbmclose\" rel=\"nofollow\">known issue</a> on SUSE Linux:</p>\n\n\n\n<blockquote>\n  <p><strong>error: too few arguments to function 'dbmclose'</strong></p>\n  \n  <p>Building ODBM_File on some (Open)SUSE distributions might run into this error, as the header file is broken. There are two ways to deal with this</p>\n  \n  <ol>\n  <li><p>Disable the use of ODBM_FILE</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Configure ... -Dnoextensions=ODBM_File\n</code></pre></li>\n  <li><p>Fix the header file, somewhat like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>--- a/usr/include/dbm.h  2010-03-24 08:54:59.000000000 +0100\n+++ b/usr/include/dbm.h  2010-03-24 08:55:15.000000000 +0100\n@@ -59,4 +59,4 @@ extern datum  firstkey __P((void));\n\nextern datum   nextkey __P((datum key));\n\n-extern int     dbmclose __P((DBM *));\n+extern int     dbmclose __P((void));\n</code></pre></li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 189, "user_id": 5904690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4bbfc897c7bdd7ea1ed8282f6f7351e?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/5904690/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 38022598, "answer_count": 1, "score": 0, "last_activity_date": 1466805094, "creation_date": 1466804399, "last_edit_date": 1466805094, "question_id": 38022493, "link": "https://stackoverflow.com/questions/38022493/odbm-file-xs-too-few-arguments-to-function-dbmclose-while-building-perl", "title": "ODBM_File.xs: too few arguments to function \u2018dbmclose\u2019 while building perl", "body": "<p>I have been attempting to install Perl 5-22.0 locally on a server (on SUSE Linux x86_64). I was able to run .configure on the source code, but following the make command, I obtained the following error:</p>\n\n<pre><code>CE=2 -Wall -Werror=declaration-after-statement -Wextra -Wc++-compat -Wwrite-strings -O2   -DVERSION=\\\"1.12\\\" -DXS_VERSION=\\\"1.12\\\" -fPIC \"-I../..\"   ODBM_File.c\nODBM_File.xs: In function \u2018XS_ODBM_File_DESTROY\u2019:\nODBM_File.xs:128: error: too few arguments to function \u2018dbmclose\u2019\nmake[1]: *** [ODBM_File.o] Error 1\nmake[1]: Leaving directory `/home1/02568/mshpak/perl/perl-5.22.0/ext/ODBM_File'\nmake[1]: Entering directory `/home1/02568/mshpak/perl/perl-5.22.0/ext/ODBM_File'\ncc -c   -fwrapv -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_FORTIFY_SOURCE=2 -Wall -Werror=declaration-after-statement -Wextra -Wc++-compat -Wwrite-strings -O2   -DVERSION=\\\"1.12\\\" -DXS_VERSION=\\\"1.12\\\" -fPIC \"-I../..\"   ODBM_File.c\nODBM_File.xs: In function \u2018XS_ODBM_File_DESTROY\u2019:\nODBM_File.xs:128: error: too few arguments to function \u2018dbmclose\u2019\nmake[1]: *** [ODBM_File.o] Error 1\nmake[1]: Leaving directory `/home1/02568/mshpak/perl/perl-5.22.0/ext/ODBM_File'\nUnsuccessful make(ext/ODBM_File): code=512 at make_ext.pl line 574.\nmake: *** [lib/auto/ODBM_File/ODBM_File.so] Error 25\n</code></pre>\n\n<p>What is error code 512, and is there a straightforward way to correct this (presumably something related to the ODBM_File directory's contents)?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["regex", "perl", "csv"], "comments": [{"owner": {"reputation": 141, "user_id": 6510268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebe7ad0b4dbaecabbf3ea6e8578d8f6?s=128&d=identicon&r=PG&f=1", "display_name": "GrinningX", "link": "https://stackoverflow.com/users/6510268/grinningx"}, "edited": false, "score": 2, "creation_date": 1466798038, "post_id": 38020170, "comment_id": 63484056, "body": "I can accept this as a duplicate.  For some reason I had not considered the problem in the way outlined in that thread to find it.  Much appreciated!"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1466809257, "last_edit_date": 1495540350, "creation_date": 1466795133, "answer_id": 38020453, "question_id": 38020170, "link": "https://stackoverflow.com/questions/38020170/replacing-quote-and-multiple-comma-delimiters-in-perl/38020453#38020453", "title": "Replacing Quote-and-Multiple-Comma Delimiters in Perl", "body": "<p>Use <a href=\"http://www.metacpan.org/module/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>. Read each line, get each of the values, and rejoin with a pipe. Let the module handle all the formatting issues for you.</p>\n\n<p>See the code in <a href=\"https://stackoverflow.com/a/17309376/2766176\">friedo's answer</a> to <a href=\"https://stackoverflow.com/q/17309314/2766176\">Replace commas with pipes, but not the commas enclosed in double quotes</a>.</p>\n"}], "owner": {"reputation": 141, "user_id": 6510268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebe7ad0b4dbaecabbf3ea6e8578d8f6?s=128&d=identicon&r=PG&f=1", "display_name": "GrinningX", "link": "https://stackoverflow.com/users/6510268/grinningx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "closed_date": 1466797955, "answer_count": 1, "score": 4, "last_activity_date": 1466809257, "creation_date": 1466793918, "question_id": 38020170, "link": "https://stackoverflow.com/questions/38020170/replacing-quote-and-multiple-comma-delimiters-in-perl", "closed_reason": "Duplicate", "title": "Replacing Quote-and-Multiple-Comma Delimiters in Perl", "body": "<p>I have a very large file that I need to parse with Perl.  The file format (which I cannot change) was originally written to allow the file to open in Excel as a CSV.  Specifically to this problem, I need to replace the delimiter in each line with a pipe (|).  Normally this is not a hard job, but I have a few issues (below) and while I do have a solution I am wondering if there is a more efficient way to accomplish my task.</p>\n\n<ol>\n<li>The data itself contains comments with commas (meaning I cannot find and replace on comma)</li>\n<li>Each \"cell\" worth of data is encapsulated in quotation marks, but if a cell was blank then no quotation marks are present</li>\n</ol>\n\n<p>Example Line in file:</p>\n\n<pre><code>\"Foo Bar\",\"More Foo\",\"More Bar\",,,,,\"Yet More\",\"Comma,Separated,Statement\"\n</code></pre>\n\n<p>My current solution looks something like the code below.  It works, but it seems inelegant and requires processing every line multiple times (something I want to avoid as this file is very large).</p>\n\n<pre><code># Change the delimiter\n$line =~ s/\",,,,,\"/|||||/g;\n$line =~ s/\",,,,\"/||||/g;\n$line =~ s/\",,,\"/|||/g;\n$line =~ s/\",,\"/||/g;\n$line =~ s/\",\"/|/g;\n\n$line =~ s/^\"//;     # Remove leading quotation mark\n$line =~ s/\"$//;     # Remove trailing quotation mark\n</code></pre>\n\n<p>Can anyone out there help me find a faster and more elegant solution?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1466787430, "post_id": 38018521, "comment_id": 63478870, "body": "Echo the line to <code>STDERR</code> so that you can see exactly what it is, and consider whether there are letter-case differences if you are using a case-sensitive file system.  (In such a system, <code>Foo</code> and <code>foo</code> are not the same file.)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1466787540, "post_id": 38018521, "comment_id": 63478950, "body": "Shells like bash expand <code>~</code> to your home directory, so <code>~&#47;LDTest.rtf</code> would become <code>&#47;home&#47;foo&#47;LDTest.rtf</code>; Perl&#39;s <code>open</code> doesn&#39;t do this. Try passing the full path to the file."}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1466787751, "post_id": 38018521, "comment_id": 63479062, "body": "Hello. Thanks for your responses. I have checked the case- there is no difference. I changed the location to &quot;/Users/roblogan/LDTest.rtf&quot; and that didn&#39;t help either."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1466788673, "post_id": 38018521, "comment_id": 63479482, "body": "See <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> -- a good StackOverflow question should include a <b>minimal</b> code sample; that is, one with only the absolute smallest amount of code that would produce the same problem; it should also be <b>verifiable</b>, so other people (not just you) can run it and get the same problem."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466788897, "post_id": 38018521, "comment_id": 63479598, "body": "...I&#39;ve tried to edit this to comply with that guideline. Please consider doing likewise in creating future questions."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1466788997, "post_id": 38018521, "comment_id": 63479644, "body": "(also, if you&#39;d tried simplifying before you asked -- ie. taking content <i>out</i> of a subroutine and seeing if you still had the same problem -- you would have had a better, narrower question)."}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1466789545, "post_id": 38018521, "comment_id": 63479902, "body": "Thanks for your help Charles! Will keep those points in mind for the future."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1466788005, "post_id": 38018681, "comment_id": 63479164, "body": "my $RawSequence = loadSequence(&quot;LDTest.rtf&quot;); while in the directory itself solved the problem. Thanks!"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1466788158, "post_id": 38018681, "comment_id": 63479241, "body": "@Rob: If it helped you, you can accept this as an answer so this question can be closed as solved."}, {"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1466788221, "post_id": 38018681, "comment_id": 63479274, "body": "I just had to wait three minutes from posting to accept it. Now it should be checked as the right answer. Thanks again."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": true, "score": 4, "last_activity_date": 1466789804, "last_edit_date": 1466789804, "creation_date": 1466787806, "answer_id": 38018681, "question_id": 38018521, "link": "https://stackoverflow.com/questions/38018521/no-such-file-or-directory-opening-filename-from-perl/38018681#38018681", "title": "No such file or directory, opening &quot;~/filename&quot; from perl", "body": "<p>You have problem in this line:</p>\n\n<pre><code>my $RawSequence = loadSequence(\"~/LDTest.rtf\");\n</code></pre>\n\n<p>Instead of using tilde give the full path of the file:</p>\n\n<pre><code>my $RawSequence = loadSequence(\"path/to/LDTest.rtf\");\n</code></pre>\n\n<p>or if you are in the same directory (meaning if you are running your program from the same directory where the file exists), just give the file name:</p>\n\n<pre><code>my $RawSequence = loadSequence(\"LDTest.rtf\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1466789583, "creation_date": 1466789583, "answer_id": 38019110, "question_id": 38018521, "link": "https://stackoverflow.com/questions/38018521/no-such-file-or-directory-opening-filename-from-perl/38019110#38019110", "title": "No such file or directory, opening &quot;~/filename&quot; from perl", "body": "<p>The equivalent of </p>\n\n<pre><code>~/LDTest.rtf\n</code></pre>\n\n<p>in the shell is</p>\n\n<pre><code>\"$ENV{HOME}/LDTest.rtf\"\n</code></pre>\n\n<p>in Perl.</p>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 38018681, "answer_count": 2, "score": 0, "last_activity_date": 1466789804, "creation_date": 1466787282, "last_edit_date": 1466788860, "question_id": 38018521, "link": "https://stackoverflow.com/questions/38018521/no-such-file-or-directory-opening-filename-from-perl", "title": "No such file or directory, opening &quot;~/filename&quot; from perl", "body": "<p>I am getting the \"no such file or directory\" error, but of course, there actually is the file in question. I am using double quotes. I am running the code in the directory where the file is located.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#!/usr/bin/perl;\nuse warnings;\nuse strict;\nuse diagnostics;\n\nopen(FASTA, \"&lt;\", \"~/LDTest.rtf\")\n</code></pre>\n\n<p>This fails even if:</p>\n\n<pre><code>touch ~/LDTest.rtf\ncd ~\n</code></pre>\n\n<p>...is run from the shell before starting the script, to ensure that the file exists and is in the current directory.</p>\n"}, {"tags": ["python", "perl", "memory", "structure"], "comments": [{"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466786518, "post_id": 38018321, "comment_id": 63478463, "body": "Then nest elements <code>data = { &quot;names&quot;:{&#39;jack&#39;: 4098, &#39;sape&#39;: 4139 }}</code>, <code>data[&quot;names&quot;][&quot;jack&quot;] -&gt;4098</code>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3776227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6389de18b704659e98aab22e0bda1f3e?s=128&d=identicon&r=PG&f=1", "display_name": "prestotron", "link": "https://stackoverflow.com/users/3776227/prestotron"}, "edited": false, "score": 0, "creation_date": 1466787974, "post_id": 38018375, "comment_id": 63479145, "body": "Worked. Thanks man!"}], "tags": [], "owner": {"reputation": 2331, "user_id": 5922757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb5fdb2ccceacfda01288f0b95a6cfdf?s=128&d=identicon&r=PG", "display_name": "Jezor", "link": "https://stackoverflow.com/users/5922757/jezor"}, "is_accepted": true, "score": 0, "last_activity_date": 1466786698, "creation_date": 1466786698, "answer_id": 38018375, "question_id": 38018321, "link": "https://stackoverflow.com/questions/38018321/python-data-structures-inside-another/38018375#38018375", "title": "Python: data Structures inside another", "body": "<p>You are using <a href=\"http://www.tutorialspoint.com/python/python_dictionary.htm\" rel=\"nofollow\"><code>dict</code> object</a> here. It can store any type of elements you want, including another <code>dict</code> object.</p>\n\n<p>That means, you can initialize your <code>data</code> like:</p>\n\n<pre><code>data = {'jack': {'age': 20, \n                 'gender': 'M'\n                }, \n\n        'sape': {'age': 35, \n                 'gender': 'F'\n                } \n       }\n</code></pre>\n\n<p>And then refer to it's internal values:</p>\n\n<pre><code>print(data['jack']['age'] # prints \"20\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "is_accepted": false, "score": -2, "last_activity_date": 1466787223, "last_edit_date": 1466787223, "creation_date": 1466786820, "answer_id": 38018412, "question_id": 38018321, "link": "https://stackoverflow.com/questions/38018321/python-data-structures-inside-another/38018412#38018412", "title": "Python: data Structures inside another", "body": "<p>The bellow code describes your required data structure</p>\n\n<p>code:</p>\n\n<pre><code>rec = {'name': {'first': 'Bob', 'last': 'Smith'},\n                  'job': ['dev', 'mgr'],\n                  'age': 40.5}\n\nrec['name'] # 'Name' is a nested dictionary\n{'last': 'Smith', 'first': 'Bob'}\n\nrec['name']['last'] # Index the nested dictionary\n'Smith'\n\n rec['job'] # 'Job' is a nested list\n['dev', 'mgr']\n\n rec['job'][-1] # Index the nested list\n'mgr'\n\n rec['job'].append('janitor') # Expand Bob's job description in-place\n\n rec\n{'age': 40.5, 'job': ['dev', 'mgr', 'janitor'], 'name': {'last': 'Smith', 'first':\n'Bob'}}\n</code></pre>\n\n<p>Reference\n<a href=\"https://bdhacker.wordpress.com/2010/02/27/python-tutorial-dictionaries-key-value-pair-maps-basics/\" rel=\"nofollow\">https://bdhacker.wordpress.com/2010/02/27/python-tutorial-dictionaries-key-value-pair-maps-basics/</a></p>\n"}], "owner": {"reputation": 35, "user_id": 3776227, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6389de18b704659e98aab22e0bda1f3e?s=128&d=identicon&r=PG&f=1", "display_name": "prestotron", "link": "https://stackoverflow.com/users/3776227/prestotron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1466786872, "accepted_answer_id": 38018375, "answer_count": 2, "score": -3, "last_activity_date": 1466787223, "creation_date": 1466786466, "question_id": 38018321, "link": "https://stackoverflow.com/questions/38018321/python-data-structures-inside-another", "closed_reason": "Duplicate", "title": "Python: data Structures inside another", "body": "<p>In Perl you can do stuff like this:</p>\n\n<pre><code>my $data-&gt;[texts}-&gt;{text1} = \"hey\";\nprint data-&gt;{texts}-&gt;{text1};\n</code></pre>\n\n<p>and it will print \"hey\". It is like a data structure (sort of array) inside another data structure...</p>\n\n<p>Obviously this is possible in Python:</p>\n\n<pre><code>data = { 'jack': 4098, 'sape': 4139 }\nprint data['jack'];\n</code></pre>\n\n<p>But I want something like: data['texts']['text1'] like it was done in Perl.</p>\n\n<p>And I need to be able to easily remove and add to this structure...</p>\n\n<p>Help?</p>\n"}, {"tags": ["perl", "operators"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466781768, "post_id": 38016862, "comment_id": 63475746, "body": "Why can&#39;t you use <code>eq</code>?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1466781873, "post_id": 38016862, "comment_id": 63475815, "body": "If one of  the operands to <code>eq</code> is a number Perl will coerce it to a string."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466781984, "post_id": 38016862, "comment_id": 63475885, "body": "To clarify, should <code>2.0</code> be equal to <code>2  </code>? (the character <code>2</code> followed by two spaces)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1466782199, "post_id": 38016862, "comment_id": 63475992, "body": "You hinted that your definition of equal differs from <code>==</code>&#39;s and from <code>eq</code>&#39;s, but you didn&#39;t specify what it is. This question is missing a key component!"}, {"owner": {"reputation": 368, "user_id": 6430078, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204857806084476/picture?type=large", "display_name": "Sergio Bernardo", "link": "https://stackoverflow.com/users/6430078/sergio-bernardo"}, "edited": false, "score": 1, "creation_date": 1466784541, "post_id": 38016862, "comment_id": 63477361, "body": "Is this an academic exercice? In real world you would use &quot;eq&quot; for that. If it is academic, you are suposed to implement your wown string comparing function..."}, {"owner": {"reputation": 65, "user_id": 5542580, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dacd1ccbe36d795fc75ed15c79ce16e5?s=128&d=identicon&r=PG&f=1", "display_name": "nithin", "link": "https://stackoverflow.com/users/5542580/nithin"}, "edited": false, "score": 0, "creation_date": 1467011043, "post_id": 38016862, "comment_id": 63534769, "body": "No I am writing a perl application which requires to read the file.Please see the question I have added more information."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1467216545, "post_id": 38016862, "comment_id": 63643377, "body": "<code>235 eq 236</code> does not return true."}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 4312369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lb5Kz.png?s=128&g=1", "display_name": "Matt M", "link": "https://stackoverflow.com/users/4312369/matt-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1466800887, "last_edit_date": 1466800887, "creation_date": 1466784779, "answer_id": 38017793, "question_id": 38016862, "link": "https://stackoverflow.com/questions/38016862/equality-operator-for-numbers-and-alpha-numbers-in-perl/38017793#38017793", "title": "equality operator for numbers and alpha-numbers in perl", "body": "<p>possible solution.. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Scalar::Util qw(looks_like_number);\n\nmy $val1 = '233';\nmy $val2 = 'V23';\n\nif ( looks_like_number($val1) &amp;&amp; looks_like_number($val2) )\n{\n    print \"both values are numbers.\";\n    if ( $val1 == $val2 )\n    {\n        print \"numeric values are equivalent.\";\n    }else{\n        print \"numeric values are not equivalent.\";\n    }\n}\nelsif ( !looks_like_number($val1) &amp;&amp; !looks_like_number($val2) )\n{\n    print \"both values are strings.\";\n    if ( $val1 eq $val2 )\n    {\n        print \"string values are equivalent.\";\n    }else{\n        print \"string values are not equivalent.\";\n    }\n}\nelse\n{\n    print \"the variables are not of the same type.\";\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5542580, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dacd1ccbe36d795fc75ed15c79ce16e5?s=128&d=identicon&r=PG&f=1", "display_name": "nithin", "link": "https://stackoverflow.com/users/5542580/nithin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467011385, "creation_date": 1466781680, "last_edit_date": 1467011385, "question_id": 38016862, "link": "https://stackoverflow.com/questions/38016862/equality-operator-for-numbers-and-alpha-numbers-in-perl", "title": "equality operator for numbers and alpha-numbers in perl", "body": "<p>I am reading a file which contains thousands of lines.\nI am reading the file line by line.\nAfter I read the line, using <code>substr</code> I am fetching 2 values for 2 variables as shown below.</p>\n\n<pre><code>$val1 = substr($line,15,3);\n$val2 = substr($line,18,3);\n</code></pre>\n\n<p>Now I want to check whether these two values are equal. <code>$val1</code> can just be a number (like 233) or it can be alphanumeric (like V23) which varies from line to line. I am neither able to use <code>==</code> operator nor <code>eq</code> operator. Please give me a suggestion how to solve this problem.</p>\n\n<p>To make it clear consider below example.\n  After reading first line val1=235 and val2=236 .Here if I use eq it returns true SO I will have to use ==.\n  After reading second line val1=v26 and val2=v26. Here I can't use == as it is alphanumric.I need to use eq.</p>\n\n<p>so how to write program for this?</p>\n"}, {"tags": ["perl", "copy"], "comments": [{"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 1, "creation_date": 1466793916, "post_id": 38016829, "comment_id": 63482072, "body": "Depending on licensing, you could just include the code in your project, or you could download it and manually install in a subfolder of your project (e.g. a <code>lib&#47;</code> folder)."}, {"owner": {"reputation": 129, "user_id": 5513090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f43db88b450c63dea45ddd6ac7d43f?s=128&d=identicon&r=PG&f=1", "display_name": "QuillAndSaber", "link": "https://stackoverflow.com/users/5513090/quillandsaber"}, "reply_to_user": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1466796138, "post_id": 38016829, "comment_id": 63483170, "body": "That&#39;s probably what I&#39;m going to end up doing, but I&#39;m still confused as to why my code detects the directory as a file."}], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "is_accepted": false, "score": 2, "last_activity_date": 1586423172, "last_edit_date": 1586423172, "creation_date": 1466804097, "answer_id": 38022439, "question_id": 38016829, "link": "https://stackoverflow.com/questions/38016829/copy-a-directory-and-all-its-contents-function/38022439#38022439", "title": "Copy a directory and all its contents function?", "body": "<p>You just made 2 mistakes :</p>\n\n<ul>\n<li>If this test <code>(-d $filename &amp;&amp; $filename ne \".\" &amp;&amp; $filename ne \"..\" )</code> fails, it means <code>$filename</code> is either not a directory <strong>or</strong> it's \".\" or \"..\". You forgot about that last possilities. A way of correcting this is to put <code>$filename ne \".\" &amp;&amp; $filename ne \"..\"</code> after testing <code>-d $filename</code> (see the code bellow).   </li>\n<li>You need to check if <code>\"$sourcedir/$filename\"</code> is a dir, and not just <code>$filename</code>.  </li>\n</ul>\n\n<p>So the foreach loop with this two problems corrected :</p>\n\n<pre><code>foreach my $filename (@files) {\n    if(-d \"$sourcedir/$filename\") {\n        if ($filename ne \".\" &amp;&amp; $filename ne \"..\" ) {\n            # if a subdirectory, make the directory and copy its contents\n            mkdir \"$destdir/$filename\";\n            rec_cpy(\"$sourcedir/$filename\",\"$destdir/$filename\");\n        }\n    }\n    else {\n        # if anything else, copy it over\n        copy (\"$sourcedir/$filename\",\"$destdir/$filename\");\n    }\n}\n</code></pre>\n\n<p><hr>\nBut as @oldtechaa mentionned, you could include the code of File::Copy::Recursive in your project.</p>\n"}], "owner": {"reputation": 129, "user_id": 5513090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f43db88b450c63dea45ddd6ac7d43f?s=128&d=identicon&r=PG&f=1", "display_name": "QuillAndSaber", "link": "https://stackoverflow.com/users/5513090/quillandsaber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1586423172, "creation_date": 1466781586, "last_edit_date": 1467034698, "question_id": 38016829, "link": "https://stackoverflow.com/questions/38016829/copy-a-directory-and-all-its-contents-function", "title": "Copy a directory and all its contents function?", "body": "<p>To start, I know that there's a library File::Copy::Recursive which has an equivalent function.  Unfortunately, I'm currently working on a server where I don't have the freedom to install libraries, and convincing the person who can is not practical.</p>\n\n<p>I'm trying to write a function which will copy all the contents of a directory, including subdirectories and their contents, to a new, empty directory.  Here's my complete code now:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse File::Copy;\n\n# To use: rec_cpy (sourcedir, destdir)\nsub rec_cpy {\n  my $sourcedir = $_[0];\n  my $destdir = $_[1];\n  # open the directory\n  opendir(DIR, $sourcedir) or die \"Failed to open $sourcedir\\n\";\n  my @files = readdir(DIR);\n  closedir(DIR);\n  # iterate over contents of directory\n  foreach my $filename (@files) {\n   if(-d $filename &amp;&amp; $filename ne \".\" &amp;&amp; $filename ne \"..\" ) {\n    # if a subdirectory, make the directory and copy its contents\n    mkdir \"$destdir/$filename\";\n    rec_cpy(\"$sourcedir/$filename\",\"$destdir/$filename\");\n    }\n    else {\n      # if anything else, copy it over\n      copy (\"$sourcedir/$filename\",\"$destdir/$filename\");\n    }\n  }\n  return;\n}\n\nrec_cpy(\"test1\", \"test2\");\nmkdir \"itried\";\n</code></pre>\n\n<p>\"test1\" is a directory which contains a file and a directory, which contains a file (all have unique names).  \"test2\" is an empty but extant directory.</p>\n\n<p>When I run this, I get an error \"'test1/..' and 'test2/..' are identical (not copied) at rec_cpy.pl line 26,\" which makes sense (since they both already exist and already have \"..\" in them).  However, when I open up test2, the directory from test1 copied as a directory, NOT as a file, yet \"itried\" gets created as a directory without a problem.  What's going on?</p>\n"}, {"tags": ["perl", "ubuntu", "module", "cpan"], "answers": [{"tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1466781860, "last_edit_date": 1495540731, "creation_date": 1466781860, "answer_id": 38016914, "question_id": 38016701, "link": "https://stackoverflow.com/questions/38016701/installing-perl-modules-on-ubuntu-16-04/38016914#38016914", "title": "Installing Perl modules on Ubuntu 16.04", "body": "<p>If you want to install module systemwide (it's what you do), you should have root privileges. Try <code>sudo make install</code> or <a href=\"https://stackoverflow.com/questions/540640/how-can-i-install-a-cpan-module-into-a-local-directory\">install modules locally</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1466793554, "creation_date": 1466793554, "answer_id": 38020073, "question_id": 38016701, "link": "https://stackoverflow.com/questions/38016701/installing-perl-modules-on-ubuntu-16-04/38020073#38020073", "title": "Installing Perl modules on Ubuntu 16.04", "body": "<blockquote>\n  <p><em>I've local::lib installed fine</em></p>\n</blockquote>\n\n<p>No, you don't. The environment has clearly not by set by local::lib. Make sure the following in your login script:</p>\n\n<pre><code>eval \"$(perl -I$HOME/perl5/lib/perl5 -Mlocal::lib)\"\n</code></pre>\n\n<p>(Adjust the path to local::lib if needed.)</p>\n\n<p>Log out and log back in or use the following to pick up the changes:</p>\n\n<pre><code>exec bash -l\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 820, "user_id": 5147708, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d63421f2bf9cb79b3c54df11430d8f6b?s=128&d=identicon&r=PG", "display_name": "Alexey Melezhik", "link": "https://stackoverflow.com/users/5147708/alexey-melezhik"}, "is_accepted": false, "score": 1, "last_activity_date": 1467571816, "creation_date": 1467571816, "answer_id": 38173263, "question_id": 38016701, "link": "https://stackoverflow.com/questions/38016701/installing-perl-modules-on-ubuntu-16-04/38173263#38173263", "title": "Installing Perl modules on Ubuntu 16.04", "body": "<p>Alternatively you may try a <a href=\"https://metacpan.org/pod/cpanm\" rel=\"nofollow\">cpanm</a> client, which handles local::lib installs either:</p>\n\n<pre><code>$ cpanm -l ~/ Geo::ShapeFile Math::Round \n</code></pre>\n\n<p>And then don't forget to adjust perl5lib var to see installed modules:</p>\n\n<pre><code>$ PERL5LIB=~/lib/perl5\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6244525, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207517555070091/picture?type=large", "display_name": "Cian Barrett", "link": "https://stackoverflow.com/users/6244525/cian-barrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3416, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467571816, "creation_date": 1466781264, "question_id": 38016701, "link": "https://stackoverflow.com/questions/38016701/installing-perl-modules-on-ubuntu-16-04", "title": "Installing Perl modules on Ubuntu 16.04", "body": "<p>I'm trying to install Perl modules Geo::ShapeFile and Math::Round but I keep coming across the same error and I can't find a solution that works. I've local::lib installed fine but its not being found or something? Am I doing it in the wrong place?</p>\n\n<pre><code>cian@cian-Aspire-5750:~/Documents/Math-Round-0.07$ make install\nManifying 1 pod document\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nERROR: Can't create '/usr/local/man/man3'\nmkdir /usr/local/man/man3: Permission denied at /usr/share/perl/5.22/ExtUtils/Install.pm line 477.\n\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n at -e line 1.\nMakefile:697: recipe for target 'pure_site_install' failed\nmake: *** [pure_site_install] Error 13\n</code></pre>\n\n<p>I notice in my directory '/usr/local/man' points to 'usr/share/man'. I dunno if this was an issue how to solve it. Thanks.</p>\n"}, {"tags": ["linux", "windows", "perl"], "comments": [{"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1466782319, "post_id": 38016602, "comment_id": 63476057, "body": "Why did you add the leading and trailing forward slash?  Does removing them fix the problem?"}, {"owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "reply_to_user": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1466782549, "post_id": 38016602, "comment_id": 63476182, "body": "I tried that but it doesn&#39;t fix it :( I should be clear that this is someone else&#39;s script that I&#39;m just trying to get to work on my system. I&#39;m not sure why they added the slashes though"}, {"owner": {"reputation": 900, "user_id": 3828957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCj7F.jpg?s=128&g=1", "display_name": "makadev", "link": "https://stackoverflow.com/users/3828957/makadev"}, "edited": false, "score": 0, "creation_date": 1466783279, "post_id": 38016602, "comment_id": 63476617, "body": "Some of the POSIX/Windows path conversions are done by the cygwin layer. In your case it looks like the files are searched under <code>&#47;c:&#47;..</code> but cygwin normally maps <code>c:&#47;</code> to <code>&#47;</code> or <code>&#47;cygdrive&#47;c</code> so its - probably - something else wrecking the filenames. You could try to create a symbolic link as dirty trick like <code>ln -s &#47;cygdrive&#47;c &#39;&#47;c:&#39;</code> or copy/link your data to the &quot;home&quot; ~ and use relative path names if possible."}, {"owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "edited": false, "score": 0, "creation_date": 1466784364, "post_id": 38016602, "comment_id": 63477267, "body": "You&#39;re my hero! Changing the env variable to /cygdrive/c/ seems to have fixed the issue. Thank you!!!"}], "owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466782761, "creation_date": 1466780961, "last_edit_date": 1466782761, "question_id": 38016602, "link": "https://stackoverflow.com/questions/38016602/discrepancy-between-using-forward-vs-backslash-in-linux-emulator-on-windows", "title": "Discrepancy between using forward vs. backslash in Linux emulator on Windows", "body": "<p>So I've run into quite the problem that I have no idea how to solve. I'm using the Cygwin Linux emulator on a Windows computer to do some molecular dynamics simulations that are written in perl. I've been running into the issue where I am unable to read a file. The code that is the problem is here:</p>\n\n<pre><code>if (defined $topfile &amp;&amp; -r $topfile) {\n  $self-&gt;_sendCommand(\"open unit 10 read form name \\\"$topfile\\\"\");\n  $self-&gt;_sendCommand(\"read RTF card unit 10\");\n  $self-&gt;_sendCommand(\"close unit 10\");\n  $havertf=1;\n}\n</code></pre>\n\n<p>I've tested it using the following:</p>\n\n<pre><code>print \"$topfile\\n\";\nif (-r $topfile) {\n  print \"YES\\n\";\n}\nif (defined $topfile) {\n  print \"YES2\\n\";\n}\n</code></pre>\n\n<p>So both YES statements print and I know that the file is defined and readable.</p>\n\n<p>I tested print statements for each line of the first part and my problem appears after \"open unit 10 read form name.\" \nHere is the exact error:</p>\n\n<pre><code> CHARMM&gt;    open unit 10 read form name /C:/CHARMM_Nichols/CHARMM/test/data/top_all22_prot.inp/\n VOPEN&gt; Attempting to open::/c:/charmm_nichols/charmm/test/data/top_all22_prot.inp/::\n OPNLGU&gt; Unit  10 cannot be opened as /C:/CHARMM_NICHOLS/CHARMM/TEST/DATA/TOP_ALL22_PROT.INP/  \n</code></pre>\n\n<p>I think the issue comes down to backslashes vs forwardslashes, as all of my directories are in a windows system (backslashes), but the programs are executing expecting a Linux system (forward slashes). Any idea how to fix and/or test this? Could I write a script to change the forward to backslashes? It won't let me change my environment variable ($topfile) to be backslashes in the emulator.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1466774117, "post_id": 38014082, "comment_id": 63470904, "body": "What about <a href=\"http://p3rl.org/seek\" rel=\"nofollow noreferrer\">seek</a>?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1466774127, "post_id": 38014082, "comment_id": 63470910, "body": "Read the file once.  When you find the first pattern, start writing data to a temp file.  Read the temp file next time.  Also, unrelated, use <code>my $file = open(...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6983, "user_id": 274350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6680544d5ca7c1a0ea3eaba1f3c438f7?s=128&d=identicon&r=PG", "display_name": "Richard Neish", "link": "https://stackoverflow.com/users/274350/richard-neish"}, "reply_to_user": {"reputation": 1, "user_id": 5944860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3043476e49e0ed039aff646939024003?s=128&d=identicon&r=PG&f=1", "display_name": "sid", "link": "https://stackoverflow.com/users/5944860/sid"}, "edited": false, "score": 0, "creation_date": 1467022486, "post_id": 38014578, "comment_id": 63541483, "body": "@sid Please mark this as an accepted answer.  This will help other users looking for this issue."}], "tags": [], "owner": {"reputation": 6983, "user_id": 274350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6680544d5ca7c1a0ea3eaba1f3c438f7?s=128&d=identicon&r=PG", "display_name": "Richard Neish", "link": "https://stackoverflow.com/users/274350/richard-neish"}, "is_accepted": false, "score": 2, "last_activity_date": 1466774737, "creation_date": 1466774737, "answer_id": 38014578, "question_id": 38014082, "link": "https://stackoverflow.com/questions/38014082/start-reading-a-large-file-from-a-certain-line-in-perl/38014578#38014578", "title": "Start reading a large file from a certain line in perl", "body": "<p>You can use the <code>seek()</code> and <code>tell()</code> methods to move around in the file.  Something like the following:</p>\n\n<pre><code>open(DATA_IN, \"&lt;$in_file\") or die \"Couldn't open file $in_file, $!\";\nopen(DATA_OUT, \"&gt;$out_file\") or die \"Couldn't open file $out_file, $!\";\nwhile(&lt;DATA_IN&gt;){\n    if($_ =~ /pattern_1/){\n        # Save the current position\n        my $saved_position = tell(DATA_IN);\n\n        # extract some data\n        TEMP: while(&lt;DATA_IN&gt;){\n            if($_ =~ /pattern_2/){\n                my $i = 0;\n                my $line;\n                while ($i&lt;4){\n                    $line = &lt;DATA_IN&gt;;\n                    $i++;\n                }\n                print $line; #print the data 4 lines after the matched pattern_2\n                last TEMP;\n            }\n        }\n\n        # Restore the saved position\n        seek(DATA_IN, saved_position, 0);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5944860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3043476e49e0ed039aff646939024003?s=128&d=identicon&r=PG&f=1", "display_name": "sid", "link": "https://stackoverflow.com/users/5944860/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466774737, "creation_date": 1466773256, "question_id": 38014082, "link": "https://stackoverflow.com/questions/38014082/start-reading-a-large-file-from-a-certain-line-in-perl", "title": "Start reading a large file from a certain line in perl", "body": "<ol>\n<li>I have to match 2 patterns (pattern_1 and pattern_2)</li>\n<li>Data to match for pattern_2 depends upon pattern_1 (pattern_2 uses some data extracted out of pattern_1)</li>\n<li>pattern_2 always occurs after pattern_1</li>\n<li>once done matching pattern_2 i need to move back to the place where pattern_1 was matched and start again</li>\n</ol>\n\n<p>I have following code:</p>\n\n<pre><code>open(DATA_IN, \"&lt;$in_file\") or die \"Couldn't open file $in_file, $!\";\nopen(DATA_OUT, \"&gt;$out_file\") or die \"Couldn't open file $out_file, $!\";\nwhile(&lt;DATA_IN&gt;){\n    if($_ =~ /pattern_1/){\n        #extract some data\n        open(DATA_TEMP, \"&lt;$in_file\") or die \"Couldn't open file $in_file, $!\";\n        TEMP: while(&lt;DATA_TEMP&gt;){\n            if($_ =~ /pattern_2/){\n                my $i = 0;\n                my $line;\n                while ($i&lt;4){\n                    $line = &lt;DATA_TEMP&gt;;\n                    $i++;\n                }\n                print $line; #print the data 4 lines after the matched pattern_2\n                last TEMP;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It works fine, but the issue is that it loads $in_file everytime for pattern_1 match from the start which takes a long time.\nCan you suggest me a way to load $in_file only from pattern_1 onwards?</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1466768797, "post_id": 38012672, "comment_id": 63467670, "body": "did you read my answer on perlmonks? <a href=\"http://perlmonks.org/?node_id=1166486\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1166486</a>"}, {"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 1, "creation_date": 1466771226, "post_id": 38012672, "comment_id": 63469133, "body": "I believe this is off-topic for this site because it relates only to administration (albeit packages related to programming). You may consider asking to have this moved to a different SE site."}, {"owner": {"reputation": 99, "user_id": 4895045, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a955873930e71e94b3088e8733f94fb0?s=128&d=identicon&r=PG", "display_name": "SteveResearch", "link": "https://stackoverflow.com/users/4895045/steveresearch"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1466786168, "post_id": 38012672, "comment_id": 63478262, "body": "@stevieb I did see your comments. Noted and resolved thank you."}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 4895045, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a955873930e71e94b3088e8733f94fb0?s=128&d=identicon&r=PG", "display_name": "SteveResearch", "link": "https://stackoverflow.com/users/4895045/steveresearch"}, "is_accepted": false, "score": 0, "last_activity_date": 1466787679, "creation_date": 1466787679, "answer_id": 38018649, "question_id": 38012672, "link": "https://stackoverflow.com/questions/38012672/enmtools-1-4-4-pl-on-ubuntu-15-04/38018649#38018649", "title": "ENMTools_1.4.4.pl on Ubuntu 15.04?", "body": "<p>@stevieb gave me the answer. I'll post it here as a matter of closure:</p>\n\n<p>Perl seemed OK itself</p>\n\n<p>1.4.4$ perl -MData::Dumper -E 'say Data::Dumper->VERSION'<br/>\n2.151_01</p>\n\n<p>Once I had installed cpanm I used:<br/>\ncpanm Tkx</p>\n\n<p>It opens and ENMTools seems to work</p>\n"}], "owner": {"reputation": 99, "user_id": 4895045, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a955873930e71e94b3088e8733f94fb0?s=128&d=identicon&r=PG", "display_name": "SteveResearch", "link": "https://stackoverflow.com/users/4895045/steveresearch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466787679, "creation_date": 1466768705, "question_id": 38012672, "link": "https://stackoverflow.com/questions/38012672/enmtools-1-4-4-pl-on-ubuntu-15-04", "title": "ENMTools_1.4.4.pl on Ubuntu 15.04?", "body": "<p>I am trying to get ENMTools_1.4.4.pl running on Ubuntu 15.04.</p>\n\n<p>According to the docs I need Tk+ and Perl. How do I:<br/><br/>\n- Check the versions that i may already have?<br/>\n- update/install the latest versions?<br/>\n- launch the *.pl script?<br/></p>\n\n<p>I tried:\n    /usr/bin/perl ./ENMTools_1.4.4.pl'</p>\n\n<p>I currently get:</p>\n\n<pre><code>\"Can't locate Tkx.pm in @INC (you may need to install the Tkx module) (\n+@INC contains: /etc/perl /usr/local/lib/i386-linux-gnu/perl/5.20.2 /u\n+sr/local/share/perl/5.20.2 /usr/lib/i386-linux-gnu/perl5/5.20 /usr/sh\n+are/perl5 /usr/lib/i386-linux-gnu/perl/5.20 /usr/share/perl/5.20 /usr\n+/local/lib/site_perl .) at ./ENMTools.pl line 7.\nBEGIN failed--compilation aborted at ./ENMTools.pl line 7\"\n</code></pre>\n\n<p>Any ideas?\nSteve</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1466775987, "post_id": 38011708, "comment_id": 63472054, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1040657/how-can-i-grab-multiple-lines-after-a-matching-line-in-perl\">How can I grab multiple lines after a matching line in Perl?</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1468852368, "post_id": 38011708, "comment_id": 64284405, "body": "This looks like XML. Is it XML? Because if so - an XML parser can do it quite trivially."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1466776005, "post_id": 38011709, "comment_id": 63472066, "body": "It&#39;s called the <i>flip flop operator</i> (in case you want to google for it or something)."}], "tags": [], "owner": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1466765658, "creation_date": 1466765658, "answer_id": 38011709, "question_id": 38011708, "link": "https://stackoverflow.com/questions/38011708/how-to-extract-lines-between-a-starting-and-ending-regular-expression-in-perl/38011709#38011709", "title": "How to extract lines between a starting and ending regular expression in Perl", "body": "<p>You could use the syntax <code>&lt;match_regex_1&gt; .. &lt;match_regex_2&gt;</code> like this:</p>\n\n<pre><code>use strict;\n\nmy @file = (\n    \"&lt;title&gt;List of widgets&lt;/title&gt;\\n\",\n    \"&lt;widgets&gt;\\n\",\n    \"   &lt;button&gt;widget001.xml&lt;/button&gt;\\n\",\n    \"   &lt;textArea&gt;widget002.xml&lt;/textArea&gt;\\n\",\n    \"   &lt;menu&gt;widget002.xml&lt;/menu&gt;\\n\",\n    \"&lt;/widgets&gt;\\n\",\n    \"&lt;footer&gt;\\n\",\n    \"   This is the footer\\n\",\n    \"&lt;/footer&gt;\\n\",\n);\n\nmy $in_list_widgets = 0;\nfor my $line (@file) {\n    if ($line=~m%&lt;widgets% .. $line=~m%&lt;/widgets&gt;%) {\n        &amp;process_line($line) if ($line!~m%&lt;(widgets|/widgets&gt;)%);\n    } else {\n        #Do nothing\n    }\n}\n\nsub process_line {\n    my $line = shift;\n    print $line;\n}\n</code></pre>\n\n<p>Some explanations:</p>\n\n<ul>\n<li><code>if ($line=~m%&lt;widgets% .. $line=~m%&lt;/widgets&gt;%)</code>: start to execute following block when first condition is true, until last condition is true.</li>\n<li><code>&amp;process_line($line) if ($line!~m%&lt;(widgets|/widgets&gt;)%);</code>: without the <code>if ($line!~m%...</code>, the lines <code>&lt;widgets&gt;</code> and <code>&lt;/widgets&gt;</code> would be processed as well</li>\n</ul>\n\n<p>Hope it can help. </p>\n"}, {"comments": [{"owner": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "edited": false, "score": 0, "creation_date": 1468900264, "post_id": 38439540, "comment_id": 64303551, "body": "Nice code. XML parser does the trick nicely indeed. Actually, I was posting this question to remember and share about flip-flow operator for a more generic case (and not only XML). Thanks again for your time."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "edited": false, "score": 0, "creation_date": 1468906445, "post_id": 38439540, "comment_id": 64305420, "body": "The range operator is useful,  but a horrible choice for XML,  because of formatting,  nested nodes and context."}, {"owner": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "edited": false, "score": 0, "creation_date": 1468912581, "post_id": 38439540, "comment_id": 64308296, "body": "True. Unless if you are 200% sure there are now nested nodes (e.g. no <code>&lt;widgets&gt;</code> in <code>&lt;widgets&gt;</code>)."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "edited": false, "score": 0, "creation_date": 1468912764, "post_id": 38439540, "comment_id": 64308394, "body": "Even then. The point of XML is that it is a data transfer language.  The spec is strict on what it does or doesn&#39;t allow. Someone generating XML will be following that spec. Which means if the person processing the XML isn&#39;t, then one day it might break mysteriously because of an upstream data change in an otherwise perfectly valid way, according to that spec. That&#39;s really bad design."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1468852738, "creation_date": 1468852738, "answer_id": 38439540, "question_id": 38011708, "link": "https://stackoverflow.com/questions/38011708/how-to-extract-lines-between-a-starting-and-ending-regular-expression-in-perl/38439540#38439540", "title": "How to extract lines between a starting and ending regular expression in Perl", "body": "<p>On the offchance this is XML - and it looks like it is - I would suggest an XML parser.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; parse ( \\*DATA );\n$twig -&gt; set_pretty_print('indented');\n\n$_ -&gt; print for map { $twig -&gt; findnodes(\"//$_\",0) } qw ( button textArea menu );\n\n__DATA__\n&lt;root&gt;\n  &lt;title&gt;List of widgets&lt;/title&gt;\n  &lt;widgets&gt;\n    &lt;button&gt;widget001.xml&lt;/button&gt;\n    &lt;textArea&gt;widget002.xml&lt;/textArea&gt;\n    &lt;menu&gt;widget002.xml&lt;/menu&gt;\n  &lt;/widgets&gt;\n  &lt;footer&gt;\n   This is the footer\n&lt;/footer&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>&lt;button&gt;widget001.xml&lt;/button&gt;\n&lt;textArea&gt;widget002.xml&lt;/textArea&gt;\n&lt;menu&gt;widget002.xml&lt;/menu&gt;\n</code></pre>\n\n<p>Or for the sake of clarity:</p>\n\n<pre><code>my $twig = XML::Twig -&gt; new -&gt; parsefile('your_file'); \nforeach my $widgets ( $twig -&gt; root -&gt; children('widgets') ) {\n   foreach my $child ( $widgets -&gt; children ) { \n      $child -&gt; print;\n      print \"\\n\";\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 38439540, "answer_count": 2, "score": 0, "last_activity_date": 1468852738, "creation_date": 1466765658, "last_edit_date": 1466766784, "question_id": 38011708, "link": "https://stackoverflow.com/questions/38011708/how-to-extract-lines-between-a-starting-and-ending-regular-expression-in-perl", "title": "How to extract lines between a starting and ending regular expression in Perl", "body": "<p>I want to use Perl to loop through a file (or an array), start processing elements when a regular expression is matched and stopping processing when another regular expression is met.</p>\n\n<p>One way to do it is to have a variable used as a flag (=1 when starting regex is met, and =0 when ending regex is met).</p>\n\n<p>For example, the following works but is awfully ugly!!</p>\n\n<pre><code>use strict;\n\nmy @file = (\n    \"&lt;title&gt;List of widgets&lt;/title&gt;\\n\",\n    \"&lt;widgets&gt;\\n\",\n    \"   &lt;button&gt;widget001.xml&lt;/button&gt;\\n\",\n    \"   &lt;textArea&gt;widget002.xml&lt;/textArea&gt;\\n\",\n    \"   &lt;menu&gt;widget002.xml&lt;/menu&gt;\\n\",\n    \"&lt;/widgets&gt;\\n\",\n    \"&lt;footer&gt;\\n\",\n    \"   This is the footer\\n\",\n    \"&lt;/footer&gt;\\n\",\n);\n\nmy $in_list_widgets = 0;\nfor my $line (@file) {\n    if ($line=~m%&lt;widgets%) {\n        $in_list_widgets = 1;\n    } elsif ($line=~m%&lt;/widgets&gt;%) {\n        $in_list_widgets = 0;\n    } else {\n        if ($in_list_widgets == 1) {\n            &amp;process_line($line);\n        } else {\n            #Do nothing\n        }\n    }\n}\n\nsub process_line {\n    my $line = shift;\n    print $line;\n}\n</code></pre>\n\n<p>What would be a more elegant way to do it and still get the same result?</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;button&gt;widget001.xml&lt;/button&gt;\n&lt;textArea&gt;widget002.xml&lt;/textArea&gt;\n&lt;menu&gt;widget002.xml&lt;/menu&gt;\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "netbeans", "net-snmp"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466777547, "post_id": 38010107, "comment_id": 63473008, "body": "What command did you run to install the module? <a href=\"https://metacpan.org/pod/Net::SNMP\" rel=\"nofollow noreferrer\">Net::SNMP</a>, a pure Perl module available on CPAN, is not the same as <a href=\"http://www.net-snmp.org/docs/perl-SNMP-README.html\" rel=\"nofollow noreferrer\">SNMP.pm</a>, the Perl API for the Net-SNMP C library."}], "answers": [{"tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": false, "score": 2, "last_activity_date": 1466761062, "creation_date": 1466761062, "answer_id": 38010204, "question_id": 38010107, "link": "https://stackoverflow.com/questions/38010107/cant-locate-net-snmp-pm-in-inc-you-may-need-to-install-the-netsnmp-module/38010204#38010204", "title": "Can&#39;t locate Net/SNMP.pm in @INC (you may need to install the Net::SNMP module", "body": "<p>You should print <code>@INC</code> magic array to know where perl looks for installed modules. Check whether <code>Net/SNMP.pm</code> is somewhere there.</p>\n\n<p>To add another path to <code>@INC</code> use <code>-I</code> switch for perl or <code>PERL5LIB</code> environment variable.</p>\n"}], "owner": {"reputation": 83, "user_id": 4507275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/522f64c21f169285a481ec774fd26c12?s=128&d=identicon&r=PG&f=1", "display_name": "Albert Leonardo Pisa", "link": "https://stackoverflow.com/users/4507275/albert-leonardo-pisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1871, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1532364916, "creation_date": 1466760762, "last_edit_date": 1532364916, "question_id": 38010107, "link": "https://stackoverflow.com/questions/38010107/cant-locate-net-snmp-pm-in-inc-you-may-need-to-install-the-netsnmp-module", "title": "Can&#39;t locate Net/SNMP.pm in @INC (you may need to install the Net::SNMP module", "body": "<p>as to the title, i faced error Can't locate Net/SNMP.pm in @INC (you may need to install the Net::SNMP module while trying to run my perl script from netbeans. Its clearly says i need to install Net::SNMP module. But, i have already installed net-snmp module on my windows tho, and configure it by following <a href=\"http://kb.juniper.net/InfoCenter/index?page=content&amp;id=KB25949&amp;actp=search\" rel=\"nofollow\">this</a> tutorial . is Net::SNMP and net-snmp different? if yes, how to install Net::SNMP on windows 8.1 and 10 ? i already installed activeperl and also net-snmp on my computer. feels hopeless because already done some research yet still unable to found solution to solve this problem.</p>\n\n<p>any help are greatly appreciated. thank you</p>\n"}, {"tags": ["regex", "perl", "csv"], "answers": [{"comments": [{"owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1466761553, "post_id": 38009874, "comment_id": 63463464, "body": "Well you solved indirectly the problem! With the hint to check my file more carefully, I noticed that the <b>.csv</b> ist a windows-styled file so I had to search for \\r\\n rather than just only \\n! When I tried your (working!) example I check the file for its coding and ... yeah, maybe a novice fault, but actually the solution ;)  And your tips a very helpful! Thanks!"}, {"owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1466761821, "post_id": 38009874, "comment_id": 63463640, "body": "Thanks again, I tried the m{} and /x and they work just fine. Leaving out the <code>,</code> in the <code>[ ]</code> makes it actually more readable too."}, {"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "reply_to_user": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1467184932, "post_id": 38009874, "comment_id": 63620931, "body": "<code>,</code> in <code>[]</code> means it will match <code>,</code> too that is <i>not</i> what you want"}, {"owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "edited": false, "score": 0, "creation_date": 1467185290, "post_id": 38009874, "comment_id": 63621145, "body": "Yes, I just thoght so. Actually I put the <code>,</code> in betweend the values because I just typed what I constucted on paper building a regular expression without thinking of the perl-Syntax of regexes. Thanks for your advise!"}], "tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": true, "score": 2, "last_activity_date": 1479464907, "last_edit_date": 1479464907, "creation_date": 1466760178, "answer_id": 38009874, "question_id": 38009593, "link": "https://stackoverflow.com/questions/38009593/regex-match-on-whole-csv-file/38009874#38009874", "title": "Regex match on whole .csv file", "body": "<p>Well, this actually works:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $content = join('',&lt;DATA&gt;);\n\nif ($content =~ /wellenname;tag\\n(Welle [A-Z]+[0-9]*;\\d{2}\\/\\d{2}\\/\\d{4}\\n)+server;welle\\n(\\S*;Welle [a-z,A-Z,0-9]+( Rand)*(\\n)*)+/) {\n  print \"Syntax seems to be valid!\";\n} else {\n  print \"You have syntax errors!\";\n}\n\n__DATA__\nwellenname;tag\nWelle A;01/02/2016\nWelle B3;14/11/2016\nserver;welle\nserver5name032;Welle B3 Rand\nserver3name01;Welle A\nserver2name;Welle B3\n</code></pre>\n\n<p>There is a chance you have a problem with your file. Maybe you have to search for <strong>\\r\\n</strong> instead of <strong>\\n</strong> when it's a windows-generated file.</p>\n\n<p>But your regex still is not perfect.</p>\n\n<p>First of all, you miss <code>^</code> and <code>$</code> at the beginning and the end of the regex respectively. Now it can match CSV with the extra symbols before and after your actual CSV. Second, you don't need commas inside <code>[]</code>, so <code>[a-z,A-Z,0-9]</code> should be <code>[a-zA-Z0-9]</code> (or it would match <code>,</code> as well as other symbols you specified). Also, you should consider using <code>/x</code> switch (to make your regex more readable) and use <code>m{...}</code> instead of <code>/.../</code> to not escape <code>/</code> inside of the regex.</p>\n\n<p>So, my final version is:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $content = join('',&lt;DATA&gt;);\n\nif (\n    $content =~ m{\n        ^\n        wellenname;tag\\n\n        (Welle[ ][A-Z]+[0-9]*;\\d{2}/\\d{2}/\\d{4}\\n)+\n        server;welle\\n\n        (\\S*;Welle[ ][a-z,A-Z,0-9]+([ ]Rand)*(\\n)*)+\n        $\n    }x\n) {\n  print 'Syntax seems to be valid!';\n}\nelse {\n  print 'You have syntax errors!';\n}\n\n__DATA__\nwellenname;tag\nWelle A;01/02/2016\nWelle B3;14/11/2016\nserver;welle\nserver5name032;Welle B3 Rand\nserver3name01;Welle A\nserver2name;Welle B3\n</code></pre>\n\n<p>Mind that I use <code>[ ]</code> to match space while using <code>/x</code>. I also use <code>'...'</code> instead of <code>\"...\"</code>, because we don't need interpolation enabled in that strings.</p>\n"}], "owner": {"reputation": 534, "user_id": 6356910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5d88fc45e4185aa228d3ef08f0442?s=128&d=identicon&r=PG&f=1", "display_name": "Otterbein", "link": "https://stackoverflow.com/users/6356910/otterbein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 38009874, "answer_count": 1, "score": 1, "last_activity_date": 1479464907, "creation_date": 1466759408, "last_edit_date": 1466759767, "question_id": 38009593, "link": "https://stackoverflow.com/questions/38009593/regex-match-on-whole-csv-file", "title": "Regex match on whole .csv file", "body": "<p>Good Morning!</p>\n\n<p>I'm struggling with a problem, I never thought it would be one. I have a <strong>.csv</strong> file with seperator <code>;</code> which I like to check with respect of its syntax. It looks like this:</p>\n\n<pre><code>wellenname;tag\nWelle A;01/02/2016\nWelle B3;14/11/2016\nserver;welle\nserver5name032;Welle B3 Rand\nserver3name01;Welle A\nserver2name;Welle B3\n</code></pre>\n\n<p>So I have a beautiful formatted <strong>.csv</strong> file which I can process with a regex. Therefore I constructed four cases for the regex:</p>\n\n<ol>\n<li>wellenname;tag\\n</li>\n<li>(Welle [A-Z]+[0-9]*;\\d{2}/\\d{2}/\\d{4}\\n)+</li>\n<li>server;welle\\n</li>\n<li>(\\S*;Welle [a-z,A-Z,0-9]+( Rand)<em>(\\n)</em>)+</li>\n</ol>\n\n<p>This worked quiet beautiful in a Tool named <strong>The Regex Coach</strong> which basically tries to match a regexp and a string and outputs where it struggles.</p>\n\n<p>Then I put it together in Perl. Reading the file and checking the syntax:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nmy $filename = 'theFile.csv';\n\nmy $content;\n\nopen(my $fh, '&lt;', $filename) or die \"Could not open file $filename $!\";\n$content = join('',&lt;$fh&gt;);\n\nif ($content =~ /wellenname;tag\\n(Welle [A-Z]+[0-9]*;\\d{2}\\/\\d{2}\\/\\d{4}\\n)+server;welle\\n(\\S*;Welle [a-z,A-Z,0-9]+( Rand)*(\\n)*)+/) { \n  print \"Syntax seems to be valid!\";\n\n}else{\n  print \"You have syntax errors!\";\n}\n</code></pre>\n\n<p>I went through the file line by line, but even if I insert only one entry per section it fails. (or better: It jumps to the <strong>else</strong> and prints the string)</p>\n\n<p>Did I forgot sth. or is there a mayor mistake in my thinking?\nI would be very pleased if somebody could give me a hint!</p>\n"}, {"tags": ["perl", "rt"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 1858556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9534aed1abe40ddfb6d90dff5892fffd?s=128&d=identicon&r=PG", "display_name": "lazilyInitialised", "link": "https://stackoverflow.com/users/1858556/lazilyinitialised"}, "edited": false, "score": 0, "creation_date": 1467010814, "post_id": 38032889, "comment_id": 63534659, "body": "Thanks. Assigning the value returned from the called subroutine to a variable in the caller subroutine resolved it."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": true, "score": 1, "last_activity_date": 1466888082, "creation_date": 1466888082, "answer_id": 38032889, "question_id": 38009052, "link": "https://stackoverflow.com/questions/38009052/perl-hooklexwrap-unable-to-access-return-value-in-post-wrapper-method/38032889#38032889", "title": "Perl Hook::LexWrap Unable to access return value in post wrapper method", "body": "<p>I tested the example code from Hook::LexWrap perldoc and found that $_[-1] is undefined only when wrapped subroutine is called in a void context.\nSo, make sure that you assign return value from your subroutine to some variable.</p>\n"}], "owner": {"reputation": 83, "user_id": 1858556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9534aed1abe40ddfb6d90dff5892fffd?s=128&d=identicon&r=PG", "display_name": "lazilyInitialised", "link": "https://stackoverflow.com/users/1858556/lazilyinitialised"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38032889, "answer_count": 1, "score": 2, "last_activity_date": 1466888082, "creation_date": 1466757572, "last_edit_date": 1466758068, "question_id": 38009052, "link": "https://stackoverflow.com/questions/38009052/perl-hooklexwrap-unable-to-access-return-value-in-post-wrapper-method", "title": "Perl Hook::LexWrap Unable to access return value in post wrapper method", "body": "<p>We are customising the Request Tracker (RT) ticketing tool. We want to add certain extra filters to the values returned from <code>SimpleSearch</code> subroutine in <code>RT::Users</code>.</p>\n\n<p>Following Hook::Lexwrap code we have written to access the return value and the arguments from the above subroutine.</p>\n\n<p><em>Users_Local.pm</em></p>\n\n<pre><code>package RT::Users;\nuse strict;\nuse Hook::LexWrap;\nwrap 'SimpleSearch' =&gt;\n    post=&gt; sub {\n        RT::Logger-&gt;info(\"accessing return value here $_[-1]\");\n        RT::Logger-&gt;info(\"I got the arguments in post: [@_]\");\n    },\n;\n1;\n</code></pre>\n\n<p>Following is the output:</p>\n\n<p><strong>accessing return value here</strong>  (/opt/requestTracker/sbin/../local/lib/RT/Users_Local.pm:6)</p>\n\n<p>I am not able to understand why an empty value exists in $_[-1].</p>\n\n<p>Following is the text quoted from <a href=\"http://search.cpan.org/~ether/Hook-LexWrap-0.25/lib/Hook/LexWrap.pm\" rel=\"nofollow\">http://search.cpan.org/~ether/Hook-LexWrap-0.25/lib/Hook/LexWrap.pm</a></p>\n\n<p>\"<em>In a post-wrapper, $_[-1] contains the return value\nproduced by the wrapped subroutine. In a scalar return\ncontext, this value is the scalar return value. In an\nlist return context, this value is a reference to the\narray of return values. $_[-1] may be assigned to in a\npost-wrapper, and this changes the return value accordingly</em>.\"</p>\n\n<p>How can I access the return value from the original subroutine? Any help is appreciated. Thanks</p>\n"}, {"tags": ["xml", "perl", "xslt"], "comments": [{"owner": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "edited": false, "score": 0, "creation_date": 1466752807, "post_id": 38007406, "comment_id": 63458700, "body": "what about <code>$OTHERTHE_File</code> and <code>document($OTHERTHE_File)&#47;bsg&#47;msg</code>, are they sure to be passed and existing? Maybe it&#39;s a path issue finding $OTHERTHE_File? Is it a fully qualified path?"}, {"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "reply_to_user": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "edited": false, "score": 0, "creation_date": 1466753139, "post_id": 38007406, "comment_id": 63458910, "body": "@StefanHegny.. yes, the path supplied is fully qualified path. The <code>OTHER_File</code> may not be always present. I wonder why the transformation in java works fine in that case."}, {"owner": {"reputation": 1932, "user_id": 2322941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OCqy9.jpg?s=128&g=1", "display_name": "Stefan Hegny", "link": "https://stackoverflow.com/users/2322941/stefan-hegny"}, "edited": false, "score": 0, "creation_date": 1466754946, "post_id": 38007406, "comment_id": 63459904, "body": "your question title suggests something &quot;from one xslt file to another&quot;, are there two xslts involved, how are they &quot;coupled&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 5767557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e0d1d4e4fbd88fd19b1efe5295ee7b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Blackburn", "link": "https://stackoverflow.com/users/5767557/phil-blackburn"}, "is_accepted": true, "score": 1, "last_activity_date": 1466755013, "creation_date": 1466755013, "answer_id": 38008409, "question_id": 38007406, "link": "https://stackoverflow.com/questions/38007406/variable-not-available-from-one-xsl-file-to-other/38008409#38008409", "title": "Variable not available from one xsl file to other", "body": "<p>$tvariable is a xml fragment.  </p>\n\n<p>It seems likely to me that Perl is using a XSL 1.0 Processor.  In which case your problem is that $tvariable will need to be converted froma fragment into a node-set before you can use it.  XSL 2, handles fragments just as you would expect which is why the code runs in Saxon.\nFortunaltely most XSL 1.0 Processors (prehap all?) provide support for fragments with an extension function.  You'll need to check your documentation for the details.\nYour select statement will become something like:</p>\n\n<pre><code> select=\"node-set($tvariables)/msg/entry[@key = $current_key]\"\n</code></pre>\n\n<p>Check out <a href=\"http://www.xml.com/pub/a/2003/07/16/nodeset.html\" rel=\"nofollow\">http://www.xml.com/pub/a/2003/07/16/nodeset.html</a> for more info about node-set functions.</p>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 38008409, "answer_count": 1, "score": 0, "last_activity_date": 1466755013, "creation_date": 1466751599, "last_edit_date": 1495542778, "question_id": 38007406, "link": "https://stackoverflow.com/questions/38007406/variable-not-available-from-one-xsl-file-to-other", "title": "Variable not available from one xsl file to other", "body": "<p>I am trying to perform XSLT 1.0 transformation using Perl. I am using the <a href=\"https://stackoverflow.com/a/37727023\">solution</a> listed here as my script.</p>\n\n<p>My input xml file looks somewhat like this.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n    &lt;bsg&gt;\n          &lt;msg&gt;\n               &lt;entry key=\"testingString\"&gt;This is a test.&lt;/entry&gt;\n               &lt;!-- &lt;trs&gt; This is me, trs!!! &lt;/trs&gt; --&gt;\n            &lt;/msg&gt;\n    &lt;/bsg&gt;\n</code></pre>\n\n<p><code>trs</code> attribute is optional meaning its not always present in all other <code>entry</code> nodes.\nEntry can have optional property <code>tslate</code> which can be <code>true</code> or <code>false</code> i.e input xml file can have something like</p>\n\n<p><code>&lt;entry key=\"Doctor\" tslate=\"false\"&gt;Physician.&lt;/entry&gt;</code></p>\n\n<p>To the Perl script, I supply the xslt file which imports two other xslt files (say File A and File B) which has variables and templates defined.</p>\n\n<p>File A reads a node from input xml file as and performs following operation</p>\n\n<pre><code>&lt;xsl:param name=\"isOTHERFILEavailable\"/&gt;    \n  &lt;xsl:variable name=\"tvariables\"&gt;\n    &lt;xsl:choose&gt;\n      &lt;xsl:when test=\"$isOTHERFILEavailable = 'true'\"&gt;\n        &lt;xsl:copy-of select=\"document($OTHERTHE_File)/bsg/msg\"/&gt;\n      &lt;/xsl:when&gt;\n    &lt;/xsl:choose&gt;\n  &lt;/xsl:variable&gt;\n</code></pre>\n\n<p><code>isOTHERFILEavailable</code> is a string parameter passed from Perl file that validates whether <code>OTHERFILE</code> exists or not.</p>\n\n<p>This <code>tvariables</code> is then accessed to perform some other operation in File B as below</p>\n\n<pre><code>&lt;xsl:template match=\"msg\"&gt;\n&lt;xsl:variable name=\"trsExists\"&gt;\n            &lt;xsl:for-each select=\"entry\"&gt;\n                &lt;xsl:variable name=\"current_key\" select=\"@key\"/&gt;\n                &lt;xsl:variable name=\"trsMatch\" select=\"$tvariables/msg/entry[@key = $current_key]\"/&gt;\n                &lt;xsl:choose&gt;\n                    &lt;xsl:when test=\"$trsMatch and normalize-space($trsMatch/text) = normalize-space(.) and (not(@tslate) or @tslate = true())\"&gt;\n                        &lt;xsl:copy&gt;\n                            &lt;xsl:copy-of select=\"$trsMatch/@key|$trsMatch/tvariables/text()|@context\"/&gt;                     \n                        &lt;/xsl:copy&gt;\n                    &lt;/xsl:when&gt;\n                &lt;/xsl:choose&gt;\n            &lt;/xsl:for-each&gt;        \n&lt;/xsl:variable&gt;\n&lt;/xsl:template&gt;\n</code></pre>\n\n<p>My problem is, when I reach this line, </p>\n\n<p><code>&lt;xsl:variable name=\"trsMatch\" select=\"$tvariables/msg/entry[@key = $current_key]\"/&gt;</code></p>\n\n<p>Perl errors out as following</p>\n\n<p><code>Invalid type\nruntime error: file B.xslt line # element variable\nFailed to evaluate the expression of variable 'tvariables'</code></p>\n\n<p>Am I missing something obvious?</p>\n\n<p>P.S => Everything runs fine when run the same transform from Java using XSLT 2.0(Saxon) and even when <code>tvariables</code> is not defined, that is when <code>isOTHERFILEavailable</code> is <code>false</code>.</p>\n"}, {"tags": ["perl", "handshake"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1466748634, "post_id": 38006591, "comment_id": 63456697, "body": "Your question is vague.  Could you provide a more concrete example of what you are trying to accomplish?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466749229, "post_id": 38006591, "comment_id": 63456956, "body": "Do you just want to know if the system command failed, or do you want the output?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466749279, "post_id": 38006591, "comment_id": 63456979, "body": "You can use the <code>( system($cmd) == 0 ) or die &quot;Unable to run &#39;$cmd&#39; : $!&quot;;</code> construct"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1466749314, "post_id": 38006591, "comment_id": 63456987, "body": "To just capture the output, <code>my ($output) = qx( $cmd );</code>"}, {"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466750038, "post_id": 38006591, "comment_id": 63457266, "body": "@Arjit : added the client.pl fyi"}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 1, "creation_date": 1466750500, "post_id": 38006591, "comment_id": 63457493, "body": "The idea of calling a new program is not good. you can write your own function for your program and return your desired data to your <b>main.pl</b>. now you can tell us what kind of return statement you want by your <b>client.pl</b> script"}, {"owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "edited": false, "score": 0, "creation_date": 1466751382, "post_id": 38006591, "comment_id": 63457989, "body": "This is a big automation script, so i can&#39;t put functions like you said, this is decided architecture so we have to follow that, i was thinking instead of capturing output why not put in a log file and everytime read from there , what is your suggestion on this ?"}, {"owner": {"reputation": 1159, "user_id": 3835621, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/IROLC.jpg?s=128&g=1", "display_name": "Arijit Panda", "link": "https://stackoverflow.com/users/3835621/arijit-panda"}, "edited": false, "score": 1, "creation_date": 1466752084, "post_id": 38006591, "comment_id": 63458324, "body": "Still I would suggest you to use function. you can split your big script and write different functions . The reason for the suggestion is you can easily monitor any part of big script via function and in future it will help you and function feature is there in perl for this kind of complex cases."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1466754621, "post_id": 38006591, "comment_id": 63459687, "body": "A solution, perhaps cleanest for this, is to set up a <a href=\"http://perldoc.perl.org/functions/pipe.html\" rel=\"nofollow noreferrer\"><code>pipe</code></a> between the main and the client, but for which the main should start the client via <code>fork</code>+<code>exec</code> instead of <code>system</code>. See my answer to your previous question, for links as well. Another way would be for the client to drop a file to the disk, which the main would check, but that is borne with timing issues, and clumsy. Yet another, for the client to send a SIGUSR1 (or 2) to main, for which it needs to know main&#39;s PID (via <code>getppid</code> If the shell does not get involved)."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467019542, "post_id": 38037123, "comment_id": 63539574, "body": "(1) If you state that &quot;<i>the general idea isn&#39;t very good</i>&quot; it would be good to explain why you think so. The &quot;<i>previous commenters</i>&quot; didn&#39;t either.  (2) By your comment of <code>qx</code> it follows that you offer the <code>open</code> as a solution for when the child is long running. But if the parent exits first this &quot;<i>easier and less error prone</i>&quot; code you show will crash the child on its first next print to STDOUT, via SIGPIPE, and without a word. Yes, <code>open</code> is cleaner, but that also hides the complexities -- it does not remove them. Please complete your solution, this is dangerously misleading."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467019974, "post_id": 38037123, "comment_id": 63539845, "body": "Btw, the OP seems to be asking for a mere &quot;<i>handshake</i>&quot;, and then each go on their own. Your answer doesn&#39;t provide for that."}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467021210, "post_id": 38037123, "comment_id": 63540658, "body": "@zdim, Running external scripts for trivial things that could just as well live in a module is unnecessarily limiting regarding non-scalar data, error prone (think quoting) and slow. The parent in my example <i>can&#39;t</i> exit first because the loop doesn&#39;t terminate until the child has closed its standard output, typically by exiting. Of course you can break out of the loop and kill the child anyway, but manual forking doesn&#39;t remedy that in any way either."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467022841, "post_id": 38037123, "comment_id": 63541675, "body": "How is a client, whose job we don&#39;t know, a &quot;<i>trivial thing</i>&quot;? Further, you just stated it all -- it is the parent &quot;<i>in your example</i>&quot; that can&#39;t exit, and the child <i>in your example</i> is robbed of its STDOUT.. While the Q isn&#39;t crystal clear, it does indicate that the parent only needs to know that the child connected to its server. Then it goes on with its own job. There is every reason for a child to be able to close (an explicit) pipe, so the two can go on and do their things.  This seems to need more control over the comms (pipe) than what the &quot;<i>easier</i>&quot; <code>open</code> allows."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467023013, "post_id": 38037123, "comment_id": 63541790, "body": "Btw, why are you mentioning a &quot;<i>named pipe</i>&quot;? Nobody invoked that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467023310, "post_id": 38037123, "comment_id": 63541972, "body": "What I mean to say is -- if the parent merely needs to know that the child connected (which the Q does state), with the <code>open</code> that you recommend it can read the pipe once and go on.  Then, if it happens to exit first (what we don&#39;t know), the child had better be careful to never again go to its STDOUT (unless it handles SIGPIPE).  While we don&#39;t know whether the child may need its STDOUT for other purposes.  None of that is good.."}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467035828, "post_id": 38037123, "comment_id": 63550240, "body": "Sorry, @zdim, the &quot;named pipe&quot; thing was a misreading on my part. However, as the OP &quot;need[s] to know what was the status of the above script after it runs&quot; I don&#39;t see how to &quot;go on and do their things&quot; is an issue here. &quot;sending file over socket using scp&quot; does sound pretty trivial to me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1467047745, "post_id": 38037123, "comment_id": 63558158, "body": "I completely agree that the question is very unclear. I&#39;d still say that due to &quot;<i>see if the connection to server</i>&quot;, and &quot;<i>handshake</i>&quot; one should allow the scripts to exchange information and be able to proceed. The problem, of course, is that OP also uses &quot;<i>output</i>&quot; and &quot;<i>status ... after</i>&quot;.  However, if it&#39;s that simple then just a <code>qx</code> does it all. But if there is anything more they&#39;ll need more control."}], "tags": [], "owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "is_accepted": false, "score": 1, "last_activity_date": 1466934006, "creation_date": 1466934006, "answer_id": 38037123, "question_id": 38006591, "link": "https://stackoverflow.com/questions/38006591/perl-handshake-mechanism-amongs-perl-scripts/38037123#38037123", "title": "Perl : handshake mechanism amongs perl scripts", "body": "<p>I agree with previous commenters that the general idea isn't very good in the first place. Whoever came up with that architecture requirement probably knows a bit of shell scripting but not Perl.</p>\n\n<p>That said, if you're sure your output isn't very long and it's fine to process it only when the child process has completed, @xxfelixxx's idea of using <code>qx//</code> is definitely the easiest. If you'd like to process output while the child is still running and/or the output may be so large that it's better to process it line by line, you can easily set up a pipe in an <code>open()</code> call:</p>\n\n<p><code>open my $pipe, '-|', $program_name or die \"Could not run $program_name: $!';\nwhile(&lt;$pipe&gt;) {\n  ... # read process output\n}\n</code>\nMuch easier and less error prone than setting up a named pipe and doing a <code>fork()/exec()</code> dance yourself for simple tasks like this.</p>\n"}, {"tags": [], "owner": {"reputation": 4314, "user_id": 2943174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bdaa3d8d699e6e24285d201a1c12c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vernon Grubb", "link": "https://stackoverflow.com/users/2943174/gary-vernon-grubb"}, "is_accepted": false, "score": 0, "last_activity_date": 1467206123, "creation_date": 1467206123, "answer_id": 38100727, "question_id": 38006591, "link": "https://stackoverflow.com/questions/38006591/perl-handshake-mechanism-amongs-perl-scripts/38100727#38100727", "title": "Perl : handshake mechanism amongs perl scripts", "body": "<p>I assume you already have a list of possible outcomes of client.pl.\nCreate a return code table for your reference for each possible outcome of the client script, for example:</p>\n\n<pre><code>0 = success connecting to server\n1 = unable to ping remote server\n2 = socket error\n</code></pre>\n\n<p>At the point before the client script finishes have it exit with a return code. Example:</p>\n\n<pre><code>exit 1;\n</code></pre>\n\n<p>Now have the main script catch the return code &amp; parse it through an if statement. The main script can take action based on what return code was returned form the client script.</p>\n"}], "owner": {"reputation": 57, "user_id": 1814300, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89276a0bf4a6744ed172bb2819dc348d?s=128&d=identicon&r=PG", "display_name": "hanish", "link": "https://stackoverflow.com/users/1814300/hanish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467206123, "creation_date": 1466748436, "last_edit_date": 1466749921, "question_id": 38006591, "link": "https://stackoverflow.com/questions/38006591/perl-handshake-mechanism-amongs-perl-scripts", "title": "Perl : handshake mechanism amongs perl scripts", "body": "<p>I am calling one perl script from another using system() , i want these scripts to have a communication ( handshake kind of mechanism ) where in based on the output of one script i can do further processing in another.</p>\n\n<p>please have a look at this :</p>\n\n<p>lets say i am in main.pl</p>\n\n<pre><code>  1 #!/usr/bin/perl \n  2 \n  3 use strict;\n  4 use warnings;\n  5 use Net::OpenSSH;\n  6 \n  7 #check for if the socket is established\n  8 #call the client (host) script\n  9 my $pwd = $ENV{'PWD'};\n  10 my $rc = system(\"$pwd/utpsm_run_automation/utpsm_lts_client.pl\")                                 \n  11         or die \"cant run client.pl $! \\n\";\n</code></pre>\n\n<p>in the above script that i am calling, i want to see if the connection to server is established, so some handshake mechanism i need , basically for further processing in main.pl, i need to know what was the status of the above script after it runs. am i clear now?</p>\n\n<p>here is client.pl </p>\n\n<pre><code> 1 #!/usr/bin/perl\n 2 use strict;\n 3 use warnings;\n 4 use IO::Socket::INET;\n 5 use Net::OpenSSH;\n 6 #auto-flush on socket\n 7 $| = 1;\n 8 \n 9 #create a connecting socket\n 10 my $socket = new IO::Socket::INET (\n 11           PeerHost =&gt; 'ltsbm.aus.XX.XX',\n 12           PeerPort =&gt; 7777,\n 13           Proto =&gt; 'tcp',\n 14           );\n 15 die \"cannot connect to the server$! \\n\" unless     $socket;                                          \n 16 print \"VIRU ::connected to the server \\n\";\n 17 \n 18 #data to send to the server\n 19 my $req = 'VIRU :: Sending data \\n';\n 20 sleep(20);\n 21 my $size = $socket-&gt;send($req);\n 22 \n 23 #sending file over socket using scp\n</code></pre>\n\n<p>This is client.pl</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 1, "creation_date": 1466738182, "post_id": 38004832, "comment_id": 63453863, "body": "<code>f</code> packs single-precision (32bit) floating point numbers. I don&#39;t know if Perl has native support for half-precision (16bit)."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466741617, "post_id": 38004832, "comment_id": 63454588, "body": "Maybe your teacher would like you to read 4 bytes at a time, convert, and then print them out.  <code>pack</code> and <code>unpack</code> will work on your whole line.  What if your line is huge?"}, {"owner": {"reputation": 65, "user_id": 6464424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-84O4v2f6oHQ/AAAAAAAAAAI/AAAAAAAAAIM/vuvxwhQjBTU/photo.jpg?sz=128", "display_name": "V\u0103n Khang \u0110inh", "link": "https://stackoverflow.com/users/6464424/v%c4%83n-khang-%c4%90inh"}, "edited": false, "score": 0, "creation_date": 1466744757, "post_id": 38004832, "comment_id": 63455416, "body": "if my line huge, it will appear error &quot;Out of memery&quot;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747267, "post_id": 38004832, "comment_id": 63456188, "body": "You shouldn&#39;t use bareword filehandles or 2-argument open. Include the name of the file you&#39;re trying to open in the error message, as well as <code>$!</code> (the reason for the error)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466747293, "post_id": 38004832, "comment_id": 63456201, "body": "Missing <code>binmode</code> on <code>DATA</code> (both times)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747323, "post_id": 38004832, "comment_id": 63456215, "body": "It doesn&#39;t make sense to use <code>&lt;DATA&gt;</code> (i.e. <code>readline(DATA)</code>) on binary files, which are not line oriented."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747361, "post_id": 38004832, "comment_id": 63456226, "body": "Missing error check on <code>rename</code>. <code>rename</code> can fail."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747442, "post_id": 38004832, "comment_id": 63456261, "body": "<code>print unpack(&quot;I*&quot;, $_)</code> will produce unhelpful output: If the numbers are 123, 42, 666, this will print <code>12342666</code> (with no newline at the end)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747469, "post_id": 38004832, "comment_id": 63456272, "body": "Missing error check on <code>seek</code>. <code>seek</code> can fail."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1466772665, "post_id": 38004832, "comment_id": 63469989, "body": "There&#39;s 2 argument <code>open</code> and useless dot escape in 2nd function."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1466772743, "post_id": 38004832, "comment_id": 63470032, "body": "I&#39;m voting to close this question as off-topic because it belongs to <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1466790388, "post_id": 38004832, "comment_id": 63480342, "body": "@OlegV.Volkov You haven&#39;t really given a reason why it belongs on Code Review. Furthermore, &quot;belonging&quot; on another site is not a sufficient justification for ruling a question off-topic here."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "reply_to_user": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "edited": false, "score": 0, "creation_date": 1466857291, "post_id": 38004832, "comment_id": 63497050, "body": "@200_success, why should I when they both are written in no uncertain terms in the help?"}], "owner": {"reputation": 65, "user_id": 6464424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-84O4v2f6oHQ/AAAAAAAAAAI/AAAAAAAAAIM/vuvxwhQjBTU/photo.jpg?sz=128", "display_name": "V\u0103n Khang \u0110inh", "link": "https://stackoverflow.com/users/6464424/v%c4%83n-khang-%c4%90inh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466770574, "creation_date": 1466736021, "last_edit_date": 1466770574, "question_id": 38004832, "link": "https://stackoverflow.com/questions/38004832/convert-32-bit-integers-to-16-bit-floating-point-in-perl", "title": "Convert 32-bit integers to 16-bit floating point in Perl", "body": "<p>I am a newbie in Perl and I have taken an exam: </p>\n\n<ol>\n<li><p>Create a binary file having 100 32-bit integers</p></li>\n<li><p>Convert integers to 16-bit floating point and save in a new binary file</p></li>\n<li><p>Add a 512-byte header to the new file and print the contents of the new file except for the header</p></li>\n</ol>\n\n<p>My teacher says that my <code>convertIntegerToFloat</code> subroutine uses too much memory, and that <code>printContentExceptHeader</code> function is not safe. Please tell me why?</p>\n\n<pre><code>my $name_file = 'binary';\n\n\nsub convertIntegerToFloat {\n\n    open( DATA,  \"&lt;$name_file\" . \"\\.bin\" ) or die \"Couldn't open file\\n\";\n\n    open( DATA2, \"+&gt;&gt;Float_file.bin\" )     or die \"Couldn't creat fiel\\n\";\n    binmode DATA2;\n\n    while ( &lt;DATA&gt; ) {\n        print DATA2 pack( \"f*\", unpack( \"I*\", $_ ) );\n    }\n\n    close(DATA);\n    close(DATA2);\n\n    unlink(\"$name_file\\.bin\");\n\n    rename( \"Float_file\\.bin\", \"$name_file\\.bin\" );\n\n    print \"Convert succsess\\n\";\n}\n\n\nsub printContentExceptHeader {\n\n    open( DATA, \"&lt;$name_file\\.bin\" ) or die \"Couldn't open $name_file\\.bin\";\n    seek( DATA, 512, 0 );\n\n    while ( &lt;DATA&gt; ) {\n        print unpack( \"I*\", $_ );\n    }\n\n    close(DATA);\n\n    print \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["algorithm", "perl", "global-variables", "declaration"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1466733595, "post_id": 38004490, "comment_id": 63452918, "body": "Remove all the extra <code>my</code> on lines 33-35.  You only need to use a <code>my</code> once to declare a variable."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "edited": false, "score": 0, "creation_date": 1466736976, "post_id": 38004606, "comment_id": 63453642, "body": "Thank you so much xxfelixxx! Great answer."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1466735177, "last_edit_date": 1592644375, "creation_date": 1466734096, "answer_id": 38004606, "question_id": 38004490, "link": "https://stackoverflow.com/questions/38004490/explicit-package-name-and-masking-earlier-declarations-in-the-same-statement/38004606#38004606", "title": "Explicit package name and masking earlier declarations in the same statement", "body": "<ol>\n<li><p>Use <code>my</code> to declare a variable once, in its proper scope.  It will get cleaned up when it falls out of scope.</p>\n</li>\n<li><p>Use library functions so as not to reinvent the wheel. <code>List::More</code></p>\n</li>\n<li><p>You should also use better variable names. <code>$i,$l1,$i1</code>  they are hard to read, but easy to introduce bugs.</p>\n</li>\n<li><p>It would be more perlish use the range operator, so instead of writing</p>\n<p><code>for (my $i = 0; $i &lt;= $l1; $i++) {</code> you could use <code>for my $i ( 0 .. $l1 ) {</code></p>\n</li>\n<li><p>But you probably need <code>(0 .. $li-1)</code> instead of <code>(0 .. $li)</code> since perl arrays are <strong>0-based</strong> by default, so you may be introducing a bug.</p>\n</li>\n<li><p>I would recommend you write a <strong>test file</strong> to validate the results of your algorithm.</p>\n</li>\n</ol>\n<p>Here is a working (compiling/running, not necessarily <em>correct</em>) version:</p>\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse diagnostics;  \nuse List::Util qw( min max );\n\nmy $s1 = 'GATTACCA'; \nmy $s2 = 'AGTGGGCGGGGAGAGAGAGAGAGG'; \n\nmy $dist = levdist($s1, $s2); \nprint &quot;Distance between '$s1' and '$s2' is $dist\\n&quot;;\n\nsub levdist { \n    my ( $seq1, $seq2 ) = (@_); \n\n    my $l1 = length($s1); \n    my $l2 = length($s2); \n    my @s1 = split '', $seq1; \n    my @s2 = split '', $seq2; \n    my $distances;\n    for (my $i = 0; $i &lt;= $l1; $i++) { \n        $distances-&gt;[$i]-&gt;[0] = $i; \n    } \n    for (my $j = 0; $j &lt;= $l2; $j++) { \n        $distances-&gt;[0]-&gt;[$j] = $j;\n    }\n    for (my $i = 1; $i &lt;= $l1; $i++) {\n        for (my $j = 1; $j &lt;= $l2; $j++) {\n            my $cost;\n            if ( $s1[$i-1] eq $s2[$j-1] ) {\n                $cost = 0;\n            } else {\n                $cost = 1;\n            }\n            $distances-&gt;[$i]-&gt;[$j] = min($distances-&gt;[$i-1]-&gt;[$j-1] + $cost,\n                                         $distances-&gt;[$i]-&gt;[$j-1]+1,\n                                         $distances-&gt;[$i-1]-&gt;[$j]+ 1 )\n        }\n    }\n\n    my $min_distance = $distances-&gt;[$l1]-&gt;[$l2];\n    for (my $i = 0; $i &lt;= $l1; $i++) {\n        $min_distance = min($min_distance, $distances-&gt;[$i]-&gt;[$l2]);\n    }\n    for (my $j = 0; $j &lt;= $l2; $j++ ) {\n        $min_distance = min($min_distance, $distances-&gt;[$l1]-&gt;[$j]);\n    }\n    return $min_distance;\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>Distance between 'GATTACCA' and 'AGTGGGCGGGGAGAGAGAGAGAGG' is 6\n</code></pre>\n<p><strong>Have a read:</strong></p>\n<p><a href=\"http://perldoc.perl.org/functions/my.html\" rel=\"nofollow noreferrer\">perldoc -f my</a></p>\n<p><a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">perldoc List::More</a></p>\n<p><a href=\"http://perldoc.perl.org/Test/More.html\" rel=\"nofollow noreferrer\">perldoc Test::More</a></p>\n"}], "owner": {"reputation": 165, "user_id": 5880355, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b78c85bb76849376873b8e1556d3000d?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5880355/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 38004606, "answer_count": 1, "score": 1, "last_activity_date": 1466735177, "creation_date": 1466733086, "question_id": 38004490, "link": "https://stackoverflow.com/questions/38004490/explicit-package-name-and-masking-earlier-declarations-in-the-same-statement", "title": "Explicit package name and masking earlier declarations in the same statement", "body": "<p>I tried to write a perl version of the following algorithm<a href=\"https://i.stack.imgur.com/sGbNy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sGbNy.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the code that I have: </p>\n\n<pre><code>    #!/usr/bin/perl\n    use warnings;\n    use strict;\n    use diagnostics;  \n\n    my $s1 = 'GATTACCA'; \n    my $s2 = 'AGTGGGCGGGGAGAGAGAGAGAGG'; \n\n    my $dist = levdist($s1, $s2); \n\n    sub levdist \n    { \n        my ( $seq1, $seq2 ) = (@_)[0,1]; \n\n        my $l1 = length($s1); \n        my $l2 = length($s2); \n        my @s1 = split '', $seq1; \n        my @s2 = split '', $seq2; \n\n        for (my $i = 0; $i &lt;= $l1; $i++) { \n            my $distances-&gt;[$i]-&gt;[0] = $i; \n        } \n        for (my $j = 0; $j &lt;= $l2; $j++) { \n            my $distances-&gt;[0]-&gt;[$j] = $j;\n        }\n        for (my $i = 1; $i &lt;= $l1; $i++) {\n            for (my $j = 1; $j &lt;= $l2; $j++) {\n                if ( $s1[$i-1] eq $s2[$j-1] ) {\n                    my $cost = 0;\n                } else {\n                    my $cost = 1;\n                }\n                my $distances-&gt;[$i]-&gt;[$j] = minimum($distances-&gt;[$i-1]-&gt;[$j-1] + my $cost,\n                                          $distances-&gt;[$i]-&gt;[$j-1]+1,\n                                          $distances-&gt;[$i-1]-&gt;[$j]+ 1 )\n            }\n        }\n        my $min_distance = my $distances-&gt;[$l1]-&gt;[$l2];\n        for (my $i = 0; $i &lt;= $l1; $i++) { my $min_distance = minimum($min_distance, my $distances-&gt;[$i]-&gt;[$l2]);\n        }\n        for (my $j = 0; $j &lt;= $l2; $j++ ) {\n            my $min_distance = minimum($min_distance, my $distances-&gt;[$l1]-&gt;[$j]);\n        }\n        return $min_distance;\n    }\n\n    sub minimum\n    {\n        my $min = shift @_;\n        foreach ( @_ ) {\n            if ( $_ &lt; $min ) {\n                $min = $_;\n            }\n        }\n        return $min;\n    }\n</code></pre>\n\n<p>This throws the following error: </p>\n\n<pre><code>    Global symbol \"$distances\" requires explicit package name at ./levenshtein.pl line 33.\n    Global symbol \"$distances\" requires explicit package name at ./levenshtein.pl line 34.\n    Global symbol \"$distances\" requires explicit package name at ./levenshtein.pl line 35. \n</code></pre>\n\n<p>When I alter the code to look like: </p>\n\n<pre><code>    my $distances-&gt;[$i]-&gt;[$j] = minimum(my $distances-&gt;[$i-1]-&gt;[$j-1] + my $cost,\n                                          my $distances-&gt;[$i]-&gt;[$j-1]+1,\n                                          my $distances-&gt;[$i-1]-&gt;[$j]+ 1 \n</code></pre>\n\n<p>I get the following set of errors: </p>\n\n<pre><code>    \"my\" variable $distances masks earlier declaration in same statement at\n     ./levenshtein.pl line 33 (#1)\n     (W misc) A \"my\", \"our\" or \"state\" variable has been redeclared in the\n     current scope or statement, effectively eliminating all access to the\n     previous instance.  This is almost always a typographical error.  Note\n     that the earlier variable will still exist until the end of the scope\n     or until all closure references to it are destroyed.\n\n     \"my\" variable $distances masks earlier declaration in same statement at\n./levenshtein.pl line 34 (#1)\n     \"my\" variable $distances masks earlier declaration in same statement at\n./levenshtein.pl line 35 (#1)\n</code></pre>\n\n<p>I feel like I am in a catch-22. I get an error if I declare the variable or not. Any insights would be appreciated.\nThanks, </p>\n"}, {"tags": ["perl", "file-handling"], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 5, "last_activity_date": 1466730773, "last_edit_date": 1466730773, "creation_date": 1466729590, "answer_id": 38004103, "question_id": 38003993, "link": "https://stackoverflow.com/questions/38003993/using-a-passed-in-variable-in-a-perl-script/38004103#38004103", "title": "Using a passed in variable in a perl script", "body": "<p>You can pass command line arguments to perl, they will show up in the special array <code>@ARGV</code>.</p>\n\n<p><strong>Basic Command Line Argument Passing</strong></p>\n\n<pre><code># In bash\n./perlScript.pl 123\n\n# In perl\nmy ($num) = $ARGV[0];  # The first command-line parameter [ 123 ]\n</code></pre>\n\n<p><strong>Many Positional Command Line Arguments</strong></p>\n\n<pre><code># In bash\n./perlScript.pl 123 456 789 foo bar\n\n# In perl\nmy ($n1,$n2,$n3,$str1,$str2) = @ARGV;  # First 5 command line arguments will be captured into variables\n</code></pre>\n\n<p><strong>Many Command Line Flags</strong></p>\n\n<pre><code># In bash\n./perlScript.pl --min=123 --mid=456 --max=789 --infile=foo --outfile=bar\n\n# In perl\nuse Getopt::Long;\n\nmy ($min,$mid,$max,$infile,$outfile,$verbose);\nGetOptions(\n    \"min=i\"     =&gt; \\$min,     # numeric\n    \"mid=i\"     =&gt; \\$mid,     # numeric\n    \"max=i\"     =&gt; \\$mix,     # numeric\n    \"infile=s\"  =&gt; \\$infile,  # string\n    \"outfile=s\" =&gt; \\$outfile, # string\n    \"verbose\"   =&gt; \\$verbose, # flag\n) or die(\"Error in command line arguments\\n\");\n</code></pre>\n\n<p><strong>Environmental Variables</strong></p>\n\n<pre><code># In bash\nFOO=123 BAR=456 ./perlScript.pl 789\n\n# In perl\nmy ($foo) = $ENV{ FOO } || 0;\nmy ($bar) = $ENV{ BAR } || 0;\n\nmy ($baz) = $ARGV[0]    || 0;\n</code></pre>\n\n<p><a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow\">perldoc perlvar</a> - details about <code>@ARGV</code> and <code>%ENV</code></p>\n\n<p><a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow\">perldoc Getopt::Long</a></p>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466730773, "creation_date": 1466728668, "question_id": 38003993, "link": "https://stackoverflow.com/questions/38003993/using-a-passed-in-variable-in-a-perl-script", "title": "Using a passed in variable in a perl script", "body": "<p>I want to do something like</p>\n\n<pre><code>for i in (1..100)\ndo\n     ./perlScript.pl\ndone\n</code></pre>\n\n<p>where perlScript.pl will open a file handle like</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nmy $file = 'info${i}.txt';\nmy @lines = do {\n    open my $fh, '&lt;', $file or die \"Can't open $file -- $!\";\n    &lt;$fh&gt;;\n};\n</code></pre>\n\n<p>I would just like some advice one how to access that letter I from inside the script. Even if I could pass in the txt file as a parameter and then access it like $1 or something</p>\n\n<p>Thank-you</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466724695, "post_id": 38002673, "comment_id": 63450943, "body": "Your data looks like it has come from a database. If so, then it would be best to get the database engine to do the calculations for you. Where does your program get its data?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466724885, "post_id": 38002806, "comment_id": 63450987, "body": "That&#39;s very <i>choroba</i>!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1466720308, "creation_date": 1466720308, "answer_id": 38002806, "question_id": 38002673, "link": "https://stackoverflow.com/questions/38002673/perl-grouping-data-in-columns-according-to-the-subjectid/38002806#38002806", "title": "Perl grouping data in columns according to the SubjectID", "body": "<p>This gives the expected output:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\n&lt;&gt;; # Skip the header.\nmy %h;\nwhile (&lt;&gt;) {\n    my ($id, $r1, $r2) = split;\n    my $is_new = ! exists $h{$id};\n    $h{$id}{r1}{max} = $r1 if $is_new || $r1 &gt; $h{$id}{r1}{max};\n    $h{$id}{r1}{min} = $r1 if $is_new || $r1 &lt; $h{$id}{r1}{min};\n    $h{$id}{r2}{max} = $r2 if $is_new || $r2 &gt; $h{$id}{r2}{max};\n    $h{$id}{r2}{min} = $r2 if $is_new || $r2 &lt; $h{$id}{r2}{min};\n}\n\nfor my $id (sort { $a &lt;=&gt; $b } keys %h) {\n    say join \"\\t\", $id, map @{ $h{$id}{$_} }{qw{ min max }}, qw( r1 r2 );\n}\n</code></pre>\n\n<p>It uses just one hash table, the SubjectID being the topmost key. The inner hashes have the <code>r1</code>/<code>r2</code> as keys, and the innermost hashes have <code>max</code> and <code>min</code> as keys. The <code>$is_new</code> boolean variable is used to initialize the results for a not yet processed id.</p>\n"}, {"tags": [], "owner": {"reputation": 2239, "user_id": 914600, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a08c659dde9a085cb9e6165c8840d0a3?s=128&d=identicon&r=PG&f=1", "display_name": "BotNet", "link": "https://stackoverflow.com/users/914600/botnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1466742742, "creation_date": 1466742742, "answer_id": 38005650, "question_id": 38002673, "link": "https://stackoverflow.com/questions/38002673/perl-grouping-data-in-columns-according-to-the-subjectid/38005650#38005650", "title": "Perl grouping data in columns according to the SubjectID", "body": "<p><a href=\"http://codepad.org/aAZu18TE\" rel=\"nofollow\">CodePad</a></p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util qw(min max);\n\n# Set Data\nmy $data = {\n   1 =&gt; {\n      Result1 =&gt; { data=&gt; [1.2, 1.4] },\n      Result2 =&gt; { data=&gt; [3.5, 3.4] }\n   },\n   2 =&gt; {\n      Result1 =&gt; { data =&gt; [2.3] },\n      Result2 =&gt; { data =&gt; [.23] }\n   },\n   3 =&gt; {\n      Result1 =&gt; { data =&gt; [3.4, 4.5, 2.3] },\n      Result2 =&gt; { data =&gt; [2.3, 3.4, 3.2] }\n   }\n};\n\n# Find Min/Max\nforeach my $subjectId (sort keys %$data ){\n   foreach my $result ( sort keys %{$data-&gt;{$subjectId}} ){\n      my $obj = $data-&gt;{$subjectId}{$result};\n      $obj-&gt;{min} = min @{$obj-&gt;{data}};\n      $obj-&gt;{max} = max @{$obj-&gt;{data}};\n   }\n}\n\n# Output\nprint qq{SubjectID\\tResult1Min\\tResult1Max\\tResult2Min\\tResult2Max\\n};\nforeach my $subjectId (sort keys %$data ){\n   print qq{$subjectId\\t\\t};\n   foreach my $result ( sort keys %{$data-&gt;{$subjectId}} ){\n      my $obj = $data-&gt;{$subjectId}{$result};\n      print qq{$obj-&gt;{min}\\t\\t$obj-&gt;{max}\\t\\t};\n   }\n   print qq{\\n};\n}\n</code></pre>\n\n<p>The finding of min/max and output could be combined for shorter code, but this should be enough to demonstrate.</p>\n"}], "owner": {"reputation": 3, "user_id": 5927429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f339677947d4853fbed3b5caf1ce6d?s=128&d=identicon&r=PG&f=1", "display_name": "HCivica", "link": "https://stackoverflow.com/users/5927429/hcivica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466742742, "creation_date": 1466719535, "last_edit_date": 1466724600, "question_id": 38002673, "link": "https://stackoverflow.com/questions/38002673/perl-grouping-data-in-columns-according-to-the-subjectid", "title": "Perl grouping data in columns according to the SubjectID", "body": "\n\n<p>I want to group some data based on the <code>SubjectID</code> column</p>\n\n<p>Here is my data</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SubjectID      Result1          Result2 \n1                1.2              3.5\n1                1.4              3.4\n2                2.3              0.23\n3                3.4               2.3\n3                4.5               3.4\n3                2.3               3.2\n</code></pre>\n\n<p>I want to group the results according to the <code>SubjectID</code> and get the minimum and maximum values.</p>\n\n<p>This is what the result should look like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SubjectID     Result1Min      Result1Max        Result2Min        Result2Max\n1                 1.2            1.4                3.4              3.5\n2                 2.3            2.3                0.23             0.23\n3                 2.3            4.5                2.3              3.4\n</code></pre>\n\n<p>I tried doing this by trying to make two hashes of arrays so the <code>SubjectID</code> would be the key and the results would be the value. But I can't figure out how to group the results according to <code>SubjectID</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466717271, "post_id": 38001521, "comment_id": 63448425, "body": "Hello. That looks like my code! What have you tried? You should post the whole of the program that you are using and ask for help, but your thinking is wrong. You came from using multiple files and shell commands to one Perl program, and you just need to change how you build <code>$current_line</code> before printing it. Altering after it has been written is the wrong idea"}, {"owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "edited": false, "score": 0, "creation_date": 1466750259, "post_id": 38001521, "comment_id": 63457356, "body": "I see you split your program into problems that concern a single line and ask new question for every problem. All those problems can be solved by learning the language as the problems are not difficult to code. For you, it might be better if you describe your whole problem instead of asking in a step-by-step manner."}, {"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466781191, "post_id": 38001521, "comment_id": 63475375, "body": "@Borodin There is nothing wrong with your code. I&#39;m just trying to learn how to accomplish one thing at a time without making my questions too long and confusing. I had code that was working but I had many intermediate file but now that I&#39;m learning there is a better way I have figure out the whole process from scratch. I&#39;ve used <code>my $cmd9 = </code>sed -i &#39;1i$SampleID[4]&#39; $Controldata<code>; print $cmd9;</code> to add first line to each and it worked but now I need to be able to insert a custom header in the while loop somehow."}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 1, "creation_date": 1466716339, "post_id": 38001699, "comment_id": 63447956, "body": "It made an empty line without text &quot;New Sample&quot;. I&#39;m trying to manipulate the first line for each sample so I can display sample related info. Your code almost worked but I don&#39;t see &quot;New Sample&quot; just a empty line.  Thanks Andrey."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466717462, "post_id": 38001699, "comment_id": 63448509, "body": "Yeah I think that&#39;s because the data in the file hasn&#39;t been written yet. This follows <a href=\"http://stackoverflow.com/questions/37978686/duplicated-output-with-for-each-loop\"><i>Duplicated output with for each loop</i></a>"}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1466715338, "creation_date": 1466715338, "answer_id": 38001699, "question_id": 38001521, "link": "https://stackoverflow.com/questions/38001521/occurance-of-a-blank-row-in-text-file-after-the-insertion-of-a-header-row/38001699#38001699", "title": "occurance of a blank row in text file after the insertion of a header row", "body": "<p>Try this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tie::File;\n\nmy $tsv_file = 'test.txt';\n\ntie my @textFile, 'Tie::File', $tsv_file, recsep =&gt; \"\\n\"  or die $!;\nfor my $line (@textFile) {\n    $line = \"New Sample\\n\" if($line =~ /FORMAT\\.1\\.FSRF/);\n}\nuntie @textFile;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "edited": false, "score": 0, "creation_date": 1466772715, "post_id": 38007102, "comment_id": 63470016, "body": "I&#39;m trying to remove the header rows and replace them with a custom made header specific to each file. Only header rows contain &quot;FORMAT.1.FSRF&quot; therefore I&#39;m using it as a search string. Thanks"}], "tags": [], "owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "is_accepted": false, "score": 0, "last_activity_date": 1466750522, "creation_date": 1466750522, "answer_id": 38007102, "question_id": 38001521, "link": "https://stackoverflow.com/questions/38001521/occurance-of-a-blank-row-in-text-file-after-the-insertion-of-a-header-row/38007102#38007102", "title": "occurance of a blank row in text file after the insertion of a header row", "body": "<p>In Perl, you can replace AAA with BBB</p>\n\n<pre><code>$string =~ s/AAA/BBB/;\n</code></pre>\n\n<p>So if you want to:</p>\n\n<pre><code>#replace lines containing \"FORMAT.1.FSRF\" with \"New Sample\"\n</code></pre>\n\n<p>then try:</p>\n\n<pre><code>$string =~ s/FORMAT\\.1\\.FSRF/New Sample/g;\n</code></pre>\n\n<p>Remove the last <code>g</code> if you want to make a single replacement only for each line.</p>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466800534, "creation_date": 1466714709, "last_edit_date": 1466800534, "question_id": 38001521, "link": "https://stackoverflow.com/questions/38001521/occurance-of-a-blank-row-in-text-file-after-the-insertion-of-a-header-row", "title": "occurance of a blank row in text file after the insertion of a header row", "body": "<p>I would like to insert custom headers to each .tsv file, parse the content of each file and append to the final variant file. I've tried to accomplish this in one loop but it doesn't work, so I've tried two separate loops. The first loop inserts the header into each .tsv file fine, however, the second loop replaces the inserted header with a blank row.  Could someone please explain why this is happening and how to fix this? Thanks</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\n\nmy $home=\"/data/\";                                                     \nmy $tsv_directory = $home.\"test_all_runs/\".$ARGV[0];\nmy $tsvfiles = $home.\"test_all_runs/\".$ARGV[0].\"/tsv_files.txt\";\n\nmy @run_directory = (); @run_directory = split /\\//, $tsv_directory; print \"The run directory is #############\".$run_directory[3].\"\\n\";\n\nmy $cmd = `ls $tsv_directory/FOCUS*\\.tsv &gt; $tsvfiles`; #print \"$cmd\";\nmy $cmda = \"ls $tsv_directory/FOCUS*\\.tsv &gt; $tsvfiles\"; #print \"$cmda\";\n\nmy @tsvfiles =();\n#this code opens the vcf_files.txt file and passes each line into an array for indidivudal manipulation\nopen(TXT2, \"$tsvfiles\");\n        while (&lt;TXT2&gt;){  \n                push (@tsvfiles, $_);   \n                }\nclose(TXT2);\n\nforeach (@tsvfiles){\n        chop($_);\n}\n#this loop works fine\nfor my $tsv_file (@tsvfiles){\n\n    $tsv_file =~ m|([^/]+)-oncomine.tsv$| or die \"Can't extract Sample ID\";\n    my $sample_id = $1;\n    print \"The sample ID is ############## $sample_id\\n\";\n    my $headerline = $run_directory[3].\"/\".$sample_id;\n   my $cmd9 = `sed -i '1i$headerline' $tsv_file`; print $cmd9;#local @ARGV = ($tsv_file);  \n}\n\nmy $final_variants = $home.\"test_all_runs/\".$ARGV[0].\"/final_variant_file.txt\";\nopen my $out_fh, '&gt;', $final_variants or die qq{Unable to open \"$final_variants\" for output: $!};\n\nmy @tsv_files_new = glob $tsv_directory.\"/FOCUS*.tsv\";\n\n##this loop unintentionally replaces the newly inserted header with a blank line.\nfor my $tsv_file_new ( @tsv_files_new ) {\n\n    print \"The current VCF is ############# $tsv_file_new\\n\";\n\n    $tsv_file_new =~ m|([^/]+)-oncomine.tsv$| or die \"Can't extract Sample ID\";\n    my $sample_id = $1;\n    print \"The sample ID is ############## $sample_id\\n\";\n\n    open my $in_fh, '&lt;', $tsv_file_new\n            or die qq{Unable to open \"$tsv_file_new\" for input: $!};\n\n    while ( &lt;$in_fh&gt; ) {\n\n        next if /^#/;\n        next if /\\b(?:CNV|intronic|synonymous|utr_3|utr_5)\\b/;\n        next if /\\b(?:FORMAT.1.FSRF)\\b/;# remove the original headers from Ion Reporter.\n\n        my @fields = split;\n        next if ($fields[70] =~ m|([0.])/\\1|);\n        my $chr = $fields[9].\"check\";\n\n        my @wanted = ( 10, 21, 67, 68, 70, 77, 78, 81, 83, 84, 88, 92, 98, 100 );\n        my $current_line = join \"\\t\", @fields[@wanted];\n        my $current_final_line = $sample_id.\"\\t\".$chr.\"\\t\".$current_line;\n        print $out_fh $current_final_line, \"\\n\";\n    }\n}\nexit;\n</code></pre>\n"}, {"tags": ["php", "perl"], "comments": [{"owner": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "edited": false, "score": 0, "creation_date": 1466708459, "post_id": 37999693, "comment_id": 63443633, "body": "You don&#39;t need a while loop for pcntl_waitpid.  What exactly is your question?"}, {"owner": {"reputation": 11, "user_id": 5887473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c01a2e90185e23acbe0e79dfb8ec3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kabhir", "link": "https://stackoverflow.com/users/5887473/kabhir"}, "reply_to_user": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "edited": false, "score": 0, "creation_date": 1466708731, "post_id": 37999693, "comment_id": 63443802, "body": "How to increase the time limit  until execution of perl script is finished inside php script while using it in localhost."}, {"owner": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "edited": false, "score": 0, "creation_date": 1466709615, "post_id": 37999693, "comment_id": 63444295, "body": "There shouldn&#39;t be a time limit if you are executing it in CLI.  How are you executing it and what error are you receiving?"}, {"owner": {"reputation": 11, "user_id": 5887473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c01a2e90185e23acbe0e79dfb8ec3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kabhir", "link": "https://stackoverflow.com/users/5887473/kabhir"}, "reply_to_user": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "edited": false, "score": 0, "creation_date": 1466709863, "post_id": 37999693, "comment_id": 63444437, "body": "Thanks for replying. So in browser I am running by using <a href=\"http://localhost/hello.php\" rel=\"nofollow noreferrer\">localhost/hello.php</a>. Normally in command line my perl script execution is finished in 10 min . But here its getting finished only in 1 min without completion and without error."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "edited": false, "score": 0, "creation_date": 1466714646, "post_id": 37999693, "comment_id": 63447039, "body": "@Devon: Unless you want to seem like a teenager, <i>&quot;executed from the command line&quot;</i> is fine"}, {"owner": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466714766, "post_id": 37999693, "comment_id": 63447102, "body": "@Borodin why does referring to the acronym for command line interface make me seem like a teenager?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "edited": false, "score": 0, "creation_date": 1466715588, "post_id": 37999693, "comment_id": 63447523, "body": "@Devon: Same reason stuff lyk this duz. U shudnt do it if u want 2 b t8n serious"}, {"owner": {"reputation": 30283, "user_id": 1583522, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/674bb2f209522d5ca7c900eb9999d2bc?s=128&d=identicon&r=PG", "display_name": "Devon", "link": "https://stackoverflow.com/users/1583522/devon"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466720281, "post_id": 37999693, "comment_id": 63449644, "body": "@Borodin, that makes no sense.  An acronym is a legitimate shortening of a phrase, lyk is just a misspelled word.  It&#39;d be like using USA instead of United States... please troll elsewhere."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1466710952, "post_id": 38000387, "comment_id": 63445073, "body": "You can remove the trailing spaces, too (and I&#39;m skeptical whether <code>-f</code> is needed)."}, {"owner": {"reputation": 629, "user_id": 4093728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02ee7ba2cefd4097f35b54626fe5a1a?s=128&d=identicon&r=PG", "display_name": "Keiji", "link": "https://stackoverflow.com/users/4093728/keiji"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466711034, "post_id": 38000387, "comment_id": 63445122, "body": "Well spotted, my apologies for copypasting the line from the original post!"}, {"owner": {"reputation": 11, "user_id": 5887473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c01a2e90185e23acbe0e79dfb8ec3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kabhir", "link": "https://stackoverflow.com/users/5887473/kabhir"}, "edited": false, "score": 0, "creation_date": 1466711202, "post_id": 38000387, "comment_id": 63445220, "body": "As Already I  did tried your simple suggestion. But it did&#39;t work. That is why  I switched on to forking."}, {"owner": {"reputation": 629, "user_id": 4093728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02ee7ba2cefd4097f35b54626fe5a1a?s=128&d=identicon&r=PG", "display_name": "Keiji", "link": "https://stackoverflow.com/users/4093728/keiji"}, "edited": false, "score": 1, "creation_date": 1466711349, "post_id": 38000387, "comment_id": 63445295, "body": "What didn&#39;t work about it? If an <code>exec</code> call by itself doesn&#39;t work, I don&#39;t see how the same <code>exec</code> call inside a forked child process would work either. Have you tried using absolute paths to both <code>perl</code> and <code>script.pl</code>?"}, {"owner": {"reputation": 11, "user_id": 5887473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c01a2e90185e23acbe0e79dfb8ec3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kabhir", "link": "https://stackoverflow.com/users/5887473/kabhir"}, "edited": false, "score": 0, "creation_date": 1466714549, "post_id": 38000387, "comment_id": 63446998, "body": "So in both cases (forking and without forking) the php script is working, but the execution of perl script is getting finished in 1 min while using it on localhost but in command line perl script its taking 10 min to complete the whole process . So I need to increase time limit  for the localhost."}, {"owner": {"reputation": 11, "user_id": 5887473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c01a2e90185e23acbe0e79dfb8ec3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kabhir", "link": "https://stackoverflow.com/users/5887473/kabhir"}, "edited": false, "score": 0, "creation_date": 1466792798, "post_id": 38000387, "comment_id": 63481522, "body": "@Keiji so when I am setting time limit for 10 min but it is getting finished few seconds. Any idea what can be the problem in it ?"}], "tags": [], "owner": {"reputation": 629, "user_id": 4093728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02ee7ba2cefd4097f35b54626fe5a1a?s=128&d=identicon&r=PG", "display_name": "Keiji", "link": "https://stackoverflow.com/users/4093728/keiji"}, "is_accepted": false, "score": 1, "last_activity_date": 1466710685, "creation_date": 1466710685, "answer_id": 38000387, "question_id": 37999693, "link": "https://stackoverflow.com/questions/37999693/wait-until-execution-of-perl-script-finished-inside-php-script/38000387#38000387", "title": "Wait until execution of Perl script finished inside php script", "body": "<p>Looks like you've over-complicated the problem. Unless I'm missing something, your entire code can be replaced by a single line</p>\n\n<pre><code>&lt;?php\nexec(\"perl -f script.pl  \");\n?&gt;\n</code></pre>\n\n<p>as this will have the same effect as forking and then immediately waiting for the child process to finish.</p>\n\n<p>To avoid the page timing out before the perl script is finished, simply add <code>set_time_limit(0)</code> before calling exec:</p>\n\n<pre><code>&lt;?php\nset_time_limit(0);\nexec(\"perl -f script.pl  \");\n?&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5887473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c01a2e90185e23acbe0e79dfb8ec3f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kabhir", "link": "https://stackoverflow.com/users/5887473/kabhir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466710685, "creation_date": 1466708243, "last_edit_date": 1466708810, "question_id": 37999693, "link": "https://stackoverflow.com/questions/37999693/wait-until-execution-of-perl-script-finished-inside-php-script", "title": "Wait until execution of Perl script finished inside php script", "body": "<p>I am trying to execute perl script inside php script. Although it is running but only for short duration.\nHow to increase the time-limit so that the execution of perl script is finished until the final php script  is called of ?</p>\n\n<p>I am running php script on the localhost.</p>\n\n<p>Here is the code :</p>\n\n<pre><code>&lt;?php\n\n$maxChildren = 1;  \n$pids = array();\n$pid = pcntl_fork();\n\nif ($pid) { // Parent\n\n    if ($pid &lt; 0) {\n        // Unable to fork process, handle error here\n        continue;\n    } else {\n        $pids[$pid] = $pid;\n    }\n\n} else {\n\n    exec(\"perl -f script.pl  \");\n    exit(0);\n\n}\n\nwhile(pcntl_waitpid(0, $status) != -1);\n\n?&gt;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 1, "creation_date": 1466714298, "post_id": 37999283, "comment_id": 63446878, "body": "You could also do this with an <code>if !</code>."}], "tags": [], "owner": {"reputation": 497, "user_id": 668247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753585e9c97a4009c17adffe41f9f47?s=128&d=identicon&r=PG", "display_name": "vikin9", "link": "https://stackoverflow.com/users/668247/vikin9"}, "is_accepted": true, "score": 2, "last_activity_date": 1466706825, "creation_date": 1466706825, "answer_id": 37999283, "question_id": 37998971, "link": "https://stackoverflow.com/questions/37998971/ignore-rows-that-do-not-contain-specific-text/37999283#37999283", "title": "Ignore rows that do not contain specific text", "body": "<p>How about changing the <code>if</code> to <code>unless</code>? :)</p>\n\n<pre><code>...\nnext unless /\\b(?:CNV)\\b/;\n....\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 3781528, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/57552cda53e1092efc04fb0a7d313a25?s=128&d=identicon&r=PG&f=1", "display_name": "user3781528", "link": "https://stackoverflow.com/users/3781528/user3781528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 37999283, "answer_count": 1, "score": 0, "last_activity_date": 1466706825, "creation_date": 1466705679, "last_edit_date": 1466705894, "question_id": 37998971, "link": "https://stackoverflow.com/questions/37998971/ignore-rows-that-do-not-contain-specific-text", "title": "Ignore rows that do not contain specific text", "body": "<p>How can I ignore rows that do not contain the text <code>&lt;CNV&gt;</code> with Perl?</p>\n\n<p>The following code skips rows that contain <code>&lt;CNV&gt;</code> and I would like to capture rows that contain <code>&lt;CNV&gt;</code>:</p>\n\n<pre><code>while ( &lt;$in_fh&gt; ) {\n\n        next if /^#/;\n        next if /\\b(?:CNV)\\b/;\n\n...\n</code></pre>\n"}, {"tags": ["python", "regex", "perl", "python-3.x"], "comments": [{"owner": {"reputation": 213454, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1466705230, "post_id": 37998767, "comment_id": 63441540, "body": "Did you check the <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\">documentation</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1466713684, "post_id": 37998896, "comment_id": 63446583, "body": "<i>&quot;Python has no strange language syntax related to regular expressions&quot;</i>. No, but is <i>does</i> have &quot;strange language syntax&quot; related to other things, and your tribalism isn&#39;t welcome"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466713874, "post_id": 37998896, "comment_id": 63446678, "body": "I tried to clarify your answer, but cannot make head nor tail of this: <i>&quot;So instead of a part of the call arguments that are executed on match, what you have is a callback function: all you have to do is to put a callable object as the second argument, instead of the substitution string. The callable receives the match object as its sole argument&quot;</i>. Please break it up and explain"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1466714296, "post_id": 37998896, "comment_id": 63446877, "body": "<i>&quot;so you can even define the callable as a lambda expression&quot;</i> No <i>&quot;strange language syntax&quot;</i> here then! In Perl, a <i>lambda</i> is a subroutine without a name, and Python could be the same if <code>def</code> were more flexible"}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": true, "score": 5, "last_activity_date": 1466714056, "last_edit_date": 1466714056, "creation_date": 1466705423, "answer_id": 37998896, "question_id": 37998767, "link": "https://stackoverflow.com/questions/37998767/if-statement-in-python-regex-substitution/37998896#37998896", "title": "if statement in python regex substitution", "body": "<p>Python has no strange language syntax related to regular expressions - they are performed in well-behaved function calls.</p>\n\n<p>So instead of a part of the call arguments that are executed on match, what you have is a callback function: all you have to do is to put a callable object as the second argument, instead of the substitution string. The callable receives the match object as its sole argument.</p>\n\n<p>In this case, all you need is an inline <code>if</code> - so you can even define the callable as a lambda expression:</p>\n\n<pre><code>t = \"this this that\"\nm = re.sub(r\"(this)|(that)\", lambda x: \"ONE\" if x.group() == \"this\" else \"TWO\", t   )\n</code></pre>\n"}], "owner": {"reputation": 2354, "user_id": 2203144, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75c7fa1dd3aa4baa131c45c7e6cbd82d?s=128&d=identicon&r=PG", "display_name": "mareoraft", "link": "https://stackoverflow.com/users/2203144/mareoraft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 37998896, "answer_count": 1, "score": 2, "last_activity_date": 1466714477, "creation_date": 1466704978, "last_edit_date": 1466714477, "question_id": 37998767, "link": "https://stackoverflow.com/questions/37998767/if-statement-in-python-regex-substitution", "title": "if statement in python regex substitution", "body": "<p>I have a regex that searches for <code>this</code> or <code>that</code>.  If it finds <code>this</code>, it replaces it with <code>ONE</code>.  If it finds <code>that</code>, it replaces it with <code>TWO</code>.</p>\n\n<p>Here is what it looks like in Perl: \n</p>\n\n<pre><code>m =~ s/(this)|(that)/ \"ONE\" x!! $1 . \"TWO\" x!! $2 /eg\n</code></pre>\n\n<p><code>e</code> is the <em>eval</em> option.  <code>.</code> is a concatenation.  <code>x!!</code> acts as an if statement.</p>\n\n<p>How can I do the same thing in Python 3?  I'm looking for something like:\n</p>\n\n<pre><code>m = re.sub(r\"(this)|(that)\", (\"ONE\" * bool(match.group(1))) + (\"TWO\" * bool(match.group(2))), m, flags=re.EVAL)\n</code></pre>\n\n<p>I guess I have two main roadblocks.  Firstly, I don't know how to obtain the <code>match</code> object <em>within</em> a regex substitution.  Secondly, I don't know if eval is supported by python or what the best alternative is.</p>\n"}, {"tags": ["perl", "unit-testing", "moose", "moo"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1466705718, "post_id": 37998627, "comment_id": 63441882, "body": "<a href=\"https://metacpan.org/pod/Mock::Sub\" rel=\"nofollow noreferrer\">Mock::Sub</a> can mock individual subs: <code>my $m=Mock::Sub-&gt;new; my $foo=$m-&gt;mock(&#39;MyRole::foo&#39;); MyRole::foo(); print &quot;$foo-&gt;called_count; #etc</code>. I&#39;ve never tested it with <code>Moo</code> though, which is why this isn&#39;t an answer"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747732, "post_id": 38006194, "comment_id": 63456345, "body": "<code>$self-&gt;$orig</code> is the same as <code>$orig-&gt;($self)</code>."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747875, "post_id": 38006194, "comment_id": 63456398, "body": "I thought so too, but it worked one way, but fails the other.  Go figure."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466747923, "post_id": 38006194, "comment_id": 63456420, "body": "If I remove the parens, I get <code>Can&#39;t call method &quot;MyClass=HASH(0x9cde33c)&quot; on unblessed reference at MyClass.pm line 9. </code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466748085, "post_id": 38006194, "comment_id": 63456488, "body": "That&#39;s what happens when you swap the variables and do <code>$orig-&gt;$self</code>."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1466748468, "post_id": 38006194, "comment_id": 63456625, "body": "In this example, it may be better to just use <code>my ($orig) = shift; ... ; $orig-&gt;( @_ );</code> depending on what the OP actually wants to do in his <code>around</code>"}, {"owner": {"reputation": 1742, "user_id": 132319, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9265668ccda89e3007dcef4409aa3381?s=128&d=identicon&r=PG", "display_name": "Kit Peters", "link": "https://stackoverflow.com/users/132319/kit-peters"}, "edited": false, "score": 0, "creation_date": 1466778592, "post_id": 38006194, "comment_id": 63473674, "body": "My apologies - I tossed that off quickly without looking at syntax, and have corrected the syntax in the OP.   It&#39;s clear that I have failed to make clear what I&#39;m looking to accomplish. I want to test the behavior in the <code>around</code> modifier.  To use my example above, I want MyRole::foo to return &#39;bak&#39; <i>in the test</i>.  I think I chose a poor example. I&#39;ll edit the OP."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1466778018, "last_edit_date": 1466778018, "creation_date": 1466746259, "answer_id": 38006194, "question_id": 37998627, "link": "https://stackoverflow.com/questions/37998627/how-do-i-mock-a-method-defined-in-a-moo-role/38006194#38006194", "title": "How do I mock a method defined in a Moo Role?", "body": "<p>It can be done with <a href=\"http://search.cpan.org/perldoc?Test::MockModule\" rel=\"nofollow\"><code>Test::MockModule</code></a></p>\n\n<p>These were the minor changes required:</p>\n\n<ol>\n<li><p><code>around foo {</code> should be written <code>around foo =&gt; sub {</code> since <code>around</code> takes a subroutine reference.</p></li>\n<li><p><code>$self-&gt;$orig</code> needed to be written as <code>$self-&gt;($orig)</code></p></li>\n<li><p>The documentation lists it as <code>my ($orig, $self) = @_;</code> so I changed it to  <code>$orig-&gt;($self);</code></p></li>\n</ol>\n\n<p>Here is a working version:</p>\n\n<p><strong>MyRole.pm</strong></p>\n\n<pre><code>package MyRole;\nuse Moo::Role;\n\nsub foo { \n    return 'foo blah';\n}\n\nsub bar { \n    return 'bar blah';\n}\n\n1;\n</code></pre>\n\n<p><strong>MyClass.pm</strong></p>\n\n<pre><code>package MyClass;\n\nuse Moo;\nwith 'MyRole';\n\naround foo =&gt; sub { \n    my ($orig, $self) = (@_);\n    my ($result) = $orig-&gt;($self);\n    return 'bak' if $result eq 'baz'; # Will never return 'bak' as coded.\n    return $result;\n};\n</code></pre>\n\n<p><strong>test.t</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse MyClass;\nuse Test::Most;\nuse Test::MockModule;\n\nmy $obj = MyClass-&gt;new;\n# foo has an around block, bar does not\nis($obj-&gt;bar, 'bar blah', 'bar() returns [ bar blah ]');\nis($obj-&gt;foo, 'foo blah', 'foo() returns [ foo blah ]');\n\nmy $mock = Test::MockModule-&gt;new('MyClass');\n$mock-&gt;mock('foo' =&gt; sub { return 'mocked foo blah' } );\n\nmy $mocked = MyClass-&gt;new;\nis($mocked-&gt;bar, 'bar blah', 'bar() still returns [ bar blah ]');\nis($mocked-&gt;foo, 'mocked foo blah', 'foo() now returns mocked answer [ mocked foo blah ]');\n</code></pre>\n\n<p><strong>Run it</strong></p>\n\n<pre><code>prove -v test.t\ntest.t .. \nok 1 - bar() returns [ bar blah ]\nok 2 - foo() returns [ foo blah ]\nok 3 - bar() still returns [ bar blah ]\nok 4 - foo() now returns mocked answer [ mocked foo blah ]\n1..4\nok\nAll tests successful.\nFiles=1, Tests=4,  0 wallclock secs ( 0.06 usr  0.01 sys +  0.19 cusr  0.00 csys =  0.26 CPU)\nResult: PASS\n</code></pre>\n\n<p>Please have a look:</p>\n\n<p><a href=\"http://search.cpan.org/~ether/Class-Method-Modifiers-2.12/lib/Class/Method/Modifiers.pm#around_method(s)_=%3E_sub_%7B_..._%7D;\" rel=\"nofollow\">Class::Method::Modifiers::around()</a></p>\n"}, {"tags": [], "owner": {"reputation": 1742, "user_id": 132319, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9265668ccda89e3007dcef4409aa3381?s=128&d=identicon&r=PG", "display_name": "Kit Peters", "link": "https://stackoverflow.com/users/132319/kit-peters"}, "is_accepted": true, "score": 1, "last_activity_date": 1466793576, "creation_date": 1466793576, "answer_id": 38020077, "question_id": 37998627, "link": "https://stackoverflow.com/questions/37998627/how-do-i-mock-a-method-defined-in-a-moo-role/38020077#38020077", "title": "How do I mock a method defined in a Moo Role?", "body": "<p>From mst on #moose:</p>\n\n<pre><code>use 5.016;\nuse Test::Most tests =&gt; 1;\n\nrequire MyRole;\n\nour $orig = MyRole-&gt;can('foo');\nno warnings 'redefine';\n*MyRole::foo = sub { goto &amp;$orig };\n\n{\n    local $orig = sub {'baz'};\n    require MyClass;\n    my $obj = MyClass-&gt;new;\n    is $obj-&gt;foo, 'bak', 'Foo is what it oughtta be'; \n}\n</code></pre>\n\n<p>The trick is to override MyRole::foo <em>before</em> anything that uses it gets loaded. Which means using <code>require MyClass</code> instead of <code>use MyClass</code>, because <code>use MyClass</code> translates to <code>BEGIN { require MyClass }</code> which defeats the whole thing of overriding the method <em>before</em> anything using it gets loaded.</p>\n"}], "owner": {"reputation": 1742, "user_id": 132319, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9265668ccda89e3007dcef4409aa3381?s=128&d=identicon&r=PG", "display_name": "Kit Peters", "link": "https://stackoverflow.com/users/132319/kit-peters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 38020077, "answer_count": 2, "score": 1, "last_activity_date": 1466793576, "creation_date": 1466704464, "last_edit_date": 1466779207, "question_id": 37998627, "link": "https://stackoverflow.com/questions/37998627/how-do-i-mock-a-method-defined-in-a-moo-role", "title": "How do I mock a method defined in a Moo Role?", "body": "<p>Given the following Role:</p>\n\n<pre><code>package MyRole;\nuse Moo::Role;\n\nsub foo { \n    return 'blah';\n}\n</code></pre>\n\n<p>And the following consuming class:</p>\n\n<pre><code>package MyClass;\nuse Moo;\nwith 'MyRole';\n\naround foo = sub { \n    my ($orig, $self) = @_;\n    return 'bak' if $self-&gt;$orig eq 'baz';\n    return $self-&gt;$orig;\n}\n</code></pre>\n\n<p>I would like to test behaviour defined in the <code>around</code> modifier. How do I do this? It seems that Test::MockModule won't work:</p>\n\n<pre><code>use MyClass;\nuse Test::Most;\nuse Test::MockModule;\n\nmy $mock = Test::MockModule-&gt;new('MyRole');\n$mock-&gt;mock('foo' =&gt; sub { return 'baz' });\n\nmy $obj = MyClass-&gt;new;\n# Does not work\nis $obj-&gt;foo, 'bak', 'Foo is what it oughtta be';\n</code></pre>\n\n<p><strong>EDIT</strong>: What I'm looking to test is the <em>interaction</em> of MyClass with MyRole as defined in the <code>around</code> modifier. I want to test that the code in the <code>around</code> modifier does what I think it should. Here's another example that's closer to my actual code:</p>\n\n<pre><code>package MyRole2\nuse Moo::Role;\n\nsub call {\n    my $self = shift;\n    # Connect to server, retrieve a document\n    my $document = $self-&gt;get_document;\n    return $document;\n}\n\npackage MyClass2;\nuse Moo;\nwith 'MyRole2';\n\naround call = sub { \n    my ($orig, $self) = @_;\n    my $document = $self-&gt;$orig;\n    if (has_error($document)) {\n        die 'Error';\n    }\n    return parse($document);\n};\n</code></pre>\n\n<p>So what I want to do here is to mock <code>MyRole2::call</code> to return a static document, defined in my test fixtures, that contains errors and test that the exception is thrown properly. I know how to test it using <code>Test::More::throws_ok</code> or similar. What I don't know how to do is to mock <em>MyRole2::call</em> and <strong>not</strong> <code>MyClass2::call</code>.</p>\n"}, {"tags": ["perl", "grep"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1466702475, "post_id": 37997628, "comment_id": 63439815, "body": "FYI, <code>\\b</code> matches at the boundary of a word character (in the C locale with ASCII encoding, that would be a-z, A-Z, 0-9, and underscore) and a non-word character. That means it doesn&#39;t match when you have a dash followed by a space, for example. Something to keep in mind in case any of your <code>$name</code> values can end in punctuation characters."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466704380, "post_id": 37997628, "comment_id": 63441040, "body": "To see the command you are about to execute, use <code>print qq`grep &quot;^$name\\b&quot; $inputFile`, &quot;\\n&quot;;</code>. You&#39;ll see the problem..."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 85, "user_id": 5112162, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8b38a04139eb6e0e9fc24ae825379296?s=128&d=identicon&r=PG&f=1", "display_name": "ZebraSocks", "link": "https://stackoverflow.com/users/5112162/zebrasocks"}, "edited": false, "score": 0, "creation_date": 1466708214, "post_id": 37997800, "comment_id": 63443486, "body": "@ZebraSocks <code>\\s</code> isn&#39;t supported by grep&#39;s basic or extended regular expression syntax."}], "tags": [], "owner": {"reputation": 194, "user_id": 5976242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc55e6959748d76a434fbe108b55efb5?s=128&d=identicon&r=PG&f=1", "display_name": "user5976242", "link": "https://stackoverflow.com/users/5976242/user5976242"}, "is_accepted": true, "score": 2, "last_activity_date": 1466701593, "creation_date": 1466701593, "answer_id": 37997800, "question_id": 37997628, "link": "https://stackoverflow.com/questions/37997628/how-do-i-match-a-string-ending-in-whitespace-using-grep-in-perl/37997800#37997800", "title": "How do I match a string ending in whitespace using grep in Perl?", "body": "<p>you have to escape the '\\' use grep \\\\b</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466702341, "creation_date": 1466702341, "answer_id": 37998001, "question_id": 37997628, "link": "https://stackoverflow.com/questions/37997628/how-do-i-match-a-string-ending-in-whitespace-using-grep-in-perl/37998001#37998001", "title": "How do I match a string ending in whitespace using grep in Perl?", "body": "<p>You don't use backticks -- you write it in Perl</p>\n\n<pre><code>my $name = 'xyz';\n\nmy $line;\n\nwhile ( &lt;&gt; ) {\n    next unless /^$name\\b/;\n    $line = $_;\n    last;\n}\n</code></pre>\n\n<p>This would be likely to be much less clumsy if the context of the test were known. You may need to escape the contents of <code>$name</code> if you wish to pass regex metacharacters through</p>\n"}], "owner": {"reputation": 85, "user_id": 5112162, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8b38a04139eb6e0e9fc24ae825379296?s=128&d=identicon&r=PG&f=1", "display_name": "ZebraSocks", "link": "https://stackoverflow.com/users/5112162/zebrasocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 37997800, "answer_count": 2, "score": 0, "last_activity_date": 1466702341, "creation_date": 1466701090, "last_edit_date": 1495535348, "question_id": 37997628, "link": "https://stackoverflow.com/questions/37997628/how-do-i-match-a-string-ending-in-whitespace-using-grep-in-perl", "title": "How do I match a string ending in whitespace using grep in Perl?", "body": "<p>I want to call grep in a Perl script like so:</p>\n\n<pre><code>my $line = `grep \"^$name\\b\" $inputFile`;\n</code></pre>\n\n<p>When I run the actual grep command in the terminal, it returns what is expected, but when I include this line in my script, nothing is returned.  </p>\n\n<p>If I replace the <code>\\b</code> with a <code>\\s</code>, it complains with \"Unrecognized escape \\s passed through at test.pl line 50.\"</p>\n\n<p>I've already looked at <a href=\"https://stackoverflow.com/questions/13220192/how-to-use-grep-to-match-with-either-whitespace-or-newline\">how to use grep to match with either whitespace or newline</a>, but it doesn't have specifics to why my script isn't returning the expected.</p>\n\n<p>How do I properly include the <code>\\b</code> or <code>\\s</code> in the command in Perl?</p>\n"}, {"tags": ["linux", "perl", "cygwin"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1466699937, "post_id": 37997197, "comment_id": 63438242, "body": "Welcome to Stack Overflow. Please <a href=\"https://stackoverflow.com/posts/37997197/edit\">edit</a> your question and add a bit more of your code. We need to know what the variable <code>$exec</code> contains. That line of code says <i>throw that error</i> if the value of <code>$exec</code> is not an executable file and the value does not contain the string <i>mpi</i> in it and the value does not contain the string <i>ibrun</i> in it. You need to find code that looks like <code>my $exec = ...</code> or just <code>$exec = ...</code> and add that to the question."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "edited": false, "score": 0, "creation_date": 1466700998, "post_id": 37997329, "comment_id": 63438880, "body": "Great, that makes a ton more sense, thank you! Here&#39;s a bit more of the code as the user above suggested I include <b>if (defined $charmmexec) {     $exec=$charmmexec;   }</b> and <b>my $charmmexec=shift</b> (I&#39;m not sure what this means? I can&#39;t find anything on =shift besides dealing with shifting arrays)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1466701031, "post_id": 37997329, "comment_id": 63438903, "body": "It could also be a permission error, or the file might be missing, etc. Updated answer to cover those situations."}, {"owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "edited": false, "score": 0, "creation_date": 1466701482, "post_id": 37997329, "comment_id": 63439188, "body": "Okay so it looks like <b>=shift</b> sets the variable to the default value--is that right?"}, {"owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "edited": false, "score": 0, "creation_date": 1466701821, "post_id": 37997329, "comment_id": 63439413, "body": "Okay, I think I get it? The top is setting the variable &#39;exec&#39; to be the path of the environment variable &#39;CHARMMEXEC.&#39; Then the issue comes about because the text of &quot;ibrun&quot; and &quot;mpi&quot; are not in this variable. Alternatively, it is a permissions error (which I don&#39;t know how to check for). I&#39;ll try to figure out the first one first."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1466701002, "last_edit_date": 1466701002, "creation_date": 1466700018, "answer_id": 37997329, "question_id": 37997197, "link": "https://stackoverflow.com/questions/37997197/cannot-execute-binary-error-in-linux-emulator/37997329#37997329", "title": "&quot;Cannot execute binary&quot; error in Linux emulator", "body": "<p>This line will exit your program unless all four of these things are true.</p>\n\n<ol>\n<li>The filename stored in the variable <code>$exec</code> contains the literal text <code>\"ibrun\"</code></li>\n<li>The filename stored in the variable <code>$exec</code> contains the literal text <code>\"mpi\"</code></li>\n<li>The file for the filename stored in the variable <code>$exec</code> can be accessed.</li>\n<li>The file for the filename stored in the variable <code>$exec</code> has the executable permission bit set.</li>\n</ol>\n\n<p>You could break this up into three statements to see which of these conditions isn't being met:</p>\n\n<pre><code>die \"Expected $exec to contain 'ibrun'\"             if $exec !~ \"ibrun\";\ndie \"Expected $exec to contain 'mpi'\"               if $exec !~ \"mpi\";\ndie \"Can't stat $exec: $!\"                          if !stat($exec);\ndie \"$exec is not executable. Run 'chmod +x $exec'\" if !-x _;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1466790362, "post_id": 37998049, "comment_id": 63480327, "body": "Please accept an answer, either this one since it specifies the exact root of the problem, or the other answer because it helped you discover the root cause."}], "tags": [], "owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1466702505, "creation_date": 1466702505, "answer_id": 37998049, "question_id": 37997197, "link": "https://stackoverflow.com/questions/37997197/cannot-execute-binary-error-in-linux-emulator/37998049#37998049", "title": "&quot;Cannot execute binary&quot; error in Linux emulator", "body": "<p>Great thanks everyone! Looks like the issue was that CHARMMEXEC was not defined so it was just a matter of declaring it as an environment variable. Thanks again!</p>\n"}], "owner": {"reputation": 17, "user_id": 6505338, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153986220648961/picture?type=large", "display_name": "Monica", "link": "https://stackoverflow.com/users/6505338/monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466702505, "creation_date": 1466699604, "last_edit_date": 1466701610, "question_id": 37997197, "link": "https://stackoverflow.com/questions/37997197/cannot-execute-binary-error-in-linux-emulator", "title": "&quot;Cannot execute binary&quot; error in Linux emulator", "body": "<p>Apologies for not being well-versed in the world of computers! I'm trying to run some molecular dynamic simulations, using the Cygwin Linux emulator (64 bit) on a Windows machine. However I keep getting the error \"cannot execute binary at ....\" I've tried doing \"dos2unix\" to see if it's a language error. Googling says that it might be a 64/32 bit mismatch, but I thought it was fine to run 32 bit on a 64 bit? The code where it cannot execute binary is below:</p>\n\n<pre><code>BEGIN {\nif ($ENV{'CHARMMEXEC'} ne \"\") {\n    $exec=$ENV{'CHARMMEXEC'};\n} else {\n    $exec=&amp;GenUtil::findExecutable(\"charmm\");\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>my $charmmexec=shift;\n\nif (defined $charmmexec) {\n    $exec=$charmmexec;\n}\n\ndie \"cannot execute binary\" if ((!-x $exec) &amp;&amp; ($exec !~ \"mpi\") &amp;&amp; ($exec !~ \"ibrun\"));\n</code></pre>\n\n<p>I'm not well-versed in perl so I don't understand most of what the code means, despite all my googling. Help would be greatly appreciated!</p>\n"}]