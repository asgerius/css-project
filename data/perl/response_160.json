[{"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517434526, "post_id": 48551796, "comment_id": 84099861, "body": "What do you mean, &quot;sometimes&quot;? If you make an array out of <code>$forename</code> and <code>$surname</code>, it always has two elements."}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517434732, "post_id": 48551796, "comment_id": 84099973, "body": "So how do I ensure it only loops once if $surname is empty?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1517434815, "post_id": 48551796, "comment_id": 84100009, "body": "<code>my @selectedNames = grep {defined and length } ( $forename, $surname );</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1517434986, "post_id": 48551796, "comment_id": 84100106, "body": "@\u0421\u0443\u0445\u043e\u043927 <code>grep { length } ...</code> is enough."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1517435144, "post_id": 48551796, "comment_id": 84100178, "body": "Yes, length is enough. perl 5.10 complains though <a href=\"https://stackoverflow.com/a/1481979/223226\">stackoverflow.com/a/1481979/223226</a>"}, {"owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "edited": false, "score": 0, "creation_date": 1517436619, "post_id": 48551796, "comment_id": 84100864, "body": "Great. Feel free to put it as an answer and I&#39;ll mark it as correct. Thanks for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "is_accepted": false, "score": 0, "last_activity_date": 1517499624, "last_edit_date": 1517499624, "creation_date": 1517499301, "answer_id": 48566452, "question_id": 48551796, "link": "https://stackoverflow.com/questions/48551796/perl-empty-strings-inside-arrays/48566452#48566452", "title": "Perl Empty Strings inside Arrays", "body": "<p>Just use <code>next unless ($name);</code> as first line of your loop.</p>\n\n<p>Perl handles the values <code>undef</code> and empty string (<code>''</code>) as false and will therefore enter the next loop.</p>\n\n<pre><code>my $forename = $service-&gt;getValue('forename');\nmy $surname = $service-&gt;getValue('surname');\n\nmy @selectedNames = ( $forename, $surname );\n\nforeach my $name (@selectedNames) {\n    next unless ($name);\n\n    # do something\n\n    if ($trackedName) {\n         # log the name\n    } else {\n         # log a FATAL\n    }\n}\n</code></pre>\n\n<p>If you want to use grep to filter the list actually you neither need length nor defined: <code>grep { $_ } (@selectedNames)</code> would be enough. Therefore your code would look like</p>\n\n<pre><code>my $forename = $service-&gt;getValue('forename');\nmy $surname = $service-&gt;getValue('surname');\n\nmy @selectedNames = ( $forename, $surname );\n\nforeach my $name (grep { $_ } @selectedNames) {\n    # do something\n\n    if ($trackedName) {\n         # log the name\n    } else {\n         # log a FATAL\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1517503520, "post_id": 48567528, "comment_id": 84131707, "body": "I&#39;d love to upvote this, but as it stands it&#39;s not a complete answer. And, yes, <code>&quot;0&quot;</code> and <code>0</code> would be skipped with the <code>grep {$_} @array</code> code."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1517517555, "post_id": 48567528, "comment_id": 84139315, "body": "Nice work.  <code>grep { defined $_ &amp;&amp; &#47;\\S&#47; } @names</code> is an easy way to require non-whitespace elements in your filter.  You can also just say <code>grep {defined &amp;&amp; &#47;\\S&#47;} @names</code>, because $_ is assumed for <code>defined</code>."}, {"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1517524630, "post_id": 48567528, "comment_id": 84142592, "body": "Nice! <code>&#47;\\S&#47;</code> is quite elegant. I rarely think to use the negative character class escapes - more often than not I end up using ridiculously complicated constructs with the positive ones, in the style of <code>&#47;(?!\\s).&#47;</code>. I definitely need to work on this."}], "tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": false, "score": 1, "last_activity_date": 1517504551, "last_edit_date": 1517504551, "creation_date": 1517502776, "answer_id": 48567528, "question_id": 48551796, "link": "https://stackoverflow.com/questions/48551796/perl-empty-strings-inside-arrays/48567528#48567528", "title": "Perl Empty Strings inside Arrays", "body": "<p>Concerning Frank F\u00f6rster's response (I don't have enough reputation to reply directly):</p>\n\n<p>Wouldn't grepping using <code>$_</code> also strip any numeric item with the value 0, and the string \"0\"? I realize you're not likely to get them as \"surnames\", but not being prepared for such an eventuality may lead to bugs that are hard to track.</p>\n\n<hr>\n\n<p>Edit: Here's my solution (after prompting by PerlDuck):</p>\n\n<pre><code>my $forename = $service-&gt;getValue('forename');\nmy $surname = $service-&gt;getValue('surname');\n\nmy @selectedNames = ( $forename, $surname );\n\nforeach my $name (@selectedNames) {\n    next  if (not defined $name  or  $name eq '');\n\n    # do something\n\n    if ($trackedName) {\n        # log the name\n    } else {\n        # log a FATAL\n    }\n}\n</code></pre>\n\n<p>Alternately you can just use the original code, but substitute</p>\n\n<pre><code>foreach my $name (@selectedNames)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>foreach my $name (grep { defined and $_ ne '' } @selectedNames)\n</code></pre>\n\n<p>If you're worried your \"empty\" names may include stuff with just whitespace in them, you can use <code>$name =~ /^\\s*$/</code> instead of <code>$name eq ''</code>.</p>\n"}], "owner": {"reputation": 881, "user_id": 595855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37888a26f20e7467ff1f239c1b15b194?s=128&d=identicon&r=PG", "display_name": "snakespan", "link": "https://stackoverflow.com/users/595855/snakespan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517504551, "creation_date": 1517434374, "last_edit_date": 1517434453, "question_id": 48551796, "link": "https://stackoverflow.com/questions/48551796/perl-empty-strings-inside-arrays", "title": "Perl Empty Strings inside Arrays", "body": "<p>I want to loop over an array of strings, but sometimes if the string is empty, it still gets added as an item. </p>\n\n<pre><code>my $forename = $service-&gt;getValue('forename');\nmy $surname = $service-&gt;getValue('surname');\n\nmy @selectedNames = ( $forename, $surname );\n\nforeach my $name (@selectedNames) {\n    # do something\n\n    if ($trackedName) {\n         # log the name\n    } else {\n         # log a FATAL\n    }\n}\n</code></pre>\n\n<p>If the string is empty for $surname, then it shouldn't loop the second time at all, but it always does. How do I prevent this?</p>\n"}, {"tags": ["javascript", "arrays", "node.js", "perl"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1517431708, "post_id": 48551129, "comment_id": 84098432, "body": "Use an array literal?"}, {"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1517432180, "post_id": 48551129, "comment_id": 84098657, "body": "<code>const arr = [&quot;hello&quot;, &quot;world&quot;];</code> ?"}, {"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1517432283, "post_id": 48551129, "comment_id": 84098711, "body": "Alternative you could use a tagged template string: const s = v =&gt; v; const arr = s` hello ${} world `; ;)"}], "answers": [{"comments": [{"owner": {"reputation": 19230, "user_id": 1444609, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/bgWmu.jpg?s=128&g=1", "display_name": "I wrestled a bear once.", "link": "https://stackoverflow.com/users/1444609/i-wrestled-a-bear-once"}, "edited": false, "score": 0, "creation_date": 1517431691, "post_id": 48551150, "comment_id": 84098422, "body": "persnaps you could explain how it works? maybe link to the docs for <code>split()</code>?"}], "tags": [], "owner": {"reputation": 137, "user_id": 2715656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91aa676ccddd95d9c1b4c3ba6dafdab0?s=128&d=identicon&r=PG", "display_name": "Luke Gmys", "link": "https://stackoverflow.com/users/2715656/luke-gmys"}, "is_accepted": true, "score": 2, "last_activity_date": 1517431727, "last_edit_date": 1517431727, "creation_date": 1517431643, "answer_id": 48551150, "question_id": 48551129, "link": "https://stackoverflow.com/questions/48551129/javascript-easy-array-declartion-option-like-perl/48551150#48551150", "title": "Javascript easy array declartion option like perl", "body": "<p>This is what you need, for this specific case: <code>const arr = 'hello world'.split(' ');</code>.</p>\n\n<p>Edit:\nCheck out the docs for <code>String.split</code> on <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split\" rel=\"nofollow noreferrer\" title=\"MDN\">MDN</a>. Also, read something on types in JavaScript, if you are wondering why it is possible to call this method on string literal, as I did.</p>\n"}], "owner": {"reputation": 1629, "user_id": 493892, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b9ba82cf7f994f43e3be72962921ea4d?s=128&d=identicon&r=PG", "display_name": "made_in_india", "link": "https://stackoverflow.com/users/493892/made-in-india"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 48551150, "answer_count": 1, "score": -2, "last_activity_date": 1517432313, "creation_date": 1517431507, "last_edit_date": 1517432313, "question_id": 48551129, "link": "https://stackoverflow.com/questions/48551129/javascript-easy-array-declartion-option-like-perl", "title": "Javascript easy array declartion option like perl", "body": "<p>In perl we can declare the array with <code>qw</code> or  <code>quote word</code> take make  each word is taken into individual array cell.\neg.</p>\n\n<pre><code> my @arr= qw( hello\n           world)\n</code></pre>\n\n<p>or else you need to quote each word\neg</p>\n\n<pre><code>my @arr = (\"hello\" ,  \"word\");\n</code></pre>\n\n<p>Is there something similar in javascript as sometime it need lot of formatting to simple declare array.</p>\n"}, {"tags": ["perl", "console.log"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1517418190, "post_id": 48547103, "comment_id": 84091047, "body": "Can you not read the web server error logs - that&#39;s where backend output would end up normally"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1517428011, "post_id": 48547103, "comment_id": 84096550, "body": "If your Perl is using CGI or FastCGI at the server side, you may want to use <a href=\"http://perldoc.perl.org/CGI/Carp.html\" rel=\"nofollow noreferrer\">CGI::Carp</a> to send the errors to the browser. Remember to remove it when you are done."}, {"owner": {"reputation": 1183, "user_id": 1985337, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/WMtrj.png?s=128&g=1", "display_name": "Reverend Bubbles", "link": "https://stackoverflow.com/users/1985337/reverend-bubbles"}, "edited": false, "score": 0, "creation_date": 1517436515, "post_id": 48547103, "comment_id": 84100818, "body": "I didn&#39;t set this system up and I can&#39;t seem to find where the error logs are."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517447786, "post_id": 48547103, "comment_id": 84104240, "body": "/var/log/nginx/ or /var/log/httpd/ would be sensible places to check first if you are running Linux (and have a nginx or apache webserver)"}], "answers": [{"tags": [], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "is_accepted": false, "score": 0, "last_activity_date": 1517682488, "creation_date": 1517682488, "answer_id": 48600595, "question_id": 48547103, "link": "https://stackoverflow.com/questions/48547103/logging-to-browser-console-from-within-perl-script/48600595#48600595", "title": "Logging to browser console from within perl script", "body": "<p>In your perl script:</p>\n\n<pre><code>use diagnostics;\nuse Carp qw(longmess);\n\neval {\n    read_ini();\n};\nif ($@) {\n     my $long_message = longmess( \"error: '$@'\");# stack trace about perl error \n     # send this $long_message as the http response to angular call.     \n}\n</code></pre>\n\n<p>in angular controller code:</p>\n\n<pre><code>$http.get(\"perlscript.pl\")\n.then(function(response) {\n       console.log(response.data); # stack trace about perl error should be shown in console log now.\n},\nfunction(response) {\n      #handle error\n});\n</code></pre>\n\n<p>Please try this. Just thrown you some code snippet as I don't know your code.      </p>\n"}, {"tags": [], "owner": {"reputation": 1183, "user_id": 1985337, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/WMtrj.png?s=128&g=1", "display_name": "Reverend Bubbles", "link": "https://stackoverflow.com/users/1985337/reverend-bubbles"}, "is_accepted": true, "score": 0, "last_activity_date": 1517869422, "creation_date": 1517869422, "answer_id": 48632470, "question_id": 48547103, "link": "https://stackoverflow.com/questions/48547103/logging-to-browser-console-from-within-perl-script/48632470#48632470", "title": "Logging to browser console from within perl script", "body": "<p>I ended up finding the answer elsewhere.</p>\n\n<p>At the top of the file I have \n<code>open my $savedSTDERR, \"&gt;&amp;STDOUT\";</code></p>\n\n<p>then, every <code>print</code> statement just logs to the JS console.</p>\n\n<p>Thanks all for your help.</p>\n"}], "owner": {"reputation": 1183, "user_id": 1985337, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/WMtrj.png?s=128&g=1", "display_name": "Reverend Bubbles", "link": "https://stackoverflow.com/users/1985337/reverend-bubbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1159, "favorite_count": 0, "accepted_answer_id": 48632470, "answer_count": 2, "score": 1, "last_activity_date": 1517869422, "creation_date": 1517416726, "question_id": 48547103, "link": "https://stackoverflow.com/questions/48547103/logging-to-browser-console-from-within-perl-script", "title": "Logging to browser console from within perl script", "body": "<p>I have an Angular2 application that has Perl running the back end scripts.</p>\n\n<p>The Perl is sending back an error, and I finally nailed it down to the fact that a \"read_ini()\" function is failing, so it sends back a simple \"Failed to read ini\" and it's done. The read_ini() function, as you can probably deduce, locates and gets certain information from a .ini file. Thing is, it's a long function. I'm trying to nail down where in the function it's dying. It would be very useful to be able to print out to the browser JS console to help with this. Is this possible?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517422817, "post_id": 48544743, "comment_id": 84093774, "body": "I would write <code>my ( $title, $price, $author ) = GetInfo($dbh, $id)</code> `"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1517410264, "creation_date": 1517410264, "answer_id": 48545000, "question_id": 48544743, "link": "https://stackoverflow.com/questions/48544743/passing-database-connections-to-a-sub-routine-or-create-a-new-one/48545000#48545000", "title": "Passing database connections to a sub routine or create a new one?", "body": "<p>There is overhead in opening database connections, so you should reuse your connection as much as you can.</p>\n\n<p>The major exception to this rule would be if your subroutines forked a new process or ran in a new thread. It is generally not safe to reuse the same handle in different processes or threads, so you should create a new connection for each process and thread.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1517481207, "post_id": 48549239, "comment_id": 84116682, "body": "@simbabque: I would be all over <code>state</code> if it provided for aggregate data. As it stands it provides what I want very rarely."}, {"owner": {"reputation": 1, "user_id": 9295003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566ed0f1e953121191ca87a3ce8cba03?s=128&d=identicon&r=PG&f=1", "display_name": "JanB", "link": "https://stackoverflow.com/users/9295003/janb"}, "edited": false, "score": 0, "creation_date": 1517495856, "post_id": 48549239, "comment_id": 84126429, "body": "Was just an example with getting title, author and price."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 9295003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566ed0f1e953121191ca87a3ce8cba03?s=128&d=identicon&r=PG&f=1", "display_name": "JanB", "link": "https://stackoverflow.com/users/9295003/janb"}, "edited": false, "score": 0, "creation_date": 1517496153, "post_id": 48549239, "comment_id": 84126625, "body": "@JanB: I guessed as much. That&#39;s why I suggested that you write <code>get_info_hash</code> to return a hash containing all of the columns by name. It won&#39;t be significantly slower than fetching just the columns that you need, and you will never need to rewrite it even if requirements change."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1517429685, "last_edit_date": 1517429685, "creation_date": 1517423800, "answer_id": 48549239, "question_id": 48544743, "link": "https://stackoverflow.com/questions/48544743/passing-database-connections-to-a-sub-routine-or-create-a-new-one/48549239#48549239", "title": "Passing database connections to a sub routine or create a new one?", "body": "<p>I would fetch all of the information in one <code>SELECT</code>, like this</p>\n\n<pre><code>sub get_info {\n    my ($dbh, $id) = @_;\n\n    my $sth = $dbh-&gt;prepare('SELECT title, price, author FROM table WHERE id = ?');\n    $sth-&gt;execute($id);\n    $sth-&gt;fetchrow_array;\n}\n\nmy ( $title, $price, $author ) = GetInfo($dbh, $id);\n</code></pre>\n\n<p>Or, better still, fetch a hash of everything in the table and pick out the parts you need</p>\n\n<pre><code>sub get_info_hash {\n    my ($dbh, $id) = @_;\n\n    my $sth = $dbh-&gt;prepare('SELECT * FROM table WHERE id = ?');\n    $sth-&gt;execute($id);\n    $sth-&gt;fetchrow_hashref;\n}\n\nmy $info = get_info_hash($dbh, $id);\nmy ( $title, $price, $author ) = @{$info}{qw/ title price author /};\n</code></pre>\n\n<p>The prevailing naming standard for Perl code is to use <code>snake_case</code> for lexical variables, and capital letters for globals</p>\n\n<p>It would be better to avoid repeating the <code>prepare</code> every time, and do it only once, the first time it is needed. That lends itself better to an object-oriented approach where disconnecting the database also invalidates all the cached statement handles, but if the database handle is never likely to be disconnected then a simple closure will suffice</p>\n\n<pre><code>{\n    my $sth;\n\n    sub get_info_hash {\n        my ($dbh, $id) = @_;\n\n        $sth //= $dbh-&gt;prepare('SELECT * FROM table WHERE id = ?');\n        $sth-&gt;execute($id);\n        $sth-&gt;fetchrow_hashref;\n    }\n}\n\nmy $info = get_info_hash($dbh, $id);\nmy ( $title, $price, $author ) = @{$info}{qw/ title price author /};\n</code></pre>\n\n<p>Note that you will want to add some error handling to any of these options</p>\n"}], "owner": {"reputation": 1, "user_id": 9295003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566ed0f1e953121191ca87a3ce8cba03?s=128&d=identicon&r=PG&f=1", "display_name": "JanB", "link": "https://stackoverflow.com/users/9295003/janb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1517429685, "creation_date": 1517409522, "question_id": 48544743, "link": "https://stackoverflow.com/questions/48544743/passing-database-connections-to-a-sub-routine-or-create-a-new-one", "title": "Passing database connections to a sub routine or create a new one?", "body": "<p>should I pass an open database connection to all my used sub routines? </p>\n\n<pre><code>my $dbh = MysqlConnect();\nmy $title = GetTitle($id, $dbh);\nmy $price = GetPrice($id, $dbh);\nmy $author = GetAuthor($id, $dbh);\nMysqlDisconnect($dbh);\n\nsub GetTitle {\nmy $id = shift;\nmy dbh = shift;\n.... # get title from database\n}\nsub GetPrice {...}\nsub GetAuthor {...}\n</code></pre>\n\n<p>Or should I open a new connection in every sub routine I use?</p>\n\n<pre><code>my $title = GetTitle($id);\nmy $price = GetPrice($id);\nmy $author = GetAuthor($id);\n\nsub GetTitle {\nmy $id = shift;\nmy $dbh = MysqlConnect();\n.... # get title from database\nMysqlDisconnect($dbh);\n}\nsub GetPrice {...}\nsub GetAuthor {...}\n</code></pre>\n\n<p>Sincerly\nJan</p>\n"}, {"tags": ["xml", "perl", "csv", "http-post"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517409876, "post_id": 48544706, "comment_id": 84085048, "body": "What is this stray bit of code doing -&gt; <code>Content=&gt;[$xml];</code>"}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517410280, "post_id": 48544706, "comment_id": 84085362, "body": "Without this line I have the same error :D I just tried to represent my data in hash"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517410477, "post_id": 48544706, "comment_id": 84085514, "body": "Of course you would still get the error - that line wasn&#39;t inside the call to <code>new</code>, so wasn&#39;t doing anything :)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517410935, "post_id": 48544706, "comment_id": 84085876, "body": "Also,  you should move <code>$ua</code> creation outside of the loop as it is constant for all requests."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1517413021, "post_id": 48545288, "comment_id": 84087352, "body": "It&#39;s making multiple requests? You should change this line <code>$xml -&gt; sprint;</code> to <code>$xml -&gt; print;</code> as currently it does nothing, but you by changing it, it&#39;ll print out the generated XML for each line."}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1517575417, "post_id": 48545288, "comment_id": 84162254, "body": "with <code>$xml -&gt; sprint</code> it does multiple requests, it works"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 1, "creation_date": 1517576861, "post_id": 48545288, "comment_id": 84163106, "body": "I meant line 23 before the comment &quot;Create a user agent object&quot;. Not anything in the actual request part of the code. It does nothing except waste CPU cycles as currently written."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1517411081, "creation_date": 1517411081, "answer_id": 48545288, "question_id": 48544706, "link": "https://stackoverflow.com/questions/48544706/multiple-http-post-requests-with-updated-xml-template/48545288#48545288", "title": "Multiple HTTP POST Requests with updated xml template", "body": "<p>You need to pass a string to the request rather than an object, so you have to convert <code>$xml</code> into a string</p>\n\n<pre><code>my $req = HTTP::Request-&gt;new('POST', $uri, \n[Accept=&gt;'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml',\nContent_Type=&gt;'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml; \ncharset=utf-8'], $xml-&gt;sprint);\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 48545288, "answer_count": 1, "score": 0, "last_activity_date": 1517411081, "creation_date": 1517409406, "last_edit_date": 1517410352, "question_id": 48544706, "link": "https://stackoverflow.com/questions/48544706/multiple-http-post-requests-with-updated-xml-template", "title": "Multiple HTTP POST Requests with updated xml template", "body": "<p>I want to make Multiple HTTP POST Requests. My template.xml for POST Request uploads from Input.scv data, wich contains Information about devices, those should be added (names, ipaddresses).</p>\n\n<h3>Input.csv (Name, IP Address)</h3>\n\n<pre><code>LAB-1,10.26.0.1\nLAB-2,10.26.0.2\nLAB-3,10.26.0.3\n</code></pre>\n\n<h3>template.xml</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ns0:networkdevice\n        xmlns:ns0=\"network.ers.ise.cisco.com\" \n        xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n        xmlns:ns1=\"ers.ise.cisco.com\"\n        xmlns:ers=\"ers.ise.cisco.com\"\n        name=\"name1\"&gt;\n    &lt;authenticationSettings&gt;\n        &lt;enableKeyWrap&gt;true&lt;/enableKeyWrap&gt;\n        &lt;keyEncryptionKey&gt;1234567890123456&lt;/keyEncryptionKey&gt;\n        &lt;keyInputFormat&gt;ASCII&lt;/keyInputFormat&gt;\n        &lt;networkProtocol&gt;RADIUS&lt;/networkProtocol&gt;\n        &lt;radiusSharedSecret&gt;aaa&lt;/radiusSharedSecret&gt;\n    &lt;/authenticationSettings&gt;\n    &lt;coaPort&gt;1700&lt;/coaPort&gt;\n    &lt;NetworkDeviceIPList&gt;\n        &lt;NetworkDeviceIP&gt;\n            &lt;ipaddress&gt;1.1.1.1&lt;/ipaddress&gt;\n            &lt;mask&gt;32&lt;/mask&gt;\n        &lt;/NetworkDeviceIP&gt;\n    &lt;/NetworkDeviceIPList&gt;\n&lt;/ns0:networkdevice&gt;\n</code></pre>\n\n<p>I have now updated XML, which is right. I need now to add my devices to managementsystem. </p>\n\n<pre><code>   use strict;\n   use warnings;\n   use XML::Twig;\n   use LWP::UserAgent;\n   use HTTP::Headers;\n   use HTTP::Request;\n   use File::Slurp;\n   use LWP 5.64;\n   use MIME::Base64;\n   use IO::Socket::SSL;\n\n  my $xml = XML::Twig -&gt; new -&gt; parsefile ( 'template.xml' );\n  $xml -&gt;set_pretty_print('indented_a');\n\n  open ( my $input, '&lt;', 'input.csv' ) or die $!;\n\n  while ( &lt;$input&gt; ) {\n  chomp;\n  my ( $name, $ip ) = split /,/;\n  $xml -&gt; root -&gt; set_att('name', $name );\n  $xml -&gt; get_xpath('//ipaddress',0) -&gt; set_text($ip);\n\n  $xml -&gt; sprint;\n\n  #Create a user agent object\n  my $ua = LWP::UserAgent-&gt;new(ssl_opts=&gt; {\n  SSL_verify_mode =&gt; SSL_VERIFY_NONE(),\n  verify_hostname =&gt; 0,\n  }\n  );\n  my $uri='https://hostname:9060/ers/config/networkdevice';\n  my $req = HTTP::Request-&gt;new('POST', $uri, \n  [Accept=&gt;'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml',\n  Content_Type=&gt;'application/vnd.com.cisco.ise.network.networkdevice.1.1+xml; \n  charset=utf-8'], $xml);\n\n  $req-&gt;content($xml);\n  $req-&gt;authorization_basic(\"user\", \"user\");\n\n  #Pass request to the user agent and get a response back\n  my $res = $ua-&gt;request($req);\n  #Check the outcome of the response\n  if ($res-&gt;is_success) {\n    print $res-&gt;status_line, \"n\";\n       } else {\n         print $res-&gt;status_line, \"n\";\n      }\n</code></pre>\n\n<p>}</p>\n\n<p>After script running I have this error (for each try):</p>\n\n<p><code>500 Not a SCALAR referencen</code></p>\n"}, {"tags": ["xml", "perl", "csv", "parsing", "xml-parsing"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1517416674, "post_id": 48539298, "comment_id": 84089946, "body": "Your program logic is wrong: You are creating object <code>$tree</code> outside the loop. Then you are creating, modifying and without doing anything useful discarding <code>$contree</code>. Finally you are printing the original unmodified <code>$tree</code> object as XML."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1517395824, "creation_date": 1517395824, "answer_id": 48540310, "question_id": 48539298, "link": "https://stackoverflow.com/questions/48539298/update-an-xml-file-using-data-read-from-a-csv-file/48540310#48540310", "title": "Update an XML file using data read from a CSV file", "body": "<p>I'm not familiar enough with <code>XML::Treebuilder</code> so will give an example in <code>XML::Twig</code>. I will also avoid <code>Text::CSV</code> because I think it's overkill for most CSV use cases (e.g. any time you're not worrying about quoting/multi-line).</p>\n\n<p>But it would go something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $xml = XML::Twig -&gt; new -&gt; parsefile ( 'template.xml' );\n$xml -&gt;set_pretty_print('indented_a');\n\nopen ( my $input, '&lt;', 'input.csv' ) or die $!;\n\nwhile ( &lt;$input&gt; ) {\n   chomp;\n   my ( $name, $ip ) = split /,/;\n   $xml -&gt; root -&gt; set_att('name', $name );\n   $xml -&gt; get_xpath('//ipaddress',0) -&gt; set_text($ip);\n\n   $xml -&gt; print;\n}\n</code></pre>\n\n<p>For the last line of your CSV, this will generate: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ns0:networkdevice\n    name=\"LAB-3\"\n    xmlns:ers=\"ers.ise.cisco.com\"\n    xmlns:ns0=\"network.ers.ise.cisco.com\"\n    xmlns:ns1=\"ers.ise.cisco.com\"\n    xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;authenticationSettings&gt;\n    &lt;enableKeyWrap&gt;true&lt;/enableKeyWrap&gt;\n    &lt;keyEncryptionKey&gt;1234567890123456&lt;/keyEncryptionKey&gt;\n    &lt;keyInputFormat&gt;ASCII&lt;/keyInputFormat&gt;\n    &lt;networkProtocol&gt;RADIUS&lt;/networkProtocol&gt;\n    &lt;radiusSharedSecret&gt;aaa&lt;/radiusSharedSecret&gt;\n  &lt;/authenticationSettings&gt;\n  &lt;coaPort&gt;1700&lt;/coaPort&gt;\n  &lt;NetworkDeviceIPList&gt;\n    &lt;NetworkDeviceIP&gt;\n      &lt;ipaddress&gt;10.26.0.3&lt;/ipaddress&gt;\n      &lt;mask&gt;32&lt;/mask&gt;\n    &lt;/NetworkDeviceIP&gt;\n  &lt;/NetworkDeviceIPList&gt;\n&lt;/ns0:networkdevice&gt;\n</code></pre>\n\n<p>Which looks like what you're after? </p>\n\n<p>You'd be wanting <code>$xml -&gt; sprint</code> if you're wanting to include it in a <code>POST</code> or similar though. </p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1517400768, "post_id": 48541249, "comment_id": 84078769, "body": "Cool! Thank&#39;s, But how I read values from csv in your example?"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1517414760, "post_id": 48541249, "comment_id": 84088606, "body": "Using <code>Text::CSV</code> as you are already doing. You see <code>$name</code> and <code>$ip</code> are inserted into the XML, right? You only have to set their values to be equal to those read from the CSV file."}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1517398676, "creation_date": 1517398676, "answer_id": 48541249, "question_id": 48539298, "link": "https://stackoverflow.com/questions/48539298/update-an-xml-file-using-data-read-from-a-csv-file/48541249#48541249", "title": "Update an XML file using data read from a CSV file", "body": "<p>An easy way to generate XML from Perl is to use <a href=\"https://metacpan.org/pod/XML::FromPerl\" rel=\"nofollow noreferrer\">XML::FromPerl</a>.</p>\n\n<p>The template is replaced by a Perl data structure embedded in your code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse XML::FromPerl qw(xml_from_perl);\n\nmy $name = 'LAB-1';\nmy $ip   = '10.26.0.1';\n\nmy $xml = xml_from_perl\n  [ 'ns0:networkdevice' =&gt; { 'xmlns:ns0' =&gt; 'network.ers.ise.cisco.com',\n                 'xmlns:xs'  =&gt; 'http://www.w3.org/2001/XMLSchema',\n                 'xmlns:ns1' =&gt; 'ers.ise.cisco.com',\n                 'xmlns:ers' =&gt; 'ers.ise.cisco.com',\n                 name =&gt; $name },\n    [ authenticationSettings =&gt;\n      [ enableKeyWrap =&gt; 'true' ],\n      [ keyEncryptionKey =&gt; '1234567890123456' ],\n      [ keyInputFormat =&gt; 'ASCII' ],\n      [ networkProtocol =&gt; 'RADIUS' ],\n      [ radiusSharedSecret =&gt; 'aaa' ] ],\n    [ coaPort =&gt; '1700' ],\n    [ NetworkDeviceIPList =&gt;\n      [ NetworkDeviceIP =&gt;\n    [ ipaddress =&gt; $ip ],\n    [ mask =&gt; 32 ] ] ] ];\n\nsay $xml-&gt;toString(1);\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "accepted_answer_id": 48540310, "answer_count": 2, "score": 1, "last_activity_date": 1517403426, "creation_date": 1517392740, "last_edit_date": 1517403426, "question_id": 48539298, "link": "https://stackoverflow.com/questions/48539298/update-an-xml-file-using-data-read-from-a-csv-file", "title": "Update an XML file using data read from a CSV file", "body": "\n\n<p>I am trying to write a value to an XML file. I have a CSV input file <code>Input.xsv</code> and an XML template file <code>template.xml</code> which I need to update with the Name and IP Address values from the CSV file. </p>\n\n<h3>Input.csv (Name, IP Address)</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>LAB-1,10.26.0.1\nLAB-2,10.26.0.2\nLAB-3,10.26.0.3\n</code></pre>\n\n<h3>template.xml</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ns0:networkdevice\n        xmlns:ns0=\"network.ers.ise.cisco.com\" \n        xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n        xmlns:ns1=\"ers.ise.cisco.com\"\n        xmlns:ers=\"ers.ise.cisco.com\"\n        name=\"name1\"&gt;\n    &lt;authenticationSettings&gt;\n        &lt;enableKeyWrap&gt;true&lt;/enableKeyWrap&gt;\n        &lt;keyEncryptionKey&gt;1234567890123456&lt;/keyEncryptionKey&gt;\n        &lt;keyInputFormat&gt;ASCII&lt;/keyInputFormat&gt;\n        &lt;networkProtocol&gt;RADIUS&lt;/networkProtocol&gt;\n        &lt;radiusSharedSecret&gt;aaa&lt;/radiusSharedSecret&gt;\n    &lt;/authenticationSettings&gt;\n    &lt;coaPort&gt;1700&lt;/coaPort&gt;\n    &lt;NetworkDeviceIPList&gt;\n        &lt;NetworkDeviceIP&gt;\n            &lt;ipaddress&gt;1.1.1.1&lt;/ipaddress&gt;\n            &lt;mask&gt;32&lt;/mask&gt;\n        &lt;/NetworkDeviceIP&gt;\n    &lt;/NetworkDeviceIPList&gt;\n&lt;/ns0:networkdevice&gt;\n</code></pre>\n\n<p>I want to read names and IP addresses from the CSV file and to write them into my XML template file to create an HTTP POST request for each device in the CSV file.</p>\n\n<p>I tried to save the values in my XML template, but I'm not sure if I'm doing it right.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nuse Text::CSV;\nuse XML::TreeBuilder;\nuse Data::Dumper;\n\nmy $xmlbase    = 'template.xml';\nmy $paramsfile = 'input.csv';\n\n# The list of tags filled from the CSV file\nmy @taglist = qw( name ipaddress );\n\nmy $tree = XML::TreeBuilder-&gt;new();\n$tree-&gt;parsefile($xmlbase);\n\nmy $csv = Text::CSV-&gt;new();\n\nopen my $fh, \"&lt;:encoding(utf8)\", $paramsfile or die \"$paramsfile: $!\";\n\nwhile ( my $row = $csv-&gt;getline($fh) ) {\n\n    my $contree = XML::TreeBuilder-&gt;new();\n    $contree-&gt;parsefile($xmlbase);\n\n    my $index = 0;\n\n    for my $tagname ( @taglist ) {        \n        my $tag = $contree-&gt;look_down('_tag' =&gt; $tagname);\n        $tag-&gt;push_content($row-&gt;[$index++]);\n    }\n}\n\nprint '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;'.\"\\n\";\nprint $tree-&gt;as_XML();\n</code></pre>\n\n<p>After I run my script I get this error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"push_content\"in this line</p>\n</blockquote>\n\n<p>This error refers to the statement <code>$tag-&gt;push_content($row-&gt;[$index++]);</code>. I think it is because <code>name</code> does not have its own tag.</p>\n\n<p>This element I have here:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;ns0:networkdevice\n        xmlns:ns0=\"network.ers.ise.cisco.com\"\n        xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n        xmlns:ns1=\"ers.ise.cisco.com\"\n        xmlns:ers=\"ers.ise.cisco.com\"\n        name=\"name1\"&gt;\n</code></pre>\n\n<p>in tag <code>ns0:networkdevice</code></p>\n\n<p>When I try with just <code>ipaddress</code> it is printed, but with the original value from <code>template.xml</code>. It does not take a value from <code>Input.csv</code>, and if it was empty, it stays empty.</p>\n\n<p>How should I do this? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1517392807, "post_id": 48538810, "comment_id": 84073630, "body": "So you want to just remove lines that contain <code>&lt;field&gt;</code>? Note that what you show isn&#39;t valid XML because there&#39;s no closing <code>&lt;&#47;field&gt;</code>."}, {"owner": {"reputation": 31, "user_id": 7843105, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e84ed50162dbaadac55689f7921a1e56?s=128&d=identicon&r=PG&f=1", "display_name": "Krishh", "link": "https://stackoverflow.com/users/7843105/krishh"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1517393653, "post_id": 48538810, "comment_id": 84074247, "body": "Yes, I just want to remove lines that contain &lt;field&gt;"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1517396596, "post_id": 48538810, "comment_id": 84076216, "body": "This sounds like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> to me. What are you trying to accomplish here?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1517396715, "post_id": 48538810, "comment_id": 84076297, "body": "Your source XML isn&#39;t actually XML. Is this a transcription error, or have you been given broken XML to work with (which is a different problem)?"}], "answers": [{"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 2, "last_activity_date": 1517398480, "last_edit_date": 1517398480, "creation_date": 1517398102, "answer_id": 48541065, "question_id": 48538810, "link": "https://stackoverflow.com/questions/48538810/parsing-particular-sections-of-a-file-in-perl/48541065#48541065", "title": "parsing particular sections of a file in perl", "body": "<p>You may go about this problem by going through the text, but it is always safer to use an XML parser. There are a number of excellent Perl XML libraries available in CPAN. One that I like is <code>XML::LibXML</code> (see <a href=\"http://search.cpan.org/~shlomif/XML-LibXML-2.0132/LibXML.pod\" rel=\"nofollow noreferrer\">here</a>) which is an interface to <code>libxml2</code>. It provides lots of possibilities. Using the functionality of <code>XML::LibXML::XPathContext</code> we could do:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $parser = XML::LibXML-&gt;new( recover =&gt; 1 );\nmy $xp = $parser-&gt;parse_string(&lt;&lt;'EndXML');\n  &lt;document&gt;\n    &lt;field&gt;\n      &lt;address&gt;20&lt;/address&gt;\n      &lt;startat&gt;0&lt;/startat&gt;\n      &lt;size&gt;8&lt;/size&gt;\n    &lt;/field&gt;\n\n    &lt;field&gt;\n      &lt;address&gt;21&lt;/address&gt;\n      &lt;startat&gt;0&lt;/startat&gt;\n      &lt;size&gt;8&lt;/size&gt;\n    &lt;/field&gt;\n  &lt;/document&gt;\nEndXML\n\nif( $@ ) {\n  die \"Cannot parse XML\\n\";\n}\n\nforeach my $c ( $xp-&gt;findnodes('//field') ) {\n  print $c-&gt;findnodes('.'), \"\\n\";\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>&lt;field&gt;\n      &lt;address&gt;20&lt;/address&gt;\n      &lt;startat&gt;0&lt;/startat&gt;\n      &lt;size&gt;8&lt;/size&gt;\n    &lt;/field&gt;\n&lt;field&gt;\n      &lt;address&gt;21&lt;/address&gt;\n      &lt;startat&gt;0&lt;/startat&gt;\n      &lt;size&gt;8&lt;/size&gt;\n    &lt;/field&gt;\n</code></pre>\n\n<p>A few comments:</p>\n\n<ol>\n<li>The option <code>recover =&gt; 1</code> may be useful to parse broken XML files. It will not fix all problems, but may be able to fix some of them. Leave empty if you want no fixing. Use <code>recover =&gt; 2</code> to make the fixing silent.</li>\n<li>This code uses <code>findnodes</code> which takes an <a href=\"https://www.w3.org/TR/1999/REC-xpath-19991116/\" rel=\"nofollow noreferrer\">XPath</a> expression. In this case <code>//field</code> will find any <code>&lt;field&gt;</code> tags. Then <code>findnodes('.')</code> will get the whole content of the \"field\".</li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 7843105, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e84ed50162dbaadac55689f7921a1e56?s=128&d=identicon&r=PG&f=1", "display_name": "Krishh", "link": "https://stackoverflow.com/users/7843105/krishh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517398480, "creation_date": 1517391320, "last_edit_date": 1517392708, "question_id": 48538810, "link": "https://stackoverflow.com/questions/48538810/parsing-particular-sections-of-a-file-in-perl", "title": "parsing particular sections of a file in perl", "body": "<p>I am new in perl and exploring it</p>\n\n<p>I have a .xml file and I am looking to get few sections of it.\nEach section starts and ends with <code>&lt;field&gt;</code>. and I want to get content in between them</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;field&gt;\n    &lt;address&gt;20&lt;/address&gt;\n    &lt;startat&gt;0&lt;/startat&gt;\n    &lt;size&gt;8&lt;/size&gt;\n &lt;field&gt;\n\n &lt;field&gt;\n    &lt;address&gt;21&lt;/address&gt;\n    &lt;startat&gt;0&lt;/startat&gt;\n    &lt;size&gt;8&lt;/size&gt;\n&lt;field&gt;\n</code></pre>\n\n<p>and output I am looking as below</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;address&gt;20&lt;/address&gt;\n    &lt;startat&gt;0&lt;/startat&gt;\n    &lt;size&gt;8&lt;/size&gt;\n\n    &lt;address&gt;21&lt;/address&gt;\n    &lt;startat&gt;0&lt;/startat&gt;\n    &lt;size&gt;8&lt;/size&gt;  \n</code></pre>\n\n<p>How would I go about extracting that part of the file?</p>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["database", "sqlite", "perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1517388412, "post_id": 48536572, "comment_id": 84070789, "body": "Well, you attach it each time you run the script, so detach is a good idea. Will it use the same name to attempt attach? if so, you should regardless get error <code>Database name is already in use</code>"}], "answers": [{"comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1517422662, "post_id": 48538297, "comment_id": 84093695, "body": "When closing orderly, there are no active transactions."}], "tags": [], "owner": {"reputation": 31155, "user_id": 4744514, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RQ2Np.jpg?s=128&g=1", "display_name": "MikeT", "link": "https://stackoverflow.com/users/4744514/miket"}, "is_accepted": true, "score": 3, "last_activity_date": 1517391060, "last_edit_date": 1592644375, "creation_date": 1517389604, "answer_id": 48538297, "question_id": 48536572, "link": "https://stackoverflow.com/questions/48536572/sqlite-should-i-detach-attached-databases-before-a-disconnect/48538297#48538297", "title": "SQLite: should I detach attached databases before a disconnect?", "body": "<p>To just close the database would be OK unless the main database is an in memory database and the journal mode is not WAL (Write Ahead Logging); <em>even then it would probably be extremely rare to encounter an issue</em>.  I think detach is provided for situations where you want to detach databases individually. So it's really a matter of personal choice unless dictated otherwise.</p>\n<p>This is based upon the following :-</p>\n<blockquote>\n<p>Transactions involving multiple attached databases are atomic,\nassuming that the main database is not &quot;:memory:&quot; and the journal_mode\nis not WAL.</p>\n<p>If the main database is &quot;:memory:&quot; or if the journal_mode\nis WAL, then transactions continue to be atomic within each individual\ndatabase file. But if the host computer crashes in the middle of a\nCOMMIT where two or more database files are updated, some of those\nfiles might get the changes where others might not.</p>\n</blockquote>\n<p><a href=\"https://www.sqlite.org/lang_attach.html\" rel=\"nofollow noreferrer\">ATTACH DATABASE</a></p>\n<p><a href=\"https://www.techonthenet.com/sqlite/attach_database.php\" rel=\"nofollow noreferrer\">This, from Tech On The Net</a> states :-</p>\n<blockquote>\n<p>When the database connection is closed, the attached database will be\nautomatically be detached.</p>\n</blockquote>\n<p>and also</p>\n<blockquote>\n<p>To remove an attached database from your connection, use the DETACH\nDATABASE command or close the database connection.</p>\n</blockquote>\n"}], "owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 48538297, "answer_count": 1, "score": 3, "last_activity_date": 1517391060, "creation_date": 1517383080, "question_id": 48536572, "link": "https://stackoverflow.com/questions/48536572/sqlite-should-i-detach-attached-databases-before-a-disconnect", "title": "SQLite: should I detach attached databases before a disconnect?", "body": "<p>Should I detach an attached database before calling <code>$dbh-&gt;disconnect</code> or is it OK to omit the <code>DETACH</code> is such a case?</p>\n\n<pre><code>use DBI;\n\nmy $dbh = DBI-&gt;connect( \"DBI:SQLite:dbname=my_db_1\", ...\n\n$dbh-&gt;do( \"ATTACH DATABASE 'my_db_2' AS data\" );\n...\n$dbh-&gt;do( \"DETACH DATABASE data\" );\n$dbh-&gt;disconnect;\n</code></pre>\n"}, {"tags": ["windows", "perl", "powershell", "active-directory", "command-prompt"], "comments": [{"owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "edited": false, "score": 0, "creation_date": 1517377201, "post_id": 48535021, "comment_id": 84065689, "body": "Also  I forget to mention that I am using ssh object to run the commands"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1517383837, "creation_date": 1517383837, "answer_id": 48536761, "question_id": 48535021, "link": "https://stackoverflow.com/questions/48535021/active-directory-commands-work-under-powershell-but-not-with-command-prompt/48536761#48536761", "title": "Active Directory commands work under PowerShell but not with command prompt", "body": "<p>The problem is almost certainly that the <code>PATH</code> environment variable doesn't include the directory where the Active Directory tools are stored</p>\n\n<p>To find where they are on your system, under PowerShell enter</p>\n\n<pre><code>where.exe dsadd\n</code></pre>\n\n<p>This will show the full path to <code>sdadd</code></p>\n\n<p>(If you use just <code>where</code> as normal then PowerShell will use the <code>where</code> cmdlet which is an entirely different thing)</p>\n\n<p>If you then modify the <code>PATH</code> variable on the command prompt to include the path revealed above then Active Directory commands will work just as they do on PowerShell</p>\n"}], "owner": {"reputation": 93, "user_id": 9171212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGbzRyoPho0/AAAAAAAAAAI/AAAAAAAAF5o/G2UJVuYDk4I/photo.jpg?sz=128", "display_name": "Deeptanshu Goel", "link": "https://stackoverflow.com/users/9171212/deeptanshu-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 48536761, "answer_count": 1, "score": 0, "last_activity_date": 1517383837, "creation_date": 1517376413, "last_edit_date": 1517382685, "question_id": 48535021, "link": "https://stackoverflow.com/questions/48535021/active-directory-commands-work-under-powershell-but-not-with-command-prompt", "title": "Active Directory commands work under PowerShell but not with command prompt", "body": "<p>Active Directory commands issued by my Perl script are working from PowerShell but not when I run it from the command prompt.</p>\n\n<p>Is there any way to run these commands from the command prompt?</p>\n\n<p>The commands that I am using are <code>dsadd</code>, <code>dsrm</code>, <code>dsmod</code> etc.</p>\n"}, {"tags": ["regex", "string", "perl", "latitude-longitude", "geodesic-sphere"], "comments": [{"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1517377022, "post_id": 48534863, "comment_id": 84065617, "body": "too broad !!! you should focus in what in expected input and output... please provide some sample input and expected output set"}, {"owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "reply_to_user": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "edited": false, "score": 0, "creation_date": 1517377687, "post_id": 48534863, "comment_id": 84065851, "body": "I did supply an input data example: my $Lat = &quot;48&#176; 25\u2032 43\u2033 N&quot;; What I want is $deg = 48, $min = 25, $sec = 43 and $dir = &quot;N&quot;. The problem is those Unicode symbols Degree, Prime and Double Prime, and including them in a regular expression used in Perl split. I can&#39;t see how I can make my question any clearer."}, {"owner": {"reputation": 294945, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1517380867, "post_id": 48534863, "comment_id": 84067099, "body": "Could there be fractional coordinates as in <code>$Lat = &quot;48&#176; 25\u2032 43.5\u2033 N&quot;</code>?"}, {"owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "edited": false, "score": 0, "creation_date": 1517382689, "post_id": 48534863, "comment_id": 84067925, "body": "Yes there can and indeed there are fractional seconds, and Rizwan&#39;s solution works correctly with either and with or without embedded whitespace, since that is another variation in the data. Vincenty inverse is super accurate and can utilize fractional seconds if present in the data. And if I need to convert back to DMS from radians I can use non Unicode symbols. Again, thank you both for solution/insights."}], "answers": [{"comments": [{"owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "edited": false, "score": 0, "creation_date": 1517381181, "post_id": 48535957, "comment_id": 84067229, "body": "Thank you. That works perfectly. I was just beginning to experiment with [\\D\\s]+ and was getting everything except the $dir token.  Thanks again."}, {"owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "edited": false, "score": 0, "creation_date": 1517381895, "post_id": 48535957, "comment_id": 84067561, "body": "One question, if I may. What is the purpose of that &quot;.&quot; after the &quot;W&quot; in the character class, since the expression works correctly with the dot or without?"}, {"owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "reply_to_user": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "edited": false, "score": 1, "creation_date": 1517381988, "post_id": 48535957, "comment_id": 84067613, "body": "that is actually an afterthought... suppose if the deg our and min can be in fraction that might be handy .. innit ? :) ? Although I dont think i have seen such think like that ... yet.. i saw comment so thought about putting it in... you may remove the . if you don&#39;t need it"}, {"owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "edited": false, "score": 0, "creation_date": 1517383009, "post_id": 48535957, "comment_id": 84068066, "body": "No, I have and do need it. You hit it out of the park because fractional seconds are becoming increasingly common."}], "tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": true, "score": 4, "last_activity_date": 1517380738, "creation_date": 1517380738, "answer_id": 48535957, "question_id": 48534863, "link": "https://stackoverflow.com/questions/48534863/splitting-a-string-containing-a-longitude-or-latitude-expression-in-perl/48535957#48535957", "title": "Splitting a string containing a longitude or latitude expression in perl", "body": "<p>You may try this regex to split the string:</p>\n\n<pre><code>[^\\dNSEW.]+\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/kb04i9/2\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p>Sample source: ( <a href=\"https://ideone.com/45hzGD\" rel=\"nofollow noreferrer\">run here</a> )</p>\n\n<pre><code>my $str = '48\u00b0 25\u2032 43\u2033 N';\nmy $regex = qr/[^\\dNSEW.]+/p;\nmy ($deg, $min, $sec, $dir) = split $regex, $str;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517536599, "post_id": 48574453, "comment_id": 84145888, "body": "Why <code>no warnings</code>? And why is there a <code>&#47;p</code> flag on your regex?"}, {"owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517605175, "post_id": 48574453, "comment_id": 84178758, "body": "Here is what perlre says about /p: &quot;Preserve the string matched such that ${^PREMATCH} , ${^MATCH} , and ${^POSTMATCH} are available for use after matching.&quot; I think that will eventually be deprecated but don&#39;t know when. I&#39;m using v5.18.2 on macOS 10.13.3. I often use those variables when I execute with the debugger. Also, my standard first line shebang is: #!/usr/bin/perl -w. Always! That -w causes perl to announce whenever I attempt to print a double-wide character, which &#39;use utf8;&#39; will enable, so &#39;no warning;&#39; suppresses them. The regex will work just fine without the /p."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1518127957, "post_id": 48574453, "comment_id": 84389981, "body": "I know what <code>&#47;p</code> does, but it makes no sense in <code>split</code> (IMHO it makes no sense on <code>qr&#47;&#47;</code> either). Don&#39;t use <code>-w</code>; it&#39;s been obsolete since 2000 with the introduction of <code>use warnings;</code>. Also, don&#39;t disable all warnings; just disable a specific category. Also, don&#39;t just suppress warnings; fix your broken code."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1518262763, "post_id": 48574453, "comment_id": 84439557, "body": "If your program &quot;works perfectly&quot; but produces &quot;Wide character&quot; warnings, it works by accident, sort of. (It would probably fail if you run it on an EBCDIC platform or if Perl decides to change the internal representation of Unicode strings in the future.) The proper solution is to tell Perl what encoding to use on your filehandles (e.g. <code>binmode STDOUT, &#39;:encoding(UTF-8)&#39;;</code>)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1518296483, "post_id": 48574453, "comment_id": 84450011, "body": "With split you can use <code>(</code> <code>)</code> to get captured strings, but that has nothing to do with <code>&#47;p</code>. <code>perlre</code> doesn&#39;t explain why you put something that has no effect in your code (especially sample code on a SO answer, which tends to be copied and used by other people). The &quot;fix your broken code&quot; comment was referring to the &quot;Wide character&quot; warning, which does indicate real encoding issues. In general, blindly silencing all warnings is a bad idea. Also, had you posted <i>less</i> code (no <code>&#47;p</code> and <code>no warnings;</code>), I wouldn&#39;t&#39;ve said anything."}], "tags": [], "owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1517535292, "creation_date": 1517535292, "answer_id": 48574453, "question_id": 48534863, "link": "https://stackoverflow.com/questions/48534863/splitting-a-string-containing-a-longitude-or-latitude-expression-in-perl/48574453#48574453", "title": "Splitting a string containing a longitude or latitude expression in perl", "body": "<p>My bad! Pilot error!</p>\n\n<p>The original regex I posted, and was struggling with was:</p>\n\n<pre><code>/[\\x{0B00}\\x{2032}\\x{2033}\\s]/+\n</code></pre>\n\n<p>The error(s) are where I placed the '+' character and the hex value of the degree character. That regex should have been written:</p>\n\n<pre><code>/[\\x{B0}\\x{2032}\\x{2033}\\s]+/\n</code></pre>\n\n<p>The answer from @Rizwan was illuminating but I was determined to make regular expressions in Perl work with Unicode, so I persevered, and now this is my solution:</p>\n\n<pre><code>use utf8;\nno warnings;\n\nmy $dms = \"48\u00b0 25\u2032 43.314560\u2033 N\";\nmy $regex = qr/[\\x{B0}\\x{2032}\\x{2033}:\\s]+/p; # some geodesics do use ':'\nmy ($deg, $min, $sec, $dir) = split $regex, $dms;\nprintf(\"\\$deg: %s, \\$min: %s, \\$sec: %s, \\$dir: %s\\n\",\n       $deg, $min, $sec, $dir);\n</code></pre>\n\n<p>Like it or not, Unicode is the future.</p>\n"}], "owner": {"reputation": 64, "user_id": 2984638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b09a30c931f7ad5eeaa5a3fe5d2becb?s=128&d=identicon&r=PG", "display_name": "perlboy", "link": "https://stackoverflow.com/users/2984638/perlboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 48535957, "answer_count": 2, "score": 2, "last_activity_date": 1517535292, "creation_date": 1517375466, "last_edit_date": 1517380897, "question_id": 48534863, "link": "https://stackoverflow.com/questions/48534863/splitting-a-string-containing-a-longitude-or-latitude-expression-in-perl", "title": "Splitting a string containing a longitude or latitude expression in perl", "body": "<p>I retrieve data from the net containing real geodesic expressions, by that I mean degrees, minutes and seconds with Unicode symbols: <code>U+00B0, U+2032 and U+2033</code>, named Degree, Prime and Double Prime. Example:</p>\n\n<pre><code>my $Lat = \"48\u00b0 25\u2032 43\u2033 N\";\n</code></pre>\n\n<p>My objective is to convert such an expression first to degrees and then to radians to be used in a Perl module I am writing that implements the Vincenty inverse formula to calculate ellipsoidal great-circle distances. All my code objectives have been met with pseudo geodesics, such as \"48:25:43 N\", but of course, this is hand entered test data, not real world data. I am struggling with crafting a regular expression that can split this real data as I now do pseudo data, as in:</p>\n\n<pre><code>my ($deg, $min, $sec, $dir) = split(/[\\s:]+/, $_[0], 4); # this works\n</code></pre>\n\n<p>I have tried many regular expressions including </p>\n\n<pre><code>/[\u00b0\u2032\u2033\\s]+/ and\n/[\\x{0B00}\\x{2032}\\x{2033}\\s]/+\n</code></pre>\n\n<p>all with dismal results, such as <code>$deg = \"48?\", $min = \"?\", $sec = \"25\u203243\u2033 N\" and $dir = undef</code>. I've encapsulated the code inside braces <code>{}</code> and included within that scope use utf8; and use feature 'unicode_strings'; all with nada results.</p>\n\n<p><strong>input data example:</strong> </p>\n\n<pre><code>my $Lat = \"48\u00b0 25\u2032 43\u2033 N\"; \n</code></pre>\n\n<p><strong>Expected output:</strong></p>\n\n<pre><code>$deg = 48, $min = 25, $sec = 43 and $dir = \"N\"\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517374969, "post_id": 48533807, "comment_id": 84064890, "body": "So, your code does not compile...I suspect it is a snippet of a larger file.  Anyway, you need to declare <code>my @chain_id</code> and <code>my @res_id</code> somewhere, and change <code>my $counts = ()</code> to <code>my %counts = ()</code>."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517375006, "post_id": 48533807, "comment_id": 84064905, "body": "You should edit (and test) that the code you provide to SO can at least be run by copying and pasting...it makes it easier to help you."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517376216, "post_id": 48533807, "comment_id": 84065328, "body": "The fix is to move a set of parens...which perl would have told you about through all of its warnings like <code>Use of uninitialized value $number in hash element at foo.pl line 50, &lt;$_[...]&gt; line 9.</code>  Never ignore warnings...they often mean you have overlooked something important."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517379579, "post_id": 48533807, "comment_id": 84066603, "body": "@xxfelixxx I have declared all the variables and changed <code>%counts</code> and it still gives me two warnings: <code>Use of uninitialized value within %count1 in numeric gt (&gt;) at ..</code> and <code>Use of uninitialized value within %count in numeric gt (&gt;) at ..</code> but isnt that initialized previously? And also although it is a warning shouldnt it be able to print something or create new documents anyway?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517380517, "post_id": 48533807, "comment_id": 84066972, "body": "Should the first output file A have 5 lines in it?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517381197, "post_id": 48533807, "comment_id": 84067237, "body": "No, because both conditions has to be fulfilled and since in the last two lines from the example last column numbers are not the same: <code>156</code>and <code>159</code> these lines shouldnt be included."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517381364, "post_id": 48533807, "comment_id": 84067318, "body": "Having variables named $count, $count1, $number, $number1 is confusing, better variable names goes a long way towards readability (and maintainability)"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517398821, "post_id": 48533807, "comment_id": 84077667, "body": "@xxfelixxx I agree with You but this is not direct problem why script is not printing anything. I appreciate Your answer but I would rather like to know what seems to be wrong with my script and what is direct cause of making it not working. This is just part of the script that I wrote so I think I cannot include Your answer into my script. Seems like that the problem is that some variables are not initialized although they are.."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517400110, "post_id": 48533807, "comment_id": 84078389, "body": "run the code through the debugger and see what everything is set to, you will see.  <code>perl -d foo.pl</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517400390, "post_id": 48533807, "comment_id": 84078532, "body": "type &#39;h&#39; for help.  &#39;s&#39; to step through the code one line at a time.  &#39;p $foo&#39; to print the value of $foo.  &#39;w $foo&#39; to show everytime $foo changes value."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517400511, "post_id": 48533807, "comment_id": 84078605, "body": "Also, your <code>my</code> variables lose their values when they go out of scope, i.e. their enclosing block <code>{</code> .. <code>}</code>, so your code isn&#39;t logically structured correctly."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517400605, "post_id": 48533807, "comment_id": 84078666, "body": "For example:  <code>for my $foo (@bar) {  $baz = $foo; # OK } my $qux = $foo; # $foo has gone out of scope</code>"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517480505, "post_id": 48533807, "comment_id": 84116163, "body": "@xxfelixxx Yes I know but cant see which variable is out of scope when I declared everything once..all of them should be defined.. I tried to use Your script and to change mine but I get this error <code>Name &quot;main::LIG&quot; used only once: possible typo at example.pl line 27.</code>and nothing printed, no output.."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517481238, "post_id": 48533807, "comment_id": 84116707, "body": "You sure you pasted correctly? There is no LIG anywhere in the script..."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517537562, "post_id": 48533807, "comment_id": 84146128, "body": "@xxfelixxx Yeah I used your script and modified it or added to it my part of the script. It looks reasonable but it dont print anything, no syntax errors or anything just give me a warning that I posted in a previous comment. Do You mind if I edit the script from the question and post full code?..since only You have put some comments and answer it shouldnt make any impact on others."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517537664, "post_id": 48533807, "comment_id": 84146153, "body": "Go for it......."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517537729, "post_id": 48533807, "comment_id": 84146168, "body": "@xxfelixxx Thanks."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517538530, "post_id": 48533807, "comment_id": 84146325, "body": "@xxfelixxx I have edited it in a way of putting one more condition (matching two files) but I really dont understand how <code>$ligands_pdb</code> is uninitialized when it should be defined. I was always getting confused about this warning. Been writing this code in a while now and I really dont know how to change it anymore.."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517539765, "post_id": 48533807, "comment_id": 84146634, "body": "A few issues...The first is that your <code>@lig</code> probably has newlines in it, so your <code>$flag</code> might not be set correctly.  You can use the <code>chomp</code> command to get rid of them for you.  You can use a ternary operator to simplify your <code>if&#47;else -&gt; 0&#47;1</code> by doing `$flag = ( $foo =~ m|bar| ) ? 1 : 0;"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517539889, "post_id": 48533807, "comment_id": 84146665, "body": "You have 2 variables, named <code>$foo</code> and <code>@foo</code>.  This gets very confusing quickly. ( ligands_pdb in your case )  Especially because often you will see <code>$foo[123]</code> which is referring to <code>@foo</code> not <code>$foo</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517539970, "post_id": 48533807, "comment_id": 84146689, "body": "Instead of using <code>@lig</code> and iterating over it each time, you should just create a hash and check if that hash key is defined to set your flag.  Remembering to get rid of the newlines first."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540227, "post_id": 48533807, "comment_id": 84146739, "body": "Your $ligands_pdb is uninitialized because you never set it to anything...you probably confused it with @ligands_pdb."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540518, "post_id": 48533807, "comment_id": 84146809, "body": "Yeah I can use chomp when reading a file into an array. Oh I see why it is confusing with <code>@&#47;$ligands_pdb</code> but if I use only one then it says that the other one is not declared..that&#39;s why I am declaring either scalar and array. Hm, I am not that experienced with using hashes, been using them few times, thats why I took this approach. I can create hash and set up the keys to be elements from <code>@ligands_pdb</code> but I am not sure how I can compare hash keys and elements from <code>@lig</code>array.."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540640, "post_id": 48533807, "comment_id": 84146838, "body": "But that is what I don&#39;t understand..if I define <code>@ligands_pdb</code> why I have to define <code>$ligands_pdb</code> when it should as a scalar correspond to each element from <code>@ligands_pdb</code> and then when I declare it it says that it is uninitialized, whole thing gets me confusing :P"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540680, "post_id": 48533807, "comment_id": 84146844, "body": "perl doesn&#39;t work that way, they are considered different variables entirely, that happen to have a similar name."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540722, "post_id": 48533807, "comment_id": 84146855, "body": "if you want each element of <code>@foo</code> you just do <code>for my $elem (@foo) { ... do something with $elem }</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540850, "post_id": 48533807, "comment_id": 84146879, "body": "To create a hash, you can just iterate over a file and set keys as you go: <code>my %lig_hash; for my $line (&lt;LIG&gt;) { chomp($line); $lig_hash{ $line }++; }</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540902, "post_id": 48533807, "comment_id": 84146890, "body": "And then later, you can check for the existance of keys:   <code>$flag = defined $lig_hash{ &#39;some_key&#39; } ? 1 : 0;</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540962, "post_id": 48533807, "comment_id": 84146901, "body": "Notice that for a hash, <code>%foo</code>, accessing an element changes the sigil to a <code>$</code>, like <code>my $value = $foo{ &#39;some_key&#39; }</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517540988, "post_id": 48533807, "comment_id": 84146907, "body": "Similarly for arrays, <code>@foo</code>, accessing one element becomes <code>$foo[2]</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517541026, "post_id": 48533807, "comment_id": 84146915, "body": "This is because perl was written by a Linguist, and <code>$</code> denotes a scalar, i.e. one of something, while <code>@</code> and <code>%</code> are in some sense plural."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517541105, "post_id": 48533807, "comment_id": 84146924, "body": "A read of <code>perldoc perltrap</code> may be useful depending on your programming background.  <a href=\"https://perldoc.perl.org/perltrap.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perltrap.html</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517541218, "post_id": 48533807, "comment_id": 84146949, "body": "There is also the <code>perlcritic</code> tool you can use to get feedback and improve your code from the command line.  It will make suggestions on improving what you have.  <a href=\"http://search.cpan.org/~petdance/Perl-Critic-1.130/lib/Perl/Critic.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~petdance/Perl-Critic-1.130/lib/Perl/Critic.&zwnj;&#8203;pm</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517541382, "post_id": 48533807, "comment_id": 84146991, "body": "Also, you should change the <code>LIG</code> filehandle to <code>$LIG</code> and declare it with <code>my</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517541419, "post_id": 48533807, "comment_id": 84147000, "body": "The style of using bare filehandles has long been deprecated (and can cause bugs because they are global)."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517551357, "post_id": 48533807, "comment_id": 84149569, "body": "@xxfelixxx Hm I see, I changed it but it is quite since I almost never use hashes it is quite confusing by looking at the comments for me to know where exactly I should put these hashes. I understand that I can put all all elements from a file lines into a hash <code>lig_hash</code> and if I want to assess elements from specific column I just do <code>for my $ligands_pdb {keys %$lig_hash}</code> but still i get confused with hashes keys when I have to compare it with the elements from <code>@ion</code> array..and I am not sure how to put these elements in the filenames if they are matched."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517551461, "post_id": 48533807, "comment_id": 84149603, "body": "@xxfelixxx Yes, I agree that perldoc <code>perl trap and perlcritic</code> might be useful for me. Cant You just edited Your previous answer if u have time at one moment cause it is very confusing for me when I look at the comments about the changes that I have to made."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517648071, "post_id": 48533807, "comment_id": 84188148, "body": "I updated the answer, try now."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517815644, "post_id": 48536497, "comment_id": 84231754, "body": "I tried updated version it is working well apart from one thing. I have ran it ot the larger dataset and for instance if under <code>4th column</code> where <code>HEM</code> is matched, <code>HEM (the one that is follwed by B)</code> there is some other molecule that is matched <code>IGP (for example)</code>. What happens is that script first searches for 1st condition and it finds first <code>HEM and IGP</code> and it automatically generates 4 files <code>(HEM#A#142, HEM#B#147, IGP#A#142,IGP#B#147)</code> instead of two <code>(HEM#A#142, IGP#B#147)</code>. So, each file should be unique and values of last two col shouldnr repeate"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517815871, "post_id": 48536497, "comment_id": 84231833, "body": "I am really sorry because the data is so diverse and I have gave bad example with <code>HEM</code>. If it does not requires very big changes in the script I would really appreciate your help. Sorry once again."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517820795, "post_id": 48536497, "comment_id": 84233926, "body": "So what would go into IGG#B#142 would go into HEM#A#142 if that file exists already?  i.e. first file with B#142 combo gets all further B#142 lines?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517824958, "post_id": 48536497, "comment_id": 84236426, "body": "IGP#B#142 should not exist.. so if u just from the input file change all <code>HEM (that is followed by B)</code> with <code>IGP</code> and run the script it creates 4 files that I have mention in previous comment and it should create only two files that I mention. The content of these two files will be the same as the output of your script from the updated answer just second file will have the name  <code>IGP#B#147.txt</code> and the content of this file will be the same as the output of your script."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517825163, "post_id": 48536497, "comment_id": 84236540, "body": "So the thing is that if first condition or <code>HEM</code> is matched then print those lines that fulfil second condition but as long as <code>HEM</code> appears in <code>4th column</code>. The same for <code>IGP</code>. So for example file <code>IGP#A#142</code> should not exist because there is not <code>IGP</code> that is followed bt #A#142."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517897578, "post_id": 48536497, "comment_id": 84269600, "body": "Updated.  You should really read through and see that you understand every line."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517909117, "post_id": 48536497, "comment_id": 84275327, "body": "Thanks man. When I run it it gives me this error: <code>Array found where operator expected at debug.pl line 74, at end of line \t(Do you need to predeclare uniq?) syntax error at debug.pl line 74, near &quot;uniq @lines&quot;</code>. You don&#39;t receive it? And one more file should exist <code>IGP#B#147</code> with last two lines in it. So, whenever it fulfils first condition that should me indication to create new file and content of each file should have unique last two columns, so either <code>A</code> and <code>142</code> or <code>B</code> and <code>147</code>."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517909557, "post_id": 48536497, "comment_id": 84275649, "body": "Sorry, mispasted... add <code>use List::Util qw( uniq );</code> to the top of the file."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517909745, "post_id": 48536497, "comment_id": 84275780, "body": "Before you didn&#39;t want any IGP files, now you do?  Go through the file and try to understand the logic at each step, and see that it agrees with what you are trying to do."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517909924, "post_id": 48536497, "comment_id": 84275910, "body": "Yes, I did, take a look at two comments above. I will go trough script now :)"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517910437, "post_id": 48536497, "comment_id": 84276259, "body": "When I change it and run it it says : <code>&quot;uniq&quot; is not exported by the List::Util module</code> and <code>Can&#39;t continue after import errors at debug.pl line 7</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517910552, "post_id": 48536497, "comment_id": 84276363, "body": "Maybe you have an older version...try <code>use List::MoreUtils qw( uniq )</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517910611, "post_id": 48536497, "comment_id": 84276408, "body": "It is definitely in the current version: <a href=\"http://search.cpan.org/~pevans/Scalar-List-Utils-1.49/lib/List/Util.pm#uniq\" rel=\"nofollow noreferrer\">search.cpan.org/~pevans/Scalar-List-Utils-1.49/lib/List/&hellip;</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517910792, "post_id": 48536497, "comment_id": 84276537, "body": "By the way...your deeply nested code inspired me to write a perl package:  <code>Devel::Scope</code> which has a <code>debug</code> method that you can adjust its verbosity by indent (scope) levels."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517910869, "post_id": 48536497, "comment_id": 84276600, "body": "You can try it out by running: <code>sudo cpan Devel::Scope</code>"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517911309, "post_id": 48536497, "comment_id": 84276917, "body": "It is running now without errors, I will go trough script to see do I understand all of it..but have to check it because from output that u updated <code>IGP#B#147</code> should be another file and it should have content of <code>ATM 4433  CHC IGP B 147 ATM 4434  CHD IGP B 147</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517911369, "post_id": 48536497, "comment_id": 84276951, "body": "ok, but you are contradicting your earlier statements that they should all go into the HEM file...anyway, you have enough to work with to make it do what you want."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517911383, "post_id": 48536497, "comment_id": 84276965, "body": "You already helped me alot and I appreciate it all the way, I just want to get this step correctly done :)"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517911489, "post_id": 48536497, "comment_id": 84277038, "body": "Just look at the comment where I wrote yesterday that file <code>IGP#B#147.txt</code> should also be generated, which actually makes a problem for me"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517912292, "post_id": 48536497, "comment_id": 84277577, "body": "I have installed package you wrote :)"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517917441, "post_id": 48536497, "comment_id": 84280990, "body": "I went trough the script and most of it I understand well clearly.. it just has to be opposite that file creates whenever it differsin <code>4th column</code> but I dont know how to change it cus im bad with this style..You have already helped me alot and I appreciate it, but I cannot use this code then.. in the previous few comments from yesterday u can see that I have mention how to change it and which files should be created.."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517969555, "post_id": 48536497, "comment_id": 84307937, "body": "Are you online now?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517969854, "post_id": 48536497, "comment_id": 84308011, "body": "Yes, I am online now :)"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517970434, "post_id": 48536497, "comment_id": 84308139, "body": "I will show you how to figure this out.  I have an EC2 instance we can use, I will give you access, send me your public key and ip address to felixtubiana@gmail.com"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517971021, "post_id": 48536497, "comment_id": 84308245, "body": "I have installed tmux, so we can both type, and you can see what is going on."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517971301, "post_id": 48536497, "comment_id": 84308317, "body": "how can I assess my public key in linux? Good I have jsut made an account in gist.github"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517971870, "post_id": 48536497, "comment_id": 84308451, "body": "Go to your ~/.ssh directory"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517971963, "post_id": 48536497, "comment_id": 84308477, "body": "Create a new ssh key by running <code>ssh-keygen -t rsa</code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517972036, "post_id": 48536497, "comment_id": 84308493, "body": "I need the <code>.pub</code> key, say <code>sergio.pub</code>.  Then when you ssh you will do: <code>ssh -i ~&#47;.ssh&#47;sergio    user@hostname</code>"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517972051, "post_id": 48536497, "comment_id": 84308499, "body": "Yes, I just checked, I will have to create a new public key, just give me few min  and I am sending u email :)"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517974840, "post_id": 48536497, "comment_id": 84309119, "body": "I have sent u an email. Can u add me on github, my repository name is sergio"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517975602, "post_id": 48536497, "comment_id": 84309314, "body": "github.com/srdjanma/sergio"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517977611, "post_id": 48536497, "comment_id": 84309799, "body": "Have u found me?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517977716, "post_id": 48536497, "comment_id": 84309831, "body": "Yes, I found you.  You still need to send me your public key."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517979973, "post_id": 48536497, "comment_id": 84310451, "body": "I have sent u an email. Check."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517980151, "post_id": 48536497, "comment_id": 84310494, "body": "Need new public key."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517981203, "post_id": 48536497, "comment_id": 84310826, "body": "I am sending in 2 min"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517981737, "post_id": 48536497, "comment_id": 84311000, "body": "One more time please."}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517982076, "post_id": 48536497, "comment_id": 84311099, "body": "Yes and I have sent you again files after comment &quot;One more time please&quot;"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517983463, "post_id": 48536497, "comment_id": 84311587, "body": "are you having trouble logging in?"}, {"owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517984949, "post_id": 48536497, "comment_id": 84312201, "body": "hm I have because when I open the link u sent it opens me an email and to write a new mail"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517985132, "post_id": 48536497, "comment_id": 84312275, "body": "Run: <code>ssh -i sergio_new_key  -oServerAliveInterval=60 ec2-user@ec2-13-250-24-105.ap-southeast-1.compute.amazonaws.&zwnj;&#8203;com </code>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "edited": false, "score": 0, "creation_date": 1517985167, "post_id": 48536497, "comment_id": 84312293, "body": "After you login, run: <code>tmux attach -t sergio</code>"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1517909620, "last_edit_date": 1517909620, "creation_date": 1517382705, "answer_id": 48536497, "question_id": 48533807, "link": "https://stackoverflow.com/questions/48533807/printing-whole-lines-that-fulfill-specific-condition-into-a-different-files/48536497#48536497", "title": "Printing whole lines that fulfill specific condition into a different files", "body": "<p>I would rewrite your code using a nested hash to store the file lines, keyed off of the 2 fields.  If there are multiple lines stored, save to a new file.  I have added some debugging so you can see the flow.</p>\n\n<p><strong>filter.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse autodie;\nuse 5.010;\n\nuse List::Util qw( uniq );\n\nmy $DEBUG = 1;\nsub debug {\n    my ($msg) = @_;\n    print \"DEBUG: $msg\\n\" if $DEBUG;\n}\n\nmy $ligand_file = 'ligands.txt';\nopen( my $LIG, $ligand_file ) or die \"Cannot open $ligand_file, $!\";\ndebug(\"Reading ligands file: $ligand_file\");\nmy %ligands_hash;\nfor my $ligand ( &lt;$LIG&gt; ) {\n    chomp( $ligand ); # Remove trailing newline\n    $ligands_hash{ $ligand } = 1;\n}\nclose $LIG;\ndebug(\"Found ligands: \" . join(',',sort keys %ligands_hash));\n\nmy %output_files;\nmy $flag = 0;\nfor my $pdb ( glob '*pdb' ) {\n\n    my %ligands_found;\n    my $data_hash_ref;\n\n    debug(\"-\"x40);\n    debug(\"Working on file $pdb\");\n    open my $fh, \"&lt;\", $pdb;\n    for my $line (&lt;$fh&gt;) {\n        chomp($line);\n        if ( $line =~ m/^ATM / ) {\n            $line =~ s|\\s*$||;\n            debug(\"--&gt; Found an ATM line\");\n            my @cols = split ' ', $line;\n            my ( $ligand, $chain_id, $res_no ) = ( $cols[3], $cols[4], $cols[5] );\n            debug(\"--&gt; Adding ligand $ligand to ligands_found hash\");\n           $ligands_found{ $ligand }++;\n\n            defined $res_no\n              or die \"Unable to grok line: $line\";\n\n            # This works because perl automatically creates the missing\n            # parts of nested hash (this is known as Autovivication).\n            # The last part, the array is also created by the attempt\n            # to push onto it, so perl assumes it should exist.\n            push @{ $data_hash_ref-&gt;{$chain_id}-&gt;{$res_no} }, $line;\n        }\n    }\n\n    debug(\"Processing ligands\");\n    for my $ligand (sort keys %ligands_found) {\n        $flag = defined $ligands_hash{$ligand} ? 0 : 1;\n        debug(\"--&gt; Ligand $ligand, flag = $flag\");\n\n        for my $chain_id ( keys %$data_hash_ref ) {\n            for my $res_no ( keys %{ $data_hash_ref-&gt;{$chain_id} } ) {\n                debug(\"------&gt; Chain Id = $chain_id, Res No = $res_no\");\n                my @lines = @{ $data_hash_ref-&gt;{$chain_id}-&gt;{$res_no} };\n                if ( $flag == 0 and scalar @lines &gt; 1 ) {\n\n                    # Output filename based on first ligand with $chain_id and $res_no combo\n                    my $id = join ':', $chain_id, $res_no;\n                    my $outfile = $output_files{$id} ||= join( '#', $ligand, $chain_id, $res_no ) . '.txt';\n                    my $nl = (scalar @lines);\n                    my $nl_desc = \"$nl line\" . ($nl &gt; 1 ? \"s\" : \"\");\n                    debug(\"------&gt; Appending $nl_desc to $outfile\");\n                    open my $out, \"&gt;&gt; $outfile\";\n                    print $out \"$_\\n\" for (uniq @lines);\n                    close $out;\n\n                    # Remove the lines so they don't get printed twice.\n                    undef @{ $data_hash_ref-&gt;{$chain_id}-&gt;{$res_no} };\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>intput.pdb</strong></p>\n\n<pre><code>ATM 4387 FE   HEM A 142       \nATM 4388  CHA HEM A 142      \nATM 4389  CHB HEM A 142      \nATM 4431  CHA HEM B 147     \nATM 4432  CHB HEM B 147     \nATM 4433  CHC IGP B 147     \nATM 4434  CHD IGP B 147     \nATM 4559  O   HOH A 156     \nATM 4560  O   HOH A 159\n</code></pre>\n\n<p><strong>HEM#A#142.txt</strong></p>\n\n<pre><code>ATM 4387 FE   HEM A 142\nATM 4388  CHA HEM A 142\nATM 4389  CHB HEM A 142\n</code></pre>\n\n<p><strong>HEM#B#147.txt</strong></p>\n\n<pre><code>ATM 4431  CHA HEM B 147\nATM 4432  CHB HEM B 147\nATM 4433  CHC IGP B 147\nATM 4434  CHD IGP B 147\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8968797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d8df1da3578402d9557c974ec40e76a?s=128&d=identicon&r=PG", "display_name": "sergio", "link": "https://stackoverflow.com/users/8968797/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 2, "accepted_answer_id": 48536497, "answer_count": 1, "score": 0, "last_activity_date": 1517909620, "creation_date": 1517367881, "last_edit_date": 1517538682, "question_id": 48533807, "link": "https://stackoverflow.com/questions/48533807/printing-whole-lines-that-fulfill-specific-condition-into-a-different-files", "title": "Printing whole lines that fulfill specific condition into a different files", "body": "<p>I am trying to count the number of how many times same element repeats in an array and if it repeats more time then I want to print whole lines into a different files.</p>\n\n<p>My input:</p>\n\n<pre><code>ATM 4387 FE   HEM A 142       \nATM 4388  CHA HEM A 142      \nATM 4389  CHB HEM A 142      \nATM 4431  CHA HEM B 147     \nATM 4432  CHB HEM B 147     \nATM 4433  CHC HEM B 147     \nATM 4434  CHD HEM B 147     \nATM 4559  O   HOH A 156     \nATM 4560  O   HOH A 159\n</code></pre>\n\n<p>So I am putting elements <code>[3]</code>, <code>[4]</code> and <code>[5]</code> into a seperate arrays, counting the number of its appearance and setting up conditions that if it appears <code>&gt;1</code> then printing them into a seperate files. Another part of the script is matching elemets from array <code>@lig</code> (<code>ligands.txt file</code>) and elements from <code>@ligands_pdb</code> array. and if it appears to match then then element from <code>@ligands_pdb</code> should also be included into a filename.</p>\n\n<p>My <code>@lig</code> array looks like this:</p>\n\n<pre><code>HEC\nHEM\nHEP\nIGP\nIPM\nLLP\n</code></pre>\n\n<p>So since <code>HEM</code> is matching then this should also be included into a filename.\nCurrent error I am getting is <code>Use of uninitialized value $ligands_pdb in concatenation (.) or string at example.pl line 58, &lt;$_[...]&gt; line 5436.</code></p>\n\n<pre><code>  #! usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse autodie;\nuse 5.010;\nuse Data::Dumper;\n\nmy $data;\nmy $ligands_pdb;\nmy @ligands_pdb;\n\nmy $ligand_file = 'ligands.txt';\nopen (LIG, $ligand_file)or die \"Cannot open $ligand_file, $!\";\nmy @lig= &lt;LIG&gt;;\nclose LIG;\n#print \"@lig\\n\";\nmy $flag = 0;\nfor my $pdb ( glob '*pdb' ) \n{\n    #printf \"# %s\\n\", $pdb;\n    open my $fh, \"&lt;\", $pdb;\n    for my $line ( &lt;$fh&gt; ) \n{\n        chomp( $line );\n    if ( $line =~ m/^ATM / ) \n    {\n        my @cols = split ' ', $line;\n        #print @cols;\n        #print \"$cols[3]\\n\";\n        push @ligands_pdb, $cols[3];\n        my ($chain_id, $res_no) = ( $cols[4], $cols[5] );\n            defined $res_no\n            or die \"Unable to grok line: $line\";\n            push @{ $data-&gt;{$chain_id}-&gt;{$res_no} }, $line;\n     }\n\n    foreach (@ligands_pdb)\n    {\n        if (\"@lig\" =~/$_/ )\n        {\n            $flag = 0;\n        }\n        else\n        {\n            $flag = 1;\n        }\n     for my $chain_id ( keys %$data ) \n    {\n        for my $res_no ( keys %{ $data-&gt;{$chain_id} } ) \n        {\n        #print \"$chain_id\\n\";\n        #print \"$res_no\\n\";\n        my @lines = @{ $data-&gt;{$chain_id}-&gt;{$res_no} };\n                if ( $flag ==0 and scalar @lines &gt; 1 ) \n        {\n                    open my $out, \"&gt;&gt; $ligands_pdb . '#' . $chain_id . '#' . $res_no . '.txt';\";    #line 58\n                    print $out $_ for (@lines);\n                    close $out;\n        }\n        @ligands_pdb = ();\n        }\n    }\n    }\n}\n}\n</code></pre>\n\n<p>I am expecting to have created 2 files and that content of them is:</p>\n\n<pre><code>HEM#A#142:\n\nATM 4387 FE   HEM A 142       \nATM 4388  CHA HEM A 142      \nATM 4389  CHB HEM A 142\n\nHEM#B#147:\n\nATM 4431  CHA HEM B 147     \nATM 4432  CHB HEM B 147     \nATM 4433  CHC HEM B 147     \nATM 4434  CHD HEM B 147\n</code></pre>\n"}, {"tags": ["regex", "perl", "curl"], "comments": [{"owner": {"reputation": 64787, "user_id": 892493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxAIF.png?s=128&g=1", "display_name": "drew010", "link": "https://stackoverflow.com/users/892493/drew010"}, "edited": false, "score": 1, "creation_date": 1517366428, "post_id": 48533567, "comment_id": 84062847, "body": "Not sure if it&#39;s any less ridiculous, but here&#39;s an alternate (that&#39;s probably far from optimal).  <code>curl -vs https:&#47;&#47;support.microsoft.com&#47;en-us&#47;help&#47;971058&#47;how-do-i-res&zwnj;&#8203;et-windows-update-co&zwnj;&#8203;mponents 2&gt;&amp;1 | grep -Po &#39;regsvr32.exe (.*?\\.dll)&#39; | cut -d &#39; &#39; -f 2</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517376693, "post_id": 48533567, "comment_id": 84065481, "body": "You are trying to parse a messy HTML with a simple regex in a one-liner.  Why not a nice little script with, say,  <a href=\"http://search.cpan.org/~kentnl/HTML-Tree-5.07/lib/HTML/TreeBuilder.pm\" rel=\"nofollow noreferrer\">HTML::TreeBuilder</a>? It&#39;ll be a breeze. Btw, you didn&#39;t really state exactly what you are &quot;<i>interested in</i>&quot; -- the &quot;<i>looks like this</i>&quot; didn&#39;t clear it up for me."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517420400, "post_id": 48533567, "comment_id": 84092422, "body": "@zdim Basically a no-fuss, easy solution.  I tried to clarify my question a bit.  I tend to switch to C# or C++ once the problem gets into script territory, just because I&#39;m so much more comfortable with those languages."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517423668, "post_id": 48533567, "comment_id": 84094232, "body": "Sure, and given what the goal is (good edit, thank you) that <i>is</i> indeed doable nicely, as in the answer.  But recall that some kinds of jobs, like parsing (X)HTML, are incomparably simpler with a script than with C++ (which I like and use -- not complaining about the language), because of all those excellent modules."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517424429, "post_id": 48533567, "comment_id": 84094650, "body": "@zdim - C# has pretty extensive support for this stuff built-in, but I suspect perl or python make it easier.  (and of course don&#39;t require an explicit compile step).  Python&#39;s already used a little bit where I work (and tends to be present on Windows machines), but perl solves sooo many of my little problems, I&#39;m torn on which one to learn.  So I&#39;m crappy at both :)"}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1517420065, "post_id": 48537453, "comment_id": 84092239, "body": "Absolutely perfect.  The disadvantage of not really using perl for scripting is it&#39;s harder to learn efficient tricks like this...because of course, I don&#39;t really know perl.  So this answer is a gold mine.  I noticed if I added additional capture groups, everything gets printed.  Fantastic.  I don&#39;t suppose there&#39;s an easy way to structure the output from a loop like this?  For example one could do <code>print &quot;$2 $1&quot;</code> with the output from a <i>single</i> two capture-group match."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1517449213, "last_edit_date": 1517449213, "creation_date": 1517386465, "answer_id": 48537453, "question_id": 48533567, "link": "https://stackoverflow.com/questions/48533567/processing-curl-output-in-perl/48537453#48537453", "title": "Processing curl output in perl", "body": "<p>There is no need to split on <code>&lt;li&gt;</code> elements or use a parser (you don't care about the structure of the document), so you can just search for the <code>regsvr32.exe</code> string up to the next <code>&lt;</code> character.</p>\n\n<pre><code>curl $msft_url | perl -lane 'print for ( m|regsvr32.exe (.+?.dll)&lt;|g );'\n</code></pre>\n\n<p>To handle more than one capture, you will need an extra <code>while</code> loop to iterate over the pairs of matches.  The <code>shift</code> command pulls the first element off of an array, the <code>reverse</code> command reverses an array.  This captures 2 strings and prints them in reverse order:</p>\n\n<pre><code>curl $msft_url | perl -lane '@m = m|(regsvr32).exe (.+?.dll)&lt;|g; while (@m) { print join \" \", reverse(shift @m, shift @m) };'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517444470, "post_id": 48551902, "comment_id": 84103516, "body": "@zdim - I went into this incorrectly thinking <code>-F</code> was a more powerful way of doing the same thing.  And while <code>| perl -0x3c -ne &#39;print &quot;$1\\n&quot; if &#47;regsvr32.exe (.+?\\.dll)&#47;&#39;</code> does the trick...ugggh, that feels a little too disrespectful of html even for me.  Somehow splitting on <code>&lt;&#47;li&gt;</code> seems....somewhat reasonable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517446278, "post_id": 48551902, "comment_id": 84103911, "body": "OK, clear now :)  I cleaned up my comments which were out of place after edit."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517446546, "post_id": 48551902, "comment_id": 84103972, "body": "@zdim does the row/column thing make sense too?  If it wasn&#39;t making sense to you, I&#39;m not sure it&#39;s going to help someone who doesn&#39;t understand how <code>-F</code> and <code>-0</code> behave (like I didn&#39;t).  I wonder if a tiny, simple example of what I mean would be helpful...or out of place?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517455594, "post_id": 48551902, "comment_id": 84105979, "body": "When you say &quot;column&quot; I think of splitting each line of data into chunks so those lines up into &quot;column&quot;s. Which is what <code>-F</code> does so that seemed OK to me.  But a &quot;row&quot; to me means a line of data ... so I don&#39;t see how that relates to <code>-0</code>, which returns the whole file. Even if you think of that file being broken up by <code>&lt;</code> I still don&#39;t see &quot;row&quot;s there.  My thinking. An example is always good, I think. (If you wish to get across how you view it in terms of rows and columns -- which isn&#39;t necessary here. It&#39;s fine already that you showed how to do it with <code>-F</code>.)"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517461977, "post_id": 48551902, "comment_id": 84107600, "body": "@zdim - Well, like for example if you pipe the output of <code>find -print0</code> to perl and you&#39;re parsing that output, not the files themselves.. <code>-0</code> or explicitly <code>-0x0</code> properly separate each file/dir into its own perl record (which would&#39;ve been a row with just <code>find</code>).  Might actually be worth one of those dumb posts where you answer your own question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517594418, "post_id": 48551902, "comment_id": 84173924, "body": "OK, I see what you mean -- but it still doesn&#39;t make me comfy with &quot;rows&quot;s :)  (But I am splitting hairs here :)"}], "tags": [], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1517445362, "last_edit_date": 1517445362, "creation_date": 1517434832, "answer_id": 48551902, "question_id": 48533567, "link": "https://stackoverflow.com/questions/48533567/processing-curl-output-in-perl/48551902#48551902", "title": "Processing curl output in perl", "body": "<p>I've discovered how to do the other method I was trying (sort of), which was to have perl do the splitting.  The key is that the <code>-a</code> and <code>-F</code> do not determine record-splitting behavior.  Only <code>-0</code> does.</p>\n\n<p><code>-a</code> splits <em>each</em> record (internally) into the @F array, which the documentation now seems <em>completely</em> clear on.  The @F array is mostly intended to be used <code>awk</code> style so that one can very easily say \"print the 2nd column\" (<code>$F[1]</code>).  So I could rephrase as \"<code>-0</code> is generally how you get rows and <code>-a</code> is generally how you get columns, roughly speaking.\"</p>\n\n<p>However, it can be made to serve the purpose:</p>\n\n<pre><code>curl -vs \\\nhttps://support.microsoft.com/en-us/help/971058/how-do-i-reset-windows-update-components 2&gt;&amp;1 \\\n| perl -F'&lt;\\/li&gt;' -lane 'foreach my $match (map { /regsvr32.exe (.+?.dll)/ } @F) {print\"$match\"}\n</code></pre>\n\n<p>I, for obvious reasons, prefer the accepted solution for this problem, but I could see this approach being handy elsewhere.\nPS--A <code>-0</code> solution (using records split on <code>&gt;</code>) is:</p>\n\n<pre><code>| perl -0x3c -ne 'print \"$1\\n\" if /regsvr32.exe (.+?\\.dll)/'\n</code></pre>\n"}], "owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 48537453, "answer_count": 2, "score": 3, "last_activity_date": 1517449213, "creation_date": 1517365928, "last_edit_date": 1517419512, "question_id": 48533567, "link": "https://stackoverflow.com/questions/48533567/processing-curl-output-in-perl", "title": "Processing curl output in perl", "body": "<p>I'm processing the output from <code>curl -s</code>.\nSpecifically from this page:  <a href=\"https://support.microsoft.com/en-us/help/971058/how-do-i-reset-windows-update-components\" rel=\"nofollow noreferrer\">https://support.microsoft.com/en-us/help/971058/how-do-i-reset-windows-update-components</a></p>\n\n<p>Before I state my goal, I'll mention I'm only interested in answers that extract the required data from the curl output of this page.  (I'm aware that the actions suggested on this page are already available as text, powershell scripts, etc.)</p>\n\n<p>The end goal is to get a list of the dlls.  It <em>was</em> to do it quickly without any fuss (so a one-liner), but it's now become a learning experience for me.  The basic regex is <code>/regsvr32.exe (.*?\\.dll)/</code>.  </p>\n\n<p>The curl output I'm interested in looks like this (note the lack of line breaks):</p>\n\n<p><code>&lt;li&gt;regsvr32.exe a.dll&lt;/li&gt;&lt;li&gt;regsvr32.exe b.dll&lt;/li&gt;</code>etc</p>\n\n<p>So I tried perl like the following:\n<code>perl -F\"li\" -lane 'print $1 if /regsvr32.exe (.*?\\.dll)/g'</code></p>\n\n<p>(The logic being I could split sloppily on any occurrence of \"li\" and should still get reasonable results I could fine-tune later)</p>\n\n<p>I could not get <code>-F</code> to work <em>at all</em>.  I tried single characters, I tried regexes like /PATTERN/, I tried omitting various other flags (particularly <code>-l</code>), I wrote a one-liner to show the splits.  I could not make a split occur.  </p>\n\n<p>Then I checked the curl man page to see if it had any output sanitizers that might help.  It's a looong man page, but I didn't see anything.  </p>\n\n<p>Then it occurred to me that it'd be nice if the perl I wrote worked regardless if the same regex matched multiple times on the same line.  But I couldn't find anything that would be reasonable for a one-liner.</p>\n\n<p>The sanest thing I could find to produce the desired output as a one-liner was this:</p>\n\n<pre><code>curl -vs \\\nhttps://support.microsoft.com/en-us/help/971058/how-do-i-reset-windows-update-components 2&gt;&amp;1 | \\\nperl -pe 's|&lt;/li&gt;|\\n|g' | \\\nperl -lne 'print $1 if /regsvr32.exe (.*?\\.dll)/'\n</code></pre>\n\n<p>Can anyone suggest something less ridiculous?  </p>\n\n<p>Also, I\u2019d love any explanation of Perl\u2019s -F argument that is more enlightening than perldoc perlrun. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1517349916, "post_id": 48531186, "comment_id": 84058065, "body": "Well, yes. Pipes only have a limited size. You need to read some of the data before more can be written."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517350142, "post_id": 48531186, "comment_id": 84058151, "body": "Is there a way to configure the size? I don&#39;t see anything on the documentation for pipe: <a href=\"http://perldoc.perl.org/functions/pipe.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/pipe.html</a>. Also, even if the pipe fills up, why can&#39;t the writing program just hang until it&#39;s emptied and then resume writing? What I&#39;ve seen is that it hangs forever, longer than it would take the reading process to process the data."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1517350283, "post_id": 48531186, "comment_id": 84058222, "body": "No, you can&#39;t configure the size. Where is the code that reads from the pipe? As far as I can see from your pseudocode, the parent process doesn&#39;t start reading until the child has exited."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517351009, "post_id": 48531186, "comment_id": 84058531, "body": "The code that reads from the pipe is in the lines beneath &quot;#process the data it got&quot;. I added some code explicitly to make it clearer."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517351073, "post_id": 48531186, "comment_id": 84058553, "body": "That code is never executed because the preceding loop doesn&#39;t stop."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517351216, "post_id": 48531186, "comment_id": 84058612, "body": "It stops once the child process exits."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517351304, "post_id": 48531186, "comment_id": 84058652, "body": "Your child process can&#39;t exit because it&#39;s not finished writing data to the pipe."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517351584, "post_id": 48531186, "comment_id": 84058768, "body": "Oh, if you&#39;re talking about the condition in which it crashes, then yes. That&#39;s exactly what&#39;s happening. Sometimes the child process finishes writing and it all works well, othertimes the parent process hangs in that loop, and the child process hangs writing. So I guess I can modify the process to read immediately. I didn&#39;t do it before because until you mentioned it, I had no idea pipes had a max size."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517351742, "post_id": 48531186, "comment_id": 84058824, "body": "I&#39;m still a bit nervous though because it seems like I could still hit some max pipe size limit if the parent runs &quot;too slowly.&quot;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1517351825, "post_id": 48531186, "comment_id": 84058863, "body": "There is no crash. If the parent runs too slowly, the child will block writing to the pipe until some data has been consumed by the parent and continue. If the child runs too slowly, the parent will block reading from the pipe until some data has been written to it by the child."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1517352072, "post_id": 48531186, "comment_id": 84058972, "body": "Oooh, I think I get it now. Sorry, I am new at this. So what was happening before is that the child blocked writing to the pipe, but the parent would never read until the child process exited. It basically deadlocked. As long as the parent is reading a little bit, it should be fine regardless of varying rates. That makes me feel better. Thanks for your help, I really appreciate it. :)"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517353140, "post_id": 48531186, "comment_id": 84059322, "body": "@zdim it&#39;s a good metaphor, but I didn&#39;t know newlines had a special status. I guess that&#39;s in the case where you have <code>$pipe-&gt;autoflush(1)</code> as in my example? What does that do exactly, and what happens if I have a single line that is larger than the max pipe size? // A separate question is, how do I ensure that my parent process doesn&#39;t block reading indefinitely once the child is done writing to the pipe? Will it simply notice that my child ran <code>close $pipe_writer</code> and avoid blocking?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517366013, "post_id": 48531186, "comment_id": 84062758, "body": "Change the order of waitpid and the pipe reading loop."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517379677, "post_id": 48531186, "comment_id": 84066648, "body": "@Stephen  A pipe is &quot;block buffered&quot; so stuff is there to read only once a block (4kB?) has been written or pipe got full (64kB?). In my tests I can only <i>count on</i> flushing at over 32kB and I&#39;d think that the block flushing isn&#39;t set in stone (may be about atomicity of writes or such). Regardless -- <code>autoflush</code> sets <a href=\"https://perldoc.perl.org/perlvar.html#%24|\" rel=\"nofollow noreferrer\"><code>$|</code></a> which &quot;<i>forces a flush right away and after every write or print on the currently selected output channel</i>&quot;.  So after <i>every</i> print from writer the other side can read."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517380280, "post_id": 48531186, "comment_id": 84066875, "body": "@Stephen If nobody is reading then the writer is going to get blocked once the pipe gets full. So if you print a 1Mb string those 64kB get &quot;in the pipe&quot; and it all stops; so such a print will hang -- until something starts reading on the other side. If there is a reader it will be getting 64kB chunks of that string in repeated reads.  Now, your parent can &quot;block reading&quot; only if there is nothing being written (or nothing flushed) while it&#39;s in <code>while (&lt;$rd&gt;)</code>. But while the child writes (and flushes) the parent reads; then the child closes and exits and all is well."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517381008, "post_id": 48531186, "comment_id": 84067152, "body": "@Stephen Finally, while your <code>waitpid</code> is non-blocking with <code>WNOHANG</code>, it is in a <code>while</code> loop which terminates only once (some) child exits. So the parent&#39;s spinning until a child exits and then it will start reading -- while the child is blocked after it filled the pipe, sitting at its <code>print { $self-&gt;{writer} } $data</code>. Precisely deadlocked as you said.  So move any <code>wait</code> you choose to use (like <code>waitpid</code>) after the pipe&#39;s been read."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517382750, "post_id": 48531186, "comment_id": 84067945, "body": "@Stephen As for wanting to do something while waiting, you can use <a href=\"https://perldoc.perl.org/functions/select.html\" rel=\"nofollow noreferrer\">select</a> or <a href=\"http://perldoc.perl.org/IO/Select.html\" rel=\"nofollow noreferrer\">IO::Select</a>. There are other, more low-level ways, to make pipe reads non-blocking."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517445221, "post_id": 48531186, "comment_id": 84103658, "body": "@zdim a thousand thanks for your generous help here. I have still more questions, but I have created new questions based on them: <a href=\"https://stackoverflow.com/questions/48553585/non-blocking-read-of-a-pipe-while-doing-other-things\" title=\"non blocking read of a pipe while doing other things\">stackoverflow.com/questions/48553585/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/48553644/several-questions-about-pipes\" title=\"several questions about pipes\">stackoverflow.com/questions/48553644/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517445435, "post_id": 48531186, "comment_id": 84103713, "body": "@Stephen I saw your questions :)  A much better way to deal with it than comments.  I may write something later, unless someone else covers it.  Will delete these extensive and excessive (and imprecise) comments in a few minutes."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1517445686, "post_id": 48531186, "comment_id": 84103773, "body": "Maybe you&#39;re referring to this: &quot;If there is a reader it will be getting 64kB chunks of that string in repeated reads.&quot; I imagine this is imprecise since it may be getting less than that depending on flushing."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517445881, "post_id": 48531186, "comment_id": 84103823, "body": "@Stephen  One thing that may not fit anywhere but that you may find useful, see <a href=\"https://stackoverflow.com/a/45387316/4653379\">this post</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517445968, "post_id": 48531186, "comment_id": 84103842, "body": "@Stephen No, I didn&#39;t mean that that there are errors (I don&#39;t know of any I mean:), just that it doesn&#39;t belong ... but I can surely leave it for as long as you wish.  At some point it should go away since now you&#39;ll have more carefully and precisely written answers."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1517604119, "post_id": 48531186, "comment_id": 84178357, "body": "Btw based on what I read here (<a href=\"https://stackoverflow.com/questions/48553644/several-questions-about-pipes/48554104#48554104\" title=\"several questions about pipes\">stackoverflow.com/questions/48553644/&hellip;</a>)  think this is misleading: &quot;A pipe is &quot;block buffered&quot; so stuff is there to read only once a block (4kB?) has been written or pipe got full (64kB?). In my tests I can only count on flushing at over 32kB and I&#39;d think that the block flushing isn&#39;t set in stone&quot; The pipe itself isn&#39;t block buffered, but rather writes <i>to</i> the pipe. Also it seems that whether the pipe is full or semi-full, if it&#39;s in the pipe it seems that it is available for reading."}], "answers": [{"tags": [], "owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "is_accepted": false, "score": 2, "last_activity_date": 1517549904, "creation_date": 1517549904, "answer_id": 48576320, "question_id": 48531186, "link": "https://stackoverflow.com/questions/48531186/process-hangs-when-writing-large-data-to-pipe/48576320#48576320", "title": "process hangs when writing large data to pipe", "body": "<p>You probably shouldn't be ignoring your pipe while it is returning data: you can use a <code>select</code> on the pipe (instead of <code>waitpid</code>) to see if there's any data to read during your waiting loop, but if you really want a larger pipe buffer so you can read it all at once, you can use a <code>socketpair</code> instead of a pipe and then you can use <code>setsockopt</code> to make the buffer as large as you need it.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1517549904, "creation_date": 1517349402, "last_edit_date": 1517351134, "question_id": 48531186, "link": "https://stackoverflow.com/questions/48531186/process-hangs-when-writing-large-data-to-pipe", "title": "process hangs when writing large data to pipe", "body": "<p>I have a problem with hung processes with my Perl program, and I think I have isolated it to whenever I write significant amounts of data to a pipe.</p>\n\n<p>Below is all of the code that I think is relevant from my program. When the program hangs, it hangs on the line in ResponseConstructor.pm: <code>print { $self-&gt;{writer} } $data;</code>. </p>\n\n<p>I've tested with different data sizes, and it doesn't appear to hang at an exact size. It may become more likely with size, though: sizes around 32KB sometimes work, sometimes don't. Every time I've tried a 110KB string it has failed. </p>\n\n<p>I believe I've also ruled out the <em>contents</em> of the data as a cause, because the same data sometimes causes a hang, and othertimes doesn't.</p>\n\n<p>This is probably the first time I have used pipes in a program before, so I'm not sure what to try next. Any ideas?</p>\n\n<pre><code>use POSIX \":sys_wait_h\";\nSTDOUT-&gt;autoflush(1);\n\npipe(my $pipe_reader, my $pipe_writer);\n$pipe_writer-&gt;autoflush(1);\nmy $pid = fork;\nif ($pid) {\n    #I am the parent\n    close $pipe_writer;\n    while (waitpid(-1, WNOHANG) &lt;= 0){\n        #do some stuff while waiting for child to send data on pipe\n    }\n    #process the data it got\n    open(my $fh, '&gt;', \"myoutfile.txt\");\n    while ( my $line = &lt;$pipe_reader&gt;){\n        print $fh $line;\n    }\n    close $pipe_reader;\n    close $fh;\nelse {\n    #I am the child\n    die \"cannot fork: $!\" unless defined $pid;\n    close $pipe_reader;\n    my $response = ResponseConstructor-&gt;new($pipe_writer);\n\n    if ([a condition where we want to return small data]){\n        $response-&gt;respond('small data');\n        exit;\n    }\n    elsif ([a condition where we want to return big data]){\n        $response-&gt;respond('imagine this is a really big string');\n    }\n}\n</code></pre>\n\n<p>ResponseConstructor.pm:</p>\n\n<pre><code>package ResponseConstructor;\n\nuse strict;\nuse warnings;\n\nsub new {\n    my $class = shift;\n    my $writer = shift;\n\n    my $self = {\n        writer =&gt; $writer\n    };\n    bless($self, $class);\n    return($self);\n}\n\n#Writes the response then closes the writer (pipe)\nsub respond {\n    my $self = shift;\n    my $data = shift;\n    print { $self-&gt;{writer} } $data;\n    close $self-&gt;{writer};\n}\n\n\n1;\n</code></pre>\n"}, {"tags": ["perl", "glob"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1517345110, "post_id": 48529966, "comment_id": 84055726, "body": "The glob function is intended for generating a list of filenames. Have you considered generating your strings differently, e.g. through a recursive function <code>cross_product([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], [&#39;d&#39;, &#39;e&#39;, &#39;f&#39;], [&#39;g&#39;, &#39;h&#39;, &#39;i&#39;])</code>?"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1517345510, "post_id": 48529966, "comment_id": 84055924, "body": "@amon I tried with the algorithm::NestedLoops module, it worked fine on my 64bit version of perl but I had to switch to 32bit and I was unable to find it on 32bit ppm"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1517345614, "post_id": 48529966, "comment_id": 84055973, "body": "@toolic I really can&#39;t,  have literally thousand of strings, some are above the 254 char so it works but when I keep the same format and a size above 254 char it doesn&#39;t work anymore"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517345868, "post_id": 48529966, "comment_id": 84056081, "body": "So install it from CPAN like the rest of the world: <code>cpan Algorithm::Loops</code>"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1517346475, "post_id": 48529966, "comment_id": 84056370, "body": "Algorithm::Loops is a pure-Perl module. It is in no way architecture-dependent, so 64-bit vs 32-bit is irrelevant. You could even just copy the relevant code from the module (the module&#39;s license allows this). Or just write your own function. Or most sensibly, install from CPAN directly instead of restricting yourself to PPM. You have many options."}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1517345738, "post_id": 48530340, "comment_id": 84056034, "body": "Yep, tried with that module, it worked on a 64bits version of Perl, but I had to switch to 32bit to ensure compability on all devices the code is intended for. I am unable to find it on 32 bit ppm, if I get I from CPAN it works but i&#39;m not sure it is 100% compatible with 32bit perl since it is not on activeState&#39;s repository"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1517345660, "creation_date": 1517345660, "answer_id": 48530340, "question_id": 48529966, "link": "https://stackoverflow.com/questions/48529966/limit-size-of-the-string-in-glob-argument/48530340#48530340", "title": "limit size of the string in glob argument?", "body": "<p>Alternative solution:</p>\n\n<pre><code>use Algorithm::Loops qw( NestedLoops );\n\nmy $iter = NestedLoops([\n   [qw( a b c )],\n   [qw( d e f )],\n   [qw( g h i )],\n]);\n\nwhile (my @vals = $iter-&gt;()) {\n   my $s = join(\"__\", @vals);\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1517345660, "creation_date": 1517344045, "question_id": 48529966, "link": "https://stackoverflow.com/questions/48529966/limit-size-of-the-string-in-glob-argument", "title": "limit size of the string in glob argument?", "body": "<p>I am using the <code>glob</code> function in order to factorize some lists.</p>\n\n<p>Everything was working fine until now, It seems that the <code>glob</code> function doesn't work if the string exeeds a certain length.</p>\n\n<p>In my code I have something like</p>\n\n<pre><code>my @output = glob(\"{a,b,c}__{d,e,f}__{g,h,i}\");\n</code></pre>\n\n<p>and got the output</p>\n\n<pre><code>\"a__d__g\",\"a__d__h\",...,\"c__f__i\"\n</code></pre>\n\n<p>the problem occurs when the string is too long, it seems it starts when the string is longer than 254 characters (254 not included) long (without the <code>{</code> and <code>}</code>)\nWhen the string is too long the glob function doesn't make the concatenation on each <code>{}</code> ,it ends before the \"group\" that make the string exeed 254 chars</p>\n\n<p>Is it a known limitation of glob? Is there something to do about it?</p>\n\n<p>I belive this is a limitation since 255 = b11111111 (maybe some sort of overflow)</p>\n\n<p>What do you think about it?</p>\n\n<p>thanks :)</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 91128, "user_id": 1229023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/75b840909603c238921a81032efd57eb?s=128&d=identicon&r=PG", "display_name": "raina77ow", "link": "https://stackoverflow.com/users/1229023/raina77ow"}, "edited": false, "score": 11, "creation_date": 1517340734, "post_id": 48529062, "comment_id": 84053507, "body": "Both &#39;Statushinweis&#39; and &#39;Status&#39; are replaced by the same key - but keys have to be unique in hash. That&#39;s why <code>Statushinweis</code> result overwrites the <code>Status&#39;</code> one."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 10, "creation_date": 1517340749, "post_id": 48529062, "comment_id": 84053511, "body": "Both <code>Status</code> and <code>Statushinweis</code> map to the english <code>status</code>. The second one (<code>Statushinweis</code>) will just overwrite the first (<code>Status</code>). Everything works as expected. You need to make your translation unique."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1517357864, "post_id": 48529062, "comment_id": 84060704, "body": "Maybe check for duplicated values and rename the values to status1, status2, ... before proceeding."}, {"owner": {"reputation": 163, "user_id": 2203113, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BGfK4.png?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/2203113/ivan"}, "edited": false, "score": 3, "creation_date": 1517508762, "post_id": 48529062, "comment_id": 84134599, "body": "The problem is: you have two identical values in your mapping table hash. Your temporary hash will use <b>values</b> of the mapping table hash as it&#39;s <b>keys</b> , and we know that keys of any hash must uniq. That&#39;s why <code>status</code> is overwritten."}], "owner": {"reputation": 61, "user_id": 3829111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nYb2S.png?s=128&g=1", "display_name": "Lik", "link": "https://stackoverflow.com/users/3829111/lik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1517340303, "creation_date": 1517340303, "question_id": 48529062, "link": "https://stackoverflow.com/questions/48529062/hash-value-overwrite-due-to-similar-keys", "title": "Hash value overwrite due to similar keys?", "body": "<p>I want to map data from a German data structure to an English one.</p>\n\n<p>For that I use a hash which holds the German words as keys and the English ones as values ($mapping_table).</p>\n\n<p>The data are stored in an array of hashes ($data). The keys are the German words which have to be replaced by English ones. The values are the data which shall stay unchanged.</p>\n\n<p>To do the mapping I have written the following code:</p>\n\n<pre><code>my $mapping_table = {\n    'Exemplare' =&gt; 'copies',\n    'Seiten' =&gt; 'pages',\n    'Statushinweis' =&gt; 'status',\n    'Serie von' =&gt; 'number_of',\n    'ISBN/Barcode-Nr.' =&gt; 'ISBN_barcode',\n    'Status' =&gt; 'status',\n};\n\nmy $data = [\n  {\n    'Exemplare' =&gt; '1',\n    'Seiten' =&gt; '0',\n    'Statushinweis' =&gt; 'Statushinweis',\n    'ISBN/Barcode-Nr.' =&gt; '3-551-01561-9',\n    'Serie von' =&gt; '4',\n    'Status' =&gt; 'Gesucht'\n  },\n  {\n    'Exemplare' =&gt; '4',\n    'Seiten' =&gt; '111',\n    'Statushinweis' =&gt; '',\n    'ISBN/Barcode-Nr.' =&gt; '3-551-01561-9',\n    'Serie von' =&gt; '4',\n    'Status' =&gt; 'Vorhanden'\n  }\n];\n\nmy $mapped_data = [];\n\nforeach my $issue ( @$data ) {\n    my %tmp_hash;\n    foreach my $key (sort keys %$mapping_table) {\n        $tmp_hash{$mapping_table-&gt;{$key}} = $issue-&gt;{$key};\n    }\n    push @$mapped_data, \\%tmp_hash;\n}\n\nprint Dumper $mapped_data;\n</code></pre>\n\n<p>The result of the dump surprises me a lot.</p>\n\n<pre><code>$VAR1 = [\n          {\n            'number_of' =&gt; '4',\n            'copies' =&gt; '1',\n            'status' =&gt; 'Statushinweis',\n            'ISBN_barcode' =&gt; '3-551-01561-9',\n            'pages' =&gt; '0'\n          },\n          {\n            'pages' =&gt; '111',\n            'ISBN_barcode' =&gt; '3-551-01561-9',\n            'status' =&gt; '',\n            'copies' =&gt; '4',\n            'number_of' =&gt; '4'\n          }\n    ];\n</code></pre>\n\n<p>It can be seen that the values of the keys 'status' hold those of the keys 'Statushinweis' whereas these keys got completely lost.</p>\n\n<p>I tried to figure out why this happens with the help of Google and the debugger but failed (maybe to obvious to be seen?).</p>\n\n<p>Maybe I should mention that I work with strawberry perl 5.26.1 on Win7.</p>\n\n<p>Any idea what I did wrong and how to fix it?</p>\n\n<p>Thx in advance.</p>\n"}, {"tags": ["perl", "scripting", "expect"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1517337032, "post_id": 48527926, "comment_id": 84051369, "body": "You might want to use the <a href=\"https://core.tcl.tk/tcllib/doc/trunk/embedded/www/tcllib/files/modules/cmdline/cmdline.html\" rel=\"nofollow noreferrer\">cmdline package</a> from tcllib"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8680478"}, "is_accepted": false, "score": 0, "last_activity_date": 1517382615, "creation_date": 1517382615, "answer_id": 48536472, "question_id": 48527926, "link": "https://stackoverflow.com/questions/48527926/how-to-do-index-parsing-in-expect-script/48536472#48536472", "title": "How to do index parsing in expect script", "body": "<p>Expect uses Tcl which is also a general purpose programming language. You can go through the command line arguments by your self.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[user@host] # cat foo.tcl\nfor {set i 0} {$i &lt; [llength $argv]} {incr i} {\n    puts \"argv\\[$i]=[lindex $argv $i]\"\n}\n\nforeach arg $argv {\n    puts \"$arg\"\n}\n[user@host] # tclsh foo.tcl hello world\nargv[0]=hello\nargv[1]=world\nhello\nworld\n[user@host] #\n</code></pre>\n\n<p>For more info, see <a href=\"http://tcl.tk/doc/\" rel=\"nofollow noreferrer\">Tcl's doc</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9290625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2fa60f929fc4c239170bebd26aa10a?s=128&d=identicon&r=PG&f=1", "display_name": "Newton", "link": "https://stackoverflow.com/users/9290625/newton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1517382615, "creation_date": 1517335983, "question_id": 48527926, "link": "https://stackoverflow.com/questions/48527926/how-to-do-index-parsing-in-expect-script", "title": "How to do index parsing in expect script", "body": "<p>I have a code from perl which I need to convert to .expect script to check if -T is present and then use the next one as a timeout..  basically check the arg count, see if -T is one of them. </p>\n\n<p>Perl code:</p>\n\n<pre><code># check command line against valid arguments\n%opt=();\nunless( getopts('T:', \\%opt) )\n    {\n      print(\"$progname : Illegal command line arguments\\n\");\n      exit(1);\n    } \n$commandTimeout=$opt{T} if $opt{T};\n$inputCommand = join(\" \", @ARGV); # convert arguments into one (long) string\n</code></pre>\n"}, {"tags": ["shell", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "reply_to_user": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 0, "creation_date": 1517334639, "post_id": 48527497, "comment_id": 84050112, "body": "doesn&#39;t work with perl regex (Po)"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 3, "creation_date": 1517334733, "post_id": 48527497, "comment_id": 84050160, "body": "You say you need to delete all if statements but then your expected output includes an if statement. Please <a href=\"https://stackoverflow.com/posts/48527497/edit\">edit</a> your question to clarify."}, {"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517334788, "post_id": 48527497, "comment_id": 84050184, "body": "condition is different.  if (temp2==1) has to be retained and if (temp==1) has to be deleted"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517334899, "post_id": 48527497, "comment_id": 84050238, "body": "And again: edit the question please.  I&#39;ve just read through it all, puzzled, to finally see it in a comment."}, {"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517335042, "post_id": 48527497, "comment_id": 84050303, "body": "edited the question to be more clear. Hope that helps"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517341465, "post_id": 48527497, "comment_id": 84053906, "body": "If braces may be nested look up &quot;nested delimiters.&quot;  One good tool: <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1517342801, "post_id": 48527497, "comment_id": 84054642, "body": "The OPs real text doesn&#39;t look like the simple sample input he&#39;s provided (see his comments under <a href=\"https://stackoverflow.com/a/48527696/1745001\">stackoverflow.com/a/48527696/1745001</a>) so the general answer is &quot;you can&#39;t do it without a language parser&quot; since we&#39;re now down the rabbit hole of having to deal with nested delimiters, delimiters within strings, within comments, etc., etc.."}], "answers": [{"comments": [{"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517335204, "post_id": 48527696, "comment_id": 84050395, "body": "Awesome!! works like a charm.. Just checking further.. i will mark this as correct answer once my check finishes."}, {"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517335734, "post_id": 48527696, "comment_id": 84050668, "body": "it fails when there are nested braces. For example if (temp==1) { something if (temp3==1) { something else } }"}, {"owner": {"reputation": 9689, "user_id": 1475324, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/59dca664e41227733ba8a0d1b4f9d73f?s=128&d=identicon&r=PG", "display_name": "iamauser", "link": "https://stackoverflow.com/users/1475324/iamauser"}, "reply_to_user": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 1, "creation_date": 1517335839, "post_id": 48527696, "comment_id": 84050705, "body": "@blganesh101 Your example is in your question, don&#39;t ask people to be &#39;yoda&#39; and know your input out of thin air."}, {"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517336042, "post_id": 48527696, "comment_id": 84050825, "body": "understood. i am just stating my check. i am absolutely fine with whatever answers given here. thanks for your concern."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1517336205, "post_id": 48527696, "comment_id": 84050894, "body": "As I said &quot;What you&#39;re asking to do is impossible in general without a parser for whatever language that code is written in but you can produce the output you want from that specific input ...&quot; - if your actual input doesn&#39;t look like the sample you provided then of course the script will not parse it."}, {"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517336365, "post_id": 48527696, "comment_id": 84050986, "body": "well i totally get it. but i am just trying to add more cases to test the script. thanks."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1517342611, "post_id": 48527696, "comment_id": 84054561, "body": "Then you&#39;re just wasting everyone&#39;s time with the question as written since you&#39;re asking how to parse text without showing us a truly representative example of that text."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 3, "last_activity_date": 1517335024, "creation_date": 1517335024, "answer_id": 48527696, "question_id": 48527497, "link": "https://stackoverflow.com/questions/48527497/how-to-match-and-delete-some-if-statements-from-a-file-based-on-pattern-matching/48527696#48527696", "title": "How to match and delete some if statements from a file based on pattern matching", "body": "<p>What you're asking to do is impossible in general without a parser for whatever language that code is written in but you can produce the output you want from that specific input using any awk in any OS on any UNIX box with:</p>\n\n<pre><code>awk '/if \\(temp==1/{f=1} !f; /}/{f=0}' file\n</code></pre>\n\n<p>if that's all you want.</p>\n"}, {"comments": [{"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517335697, "post_id": 48527791, "comment_id": 84050639, "body": "it fails when there are nested braces. For example if (temp==1) { something if (temp3==1) { something else } }"}, {"owner": {"reputation": 9689, "user_id": 1475324, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/59dca664e41227733ba8a0d1b4f9d73f?s=128&d=identicon&r=PG", "display_name": "iamauser", "link": "https://stackoverflow.com/users/1475324/iamauser"}, "reply_to_user": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517335914, "post_id": 48527791, "comment_id": 84050746, "body": "There will always be edge cases with these kinda pattern and no one will be full proof."}, {"owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "edited": false, "score": 0, "creation_date": 1517336304, "post_id": 48527791, "comment_id": 84050948, "body": "Just my result. it does not work. it deletes all the lines after the first match"}], "tags": [], "owner": {"reputation": 9689, "user_id": 1475324, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/59dca664e41227733ba8a0d1b4f9d73f?s=128&d=identicon&r=PG", "display_name": "iamauser", "link": "https://stackoverflow.com/users/1475324/iamauser"}, "is_accepted": false, "score": 1, "last_activity_date": 1517335949, "last_edit_date": 1517335949, "creation_date": 1517335396, "answer_id": 48527791, "question_id": 48527497, "link": "https://stackoverflow.com/questions/48527497/how-to-match-and-delete-some-if-statements-from-a-file-based-on-pattern-matching/48527791#48527791", "title": "How to match and delete some if statements from a file based on pattern matching", "body": "<p>You probably can use <code>sed</code> to do this:</p>\n\n<pre><code>$ sed '/temp==1/,/}/d' inputfile\nsome more text \nabcdef\nif (temp2==1) {\nsome text \n}\n</code></pre>\n\n<p>Above deletes (with <code>d</code>) all lines between and including the patterns, <code>/temp==1</code> and <code>}</code>. </p>\n\n<p>Note: It will not work with nested patterns as OP is suggesting in his comment. As per OP's comment, one could do the following:</p>\n\n<pre><code>$ sed '/temp==1/,/}/d;/}/,/}/d' 1.txt\n</code></pre>\n\n<p>This removes additional texts and patterns that are between two <code>}</code>s.</p>\n"}], "owner": {"reputation": 3413, "user_id": 2407931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa7bec566b424f80eac4db5a7b1dbca6?s=128&d=identicon&r=PG", "display_name": "blganesh101", "link": "https://stackoverflow.com/users/2407931/blganesh101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517341381, "creation_date": 1517334335, "last_edit_date": 1517341381, "question_id": 48527497, "link": "https://stackoverflow.com/questions/48527497/how-to-match-and-delete-some-if-statements-from-a-file-based-on-pattern-matching", "title": "How to match and delete some if statements from a file based on pattern matching", "body": "<p>I have following code </p>\n\n<pre>\nif (temp==1) {\nsome text \n}\nsome more text \nabcdef\nif (temp==1) {\nsome text \n}\nif (temp2==1) {\nsome text \n}\n</pre>\n\n<p>I need to use any script/command to delete all the if statements.</p>\n\n<p>Required output: </p>\n\n<pre>\nsome more text \nabcdef\nif (temp2==1) {\nsome text \n}\n</pre>\n\n<p>What i can already achieve is the following</p>\n\n<pre><code>grep -zPo \"if\\ \\(temp==1\\) (\\{([^{}]++)*\\})\" filename\n</code></pre>\n\n<p>and i get the following output</p>\n\n<pre>\nif (temp==1) {\nsome text \n}\nif (temp==1) {\nsome text \n}\n</pre>\n\n<p>Same result from perl command too </p>\n\n<pre><code>perl -l -0777 -ne  \n    \"print $&amp; while /if \\(temp==1\\) (\\{([^{}]++|(?1))*\\})/g\" filename\n</code></pre>\n\n<p>Now i need to delete the matched lines from the file.<br>\nSo all <code>if(temp2==1)</code> must be retained and <code>if(temp==1)</code> must be deleted.<br>\nHow can i do this?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1517332467, "creation_date": 1517332467, "answer_id": 48527016, "question_id": 48526393, "link": "https://stackoverflow.com/questions/48526393/how-to-avoid-wrong-variable-name-interpretation-in-perl-one-liner/48527016#48527016", "title": "How to avoid wrong variable name interpretation in perl one-liner", "body": "<p>In order to use a Perl variable in a context where its name won't be distinguished from the surrounding text, you can put the name (not including the sigil) inside <code>{ ... }</code>. So, instead of having <code>$1125</code>, you would have <code>${1}125</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 3141540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773da2815c0021c281748f66d10e7ac2?s=128&d=identicon&r=PG&f=1", "display_name": "toripiyo", "link": "https://stackoverflow.com/users/3141540/toripiyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 48527016, "answer_count": 1, "score": 0, "last_activity_date": 1517370153, "creation_date": 1517330354, "last_edit_date": 1517370153, "question_id": 48526393, "link": "https://stackoverflow.com/questions/48526393/how-to-avoid-wrong-variable-name-interpretation-in-perl-one-liner", "title": "How to avoid wrong variable name interpretation in perl one-liner", "body": "<p>I want to replace apache configuration file's MinSpareThreads directive value from 75 to 125.</p>\n\n<p>I wrote perl one-liner code like below.</p>\n\n<pre><code>perl -pi.$(date +%Y%m%d) -e 's;MinSpareThreads(\\s+)(\\d+);MinSpareThreads$1125;g' httpd-mpm.conf\n</code></pre>\n\n<p>However it outputs below result.</p>\n\n<pre><code>root@8c659a9d5907:/usr/local/apache2/conf/extra# diff httpd-mpm.conf.20180130 httpd-mpm.conf\n46c46\n&lt;     MinSpareThreads         75\n---\n&gt;     MinSpareThreads\n63c63\n&lt;     MinSpareThreads         75\n---\n&gt;     MinSpareThreads\n83c83\n&lt;     MinSpareThreads         25\n---\n&gt;     MinSpareThreads\n97c97\n&lt;     MinSpareThreads          5\n---\n&gt;     MinSpareThreads\n</code></pre>\n\n<p>It seems $1 is unintendedly recognized as $1125.\n$1125 doesn't exist. So above result is shown.</p>\n\n<p>Do you know any way to avoid above wrong interpretation?</p>\n"}, {"tags": ["perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1517327441, "post_id": 48524182, "comment_id": 84045729, "body": "thank you @mob. Your description is more precisely then <a href=\"https://metacpan.org/pod/distribution/Moose/lib/Moose/Manual/Roles.pod\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/Moose/lib/Moose/Manual/Roles.p&zwnj;&#8203;od</a>"}, {"owner": {"reputation": 74715, "user_id": 471272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jSlyx.gif?s=128&g=1", "display_name": "tchrist", "link": "https://stackoverflow.com/users/471272/tchrist"}, "reply_to_user": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 1, "creation_date": 1523195904, "post_id": 48524182, "comment_id": 86450084, "body": "@palik That\u2019s because \u2014 for whatever the reason, I have no idea \u2014 that the Moose documentation deliberately hide the actual mechanics of what really happens in Perl proper with imprecise language of their own devising, presenting it as being somehow &quot;real&quot;. I have always found it much easier to understand when you strip away those notional constructs and address actual namespace resolution and contents. Under that principle, you should think of the Moose <code>with()</code> function as being an &quot;optional&quot; import from another package, but where you aren&#39;t allowed to say what you&#39;re importing. Sneaky."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1517323660, "creation_date": 1517323660, "answer_id": 48524182, "question_id": 48521770, "link": "https://stackoverflow.com/questions/48521770/why-a-moose-role-method-overrides-parents-definition/48524182#48524182", "title": "Why a Moose Role method overrides parents definition?", "body": "<pre><code>package C;\nuse Moose;\nextends 'A';\n</code></pre>\n\n<p>makes package <code>C</code> a subclass of <code>A</code>. Behind the scenes, it adds <code>A</code> to <code>@C::ISA</code>. When an object of type <code>C</code> calls a method and the method name is not found in namespace <code>C</code>, perl will inspect the namespaces in <code>@C::ISA</code> to look for a way to resolve the method name.</p>\n\n<pre><code>package C;\nuse Moose;\nwith 'A::B';\n</code></pre>\n\n<p>does something different. It does not make <code>C</code> a subclass of <code>A::B</code>. It copies entries from the <code>A::B</code> namespace into the <code>C</code> namespace.</p>\n\n<p>So when you call <code>$c-&gt;a</code>, Perl finds a subroutine <code>&amp;C::a</code> because it was copied from <code>&amp;A::B::a</code>, and that's what it uses. It does not need to walk through <code>@C::ISA</code> to search for another subroutine named <code>a</code>.</p>\n\n<hr>\n\n<p>If you also define a <code>sub a { ... }</code> in <code>package C</code>, then <code>use Moose ... with 'A::B'</code> will not overwrite it.</p>\n"}], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 48524182, "answer_count": 1, "score": 1, "last_activity_date": 1517327552, "creation_date": 1517316104, "last_edit_date": 1517327552, "question_id": 48521770, "link": "https://stackoverflow.com/questions/48521770/why-a-moose-role-method-overrides-parents-definition", "title": "Why a Moose Role method overrides parents definition?", "body": "<p>The method <code>a</code> defined in both <code>A</code> and in <code>A::B</code>.</p>\n\n<p><code>C</code> is derived from <code>A</code> and uses <code>A::B</code>.</p>\n\n<p><strong>Question 1</strong>: Why <code>A::B-&gt;a</code> override <code>A-&gt;a</code>?</p>\n\n<pre><code>$ perl x.pl \nb\n</code></pre>\n\n<p><strong>Question 2</strong>: Why <code>A::B-&gt;a</code> wouldn't override <code>C-&gt;a</code>, if we add <code>sub a {'c'}</code> into <code>C</code>?</p>\n\n<p><strong>A.pm</strong>: base class</p>\n\n<pre><code>package A;\nuse Moose;\nsub a {\n    return 'a';\n}\nno Moose;\n1;\n</code></pre>\n\n<p><strong>A/B.pm</strong>: a role</p>\n\n<pre><code>package A::B;\nuse Moose::Role;\nsub a {\n    return 'b';\n}\n1;\n</code></pre>\n\n<p><strong>C.pm</strong>: a class derived from A with the role A::B</p>\n\n<pre><code>package C;\nuse Moose;\nextends \"A\";\nwith \"A::B\";\nno Moose;\n1;\n</code></pre>\n\n<p><strong>bin.pl</strong></p>\n\n<pre><code>use v5.10;\nuse strict;\nuse warnings;\nuse C;\nmy $c = C-&gt;new();\nsay $c-&gt;a;\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "answers": [{"comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1517314659, "post_id": 48521012, "comment_id": 84037031, "body": "looks like a complete package pal <code>:-)</code>"}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1517314875, "post_id": 48521012, "comment_id": 84037162, "body": "@sjsam these days not getting enough time to visit forum, so whenever I get time, trying to satisfy my hunger."}, {"owner": {"reputation": 304, "user_id": 898589, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c426975b7ba31a2425940791702519c?s=128&d=identicon&r=PG", "display_name": "Paul Sellars", "link": "https://stackoverflow.com/users/898589/paul-sellars"}, "edited": false, "score": 2, "creation_date": 1517315029, "post_id": 48521012, "comment_id": 84037242, "body": "thank you!!! just had to escape the .* on osx and the sed one worked great! s/:&#40;[^/]*&#41;/{\\1}/g"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1517315467, "post_id": 48521012, "comment_id": 84037531, "body": "I&#39;m guessing you should properly use <code>[^:&#47;]</code> instead of <code>[^&#47;]</code> to completely comply with the OP&#39;s requirements."}, {"owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1517317677, "post_id": 48521012, "comment_id": 84038963, "body": "@tripleee I still have confusion as you can see <a href=\"https://regex101.com/r/nzgJuq/1\" rel=\"nofollow noreferrer\">here</a> match information with <code>&#47;:[^:&#47;]</code>  or <code>&#47;:[^&#47;]&#47;</code> doesn&#39;t make much difference, I may be wrong, if so correct me."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1517318178, "post_id": 48521012, "comment_id": 84039277, "body": "It doesn&#39;t appear to make any difference for the example data the OP posted, but I&#39;m guessing there was a reason they put that in there in the first place; and, it makes your regex properly unambiguous, so it avoids unnecessary backtracking."}], "tags": [], "owner": {"reputation": 14904, "user_id": 3161993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56e8M.png?s=128&g=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/3161993/akshay"}, "is_accepted": true, "score": 4, "last_activity_date": 1517314355, "last_edit_date": 1517314355, "creation_date": 1517313746, "answer_id": 48521012, "question_id": 48520873, "link": "https://stackoverflow.com/questions/48520873/transform-strings-in-bash-add-parentheses-around-params/48521012#48521012", "title": "Transform strings in bash - add parentheses around params", "body": "<p><strong><em>Using GNU awk</em></strong></p>\n\n<pre><code>awk '{print gensub(/:([^/]*)/,\"{\\\\1}\",\"g\")}' file\n</code></pre>\n\n<p><strong><em>Other awk</em></strong></p>\n\n<pre><code>awk '{gsub(/:[^/]*/,\"{&amp;}\"); gsub(/{:/,\"{\")}1' file\n</code></pre>\n\n<p><strong><em>Sed</em></strong></p>\n\n<pre><code>sed  -r 's/:([^/]*)/{\\1}/g' file\n</code></pre>\n\n<p><strong>Test Results:</strong></p>\n\n<pre><code>$ cat file\n/resource/:paramName\n/resource/:paramName/another-resource\n/resource/:paramName/another-resource/:anotherParam/final-resource\n/resource/:aParam/another-resource/:differentParam/final-resource\n</code></pre>\n\n<p><strong>GNU awk</strong></p>\n\n<pre><code>$ awk '{print gensub(/:([^/]*)/,\"{\\\\1}\",\"g\")}' file\n/resource/{paramName}\n/resource/{paramName}/another-resource\n/resource/{paramName}/another-resource/{anotherParam}/final-resource\n/resource/{aParam}/another-resource/{differentParam}/final-resource\n</code></pre>\n\n<p><strong>Other awk:</strong></p>\n\n<pre><code>$ awk '{gsub(/:[^/]*/,\"{&amp;}\"); gsub(/{:/,\"{\")}1' file\n/resource/{paramName}\n/resource/{paramName}/another-resource\n/resource/{paramName}/another-resource/{anotherParam}/final-resource\n/resource/{aParam}/another-resource/{differentParam}/final-resource\n</code></pre>\n\n<p><strong>Sed :</strong></p>\n\n<pre><code>$ sed  -r 's/:([^/]*)/{\\1}/g' file \n/resource/{paramName}\n/resource/{paramName}/another-resource\n/resource/{paramName}/another-resource/{anotherParam}/final-resource\n/resource/{aParam}/another-resource/{differentParam}/final-resource\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 898589, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c426975b7ba31a2425940791702519c?s=128&d=identicon&r=PG", "display_name": "Paul Sellars", "link": "https://stackoverflow.com/users/898589/paul-sellars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48521012, "answer_count": 1, "score": 3, "last_activity_date": 1517314355, "creation_date": 1517313327, "last_edit_date": 1517314197, "question_id": 48520873, "link": "https://stackoverflow.com/questions/48520873/transform-strings-in-bash-add-parentheses-around-params", "title": "Transform strings in bash - add parentheses around params", "body": "<p>I tried the following <code>sed</code> but couldn't quite crack how to stop on the forward slashes an apply it multiple times</p>\n\n<pre><code>sed 's/(.*):([^:]*)/\\1{\\2}/g' \n</code></pre>\n\n<p>My input looks like</p>\n\n<pre><code>/resource/:paramName\n/resource/:paramName/another-resource\n/resource/:paramName/another-resource/:anotherParam/final-resource\n/resource/:aParam/another-resource/:differentParam/final-resource\n</code></pre>\n\n<p>Into:</p>\n\n<pre><code>/resource/{paramName}\n/resource/{paramName}/another-resource\n/resource/{paramName}/another-resource/{anotherParam}/final-resource\n/resource/{aParam}/another-resource/{differentParam}/final-resource\n</code></pre>\n"}, {"tags": ["postgresql", "perl", "database-schema", "dbix-class"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 1, "last_activity_date": 1519465818, "creation_date": 1519465818, "answer_id": 48961475, "question_id": 48518070, "link": "https://stackoverflow.com/questions/48518070/cannot-create-non-virtual-view-using-dbixclassschemaversioned/48961475#48961475", "title": "Cannot create non-virtual view using DBIx::Class::Schema::Versioned", "body": "<p>I'm not certain I understand the question, but here is my take on it.</p>\n\n<p>Creating a view is done for specific queries, hard coded SQL to achieve something you feel DBIx::Class does not provide, and make the results of those queries available to DBIx, and be able to use the usual result (set) classes. </p>\n\n<p>It is not meant to correspond to a view in postgres. 'Updating' the view as far as DBIx is concerned means using the updated SQL in your view class - there is no need to store it in the database.</p>\n\n<p>If you create a view in postgres that you want to use, you can, but I do not believe Schema::Version has anything to do with it. After all, those are simply two different ways of storing a query, aren't they?</p>\n\n<p>If you want to version views, you may have to look at an entirely different route and use something like sqitch to version your sql files,\nhowever, your schema files should be in a version control system anyway.</p>\n"}], "owner": {"reputation": 222, "user_id": 6265747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f4f310cf0e2c351807a21290825e7c?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca", "link": "https://stackoverflow.com/users/6265747/bianca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1519465818, "creation_date": 1517304750, "question_id": 48518070, "link": "https://stackoverflow.com/questions/48518070/cannot-create-non-virtual-view-using-dbixclassschemaversioned", "title": "Cannot create non-virtual view using DBIx::Class::Schema::Versioned", "body": "<p>I'm using DBIx::Class::Schema::Versioned and I want to create a new view as a table in the database. Setting <code>__PACKAGE__-&gt;result_source_instance-&gt;is_virtual(1);</code> makes correct use of the view definition from the schema (not creating the table), but when I set <code>__PACKAGE__-&gt;result_source_instance-&gt;is_virtual(0);</code> no table is created in the database and attempting to get the resultset throws a \"relation does not exist\" error (which was expected).</p>\n\n<p>I couldn't find in the documentation any reference to how views should be created in DBIx::Class::Schema::Versioned. What happens is when I run the diffing between the old version that does not contain the view and the new version, the file <code>sql/MyProject-Schema-38-PostgreSQL.sql</code> contains the code for creating the view:</p>\n\n<pre><code>-- View: unlocked_pages\nDROP VIEW unlocked_pages;\nCREATE VIEW unlocked_pages ( page_id, username ) AS ...\n</code></pre>\n\n<p>but then the file which contains the difference between the 2 version appears empty and therefore when upgrading the schema nothing is done except adding a new version number in dbix_class_schema_versions. Those are the contents of sql/MyProject-Schema-37-38-PostgreSQL.sql: </p>\n\n<pre><code>-- Convert schema 'sql/MyProject-Schema-37-PostgreSQL.sql' to 'sql/MyProject-Schema-38-PostgreSQL.sql':;\n\n-- No differences found;\n</code></pre>\n\n<p>I'm using postgresql and the definition in Schema.pm is</p>\n\n<pre><code>package MyProject::Schema;\n\n# based on the DBIx::Class Schema base class\nuse base qw/DBIx::Class::Schema/;\n\nuse strict;\nuse warnings;\n\nour $VERSION = 38;\n\n# This will load any classes within\n# MyProject::Schema::Result and MyProject::Schema::ResultSet (if any)\n__PACKAGE__-&gt;load_namespaces();\n\n__PACKAGE__-&gt;load_components(qw/Schema::Versioned/);\n\n__PACKAGE__-&gt;upgrade_directory('../script/sql/');\n\n1;\n</code></pre>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["perl", "unicode", "grep"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517273979, "post_id": 48511898, "comment_id": 84019608, "body": "Re &quot;<i>The \\u1100 syntax, which is the actual Perl syntax, simply isn&#39;t supported.</i>&quot; <code>\\u1234</code> is used by JavaScript and JSON, not Perl."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1517334949, "post_id": 48512291, "comment_id": 84050252, "body": "The -CSD option is exactly what I needed, thank you."}, {"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1517335453, "post_id": 48512291, "comment_id": 84050513, "body": "As for the grep issue, using v2.20 I verified today that I (still) get that error msg.  Perhaps there&#39;s a bug that was introduced between 2.16 and 2.20; I have a later version on my home PC, and will check how it works there tonight.  And I accepted your answer.  (BTW, I know about the other Jamo blocks, but I wanted to keep my question simple.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1517339695, "post_id": 48512291, "comment_id": 84052951, "body": "More likely, it&#39;s dependent of the version of a library used by grep."}, {"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1517340016, "post_id": 48512291, "comment_id": 84053130, "body": "Hmm, a run-time (dynamic/ shared) library, rather than a compile-time (static) library, right?  How would I find out what library grep is using?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1517342083, "post_id": 48512291, "comment_id": 84054272, "body": "I don&#39;t know. Maybe <a href=\"https://stackoverflow.com/questions/tagged/pcre\">pcre</a>?"}, {"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1517344040, "post_id": 48512291, "comment_id": 84055209, "body": "You&#39;re right!  the error msg (&quot;character value in \\u.... sequence is too large&quot;) comes from pcre, see 2/3 of the way down <a href=\"https://pcre.org/pcre.txt\" rel=\"nofollow noreferrer\">pcre.org/pcre.txt</a>  We have pcre version 8.32 of 2012-11-30"}, {"owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "edited": false, "score": 0, "creation_date": 1517419984, "post_id": 48512291, "comment_id": 84092188, "body": "I confirmed last night that grep issues the same error msg (&quot;...sequence is too large&quot;) on my home computer.  The version of grep there is 2.25 (Linux-in-windows, Ubuntu bash etc., fully updated).  I don&#39;t know what version of the pcre lib I have there.  I don&#39;t have the time to further pursue it, since the perl solution works for me, I just want again to voice my disappointment at the state of Unicode support in the Gnu/Linux utilities..."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1517278745, "last_edit_date": 1517278745, "creation_date": 1517273290, "answer_id": 48512291, "question_id": 48511898, "link": "https://stackoverflow.com/questions/48511898/command-line-filtering-of-unicode-block/48512291#48512291", "title": "command line filtering of Unicode block", "body": "\n\n<p>Decode inputs, encode outputs. If the encoding in question is UTF-8, the command-line switch <code>-CSD</code> will come in useful.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -CSD -ne'print if !/\\p{Block: Hangul_Jamo}/'\nperl -CSD -ne'print if !/\\p{Block: Jamo}/'\nperl -CSD -ne'print if !/\\p{Blk=Jamo}/'\nperl -CSD -ne'print if !/\\p{InJamo}/'\nperl -CSD -ne'print if !/[\\N{U+1100}-\\N{U+11FF}]/'\nperl -CSD -ne'print if !/[\\x{1100}-\\x{11FF}]/'\ngrep -vP '[\\x{1100}-\\x{11FF}]'\n</code></pre>\n\n<p>You might want to add the <code>Hangul_Jamo_Extended_A</code>, <code>Hangul_Jamo_Extended_B</code> and <code>Hangul_Compatibility_Jamo</code> blocks.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -CSD -ne'print if !/[\\p{Block: Hangul_Jamo}\\p{Block: Hangul_Jamo_Extended_A}\\p{Block: Hangul_Jamo_Extended_B}\\p{Block: Hangul_Compatibility_Jamo}]/'\nperl -CSD -ne'print if !/[\\p{Block: Jamo}\\p{Block: JamoExtA}\\p{Block: JamoExtB}\\p{Block: CompatJamo}]/'\nperl -CSD -ne'print if !/[\\p{Blk=Jamo}\\p{Blk=JamoExtA}\\p{Blk=JamoExtB}\\p{Blk=CompatJamo}]/'\nperl -CSD -ne'print if !/[\\p{InJamo}\\p{InJamoExtA}\\p{InJamoExtB}\\p{InCompatJamo}]/'\nperl -CSD -ne'print if !/[\\N{U+1100}-\\N{U+11FF}\\N{U+A960}-\\N{U+A97F}\\N{U+D7B0}-\\N{U+D7FF}\\N{U+3130}-\\N{U+318F}]/'\nperl -CSD -ne'print if !/[\\x{1100}-\\x{11FF}\\x{A960}-\\x{A97F}\\x{D7B0}-\\x{D7FF}\\x{3130}-\\x{318F}]/'\ngrep -vP '[\\x{1100}-\\x{11FF}\\x{A960}-\\x{A97F}\\x{D7B0}-\\x{D7FF}\\x{3130}-\\x{318F}]'\n</code></pre>\n\n<hr>\n\n<p>Let's look at your failed attempts.</p>\n\n<ul>\n<li><blockquote>\n  <p><em><code>grep -Pv '[\\x{1100}-\\x{11FF}]'</code></em></p>\n</blockquote>\n\n<p>Actually, this one should work, and it does for me.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -CSD -e'print \"abc\\nd\\x{1100}f\\nghi\\n\"' | od -t x1\n0000000 61 62 63 0a 64 e1 84 80 66 0a 67 68 69 0a\n0000016\n\n$ perl -CSD -e'print \"abc\\nd\\x{1100}f\\nghi\\n\"' | grep -Pv '[\\x{1100}-\\x{11FF}]'\nabc\nghi\n\n$ grep --version | head -1\ngrep (GNU grep) 2.16\n</code></pre>\n\n<p>I do get your error on an older machine with <code>grep (GNU grep) 2.10</code>.</p></li>\n<li><blockquote>\n  <p><em><code>perl -ne'print unless /\\p{Block: Hangul_Jamo}/'</code></em></p>\n</blockquote>\n\n<p>You didn't get any matches from <code>/\\p{Block: Hangul_Jamo}/</code> because you were matching against encoded text (UTF-8 bytes, chars in the range 00..FF) instead of decoded text (Unicode Code Points, chars in the range 00000..10FFFF).</p></li>\n<li><blockquote>\n  <p><em><code>perl -ne 'print unless /\\p{InHangul_Jamo}/'</code></em></p>\n</blockquote>\n\n<p><code>\\p{Block: X}</code>, <code>\\p{Blk=X}</code> and <code>\\p{InX}</code> are equivalent.</p></li>\n<li><blockquote>\n  <p><em><code>perl -ne'print unless /[\\x{1100}-\\x{11FF}]/'</code></em></p>\n</blockquote>\n\n<p><code>[\\x{1100}-\\x{11FF}]</code> is equivalent to <code>\\p{Block: Hangul_Jamo}</code>.</p></li>\n<li><blockquote>\n  <p><em><code>perl -ne'print unless /[\\u1100-\\u11ff]/'</code></em></p>\n</blockquote>\n\n<p>You got too many matches since <code>\\u</code> in double-quoted string literals and in regex pattern literals titlecases the next character. (e.g. <code>\"\\uxyx\"</code> is equivalent to <code>\"Xyz\"</code>.)</p>\n\n<p>As such, <code>[\\u1100-\\u11ff]</code> is equivalent to <code>[01f]</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 375, "user_id": 1068689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/512e76ffafe4c4b52c7508421a5bc2d2?s=128&d=identicon&r=PG", "display_name": "Mike Maxwell", "link": "https://stackoverflow.com/users/1068689/mike-maxwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 48512291, "answer_count": 1, "score": 2, "last_activity_date": 1517278745, "creation_date": 1517270132, "question_id": 48511898, "link": "https://stackoverflow.com/questions/48511898/command-line-filtering-of-unicode-block", "title": "command line filtering of Unicode block", "body": "<p>I've been trying for a couple hours to create a conceptually trivial filter that I can use on the command line, without success.  The task is to filter out all lines containing Hangul Jamo characters, while retaining all other lines (which may contain ASCII, characters in the Hangul Syllable block, etc.).</p>\n\n<p>So for example if the input was</p>\n\n<pre><code> foo\n \u1164\u11a8\n \uac04\n</code></pre>\n\n<p>the output would contain the first and third lines, but not the second, since the second line contains Jamo characters.  (The above is not meant to be real Korean, just a simple test case.)</p>\n\n<p>I'm very disappointed with the Gnu grep utility (version 2.20).  I would have thought the ff. would work:</p>\n\n<pre><code>grep -Pv '[\\x{1100}-\\x{11FF}]'\n</code></pre>\n\n<p>but instead I get the error message <code>grep: character value in \\x{...} sequence is too large</code>.  (The \\u1100 syntax, which is the actual Perl syntax, simply isn't supported.)</p>\n\n<p>(I do notice that our version 2.20 is rather old.  If someone tries the above with a newer version of grep, and it works, I'll certainly consider that an answer--and I'll get our IT folks to upgrade!)</p>\n\n<p>I tried sed, but didn't get any further.  (Sorry, I don't remember exactly what sed commands I tried, but sed's support for Unicode blocks doesn't seem any better than grep's.)</p>\n\n<p>Finally, I tried perl (v5.16.3):</p>\n\n<pre><code> perl -ne 'print unless /[\\u1100-\\u11ff]/'\n</code></pre>\n\n<p>This at least succeeds in eliminating the Jamo lines while retaining the Hangul Syllable lines, but it also eliminates the ASCII lines, which I don't want to do.  I also would have thought one of the ff. would work:</p>\n\n<pre><code>perl -ne 'print unless /\\p{InHangul_Jamo}/'\nperl -ne 'print unless /\\p{Block: Hangul_Jamo}/'\n</code></pre>\n\n<p>but neither appears to have any effect.  (Afaik, I shouldn't have to have a <code>.*</code> on each side of the <code>\\p{...}</code>, but I tried that too; no luck.)</p>\n\n<p>Locale: in case it matters, I have <code>LANG=en_US.UTF-8</code>.</p>\n\n<p>I'm sure I could do this in Python, but I'd like to understand why neither grep nor perl seems to work, because they'd be a lot simpler.  (And if I'm right about the Gnu utilities having poor Unicode support, why that is...and when it will be fixed.  It's not like Unicode is new!)  Of course I realize the problem may be that I'm not holding my mouth right when I try, but if so, it would be nice for grep at least to have better documentation on Unicode usage.  Right now the documentation for <code>grep -P</code> says \"This is highly experimental and grep -P may warn of unimplemented features.\"  And it seems to have been that way roughly forever.</p>\n"}, {"tags": ["file", "perl", "byte", "buffer"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517269525, "post_id": 48511789, "comment_id": 84018475, "body": "Do you by &quot;<i>from midrow</i>&quot; mean from the middle of the first row?"}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1517269577, "post_id": 48511789, "comment_id": 84018489, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16556332/perl-seek-function\">Perl seek function</a>"}, {"owner": {"reputation": 303, "user_id": 6312266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628952e3fa60c849c9df20cc3ef354ee?s=128&d=identicon&r=PG&f=1", "display_name": "DisplayMyName", "link": "https://stackoverflow.com/users/6312266/displaymyname"}, "edited": false, "score": 0, "creation_date": 1517269589, "post_id": 48511789, "comment_id": 84018491, "body": "Yes, I want to half the first row in bytes"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517270273, "post_id": 48511789, "comment_id": 84018685, "body": "OK, so that&#39;s 100 bytes after the half of the first line ... then what?"}, {"owner": {"reputation": 303, "user_id": 6312266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628952e3fa60c849c9df20cc3ef354ee?s=128&d=identicon&r=PG&f=1", "display_name": "DisplayMyName", "link": "https://stackoverflow.com/users/6312266/displaymyname"}, "edited": false, "score": 0, "creation_date": 1517272936, "post_id": 48511789, "comment_id": 84019363, "body": "Sorry for not making myself clear, i want to &quot;read&quot;, that is get the string from byte x to byte y from the file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517293765, "post_id": 48511789, "comment_id": 84024689, "body": "Right, I got that, sorry if my query was unclear.  I meant to ask what you want to do next, after you&#39;ve read those 100 bytes past the half of the first line. (I assumed you want to keep reading from the file in some fashion.) Never mind, I posted what you asked (edited in the meanwhile). Clarify if needed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517303182, "post_id": 48511789, "comment_id": 84029587, "body": "Since you have already read the whole of the first line, why not just delete the first half of <code>$row</code> instead of re-reading the part you need."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517274471, "post_id": 48512050, "comment_id": 84019730, "body": "Also, keep in mind that for some handles (sockets, at least), <code>read</code> might not read as many bytes as requested. A loop is needed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517303005, "post_id": 48512050, "comment_id": 84029485, "body": "Note that it&#39;s probably better to use named constants for the last (<code>WHENCE</code>) parameter of <code>seek</code>. So <code>use Fcntl &#39;:seek&#39;</code> and <code>seek $fh, $row_len&#47;2, SEEK_SET</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517304377, "post_id": 48512050, "comment_id": 84030342, "body": "@Borodin  Right ... I considered that and thought that it may spread the answer too wide.  I will add a bit on it, thank you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517304469, "post_id": 48512050, "comment_id": 84030405, "body": "@zdim: I can usually remember what zero does, but I can&#39;t use 1 or 2 correctly without checking the documentation!"}, {"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1617145430, "post_id": 48512050, "comment_id": 118221262, "body": "<code>use Fcntl qw(:seek);</code> is not in the seek docs. It is not required and I don&#39;t accept that extra, un-rememberable lines of code and symbols are good, even if they are more orderly in your opinion. That&#39;s what your downvote is for."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1617172182, "post_id": 48512050, "comment_id": 118226200, "body": "@felwithe Well, thanks for stating your reason, much appreciated. (1) It <b>is</b> in the docs -- did you look? -- right in the first paragraph of <a href=\"https://perldoc.perl.org/functions/seek\" rel=\"nofollow noreferrer\">seek</a>, loud and clear and with link  (2) Module <a href=\"https://perldoc.perl.org/Fcntl\" rel=\"nofollow noreferrer\">Fcntl</a> loads C&#39;s <code>Fcntl.h</code> defines, of the <a href=\"https://man7.org/linux/man-pages/man2/fcntl.2.html\" rel=\"nofollow noreferrer\">fcntl(2)</a> fame,  a standard utility for working with file descriptors  (3) This way <code>seek</code> can use named constants of <a href=\"http://man.he.net/man3/fseek\" rel=\"nofollow noreferrer\">fseek(3)</a> syscall (4) This is widely considered good practice"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1617172683, "post_id": 48512050, "comment_id": 118226356, "body": "@felwithe For future reference: fcntl == file control.  I suggest to read through <code>Fcntl</code> docs to appreciate just how useful the module is, and for <code>fcntl</code> in general just type it in google and read down the page."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 6, "last_activity_date": 1617173553, "last_edit_date": 1617173553, "creation_date": 1517271273, "answer_id": 48512050, "question_id": 48511789, "link": "https://stackoverflow.com/questions/48511789/read-n-bytes-of-text-from-file/48512050#48512050", "title": "Read n bytes of text from file", "body": "<p>After you get the length of the line</p>\n<pre><code>my $row_len = length &lt;$fh&gt;;  # with newline, or (read then) chomp first\n</code></pre>\n<p>position the handle where you need it using <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow noreferrer\">seek</a></p>\n<pre><code>use Fcntl qw(:seek);\n\nseek $fh, $row_len/2, SEEK_SET;\n</code></pre>\n<p>where <a href=\"http://perldoc.perl.org/Fcntl.html\" rel=\"nofollow noreferrer\">Fcntl</a> provides constants <code>SEEK_SET</code>, <code>SEEK_CUR</code>, and <code>SEEK_END</code> so that the position in the second argument is taken from either the beginning, or the current position, or the end of file (when a negative position is normally used). Instead of these one can use <code>0</code>, <code>1</code>, <code>2</code>.</p>\n<p>Then read <code>$bytes</code> into <code>$data</code> using <a href=\"http://perldoc.perl.org/functions/read.html\" rel=\"nofollow noreferrer\">read</a></p>\n<pre><code>my $bytes = 100;\nmy $data;\n\nmy $rb = read $fh, $data, $bytes;\n</code></pre>\n<p>where <code>$rb</code> is how many bytes were actually read out of <code>$bytes</code> requested.</p>\n<hr />\n<p>For some filehandles (sockets for one) <code>read</code> may not get as much as requested at once so you'd need to keep reading. For example, using <code>OFFSET</code> (see docs) at which to write to the string</p>\n<pre><code>use bytes qw();\n\nmy ($data, $requested, $total_read) = ('', 100, 0); \n\nwhile ($total_read &lt; $requested) {\n    my $bytes_data = bytes::length $data;\n    $total_read += read $fh, $data, $requested - $bytes_data, $bytes_data;\n}\n</code></pre>\n<p>where <code>read</code> now writes to <code>$data</code> at position <code>$bytes_data</code>. Without that offset each read overwrites <code>$data</code>, what can be appended to a string with all data (or otherwise accumulated).</p>\n<p>While <code>bytes::length</code> is fine the <a href=\"https://perldoc.perl.org/bytes.html\" rel=\"nofollow noreferrer\">bytes pragma</a> is in general &quot;<em>strongly discouraged</em>&quot;.</p>\n<hr />\n<p>Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for comments.</p>\n<p>Note that <code>read</code> doesn't treat &quot;newlines&quot; in any special way and a read may well pick up from the next line(s) of the file, while those newline-bytes do count and thus affect your position in a file.</p>\n<p>It is not specified what you want to do next but you can keep (repositioning and) reading.</p>\n<p>See <a href=\"https://stackoverflow.com/a/16556468/4653379\">this post</a> for a crystal clear explanation of moving in a file with <code>seek</code> and <code>read</code>.</p>\n"}], "owner": {"reputation": 303, "user_id": 6312266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628952e3fa60c849c9df20cc3ef354ee?s=128&d=identicon&r=PG&f=1", "display_name": "DisplayMyName", "link": "https://stackoverflow.com/users/6312266/displaymyname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1238, "favorite_count": 1, "accepted_answer_id": 48512050, "answer_count": 1, "score": 2, "last_activity_date": 1617313744, "creation_date": 1517269218, "last_edit_date": 1617313744, "question_id": 48511789, "link": "https://stackoverflow.com/questions/48511789/read-n-bytes-of-text-from-file", "title": "Read n bytes of text from file", "body": "<p>I have a text file, I read first line from it to find out how many bytes does it take,</p>\n\n<pre><code>open($fh, \"&lt;:raw\", $file);\nmy $len;\nwhile (my $row = &lt;$fh&gt;) {\n  $len = length $row;\n  last;\n};\n</code></pre>\n\n<p>Now I want to read that file from mid row +100 bytes, how do I do that?</p>\n\n<p>Something like </p>\n\n<pre><code>read ($fh, 100, $len/2)\n</code></pre>\n\n<p>Cannot really figure out the proper syntax.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1517268950, "post_id": 48511674, "comment_id": 84018317, "body": "Your &quot;static hostname&quot; doesn&#39;t look static, or like a hostname, and it&#39;s not clear where the information is supposed to come from."}, {"owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1517269801, "post_id": 48511674, "comment_id": 84018556, "body": "@hobbs the 10.10.10.10 &quot;count&quot; is pulled from the netstat -an.... the hostname isn&#39;t pulled from anywhere. example 10.10.10.10 = cheeseburgers."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517279004, "post_id": 48511674, "comment_id": 84020667, "body": "Again, where does <code>cheeseburgers</code> come from?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517287649, "post_id": 48511674, "comment_id": 84022674, "body": "You can use <code>dig</code> to perform a reverse lookup for you.  <code>dig -x 8.8.8.8</code>"}, {"owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517289963, "post_id": 48511674, "comment_id": 84023331, "body": "@ikegami I think I&#39;m explaining this terribly. cheeseburgers doesn&#39;t come from anywhere, I just want to include the word <code>cheeseburgers</code> after the ip address <code>10.10.10.10</code> as an example. My whole goal is to have more information about each IP address in &quot;my <code>%minimum</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517290202, "post_id": 48511674, "comment_id": 84023400, "body": "But what if the address isn&#39;t 10.10.10.10. How do you determine what to use then?"}, {"owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517290400, "post_id": 48511674, "comment_id": 84023477, "body": "Thanks @xxfelixxx for your suggestion. I&#39;m not looking for a reverse dns lookup. I&#39;m trying manually add each hostname next to each IP address without pulling It from anywhere. another example would be <code>10.10.10.10: this_is_a_dallas_connection OK! Expected = 2 Actual =  2</code> <code>10.10.10.11: this_is_a_georga_connection OK! Expected = 3 Actual =  3</code>"}, {"owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517290634, "post_id": 48511674, "comment_id": 84023558, "body": "@ikegami I&#39;m trying to set each IP with a note. in the example above the output would say <code>10.10.10.10 cheeseburger OK! Expected = 2 Actual =  2</code>  <code>10.10.10.11 hotdog OK! Expected = 3 Actual =  3</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517290656, "post_id": 48511674, "comment_id": 84023567, "body": "What&#39;s the note for 10.10.10.12?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517290835, "post_id": 48511674, "comment_id": 84023629, "body": "What&#39;s the note for 10.10.10.13?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517290851, "post_id": 48511674, "comment_id": 84023635, "body": "You realize there are 4 billion different IPv4 addresses. This is going to take a long time to get this info from you unless you tell us where these notes are coming from."}, {"owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517290918, "post_id": 48511674, "comment_id": 84023659, "body": "@ikegami because I already know where the connection is coming from. so <code>10.10.10.10</code> always comes from a dallas connection. <code>10.10.10.11</code> always comes from a georga connection. <code>10.10.10.12</code> always comes form an Nebraska connection. So the note comes from my own understanding of where the connection is coming from"}, {"owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517291094, "post_id": 48511674, "comment_id": 84023713, "body": "@ikegami there are only 4 possible IP addressing coming into a single port number. those IP&#39;s will only be <code>10.10.10.10</code> <code>10.10.10.11</code> <code>10.10.10.12</code> and <code>10.10.10.13</code> which I&#39;m just trying to put a note of what each of the 4 possible ip address represents."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517303751, "post_id": 48511674, "comment_id": 84029930, "body": "Your statement <code>next if $count{$ip} == $expected &amp;&amp; print color(&quot;green&quot;), ...</code> does <code>next if $count{$ip} == ( $expected &amp;&amp; print color(&quot;green&quot;), ...)</code> so it will pretty much always compare <code>$count{$ip}</code> to 1. You could use <code>and</code> instead of <code>&amp;&amp;</code>, but I would prefer to see <code>if ( $count{$ip} == $expected ) { print color(&quot;green&quot;), ...; next; }</code> (on multiple lines)."}], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1517308850, "post_id": 48514732, "comment_id": 84033382, "body": "Thank you for this code snippet, which might provide some limited short-term help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its long-term value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with other, similar questions.  Please <a href=\"https://stackoverflow.com/posts/48514732/edit\">edit</a> your answer to add some explanation, including the assumptions you&#39;ve made."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1517326262, "post_id": 48514732, "comment_id": 84044893, "body": "@Toby Speight, Did you find an actual problem, or are you one of those that believe in adding comments like &quot;this is a substitute operator&quot;? If it&#39;s the former, identify the issue and I&#39;ll be happy to expand on it. If on the other hand you believe on adding comments for the sake of adding comments, then I find that detrimental."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1517329224, "post_id": 48514732, "comment_id": 84046965, "body": "Oh no, just repeating the code in words is pointless.  I&#39;m more interested in <i>why</i> this is a good solution.  I can see that it&#39;s a lot more compact; perhaps that&#39;s the most relevant point.  It might also be worth mentioning the care you&#39;ve taken to accept both found and unfound results.  Really, what makes this a better answer than any other?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1517329681, "post_id": 48514732, "comment_id": 84047241, "body": "Re &quot;<i>I&#39;m more interested in why this is a good solution.</i>&quot;, Because it works, it&#39;s clean, and self-explanatory. I don&#39;t see myself adding that to the question."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1517291579, "creation_date": 1517291579, "answer_id": 48514732, "question_id": 48511674, "link": "https://stackoverflow.com/questions/48511674/perl-issue-trying-to-add-static-text-by-ip-address/48514732#48514732", "title": "Perl Issue trying to add static text by IP address", "body": "<pre><code>my %notes = (\n   '10.10.10.10' =&gt; 'cheeseburger',\n   '10.10.10.11' =&gt; 'hotdog',\n   '10.10.10.12' =&gt; '...',\n   '10.10.10.13' =&gt; '...',\n);\n\ns{^([^:]*):\\K}{ defined($notes{$1}) ? \" $notes{$1}\" : \"\" }e;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "edited": false, "score": 0, "creation_date": 1517329318, "post_id": 48514756, "comment_id": 84047026, "body": "Thanks! This solution is very clear and works great. I tried to up-vote but my account is too new. Thanks again!"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1517291706, "creation_date": 1517291706, "answer_id": 48514756, "question_id": 48511674, "link": "https://stackoverflow.com/questions/48511674/perl-issue-trying-to-add-static-text-by-ip-address/48514756#48514756", "title": "Perl Issue trying to add static text by IP address", "body": "<p>You could create a second hash to keep the info, keyed on the ip addresses, or you could create a nested data structure like so:</p>\n\n<pre><code>my %minimum = (\n    '10.10.10.10' =&gt; { label =&gt; 'hotdog', count =&gt; 2 },\n    '10.10.10.11' =&gt; { label =&gt; 'burger', count =&gt; 3 },\n    '10.10.10.12' =&gt; { label =&gt; 'steak',  count =&gt; 6 },\n    '10.10.10.13' =&gt; { label =&gt; 'pizza',  count =&gt; 7 },\n);\n</code></pre>\n\n<p>and then later, when you need the info, you can retrieve it:</p>\n\n<pre><code>while(my ($ip, $data) = each %minimum) {\n    $count{$ip} ||= 0;\n    my $label = $data-&gt;{label};\n    my $expected = $data-&gt;{count};\n    # ... rest of code here ...\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9286143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1479d1a5155f4ead97329793b63d565f?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Robertson", "link": "https://stackoverflow.com/users/9286143/frank-robertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 48514756, "answer_count": 2, "score": 0, "last_activity_date": 1517291706, "creation_date": 1517268549, "question_id": 48511674, "link": "https://stackoverflow.com/questions/48511674/perl-issue-trying-to-add-static-text-by-ip-address", "title": "Perl Issue trying to add static text by IP address", "body": "<p>I have a script that has an exact count of IP address' being compared to an expected count of IP address going though a specific port. </p>\n\n<p>Code:</p>\n\n<pre><code>my %minimum = (\n    '10.10.10.10' =&gt; 2,\n    '10.10.10.11' =&gt; 3,\n    '10.10.10.12' =&gt; 6,\n    '10.10.10.13' =&gt; 7,\n);\nmy %count;\n\nopen my $fh, '-|', 'netstat -an |grep 1111 ' or die \"could not run netstat: $!\";\nwhile(&lt;$fh&gt;) {\n    next unless /^\\s*............(regex) /;\n    $count{$1}++;\n}\nclose $fh;\n\nwhile(my ($ip, $expected) = each %minimum) {\n    $count{$ip} ||= 0;\n    next if $count{$ip} == $expected &amp;&amp; print color(\"green\"), \"$ip: OK! Expected = $expected count =  $count{$ip}\\n\", color(\"reset\");\n    print color(\"red\"), \"$ip: BAD! Expected = $expected count =  $count{$ip}\\n\", color(\"reset\");\n}\n</code></pre>\n\n<p>I'm trying to add a static hostname. Currently an example output looks like:</p>\n\n<pre><code>10.10.10.10: OK! Expected = 2 Actual =  2\n10.10.10.11: OK! Expected = 3 Actual =  3\n10.10.10.12: OK! Expected = 6 Actual =  6\n10.10.10.13: BAD! Expected = 7 Actual =  5\n</code></pre>\n\n<p>But I want to include a static hostname to look like below:</p>\n\n<pre><code>10.10.10.10: aaaa@aa.com OK! Expected = 2 Actual =  2\n10.10.10.11: bbb@aa.com OK! Expected = 3 Actual =  3\n10.10.10.12: ccc@aa.com OK! Expected = 6 Actual =  6\n10.10.10.13: ddd@aa.com BAD! Expected = 7 Actual =  5\n</code></pre>\n\n<p>Thank you all for any recommendations/tips. </p>\n"}, {"tags": ["perl", "vim", "vim-plugin", "syntastic"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517267374, "post_id": 48511236, "comment_id": 84017811, "body": "Please check my edits (link and tags), as I had to guess a little"}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "edited": false, "score": 0, "creation_date": 1517312591, "post_id": 48511236, "comment_id": 84035716, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30486762/perl-syntaxcheck-add-path\">Perl Syntaxcheck: Add path</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 1, "creation_date": 1517299565, "post_id": 48511373, "comment_id": 84027543, "body": "If only there was something like, you know, a manual, documenting all these arcane variables...  Oh, wait, never mind."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 0, "creation_date": 1517327263, "post_id": 48511373, "comment_id": 84045606, "body": "It&#39;s actually not in the documentation in vim. I read through it. It&#39;s in a wiki I had no idea existed."}, {"owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 0, "creation_date": 1517330751, "post_id": 48511373, "comment_id": 84047906, "body": "The contents of the wiki has been included in the manual years ago.  Try <code>:h syntastic-perl-perl</code>."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 0, "creation_date": 1517499920, "post_id": 48511373, "comment_id": 84129227, "body": "That doesn&#39;t help me know that it existed either. Nothing in :h syntastic would let me know that help file even existed. You can&#39;t read documentation you don&#39;t know exists."}, {"owner": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 0, "creation_date": 1517502093, "post_id": 48511373, "comment_id": 84130722, "body": "From the &quot;Intro&quot; section in the help: <i>Take a look at the list of supported filetypes and checkers: <code>syntastic-checkers</code>.</i>"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 1, "creation_date": 1517502423, "post_id": 48511373, "comment_id": 84130951, "body": "That&#39;s about as clear as mud where I can find the help. So I guess when reading documentation I can no longer rely on scanning it but I need to pore through everything the documentation says in order uncover hidden settings in obscure sections of the documentation. Clearly, this is not helpful. Your position is clearly indefensible."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 5271, "user_id": 1658042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=128&d=identicon&r=PG", "display_name": "lcd047", "link": "https://stackoverflow.com/users/1658042/lcd047"}, "edited": false, "score": 0, "creation_date": 1517502798, "post_id": 48511373, "comment_id": 84131205, "body": "Much better would be, in the Intro, in bold and in color: This documentation covers only the core syntastic plugin. For documentation on language-specific syntax checkers use :help syntastic-&lt;language&gt;-&lt;language&gt;."}], "tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": 4, "last_activity_date": 1517266539, "creation_date": 1517266539, "answer_id": 48511373, "question_id": 48511236, "link": "https://stackoverflow.com/questions/48511236/is-there-a-way-to-tell-syntastic-which-library-to-use-to-avoid-inc-errors/48511373#48511373", "title": "Is there a way to tell syntastic which library to use to avoid @INC errors", "body": "<p>Found the answer. Place following in <code>.vimrc</code> file:</p>\n\n<p><code>let g:syntastic_perl_lib_path = ['lib' ]</code></p>\n\n<p>From: <a href=\"https://stackoverflow.com/questions/30486762/perl-syntaxcheck-add-path\">Perl Syntaxcheck: Add path</a></p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1517267347, "creation_date": 1517265769, "last_edit_date": 1517267347, "question_id": 48511236, "link": "https://stackoverflow.com/questions/48511236/is-there-a-way-to-tell-syntastic-which-library-to-use-to-avoid-inc-errors", "title": "Is there a way to tell syntastic which library to use to avoid @INC errors", "body": "<p>I'm editing a test file which is typically run with <code>prove -l</code> which automatically includes the <code>lib</code> directory when searching for packages to load. When editing the file, <a href=\"https://github.com/vim-syntastic/syntastic\" rel=\"nofollow noreferrer\">vim-syntastic</a> reports it can't find the needed packages because it is not looking in the <code>lib</code> directory.</p>\n\n<p>Is there a way to tell <code>syntastic</code> to include the <code>lib</code> directory in the @INC so I can avoid the <code>Can't locate Blah::Blah.pm in @INC</code> error without having to do <code>use lib 'lib'</code> at the top of my file?</p>\n"}, {"tags": ["perl", "variables"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 7, "creation_date": 1517264871, "post_id": 48510879, "comment_id": 84016949, "body": "Does <a href=\"https://stackoverflow.com/a/20890822/589924\">this</a> answer your question? It&#39;s not about getting the program to run; it&#39;s about creating robust, maintainable programs."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1517264884, "post_id": 48510879, "comment_id": 84016954, "body": "By the way, along the same lines, you should use <code>open my $text, ..</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 4, "creation_date": 1517267675, "post_id": 48510879, "comment_id": 84017909, "body": "A practical take: simply <i>always</i> have <code>use warnings;</code> and <code>use strict;</code> and consider them as built-in and not optional. So warnings and errors are precisely that and need be addressed."}], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 3414053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gENLF.png?s=128&g=1", "display_name": "lanti", "link": "https://stackoverflow.com/users/3414053/lanti"}, "is_accepted": false, "score": 1, "last_activity_date": 1517313147, "creation_date": 1517313147, "answer_id": 48520808, "question_id": 48510879, "link": "https://stackoverflow.com/questions/48510879/what-happens-when-instead-of-creating-variables-with-my-you-only-specify-the/48520808#48520808", "title": "What happens when instead of creating variables with &#39;my&#39;, you only specify the name of the variable in Perl?", "body": "<p>You are right, that without <code>use strict</code> you can leave away the <code>my</code> and the program will do its work. This is ok in a two-liner like this one:</p>\n\n<pre><code>$text_to_print = 'hello there';\nprint \"$text_to_print\\n\";\n</code></pre>\n\n<p>But even in this example a small typo may give you an unexpected result and within a more complex program you wont be able to find it:</p>\n\n<pre><code>$text_to_print = 'hello there';\nprint \"$text_t_print\\n\";\n# will print an empty line only\n</code></pre>\n\n<p>If you add <code>use strict;</code> and <code>use warnings;</code> plus <code>my</code> the variable you will get warned about your typo.</p>\n\n<pre><code>use warnings;\nuse strict;\n\n$text_to_print = 'hello there';\nprint \"$text_t_print\\n\";\n# will print to stderr: Global symbol \"$text_t_print\" requires explicit package name at untitled.pl line 5....\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 9053226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1XNt.jpg?s=128&g=1", "display_name": "A Gold Man", "link": "https://stackoverflow.com/users/9053226/a-gold-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1517340244, "last_edit_date": 1517340244, "creation_date": 1517333712, "answer_id": 48527344, "question_id": 48510879, "link": "https://stackoverflow.com/questions/48510879/what-happens-when-instead-of-creating-variables-with-my-you-only-specify-the/48527344#48527344", "title": "What happens when instead of creating variables with &#39;my&#39;, you only specify the name of the variable in Perl?", "body": "<p>What <code>my</code> does is it makes the variable lexical to the current scope. Normally in perl, variables are global, and changes to them in a scope effect all other scopes. With my, all changes to the variable are local.</p>\n\n<p>There are two very clear differences between the usage of a lexical or a global variable: one is with recursive functions, and the other with closures.</p>\n\n<p>If you would want to calculate something recursively (say, to calculate factorials), if you would use a global variable, each successive call to the function would clobber the previous one, leaving you with a useless function.</p>\n\n<p>Here's an example in practice:</p>\n\n<pre><code>sub Factorial {\n  $arg = shift; #pull the argument off\n  return 1 if $first == 0; #stopping condition\n  return $arg * Factorial($arg-1); #recurse\n} \n</code></pre>\n\n<p>This will always return 0, because as the functions recurse further towards 0, they keep clobbering the <code>$arg</code> variable, until it finally returns 1. But by the time it makes its way back up the chain to our value, it keeps multiplying by the global value of <code>$arg</code>, which is zero.</p>\n\n<p>This is immediately solved with the addition of the <code>my</code> operator, which will make <code>$arg</code> lexical. This means that each call to the function has its own conception of what <code>$arg</code> is, allowing our recursive call to succeed.</p>\n\n<p>Closures are another interesting aspect of lexical variables. It's possible to create anonymous subroutines (called <code>lambda</code>s in python and other languages) in perl by using <code>sub</code> without a name. A good use for these types of functions is to save some aspect of the current state to be used for later. (I have a heavy background in TeX, and there, closures are constantly used, it's the <code>\\edef</code> primitive).</p>\n\n<p>Closures can be used in memoization, which is saving the results of processing heavy functions in memory. An example would be as follows to create a function which memoizes another function:</p>\n\n<pre><code>sub Memoize {\n  my $func = shift; #pull function name off the argument stack\n  my %cache;        #prepare to memoize\n  my $stub = sub {  # anonymous function\n      my $key = shift; \n      $cache{$key} = $func-&gt;($key) unless exists $cache{$key};\n      #this caches the result if it doesn't exist\n      return $cache{$key};\n    };\n  return $stub;\n};\n</code></pre>\n\n<p>This function decorates an existent one argument recursive function ref (given as <code>\\&amp;Factorial</code> with the functionality of memoization (practically you would want to use the Memoize module for this, but this is just to show the concept of closure). This would break horribly if not for the various lexical variables. The cache would be shared between all decorated functions. The closure here is that the value of our cache is available to any time we call the returned function, even though outside that function we can continue to use a different hash named <code>%cache</code>.</p>\n\n<p>Both of these examples are basically taken from the book Higher Order Perl, which is excellent. It helps you understand that perl is a serious programming language, not just a way to write administrative scripts.\nOf course, the other answer has the practical reason for why to <code>use strict</code>, but there's a whole 'nother world as to what lexicals are.</p>\n\n<p>If you're wondering, the way to get global variables with <code>use strict</code> is to precede them either with <code>our</code> or with <code>main::</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 9285515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d17f5b8c4a5d1983a9dff16996d33a?s=128&d=identicon&r=PG&f=1", "display_name": "votresignu", "link": "https://stackoverflow.com/users/9285515/votresignu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1517340244, "creation_date": 1517264103, "question_id": 48510879, "link": "https://stackoverflow.com/questions/48510879/what-happens-when-instead-of-creating-variables-with-my-you-only-specify-the", "title": "What happens when instead of creating variables with &#39;my&#39;, you only specify the name of the variable in Perl?", "body": "<p>I have noticed many times that my code works without any bugs/issues when I do not use <code>my</code> to create my variables. </p>\n\n<p>I will give an example (this is just an excerpt from a script);</p>\n\n<pre><code>use warnings;\nuse strict;\n\n$filename=shift;\nopen text, $filename or die \"error\";\n</code></pre>\n\n<p>When I execute that, I get an error that goes like this:</p>\n\n<pre><code>Global symbol \"$filename\" requires explicit package name at script.pl line 12.\n</code></pre>\n\n<p>That error disappears when I change <code>$filename=shift</code> to <code>my $filename=shift</code>, and then I am able to run my code and receive the results.</p>\n\n<p>However, <strong>without</strong> writing <code>my</code>, when I remove <code>use warnings</code> and <code>use strict</code>, the code also works normally and I get the <strong>same results</strong> from the script as I got from the one with <code>my</code>.</p>\n\n<p><strong>My question:</strong></p>\n\n<p>If skipping <code>my</code> is a mistake and leads to an error, then why does the code function properly? What is happening and what can actually happen when <code>my</code> is not written? Can it, in some cases, lead to bugs and strange issues?</p>\n"}, {"tags": ["regex", "perl", "latex"], "comments": [{"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 1, "creation_date": 1517290092, "post_id": 48509953, "comment_id": 84023368, "body": "Can I recommend you click on the [regex] tag, then Learn More\u2026 <a href=\"https://stackoverflow.com/tags/regex/info\">stackoverflow.com/tags/regex/info</a> then go to one of the sandboxes, and try out your sample input with a regular expression you iteratively work on."}, {"owner": {"reputation": 3418, "user_id": 738762, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0ef9a1ef193431ba6a0e2fc5c71ab22d?s=128&d=identicon&r=PG", "display_name": "nomen", "link": "https://stackoverflow.com/users/738762/nomen"}, "reply_to_user": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1517332296, "post_id": 48509953, "comment_id": 84048825, "body": "@dlamblin: thank you, I am trying one now."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1519014729, "post_id": 48509953, "comment_id": 84722526, "body": "The last, added part, exposes a careless bug in my answer, whereby the trailing <code>.*</code> matched (and removed!) all the rest.  Sorry about that (please leave a comment and tag the user when something like this happens; I accidentally noticed the addition to the question). I edited the answer and fixed that."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1519014575, "last_edit_date": 1519014575, "creation_date": 1517264997, "answer_id": 48511091, "question_id": 48509953, "link": "https://stackoverflow.com/questions/48509953/perl-regular-expression-for-extracting-multi-line-latex-chapter-name/48511091#48511091", "title": "Perl Regular Expression for extracting multi-line LaTeX chapter name", "body": "<p>If you can only have the shown pairs of <code>{...}</code></p>\n\n<pre><code>s/\\\\chapter{\\\\texorpdfstring{{ .*? }\\s*{ (.*?) }}\\s*{.*?}}/\\\\chapter{$1}/gsx;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s/(\\\\chapter){\\\\texorpdfstring{{.*?}\\s*{(.*?)}}\\s*{.*?}}/${1}{$2}/gs;\n</code></pre>\n\n<p>where <code>${1}</code> (for <code>$1</code>) is needed for syntax, as <code>$1{...</code> would be interpreted as a value of <code>%1</code>.</p>\n\n<p>Or, rather</p>\n\n<pre><code>s/\\\\chapter\\K{\\s*\\\\texorpdfstring{{.*?}\\s*{(.*?)}}\\s*{.*?}}/{$1}/gs\n</code></pre>\n\n<p>where the <a href=\"https://perldoc.perl.org/perlre.html#Lookaround-Assertions\" rel=\"nofollow noreferrer\"><code>\\K</code> form of lookbehind</a> drops previous matches. I still leave <code>{</code> to retype for a possibly clearer replacement part.</p>\n\n<p>Please sprinkle this with <code>\\s*</code> where there may be spaces.</p>\n\n<p>Also note the <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm#edit,_edit_raw,_edit_utf8\" rel=\"nofollow noreferrer\">Path::Tiny::edit_utf8</a></p>\n\n<pre><code>path($filename)-&gt;edit_utf8( sub { s/.../.../gs } );  # regex as above\n</code></pre>\n\n<p>which applies the anonymous sub to the slurped file, as opposed to <code>edit_lines</code>.</p>\n\n<p>If the braced expressions can be nested more freely (say with <code>{\\em ... }</code> and such) a far more systemic approach is needed.  See for example <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> and search for \"nested delimiters.\" </p>\n\n<hr>\n\n<p>Some regex resources</p>\n\n<p>Perl documentation</p>\n\n<ul>\n<li><p><a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>, a tutorial </p></li>\n<li><p><a href=\"https://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">perlrequick</a>, a quick-start introduction</p></li>\n<li><p><a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>, the full account of syntax</p></li>\n<li><p><a href=\"https://perldoc.perl.org/perlreref.html\" rel=\"nofollow noreferrer\">perlreref</a>, a quick reference (its <a href=\"https://perldoc.perl.org/perlreref.html#SEE-ALSO\" rel=\"nofollow noreferrer\">See Also</a> section is useful on its own)</p></li>\n</ul>\n\n<p>Stackoverflow</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/tags/regex/info\">Regex info</a> &nbsp; An entry portal with resources</p></li>\n<li><p><a href=\"https://stackoverflow.com/q/22937618/4653379\">Reference: What does this regex mean?</a>  A gargantuan list of FAQs with links to SO posts</p></li>\n<li><p><a href=\"https://stackoverflow.com/a/2759417/4653379\">Learning Regular expressions</a> &nbsp; An overview with a long list of resources at the end</p></li>\n</ul>\n\n<p><a href=\"https://www.regular-expressions.info/\" rel=\"nofollow noreferrer\">Regular-Expressions.info</a></p>\n"}], "owner": {"reputation": 3418, "user_id": 738762, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0ef9a1ef193431ba6a0e2fc5c71ab22d?s=128&d=identicon&r=PG", "display_name": "nomen", "link": "https://stackoverflow.com/users/738762/nomen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 48511091, "answer_count": 1, "score": 2, "last_activity_date": 1519014575, "creation_date": 1517259926, "last_edit_date": 1517288087, "question_id": 48509953, "link": "https://stackoverflow.com/questions/48509953/perl-regular-expression-for-extracting-multi-line-latex-chapter-name", "title": "Perl Regular Expression for extracting multi-line LaTeX chapter name", "body": "<p>I am having a hard time figuring out how to perform a regex substitution to clean up some text in a LaTeX file.  The LaTeX file looks like</p>\n\n<pre><code>\\chapter{\\texorpdfstring{{II} {The Chapter \nTitle}}{II The Chapter Title}}\n</code></pre>\n\n<p>Annoyingly, this is a multi-line chapter declaration, and the new line can occur virtually anywhere.  I can't use the common <code>&lt;&gt;</code> idioms to just read the file line by line and perform the straight-forward regular expression.</p>\n\n<p>Instead, I am trying this:</p>\n\n<pre><code>#!/usr/bin/perl -i.old     # In-place edit, backup as '.old'\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\n\nmy $filename = shift or die \"Usage: $0 FILENAME\";\nmy $content = path($filename)-&gt;slurp_utf8;\n\n$content =~ s|\\\\chapter\\{.*\\{[IVXLCDM]*\\s*(.*)\\}\\}|\\\\chapter{$1}|gms;\npath($filename)-&gt;spew_utf8($content);\n</code></pre>\n\n<p>However, the regular expression is far too greedy, and begins a match at the first <code>\\chapter</code> declaration and ends it at the last <code>chapter</code> declaration.  All I want is to</p>\n\n<ol>\n<li>remove the <code>\\texorpdfstring</code>.</li>\n<li>remove the roman numeral</li>\n<li>remove the multiple appearances of the chapter title</li>\n</ol>\n\n<p>so that my substitution on</p>\n\n<pre><code>\\chapter{\\texorpdfstring{{I} {The First \nChapter}}{I The First Chapter}}\n\nIt was the best of times.\n\n\\chapter{\\texorpdfstring{{II} {The Second \nChapter}}{II The Second Chapter}}\n\nIt was the worst of times.\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>\\chapter{The First Chapter}\n\nIt was the best of times.\n\n\\chapter{The Second Chapter}\n\nIt was the worst of times.\n</code></pre>\n\n<p>What can I do now?</p>\n\n<p>Edit:  I changed the demo text.  </p>\n\n<hr>\n\n<p>If I understood @zdim correctly, he wrote down the substitution without escaping the braces {}'s, to make it easier to validate.  Fair enough.  I tried @zdim's solution but it output:</p>\n\n<pre><code>\\chapter{The First\nChapter}\n\nIt was the worst of times.\n</code></pre>\n"}, {"tags": ["regex", "perl", "capture-group"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517266826, "post_id": 48508926, "comment_id": 84017643, "body": "Always add <a href=\"https://perldoc.perl.org/perlvar.html#%24!\" rel=\"nofollow noreferrer\"><code>$!</code> variable</a> to an error message to see the reason, <code>... or die &quot;... : $!\\n&quot;;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517266913, "post_id": 48508926, "comment_id": 84017668, "body": "Lexical filehandles are better, <code>open my $fh, ....; while (my $line = &lt;$fh&gt;) { }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1517260273, "last_edit_date": 1517260273, "creation_date": 1517257406, "answer_id": 48509389, "question_id": 48508926, "link": "https://stackoverflow.com/questions/48508926/how-to-highlight-capture-groups-e-g-with-brackets-around-them-in-the-entire-m/48509389#48509389", "title": "How to highlight capture groups (e.g. with brackets around them) in the entire match output in Perl", "body": "<pre><code>push @matches, \"($1)$2($4)\"\n    while\n        $line =~ m{\n            ( [ACGT]{6} )\n            ( CTGA\n              [ACGT]\n              GAG\n              ( [ACGT]{3,6} )\n              [ACGT]{2,100}\n              (??{ $3 =~ tr/ACGT/TGCA/r })\n            )\n            ( CGAAA [ACGT] )\n        }xgi;\n</code></pre>\n\n<p>With named captures:</p>\n\n<pre><code>#push @matches, sprintf \"(%s)%s(%s)\", @+{qw( pre main suf )}\npush @matches, \"($+{pre})$+{main}($+{suf})\"\n    while\n        $line =~ m{\n            (?&lt;pre&gt; [ACGT]{6} )\n            (?&lt;main&gt; CTGA\n              [ACGT]\n              GAG\n              ( [ACGT]{3,6} )\n              [ACGT]{2,100}\n              (??{ $^N =~ tr/ACGT/TGCA/r })\n            )\n            (?&lt;suf&gt; CGAAA [ACGT] )\n        }xgi;\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9285515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d17f5b8c4a5d1983a9dff16996d33a?s=128&d=identicon&r=PG&f=1", "display_name": "votresignu", "link": "https://stackoverflow.com/users/9285515/votresignu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 48509389, "answer_count": 1, "score": 2, "last_activity_date": 1517260273, "creation_date": 1517255430, "last_edit_date": 1517259355, "question_id": 48508926, "link": "https://stackoverflow.com/questions/48508926/how-to-highlight-capture-groups-e-g-with-brackets-around-them-in-the-entire-m", "title": "How to highlight capture groups (e.g. with brackets around them) in the entire match output in Perl", "body": "<p>I have the following code which successfully prints out all of the strings that match my regex into the console (<code>perl myscript.pl sample_text.txt</code>).</p>\n\n<pre><code>$filename=shift;\nopen text, $filename or die \"error opening $filename\\n\";\n\nwhile (my $line = &lt;text&gt;) {\n    push @matches, $1 while $line\n        =~ m{\n          (( [ACGT]{6} )\n          CTGA\n          [ACGT]\n          GAG\n          ( [ACGT]{3,6} )\n          [ACGT]{2,100}\n          (??{ $3 =~ tr/ACGT/TGCA/r })\n          ( CGAAA[ACGT] ))\n        }xgi;\n}\n\nprint \"$_\\n\" for @matches;\n</code></pre>\n\n<p><strong><em>(This is only a simplified version of my regex and my capture groups are much more complicated and do not have fixed length.)</em></strong></p>\n\n<p>My sample_text can be downloaded <a href=\"https://ufile.io/y7z3m\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I want the output to be as it is (one match per line), but I want the sub-strings that matched the <strong>first</strong> <code>( [ACGT]{6} )</code> and <strong>last</strong> <code>( CGAAA[ACGT] )</code> capture groups in my regex to have brackets around them when the entire match is printed in the console.</p>\n\n<p>To give an example, when I run the entire script above on the sample file I have attached (<code>sample_text</code>), one of the matching results I get is:</p>\n\n<p><code>TTTATGCTGATGAGAAAAAACATAAGAAAACGTATAATTTTTTCTAAAAAAGGAAAAAAGACCGAAATTTTAAGCTGTTTTTCGAAAA</code></p>\n\n<p>I instead want to see such an output:</p>\n\n<p><code>(TTTATG)CTGATGAGAAAAAACATAAGAAAACGTATAATTTTTTCTAAAAAAGGAAAAAAGACCGAAATTTTAAGCTGTTTTT(CGAAAA)</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1517244974, "post_id": 48506196, "comment_id": 84006805, "body": "Are you asking how to print to a file instead of standard output? Or are you asking how to call something (e.g. a perl script) with output redirection? Both seems so simple a question that I deduce that your phrasing of what you actually need is unclear. If you are asking one of the two things, then your question qualifies as &quot;not helpful or unclear and does not show any research effort&quot;; which is of course the definition of when to click the downvote button. In your favor I bet on &quot;unclear&quot;."}, {"owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "edited": false, "score": 0, "creation_date": 1517245123, "post_id": 48506196, "comment_id": 84006908, "body": "I meant to ask how to print to a file instead of standard output? Sorry If I was not clear at first"}], "answers": [{"comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1517309372, "post_id": 48506424, "comment_id": 84033727, "body": "the better method <code>open (my $fh, &quot;&gt;&quot;, &quot;&#47;home&#47;vibes&#47;text&quot;) || die &quot;Failed to open &#47;home&#47;vibes&#47;text $!&quot;;</code> and also always <code>close($fh);</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": -2, "last_activity_date": 1517245439, "creation_date": 1517245439, "answer_id": 48506424, "question_id": 48506196, "link": "https://stackoverflow.com/questions/48506196/how-to-re-direct-the-contents-to-a-file-instead-of-printing-it-to-terminal/48506424#48506424", "title": "How to re-direct the contents to a file instead of printing it to terminal", "body": "<p>The default filehandle in perl is <code>STDOUT</code>. You can change it with a call to <a href=\"http://metacpan.org/pod/perlfunc#select\" rel=\"nofollow noreferrer\"><code>select</code></a>:</p>\n\n<pre><code>print \"Hello\\n\";          # goes to stdout\n\nopen my $fh, '&gt;', '/home/vibes/text';\nselect($fh);\n\nprint \"World\\n\";          # goes to file '/home/vibes/text'\n</code></pre>\n\n<p>From your shell, output redirection is usually a matter of appending <code>&gt; file</code> to your command. This is true in both Unix-y systems and on Windows.</p>\n\n<pre><code>$ perl my_script.pl &gt; /home/vibes/text\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 0, "last_activity_date": 1517309721, "creation_date": 1517309721, "answer_id": 48519694, "question_id": 48506196, "link": "https://stackoverflow.com/questions/48506196/how-to-re-direct-the-contents-to-a-file-instead-of-printing-it-to-terminal/48519694#48519694", "title": "How to re-direct the contents to a file instead of printing it to terminal", "body": "<p>Simply use the <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">3 argument</a> open method.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $line = \"Hello Again!\";\nopen (my $fh, \"&gt;\", \"/home/vibes/text\") || die \"Failed to open /home/vibes/text $!\";\nprint $fh \"$line\\n\";\nclose($fh); # Always close opened files.\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8191890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10210222397819480/picture?type=large", "display_name": "Vibes", "link": "https://stackoverflow.com/users/8191890/vibes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 48519694, "answer_count": 2, "score": -5, "last_activity_date": 1517309721, "creation_date": 1517244632, "last_edit_date": 1517244686, "question_id": 48506196, "link": "https://stackoverflow.com/questions/48506196/how-to-re-direct-the-contents-to-a-file-instead-of-printing-it-to-terminal", "title": "How to re-direct the contents to a file instead of printing it to terminal", "body": "<p>How to avoid printing the contents to terminal (As it will take more time if it is 20k lines in my case) and instead redirect it to a file in perl?</p>\n\n<p>This is just a sample and not the entire code:</p>\n\n<pre><code> if ($count eq $length)\n                {\n                    push(@List,$line);\n                    print \"$line\\n\"; #Prints line to terminal which is time consuming\n                }\n</code></pre>\n\n<p>I tried below but it did not work</p>\n\n<pre><code>if ($cnt eq $redLen)\n                    {\n                        push(@List,$line);\n                        print $line &gt; \"/home/vibes/text\";\n                    }\n</code></pre>\n\n<p>Please let me know if my question is not clear?</p>\n"}, {"tags": ["perl", "printf", "exiftool"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1517235715, "post_id": 48502867, "comment_id": 84000359, "body": "What do you intend by <code>%0d</code>?"}, {"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517253465, "post_id": 48502867, "comment_id": 84011593, "body": "Forces leading zeros instead of spaces."}], "answers": [{"comments": [{"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 1, "creation_date": 1517235429, "post_id": 48503076, "comment_id": 84000178, "body": "As I said, I <i>did</i> want five decimal places (temporarily).  And the seconds of any latitude or longitude are <i>never</i> &quot;510.&quot;  The correct value is &quot;51&quot; as I also stated.   Did you read the entire thing?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517235665, "post_id": 48503076, "comment_id": 84000325, "body": "Yes, I read the whole thing - if you want 5 decimal places, you want the first number to be bigger than 5 then - <code>%8.5f</code> for example"}, {"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517253326, "post_id": 48503076, "comment_id": 84011530, "body": "Sorry, typo.  I wrote that I had tried that, but somehow wrote it wrong.  Edited to fix."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": -2, "last_activity_date": 1517234555, "creation_date": 1517234555, "answer_id": 48503076, "question_id": 48502867, "link": "https://stackoverflow.com/questions/48502867/printf-number-format-for-constant-width-lat-long-in-exiftool/48503076#48503076", "title": "printf number format for constant width lat/long in exiftool", "body": "<p>First number is the width, second number is the number of decimal points so what you have currently (<code>%2.5f</code>) appears to be backwards. <code>%5.2f</code> would give you a number that occupies 5 characters and has 2 decimal places. For a number as big as 510, you probably want to make it <code>%6.2f</code></p>\n"}, {"comments": [{"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517254116, "post_id": 48504091, "comment_id": 84011910, "body": "Your answer was partly based on a typo in the third from end paragraph, which is now fixed."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1517237740, "creation_date": 1517237740, "answer_id": 48504091, "question_id": 48502867, "link": "https://stackoverflow.com/questions/48502867/printf-number-format-for-constant-width-lat-long-in-exiftool/48504091#48504091", "title": "printf number format for constant width lat/long in exiftool", "body": "<p>The <code>%0d</code> is throwing you off. That part of the template is consuming the \"51.0\" seconds component of the coordinate, leaving nothing for the <code>%02.5d</code> part of the template.</p>\n\n<pre><code>printf \"%0d\", 51         ===&gt;   \"51\"\nprintf \"%02.5f\";         ===&gt;   \"0.00000\"\n\nprintf \"%0d%02.5f\", 51   ===&gt;   \"510.00000\"\n</code></pre>\n\n<p>So lose the <code>%0d</code>.</p>\n\n<p>The <code>2</code> in <code>%02.5f</code> also doesn't do you any good. The number before the decimal place is the minimum length of the field, and the number after the decimal place is the number of decimal places to use. Since 5 decimal places will be printed, the output will be at least 7 characters, and the <code>2</code> value will be ignored.</p>\n"}, {"comments": [{"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517253742, "post_id": 48504565, "comment_id": 84011727, "body": "Aha!  I didn\u2019t see that extra %0d\u2014typo.  I did not intend for that to be there!  Thanks!  On the width point, exiftool uses one format string for both, unfortunately.  And it doesn\u2019t need the sign because it puts the compass point after."}, {"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517254247, "post_id": 48504565, "comment_id": 84011988, "body": "But the degrees won\u2019t have a decimal part.  So the only error is the extra %0d"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517255837, "post_id": 48504565, "comment_id": 84012790, "body": "@WGroleau: Okay. The sign flag is either a <code>+</code> to show <code>+</code> / <code>-</code> for positive / negative numbers or a space to show space / <code>-</code>. If you don&#39;t want anything added for a positive value then don&#39;t use either of these. So <code>%0+10.5f</code> becomes <code>%010.5f</code>. If you want fewer fractional digits then reduce both the 10 and the 5 by the same amount, for instance <code>%07.2f</code> will give two decimal places."}, {"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517256268, "post_id": 48504565, "comment_id": 84013033, "body": "The leading zero is because sometimes they will be sorted as strings instead of numbers."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517256573, "post_id": 48504565, "comment_id": 84013223, "body": "@WGroleau: I assumed it was something like that. But if you prefer you can leave it out, which will give you spaces as padding instead. The result will still be sorted correctly."}, {"owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "edited": false, "score": 0, "creation_date": 1517298199, "post_id": 48504565, "comment_id": 84026836, "body": "True.  I forgot that \u201c \u201c is smaller than \u201c0\u201d"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1517253923, "last_edit_date": 1517253923, "creation_date": 1517239352, "answer_id": 48504565, "question_id": 48502867, "link": "https://stackoverflow.com/questions/48502867/printf-number-format-for-constant-width-lat-long-in-exiftool/48504565#48504565", "title": "printf number format for constant width lat/long in exiftool", "body": "<p>It looks like the issue is with the <em>seconds</em> field, for which you have the format specifier <code>%0d%02.5f</code>. I'm not sure what you intended, but there can be only one <code>%</code> for each value to be rendered</p>\n\n<p>If you're formatting longitude then you are dealing with values between -180 and 180. If you want five decimal points then the total width will be</p>\n\n<ul>\n<li>One character for the sign <code>+</code> or <code>-</code></li>\n<li>Three characters for the integer part</li>\n<li>One character for the decimal point <code>.</code></li>\n<li>Five fractional digits</li>\n</ul>\n\n<p>giving a total field width of ten. Your full specifier will be <code>%0+10.5f</code>, giving output between \u00ab-180.00000\u00bb and \u00ab+180.00000\u00bb</p>\n\n<p>You may use a space flag instead of the <code>+</code>, as in <code>%0 10.5f</code>, which will use a space instead of a <code>+</code> to indicate a positive number, rendering 180 as \u00ab 180.00000\u00bb. The leading zero is there so that zeroes are use to fill the full ten character field with</p>\n\n<p>When dealing with latitude, you will need a total width one character smaller. <code>%0+9.5f</code> will result in a range of \u00ab-90.00000\u00bb to \u00ab+90.00000\u00bb. Of course you may use the same format specifier as for longitude, which will produce \u00ab-090.00000\u00bb to \u00ab+090.00000\u00bb. This way the latitude and longitude seconds will have the same number of characters</p>\n"}], "owner": {"reputation": 420, "user_id": 854073, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pREqp.jpg?s=128&g=1", "display_name": "WGroleau", "link": "https://stackoverflow.com/users/854073/wgroleau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 48504565, "answer_count": 3, "score": 0, "last_activity_date": 1517253923, "creation_date": 1517233928, "last_edit_date": 1517253811, "question_id": 48502867, "link": "https://stackoverflow.com/questions/48502867/printf-number-format-for-constant-width-lat-long-in-exiftool", "title": "printf number format for constant width lat/long in exiftool", "body": "<p>Apparently I am misunderstanding the printf man page.  (Or else it's a bug in exiftool 10.55 and 10.77)</p>\n\n<p>I am trying to get GPS coordinates from image files with <a href=\"http://owl.phy.queensu.ca/~phil/exiftool/\" rel=\"nofollow noreferrer\">exiftool</a>.  I would like to make them the same width and without unnecessary spaces.</p>\n\n<p>The format string I tried, and one of the results:</p>\n\n<pre><code>-coordFormat \"%03d\u00b0%02d\u2032%0d%02.5f\u2033\"\n042\u00b037\u2032280.00000\u2033 N, 002\u00b005\u2032510.00000\u2033 W\n</code></pre>\n\n<p>(I don't need five decimal places\u2014I just put that in temporarily to see whether any of the cameras wer being dishonest about the precision.)  The three unnecessary spaces can't be helped; they are outside the format string\u2019s control, but I did get rid of others that were in the default.\u00a0 The leading zero for latitude isn't needed, but it is there because longitude uses the same format string.\u00a0 One problem is the bogus zero inserted between floor(seconds) and its decimal point.  The other problem is the false fractional part.\u00a0 The default format for that file is <code>42 deg 37' 28.39\" N, 2 deg 5' 51.96\" W</code></p>\n\n<p>Someone's \"<a href=\"https://alvinalexander.com/programming/printf-format-cheat-sheet\" rel=\"nofollow noreferrer\">cheat sheet</a>\" said that my second digit should be the <strong>total</strong> width, including the decimal point, so I changed the seconds to \"%08.5f\" but all that did was add another bogus zero in front of the decimal point, e.g., 510.00000\u21925100.00000 (width of ten, not eight!).</p>\n\n<p>A few years ago, I did something similar, and got the correct results.\u00a0 But I didn't bother to save the script \"for future reference.\"</p>\n\n<p>(Several other <a href=\"https://stackoverflow.com/questions/26273607/about-printf-format-string-in-c\">SO answers</a> agree with that \"cheat sheet.\")</p>\n"}, {"tags": ["linux", "perl", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 6494319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ep9ne.jpg?s=128&g=1", "display_name": "Timo Zikeli", "link": "https://stackoverflow.com/users/6494319/timo-zikeli"}, "is_accepted": false, "score": 0, "last_activity_date": 1517227257, "creation_date": 1517227257, "answer_id": 48500795, "question_id": 48500749, "link": "https://stackoverflow.com/questions/48500749/unable-to-access-authorized-keys-when-logging-in-through-ssh-and-the-user-is-a-s/48500795#48500795", "title": "Unable To access authorized_keys when logging in through ssh and the user is a sudo user", "body": "<p>You probably didn't add 'sudo' before the command to edit the file.</p>\n"}, {"tags": [], "owner": {"reputation": 799, "user_id": 3956017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5814cfe5bfd09b7e3047088132a8eac7?s=128&d=identicon&r=PG&f=1", "display_name": "Garo", "link": "https://stackoverflow.com/users/3956017/garo"}, "is_accepted": false, "score": 0, "last_activity_date": 1517851375, "creation_date": 1517851375, "answer_id": 48628084, "question_id": 48500749, "link": "https://stackoverflow.com/questions/48500749/unable-to-access-authorized-keys-when-logging-in-through-ssh-and-the-user-is-a-s/48628084#48628084", "title": "Unable To access authorized_keys when logging in through ssh and the user is a sudo user", "body": "<p>If you didn't mess up your system,  <code>cat &gt;&gt; ~/.ssh/authorized_keys</code> (or any other way of appending to this file) will work. Make sure you are in the correct directory ! (In this case by using <code>~</code>). Becoming root to write to your own authorized_keys is not necessary.</p>\n\n<p>If the user never used <code>ssh</code> before then <code>.ssh</code> will not exist and you can't write to a file in a directory that doesn't exist, so run ssh to create this dir</p>\n\n<p>If it doesn't work than you have a messed up system and this could be caused by a lot of things:</p>\n\n<ul>\n<li>The file somehow received incorrect permissions</li>\n<li>The user has been removed</li>\n<li>The .ssh directory has been removed</li>\n<li>...</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 8211347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f007a1b03996e704679c90af3f2e5d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sourav Mukherjee", "link": "https://stackoverflow.com/users/8211347/sourav-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517851375, "creation_date": 1517227096, "question_id": 48500749, "link": "https://stackoverflow.com/questions/48500749/unable-to-access-authorized-keys-when-logging-in-through-ssh-and-the-user-is-a-s", "title": "Unable To access authorized_keys when logging in through ssh and the user is a sudo user", "body": "<p>I am connecting to a remote server through SSH abd then switching the user to a sudo user.But then when I am trying to write to the authorized_keys file it is saying...permission denied.</p>\n\n<p>This is what I am able to see as an output::-\n\"\nbash: /home/techm/tmsys/Sap1/.ssh/authorized_keys: Permission denied</p>\n\n<p>\"</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517209342, "post_id": 48495068, "comment_id": 83984880, "body": "<a href=\"https://code-maven.com/slides/perl-programming/fixed-width-record\" rel=\"nofollow noreferrer\">code-maven.com/slides/perl-programming/fixed-width-record</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517217380, "post_id": 48495068, "comment_id": 83988632, "body": "You have a great answer, but how does &quot;large amount of data&quot; matter?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517217694, "post_id": 48495068, "comment_id": 83988826, "body": "If the file is huge, instead of putting it all into memory before writing it out, i.e. the way <code>Spreadsheet::WriteExcel</code> does, you could instead just print out of csv file line by line, which Excel should be able to import.  That way, it doesn&#39;t matter how large the file is."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1517217807, "post_id": 48495068, "comment_id": 83988902, "body": "@xxfelixxx Ah, thank you. I didn&#39;t know that the module takes the whole file."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517218193, "post_id": 48495068, "comment_id": 83989147, "body": "@zdim Actually that was a guess based on the usage pattern...reading the docs indicates that it might not be totally true..it looks like it tries to write tempoary files along the way to speed things up."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1517218728, "post_id": 48496334, "comment_id": 83989476, "body": "I have added below after your script    ------&gt;    my $workbook  = Spreadsheet::WriteExcel-&gt;new( &#39;deep.xls&#39; );         my $worksheet = $workbook-&gt;add_worksheet();         $worksheet-&gt;write( 0, 0, $file_name ) ;         $worksheet-&gt;write( 0, 1, $stop );         $worksheet-&gt;write( 0, 2, $record_count );          $workbook-&gt;close;"}, {"owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1517218782, "post_id": 48496334, "comment_id": 83989506, "body": "ANd i am getting below output in excel nstrans0.20180125\t1/25/2018 2:00\t124573 But i want all the records from the 3 columns. Could you please help me out"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "reply_to_user": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 1, "creation_date": 1517219687, "post_id": 48496334, "comment_id": 83990041, "body": "What is the issue?  You iterate over each line, call  <code>$worksheet-&gt;write(..)</code> inside the loop.  Put <code>$worksheet-&gt;close</code> outside of the loop."}, {"owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "edited": false, "score": 0, "creation_date": 1517222418, "post_id": 48496334, "comment_id": 83991874, "body": "Thank you so much. I am now able to fetch all the data"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1517222559, "last_edit_date": 1517222559, "creation_date": 1517210800, "answer_id": 48496334, "question_id": 48495068, "link": "https://stackoverflow.com/questions/48495068/text-file-to-excel-file-for-large-amount-of-data/48496334#48496334", "title": "Text file to excel file for large amount of data", "body": "<p>You can parse your input as a fixed-width file.  You already know how to write the excel once you have the fields...</p>\n\n<p><strong>parse_fixed.pl</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy $usage = \"usage: $0 file\\n\";\nmy $file = $ARGV[0] or die $usage;\n-f $file or die $usage;\n\n# Create $workbook and $worksheet objects here.\n\nopen my $fh, \"&lt;$file\" or die \"Unable to open '$file' : $!\";\nwhile(my $line = &lt;$fh&gt;) {\n    chomp($line);\n    # Unpack the fields, first field 27 chars, then 19 chars, etc.\n    # perldoc -f pack\n    my @fields = unpack(\"A27 A19 A17 A16 A20\", $line);\n\n    # Remove leading and trailing whitespace for each field\n    # perldoc -f map\n    # perldoc perlretut\n    my ($file_name, $start, $stop, $record_count, $direction)\n        = map { s|^\\s*||; s|\\s*||; $_ } @fields; \n\n    print(\"filename: '$file_name', start: '$start', stop: '$stop', record_count: '$record_count', direction: '$direction'\\n\");\n\n    # Add $worksheet-&gt;write(...) lines for each field here.\n\n}\n\n# Close $workbook here.\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>perl parse_fixed.pl input\n\nfilename: 'FILE_NAME', start: 'Start_Timestamp', stop: 'End_Timestamp', record_count: 'Record Count', direction: 'Inbound/Outbound'\nfilename: 'OmahaTran.txt', start: '1/25/2018 3:40', stop: '1/25/2018 3:40', record_count: '90390', direction: 'Inbound'\nfilename: 'concord', start: '1/24/2018 20:50', stop: '1/24/2018 20:50', record_count: '8631', direction: 'Inbound'\nfilename: 'iDine:RewardsNetwork 5220', start: '1/24/2018 12:01', stop: '1/24/2018 12:04', record_count: '218985', direction: 'Outbound'\nfilename: 'nashville', start: '1/25/2018 4:30', stop: '1/25/2018 4:32', record_count: '6810', direction: 'Inbound'\nfilename: 'nstrans0.20180125', start: '1/25/2018 2:00', stop: '1/25/2018 2:00', record_count: '124573', direction: 'Inbound'\n</code></pre>\n\n<p><a href=\"https://code-maven.com/slides/perl-programming/fixed-width-record\" rel=\"nofollow noreferrer\">Maven.com dealing with fixed-width records</a></p>\n\n<p><a href=\"http://perldoc.perl.org/functions/pack.html\" rel=\"nofollow noreferrer\">perldoc -f pack</a></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1517248029, "last_edit_date": 1517248029, "creation_date": 1517221663, "answer_id": 48499062, "question_id": 48495068, "link": "https://stackoverflow.com/questions/48495068/text-file-to-excel-file-for-large-amount-of-data/48499062#48499062", "title": "Text file to excel file for large amount of data", "body": "\n\n<p>This is a pattern that I use a lot for converting fixed-width fields to comma-separated values. Of course, Excel will happily import this CSV data, doing most of the work for for you</p>\n\n<p>It assumes that the fields extend from the start of one header string to the start of the next, and uses built-in array <code>@-</code> to determine where each one starts. Header strings may contain single spaces; more than one consecutive space terminates the string</p>\n\n<p>I hope it's clear that the value of <code>$template</code> is printed only for diagnostics, and isn't part of the CSV data</p>\n\n<p>It's a simple matter to remove the <code>print</code> statement that outputs the comma-separated header strings if they're not wanted. Alternatively, it's also trivial to remove the row from the spreadsheet after import if desired</p>\n\n<p>The <code>DATA</code> file handle is used for convenience and demonstration purposes. Ordinarily you will probably want to <code>open</code> a specific file and use that file handle, or just use <code>&lt;&gt;</code> to read from files specified as command line parameters</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $head;\n\nmy $template = do {\n\n    $head = &lt;DATA&gt;;\n\n    my @template;\n    my $prev;\n\n    while ( $head =~ / \\S+ (?: [ ] \\S+ )* /xg ) {\n        push @template, defined $prev ? 'A' . ( $-[0] - $prev ) : '@' . $-[0];\n        $prev = $-[0];\n    }\n\n    push @template, 'A*';\n\n    \"@template\";\n};\n\nsay qq{Pack format \"$template\"\\n};\n\nsay join ',', unpack $template, $head;\n\nwhile ( &lt;DATA&gt; ) {\n    say join ',', unpack $template, $_;\n}\n\n\n__DATA__\nFILE_NAME                   Start_Timestamp     End_Timestamp   Record Count    Inbound/Outbound\nOmahaTran.txt               1/25/2018 3:40      1/25/2018 3:40  90390           Inbound\nconcord                     1/24/2018 20:50     1/24/2018 20:50 8631            Inbound\niDine:RewardsNetwork 5220   1/24/2018 12:01     1/24/2018 12:04 218985          Outbound\nnashville                   1/25/2018 4:30      1/25/2018 4:32  6810            Inbound\nnstrans0.20180125           1/25/2018 2:00      1/25/2018 2:00  124573          Inbound\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Pack format \"@0 A28 A20 A16 A16 A*\"\n\nFILE_NAME,Start_Timestamp,End_Timestamp,Record Count,Inbound/Outbound\nOmahaTran.txt,1/25/2018 3:40,1/25/2018 3:40,90390,Inbound\nconcord,1/24/2018 20:50,1/24/2018 20:50,8631,Inbound\niDine:RewardsNetwork 5220,1/24/2018 12:01,1/24/2018 12:04,218985,Outbound\nnashville,1/25/2018 4:30,1/25/2018 4:32,6810,Inbound\nnstrans0.20180125,1/25/2018 2:00,1/25/2018 2:00,124573,Inbound\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1517248029, "creation_date": 1517204799, "last_edit_date": 1517209114, "question_id": 48495068, "link": "https://stackoverflow.com/questions/48495068/text-file-to-excel-file-for-large-amount-of-data", "title": "Text file to excel file for large amount of data", "body": "<p>I want to write a script which will take data from a flat file and write it to an excel. My code is below</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Spreadsheet::WriteExcel;\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new( 'deep.xls' );\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n$worksheet-&gt;write( 0, 0, \"DEEP\" ) ;\n$worksheet-&gt;write( 0, 1, \"RIJU\" );\n$worksheet-&gt;write( 1, 0, \"Sukhi\" );\n$worksheet-&gt;write( 1, 1, \"Abhilash\" );\n\n$workbook-&gt;close;\n</code></pre>\n\n<p>And my flat file contains below </p>\n\n<pre><code>FILE_NAME                   Start_Timestamp     End_Timestamp   Record Count    Inbound/Outbound\nOmahaTran.txt               1/25/2018 3:40      1/25/2018 3:40  90390           Inbound\nconcord                     1/24/2018 20:50     1/24/2018 20:50 8631            Inbound\niDine:RewardsNetwork 5220   1/24/2018 12:01     1/24/2018 12:04 218985          Outbound\nnashville                   1/25/2018 4:30      1/25/2018 4:32  6810            Inbound\nnstrans0.20180125           1/25/2018 2:00      1/25/2018 2:00  124573          Inbound\n</code></pre>\n\n<p>Since i am new to perl can anyone help me out how to retrieve \"FILE_NAME\" \"End_Timestamp\" and \"Record Count\" column from the text file and write it to an excel</p>\n"}, {"tags": ["perl", "character-encoding"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 1385, "user_id": 148680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rbDbI.png?s=128&g=1", "display_name": "chb", "link": "https://stackoverflow.com/users/148680/chb"}, "edited": false, "score": 1, "creation_date": 1517191505, "post_id": 48493308, "comment_id": 83980068, "body": "@chb By all means, suggest other tools. Otherwise the purpose of your comment is unclear."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1517196180, "post_id": 48493308, "comment_id": 83981033, "body": "show the desired output for your example input"}, {"owner": {"reputation": 11, "user_id": 9281354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad942b5a13064f8a9ade371c7fd7bf?s=128&d=identicon&r=PG&f=1", "display_name": "whoAmI", "link": "https://stackoverflow.com/users/9281354/whoami"}, "reply_to_user": {"reputation": 1385, "user_id": 148680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rbDbI.png?s=128&g=1", "display_name": "chb", "link": "https://stackoverflow.com/users/148680/chb"}, "edited": false, "score": 0, "creation_date": 1517202356, "post_id": 48493308, "comment_id": 83982371, "body": "@chb Feel free to suggest another way if you have one. Gone with perl as it was something I have been playing around with a little bit.   The main bit that I am trying to convert is char(45,120,49,45,81,45) and yes in perl it is chr(xx) the %20 I know most off the top of my head for the URL so not to fussed."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9281354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad942b5a13064f8a9ade371c7fd7bf?s=128&d=identicon&r=PG&f=1", "display_name": "whoAmI", "link": "https://stackoverflow.com/users/9281354/whoami"}, "edited": false, "score": 0, "creation_date": 1517202698, "post_id": 48493434, "comment_id": 83982487, "body": "Thanks Silvio will have a play around with that as well"}], "tags": [], "owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1517193735, "last_edit_date": 1517193735, "creation_date": 1517191666, "answer_id": 48493434, "question_id": 48493308, "link": "https://stackoverflow.com/questions/48493308/perl-convert-integer-to-text-char1-2-3-4-5-6/48493434#48493434", "title": "Perl - Convert integer to text Char(1,2,3,4,5,6)", "body": "<p>Alright, this is going to be a messy \"one-liner\". Assuming your text is in a variable called <code>$text</code>.</p>\n\n<pre><code>$text =~ s{char\\( ( (?: (?:\\d+,)* \\d+ )? ) \\)}{\n    my @arr = split /,/, $1;\n    my $temp = join('', map { chr($_) } @arr);\n    $temp =~ s/^|$/\"/g;\n    $temp\n    }xeg;\n</code></pre>\n\n<p>The regular expression matches <code>char(</code>, followed by a comma-separated list of sequences of digits, followed by <code>)</code>. We capture the digits in capture group <code>$1</code>. In the substitution, we split <code>$1</code> on the comma (since <code>chr</code> only works on one character, not a whole list of them). Then we map <code>chr</code> over each number and concatenate the result into a string. The next line simply puts quotation marks at the start and end of the string (presumably you want the output quoted) and then returns the new string.</p>\n\n<p>Input:</p>\n\n<pre><code>select%20char(45,120,49,45,81,45),char(45,120,50,45,81,45),char(45,120,51,45,81,45)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>select%20\"-x1-Q-\",\"-x2-Q-\",\"-x3-Q-\"\n</code></pre>\n\n<p>If you want to replace the <code>%</code> escape sequences as well, I suggest doing that in a separate line. Trying to integrate both substitutions into one statement is going to get very hairy.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9281354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad942b5a13064f8a9ade371c7fd7bf?s=128&d=identicon&r=PG&f=1", "display_name": "whoAmI", "link": "https://stackoverflow.com/users/9281354/whoami"}, "edited": false, "score": 0, "creation_date": 1517202594, "post_id": 48493947, "comment_id": 83982445, "body": "Thanks Zdim that is a great help"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1517215106, "post_id": 48493947, "comment_id": 83987477, "body": "@SilvioMayolo Ouch, forgot about that :)  Btw, that is not aimed against anything and certainly not your answer; I&#39;ve posted all kinds of &quot;one-liner&quot;s. (Even the ones that obviously aren&#39;t fit for production may be good to show an approach in a condensed and easy-to-try way.) Just thought that a full script is better for someone who is starting out with Perl."}, {"owner": {"reputation": 22367, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1517242076, "post_id": 48493947, "comment_id": 84004846, "body": "Yeah, I get that. And you&#39;re right; your answer is much better for production code and especially for a beginner. My answer is really only good if you&#39;re for some reason doing this from the command line and not a script file."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1517341718, "last_edit_date": 1517341718, "creation_date": 1517196390, "answer_id": 48493947, "question_id": 48493308, "link": "https://stackoverflow.com/questions/48493308/perl-convert-integer-to-text-char1-2-3-4-5-6/48493947#48493947", "title": "Perl - Convert integer to text Char(1,2,3,4,5,6)", "body": "<p>There's too much to do here for a reasonable one-liner. Also, a script is easier to adjust later </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse URI::Escape 'uri_unescape';\n\nmy $string = q{select%20} \n    . q{char(45,120,49,45,81,45),char(45,120,50,45,81,45),} \n    . q{char(45,120,51,45,81,45)}; \n\nmy $new_string = uri_unescape($string);  # convert %20 and such\n\nmy @parts = $new_string =~ /(.*?)(char.*)/;\n\n$parts[1] = join ',', map { chr( (/([0-9]+)/)[0] ) } split /,/, $parts[1];\n\n$new_string = join '', @parts;\nsay $new_string;\n</code></pre>\n\n<p>this prints</p>\n\n<pre>\nselect -x1-Q-,-x2-Q-,-x3-Q-\n</pre>\n\n<p>Comments</p>\n\n<ul>\n<li><p>Module <a href=\"http://search.cpan.org/dist/URI/lib/URI/Escape.pm\" rel=\"nofollow noreferrer\">URI::Escape</a> is used to convert percent-encoded characters, per RFC 3986</p></li>\n<li><p>It is unspecified whether anything can follow the part with <code>char(...)</code>s, and what that might be. If there can be more after last <code>char(...)</code> adjust the splitting into <code>@parts</code>, or clarify</p></li>\n<li><p>In the part with <code>char(...)</code>s only the numbers are needed, what regex in <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a> uses</p></li>\n</ul>\n\n<p>If you are going to use regex you should read up on it. See </p>\n\n<ul>\n<li><p><a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>, a tutorial </p></li>\n<li><p><a href=\"https://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">perlrequick</a>, a quick-start introduction</p></li>\n<li><p><a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>, the full account of syntax</p></li>\n<li><p><a href=\"https://perldoc.perl.org/perlreref.html\" rel=\"nofollow noreferrer\">perlreref</a>, a quick reference (its <a href=\"https://perldoc.perl.org/perlreref.html#SEE-ALSO\" rel=\"nofollow noreferrer\">See Also</a> section is useful on its own)</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1517223386, "creation_date": 1517223386, "answer_id": 48499585, "question_id": 48493308, "link": "https://stackoverflow.com/questions/48493308/perl-convert-integer-to-text-char1-2-3-4-5-6/48499585#48499585", "title": "Perl - Convert integer to text Char(1,2,3,4,5,6)", "body": "<p>This will do as you ask. It performs the decoding in two stages: first the URI-encoding is decoded using <code>chr hex $1</code>, and then each <code>char()</code> function is translated to the string corresponding to the character equivalents of its decimal parameters</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = 'select%20char(45,120,49,45,81,45),char(45,120,50,45,81,45),char(45,120,51,45,81,45)';\n\n$s =~ s/%(\\d+)/ chr hex $1 /eg;\n\n$s =~ s{ char \\s* \\( ( [^()]+ ) \\) }{ join '', map chr, $1 =~ /\\d+/g }xge;\n\nsay $s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>select -x1-Q-,-x2-Q-,-x3-Q-\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9281354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ad942b5a13064f8a9ade371c7fd7bf?s=128&d=identicon&r=PG&f=1", "display_name": "whoAmI", "link": "https://stackoverflow.com/users/9281354/whoami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1576035132, "creation_date": 1517190263, "last_edit_date": 1592644375, "question_id": 48493308, "link": "https://stackoverflow.com/questions/48493308/perl-convert-integer-to-text-char1-2-3-4-5-6", "title": "Perl - Convert integer to text Char(1,2,3,4,5,6)", "body": "<p>I am after some help trying to convert the following log I have to plain text.</p>\n<p>This is a URL so there maybe %20 = 'space' and other but the main bit I am trying convert is the <code>char(1,2,3,4,5,6)</code> to text.</p>\n<p>Below is an example of what I am trying to convert.</p>\n<blockquote>\n<p>select%20char(45,120,49,45,81,45),char(45,120,50,45,81,45),char(45,120,51,45,81,45)</p>\n</blockquote>\n<p>What I have tried so far is the following while trying to added into the <code>char(in here)</code> to convert with the <code>chr($2)</code></p>\n<pre><code>perl -pe &quot;s/(char())/chr($2)/ge&quot; \n</code></pre>\n<p>All this has manage to do is remove the char but now I am trying to convert the number to text and remove the commas and brackets.</p>\n<p>I maybe way off with how I am doing as I am fairly new to to perl.</p>\n<blockquote>\n<p>perl -pe &quot;s/<strong>word to remove</strong>/<strong>word to change it to</strong>/ge&quot;</p>\n<p>&quot;s/(char(<strong>what goes in here</strong>))/chr($2)/ge&quot;</p>\n</blockquote>\n<p>Output try to achieve is</p>\n<blockquote>\n<p>select -x1-Q-,-x2-Q-,-x3-Q-</p>\n<p>Or</p>\n<p>select%20-x1-Q-,-x2-Q-,-x3-Q-</p>\n</blockquote>\n<p>Thanks for any help</p>\n"}, {"tags": ["perl", "capture-output"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1517180384, "post_id": 48492140, "comment_id": 83977672, "body": "source is a built-in shell command, not an exectuable program"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1517189721, "post_id": 48492724, "comment_id": 83979691, "body": "@ysth, woops, it got eaten when I switched to braces.  Fixed"}, {"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1517190624, "post_id": 48492724, "comment_id": 83979887, "body": "The reason the &#39;test_capout.csh&#39; script was being &quot;sourced&quot; is to have things like the env vars it sets persist in the current shell.  If I&#39;m not mistaken, running test_capout.csh using csh will not have the same effect."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517190878, "post_id": 48492724, "comment_id": 83979933, "body": "The &quot;current shell&quot; is <code>perl</code>. The equivalent of <code>source PATH</code> for Perl is <code>do PATH</code>. Of course, you&#39;ll need to convert the csh commands into Perl statements."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1517189683, "last_edit_date": 1517189683, "creation_date": 1517184316, "answer_id": 48492724, "question_id": 48492140, "link": "https://stackoverflow.com/questions/48492140/why-cant-perls-captureoutputcapture-exec-combined-run-source/48492724#48492724", "title": "why can&#39;t perl&#39;s CaptureOutput::capture_exec_combined run &quot;source&quot;", "body": "<p><code>source</code> causes the named script to be executed by the shell given the <code>source</code> command. It makes no sense to use <code>source</code> outside of a shell, which is why it's not a program but a built-in shell command. You'll need to spawn a shell and have the shell execute the command.</p>\n\n<pre><code>capture_exec_combined('csh', '-c', 'source test_capout.csh');  # Hardcoded\n  -or-\ncapture_exec_combined('csh', '-c', 'source \"$1\"', $script);    # Variable\n</code></pre>\n\n<p>Of course, since the shell exits afterwards, that can be simplified to</p>\n\n<pre><code>capture_exec_combined('csh', 'test_capout.csh');        # Hardcoded\n  -or-\ncapture_exec_combined('csh', $script =~ s{^-}{./-}r);   # Variable\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517189683, "creation_date": 1517179266, "question_id": 48492140, "link": "https://stackoverflow.com/questions/48492140/why-cant-perls-captureoutputcapture-exec-combined-run-source", "title": "why can&#39;t perl&#39;s CaptureOutput::capture_exec_combined run &quot;source&quot;", "body": "<p>Running a perl script on linux using CaptureOutput::capture_exec_combined.  It doesn't seem to want to execute \"source\"</p>\n\n<pre><code>#!/usr/bin/env perl\nuse IO::CaptureOutput qw/capture_exec_combined/;\n$cmd = \"source test_capout.csh\";\nmy ($stdouterr, $success, $exit_code) = capture_exec_combined($cmd);\nprint  \"${stdouterr}\\n\";\n</code></pre>\n\n<p>(test_capout.csh just echoes a message)</p>\n\n<p>I get...</p>\n\n<p>Can't exec \"source\": No such file or directory at /tool/pandora64/.package/perl-5.18.2-gcc481/lib/site_perl/5.18.2/IO/CaptureOutput.pm line 84.</p>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "answers": [{"tags": [], "owner": {"reputation": 5381, "user_id": 9203110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PQESrk-PCHA/AAAAAAAAAAI/AAAAAAAAAJk/6bqvsnrh4Dg/photo.jpg?sz=128", "display_name": "match", "link": "https://stackoverflow.com/users/9203110/match"}, "is_accepted": false, "score": 1, "last_activity_date": 1517174149, "last_edit_date": 1517174149, "creation_date": 1517170197, "answer_id": 48490795, "question_id": 48490662, "link": "https://stackoverflow.com/questions/48490662/sed-remove-digits-if-not-followed-with-a-dot-and-the-return-line-if-the-line/48490795#48490795", "title": "Sed: remove digits if not followed with a dot . and the return line if the line not ends with dot .?", "body": "<p>The (pretty horrible) <code>sed</code> you probably want is:</p>\n\n<pre><code>sed -re ':a;N;$!ba;s/[[:digit:]]+([^.])/\\1/g;s/([^.])\\n/\\1/g' file.txt\n</code></pre>\n\n<p>(Treating the whole file as a stream, replace one or more digits followed by 'not-a-dot' with the 'not-a-dot', then replace all 'not-a-dot' followed by newline with 'not-a-dot' match.</p>\n\n<p>However while it matches your request, it outputs subtly different results to what you asked for, due to the multiple blank lines, and lack of dots on the end of some list items - so you may need to rethink your approach:</p>\n\n<pre><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ac tellus nunc. Phasellus pellentesque, suscipit ac nunc. Etiam lobortis, massa ac aliquam auctor, augue nisl sagittis urna, at dapibus tellus erat ullamcorper ligula. Praesent orci dui, pulvinar id convallis a, faucibus non mauris.\n2.Cras vitae tortor purus5. ut tincidunt mauris. Sed at velit nisl.\n8. Donec eu mauris tortor, interdum condimentum erat\nDonec tellus augue, tempus sed facilisis sed, fringilla quis leo. Mauris vulputate, leoac facilisis vulputate, enim orci interdum augue, in blandit quam turpisquis dui. Morbi dictum luctus velit nec faucibus.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1517171061, "creation_date": 1517171061, "answer_id": 48490925, "question_id": 48490662, "link": "https://stackoverflow.com/questions/48490662/sed-remove-digits-if-not-followed-with-a-dot-and-the-return-line-if-the-line/48490925#48490925", "title": "Sed: remove digits if not followed with a dot . and the return line if the line not ends with dot .?", "body": "<p>Your example does not match your description. In your sample output (and contrary to your description), <code>\\n</code> is not removed if:</p>\n\n<ul>\n<li>the line is empty</li>\n<li>the line starts with digits + dot (e.g. <code>2.Cras vitae tortor purus</code>)</li>\n<li>the line ends with dot + spaces (e.g. <code>... ligula. \\n</code>)</li>\n</ul>\n\n<p>This perl code implements these requirements:</p>\n\n<pre><code>perl -pe 'next if /^\\d+\\./; s/^\\d+//; chomp if /\\S/ &amp;&amp; !/\\.\\s*$/'\n</code></pre>\n\n<p>I.e.</p>\n\n<ul>\n<li>do nothing if the line starts with digits + dot, otherwise:</li>\n<li>remove leading digits</li>\n<li>remove trailing newline if the line contains at least one non-whitespace character and does not end with dot + optional whitespace</li>\n</ul>\n"}], "owner": {"reputation": 1222, "user_id": 1163438, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/513cd51752b4e0d28a56ffbe6a6a3223?s=128&d=identicon&r=PG", "display_name": "m3asmi", "link": "https://stackoverflow.com/users/1163438/m3asmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 48490925, "answer_count": 2, "score": -2, "last_activity_date": 1517174149, "creation_date": 1517169135, "last_edit_date": 1517170301, "question_id": 48490662, "link": "https://stackoverflow.com/questions/48490662/sed-remove-digits-if-not-followed-with-a-dot-and-the-return-line-if-the-line", "title": "Sed: remove digits if not followed with a dot . and the return line if the line not ends with dot .?", "body": "<p>I want to remove initial digits that are not followed by a dot (<code>.</code>) \nand remove newlines (<code>\\n</code>) if the line does not end with dot (<code>.</code>).</p>\n\n<p>This is the sample text:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ac tellus nunc. Phasellus \npellentesque, suscipit ac nunc. Etiam lobortis, massa ac aliquam auctor, augue nisl \n53sagittis urna, at dapibus tellus erat ullamcorper ligula. \nPraesent orci dui, pulvinar id convallis a, faucibus non mauris.\n\n2.Cras vitae tortor purus\n5. ut tincidunt mauris. Sed at velit nisl.\n8. Donec eu mauris tortor, interdum condimentum erat\n\n65Donec tellus augue, tempus sed facilisis sed, fringilla quis leo. Mauris vulputate, leo\nac facilisis vulputate, enim orci interdum augue, in blandit quam turpis\nquis dui. Morbi dictum luctus velit nec faucibus.\n</code></pre>\n\n<p>The output I want:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ac tellus nunc. Phasellus pellentesque, suscipit ac nunc. Etiam lobortis, massa ac aliquam auctor, augue nisl sagittis urna, at dapibus tellus erat ullamcorper ligula. \nPraesent orci dui, pulvinar id convallis a, faucibus non mauris.\n\n2.Cras vitae tortor purus\n5. ut tincidunt mauris. Sed at velit nisl.\n8. Donec eu mauris tortor, interdum condimentum erat\n\nDonec tellus augue, tempus sed facilisis sed, fringilla quis leo. Mauris vulputate, leo ac facilisis vulputate, enim orci interdum augue, in blandit quam turpis quis dui. Morbi dictum luctus velit nec faucibus.\n</code></pre>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517163332, "post_id": 48489730, "comment_id": 83972377, "body": "<code>cpan install</code> is wrong. You just installed the <code>install</code> module."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1517163384, "post_id": 48489730, "comment_id": 83972399, "body": "Moreover, you need the header files of the C gif library."}, {"owner": {"reputation": 27, "user_id": 8014941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10212972806023279/picture?type=large", "display_name": "Mouloune van Muzha", "link": "https://stackoverflow.com/users/8014941/mouloune-van-muzha"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517163976, "post_id": 48489730, "comment_id": 83972589, "body": "@melpomene thanks. but than i still got &quot;Makefile.PL -- NOT OK&quot; this message and I think this might be a problem ..."}, {"owner": {"reputation": 27, "user_id": 8014941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10212972806023279/picture?type=large", "display_name": "Mouloune van Muzha", "link": "https://stackoverflow.com/users/8014941/mouloune-van-muzha"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1517164075, "post_id": 48489730, "comment_id": 83972619, "body": "@choroba would you be kind enough to explain what that is please :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1517164113, "post_id": 48489730, "comment_id": 83972634, "body": "Are you a programmer?"}, {"owner": {"reputation": 27, "user_id": 8014941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10212972806023279/picture?type=large", "display_name": "Mouloune van Muzha", "link": "https://stackoverflow.com/users/8014941/mouloune-van-muzha"}, "edited": false, "score": 0, "creation_date": 1517164250, "post_id": 48489730, "comment_id": 83972670, "body": "not at all ! I use R for my research, that&#39;s all ... But i need to use this script to analyse images..."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517185003, "post_id": 48491714, "comment_id": 83978711, "body": "Why do you think the Imager::File::GIF isn&#39;t needed?"}, {"owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517245357, "post_id": 48491714, "comment_id": 84007046, "body": "installing Imager::File::GIF directly also gave me the same errors, but after just installing <code>Imager</code> it opens gifs just fine! that was the objective here, thus worth a shot. @ikegami Did you try before down-voting?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517246489, "post_id": 48491714, "comment_id": 84007700, "body": "Re &quot;<i>Did you try before down-voting?</i>&quot;, Why would I? The program is trying to load one module, and you said the fix is to install a different module the OP already has installed (seeing as it&#39;s a dependency of Imager::File::GIF)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1517246523, "post_id": 48491714, "comment_id": 84007715, "body": "Re &quot;<i>it opens gifs just fine!</i>&quot;, This isn&#39;t about opening GIFs with Imager; this is about running <code>colorsummarizer</code>."}], "tags": [], "owner": {"reputation": 1028, "user_id": 731339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d1ca6a73cadeccaeeadcd255265cfa?s=128&d=identicon&r=PG", "display_name": "Ossip", "link": "https://stackoverflow.com/users/731339/ossip"}, "is_accepted": false, "score": -2, "last_activity_date": 1517245435, "last_edit_date": 1517245435, "creation_date": 1517176301, "answer_id": 48491714, "question_id": 48489730, "link": "https://stackoverflow.com/questions/48489730/cpan-install-module-meet-make-file-not-ok-issue/48491714#48491714", "title": "CPAN install module meet make file not ok issue", "body": "<p>Try to just install <code>Imager</code> like this, it might be all you need:</p>\n\n<pre><code> sudo cpan Imager\n</code></pre>\n\n<p>After that it could open gifs for me.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1517184917, "last_edit_date": 1592644375, "creation_date": 1517184917, "answer_id": 48492779, "question_id": 48489730, "link": "https://stackoverflow.com/questions/48489730/cpan-install-module-meet-make-file-not-ok-issue/48492779#48492779", "title": "CPAN install module meet make file not ok issue", "body": "<p>The issue identified by the following message is not harmless at all, actually:</p>\n<blockquote>\n<p>Warning (mostly harmless): No library found for -lgif<br>\nGIF: Test code failed: Can't link/include 'gif_lib.h', 'stdio.h', <br>\n'errno.h', 'string.h', 'gif'</p>\n</blockquote>\n<p>The module uses libgif to do all the heavy work, but it's not installed. Furthermore, the installation procedure needs the library's header files.</p>\n<blockquote>\n<p>Imager::File::GIF provides GIF file format support for Imager.</p>\n<p>It requires libgif to be installed, including development headers.</p>\n<p>For Linux distributions this typically requires installation of the\nassociated -dev or -devel package.</p>\n</blockquote>\n<p>Installing the required library and header files might be as simple as asking your OS's package manager to install <code>libgif-dev</code> or <code>libgif-devel</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 8014941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10212972806023279/picture?type=large", "display_name": "Mouloune van Muzha", "link": "https://stackoverflow.com/users/8014941/mouloune-van-muzha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1147, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517245435, "creation_date": 1517163167, "question_id": 48489730, "link": "https://stackoverflow.com/questions/48489730/cpan-install-module-meet-make-file-not-ok-issue", "title": "CPAN install module meet make file not ok issue", "body": "<p>I'm trying to run this script on my computer (MAC) </p>\n\n<p><a href=\"http://mkweb.bcgsc.ca/color-summarizer/?download\" rel=\"nofollow noreferrer\">http://mkweb.bcgsc.ca/color-summarizer/?download</a></p>\n\n<p>It's the first time in my life touching the terminal... so you understand that I ask very basic questions. please do forgive me... \nbasically when i execute the script, I would always get this kind of message :</p>\n\n<pre><code> Can't locate Imager/File/GIF.pm in @INC (you may need to install the \n Imager::File::GIF module) (@INC contains: \n /Applications/colorsummarizer/colorsummarizer-0.77/bin/lib \n /Applications/colorsummarizer/colorsummarizer-0.77/bin/../lib \n /Applications/colorsummarizer/colorsummarizer-0.77/bin \n /Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18 \n /Network/Library/Perl/5.18/darwin-thread-multi-2level \n /Network/Library/Perl/5.18 /Library/Perl/Updates/5.18.2/darwin-thread-\n multi-2level /Library/Perl/Updates/5.18.2 \n /System/Library/Perl/5.18/darwin-thread-multi-2level \n /System/Library/Perl/5.18 /System/Library/Perl/Extras/5.18/darwin-\n thread-multi-2level /System/Library/Perl/Extras/5.18) at \n /Library/Perl/5.18/darwin-thread-multi-2level/Imager.pm line 1677.\n</code></pre>\n\n<p>And so I use :</p>\n\n<pre><code> sudo cpan install Imager::File::GIF \n</code></pre>\n\n<p>for example. But the I get this : </p>\n\n<pre><code> Warning (mostly harmless): No library found for -lgif\n GIF: Test code failed: Can't link/include 'gif_lib.h', 'stdio.h', \n 'errno.h', 'string.h', 'gif'\n OS unsupported: GIF libraries or headers not found\n  Warning: No success on command[/usr/bin/perl Makefile.PL]\n   TONYC/Imager-File-GIF-0.91.tar.gz\n   /usr/bin/perl Makefile.PL -- NOT OK\n Running make test\n   Make had some problems, won't test\n Running make install\n   Make had some problems, won't install\n Could not read metadata file. Falling back to other methods to determine prerequisites\n</code></pre>\n\n<p>And ! it seems like even when I appear to install something successfully, The system ask me to re-install them again and again and again... \nMaybe I did some very fundamental mistakes ?\nThanks a lot for your attention</p>\n"}, {"tags": ["linux", "perl", "ssh", "remote-access", "remote-execution"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1517056943, "post_id": 48475898, "comment_id": 83945007, "body": "That doesn&#39;t look like a programming problem to me."}, {"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 1, "creation_date": 1517057116, "post_id": 48475898, "comment_id": 83945045, "body": "Your example #1 is essentially the correct way to run a command on a remote system. There are reasons why it might not work, mostly involving how the remote system is configured. There&#39;s no way to way what&#39;s going wrong for you, given the small amount of information that you&#39;ve provided."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 4, "creation_date": 1517057120, "post_id": 48475898, "comment_id": 83945048, "body": "So the <i>real</i> question here is: &quot;Why can&#39;t I log in to a remote system using SSH?&quot;. You&#39;ll need to check system logs and configuration for that, which does require that you have access to it. Can you actually log in properly?"}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 2, "creation_date": 1517076382, "post_id": 48475898, "comment_id": 83950751, "body": "First thing you should try is running <code>ssh</code> in verbose mode, it will tell you what it is doing under the hood: <code>ssh -vvvv ...</code>"}], "owner": {"reputation": 29, "user_id": 7803839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e52667df07fd99be40d871fe7ec8a76?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041a\u0430\u043d\u0434\u0440\u0438\u043d", "link": "https://stackoverflow.com/users/7803839/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9a%d0%b0%d0%bd%d0%b4%d1%80%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "closed_date": 1517092231, "answer_count": 0, "score": 2, "last_activity_date": 1517056755, "creation_date": 1517056755, "question_id": 48475898, "link": "https://stackoverflow.com/questions/48475898/how-can-i-run-command-via-ssh-on-remote-device", "closed_reason": "Not suitable for this site", "title": "How can I run command via SSH on remote device?", "body": "<p>How can I run command via SSH on remote device?</p>\n\n<p>I'm trying next ideas:</p>\n\n<p>1:</p>\n\n<pre><code>[root@0400smarts-voip01 test]# ssh user@IP \"my command\"\nuser@IP's password:\nConnection to IP closed by remote host.\n</code></pre>\n\n<p>2:</p>\n\n<pre><code>[root@0400smarts-voip01 test]# ssh -t user@IP \"my command\"\nuser@IP's password:\nConnection to IP closed by remote host.\nConnection to IP closed.\n</code></pre>\n\n<p>Also i'm trying run command via Perl script:</p>\n\n<pre><code>#!/bin/perl\nuse strict;\n\nuse Net::OpenSSH;\n\nmy $hostname = \"IP\";\nmy $username = \"user\";\nmy $password = \"password\";\nmy $cmd = \"command\";\n\nmy $ssh = Net::OpenSSH-&gt;new(host=&gt;\"$hostname\", user=&gt;\"$username\", port=&gt;22, password=&gt;\"$password\");\n$ssh-&gt;system($cmd);\n</code></pre>\n\n<p>But this method also doesn't work:</p>\n\n<pre><code>[root@0400smarts-voip01 test]# ./test.pl\nConnection to IP closed by remote host.\n</code></pre>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["perl", "curl"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1517050407, "post_id": 48474790, "comment_id": 83943384, "body": "What are you actually trying to do overall?"}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1517056669, "post_id": 48474790, "comment_id": 83944938, "body": "Download webfile, replace strings from this file  (which will be values for Perls variables) , and write values to variables."}, {"owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1517063288, "post_id": 48474790, "comment_id": 83946649, "body": "I mean omit of these $dupa lines: $<code>#!&#47;usr&#47;bin&#47;perl  $dupa=``curl -s https:&#47;&#47;api.binance.com&#47;api&#47;v1&#47;ticker&#47;allPrices``; $dupa =~ s&#47;&quot;},\\{&quot;&#47;\\n&#47;g;  $dupa =~ s&#47;&quot;:&quot;&#47;=&#47;g; $dupa =~ s&#47;&quot;,&quot;&#47;\\n&#47;g;  $dupa =~ s&#47;\\[{&quot;&#47;&#47;g; print $dupa;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517074278, "post_id": 48474790, "comment_id": 83950103, "body": "Don&#39;t ask your question in the comments. If there&#39;s something that belongs in your question, put it there."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 2, "creation_date": 1517078891, "post_id": 48474790, "comment_id": 83951623, "body": "Seems like you are trying to write your own JSON parser..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517083379, "post_id": 48474790, "comment_id": 83952948, "body": "What is a <i>&quot;tree regular expression&quot;</i>?"}], "answers": [{"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 3, "last_activity_date": 1517084472, "last_edit_date": 1517084472, "creation_date": 1517084166, "answer_id": 48480109, "question_id": 48474790, "link": "https://stackoverflow.com/questions/48474790/way-to-not-define-much-variables-in-perl/48480109#48480109", "title": "Way to not define much variables in Perl?", "body": "<ol>\n<li><p>Always <a href=\"http://perldoc.perl.org/strict.html\" rel=\"nofollow noreferrer\"><code>use strict</code></a> in Perl code. No exceptions!</p></li>\n<li><p>Don't shell out to <code>curl</code> to make an HTTP request. Use a Perl module like <a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"nofollow noreferrer\"><code>LWP::Simple</code></a>.</p></li>\n<li><p>The data you are downloading is JSON. Don't manipulate it as a string; use a JSON parser, like <a href=\"https://metacpan.org/pod/JSON::XS\" rel=\"nofollow noreferrer\"><code>JSON::XS</code></a>, to convert it to a data structure.</p></li>\n</ol>\n\n<p>Here's a start:</p>\n\n<pre><code>use strict;\nuse LWP::Simple qw( get );\nuse JSON::XS qw( decode_json );\nuse Data::Dumper qw( Dumper );\n\nmy $data = decode_json(get(\"https://api.binance.com/api/v1/ticker/allPrices\"));\n\nprint Dumper($data);\n</code></pre>\n\n<p>You can now manipulate the data structure in the <code>$data</code> variable; for instance:</p>\n\n<pre><code>for my $item (@$data) {\n    print \"$item-&gt;{symbol} : $item-&gt;{price}\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9267718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d3780cf505c2bae99866bb1bd6e8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Grela", "link": "https://stackoverflow.com/users/9267718/filip-grela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1518103645, "accepted_answer_id": 48480109, "answer_count": 1, "score": -4, "last_activity_date": 1517162502, "creation_date": 1517048535, "last_edit_date": 1517083339, "question_id": 48474790, "link": "https://stackoverflow.com/questions/48474790/way-to-not-define-much-variables-in-perl", "closed_reason": "Needs details or clarity", "title": "Way to not define much variables in Perl?", "body": "<p>I'm asking about most simple way to</p>\n\n<ol>\n<li><p>Get www content (with curl I think)</p></li>\n<li><p>Search and replace text with tree regular expression (<code>s/a/b/;</code> and s/as/da' etc)</p></li>\n</ol>\n\n<p>Must I define variables every time when I want use a Perl command? In bash I piped the output from <code>curl</code>:</p>\n\n<pre><code>curl www.google.pl | sed 's/a/b'\n</code></pre>\n\n<p>I want to omit of these <code>$dupa</code> lines</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$#!/usr/bin/perl\n\n$dupa = `curl -s https://api.binance.com/api/v1/ticker/allPrices`;\n\n$dupa =~ s/\"},\\{\"/\\n/g;\n$dupa =~ s/\":\"/=/g;\n$dupa =~ s/\",\"/\\n/g;\n$dupa =~ s/\\[{\"//g;\n\nprint $dupa;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1517074569, "post_id": 48473834, "comment_id": 83950196, "body": "Why use <code>-&gt;in($WD)</code> instead of <code>-&gt;in(&#39;.&#39;)</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1595043710, "post_id": 48473834, "comment_id": 111345685, "body": "Just ran into this old interesting post ... see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1517098930, "post_id": 48474567, "comment_id": 83956903, "body": "@Saurabh Updated the explanation and added a note on needed <code>use feature &#39;state&#39;</code>"}, {"owner": {"reputation": 21, "user_id": 9275647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a709136b54c676697c81bce7ffbc26?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/9275647/saurabh"}, "edited": false, "score": 0, "creation_date": 1518689921, "post_id": 48474567, "comment_id": 84612229, "body": "Thank you zdim !!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1530211843, "last_edit_date": 1530211843, "creation_date": 1517046792, "answer_id": 48474567, "question_id": 48473834, "link": "https://stackoverflow.com/questions/48473834/how-to-abort-filefindrule-after-first-match/48474567#48474567", "title": "How to abort File::Find::Rule after first match?", "body": "<p>One way is to use <a href=\"http://search.cpan.org/~rclamp/File-Find-Rule-0.34/lib/File/Find/Rule.pm#exec\" rel=\"nofollow noreferrer\">its <code>exec</code></a>, in order to stop matching once the path of files found changes</p>\n\n<pre><code>my @files = File::Find::Rule-&gt;file-&gt;relative-&gt;name('*.txt')\n    -&gt;exec( sub { \n        state $path = ''; \n        return 0 if $path and $path ne $_[1]; \n        $path = $_[1]; \n     }\n)-&gt;in($WD); \n</code></pre>\n\n<p>The subroutine in <code>exec</code> is invoked once the files are found, and in it the path to files is available as the second argument in <code>@_</code>. Once that path changes from what it had been up to that point it means that the search has found files in a different directory. </p>\n\n<p>As soon as that happens we stop changing <code>$path</code> so all further queries on that directory fail.</p>\n\n<p>This is a simple way to detect change of directories in which files are found. Check by replacing <code>return 0</code> with, for example, <code>say \"Changed from $path to $_[1]\";</code>.</p>\n\n<p>Tested as <code>perl -Mstrict -MFile::Find::Rule -wE'...'</code>, and <code>'</code> in code were <code>\"</code>.</p>\n\n<p>Note: you need <code>use feature 'state';</code> for <a href=\"https://perldoc.perl.org/functions/state.html\" rel=\"nofollow noreferrer\">state</a> (unless you are under <code>use v5.10</code> or higher). In a one-liner the <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\"><code>-E</code></a> (as opposed to <code>-e</code>) enables all <a href=\"https://perldoc.perl.org/feature.html#The-%27state%27-feature\" rel=\"nofollow noreferrer\">feature</a>s, in the main compilation unit.</p>\n\n<hr>\n\n<p>Early comments changed (or obscured) the requirement in the title to abort altogether under the stated condition. In that case <code>die</code> instead of <code>return 0</code>, inside <code>eval</code></p>\n\n<pre><code>my @files;\neval { \n    @files = File::Find::Rule-&gt;file-&gt;relative-&gt;name('*&gt;txt')\n        -&gt;exec( sub { \n            state $path = ''; \n            die \"CHANGED_DIR\\n\" if $path and $path ne $_[1];\n            $path = $_[1];\n        })\n        -&gt;in($WD);\n} or do { die $@ if $@ ne 'CHANGED_DIR' }\n</code></pre>\n\n<p>where the string for <code>die</code> is made up only so that we can check and re-throw if needed.</p>\n"}], "owner": {"reputation": 21, "user_id": 9275647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a709136b54c676697c81bce7ffbc26?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/9275647/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1530211843, "creation_date": 1517040102, "last_edit_date": 1517165091, "question_id": 48473834, "link": "https://stackoverflow.com/questions/48473834/how-to-abort-filefindrule-after-first-match", "title": "How to abort File::Find::Rule after first match?", "body": "<p>I am using\n<a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\"><code>File::Find::Rule</code></a>\nin the following piece of code to search recursively for\na file within a given directory.</p>\n\n<h3>Perl code</h3>\n\n<pre><code>my $WD = Cwd::abs_path();\n\nmy @files = File::Find::Rule-&gt;file()-&gt;relative()-&gt;name( '*.txt' )-&gt;in($WD);\n\nfor my $file ( @files ) {\n    print \"file: $file\\n\";\n}\n</code></pre>\n\n<h3>Directory structure</h3>\n\n<pre><code>|--- DIR1\n     |-- subdir1\n             |-- *.txt\n     |-- subdir2\n             |-- *.txt\n             |-- *.txt\n</code></pre>\n\n<h3>Current output</h3>\n\n<pre><code>DIR1/subdir1/*.txt\nDIR1/subdir2/*.txt\nDIR1/subdir2/*.txt\n</code></pre>\n\n<h3>Desired output</h3>\n\n<pre><code>DIR1/subdir1/*.txt\n</code></pre>\n\n<p>Can someone please suggest what can be done?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517049425, "post_id": 48471450, "comment_id": 83943151, "body": "Or <code>$self-&gt;{writer}-&gt;print(&quot;$number\\n&quot;)</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517108181, "post_id": 48471450, "comment_id": 83958488, "body": "@Borodin  Thank you. Definitely needed be mentioned -- updated."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 9, "last_activity_date": 1579157083, "last_edit_date": 1592644375, "creation_date": 1517013244, "answer_id": 48471450, "question_id": 48471304, "link": "https://stackoverflow.com/questions/48471304/is-it-allowed-to-pass-pipes-to-constructors/48471450#48471450", "title": "is it allowed to pass pipes to constructors?", "body": "<p>From <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"noreferrer\">print</a></p>\n<blockquote>\n<p>If you're storing handles in an array or hash, or in general whenever you're using any expression more complex than a bareword handle or a plain, unsubscripted scalar variable to retrieve it, you will <strong>have to use a block returning the filehandle value</strong> instead,  ...</p>\n<pre><code>print { $files[$i] } &quot;stuff\\n&quot;;\nprint { $OK ? *STDOUT : *STDERR } &quot;stuff\\n&quot;;\n</code></pre>\n</blockquote>\n<p>(my emphasis)</p>\n<p>So you need</p>\n<pre><code>print { $self-&gt;{writer} } &quot;$number\\n&quot;;\n</code></pre>\n<hr />\n<p>Or, per <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a>'s comment</p>\n<pre><code>$self-&gt;{writer}-&gt;print(&quot;$number\\n&quot;);\n</code></pre>\n<p>The syntax of <code>print</code> is special, see for example <a href=\"https://stackoverflow.com/q/387702/4653379\">this post</a> and <a href=\"https://stackoverflow.com/q/48195133/4653379\">this post</a>. For one, after <code>print</code> must come either a &quot;simple&quot; filehandle or <em>a block</em> evaluating to one, as quoted above, to satisfy the parser.</p>\n<p>But with the <a href=\"https://perldoc.perl.org/perlop.html#The-Arrow-Operator\" rel=\"noreferrer\">dereference (arrow) operator</a> the filehandle is found to be an <a href=\"http://perldoc.perl.org/IO/File.html\" rel=\"noreferrer\">IO::File</a> object<sup>\u2020</sup> and so its parent's <a href=\"https://perldoc.perl.org/IO/Handle.html\" rel=\"noreferrer\">IO::Handle::print</a> method is invoked on it.\nPrior to v5.14 there had to be <code>use IO::Handle;</code> for this to work, though not anymore. See <a href=\"https://stackoverflow.com/a/48412630/4653379\">this post</a> and links in it for more.</p>\n<p>Note that <code>print FILEHANDLE LIST</code> is not an <a href=\"https://perldoc.perl.org/perlobj.html#Indirect-Object-Syntax\" rel=\"noreferrer\">indirect method call</a>,\neven as it may appear to be. It is just a function call to the <code>print</code> builtin under rather special syntax rules. It is only with an explicit <code>-&gt;</code>\nthat an <code>IO::Handle</code> method gets called.</p>\n<hr />\n<p><sup>\u2020</sup> It is either blessed into the class as the method call is encountered (and fails), or at creation; I can't find it in docs or otherwise resolve whether filehandles are blessed at creation or on demand</p>\n<pre><code>perl -MScalar::Util=blessed -wE'\n    pipe(RD,WR);                   \n    say *WR{IO};                   #--&gt; IO::File=IO(0xe8cb58)\n    say blessed(WR)//&quot;undef&quot;;      #--&gt; undef\n'\n</code></pre>\n<p>(warns of unused <code>RD</code>) \u00a0 We can't do this with lexical filehandles as they are not in the symbol table.</p>\n<p>But once needed a filehandle <em>is</em> an <code>IO::File</code> or <code>IO::Handle</code> object (depending on Perl version).</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 48471450, "answer_count": 1, "score": 3, "last_activity_date": 1579157083, "creation_date": 1517011886, "question_id": 48471304, "link": "https://stackoverflow.com/questions/48471304/is-it-allowed-to-pass-pipes-to-constructors", "title": "is it allowed to pass pipes to constructors?", "body": "<p>I tried to do something very fancy in Perl, and I think I'm suffering the consequences. I don't know if what I was trying to do is possible, actually.</p>\n\n<p>My main program creates a pipe like this:</p>\n\n<pre><code>pipe(my $pipe_reader, my $pipe_writer);\n</code></pre>\n\n<p>(originally it was pipe(PIPE_READER, PIPE_WRITER) but I changed to regular variables when I was trying to debug this)</p>\n\n<p>Then it forks, but I think that is probably irrelevant here. The child does this:</p>\n\n<pre><code>my $response = Response-&gt;new($pipe_writer);\n</code></pre>\n\n<p>The constructor of Response is bare bones:</p>\n\n<pre><code>sub new {\n    my $class = shift;\n    my $writer = shift;\n\n    my $self = {\n        writer =&gt; $writer\n    };\n    bless($self, $class);\n    return($self);\n }\n</code></pre>\n\n<p>Then later the child will write its response:</p>\n\n<pre><code>$response-&gt;respond(123, \"Here is my response\");\n</code></pre>\n\n<p>The code for respond is as follows:</p>\n\n<pre><code>sub respond {\n    my $self = shift;\n    my $number = shift;\n    my $text = shift;\n    print $self-&gt;{writer} \"$number\\n\";\n    print $self-&gt;{writer} \"$text\\n\";\n    close $self-&gt;{writer}\n}\n</code></pre>\n\n<p>This triggers a strange compile error: 'String found where operator expected ... Missing operator before \"$number\\n\"?' at the point of the first print. Of course this is the normal syntax for a print, except that I have the object property instead of a normal handle AND it happens to be a pipe, not a file handle. So now I'm wondering if I'm not allowed to do this.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1516975672, "last_edit_date": 1516975672, "creation_date": 1516974987, "answer_id": 48462740, "question_id": 48462510, "link": "https://stackoverflow.com/questions/48462510/add-newlines-in-a-substitution-with-array-contents-in-perl/48462740#48462740", "title": "add newlines in a substitution with array contents in perl", "body": "<p>You can store the value to a scalar variable and use it instead:</p>\n\n<pre><code>my $checklist = join \"\\n\", @checklist_items;\ns/%checklist%/$checklist/g;\n</code></pre>\n\n<p><a href=\"http://p3rl.org/join\" rel=\"nofollow noreferrer\">join</a> doesn't add a newline to the last item, so you need to add it manually if needed.</p>\n\n<p>Note that using a substitution table might be easier to maintain:</p>\n\n<pre><code>my %replace = ( appname   =&gt; $appl,\n                envir     =&gt; $env,\n                status    =&gt; $final_status,\n                checklist =&gt; join(\"\\n\", @checklist_items),\n                ... );\n\ns/%(\\w+)%/$replace{$1}/g for @mail_template;\n</code></pre>\n\n<p>Using <a href=\"http://p3rl.org/Template\" rel=\"nofollow noreferrer\">Template</a> or a similar module might be even easier and more flexible.</p>\n"}], "owner": {"reputation": 628, "user_id": 4279387, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/yEPjV.png?s=128&g=1", "display_name": "olivierg", "link": "https://stackoverflow.com/users/4279387/olivierg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 48462740, "answer_count": 1, "score": 1, "last_activity_date": 1516975672, "creation_date": 1516974135, "question_id": 48462510, "link": "https://stackoverflow.com/questions/48462510/add-newlines-in-a-substitution-with-array-contents-in-perl", "title": "add newlines in a substitution with array contents in perl", "body": "<p>I have a code with some substitutes like this :</p>\n\n<pre><code>  foreach (@mail_template) {\n     s/%appname%/$appl/g;\n     s/%envir%/$env/g;\n     s/%status%/$final_status/g;\n     s/%date%/$date/g;\n     s/%from%/$from/g;\n     s/%to%/$to/g;\n     s/%filename%/$main::log/g;\n     s/%checklist%/@checklist_items/g;\n     s/%logs%/@error_logs/g;\n     print TMP \"$_\";\n  }\n</code></pre>\n\n<p>however, it looks like the substitution with an array like :</p>\n\n<pre><code>s/%checklist%/@checklist_items/g;\n</code></pre>\n\n<p>is pasting all the contents of the array without any newlines</p>\n\n<p>in the final file, I have something like :</p>\n\n<pre><code>array_entry1 array_entry2 array_entry3 array_entry N\n</code></pre>\n\n<p>all on the same line (which is normal).</p>\n\n<p>my question is : how do I get the same behavior but with newlines added after each entry ?</p>\n\n<p>I would like the substitution to give something like this instead :</p>\n\n<pre><code>array_entry1\narray_entry2\narray_entry3\narray_entryN\n</code></pre>\n\n<p>I suppose I could add a '\\n' to each array entry or something ?</p>\n\n<p>thanks\nregards,</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516929997, "post_id": 48454477, "comment_id": 83902178, "body": "Does your window start with the first phrase (when all three happen to be found then)? And if they are not found wihtin 12 words then you &quot;reset&quot; and start a &quot;provisional&quot; window again when you run into the first word?"}, {"owner": {"reputation": 55, "user_id": 9270203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e96600389ff9104b5f9c58e511e8e?s=128&d=identicon&r=PG&f=1", "display_name": "elci", "link": "https://stackoverflow.com/users/9270203/elci"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516932144, "post_id": 48454477, "comment_id": 83902646, "body": "Yes, the first word in the phrase starts the window."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516932431, "post_id": 48454477, "comment_id": 83902713, "body": "Thank you. Can there be multiple occurrences of the phrase within the whole string?"}, {"owner": {"reputation": 55, "user_id": 9270203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e96600389ff9104b5f9c58e511e8e?s=128&d=identicon&r=PG&f=1", "display_name": "elci", "link": "https://stackoverflow.com/users/9270203/elci"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516933234, "post_id": 48454477, "comment_id": 83902884, "body": "Yes, there can be multiple occurrences, which is why I want to count them. For example, say all 3 example phrases I gave above are in the same document, which I slurp into the $text variable. I want to be able to count that there are 3 occurrences of the phrase."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516938302, "post_id": 48454477, "comment_id": 83903990, "body": "I tested the posted code but surely not well enough -- let me know if you find holes in thorough tests."}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1517299708, "post_id": 48454477, "comment_id": 84027632, "body": "Looks like you need to parse instead of simply match. Also it&#39;s unclear if you need to look for the difference between &quot;Good thing I expect bad weather&quot;, and &quot;Good thing I expect no bad weather at all&quot;. You&#39;re lucky there&#39;s a bunch of people willing to write you a parser."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 55, "user_id": 9270203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e96600389ff9104b5f9c58e511e8e?s=128&d=identicon&r=PG&f=1", "display_name": "elci", "link": "https://stackoverflow.com/users/9270203/elci"}, "edited": false, "score": 0, "creation_date": 1517256743, "post_id": 48455316, "comment_id": 84013307, "body": "@elci  Updated with two bug fixes: (1)  &quot;badly&quot; is matched by &quot;bad&quot; (etc) when without <code>\\b</code> around <code>($wN)</code> (2) In the nested re-scanning of the window the <code>$two</code> and <code>$three</code> need be reset as well"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1595837506, "last_edit_date": 1595837506, "creation_date": 1516936601, "answer_id": 48455316, "question_id": 48454477, "link": "https://stackoverflow.com/questions/48454477/perl-how-to-count-number-of-times-3-word-phrase-with-gaps-occurs-within-an-n/48455316#48455316", "title": "Perl: How to count number of times 3-word phrase (with gaps) occurs within an N-word window", "body": "<p><strong>Note</strong> \u00a0  This post addresses the question of finding words spread out within a window, as asked. It does not consider the far more involved issues of general text parsing or language analysis.</p>\n<hr />\n<p>The code below searches for the first word and then continues with another regex for the other two. There it scans the text word by word and keeps a counter so it can stop at 12 words. It uses <code>pos</code> to control where it should continue after checking the window.</p>\n<p>The 12-long window is taken to start with word <code>expect</code> once it is found, as clarified in comments. The search continues from after the completed phrase, for the next one.</p>\n<p>If the phrase is not found within the next 11 words the engine is returned to the position after <code>expect</code> to carry on with the search (as there may be another <code>expect</code> within the checked 11 words).</p>\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $s = q(I expect, although no one confirmed, that bad weather is on the way.)\n      . q(  Expect that we cannot expect to escape the bad, bad weather.);\n\nmy $word_range = 12;\nmy ($w1, $w2, $w3) = qw(expect bad weather);\n\nFIRST_WORD: while ($s =~ /\\b($w1)\\b/gi) {\n    #say &quot;SEARCH, at &quot;, pos $s;\n    my ($one, $pos_one) = ($1, pos $s);\n\n    my ($two, $three, $cnt);\n\n    while ($s =~ /(\\w+)/g) {\n        my $word = $1; \n        #say &quot;\\t$word  ... (at &quot;, pos $s, &quot;)&quot;;\n\n        $two = $1  if $word =~ /\\b($w2)\\b/i; \n        \n        if ( $two and (($three) = $word =~ /\\b($w3)\\b/i) ) { \n            say &quot;$one + $two + $three  (pos &quot;, pos $s, ')';\n            next FIRST_WORD;\n        }\n        last if ++$cnt == $word_range-1;  # failed (these 11 + 'expect') \n    }\n    pos $s = $pos_one;         # return to position in string after 'expect'\n}\n</code></pre>\n<p>Note that one cannot assign the match (for <code>$one</code>) inside the loop condition as that puts the matching in the list context and thus disturbs the needed behavior of <code>/g</code> and <a href=\"https://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\">pos</a>.</p>\n<p>The prints which are commented out can be used to track the operation.  As it stands this prints</p>\n<pre>\nexpect + bad + weather  (pos 53)\nExpect + bad + weather  (pos 128)\n</pre>\n<p>I extend the string to test multiple occurrences of the phrase. The operation with failed matches can be tested by crippling keywords and tracking the position in the search.</p>\n<p>A possible extra keyword inside of the phrase, as in the second sentence, is ignored and the phrase is accepted if there, as this is unspecified but implicit in the question. This is easily changed.</p>\n<p>If there were more words in the phrase they would all be sought in the inner <code>while</code> loop, in the same way as the last two are now, by matching them sequentially (requiring for each word that all preceding words had been found). The outer <code>while</code> loop is needed only to start the window.</p>\n<hr />\n<p>After a failed window-scan the outer <code>while</code> continues its search for <code>expect</code> from the position of the window beginning, thus scanning the same 11 words again.</p>\n<p>This repeated search through the text can be reduced by checking for <code>expect</code> as well during the window scan. Then scan afresh from that position, with the inner <code>while</code></p>\n<pre><code># First sentence shortened and now does not contain the phrase\nmy $s = q(I expect, although no one confirmed, that bad expect.)\n      . q( Expect that we cannot expect to escape the bad, bad weather.);    \n...\nFIRST_WORD: while ($s =~ /\\b($w1)\\b/gi) {\n    my ($one, $pos_one) = ($1, pos $s);\n\n    my ($two, $three, $cnt, $pos_one_new);\n\n    while ($s =~ /(\\w+)/g) {\n        my $word = $1;\n        #say &quot;\\t$word  ... (at &quot;, pos $s, &quot;)&quot;;\n\n        $pos_one_new = pos $s\n            if not $pos_one_new and $word =~ /\\b$w1\\b/i;\n\n        $two = $1  if $word =~ /\\b($w2)\\b/i;\n\n        if ( $two and (($three) = $word =~ /\\b($w3)\\b/i) ) {\n            say &quot;$one + $two + $three  (pos &quot;, pos $s, ')';\n            next FIRST_WORD;\n        } \n\n        if (++$cnt == $word_range-1) {\n            last  if not $pos_one_new;\n     \n            #say &quot;Scan window anew from $pos_one_new&quot;;\n            pos $s   = $pos_one_new;\n            $pos_one = $pos_one_new;\n            $pos_one_new = 0;\n            $two = $three = '';\n            $cnt = 0;\n        }\n    }\n    pos $s = $pos_one;\n}\n</code></pre>\n<p>This prints</p>\n<pre>\nexpect + bad + weather  (pos 113)\n</pre>\n<p>Note that the <em>first</em> occurrence of <code>expect</code> within the window is used.</p>\n"}, {"comments": [{"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1517276365, "post_id": 48457667, "comment_id": 84020126, "body": "It&#39;s an answer that reframes how to process the input so that the person who knows the requirements, and isn&#39;t giving them clearly can easily adapt this to work. I&#39;m not sure why it would get down-voted other than that I&#39;m not willing to do every last detail of someone else&#39;s work."}], "tags": [], "owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "is_accepted": false, "score": -1, "last_activity_date": 1516954627, "last_edit_date": 1516954627, "creation_date": 1516954087, "answer_id": 48457667, "question_id": 48454477, "link": "https://stackoverflow.com/questions/48454477/perl-how-to-count-number-of-times-3-word-phrase-with-gaps-occurs-within-an-n/48457667#48457667", "title": "Perl: How to count number of times 3-word phrase (with gaps) occurs within an N-word window", "body": "<p>Your requirements are a little vague to me. Like I don't know if you want to take in any sequence of words, and then count \"expect .* bad .* weather\", or if you want to only take 12 words and ignore the rest, or if you want to slide along a word at a time and never look at more than 12 words at a time.</p>\n\n<p>I figured I'd simplify it:\nI take the whole line input; I throw out whatever words aren't expect, bad, or weather; then I count the number of \"expect bad weather\" occurrences thereafter. If something says \"expect bad bad weather\" That's not a match. I'm sure you can modify this with your more exact requirements AS you understand them better than I.</p>\n\n<pre><code>while(&lt;&gt;){\n$_=lc;\n@w=split(/\\W+/);\n@w=map {\n  if    (/expect/)      {1}\n  elsif (/bad/)         {2}\n  elsif (/weather/)     {3}\n  else                  {0}\n  } @w;\n$_ = join(\"\", @w);\nprint;\n@w=grep {+$_&gt;0} @w;\n$_ = join(\"\", @w);\nprint \"=&gt;$_\";\n@r=/123/g;\nprint \"=\".scalar(@r).\"\\n\";\n}\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>hi! Expect really bad weather man.\n010230=&gt;123=1\nhi! Expect really bad weather man.hi! Expect really bad weather man.hi! Expect really bad weather man.\n010230010230010230=&gt;123123123=3\nExpect expect bad weather, expect bad bad bad weather, expect bad expect weather.\n1123122231213=&gt;1123122231213=1\n</code></pre>\n\n<p>You can also sort of one-line this, but I think <code>scalar(/123/g)</code> means something different than <code>@r=/123/g;scalar @r;</code> so I put <code>scalar(@_=/123/g)</code>.</p>\n\n<pre><code>$ perl -nE '$_=lc;$_=join(\"\",grep{+$_&gt;0}map{if(/expect/){1}elsif(/bad/){2}elsif(/weather/){3}else{0}}split(/\\W+/));say scalar(@_=/123/g).\"\\n\";'\nhi! Expect really bad weather man.\n1\n\nhi! Expect really bad weather man. hi! Expect really bad weather man.\n2\n\nExpect Sad and Bad Weather today. Maybe Expect bad weather tomorrow too, because scalar is not helping.\n2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517350218, "post_id": 48509468, "comment_id": 84058196, "body": "Very nice to see a proper take on it. (I decided to &quot;tokenize&quot; on the fly via <code>while (&#47;\\w+&#47;g)</code>.)   A note on the &quot;<i>cross sentence phrase detection <b>bug</b></i>&quot; (my emphasis) -- that post disregards any language structure on purpose.  (Which would get into &quot;bad weather&quot; vs &quot;no bad weather&quot; issues. I specifically patch the phrase across &quot;sentences,&quot; one of which is broken, in the second example.)  It parses a string for words within a window (and doesn&#39;t claim the absence of possible subtle bugs in that either :). All that said, perhaps I <i>should&#39;ve</i> broken the text into sentences first."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517514410, "post_id": 48509468, "comment_id": 84137628, "body": "@zdim, you already had my upvote.  The OP only loosely implied that they might not want cross-sentence phrases (all the positive examples were only one sentence).  As I pointed out, it&#39;s easy to break out the sentences before handing the text to your example code.  At least as easy as finding sentences in English text ever is. :)  I do stand-by the use of the word bug, although it is a bug as much in specification as implementation.  In my decades of building software, these errors of the invisible assumption are the hardest to identify and fix."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1517940157, "post_id": 48509468, "comment_id": 84296101, "body": "Well, yes; this clearly seems to be about text so sentence structure should be respected and then it is a bug. It is a good point and a great post (upvoted already), I only meant to state my rationale. But you are right, if it&#39;s clear what it is I should&#39;ve straightened it out. I completely agree with the assessment of &quot;invisible assumptions.&quot;  A good deal of building software is about articulating &quot;requirements&quot; -- translating from the problem domain. It&#39;s a non-trivial problem and when communication fails on top of it (with unstated/invisible features) it&#39;s hard to get it straight."}], "tags": [], "owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "is_accepted": false, "score": 1, "last_activity_date": 1517257797, "creation_date": 1517257797, "answer_id": 48509468, "question_id": 48454477, "link": "https://stackoverflow.com/questions/48454477/perl-how-to-count-number-of-times-3-word-phrase-with-gaps-occurs-within-an-n/48509468#48509468", "title": "Perl: How to count number of times 3-word phrase (with gaps) occurs within an N-word window", "body": "<p>Since you mentioned processing a document, I assume you're working with a long string of sentences.  So you could have:</p>\n\n<blockquote>\n  <p>I am unsure why I always expect bad from people. Weather isn't an\n  indicator.</p>\n</blockquote>\n\n<p>I assume that this would NOT be desirable to mark as an occurrence of the target phrase \"expect bad weather\".</p>\n\n<p>You've already got one great answer that is purely regex oriented. You could easily fix the cross sentence phrase detection bug it features by splitting on the sentence, like I do here. Despite that, I thought I'd show another way to think about the problem.</p>\n\n<p>The key concepts are <strong>tokenize</strong> and <strong>normalize</strong>.</p>\n\n<p>First we turn the corpus into a list of sentences.  That's tokenization level one.</p>\n\n<p>Seconds we turn each sentence into a string of lower case words with punctuation (except apostrophe) removed.  Tokenization level two and normalization.</p>\n\n<p>Now all you have to do is sift through all your piles of tokens and see if any contain the target tokens.</p>\n\n<p>I handle backtracking in a very lazy way by looping over the corpus text looking for places where we match the first word of our target.  Where that happens, I grab up to the maximum number of words from the corpus and check to see if the target list is contained in that list.  This gives a nice backtracking behavior without all the book-keeping.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse feature 'say';\nuse Lingua::Sentence;\n\nmy $doc = \"I am unsure why I always expect bad from people. Weather isn't an indicator. My mood is fine whether it is sunny or I expect to see some bad weather.\";\n\nmy @targets = (\n    [qw/ expect bad weather /],\n    [qw/ my mood is bad /],\n);\nmy $max_phrase_length = 12;\n\nmy $splitter = Lingua::Sentence-&gt;new('en');\nmy @sentences = $splitter-&gt;split_array( $doc );\n\nmy %counter;\n\nfor my $sentence ( @sentences ) {\n    say \"Checking sentence:  $sentence\";\n    my @words = map lc,                  # Normalize to lowercase\n                map /(['\\w]*)/,          # get rid of punctuation\n                split /\\s+/, $sentence;  # Break sentence into words\n\n    for my $target ( @targets ) {\n        say \"    Checking target:  @$target\";\n\n        for my $i (0..$#words ) { \n            my $word = @words[$i];\n            say \"        Checking $word\";\n\n            next if $word ne $target-&gt;[0];\n\n            my $first_word = $i; \n            my $last_word = $i + $max_phrase_length -1; \n            $last_word = $#words if $last_word &gt; $#words;\n\n            if ( has_phrase( $target, [ @words[$first_word..$last_word] ] ) ) { \n                say \"BINGO!  @$target\";\n                $counter{ \"@$target\" }++;\n            }\n        }\n    }\n}\n\nuse Data::Dumper;\n\nprint Dumper \\%counter;\n\n\nsub has_phrase {\n    my ( $target, $text ) = @_;\n    return if @$target &gt; $text;\n\n    my $match_idx = 0;\n    for my $idx ( 0..$#$text ) {\n        if ($target-&gt;[$match_idx] eq $text-&gt;[$idx]) {\n            $match_idx++;\n            return 1 if $match_idx eq @$target;\n        }\n    }\n\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9270203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209e96600389ff9104b5f9c58e511e8e?s=128&d=identicon&r=PG&f=1", "display_name": "elci", "link": "https://stackoverflow.com/users/9270203/elci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 48455316, "answer_count": 3, "score": 3, "last_activity_date": 1595837506, "creation_date": 1516929157, "question_id": 48454477, "link": "https://stackoverflow.com/questions/48454477/perl-how-to-count-number-of-times-3-word-phrase-with-gaps-occurs-within-an-n", "title": "Perl: How to count number of times 3-word phrase (with gaps) occurs within an N-word window", "body": "<p>I'm trying to count the number of times a 3-word phrase occurs within a 12-word window in a document, but the difficulty is that the keywords I'm searching for can be spread throughout the window.</p>\n\n<p>For example:</p>\n\n<p>I want to find the phrase \"expect bad weather\" within a 12-word phrase, where other words can be inserted between the 3 desired words as long as the total phrase in which the 3 words are contained does not exceed 12 words.</p>\n\n<p>Phrases which would work:</p>\n\n<ul>\n<li>I expect there will be bad weather.</li>\n<li>They expect bad and windy weather.</li>\n<li>I expect, although no one has confirmed this, that bad weather is on\nthe way.</li>\n</ul>\n\n<p>I've struggled to figure out how to do this. I know how to count occurrences of 2-word phrases where there can be a gap between. For example, if I'm counting how often \"expect\" and \"weather\" occur within a 12-word phrase, I can do:</p>\n\n<pre><code>$mycount =()= $text =~ /\\b(?:expect\\W+(?:\\w+\\W+){0,10}?weather)\\b/gi;\n</code></pre>\n\n<p>However, it's not as simple when I want to do this with 3 words, because I end up with 2 gaps which must sum together so that my window doesn't exceed 12 words. Ideally I would be able to do something like:</p>\n\n<pre><code>$mycount =()= $text =~ /\\b(?:expect\\W+(?:\\w+\\W+){0,$Gap1}?bad\\W+(?:\\w+\\W+){0,$Gap2}?weather)\\b/gi;\n</code></pre>\n\n<p>Where $Gap2 = 9 - $Gap1, but I don't think there's a way to do this.</p>\n\n<p>I also thought of creating a loop so that in one iteration of the loop, $Gap1=0 and $Gap2=9, in the second iteration $Gap1=1 and $Gap2=8, etc, and then adding the counts of all of the loops. However, doing this will doublecount some instances of the phrase.</p>\n\n<p>I'm at a loss. Does anyone have any ideas? I can't find any relevant examples anywhere.</p>\n"}, {"tags": ["perl", "phantomjs", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 4971558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c0662c98a4fd6df761536c99c2856a1?s=128&d=identicon&r=PG&f=1", "display_name": "jdubu423", "link": "https://stackoverflow.com/users/4971558/jdubu423"}, "is_accepted": true, "score": 0, "last_activity_date": 1524255398, "creation_date": 1524255398, "answer_id": 49949133, "question_id": 48453957, "link": "https://stackoverflow.com/questions/48453957/how-to-select-an-option-in-a-dropdown-list-using-wwwmechanizephantomjs/49949133#49949133", "title": "How to select an option in a dropdown list using WWW::Mechanize::PhantomJS", "body": "<p>There is no way to do this.  I am closing the question because I found alternative to doing this, and the PhantomJS is being deprecated and its successor is Chrome.</p>\n"}], "owner": {"reputation": 375, "user_id": 4971558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c0662c98a4fd6df761536c99c2856a1?s=128&d=identicon&r=PG&f=1", "display_name": "jdubu423", "link": "https://stackoverflow.com/users/4971558/jdubu423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 49949133, "answer_count": 1, "score": 1, "last_activity_date": 1524255398, "creation_date": 1516925416, "last_edit_date": 1516967047, "question_id": 48453957, "link": "https://stackoverflow.com/questions/48453957/how-to-select-an-option-in-a-dropdown-list-using-wwwmechanizephantomjs", "title": "How to select an option in a dropdown list using WWW::Mechanize::PhantomJS", "body": "<p>I am trying to select an option that has no value using <a href=\"https://metacpan.org/pod/WWW::Mechanize::PhantomJS\" rel=\"nofollow noreferrer\">WWW::Mechanize::PhantomJS</a></p>\n\n<p>I have tried both methods below:</p>\n\n<pre><code>$mech-&gt;set_fields($name, $value);\n$mech-&gt;field($name, $value);\n</code></pre>\n\n<p>This is the select element I am trying to select from:</p>\n\n<pre><code>&lt;select class=\"calendarDateInput\" id=\"enddate_Day_ID\" onchange=\"enddate_Object.changeDay(this)\"&gt;\n     &lt;option&gt;1&lt;/option&gt;\n     &lt;option&gt;2&lt;/option&gt;\n     &lt;option&gt;3&lt;/option&gt;\n         ...\n&lt;/select&gt;\n</code></pre>\n\n<p>I have not been able to select any of the options. Apparently WWW::Mechanize::PhantomJS does not have the select method.  I am still a noob in Perl.</p>\n"}, {"tags": ["perl", "output", "concatenation", "concat"], "answers": [{"tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": false, "score": 3, "last_activity_date": 1516914523, "creation_date": 1516914523, "answer_id": 48451942, "question_id": 48451903, "link": "https://stackoverflow.com/questions/48451903/add-the-name-of-the-input-file-to-a-string-as-the-name-of-the-output-file-in-per/48451942#48451942", "title": "Add the name of the input file to a string as the name of the output file in Perl", "body": "<pre><code>$base = basename $text;\n</code></pre>\n\n<p><code>$text</code> is not defined anywhere.  Therefore, you're passing an <code>undef</code> to the <code>basename</code> function.</p>\n\n<p>You should have</p>\n\n<pre><code>use warnings;\nuse strict;\n</code></pre>\n\n<p>at the top of every program you write to catch problems like that.</p>\n"}], "owner": {"reputation": 43, "user_id": 9252073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27e1b31c0959b16ca2598166ede358a?s=128&d=identicon&r=PG&f=1", "display_name": "sisuz", "link": "https://stackoverflow.com/users/9252073/sisuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516914523, "creation_date": 1516914328, "question_id": 48451903, "link": "https://stackoverflow.com/questions/48451903/add-the-name-of-the-input-file-to-a-string-as-the-name-of-the-output-file-in-per", "title": "Add the name of the input file to a string as the name of the output file in Perl", "body": "<p>I have loaded my input file using <code>open</code>. I want to concatenate the name of the input file with the string 'matched_results', and use that as a name for my output file.</p>\n\n<p>Here is the code I have:</p>\n\n<pre><code>use File::Basename;\nopen(text, \"&lt;sampletext7482_ch9.txt\");\n\nwhile (my $line = &lt;text&gt;) {\n    push @matches, $1 while $line\n        =~ m{\n          (###some regex here)\n        }xgi;\n}\n\n\n$base = basename $text;\nmy $filename = \"matched_results${base}.txt\";\nopen(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\nprint $fh \"$_\\n\" for @matches;\nclose $fh;\n</code></pre>\n\n<p>I get the following error.</p>\n\n<pre><code>Use of uninitialized value $_[0] in substitution (s///) at /usr/share/perl/5.18/File/Basename.pm line 341, &lt;text&gt; line 1.\n</code></pre>\n"}, {"tags": ["perl", "scope", "subroutine"], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1516901835, "post_id": 48448166, "comment_id": 83890191, "body": "I don&#39;t understand why this answer was downvoted, so, +1 from me."}, {"owner": {"reputation": 11, "user_id": 9268357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-unYJeF_BFS0/AAAAAAAAAAI/AAAAAAAAAAs/AKt5G6WBQhg/photo.jpg?sz=128", "display_name": "Dave Ferrero", "link": "https://stackoverflow.com/users/9268357/dave-ferrero"}, "edited": false, "score": 0, "creation_date": 1516910398, "post_id": 48448166, "comment_id": 83894762, "body": "I&#39;ve tried to modify <code>$hash-&gt;{path}</code> at the end of the subroutine but when it ends <code>customLogPath</code> hasn&#39;t changed. The line I coded is <code>{args-&gt;{customPath} = &#39;Testing&#39;;</code>. Doing a print inside and outside of the sub I get different values"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516911883, "post_id": 48448166, "comment_id": 83895515, "body": "Re &quot;<i>I&#39;ve tried to modify <code>$hash-&gt;{path}</code> at the end of the subroutine</i>&quot;, Always use <code>use strict;</code>!!! <code>$hash</code> doesn&#39;t exist."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516911932, "post_id": 48448166, "comment_id": 83895539, "body": "Re &quot;<i>The line I coded is <code>{args-&gt;{customPath} = &#39;Testing&#39;;</code></i>&quot;, (I&#39;m assuming you meant <code>$args-&gt;{customPath} = &#39;Testing&#39;;</code>.) Always use <code>use strict;</code>!!! <code>$args</code> doesn&#39;t exist."}, {"owner": {"reputation": 11, "user_id": 9268357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-unYJeF_BFS0/AAAAAAAAAAI/AAAAAAAAAAs/AKt5G6WBQhg/photo.jpg?sz=128", "display_name": "Dave Ferrero", "link": "https://stackoverflow.com/users/9268357/dave-ferrero"}, "edited": false, "score": 0, "creation_date": 1516954544, "post_id": 48448166, "comment_id": 83908112, "body": "Yes, I always <code>use strict;</code> on my script. And <code>{args</code> was a typo. I was talking about <code>$args</code>, which exists in my original subroutine (<code>my ($args) = @_;</code>). So that&#39;s why I&#39;m getting different values, and I don&#39;t understand why"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516986297, "post_id": 48448166, "comment_id": 83925634, "body": "I already explained why your code doesn&#39;t work. And you couldn&#39;t possibly have printed the <code>$args-&gt;{customPath}</code> outside the sub if you used <code>use strict;</code>. One of your claims is false."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1516899237, "creation_date": 1516899237, "answer_id": 48448166, "question_id": 48447757, "link": "https://stackoverflow.com/questions/48447757/perl-how-to-modify-variables-with-subroutines-without-return/48448166#48448166", "title": "Perl - How to modify variables with subroutines without return", "body": "<p>If <code>$logPath</code> was passed to the subroutine as an argument (or via a reference), it would be possible to change it (by modifying the correct element of <code>@_</code> (or modifying the referenced scalar)). But you copy its value into a hash and pass a reference to that hash instead. At best, you could modify <code>$hash-&gt;{path}</code> instead of <code>$logPath</code>.</p>\n\n<pre><code>sub fixFilePath {\n    our $checkingPath; local *checkingPath = \\shift;  # my \\$checkingPath = \\shift;\n    my %args = @_;\n    my $checkingCustomPath = $args{customPath};\n\n    ...\n\n    return if $canBeRead;\n\n    ...\n\n    $checkingPath = $checkingCustomPath;\n}\n\n\nfixFilePath($logPath,\n    customPath =&gt; $customLogPath,\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1516905061, "last_edit_date": 1516905061, "creation_date": 1516899824, "answer_id": 48448322, "question_id": 48447757, "link": "https://stackoverflow.com/questions/48447757/perl-how-to-modify-variables-with-subroutines-without-return/48448322#48448322", "title": "Perl - How to modify variables with subroutines without return", "body": "<p>Thinking about this a little more, I decided to propose a different, less repetitive, and, IMO, clearer way of doing it:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse autouse Carp =&gt; qw(croak);\n\nprint chooseFilePath('doesnot.exist', \"$ENV{TEMP}/t.log\"), \"\\n\";\n\nsub chooseFilePath {\n    my $wantedPath = shift;\n    my $defaultPath = shift;\n\n    if (defined(my $reason = isBadFilePath($wantedPath))) {\n        warn \"[WARN] $reason.\\n\";\n        if (defined($reason = isBadFilePath($defaultPath))) {\n            die \"[ERR] $reason.\\n\";\n        }\n        return $defaultPath;\n    }\n\n    return $wantedPath;\n}\n\nsub isBadFilePath {\n    @_ or croak 'Need a path';\n\n    my $path = shift;\n\n    -e $path or return \"File '$path' doesn't exist\";\n    -f _ or return \"'$path' is not a file\";\n    -r _ or return \"File '$path' can't be read\";\n\n    return;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\...\\Temp&gt; perl s.pl\n[WARN] File 'doesnot.exist' doesn't exist.\n[ERR] File 'C:\\...\\Temp/t.log' doesn't exist.\n\nC:\\...\\Temp&gt; echo x &gt; t.log\n\nC:\\...\\Temp&gt; perl s.pl\n[WARN] File 'doesnot.exist' doesn't exist.\nC:\\...\\Temp/t.log\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9268357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-unYJeF_BFS0/AAAAAAAAAAI/AAAAAAAAAAs/AKt5G6WBQhg/photo.jpg?sz=128", "display_name": "Dave Ferrero", "link": "https://stackoverflow.com/users/9268357/dave-ferrero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1516905061, "creation_date": 1516897978, "question_id": 48447757, "link": "https://stackoverflow.com/questions/48447757/perl-how-to-modify-variables-with-subroutines-without-return", "title": "Perl - How to modify variables with subroutines without return", "body": "<p>The next code is used to get a filepath and check if exists and can be read; otherwise the value will be switched to a custom one:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n[...]\n\nsub checkFilePath{\n    my ($args) = @_;\n\n    my $checkingPath = $args-&gt;{path};\n    my $checkingCustomPath = $args-&gt;{customPath};\n\n    my $canBeRead = 1;\n    if ($checkingPath) {\n        if (!(-e \"$checkingPath\")) {\n            print \"[WARN] File $checkingPath doesn't exist.\\n\";\n            $canBeRead = 0;\n        } elsif (!(-f \"$checkingPath\")) {\n            print \"[WARN] $checkingPath is not a file.\\n\";\n            $canBeRead = 0;\n        } elsif (!(-r \"$checkingPath\")) {\n            print \"[WARN] File $checkingPath can't be read.\\n\";\n            $canBeRead = 0;\n        }\n    } \n    if (!($canBeRead)) {\n        # Testing custom regex file path\n        # If doesn't exist, it will try to use custom file or the script will die\n        die \"[ERR] Custom file $checkingCustomPath doesn't exist\\n\"  if (!(-e $checkingCustomPath));\n        die \"[ERR] Custom file $checkingCustomPath is not a file\\n\"  if (!(-f $checkingCustomPath));\n        die \"[ERR] Custom file $checkingCustomPath cannot be read\\n\" if (!(-r $checkingCustomPath));\n        return $checkingCustomPath;\n    }\n    return $checkingPath;\n}\n\n[...]\n\n$logPath = checkFilePath({\n    path =&gt; $logPath,\n    customPath =&gt; $customLogPath\n    });\n</code></pre>\n\n<p>I was wondering if there is a way to modify this code to update <code>$logPath</code> only with a subroutine call, like:</p>\n\n<pre><code># $logPath = '/tmp/thisfiledoesntexist.txt'\ncheckFilePath({\n        path =&gt; $logPath,\n        customPath =&gt; $customLogPath\n        });\n# $logPath now has a valid filepath, which is the same as $customLogPath\n</code></pre>\n"}, {"tags": ["perl", "subroutine", "anonymous"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1516894891, "post_id": 48446557, "comment_id": 83885375, "body": "Your anon sub isn&#39;t being called in the code you&#39;ve shown - it&#39;s being assigned to <code>$post_connection_action</code> for use at some later point"}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516967868, "post_id": 48446925, "comment_id": 83914614, "body": "While your last statement is correct, it might be that the lexical <code>$grader</code> inside their anonymous sub is a different one than the one in <code>go</code>. The grader seems to depend on the state of <code>$self-&gt;r</code>. On the other hand, <code>$r</code> from outside the anonymous sub is used inside it, so that is unlikely."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516986041, "post_id": 48446925, "comment_id": 83925480, "body": "@simbabque, Re &quot;<i>It might be that the lexical <code>$grader</code> inside their anonymous sub is a different one than the one in <code>go</code>.</i>&quot;, No, it can&#39;t. The OP wants to use the <code>$grader</code> from outside the sub in the sub, and I showed them how they could do that."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1516902532, "last_edit_date": 1516902532, "creation_date": 1516895476, "answer_id": 48446925, "question_id": 48446557, "link": "https://stackoverflow.com/questions/48446557/what-happens-if-you-call-shift-inside-an-anonymous-sub/48446925#48446925", "title": "What happens if you call shift inside an anonymous sub?", "body": "<p>There's nothing special about anon subs in this regard.</p>\n\n<pre><code>my $cr = sub {\n   my $arg = shift;\n   say $arg;\n};\n\n$cr-&gt;(\"foo\");   # Prints \"foo\"\n$cr-&gt;(\"bar\");   # Prints \"bar\"\n</code></pre>\n\n<p>In your case, you pass <code>$post_connection_action</code> and <code>$grader</code> to <code>cleanup_register</code> or <code>post_connection</code> with the expectation that it will result in a call to <code>&amp;$post_connection_action</code> with <code>$grader</code> as its first argument. Whether the expectation is correct or not depends on the implementation of <code>cleanup_register</code> and <code>post_connection</code>, of which I know nothing.</p>\n\n<hr>\n\n<p>Note that another solution presents itself here. Subs have access to the lexicals that were in scope when the <code>sub</code> operator was evaluated.</p>\n\n<pre><code>my $prefix = \"&gt; \";\nmy $cr = sub {\n   my $arg = shift;\n   say \"$prefix$arg\";   # Captures $prefix from sub{} scope.\n};\n\n$cr-&gt;(\"foo\");           # Prints \"&gt; foo\"\n</code></pre>\n\n<p>The above is true even if captured lexicals would otherwise no longer exist by the time the sub is called.</p>\n\n<pre><code>my $cr;\n{\n   my $prefix = \"&gt; \";\n   $cr = sub {\n      my $arg = shift;\n      say \"$prefix$arg\";   # Captures $prefix from sub{} scope.\n   };\n}                          # $prefix would normally stop existing here.\n\n$cr-&gt;(\"foo\");              # Prints \"&gt; foo\"\n</code></pre>\n\n<p>That means you don't need to pass <code>$grader</code> as an argument. It can simply be <em>captured</em>. Just leave out <code>my $grader = shift;</code> (and don't pass <code>$grader</code> to \n<code>cleanup_register</code> or <code>post_connection</code>).</p>\n"}], "owner": {"reputation": 33, "user_id": 9268253, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sPg9a4lUpSU/AAAAAAAAAAI/AAAAAAAAAMQ/QH0DsAwx7Vw/photo.jpg?sz=128", "display_name": "Spencer Bagley", "link": "https://stackoverflow.com/users/9268253/spencer-bagley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 48446925, "answer_count": 1, "score": 2, "last_activity_date": 1516902532, "creation_date": 1516894481, "question_id": 48446557, "link": "https://stackoverflow.com/questions/48446557/what-happens-if-you-call-shift-inside-an-anonymous-sub", "title": "What happens if you call shift inside an anonymous sub?", "body": "<p>First off, apologies if this question is ill-posed; I don't actually know a heck of a lot of perl. </p>\n\n<p>I'm trying to debug some existing code that is supposed to send grades from our online homework system called WeBWorK to an LMS. I'm running into a weird error where I think something isn't getting initialized right, or perhaps isn't the right class. I suspect that the problem might be here:</p>\n\n<pre><code>sub go {\n    my $self = shift;\n    my $r = $self-&gt;r;\n    my $ce = $r-&gt;ce;\n\n    # If grades are begin passed back to the lti then we peroidically\n    # update all of the grades because things can get out of sync if\n    # instructors add or modify sets.\n    if ($ce-&gt;{LTIGradeMode}) {\n\n      my $grader = WeBWorK::Authen::LTIAdvanced::SubmitGrade-&gt;new($r);\n\n      my $post_connection_action = sub {\n        my $grader = shift;\n\n        # catch exceptions generated during the sending process\n        my $result_message = eval { $grader-&gt;mass_update() };\n        if ($@) {\n          # add the die message to the result message\n          $result_message .= \"An error occurred while trying to update grades via LTI.\\n\"\n        . \"The error message is:\\n\\n$@\\n\\n\";\n          # and also write it to the apache log\n          $r-&gt;log-&gt;error(\"An error occurred while trying to update grades via LTI: $@\\n\");\n        }\n      };\n      if (MP2) {\n        $r-&gt;connection-&gt;pool-&gt;cleanup_register($post_connection_action, $grader);\n      } else {\n        $r-&gt;post_connection($post_connection_action, $grader);\n      }\n    }\n... # a bunch of other stuff happens in the \"go\" sub\n</code></pre>\n\n<p>I kinda suspect that the issue is with the <code>$grader</code> variable; in particular, I don't know what <code>my $grader = shift;</code> does inside an anonymous sub. Like, if the sub had a name, it would be more clear that <code>shift</code> is giving the first argument passed to the sub. But since it's anonymous, I don't know what it thinks its arguments are.</p>\n\n<p>Further, I'm not really sure why that line is needed at all. Like, from my googling, I'm given to understand that the point of an anonymous sub is to keep all the variables from the surrounding environment in scope. So why do we need to redefine <code>$grader</code> inside the anonymous sub in the first place?</p>\n\n<p>Thanks for helping a perl noob out! :)</p>\n"}, {"tags": ["arrays", "perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 61, "user_id": 9267899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d2eeca4b103ef0dad994d5e7e1b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/9267899/mattia"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1516894879, "post_id": 48445824, "comment_id": 83885364, "body": "Yes I\u2019m using <code>use warnings;</code> and <code>use strict;</code> as well, but it doesn\u2019t give me any error maybe because the syntax seems correct.. I just used <code>$gpa_one</code> and all the other values inside their own subroutines to give them the result, like this <code>$gpa_one = $sum&#47;$average</code> So if I print only <code>$gpa_one</code> It works and it gives me the right gpa of the marks I put into the form, but the problem is when I pass it inside an array or an hash"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516905934, "post_id": 48445824, "comment_id": 83892419, "body": "Your statement <code>my @name = $cgi-&gt;param(&#39;name&#39;)</code> puts the <code>name</code> string into <code>$name[0]</code>. The remaining elements, <code>$name[1]</code> onwards, remain undefined, and you probably get warnings about <i>Use of uninitialized value</i>."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9267899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d2eeca4b103ef0dad994d5e7e1b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/9267899/mattia"}, "edited": false, "score": 0, "creation_date": 1516895190, "post_id": 48446251, "comment_id": 83885604, "body": "Thank you, I\u2019ll try in this way now, what about the other parts of the code? Is it correct to assign the scalars in the way I did into hashes and arrays? Because it prints the reference instead of the corresponding value even when I just print each element of the array as I shown"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 61, "user_id": 9267899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d2eeca4b103ef0dad994d5e7e1b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/9267899/mattia"}, "edited": false, "score": 0, "creation_date": 1516895539, "post_id": 48446251, "comment_id": 83885889, "body": "yep, because you filled your array with references (the <code>\\ </code> before the variable). Another solution would be to fill your array with variables itselves (by removing the <code>\\ </code> ), this way you have to let your code as it is now, like  <code>my $max = (sort { $a &lt;=&gt; $b } @tot_gpa)[-1];</code>"}, {"owner": {"reputation": 61, "user_id": 9267899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d2eeca4b103ef0dad994d5e7e1b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/9267899/mattia"}, "edited": false, "score": 0, "creation_date": 1516896217, "post_id": 48446251, "comment_id": 83886484, "body": "I tried both way and the first one you told works perfectly with the array now, while if I try to remove the <code>\\ </code> from the variables and use <code>my $max = (sort { $a &lt;=&gt; $b } @tot_gpa)[-1];</code> it gives me back again the references <code>SCALAR(0x8eefd0)</code>... but at least the first one works good! :) is there a way to unreference scalars in the hash?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 61, "user_id": 9267899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d2eeca4b103ef0dad994d5e7e1b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/9267899/mattia"}, "edited": false, "score": 0, "creation_date": 1516905840, "post_id": 48446251, "comment_id": 83892373, "body": "@Mattia: Why are you using references in the first place. You don&#39;t do it in your first example, but in the second you are assigning references like <code>\\$gpa_one</code> etc. to <code>@tot_gpa</code>."}], "tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": -1, "last_activity_date": 1516899017, "last_edit_date": 1516899017, "creation_date": 1516893576, "answer_id": 48446251, "question_id": 48445824, "link": "https://stackoverflow.com/questions/48445824/print-min-and-max-of-a-hash-value-in-perl-with-corresponding-key/48446251#48446251", "title": "Print min and max of a hash value in Perl with corresponding key", "body": "<pre><code>SCALAR(0x8bcbd0)\n</code></pre>\n\n<p>indicates you are printing a reference on a scalar</p>\n\n<p>You will have to unreference in order to print the scalar and not its adress</p>\n\n<p>this will be done by replacing</p>\n\n<pre><code>my $max = (sort { $a &lt;=&gt; $b } @tot_gpa)[-1];\n</code></pre>\n\n<p>by</p>\n\n<pre><code>my $max = ${(sort { int($$a) &lt;=&gt; int($$b) } @tot_gpa)[-1]};\n</code></pre>\n\n<p>the <code>$</code> at the begining and before <code>$a</code> and <code>$b</code> unreference your scalar.\nWith only <code>$a</code> and <code>$b</code> you would sort the adresses, not the values</p>\n\n<p><code>int</code> force int context to compare numbers and not strings</p>\n\n<p>you can also fill your array with variables and not references, doing something like</p>\n\n<pre><code>my ($gpa_one, $gpa_two, $gpa_three, $gpa_four) = (12.5,15.8,1,2.5);\n\nmy @tot_gpa = (\n          $gpa_one, \n          $gpa_two, \n          $gpa_three, \n          $gpa_four\n);\n\nmy $max = (sort { $a &lt;=&gt; $b } @tot_gpa)[-1];\nprint $max;\n</code></pre>\n\n<p>prints <code>15.8</code></p>\n\n<p><strong>now with your hash I tried:</strong></p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ($gpa_one, $gpa_two, $gpa_three, $gpa_four) = (12.5,15.8,1,2.5);\n\nmy %stud_gpa = (\n'a' =&gt; $gpa_one,\n'b' =&gt; $gpa_two,\n'c' =&gt; $gpa_three,\n'd' =&gt; $gpa_four,\n\n);\n\nsub gpa_hash{\n\n    my @gpavalues = sort { $stud_gpa{$a} &lt;=&gt; $stud_gpa{$b} } keys %stud_gpa;\n    my $highest = $gpavalues[-1];\n    my $smallest = $gpavalues[0];\n    print \"the max GPA is $highest of the student $stud_gpa{$gpavalues[-1]}&lt;br&gt;\";\n    print \"the min GPA is $smallest of the student $stud_gpa{$gpavalues[0]}&lt;br&gt;\";\n\n}\n\ngpa_hash();\n</code></pre>\n\n<p>it prints <code>the max GPA is b of the student 15.8&lt;br&gt;the min GPA is c of the student 1</code></p>\n\n<p>so name and gpa are switched, that's because <code>$highest</code> and <code>$smallest</code> contain the name of the student as you made the sort on <code>keys %stud_gpa</code></p>\n\n<p>I can't reproduce your problem</p>\n\n<p>the way it could produce what you describe is that your <code>$gpa</code> are references.\ndeclare your hash as you already do and modify your <code>gpa_hash</code> as follow, this should work</p>\n\n<pre><code>sub gpa_hash{\n\n    my @gpavalues = sort { ${$stud_gpa{$a}} &lt;=&gt; ${$stud_gpa{$b}} } keys %stud_gpa;\n    my $highest = $gpavalues[-1];\n    my $smallest = $gpavalues[0];\n    print \"the max GPA is ${$stud_gpa{$highest}} of the student $highest&lt;br&gt;\";\n    print \"the min GPA is ${$stud_gpa{$smallest}} of the student $smallest &lt;br&gt;\";\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1516954177, "last_edit_date": 1516954177, "creation_date": 1516915300, "answer_id": 48452102, "question_id": 48445824, "link": "https://stackoverflow.com/questions/48445824/print-min-and-max-of-a-hash-value-in-perl-with-corresponding-key/48452102#48452102", "title": "Print min and max of a hash value in Perl with corresponding key", "body": "<p>The <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> returns its <em>input list</em> sorted, so in your sub</p>\n\n<pre><code>sub gpa_hash {\n\n    my @gpavalues = sort { $stud_gpa{$a} &lt;=&gt; $stud_gpa{$b} } keys %stud_gpa;\n    my $highest = $gpavalues[-1];\n    my $smallest = $gpavalues[0];\n    ...\n}\n</code></pre>\n\n<p>the <code>@gpavalues</code> <em>are not values</em> but are the keys, sorted by the criterion in the block.</p>\n\n<p>So you'd retrieve values by</p>\n\n<pre><code>my $largest  = $stud_gpa{$gpavalues[-1]};\nmy $smallest = $stud_gpa{$gpavalues[0]};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my ($largest, $smallest) = @stud_gpa{ @gpavalues[-1,0] };\n</code></pre>\n\n<p>by using array and hash <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slices</a>  .</p>\n\n<p>A few general comments.</p>\n\n<p>It appears that you make variables global so that subroutines can see them. This may seem to work but it will surely lead to trouble as programs get any more complicated. You should always write your subs to take data they need from the calling code via arguments.</p>\n\n<p>I don't know the purpose of the manual listing of all <code>$gpa_N</code>, but they should clearly be (unnamed) elements of a multi-valued data type or variable, like an array.  Given that you then assign them to hash values you may well do that right as you obtain those values.</p>\n"}], "owner": {"reputation": 61, "user_id": 9267899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d2eeca4b103ef0dad994d5e7e1b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/9267899/mattia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1516954177, "creation_date": 1516892221, "question_id": 48445824, "link": "https://stackoverflow.com/questions/48445824/print-min-and-max-of-a-hash-value-in-perl-with-corresponding-key", "title": "Print min and max of a hash value in Perl with corresponding key", "body": "<p>I'm new to Perl (I would say to programming in general too) and I am trying to fix a simple issue with a perl script I am doing for a school assignment. I am not supposed to use any module, I don't think they would accept it because I must learn how to do things first.</p>\n\n<p>I am asked to create an html input form to put students name and marks and pass them to my perl script and calculate each student GPA, and everything works fine until now.</p>\n\n<p>Then I am supposed to save these information in an hash and get the student name of who got the highest GPA and then the student name who got the lowest, but nothing is working.</p>\n\n<p>First of all I defined each GPA outside any function, to be readable my every subroutine, and then I tried to assign each student name his GPA, but I am not sure it's correct the way I did.</p>\n\n<pre><code>my $cgi = CGI -&gt; new();\n\nmy @name = $cgi-&gt;param('name');\n\nmy $gpa_one;\nmy $gpa_two;\nmy $gpa_three;\nmy $gpa_four;\nmy $gpa_five;\nmy $gpa_six;\nmy $gpa_seven;\nmy $gpa_eight;\nmy $gpa_nine;\nmy $gpa_ten;\n\nmy %stud_gpa = (\n$name[0] =&gt; $gpa_one,\n$name[1] =&gt; $gpa_two,\n$name[2] =&gt; $gpa_three,\n$name[3] =&gt; $gpa_four,\n$name[4] =&gt; $gpa_five,\n$name[5] =&gt; $gpa_six,\n$name[6] =&gt; $gpa_seven,\n$name[7] =&gt; $gpa_eight,\n$name[8] =&gt; $gpa_nine,\n$name[9] =&gt; $gpa_ten,\n);\n</code></pre>\n\n<p>Each GPA is the result of a subroutine.</p>\n\n<p>I have been trying to sort the GPAs in multiple ways (sorting the hash, just trying to assign each of them to a simple array and to sort the array) but there's no way for me to let it work.</p>\n\n<p>this is the subroutine that I tried to do with the hash:</p>\n\n<pre><code>sub gpa_hash{\n\n    my @gpavalues = sort { $stud_gpa{$a} &lt;=&gt; $stud_gpa{$b} } keys %stud_gpa;\n    my $highest = $gpavalues[-1];\n    my $smallest = $gpavalues[0];\n    print \"the max GPA is $highest of the student $stud_gpa{$gpavalues[-1]}&lt;br&gt;\";\n    print \"the min GPA is $smallest of the student $stud_gpa{$gpavalues[0]}&lt;br&gt;\";\n\n}\n</code></pre>\n\n<p>But I get some problems with the output, because this is what I get:</p>\n\n<pre><code>the max GPA is of the student \nthe min GPA is of the student \n</code></pre>\n\n<p>So then I tried just with an array, to see if it was maybe simpler to understand:</p>\n\n<pre><code>my @tot_gpa = (\n           \\$gpa_one,\n           \\$gpa_two,\n           \\$gpa_three,\n           \\$gpa_four,\n           \\$gpa_five,\n           \\$gpa_six,\n           \\$gpa_seven,\n           \\$gpa_eight,\n           \\$gpa_nine,\n           \\$gpa_ten\n);\n\nsub gpa{\n    my $max = (sort { $a &lt;=&gt; $b } @tot_gpa)[-1];\n    my $min = (sort { $a &lt;=&gt; $b } @tot_gpa)[0];\n    print \"this is the smallest GPA: $min&lt;br&gt;\";\n    print \"this is the highest GPA: $max&lt;br&gt;\";\n}\n</code></pre>\n\n<p>But this is what I am getting:</p>\n\n<pre><code>this is the smallest GPA: SCALAR(0x8bcab0)\nthis is the highest GPA: SCALAR(0x8bcbd0)\n</code></pre>\n\n<p>I am sure I am doing something wrong first of all in assigning the variables to the array, because if I just print the array itself it gives me back this output: </p>\n\n<pre><code>SCALAR(0x8bcab0)\nSCALAR(0x8bcad0)\nSCALAR(0x8bcaf0)\nSCALAR(0x8bcb10)\nSCALAR(0x8bcb30)\nSCALAR(0x8bcb50)\nSCALAR(0x8bcb70)\nSCALAR(0x8bcb90)\nSCALAR(0x8bcbb0)\nSCALAR(0x8bcbd0)\n</code></pre>\n\n<p>while if I just print the GPA variables alone I get the right corresponding number, like this <code>print \"$gpa_one&lt;br&gt;\";</code> gives me (as example) <code>2.1</code>. Can someone helps me understanding how to fix it? I'm going crazy...</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["perl", "csv", "parsing", "hash", "data-dumper"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 1, "creation_date": 1516887727, "post_id": 48443007, "comment_id": 83879923, "body": "Could you please specify if you really need to parse the output, or if you can actually edit the script that generates the output?"}, {"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1516894827, "post_id": 48443007, "comment_id": 83885317, "body": "So far as I know I can get this data just in hash"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "edited": false, "score": 0, "creation_date": 1516970355, "post_id": 48455534, "comment_id": 83915835, "body": "<code>$device-&gt;NetworkDeviceIPList-&gt;{NetworkDeviceIP}-&gt;{ipaddress}</code> oh....I did not know, that it could be so easy...I tried with   <code>$device-&gt;NetworkDeviceIP-&gt;{ipaddress}</code> and it did nor work, because there ist no NetworkDeviceIP methode in this bib.  but you are right , I can access it directly inside the loop! Thank you!"}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 2, "last_activity_date": 1516938490, "creation_date": 1516938490, "answer_id": 48455534, "question_id": 48443007, "link": "https://stackoverflow.com/questions/48443007/parsing-hash-in-perl-to-csv-format/48455534#48455534", "title": "Parsing hash in perl to CSV format", "body": "<p>Since the data are just in a hash, you can access them directly inside your loop:</p>\n\n<pre><code>for my $name (keys %{$networkdevices}){\n    my $device = $ise-&gt;networkdevices(\"id\" =&gt; $networkdevices-&gt;{$name}-&gt;id);\n    print join(',',\n       $device-&gt;name\n       $device-&gt;NetworkDeviceIPList-&gt;{NetworkDeviceIP}-&gt;{ipaddress}\n    ) . \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 48455534, "answer_count": 1, "score": 2, "last_activity_date": 1516940704, "creation_date": 1516883650, "last_edit_date": 1516940704, "question_id": 48443007, "link": "https://stackoverflow.com/questions/48443007/parsing-hash-in-perl-to-csv-format", "title": "Parsing hash in perl to CSV format", "body": "<p>I need to parse my text file (my output) to csv format, which contains just Names and Ips from devices. Somthing like:</p>\n\n<pre><code>Name, ip\nLAB-W, 10.66.1.12\nLAB-D, 10.66.1.13\n</code></pre>\n\n<p>I do not have experience with parsing in perl, maybe somebody can help me with this question. </p>\n\n<pre><code>use Net::Cisco::ISE;\nuse Data::Dumper;\nuse Text::CSV;\n\nmy $ise = Net::Cisco::ISE-&gt;new(hostname=&gt;'hostname', username=&gt;'user', password=&gt;'user');\n\nfor my $name (keys %{$networkdevices}){\n    my $device = $ise-&gt;networkdevices(\"id\" =&gt; $networkdevices-&gt;{$name}-&gt;id);\n    print Dumper $device-&gt;name;\n    print Dumper $device-&gt;NetworkDeviceIPList;\n}\n</code></pre>\n\n<p>And I have this output: </p>\n\n<pre><code>$VAR1 = 'LAB-W';\n$VAR1 = {\n     'NetworkDeviceIP' =&gt; {\n         'mask' =&gt; '32',\n         'ipaddress' =&gt; '10.66.1.12'\n      }\n};\n$VAR1 = 'LAB-D';\n$VAR1 = {\n     'NetworkDeviceIP' =&gt; {\n          'mask' =&gt; '24',\n          'ipaddress' =&gt; '10.66.1.13'\n      }\n};\n</code></pre>\n\n<p>I tried this script (from <a href=\"https://stackoverflow.com/questions/12359147/perl-parsing-hash-of-hashes-of-arrays/12359677#12359677\">this post</a>), but I do not see output, also no mistakes :</p>\n\n<pre><code>use DBI;\nuse strict;\nuse Data::Dumper;\nuse File::Slurp;\n\nopen (FILE, \"&lt;./my_output\") or die \"could not open file: $!\";\nundef $/;\n\nmy $contents = &lt;FILE&gt;;\nclose(FILE);\n\nmy $hash_of_arrays = eval $contents;\n\nfor my $key (keys %$hash_of_arrays) {\n    my $hash = $hash_of_arrays-&gt;{$key};\n    for my $key2 (keys %$hash) {\n        my $array = $hash-&gt;{$key2};\n        for my $i (0..$#$array) {\n            print \"$i: $$array[$i]\\n\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "perl-xs"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516881418, "post_id": 48442010, "comment_id": 83875774, "body": "<code>arylen</code> seems to be documented in <a href=\"http://p3rl.org/perlguts\" rel=\"nofollow noreferrer\">perlguts</a>, but I don&#39;t understand the details (and you provided no context)."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516888672, "post_id": 48442010, "comment_id": 83880618, "body": "@choroba: I thought that variable names are exists only to get the bare name of variable. I was surprised when saw that variable name is something more than just bare name."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516906041, "post_id": 48442010, "comment_id": 83892476, "body": "@choroba, The magic in the OP is <code>arylen_p</code> (<code>@</code>), not <code>arylen</code> (<code>#</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516906676, "post_id": 48442010, "comment_id": 83892819, "body": "<code>arylen_p</code> appears to be related to <code>arylen</code>. <code>arylen</code> is used for <code>$#a = 123;</code>. I don&#39;t see how it&#39;s possible for it to be on something other than an <code>AV</code>.  Only one function adds and looks up that magic (<code>S_get_aux_mg</code> in <code>av.c</code>), and it asserts that it&#39;s the parameter is an array (<code>assert(SvTYPE(av) == SVt_PVAV);</code>)."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516910215, "post_id": 48442010, "comment_id": 83894679, "body": "@ikegami: Another thing I have notice. When I <code>sv_dump</code> tied array from <code>XSUB</code> the <code>MyObj::Array::FETCHSIZE</code> is triggered. It is strange because dumping should not trigger any events. But likely something wrong in my <code>XSUB</code>. (<a href=\"http://paste.scsys.co.uk/566540\" rel=\"nofollow noreferrer\">just for reference</a>)"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516880465, "creation_date": 1516880465, "question_id": 48442010, "link": "https://stackoverflow.com/questions/48442010/why-array-variable-names-have-magic-what-is-this-for", "title": "Why array variable names have magic? What is this for?", "body": "<p>Fetching the name of variable from <code>PAD_COMPNAME</code> shows that the name is magical:</p>\n\n<pre><code>SV *sv =  PadnameSV( PAD_COMPNAME( cPADOP-&gt;targ +ix ) );\ndo_sv_dump( 0, Perl_debug_log, sv, 0, 10, 0, 0 );\n\nSV = PV(0x1c1ed40) at 0x1c1bb30\n  REFCNT = 1\n  FLAGS = (POK,pPOK,UTF8)\n  PV = 0x19eb480 \"@y\"\\0 [UTF8 \"@y\"]\n  CUR = 2\n  LEN = 10\n  MAGIC = 0x1a58340\n    MG_VIRTUAL = &amp;PL_vtbl_arylen_p\n    MG_TYPE = PERL_MAGIC_arylen_p(@)\n    MG_FLAGS = 0x02\n      REFCOUNTED\n    MG_LEN = 8\n    MG_PTR = 0x19eb460 \"\\0\\0\\0\\0\\0\\0\\0\\0\"\n  ARRAY = 0x0\n  FILL = -1\n  MAX = -1\n  ARYLEN = 0x0\n  FLAGS = (REAL)\n</code></pre>\n\n<p>Why we need magic for variable name? What is this for?</p>\n"}, {"tags": ["regex", "perl", "sed"], "comments": [{"owner": {"reputation": 10642, "user_id": 6309601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RNsPk.png?s=128&g=1", "display_name": "P....", "link": "https://stackoverflow.com/users/6309601/p"}, "edited": false, "score": 1, "creation_date": 1516878727, "post_id": 48441369, "comment_id": 83874058, "body": "try <code>sed &#39;&#47;Item2&#47; s&#47; &#47;_&#47;g&#39;</code>"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1516879073, "post_id": 48441369, "comment_id": 83874275, "body": "Please post sample output in code tags too in your posts."}, {"owner": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 0, "creation_date": 1516888886, "post_id": 48441369, "comment_id": 83880785, "body": "I&#39;m sorry, how to get Item2? when i try to run <code>cut -d &#39; &#39; -f 2,3</code> it returned me <code>i love</code>. The output that I want is <code>i_love_perl c_iloveperl</code>"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1516935677, "post_id": 48441369, "comment_id": 83903422, "body": "Read what makes a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your audience is left to assume the answers to the below questions  1. <code>I have an array</code> - Is it a bash array? 2. <code>Item2 = i love perl  &#47;  i_love_perl</code> Does it mean <code>Item2</code> can contain either of those? Before posting questions, it is always better to contemplate on it in a reader&#39;s angle."}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1516955183, "post_id": 48441369, "comment_id": 83908368, "body": "@IAMbeginner Click on the regex tag, then learn more, then scroll to the online sandboxes for testing/developing regexes. Use one of those. <a href=\"https://stackoverflow.com/tags/regex/info\">stackoverflow.com/tags/regex/info</a>"}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1516955263, "post_id": 48441369, "comment_id": 83908401, "body": "I&#39;m voting to close this question as off-topic because how many times are users going to ask someone to write a regex for them? There&#39;s a whole big BIG guide to asking it right in <a href=\"https://stackoverflow.com/tags/regex/info\">stackoverflow.com/tags/regex/info</a>. And sandboxes where they can get their own answer to their own corner cases."}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 0, "creation_date": 1516931821, "post_id": 48445794, "comment_id": 83902570, "body": "Wow. It is working like a charm. But, I would like to have the output like this: <code>i_love_perl c_iloveperl</code> and <code>i_love_perl c_iloveperl</code> for both <b>ProjectA</b> and <b>ProjectB</b>. I want to replace empty space in between with underscore for <b>ProjectA</b>."}, {"owner": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 0, "creation_date": 1516935062, "post_id": 48445794, "comment_id": 83903272, "body": "thanks a lot for the help. The previous code result <code>echo &#39;ProjectA: i love perl c_iloveperl&#39; | awk &#39;&#47;^Project&#47;{sub(&#47;[^ ]* &#47;,&quot;&quot;);sub(&#47; License.*&#47;,&quot;&quot;);print}</code> is what I want but just that, I want to replace empty space in between with underscore for <b>ProjectA</b> and <b>ProjectB</b> remained the same as in <code>i_love_perl c_iloveperl</code>. Eventually, the desired output that i want is there is 2 line of <code>i_love_perl c_iloveperl</code> . Sorry for confusing you."}, {"owner": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 0, "creation_date": 1516935807, "post_id": 48445794, "comment_id": 83903448, "body": "I have edited the code in the answer. It works like a charm! This is the code <code>awk &#39;&#47;^Project&#47;{sub(&#47;[^ ]* &#47;,&quot;&quot;);sub(&#47; License.*&#47;,&quot;&quot;);if(NF&gt;2){sub(&#47; &#47;,&quot;_&quot;)};if(NF&gt;2){sub(&#47; &#47;,&quot;_&quot;)};print}&#39;</code>"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 0, "creation_date": 1516935910, "post_id": 48445794, "comment_id": 83903476, "body": "@IAMbeginner, glad that it helped you. But what you have edited? code looks same only to me?"}, {"owner": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 0, "creation_date": 1516936130, "post_id": 48445794, "comment_id": 83903524, "body": "i have added one more time of this part: <code>if(NF&gt;2){sub(&#47; &#47;,&quot;_&quot;)}</code>."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 0, "creation_date": 1516936136, "post_id": 48445794, "comment_id": 83903528, "body": "@IAMbeginner, why you are adding 2 times condition? please explain."}, {"owner": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "edited": false, "score": 1, "creation_date": 1516936253, "post_id": 48445794, "comment_id": 83903556, "body": "I want to have empty space replaced by underscore. There is 2 occurrence time of empty space, so I added that to replace 2 times of empty space with underscore"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": true, "score": 2, "last_activity_date": 1516936088, "last_edit_date": 1516936088, "creation_date": 1516892132, "answer_id": 48445794, "question_id": 48441369, "link": "https://stackoverflow.com/questions/48441369/perl-replace-specified-space-with-underscore-in-array/48445794#48445794", "title": "Perl replace specified space with underscore in array", "body": "<p>Not completely sure still, could you please try following and let me know if this helps you.</p>\n\n<pre><code>awk '/^Project/{sub(/[^ ]* /,\"\");sub(/ License.*/,\"\");print}'  Input_file\n</code></pre>\n\n<p>Output will be as follows.</p>\n\n<pre><code>i love perl c_iloveperl\ni_love_perl c_iloveperl\n</code></pre>\n\n<p>Code will look for a line which is starting from string <code>Project</code> and then will print the things between first space and string <code>License</code> Let us know how it goes then.</p>\n\n<p><strong><em>EDIT:</em></strong> As OP needs to have string <code>Project</code> also in output so following may help in same.</p>\n\n<pre><code>awk '/^Project/{sub(/[^ ]* /,\"\");sub(/ License.*/,\"\");if(NF&gt;2){sub(/ /,\"_\")};if(NF&gt;2){sub(/ /,\"_\")};print}'  Input_file\n</code></pre>\n\n<p>Output will be as follows:</p>\n\n<pre><code>i_love_perl c_iloveperl\ni_love_perl c_iloveperl\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1516938091, "creation_date": 1516938091, "answer_id": 48455494, "question_id": 48441369, "link": "https://stackoverflow.com/questions/48441369/perl-replace-specified-space-with-underscore-in-array/48455494#48455494", "title": "Perl replace specified space with underscore in array", "body": "<p>Below <code>sed</code> may help too. But,as I mentioned in <a href=\"https://stackoverflow.com/questions/48441369/perl-replace-specified-space-with-underscore-in-array#comment83903422_48441369\">this</a> comment, your question is a bit terse in that it is difficult to figure out actual requirement.</p>\n\n<pre><code>echo \"Item1 = ProjectA:\nItem2 = i love perl\nItem3 = c_iloveperl\nItem4 = License: ab123\" | sed -nE '/Item2/{N;s/Item[23] *= *//g;s/ /_/g;s/\\n/ /;s/_*$//p}'\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>i_love_perl c_iloveperl\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 7424117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ca2b60efabfd956fc3ce697628951b61?s=128&d=identicon&r=PG&f=1", "display_name": "IAMbeginner", "link": "https://stackoverflow.com/users/7424117/iambeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 48445794, "answer_count": 2, "score": -1, "last_activity_date": 1516938091, "creation_date": 1516878306, "last_edit_date": 1516935865, "question_id": 48441369, "link": "https://stackoverflow.com/questions/48441369/perl-replace-specified-space-with-underscore-in-array", "title": "Perl replace specified space with underscore in array", "body": "<p>I have an array that is returned after running a command line and consists of 4 items. For example:</p>\n\n<pre><code>ProjectA: i love perl c_iloveperl License: ab123\nProjectB: i_love_perl c_iloveperl License: ab123\n\nItem1 = ProjectA:\nItem2 = i love perl  /  i_love_perl\nItem3 = c_iloveperl  \nItem4 = License: ab123\n</code></pre>\n\n<p>Question:\nHow can I use <code>Perl</code>/<code>Sed</code> to replace specific empty space with underscore for Item2 only?\nAt the end, i will only need to get Item2 and Item3 with no empty space.</p>\n\n<pre><code>i_love_perl c_iloveperl\n</code></pre>\n\n<p>Any idea/suggestion? \nThanks in advance</p>\n"}]