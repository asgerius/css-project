[{"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1430953343, "post_id": 30088981, "comment_id": 48291268, "body": "The regular expression you assign <code>$num</code> from looks wrong.  The first <code>*</code> isn&#39;t following anything and it&#39;s missing an ending <code>&#47;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 198, "user_id": 3521621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af665978443353f695128436a434138?s=128&d=identicon&r=PG&f=1", "display_name": "user3521621", "link": "https://stackoverflow.com/users/3521621/user3521621"}, "edited": false, "score": 0, "creation_date": 1431041563, "post_id": 30089067, "comment_id": 48337566, "body": "Thanks! Works great, I can successfully get those variables and pull the field from DB. However, it seems like it somehow tampers with stdin, as I get: postfix/sendmail[25105]: fatal: root(0): No recipient addresses found in message header"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 198, "user_id": 3521621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af665978443353f695128436a434138?s=128&d=identicon&r=PG&f=1", "display_name": "user3521621", "link": "https://stackoverflow.com/users/3521621/user3521621"}, "edited": false, "score": 0, "creation_date": 1431047097, "post_id": 30089067, "comment_id": 48339103, "body": "um, it reads from <code>&lt;&gt;</code>; if no command line filenames are given, that will be stdin."}, {"owner": {"reputation": 198, "user_id": 3521621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af665978443353f695128436a434138?s=128&d=identicon&r=PG&f=1", "display_name": "user3521621", "link": "https://stackoverflow.com/users/3521621/user3521621"}, "edited": false, "score": 0, "creation_date": 1432059994, "post_id": 30089067, "comment_id": 48761314, "body": "I have added the full script. It still not functioning as expected, unfortunately. Would appreciate your feedback!"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 198, "user_id": 3521621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af665978443353f695128436a434138?s=128&d=identicon&r=PG&f=1", "display_name": "user3521621", "link": "https://stackoverflow.com/users/3521621/user3521621"}, "edited": false, "score": 0, "creation_date": 1432062742, "post_id": 30089067, "comment_id": 48762958, "body": "is it doing the database query?  if so, what is $enabled (from what you say it sounds as if it is something true (or you would have died with &quot;Couldn&#39;t get db value...&quot;) but not eq &quot;no&quot;).  if not, is $ext getting set?  is $email?"}, {"owner": {"reputation": 198, "user_id": 3521621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af665978443353f695128436a434138?s=128&d=identicon&r=PG&f=1", "display_name": "user3521621", "link": "https://stackoverflow.com/users/3521621/user3521621"}, "edited": false, "score": 0, "creation_date": 1432076649, "post_id": 30089067, "comment_id": 48769332, "body": "We get $enabled from the database. It can be either &quot;yes&quot; or &quot;no&quot;. I did try to print it, and it is getting it properly. The issue is, I can only call it from inside the loop (since I am parsing $ext/vmbox and $email from stdin) and thus 1) I get repeated output for even 1 print 2) I cannot exit the script"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1430961162, "last_edit_date": 1430961162, "creation_date": 1430952894, "answer_id": 30089067, "question_id": 30088981, "link": "https://stackoverflow.com/questions/30088981/match-variable-then-get-single-value-from-mysql-via-perl/30089067#30089067", "title": "Match variable, then get single value from Mysql via Perl", "body": "<p>You don't say what's going wrong.</p>\n\n<p>I do see that you aren't quoting your sql string, which would result in a syntax error; try</p>\n\n<pre><code>my ($enabled) = $dbh-&gt;selectrow_array('SELECT myfield FROM mydb WHERE mynum = \"$num\" and email = \"$email\"');\n</code></pre>\n\n<p>though you should avoid putting user input directly into sql and use placeholders instead:</p>\n\n<pre><code>my ($enabled) = $dbh-&gt;selectrow_array('SELECT myfield FROM mydb WHERE mynum = ? and email = ?', {}, $num, $email);\n</code></pre>\n\n<p>You also have three problems where you try to extract the values.</p>\n\n<p>First, you aren't verifying that the regexes succeeded before trying to use the values you got.</p>\n\n<p>Second, the <code>$num</code> regex is wrong.  I think you mean to be doing <code>/.*\\*(\\d+) .*$/</code>, but <code>/\\*(\\d+)/</code> would be a simpler regex that does exactly the same thing.</p>\n\n<p>Third, if the values you want are on separate lines, you need to extract them one at a time in a loop:</p>\n\n<pre><code>my $email;\nmy $num;\nwhile ( my $line = &lt;&gt; ) {\n    if ( $line =~ m/To: \".*\" &lt;(.*)&gt;/ ) {\n        $email = $1;\n    }\n    if ( $line =~ /\\*(\\d+) / ) {\n        $num = $1;\n    }\n}\nif ( $email &amp;&amp; $num ) {\n    # database query here\n}\n</code></pre>\n\n<p>(unless you read in the whole file as a single string).</p>\n"}], "owner": {"reputation": 198, "user_id": 3521621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af665978443353f695128436a434138?s=128&d=identicon&r=PG&f=1", "display_name": "user3521621", "link": "https://stackoverflow.com/users/3521621/user3521621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "closed_date": 1430954699, "answer_count": 1, "score": 0, "last_activity_date": 1432059918, "creation_date": 1430952291, "last_edit_date": 1432059918, "question_id": 30088981, "link": "https://stackoverflow.com/questions/30088981/match-variable-then-get-single-value-from-mysql-via-perl", "closed_reason": "Not suitable for this site", "title": "Match variable, then get single value from Mysql via Perl", "body": "<p>I have never worked with Perl before, but one old script needed some changes (and is now becoming a burden to deal with).</p>\n\n<p>Scenario:</p>\n\n<p>Pushing text to script STDIN</p>\n\n<p><strong>./myscript.pl &lt; text</strong></p>\n\n<p>The text has the following lines (among others):</p>\n\n<pre><code>...\nTo: \"\" &lt;myemail@domain.com&gt;\n...\nType *123 to access this file.\n...\n</code></pre>\n\n<p>What I need to do is to assign myemail@domain.com to variable1, assign 123 to variable2, and then do a MySQL select that will return variable3 based on the previous two.</p>\n\n<p>I have:</p>\n\n<pre><code>$line = &lt;&gt;;\n    my ($email) = ($line =~ m/To: \".*\" &lt;(.*)&gt;/);\n    my ($num) =  ($line =~ m/*.\\*(\\d+) .*$);\n\n\n    #Connect to the database\n    my $dbh = DBI-&gt;connect('DBI:mysql:dbase:localhost:3306', 'dbun', 'dbpass')\n        or die \"Couldn't open database: $DBI::errstr; stopped\";\n\n    # Fetch each row and print it\n    my ($enabled) = $dbh-&gt;selectrow_array(SELECT myfield FROM mydb WHERE mynum = \"$num\" and email = \"$email\");\n\n    # Disconnect from the database\n    $dbh-&gt;disconnect();\n\n    if($enabled eq \"no\") {\n    die \"Not enabled\";\n    }\n...\n</code></pre>\n\n<p>Yet this does not work.</p>\n\n<p>What am I doing wrong?</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p><strong>Here is what I have after the revisions mentioned. The variable is successfully obtained from the database, but I cannot exit the script if \"enabled\" is set to \"no\". For some reason the query is looping.</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse diagnostics;\nuse DBI;\nuse DBD::mysql;\n\nopen(STDOUT, '&gt;', '/var/log/vm/vm2email.out') or die \"Can't open log\";\nopen(STDERR, '&gt;', '/var/log/vm/vm2email.log') or die \"Can't open log\";\n\nopen(VOICEMAIL,\"|/usr/sbin/sendmail -t\");\nopen(LAMEDEC,\"|/usr/bin/dos2unix|/usr/bin/base64 -di|/usr/bin/lame --quiet --preset voice - /var/spool/asterisk/tmp/vmout.$$.mp3\");\nopen(VM,\"&gt;/var/spool/asterisk/tmp/vmout.debug.txt\"); \nmy $inaudio = 0;\n\nmy $email;\nmy $ext;\n\nloop: while(&lt;&gt;){\n    if(/^\\.$/){\n    last loop;\n    }\n    if(/^Content-Type: audio\\/x-wav/i){\n    $inaudio = 1;\n    }\n    if (/To: \".*\" &lt;(.*)&gt;/ ) {\n    $email = $1;\n    print \"$email\\n\";\n    }\n    if (/\\*(\\d+) / ) {\n    $ext = $1;\n    print \"$ext\\n\";\n    }\n\n\n    if ( $email &amp;&amp; $ext ) {\n    # Connect to the database\n    $dbh = DBI-&gt;connect('DBI:mysql:mydb:localhost:3306', 'dbun', 'dbpass')\n    || die \"Couldn't open database: $DBI::errstr; stopped\";\n    $enabled = $dbh-&gt;selectrow_array('SELECT sendvoicemail FROM data_voicemail WHERE vmbox = ? and email = ?', {}, $ext, $email)\n    || die \"Couldn't get DB value, stopped\";\n    }\n\n    if ($enabled eq \"no\"){\n    last;\n    }\n\n\n  if($inaudio){\n    while(s/^(Content-.*)wav(.*)$/$1mp3$2/gi){}\n    if(/^\\n$/){\n      iloop: while(&lt;&gt;){\n        print LAMEDEC $_;\n        if(/^\\n$/){\n          last iloop;\n        }\n      }\n      close(LAMEDEC);\n      print VOICEMAIL \"\\n\";\n      print VM \"\\n\";\n      open(B64,\"/usr/bin/base64 /var/spool/asterisk/tmp/vmout.$$.mp3|\");\n      while(&lt;B64&gt;){\n        print VOICEMAIL $_; \n    print VM $_;    \n      }\n      close(B64);\n      print VOICEMAIL \"\\n\";\n      print VM \"\\n\";\n      $inaudio = 0;\n    }\n\n  }\n\n print VOICEMAIL $_;\n print VM $_;\n\n}\n\n\nprint VOICEMAIL \"\\.\";\nprint VM \"\\.\";\nclose(VOICEMAIL);\nclose(VM);\n</code></pre>\n"}, {"tags": ["json", "perl", "command-line-arguments"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 10, "creation_date": 1430952364, "post_id": 30088878, "comment_id": 48290945, "body": "CON: it is a quoting and backslashing nightmare"}, {"owner": {"reputation": 6118, "user_id": 106769, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsZek.png?s=128&g=1", "display_name": "Conspicuous Compiler", "link": "https://stackoverflow.com/users/106769/conspicuous-compiler"}, "edited": false, "score": 2, "creation_date": 1430954769, "post_id": 30088878, "comment_id": 48291710, "body": "If you want complex data structures of this sort, you are running up against the difficulty of typing such things (and not making mistakes) on the command line.  Best to put your configuration options in a configuration file (which, yes, can be JSON).  Then use the argument parsing syntax of your platform.  Otherwise, people will find it uncomfortable to use your programs which have unusual behavior."}, {"owner": {"reputation": 119277, "user_id": 119280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7efd5c795e9797c30fce4126daaa9c0?s=128&d=identicon&r=PG&f=1", "display_name": "DVK", "link": "https://stackoverflow.com/users/119280/dvk"}, "edited": false, "score": 4, "creation_date": 1430961402, "post_id": 30088878, "comment_id": 48293480, "body": "CON: you will be hunted down and severely chastised by irate users."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1430967710, "post_id": 30088878, "comment_id": 48295037, "body": "Arguments can be in any order with almost every argument parser, so that&#39;s not a plus for JSON."}, {"owner": {"reputation": 333, "user_id": 1171852, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14521a2ade8b1603f9a49071abb3eb8b?s=128&d=identicon&r=PG", "display_name": "Donavon Lerman", "link": "https://stackoverflow.com/users/1171852/donavon-lerman"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1431016943, "post_id": 30088878, "comment_id": 48325190, "body": "@briandfoy: From my understanding command line arguments are passed and stored as an array not a hash and arrays are sequential so if the argument you are testing for is in $ARGV[0] instead of $ARGV[2] then the test will fail.   @ DVK: Hmm..  I don&#39;t know, having all arguments needed stored as json and being able to send them to any process be it perl, PHP, javascript, etc, etc seems like a good idea.  Having to treat each process as a special case seems more of a headache.  @ mob: Doesn&#39;t the JSON module handle all of the quoting and backslashing why would you need to do it by hand?"}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 1171852, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14521a2ade8b1603f9a49071abb3eb8b?s=128&d=identicon&r=PG", "display_name": "Donavon Lerman", "link": "https://stackoverflow.com/users/1171852/donavon-lerman"}, "edited": false, "score": 0, "creation_date": 1431017791, "post_id": 30089223, "comment_id": 48325717, "body": "Thanks. I&#39;ll check if we have this installed and look into it further.  Could the same structured line of arguments be used with other environments?  I&#39;m trying to limit the &#39;specialness&#39; needed with getting data into OR passing data between systems &amp; languages. Sort of like: ` X = ( perl / php / javascript / sql / windows / linux / etc / etc / ???) ; arguments -&gt; X -&gt; output;`"}], "tags": [], "owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "is_accepted": true, "score": 7, "last_activity_date": 1430956861, "last_edit_date": 1430956861, "creation_date": 1430953900, "answer_id": 30089223, "question_id": 30088878, "link": "https://stackoverflow.com/questions/30088878/perl-what-are-pros-and-cons-with-passing-json-on-command-line/30089223#30089223", "title": "perl: What are PRO&#39;s and CON&#39;s with passing json on command line?", "body": "<p>All your requirements/pros are met by the Getopt::Long module, with the following additional benefits</p>\n\n<p>PROS of Getopt::Long</p>\n\n<ul>\n<li>It's a recognised best practice, and uses a syntax expected by other users of CLI tools</li>\n<li>It's self documenting for future development</li>\n<li>Provides default useful error messages in the event of typos, or wrong param types</li>\n<li>Many, many more...</li>\n</ul>\n\n<p>The only PRO on json would be if there was an expectation that this would be provided as a web based API or tool, which doesn't seem to be the case here.</p>\n\n<p>Thats not to say JSON doesn't have a place in CLI tools, it is used extensively as a file based resource for configuration files, complex data storage, remote/external calls between software (RPC), as well providing a web front end.</p>\n"}], "owner": {"reputation": 333, "user_id": 1171852, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14521a2ade8b1603f9a49071abb3eb8b?s=128&d=identicon&r=PG", "display_name": "Donavon Lerman", "link": "https://stackoverflow.com/users/1171852/donavon-lerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "accepted_answer_id": 30089223, "answer_count": 1, "score": 1, "last_activity_date": 1430956861, "creation_date": 1430951721, "question_id": 30088878, "link": "https://stackoverflow.com/questions/30088878/perl-what-are-pros-and-cons-with-passing-json-on-command-line", "title": "perl: What are PRO&#39;s and CON&#39;s with passing json on command line?", "body": "<p>I would like to standardize on using json as a data interchange format for various programming things I do? [ So far everything except MySQL :-( ]</p>\n\n<p>The current question I have is:\n<em>What are the PRO's and CON's of using a json format to pass arguments to a perl script via the command line?</em></p>\n\n<p>Here are some that I came up with.  PLEASE let me know if this is unworkable in the long term</p>\n\n<p><strong>PRO:</strong></p>\n\n<ul>\n<li>Arguments can be in any order</li>\n<li>Arguments are passed in a standard format that can be used and parsed for other purposes. (passed to a javascript function, passed to PHP, saved in table)</li>\n</ul>\n\n<p><strong>CON:</strong></p>\n\n<ul>\n<li>Don't know length limitation</li>\n<li>Don't know issues that may arise.</li>\n</ul>\n\n<p>Here is what the command line would look like:</p>\n\n<pre><code>perl perlScript.pl {\\\"key\\ 1\\\": \\\"value\\ 1\\\", \\\"key\\ 2\\\" : \\\"value\\ 2\\\", \\\"key\\ 3\\\" : 0  }\n</code></pre>\n\n<p>Here is what the script would look like:</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Pass arguments to script on command line via json\n\nuse JSON;\n\n# Use loop to combine all command line arguments into one variable\nmy $json = '';\nforeach my $arg(@ARGV) {\n  $json .= $arg;\n}\n\n# convert variable to hash\nmy $hash = decode_json($json);\n\nuse Data::Dumper;\nprint Dumper(\\%$hash);\n</code></pre>\n"}, {"tags": ["sql", "perl"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4572001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1a79052907fc95e8b604d3b9ce78c1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed_91", "link": "https://stackoverflow.com/users/4572001/ahmed-91"}, "edited": false, "score": 0, "creation_date": 1430954198, "post_id": 30089088, "comment_id": 48291539, "body": "i try this , the output is 0 modification , that&#39;s mean , the request it&#39;s true , but i have a small error :"}, {"owner": {"reputation": 9, "user_id": 4572001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1a79052907fc95e8b604d3b9ce78c1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed_91", "link": "https://stackoverflow.com/users/4572001/ahmed-91"}, "edited": false, "score": 0, "creation_date": 1430954294, "post_id": 30089088, "comment_id": 48291570, "body": "my $a=$test3[$d]; my $requete = &#39;UPDATE VM SET stoaregeA_id = &quot;$idSt&quot; WHERE VM_OS like &quot;$a%&quot;&#39;;  my $prep = $db5-&gt;prepare($requete)     or die &#39;Impossible de pr&#233;parer la requ&#234;te : &#39;.$db5-&gt;errstr;  $prep-&gt;execute     or die &#39;Impossible d\\&#39;ex&#233;cuter la requ&#234;te : &#39;.$prep-&gt;errstr;  print &#39;Ligne(s) modifi&#233;e(s) : &#39;.$prep-&gt;rows;"}, {"owner": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "reply_to_user": {"reputation": 9, "user_id": 4572001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1a79052907fc95e8b604d3b9ce78c1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed_91", "link": "https://stackoverflow.com/users/4572001/ahmed-91"}, "edited": false, "score": 0, "creation_date": 1430960135, "post_id": 30089088, "comment_id": 48293152, "body": "If you run this statement in your database directly, and it doesn&#39;t update as you expected,  you have a data or logic error, instead of coding issue.  You may want to post more details about your data and the final statement if you want us to help you debug."}, {"owner": {"reputation": 9, "user_id": 4572001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1a79052907fc95e8b604d3b9ce78c1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed_91", "link": "https://stackoverflow.com/users/4572001/ahmed-91"}, "edited": false, "score": 0, "creation_date": 1430990078, "post_id": 30089088, "comment_id": 48305257, "body": "I arrive at this point it is to update IDST with a 0 value  ***** my $requete = &#39;UPDATE VM SET stoaregeA_id = &quot;$idSt&quot; WHERE VM_OS like ? &#39;; my $prep = $db5-&gt;prepare($requete)     or die &#39;Impossible de pr&#233;parer la requ&#234;te : &#39;.$db5-&gt;errstr; $prep-&gt;bind_param(1,$a.&quot;%&quot;); $prep-&gt;execute     or die &#39;Impossible d\\&#39;ex&#233;cuter la requ&#234;te : &#39;.$prep-&gt;errstr;  print &#39;Ligne(s) modifi&#233;e(s) : &#39;.$prep-&gt;rows; *****"}], "tags": [], "owner": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "is_accepted": false, "score": 0, "last_activity_date": 1430953055, "creation_date": 1430953055, "answer_id": 30089088, "question_id": 30088823, "link": "https://stackoverflow.com/questions/30088823/request-sql-update-in-perl/30089088#30089088", "title": "Request sql &quot;update&quot; in perl", "body": "<p>If parameterized update is not working, try construct the final statement directly and print it out to debug. </p>\n"}, {"tags": [], "owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "is_accepted": false, "score": 1, "last_activity_date": 1430983790, "last_edit_date": 1430983790, "creation_date": 1430954640, "answer_id": 30089348, "question_id": 30088823, "link": "https://stackoverflow.com/questions/30088823/request-sql-update-in-perl/30089348#30089348", "title": "Request sql &quot;update&quot; in perl", "body": "<p>Are you sure <code>$db5</code> is pointing to the correct database?</p>\n\n<p>Make sure you have <code>strict</code>, and <code>warnings</code> switch on.</p>\n\n<p>Additionally, to diagnose further and see what queries are actually running on <code>mysql</code>, run the following SQL commands:</p>\n\n<pre><code>-- Log all queries\nset global general_log = 'ON';\nset global log_output = 'TABLE';\n\n-- Run after code execution\nselect * from mysql.general_log;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1662, "user_id": 136109, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45a59c427c320dd7ea7ef38f4990ae4f?s=128&d=identicon&r=PG", "display_name": "MyGGaN", "link": "https://stackoverflow.com/users/136109/myggan"}, "is_accepted": false, "score": 1, "last_activity_date": 1431003548, "creation_date": 1431003548, "answer_id": 30101801, "question_id": 30088823, "link": "https://stackoverflow.com/questions/30088823/request-sql-update-in-perl/30101801#30101801", "title": "Request sql &quot;update&quot; in perl", "body": "<p>Try add more checks for your code and see if that give you anything more. Also please let us see what <code>$test3[$d]</code> and <code>$db5</code> is.\nInclude your table description as well. Might be something there that could give us a clue.</p>\n\n<pre><code>    my $sth = $db-&gt;prepare('SELECT idS FROM ocs.Storage WHERE name LIKE ?')\n        or die(\"Error preparing: \" . $db-&gt;errstr);\n    $sth-&gt;bind_param(1, \"$v4\");\n    $sth-&gt;execute\n        or die(\"Error executing: \" . $sth-&gt;errstr);\n    if ($sth-&gt;rows &lt; 0) {\n        print \" sorry\";\n    } else {\n        while (my $results = $sth-&gt;fetchrow_hashref) {\n            $idSt = $results-&gt;{idS};\n            print \"idst est $idSt et vm name est $test3[$d]\";\n            $idSt=~ s/^\\s+|\\s+$//;\n            $idSt=~ s/\\'//g;\n            $idSt=~ s/\\'//g;\n            $idSt=~ s/\\\"//g;\n            $idSt=~ s/^\\s+//;\n            $idSt=~ s/\\s+$//;\n            my $null = 0;\n            $idSt = $idSt + $null;\n            my $stmt = 'UPDATE VM SET stoaregeA_id = ? WHERE VM_OS = ?';\n            $db5-&gt;do($stmt, undef, $idSt, $test3[$d])\n                or die(\"Error doing: \" . $db5-&gt;errstr);\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4572001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1a79052907fc95e8b604d3b9ce78c1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed_91", "link": "https://stackoverflow.com/users/4572001/ahmed-91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1431003548, "creation_date": 1430951465, "last_edit_date": 1430952193, "question_id": 30088823, "link": "https://stackoverflow.com/questions/30088823/request-sql-update-in-perl", "title": "Request sql &quot;update&quot; in perl", "body": "<p>I have a perl script that contains a sql update query type, but I can not lead to a result ,I broke the head for 3 days, I have not found the solution, someone help me </p>\n\n<pre><code>my $sth = $db-&gt;prepare('select idS from ocs.Storage where name like ? ');\n$sth-&gt;bind_param(1,\"$v4\");\n$sth-&gt;execute();\nif ($sth-&gt;rows &lt; 0)\n{\nprint \" sorry\";\n}\nelse\n{\n#print \"found \\n\",$sth-&gt;rows;\n while (my $results = $sth-&gt; fetchrow_hashref)\n  {\n    $idSt = $results-&gt;{idS};\n  print \"idst est $idSt et vm name est $test3[$d]\";\n  $idSt=~ s/^\\s+|\\s+$//;\n  $idSt=~ s/\\'//g;\n  $idSt=~ s/\\'//g;\n  $idSt=~ s/\\\"//g;\n  $idSt=~ s/^\\s+//;\n  $idSt=~ s/\\s+$//;\n  my $null=0;\n  $idSt=$idSt +$null;\n  my $statement1 = \"UPDATE VM SET stoaregeA_id = ? where VM_OS = ?\";\n  $db5-&gt;do($statement1,undef,$idSt,$test3[$d]);\n}}\n</code></pre>\n"}, {"tags": ["perl", "hash", "hash-of-hashes"], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "edited": false, "score": 0, "creation_date": 1430951662, "post_id": 30088812, "comment_id": 48290710, "body": "right. thanks I also kept looking and found on this link: <a href=\"http://www.perlmonks.org/?node_id=989658\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=989658</a>   I have miles to go...."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1430951397, "creation_date": 1430951397, "answer_id": 30088812, "question_id": 30088418, "link": "https://stackoverflow.com/questions/30088418/how-to-increment-hash-of-hash-in-perl/30088812#30088812", "title": "how to increment hash of hash in perl", "body": "<p>Then you want to update <code>$itemList-&gt;{$menu}{$script}</code> rather than assign a reference to a one-element hash to <code>$itemList-&gt;{$menu}</code>.</p>\n\n<pre><code>$itemList-&gt;{$menu}{$script} = $name;\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 30088812, "answer_count": 1, "score": 1, "last_activity_date": 1430951397, "creation_date": 1430949756, "question_id": 30088418, "link": "https://stackoverflow.com/questions/30088418/how-to-increment-hash-of-hash-in-perl", "title": "how to increment hash of hash in perl", "body": "<p>failing to properly populate a HoH using this code:\nwhen i run the loop using below:</p>\n\n<pre><code>while (my $form = $form_rs-&gt;next ()){\n    my $menu=$form-&gt;get_column(\"fmenu\");\n    my $script=$form-&gt;get_column(\"fscript\");\n    my $name=$form-&gt;get_column(\"ftitle\");\n\n    $itemList-&gt;{$menu} = {\n        $script =&gt; $name\n    };\n}\nprint Dumper $itemList;\n</code></pre>\n\n<p>it runs correctly but since $menu is repeating it only keeps last value in the HoH. So i get erroneous output in Data Dumper. I get only 1 record for each 'menu', whereas there should be many.</p>\n\n<p>getting:</p>\n\n<pre><code>itemList=&gt;{\n    menu1=&gt;{\n        script1=&gt;formName1\n    },\n    menu2=&gt;{\n        script3=&gt;formName3\n    }\n    ...(and so on)\n}\n</code></pre>\n\n<p>whereas EXPECTED:</p>\n\n<pre><code>itemList=&gt;{\n    menu1=&gt;{\n        script1=&gt;formName1,\n        script2=&gt;formName2\n    },\n    menu2=&gt;{\n        script3=&gt;formName3,\n        ...(and so on)\n    }\n    ...(and so on)\n}\n</code></pre>\n\n<p>pl help.\nthank you.</p>\n"}, {"tags": ["perl", "perl-module", "log4perl"], "answers": [{"tags": [], "owner": {"reputation": 3716, "user_id": 145888, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5c48ce2226e65800a67961b2fafc1c0?s=128&d=identicon&r=PG", "display_name": "David Zhao", "link": "https://stackoverflow.com/users/145888/david-zhao"}, "is_accepted": false, "score": 1, "last_activity_date": 1441129936, "creation_date": 1441129936, "answer_id": 32337992, "question_id": 30087523, "link": "https://stackoverflow.com/questions/30087523/dynamically-change-email-config-for-logdispatchemailmailsender/32337992#32337992", "title": "Dynamically Change email config for Log::Dispatch::Email::MailSender", "body": "<p>Not quite understand your question #1, but for question #2: you may add this line in the log4perl.properties:</p>\n\n<pre><code>log4perl.appender.Email.subject = sub { return getEmailSubject(); }\n</code></pre>\n\n<p>then add a subroutine in your code:</p>\n\n<pre><code>sub getEmailSubject {   \n    return \"whatever I want\";\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 778330, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7fba8ea4e1282d20500154c63a03717e?s=128&d=identicon&r=PG", "display_name": "Tony Okusanya", "link": "https://stackoverflow.com/users/778330/tony-okusanya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444078196, "creation_date": 1430946430, "last_edit_date": 1444078196, "question_id": 30087523, "link": "https://stackoverflow.com/questions/30087523/dynamically-change-email-config-for-logdispatchemailmailsender", "title": "Dynamically Change email config for Log::Dispatch::Email::MailSender", "body": "<p>I have switched my loggin to use Log::Log4perl and Im having a hard time using \nLog::Dispatch::Email::MailSender for emailing logs. The code snippet below is my working example.</p>\n\n<pre><code>use Log::Log4perl qw(get_logger :levels);\n\nmy $log4perl_conf=&lt;&lt;CFG\nlog4perl.rootLogger=INFO, Email\nlog4perl.appender.Email=Log::Dispatch::Email::MailSender\nlog4perl.appender.Email.to=me\\@me.com\nlog4perl.appender.Email.from=me\\@me.com\nlog4perl.appender.Email.smtp=smtp.me.com\nlog4perl.appender.Email.min_level=info\nlog4perl.appender.Email.layout=Log::Log4perl::Layout::PatternLayout\nlog4perl.appender.Email.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:s\n+s} [%F{1}:%c{1}] %5p&gt; %m%n\nCFG\n;\n\nLog::Log4perl::init(\\$log4perl_conf);\nmy $logger = Log::Log4perl-&gt;get_logger();\n\n$logger-&gt;info('The first message bla bla');\n$logger-&gt;info('The second message bla bla');\nsome_func();\n\nsub some_func {\n    my $logger = Log::Log4perl-&gt;get_logger();\n    $logger-&gt;info(\"some_func was called\");\n\n}\n</code></pre>\n\n<p>Here are my questions:<br/></p>\n\n<ol>\n<li>why does the logger not send emails unless I add get a logger locally by adding my $logger = Log::Log4perl->get_logger(); to some_func Im not sure why it cant use the global version</li>\n<li> How do I get access to the logger configuration so I can change the email subject during execution say to indicate success or failure. I basically want to change things like subject or to address dynamically in my script</li>\n</ol>\n\n<p>\nAs a workaround for Q2 above in my main program I now use Log::Log4perl::Appender::String to store the message and then ues send an email at the end of my script using MIME::Lite. I would prefer to have this all handled by the logger. \nThanks\n</p>\n"}, {"tags": ["string", "facebook", "perl"], "comments": [{"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1431001574, "post_id": 30086624, "comment_id": 48313365, "body": "That return format is simply JSON \u2013 and you should not try and go to work on it with string functions, but use whatever JSON parsing functionality Perl provides."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 3264910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZKrgW.jpg?s=128&g=1", "display_name": "Scotsman", "link": "https://stackoverflow.com/users/3264910/scotsman"}, "edited": false, "score": 0, "creation_date": 1430948837, "post_id": 30086767, "comment_id": 48289460, "body": "Hi. Yes, very insightful! That is exactly the case. However, I&#39;ve found that Facebook doesn&#39;t seem to return a proper JSON string - I got an error while trying to parse it using JSON and found other people had a similar issue. Hence my fiddling around with Dumper and now trying to parse the string manually. Not pretty, I admit. Thanks for the input and guidance. I will continue trying to work this out!"}, {"owner": {"reputation": 177, "user_id": 3264910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZKrgW.jpg?s=128&g=1", "display_name": "Scotsman", "link": "https://stackoverflow.com/users/3264910/scotsman"}, "edited": false, "score": 0, "creation_date": 1430949397, "post_id": 30086767, "comment_id": 48289747, "body": "Got it working, with your kind help: ... $user = $fb-&gt;fetch(&#39;me&#39;); $string = Dumper $user; $length = length($string); $string = substr $string, 7, $length-7-2; # this chops off the unnecessary stuff  $hashref = eval &quot;{$string}&quot;; print &quot;The last name is &quot;, $hashref-&gt;{last_name}, &quot;\\n&quot;;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 177, "user_id": 3264910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZKrgW.jpg?s=128&g=1", "display_name": "Scotsman", "link": "https://stackoverflow.com/users/3264910/scotsman"}, "edited": false, "score": 3, "creation_date": 1430949918, "post_id": 30086767, "comment_id": 48290010, "body": "@Scotsman: from that, it sure looks like <code>$user</code> is <i>not</i> a string, but the exact same data structure you end up with (so fetch is already doing the json decoding); just do <code>$user-&gt;{last_name}</code>!"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1430950016, "post_id": 30086767, "comment_id": 48290059, "body": "also, substr can take an offset from the end, so <code>substr $string, 7, -2</code>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1430950289, "post_id": 30086767, "comment_id": 48290177, "body": "What @ysth said. That <code>fetch</code> method <a href=\"https://metacpan.org/pod/Facebook::Graph#fetch-id\" rel=\"nofollow noreferrer\">returns a hash reference of an object from facebook</a>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1430944032, "last_edit_date": 1430944032, "creation_date": 1430943649, "answer_id": 30086767, "question_id": 30086624, "link": "https://stackoverflow.com/questions/30086624/separating-out-variables-from-a-complex-string-using-perl/30086767#30086767", "title": "Separating out variables from a complex string using Perl", "body": "<p>The <code>... bless( do{(my $o = 1)}, 'JSON::PP::Boolean' ), ...</code> is a giveaway that this is <code>Data::Dumper</code> output, which is already a Perl readable expression. Wrap it in braces, <code>eval</code> it, and you've got yourself a hash reference.</p>\n\n<pre><code>my $fb_output = \"'link' =&gt; ...  'gender' =&gt; 'male'\";\nmy $hashref = eval \"{$fb_output}\";\nprint \"The last name is \", $hashref-&gt;{last_name}, \"\\n\";\n...\n</code></pre>\n\n<p>One or two levels up in your code, you are probably receiving a JSON string from Facebook, decoding it into a hash reference, and then converting the hash reference as the above string with <code>Data::Dumper</code>. That would be a more appropriate place to work with the data.</p>\n"}], "owner": {"reputation": 177, "user_id": 3264910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZKrgW.jpg?s=128&g=1", "display_name": "Scotsman", "link": "https://stackoverflow.com/users/3264910/scotsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 30086767, "answer_count": 1, "score": -1, "last_activity_date": 1430947232, "creation_date": 1430943121, "last_edit_date": 1430947232, "question_id": 30086624, "link": "https://stackoverflow.com/questions/30086624/separating-out-variables-from-a-complex-string-using-perl", "title": "Separating out variables from a complex string using Perl", "body": "<p>I have a string like this, returned from a Facebook API call.</p>\n\n<pre>\"'link' => 'https://www.facebook.com/app_scoped_user_id/123456789/',\n'timezone' => '5.5', 'name' => 'John Smith', 'locale' => 'en_GB',\n'last_name' => 'Smith', 'email' => 'myemail@hotmail.com',\n'updated_time' => '2015-05-05T15:35:31+0000', 'verified' => bless(\ndo{\\(my $o = 1)}, 'JSON::PP::Boolean' ), 'id' => '123456789',\n'birthday' => '05/01/1956', 'first_name' => 'John', 'gender' =>\n'male'\"</pre>\n\n<p>I want to separate the variables out using Perl, eg. create variables that will contain the value, as follows:</p>\n\n<pre><code>$link = 'https://www.facebook.com/app_scoped_user_id/123456789/'\n\n$name = 'John Smith'\n</code></pre>\n\n<p>etc.</p>\n\n<p>Having spent hours getting the string finally out of Facebook, now I'm struggling to separate out the variables using substring or hash.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1430940115, "post_id": 30085726, "comment_id": 48284566, "body": "close/re-open the file, or <a href=\"http://perldoc.perl.org/functions/seek.html\" rel=\"nofollow noreferrer\">rewind</a> it."}, {"owner": {"reputation": 633, "user_id": 2498054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f062fe89c4bef047ad42cdbf5cdd33d2?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/2498054/constantine"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1430940172, "post_id": 30085726, "comment_id": 48284603, "body": "i cannot do that, after i  call from command line perl ex.pl text.txt i want to do all of this in one command"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1430940239, "post_id": 30085726, "comment_id": 48284644, "body": "like I said, REWIND the file. that resets the file pointer to wherver you want, so you can continue reading from that point. e.g. first while leaves the pointer at the end of the file, so you rewind the beginning, and the second while starts reading as if the file has just been freshly opened."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1430940570, "post_id": 30085726, "comment_id": 48284846, "body": "@Kostas you are passing a filename <code>text.txt</code> store that in a variable, open a filehandle pointing to that filename and read from there instead of STDIN. Then you will be able to re-open the file as Marc B suggests."}, {"owner": {"reputation": 633, "user_id": 2498054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f062fe89c4bef047ad42cdbf5cdd33d2?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/2498054/constantine"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1430940676, "post_id": 30085726, "comment_id": 48284922, "body": "i tried the rewind using seek out, 0, 0;  between the 2 whiles, it did not change anything, also @Hunter i do not know how to do what you said"}, {"owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "edited": false, "score": 0, "creation_date": 1430941210, "post_id": 30085726, "comment_id": 48285194, "body": "what is the file you are reading from? the <code>out</code> file handle was opened with &quot;&gt;&gt;&quot; so this is a output file (not to be read)"}, {"owner": {"reputation": 633, "user_id": 2498054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f062fe89c4bef047ad42cdbf5cdd33d2?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/2498054/constantine"}, "reply_to_user": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "edited": false, "score": 0, "creation_date": 1430941356, "post_id": 30085726, "comment_id": 48285277, "body": "@MiguelPrz it is a text document in the same directory is the .pl i call it from the command line, so i should use seek with whatever is the default name of the filehandle when called from stdin but i do not know what that is"}], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 2498054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f062fe89c4bef047ad42cdbf5cdd33d2?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/2498054/constantine"}, "edited": false, "score": 0, "creation_date": 1430940908, "post_id": 30085918, "comment_id": 48285049, "body": "i tried it, it did not change anything, program still ends after fist while."}, {"owner": {"reputation": 633, "user_id": 2498054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f062fe89c4bef047ad42cdbf5cdd33d2?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/2498054/constantine"}, "reply_to_user": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1430941039, "post_id": 30085918, "comment_id": 48285099, "body": "@hymie yes, out is the result output, since i call the file i read as an argument in the command line, what is the right way to use seek?"}], "tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 0, "last_activity_date": 1430941541, "last_edit_date": 1430941541, "creation_date": 1430940772, "answer_id": 30085918, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l/30085918#30085918", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>If no file handle is used with the diamond operator, Perl will examine the <code>@ARGV</code> special variable. If <code>@ARGV</code> has no elements, then the diamond operator will read from <code>STDIN</code>.</p>\n\n<p>This is other way of achieve your requirements:</p>\n\n<pre><code>my @stdin=&lt;&gt;;\n\nforeach my $item( @stdin ) {\n   # ...\n}\n\nforeach my $item( @stdin ) {\n   # ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 633, "user_id": 2498054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f062fe89c4bef047ad42cdbf5cdd33d2?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/2498054/constantine"}, "edited": false, "score": 0, "creation_date": 1430941098, "post_id": 30085986, "comment_id": 48285132, "body": "command goes like this, perl example.pl text.txt isn&#39;t there  a way?"}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1431003558, "post_id": 30085986, "comment_id": 48314841, "body": "@ikegami: if you want to answer the question, then answer the question yourself.  Please do not change every single word in the answer I gave."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1431006560, "post_id": 30085986, "comment_id": 48317321, "body": "This answer is full of fail :( <code>&lt;&gt;</code> is short for <code>&lt;ARGV&gt;</code>, not <code>&lt;STDIN&gt;</code>, and definitely not <code>&lt;stdin&gt;</code> (seeing as <code>stdin</code> doesn&#39;t even exist). As for &quot;rewinding&quot; <code>ARGV</code> (or <code>STDIN</code>), that&#39;s easy to test, and the result is that you can when it&#39;s a handle to a plain file."}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1431008052, "post_id": 30085986, "comment_id": 48318589, "body": "The original question had no mention of using any arguments.  All he had was a perl script that called <code>&lt;&gt;</code> .  That&#39;s going to be <code>stdin</code> unless an argument is specifically passed, which (again) he did not say he was doing.  <code>stdin</code> is the accepted abbreviation of &quot;standard input&quot;, and <code>STDIN</code> is the perl filehandle that points to <code>stdin</code>.  The answer was correct for the question as it was asked.  The fact that the question is wrong is not my fault."}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1431008989, "post_id": 30085986, "comment_id": 48319280, "body": "Here is OP&#39;s own comment: &quot;so i should use seek with whatever is the default name of the filehandle when called from stdin&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1431016581, "post_id": 30085986, "comment_id": 48324945, "body": "The &quot;default name&quot;, like I said, is <code>ARGV</code>. There is no variable named <code>stdin</code> (though there is one named <code>STDIN</code>). You&#39;re the first to mention <code>stdin</code>. You apparently don&#39;t know the meaning of the word abbreviation, and <code>STDIN</code> doesn&#39;t &quot;point to&quot; or otherwise use C&#39;s <code>stdin</code>."}, {"owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "edited": false, "score": 0, "creation_date": 1431020200, "post_id": 30085986, "comment_id": 48327074, "body": "You have absolutely no idea what you are talking about.  The default for <code>&lt;&gt;</code> may be <code>@ARGV</code>, but also by default, there is no <code>@ARGV</code> unless the program is called with arguments.  Since the OP did not mention any arguments, that is the reason I &quot;first mentioned&quot; <code>stdin</code>, although it was later confirmed by the OP. <code>STDIN</code> is not a variable, it is a special filehandle.  <code>stdin</code> is not C&#39;s, it is a generic computer term used by all programs and features of Unix (and Windows) to represent standard input, just like <code>stdout</code> and <code>stderr</code>."}], "tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": false, "score": -1, "last_activity_date": 1431003483, "last_edit_date": 1431003483, "creation_date": 1430940981, "answer_id": 30085986, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l/30085986#30085986", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>If you were reading from an actual file, you could use</p>\n\n<pre><code>seek FILEHANDLE,0,0;\n</code></pre>\n\n<p>However, you are using <code>stdin</code> and I don't think that it's possible to rewind <code>stdin</code> and start over.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1430941529, "post_id": 30086032, "comment_id": 48285397, "body": "Are you sure you want to <code>local $&#47;;</code>? Won&#39;t that slurp the whole file into one array element? Accessing the filehandle in a list context will slurp it using the <code>$&#47;</code> record delimiter anyway."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1430955727, "post_id": 30086032, "comment_id": 48291991, "body": "@Sobrique: Oops. You are correct. Fixed it. Thanks."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 2, "last_activity_date": 1430955682, "last_edit_date": 1430955682, "creation_date": 1430941124, "answer_id": 30086032, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l/30086032#30086032", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>If the data fits into memory:</p>\n\n<pre><code>my @lines = &lt;&gt;;\n\nfor ( @lines ){\n  # operation one\n}\n\nfor ( @lines ){\n  # operation two\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430943237, "post_id": 30086123, "comment_id": 48286505, "body": "Note: The <code>seeks</code> solution will fail if <code>&lt;&gt;</code> reads from something other than a plain file or a symlink to a plain file."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1430942183, "last_edit_date": 1430942183, "creation_date": 1430941411, "answer_id": 30086123, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l/30086123#30086123", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>Given you mention in a comment:</p>\n\n<pre><code> perl example.pl text.txt \n</code></pre>\n\n<p>The answer is - don't use <code>&lt;&gt;</code> and instead open a filehandle. </p>\n\n<pre><code>my ( $filename ) = @ARVG;\n\nopen ( my $input, \"&lt;\", $filename ) or die $!;\n\nwhile ( &lt;$input&gt; ) { \n    print; \n}\n\nseek ( $input, 0, 0 ); \n\nwhile (  &lt;$input&gt; ) { \n    #something else\n}\n</code></pre>\n\n<p>Alternatively, you can - assuming <code>test.txt</code> isn't particularly large - just read the whole thing into an array.</p>\n\n<pre><code>my @input_lines = &lt;$input&gt;;\nforeach ( @input_lines ) { \n   #something\n}\n</code></pre>\n\n<p>If you want to specify multiple files on the command line, you can wrap the whole thing in a <code>foreach</code> loop: </p>\n\n<pre><code>foreach my $filename ( @ARVG ) { \n    ## open; while; seek; while etc. \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30, "user_id": 4781342, "user_type": "registered", "profile_image": "https://graph.facebook.com/1067033487/picture?type=large", "display_name": "Terry P Johnson", "link": "https://stackoverflow.com/users/4781342/terry-p-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1430941699, "creation_date": 1430941699, "answer_id": 30086195, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l/30086195#30086195", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>If you need to run the operation line by line, why not try something like this</p>\n\n<pre><code>sub operation_1 {\n   my $line = shift;\n   #processing for operation 1\n}\n\nsub operation_2 {\n   my $line = shift;\n   #processing for operation 2\n} \n\nwhile(&lt;&gt;) {\n   my $line = $_;\n   chomp($line);\n   operation_1($line);\n   operation_2($line); \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1430943722, "last_edit_date": 1430943722, "creation_date": 1430942131, "answer_id": 30086326, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l/30086326#30086326", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>Couldn't you simply use the following?</p>\n\n<pre><code>while (&lt;&gt;) {\n   operation1($_);\n   operation2($_);\n}\n</code></pre>\n\n<p>If not, then I'm assuming you need to process the content of all the files using one operation before it's process by the other.</p>\n\n<p><code>&lt;&gt;</code> reads from the files listed in <code>@ARGV</code>, removing them as it opens them, so the simplest solution is to backup <code>@ARGV</code> and repopulate it.</p>\n\n<pre><code>my @argv = @ARGV;\nwhile (&lt;&gt;) { operation1($_); }\n@ARGV = @argv;\nwhile (&lt;&gt;) { operation2($_); }\n</code></pre>\n\n<p>Of course, it will fail if <code>&lt;&gt;</code> reads from something other than a plain file or a symlink to a plain file. (Same goes for any solution using <code>seek</code>.) The only to make that work would be to load the entire file into temporary storage (e.g. memory or a temporary file). The following is the simplest example of that:</p>\n\n<pre><code>my @lines = &lt;&gt;;\nfor (@lines) { operation1($_); }\nfor (@lines) { operation2($_); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1430943983, "creation_date": 1430943983, "answer_id": 30086865, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l/30086865#30086865", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>You can localize <code>@ARGV</code> before the first pass.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n\n{\n    local @ARGV = @ARGV;\n    while (&lt;&gt;){\n        print \"Pass 1: $_\";\n    }\n}\n\nwhile (&lt;&gt;){\n    print \"Pass 2: $_\";\n}\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 2498054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f062fe89c4bef047ad42cdbf5cdd33d2?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/2498054/constantine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 7, "score": 3, "last_activity_date": 1431003483, "creation_date": 1430940005, "last_edit_date": 1430941810, "question_id": 30085726, "link": "https://stackoverflow.com/questions/30085726/in-perl-how-can-i-make-two-passes-over-all-the-files-specified-on-the-command-l", "title": "In Perl, how can I make two passes over all the files specified on the command line via the diamond operator?", "body": "<p>If i have a text file and i want to run two types of operations, but each operation must read each line of the text separately from the other. The only way i know how to do it is</p>\n\n<pre><code>open out,(\"&gt;&gt;out.txt\");\nwhile (&lt;&gt;){\n    #operation one\n}\nwhile (&lt;&gt;){\n    #operation two\n}\nclose out;\n</code></pre>\n\n<p>but this will run only on the first <code>while</code>, in which the operation runs fine, but the second one will not be complete because the second <code>while(&lt;&gt;)</code> does not actually re-read the file but tries to continue from where the first while left. Which is at the end of the file. So is there another way? Or is there a way to tell the second while to start again at the beginning?</p>\n"}, {"tags": ["perl", "set", "hash"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430939825, "post_id": 30085644, "comment_id": 48284377, "body": "There are a whole host of CPAN modules for manipulating sets, like <a href=\"https://metacpan.org/pod/Set::Scalar\" rel=\"nofollow noreferrer\"><code>Set::Scalar</code></a>. Why don&#39;t you use one of them?"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430983773, "post_id": 30085644, "comment_id": 48301299, "body": "@ThisSuitIsBlackNot  I don&#39;t want to use a module, as I want to be a blue to build this into a larger program without too many changes"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1430940402, "last_edit_date": 1430940402, "creation_date": 1430940068, "answer_id": 30085743, "question_id": 30085644, "link": "https://stackoverflow.com/questions/30085644/create-sets-in-perl/30085743#30085743", "title": "Create sets in perl", "body": "<p>So long as you keep it under 32-64 sets, this is probably easier with bitwise arithmetic:</p>\n\n<pre><code>my %c_vals;\n$c_vals{$_} |= 1 while(&lt;$C1&gt;);\n$c_vals{$_} |= 2 while(&lt;$C2&gt;);\n$c_vals{$_} |= 4 while(&lt;$C3&gt;);\n\nmy $total = values %c_vals;\nmy $c1 = grep { $_ &amp; 1 } values %c_vals;\nmy $c1_c2_count = grep { ($_ &amp; 3) == 3 } values %c_vals;\nmy $c1_c3_count = grep { ($_ &amp; 5) == 5 } values %c_vals;\nmy $all = grep { $_ == 7 } values %c_vals;\n\nprint \"c1 total = $total\\n\";\nprint \"c1 = $c1\\n\";\nprint \"c1 + c2  = $c1_c2_count\\n\";\nprint \"c1 + c3 = $c1_c3_count\\n\";\nprint \"c1+c2+c3 = $all\\n\";\n\n...\n\nmy @count_in_set;\nforeach my $val (values %c_values) {\n    $count_in_set[$val]++;\n}\nfor (my $i=1; $i&lt;=7; $i++) {\n    printf \"Count in set %03b: %d\\n\", $i, $count_in_set[$i];\n}\n</code></pre>\n\n<hr>\n\n<p>In the general case:</p>\n\n<pre><code>my %vals;\nmy $n = 0;\nforeach my $file (@ARGV) {\n    open my $fh, '&lt;', $file;\n    $vals{$_} |= 1 &lt;&lt; $n for &lt;$fh&gt;;\n    $n++;\n}\nmy @count_in_set;\nforeach my $val (values %c_values) {\n    $count_in_set[$val]++;\n}\nfor (my $i=1; $i&lt;=$#count_in_set; $i++) {\n    printf \"Count in set %0*b: %d\\n\", $n, $i, $count_in_set[$i];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1430983300, "post_id": 30089549, "comment_id": 48301010, "body": "But I want to find all intersections (see Venn), not just those values shared by all"}], "tags": [], "owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "is_accepted": false, "score": 0, "last_activity_date": 1430960831, "last_edit_date": 1430960831, "creation_date": 1430955972, "answer_id": 30089549, "question_id": 30085644, "link": "https://stackoverflow.com/questions/30085644/create-sets-in-perl/30089549#30089549", "title": "Create sets in perl", "body": "<p>The cpan module <a href=\"https://metacpan.org/pod/List::Compare\" rel=\"nofollow\">List::Compare</a> provides a handy api for n-list operations including list intersections.</p>\n\n<p>As far as consuming the files, File::Slurp provides an easy api for getting array refs, the complete example would be</p>\n\n<pre><code>use List::Compare;\nuse File::Slurp;\nmy @lists = ();\n\npush(@lists, read_file( $_, array_ref =&gt; 1 ) )  foreach @ARGV;\n\nmy @intersection = List::Compare-&gt;new(@lists)-&gt;get_intersection();\n\nprint join('', @intersection);\n</code></pre>\n\n<p>example usage <code>intersection.pl l1.txt l2.txt l3.txt</code></p>\n\n<p>Which outputs</p>\n\n<pre><code>set\nvalues\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": true, "score": 0, "last_activity_date": 1431785422, "last_edit_date": 1431785422, "creation_date": 1431785001, "answer_id": 30276621, "question_id": 30085644, "link": "https://stackoverflow.com/questions/30085644/create-sets-in-perl/30276621#30276621", "title": "Create sets in perl", "body": "<p>This program does what I need it to do.</p>\n\n<p>It reads in lists from <code>@ARGV</code> and prints out all 5 intersections for a given set. If run as <code>perl set.pl c1 c2 c3</code>, and user enters <code>c1</code> as the 'primary' set, the sets are defined as follows:</p>\n\n<p><strong>SetA</strong>: C1</p>\n\n<p><strong>SetB</strong>: C1 + C2</p>\n\n<p><strong>SetC</strong>: C1 + C3</p>\n\n<p><strong>SetD</strong>: C1 + C2 + C3</p>\n\n<pre><code>use warnings;\nuse strict; \n\nunless ($#ARGV == 2) {\n    usage();\n    exit;\n}\n\nprint \"Enter primary set: \";\nchomp(my $set = &lt;STDIN&gt;);\n\nmy (%c1_vals, %c2_vals, %c3_vals);\n\nmy $count = 0;\nmy $c;\nmy ($c1, $c2, $c3);\n\nparse($_) foreach @ARGV;\n\nmy $c1_c2_count = 0;\nmy $c1_c3_count = 0;\nmy $cond1 = 0;\nmy $total = 0;\nmy $all = 0;\n\nfor my $item (keys %c1_vals){                       \n    $total++;\n    if (not $c2_vals{$item} and not $c3_vals{$item}){\n        $cond1++;\n    }\n    if ($c2_vals{$item} and not $c3_vals{$item}){\n        $c1_c2_count++;\n    }\n    if ($c3_vals{$item} and not $c2_vals{$item}){\n        $c1_c3_count++;\n    }\n    if ($c2_vals{$item} and $c3_vals{$item}){\n        $all++;\n    }\n}\n\n# print numbers for each set\nprint \"$c1 total = $total\\n\";\nprint \"$c1 = $cond1\\n\";\nprint \"$c1 + $c2  = $c1_c2_count\\n\";\nprint \"$c1 + $c3 = $c1_c3_count\\n\";\nprint \"$c1+$c2+$c3 = $all\\n\";\nmy $check = ($cond1 + $c1_c2_count + $c1_c3_count + $all);\nprint \"check = $check\\n\";\n\n\n# read in each file. $ARGV[0] is set as the 'primary' set (ie that for which intersecting lists are found)\nsub parse {\n    $count++;\n    my $file = shift;\n    ($c = $file) =~ s/\\.[^.]+$//;\n    open my $list, '&lt;', $file or die \"Can't read file '$file' [$!]\\n\";\n    while(&lt;$list&gt;) {\n        chomp;\n        if ($count == 1){\n            my @split = split(/\\t/);\n            $c1_vals{$split[0]}++;\n             $c1 = $c;\n         }\n        if ($count == 2){\n            my @split = split(/\\t/);\n            $c2_vals{$split[0]}++;\n             $c2 = $c;\n         }\n        if ($count == 3){\n            my @split = split(/\\t/);\n            $c3_vals{$split[0]}++;\n             $c3 = $c;\n         }\n    }\n}\n\nsub usage {\n    print \"Usage: set.pl &lt;list1&gt; &lt;list2&gt; &lt;ist3&gt;\\n\";\n    print \"Calculates intersections between different sets\\n\";\n}\n</code></pre>\n\n<p>When run as <code>perl set.pl c1.txt c2.txt c3.txt</code> this yields:</p>\n\n<pre><code>Enter primary set: c1\n\nc1 total = 11\nc1 = 3\nc1 + c2  = 2\nc1 + c3 = 4\nc1+c2+c3 = 2\ncheck = 11\n</code></pre>\n"}], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 30276621, "answer_count": 3, "score": 2, "last_activity_date": 1431785422, "creation_date": 1430939669, "last_edit_date": 1430983755, "question_id": 30085644, "link": "https://stackoverflow.com/questions/30085644/create-sets-in-perl", "title": "Create sets in perl", "body": "<p>I'm trying to look for sets in three input conditions (See diagram attached).</p>\n\n<p>For example:</p>\n\n<p><strong>C1</strong>:</p>\n\n<pre><code>I\nwant\nto\ncreate\na\nset\nin\nperl\nwith\nsome\nvalues\n</code></pre>\n\n<p><strong>C2</strong>:</p>\n\n<pre><code>how\nto\ncreate\nset\nthese\nvalues\n</code></pre>\n\n<p><strong>C3</strong>: </p>\n\n<pre><code>a\nset\nin\nperl\nwith\nvalues\nlike\nthese\n</code></pre>\n\n<p>Would yield a set diagram something like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/UiNRh.png\" alt=\"enter image description here\"></p>\n\n<p>I know how I can do this in a clunky way for each condition:</p>\n\n<pre><code>use warnings;\nuse strict; \n\nopen my $C1, '&lt;', 'C1.txt';\nopen my $C2, '&lt;', 'C2.txt';\nopen my $C3, '&lt;', 'C3.txt';\n\nmy (%c1_vals, %c2_vals, %c3_vals);\n$c1_vals{$_}++ while(&lt;$C1&gt;);\n$c2_vals{$_}++ while(&lt;$C2&gt;);\n$c3_vals{$_}++ while(&lt;$C3&gt;);\n\n\nmy $c1_c2_count = 0;\nmy $c1_c3_count = 0;\nmy $c1 = 0;\nmy $total = 0;\nmy $all = 0;\n\nfor my $val (keys %c1_vals){\n    $total++;\n    $c1++ if not $c2_vals{$val} and not $c3_vals{$val};\n    $c1_c2_count++ if $c2_vals{$val} and not $c3_vals{$val};\n    $c1_c3_count++ if $c3_vals{$val} and not $c2_vals{$val};\n    $all++ if $c2_vals{$val} and $c3_vals{$val};\n}\nprint \"c1 total = $total\\n\";\nprint \"c1 = $c1\\n\";\nprint \"c1 + c2  = $c1_c2_count\\n\";\nprint \"c1 + c3 = $c1_c3_count\\n\";\nprint \"c1+c2+c3 = $all\\n\";\n</code></pre>\n\n<hr>\n\n<pre><code>c1 total = 11\nc1 = 4\nc1 + c2  = 2\nc1 + c3 = 4\nc1+c2+c3 = 1\n</code></pre>\n\n<hr>\n\n<p>But I wanted to know if there's an easier way of doing this using a subroutine that reads each file from <code>@ARGV</code> and calculates each set in one.</p>\n\n<p>I've got this far, but can't think of an elegant way of doing this:</p>\n\n<pre><code>parse($_) foreach @ARGV;\n\nmy %total;\n\nsub parse {\n    my $file = shift;\n    open my $list, '&lt;', $file or die \"Can't read file '$file' [$!]\\n\";\n    while (&lt;$list&gt;) {\n        chomp;\n        $total{$_}++;\n    }\n}\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Just for clarity, I want to find all intersections (all numbers in Venn diagram) for all 3 data sets (7 in total). I don't want to use a module, as I want to be a blue to build this into a larger program without too many changes. </p>\n"}, {"tags": ["perl", "template-toolkit"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1430937930, "post_id": 30084994, "comment_id": 48283202, "body": "Same was as anywhere else: Iterate over the elements of the array until you find it or until you run out of elements."}], "answers": [{"comments": [{"owner": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "edited": false, "score": 0, "creation_date": 1436361401, "post_id": 30085340, "comment_id": 50578395, "body": "This somehow doesn&#39;t work for me as it always returns true, e.g. <code>[% IF myarray.grep(&#39;Q&#39;) %]</code>. Any ideas what could go wrong?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "edited": false, "score": 0, "creation_date": 1436806400, "post_id": 30085340, "comment_id": 50754824, "body": "@user1981275 That is really weird ... I am certain it worked at the time. Using <code>[% FOR myarray.grep(&#39;Q&#39;) %]</code> results in expected behavior, but <code>IF</code> is not doing what I think it should."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 11722, "user_id": 1981275, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f3e2752d5fbb3693863943132ffa39f6?s=128&d=identicon&r=PG", "display_name": "user1981275", "link": "https://stackoverflow.com/users/1981275/user1981275"}, "edited": false, "score": 0, "creation_date": 1436806652, "post_id": 30085340, "comment_id": 50754974, "body": "@user1981275  The result of <code>myarray.grep(...)</code> seems to be an arrayref which will be true even if it points to an empty array. Use <code>.size</code> to remove any ambiguity."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 7, "last_activity_date": 1436806701, "last_edit_date": 1592644375, "creation_date": 1430938659, "answer_id": 30085340, "question_id": 30084994, "link": "https://stackoverflow.com/questions/30084994/how-to-check-whether-an-element-is-present-in-an-array-using-template-toolkit/30085340#30085340", "title": "how to check whether an element is present in an array using template toolkit", "body": "<blockquote>\n<p><a href=\"https://metacpan.org/pod/Template::Manual::VMethods#grep\" rel=\"nofollow noreferrer\">grep</a></p>\n<p>Returns a list of the items in the list that match a regular expression pattern.</p>\n</blockquote>\n<p>Therefore,</p>\n<pre><code>[% IF myarray.grep('^e\\z').size %]\n&lt;p&gt;Hello World&lt;/p&gt;\n[% END %]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254, "user_id": 4128329, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--gktwv5A488/AAAAAAAAAAI/AAAAAAAAACQ/_d68iv8Hd7E/photo.jpg?sz=128", "display_name": "Kol007", "link": "https://stackoverflow.com/users/4128329/kol007"}, "is_accepted": false, "score": 2, "last_activity_date": 1454147874, "creation_date": 1454147874, "answer_id": 35100339, "question_id": 30084994, "link": "https://stackoverflow.com/questions/30084994/how-to-check-whether-an-element-is-present-in-an-array-using-template-toolkit/35100339#35100339", "title": "how to check whether an element is present in an array using template toolkit", "body": "<pre><code>myarray = ['17', '177', '166']\nvalue = 16\n\n[% IF myarray.grep('^$value$').size %] # will be true\n&lt;p&gt;Hello World&lt;/p&gt;\n[% END %]\n\nmyarray.grep('^$value$') # return ['166']\n</code></pre>\n\n<p>another way </p>\n\n<pre><code>[% IF myarray.grep('^$value$').0 == value %] # will be false\n&lt;p&gt;Hello World&lt;/p&gt;\n[% END %]\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 986818, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8baf2119a59c2c8c47c9fcc5c962ec23?s=128&d=identicon&r=PG", "display_name": "rajeev", "link": "https://stackoverflow.com/users/986818/rajeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2149, "favorite_count": 0, "accepted_answer_id": 30085340, "answer_count": 2, "score": 1, "last_activity_date": 1454147874, "creation_date": 1430937578, "question_id": 30084994, "link": "https://stackoverflow.com/questions/30084994/how-to-check-whether-an-element-is-present-in-an-array-using-template-toolkit", "title": "how to check whether an element is present in an array using template toolkit", "body": "<p>i am trying to find out whether an array contains an element in template toolkit. not sure how? can anyone help?</p>\n\n<pre><code>my $var ={\nmyarray =&gt; ['a','c','b','d']\n}\n</code></pre>\n\n<p>passed to tt:</p>\n\n<p>now want to check:</p>\n\n<pre><code>[% IF ( myarray contains 'a') %]\n[% END %]\n\n[% IF ( myarray contains 'e') %]\n[% END %]\n</code></pre>\n"}, {"tags": ["regex", "macos", "bash", "perl"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430937318, "post_id": 30084874, "comment_id": 48282863, "body": "<code>^</code> in the middle of a match isn&#39;t matching the way you expect but you don&#39;t need it. You&#39;ve just asserted (with <code>\\r</code>) that you are at the start of a new line. Just remove it from the first attempt and see if that works."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 2, "creation_date": 1430937621, "post_id": 30084874, "comment_id": 48283027, "body": "Are you absolutely positive you want to use &quot;\\r&quot; instead of &quot;\\n&quot;?  Apple switched it&#39;s preferred line ending years ago when they switched to OS X.  As a matter of fact your displayed output looks like a classic example of &quot;success&quot; (?) with inserting the dreaded &quot;\\r&quot; character and having it overwrite previous characters on the line...."}, {"owner": {"reputation": 4158, "user_id": 1952287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/6qNle.jpg?s=128&g=1", "display_name": "D\u1d00\u0280\u1d1b\u029cV\u1d00\u1d05\u1d07\u0280", "link": "https://stackoverflow.com/users/1952287/d%e1%b4%80%ca%80%e1%b4%9b%ca%9cv%e1%b4%80%e1%b4%85%e1%b4%87%ca%80"}, "edited": false, "score": 0, "creation_date": 1430937714, "post_id": 30084874, "comment_id": 48283075, "body": "I&#39;ve tried both <code>\\r</code> and <code>\\n</code> and neither work in the script but work in the text editor.  After removing <code>^</code> still doesn&#39;t solve the issue."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1430938672, "post_id": 30085158, "comment_id": 48283663, "body": "To read the whole file, need <code>-0777</code>, not <code>-00</code>. Fixed. (<code>-00</code> would also work here, so an alternative solution would have been to change the explanation.)"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430938734, "post_id": 30085158, "comment_id": 48283693, "body": "Oh, right.  The <code>00</code> argument is for <i>paragraph</i> mode and I got lucky on it working here.  Literacy failure on my part.  Thanks!"}], "tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": true, "score": 3, "last_activity_date": 1430939258, "last_edit_date": 1430939258, "creation_date": 1430938112, "answer_id": 30085158, "question_id": 30084874, "link": "https://stackoverflow.com/questions/30084874/why-is-my-carriage-return-not-working-in-my-perl-script/30085158#30085158", "title": "Why is my carriage return not working in my perl script?", "body": "<p>You're reading the file line-by-line, so each line ends with the carriage return or newline -- there's nothing after it.  <code>\\r{</code> doesn't appear on any single line.</p>\n\n<p>You can use the <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow\"><code>-0777</code></a> switch to enable slurp mode and read the whole file as a string:</p>\n\n<pre><code>perl -0777 -pe 's/\\R{/ {\\n /g' foo.css\n</code></pre>\n\n<p>The <code>\\R</code> should match any type of newline, be it <code>\\r\\n</code>, <code>\\r</code>, or <code>\\n</code>.</p>\n"}], "owner": {"reputation": 4158, "user_id": 1952287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/6qNle.jpg?s=128&g=1", "display_name": "D\u1d00\u0280\u1d1b\u029cV\u1d00\u1d05\u1d07\u0280", "link": "https://stackoverflow.com/users/1952287/d%e1%b4%80%ca%80%e1%b4%9b%ca%9cv%e1%b4%80%e1%b4%85%e1%b4%87%ca%80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 1, "accepted_answer_id": 30085158, "answer_count": 1, "score": 1, "last_activity_date": 1430939361, "creation_date": 1430937215, "last_edit_date": 1430939361, "question_id": 30084874, "link": "https://stackoverflow.com/questions/30084874/why-is-my-carriage-return-not-working-in-my-perl-script", "title": "Why is my carriage return not working in my perl script?", "body": "<p>Stepping into perl from sed I am trying to practice on a CSS file but I'm having issues and I am not finding what the issue could be from multiple searches.  In my bash script I am targeting a CSS file that has:</p>\n\n<pre><code>.thisclass\n{   font-family: \"Times New Roman\";\n    line-height: 1.20em;\n    font-size: 1.00em;\n    margin: .25em 0;\n    color: rgb(0,0,0);\n}\n</code></pre>\n\n<p>and my goal is:</p>\n\n<pre><code>.thisclass {    \n    font-family: \"Times New Roman\";\n    line-height: 1.20em;\n    font-size: 1.00em;\n    margin: .25em 0;\n    color: rgb(0,0,0);\n}\n</code></pre>\n\n<p>The perl I tried is <code>perl -pe 's:\\r^{: {\\r:g'</code> but it doesn't work.  If I try:</p>\n\n<p><code>perl -pe 's:^{:foobar:g'</code></p>\n\n<p>the output is:</p>\n\n<pre><code>.thisclass\nfoobar  font-family: \"Times New Roman\";\n    line-height: 1.20em;\n    font-size: 1.00em;\n    margin: .25em 0;\n    color: rgb(0,0,0);\n}\n</code></pre>\n\n<p>If I try <code>perl -pe 's:\\r:foobar:g'</code> the entire document gets modified with <code>foobar</code></p>\n\n<p>In my text editor I can do <code>\\r^{</code> and in my terminal I can do <code>s/\\n{/ {\\n/g;</code> but I cannot get a carriage return or a new line to work in perl executed through a script with <code>sh foo.sh</code>.  I have tried using <code>\\s</code> (Whitespace character equivalent to [<code>\\t\\n\\r\\f</code>]) but with no success.</p>\n\n<p>So why is the carriage return not working in my perl? Is there a better way to execute what I am looking to do? If there is a better way can you explain why, please.</p>\n"}, {"tags": ["perl", "glob", "syntactic-sugar", "readdir"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1430934815, "post_id": 30084091, "comment_id": 48281307, "body": "I&#39;m curious what the person who informed you thinks will happen in those cases with special characters in directory names."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1430935228, "post_id": 30084091, "comment_id": 48281579, "body": "@AndyLester I think the OP is referring to a comment about spaces in directory names. <code>mkdir &quot;foo bar&quot; &amp;&amp; touch &quot;foo bar&#47;baz&quot; &amp;&amp; perl -E &#39;$dir = &quot;foo bar&quot;; say for &lt;$dir&#47;*&gt;&#39;</code> (can be resolved by quoting the argument to <code>glob</code>)"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1430935316, "post_id": 30084091, "comment_id": 48281639, "body": "Here&#39;s an excellent write-up of glob vs. readdir: <a href=\"https://stackoverflow.com/questions/1506801/what-reasons-are-there-to-prefer-glob-over-readdir-or-vice-versa-in-perl\" title=\"what reasons are there to prefer glob over readdir or vice versa in perl\">stackoverflow.com/questions/1506801/&hellip;</a>"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1430935862, "post_id": 30084091, "comment_id": 48281969, "body": "@AndyLester, Basically glob would not find files/directories with special characters in the name unless the special characters were escaped properly.  How special characters are escaped can be dependent on the operating system."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1430935933, "post_id": 30084091, "comment_id": 48282012, "body": "But now that I think of it, wouldn&#39;t those special characters potentially trip up <code>opendir</code> as well?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430936099, "post_id": 30084091, "comment_id": 48282114, "body": "<code>sub dir_contents { my ($path) = @_; opendir my $dh, $path or die $!; return readdir $dh }</code> ;) I know it&#39;s tempting, but please don&#39;t fall into the trap of always trying to do things in one line. It tends to make your code less readable and harder to debug and maintain."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1430936410, "post_id": 30084091, "comment_id": 48282295, "body": "@tjwrona1992: I&#39;m pretty sure that what you have described, that glob won&#39;t find files/directories with special characters in the name, is incorrect.  You can look at <code>perldoc File::Glob</code> for more information."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430936485, "post_id": 30084091, "comment_id": 48282337, "body": "@ThisSuitIsBlackNot Well duhhh I can do it as a subroutine haha, I was just wondering if there was a convenient shortcut like Perl seems to offer us for many other things.  I just figured if it can be done with files, why not directories? <code>:)</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1430936772, "post_id": 30084091, "comment_id": 48282502, "body": "@AndyLester ikegami made a comment on <a href=\"http://stackoverflow.com/questions/30080596/perl-readdir-one-liner\">this deleted question</a>. I can&#39;t see it, but you should be able to. I&#39;m pretty sure spaces were referenced, but I don&#39;t remember anything about other special characters."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1430936914, "post_id": 30084091, "comment_id": 48282582, "body": "This is the exact comment: &quot;my @contents = &lt;$directory/*&gt;; is buggy. For example, it won&#39;t work if $directory contains spaces or a number of other characters. Even if you were to add the needed escaping (which varies by OS), * won&#39;t return all the files in the directory on unix systems.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1430939358, "post_id": 30084091, "comment_id": 48284082, "body": "@Andy Lester, That makes no sense; there is no difference between <code>&lt;...&gt;</code> and <code>glob(qq&lt;...&gt;)</code> (except when <code>&lt;...&gt;</code> means <code>readline(...)</code>, of course)."}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1430942359, "post_id": 30084091, "comment_id": 48285939, "body": "My understanding was that <code>glob()</code> was a safer version of <code>&lt;&gt;</code>.  Mea culpa."}], "answers": [{"comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1430938952, "post_id": 30084841, "comment_id": 48283832, "body": "I like <a href=\"https://metacpan.org/pod/File::Slurp#read_dir\" rel=\"nofollow noreferrer\"><code>File::Slurp::read_dir</code></a>, although I understand <code>File::Slurp</code> has fallen out of favor in some circles."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1430939153, "post_id": 30084841, "comment_id": 48283945, "body": "@Jim Davis, File::Slurp used to be buggy as hell, so I&#39;ve always avoided it. I didn&#39;t even know it had such a sub. I&#39;m my understanding that these problems were fixed long ago now, however. I&#39;ve added it to my answer."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1430944380, "post_id": 30084841, "comment_id": 48287218, "body": "@ikegami, A subroutine is the obvious solution, this is more of a theoretical question.  I want the simplest most bare-bones possible way of reading a directory. Basically it would just give you the default output of <code>readdir</code> without all the clunkiness of having a line of <code>opendir</code> to get the handle followed by a line of <code>readdir</code> to read the handle followed by a line of <code>closedir</code> to close the handle."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1430947558, "post_id": 30084841, "comment_id": 48288847, "body": "I gave you four such solutions."}, {"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1509890393, "post_id": 30084841, "comment_id": 81194437, "body": "What package is get_dir_contents even in?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1509895029, "post_id": 30084841, "comment_id": 81196103, "body": "@felwithe, whichever package you decide to put it in, since you&#39;re the one writing it."}, {"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1509906530, "post_id": 30084841, "comment_id": 81200253, "body": "@ikegami that&#39;s not an answer."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1430939490, "last_edit_date": 1430939490, "creation_date": 1430937132, "answer_id": 30084841, "question_id": 30084091, "link": "https://stackoverflow.com/questions/30084091/perl-readdir-as-a-one-liner/30084841#30084841", "title": "Perl readdir as a one-liner?", "body": "<p>How about the following?</p>\n\n<pre><code>my @contents = get_dir_contents($dir);\n</code></pre>\n\n<p>You even get to decide how that handles errors, if <code>.</code> should be returned, if <code>..</code> should be returned, if \"hidden\" files should be returned and whether the path is prepended to the file name since you write <code>get_dir_contents</code> yourself.</p>\n\n<hr>\n\n<p>Alternatives:</p>\n\n<ul>\n<li><p>&#x20;</p>\n\n<pre><code>use File::Find::Rule qw( );\nmy @contents = File::Find::Rule-&gt;maxdepth(1)-&gt;in($dir);\n</code></pre></li>\n<li><p>&#x20;</p>\n\n<pre><code>use File::Slurp qw( read_dir );\nmy @contents = read_dir($dir);\n</code></pre></li>\n<li><p>&#x20;</p>\n\n<pre><code># Unix only, but that includes cygwin and OS/X.\nmy @contents = &lt;\\Q$dir\\E/.* \\Q$dir\\E/*&gt;;\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430944680, "post_id": 30086372, "comment_id": 48287388, "body": "How is this substantively different from <code>opendir my $dh, $dir; my @contents = readdir $dh;</code>? You don&#39;t need <code>do</code> to put multiple statements on one line."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1430945045, "post_id": 30086372, "comment_id": 48287595, "body": "The <code>do {}</code> makes the <code>my ($dh)</code> locally scoped so that the file handle will be closed as soon as it gets out of scope. It also allows the declaration of <code>my @contents</code> to be outside of that scope thus it can be declared on the same line and still be used non-locally. If you tried to locally scope it without the <code>do {}</code> you&#39;d get <code>{ opendir my $dh, $dir; my @contents = readdir $dh; }</code> but then you run into the problem of not being able to use <code>@contents</code> on the next line because it would now be out of scope! ...Its quite beautiful and graceful actually. Perl is amazing. <code>:)</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430945827, "post_id": 30086372, "comment_id": 48288010, "body": "Not closing a lexical directory handle immediately is <a href=\"http://stackoverflow.com/questions/3687198/what-are-the-implications-of-not-closing-a-directory-handle-in-perl\">rarely significant</a>, so I don&#39;t think what you&#39;ve posted is <i>substantively</i> different from simply putting multiple statements on one line. But since you already know this is poor practice, I&#39;ll stop harping on it :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430948920, "post_id": 30086372, "comment_id": 48289509, "body": "The OP specifically asked for something shorter than <code>opendir</code>+<code>readdir</code>+<code>closedir</code>. Technically, removing <code>closedir</code> is shorter, but don&#39;t you think the OP knew that? Also, four other shorter solutions have already been provided, so I&#39;m not sure how you can consider this a shorthand."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1430969594, "post_id": 30086372, "comment_id": 48295498, "body": "Well creating your own subroutine is hardly shorthand, and using another module is almost like writing your own subroutine (except that it has been tested and you know it will work).  Of your answers, using File::Slurp is probably the shortest and simplest implementation, but the intent of this question was to find my own way to do it.  It&#39;s more about learning rather than it is about actual usability.  Basically I knew I could get it in one line using glob, but I wanted to know if there was a short alternative to globbing using <code>opendir</code>/<code>readdir</code>/<code>closedir</code>."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1430969761, "post_id": 30086372, "comment_id": 48295540, "body": "Also, the reason i left off the <code>or die</code> in my original answer was to emphasize how nice and short the code was <code>:)</code> obviously adding <code>or die</code> is better practice."}], "tags": [], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "is_accepted": true, "score": 0, "last_activity_date": 1430948577, "last_edit_date": 1430948577, "creation_date": 1430942275, "answer_id": 30086372, "question_id": 30084091, "link": "https://stackoverflow.com/questions/30084091/perl-readdir-as-a-one-liner/30086372#30086372", "title": "Perl readdir as a one-liner?", "body": "<p>I believe I have come up with a valid one-liner that involves <code>opendir</code>/<code>readdir</code>!</p>\n\n<pre><code>my @contents = do { opendir my $dh, $dir or die $!; readdir $dh };\n</code></pre>\n\n<p>This should open and read the directory, return all of its contents and as soon as the <code>do</code> block ends, the <code>$dh</code> should be closed by Perl \"automagically\".</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 30086372, "answer_count": 2, "score": 3, "last_activity_date": 1430948577, "creation_date": 1430934615, "last_edit_date": 1495542228, "question_id": 30084091, "link": "https://stackoverflow.com/questions/30084091/perl-readdir-as-a-one-liner", "title": "Perl readdir as a one-liner?", "body": "<p>As of now, I know of two ways to open and read a directory in Perl.  You can use <code>opendir</code>, <code>readdir</code> and <code>closedir</code> or you can simply use <code>glob</code> to get the contents of the directory.</p>\n\n<hr>\n\n<p><strong>Example:</strong></p>\n\n<p><em>Using <code>opendir</code>, <code>readdir</code> and <code>closedir</code>:</em></p>\n\n<pre><code>opendir my $dh, $directory;\nmy @contents = readdir $dh;\nclosedir $dh;\n</code></pre>\n\n<p><em>Using <code>glob</code>:</em></p>\n\n<pre><code>my @contents = &lt;$directory/*&gt;;\n</code></pre>\n\n<hr>\n\n<p>I have been informed that in some situations the <code>glob</code> method can produce unpredictable results (for example it can act differently on different operating systems when it encounters special characters in directory names).</p>\n\n<p>The thing I love about the <code>glob</code> method is how \"quick and dirty\" it is.  It's one simple line and it gets the job done, but if it doesn't work in all situations that can introduce unexpected and difficult to find bugs.</p>\n\n<blockquote>\n  <p>I was wondering if there was a sort of \"shorthand\" way to use the\n  <code>opendir</code>, <code>readdir</code>, <code>closedir</code> method?</p>\n</blockquote>\n\n<p>Maybe something like this <a href=\"https://stackoverflow.com/questions/30062413/fancy-file-slurping-in-perl\"><strong><em>fancy method for slurping a file</em></strong></a> in one line I recently discovered.</p>\n"}, {"tags": ["perl", "catalyst", "dbix-class", "template-toolkit"], "comments": [{"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430933481, "post_id": 30083669, "comment_id": 48280441, "body": "If you run the query directly what happens?"}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430933605, "post_id": 30083669, "comment_id": 48280530, "body": "I&#39;ve run the query I quoted in the first block directly in sqlite and I get the results I would expect. The abstraction into DBIx::Class language confuses me, though, and I very well could be doing it wrong there. :-/"}, {"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430933699, "post_id": 30083669, "comment_id": 48280574, "body": "Sounds like it your relationship isn&#39;t set up right (as the error message says). I&#39;d look over DBIx documentation again."}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430933819, "post_id": 30083669, "comment_id": 48280647, "body": "I think you&#39;re right, Zach, but I&#39;m still not sure how to fix it. Making some edits to the main post to reflect what I know..."}, {"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430933847, "post_id": 30083669, "comment_id": 48280665, "body": "Make a gist with the perl code."}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430934377, "post_id": 30083669, "comment_id": 48281025, "body": "Not sure what you mean, Zach."}, {"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430934407, "post_id": 30083669, "comment_id": 48281043, "body": "<a href=\"https://gist.github.com/\" rel=\"nofollow noreferrer\">gist.github.com</a>"}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430934676, "post_id": 30083669, "comment_id": 48281216, "body": "Just for Menus.pm, or for everything?"}, {"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430935220, "post_id": 30083669, "comment_id": 48281574, "body": "For everything, need to see how the relationships are set up."}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430935881, "post_id": 30083669, "comment_id": 48281981, "body": "Alright, it&#39;s up at <a href=\"https://gist.github.com/adadiehl/d77dda264d8f883ee698\" rel=\"nofollow noreferrer\">gist.github.com/adadiehl/d77dda264d8f883ee698</a>"}, {"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430936139, "post_id": 30083669, "comment_id": 48282142, "body": "This is the part that you need to tweak your relationship in:  <code>ON maps.id_maps = maps_menus.id_maps</code> Make sure that exists in MapsMenus and Maps files that you posted."}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430936770, "post_id": 30083669, "comment_id": 48282500, "body": "I&#39;m still confused. Isn&#39;t that what the &quot;<b>PACKAGE</b>-&gt;has_many( ...&quot; in Map.pm and &quot;<b>PACKAGE</b>-&gt;belongs_to(...&quot; in MapsMenus.pm are defining?"}, {"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430936843, "post_id": 30083669, "comment_id": 48282537, "body": "Yes but they aren&#39;t being mapped right to that ON clause. I added links to the cookbooks to help you out in the gist."}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430939063, "post_id": 30083669, "comment_id": 48283901, "body": "Thanks for pointing me in the right direction, Zach! I managed to sort out the relationship and got the join (mostly) working. Only odd thing now is that it&#39;s telling me the column &quot;name&quot; does not exist in my results (it clearly does!) -- everything else prints out just fine, but it doesn&#39;t like &quot;name&quot; for some reason..."}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1430940707, "post_id": 30083669, "comment_id": 48284945, "body": "Hmmm.. May have spoke to soon. I&#39;m getting results but the query that&#39;s being generated from my code is <code>SELECT me.id_maps, me.id_menus, maps.map_file FROM maps_menus me  JOIN maps maps ON maps.id_maps = me.id_maps WHERE ( id_menus = ? ): &#39;4&#39;</code>  Now I&#39;m really confused, because it IS getting map_file right, just none of the others. Made updates to my code at gist if you have time to take a look..."}, {"owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "reply_to_user": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 1, "creation_date": 1431003067, "post_id": 30083669, "comment_id": 48314445, "body": "Okay, found the problem. I had the direction of the join reversed in the relationship. Putting the &quot;has_many&quot; in maps_menus and the &quot;belongs_to&quot; in maps and doing the join on maps instead of maps_menus got it working. So simple!"}, {"owner": {"reputation": 1890, "user_id": 1585439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/v6Hik.jpg?s=128&g=1", "display_name": "Zach Leighton", "link": "https://stackoverflow.com/users/1585439/zach-leighton"}, "edited": false, "score": 0, "creation_date": 1431005946, "post_id": 30083669, "comment_id": 48316807, "body": "glad to see you got it working!"}], "answers": [{"tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": true, "score": 0, "last_activity_date": 1430937045, "creation_date": 1430937045, "answer_id": 30084822, "question_id": 30083669, "link": "https://stackoverflow.com/questions/30083669/join-attempt-throwing-exceptions/30084822#30084822", "title": "Join attempt throwing exceptions", "body": "<p>I'd suggest using prefetch of the two relationships which form the many-to-many relationship helper and maybe using HashRefInflator if you don't need access to the row objects.</p>\n\n<p>Note that Catalyst doesn't generate a DBIC (which is btw the official abbreviation for DBIx::Class, DBIx is a whole namespace) schema, SQL::Translator or DBIx::Class::Schema::Loader do. Looks at the docs of the module you've used to find out how to influence its naming.\nAlso feel free to change the names if they don't fit you.</p>\n"}], "owner": {"reputation": 186, "user_id": 3396385, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/887840721/picture?type=large", "display_name": "user3396385", "link": "https://stackoverflow.com/users/3396385/user3396385"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 30084822, "answer_count": 1, "score": 2, "last_activity_date": 1430937045, "creation_date": 1430933292, "last_edit_date": 1430934067, "question_id": 30083669, "link": "https://stackoverflow.com/questions/30083669/join-attempt-throwing-exceptions", "title": "Join attempt throwing exceptions", "body": "<p>I'm sure I'm overlooking something glaringly obvious and I apologize for the newbie question, but I've spent several hours back and forth through documentation for DBIx::Class and Catalyst and am not finding the answer I need...</p>\n\n<p>What I'm trying to do is automate creation of sub-menus based on the contents of my database. I have three tables in the database to do so: maps (in which sub-menu items are found), menus (contains names of top-level menus), maps_menus (assigns maps to top-level menus). I've written a subroutine to return a hash of resultsets, with the plan of using a Template Toolkit nested loop to build the top-level and sub-menus.</p>\n\n<p>Basically, for each top-level menu in menus, I'm trying to run the following query and (eventually) build a sub-menu based on the result:</p>\n\n<pre><code>select * FROM maps JOIN maps_menus ON maps.id_maps = maps_menus.id_maps WHERE maps_menus.id_menus = (current id_menus);\n</code></pre>\n\n<p>Here is the subroutine, located in lib/MyApp/Schema/ResultSet/Menus.pm</p>\n\n<pre><code># Build a hash of hashes for menu generation\nsub build_menu {\n    my ($self, $maps, $maps_menus) = @_;\n\n    my %menus;\n\n    while (my $row = $self-&gt;next) {\n        my $id = $row-&gt;get_column('id_menus');\n        my $name = $row-&gt;get_column('name');\n        my $sub = $maps_menus-&gt;search(\n            { 'id_maps' =&gt; $id },\n            { join =&gt; 'maps',\n                '+select' =&gt; ['maps.id_maps'],\n                '+as' =&gt; ['id_maps'],\n                '+select' =&gt; ['maps.name'],\n                '+as' =&gt; ['name'],\n                '+select' =&gt; ['maps.map_file'],\n                '+as' =&gt; ['map_file']\n            }\n        );   \n\n        $menus{$name} = $sub;   \n\n        # See if it worked...\n        print STDERR \"$name\\n\";\n        while (my $m = $sub-&gt;next) {\n            my $m_id = $m-&gt;get_column('id_maps');\n            my $m_name = $m-&gt;get_column('name');\n            my $m_file = $m-&gt;get_column('map_file');\n\n            print STDERR \"\\t$m_id, $m_name, $m_file\\n\";\n        }\n    }\n    return \\%menus;\n}\n</code></pre>\n\n<p>I am calling this from lib/MyApp/Controller/Maps.pm thusly...</p>\n\n<pre><code>$c-&gt;stash(menus =&gt; [$c-&gt;model('DB::Menus')-&gt;build_menu($c-&gt;model('DB::Map'), $c-&gt;model('DB::MapsMenus'))]);\n</code></pre>\n\n<p>When I attempt to pull up the page, I get all sorts of exceptions, the top-most of which is:</p>\n\n<pre><code>[error] No such relationship maps on MapsMenus at /home/catalyst/perl5/lib/perl5/DBIx/Class/Schema.pm line 1078\n</code></pre>\n\n<p>Which, as far as I can tell, originates from the call to $sub->next. I take this as meaning I'm doing my query incorrectly and not getting the results I think I should be. However, I'm not sure what I'm missing. </p>\n\n<p>I found the following lines, defining the relationship to maps, in lib/MyApp/Schema/Result/MapsMenus.pm</p>\n\n<pre><code>__PACKAGE__-&gt;belongs_to(\n  \"id_map\",\n  \"MyApp::Schema::Result::Map\",\n  { id_maps =&gt; \"id_maps\" },\n  { is_deferrable =&gt; 1, on_delete =&gt; \"CASCADE\", on_update =&gt; \"CASCADE\" },\n);\n</code></pre>\n\n<p>...and in lib/MyApp/Schema/Result/Map.pm</p>\n\n<pre><code>__PACKAGE__-&gt;has_many(\n  \"maps_menuses\",\n  \"MyApp::Schema::Result::MapsMenus\",\n  { \"foreign.id_maps\" =&gt; \"self.id_maps\" },\n  { cascade_copy =&gt; 0, cascade_delete =&gt; 0 },\n);\n</code></pre>\n\n<p>No idea why it's calling it \"maps_menuses\" -- that was generated by Catalyst. Could that be the problem?</p>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1430933195, "post_id": 30083438, "comment_id": 48280221, "body": "<code>Cwd::realpath</code> resolves symlinks, so it should work fine. Please show the code you&#39;re having trouble with."}, {"owner": {"reputation": 59, "user_id": 3023846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b7d8b45cbded5be39901e99a2fc5e?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMush", "link": "https://stackoverflow.com/users/3023846/chrismush"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1431611069, "post_id": 30083438, "comment_id": 48579317, "body": "I simply had <code>print Cwd:realpath($0);</code> in my perl script.  I created an sym link to that script, and when I ran the sym link, it printed out the path to the sim link."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1431612725, "post_id": 30083438, "comment_id": 48580502, "body": "Again, <code>Cwd::realpath</code> resolves symlinks: <code>cd &#47;tmp; echo &#39;use Cwd; print Cwd::realpath($0)&#39; &gt; script; ln -s script link; perl link</code> prints <code>&#47;tmp&#47;script</code>, not <code>&#47;tmp&#47;link</code>. Please show all of the code necessary to reproduce your problem."}, {"owner": {"reputation": 59, "user_id": 3023846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b7d8b45cbded5be39901e99a2fc5e?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMush", "link": "https://stackoverflow.com/users/3023846/chrismush"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1432236415, "post_id": 30083438, "comment_id": 48854477, "body": "Hmm.  I&#39;m not able to reproduce it in an example.  I&#39;ve moved on with the solution below.  Thanks for the assistance."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 3023846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b7d8b45cbded5be39901e99a2fc5e?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMush", "link": "https://stackoverflow.com/users/3023846/chrismush"}, "edited": false, "score": 0, "creation_date": 1431012132, "post_id": 30083664, "comment_id": 48321813, "body": "I&#39;m not sure how this would help.  I am calling the sym_link from the command line  So it has already been called when this command (assuming it is in the perl script I called) gets called.  I think this would apply to calling the sym_link from within Perl and it would tell me if the sym_link is a sym_link, no?  (EXPR would be the file I&#39;m opening in Perl).  Could you give me an example on how to use this?"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 1, "last_activity_date": 1430933256, "creation_date": 1430933256, "answer_id": 30083664, "question_id": 30083438, "link": "https://stackoverflow.com/questions/30083438/how-to-determine-location-of-perl-script-that-was-symbolic-linked/30083664#30083664", "title": "How to determine location of perl script that was symbolic linked?", "body": "<p>The <code>readlink</code> builtin chases down the actual location of a symbolic link.</p>\n\n<blockquote>\n  <p><strong>readlink EXPR</strong></p>\n  \n  <p>Returns the value of a symbolic link, if symbolic links are\n                 implemented.  If not, gives a fatal error.  If there is some\n                 system error, returns the undefined value and sets $! (errno).\n                 If EXPR is omitted, uses $_.</p>\n</blockquote>\n\n<p>Returns <code>undef</code> if the input is not a symbolic link.</p>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": true, "score": 3, "last_activity_date": 1430941275, "creation_date": 1430941275, "answer_id": 30086083, "question_id": 30083438, "link": "https://stackoverflow.com/questions/30083438/how-to-determine-location-of-perl-script-that-was-symbolic-linked/30086083#30086083", "title": "How to determine location of perl script that was symbolic linked?", "body": "<pre><code>use FindBin qw( $RealBin );\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow\">perldoc FindBin</a>. <code>FindBin</code> is a standard module and is install with Perl.</p>\n"}], "owner": {"reputation": 59, "user_id": 3023846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b7d8b45cbded5be39901e99a2fc5e?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMush", "link": "https://stackoverflow.com/users/3023846/chrismush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 1, "accepted_answer_id": 30086083, "answer_count": 2, "score": 1, "last_activity_date": 1614248091, "creation_date": 1430932622, "last_edit_date": 1430932854, "question_id": 30083438, "link": "https://stackoverflow.com/questions/30083438/how-to-determine-location-of-perl-script-that-was-symbolic-linked", "title": "How to determine location of perl script that was symbolic linked?", "body": "<p>I've spent quite a bit of time looking for a solution on SE, but haven't come across this issue.</p>\n\n<p>I have a Perl script \"SCRIPT\" that can be installed in different locations, but it always reads in local files (in the same dir as the script).  If the user invokes the script directly (a la ../../foo/SCRIPT) everything works as expected.   The Perl script finds the local files.</p>\n\n<p>But, if the user creates a symbolic link to the Perl script (ln -s my_script ../../foo/SCRIPT), and runs the sym_link, the sym_linked Perl script is looking in the current dir for the files and not the dir local to the original location of the script.   </p>\n\n<p>I'm trying to figure out how to determine the path that the Perl script actually resides in.  Then I would prepend that onto the front of the files I want to read in.   Any ideas?</p>\n\n<p>I've tried calling the following--</p>\n\n<ul>\n<li><code>dirname(__FILE__)</code></li>\n<li>abs_path()</li>\n<li>cwd</li>\n<li>dirname(abs_path($0))</li>\n<li>Cwd:cwd()</li>\n<li>Cwd::abs_rath()</li>\n<li>File:Basename::fileparse($0)</li>\n<li>Cwd:realpath($0)</li>\n</ul>\n\n<p>but they all return the path to the link, and not the actual perl script.</p>\n"}, {"tags": ["regex", "perl", "tail"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 4, "creation_date": 1430931172, "post_id": 30082868, "comment_id": 48278927, "body": "The regexp <code>&#47;ls&#47;</code> contains no capturing groups, so of course <code>$1</code>, <code>$2</code>, etc. are undefined after it succeeds. What did you expect to find in <code>$1</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4835113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f38b9e67d59121e42797aa0bd3fe0a?s=128&d=identicon&r=PG&f=1", "display_name": "klx123", "link": "https://stackoverflow.com/users/4835113/klx123"}, "edited": false, "score": 0, "creation_date": 1430931792, "post_id": 30082964, "comment_id": 48279339, "body": "thanks! didn&#39;t know about backreferences, and adding parentheses worked <code>($line =~ m&#47;(ls)&#47;)</code>"}], "tags": [], "owner": {"reputation": 5903, "user_id": 790107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de1c480ed937e9291c4dcbf252e6d1f?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/790107/david"}, "is_accepted": true, "score": 2, "last_activity_date": 1430932060, "last_edit_date": 1430932060, "creation_date": 1430931236, "answer_id": 30082964, "question_id": 30082868, "link": "https://stackoverflow.com/questions/30082868/in-perl-using-filetail-trying-to-grep-pattern-using-regex-but-1-unintialise/30082964#30082964", "title": "In Perl, using File::Tail trying to grep pattern using regex, but $1 unintialised", "body": "<p><code>$1</code> and similar contain the strings captured by parentheses.  You need to surround your regex pattern with parentheses to have <code>$1</code> contain what you matched.</p>\n"}], "owner": {"reputation": 3, "user_id": 4835113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f38b9e67d59121e42797aa0bd3fe0a?s=128&d=identicon&r=PG&f=1", "display_name": "klx123", "link": "https://stackoverflow.com/users/4835113/klx123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 30082964, "answer_count": 1, "score": 0, "last_activity_date": 1430932060, "creation_date": 1430930961, "question_id": 30082868, "link": "https://stackoverflow.com/questions/30082868/in-perl-using-filetail-trying-to-grep-pattern-using-regex-but-1-unintialise", "title": "In Perl, using File::Tail trying to grep pattern using regex, but $1 unintialised", "body": "<p>I am trying to continuously tail a growing file, and using regex to extract information whenever new lines are added to the file, but <code>$1</code> does not seem to like it.</p>\n\n<p>Code</p>\n\n<pre><code>#!/usr/bin/perl\n$| = 1;\nuse strict;\nuse warnings;\n\nuse File::Tail;\n\nmy $file=File::Tail-&gt;new(\n        name=&gt;\"sample.txt\",\n        maxinterval=&gt;1,\n        interval=&gt;0.05);\n\nwhile (defined(my $line=$file-&gt;read))\n{\n        chomp($line);\n        print \"$line\\n\";\n        if ($line =~ m/ls/)\n        {\n                print $1;\n                print \"MATCH\\n\";\n        }\n}\n</code></pre>\n\n<p>Input to sample.txt, entered in bash shell</p>\n\n<pre><code>echo \"test1\" &gt;&gt; sample.txt\necho \"test2\" &gt;&gt; sample.txt\necho \"test3\" &gt;&gt; sample.txt\necho \"testls4 &gt;&gt; sample.txt\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>test1\ntest2\ntest3\ntestls4\nUse of uninitialized value $1 in print at test.pl line 19.\nMATCH\n</code></pre>\n\n<p>clearly, there is a match, since <code>MATCH</code> was displayed on the output, but why is <code>$1</code> still uninitialised? Strangely enough, outside of the <code>while</code> loop, I have no problems with <code>$1</code></p>\n"}, {"tags": ["forms", "perl", "http-status-code-404"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1430928976, "post_id": 30082079, "comment_id": 48277479, "body": "With absolutely no information to go on, I am going to go out on a limb here and ask you to consider the possibility, however remote it might seem to you, that you are, indeed, <i>just missing something</i>. We don&#39;t know what because we have no idea what you are looking at."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1430929293, "post_id": 30082079, "comment_id": 48277686, "body": "It might be page not found, it might be relative paths. It might just not exist in the first place. But more detail is needed before this question becomes answerable."}, {"owner": {"reputation": 501, "user_id": 3647894, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/005aa5758e4dc289ec2449b793f42332?s=128&d=identicon&r=PG&f=1", "display_name": "user3647894", "link": "https://stackoverflow.com/users/3647894/user3647894"}, "edited": false, "score": 0, "creation_date": 1430942282, "post_id": 30082079, "comment_id": 48285885, "body": "sorry for the lack of info...the thing is that the form works from the website. However, if I go to the action URL, the page is &quot;not found&quot;. Is there a possibility that the form redirects to another page when submitted?"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1431000874, "creation_date": 1431000874, "answer_id": 30100801, "question_id": 30082079, "link": "https://stackoverflow.com/questions/30082079/form-action-page-not-found/30100801#30100801", "title": "Form Action Page Not Found", "body": "<p>If the form action is \"/Pages/somepage\", then the correct full URL will be  <a href=\"http://thewebserver.com/Pages/somepage\" rel=\"nofollow\">http://thewebserver.com/Pages/somepage</a>, not  <a href=\"http://thewebserver.com/formPage/Pages/somepage\" rel=\"nofollow\">http://thewebserver.com/formPage/Pages/somepage</a>. Not sure where you got that \"formPage\" from.</p>\n"}], "owner": {"reputation": 501, "user_id": 3647894, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/005aa5758e4dc289ec2449b793f42332?s=128&d=identicon&r=PG&f=1", "display_name": "user3647894", "link": "https://stackoverflow.com/users/3647894/user3647894"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1431000874, "creation_date": 1430928639, "last_edit_date": 1430942430, "question_id": 30082079, "link": "https://stackoverflow.com/questions/30082079/form-action-page-not-found", "title": "Form Action Page Not Found", "body": "<p>I am playing around a bit with Perl and auto-filling out forms. However, when I view the source code and paste the \"action\" URL of a form into my browser, it goes to a \"Page Not Found\". How could this be? If data is able to be submitted to a page then wouldn't the page have to exist? Or am i just missing something?</p>\n\n<p>For instance, the HTML looks like:</p>\n\n<pre><code>&lt;form action=\"/Pages/somepage\"&gt;\n    &lt;input type=\"text\" name=\"email\" /&gt;\n    &lt;input type=\"submit\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>So if i go to <a href=\"http://thewebserver.com/formPage/Pages/somepage\" rel=\"nofollow\">http://thewebserver.com/formPage/Pages/somepage</a> it simply displays a \"Page Not Found\" error.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1430926361, "post_id": 30081192, "comment_id": 48275676, "body": "You have certainly an undefined values in <code>@resp</code>. What is the result of <code>Dumper\\@resp;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1430926366, "creation_date": 1430926366, "answer_id": 30081280, "question_id": 30081192, "link": "https://stackoverflow.com/questions/30081192/uninitialized-error-in-foreach-loop/30081280#30081280", "title": "uninitialized error in foreach loop", "body": "<p>Because an array can contain an <code>undef</code>. </p>\n\n<pre><code>my @list_of_things = ( \"fish\", undef, \"carrot\" ); \n\nforeach my $line ( @list_of_things ) { \n   print $line;\n}\n</code></pre>\n\n<p>You are presumably having an <code>undef</code> injected via <code>@resp</code> but without seeing what's going in there I can't tell whence it comes. </p>\n\n<p>A workaround might be:</p>\n\n<pre><code>next unless defined $line;\n</code></pre>\n"}], "owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 30081280, "answer_count": 1, "score": 2, "last_activity_date": 1430926366, "creation_date": 1430926172, "question_id": 30081192, "link": "https://stackoverflow.com/questions/30081192/uninitialized-error-in-foreach-loop", "title": "uninitialized error in foreach loop", "body": "<p>Trying to use <a href=\"https://grepular.com/projects/IMAPExpire\" rel=\"nofollow\">https://grepular.com/projects/IMAPExpire</a></p>\n\n<pre><code>$ ./imapexpire.pl --test --user user --passfile ~/imapexpire.pass --folders exceptions --age 100 --host myserver\nTEST  : You're running in test mode, so the deletions wont actually take place\nACTION: Delete mail which arrived before 27-Jan-2015 from: exceptions\nUse of uninitialized value $line in substitution (s///) at /usr/local/share/perl5/IMAP/Client.pm line 560, &lt;GEN0&gt; line 14.\n</code></pre>\n\n<p>Client.pm:555:</p>\n\n<pre><code>sub parse_search (@) {\n    my (@resp) = @_;\n    my @results = ();\n    # find SEARCH line and process results\n    foreach my $line (@resp) {\n        next unless ($line =~ s/^\\*\\s+SEARCH\\s+([\\d+\\s]+)\\s*\\r\\n$/$1/);\n                @results = split(/ /,$line);\n                last; # theres only 1 line\n    }\n    return(wantarray ? @results : @results ? sequencify(@results) : undef );\n}\n</code></pre>\n\n<p>If <code>$line</code> is uninitialized, why did <code>foreach</code> iterate?</p>\n\n<p>I'm on RHEL 6.5 . Ran <code>yum install perl-IO-Socket-SSL</code> and <code>cpan IMAP::Client</code>.</p>\n"}, {"tags": ["perl", "slurm"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1430933662, "last_edit_date": 1430933662, "creation_date": 1430933439, "answer_id": 30083713, "question_id": 30079725, "link": "https://stackoverflow.com/questions/30079725/what-is-this-job-desc-msg-t-format-that-i-need-to-submit-jobs-to-slurm-via-the/30083713#30083713", "title": "What is this `job_desc_msg_t` format that I need to submit jobs to SLURM via the Perl API?", "body": "<p>That's exactly what you must do according to the man page.</p>\n\n<blockquote>\n  <p>Typicaly, C structures are converted to (maybe blessed) Perl hash\n         references, with field names as hash keys. Arrays in C are converted to\n         arrays in Perl. For example, there is a structure \"job_info_msg_t\":</p>\n\n<pre><code>typedef struct job_info_msg {\n    time_t last_update;     /* time of latest info */\n    uint32_t record_count;  /* number of records */\n    job_info_t *job_array;  /* the job records */\n} job_info_msg_t;\n</code></pre>\n  \n  <p>This will be converted to a hash reference with the following\n         structure:</p>\n\n<pre><code>{\n    last_update =&gt; 1285847672,\n    job_array =&gt; [ {account =&gt; 'test', alloc_node =&gt; 'ln0', alloc_sid =&gt; 1234, ...},\n                   {account =&gt; 'debug', alloc_node =&gt; 'ln2', alloc_sid =&gt; 5678, ...},\n                   ...\n                 ]\n}\n</code></pre>\n  \n  <p>Note the missing of the \"record_count\" field in the hash. It can be\n         derived from the number of elements in array \"job_array\".</p>\n  \n  <p>To pass parameters to the API functions, use the corresponding hash\n         references, for example:</p>\n\n<pre><code>$rc = $slurm-&gt;update_node({node_names =&gt; 'node[0-7]', node_state =&gt; NODE_STATE_DRAIN});\n</code></pre>\n  \n  <p>Please see \"&lt;slurm/slurm.h&gt;\" for the definition of the structures.</p>\n</blockquote>\n"}], "owner": {"reputation": 10190, "user_id": 215487, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e3e947cd5a0515d1eece902a29891750?s=128&d=identicon&r=PG", "display_name": "Christopher Bottoms", "link": "https://stackoverflow.com/users/215487/christopher-bottoms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 30083713, "answer_count": 1, "score": 1, "last_activity_date": 1588687372, "creation_date": 1430922631, "last_edit_date": 1588687372, "question_id": 30079725, "link": "https://stackoverflow.com/questions/30079725/what-is-this-job-desc-msg-t-format-that-i-need-to-submit-jobs-to-slurm-via-the", "title": "What is this `job_desc_msg_t` format that I need to submit jobs to SLURM via the Perl API?", "body": "<p>The <a href=\"http://manpages.ubuntu.com/manpages/utopic/man3/Slurm.3pm.html\" rel=\"nofollow noreferrer\">Perl API for SLURM</a> indicates that to submit a job with the API requires that we give it a \"job description\" (<code>$job_desc</code> or <code>$job_desc_msg</code>), which has the structure <code>job_desc_msg_t</code> but it doesn't tell what <code>job_desc_msg_t</code> is. </p>\n\n<p>update: I found it in <a href=\"https://github.com/SchedMD/slurm/blob/b8190e5d60dfca3da9a40f72c4edc060b9d27d79/slurm/slurm.h.in#L1162\" rel=\"nofollow noreferrer\">slurm.h starting at line 1162</a>, so I'm guessing that I will need to pass in a hash with a similar structure.</p>\n"}, {"tags": ["linux", "perl", "sed"], "comments": [{"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 6, "creation_date": 1430922611, "post_id": 30079625, "comment_id": 48272677, "body": "Can you show us the sed or perl code which failed?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4870975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6c4e4a22032d1775774c6c6fbb74c4?s=128&d=identicon&r=PG&f=1", "display_name": "JJC", "link": "https://stackoverflow.com/users/4870975/jjc"}, "edited": false, "score": 0, "creation_date": 1430923691, "post_id": 30079785, "comment_id": 48273514, "body": "The sed command worked, great. Thank you. What is the significance of the commas at the end of the command?"}, {"owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "reply_to_user": {"reputation": 1, "user_id": 4870975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6c4e4a22032d1775774c6c6fbb74c4?s=128&d=identicon&r=PG&f=1", "display_name": "JJC", "link": "https://stackoverflow.com/users/4870975/jjc"}, "edited": false, "score": 0, "creation_date": 1430952327, "post_id": 30079785, "comment_id": 48290925, "body": "Sed uses a delimiter to break it&#39;s command pieces into segments, the <code>glb&#47;data&#47;</code> in this case being the pattern to match, and the empty string being the pattern to replace the matched pattern with.  It&#39;s mostly typical to use <code>&#47;</code> as the delimiter, but since <code>&#47;</code> shows up in the pattern we&#39;re trying to match, I used <code>,</code> instead.  sed actually doesn&#39;t much care what you use, but <code>,</code> is my first choice when I don&#39;t want to use <code>&#47;</code>"}], "tags": [], "owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "is_accepted": true, "score": 1, "last_activity_date": 1430922782, "creation_date": 1430922782, "answer_id": 30079785, "question_id": 30079625, "link": "https://stackoverflow.com/questions/30079625/remove-part-of-absolute-path-string/30079785#30079785", "title": "Remove part of absolute path string", "body": "<p>Here's some bash that should work with sed:</p>\n\n<pre><code>file_name='\\server/glb/data/dir/var/loc2/log/123456.log'\necho $file_name | sed -e 's,glb/data/,,'\n</code></pre>\n\n<p>that will print the stripped path, to save it in a var</p>\n\n<pre><code>new_name=$(echo $file_name | sed -e 's,glb/data/,,')\n</code></pre>\n\n<p>Similarly in perl you can do</p>\n\n<pre><code>my $file_name='\\server/glb/data/dir/var/loc2/log/123456.log';\n$file_name =~ s,glb/data/,,;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 1, "last_activity_date": 1430923897, "last_edit_date": 1430923897, "creation_date": 1430922809, "answer_id": 30079795, "question_id": 30079625, "link": "https://stackoverflow.com/questions/30079625/remove-part-of-absolute-path-string/30079795#30079795", "title": "Remove part of absolute path string", "body": "<p>This seems straightforward: </p>\n\n<pre><code>use strict; \nuse warnings; \n\nuse feature qw(say);\n\nmy $path = '\\server/glb/data/dir/var/loc2/log/123456.log'\nsay $path =~ s|/glb/data||gr; \n# \\server/dir/var/loc2/log/123456.log\n</code></pre>\n\n<p>The above can be subject to failure depending on your platform. The below is a safer way to perform this operation:</p>\n\n<pre><code>use strict; \nuse warnings; \n\nuse English qw(-no_match_vars);\nuse feature qw(say);\nuse File::Basename;\n\nsub remove_dirs_from_path { \n   my ( $path, @to_remove ) = @_; \n   my $path_separator = $OSNAME =~ m/MSWin32/ ? '\\\\' : '/';\n\n   my ($filename, $directory, undef) = fileparse($path);\n\n   my @dirs_to_keep;\n   foreach my $dir ( split $path_separator, $directory ) {\n      next if grep { $dir eq $_ } @to_remove;\n\n      push @dirs_to_keep, $dir;\n   }\n\n   return join($path_separator, @dirs_to_keep, $filename);\n}\n\nsay remove_dirs_from_path(\n       '\\server/glb/data/dir/var/loc2/log/123456.log', \n       qw(glb data)\n    );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4870975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6c4e4a22032d1775774c6c6fbb74c4?s=128&d=identicon&r=PG&f=1", "display_name": "JJC", "link": "https://stackoverflow.com/users/4870975/jjc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 30079785, "answer_count": 2, "score": -3, "last_activity_date": 1430923897, "creation_date": 1430922380, "question_id": 30079625, "link": "https://stackoverflow.com/questions/30079625/remove-part-of-absolute-path-string", "title": "Remove part of absolute path string", "body": "<p>In Linux, I'm trying to remove part of a path in a text file. The full path is:</p>\n\n<blockquote>\n  <p>\\server/glb/data/dir/var/loc2/log/123456.log</p>\n</blockquote>\n\n<p>I am trying to simply remove glb/data/ from the string to give me: </p>\n\n<blockquote>\n  <p>\\server/dir/var/loc2/log/123456.log</p>\n</blockquote>\n\n<p>I have been trying to used sed and perl to no avail.\nThis will be inserted into a script running to create the link and insert it into an Oracle table. </p>\n\n<p>There are other links within the test file, so I don't think the cut command will work.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 5, "last_activity_date": 1430922651, "creation_date": 1430922651, "answer_id": 30079736, "question_id": 30079594, "link": "https://stackoverflow.com/questions/30079594/perl-regex-put-all-matches-into-an-array-including-full-match/30079736#30079736", "title": "perl regex put all matches into an array including full match", "body": "<p>Begin and end your regular expression with parentheses and make the whole expression another capture group.</p>\n\n<pre><code>my @matches = $key =~ /($pattern)/i;\n\nprint Dumper( [\"foobar:foo:bar\"=~/$pattern/i] );\n$VAR1 = [\n      'foo',\n      'bar'\n    ];\n\nprint Dumper( [\"foobar:foo:bar\"=~/($pattern)/i] );\n$VAR1 = [\n      'foobar:foo:bar',\n      'foo',\n      'bar'\n    ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430925876, "post_id": 30080107, "comment_id": 48275309, "body": "Alternatively, you can use the <code>@-</code> and <code>@+</code> variables, which give the indices of successful matches and don&#39;t have the performance hit that <code>$&amp;</code> and <code>${^MATCH}</code> do, but I think they&#39;re a bit cumbersome to use. These are also documented in perlvar."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1430924491, "last_edit_date": 1430924491, "creation_date": 1430923553, "answer_id": 30080107, "question_id": 30079594, "link": "https://stackoverflow.com/questions/30079594/perl-regex-put-all-matches-into-an-array-including-full-match/30080107#30080107", "title": "perl regex put all matches into an array including full match", "body": "<p>You can use the <code>$&amp;</code> or <code>${^MATCH}</code> variables for this, although there is a performance penalty (quite significant for <code>$&amp;</code>) in Perl versions before 5.20. From <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow\"><code>perldoc perlvar</code></a>:</p>\n\n<blockquote>\n  <ul>\n  <li>$MATCH</li>\n  <li>$&amp;</li>\n  </ul>\n  \n  <p>The string matched by the last successful pattern match (not counting any matches hidden within a BLOCK or <code>eval()</code> enclosed by the current BLOCK).</p>\n  \n  <p>[...]</p>\n  \n  <ul>\n  <li>${^MATCH}</li>\n  </ul>\n  \n  <p>This is similar to <code>$&amp;</code> (<code>$MATCH</code>) except that it does not incur the performance penalty associated with that variable.</p>\n  \n  <p>[...]</p>\n  \n  <p>In Perl v5.18 and earlier, it is only guaranteed to return a defined value when the pattern was compiled or executed with the <code>/p</code> modifier. In Perl v5.20, the <code>/p</code> modifier does nothing, so <code>${^MATCH}</code> does the same thing as <code>$MATCH</code>.</p>\n  \n  <p>This variable was added in Perl v5.10.0.</p>\n</blockquote>\n\n<h2>Performance issues</h2>\n\n<p>Again from <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow\"><code>perldoc perlvar</code></a>:</p>\n\n<blockquote>\n  <p>Traditionally in Perl, any use of any of the three variables <code>$`</code>, <code>$&amp;</code> or <code>$'</code> (or their <code>use English</code> equivalents) anywhere in the code, caused all subsequent successful pattern matches to make a copy of the matched string, in case the code might subsequently access one of those variables. This imposed a considerable performance penalty across the whole program, so generally the use of these variables has been discouraged.</p>\n  \n  <p>[...]</p>\n  \n  <p>In Perl 5.10.0 the <code>/p</code> match operator flag and the <code>${^PREMATCH}</code>, <code>${^MATCH}</code>, and <code>${^POSTMATCH}</code> variables were introduced, that allowed you to suffer the penalties only on patterns marked with <code>/p</code>.</p>\n  \n  <p>In Perl 5.18.0 onwards, perl started noting the presence of each of the three variables separately, and only copied that part of the string required; so in</p>\n\n<pre><code>$`; $&amp;; \"abcdefgh\" =~ /d/\n</code></pre>\n  \n  <p>perl would only copy the \"abcd\" part of the string. That could make a big difference in something like</p>\n\n<pre><code>$str = 'x' x 1_000_000;\n$&amp;; # whoops\n$str =~ /x/g # one char copied a million times, not a million chars\n</code></pre>\n  \n  <p>In Perl 5.20.0 a new copy-on-write system was enabled by default, which finally fixes all performance issues with these three variables, and makes them safe to use anywhere.</p>\n</blockquote>\n\n<h3>Example:</h3>\n\n<pre><code>perl -wE 'say for \"foo:bar\" =~ /^(\\w+):(\\w+)$/p; say ${^MATCH}'\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>foo\nbar\nfoo:bar\n</code></pre>\n"}], "owner": {"reputation": 809, "user_id": 753836, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tX1xB.png?s=128&g=1", "display_name": "slinkhi", "link": "https://stackoverflow.com/users/753836/slinkhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1749, "favorite_count": 0, "accepted_answer_id": 30080107, "answer_count": 2, "score": 4, "last_activity_date": 1430924491, "creation_date": 1430922311, "question_id": 30079594, "link": "https://stackoverflow.com/questions/30079594/perl-regex-put-all-matches-into-an-array-including-full-match", "title": "perl regex put all matches into an array including full match", "body": "<p>I have the following perl code:</p>\n\n<pre><code>use Data::Dumper;\n$key = 'foobar:foo:bar';\n$pattern = '^[^:]+:([a-z]{3}):(.+)$';\nmy @matches = $key =~ /$pattern/i;\nprint Dumper(@matches);\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>$VAR1 = 'foo';\n$VAR2 = 'bar';\n</code></pre>\n\n<p>Or alternatively I can <code>print $1</code> for first capture group, <code>$2</code> for second. </p>\n\n<p>What I want to know is how do I get the full pattern match.  For example in PHP if I used <code>preg_match</code>, I would get this:</p>\n\n<pre><code>Array\n(\n    [0] =&gt; foobar:foo:bar\n    [1] =&gt; foo\n    [2] =&gt; bar\n)\n</code></pre>\n\n<p>Where the first element (or $0 or \\0) is the full match.  How do I get this in Perl? </p>\n"}, {"tags": ["perl", "psgi"], "comments": [{"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "edited": false, "score": 0, "creation_date": 1430923061, "post_id": 30079207, "comment_id": 48273004, "body": "How about proxy-application, that redirects to the another one by the URL?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430927097, "post_id": 30079207, "comment_id": 48276267, "body": "I use Plack::Builder to mount several Dancer2 apps at different prefixes, e.g. <code>&#47;foo</code> and <code>&#47;bar</code>. Dancer2 has complex routing logic, including wildcard and regex matching, so that is where I handle variable routes. Perhaps you could do something similar in your apps?"}], "answers": [{"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1430921911, "post_id": 30079356, "comment_id": 48272134, "body": "Thanx - and exists some <i>clean</i> (correct) way solve the above?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1430921954, "post_id": 30079356, "comment_id": 48272165, "body": "You can&#39;t cancel <code>\\Q</code> by a value in the quoted variable."}, {"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "edited": false, "score": 0, "creation_date": 1430922863, "post_id": 30079356, "comment_id": 48272859, "body": "Wow, never knew that. Fixed."}], "tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": false, "score": 0, "last_activity_date": 1430942180, "last_edit_date": 1430942180, "creation_date": 1430921714, "answer_id": 30079356, "question_id": 30079207, "link": "https://stackoverflow.com/questions/30079207/mounting-psgi-app-by-regex-different-paths-one-app/30079356#30079356", "title": "Mounting PSGI app by regex - different paths -&gt; one app", "body": "<p>The <a href=\"https://metacpan.org/source/MIYAGAWA/Plack-1.0034/lib/Plack/App/URLMap.pm#26\" rel=\"nofollow\">code</a> actually is</p>\n\n<pre><code>push @{$self-&gt;{_mapping}}, [ $host, $location, qr/^\\Q$location\\E/, $app ];\n</code></pre>\n\n<p>As you can see, no regex supported in <code>$location</code> <s><em>but</em> maybe you can trick it by providing <code>'\\\\Eregex_here\\\\Q'</code> as a location</s> and I don't know the way to trick it.</p>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430942180, "creation_date": 1430921344, "last_edit_date": 1430932609, "question_id": 30079207, "link": "https://stackoverflow.com/questions/30079207/mounting-psgi-app-by-regex-different-paths-one-app", "title": "Mounting PSGI app by regex - different paths -&gt; one app", "body": "<p>Looking for a way, how to run the same <code>PSGI $app</code> for multiple requests what aren't defined by the <code>mount prefix</code>. How to <code>mount</code> in such screnario? E.g. let say i have in my <code>app.psgi</code></p>\n\n<pre><code>use Plack::Builder;\n\nmy $defaultapp = sub { ... };\nmy $someapp = sub { ... };\nmy $otherapp = sub { ... };\n\nbuilder {\n\n    mount '/some' =&gt; $someapp;    # ok\n\n    #and here need something like:\n    mount \"_regex_here\" =&gt; $otherapp;   #???\n\n    mount '/' =&gt; $defaultapp; #OK - last mount is the \"default\"\n}\n</code></pre>\n\n<p>E.g., the requests matching</p>\n\n<ul>\n<li><code>/some/path</code> - want be handled by the <code>$someapp</code> (this is OK)</li>\n<li><code>/[A-Z]\\w+/\\w+\\.(xxx|yyy|zzz)$</code> - want be handled by the <code>$otherapp</code></li>\n<li>any other request want be handled by the <code>$defaultapp</code> (Ok too)</li>\n</ul>\n\n<p>This is probably \"damm-easy\" - but my reading thru of the <a href=\"https://metacpan.org/pod/Plack::Builder\" rel=\"nofollow\">Plack::Builder</a> doesn't give the answer. (Each <code>mount</code> in the maual and examples are <code>strict /path</code> based...)</p>\n\n<p><strong>EDIT</strong>: If this isn't possible by the <code>mount</code> is it possible to solve the above requirement in some <em>clean</em> (read not hackish) way? I don't need change the <code>PATH_INFO</code>, nor the <code>SCRIPT_NAME</code> (as URLMap is doing) - just need run the given <code>$otherapp</code>, for the matched requests.</p>\n\n<p><strong>EDIT2</strong>:</p>\n\n<p>To be more clear. The <code>$someapp</code> and the <code>$otherapp</code> are already existing applications. Especially the <code>$otherapp</code> is an complex application what handles every request on its own way - but the requests what \"belongs\" to the <code>$otherapp</code> is possible to describe by regex.</p>\n\n<p>I can't use the <code>mount /fixed/prefix</code> because the <code>$otherapp</code> creates different urls at runtime, e.g. for example based on the users activity it could create <code>/Abc/xyz.eee</code> and/or <code>/Zzz/uuu.ddd</code> etc.. Therefore i can't prefix the <code>$otherapp</code> as for example:</p>\n\n<pre><code>mount '/other' =&gt; $otherapp\n</code></pre>\n\n<p>Now, want \"import\" this old-fashinoed <code>$otherapp</code> to an new PSGI based server and moreover, the <code>$defaultapp</code> and the <code>$someapp</code> will do something with the data of the <code>$otherapp</code>. It sounds complicated, but in the reality it isn't - only need run the <code>$otherapp</code> based on the requests regex, e.g. something as Apache's <code>SetHandler somehandler *.ext</code>...</p>\n"}, {"tags": ["perl", "csv", "line-breaks"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430919411, "post_id": 30077234, "comment_id": 48270235, "body": "First question is - what are you actually trying to accomplish? You mention you&#39;re looking to process the files after - there&#39;s actually a fairly good chance therefore, that doing a conversion separately isn&#39;t necessary."}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430921036, "post_id": 30077234, "comment_id": 48271475, "body": "@RobEarl&#39;s advice is very hepful"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1430926201, "post_id": 30077234, "comment_id": 48275547, "body": "Perhaps using <code>dos2unix</code> or similar would be preferable?"}], "answers": [{"comments": [{"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 1, "creation_date": 1430916824, "post_id": 30077364, "comment_id": 48267939, "body": "I&#39;m tempted to upvote. No need to reinvent the wheel."}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "edited": false, "score": 0, "creation_date": 1430917532, "post_id": 30077364, "comment_id": 48268562, "body": "Tnx for the advice. I&#39;ve never used dos2unix, I will give it a try. By the way I would like to know how to solve the error in Perl execution."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1430923325, "post_id": 30077364, "comment_id": 48273223, "body": "<code>dos2unix</code> wll go badly wrong if you accidentally run it on a file that is not text."}, {"owner": {"reputation": 11406, "user_id": 282614, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9cd35c711e222946f9503628827a32ce?s=128&d=identicon&r=PG", "display_name": "Dacav", "link": "https://stackoverflow.com/users/282614/dacav"}, "reply_to_user": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "edited": false, "score": 0, "creation_date": 1430924910, "post_id": 30077364, "comment_id": 48274534, "body": "@cjm, fixed. Also I think a perl one-liner would go wrong as well XD"}], "tags": [], "owner": {"reputation": 11406, "user_id": 282614, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9cd35c711e222946f9503628827a32ce?s=128&d=identicon&r=PG", "display_name": "Dacav", "link": "https://stackoverflow.com/users/282614/dacav"}, "is_accepted": true, "score": 5, "last_activity_date": 1430924888, "last_edit_date": 1430924888, "creation_date": 1430916772, "answer_id": 30077364, "question_id": 30077234, "link": "https://stackoverflow.com/questions/30077234/understand-error-in-perl-script/30077364#30077364", "title": "Understand Error in Perl script", "body": "<p>About your error message, since the return value of <code>system</code> is the status of the program, if the program was successful you would get <code>0</code>. This means you will <code>die</code>, since <code>0</code> is interpreted as false.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @files = glob \"*.csv\";\n\nforeach my $i (@files) {\n    system('perl -i.bak -pe \"s/\\R/\\n/g\" ' . $i) and die \"$?\"; # Note the `and`\n}\n</code></pre>\n\n<p>As a further notice: you are running a subprocess for every <code>csv</code> file. This is bad in terms of performances. You may want to consider running a single command from your shell:</p>\n\n<pre><code>perl -i.bak -pe 's/\\R/\\n/g' *.csv\n</code></pre>\n\n<p>I believe however this is the kind of situation in which you should choose another weapon.</p>\n\n<p>Does this help?</p>\n\n<pre><code>#!/bin/sh\nfor i in *.csv; do cp $i $i.bak; dos2unix $i; done\n</code></pre>\n\n<p><em>Edit:</em> as pointed out by @AkHolland in the comment, you could directly call <code>dos2unix</code> on all the files at once, and let it cycle on them. This will not generate backups, but it's also true that <code>dos2unix</code> will hardly go wrong <em>on text files</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 11406, "user_id": 282614, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9cd35c711e222946f9503628827a32ce?s=128&d=identicon&r=PG", "display_name": "Dacav", "link": "https://stackoverflow.com/users/282614/dacav"}, "edited": false, "score": 0, "creation_date": 1430918155, "post_id": 30077470, "comment_id": 48269123, "body": "Interesting <code>autodie</code> thing. I was not aware of this."}], "tags": [], "owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1430917369, "last_edit_date": 1430917369, "creation_date": 1430917034, "answer_id": 30077470, "question_id": 30077234, "link": "https://stackoverflow.com/questions/30077234/understand-error-in-perl-script/30077470#30077470", "title": "Understand Error in Perl script", "body": "<p>I would use @Dacav's solution, but the bug in your program is that <code>system</code> returns the exit code of the executable that was called, and <code>0</code> means success here.</p>\n\n<p>So</p>\n\n<pre><code>system \"something\" or die $?;\n</code></pre>\n\n<p>should really be</p>\n\n<pre><code>system \"something\" == 0  or die $?;\n</code></pre>\n\n<p>Since this is what you want most of the time, Perl has a pragma to automatically check for error codes on <code>system</code> and friends:</p>\n\n<pre><code>use autodie qw(:all);\n</code></pre>\n\n<p>Add this to your program and you'll get exceptions instead of having to check return codes.</p>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "edited": false, "score": 0, "creation_date": 1430918762, "post_id": 30077821, "comment_id": 48269681, "body": "I need to manipulate the CSV data after the conversion, so I used a script instead of the command line. Tnx."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1430919167, "post_id": 30077821, "comment_id": 48270058, "body": "If you do that, you probably don&#39;t need to convert at all."}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "edited": false, "score": 0, "creation_date": 1430919764, "post_id": 30077821, "comment_id": 48270486, "body": "I didn&#39;t find a solution to read the not converted CSV file line by line. It was read as a whole string."}, {"owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 1, "creation_date": 1430919871, "post_id": 30077821, "comment_id": 48270571, "body": "Try change the input record separator: <code>$&#47; = &quot;\\R&quot;;</code>"}, {"owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "reply_to_user": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 0, "creation_date": 1430920034, "post_id": 30077821, "comment_id": 48270713, "body": "@RobEarl tnx. This is a very useful."}], "tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1430917894, "creation_date": 1430917894, "answer_id": 30077821, "question_id": 30077234, "link": "https://stackoverflow.com/questions/30077234/understand-error-in-perl-script/30077821#30077821", "title": "Understand Error in Perl script", "body": "<p>What about one liner perl:</p>\n\n<pre><code>perl -p -i -e 's/\\R/\\n/g' path/to/files/*.csv\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 4731046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0558d7546615d5a57ace2036217037ea?s=128&d=identicon&r=PG&f=1", "display_name": "Giovanni De Ciantis", "link": "https://stackoverflow.com/users/4731046/giovanni-de-ciantis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 30077364, "answer_count": 3, "score": 1, "last_activity_date": 1430924888, "creation_date": 1430916495, "last_edit_date": 1430918611, "question_id": 30077234, "link": "https://stackoverflow.com/questions/30077234/understand-error-in-perl-script", "title": "Understand Error in Perl script", "body": "<p>I'm trying to write a Perl script that convert the line endings of some CSV files stored in a folder. I am a Perl newbie so any help would be appreciated.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @files = glob \"*.csv\";\n\nforeach my $i (@files) {\n\n    system('perl -i.bak -pe \"s/\\R/\\n/g\" '.$i.'') or die \"$?\";\n\n}\n</code></pre>\n\n<p>After converting the first file the script terminate with this error:</p>\n\n<pre><code>0 at script_conversione_linebreaks.pl at line 8.\n</code></pre>\n\n<p>Is it the right way to do the conversion? Or I have to pass all CSV files at once in the system statement?</p>\n"}, {"tags": ["bash", "perl", "shell", "posix", "command-line-arguments"], "comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1430916453, "post_id": 30075846, "comment_id": 48267623, "body": "You do realize that script is not safe, right? If the first argument contains a semicolon you allow arbitrary code execution,"}, {"owner": {"reputation": 327, "user_id": 3710574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e71866e62eb91c03fa17e3ba4ed7768?s=128&d=identicon&r=PG&f=1", "display_name": "vadimbog", "link": "https://stackoverflow.com/users/3710574/vadimbog"}, "reply_to_user": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1430928720, "post_id": 30075846, "comment_id": 48277339, "body": "I use this for personal purpose only. Security is not a concern. I mean that I&#39;m creating those complex commands for myself to refer later on by some short name. Anyway, a very good observation. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 3710574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e71866e62eb91c03fa17e3ba4ed7768?s=128&d=identicon&r=PG&f=1", "display_name": "vadimbog", "link": "https://stackoverflow.com/users/3710574/vadimbog"}, "edited": false, "score": 0, "creation_date": 1430937926, "post_id": 30076056, "comment_id": 48283200, "body": "in this particular case without <code>eval</code> in shell it will give error something like: <b><code>WDT=$1;: not found</code></b>. eval is needed to evaluate the content of MY_VAR first and then the result will get executed in a sub-shell which is exactly what I need in this case as it is parsing the command and expands those parameters specified in the command with input values which happened to be provided as input in the first place."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 327, "user_id": 3710574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e71866e62eb91c03fa17e3ba4ed7768?s=128&d=identicon&r=PG&f=1", "display_name": "vadimbog", "link": "https://stackoverflow.com/users/3710574/vadimbog"}, "edited": false, "score": 0, "creation_date": 1430944822, "post_id": 30076056, "comment_id": 48287470, "body": "@vadimbog: Can&#39;t you use a function instead?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1430913509, "creation_date": 1430913509, "answer_id": 30076056, "question_id": 30075846, "link": "https://stackoverflow.com/questions/30075846/how-to-interpret-a-string-as-command-to-execute-with-parameters-in-perl/30076056#30076056", "title": "How to interpret a string as command to execute with parameters in perl", "body": "<p>No eval needed in Perl (I doubt it's needed in the shell, either).</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $width = shift;\nprintf \"%-$width.${width}s\\n\", $_ for @ARGV;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1430913528, "creation_date": 1430913528, "answer_id": 30076065, "question_id": 30075846, "link": "https://stackoverflow.com/questions/30075846/how-to-interpret-a-string-as-command-to-execute-with-parameters-in-perl/30076065#30076065", "title": "How to interpret a string as command to execute with parameters in perl", "body": "<p>There's two elements to your request. </p>\n\n<p>Firstly - perl uses <code>@ARGV</code> to hold command line parameters. You can access individual elements either with <code>shift</code> or <code>$ARGV[1]</code>. </p>\n\n<p>Secondly - <code>eval</code> works in perl too - but you'll probably find there's a better way of doing what you're trying to do. </p>\n\n<p>So to take your example:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy ( $WDT, @words ) = @ARGV; \n\nforeach my $word ( @words ) {\n   printf ( \"%-${WDT}.${WDT}s\\n\", $word );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 327, "user_id": 3710574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e71866e62eb91c03fa17e3ba4ed7768?s=128&d=identicon&r=PG&f=1", "display_name": "vadimbog", "link": "https://stackoverflow.com/users/3710574/vadimbog"}, "edited": false, "score": 0, "creation_date": 1432197844, "post_id": 30262169, "comment_id": 48827878, "body": "Isn&#39;t it so that &#39;eval()&#39; from perl will expect to interpret the input as being a valid &#39;perl&#39; code, and not shell commands? in this case I need that the content of the command to be a shell valid command, not perl one."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "reply_to_user": {"reputation": 327, "user_id": 3710574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e71866e62eb91c03fa17e3ba4ed7768?s=128&d=identicon&r=PG&f=1", "display_name": "vadimbog", "link": "https://stackoverflow.com/users/3710574/vadimbog"}, "edited": false, "score": 0, "creation_date": 1432201233, "post_id": 30262169, "comment_id": 48830279, "body": "Are you looking for the Perl&#39;s <code>system()</code> function? Or <code>qx&#47;&#47;</code>? The commands are run through shell and it works as if run inside shell script."}], "tags": [], "owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "is_accepted": false, "score": 0, "last_activity_date": 1431700402, "creation_date": 1431700402, "answer_id": 30262169, "question_id": 30075846, "link": "https://stackoverflow.com/questions/30075846/how-to-interpret-a-string-as-command-to-execute-with-parameters-in-perl/30262169#30262169", "title": "How to interpret a string as command to execute with parameters in perl", "body": "<blockquote>\n  <p>How can I do the same using <code>perl</code>.</p>\n</blockquote>\n\n<p>Perl too has the <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow\"><code>eval()</code> function</a>. It can take a string and evaluate it in the context it was called from.</p>\n\n<blockquote>\n  <p>Here the main problems is how do I take perl input parameters and pass them to my command saved in an variable so that those parameters will get evaluated accordingly to the ones from input (in shell eval does this properly).</p>\n</blockquote>\n\n<p>You have to create the variables before the <code>eval</code>'ed Perl code can access. That also would, depending on the implementation, bypass or conflict directly with the <code>use strict</code>.</p>\n\n<p>I'm away of two way to create the variables: using <code>eval</code> or by creating them by manipulating <a href=\"http://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow\">the symbol table</a>. Consider:</p>\n\n<pre><code>my $value_of_a = 10;\nmy $value_of_b = 20;\n\n# alt1 : create vars using `eval`\neval '$a = '.$value_of_a;\neval '$b = '.$value_of_b;\neval q{ print \"$a + $b = \", $a+$b, \"\\n\"; };\n\n# alt2 : create the vars by manipulating the symbol table directly\n$var_name = \"aa\";\n${\"::$var_name\"} = $value_of_a;\n$var_name = \"bb\";\n${\"::$var_name\"} = $value_of_b;\neval q{ print \"$aa + $bb = \", $aa+$bb, \"\\n\"; };\n</code></pre>\n\n<p>To avoid calling the <code>eval</code> every time to interpret the code, one can also try to wrap the code into a nameless function and <code>eval</code> it once to create the subroutine which can be called at any time. Consider:</p>\n\n<pre><code># the input data:\nmy $var_name_a = 'a';\nmy $var_name_b = 'b';\nmy $value_of_a = 10;\nmy $value_of_b = 20;\nmy $cmd = 'print \"$a + $b = \", $a+$b, \"\\n\";';\n\n# the preparations:\neval '$'.$var_name_a.' = '.$value_of_a;\neval '$'.$var_name_b.' = '.$value_of_b;\nmy $sub = eval 'sub { '. $cmd .' }';\n\n# the execution:\n$sub-&gt;();\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 3710574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e71866e62eb91c03fa17e3ba4ed7768?s=128&d=identicon&r=PG&f=1", "display_name": "vadimbog", "link": "https://stackoverflow.com/users/3710574/vadimbog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1227, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1431700402, "creation_date": 1430912965, "last_edit_date": 1430914893, "question_id": 30075846, "link": "https://stackoverflow.com/questions/30075846/how-to-interpret-a-string-as-command-to-execute-with-parameters-in-perl", "title": "How to interpret a string as command to execute with parameters in perl", "body": "<p>Trying to find an equivalent solution for below in perl. Suppose I have the following POSIX shell script:</p>\n\n<pre><code>#!/bin/sh\n\nMY_CMD='WDT=$1; shift ; printf \"%-${WDT}.${WDT}s\\n\" \"$@\"'\neval $MY_CMD\n</code></pre>\n\n<p>An suppose that above is being saved as <code>my_script.sh</code></p>\n\n<p>And if I execute it like: <code>./my_script.sh 4 Hello to thise nice girls</code> then the output will be like:</p>\n\n<pre><code>Hell\nto\nthis\nnice\ngirl\n</code></pre>\n\n<p>How can I do the same using <code>perl</code>. Here the main problems is how do I take perl input parameters and pass them to my command saved in an variable so that those parameters will get evaluated accordingly to the ones from input (in shell eval does this properly).</p>\n\n<p>Should it be that I asked horribly stupid questions, please excuse me as I just started learning <code>perl</code> .o)</p>\n\n<p>EDIT: I think I need to clarify myself more with the question...   I NEED to have the command in a variable. I have simplified the script example here to understand easily the problem. In all solutions so far you are giving me solution how that same task to be done in perl, but please don't focus on the command itself, that is just an example:</p>\n\n<p>Other Examples would be:\n<code>MY_CMD='export AWKNUMF=\"%.2f\"; exe 93 \"$1\" \"$2\" \"$3\" $(shift 3; echo \"$@\") | sort -k1,1 | exe 93 \":\" 1 2'</code></p>\n\n<p>and so on... </p>\n\n<p>The idea that MY_CMD variable would be populated with some command retrieved from a repository which expects some parameters and I want those parameters to be provided in the input to the <code>perl</code>.</p>\n\n<p>SYNOPSYS would be\n<code>./perl_script.pl my_command_name [param1 [param2 ... [paramN]]]</code></p>\n\n<p>The point here is that you should not focus on the content of the <code>MY_CMD</code> variable. It is just a shell command(s) which gets parameters along.</p>\n\n<p>the perl equivalent would be something like:</p>\n\n<p><code>system ($my_cmd, \"@ARGV\");</code>  but this of course does not work as expected.</p>\n"}, {"tags": ["c++", "perl", "awk", "grep", "integer"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430908954, "post_id": 30074396, "comment_id": 48262242, "body": "I take it you want rounding, otherwise I&#39;d suggest <code>sed &#39;s&#47;\\..*&#47;&#47;g&#39;</code>"}, {"owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430909066, "post_id": 30074396, "comment_id": 48262318, "body": "@Sobrique : Thank you very much for your comment! Well rounding should work!"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1430909142, "post_id": 30074396, "comment_id": 48262354, "body": "<b><i>C++</i></b> AND <b><i>Perl</i></b> AND <b><i>awk</i></b>??? Pick a language, please."}, {"owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430909588, "post_id": 30074396, "comment_id": 48262653, "body": "@Sinan&#220;n&#252;r : I just tagged all those language because maybe it could be an easier task in a different ;anguage since they are more or less the same..."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1430916720, "post_id": 30074396, "comment_id": 48267859, "body": "s/more or less the same/based on similar syntax but vastly different in practical use/ :-)."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1430909579, "last_edit_date": 1430909579, "creation_date": 1430909236, "answer_id": 30074536, "question_id": 30074396, "link": "https://stackoverflow.com/questions/30074396/convert-an-ascii-file-column-in-integer/30074536#30074536", "title": "Convert an ascii file column in integer", "body": "<p>How about perl:</p>\n\n<pre><code>perl -lne \"print join ( ' ', map { int $_ + 0.5 } split);\" file.dat\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>1 201\n2 201\n3 203\n</code></pre>\n\n<p>NB: trick is - add <code>0.5</code> because <code>int</code> rounds down, and so this gives the desired result. </p>\n"}, {"comments": [{"owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "edited": false, "score": 0, "creation_date": 1430909800, "post_id": 30074594, "comment_id": 48262785, "body": "Thank you very much for your answer! The trick was to use <code>int($2)</code> instead of <code>(int) $2</code> as you would do in <code>c++</code> . Thank you very much for your help!"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "edited": false, "score": 1, "creation_date": 1430916997, "post_id": 30074594, "comment_id": 48268077, "body": "@Thanos <code>(int)$2</code> in C++ would be a cast. There is <b>no</b> casting in awk. <code>int()</code> is a function. awk is a very stripped down C-like language with a few bells and whistles for text processing. DO not assume that what you can do in C/C++ you can also do in awk or vice-versa. Learn it like it&#39;s a new language from the book Effective Awk Programming, 4th Edition, by Arnold Robbins."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4453924"}, "reply_to_user": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1430917258, "post_id": 30074594, "comment_id": 48268303, "body": "@EdMorton true it is more like the <code>trunc()</code> function in c++."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4453924"}, "is_accepted": true, "score": 2, "last_activity_date": 1430909390, "creation_date": 1430909390, "answer_id": 30074594, "question_id": 30074396, "link": "https://stackoverflow.com/questions/30074396/convert-an-ascii-file-column-in-integer/30074594#30074594", "title": "Convert an ascii file column in integer", "body": "<p>Literally just need to add 0.5</p>\n\n<pre><code>awk '{print $1,int($2+0.5)}' file.dat\n</code></pre>\n"}], "owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 30074594, "answer_count": 2, "score": -2, "last_activity_date": 1430909579, "creation_date": 1430908854, "question_id": 30074396, "link": "https://stackoverflow.com/questions/30074396/convert-an-ascii-file-column-in-integer", "title": "Convert an ascii file column in integer", "body": "<p>I have a file with two columns, separated by space. The first column is integer but the second is double. My file has the following format</p>\n\n<pre><code>1 201.45\n2 201.42\n3 202.92\n\n...\n</code></pre>\n\n<p>What I want to do is print the same file with two integer columns. The new file should like that</p>\n\n<pre><code>1 201\n2 201\n3 203\n\n...\n</code></pre>\n\n<p>I tried to do using awk giving the following command</p>\n\n<pre><code>awk '{print $1 \" \" (int) $2}' file.dat\n</code></pre>\n\n<p>but as expected it's not working.</p>\n\n<p>Any ideas on how to do that?</p>\n"}, {"tags": ["c", "perl", "pack"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430908506, "post_id": 30073879, "comment_id": 48261917, "body": "use <code>fread</code> E.g <code>double v; fread(&amp;v, sizeof(v), 1, stream)</code>;"}, {"owner": {"reputation": 179, "user_id": 3462712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be734467ac93968d93395a8452a3e768?s=128&d=identicon&r=PG&f=1", "display_name": "rvkreddy", "link": "https://stackoverflow.com/users/3462712/rvkreddy"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430924775, "post_id": 30073879, "comment_id": 48274405, "body": "I tried this but its not working."}, {"owner": {"reputation": 179, "user_id": 3462712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be734467ac93968d93395a8452a3e768?s=128&d=identicon&r=PG&f=1", "display_name": "rvkreddy", "link": "https://stackoverflow.com/users/3462712/rvkreddy"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430924843, "post_id": 30073879, "comment_id": 48274469, "body": "Also i tried one other thing,i have written a double in to a binary file and retrieved it using the way u proposed,it works fine. But if i try to apply it for binary file which i have,it fails."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430940826, "post_id": 30073879, "comment_id": 48285000, "body": "Specifically I do not know because of the unknown is doing to how you are, but there may be endian to one of the reasons."}, {"owner": {"reputation": 179, "user_id": 3462712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be734467ac93968d93395a8452a3e768?s=128&d=identicon&r=PG&f=1", "display_name": "rvkreddy", "link": "https://stackoverflow.com/users/3462712/rvkreddy"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430996212, "post_id": 30073879, "comment_id": 48309581, "body": "let me reframe my question, i want to unpack this in c or c++ in little endian way."}, {"owner": {"reputation": 102079, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 1, "creation_date": 1430996592, "post_id": 30073879, "comment_id": 48309850, "body": "Since <code>d</code> is &quot;a double-precision float in native format&quot;, the solution by BLUEPIXY should work."}, {"owner": {"reputation": 179, "user_id": 3462712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be734467ac93968d93395a8452a3e768?s=128&d=identicon&r=PG&f=1", "display_name": "rvkreddy", "link": "https://stackoverflow.com/users/3462712/rvkreddy"}, "edited": false, "score": 0, "creation_date": 1430999324, "post_id": 30073879, "comment_id": 48311753, "body": "unpack( &#39;d&#39;, reverse($float64) ) - gives the correct value in perl. But in c am not sure how to do that."}, {"owner": {"reputation": 179, "user_id": 3462712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be734467ac93968d93395a8452a3e768?s=128&d=identicon&r=PG&f=1", "display_name": "rvkreddy", "link": "https://stackoverflow.com/users/3462712/rvkreddy"}, "edited": false, "score": 0, "creation_date": 1430999469, "post_id": 30073879, "comment_id": 48311840, "body": "Am doing this  unpack( $pack, $byte_order == $LITTLE_ENDIAN ? reverse($chunk) : $chunk );  but if i try BLUEPIXy code,i get the output with out reverse"}, {"owner": {"reputation": 102079, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1431071967, "post_id": 30073879, "comment_id": 48347539, "body": "You are shifting the goal - please update your question with the <b>exact</b> Perl code that you are using and want to convert to C."}], "owner": {"reputation": 179, "user_id": 3462712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be734467ac93968d93395a8452a3e768?s=128&d=identicon&r=PG&f=1", "display_name": "rvkreddy", "link": "https://stackoverflow.com/users/3462712/rvkreddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524773458, "creation_date": 1430907468, "last_edit_date": 1524773458, "question_id": 30073879, "link": "https://stackoverflow.com/questions/30073879/how-do-i-unpackd-stream-in-the-c-or-c-language", "title": "How do I unpack(&quot;d&quot;, stream) in the C or C++ language?", "body": "<p>I have code as shown below in Perl:</p>\n\n<pre><code>unpack( 'd', $float64 );\n</code></pre>\n\n<p>How do I convert this piece of code into the C language? I have success with my template, but I am not sure how to deal with the 'd' template.</p>\n\n<p>If you can both versions - little endian and big endian, it will be helpful.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": true, "score": 0, "last_activity_date": 1430907567, "last_edit_date": 1430907567, "creation_date": 1430907106, "answer_id": 30073735, "question_id": 30073577, "link": "https://stackoverflow.com/questions/30073577/regular-expression-for-decimal-with-fixed-total-number-of-digits/30073735#30073735", "title": "regular expression for decimal with fixed total number of digits", "body": "<pre><code>^(?=[\\d.]{4}$)\\d+\\.\\d+$\n</code></pre>\n\n<p>You can try this for <code>3</code> digits.Can be extended for more.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/bN8dL3/4\" rel=\"nofollow\">https://regex101.com/r/bN8dL3/4</a></p>\n\n<p>or</p>\n\n<pre><code> \\b(?=[\\d.]{4}\\b)\\d+\\.\\d+\\b\n</code></pre>\n\n<p>If you dont want <code>anchors</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1430907228, "creation_date": 1430907228, "answer_id": 30073793, "question_id": 30073577, "link": "https://stackoverflow.com/questions/30073577/regular-expression-for-decimal-with-fixed-total-number-of-digits/30073793#30073793", "title": "regular expression for decimal with fixed total number of digits", "body": "<p>You can match them with adding alternatation:</p>\n\n<pre><code>\\b(?:[0-9]\\.[0-9]{2}|[1-9][0-9]\\.[0-9])\\b\n</code></pre>\n\n<p>Then, you won't need any start/end string/line anchors.</p>\n\n<p>See <a href=\"https://regex101.com/r/eR4sU3/3\" rel=\"nofollow\">demo</a></p>\n"}], "owner": {"reputation": 23, "user_id": 4869853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7c91566b51eecfed586d57db950b75?s=128&d=identicon&r=PG&f=1", "display_name": "dasjotre", "link": "https://stackoverflow.com/users/4869853/dasjotre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 30073735, "answer_count": 2, "score": 2, "last_activity_date": 1430907567, "creation_date": 1430906766, "question_id": 30073577, "link": "https://stackoverflow.com/questions/30073577/regular-expression-for-decimal-with-fixed-total-number-of-digits", "title": "regular expression for decimal with fixed total number of digits", "body": "<p>Is there a way to write regular expression that will match strings like </p>\n\n<pre><code>(0|[1-9][0-9]*)\\.[0-9]+\n</code></pre>\n\n<p>but with a specified number of numeric characters. for example: for 3 numeric characters it should match \"0.12\", \"12.3\" but not match \"1.234\" or \"1.2\". I know I can write it something like </p>\n\n<pre><code>(?&lt;![0-9])(([0-9]{1}\\.[0-9]{2})|([1-9][0-9]{1})\\.[0-9]{1})(?![0-9])\n</code></pre>\n\n<p>but that becomes quite tedious for large number of digits.</p>\n\n<p>(I know I don't need {1} but it better explains what I'm doing) </p>\n"}, {"tags": ["perl", "influxdb"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1430915591, "post_id": 30070129, "comment_id": 48266971, "body": "To solve the immediate problem, you could move the <code>$ix</code> declaration outside of the function so that it is only called once."}, {"owner": {"reputation": 1, "user_id": 4867682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6a5717ba667fd9cf6e5f26374effee?s=128&d=identicon&r=PG&f=1", "display_name": "Myombo", "link": "https://stackoverflow.com/users/4867682/myombo"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1430925869, "post_id": 30070129, "comment_id": 48275302, "body": "I tried that yesterday and i got the same result.."}, {"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "edited": false, "score": 0, "creation_date": 1431101668, "post_id": 30070129, "comment_id": 48366515, "body": "This is a bug indeed and it is fixed now (see my answer below)."}], "answers": [{"comments": [{"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "edited": false, "score": 0, "creation_date": 1430903344, "post_id": 30072219, "comment_id": 48258366, "body": "That is not the case. It looks like a <code>InfluxDB</code> bug, run the example."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "edited": false, "score": 0, "creation_date": 1430903817, "post_id": 30072219, "comment_id": 48258675, "body": "I saw &quot;InfluxDB v0.9.0 is now in the alpha phase&quot; and decided that might well be the case - so tried to offer something more useful :)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1430903148, "creation_date": 1430903148, "answer_id": 30072219, "question_id": 30070129, "link": "https://stackoverflow.com/questions/30070129/influxdb-error-odd-number-of-parameters-to-new-when-run-on-a-loop/30072219#30072219", "title": "InfluxDB error &quot;Odd number of parameters to new()&quot; when run on a loop", "body": "<p>I can't comment on InfluxDB directly, as that looks like a github project that's in alpha. If there's bugs there, then it's one for the maintainer(s) to address. That said: </p>\n\n<p>The 'odd number of parameters' is <em>usually</em> when you're trying to cast an array to a hash. </p>\n\n<p>E.g.:</p>\n\n<pre><code>use strict;\nuse warnings; \nmy @array = qw ( a 1 b 2 c 3 4 ):\nmy %hash = @array;\n</code></pre>\n\n<p>\"Odd number of elements in hash assignment\"</p>\n\n<p>The reason this applies to constructors - such as <code>new()</code> is because when you call:</p>\n\n<pre><code>use SomeModule;\nmy $thing = SomeModule -&gt; new(); \n</code></pre>\n\n<p>Is that form of call implicitly passes the class. E.g.:</p>\n\n<pre><code>use strict;\nuse warnings;\n\npackage SomeModule;\n\nsub new {\n  print \"New got args: @_\\n\";\n}\n\npackage main; \nmy $thing = SomeModule -&gt; new();\n</code></pre>\n\n<p>So when you pass in a hash to use in the constructor, you first need to 'pop off' that class name. It's good form to specify it in <code>bless</code>. </p>\n\n<p>Something like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\n\npackage SomeModule;\n\nsub new {\n  print \"New got args: @_\\n\";\n  my ( $class, %options ) = @_; \n  my $self = \\%options;\n  bless ( $self, $class );\n  return $self;\n}\n\npackage main; \nmy $thing = SomeModule -&gt; new(host =&gt; '192.168.0.93', port =&gt; 8086, username =&gt; 'root', password =&gt; 'root', database =&gt; 'test');\nprint Dumper $thing;\n</code></pre>\n\n<p>This is much the same as how when you invoke a method:</p>\n\n<pre><code>$thing -&gt; some_method($other_argument); \n</code></pre>\n\n<p>The first argument is a reference to the object, and it's fundamentally similar to:</p>\n\n<pre><code>SomeModule::some_method($thing, $other_argument); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430905177, "post_id": 30072494, "comment_id": 48259679, "body": "Answering the problem and logging a bug report? Now that&#39;s worth a +1 :)"}, {"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "reply_to_user": {"reputation": 1, "user_id": 4867682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6a5717ba667fd9cf6e5f26374effee?s=128&d=identicon&r=PG&f=1", "display_name": "Myombo", "link": "https://stackoverflow.com/users/4867682/myombo"}, "edited": false, "score": 0, "creation_date": 1431418102, "post_id": 30072494, "comment_id": 48475547, "body": "@Johns, you can also mark this answer as a correct one."}], "tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": false, "score": 3, "last_activity_date": 1431101643, "last_edit_date": 1431101643, "creation_date": 1430903835, "answer_id": 30072494, "question_id": 30070129, "link": "https://stackoverflow.com/questions/30070129/influxdb-error-odd-number-of-parameters-to-new-when-run-on-a-loop/30072494#30072494", "title": "InfluxDB error &quot;Odd number of parameters to new()&quot; when run on a loop", "body": "<p>Looks like a bug for me. You can try to fix it or wait for the <a href=\"https://github.com/hirose31/p5-InfluxDB/issues/5\" rel=\"nofollow\">author's response</a>.</p>\n\n<p><em>UPDATE:</em> This is a bug indeed and it is <a href=\"https://github.com/hirose31/p5-InfluxDB/issues/5#issuecomment-100128889\" rel=\"nofollow\">fixed</a> now. Update your <code>InfluxDB</code> module.</p>\n"}], "owner": {"reputation": 1, "user_id": 4867682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe6a5717ba667fd9cf6e5f26374effee?s=128&d=identicon&r=PG&f=1", "display_name": "Myombo", "link": "https://stackoverflow.com/users/4867682/myombo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525185215, "creation_date": 1430897068, "last_edit_date": 1525185215, "question_id": 30070129, "link": "https://stackoverflow.com/questions/30070129/influxdb-error-odd-number-of-parameters-to-new-when-run-on-a-loop", "title": "InfluxDB error &quot;Odd number of parameters to new()&quot; when run on a loop", "body": "<p>I would like to know how to avoid the \"Odd number of parameters to new()\" error on the following code(simplified). The code works only for the first iteration.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse InfluxDB;\n\nfor (;;) {\n    load1();\n    sleep 5;\n}\n\nsub load1 {\n    my $ix = InfluxDB-&gt;new(host =&gt; '192.168.0.93', port =&gt; 8086, username =&gt; 'root', password =&gt; 'root', database =&gt; 'test');\n    ## do some stuffs ...\n}\n</code></pre>\n\n<p>I have tried to research on this but i cant find the way to use shift or bless functions to solve this.</p>\n\n<p>I have edited the InfluxDB module to print the passed parameters.This is what i have discovered;</p>\n\n<p>For the first iteration:</p>\n\n<pre><code>    Mouse::Meta::Class::__ANON__::2=HASH(0x2359398)\n    host\n    192.168.0.93\n    port\n    8086\n    username\n    root\n    password\n    root\n    database\n    test_database\n</code></pre>\n\n<p>For the second iteration:</p>\n\n<pre><code>    Mouse::Meta::Class::__ANON__::6=HASH(0x2359398)\n    192.168.0.93\n    port\n    8086\n    username\n    root\n    password\n    root\n    database\n    test_database\n</code></pre>\n\n<p>So as we can see, for the second iteration there is no \"host\". I once saw this behaviour when calling the function new with the :: (ex. InfluxDB::new()) instead of ->(InfluxDB->new).</p>\n"}, {"tags": ["python", "perl", "unix", "solaris-10"], "answers": [{"comments": [{"owner": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1430900463, "post_id": 30070323, "comment_id": 48256447, "body": "I am more into R programming and little in shell...Perl is a whole new world for me. Could you please post a little code and which Perl package we need to use ? if you feel it is big..you can send me at purnendumaity@rediffmail.com. I really need this."}, {"owner": {"reputation": 485, "user_id": 4379569, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2cd1afc7f1977ac402af0d97e4665bbe?s=128&d=identicon&r=PG", "display_name": "Sasszem", "link": "https://stackoverflow.com/users/4379569/sasszem"}, "reply_to_user": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1430940548, "post_id": 30070323, "comment_id": 48284831, "body": "@purnendumaity You wrote &quot;python&quot; when you asked the question. I can see, you removed it. I don&#39;t know, how can you solve in perl. It&#39;s the logic of the problem, which can implemented for the most of languages."}, {"owner": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1430973048, "post_id": 30070323, "comment_id": 48296468, "body": "I haven&#39;t removed Python...as per the mandate from above Perl is first priority but Python solution will also do....I can see Python tag is still there in my question. actually in that specific system already many things are in Perl..hope u understand"}], "tags": [], "owner": {"reputation": 485, "user_id": 4379569, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2cd1afc7f1977ac402af0d97e4665bbe?s=128&d=identicon&r=PG", "display_name": "Sasszem", "link": "https://stackoverflow.com/users/4379569/sasszem"}, "is_accepted": false, "score": 0, "last_activity_date": 1430897684, "creation_date": 1430897684, "answer_id": 30070323, "question_id": 30069620, "link": "https://stackoverflow.com/questions/30069620/count-unique-values-in-each-column-of-pipe-delimited-text-file-using-perl/30070323#30070323", "title": "Count unique values in each column of pipe delimited text file using Perl", "body": "<p>I think, first you'll need to create a list of dictionaries from the files, like:\n<strong>{'exchnage':'london','ticker':'ibm','sedol':'ibm_1','cusip':'ib'}</strong>. Than you need a for-each satement to add all the values to a list, but only, when the value aren't None, empty &amp; value isn't already in the list. Then you have got all unique values in the list, you juts need to count them.<br>\n<strong>You'll need to do this with all the column in the file.</strong><br>\nAfter that, you'll need to write this in a file.</p>\n"}, {"comments": [{"owner": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1430909118, "post_id": 30074063, "comment_id": 48262342, "body": "this  <i>DATA</i> are you taking assumption as a single file ? I have two file.. then are you suggesting to merge them ? one file might have more column than another file then will merge work? ...I only have the prior knowledge of which column to check/count"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1430909415, "post_id": 30074063, "comment_id": 48262527, "body": "<code>DATA</code> is a way of inlining data in perl, which makes illustration and posting code easier. You can quite easily <code>open ( my $input, &quot;&lt;&quot;, $filename ) or die $!</code>; and then <code>while ( &lt;$input&gt; ) { </code> instead. this will work for multiple files being processed, because the collation happens at the end. (Just remember to discard the header line from each file)"}, {"owner": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1431070553, "post_id": 30074063, "comment_id": 48346783, "body": "@Sobrique..as per new scenario I have to work by column position rather than name"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1430907928, "creation_date": 1430907928, "answer_id": 30074063, "question_id": 30069620, "link": "https://stackoverflow.com/questions/30069620/count-unique-values-in-each-column-of-pipe-delimited-text-file-using-perl/30074063#30074063", "title": "Count unique values in each column of pipe delimited text file using Perl", "body": "<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %unique_ticker_count;\nmy %unique_sedol_count;\nmy %unique_cusip_count;\n\nmy @headers = split( '|', &lt;DATA&gt; );\nprint @headers;\n\nwhile ( my $line = &lt;DATA&gt; ) {\n    my ( $exchange, $ticker, $sedol, $cusip ) = split( /\\|/, $line );\n    if ( $ticker =~ m/\\w/ ) { $unique_ticker_count{$exchange}{$ticker}++; }\n    if ( $sedol =~ m/\\w/ )  { $unique_sedol_count{$exchange}{$sedol}++; }\n    if ( $cusip =~ m/\\w/ )  { $unique_cusip_count{$exchange}{$cusip}++; }\n}\n\nprint Dumper \\%unique_ticker_count;\n\nforeach my $exchange ( keys %unique_ticker_count ) {\n    print join( \"|\",\n        $exchange,\n        scalar keys %{ $unique_ticker_count{$exchange} } || 0,\n        scalar keys %{ $unique_sedol_count{$exchange} }  || 0,\n        scalar keys %{ $unique_cusip_count{$exchange} }  || 0,\n        ),\n        \"\\n\";\n}\n\n__DATA__\nexchnage|ticker|sedol|cusip  \nlondon  |ibm   |ibm_1|ib  \nlondon  |hcl   |     |hcl_02  \nnewyork |hp    |hp_01|hpm  \nnewyork |lkp   |lk_2 |\nlondon  |goo   |goo_1|gm  \nlondon  |hcl   |     |hcl_02  \nnewyork |hp    |hp_01|hpm  \nnewyork |tyl   |     |ty_2\n</code></pre>\n\n<p>Will print:</p>\n\n<pre><code>newyork |3|2|2\nlondon  |3|2|3\n</code></pre>\n\n<p>I will leave it to you to handle the file opening and processing - this is merely illustrative of the approach you could take. </p>\n"}, {"comments": [{"owner": {"reputation": 770, "user_id": 1620034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb4c7e874cc8d4e76b2a2512462da4a?s=128&d=identicon&r=PG", "display_name": "Dieselist", "link": "https://stackoverflow.com/users/1620034/dieselist"}, "reply_to_user": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1430988438, "post_id": 30082025, "comment_id": 48304122, "body": "@purnendumaity, be aware that it matches files structure from your example, and operate column numbers, not names. so if you have different number of columns in files, or columns order, it may not work."}, {"owner": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1431067361, "post_id": 30082025, "comment_id": 48345085, "body": "@Dieselist..u r right. now that &quot;exchange&quot; column is in column 30 so it should I modified as below:                                                                                                         # prepare empty structure for excahnge, if not added yet             if not line_parsed[0] in results:                 results[line_parsed[0]] = [set() for i in xrange(len(line_parsed[30:]))]             # add uniq items to exchange             for column_num, column in enumerate(line_parsed[30:]):"}, {"owner": {"reputation": 770, "user_id": 1620034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb4c7e874cc8d4e76b2a2512462da4a?s=128&d=identicon&r=PG", "display_name": "Dieselist", "link": "https://stackoverflow.com/users/1620034/dieselist"}, "reply_to_user": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1431093941, "post_id": 30082025, "comment_id": 48361239, "body": "@purnendumaity, could you provide new format? will it be persistance (can the column numbers be hardcoded)? shall we operate by column no or by name?"}, {"owner": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1431109262, "post_id": 30082025, "comment_id": 48370794, "body": "u are very helpful...we will operate by column no, what about if we use pandas and then straight SQL root...possible but then additional package installation etc things involved...i don&#39;t think they will agree"}, {"owner": {"reputation": 770, "user_id": 1620034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb4c7e874cc8d4e76b2a2512462da4a?s=128&d=identicon&r=PG", "display_name": "Dieselist", "link": "https://stackoverflow.com/users/1620034/dieselist"}, "reply_to_user": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "edited": false, "score": 0, "creation_date": 1431215584, "post_id": 30082025, "comment_id": 48400824, "body": "@purnendumaity, I&#39;ve updated my answer with new code, that arranged to satisfy your new requirements. For now it automatically figures out column order in files."}], "tags": [], "owner": {"reputation": 770, "user_id": 1620034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb4c7e874cc8d4e76b2a2512462da4a?s=128&d=identicon&r=PG", "display_name": "Dieselist", "link": "https://stackoverflow.com/users/1620034/dieselist"}, "is_accepted": true, "score": 1, "last_activity_date": 1431215426, "last_edit_date": 1431215426, "creation_date": 1430928465, "answer_id": 30082025, "question_id": 30069620, "link": "https://stackoverflow.com/questions/30069620/count-unique-values-in-each-column-of-pipe-delimited-text-file-using-perl/30082025#30082025", "title": "Count unique values in each column of pipe delimited text file using Perl", "body": "<p>not the most elegant, but the fastest I crafted for your new requirements:</p>\n\n<pre><code>import glob\nimport os\nimport sys\n\npath = \"/tmp\"\nfile_mask = \"file*.txt\"\nresults = {}\n\nfor file in glob.glob(os.path.join(path, file_mask)):\n    column_names = {}\n    exchange_col = None\n    with open(file, \"r\") as f:\n        for line_num, line in enumerate(f.xreadlines()):\n            # process header\n            if not line_num:\n                line_parsed = line.strip().split(\"|\")\n                for column_num, column in enumerate(line_parsed):\n                    if column.strip() == \"exchnage\":\n                        exchange_col = column_num\n                    else:\n                        column_names[column_num] = column.strip()\n                if exchange_col is None:\n                    print \"Can't find exchnage field\"\n                    sys.exit(1)\n                continue\n            line_parsed = line.strip().split(\"|\")\n            if len(line_parsed) != len(column_names) + 1:\n                continue\n            # prepare empty structure for excahnge, if not added yet\n            if not line_parsed[exchange_col].strip() in results:\n                results[line_parsed[exchange_col].strip()] = {column_name:set() for column_name in column_names.values()}\n            # add uniq items to exchange\n            for column_num, column in enumerate(line_parsed):\n                column_val = column.strip()\n                # add only non empty values\n                if column_val and column_num != exchange_col:  \n                    results[line_parsed[exchange_col].strip()][column_names[column_num]].add(column_val)\n\ncolumn_names = column_names.values()\nprint \"exchnage|\" + \"|\".join(\"%8s\" %c for c in column_names)\nfor exchange, values in results.iteritems():\n    print \"%8s|\" % exchange + \"|\".join(\"%8s\" % str(len(values[column])) for column in column_names)\n</code></pre>\n\n<p>program output (as input your new files with different columns order were used):</p>\n\n<pre><code>$ python parser.py\nexchnage|  ticker|   sedol|   cusip\n newyork|       2|       2|       3\n  london|       3|       2|       3\n</code></pre>\n"}], "owner": {"reputation": 988, "user_id": 1937437, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7643373129ddb04b50d23bb7cbb73507?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/1937437/pmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 30082025, "answer_count": 3, "score": 0, "last_activity_date": 1431215426, "creation_date": 1430895399, "last_edit_date": 1431070442, "question_id": 30069620, "link": "https://stackoverflow.com/questions/30069620/count-unique-values-in-each-column-of-pipe-delimited-text-file-using-perl", "title": "Count unique values in each column of pipe delimited text file using Perl", "body": "<p>I have two sample pipe delimited file in my Solaris server home directory as below:</p>\n\n<p>file1.txt:</p>\n\n<pre><code>ticker|sedol|cusip|exchnage  \nibm   |ibm_1|ib   |london    \nhcl   |     |hcl_02|london    \nhp    |hp_01|hpm  |newyork\n      |lkp   |lk_2 |newyork\n</code></pre>\n\n<p>file2.txt:</p>\n\n<pre><code>exchnage|ticker|sedol|cusip  \nlondon  |goo   |goo_1|gm  \nlondon  |hcl   |     |hcl_02  \nnewyork |hp    |hp_01|hpm  \nnewyork |tyl   |     |ty_2\n</code></pre>\n\n<p>I need a result file where we will group the unique count of <em>ticker, sedol, cusip</em> by exchange:</p>\n\n<p>expected result file as below:</p>\n\n<pre><code>exchnage|ticker|sedol|cusip  \nlondon  |3     |2    |3  \nnewyork |3     |2    |2\n</code></pre>\n\n<p>I know by using SQL it is easy but unfortunately database can't be involved. Each file size might go up to 300-400 MB. We have do it using Perl preferably or if at all difficult then Python. Primary environment is Solaris, but we can try it in Unix server as well.                                                                                                                                                        Now added need is that \"exchange\" Column position can by anywhere in both the file.</p>\n"}, {"tags": ["perl", "comparison", "mac-address"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4836333, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-o-kuVhOC4qA/AAAAAAAAAAI/AAAAAAAAAF0/mJkRfmD0zCk/photo.jpg?sz=128", "display_name": "sam", "link": "https://stackoverflow.com/users/4836333/sam"}, "edited": false, "score": 0, "creation_date": 1430894174, "post_id": 30068796, "comment_id": 48252586, "body": "Are there any perl libraries? And can u explain the line &quot;y|[a-z]-|[A-Z]:| for $mac1, $mac2;&quot; once."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 1, "last_activity_date": 1430892460, "creation_date": 1430892460, "answer_id": 30068796, "question_id": 30068582, "link": "https://stackoverflow.com/questions/30068582/how-to-compare-mac-addresses-in-perl/30068796#30068796", "title": "How to compare mac-addresses in Perl", "body": "<p>How about normalization, make them both upper case, and convert <code>-</code> to <code>:</code>,</p>\n\n<pre><code>my $mac1 = \"12-23-34-RT-43-23\";\nmy $mac2 = \"12:23:34:rt:43:23\";\n\ny|[a-z]-|[A-Z]:| for $mac1, $mac2;\n\nprint \"equal\\n\" if $mac1 eq $mac2;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4836333, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-o-kuVhOC4qA/AAAAAAAAAAI/AAAAAAAAAF0/mJkRfmD0zCk/photo.jpg?sz=128", "display_name": "sam", "link": "https://stackoverflow.com/users/4836333/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 30068796, "answer_count": 1, "score": -3, "last_activity_date": 1430892460, "creation_date": 1430891497, "question_id": 30068582, "link": "https://stackoverflow.com/questions/30068582/how-to-compare-mac-addresses-in-perl", "title": "How to compare mac-addresses in Perl", "body": "<p>I had two mac addresses 12-23-34-RT-43-23 and 12:23:34:rt:43:23. How to compare these two mac address in Perl. Are there any libraries to compare?</p>\n"}, {"tags": ["linux", "bash", "perl", "bioinformatics", "blast"], "comments": [{"owner": {"reputation": 687, "user_id": 4619649, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PkhUX.gif?s=128&g=1", "display_name": "Marco Bernardini", "link": "https://stackoverflow.com/users/4619649/marco-bernardini"}, "edited": false, "score": 0, "creation_date": 1430888959, "post_id": 30067878, "comment_id": 48250259, "body": "I see you have slashed single quotes <code>\\&#39;</code> in your code. Did you try to remove the slashes, leaving just the single quotes?"}, {"owner": {"reputation": 31, "user_id": 4869039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bc672a71a4829f515dd989b643dc0e?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/4869039/blaze"}, "reply_to_user": {"reputation": 687, "user_id": 4619649, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PkhUX.gif?s=128&g=1", "display_name": "Marco Bernardini", "link": "https://stackoverflow.com/users/4619649/marco-bernardini"}, "edited": false, "score": 0, "creation_date": 1430889316, "post_id": 30067878, "comment_id": 48250395, "body": "Yes, I tried it without escape characters in the modified script as well. Same error, the script ends at the &quot;7&quot; since it sees a space."}, {"owner": {"reputation": 687, "user_id": 4619649, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PkhUX.gif?s=128&g=1", "display_name": "Marco Bernardini", "link": "https://stackoverflow.com/users/4619649/marco-bernardini"}, "edited": false, "score": 1, "creation_date": 1430889869, "post_id": 30067878, "comment_id": 48250596, "body": "Another debug tip: instead of directly use the <code>system</code> call, create a string with all the stuff and print it, so you can see what would be passed to system. I&#39;ve seen tblastn is pretty complex: here <a href=\"http://www.ncbi.nlm.nih.gov/books/NBK279682/\" rel=\"nofollow noreferrer\">ncbi.nlm.nih.gov/books/NBK279682</a> double quotes are used for <code>outfmt</code>."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1430892448, "post_id": 30067878, "comment_id": 48251719, "body": "You could use an alternate quote delimiter for the perl side of things, like <code>system( qq[cat $TMP&#47;prot$$...] )</code> to save you having to escape the inner <code>&quot;</code>s."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1430902465, "last_edit_date": 1430902465, "creation_date": 1430902162, "answer_id": 30071833, "question_id": 30067878, "link": "https://stackoverflow.com/questions/30067878/nested-quotes-in-perl-system/30071833#30071833", "title": "Nested Quotes in Perl System()", "body": "<p>The problem here is almost certainly quote interpolation. Each time you 'shell out' you unwrap another layer of quotes. What it does inside the quotes is a question of whether you're doing a double quote <code>\"</code> - it interpolates, or a single quote <code>'</code> and it then treats it as a literal, before passing to the <em>next</em> shell. </p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow\"><code>perlop</code></a> for how perl does quoting. \nI would suggest you try assembling a command like this:</p>\n\n<pre><code>my $parallel = q{parallel --block 50k --recstart '&gt;' --pipe};\nmy $outfmt = q{'7 sseqid sstart send sframe bitscore qseqid'};\n\nprint $parallel,\"\\n\";\nprint $outfmt,\"\\n\";\n\nmy $command = \"cat $TMP/prot$$.fa | $parallel \\\\ tblastn -db $BLASTDB -query - -word_size 6 -outfmt $outfmt -max_target_seqs 5 -seg yes -lcase_masking &gt; $TMP/blast$$\";\n\nprint $command; \nsystem ( $command );\n</code></pre>\n\n<p>(obviously checking that your 'command' looks right before passing it to system)</p>\n\n<p>But can I suggest a different approach? How about instead of embedding <code>cat</code> and <code>parallel</code> you can do this natively in <code>perl</code>. </p>\n\n<p>I'm afaid I'm not entirely familiar with the command you're running, but it'd be <em>something</em> like:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen( my $input, \"&lt;\", \"$TMP/prot$$.fa\" ) or die $!;\n\nmy $fork_manager = Parallel::ForkManager-&gt;new($THREADS);\n\nwhile ( my $line = &lt;$input&gt; ) {\n    $fork_manager-&gt;start and next;\n    chomp $line;\n    system(\n        \"tblastn -db $BLASTDB -query $line \\\\\n                 -word_size 6 -max_target_seqs 5 -seg yes  -lcase_masking \\\\\n                 -outfmt \\\"7 sseqid sstart send sframe bitscore qseqid\\\"\\\\\n                 &gt; $TMP/blast$$\"\n    ) &amp;&amp; die \"Can't run tblastn\\n\";\n    $fork_manager-&gt;finish;\n}\nclose ( $input );\n</code></pre>\n\n<p>If output coalescing is desirable, I'd probably switch to using threading:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse IPC::Open2;\nuse threads;\nuse Thread::Queue; \n\nmy $num_threads = 8; \n\nmy $work_q = Thread::Queue -&gt; new(); \nmy $results_q = Thread::Queue -&gt; new(); \n\nsub worker {\n    open2 ( my $blast_out, my $blast_in, \"tblastn -db $BLASTDB -query - -word_size 6 -outfmt '7 sseqid sstart send sframe bitscore qseqid' -max_target_seqs 5 -seg yes -lcase_masking\");\n    while ( my $query = $work_q -&gt; dequeue ) {\n        print {$blast_in} $query;\n        $results_q -&gt; enqueue ( &lt;$blast_out&gt; ); #one line - you'll need something different for multi-line results.\n    }\n    close ( $blast_out );\n    close ( $blast_in ); \n}\n\nsub collate_results {\n    open ( my $output, \"$TMP/results.$$\" ) or die $!; \n    while ( my $result = $results_q -&gt; dequeue ) {\n        print {$output} $result,\"\\n\"; \n    }\n    close ( $output ); \n}\n\nmy @workers; \nfor (1..$num_threads) {\n    push ( @workers, threads -&gt; create ( \\&amp;worker ) ); \n}\n\nmy $collator = threads -&gt; create ( \\&amp;collate_results ); \n\nopen( my $input, \"&lt;\", \"$TMP/prot$$.fa\" ) or die $!;\nwhile ( my $line = &lt;$input&gt; ) {\n    chomp $line;\n    $work_q -&gt; enqueue ( $line ); \n}\nclose ( $input );\n$work_q -&gt; end;\n\nforeach my $thr ( @workers ) { \n    $thr -&gt; join(); \n}\n$results_q -&gt; end;\n\n$collator -&gt; join; \n</code></pre>\n\n<p>Now I appreciate that both these may look a little more convoluted and complicated. But they're more examples of how to extent perl into doing parallel, because by doing so you have a lot more scope and flexibility than you would by running perl, but 'shelling out' to do things. </p>\n"}, {"tags": [], "owner": {"reputation": 27241, "user_id": 363028, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/cP1F2.jpg?s=128&g=1", "display_name": "Ole Tange", "link": "https://stackoverflow.com/users/363028/ole-tange"}, "is_accepted": false, "score": 1, "last_activity_date": 1430907217, "creation_date": 1430907217, "answer_id": 30073790, "question_id": 30067878, "link": "https://stackoverflow.com/questions/30067878/nested-quotes-in-perl-system/30073790#30073790", "title": "Nested Quotes in Perl System()", "body": "<p>Quoting is a bitch. Quoting twice is a bitch\u00b2.</p>\n\n<p>First check that what you think is being run is actually being run. Here a <code>print STDERR</code> can do wonders.</p>\n\n<p>In your case I think this will solve it:</p>\n\n<pre><code>my $TMP = $ENV{'TMP'};\nmy $BLASTDB = $ENV{'BLASTDB'};\nmy $cmd = qq{cat $TMP/prot$$.fa | parallel --block 50k --recstart '&gt;' --pipe tblastn -db $BLASTDB -query - -word_size 6 -outfmt \\\\''7 sseqid sstart send sframe bitscore qseqid'\\\\' -max_target_seqs 5 -seg yes -lcase_masking &gt; $TMP/blast$$};\nprint STDERR $cmd,\"\\n\"; # Remove this when it works.\nsystem($cmd) &amp;&amp; die \"Can't run tblastn\\n\";\n</code></pre>\n\n<p>If you are going to read <code>$TMP/blast$$</code> back in and delete it, you might do this instead:</p>\n\n<pre><code>my $TMP = $ENV{'TMP'};\nmy $BLASTDB = $ENV{'BLASTDB'};\nopen(my $fh, \"-|\", qq{cat $TMP/prot$$.fa | parallel --block 50k --recstart '&gt;' --pipe tblastn -db $BLASTDB -query - -word_size 6 -outfmt \\\\''7 sseqid sstart send sframe bitscore qseqid'\\\\' -max_target_seqs 5 -seg yes -lcase_masking}) || die \"Can't run tblastn\\n\";\nwhile(&lt;$fh&gt;) { ... }\nclose $fh;\n</code></pre>\n\n<p>That will avoid creating a temporary file and if <code>$TMP</code> can be written to by an attacker, this also plugs a security hole. As an added bonus you will be getting data earlier since you will not have to wait until every job is complete.</p>\n"}], "owner": {"reputation": 31, "user_id": 4869039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bc672a71a4829f515dd989b643dc0e?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/4869039/blaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1430907217, "creation_date": 1430888380, "question_id": 30067878, "link": "https://stackoverflow.com/questions/30067878/nested-quotes-in-perl-system", "title": "Nested Quotes in Perl System()", "body": "<p>I'm trying to modify a perl script. Here is the part I am trying to modify:</p>\n\n<p>Original:</p>\n\n<pre><code>        system (\"tblastn -db $BLASTDB -query $TMP/prot$$.fa \\\\\n             -word_size 6 -max_target_seqs 5 -seg yes -num_threads $THREADS -lcase_masking \\\\\n             -outfmt \\\"7 sseqid sstart send sframe bitscore qseqid\\\"\\\\\n             &gt; $TMP/blast$$\") &amp;&amp; die \"Can't run tblastn\\n\";\n</code></pre>\n\n<p>I am trying to replace the system (\"tblastn.....\") with the following:</p>\n\n<pre><code>system (\"cat $TMP/prot$$.fa | parallel --block 50k --recstart '&gt;' --pipe \\\\ tblastn -db $BLASTDB -query - -word_size 6 -outfmt \\'7 sseqid sstart send sframe bitscore qseqid\\' -max_target_seqs 5 -seg yes -lcase_masking &gt; $TMP/blast$$\") &amp;&amp; die \"Can't run tblastn\\n\";\n</code></pre>\n\n<p>This replaces the normal tblastx program with GNU parallel, which pipes the tblastx command. Running the above command in bash (replacing the temp inputs with actual files) works perfectly, but when the perl script tries executing it, the error log (for tblastx) says it terminated too soon, after sseqids. The same error happens if you run the same command without the escape characters in bash.</p>\n\n<p>Because of this I'm assuming the error is due to the single quote around the \"7 ssequids sstart...\" is not being parsed properly. I'm not sure how to do nested quotes properly in perl. I thought I was doing it right since it works via bash but not via the perl script. I looked at alot of perl documentation and everything says that the escape character \\ should work with quotes or double quotes., yet for my instance it doesn't work.</p>\n\n<p>Can someone provide input on why the quotes are not being processed?</p>\n"}, {"tags": ["perl", "gzip"], "answers": [{"tags": [], "owner": {"reputation": 862, "user_id": 1155333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dcec13071dd7747b48798a80a6fa59b?s=128&d=identicon&r=PG", "display_name": "Cornel Ghiban", "link": "https://stackoverflow.com/users/1155333/cornel-ghiban"}, "is_accepted": true, "score": 3, "last_activity_date": 1430870901, "last_edit_date": 1592644375, "creation_date": 1430870901, "answer_id": 30065297, "question_id": 30064964, "link": "https://stackoverflow.com/questions/30064964/perl-to-parse-text-file-which-may-or-may-not-be-gzipped/30065297#30065297", "title": "Perl to parse text file which may or may not be gzipped", "body": "<pre><code>open $FILE, &quot;zcat -f $file|&quot; or die $!;\n</code></pre>\n<p><strong>man zcat</strong></p>\n<blockquote>\n<p>-f --force</p>\n<p>If the input data is not in a format recognized by gzip, and  if  the  option --stdout  is also given, copy the input data without change to the standard output: let zcat behave as cat.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "is_accepted": false, "score": 6, "last_activity_date": 1430872223, "last_edit_date": 1430872223, "creation_date": 1430871920, "answer_id": 30065449, "question_id": 30064964, "link": "https://stackoverflow.com/questions/30064964/perl-to-parse-text-file-which-may-or-may-not-be-gzipped/30065449#30065449", "title": "Perl to parse text file which may or may not be gzipped", "body": "<p>The core module <a href=\"http://perldoc.perl.org/IO/Uncompress/Gunzip.html\">IO::Uncompress::Gunzip</a> returns a file handle, if the file is uncompressed/unknown defaults to passing a file handle to the original file, this worked for me;</p>\n\n<pre><code>use IO::Uncompress::Gunzip qw($GunzipError);\n\n# Random file, plain text, and gzipped\nmy $file=('file.in', 'file.in.gz')[rand 2];\nprint \"Picked $file\\n\";\n\n# Get file Handle\nmy $FILE = IO::Uncompress::Gunzip-&gt;new( $file )\n            or die \"Problem found with $file: $GunzipError\";\n\nwhile(&lt;$FILE&gt;) { print; }\n</code></pre>\n"}], "owner": {"reputation": 2570, "user_id": 251947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/80f18fe71d6fc0940ab8b7a036dd056e?s=128&d=identicon&r=PG", "display_name": "Chris Koknat", "link": "https://stackoverflow.com/users/251947/chris-koknat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "accepted_answer_id": 30065297, "answer_count": 2, "score": 1, "last_activity_date": 1430872223, "creation_date": 1430868822, "question_id": 30064964, "link": "https://stackoverflow.com/questions/30064964/perl-to-parse-text-file-which-may-or-may-not-be-gzipped", "title": "Perl to parse text file which may or may not be gzipped", "body": "<p>I'm using Perl to parse a text file which may or may not be gzipped:<br></p>\n\n<pre><code>my $FILE;\nif ( $file =~ /\\.gz$/ ) {\n    open( $FILE, \"gunzip -c $file |\" ) || die $!;\n} else {\n    open( $FILE, '&lt;', $file ) || die $!;\n}\n</code></pre>\n\n<p>Is there a simpler way to handle this?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 1019161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4763bab880850baecfcd6e661527cac?s=128&d=identicon&r=PG", "display_name": "Nader Chehab", "link": "https://stackoverflow.com/users/1019161/nader-chehab"}, "edited": false, "score": 0, "creation_date": 1430872725, "post_id": 30065054, "comment_id": 48245848, "body": "Thank you, that helps. However I want to print &quot;chicken&quot; in the first example which is the value between parentheses, not the whole phrase. Is this possible?"}, {"owner": {"reputation": 255, "user_id": 1019161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4763bab880850baecfcd6e661527cac?s=128&d=identicon&r=PG", "display_name": "Nader Chehab", "link": "https://stackoverflow.com/users/1019161/nader-chehab"}, "edited": false, "score": 1, "creation_date": 1430873789, "post_id": 30065054, "comment_id": 48246147, "body": "I got it: echo &quot;I like chicken&quot; | perl -ne &#39;print $1 if m|.*(chicken).*|&#39;   Thanks for your help!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 255, "user_id": 1019161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4763bab880850baecfcd6e661527cac?s=128&d=identicon&r=PG", "display_name": "Nader Chehab", "link": "https://stackoverflow.com/users/1019161/nader-chehab"}, "edited": false, "score": 1, "creation_date": 1430921420, "post_id": 30065054, "comment_id": 48271757, "body": "@NaderChehab Since you&#39;re not using anchors, there&#39;s no need for <code>.*</code> in your regex: <code>perl -ne &#39;print $1 if m|(chicken)|&#39;</code>"}], "tags": [], "owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "is_accepted": true, "score": 3, "last_activity_date": 1430869373, "creation_date": 1430869373, "answer_id": 30065054, "question_id": 30064903, "link": "https://stackoverflow.com/questions/30064903/how-to-avoid-perl-pe-from-printing-unmatched-lines/30065054#30065054", "title": "How to avoid perl -pe from printing unmatched lines", "body": "<p><code>s///</code> is for substitute, which I don't think is what you want to do.  <code>s|.*(chicken).*|\\1|</code> tells perl to find a line with 'chicken' in it, and replace the word 'chicken' with itself.</p>\n\n<p>Instead use <code>m//</code> for regex matching, and use <code>-ne</code> instead of <code>-pe</code>:</p>\n\n<pre><code>echo \"I like chicken\" | perl -ne 'print if m|chicken|'\n</code></pre>\n\n<p>Output: <code>I like chicken</code></p>\n\n<pre><code>echo \"I like bacon\" | perl -ne 'print if m|chicken|'\n</code></pre>\n\n<p><em>no output</em></p>\n"}], "owner": {"reputation": 255, "user_id": 1019161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4763bab880850baecfcd6e661527cac?s=128&d=identicon&r=PG", "display_name": "Nader Chehab", "link": "https://stackoverflow.com/users/1019161/nader-chehab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 30065054, "answer_count": 1, "score": 1, "last_activity_date": 1430869373, "creation_date": 1430868439, "question_id": 30064903, "link": "https://stackoverflow.com/questions/30064903/how-to-avoid-perl-pe-from-printing-unmatched-lines", "title": "How to avoid perl -pe from printing unmatched lines", "body": "<p>The following will print out \"chicken\", which is expected:</p>\n\n<pre><code>echo \"I like chicken\" | perl -pe 's|.*(chicken).*|\\1|'\n\nOutput: chicken\n</code></pre>\n\n<p>However, the following will print out \"I like bacon\" even if \"chicken\" was not matched:</p>\n\n<pre><code>echo \"I like bacon\" | perl -pe 's|.*(chicken).*|\\1|'\n\nOutput: I like bacon\n</code></pre>\n\n<p>How can I avoid the unmatched string from being printed out?</p>\n"}, {"tags": ["perl", "cpan"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430867463, "post_id": 30064575, "comment_id": 48244295, "body": "1) Don&#39;t mess with the system Perl; 2) you might want to stay away from <code>Class::Std</code> unless it&#39;s a dependency; 3) the error is really nothing serious."}, {"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430867593, "post_id": 30064575, "comment_id": 48244333, "body": "Thanks for the reply. Would you mind elaborating on why I should stay away from <code>Class::Std</code>?"}, {"owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "edited": false, "score": 0, "creation_date": 1430872423, "post_id": 30064575, "comment_id": 48245762, "body": "Doesn&#39;t look like Class::Std is part of the core modules; <a href=\"http://perldoc.perl.org/index-modules-C.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/index-modules-C.html</a> ?"}, {"owner": {"reputation": 2797, "user_id": 4123698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883acd9ee061b3a325ba22b1fee3daca?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4123698/harvey"}, "edited": false, "score": 1, "creation_date": 1430873013, "post_id": 30064575, "comment_id": 48245932, "body": "It&#39;s failing on a unit test which checks pod&#39;s. Your probably ok to force an install <code>cpan --force Class::Std</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1430873884, "post_id": 30064575, "comment_id": 48246168, "body": "Too much work for too little payoff. A number of show-stopping bugs. See also <a href=\"https://metacpan.org/pod/Class::Std#ALTERNATIVES\" rel=\"nofollow noreferrer\">alternatives</a>. Inside-out objects were an interesting experiment, but, I am not sure if they are worth the effort. <code>Moo</code> and <code>Moose</code> present excellent paths. So does plain old Perl OO."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 0, "last_activity_date": 1455908514, "creation_date": 1455908514, "answer_id": 35512964, "question_id": 30064575, "link": "https://stackoverflow.com/questions/30064575/installing-classstd-from-cpan-fails-on-macbook/35512964#35512964", "title": "Installing Class::Std from CPAN fails on MacBook", "body": "<p>It looks like the problem is in the documentation. It finds a non-ASCII character but the docs didn't declare an encoding. The <em>t/pod.t</em> test checks the format of the documentation so you can ignore this error and force the installation. It's nice report the problem though.</p>\n\n<pre><code> $ cpan -f Class::Std\n</code></pre>\n\n<p>As for the documentation, the fix is probably to add the proper encoding at the top of the POD (plain ol' documentation):</p>\n\n<pre><code> =encoding utf8\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455908514, "creation_date": 1430866366, "question_id": 30064575, "link": "https://stackoverflow.com/questions/30064575/installing-classstd-from-cpan-fails-on-macbook", "title": "Installing Class::Std from CPAN fails on MacBook", "body": "<p>On my MacBook, I try to install Class::Std using the command <code>sudo cpan Class::Std</code> but when I do so, the install fails with the output I've provided just below. However, when I install Class::Std using the same command on my VPS which runs CentOS 6.5, it installs just fine. </p>\n\n<pre><code>#   Failed test 'POD test for blib/lib/Class/Std.pm'\n#   at /System/Library/Perl/Extras/5.18/Test/Pod.pm line 186.\n# blib/lib/Class/Std.pm (1512): Non-ASCII character seen before =encoding in ':key?value?'. Assuming ISO8859-1\n# Looks like you failed 1 test of 1.\nt/pod.t ................ Dubious, test returned 1 (wstat 256, 0x100)\nFailed 1/1 subtests \n</code></pre>\n\n<p>What could be the issue or what are some other things I can look for that might indicate what the problem is?</p>\n"}, {"tags": ["perl", "primes"], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 6, "last_activity_date": 1430866529, "last_edit_date": 1430866529, "creation_date": 1430865604, "answer_id": 30064418, "question_id": 30064369, "link": "https://stackoverflow.com/questions/30064369/primes-generating-perl/30064418#30064418", "title": "Primes generating perl", "body": "<p>When you use <a href=\"https://metacpan.org/pod/perlobj#Method-Invocation\">the method invocation syntax</a>, i.e., </p>\n\n<blockquote>\n<pre><code>Math::Prime::Util-&gt;random_strong_prime(128);\n</code></pre>\n</blockquote>\n\n<p>the first argument to <code>random_strong_prime</code> becomes the string <code>\"Math::Prime::Util\"</code> which is not a positive integer. With method invocation syntax, <code>128</code> becomes the <strong><em>second</em></strong> parameter.</p>\n\n<p>The syntax you are using is appropriate for invoking a class method.</p>\n\n<p>Instead, you want to use function invocation syntax:</p>\n\n<pre><code>print Math::Prime::Util::random_strong_prime(128);\n</code></pre>\n\n<p>You can verify this using the following simple program:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage Hello;\n\nsub f { print \"@_\\n\" }\n\npackage main;\n\nHello-&gt;f('world');\nHello::f('world');\n</code></pre>\n\n<pre>$ ./gg.pl\nHello world\nworld</pre>\n"}], "owner": {"reputation": 185, "user_id": 2883725, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002126668091/picture?type=large", "display_name": "\u041f\u0440\u043e\u0441\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0441\u0442", "link": "https://stackoverflow.com/users/2883725/%d0%9f%d1%80%d0%be%d1%81%d1%82%d0%be-%d0%bf%d1%80%d0%be%d0%b3%d1%80%d0%b0%d0%bc%d0%bc%d0%b8%d1%81%d1%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 30064418, "answer_count": 1, "score": 1, "last_activity_date": 1430867331, "creation_date": 1430865308, "last_edit_date": 1430867331, "question_id": 30064369, "link": "https://stackoverflow.com/questions/30064369/primes-generating-perl", "title": "Primes generating perl", "body": "<p>I'm trying to generate random prime number</p>\n\n<pre><code>print Math::Prime::Util-&gt;random_strong_prime(128);\n</code></pre>\n\n<p>But, when I call one of the methods (i tried various) of <a href=\"https://metacpan.org/pod/Math::Prime::Util\" rel=\"nofollow\">Math::Prime::Util</a>, I get:</p>\n\n<p><code>Parameter 'Math::Prime::Util' must be a positive integer at /home/ivan/perl5/lib/perl5/x86_64-linux-thread-multi/Math/Prime/Util.pm line 400.</code></p>\n\n<p>I can't understend what's wrong, 128 is positive and integer.\nScript runs under Starman server(psgi)</p>\n"}, {"tags": ["perl", "pdb-files"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430909701, "post_id": 30063756, "comment_id": 48262722, "body": "We really need much more detail as to what&#39;s going wrong with your code. - and MCVE for example, or some indication of what you <i>expect</i> and what you <i>get</i>."}], "answers": [{"comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430864185, "post_id": 30064044, "comment_id": 48243165, "body": "Comment says &quot;may have leading spaces&quot;. So, <code>s&#47;^\\s+&#47;&#47; for $number, $element, $x, $y, $z, $r;</code>. Of course, the rest of the code is unreadable as well."}], "tags": [], "owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "is_accepted": false, "score": 0, "last_activity_date": 1430863470, "creation_date": 1430863470, "answer_id": 30064044, "question_id": 30063756, "link": "https://stackoverflow.com/questions/30063756/perl-script-for-discerning-between-cavity-and-void-space-in-pdbprotein-database/30064044#30064044", "title": "PERL Script for discerning between cavity and void space in PDB(Protein Database) file", "body": "<p>Here's one thing that is almost certainly slowing things down:</p>\n\n<pre><code>    $x =~ s/\\s*//g;\n    $y =~ s/\\s*//g;\n    $z =~ s/\\s*//g;\n    $r =~ s/\\s*//g;\n</code></pre>\n\n<p>It is possible for <code>\\s*</code> to match an empty string, so you are replacing empty strings with empty strings, for each empty string in the target string.</p>\n\n<p>Change to:</p>\n\n<pre><code>    $x =~ s/\\s+//g;\n    $y =~ s/\\s+//g;\n    $z =~ s/\\s+//g;\n    $r =~ s/\\s+//g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1430919203, "creation_date": 1430919203, "answer_id": 30078357, "question_id": 30063756, "link": "https://stackoverflow.com/questions/30063756/perl-script-for-discerning-between-cavity-and-void-space-in-pdbprotein-database/30078357#30078357", "title": "PERL Script for discerning between cavity and void space in PDB(Protein Database) file", "body": "<p>You have the following definitions:</p>\n\n<pre><code>my $lo         = 1000;\nmy $hi         = -1000;\n</code></pre>\n\n<p>So when you get to your first for loop, you will set <code>$i</code> to 1000, and then fail the check to see if it is less than -1000.</p>\n"}], "owner": {"reputation": 1, "user_id": 2612840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e024fb444b58f98dd815666450a3ddd9?s=128&d=identicon&r=PG", "display_name": "user2612840", "link": "https://stackoverflow.com/users/2612840/user2612840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1430919203, "creation_date": 1430862189, "last_edit_date": 1430863241, "question_id": 30063756, "link": "https://stackoverflow.com/questions/30063756/perl-script-for-discerning-between-cavity-and-void-space-in-pdbprotein-database", "title": "PERL Script for discerning between cavity and void space in PDB(Protein Database) file", "body": "<p>The problem with the following code is only in one function of the code. The problem function is with a comment head and close. This is my first post to StackOverflow so bear with me. The following script has some modules and other functions that I know work by testing them with the problem function commented out but I just cannot seem to get that one function to work. When ran, the script runs until the enviroment kills the execution. </p>\n\n<p>Basically what this program does is takes a PDB file,  copies everything out of the PDB file and creates a new one and pastes all of the original input file content into the new file and appends the cavities(coordinates of center of the cavity and the specified probe radius) that the program is supposed to find.  </p>\n\n<p>The problem function within the code is supposed to distinguish between a void space within a bound box of the structure and a cavity. Cavities are considered to be a closed space somewhere within the structure. A void space is any space or coordinate within the bounding box of max and min coorindates where there isn't an atom.The cavity must be large enough to fit into a specified probe radius. There is also a specified resolution when searching through the 3D hashtable of coordinates. </p>\n\n<p>Can anyone tell me why my code isn't working. Anything immediate. I have tested and tested and cannot seem to find the error. </p>\n\n<p>Thank you.</p>\n\n<pre><code>    #!/usr/bin/perl\n# Example 11-6   Extract atomic coordinates from PDB file\n\nuse strict;\nuse warnings;\nuse BeginPerlBioinfo;     # see Chapter 6 about this module\n\n#open file for printing\nopen(FH,\"&gt;results.pdb\");\n\nopen(PDB,\"oneAtom.pdb\");\nwhile(&lt;PDB&gt;) { print FH $_; }\nclose(PDB);\n\n# Read in PDB file\nmy @file = get_file_data('oneAtom.pdb');\n\n# Parse the record types of the PDB file\nmy %recordtypes = parsePDBrecordtypes(@file);\n\n# Extract the atoms of all chains in the protein\nmy %atoms = parseATOM ( $recordtypes{'ATOM'} );\n\n#define some variables and get the atom indices stored in atom_numbers array\nmy @atom_numbers = sort {$a &lt;=&gt; $b} keys %atoms;\nmy $resolution = 4.;\nmy $lo         = 1000;\nmy $hi         = -1000;\nmy $p_rad = 1;\nmy %pass;\n\n#set the grid boundaries\nforeach my $l ( @atom_numbers ) { \n                for my $i (0..2) { \n                    if ( $atoms{$l}[$i] &lt; $lo ) { $lo = $atoms{$l}[$i]; } \n                    if ( $atoms{$l}[$i] &gt; $hi ) { $hi = $atoms{$l}[$i]; } \n                    } \n    }\n$lo = $lo - 2* $resolution;\n$hi = $hi + 2* $resolution;\n\n#compute min distance to the pdb structure from each grid point\nfor ( my $i = $lo ; $i &lt;= $hi ; $i = $i + $resolution ) {\n    for ( my $j = $lo ; $j &lt;= $hi ; $j = $j + $resolution ) {\n        for ( my $k = $lo ; $k &lt;= $hi ; $k = $k + $resolution ) {\n            my $min_dist = 1000000;\n            foreach my $l ( @atom_numbers ) {\n                my $distance = sqrt((($atoms{$l}[0]-($i))*($atoms{$l}[0]-($i))) + (($atoms{$l}[1]-($j))*($atoms{$l}[1]-($j))) + (($atoms{$l}[2]-($k))*($atoms{$l}[2]-($k))));\n                $distance = $distance - ( $p_rad + $atoms{$l}[3] );\n                if ( $distance &lt; $min_dist ) {\n                    $min_dist = $distance;  \n                    }\n            }\n            $pass{$i}{$j}{$k} = $min_dist;\n            if ( $pass{$i}{$j}{$k} &gt; 0 ) {\n                         $pass{$i}{$j}{$k} = 1;\n                } else { $pass{$i}{$j}{$k} = 0;\n                }   \n        }\n    }\n}\n\n#define a starting point on the outside of the grid and place first on list of points\n#my   @point = ();\nmy   $num_cavities = 0;\n\n#define some offsets used to compute neighbors\nmy %offset =  (\n     1 =&gt; [-1*$resolution,0,0],\n     2 =&gt; [1*$resolution,0,0],\n     3 =&gt; [0,-1*$resolution,0],\n     4 =&gt; [0,1*$resolution,0],\n     5 =&gt; [0,0,-1*$resolution],\n     6 =&gt; [0,0,1*$resolution],\n              );\n##########################################################\n#function below with problem\n##########################################################\nmy   @point = ();\npush @point,[$hi,$hi,$hi];\n=pod\n#do the following while there are points on the list\n\n            while ( @point ) {\n                foreach my $vector ( keys %offset ) {                                                       #for each offset vector\n                    my @neighbor = (($point[0][0]+$offset{$vector}[0]),($point[0][1]+$offset{$vector}[1]),($point[0][2]+$offset{$vector}[2]));              #compute neighbor point\n                    if ( exists  $pass{$neighbor[0]}{$neighbor[1]}{$neighbor[2]} ) {                                    #see if neighbor is in the grid\n                        if ( $pass{$neighbor[0]}{$neighbor[1]}{$neighbor[2]} == 1 ) {                                                                           #if it is see if its further than the probe radius\n                            push @point,[($point[0][0]+$offset{$vector}[0]),($point[0][1]+$offset{$vector}[1]),($point[0][2]+$offset{$vector}[2])];         #if it is push it onto the list of points\n                            }\n                        }\n                    }\n                $pass{$point[0][0]}{$point[0][1]}{$point[0][2]} = 0;                                            #eliminate the point just tested from the pass array\n                shift @point;                                                                   #move to the next point in the list\n                }\n=cut\n##############################################################\n# end of problem function\n##############################################################\n\nmy $grid_ind = $atom_numbers[$#atom_numbers];\nfor ( my $i = $lo ; $i &lt;= $hi ; $i = $i + $resolution ) {\n    for ( my $j = $lo ; $j &lt;= $hi ; $j = $j + $resolution ) {\n        for ( my $k = $lo ; $k &lt;= $hi ; $k = $k + $resolution ) {\n            if ( $pass{$i}{$j}{$k} == 1 ) {\n            $grid_ind = $grid_ind + 1;\n            my $n = sprintf(\"%5d\",$grid_ind);\n            my $x = sprintf(\"%7.3f\",$i);\n            my $y = sprintf(\"%7.3f\",$j);\n            my $z = sprintf(\"%7.3f\",$k);\n            my $w = sprintf(\"%6.3f\",1);\n            my $p = sprintf(\"%6.3f\",$p_rad);\n            print FH \"ATOM  $n MC   CAV $n     $x $y $z $w  $p \\n\";\n            }\n        }\n    }\n}\n\nclose(FH);\n\nexit;\n\n#do the following while there are points on the list\nfor ( my $i = $lo ; $i &lt;= $hi ; $i = $i + $resolution ) {\n    for ( my $j = $lo ; $j &lt;= $hi ; $j = $j + $resolution ) {\n        for ( my $k = $lo ; $k &lt;= $hi ; $k = $k + $resolution ) {\n            if ( $pass{$i}{$j}{$k} == 1 ) {\n            push @point,[$i,$j,$k];\n            $num_cavities++;\n            while ( @point ) {\n                foreach my $vector ( keys %offset ) {                                                       #for each offset vector\n                    my @neighbor = (($point[0][0]+$offset{$vector}[0]),($point[0][1]+$offset{$vector}[1]),($point[0][2]+$offset{$vector}[2]));              #compute neighbor point\n                    if ( exists  $pass{$neighbor[0]}{$neighbor[1]}{$neighbor[2]} ) {                                    #see if neighbor is in the grid\n                        if ( $pass{$neighbor[0]}{$neighbor[1]}{$neighbor[2]} == 1 ) {                                                                           #if it is see if its further than the probe radius\n                            push @point,[($point[0][0]+$offset{$vector}[0]),($point[0][1]+$offset{$vector}[1]),($point[0][2]+$offset{$vector}[2])];         #if it is push it onto the list of points\n                            }\n                        }\n                    }\n                $pass{$point[0][0]}{$point[0][1]}{$point[0][2]} = 0;                                            #eliminate the point just tested from the pass array\n                shift @point;                                                                   #move to the next point in the list\n                }\n            }\n        }\n    }\n}\n\n#print the results\nprint \"\\nthe structure has \" . $num_cavities . \" cavities.\\n\\n\";\n\n#print the point that are left over (these correspond to the cavities)\n#for ( my $i = -10 ; $i &lt;= 10 ; $i = $i + $resolution ) {\n#   for ( my $j = -10 ; $j &lt;= 10 ; $j = $j + $resolution ) {\n#       for ( my $k = -10 ; $k &lt;= 10 ; $k = $k + $resolution ) {\n#           print $i . \"\\t\" . $j . \"\\t\" . $k . \"\\t\" . $pass{$i}{$j}{$k} . \"\\n\";\n#       }\n#   }\n#}\n\n###################################################\n# function\n###################################################\n\nsub parseATOM {\n\n    my($atomrecord) = @_;\n\n    use strict;\n    use warnings;\n    my %results = (  );\n\n    # Turn the scalar into an array of ATOM lines\n    my(@atomrecord) = split(/\\n/, $atomrecord);\n\n    foreach my $record (@atomrecord) {\n       my $number  = substr($record,  6, 5);  # columns 7-11\n       my $x       = substr($record, 30, 8);  # columns 31-38\n       my $y       = substr($record, 38, 8);  # columns 39-46\n       my $z       = substr($record, 46, 8);  # columns 47-54\n       my $r       = substr($record, 60, 6);  # columns 47-54\n       #my $element = substr($record, 76, 2);  # columns 77-78\n\n        # $number and $element may have leading spaces: strip them\n        $number =~ s/\\s*//g;\n        #$element =~ s/\\s*//g;\n        $x =~ s/\\s*//g;\n        $y =~ s/\\s*//g;\n        $z =~ s/\\s*//g;\n        $r =~ s/\\s*//g;\n\n        # Store information in hash\n        #$results{$number} = [$x,$y,$z,$element];\n        $results{$number} = [$x,$y,$z,$r];\n    }\n\n    # Return the hash\n    return %results;\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1430875494, "last_edit_date": 1430875494, "creation_date": 1430873987, "answer_id": 30065732, "question_id": 30063391, "link": "https://stackoverflow.com/questions/30063391/real-multiple-files-in-perl-thread/30065732#30065732", "title": "Real multiple files in Perl Thread", "body": "<p>As long as it is that simple (and I'm assuming you don't print to STDOUT in your subroutine):</p>\n\n<pre><code>use threads;\n\n# create the threads\nmy @threads = map {threads-&gt;create(\\&amp;read_files,$_)} @files;\n\n# wait until the threads have finished\nforeach my $thread (@threads){\n  $thread-&gt;join();\n}\n</code></pre>\n\n<p>Alternatively, you could use <code>fork</code>, it is easiest used with the <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow\"><code>Parallel::ForkManager</code></a></p>\n\n<p>And you should take a look at <a href=\"http://perldoc.perl.org/threads.html\" rel=\"nofollow\">the documentation for threads</a> and maybe the <a href=\"http://perldoc.perl.org/perlthrtut.html\" rel=\"nofollow\">threads tutorial</a></p>\n\n<p>A little side note: it is much better to use the three argument open. Especially if you <code>open</code> with interpolation.</p>\n"}], "owner": {"reputation": 1, "user_id": 1788421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a87206e6a1e56ef00fd23f7ef0da3?s=128&d=identicon&r=PG", "display_name": "user1788421", "link": "https://stackoverflow.com/users/1788421/user1788421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430875494, "creation_date": 1430860669, "question_id": 30063391, "link": "https://stackoverflow.com/questions/30063391/real-multiple-files-in-perl-thread", "title": "Real multiple files in Perl Thread", "body": "<p>I needed to read and do some manipulations with the so many files list in an array. The read concepts are written in the sub routine and the files are passing as an argument. The below code is read one file at time and the program takes more times while read the listed files in array.</p>\n\n<p><strong>I would like to read_files subroutine should perform multiple times for different files.</strong></p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nopendir DIRS,\"/tmp\";\nmy @files=readdir DIRS;\nclosedir DIRS;\n\nforeach my $file_read(@files){\n&amp;read_files($file_read);\n}\n\n sub read_files{\n  my $R_file=shift;\n  open(INP,\"&lt;$R_file\");\n  my $con=&lt;INP&gt;;\n  #some manipulation will go here\n  close INP;\n }\n</code></pre>\n"}, {"tags": ["perl", "thesaurus"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1430858634, "post_id": 30062546, "comment_id": 48240908, "body": "Are you looking for English English or American English?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1430863506, "post_id": 30062546, "comment_id": 48242918, "body": "<a href=\"https://metacpan.org/pod/Lingua::Wordnet\" rel=\"nofollow noreferrer\"><code>Lingua::Wordnet</code></a> looks promising. There&#39;s a fairly <a href=\"http://www.foo.be/docs/tpj/issues/vol5_2/tpj0502-0006.html\" rel=\"nofollow noreferrer\">detailed article</a> in the Perl Journal describing its usage."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1430863919, "post_id": 30062546, "comment_id": 48243068, "body": "There&#39;s also the <a href=\"http://icon.shef.ac.uk/Moby/mthes.html\" rel=\"nofollow noreferrer\">Moby Thesaurus</a>, which is in the public domain."}, {"owner": {"reputation": 984, "user_id": 1107958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Zy3c.jpg?s=128&g=1", "display_name": "swornabsent", "link": "https://stackoverflow.com/users/1107958/swornabsent"}, "edited": false, "score": 0, "creation_date": 1430932887, "post_id": 30062546, "comment_id": 48280037, "body": "The Perl part of this could really be as simple as a dictionary hash with arrays of synonyms as values e.g. <code>$thesaurus{wiggle} = [qw(wave waggle wag)]</code>. The offline part then would just be a matter of finding and probably some amount of transforming a publicly available data set into that Perl hash. I don&#39;t know offhand how involved the latter would be but OpenOffice and Wiktionary both have downloadable dumps."}, {"owner": {"reputation": 33, "user_id": 2433742, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a90b97ed99befc47c64b9129a04ce97c?s=128&d=identicon&r=PG", "display_name": "Gary N.", "link": "https://stackoverflow.com/users/2433742/gary-n"}, "edited": false, "score": 0, "creation_date": 1430934535, "post_id": 30062546, "comment_id": 48281131, "body": "Borodin - American English  ThisSuitIsBlackNot - I&#39;m looking into Wordnet I noticed there&#39;s a dictionary, but didn&#39;t notice if there was a thesaurus or not. I have also noticed Moby out there.  swomabsent - I agree, if there were a large thesaurus available for download in <i>some</i> structured format, using Perl to navigate then just becomes a coding task."}, {"owner": {"reputation": 33, "user_id": 2433742, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a90b97ed99befc47c64b9129a04ce97c?s=128&d=identicon&r=PG", "display_name": "Gary N.", "link": "https://stackoverflow.com/users/2433742/gary-n"}, "edited": false, "score": 0, "creation_date": 1430934558, "post_id": 30062546, "comment_id": 48281145, "body": "My take on all this though: I&#39;m just surprised that, in this day and age, there isn&#39;t a quick and automatic answer to this problem i.e. &quot;Oh yeah, go download the Oxford English Dictionary XML file and use Purple::Nurple to parse through it&quot; In other words, it seems like this would be a not common (but certainly not <i>rare</i>) need out there in the world. I&#39;m surprised I&#39;m getting pointed to some darker corners to solve it, and not a big bright one. :-/  - G"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 2433742, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a90b97ed99befc47c64b9129a04ce97c?s=128&d=identicon&r=PG", "display_name": "Gary N.", "link": "https://stackoverflow.com/users/2433742/gary-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1431376454, "creation_date": 1431376454, "answer_id": 30177148, "question_id": 30062546, "link": "https://stackoverflow.com/questions/30062546/is-there-an-english-thesaurus-resource-that-i-can-access-using-perl/30177148#30177148", "title": "Is there an English thesaurus resource that I can access using Perl?", "body": "<p>For better or worse, the solution I'm working with is...</p>\n\n<p>1) Downloaded the Moby Thesaurus. Data there is simple...</p>\n\n<pre><code>i.e. root word,synonym 1, synonym 2, synonym 3, etc.\ne.g. hamburger, BLT, Dogwood sandwich, cheeseburger, etc.\n</code></pre>\n\n<p>2) Used plain-old Perl, no special module, to parse and repeat searches through the data - once it's loaded in memory.</p>\n\n<ul>\n<li>G</li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 2433742, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a90b97ed99befc47c64b9129a04ce97c?s=128&d=identicon&r=PG", "display_name": "Gary N.", "link": "https://stackoverflow.com/users/2433742/gary-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1431376454, "creation_date": 1430857243, "last_edit_date": 1430858455, "question_id": 30062546, "link": "https://stackoverflow.com/questions/30062546/is-there-an-english-thesaurus-resource-that-i-can-access-using-perl", "title": "Is there an English thesaurus resource that I can access using Perl?", "body": "<p>I'd like to use Perl to search through an offline thesaurus. I don't know if this is possible, or what the mechanics of achieving this may be</p>\n\n<p>I'd like be able to</p>\n\n<ul>\n<li><p>Have a downloaded thesaurus on a machine</p></li>\n<li><p>Write a Perl program that searches through the downloaded thesaurus and spits back minimal output.</p></li>\n</ul>\n\n<p>For example</p>\n\n<pre><code>=============================\nSynoynms for: wiggle\n- - - - - - - - - - - - - - -\nwave   waggle   wag   twitch\ntwist  squirm   shimmy\njiggle jerk\n=============================\n</code></pre>\n\n<p>I noticed that there's a <a href=\"https://metacpan.org/pod/Biblio::Thesaurus\" rel=\"nofollow\"><code>Biblio::Thesaurus</code></a> which seemed promising, but I'm totally lost as to how this module would be used unless there's a universal (or at least popular) thesaurus for the English language in ISO format freely available for download somewhere</p>\n\n<p>I guess I'm looking for</p>\n\n<ul>\n<li><p>A thesaurus for English in ISO format</p></li>\n<li><p>A way of navigating this data using Perl</p></li>\n</ul>\n"}, {"tags": ["python", "perl", "pipe", "filehandle", "zcat"], "comments": [{"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1430860478, "post_id": 30062482, "comment_id": 48241646, "body": "You want every second line from the file written to a temp file?"}, {"owner": {"reputation": 310986, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430860904, "post_id": 30062482, "comment_id": 48241837, "body": "Optimizing your new program is really a separate question from getting a file handle for a subprocess; you should probably create it as a separate question. But if you read the <code>subprocess</code> docs (or my answer), it should be pretty clear how you can pipe data in to <code>formatdb -i stdin</code> instead of writing it to a file first and then running <code>formatdb</code> on the file."}], "answers": [{"comments": [{"owner": {"reputation": 310986, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1430859589, "post_id": 30062604, "comment_id": 48241260, "body": "@PadraicCunningham <a href=\"https://docs.python.org/3/library/functools.html#functools.partial\" rel=\"nofollow noreferrer\"><code>partial</code></a>: <code>functools.partial(zcat.read, 8192)</code> is effectively the same as <code>lambda: zcat.read(8192)</code>, but possibly more efficient and definitely more introspectable."}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1430859707, "post_id": 30062604, "comment_id": 48241329, "body": "@abarnet, I thought it was I just did not see any import, do you need iter?"}, {"owner": {"reputation": 71, "user_id": 4867985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78183a62678db20d124c8901b3482ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Egger", "link": "https://stackoverflow.com/users/4867985/julian-egger"}, "edited": false, "score": 0, "creation_date": 1430859911, "post_id": 30062604, "comment_id": 48241424, "body": "I am not really sure if I necessarily &quot;want&quot; to launch a subprocess, I just need it to go faster than how I am doing it with Python, although I thought subprocess might be an option.  I know that Perl script above works really nice as I have used it plenty of times, so it must be doing something right.  The gzip.open and parse seems too slow, but maybe it just needs tweaking? Still not sure how I can then take the two lines I need, make a slight alteration, and use it as the stdin for the software as if it was just its own file (without creating a file)."}, {"owner": {"reputation": 310986, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1430860580, "post_id": 30062604, "comment_id": 48241693, "body": "@PadraicCunningham: Well, I didn&#39;t include the <code>import subprocess</code> either. This isn&#39;t meant to be a complete program, just enough to show the OP how to do what he wants. Meanwhile, of course you don&#39;t really <i>need</i> <code>iter</code> (although you do need <code>.stdout.</code> in there, which I missed\u2026 fixed\u2026), you could just do a <code>while True:</code>, <code>buf = zcat.stdout.read(8192)</code>, <code>if not buf: break</code>, etc., but why be more verbose? Especially since the point isn&#39;t the particular code, it&#39;s just that any file-reading code works on <code>zcat.stdout</code>, just as any perl file-reading code works on his <code>$fh</code>."}, {"owner": {"reputation": 310986, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 71, "user_id": 4867985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78183a62678db20d124c8901b3482ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Egger", "link": "https://stackoverflow.com/users/4867985/julian-egger"}, "edited": false, "score": 0, "creation_date": 1430860664, "post_id": 30062604, "comment_id": 48241724, "body": "@JulianEgger: You can pass a pipe into the stdin of another process, and then <code>p2.stdin.write</code>. Or you can just pass a file-like object as the stdin. Or you can <a href=\"https://docs.python.org/3/library/subprocess.html#replacing-shell-pipeline\" rel=\"nofollow noreferrer\">pipe two processes together without getting in the way</a>. There&#39;s really nothing complicated here."}, {"owner": {"reputation": 310986, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 71, "user_id": 4867985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78183a62678db20d124c8901b3482ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Egger", "link": "https://stackoverflow.com/users/4867985/julian-egger"}, "edited": false, "score": 0, "creation_date": 1430860746, "post_id": 30062604, "comment_id": 48241765, "body": "@JulianEgger: And as for performance, we obviously can&#39;t help you optimize your code if we can&#39;t see your code, but in my experience, using the <code>gzip</code> module in Python is actually slightly <i>faster</i> than using <code>zcat</code>, not slower. Of course if you do something silly like try to <code>read()</code> or <code>readlines()</code> the whole file into memory, that&#39;s going to give you 20 minutes of swap hell, which isn&#39;t going to do your performance any favors, but just don&#39;t do that."}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1430862269, "post_id": 30062604, "comment_id": 48242439, "body": "@abarnert, nvm, I just interpreted what you were doing incorrectly."}, {"owner": {"reputation": 1699, "user_id": 3108946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EWWD.jpg?s=128&g=1", "display_name": "aerijman", "link": "https://stackoverflow.com/users/3108946/aerijman"}, "edited": false, "score": 0, "creation_date": 1604679648, "post_id": 30062604, "comment_id": 114429571, "body": "In Python7.3, the argument <code>encoding</code> does not work for me. I apply it to the line object as <code>line.decode(&#39;utf-8&#39;)</code>"}], "tags": [], "owner": {"reputation": 310986, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 11, "last_activity_date": 1430860521, "last_edit_date": 1430860521, "creation_date": 1430857510, "answer_id": 30062604, "question_id": 30062482, "link": "https://stackoverflow.com/questions/30062482/python-equivalent-of-piping-zcat-result-to-filehandle-in-perl/30062604#30062604", "title": "Python equivalent of piping zcat result to filehandle in Perl", "body": "<p>First, there's a much better solution in both Perl and Python: just use a <code>gzip</code> library. In Python, there's one <a href=\"https://docs.python.org/3/library/gzip.html\">in the stdlib</a>; in Perl, you can find one on CPAN. For example:</p>\n\n<pre><code>with gzip.open(path, 'r', encoding='utf-8') as f:\n    for line in f:\n        do_stuff(line)\n</code></pre>\n\n<p>Much simpler, and more efficient, and more portable, than shelling out to <code>zcat</code>.</p>\n\n<hr>\n\n<p>But if you really do want to launch a subprocess and control its pipes in Python, you can do it with the <a href=\"https://docs.python.org/3/library/subprocess.html\"><code>subprocess</code></a> module. And, unlike perl, Python can do this without having to stick a shell in the middle. There's even a nice section in the docs on <a href=\"https://docs.python.org/3/library/subprocess.html#replacing-older-functions-with-the-subprocess-module\">Replacing Older Functions with the <code>subprocess</code> Module</a> that gives you recipes.</p>\n\n<p>So:</p>\n\n<pre><code>zcat = subprocess.Popen(['zcat', path], stdout=subprocess.PIPE)\n</code></pre>\n\n<p>Now, <code>zcat.stdout</code> is a file-like object, with the usual <code>read</code> methods and so on, wrapping the pipe to the <code>zcat</code> subprocess.</p>\n\n<p>So, for example, to read a binary file 8K at a time in Python 3.x:</p>\n\n<pre><code>zcat = subprocess.Popen(['zcat', path], stdout=subprocess.PIPE)\nfor chunk in iter(functools.partial(zcat.stdout.read, 8192), b''):\n    do_stuff(chunk)\nzcat.wait()\n</code></pre>\n\n<p>(If you want to do this in Python 2.x, or read a text file one line at a time instead of a binary file 8K at a time, or whatever, the changes are the same as they'd be for any other file-handling coding.)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4445250, "user_type": "registered", "profile_image": "https://graph.facebook.com/1312612596/picture?type=large", "display_name": "Fermata", "link": "https://stackoverflow.com/users/4445250/fermata"}, "is_accepted": false, "score": 0, "last_activity_date": 1520968637, "creation_date": 1520968637, "answer_id": 49264230, "question_id": 30062482, "link": "https://stackoverflow.com/questions/30062482/python-equivalent-of-piping-zcat-result-to-filehandle-in-perl/49264230#49264230", "title": "Python equivalent of piping zcat result to filehandle in Perl", "body": "<p>You can parse the whole file and load it as a list of lines using this function:</p>\n\n<pre><code>    def convert_gz_to_list_of_lines(filepath):\n     \"\"\"Parse gz file and convert it into a list of lines.\"\"\"\n     file_as_list = list()\n     with gzip.open(filepath, 'rt', encoding='utf-8') as f:\n      try:\n       for line in f:\n        file_as_list.append(line)\n      except EOFError:\n        file_as_list = file_as_list\n      return file_as_list\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4867985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78183a62678db20d124c8901b3482ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Egger", "link": "https://stackoverflow.com/users/4867985/julian-egger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6079, "favorite_count": 3, "answer_count": 2, "score": 7, "last_activity_date": 1520968637, "creation_date": 1430857050, "last_edit_date": 1430860182, "question_id": 30062482, "link": "https://stackoverflow.com/questions/30062482/python-equivalent-of-piping-zcat-result-to-filehandle-in-perl", "title": "Python equivalent of piping zcat result to filehandle in Perl", "body": "<p>I have a huge pipeline written in Python that uses very large .gz files (~14GB compressed), but need a better way to send certain lines to an external software (<a href=\"http://141.80.164.19/bioinf_dokus/blastall/README_db.htm\" rel=\"nofollow\">formatdb from blast-legacy/2.2.26</a>).  I have a Perl script someone wrote for me a long time ago that does this extremely fast, but I need to do that same thing in Python given that the rest of the pipeline is written in Python and I have to keep it that way.  The Perl script uses two file handles, one to hold zcat of .gz file and the other to store the lines the software needs (2 of every 4) and use it as the input. It involves bioinformatics, but no experience is needed.  The file is in fastq format and the software needs it in fasta format.  Every 4 lines is a fastq record, take the 1st and 3rd line and add '>' to the beginning of the 1st line and that is the fasta equivalent the formatdb software will use for each record.</p>\n\n<p>The perl script is as follows:</p>\n\n<pre><code>#!/usr/bin/perl \nmy $SRG = $ARGV[0]; # reads.fastq.gz\n\nopen($fh, sprintf(\"zcat %s |\", $SRG)) or die \"Broken gunzip $!\\n\";\n\n# -i: input -n: db name -p: program \nopen ($fh2, \"| formatdb -i stdin -n $SRG -p F\") or die \"no piping formatdb!, $!\\n\";\n\n#Fastq =&gt; Fasta sub\nmy $localcounter = 0;\nwhile (my $line = &lt;$fh&gt;){\n        if ($. % 4==1){\n                print $fh2 \"\\&gt;\" . substr($line, 1);\n                $localcounter++;\n        }\n        elsif ($localcounter == 1){\n                print $fh2 \"$line\";\n                $localcounter = 0;\n        }\n        else{\n        }\n}\nclose $fh;\nclose $fh2;\nexit;\n</code></pre>\n\n<p>It works really well.  How could I do this same thing in Python?  I like how Perl can use those file handles, but I'm not sure how to do that in Python without creating an actual file.  All I can think of is to gzip.open the file and write the two lines of every record I need to a new file and use that with \"formatdb\", but it is way too slow.  Any ideas?  I need to work it into the python pipeline, so I can't just rely on the perl script and I would also like to know how to do this in general.  I assume I need to use some form of the subprocess module.</p>\n\n<p>Here is my Python code, but again it is way to slow and speed is the issue here (HUGE FILES):</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport gzip\nfrom Bio import SeqIO # can recognize fasta/fastq records\nimport subprocess as sp\nimport os,sys\n\nfilename = sys.argv[1] # reads.fastq.gz\n\ntempFile = filename + \".temp.fasta\"\n\noutFile = open(tempFile, \"w\")\n\nhandle = gzip.open(filename, \"r\")\n# parses each fastq record\n# r.id and r.seq are the 1st and 3rd lines of each record\nfor r in SeqIO.parse(handle, \"fastq\"):\n    outFile.write(\"&gt;\" + str(r.id) + \"\\n\")\n    outFile.write(str(r.seq) + \"\\n\")\n\nhandle.close()\noutFile.close()\n\n    cmd = 'formatdb -i ' + str(tempFile) + ' -n ' + filename + ' -p F '\n    sp.call(cmd, shell=True)\n\n    cmd = 'rm ' + tempFile\n    sp.call(cmd, shell=True)\n</code></pre>\n"}, {"tags": ["perl", "file-io", "scope", "syntactic-sugar", "deobfuscation"], "comments": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 1, "creation_date": 1430857350, "post_id": 30062413, "comment_id": 48240212, "body": "perl allows to assign multiple variables in a single assignment (don&#39;t know how it&#39;s properly called): <code>($a, $b, $c) = (1, 2)</code>. <code>$c</code> here would end up <code>undef</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1430857940, "post_id": 30062413, "comment_id": 48240544, "body": "That is horrible. You have to ask what it does, so don&#39;t duplicate it"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1430858014, "post_id": 30062413, "comment_id": 48240604, "body": "This line of code actually appears to be a commonly used piece of Perl code.  I&#39;ve seen it in more than one place which is what lead me to ask this question."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 1, "creation_date": 1430925929, "post_id": 30062413, "comment_id": 48275359, "body": "That&#39;s what horrible about it... ;-) Perl is full of these neat little shortcuts that are too horrible to use and too neat not to..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1430937628, "post_id": 30062413, "comment_id": 48283032, "body": "Don&#39;t need <code>map</code> for multiple files.  <code>my @texts = do { local (@ARGV, $&#47;) = @files; &lt;&gt; };</code>"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1430937925, "post_id": 30062413, "comment_id": 48283197, "body": "(&gt;*o*)&gt;   <i>*mind blown*</i>   &lt;(*o*&lt;)"}], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1430915871, "post_id": 30062514, "comment_id": 48267175, "body": "Oh, that makes sense, then the <code>do {}</code> just returns whatever the value of the last evaluated expression is, which would be the value of <code>&lt;&gt;</code> or the contents of the file. Thanks @charoba!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430937708, "post_id": 30062514, "comment_id": 48283071, "body": "@jwrona1992, The point of <code>do</code> is to limit the scope in which <code>@ARGV</code> and <code>$&#47;</code> are changed."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 11, "last_activity_date": 1430857135, "creation_date": 1430857135, "answer_id": 30062514, "question_id": 30062413, "link": "https://stackoverflow.com/questions/30062413/fancy-file-slurping-in-perl/30062514#30062514", "title": "Fancy file slurping in Perl", "body": "<pre><code>local (@ARGV, $/) = $file;\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>local @ARGV = ( $file );\nlocal $/    = undef;\n</code></pre>\n\n<p><code>&lt;&gt;</code> then reads from files mentioned in <code>@ARGV</code>, i.e. from <code>$file</code>.</p>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 2, "accepted_answer_id": 30062514, "answer_count": 1, "score": 9, "last_activity_date": 1467660367, "creation_date": 1430856822, "last_edit_date": 1467660367, "question_id": 30062413, "link": "https://stackoverflow.com/questions/30062413/fancy-file-slurping-in-perl", "title": "Fancy file slurping in Perl", "body": "<p>I was looking into efficient ways to read files in Perl and came across this very interesting one liner:</p>\n\n<pre><code>my $text = do { local (@ARGV, $/) = $file; &lt;&gt; };\n</code></pre>\n\n<p>My question is: How exactly does this work? Normally when slurping a file you set <code>$/ = undef</code>, but I don't see how this does that. This little piece of code is proving to be very difficult to wrap my head around.</p>\n\n<p>What would be a simplified breakdown and explanation for this?</p>\n\n<hr>\n\n<p>Now that I know how it works, lets get real fancy!</p>\n\n<p>Not that this code has any real use; it's just fun to figure out and cool to look at. Here is a one-liner to slurp multiple files at the same time!!!</p>\n\n<pre><code>my @texts = map { local (@ARGV, $/) = $_; &lt;&gt; } @files;\n</code></pre>\n"}, {"tags": ["multithreading", "perl"], "answers": [{"comments": [{"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 1, "creation_date": 1430855044, "post_id": 30061879, "comment_id": 48238842, "body": "oh so if i call threads-&gt;exit(), then i wont have to call join() and vice versa. Is this correct?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1430855336, "post_id": 30061879, "comment_id": 48239044, "body": "huh? <code>exit</code> is used to exit the current thread. <code>join</code> is used to wait for a thread to complete. They are unrelated!"}, {"owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "edited": false, "score": 0, "creation_date": 1430855841, "post_id": 30061879, "comment_id": 48239339, "body": "ohhh so threads-&gt;exit() is only called from inside the thread and join is called from the main code that invoked the thread."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1430855679, "last_edit_date": 1430855679, "creation_date": 1430854978, "answer_id": 30061879, "question_id": 30061833, "link": "https://stackoverflow.com/questions/30061833/perl-threads-is-exit-needed/30061879#30061879", "title": "perl threads: is exit needed?", "body": "<p>Just like how <code>exit</code> allows you to exit the current process before reaching its end, <code>threads-&gt;exit()</code> allows you to exit the current thread before reaching its end. You don't need to use them if there's nothing to execute after them.</p>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 30061879, "answer_count": 1, "score": 1, "last_activity_date": 1430855869, "creation_date": 1430854812, "last_edit_date": 1430855869, "question_id": 30061833, "link": "https://stackoverflow.com/questions/30061833/perl-threads-is-exit-needed", "title": "perl threads: is exit needed?", "body": "<pre><code>    # Check thread's state\n    if ($thr-&gt;is_running()) {\n        sleep(1);\n    }\n    if ($thr-&gt;is_joinable()) {\n        $thr-&gt;join();\n    }\n\n    # Send a signal to a thread\n    $thr-&gt;kill('SIGUSR1');\n\n    # Exit a thread\n    threads-&gt;exit();\n</code></pre>\n\n<p>I'm unclear on the documentation on <a href=\"https://metacpan.org/pod/threads\" rel=\"nofollow\">perldoc threads</a>.</p>\n\n<p>Is <code>threads-&gt;exit()</code> needed if a thread is already joined or detached?</p>\n\n<p>If it's not needed, and given the fact that we always have to either <code>join</code> or <code>detach</code>, when do we want to call <code>threads-&gt;exit()</code>?</p>\n"}, {"tags": ["linux", "bash", "perl", "syntax-error", "command-line-interface"], "comments": [{"owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "edited": false, "score": 6, "creation_date": 1430853097, "post_id": 30061285, "comment_id": 48237657, "body": "Do you actually have the 2 shebang lines in your perl script?"}, {"owner": {"reputation": 4802, "user_id": 1331011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a93b054af1494e5108cdc0278e0db75c?s=128&d=identicon&r=PG", "display_name": "Wormbo", "link": "https://stackoverflow.com/users/1331011/wormbo"}, "edited": false, "score": 6, "creation_date": 1430853101, "post_id": 30061285, "comment_id": 48237662, "body": "Sounds like your file is being executed as bash script, not as Perl script."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430853127, "post_id": 30061285, "comment_id": 48237676, "body": "How are you running it from the terminal? Is the <code>Info.pl</code> file set executable?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 4, "creation_date": 1430853163, "post_id": 30061285, "comment_id": 48237693, "body": "Two shebang lines isn&#39;t a problem. Only the first matters. The second will be seen as a comment by perl and ignored. It isn&#39;t useful and shouldn&#39;t be there though."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1430853784, "post_id": 30061285, "comment_id": 48238075, "body": "Do you have perl installed in directory /usr/bin?"}, {"owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430853835, "post_id": 30061285, "comment_id": 48238105, "body": "Tanks for the clarifications. I removed the redundants line. @EtanReisner I clarified in the post now how I run it from the terminal, both scripts."}, {"owner": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "edited": false, "score": 4, "creation_date": 1430854279, "post_id": 30061285, "comment_id": 48238369, "body": "Are you sure your bash-script looks like that? It doesn&#39;t have &quot;. ./Info.pl&quot;?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1430854505, "post_id": 30061285, "comment_id": 48238502, "body": "Please post the script you actually ran. The error message says <code>use List::Util</code> is on line 4, but it&#39;s on line 3 in the code you posted."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 2, "creation_date": 1430854792, "post_id": 30061285, "comment_id": 48238684, "body": "Please don&#39;t screw up the question by fixing the problem. Now it doesn&#39;t make sense anymore (the problem seems to have been the line you removed)."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430855923, "post_id": 30061285, "comment_id": 48239383, "body": "Removing that extra shebang line does not alter the error or the problem in any way. It simply removes a line that confused some people. Yes, it threw the line numbers off. That&#39;s unfortunate but not material to the problem."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430855971, "post_id": 30061285, "comment_id": 48239414, "body": "Assuming that is the correct location for perl on your system then the problem is almost certainly that <code>Info.pl</code> is simply not marked executable and so the shebang line is being ignored and the current shell is trying to execute the script instead."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430856188, "post_id": 30061285, "comment_id": 48239535, "body": "@EtanReisner That would result in a <code>Permission denied</code> error, no? asjo&#39;s explanation (sourcing the Perl script instead of executing it) seems more likely."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430856496, "post_id": 30061285, "comment_id": 48239700, "body": "@ThisSuitIsBlackNot Probably but not necessarily. Yes, it does but it was indicated that wasn&#39;t being done. The perl path being wrong is also possible."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430857002, "post_id": 30061285, "comment_id": 48240004, "body": "@EtanReisner 1) In what circumstances will the shell ignore the shebang and try to interpret a script that doesn&#39;t have the execute bit set when run with the <code>.&#47;foo</code> syntax? I&#39;m curious, I&#39;ve never heard of this before. 2) In your second sentence, are you saying there&#39;s evidence that the Perl script wasn&#39;t being sourced, or are you just referring to what the OP said?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430857208, "post_id": 30061285, "comment_id": 48240133, "body": "@ThisSuitIsBlackNot I think I may have mis-remembered the situation there. I think I was thinking of other failure modes for which the shell may fall back to self-executing the script but not executable permissions being missing. And yes, I&#39;m going by what the OP said they did when running the script. We don&#39;t have any information beyond that."}], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "edited": false, "score": 0, "creation_date": 1430856042, "post_id": 30061391, "comment_id": 48239452, "body": "Thank you, this worked (I got confused at first as I included the &#39; &#39; in the command."}], "tags": [], "owner": {"reputation": 152, "user_id": 4867868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df5f58b84e05001af27d8cc7a3db19ab?s=128&d=identicon&r=PG&f=1", "display_name": "Janarth K", "link": "https://stackoverflow.com/users/4867868/janarth-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1430853309, "creation_date": 1430853309, "answer_id": 30061391, "question_id": 30061285, "link": "https://stackoverflow.com/questions/30061285/perl-use-command-not-found-when-run-from-bash-script/30061391#30061391", "title": "Perl &quot;use: command not found&quot; when run from bash script", "body": "<p>Removing '#!/usr/bin/bash' would be a good idea as it is redundant.\nCalling '/usr/bin/perl Info.pl' in your script may fix the issue.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1430854638, "post_id": 30061660, "comment_id": 48238581, "body": "The standard Perl distribution installers will add that to scripts when it installs them"}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430855960, "post_id": 30061660, "comment_id": 48239407, "body": "@ikegami Ah, so that&#39;s where it comes from. Thank you!"}, {"owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "edited": false, "score": 0, "creation_date": 1430856129, "post_id": 30061660, "comment_id": 48239498, "body": "Thank you. I&#39;ll mark this answer as correct since its more explanatory than the other one (though the other one was first)."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 3, "creation_date": 1430857275, "post_id": 30061660, "comment_id": 48240177, "body": "If this solved the problem I&#39;d still like to know what was going on. Was the path correct? Was the shebang line correct? Was the script executable? Was it being sourced (<code>. Info.pl</code> or <code>. .&#47;Info.pl</code>) instead of being executed (`./Info.pl&#39;)? Something else?"}], "tags": [], "owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "is_accepted": true, "score": 2, "last_activity_date": 1430854231, "last_edit_date": 1495540706, "creation_date": 1430854231, "answer_id": 30061660, "question_id": 30061285, "link": "https://stackoverflow.com/questions/30061285/perl-use-command-not-found-when-run-from-bash-script/30061660#30061660", "title": "Perl &quot;use: command not found&quot; when run from bash script", "body": "<p>As has been told in the comments, your script for some reason is getting executed via shell. You can study why it is so and fix it. </p>\n\n<p>Or you can work around using the following trick:</p>\n\n<pre><code>#!/usr/bin/perl\n\neval 'exec /usr/bin/perl \"$0\" \"$@\"'\n    if 0; # not running under some shell\n\nprint \"Args: @ARGV\\n\";\n</code></pre>\n\n<p>If this script is evaluated via perl, <code>if 0;</code> line prevents the eval from execution. </p>\n\n<p>However, shell doesn't have postfix conditions, so it just executes the first line, which runs the correct interpreter. </p>\n\n<p>In fact, a number, no, a <strong>NUMBER</strong> of perl scripts start that way. Google this \"not running under some shell\" for examples (and an <a href=\"https://stackoverflow.com/questions/9143726/what-means-not-running-under-some-shell-in-perl-scripts\">explanation</a> on SO). </p>\n"}], "owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8191, "favorite_count": 0, "accepted_answer_id": 30061660, "answer_count": 2, "score": -1, "last_activity_date": 1537402531, "creation_date": 1430852960, "last_edit_date": 1537402531, "question_id": 30061285, "link": "https://stackoverflow.com/questions/30061285/perl-use-command-not-found-when-run-from-bash-script", "title": "Perl &quot;use: command not found&quot; when run from bash script", "body": "<p>I have a Perl script <code>Info.perl</code> which starts like this</p>\n\n<pre><code>#!/usr/bin/perl\n#!/usr/bin/bash\n\nuse List::Util qw( min max );\nuse List::MoreUtils qw{ all any };\nuse Cwd;\nuse Data::Dumper qw(Dumper);\nuse Env qw(INFODIR CONFDIR PROCDIR);\n</code></pre>\n\n<p>And when I run it from the terminal it gives no problem and works as expected.</p>\n\n<p>But then I have a bash script <code>run.sh</code> that only has in it</p>\n\n<pre><code>./Info.pl\n</code></pre>\n\n<p>And when I run this script I get the following error</p>\n\n<pre><code>./Info.pl: line 4: syntax error near unexpected token `('\n./Info.pl: line 4: `use List::Util qw( min max );'\n</code></pre>\n\n<p>If I omit line 4 I get the following message:</p>\n\n<pre><code>./Info.pl: line 5: use: command not found\n./Info.pl: line 6: use: command not found\n./Info.pl: line 7: syntax error near unexpected token `('\n./Info.pl: line 7: `use Data::Dumper qw(Dumper);'\n</code></pre>\n\n<p>Is there any special way I need to run the Perl script inside the bash script? Or any special way to use the <code>use</code> command?</p>\n"}, {"tags": ["perl", "auto-increment"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 5, "creation_date": 1430852620, "post_id": 30061091, "comment_id": 48237398, "body": "How is <code>aa -&gt; ab</code> related to autovivification?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1430853033, "post_id": 30061091, "comment_id": 48237622, "body": "Perhaps due to range <code>..</code> operator. <code>perl -E &#39;say for &quot;aa&quot; .. &quot;af&quot;&#39;</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430855298, "post_id": 30061091, "comment_id": 48239011, "body": "<code>$records{a}++</code> increments the <i>value</i> stored in <code>$records{a}</code>, not the key itself (<code>a</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 1848669, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f6c5febfced18393cd2bb875cdf9462b?s=128&d=identicon&r=PG", "display_name": "Edward Barnard", "link": "https://stackoverflow.com/users/1848669/edward-barnard"}, "edited": false, "score": 0, "creation_date": 1430865881, "post_id": 30061197, "comment_id": 48243729, "body": "I had to follow the link to realize you&#39;re referring to split(1). Nicely played!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1430852688, "creation_date": 1430852688, "answer_id": 30061197, "question_id": 30061091, "link": "https://stackoverflow.com/questions/30061091/why-does-perl-string-auto-increment-magic-behavior-exist/30061197#30061197", "title": "Why does perl string auto-increment magic behavior exist?", "body": "<p>Maybe to make emulation of <a href=\"http://unixhelp.ed.ac.uk/CGI/man-cgi?split\" rel=\"nofollow\">split</a> easy?</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1430853999, "last_edit_date": 1430853999, "creation_date": 1430853644, "answer_id": 30061487, "question_id": 30061091, "link": "https://stackoverflow.com/questions/30061091/why-does-perl-string-auto-increment-magic-behavior-exist/30061487#30061487", "title": "Why does perl string auto-increment magic behavior exist?", "body": "<p>I suggest that it is there just <em>because it is useful</em>, and that it is no more <em>magical</em> than the simple integer increment</p>\n\n<p>I have no idea of the truth, but I can imagine that, while Perl was in development, the programmers came across the problem of what to do when applying <code>++</code> to a scalar variable that contains only a string. And, rather than raise an exception, someone decided that it would be good to implement string incrementation</p>\n\n<p>Many <em>things</em> in programming are sequenced in exactly this fashion, and someone \u2014 maybe Larry \u2014 thought it would be a Good Idea to build that facility into the language. It is the sort of facility that may seem worthless until you need it, after which it is invaluable. Would you like to code that for yourself, and override the <code>++</code> operator? </p>\n\n<p>I find it very useful, and I guess I use it up to a dozen times a year, all for different reasons. I tried to search my software archive but it's a hard thing to find by string match!</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1430853985, "creation_date": 1430853985, "answer_id": 30061589, "question_id": 30061091, "link": "https://stackoverflow.com/questions/30061091/why-does-perl-string-auto-increment-magic-behavior-exist/30061589#30061589", "title": "Why does perl string auto-increment magic behavior exist?", "body": "<blockquote>\n  <p>Why was the magic behavior added to Perl in the first place?</p>\n</blockquote>\n\n<p>Because it is useful. At the very least, it can be used to create non-numeric unique ids.</p>\n\n<blockquote>\n  <p>The most likely explanation that I can find is to support autovivication. </p>\n</blockquote>\n\n<p>There's no relation between it and autovivification or references in general.</p>\n\n<blockquote>\n  <p>That is, it's relatively common to auto-increment a generated hash key. </p>\n</blockquote>\n\n<p>Sure, if string <code>++</code> is used create unique ids, you might use a hash to lookup by id.</p>\n"}], "owner": {"reputation": 346, "user_id": 1848669, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f6c5febfced18393cd2bb875cdf9462b?s=128&d=identicon&r=PG", "display_name": "Edward Barnard", "link": "https://stackoverflow.com/users/1848669/edward-barnard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 30061589, "answer_count": 3, "score": 0, "last_activity_date": 1430856359, "creation_date": 1430852326, "last_edit_date": 1495539814, "question_id": 30061091, "link": "https://stackoverflow.com/questions/30061091/why-does-perl-string-auto-increment-magic-behavior-exist", "title": "Why does perl string auto-increment magic behavior exist?", "body": "<p>In perl, the string \"aa\" can be auto-incremented to become \"ab\" when various specific conditions are met. PHP has similar behavior, and references Perl, which I take to mean that the earlier use is with Perl.</p>\n\n<p>Why was the magic behavior added to Perl in the first place?</p>\n\n<p>An example discussion is here: <a href=\"https://stackoverflow.com/questions/6458068/increment-and-decrement-strings-in-perl\">Increment (++) and decrement (--) strings in Perl</a> which notes that the perl docs do not give a rationale.</p>\n\n<p>And that's my question: What was the original rationale behind creating the string auto-increment \"magic\" behavior?</p>\n\n<p>2ND EDIT: This has nothing to do with autovivification. In researching possible answers to my rationale question, I misinterpreted what I was reading. Thanks ThisSuitIsBlackNot for pointing that out, and choroba for asking what I meant.</p>\n\n<p>I completely agree that the feature IS useful, and I do use it whenever I make a reasonable excuse to do so, primarily as a generator of unique non-numeric tags/keys. I'm still wondering if there WAS a specific rationale or use case it was originally aimed at. We may never know!</p>\n"}, {"tags": ["perl", "tshark"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1430850956, "post_id": 30060626, "comment_id": 48236436, "body": "what error code do you get from <code>system</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 0, "last_activity_date": 1430851503, "creation_date": 1430851503, "answer_id": 30060857, "question_id": 30060626, "link": "https://stackoverflow.com/questions/30060626/running-tshark-in-perl-script/30060857#30060857", "title": "Running tshark in perl script", "body": "<p>Assuming <code>port 68 or 67</code> is a legal value for <code>-f</code>, you need quotes to treat it as one entity (a value which contains whitespace):</p>\n\n<pre><code>my $filter = \"port 68 or 67\";\nmy $capture = \"tshark -i eth0 -f '$filter' -a duration:120 -w pcapture.pcap&amp;\";\nsystem($capture);\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 1060517, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/171a148f3614f942e349a91c55f99ecf?s=128&d=identicon&r=PG", "display_name": "user1060517", "link": "https://stackoverflow.com/users/1060517/user1060517"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1430852747, "creation_date": 1430850603, "last_edit_date": 1430852747, "question_id": 30060626, "link": "https://stackoverflow.com/questions/30060626/running-tshark-in-perl-script", "title": "Running tshark in perl script", "body": "<p>I am trying to run tshark in a perl script, simply by doing the following -</p>\n\n<pre><code>my $filter = \"port 68 or 67\";\nmy $capture = \"tshark -i eth0 -f $filter -a duration:120 -w pcapture.pcap&amp;\";\nsystem($capture);\n</code></pre>\n\n<p>This code is not starting the tshark process. Any changes recommended?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430843798, "post_id": 30058537, "comment_id": 48231888, "body": "Surely the <code>else</code> condition does that?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430845149, "post_id": 30058537, "comment_id": 48232752, "body": "I tried to amend your question but I&#39;m not sure I understand you. You say <i>&quot;I am trying to set the <code>flag</code> to <code>0</code> if my <code>$location</code> has string <code>\\foo\\HELLO</code>&quot;</i> and you say that it works. Yet your code sets <code>$flag</code> to 1 in that case. You then go on to say <i>&quot;I want to set the <code>flag</code> to <code>0</code> if <code>$location</code> has <code>\\foo\\*</code>&quot;</i> \u2014 do you mean <code>&#47;foo&#47;*</code>?"}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430845675, "post_id": 30058537, "comment_id": 48233026, "body": "@Borodin : Updated the question. Sorry for confusion caused"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430852797, "post_id": 30058537, "comment_id": 48237495, "body": "You should also show the output that you require given the input data in <code>@locations</code>. You don&#39;t show and code that <i>uses</i> <code>$flag</code>, so it is hard to formulate a proper solution"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1430843914, "creation_date": 1430843914, "answer_id": 30058626, "question_id": 30058537, "link": "https://stackoverflow.com/questions/30058537/perl-regex-to-match-string-starting-with-pattern/30058626#30058626", "title": "perl regex to match string starting with pattern", "body": "<p>You are in <code>else</code>, so you already know it doesn't have <code>/foo/HELLO</code>. So just verify <code>/foo/</code> is still there:</p>\n\n<pre><code>} elsif ($location =~ m=/foo/=) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1430849205, "last_edit_date": 1430849205, "creation_date": 1430845562, "answer_id": 30059100, "question_id": 30058537, "link": "https://stackoverflow.com/questions/30058537/perl-regex-to-match-string-starting-with-pattern/30059100#30059100", "title": "perl regex to match string starting with pattern", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow\">grep</a> and <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\">map</a> to construct a hash of the strings and the associated flag values:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper qw(Dumper);\n\nmy @locations= (\n  \"/path/with/foo/HELLO\",\n  \"/path/with/foo/def-abc-addons.install\",\n  \"/path/with/foo/def-abc-addons.lintian-overrides\",\n  \"/path/with/foo/def-abc-addons.postrm\",\n  \"/abc/def/ggfg\",\n  \"/frgrg/hjytj/dgth\",\n);\n\nmy %h = map { $_ =~ m|/foo/HELLO| ? ($_ =&gt; 1) : ($_=&gt;0)  } grep {m|/foo/\\w+|} @locations;\n\nprint Dumper \\%h;\n</code></pre>\n\n<p>Now <code>%h</code>:</p>\n\n<pre><code>    {\n      '/path/with/foo/def-abc-addons.install' =&gt; 0,\n      '/path/with/foo/def-abc-addons.lintian-overrides' =&gt; 0,\n      '/path/with/foo/def-abc-addons.postrm' =&gt; 0,\n      '/path/with/foo/HELLO' =&gt; 1\n    };\n</code></pre>\n\n<p>Just change the regex's to suit what you are trying to accomplish.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430852564, "creation_date": 1430852564, "answer_id": 30061158, "question_id": 30058537, "link": "https://stackoverflow.com/questions/30058537/perl-regex-to-match-string-starting-with-pattern/30061158#30061158", "title": "perl regex to match string starting with pattern", "body": "<p>I <em>think</em> what you're looking for is to filter those files that have <code>/foo/</code> but not <code>/foo/HELLO/</code> within the path. You can do that with the <code>grep</code> operator, as below</p>\n\n<p>This code needs more work if your requirement is tighter than you describe. There are many edge cases and pitfalls here, and none of them are addressed. For instance, if the path contains <code>/foo/HELLONWHEELS</code> then it will be rejected, and that may or may not be your intention</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nmy @locations= qw(\n  /path/with/foo/HELLO\n  /path/with/foo/def-abc-addons.install\n  /path/with/foo/def-abc-addons.lintian-overrides\n  /path/with/foo/def-abc-addons.postrm\n  /abc/def/ggfg\n  /frgrg/hjytj/dgth\n);\n\nsay for grep m{ /foo/ (?!HELLO) }x, @locations;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>/path/with/foo/def-abc-addons.install\n/path/with/foo/def-abc-addons.lintian-overrides\n/path/with/foo/def-abc-addons.postrm\n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 30058626, "answer_count": 3, "score": 0, "last_activity_date": 1430852564, "creation_date": 1430843620, "last_edit_date": 1430845594, "question_id": 30058537, "link": "https://stackoverflow.com/questions/30058537/perl-regex-to-match-string-starting-with-pattern", "title": "perl regex to match string starting with pattern", "body": "<p>I have the below perl code. I am trying to set the <code>flag</code> to <code>1</code> if my <code>$location</code> has string <code>/foo/HELLO</code>, which is working fine. But now I want to set the <code>flag</code> to <code>0</code> if <code>$location</code> has <code>/foo/*</code> (it has <code>/foo/</code> and anything after it <strong><em>except HELLO</em></strong>)</p>\n\n<p>How can I frame my regex in <code>else</code> condition to achieve it?</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $flag =0;\n\nmy @locations= (\n  \"/path/with/foo/HELLO\",\n  \"/path/with/foo/def-abc-addons.install\",\n  \"/path/with/foo/def-abc-addons.lintian-overrides\",\n  \"/path/with/foo/def-abc-addons.postrm\",\n  \"/abc/def/ggfg\",\n  \"/frgrg/hjytj/dgth\",\n);\n\nforeach my $location(@locations){\n   if ($location =~ m/\\/foo\\/HELLO/) {\n       print 'match';\n       $flag=1;\n    } else {\n      print 'no match';\n      $flag=0\n    } \n }  \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 5, "creation_date": 1430843437, "post_id": 30058466, "comment_id": 48231695, "body": "<a href=\"http://perldoc.perl.org/functions/stat.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/stat.html</a>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1430843942, "post_id": 30058466, "comment_id": 48231979, "body": "Also: <code>strict</code> and <code>warnings</code> are strongly recommended."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1430846939, "post_id": 30058541, "comment_id": 48233853, "body": "<code>-M</code> returns how long it&#39;s been since the file has been modified. It doesn&#39;t return its age. This is impossible, since the OS doesn&#39;t keep track of when the file was created."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430856985, "post_id": 30058541, "comment_id": 48239995, "body": "@ikegami Is there no portable perl version of something like <code>stat -f %c</code> because various OS versions can&#39;t  distinguish inode &quot;birthtime&quot; from &quot;changetime&quot; ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1430857233, "post_id": 30058541, "comment_id": 48240154, "body": "@G. Cito,That doesn&#39;t even work on my GNU/linux. But yeah, the information is simply not there on some systems. I think creation date exists in the Windows world, but it&#39;s rare elsewhere."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1430858177, "post_id": 30058541, "comment_id": 48240696, "body": "I thought perhaps it was an optional and not always implemented part of POSIX but it appears to be file system specific <a href=\"http://serverfault.com/questions/351836/whats-birth-field-in-stat-command-output\">Fedora Ext4</a>.  I&#39;m pretty sure NTFS and ZFS support &quot;birthtime&quot; (and maybe even UFS with optional flags) but not all file system tools can read it.  Anyway off topic so I will cease to digress :-)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 4, "last_activity_date": 1430843634, "creation_date": 1430843634, "answer_id": 30058541, "question_id": 30058466, "link": "https://stackoverflow.com/questions/30058466/delete-folders-older-than-12-hours-in-perl/30058541#30058541", "title": "delete folders older than 12 hours in perl", "body": "<p><code>-M</code> returns the age of a file/directory in days, so</p>\n\n<pre><code>print $dir, \"\\n\" if 0.5 &lt; -M $dir;\n</code></pre>\n\n<p>See the documentation: <a href=\"http://p3rl.org/-X\" rel=\"nofollow\">-X</a></p>\n"}, {"tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1430843720, "creation_date": 1430843720, "answer_id": 30058568, "question_id": 30058466, "link": "https://stackoverflow.com/questions/30058466/delete-folders-older-than-12-hours-in-perl/30058568#30058568", "title": "delete folders older than 12 hours in perl", "body": "<p>Use <a href=\"http://p3rl.org/stat\" rel=\"nofollow\"><code>stat</code></a> to retrieve modification time of folder and compare it to current time to see if difference is more than 12 hours.</p>\n\n<p>You might also be interested in <a href=\"http://p3rl.org/File::Remove\" rel=\"nofollow\"><code>File::Remove</code></a> module if the folders that you want to remove are non-empty.</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 553730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272a64855b068de155abf613ad86ed24?s=128&d=identicon&r=PG", "display_name": "fvox", "link": "https://stackoverflow.com/users/553730/fvox"}, "is_accepted": false, "score": -1, "last_activity_date": 1430844051, "creation_date": 1430844051, "answer_id": 30058677, "question_id": 30058466, "link": "https://stackoverflow.com/questions/30058466/delete-folders-older-than-12-hours-in-perl/30058677#30058677", "title": "delete folders older than 12 hours in perl", "body": "<p>You really want to use Perl? So, ok. :P</p>\n\n<pre><code>find . -type f -mmin +$((12*60)) -print0 | perl -n0e unlink\n</code></pre>\n"}], "owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 30058568, "answer_count": 3, "score": 1, "last_activity_date": 1430852286, "creation_date": 1430843387, "question_id": 30058466, "link": "https://stackoverflow.com/questions/30058466/delete-folders-older-than-12-hours-in-perl", "title": "delete folders older than 12 hours in perl", "body": "<p>I need to delete folders older than 12 hours.</p>\n\n<p>Here is my code, not complete of course. I don't know how to see the \"age\" of each folder in perl. </p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse v5.10.0;                                      \nuse File::Copy;\nuse POSIX 'strftime';\nuse File::Temp;\n\n\n\nmy $lapso  = 12;  #### is the limit of \"age\" in hours\nmy $hour = strftime(\"%H\", localtime(time)); \nsay \"$hour\";\nmy $limit = strftime \"%Y%m%d$H\", localtime( time - $lapso * 3_600 );\nsay \"$limit\"; #I get the limit of data \n\nmy $dir    = '/home/sim/data/';\nopendir(DIR,\"$dir\");\n@files = readdir(DIR);\nforeach $file (@files){\nprint $file, \"\\n\";\n}\nclosedir(DIR)\n</code></pre>\n\n<p>And not I need to compare the data of the folders with the $limit....</p>\n\n<p>any help?</p>\n"}, {"tags": ["regex", "bash", "perl", "newline"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1430842507, "post_id": 30057755, "comment_id": 48231088, "body": "You can use the <code>\\Q ... \\E</code> escape here to make escaping meta characters simpler."}], "answers": [{"comments": [{"owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "edited": false, "score": 0, "creation_date": 1430841796, "post_id": 30057875, "comment_id": 48230641, "body": "That&#39;s what I had thought originally, but I was under the impression that it somehow worked on the entire file from another stackoverflow answer. The file isn&#39;t too large to fit in memory, but maybe it would be better to use AWK in two passes or something like that"}, {"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "reply_to_user": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "edited": false, "score": 0, "creation_date": 1430841856, "post_id": 30057875, "comment_id": 48230682, "body": "You can also add <code>BEGIN { undef $&#47; }</code> which means &quot;read the whole file as a string&quot;."}, {"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "reply_to_user": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "edited": false, "score": 0, "creation_date": 1430841882, "post_id": 30057875, "comment_id": 48230703, "body": "In that case you can use <code>-i</code> to modify file &quot;in place&quot;."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 3, "creation_date": 1430841934, "post_id": 30057875, "comment_id": 48230744, "body": "@VadimPushtaev Or since it is a one-liner, use the command line switch <code>-0777</code> for &quot;slurp mode&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1430841953, "post_id": 30057875, "comment_id": 48230755, "body": "@VadimPushtaev: That is traditionally written as <code>perl -0777</code> for one-line Perl programs"}], "tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1430841521, "creation_date": 1430841521, "answer_id": 30057875, "question_id": 30057755, "link": "https://stackoverflow.com/questions/30057755/delete-blank-line-before-a-pattern-whats-wrong-currently-using-perl-but-open/30057875#30057875", "title": "Delete blank line before a pattern. What&#39;s wrong? Currently using Perl but open to sed/AWK", "body": "<p><code>perl -p</code> processes a file <em>string by string</em>, so you can't expect this regex to match.</p>\n\n<p>I would recommend something like </p>\n\n<pre><code>perl -e '$text = join \"\", &lt;&gt;; $text =~ s/your_regex_here//; print $text' test.txt\n</code></pre>\n\n<p>Mind that it loads the whole file to memory.</p>\n\n<p>Also, if you want to modify file immediately, you can't just say <code>&gt; test.txt</code>, see <a href=\"https://serverfault.com/questions/135507/linux-how-to-use-a-file-as-input-and-output-at-the-same-time/\">this question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1430842596, "creation_date": 1430842596, "answer_id": 30058227, "question_id": 30057755, "link": "https://stackoverflow.com/questions/30057755/delete-blank-line-before-a-pattern-whats-wrong-currently-using-perl-but-open/30058227#30058227", "title": "Delete blank line before a pattern. What&#39;s wrong? Currently using Perl but open to sed/AWK", "body": "<p>You can use the <code>-0</code> (digit zero) switch with Perl to specify the line separator. Traditionally <code>-0777</code> is used to read the entire file</p>\n\n<p>You also need to be careful about regex metacharacters in your search string. Characters like <code>*</code>, <code>{</code>, <code>}</code> and <code>\\</code> mean something special within a regex pattern, and you should escape them \u2014 usually with a <code>\\Q</code> ... <code>\\E</code> construct</p>\n\n<p>Taking these points into account, this should work for you</p>\n\n<pre><code>perl -0777 -pe' s/\\n+(?=\\Q\\begin{enumerate*}\\E)/ / ' myfile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "is_accepted": false, "score": 0, "last_activity_date": 1430847028, "creation_date": 1430847028, "answer_id": 30059554, "question_id": 30057755, "link": "https://stackoverflow.com/questions/30057755/delete-blank-line-before-a-pattern-whats-wrong-currently-using-perl-but-open/30059554#30059554", "title": "Delete blank line before a pattern. What&#39;s wrong? Currently using Perl but open to sed/AWK", "body": "<p>I found a solution with sed (number 25 on <a href=\"http://www.theunixschool.com/2012/06/sed-25-examples-to-delete-line-or.html\" rel=\"nofollow\">this page</a>) that doesn't read the entire file into memory:</p>\n\n<pre><code>sed -i bak -n '/^\\\\begin{enumerate\\*}/{x;d;};1h;1!{x;p;};${x;p;}' test.tex\n</code></pre>\n\n<p>The downside is that this doesn't actually join the two lines; instead it produces </p>\n\n<pre><code>Text in paragraphs.\n\nMore text\n\\begin{enumerate*} \\item thing\n</code></pre>\n\n<p>which is good enough for what I need (latex treats single newlines the same as regular spaces)</p>\n"}], "owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1430847118, "creation_date": 1430841190, "last_edit_date": 1430847118, "question_id": 30057755, "link": "https://stackoverflow.com/questions/30057755/delete-blank-line-before-a-pattern-whats-wrong-currently-using-perl-but-open", "title": "Delete blank line before a pattern. What&#39;s wrong? Currently using Perl but open to sed/AWK", "body": "<p>In a long document, I want to selectively delete the particular newlines that precede the exact string <code>\\begin{enumerate*}</code>, ideally with a one-liner in bash or zsh.</p>\n\n<p>That is, I want to convert <strong>test.tex</strong>:</p>\n\n<pre><code>Text in paragraphs.\n\nMore text\n\n\\begin{enumerate*} \\item thing\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Text in paragraphs.\n\nMore text \\begin{enumerate*} \\item thing\n</code></pre>\n\n<p>with a one-liner like</p>\n\n<pre><code>cat test.tex | perl -p -e 's/\\n(?=(\\\\begin\\{enumerate\\*\\}))/ /'\n</code></pre>\n\n<p>or </p>\n\n<pre><code>cat test.tex | perl -p -e 's/\\n\\\\begin\\{enumerate\\*\\}/\\\\begin{enumerate*}/'\n</code></pre>\n\n<p>but I must be missing something because it doesn't make any change.</p>\n\n<p>I also clearly don't need a regular expression here. If there's a way to do this with exact string matching instead of regex, I'd rather use that way. For instance, in R I could do this with <code>sub(\"\\n\\\\begin{enumerate*}\", \"\\\\begin{enumerate*}\", fixed = TRUE)</code>.</p>\n"}, {"tags": ["linux", "bash", "perl", "replace"], "comments": [{"owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "edited": false, "score": 0, "creation_date": 1430841152, "post_id": 30057589, "comment_id": 48230187, "body": "<a href=\"http://serverfault.com/questions/135507/linux-how-to-use-a-file-as-input-and-output-at-the-same-time\" title=\"linux how to use a file as input and output at the same time\">serverfault.com/questions/135507/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 739986, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PWntp.jpg?s=128&g=1", "display_name": "Bas Goossen", "link": "https://stackoverflow.com/users/739986/bas-goossen"}, "edited": false, "score": 2, "creation_date": 1430841830, "post_id": 30057634, "comment_id": 48230665, "body": "Thanks a lot, for this quick answer! you saved my day. The problem is solved using the -in-line replacement option, i&#39;ll update the question when possible!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 6, "last_activity_date": 1430840905, "creation_date": 1430840905, "answer_id": 30057634, "question_id": 30057589, "link": "https://stackoverflow.com/questions/30057589/perl-replace-produces-empty-file-from-script-not-from-bash/30057634#30057634", "title": "Perl replace produces empty file from script, not from bash", "body": "<p>Your problem is almost certainly:</p>\n\n<pre><code> &gt; ~/.config/google-chrome/Default/Preferences\n</code></pre>\n\n<p>Because that <code>&gt;</code> says 'truncate the file'. And worse - it does this <em>first</em> before starting to read it. So you truncate the file before reading it, resulting in a zero length file feeding into a zero length file. </p>\n\n<p>I would suggest you want to do this exclusively in perl, rather than a halfway house. <code>perl</code> supports the <code>-i</code> option for an \"in place edit\". </p>\n\n<p>Or just write your script in <code>perl</code> to start with. (If give sample input and output, knocking up an example that'll do what you want will be quite straightforward). </p>\n"}, {"tags": [], "owner": {"reputation": 481, "user_id": 2744184, "user_type": "registered", "profile_image": "https://graph.facebook.com/1178140189/picture?type=large", "display_name": "Steven Koch", "link": "https://stackoverflow.com/users/2744184/steven-koch"}, "is_accepted": false, "score": 1, "last_activity_date": 1430842474, "creation_date": 1430842474, "answer_id": 30058193, "question_id": 30057589, "link": "https://stackoverflow.com/questions/30057589/perl-replace-produces-empty-file-from-script-not-from-bash/30058193#30058193", "title": "Perl replace produces empty file from script, not from bash", "body": "<p>If you need search and replace some text I suggest use:</p>\n\n<pre><code>ack -l --print0 '2011...' ~/.config/google-chrome/Default/Preferences | xargs -0 -n 1 sed -i -e 's/2011../2015.../g'\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 739986, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PWntp.jpg?s=128&g=1", "display_name": "Bas Goossen", "link": "https://stackoverflow.com/users/739986/bas-goossen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 30057634, "answer_count": 2, "score": 2, "last_activity_date": 1430872144, "creation_date": 1430840785, "last_edit_date": 1430872144, "question_id": 30057589, "link": "https://stackoverflow.com/questions/30057589/perl-replace-produces-empty-file-from-script-not-from-bash", "title": "Perl replace produces empty file from script, not from bash", "body": "<p>I'm getting pretty frustrated with this problem at the moment. I can't see what I'm doing wrong. I have this problem with google chrome that it gives a notice of not being shut down properly. I want to get rid of this. Also I have some older replaces that have to do with full screen size. In bash, all the lines produce the expected result; however, in a script file, it produces an empty settings file...</p>\n\n<p>These lines are in the file:</p>\n\n<pre><code>cat ~/.config/google-chrome/Default/Preferences | perl -pe \"s/\\\"work_area_bottom.*/\\\"work_area_bottom\\\": $(xrandr | grep \\* | cut -d' ' -f4 | cut -d'x' -f2),/\" &gt; ~/.config/google-chrome/Default/Preferences\ncat ~/.config/google-chrome/Default/Preferences | perl -pe \"s/\\\"bottom.*/\\\"bottom\\\": $(xrandr | grep \\* | cut -d' ' -f4 | cut -d'x' -f2),/\" &gt; ~/.config/google-chrome/Default/Preferences\ncat ~/.config/google-chrome/Default/Preferences | perl -pe \"s/\\\"work_area_right.*/\\\"work_area_right\\\": $(xrandr | grep \\* | cut -d' ' -f4 | cut -d'x' -f1),/\" &gt; ~/.config/google-chrome/Default/Preferences\ncat ~/.config/google-chrome/Default/Preferences | perl -pe \"s/\\\"right.*/\\\"right\\\": $(xrandr | grep \\* | cut -d' ' -f4 | cut -d'x' -f1),/\" &gt; ~/.config/google-chrome/Default/Preferences\ncat ~/.config/google-chrome/Default/Preferences | perl -pe \"s/\\\"exit_type.*/\\\"exit_type\\\": \\\"Normal\\\",/\" &gt; ~/.config/google-chrome/Default/Preferences\ncat ~/.config/google-chrome/Default/Preferences | perl -pe \"s/\\\"exited_cleanly.*/\\\"exited_cleanly\\\": true,/\" &gt; ~/.config/google-chrome/Default/Preferences\n</code></pre>\n\n<p>I've been googling a lot for this issue; however, I do not get the right search words to get a helpful result.</p>\n\n<p>Problem is solved by using the <code>perl -p -i -e</code> option like so:</p>\n\n<pre><code>perl -p -i -e \"s/\\\"exit_type.*/\\\"exit_type\\\": \\\"Normal\\\",/\" ~/.config/google_chrome/Default/Preferences\n</code></pre>\n\n<p>The above line is enough to get rid of the Google chrome message of incorrect shutdown</p>\n"}, {"tags": ["javascript", "html", ".net", "perl", "dom"], "comments": [{"owner": {"reputation": 1483, "user_id": 1193146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d7ba33728728aa354f0451d704afdf?s=128&d=identicon&r=PG", "display_name": "devstruck", "link": "https://stackoverflow.com/users/1193146/devstruck"}, "edited": false, "score": 0, "creation_date": 1430839525, "post_id": 30057042, "comment_id": 48228949, "body": "Many sites currently under development (or developed in the past few years) use HTML5.  Are you only concerned about HTML5 or do you want to handle HTML4, XHTML, and/or microformats as well?"}, {"owner": {"reputation": 2651, "user_id": 3504735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GzCWu.png?s=128&g=1", "display_name": "tiblu", "link": "https://stackoverflow.com/users/3504735/tiblu"}, "edited": false, "score": 1, "creation_date": 1430839540, "post_id": 30057042, "comment_id": 48228965, "body": "If the &quot;small change&quot; is really a small change, why not read the file to a string variable, use your language provided string replacement functions or/and regular expressions."}, {"owner": {"reputation": 28426, "user_id": 791010, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRxuE.png?s=128&g=1", "display_name": "James Thorpe", "link": "https://stackoverflow.com/users/791010/james-thorpe"}, "reply_to_user": {"reputation": 2651, "user_id": 3504735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GzCWu.png?s=128&g=1", "display_name": "tiblu", "link": "https://stackoverflow.com/users/3504735/tiblu"}, "edited": false, "score": 2, "creation_date": 1430839610, "post_id": 30057042, "comment_id": 48229019, "body": "@tiblu Depending on the requirements here, something that is trivial with a DOM parser (find attribute X on the 3rd Y element contained within Z) could be an absolute nightmare with standard string/regex functions"}, {"owner": {"reputation": 579, "user_id": 1078146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7965297f26702f6d0610df5de45a1abb?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1078146/andre"}, "edited": false, "score": 0, "creation_date": 1430892249, "post_id": 30057042, "comment_id": 48251640, "body": "I want to handle HTML4 (no XHTML which would be much easier, no microformats). The actual task is to check and fix cross references (ids and id refs) within a wide set of quite large HTML documents and, as James Thorpe indicated, I do not think that Regex is a suitable tool for the task. I adjusted my question and removed the focus on .NET as I like the approach using a Javascript runtime."}], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 1078146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7965297f26702f6d0610df5de45a1abb?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1078146/andre"}, "edited": false, "score": 0, "creation_date": 1430893172, "post_id": 30057727, "comment_id": 48252049, "body": "I will give Phantom a shot. I like the idea of using the DOM implementation of a web browser. I hope it provides enough options on preserving whitespace etc."}, {"owner": {"reputation": 579, "user_id": 1078146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7965297f26702f6d0610df5de45a1abb?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1078146/andre"}, "edited": false, "score": 0, "creation_date": 1430895313, "post_id": 30057727, "comment_id": 48253242, "body": "Turns out it does not provide options for preserving whitespace etc."}, {"owner": {"reputation": 2005, "user_id": 2897573, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IpcLM.jpg?s=128&g=1", "display_name": "saj", "link": "https://stackoverflow.com/users/2897573/saj"}, "reply_to_user": {"reputation": 579, "user_id": 1078146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7965297f26702f6d0610df5de45a1abb?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1078146/andre"}, "edited": false, "score": 0, "creation_date": 1430962354, "post_id": 30057727, "comment_id": 48293708, "body": "shame, i&#39;ll see if i can find more, ps keep posting updates curious as i may have to do similar"}], "tags": [], "owner": {"reputation": 2005, "user_id": 2897573, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IpcLM.jpg?s=128&g=1", "display_name": "saj", "link": "https://stackoverflow.com/users/2897573/saj"}, "is_accepted": false, "score": 0, "last_activity_date": 1430841122, "last_edit_date": 1495541196, "creation_date": 1430841122, "answer_id": 30057727, "question_id": 30057042, "link": "https://stackoverflow.com/questions/30057042/how-to-load-and-parse-html-without-modifying-its-contents/30057727#30057727", "title": "How to load and parse HTML without modifying its contents", "body": "<p><a href=\"http://en.wikipedia.org/wiki/Comparison_of_HTML_parsers\" rel=\"nofollow noreferrer\">comparison</a></p>\n\n<p>If you want to get really serious leave out the GUI and go headless, <a href=\"https://stackoverflow.com/questions/6865292/applying-dom-manipulations-to-html-and-saving-the-result\">SO</a> example with <a href=\"http://phantomjs.org/\" rel=\"nofollow noreferrer\">Phantom</a></p>\n"}, {"tags": [], "owner": {"reputation": 579, "user_id": 1078146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7965297f26702f6d0610df5de45a1abb?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1078146/andre"}, "is_accepted": true, "score": 0, "last_activity_date": 1431069994, "creation_date": 1431069994, "answer_id": 30118162, "question_id": 30057042, "link": "https://stackoverflow.com/questions/30057042/how-to-load-and-parse-html-without-modifying-its-contents/30118162#30118162", "title": "How to load and parse HTML without modifying its contents", "body": "<p>I am going with the <a href=\"http://htmlagilitypack.codeplex.com/\" rel=\"nofollow\">HTML Agility Pack</a>.\nLoading and saving does not manipulate anything else than invalid parts.</p>\n"}], "owner": {"reputation": 579, "user_id": 1078146, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7965297f26702f6d0610df5de45a1abb?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1078146/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 30118162, "answer_count": 2, "score": 1, "last_activity_date": 1431069994, "creation_date": 1430839216, "last_edit_date": 1430892482, "question_id": 30057042, "link": "https://stackoverflow.com/questions/30057042/how-to-load-and-parse-html-without-modifying-its-contents", "title": "How to load and parse HTML without modifying its contents", "body": "<p>There are many ways to parse and traverse HTML4 files using many technologies. But I can not find a <em>suitable</em> one to save that DOM to file again.</p>\n\n<p>I want to be able to load an HTML file into a DOM, change one small thing (e.g. an attribute's value), save the DOM to file again and when diffing the source file and the created file, I want them to be completely identical, except that small change.</p>\n\n<p>This kind of task is absolutely no problem when working with XML and suitable XML libraries, but when it comes to HTML there are several issues: Whitespace such as indentations or linebreaks get lost or are inserted, self-closing start tags (such as <code>&lt;link...&gt;</code>) emerge as <code>&lt;link.../&gt;</code> and/or the content of CDATA sections (e.g. between <code>&lt;script&gt;</code> and <code>&lt;/script&gt;</code>) is wrapped into <code>&lt;![CDATA[</code> <code>]]&gt;</code>. These things are critical in my case.</p>\n\n<p>Which way can I go to load, traverse, manipulate and save HTML without the drawbacks described above, most importantly without whitespace text nodes to be altered?</p>\n"}, {"tags": ["perl", "file-find"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1430838145, "creation_date": 1430838145, "answer_id": 30056612, "question_id": 30056568, "link": "https://stackoverflow.com/questions/30056568/perl-list-path-of-subdirectory-using-filefind/30056612#30056612", "title": "perl list path of subdirectory using File::Find", "body": "<pre><code>use File::Find::Rule qw( );\n\nmy @paths = File::Find::Rule-&gt;name('foo')-&gt;in(@dirs);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1430840495, "creation_date": 1430840495, "answer_id": 30057471, "question_id": 30056568, "link": "https://stackoverflow.com/questions/30056568/perl-list-path-of-subdirectory-using-filefind/30057471#30057471", "title": "perl list path of subdirectory using File::Find", "body": "<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Find;\n\nmy @foo_paths;\n\nsub is_it_foo {\n   if ( m,^foo$, ) { \n       push ( @foo_paths, $File::Find::name ); \n   }\n}\n\nfind ( \\&amp;is_it_foo, \"abc/def\" ); \n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 30056612, "answer_count": 2, "score": -5, "last_activity_date": 1430840495, "creation_date": 1430838023, "question_id": 30056568, "link": "https://stackoverflow.com/questions/30056568/perl-list-path-of-subdirectory-using-filefind", "title": "perl list path of subdirectory using File::Find", "body": "<p>How can I get all the paths of a subdirectory <code>foo</code> into an array in perl using <code>File::Find</code></p>\n\n<pre><code> abc\\def\\sdfg\\gthrth\\foo\\\n abc\\def\\fgfdg\\foo\\\n abc\\def\\sdfgdsg\\fgdfg\\gfdgf\\tytty\\foo\\\n abc\\def\\foo\\\n</code></pre>\n\n<p>I want to get the full paths of all subdirectories <code>foo</code> inside directory <code>abc\\def</code> into an array</p>\n"}, {"tags": ["javascript", "html", "css", "perl", "template-toolkit"], "comments": [{"owner": {"reputation": 4733, "user_id": 811131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8tIRd.jpg?s=128&g=1", "display_name": "steven", "link": "https://stackoverflow.com/users/811131/steven"}, "edited": false, "score": 2, "creation_date": 1430837066, "post_id": 30056069, "comment_id": 48226925, "body": "maybe a line-break <code>\\n</code> has been converted to <code>&lt;br&gt;</code> somewhere. You should check for existing line-breaks in your source. And be shure that the posted source code is really the source for the inspected element."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "reply_to_user": {"reputation": 4733, "user_id": 811131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8tIRd.jpg?s=128&g=1", "display_name": "steven", "link": "https://stackoverflow.com/users/811131/steven"}, "edited": false, "score": 0, "creation_date": 1430837303, "post_id": 30056069, "comment_id": 48227155, "body": "I have checked again for <code>\\n</code> and posted source code is really the source for the inspected element,"}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1430838126, "post_id": 30056479, "comment_id": 48227877, "body": "On removing <code>&lt;br&gt;&lt;br&gt;&lt;br&gt;</code> simply spaces is removed as expected, I know that already."}, {"owner": {"reputation": 357, "user_id": 4807818, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-bdB4nrQfbvQ/AAAAAAAAAAI/AAAAAAAABVw/6tlBOZofzPM/photo.jpg?sz=128", "display_name": "Meeshal", "link": "https://stackoverflow.com/users/4807818/meeshal"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1430839056, "post_id": 30056479, "comment_id": 48228580, "body": "you should start it again from the beginning, it helps me.. might it can help you.. :p @AbhishekBhasker"}], "tags": [], "owner": {"reputation": 357, "user_id": 4807818, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-bdB4nrQfbvQ/AAAAAAAAAAI/AAAAAAAABVw/6tlBOZofzPM/photo.jpg?sz=128", "display_name": "Meeshal", "link": "https://stackoverflow.com/users/4807818/meeshal"}, "is_accepted": false, "score": -2, "last_activity_date": 1430837812, "creation_date": 1430837812, "answer_id": 30056479, "question_id": 30056069, "link": "https://stackoverflow.com/questions/30056069/brbrbr-getting-generated-and-showing-only-in-inspect-element/30056479#30056479", "title": "&lt;br&gt;&lt;br&gt;&lt;br&gt; getting generated and showing only in Inspect Element", "body": "<p>delete the <code>&lt;br&gt;....s</code> from inspect elements window, but don't close inspect element window then check if something has happened to your code if yes then again go to inspect element window and cross check now if both are same then you can rest and if not copy content of your file and save in different location and see what happens.</p>\n\n<p>these type of problem happens when you edit a part of code in inspect element window.</p>\n\n<p>hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 42, "user_id": 3497478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0cbcb78d560e15ca14b011e8f2bc92?s=128&d=identicon&r=PG", "display_name": "user3497478", "link": "https://stackoverflow.com/users/3497478/user3497478"}, "is_accepted": true, "score": 1, "last_activity_date": 1430838186, "creation_date": 1430838186, "answer_id": 30056628, "question_id": 30056069, "link": "https://stackoverflow.com/questions/30056069/brbrbr-getting-generated-and-showing-only-in-inspect-element/30056628#30056628", "title": "&lt;br&gt;&lt;br&gt;&lt;br&gt; getting generated and showing only in Inspect Element", "body": "<p>My best guess is that your editor has inserted the newlines. These are being translated to HTML line breaks. The newlines are not reflected in what you see because the actual codes representing a newline vary across operating systems</p>\n\n<p>On Unix platforms, the native newline sequence is ASCII LF, and '\\n' was simply defined to be that value.</p>\n\n<p>On Microsoft Windows, applications usually represent a newline with two control characters: CR+LF</p>\n"}], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 30056628, "answer_count": 2, "score": 0, "last_activity_date": 1430838186, "creation_date": 1430836831, "question_id": 30056069, "link": "https://stackoverflow.com/questions/30056069/brbrbr-getting-generated-and-showing-only-in-inspect-element", "title": "&lt;br&gt;&lt;br&gt;&lt;br&gt; getting generated and showing only in Inspect Element", "body": "<p>I am using perl with template toolkit to generate Web page and I changed some JS code on HTML file, After Editing there are <code>&lt;br&gt;&lt;br&gt;&lt;br&gt;</code> showed on UI and I have no Idea How and strange thing is that there is no <code>&lt;br&gt;&lt;br&gt;&lt;br&gt;</code> in source code, Only on Inspect element One can see  <code>&lt;br&gt;&lt;br&gt;&lt;br&gt;</code>.\n<br><br>\n<strong>Inspect Element:</strong><br></p>\n\n<pre><code>&lt;form name=\"data\" action=\"a.pl\" method=\"post\" onsubmit=\"return checkage();\"&gt;\n&lt;br&gt;&lt;br&gt;&lt;br&gt;\n&lt;table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"&gt;\n</code></pre>\n\n<p><strong>Source Code:</strong><br></p>\n\n<pre><code>&lt;form name=\"data\" action=\"a.pl\" method=\"post\" onsubmit=\"return checkage();\"&gt;\n&lt;table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"&gt;\n</code></pre>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430837594, "post_id": 30055956, "comment_id": 48227409, "body": "The answer depends on why you think you need threads."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1430837600, "post_id": 30055956, "comment_id": 48227417, "body": "Related: <a href=\"http://stackoverflow.com/q/9973860/176646\">Use cases for ithreads (interpreter threads) in Perl and rationale for using or not using them?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 7, "creation_date": 1430839230, "post_id": 30056027, "comment_id": 48228722, "body": "Just cause the docs aren&#39;t clear, Coro is a co-operative multi-tasking system. If you want to use threads to split CPU load across cores, it&#39;s not going to help. Any neither are event-based systems. They&#39;re useful when most tasks are spent waiting on external events."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 6, "creation_date": 1430841142, "post_id": 30056027, "comment_id": 48230177, "body": "Perl threads are perfectly reliable. They&#39;re just not a <i>light weight</i> thread that you might expect if you&#39;ve come from another language."}], "tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1430836728, "creation_date": 1430836728, "answer_id": 30056027, "question_id": 30055956, "link": "https://stackoverflow.com/questions/30055956/what-are-the-alternatives-to-perl-interpreter-threads/30056027#30056027", "title": "What are the alternatives to Perl interpreter threads?", "body": "<p>As long as I know, there are not any reliable thread implemantations. You should stick to some event-based modules, like <a href=\"https://metacpan.org/pod/release/MLEHMANN/Coro-6.42/Coro.pm\" rel=\"nofollow\">Coro</a>, <a href=\"https://metacpan.org/pod/AnyEvent\" rel=\"nofollow\">AnyEvent</a>, <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow\">IO::Async</a> etc.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1430841210, "post_id": 30056981, "comment_id": 48230221, "body": "Indeed. The biggest &quot;flaw&quot; I&#39;ve found is the assumption that they&#39;re lightweight, like they are in some other languages."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1541490563, "last_edit_date": 1541490563, "creation_date": 1430839054, "answer_id": 30056981, "question_id": 30055956, "link": "https://stackoverflow.com/questions/30055956/what-are-the-alternatives-to-perl-interpreter-threads/30056981#30056981", "title": "What are the alternatives to Perl interpreter threads?", "body": "<p>That warning is poppycock. It should be removed. The developers of Perl explained that it means \"The use of interpreter-based threads in perl is officially discouraged <em>if you want a lightweight system for multitasking</em>\".</p>\n\n<p>Since creating new threads can be expensive, just use a model that involves reusable worker threads.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 11, "last_activity_date": 1430841680, "last_edit_date": 1495541648, "creation_date": 1430841680, "answer_id": 30057935, "question_id": 30055956, "link": "https://stackoverflow.com/questions/30055956/what-are-the-alternatives-to-perl-interpreter-threads/30057935#30057935", "title": "What are the alternatives to Perl interpreter threads?", "body": "<p>Depends on what you're trying to accomplish. I still use threads extensively, and there isn't a massive problem with them.</p>\n\n<p>The biggest problem with them is that they are not lightweight, where if you've threaded in other languages, you might expect them to be. </p>\n\n<p>They're more the opposite - spawning a thread is like starting your code again, but with some useful hooks for IPC. That means you really don't want to be doing a task-per-thread model of program, like you might be thinking of. </p>\n\n<p>Instead, you would be much better served by a <code>Thread::Queue</code> worker-thread style model. Here's an example of that:\n<a href=\"https://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons/26297240#26297240\">Perl daemonize with child daemons</a></p>\n\n<p>However, you <em>may</em> want to consider using <code>fork</code> as an alternative. <code>fork</code> - because of it's implementation on Unix - is a very efficient system call, and can be quite efficient for spawning new processes. \nThe downside is - it's not quite as friendly for doing IPC. </p>\n\n<p><code>Parallel::ForkManager</code> is one module that I like for doing forking for multiprocessing. </p>\n\n<p>But in either case you should note - multiprocessing isn't a magic bullet. It lets you hog more CPUs <em>if</em> you have the right sort of problem to solve. It won't make your disks go any faster :)</p>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1757, "favorite_count": 2, "accepted_answer_id": 30057935, "answer_count": 3, "score": 11, "last_activity_date": 1541490563, "creation_date": 1430836553, "last_edit_date": 1430837560, "question_id": 30055956, "link": "https://stackoverflow.com/questions/30055956/what-are-the-alternatives-to-perl-interpreter-threads", "title": "What are the alternatives to Perl interpreter threads?", "body": "<p><a href=\"https://metacpan.org/pod/threads\" rel=\"noreferrer\">perldoc threads</a> says:</p>\n\n<blockquote>\n  <p>The use of interpreter-based threads in perl is officially discouraged.</p>\n</blockquote>\n\n<p>Are there any other Perl based threads? Or should we just not use threads in Perl?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 2, "creation_date": 1430833014, "post_id": 30054036, "comment_id": 48223601, "body": "Add a semicolon <code>;</code> in print statement in line 5. And when you are using <code>use warnings</code>, no need to add <code>-w</code> in <code>shebang</code> line, both have same meaning."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1430833227, "post_id": 30054036, "comment_id": 48223759, "body": "@serenesat, <code>-w</code> will also affect modules (assuming they don&#39;t already have <code>use warnings</code>)."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1490624166, "post_id": 30054036, "comment_id": 73181985, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3141412/global-symbol-requires-explicit-package-name\">Global symbol requires explicit package name</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "is_accepted": false, "score": 3, "last_activity_date": 1430833321, "last_edit_date": 1430833321, "creation_date": 1430831916, "answer_id": 30054151, "question_id": 30054036, "link": "https://stackoverflow.com/questions/30054036/file-open-error-global-symbol-infilename-requires-explicit-package-name/30054151#30054151", "title": "File open error - Global symbol &quot;$infilename&quot; requires explicit package name", "body": "<p>You aren't terminating your <code>print</code> statement with a semicolon <code>;</code> so the <code>my $infilename</code> is being treated as part of that statement.</p>\n"}, {"tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": true, "score": 7, "last_activity_date": 1430835213, "last_edit_date": 1430835213, "creation_date": 1430831995, "answer_id": 30054179, "question_id": 30054036, "link": "https://stackoverflow.com/questions/30054036/file-open-error-global-symbol-infilename-requires-explicit-package-name/30054179#30054179", "title": "File open error - Global symbol &quot;$infilename&quot; requires explicit package name", "body": "<p>It is not uncommon that a single syntax error will throw off the parser enough to spawn multiple false errors after the fact.  This is such a case.</p>\n\n<p>Your 1st error is the one to pay attention to.  You are missing a semicolon at the end of line 6 (<code>near \"my \"</code> on <code>line 8</code>).</p>\n\n<p>All of the \"Global symbol ...\" errors that follow are just confusion created by trying to parse lines 6..8 as a single command.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1430836143, "creation_date": 1430836143, "answer_id": 30055817, "question_id": 30054036, "link": "https://stackoverflow.com/questions/30054036/file-open-error-global-symbol-infilename-requires-explicit-package-name/30055817#30055817", "title": "File open error - Global symbol &quot;$infilename&quot; requires explicit package name", "body": "<p>As you have read, you have a missing semicolon at the end of the first <code>print</code> statement. Later error messages will depend on what Perl has decded to make of your erroneous script, and are often unreliable.</p>\n\n<p>Some other points</p>\n\n<ul>\n<li><p>You should <code>use warnings</code> in preference to <code>-w</code> on the command line or shebang line. Both at once is wrong</p></li>\n<li><p>There is no need for a leading <code>./</code> on data files. That only applies when running an executable from the shell, when PATH is searched for the given file name if no path is provided</p></li>\n<li><p>You should declare your lexical variables as late as possible in your program. In the case of file handles, that is inside the <code>open</code> call, as you did with <code>$out</code></p></li>\n<li><p>A <code>select</code> statement allows you to write subsequent <code>print</code> calls without having to specify a file handle</p></li>\n<li><p>It is probably better to use <code>substr</code> or <code>unpack</code> to extract fixed-position substrings from each record</p></li>\n</ul>\n\n<p>That leaves a program that looks like this</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nprint \"Stripping lines from data dump where WREN column is FFF\\n\";\n\nmy ($infilename, $outfilename) = qw/ test_in.txt test_out.txt /;\n\nopen my $in_fh,  '&lt;',  $infilename   or die qq{Can't open \"$infilename\" for input: $!};\nopen my $out_fh, '&lt;',  $outfilename  or die qq{Can't open \"$outfilename\" for output: $!};\nselect $out_fh;\n\nwhile ( &lt;$in_fh&gt; ) {\n   print if substr($_, 73, 3) eq 'FFF';\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 3837693, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f376735b6dae68466c1b1c0e3badd4ba?s=128&d=identicon&r=PG&f=1", "display_name": "Spark", "link": "https://stackoverflow.com/users/3837693/spark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 30054179, "answer_count": 3, "score": 3, "last_activity_date": 1430923697, "creation_date": 1430831626, "last_edit_date": 1430923697, "question_id": 30054036, "link": "https://stackoverflow.com/questions/30054036/file-open-error-global-symbol-infilename-requires-explicit-package-name", "title": "File open error - Global symbol &quot;$infilename&quot; requires explicit package name", "body": "<p>I'm writing my first perl script and can't get it to compile.  I want to read in a file and output each line that matches a regex criteria to a new file.  I'm getting a \"global symbol requires explicit package name\" error, which seems to be related to issues with variable scope from what I've read.  I can't figure out what's wrong with my code though.  </p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse warnings;\n\nprint \"Stripping lines from data dump where WREN column is FFF\\n\" \n\nmy $infilename = \"./test_in.txt\";\nmy $outfilename = \"./test_out.txt\";\nmy $in = undef;\n\nopen($in,  \"&lt;\",  $infilename)  or die \"Can't open $infilename: $!\";\nopen(my $out, \"&gt;\",  $outfilename) or die \"Can't open $outfilename: $!\";\n\nwhile (&lt;$in&gt;) {     # assigns each line in turn to $_\n   if (/.{73}FFF/){\n      print $out $_;\n   }\n}\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>syntax error at strip_nonwrites.pl line 8, near \"my \"\nGlobal symbol \"$infilename\" requires explicit package name at strip_nonwrites.pl line 8.\nGlobal symbol \"$infilename\" requires explicit package name at strip_nonwrites.pl line 12.\nGlobal symbol \"$infilename\" requires explicit package name at strip_nonwrites.pl line 12.\nExecution of strip_nonwrites.pl aborted due to compilation errors.\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed", "newline"], "comments": [{"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1430831051, "post_id": 30053734, "comment_id": 48222069, "body": "it is a bit unclear how your input file looks like. Are these exact <code>` or they represent something else? Also, what is the underlying logic here? </code>Text XXX XXX XXX &lt;new lines&gt; XXX XXX` until an empty line?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1430831851, "post_id": 30053734, "comment_id": 48222690, "body": "The bash built-in <code>read</code> supports backslash-continued lines when you don&#39;t use <code>-r</code>. It should read those lines from a file/etc. just fine."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1430832335, "last_edit_date": 1430832335, "creation_date": 1430831117, "answer_id": 30053863, "question_id": 30053734, "link": "https://stackoverflow.com/questions/30053734/remove-newline-from-end-of-string-in-bash-line-continuations/30053863#30053863", "title": "remove newline from end of string in bash - line continuations", "body": "<p>Perl solution:</p>\n\n<pre><code>perl -pe 's/\\\\$// and chomp' &lt; input &gt; output\n</code></pre>\n\n<ul>\n<li><code>s///</code> is a substitution. <code>\\\\</code> matches the backslash, <code>$</code> matches end-of-line.</li>\n<li><code>chomp</code> removes a trailing newline, if present.</li>\n</ul>\n\n<p>To also remove the leading whitespace, use</p>\n\n<pre><code> 's/^ +//; s/\\\\$// and chomp'\n</code></pre>\n\n<ul>\n<li><code>^</code> matches beginning-of-line. <code>\u00a0+</code> matches one or more spaces.</li>\n</ul>\n\n<p>instead.</p>\n"}, {"comments": [{"owner": {"reputation": 10498, "user_id": 1217536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TWeCs.png?s=128&g=1", "display_name": "gung - Reinstate Monica", "link": "https://stackoverflow.com/users/1217536/gung-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1430832799, "post_id": 30053961, "comment_id": 48223449, "body": "Can you elaborate on this to make it more of an answer? How does this resolve your problem?"}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 10498, "user_id": 1217536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TWeCs.png?s=128&g=1", "display_name": "gung - Reinstate Monica", "link": "https://stackoverflow.com/users/1217536/gung-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430833384, "post_id": 30053961, "comment_id": 48223893, "body": "@gung: It uses a common <code>sed</code> idiom, <code>a;N;$!ba</code>, to read the <i>all lines</i> into the pattern space (input buffer) at once, and then globally removes  <code>&lt;space&gt;\\r\\n\\t</code> sequences with <code>&lt;space&gt;</code>. The result is that lines <i>following</i> those ending in <code>&lt;space&gt;\\ </code> have their leading <code>\\t</code> char. stripped and are then directly joined to the previous line with a single space as a separator. Note that the syntax of the command implies <i>GNU</i> <code>sed</code> (Linux). Also, Austin, it would have been better to mention that you have <i>Windows</i>-style line endings in your input, and that the leading whitespace is a <code>\\t</code>."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1430833768, "post_id": 30053961, "comment_id": 48224225, "body": "To improve readability, <code>\\\\\\x0D\\x0A\\x09</code> can be represented as <code>\\\\\\r\\n\\t</code>."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1430833893, "post_id": 30053961, "comment_id": 48224327, "body": "This will only <i>partially</i> work with the sample input from the question, because the trailing  <code>\\ </code> will <i>not</i> be removed from the lines preceding an <i>empty</i> line."}], "tags": [], "owner": {"reputation": 61, "user_id": 2527978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e8d6009d5f18f96df6a30e5720e1a0?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2527978/austin"}, "is_accepted": false, "score": -1, "last_activity_date": 1430836511, "last_edit_date": 1430836511, "creation_date": 1430831414, "answer_id": 30053961, "question_id": 30053734, "link": "https://stackoverflow.com/questions/30053734/remove-newline-from-end-of-string-in-bash-line-continuations/30053961#30053961", "title": "remove newline from end of string in bash - line continuations", "body": "<p>EDIT</p>\n\n<p>This command will take away the space,backslash and tab on the next line.</p>\n\n<p><code>sed ':a;N;$!ba;s/ \\\\\\x0D\\x0A\\x09/ /g' filename</code></p>\n\n<pre><code>line1 asd asd asd \\\n     asd asd asd\n</code></pre>\n\n<p>to</p>\n\n<pre><code>line1 asd asd asd asd asd asd\n</code></pre>\n\n<p>I then can use:</p>\n\n<pre><code>sed '/^[[:space:]]*$/d' filename\n</code></pre>\n\n<p>to remove uneeded spaces between these file lines</p>\n"}, {"comments": [{"owner": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 1, "creation_date": 1430832609, "post_id": 30054203, "comment_id": 48223296, "body": "This is probably a good illustration of why it&#39;s important to use <code>read -r</code> for most other uses of read. Also, OP can get their desired output with the form <code>while read; do echo $REPLY; done</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 0, "creation_date": 1430832776, "post_id": 30054203, "comment_id": 48223435, "body": "@kojiro Indeed. This is exactly why <code>-r</code> is almost always what you want. Yeah, the non-whitespace-stripping behavior of using <code>$REPLY</code> is one I only learned about semi-recently and I tend to prefer the explicit <code>IFS=</code> setting to the implicit behavior of <code>$REPLY</code> for this but &lt;shrug&gt;."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 0, "creation_date": 1430834606, "post_id": 30054203, "comment_id": 48224924, "body": "@kojiro: While your unquoted use of <code>$REPLY</code> works perfectly with the <i>sample input</i> given, it should be noted that it <i>generally</i> normalizes <i>any</i> run of whitespace in the input. Conversely, Etan, your solution doesn&#39;t strip the leading whitespace from the <code>asd \u2026</code> lines."}, {"owner": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1430837440, "post_id": 30054203, "comment_id": 48227260, "body": "@mklement0 I was never one to argue with sample data. If OP can&#39;t be bothered to give real-world use cases, I can&#39;t be bothered to give real-world answers. &gt;:) Unless it suits my argument, that is."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 0, "creation_date": 1430837762, "post_id": 30054203, "comment_id": 48227552, "body": "@kojiro: Fair enough; at least the comments here now mention the limitation."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 1, "creation_date": 1430843417, "post_id": 30054203, "comment_id": 48231683, "body": "@mklement0 I interpreted the point of the <code>$REPLY</code> answer as avoiding needing to set <code>IFS</code> because (as I believe you taught me) using <code>$REPLY</code> doesn&#39;t do that. If stripping whitespace is desired then leaving <code>IFS=</code> off should do that. But yes, I agree that <code>read</code> is not the correct solution here (mostly because of the other backslash escape problem."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 67418, "user_id": 418413, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e459bf8123c85dc2c708ee8210c0320b?s=128&d=identicon&r=PG", "display_name": "kojiro", "link": "https://stackoverflow.com/users/418413/kojiro"}, "edited": false, "score": 0, "creation_date": 1430844009, "post_id": 30054203, "comment_id": 48232021, "body": "Agreed, Etan. However, even without <code>IFS=</code> the whitespace <i>involved in the line continuation</i> will be <i>preserved</i>, which does not result in the desired output; in <i>this</i> case, it doesn&#39;t matter whether <code>IFS=</code> is there or not. @kojiro&#39;s command sneakily solves that problem with <i>unquoted use</i> of <code>$REPLY</code>, but, as stated, that will normalize <i>all</i> whitespace runs (which <i>happens</i> not to make a difference here); in other words: even though <code>$REPLY</code> itself contains all original whitespace, <i>using it unquoted</i> in <code>echo $REPLY</code> causes said normalization."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1430844311, "post_id": 30054203, "comment_id": 48232210, "body": "Indeed. I wasn&#39;t focused on the unquoted detail as I was focused on the other detail and yes, that does solve this specific case but is not a general solution."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 1, "creation_date": 1430856436, "post_id": 30054203, "comment_id": 48239677, "body": "I just noticed that a <i>literal</i> here-document with an <i>unquoted</i> EOF delimiter also performs line-continuation processing, like <code>read</code>, but, unlike with read, line-interior <code>\\ </code> instances are preserved, except before <code>$</code>, <code>\\ </code>, and <code>`</code>, which leads to the big caveat: the document is <i>expanded</i> with respect to variable references and command and arithmetic substitutions, just like a double-quoted string."}], "tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": false, "score": 3, "last_activity_date": 1430832066, "creation_date": 1430832066, "answer_id": 30054203, "question_id": 30053734, "link": "https://stackoverflow.com/questions/30053734/remove-newline-from-end-of-string-in-bash-line-continuations/30054203#30054203", "title": "remove newline from end of string in bash - line continuations", "body": "<p>The bash built-in <code>read</code> supports backslash-continued lines when you don't use <code>-r</code> (Other then when you need exactly this support you always should use <code>-r</code>).</p>\n\n<p>So it should read those lines from a file/etc. just fine. (assuming they don't have <em>other</em> backslash escape sequences in them that need to be preserved.</p>\n\n<pre><code>$ while IFS= read line; do\n    echo \"[$line]\"\ndone &lt; &lt;(printf 'Line1 asd asd asd \\\n    asd asd asd \\\n\nLine2 asd asd asd \\\n    asd asd asd \\\n\nLine3 asd asd asd \\\n    asd asd asd \\\n\nLine4 asd asd asd \\\n    asd asd asd \\\n')\n[Line1 asd asd asd     asd asd asd ]\n[Line2 asd asd asd     asd asd asd ]\n[Line3 asd asd asd     asd asd asd ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": false, "score": 1, "last_activity_date": 1430876619, "last_edit_date": 1495541805, "creation_date": 1430836431, "answer_id": 30055920, "question_id": 30053734, "link": "https://stackoverflow.com/questions/30053734/remove-newline-from-end-of-string-in-bash-line-continuations/30055920#30055920", "title": "remove newline from end of string in bash - line continuations", "body": "<p>Note:</p>\n\n<ul>\n<li>The first solution below reflects the OP's specific whitespace-handling requirements; <strong>see the bottom for <em>generic</em> line-continuation processing</strong>.</li>\n<li>The solutions here are <strong>POSIX-compliant</strong>, so they should work on most Unix-like platforms (verified on OSX and Linux).</li>\n<li>The <a href=\"https://stackoverflow.com/a/30053961/45375\">OP's own solution</a> suggests that the input has <em>Windows</em>-style line endings (<code>\\r\\n</code>). However, given that this wasn't stated in the question, the solutions here only match <em>Unix</em>-style ones (<code>\\n</code>). To match <code>\\r\\n</code> line endings, replace <code>\\n</code> with <code>'\"$(printf '\\r')\"'\\n</code> (sic), or, in <code>bash</code>, <code>'$'\\r''\\n</code> in the <code>sed</code> commands below. (With <em>GNU</em> sed you could simply use <code>\\r\\n</code>, but POSIX <code>sed</code> doesn't recognize <code>\\r</code> as an escape sequence). </li>\n</ul>\n\n\n\n<hr>\n\n<p>A <strong>corrected version of the <a href=\"https://stackoverflow.com/a/30053961/45375\">OP's own solution</a></strong> that also handles lines ending in <code>\\</code> that precede <em>empty</em> lines correctly.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sed -e ':a' -e '$!{N;ba' -e '}; s/ \\\\\\n[[:blank:]]*/ /g' filename\n</code></pre>\n\n<ul>\n<li><code>-e ':a' -e '$!{N;ba' -e '}'</code> is a common <code>sed</code> idiom: a loop that reads <em>all</em> input lines <em>at once</em> into the pattern space (input buffer) - <em>BSD</em> <code>sed</code> requires multiple <code>-e</code> options to make this work (or, alternatively, a multi-line script).\n\n<ul>\n<li><sup>Note that the sample input precedes the <em>very last</em> newline with <code>\\</code> as well, which is unusual, and would result in that <code>\\</code> NOT getting removed; if you really need to handle this case, insert <code>G;</code> before <code>s/.../.../</code> above, which effectively appends another newline to the pattern space and therefore causes the last <code>\\</code> to be removed too.</sup></li>\n</ul></li>\n<li>The text-replacement command <code>s/ \\\\\\n[[:blank:]]*/ /g</code> then operates on all input lines and globally (<code>g</code>) replaces runs of a single space followed by <code>\\</code>  (<code></code> <code>\\\\</code>), followed by a newline (<code>\\n</code>), followed by any number of spaces and/or tab chars. (<code>[[:blank:]]*</code>), and replaces each such run with a single space (<code></code>).<br>\nIn short: <code>&lt;space&gt;\\</code> at the end of a line causes that line to be joined with the <em>next</em> line, after removing the trailing <code>\\</code> and stripping leading whitespace from the next line.</li>\n</ul>\n\n<hr>\n\n<p>Note:</p>\n\n<ul>\n<li>The following solutions come in both <code>awk</code> and <code>sed</code> flavors.</li>\n<li><strong>Generally, the <code>awk</code> solutions are preferable</strong>, because <strong>they do not read the input all at once</strong>, which can be problematic with large files. (Arguably, they are also easier to understand.)</li>\n<li>Note that the here-documents used as sample input below use a <em>quoted</em> EOF delimiter (<code>&lt;&lt;'EOF'</code>) to preserve the string unmodified; without quoting <code>EOF</code>, the <em>shell</em>'s own string-literal processing would parse the embedded line-continuations and join the lines before the commands ever see the string.</li>\n</ul>\n\n<h2>Generic line-continuation processing <em>without</em> whitespace handling:</h2>\n\n<p>These solutions <strong>simply <em>remove</em> <code>\\&lt;newline&gt;</code> sequences</strong>, and thus join the lines <em>as is</em>, with <em>no separator</em>; this is what <code>read</code> does by default, for instance.  </p>\n\n<p>However, these solutions have two advantages over <code>read</code>:</p>\n\n<ul>\n<li>Line-<em>interior</em> <code>\\</code> instances are left alone.</li>\n<li><code>sed</code> and <code>awk</code> are much faster with more than just a few input lines.</li>\n</ul>\n\n<h3><code>awk</code> solution:</h3>\n\n<pre class=\"lang-sh prettyprint-override\"><code>awk '/\\\\$/ { printf \"%s\", substr($0, 1, length($0)-1); next } 1' &lt;&lt;'EOF'\nLine1 starts here\\\n and ends here.\n\nLine2 starts here, \\\n continues here,\\\n  and ends here.\nEOF\nLine1 starts here and ends here.\n\nLine2 starts here,  continues here,  and ends here.\n</code></pre>\n\n<ul>\n<li><code>/\\\\$/</code> matches a <code>\\</code> at the end (<code>$</code>) of a line, signaling line continuation.</li>\n<li><code>substr($0, 1, length($0)-1)</code> removes that trailing <code>\\</code> from the input line, <code>$0</code>.</li>\n<li>By using <code>printf \"%s\"</code>, the (modified) current line is printed without a trailing newline, which means that whatever print command comes next will directly append to it, effectively joining the current and the next line.</li>\n<li><code>next</code> finishes processing of the current line.</li>\n<li><code>1</code> is a common <code>awk</code> idiom that is shorthand for <code>{ print }</code>, i.e., for simply printing the input line (with a trailing <code>\\n</code>).</li>\n</ul>\n\n<h3><code>sed</code> solution:</h3>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ sed -e ':a' -e '$!{N;ba' -e '}; s/\\\\\\n//g' &lt;&lt;'EOF'\nLine1 starts here\\\n and ends here.\n\nLine2 starts here, \\\n continues here,\\\n  and ends here.\nEOF \nLine1 starts here and ends here.\n\nLine2 starts here,  continues here,  and ends here.\n</code></pre>\n\n<p>Note the two <em>double</em> spaces in the last line, because all whitespace is preserved.</p>\n\n<h3>[NOT RECOMMENDED] A pure <em>shell</em> (e.g., <code>bash</code>) solution:</h3>\n\n<p>The following solution is <strong>alluringly simple</strong>, but is <strong>not fully robust</strong> and is a <strong>security risk</strong>: it <strong>can result in the execution of arbitrary commands</strong>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Store input filename, passed as the 1st argument,\n# in variable $file.\nfile=$1\n\n# Construct a string that results in a valid shell command containing a\n# *literal* here-document with *unquoted* EOF delimiter 0x3 - chosen so\n# that it doesn't conflict with the input.\n#\n# When the resulting command is evaluated by `eval`, the *shell itself* \n# performs the desired line-continuation processing, BUT:\n# '$'-prefixed tokens in the input, including command substitutions\n# ('$(...)' and '`...`'), ARE EXPANDED, therefore:\n# CAUTION: Maliciously constructed input can result in\n#          execution of arbitrary commands.\neval \"cat &lt;&lt;$(printf '\\3')\n$(cat \"$file\")\" \n</code></pre>\n\n<hr>\n\n<h2>Generic line-continuation processing with <em>normalization of whitespace</em>:</h2>\n\n<p>These solutions <strong>normalizes whitespace</strong> as follows: any trailing whitespace before <code>\\&lt;newline&gt;</code> is removed, as is leading whitespace from the <em>next</em> line; the resulting lines are then <strong>joined by a <em>single space</em></strong>.<br>\nWhitespace in <strong>lines <em>not</em> participating in line continuation</strong> is <strong>preserved <em>as is</em></strong>. <sup>The latter distinguishes these solutions from <a href=\"https://stackoverflow.com/a/30053863/45375\">choroba's Perl solution</a></sup></p>\n\n<h3><code>awk</code> solution</h3>\n\n<pre class=\"lang-sh prettyprint-override\"><code>awk '\n  contd { contd=0; sub(/^[[:blank:]]+/, \"\") } \n  /\\\\$/ { contd=1; sub(/[[:blank:]]*\\\\$/, \"\"); printf \"%s \", $0; next } \n  1' &lt;&lt;'EOF'\nLine1 starts here   \\\n      and ends here.\n  I am a loner. \nLine3 starts here,   \\\n      continues here,    \\\nand ends here.\nEOF\nLine1 starts here and ends here.\n  I am a loner.\nLine3 starts here, continues here, and ends here.\n</code></pre>\n\n<ul>\n<li>Variable <code>contd</code>(which defaults to 0 / false in a Boolean context) is used as a flag to indicate whether the previous line signaled line continuation with a trailing <code>\\</code>.</li>\n<li>If the flag is set (pattern <code>contd</code>), it is reset right away (although it may get set again below if the line being continued too continues on the next line), and leading whitespace is trimmed from the current line (<code>sub(/^[[:blank:]]+/, \"\")</code>); note that not specifying a target variable as the 3rd argument implicitly targets the whole input line, <code>$0</code>.</li>\n<li><code>/\\\\$/</code> matches a <code>\\</code> at the end (<code>$</code>) of a line, signaling line continuation.\n\n<ul>\n<li>Therefore, the flag is set (<code>contd=1</code>),</li>\n<li>trailing whitespace before the line-ending <code>\\</code> is removed (<code>sub(/[[:blank:]]*\\\\$/, \"\")</code> along with that <code>\\</code> itself,</li>\n<li>and the result is printed with a trailing space, but <em>without</em> a newline, courtesy of <code>printf \"%s \"</code>.</li>\n<li><code>next</code> then proceeds to the next input line, without processing further commands for the current line.</li>\n</ul></li>\n<li><code>1</code> is a common <code>awk</code> idiom that is shorthand for <code>{ print }</code>, i.e., for simply printing the input line (with a trailing <code>\\n</code>); note that this print command is reached in two cases:\n\n<ul>\n<li>Any lines not involved in line continuation, which are printed <em>unmodified</em>.</li>\n<li>Any lines that <em>end</em> a line continuation (form part of a continuation but do not themselves continue on the next line), which are printed with leading whitespace removed, due to the modification performed by the first action.</li>\n</ul></li>\n</ul>\n\n<h3><code>sed</code> solution</h3>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ sed -e ':a' -e '$!{N;ba' -e '}; s/[[:blank:]]*\\\\\\n[[:blank:]]*/ /g' &lt;&lt;'EOF'\nLine1 starts here   \\\n      and ends here.\n  I am a loner.\nLine3 starts here,   \\\n      continues here,    \\\nand ends here.\nEOF\nLine1 starts here and ends here.\n  I am a loner.\nLine3 starts here, continues here, and ends here.\n</code></pre>\n\n<p>Line-ending and line-beginning whitespace is normalized to a single space for lines involved in continuation.\nNote how the line without a trailing <code>\\</code> is printed unmodified.</p>\n"}, {"comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1430858850, "post_id": 30062633, "comment_id": 48240980, "body": "++ for simplicity, and works well with the sample input, but there are two things worth pointing out (for the benefit of those looking for <i>generic</i> line-continuation processing): if the input file has <i>no</i> empty lines, it will be read into memory as a whole (since, due to <code>-v RS=</code>, any run of consecutive non-empty lines constitutes a <i>single</i> input record); conversely, if empty lines <i>are</i> present, they are simply <i>removed</i> unconditionally, whether they&#39;re part of a line continuation or not."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 1, "last_activity_date": 1430857922, "last_edit_date": 1430857922, "creation_date": 1430857598, "answer_id": 30062633, "question_id": 30053734, "link": "https://stackoverflow.com/questions/30053734/remove-newline-from-end-of-string-in-bash-line-continuations/30062633#30062633", "title": "remove newline from end of string in bash - line continuations", "body": "<pre><code>$ awk -v RS= '{gsub(/\\s*\\\\\\s*/,\"\")}1' file\nLine1 asd asd asd asd asd asd\nLine2 asd asd asd asd asd asd\nLine3 asd asd asd asd asd asd\nLine4 asd asd asd asd asd asd\n</code></pre>\n\n<p>Use <code>[[:space:]]</code> instead of <code>\\s</code> if you don't have GNU awk.</p>\n\n<p>Note though that any time you write a loop in shell just to manipulate text you have the wrong approach so doing the above in preparation for simplifying a bash read loop is probably a bad idea overall.</p>\n"}], "owner": {"reputation": 61, "user_id": 2527978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e8d6009d5f18f96df6a30e5720e1a0?s=128&d=identicon&r=PG&f=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2527978/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1430876619, "creation_date": 1430830813, "last_edit_date": 1430855540, "question_id": 30053734, "link": "https://stackoverflow.com/questions/30053734/remove-newline-from-end-of-string-in-bash-line-continuations", "title": "remove newline from end of string in bash - line continuations", "body": "<p>I know there are several different ones open and answered but mine is a little different. I am trying to do this in bash.</p>\n\n<p>I have this file:</p>\n\n<pre><code>Line1 asd asd asd \\\n    asd asd asd \\\n\nLine2 asd asd asd \\\n    asd asd asd \\\n\nLine3 asd asd asd \\\n    asd asd asd \\\n\nLine4 asd asd asd \\\n    asd asd asd \\\n</code></pre>\n\n<p>The ouput I would like is:</p>\n\n<pre><code>Line1 asd asd asd asd asd asd\nLine2 asd asd asd asd asd asd\nLine3 asd asd asd asd asd asd\nLine4 asd asd asd asd asd asd\n</code></pre>\n\n<p>So that is is easier to read in as a bash loop. What command would allow me to do this?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["perl", "passwords"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1430829367, "post_id": 30053061, "comment_id": 48220675, "body": "The reason perl modules exist is because - they&#39;re reusable chunks of code that serve a purpose. By &quot;doesn&#39;t ship with&quot; you might find it&#39;s as simple as running <code>cpan install Term::ReadKey</code>."}, {"owner": {"reputation": 13978, "user_id": 170194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4fb9223beda59afce4117042e05c12d4?s=128&d=identicon&r=PG", "display_name": "rubber boots", "link": "https://stackoverflow.com/users/170194/rubber-boots"}, "edited": false, "score": 0, "creation_date": 1430829990, "post_id": 30053061, "comment_id": 48221191, "body": "Lookup &quot;How can I read a single character from the keyboard under UNIX and DOS?&quot; in google."}, {"owner": {"reputation": 1414, "user_id": 2885683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02929837725d7fe44f5dea87e5d91431?s=128&d=identicon&r=PG&f=1", "display_name": "DeVadder", "link": "https://stackoverflow.com/users/2885683/devadder"}, "edited": false, "score": 4, "creation_date": 1430830499, "post_id": 30053061, "comment_id": 48221623, "body": "&quot;I am new to perl and want to have solution without using any perl module dependency...&quot; If you can choose, do not invest into learning Perl if you will not be able to use modules. Modules are one of Perls main selling points and i say that as a huge Perl fan."}, {"owner": {"reputation": 1414, "user_id": 2885683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02929837725d7fe44f5dea87e5d91431?s=128&d=identicon&r=PG&f=1", "display_name": "DeVadder", "link": "https://stackoverflow.com/users/2885683/devadder"}, "edited": false, "score": 0, "creation_date": 1430830649, "post_id": 30053061, "comment_id": 48221750, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/15319768/read-password-using-perl-on-windows-without-using-cpan-packages\">Read password using perl on windows without using CPAN packages</a>"}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1430831108, "post_id": 30053061, "comment_id": 48222109, "body": "It&#39;s not always possible/desirable to run <code>cpan install whatever</code> on a client&#39;s windows box. A possible solution could be to use a pure-perl module which could be packaged with the software (Term::ReadKey is XS). There&#39;s a thread on Perlmonks searching for a replacement: <a href=\"http://www.perlmonks.org/?node_id=886742\" rel=\"nofollow noreferrer\">non-XS version of Term::ReadKey?</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430833129, "post_id": 30053061, "comment_id": 48223692, "body": "So you want a run-time dependency on a C compiler instead? How is that any better?"}, {"owner": {"reputation": 21, "user_id": 4827801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StnJRFPI-nw/AAAAAAAAAAI/AAAAAAAAAAA/tC7QzVn9IFc/photo.jpg?sz=128", "display_name": "rajukemburi", "link": "https://stackoverflow.com/users/4827801/rajukemburi"}, "edited": false, "score": 0, "creation_date": 1430833712, "post_id": 30053061, "comment_id": 48224182, "body": "Thanks Guys, Unfortunately, I can not add any modules to the existing installation of the customer..., hence this issue :)"}, {"owner": {"reputation": 21, "user_id": 4827801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StnJRFPI-nw/AAAAAAAAAAI/AAAAAAAAAAA/tC7QzVn9IFc/photo.jpg?sz=128", "display_name": "rajukemburi", "link": "https://stackoverflow.com/users/4827801/rajukemburi"}, "edited": false, "score": 0, "creation_date": 1430833789, "post_id": 30053061, "comment_id": 48224235, "body": "No, I can not put dependency on C compiler..., customers dont have this..."}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1430834663, "post_id": 30053061, "comment_id": 48224966, "body": "It looks like POSIX module (which is installed by default) provides some capabilities. I admit I was unable to make it work, but here are <a href=\"http://pleac.sourceforge.net/pleac_perl/userinterfaces.html\" rel=\"nofollow noreferrer\">some examples</a> that do. Didn&#39;t check on windows, though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1430836355, "post_id": 30053061, "comment_id": 48226317, "body": "@Dallaylaen: This has to work on Windows platforms as well"}, {"owner": {"reputation": 98433, "user_id": 368630, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/107085826cfbb2700f535417a12c89cb?s=128&d=identicon&r=PG", "display_name": "David W.", "link": "https://stackoverflow.com/users/368630/david-w"}, "edited": false, "score": 1, "creation_date": 1430840921, "post_id": 30053061, "comment_id": 48230016, "body": "Why are you writing a Perl script on the customer&#39;s box? This isn&#39;t a factious question. If this is a Perl script for the customer, then there shouldn&#39;t be an issue of installing a module the customer will be using. After all, if this is a WinPC, somebody installed Perl itself. Also, what version of Perl did you install. Strawberry Perl comes with a compile, and ActiveState can download and install a compiler too. Shouldn&#39;t be an issue with running XS modules."}], "owner": {"reputation": 21, "user_id": 4827801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StnJRFPI-nw/AAAAAAAAAAI/AAAAAAAAAAA/tC7QzVn9IFc/photo.jpg?sz=128", "display_name": "rajukemburi", "link": "https://stackoverflow.com/users/4827801/rajukemburi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430836521, "creation_date": 1430829184, "last_edit_date": 1430836521, "question_id": 30053061, "link": "https://stackoverflow.com/questions/30053061/read-a-password-from-the-keyboard-without-using-any-modules-like-termreadkey", "title": "Read a password from the keyboard without using any modules like Term::ReadKey", "body": "<p>I want to read a password from the keyboard in Perl without echoing it, in a way that is platform-independent and should work on both Windows and Linux.</p>\n\n<p>When I searched online I found code that used the <code>Term::ReadKey</code> module, but my product doesnt ship these modules.</p>\n\n<p>I am new to Perl and want a solution without using any Perl module dependency.</p>\n"}, {"tags": ["linux", "perl", "lsf"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430829526, "post_id": 30053001, "comment_id": 48220830, "body": "How does LSF suspend/resume? I presume it&#39;s via <code>SIGSTOP</code> and <code>SIGCONT</code>?"}, {"owner": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430830536, "post_id": 30053001, "comment_id": 48221658, "body": "&quot;The default action is to send the following signals to the job: SIGTSTP for parallel or interactive jobs. SIGTSTP is caught by the master process and passed to all the slave processes running on other hosts.  SIGSTOP for sequential jobs. SIGSTOP cannot be caught by user programs. The SIGSTOP signal can be configured with the LSB_SIGSTOP parameter in lsf.conf.&quot;  From &quot;Job Controls&quot; for LSF. I wonder if the meaning of &quot;slave processes&quot; in this context refers to processes generated by the original job"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "edited": false, "score": 0, "creation_date": 1430836767, "post_id": 30054819, "comment_id": 48226681, "body": "So your idea is to restructure the scripts? so that you have one script which calls the main script, and also creates 2 child processes, which it uses wait on, to catch the return value and see if its an error or killed by a signal?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "edited": false, "score": 0, "creation_date": 1430837827, "post_id": 30054819, "comment_id": 48227604, "body": "yup. The main script can inherit pipes to the children."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "edited": false, "score": 0, "creation_date": 1430837970, "post_id": 30054819, "comment_id": 48227740, "body": "Also, you might not be aware of <code>setsid(2)</code> (available as <code>POSIX::setsid()</code>). Creates a process group to which you can send a signal."}, {"owner": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "edited": false, "score": 0, "creation_date": 1430839310, "post_id": 30054819, "comment_id": 48228793, "body": "Thanks a lot, this looks like the best way to move forward with this!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1430833614, "creation_date": 1430833614, "answer_id": 30054819, "question_id": 30053001, "link": "https://stackoverflow.com/questions/30053001/perl-system-exec-and-interactions-with-lsf/30054819#30054819", "title": "Perl system(), exec() and interactions with LSF", "body": "<p>The monitor is the one that should be creating the child processes. (It can also launch the \"main script\" too.) <code>wait</code> will tell you when they crash.</p>\n\n<pre><code>my %children;\n\nmy $pid1 = fork();\nif (!defined($pid1)) { ... }\nif ($pid1) { ... }\n++$children{$pid1};\n\nmy $pid2 = fork();\nif (!defined($pid2)) { ... }\nif ($pid2) { ... }\n++$children{$pid2};\n\nwhile (keys(%children)) {\n   my $pid = wait();\n   next if !$children{$pid};  # !!!\n\n   delete($children{$pid});\n\n   if ($? &amp; 0x7F) { ... }   # Killed from signal\n   if ($? &gt;&gt; 8) { ... }     # Returned an error\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 2, "accepted_answer_id": 30054819, "answer_count": 1, "score": 0, "last_activity_date": 1430833614, "creation_date": 1430829000, "last_edit_date": 1430829930, "question_id": 30053001, "link": "https://stackoverflow.com/questions/30053001/perl-system-exec-and-interactions-with-lsf", "title": "Perl system(), exec() and interactions with LSF", "body": "<p>I have a script that has to kick off 2 independent processes, and wait until one of them finishes before continuing.</p>\n\n<p>Up to now, I've run it by creating one process with an <code>if fork pid == 0, exec, else wait</code>. The other one is created using <code>system</code> and the command line.</p>\n\n<p>Now I'm preparing to roll this script out to run 400 iterations of such work-pair processes on <a href=\"http://en.wikipedia.org/wiki/Platform_LSF\" rel=\"nofollow\"><em>Platform Load Sharing Facility</em></a> (LSF), however I'm concerned with stability. I know that the processes can crash. In such a case, I need a method to know when a process has crashed, and kill its pair process and the main script.</p>\n\n<p>Originally I had written a watchdog with a 3 minute watch period, if 3 minutes of inactivity pass, it kills the processes. However this caught a lot of false positives, because when the LSF suspends one of the two processes, the watchdog saw them as inactive. </p>\n\n<p>In LSF, when I issue the jobs, I have the option to kill them. However, when I kill a job, what exactly do I kill? Will the kill take down the two processes the Perl script has created? or leave them running as zombies? </p>\n\n<p>To reiterate,</p>\n\n<ul>\n<li><p>Will killing a job on the LSF queue also kill every process that job has created? </p></li>\n<li><p>Whats the best (safest?) way to generate two independent processes from a Perl script, and to wait until one of them exits before continuing? </p></li>\n<li><p>How can I write a watchdog that can distinguish between a processes having crashed, and a process that is suspended by the LSF admin?</p></li>\n</ul>\n"}, {"tags": ["perl", "pdf", "pdflib"], "comments": [{"owner": {"reputation": 776, "user_id": 4050592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ICTjJ.jpg?s=128&g=1", "display_name": "Andrew Swann", "link": "https://stackoverflow.com/users/4050592/andrew-swann"}, "edited": false, "score": 0, "creation_date": 1430822888, "post_id": 30050419, "comment_id": 48216307, "body": "See <a href=\"http://stackoverflow.com/q/25710250/4050592\">stackoverflow.com/q/25710250/4050592</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1593, "user_id": 2862406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef9ca7a323d140455331820ae3326f9?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer", "link": "https://stackoverflow.com/users/2862406/rainer"}, "is_accepted": true, "score": 1, "last_activity_date": 1430898431, "creation_date": 1430898431, "answer_id": 30070583, "question_id": 30050419, "link": "https://stackoverflow.com/questions/30050419/printing-rtf-text-in-pdflib-9-table-cell/30070583#30070583", "title": "Printing RTF Text in PDFLib 9 Table Cell", "body": "<p>you can <strong>not</strong> use RTF text for PDFlib textflow/table cells. So you have to parse your RTF text and \"translate\" this into textflow notation. Afterwards you can format text within a multiline text by using inline options within create_textflow() or by calling multiple add_textflow() calls.</p>\n"}], "owner": {"reputation": 3536, "user_id": 1463584, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7634126fd83f4491bfd991374f6a099a?s=128&d=identicon&r=PG", "display_name": "Sebi", "link": "https://stackoverflow.com/users/1463584/sebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 30070583, "answer_count": 1, "score": 0, "last_activity_date": 1495184091, "creation_date": 1430821515, "last_edit_date": 1495184091, "question_id": 30050419, "link": "https://stackoverflow.com/questions/30050419/printing-rtf-text-in-pdflib-9-table-cell", "title": "Printing RTF Text in PDFLib 9 Table Cell", "body": "<p>I am using Perl and PDFLib 9 to dynamically create a PDF document. I read some data from a DB and print a table with the data onto the PDF. One field in my DB contains RTF text. How can i print RTF text in a PDFLib table cell? I can't find any example in the PDFLib cookbook.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430818971, "post_id": 30048832, "comment_id": 48213680, "body": "Could you supply some sample input? I think your regex is wrong - <code>[ON|OFF]LINE</code> doesn&#39;t match &#39;ONLINE&#39; it matches <code>FLINE</code> or <code>NLINE</code> or <code>OLINE</code>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 981784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fe975bf2bc7c7693a8a1a9483f867161?s=128&d=identicon&r=PG", "display_name": "Nenzo", "link": "https://stackoverflow.com/users/981784/nenzo"}, "edited": false, "score": 0, "creation_date": 1430820339, "post_id": 30049324, "comment_id": 48214654, "body": "Thanks for your input, I think we can argue about the compact code regarding those variables. Your example is exactly what I was looking for and your assumption was correct, made a regex error there."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 105, "user_id": 981784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fe975bf2bc7c7693a8a1a9483f867161?s=128&d=identicon&r=PG", "display_name": "Nenzo", "link": "https://stackoverflow.com/users/981784/nenzo"}, "edited": false, "score": 0, "creation_date": 1430822360, "post_id": 30049324, "comment_id": 48215997, "body": "Yes. It&#39;s a style point rather than a technical one. My <i>opinion</i> is that clarity is the most essential thing that code should have - and the advantage of perl is you can format your code to optimise for clarity. If taking multiple lines does that, then that&#39;s all good - I&#39;ve often taken an assignment, followed by several &#39;transform&#39; patterns on separate lines just to make clear what&#39;s going on."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1430820113, "last_edit_date": 1430820113, "creation_date": 1430818665, "answer_id": 30049324, "question_id": 30048832, "link": "https://stackoverflow.com/questions/30048832/write-and-modify-string-into-variable-in-a-single-step/30049324#30049324", "title": "Write and modify string into variable in a single step", "body": "<p>Ok, first off - \"saving code\" is a false economy. Concise compact code is NOT better. The computer doesn't care, plain text bytes are cheap, and future programmers don't want to be having to break their brain parsing your code when they're trying to fix it. </p>\n\n<p>That said - you can do this by using a match regular expression. </p>\n\n<p>Based on your regexp:</p>\n\n<pre><code>my ( $state) = ( $displayContents[$ln+6] =~ m/.+State.+([ON|OFF]LINE)/ )\n</code></pre>\n\n<p>Although, I think that pattern might actually be wrong as it stands it matches:</p>\n\n<pre><code>State NLINE\nState OLINE\nState FLINE\n</code></pre>\n\n<p>I am assuming you're looking for the word <code>ONLINE</code> or <code>OFFLINE</code>? </p>\n\n<p>In which case you'd need:</p>\n\n<pre><code>my ( $state ) = ( $displayContents[$ln+6] =~ m/State ((?:ON|OFF)LINE)/ );\n</code></pre>\n\n<p>This works because if you test a pattern match in a scalar context, it returns a true/false result. If you do it in a list context, it returns an array containing all the capture <code>()</code> results. </p>\n\n<p>We use <code>(:?</code> as a non-capturing bracket, because otherwise our pattern would return <code>(\"ONLINE\", \"ON\")</code> and discard the second result. Harmless, but redundant and a source of future gotchas. </p>\n"}, {"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 1, "last_activity_date": 1430828711, "creation_date": 1430828711, "answer_id": 30052885, "question_id": 30048832, "link": "https://stackoverflow.com/questions/30048832/write-and-modify-string-into-variable-in-a-single-step/30052885#30052885", "title": "Write and modify string into variable in a single step", "body": "<p>You're very close. Try this instead:</p>\n\n<pre><code>( my $state = $displayContents[$ln+6] ) =~ s/(.+State.+)([ON|OFF]LINE)/$2/;\n</code></pre>\n\n<p><code>=~</code> takes precedence over <code>=</code>, See <a href=\"http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity\" rel=\"nofollow\">perldoc perlop</a>.</p>\n"}], "owner": {"reputation": 105, "user_id": 981784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fe975bf2bc7c7693a8a1a9483f867161?s=128&d=identicon&r=PG", "display_name": "Nenzo", "link": "https://stackoverflow.com/users/981784/nenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 30049324, "answer_count": 2, "score": 2, "last_activity_date": 1430828711, "creation_date": 1430817391, "question_id": 30048832, "link": "https://stackoverflow.com/questions/30048832/write-and-modify-string-into-variable-in-a-single-step", "title": "Write and modify string into variable in a single step", "body": "<p>I'd like to save some code but haven't found a way to save the content of an array element into a variable and modify this string at the same time:</p>\n\n<pre><code>$state = $displayContents[$ln+6];\n$state =~ s/(.+State.+)([ON|OFF]LINE)/$2/;\n</code></pre>\n\n<p>I'm looking for something like this:</p>\n\n<pre><code>$state = $displayContents[$ln+6] =~ s/(.+State.+)([ON|OFF]LINE)/$2/;\n</code></pre>\n\n<p>Is there a way to save some code and do both steps in one line?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1430801787, "post_id": 30044453, "comment_id": 48204417, "body": "I believe <code>use 5.10</code> and up will enable warnings and strict mode by default. Thus the error which can be corrected by using the <code>my</code> keyword."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 5, "creation_date": 1430802118, "post_id": 30044453, "comment_id": 48204543, "body": "5.10 doesn&#39;t, but 5.11 and above imply <code>use strict</code> when you <code>use _version_</code>."}, {"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1430804938, "post_id": 30044453, "comment_id": 48205610, "body": "@JimDavis Thanks for the correction. I knew it was one of the newer versions. :)"}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "reply_to_user": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1430811439, "post_id": 30044453, "comment_id": 48208828, "body": "@squiguy Thanks for chiming in with the <i>reason</i> why declaring is needed.   I updated my answer with your good info."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430816095, "post_id": 30044453, "comment_id": 48211693, "body": "of course, if you&#39;ve followed the standard advice - ALWAYS <code>use strict;</code> and <code>use warnings;</code> this would be a moot point."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1430834373, "post_id": 30044453, "comment_id": 48224730, "body": "5.11 is a dev (test) version. It&#39;s doesn&#39;t really make sense to have/require 5.11."}], "answers": [{"tags": [], "owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "is_accepted": false, "score": 3, "last_activity_date": 1430835212, "last_edit_date": 1430835212, "creation_date": 1430801552, "answer_id": 30044534, "question_id": 30044453, "link": "https://stackoverflow.com/questions/30044453/how-to-use-version-in-perl/30044534#30044534", "title": "How to use version in perl?", "body": "<p>There is nothing wrong with your version statement.</p>\n\n<p>The problem is that you have not declared the variable <code>$data</code> ... and (as mentioned in squiguy's comment) versions of Perl starting with 5.11.0 and up <a href=\"http://perldoc.perl.org/perl5110delta.html#Implicit-strictures\" rel=\"nofollow\">automatically <code>use strict</code> when you <code>use __version__</code></a>.  <code>use strict</code> means that you need to declare all variables before using them.</p>\n\n<p>This works:</p>\n\n<pre><code>use 5.11.0;\nmy $data = 1232;\nprint $data;\n</code></pre>\n\n<p>This is more explicit, maybe more \"understandable\":</p>\n\n<pre><code>use 5.11.0;\nmy $data;     # declare the local variable we are about to use \n$data = 1232; # set initial value \nprint $data;  # see if it got the value \n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4861757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/15ee3b81f6bd4510acc3999af15718d9?s=128&d=identicon&r=PG&f=1", "display_name": "stackcareer", "link": "https://stackoverflow.com/users/4861757/stackcareer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1430835212, "creation_date": 1430801065, "last_edit_date": 1430801320, "question_id": 30044453, "link": "https://stackoverflow.com/questions/30044453/how-to-use-version-in-perl", "title": "How to use version in perl?", "body": "<p>I am using windows platform and padre editor for running the perl program </p>\n\n<pre><code>use 5.11.0;\n$data = 1232;\nprint $data;\n</code></pre>\n\n<p>Resulting the error is</p>\n\n<pre><code>Global symbol \"$data\" requires explicit package name at file.pl line 2.\nGlobal symbol \"$data\" requires explicit package name at file.pl line 3.\n</code></pre>\n"}, {"tags": ["ajax", "json", "perl", "cgi", "jquery-file-upload"], "answers": [{"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1430823919, "creation_date": 1430823919, "answer_id": 30051243, "question_id": 30044220, "link": "https://stackoverflow.com/questions/30044220/blueimp-jquery-file-upload-force-iframe-transport-server-response/30051243#30051243", "title": "Blueimp jQuery file upload force iFrame Transport server response", "body": "<p>In order to make the widget work with Perl, you have to <a href=\"https://github.com/blueimp/jQuery-File-Upload/wiki/Setup#using-jquery-file-upload-ui-version-with-a-custom-server-side-upload-handler\" rel=\"nofollow\">implement a custom server-side upload handler</a>. Your CGI script must return a JSON reponse in the format described in the documentation.</p>\n\n<p>Fortunately, someone has already done the work for you. Have a look at the module <a href=\"https://metacpan.org/pod/jQuery::File::Upload\" rel=\"nofollow\">jQuery::File::Upload</a> on CPAN.</p>\n"}], "owner": {"reputation": 503, "user_id": 878334, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8c0316d1e27db52606a964ae636a5d21?s=128&d=identicon&r=PG", "display_name": "Hei", "link": "https://stackoverflow.com/users/878334/hei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430823919, "creation_date": 1430799628, "question_id": 30044220, "link": "https://stackoverflow.com/questions/30044220/blueimp-jquery-file-upload-force-iframe-transport-server-response", "title": "Blueimp jQuery file upload force iFrame Transport server response", "body": "<p>I am using Blueimp JQuery File Upload, with the option forceIframeTransport: true, I am able to upload the file and form fields to a cross domain endpoint for processing.</p>\n\n<p>However, the server response is something bother me for a long time.</p>\n\n<p>I have come across a online material about the library:</p>\n\n<p><a href=\"http://missioncriticallabs.com/blog/lessons-learned-from-jquery-file-upload\" rel=\"nofollow\">http://missioncriticallabs.com/blog/lessons-learned-from-jquery-file-upload</a></p>\n\n<p>I have followed the link's instruction but failed to get the server response correctly.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>jQuery(\"#newFile\").fileupload({\n        url: \"https://mydomain/cgi-bin/get_file.cgi\",\n        forceIframeTransport: true,\n        type: \"POST\",\n        cache: false,\n        contentType: false,\n        processData: false,\n        autoUpload: false,\n        replaceFileInput: false\n        done: function(e, data) {\n\n            console.log(\"done\");\n            console.log(e);\n            console.log(data.result);\n        }\n});\n</code></pre>\n\n<p>For now, my server endpoint is to print the JSON response out only:</p>\n\n<pre><code>#!C:/Perl64/bin/perl.exe\n\nuse CGI;\nuse JSON;\n\nprint \"Content-type: text/plain; charset=iso-8859-1\\n\\n\";\n#print header(\"application/json;charset=UTF-8\");\nmy %rawText = (message =&gt; \"Processed\");\nmy $json = encode_json \\%rawText;\nprint $json;\n</code></pre>\n\n<p>I have tried to print the header as \"text/plain\" and \"application/json\", but I cannot get the server response in my \"done\" function in the JS code.</p>\n\n<p>My console.log(data.result) is always print \"undefined\".</p>\n\n<p>I am quite fresh to the library and the concept behind,</p>\n\n<p>so I will be much appreciated if anyone could guide me to use the library.</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430817644, "post_id": 30044072, "comment_id": 48212752, "body": "Unrelated to the problem, but I&#39;ll offer that you could probably use a hash here - extract a key-value with <code>my ( $key, $value ) = split ( &quot;:&quot; ); $results{$key} = $value; </code> type logic."}], "answers": [{"comments": [{"owner": {"reputation": 8578, "user_id": 786279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2oMjk.jpg?s=128&g=1", "display_name": "mimoralea", "link": "https://stackoverflow.com/users/786279/mimoralea"}, "edited": false, "score": 0, "creation_date": 1430803312, "post_id": 30044290, "comment_id": 48204958, "body": "No idea how you found that out... Nailed it, though."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 8578, "user_id": 786279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2oMjk.jpg?s=128&g=1", "display_name": "mimoralea", "link": "https://stackoverflow.com/users/786279/mimoralea"}, "edited": false, "score": 2, "creation_date": 1430807579, "post_id": 30044290, "comment_id": 48206734, "body": "@mimoralea, you&#39;re not the first person to make that mistake.  I&#39;m sure there&#39;s at least a dozen similar questions here.  The result of printing extra CRs is pretty obvious once you&#39;ve seen it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1430825460, "post_id": 30044290, "comment_id": 48217913, "body": "The best way to handle this problem is to <code>s&#47;\\s+\\z&#47;&#47;</code> the input string. That will remove any CR, LF, and trailing whitespace all at once"}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 2, "last_activity_date": 1430800397, "last_edit_date": 1430800397, "creation_date": 1430800070, "answer_id": 30044290, "question_id": 30044072, "link": "https://stackoverflow.com/questions/30044072/how-do-i-print-multiple-variables-in-perl/30044290#30044290", "title": "How do I print multiple variables in perl?", "body": "<p>Your problem isn't the <code>print</code>, it's that <code>$message</code> contains CRLF line endings.  In a regex, <code>.</code> matches any character that is not LF (which means it matches CR).  When you print the CR, the cursor goes back to the left margin, causing subsequent text to overwrite what you've already printed.  You don't see this when you print the variables individually, because the next character printed after the CR is <code>\\n</code> (LF) which moves the cursor to the start of the next line.</p>\n\n<p>Since you don't show us how you acquired <code>$message</code>, it's hard to say what the best way to remove the CRs is.  Perhaps you should have opened the file with the <code>:crlf</code> layer.</p>\n\n<p>One way to remove the CRs would be</p>\n\n<pre><code>$message =~ s/\\r//g;\n</code></pre>\n\n<p>before you start extracting the bits you want.  Or, you could replace <code>(\\b.*)</code> with something that won't extract the CR.  For example, you could use <code>(.*\\S)</code>, which requires the match to end on a non-whitespace character.</p>\n"}], "owner": {"reputation": 8578, "user_id": 786279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2oMjk.jpg?s=128&g=1", "display_name": "mimoralea", "link": "https://stackoverflow.com/users/786279/mimoralea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 0, "accepted_answer_id": 30044290, "answer_count": 1, "score": 0, "last_activity_date": 1430800397, "creation_date": 1430798714, "question_id": 30044072, "link": "https://stackoverflow.com/questions/30044072/how-do-i-print-multiple-variables-in-perl", "title": "How do I print multiple variables in perl?", "body": "<p>I've been trying to figure out what is wrong with my print statement. I have this snippet of code so far:</p>\n\n<pre><code>if ($message =~ /Status changed from (New|In Progress|Feedback) to Completed/) {\n    my ($author, $assignee, $target, $issue, $title) = (\n        \"\",\n        \"\",\n        \"\",\n        \"\",\n        \"\",\n    );\n    if ($message =~ /\\* Author: (\\b.*)/) {\n        $author = $1;\n    }\n\n    if ($message =~ /\\* Assigned To: (\\b.*)/) {\n        $assignee = $1;\n    }\n\n    if ($message =~ /\\* Target version: (\\b.*)/) {\n        $target = $1;\n    }\n\n    if ($message =~ /Issue #(\\d+) has been updated by (\\b.*)/) {\n        $issue = $1;\n    }\n\n    if ($message =~ /(Task|Story) #(\\d+): (\\b.*)/) {\n        $title = $3;\n    }\n\n    print \"Author: $author\\n\";\n    print \"Assignee: $assignee\\n\";\n    print \"Issue: $issue\\n\";\n    print \"Title: $title\\n\";\n    print \"Target: $target\\n\";\n\n    my $result = sprintf(\"%s completed issue %s %s due on %s\\n\", $assignee, $issue, $title, $target);\n    print \"$result\\n\";\n\n    print \"Author: $author\\n\";\n    print \"Assignee: $assignee\\n\";\n    print \"Issue: $issue\\n\";\n    print \"Title: $title\\n\";\n    print \"Target: $target\\n\";   \n</code></pre>\n\n<p>And for some weird reason my output is coming out like this:</p>\n\n<pre><code>Author: Miguel Morales\nAssignee: Miguel Morales\nIssue: 1257\nTitle: Get wireless access to servers\nTarget: sprint-apr-2\n due on sprint-apr-27 Get wireless access to servers\n\nAuthor: Miguel Morales\nAssignee: Miguel Morales\nIssue: 1257\nTitle: Get wireless access to servers\nTarget: sprint-apr-2\n</code></pre>\n\n<p>You can see how when I print the variables one at a time, the output gets printed fine, but when I mix the variables up it gets all messed up. Any ideas why? Note I'm new to perl, but I've done some C in the past. I'm not sure if this is related to the $1, $2, $3 variables or the way I'm using sprintf, but I have tried with print, printf and still the same.</p>\n\n<p>Here is a sample <code>$message</code>:</p>\n\n<pre><code>Issue #1257 has been updated by Miguel Morales.\n\nStatus changed from In Progress to Completed\n% Done changed from 40 to 90\n\n----------------------------------------\nTask #1257: Get wireless access to servers\nhttp://test.sample.com/issues/1257#change-4651\n\n* Author: Miguel Morales\n* Status: Completed\n* Priority: Normal\n* Assigned To: Miguel Morales\n* Category: \n* Target version: sprint-apr-2\n----------------------------------------\n\n\n\n\n-- \nYou have received this notification because you have either subscribed to it, or are involved in it.\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 2, "creation_date": 1430796643, "post_id": 30043766, "comment_id": 48203056, "body": "It&#39;s just a different delimiter. Using back ticks is dangerous IMHO as you can use them to fire off system commands."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1430822788, "post_id": 30043814, "comment_id": 48216248, "body": "Good answer. I might be tempted to add that &#39;don&#39;t use backticks as a regex delimiter&#39; because it&#39;s a rather confusing option."}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1430927924, "post_id": 30043814, "comment_id": 48276829, "body": "Backticks are indeed unusual. Often I end up using a bracketed pair, such as s&lt;foo&gt;&lt;bar&gt;, because generally bracketed ones are easier to pair up when reading it."}, {"owner": {"reputation": 399, "user_id": 3420699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgkhT.jpg?s=128&g=1", "display_name": "pcjr", "link": "https://stackoverflow.com/users/3420699/pcjr"}, "edited": false, "score": 0, "creation_date": 1491496700, "post_id": 30043814, "comment_id": 73590697, "body": "In the text editor I use (vim), its default syntax highlighting assumes either slash (<code>&#47;</code>) or hash characters (<code>#</code>) for regular expression delimiters."}], "tags": [], "owner": {"reputation": 3507, "user_id": 1735796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bdeBD.png?s=128&g=1", "display_name": "hrunting", "link": "https://stackoverflow.com/users/1735796/hrunting"}, "is_accepted": false, "score": 4, "last_activity_date": 1430796777, "last_edit_date": 1495541385, "creation_date": 1430796777, "answer_id": 30043814, "question_id": 30043766, "link": "https://stackoverflow.com/questions/30043766/backtick-character-in-perl-regex-meaning/30043814#30043814", "title": "Backtick Character ` in Perl Regex Meaning", "body": "<p>Those are alternative ways of delimiting the regex. Whomever wrote that code chose to use something else for personal reasons or, possibly, for code readability. Often, if patterns are often going to involve <code>/</code>, something else will be chosen to avoid having to escape the slash character in the regex.</p>\n\n<p><a href=\"https://stackoverflow.com/a/5770625/1735796\">This answer</a> provides more information.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4864663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430796777, "creation_date": 1430796473, "question_id": 30043766, "link": "https://stackoverflow.com/questions/30043766/backtick-character-in-perl-regex-meaning", "title": "Backtick Character ` in Perl Regex Meaning", "body": "<p>I have inherited a Perl codebase that uses regex to parse an XML file. Not optimal, I know. I have lines of code like:</p>\n\n<pre><code>$title =~ s`&lt;(.*?)&gt;``g;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>$content =~ s`__DOUBLEFIG__`${fig_html}`;\n</code></pre>\n\n<p>The standard Perl find and replace takes the form of </p>\n\n<pre><code>s/foo/bar/g;\n</code></pre>\n\n<p>What does</p>\n\n<pre><code>s`foo`bar`g;\n</code></pre>\n\n<p>do?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 525, "user_id": 3694028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a631f2f9266385b14ff6301c02f2071b?s=128&d=identicon&r=PG&f=1", "display_name": "Richard RP", "link": "https://stackoverflow.com/users/3694028/richard-rp"}, "is_accepted": false, "score": 1, "last_activity_date": 1430811803, "last_edit_date": 1430811803, "creation_date": 1430808535, "answer_id": 30046009, "question_id": 30043537, "link": "https://stackoverflow.com/questions/30043537/in-perl-mapping-between-a-reference-file-and-a-series-of-files/30046009#30046009", "title": "In Perl, mapping between a reference file and a series of files", "body": "<p>I am assuming that you want to print all lines of <code>test.txt</code> along with the column <code>ID3</code> which is defined through a combination of <code>number*.txt</code>.</p>\n\n<p><strong>Edited</strong> (I misundertood the question):</p>\n\n<pre><code>##  Save test.txt for later\nmy $ref = shift;\n\n##  Parse number*.txt\nmy %id23;\n/(\\S).* (\\S+)/ and\n    push @{$id23{$1}}, $2\n    while(&lt;&gt;);\n\n##  Combine in print\n@ARGV = $ref;\n/(.+?) +((.)\\S*)/\n    and printf \"%6s %6s %6s\\n\", \n        $1, $2, shift @{$id23{$3}}\n    while(&lt;&gt;);\n</code></pre>\n\n<p>Run the script with <code>test.txt</code> followed by <code>number*.txt</code> as arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "edited": false, "score": 0, "creation_date": 1430836362, "post_id": 30050136, "comment_id": 48226320, "body": "Thank you very much!! I wasn&#39;t sure how to implement the key value pairs but this makes a lot of sense."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1430821993, "last_edit_date": 1430821993, "creation_date": 1430820738, "answer_id": 30050136, "question_id": 30043537, "link": "https://stackoverflow.com/questions/30043537/in-perl-mapping-between-a-reference-file-and-a-series-of-files/30050136#30050136", "title": "In Perl, mapping between a reference file and a series of files", "body": "<p>This isn't doing what you think it is:</p>\n\n<pre><code>chomp (my @ref1 = &lt;$fh&gt;);\nmy %hash = @ref1;\n</code></pre>\n\n<p>There's no magic to transpose key/values here - so what you're doing is getting a hash that looks like:</p>\n\n<pre><code>      '2       C  ' =&gt; '2       HZ',\n      'ID1    ID2' =&gt; '1       HZ',\n      '1       HX' =&gt; '1       HY',\n      '2       N' =&gt; undef\n</code></pre>\n\n<p>Bet that wasn't what you wanted. </p>\n\n<p>I suspect what you may want instead is:</p>\n\n<pre><code>    my %ref1;\n    while ( &lt;$input&gt; ) {\n        chomp;\n        my ( $key, $value ) = split;\n        push ( @{$ref1{$key}}, $value );\n    }\n    print Dumper \\%ref1;\n</code></pre>\n\n<p>You're also opening your files for writing in your second loop. You probably don't want to do that either. </p>\n\n<p>I'd be going with something like:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $ref1       = 'ref1.txt';\nmy $input_path = '/path/';\n\nopen my $ref1_fh, '&lt;', $ref1 or die \"Can't read $ref1: $!\";\n\nmy %ref1;\nwhile (&lt;$ref1_fh&gt;) {\n    chomp;\n    next if m/ID/;\n    my ( $key, $value ) = split;\n    my $zeropadded = sprintf( \"%03d\", $key );\n    my ($firstletter) = ( $value =~ m/^(\\w)/ );\n    push( @{ $ref1{$zeropadded}{$firstletter} }, $value );\n\n}\n\nprint Dumper \\%ref1;\n\nprint join( \"\\t\", \"ID1\", \"ID2\", \"ID3\" ), \"\\n\";\nforeach my $filename ( glob(\"number*.txt\") ) {\n    my ($ref_num) = ( $filename =~ m/number(\\d+)/ );\n    open( my $input, \"&lt;\", $filename ) or warn $!;\n    while (&lt;$input&gt;) {\n        chomp;\n        my ( $key, $value ) = split;\n        my ($firstletter) = ( $key =~ m/^(\\w)/ );\n        if ( defined $ref1{$ref_num}{$firstletter}\n            and @{ $ref1{$ref_num}{$firstletter} } )\n        {\n            my $refkey = pop( @{ $ref1{$ref_num}{$firstletter} } );\n\n            print join( \"\\t\", int $ref_num, $refkey, $value ), \"\\n\";\n        }\n    }\n    close($input);\n}\n</code></pre>\n\n<p>I've converted the 'ref' number to be zero padded, so it matches the filenames directly, as you specify your filename is <code>number001.txt</code> matching <code>1</code> in <code>ref1</code>. </p>\n\n<p>I'm also inserting the contents of <code>$ref1</code> into a hash of arrays, keyed on the first letter you're looking for - popping the 'lookup' value until empty.</p>\n\n<p>So we therefore get:</p>\n\n<pre><code>ID1 ID2 ID3\n1   HY  5\n1   HX  4\n1   HZ  7\n2   C   9\n2   HZ  11\n2   N   0\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 30050136, "answer_count": 2, "score": 2, "last_activity_date": 1430821993, "creation_date": 1430794845, "question_id": 30043537, "link": "https://stackoverflow.com/questions/30043537/in-perl-mapping-between-a-reference-file-and-a-series-of-files", "title": "In Perl, mapping between a reference file and a series of files", "body": "<p>I would like to map two data sets in Perl. I have one data set (ref 1) which is unchanging, the other data must be extracted from a series of files (1-20) to match ref1. </p>\n\n<pre><code>Ref1\nID1    ID2\n1       HZ\n1       HX\n1       HY\n2       C  \n2       HZ\n2       N\n\nFile 1\nID2    ID3\nHA      5 \nHB      4\nHC      7\nN       2\n\nFile 2\nID2    ID3\nC      9\nHZ     11\nN      0\n</code></pre>\n\n<p>Ideal output:</p>\n\n<pre><code>ID1 ID2 ID3 \n1   HZ   5\n1   HX   4 \n1   HY   7\n2   C    9\n2   HZ   11\n2   N    0\n</code></pre>\n\n<p>The match occurs between the first letter of ID2 in ref1 with the first letter of ID2 in file1 until matches for all ID1 entries have been made, then file2 is opened and matched against all ID1 numbered 2. The file names have the format number001.txt, number002.txt ect, so ID1 may be retrieved from the file name. </p>\n\n<p>I hope this makes sense. I am a beginner in Perl and this is what I have so far:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $ref1 = 'test.txt';\nmy $input_path = '/path/';\n\nopen my $fh, '&lt;' $ref1 or die \"Can't read $ref1: $!\";\nchomp (my @ref1 = &lt;$fh&gt;);\n\nmy %hash = @ref1;\n\nmy @filehandles;\nfor ($i=0; $i&lt;20, $i++) {\n    local *FILE;\n    open(FILE, \"&gt;number$i.txt\") or die $!;\n    push(@filehandles, *FILE);\n}\n</code></pre>\n\n<p>Any suggestions would be extremely helpful.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 1, "creation_date": 1430794740, "post_id": 30043424, "comment_id": 48202587, "body": "in your file <code>Crypt::HSXKPasswd</code> you need to <code>use Crypt::HSXKPasswd::Dictionary::Default;</code>"}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1430844527, "post_id": 30043424, "comment_id": 48232342, "body": "<code>Crypt::HSXKPasswd::Dictionary::Default</code> - the package name wasn&#39;t converted to file name. Could you please publish a couple lines around the use statement (before the change that fixed it)? Thank you."}, {"owner": {"reputation": 612, "user_id": 174985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d9e6659cf78127bc9a95e307086ad44b?s=128&d=identicon&r=PG", "display_name": "Bart B", "link": "https://stackoverflow.com/users/174985/bart-b"}, "reply_to_user": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1430903419, "post_id": 30043424, "comment_id": 48258419, "body": "@Dallaylaen - I don&#39;t have the broken code anymore, but it was a require directive rather than a use directive, and if memory serves it was using a string rather than a bare word, and might well explain the whole problem."}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 1, "creation_date": 1430916993, "post_id": 30043424, "comment_id": 48268071, "body": "@BartB yes it does. <code>require &quot;Foo::Bar&quot;;</code> will try to load a Foo::Bar literally. You might want to replace it with <code>use Module::Load; load &quot;Foo::Bar&quot;; </code> - it should autodetect whether it&#39;s a file, or a package."}, {"owner": {"reputation": 612, "user_id": 174985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d9e6659cf78127bc9a95e307086ad44b?s=128&d=identicon&r=PG", "display_name": "Bart B", "link": "https://stackoverflow.com/users/174985/bart-b"}, "reply_to_user": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "edited": false, "score": 0, "creation_date": 1431004533, "post_id": 30043424, "comment_id": 48315633, "body": "@Dallaylaen you should pop that into an answer, that way I can accept it and you can pick up the reputation your answer deserves!"}], "answers": [{"tags": [], "owner": {"reputation": 3507, "user_id": 1735796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bdeBD.png?s=128&g=1", "display_name": "hrunting", "link": "https://stackoverflow.com/users/1735796/hrunting"}, "is_accepted": false, "score": 1, "last_activity_date": 1430915696, "last_edit_date": 1430915696, "creation_date": 1430795186, "answer_id": 30043596, "question_id": 30043424, "link": "https://stackoverflow.com/questions/30043424/perl-use-related-modules-within-a-package-hierarchy/30043596#30043596", "title": "Perl - use related modules within a package hierarchy", "body": "<p>Most likely, your current working directory is not where you think it is at the time the module is loaded. Something in one of your modules may be changing the current working directory. For example, I can reproduce the problem by having a module that looks like this:</p>\n\n<pre><code>package Crypt::HSXKPasswd;\n\nBEGIN { chdir(\"/\"); }\n\nuse strict;\nuse warnings;\nuse Crypt::HSXKPasswd::Dictionary::Default;\n\n1;\n</code></pre>\n\n<p>Your problem likely isn't this straightforward, but you probably have a module somewhere in the chain doing something similar, whether through something as direct as that <code>BEGIN</code> statement or less obvious, as by changing a directory before a <code>require</code> statement. Given that your module is failing at line 482, it's probably not a <code>use</code> statement that's loading the module (those are usually listed at the top of a package), so I'd lean towards a <code>chdir()</code> initiated somewhere before a <code>require</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 3507, "user_id": 1735796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bdeBD.png?s=128&g=1", "display_name": "hrunting", "link": "https://stackoverflow.com/users/1735796/hrunting"}, "edited": false, "score": 1, "creation_date": 1430915811, "post_id": 30055501, "comment_id": 48267136, "body": "See <a href=\"http://stackoverflow.com/a/30043596/1735796\">my answer</a>. The reason that works for you is that <code>require</code> happens at runtime, whereas <code>use</code> happens at compile time. Because your <code>use lib</code> statement references a relative path, if your working directory changes (which is to what the path is relative), then the script may no longer be able to load modules out of that relative path at runtime."}], "tags": [], "owner": {"reputation": 612, "user_id": 174985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d9e6659cf78127bc9a95e307086ad44b?s=128&d=identicon&r=PG", "display_name": "Bart B", "link": "https://stackoverflow.com/users/174985/bart-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1430835319, "creation_date": 1430835319, "answer_id": 30055501, "question_id": 30043424, "link": "https://stackoverflow.com/questions/30043424/perl-use-related-modules-within-a-package-hierarchy/30055501#30055501", "title": "Perl - use related modules within a package hierarchy", "body": "<p>For reasons I don't understand, changing from using <code>require</code> within the constructor only when <code>Crypt::HSXKPasswd::Dictionary::Default</code> was needed (only needed for some paths through the constructor), to just importing it with a <code>use</code> statement at the top of the file, fixed the problem.</p>\n\n<p>I think the moral of the story is probably not to try to optimise too soon, and not to try to be too clever for your own good!</p>\n"}, {"tags": [], "owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "is_accepted": true, "score": 1, "last_activity_date": 1431014197, "last_edit_date": 1431014197, "creation_date": 1431009414, "answer_id": 30104231, "question_id": 30043424, "link": "https://stackoverflow.com/questions/30043424/perl-use-related-modules-within-a-package-hierarchy/30104231#30104231", "title": "Perl - use related modules within a package hierarchy", "body": "<p>Note <code>Crypt::HSXKPasswd::Dictionary::Default</code> in the error message - it wasn't converted into <code>Crypt/HSXKPasswd/Dictionary/Default.pm</code>, so Perl tried to load a <em>package</em> literally, and failed. </p>\n\n<p>This may happen in use case like follows: </p>\n\n<pre><code>my $foo = \"Foo::Bar\";\nrequire $foo; # tries lo load literal Foo::Bar\n</code></pre>\n\n<p>This can be overcome by using <a href=\"https://metacpan.org/pod/Module::Load\" rel=\"nofollow\">Module::Load</a> which will autodetect whether you're going to load a module or file. </p>\n\n<pre><code>use Module::Load;\n\n# later\nmy $foo = \"Foo::Bar\";\nload $foo;  \n</code></pre>\n\n<p>Or one can use a string eval:</p>\n\n<pre><code>my $foo = \"Foo::Bar\";\neval \"require $foo\" or die $@; \n</code></pre>\n\n<p>But note that <code>evil</code>ing strings may be dangerous, so check the variable twice twice in this case.</p>\n"}], "owner": {"reputation": 612, "user_id": 174985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d9e6659cf78127bc9a95e307086ad44b?s=128&d=identicon&r=PG", "display_name": "Bart B", "link": "https://stackoverflow.com/users/174985/bart-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 30104231, "answer_count": 3, "score": 0, "last_activity_date": 1431014197, "creation_date": 1430793997, "question_id": 30043424, "link": "https://stackoverflow.com/questions/30043424/perl-use-related-modules-within-a-package-hierarchy", "title": "Perl - use related modules within a package hierarchy", "body": "<p>I'm trying to create a number of related classes within the same namespace, but the classes can't seem to find each other.</p>\n\n<p>I'm working within the namespace <code>Crypt::HSXKPasswd</code>. My <code>.pm</code> files are in the correct file paths in a folder <code>./lib</code> (<code>Crypt::HSXKPasswd</code> is defined in <code>./lib/Crypt/HSXKPasswd.pm</code> etc.).</p>\n\n<p>Within my main module's constructor (<code>Crypt::HSXKPasswd-&gt;new</code>) I try to instantiate an object of type <code>Crypt::HSXKPasswd::Dictionary::Default</code>.</p>\n\n<p>My test file is located in <code>.</code>, and has the following contents:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse lib './lib';\nuse Crypt::HSXKPasswd;\n\nmy $hsxkpasswd = Crypt::HSXKPasswd-&gt;new();\n</code></pre>\n\n<p>It fails to execute with the following error:</p>\n\n<pre><code>Can't locate Crypt::HSXKPasswd::Dictionary::Default in @INC (@INC contains: ./lib /Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18 /Network/Library/Perl/5.18/darwin-thread-multi-2level /Network/Library/Perl/5.18 /Library/Perl/Updates/5.18.2/darwin-thread-multi-2level /Library/Perl/Updates/5.18.2 /System/Library/Perl/5.18/darwin-thread-multi-2level /System/Library/Perl/5.18 /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level /System/Library/Perl/Extras/5.18 .) at lib/Crypt/HSXKPasswd.pm line 482.\n</code></pre>\n\n<p>Notice that <code>@INC</code> contains <code>./lib</code>. The following head command shows that the <code>.pm</code> file for the module is located within the correct path under <code>./lib</code>, and that it does define the correct package:</p>\n\n<pre><code>$ head -1 ./lib/Crypt/HSXKPasswd/Dictionary/Default.pm \npackage Crypt::HSXKPasswd::Dictionary::Default;\n$\n</code></pre>\n\n<p>If the <code>.pm</code> file exists, defines the module, and is located in the correct path relative to a folder in <code>@INC</code>, why is Perl not seeing it?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1430784519, "post_id": 30042019, "comment_id": 48199937, "body": "YES! That&#39;s exactly for what I looking. Nicely formatted output. thanx."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1430784170, "last_edit_date": 1430784170, "creation_date": 1430783832, "answer_id": 30042019, "question_id": 30041069, "link": "https://stackoverflow.com/questions/30041069/splitting-a-line-into-parts-by-two-different-delimiter/30042019#30042019", "title": "Splitting a line into parts by two different delimiter", "body": "<p>This will do as you ask. I've changed <code>$slash_string</code> to be a word, followed by zero or more occurrences of a slash followed by another word.</p>\n\n<p>I've also taken the <code>+</code> quantifier off your <code>($slash_string)+</code> (because we only want one sequence of slash-separated words here) and added the <code>/x</code> modifier so that the patterns can be made more readable by adding insignificant whitespace.</p>\n\n<p>I'm pretty sure the output matches your requirement, but I've only checked it by eye.</p>\n\n<pre><code>use 5.014;\nuse warnings;\n\nmy $slash_string = qr/ \\w+ (?: \\s* \\/ \\s* \\w+ )* /x;\n\nwhile ( &lt;DATA&gt; ) { \n    if ( / ^ ($slash_string) \\s+ ($slash_string) \\s+ (.*) /x ) {\n        say join '  ', map \"[$_]\", $1, $2, $3;\n    }\n}\n\n__DATA__\nmagnam est dolorem ea est\nnon / ipsum harum asperiores nesciunt voluptatem\nnunt / harum / dicta nisi minus quo similique unde\nporro inventore / repudiandae dolorem ipsum\nenim ipsam / aut / numquam illum vero eveniet\nnatus / voluptas aut / deserunt et nisi sequi est\nsed / quam / magni ex / assumenda / et eaque cum et modi\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>[magnam]  [est]  [dolorem ea est]\n[non / ipsum]  [harum]  [asperiores nesciunt voluptatem]\n[nunt / harum / dicta]  [nisi]  [minus quo similique unde]\n[porro]  [inventore / repudiandae]  [dolorem ipsum]\n[enim]  [ipsam / aut / numquam]  [illum vero eveniet]\n[natus / voluptas]  [aut / deserunt]  [et nisi sequi est]\n[sed / quam / magni]  [ex / assumenda / et]  [eaque cum et modi]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1430784564, "post_id": 30042042, "comment_id": 48199951, "body": "Works too, but I more like the regex solution. Thanx."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 3, "last_activity_date": 1430783929, "creation_date": 1430783929, "answer_id": 30042042, "question_id": 30041069, "link": "https://stackoverflow.com/questions/30041069/splitting-a-line-into-parts-by-two-different-delimiter/30042042#30042042", "title": "Splitting a line into parts by two different delimiter", "body": "<p>If the count of the spaces around the <code>/</code> isn't matter, the problem can be reduced to <code>split at spaces</code>. The logic:</p>\n\n<ul>\n<li>replace all <code>\\s*/\\s*</code> with only the <code>/</code> - e.g. from the <code>word1 / word2 / word3</code> you will get <code>word1/word2/word3</code></li>\n<li>spit the string at the spaces into 3 parts</li>\n<li>replace each <code>/</code> back to <code>/</code></li>\n</ul>\n\n<p>code</p>\n\n<pre><code>while(&lt;DATA&gt;) {\n    chomp;\n    s!\\s*/\\s*!/!g;   #remove all spaces around the /\n    my @parts = split /\\s+/, $_, 3;\n    say join ' | ', map {s!/! / !gr} @parts; #return the spaces\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>magnam | est | dolorem ea est\nnon / ipsum | harum | asperiores nesciunt voluptatem\nnunt / harum / dicta | nisi | minus quo similique unde\nporro | inventore / repudiandae | dolorem ipsum\nenim | ipsam / aut / numquam | illum vero eveniet\nnatus / voluptas | aut / deserunt | et nisi sequi est\nsed / quam / magni | ex / assumenda / et | eaque cum et modi\n</code></pre>\n"}], "owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 30042019, "answer_count": 2, "score": 2, "last_activity_date": 1430784170, "creation_date": 1430778328, "last_edit_date": 1430779694, "question_id": 30041069, "link": "https://stackoverflow.com/questions/30041069/splitting-a-line-into-parts-by-two-different-delimiter", "title": "Splitting a line into parts by two different delimiter", "body": "<p>I have lines with the following structure:</p>\n\n<pre><code>STRING1 space STRING2 space FREETEXT\n</code></pre>\n\n<p>where both <code>STRING1</code> and <code>STRING2</code> could be:</p>\n\n<ol>\n<li>\"space* slash space*\" <code>\\s*/\\s*</code> delimited words, e.g. <code>word1 / word2 / word3</code>.</li>\n<li><strong>or</strong> one signle word. Regex: <code>\\w+</code></li>\n<li>the <code>FREETEXT</code> is any string... <code>(.*)</code></li>\n</ol>\n\n<p>I know how to match:</p>\n\n<pre><code>* one word such `\\w+`\n* two delimited words: `\\w+\\s*/\\s*\\w+'\n</code></pre>\n\n<p>but don't know how to match \"<em>1 <strong>or</strong> more</em>\" words delimited by <code>\\s*/\\s*</code>, e.g. something like <code>/(\\w+(\\s*/\\s*)?)/</code></p>\n\n<p>maybe more understandable definition:</p>\n\n<pre><code>line: string space string space freetext;\nstring: \\w+\n        ||\n        string \\s*/\\s* \\w+\nspace: \\s+\nfreetext: .*\n</code></pre>\n\n<p>Need get all 3 parts, e.g. the following code</p>\n\n<pre><code>use 5.014;\nuse warnings;\nmy $slash_string = qr(\\w+|\\w+\\s*/\\s*);                     #&lt;- help1 here\nwhile(&lt;DATA&gt;) {\n    if( m{^($slash_string)+\\s+($slash_string)+\\s+(.*)$} ) {  #&lt;- help2 here\n        say join ' | ', $1, $2, $3;\n    }\n}\n__DATA__\nmagnam est dolorem ea est\nnon / ipsum harum asperiores nesciunt voluptatem\nnunt / harum / dicta nisi minus quo similique unde\nporro inventore / repudiandae dolorem ipsum\nenim  ipsam / aut / numquam illum vero eveniet\nnatus / voluptas aut / deserunt et nisi sequi est\nsed / quam / magni ex / assumenda / et eaque cum et modi\n</code></pre>\n\n<p>should produce the wanted output</p>\n\n<pre><code>magnam | est | dolorem ea est\nnon / ipsum | harum | asperiores nesciunt voluptatem\nnunt / harum / dicta | nisi | minus quo similique unde\nporro | inventore / repudiandae | dolorem ipsum\nenim | ipsam / aut / numquam | illum vero eveniet\nnatus / voluptas | aut / deserunt | et nisi sequi est\nsed / quam / magni | ex / assumenda / et | eaque cum et modi\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 7872, "user_id": 7841, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/3KsHr.png?s=128&g=1", "display_name": "Leonardo Herrera", "link": "https://stackoverflow.com/users/7841/leonardo-herrera"}, "edited": false, "score": 1, "creation_date": 1430768105, "post_id": 30036804, "comment_id": 48192879, "body": "If it is a 40k lines file, why do you want to read it up all in memory?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430768373, "post_id": 30036804, "comment_id": 48193031, "body": "At a guess I would say your code will work if you change your test to <code>$msgarray[$i] =~ &#47;^$errortarget&#47;m</code> which will allow the <code>^</code> to match after the leading newline on your records"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430827419, "post_id": 30036804, "comment_id": 48219221, "body": "Please don&#39;t fix your code after posting it. It puts other people&#39;s comments and solutions out of context"}, {"owner": {"reputation": 11, "user_id": 2333823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d5691ae53f7bb54c8fb149c6fc7e5fc?s=128&d=identicon&r=PG", "display_name": "Drubs1181", "link": "https://stackoverflow.com/users/2333823/drubs1181"}, "edited": false, "score": 0, "creation_date": 1430840941, "post_id": 30036804, "comment_id": 48230025, "body": "gotcha. sorry Borodin, still relatively new to using this site. I&#39;ll follow SOP better going forward."}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 3, "last_activity_date": 1430764096, "creation_date": 1430764096, "answer_id": 30037313, "question_id": 30036804, "link": "https://stackoverflow.com/questions/30036804/using-perl-how-to-read-in-a-file-and-parse-through-logs-to-find-error-logs-and-o/30037313#30037313", "title": "Using Perl how to read in a file and parse through logs to find error logs and output to a log.txt file", "body": "<p>Add the newline character to your delimiter.  Change:</p>\n\n<pre><code>$/ = \" .\";\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>$/ = \" .\\n\";\n</code></pre>\n\n<p>And if you want to remove the delimiter, you can <code>chomp</code>.</p>\n\n<pre><code>while(&lt;FH&gt;)\n{\n    chomp;\n    push (@msgarray, $_);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430784739, "post_id": 30037866, "comment_id": 48199998, "body": "That isn&#39;t true. The <code>close</code> is outside both the <code>while</code> and the <code>for</code> loops"}], "tags": [], "owner": {"reputation": 3999, "user_id": 4840338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad15872b6c22e87af054b83b3cc564ab?s=128&d=identicon&r=PG&f=1", "display_name": "omuthu", "link": "https://stackoverflow.com/users/4840338/omuthu"}, "is_accepted": false, "score": -1, "last_activity_date": 1430784832, "last_edit_date": 1430784832, "creation_date": 1430765877, "answer_id": 30037866, "question_id": 30036804, "link": "https://stackoverflow.com/questions/30036804/using-perl-how-to-read-in-a-file-and-parse-through-logs-to-find-error-logs-and-o/30037866#30037866", "title": "Using Perl how to read in a file and parse through logs to find error logs and output to a log.txt file", "body": "<p>The file handle <code>OUTPUT</code> is closed within the <code>for</code> loop which you access for every iteration after closing. Move it outside the loop and try it</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 2333823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d5691ae53f7bb54c8fb149c6fc7e5fc?s=128&d=identicon&r=PG", "display_name": "Drubs1181", "link": "https://stackoverflow.com/users/2333823/drubs1181"}, "edited": false, "score": 0, "creation_date": 1430773771, "post_id": 30038233, "comment_id": 48196027, "body": "Thanks that helps a lot! Would it be possible for you to tell me why my code isn&#39;t working (whether it be the specific line with an error or what?) I know my code is bad form (that&#39;s how I learned from an intro to perl course at local college), I am curious where my code is failing. Thanks if you can help!!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 2333823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d5691ae53f7bb54c8fb149c6fc7e5fc?s=128&d=identicon&r=PG", "display_name": "Drubs1181", "link": "https://stackoverflow.com/users/2333823/drubs1181"}, "edited": false, "score": 0, "creation_date": 1430774037, "post_id": 30038233, "comment_id": 48196158, "body": "@Drubs1181: As I said a couple of times, the problem is that you have set <code>$&#47; = &quot; .&quot;</code> so each record has a newline at the <i>start</i>, and <code>&#47;^ERROR&#47;</code> doesn&#39;t match"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1430767890, "last_edit_date": 1430767890, "creation_date": 1430767099, "answer_id": 30038233, "question_id": 30036804, "link": "https://stackoverflow.com/questions/30036804/using-perl-how-to-read-in-a-file-and-parse-through-logs-to-find-error-logs-and-o/30038233#30038233", "title": "Using Perl how to read in a file and parse through logs to find error logs and output to a log.txt file", "body": "<p>The problem with setting <code>$/ = \" .\"</code> is that the lines you read will end at that closing dot, and the following line will start with the newline character after it. That means none of your lines except possibly the first will start with <code>\"ERROR\"</code> - they will start with <code>\"\\nERROR\"</code> instead, and so your test will always fail</p>\n\n<p>There are some other issues with your code that you will want to understand.</p>\n\n<ul>\n<li><p>You <em>must always</em> <code>use strict</code> and <code>use warnings</code>, and declare all your variables with <code>my</code> as close as possible to their first point of use</p></li>\n<li><p>You should always use lexical file handles with the three-parameter form of <code>open</code>. You also need to check the status of every <code>open</code> and put <code>$!</code> in the <code>die</code> string so that you know <em>why</em> it failed. So</p>\n\n<pre><code>open(FH,$filetoparse);\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>open my $in_fh, '&lt;', $filetoparse or die qq{Unable to open \"$filetoparse\" for input: $!};\n</code></pre></li>\n<li><p>It is better to process text files line by line unless you have good reasons to read them into memory in their entirety \u2014 for instance, if you need to do multiple passes through the data, or if you need random access to the contents instead of processing them linearly.</p>\n\n<p>It's also worth noting that, instead of writing</p>\n\n<pre><code>while ( &lt;$in_fh&gt; ) {\n    push @msgarray, $_;\n}\n</code></pre>\n\n<p>you can say just</p>\n\n<pre><code>@msgarray = &lt;$in_fh&gt;;\n</code></pre>\n\n<p>which has exactly the same result</p></li>\n<li><p>It is often better to iterate over the <em>contents</em> of an array rather than over its indices. So instead of </p>\n\n<pre><code>for ( my $i = 0; $i &lt; @msgarray; ++$i ) {\n    # Do stuff with $msgarray[$i];\n}\n</code></pre>\n\n<p>you could write</p>\n\n<pre><code>for my $message ( @msgarray ) {\n    # Do stuff with $message;\n}\n</code></pre></li>\n</ul>\n\n<p>Here's a rewrite of your code that demonstrates these points</p>\n\n<pre><code>open my $in_fh, '&lt;', $filetoparse\n        or die qq{Unable to open \"$filetoparse\" for input: $!};\n\n{\n    if ( $outputtype == 1 ) {\n\n        my $outputfile  = 'errorlog.txt';\n        my $errorcount  = 0;\n        my $errortarget = 'ERROR';\n\n        open my $out_fh, '&gt;&gt;', $outputfile\n                or die qq{Unable to open \"$outputfile\" for output: $!};\n\n        print $out_fh \"-----------Error Log-----------\\n\";\n\n        while ( &lt;$in_fh&gt; ) {\n          next unless /^\\Q$errortarget/;\n\n          s/\\s*\\.\\s*\\z//;       # Remove trailing detail\n          print $out_fh \"$_\\n\";\n          ++$errorcount;\n        }\n\n        print $out_fh \"\\nError Count : $errorcount\\n\";\n\n        close ($out_fh) or die $!;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 2333823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d5691ae53f7bb54c8fb149c6fc7e5fc?s=128&d=identicon&r=PG", "display_name": "Drubs1181", "link": "https://stackoverflow.com/users/2333823/drubs1181"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1430827312, "creation_date": 1430762507, "last_edit_date": 1430827312, "question_id": 30036804, "link": "https://stackoverflow.com/questions/30036804/using-perl-how-to-read-in-a-file-and-parse-through-logs-to-find-error-logs-and-o", "title": "Using Perl how to read in a file and parse through logs to find error logs and output to a log.txt file", "body": "<p>I am trying to use Perl to create a program that will read in data for a file that is 40,000+ lines long and parse through each message to extract the error messages from it.</p>\n\n<p>A sample of the data I am using looks like this:</p>\n\n<pre><code>--------All Messages---------\nSUCCESS: data transferred successfully .\nSUCCESS: data transferred successfully .\nSUCCESS: data transferred successfully .\nERROR: there was an error transferring data .\nSUCCESS: data transferred successfully .\nSUCCESS: data transferred successfully .\nSUCCESS: data transferred successfully .\nERROR: there was an error transferring the data and the error message spans\nmore than 1 line of code and may also contain newline characters as well .\nSUCCESS: data transferred successfully .\nSUCCESS: data transferred successfully .\nSUCCESS: data transferred successfully .\n---------END REPOSITORY---------\n</code></pre>\n\n<p>each message in the log has the following in common:</p>\n\n<p>1) it starts with either SUCCESS or ERROR depending on the outcome</p>\n\n<p>2) all messages will end with <code>&lt;whitespace&gt;&lt;period&gt;&lt;newline&gt;</code></p>\n\n<p>The following is code that I have written but for some reason I can't seem to debug it. Any help is greatly appreciated.</p>\n\n<pre><code>open(FH,$filetoparse);\n{\n# following line is supposed to change the delimiter for the file\n    $/ = \" .\";\n# the follow statement will create an error log of all error messages in log and save it\n# to a file named errorlog.txt\n    while(&lt;FH&gt;)\n    {\n        push (@msgarray, $_);\n    }\nif ($outputtype == 1)\n{\n    $outputfile=\"errorlog.txt\";\n    open(OUTPUT,\"&gt;&gt;$outputfile\");\n    $errorcount=0;\n    $errortarget=\"ERROR\";\n    print OUTPUT \"-----------Error Log-----------\\n\";\n\n    for ($i=0;$i&lt;@msgarray;$i++)\n    {\n    if ($msgarray[$i] =~ /^$errortarget/)\n    {\n\n        print OUTPUT \"$msgarray[$i]\\n\";\n#       print OUTPUT \"next code is: \\n\";\n        $errorcount++;\n\n    }\n    print OUTPUT \"\\nError Count : $errorcount\\n\";\n\n    close (OUTPUT);\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 122320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c79e2b9915d44396d7185ff26cd1dea?s=128&d=identicon&r=PG", "display_name": "Danalog", "link": "https://stackoverflow.com/users/122320/danalog"}, "is_accepted": false, "score": 2, "last_activity_date": 1430759923, "creation_date": 1430759923, "answer_id": 30036026, "question_id": 30035834, "link": "https://stackoverflow.com/questions/30035834/perl-regex-for-specific-string/30036026#30036026", "title": "perl regex for specific string", "body": "<p>Two splits might make it easier for you:</p>\n\n<pre><code>my ($transcriptID, $rest) = split(/\\|/, $line, 2);\nmy ($isoform, $deseq) = split (/_DESeq/, $rest, 2);\n$deseq = \"_DESeq$deseq\";\n</code></pre>\n\n<p>Transforms:</p>\n\n<pre><code>\"TR10052|c9_g13_i6_DESeqResultsBacterialen=248 gi|497816164|ref|WP_010130320.1| 97.56 82 2 0 1 246 9 90 7e-51 167\"\n</code></pre>\n\n<p>Into:</p>\n\n<pre><code>\"TR10052\", \"c9_g13_i6\", \"_DESeqResultsBacterialen=248 gi|497816164|ref|WP_010130320.1| 97.56 82 2 0 1 246 9 90 7e-51 167\"\n</code></pre>\n\n<p>Is that what you're looking for?</p>\n"}, {"tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": false, "score": 3, "last_activity_date": 1430760192, "creation_date": 1430760192, "answer_id": 30036104, "question_id": 30035834, "link": "https://stackoverflow.com/questions/30035834/perl-regex-for-specific-string/30036104#30036104", "title": "perl regex for specific string", "body": "<p>Use a negative look ahead to split on underscores that are <em>not</em> followed by \"letter digit\".</p>\n\n<p>Try splitting on this regex:</p>\n\n<pre><code>/\\||\\_(?![a-z]\\d)|\\s+/\n</code></pre>\n\n<p>See <a href=\"http://rubular.com/r/f778tGMdC8\" rel=\"nofollow\">live regex demo</a> matching the desired characters on which to split.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430763182, "last_edit_date": 1430763182, "creation_date": 1430762213, "answer_id": 30036708, "question_id": 30035834, "link": "https://stackoverflow.com/questions/30035834/perl-regex-for-specific-string/30036708#30036708", "title": "perl regex for specific string", "body": "<p>It's easy to over-use <code>split</code>. In this case I think it's better to extract the fields you want by writing a custom regex pattern.</p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) {\n  my ($transcript_id, $isoform, $deseq) = /^ ([^|]+) \\| (c\\d+_g\\d+_i\\d+) _ (\\S+)/x;\n  print $_, \"\\n\" for $transcript_id, $isoform, $deseq;\n}\n\n__DATA__\nTR10052|c9_g13_i6_DESeqResultsBacterialen=248   gi|497816164|ref|WP_010130320.1|        97.56   82      2       0       1       246     9       90      7e-51     167\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>TR10052\nc9_g13_i6\nDESeqResultsBacterialen=248\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 2925852, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a8bffdebda00fde2b34d87e9d7b4c415?s=128&d=identicon&r=PG&f=1", "display_name": "Bex", "link": "https://stackoverflow.com/users/2925852/bex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1430763182, "creation_date": 1430759273, "last_edit_date": 1430761914, "question_id": 30035834, "link": "https://stackoverflow.com/questions/30035834/perl-regex-for-specific-string", "title": "perl regex for specific string", "body": "<p>I want to split a string into different columns. Each of the lines appears as the one below.</p>\n\n<pre><code>TR10052|c9_g13_i6_DESeqResultsBacterialen=248   gi|497816164|ref|WP_010130320.1|        97.56   82      2       0       1       246     9       90      7e-51     167\n</code></pre>\n\n<p>I can split by white space, tabs, and \"|\" but I'm having trouble splitting the rest of the first section <code>\"TR10052|c9_g13_i6_DESeqResultsBacterialen=248\"</code> by a specific match of characters. I want the first column to be the TR##### piece, the second column to be the c#_g#_i# piece and the third column to be the rest of it starting with \"_DESeq...\" etc.</p>\n\n<pre><code>while ( my $line = &lt;RESULTS&gt; ) {\n    chomp $line;\n    my @column       = split( /[\\t|] /_DES.*/ /, $line );\n    my $transcriptID = $column[0];\n    my $isoform      = $column[1];\n    my $deseq        = $column[2];\n    }\n</code></pre>\n"}, {"tags": ["perl", "debian"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430757542, "post_id": 30035191, "comment_id": 48186530, "body": "This seems to be more a Debian user question than a Perl question."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430758607, "post_id": 30035191, "comment_id": 48187091, "body": "Is the problem getting python.h, or is the problem that the installer can&#39;t find it?"}, {"owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "edited": false, "score": 0, "creation_date": 1430759321, "post_id": 30035191, "comment_id": 48187517, "body": "As far as I know Python.h comes with the python-dev package. When I tried to install python-dev. It didnt complain like &quot;the package is installed&quot; or something. I tried to locate Python.h and didnt get back any result. So I think I dont have Python.h  in my machine."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430758543, "post_id": 30035425, "comment_id": 48187047, "body": "Looks like <code>apt-get install Inline::Python</code> is already using <code>cpan</code>, so this is the same as what he already tried."}, {"owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "edited": false, "score": 0, "creation_date": 1430758945, "post_id": 30035425, "comment_id": 48187286, "body": "I had a typo. I tried cpan Inline::Python. not apt-get updated it. Sorry my bad."}], "tags": [], "owner": {"reputation": 155, "user_id": 553730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272a64855b068de155abf613ad86ed24?s=128&d=identicon&r=PG", "display_name": "fvox", "link": "https://stackoverflow.com/users/553730/fvox"}, "is_accepted": false, "score": -1, "last_activity_date": 1430758042, "creation_date": 1430758042, "answer_id": 30035425, "question_id": 30035191, "link": "https://stackoverflow.com/questions/30035191/how-to-install-perl-inlinepython-in-debian/30035425#30035425", "title": "how to install perl Inline::Python in debian", "body": "<p>Try to install the package that contains library and header files. Use <strong>apt-cache</strong> to find the package name. Example:</p>\n\n<pre><code>$ apt-cache search python | grep dev\n# apt-get install python2.7-dev\n</code></pre>\n\n<p>*Or the corresponding version of your Python.</p>\n\n<p>Now try to install the module using <strong>cpan</strong> instead of apt-get:</p>\n\n<pre><code># cpan Inline::Python\n</code></pre>\n"}], "owner": {"reputation": 2920, "user_id": 3360140, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/OThx0.jpg?s=128&g=1", "display_name": "Kamrul Khan", "link": "https://stackoverflow.com/users/3360140/kamrul-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1011, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430758880, "creation_date": 1430757288, "last_edit_date": 1430758880, "question_id": 30035191, "link": "https://stackoverflow.com/questions/30035191/how-to-install-perl-inlinepython-in-debian", "title": "how to install perl Inline::Python in debian", "body": "<p>I tried to install perl Inline::Python module through </p>\n\n<pre><code>cpan Inline::Python\n</code></pre>\n\n<p>I got the below error</p>\n\n<pre><code>ERROR from evaluation of /root/.cpan/build/NINE-Y6sbU9/Inline-Python-0.49/Makefile.PL: Could not find Python.h in include path. make will not work at ./Makefile.PL line 66.\nWarning: No success on command[/usr/bin/perl Makefile.PL INSTALLDIRS=site]\n</code></pre>\n\n<p>Then I tried installing python-dev using apt-get install python-dev. I got the below:</p>\n\n<pre><code>python-dev : Depends: python2.6-dev (&gt;= 2.6.6-1~) but it is not going to be installed\n</code></pre>\n\n<p>So I tried installing both python2.6 and libpython2.6. Got the below</p>\n\n<pre><code>python2.6 is already the newest version.\n</code></pre>\n\n<p>and</p>\n\n<pre><code>libpython2.6 is already the newest version.\n</code></pre>\n\n<p>What should I do now?</p>\n"}, {"tags": ["perl", "scripting", "scope", "key", "undefined"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1430757335, "post_id": 30035003, "comment_id": 48186425, "body": "I don&#39;t have time to look at this further, but it&#39;s definitely not a scope issue since you only use global variables! That&#39;s very bad :( Always use <code>use strict; use warnings;</code>."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430757699, "post_id": 30035003, "comment_id": 48186609, "body": "You realize <code>$tokpos=&quot;$tok\\#$pos&quot;;</code> is part of a comment, right?"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 2425270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHcYL.jpg?s=128&g=1", "display_name": "GJacobs", "link": "https://stackoverflow.com/users/2425270/gjacobs"}, "edited": false, "score": 0, "creation_date": 1430764636, "post_id": 30035296, "comment_id": 48190781, "body": "Thanks! The assignment in the comment was a due to a copy-pasting error, I should have proofread better. Your solution works and I learned something important."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1430758209, "last_edit_date": 1430758209, "creation_date": 1430757654, "answer_id": 30035296, "question_id": 30035003, "link": "https://stackoverflow.com/questions/30035003/perl-variable-not-assigned-in-foreach-scope-issues/30035296#30035296", "title": "Perl variable not assigned in foreach: scope issues", "body": "<p>You don't assign anything to <code>$tokpos</code>. The assignment is part of a comment - syntax highlighting in your editor should've told you. <a href=\"http://p3rl.org/strict\" rel=\"nofollow\">strict</a> would've told you, too.</p>\n\n<p>Also, you should probably use <code>$prevtokpos</code> in the division: <code>$tokpos</code> is the new value that you haven't met before. To get the output for the last token, you have to process it outside the loop, as there's no <code>$tokpos</code> to replace it. To avoid code repetition, use a subroutine to do that:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %SumHash;\nmy %ScoreHash;\n\nsub output {\n    my $token = shift;\n    for (keys %ScoreHash) {\n        my $normscore = $ScoreHash{$_} / $SumHash{$token};\n        print \"$_\\t$ScoreHash{$_}\\t$normscore\\n\";\n    }\n    undef %ScoreHash;\n    undef %SumHash;\n}\n\nmy $prevtokpos;\nwhile (&lt;DATA&gt;){\n    chomp;\n    if (my ($tokpossense,$rawscore) = /^\\s{4}(.+): (\\d+)/) {\n        my ($tok, $pos, $sensenr) = split /#/, $tokpossense;\n        my $tokpos = \"$tok\\#$pos\";\n        if (defined $prevtokpos &amp;&amp; $tokpos ne $prevtokpos) {\n            output($prevtokpos);\n        }\n\n        $prevtokpos = $tokpos;\n        $SumHash{$tokpos} += $rawscore;\n        $ScoreHash{$tokpossense} = $rawscore;\n    }\n}\noutput($prevtokpos);\n\n__DATA__\ni#CL take#v#17 my#CL checks#n#1 to#CL the#CL bank#n#2 .#IT \nContext: i#CL &lt;target&gt;take#v&lt;/target&gt; my#CL checks#n to#CL the#CL bank#n\n  Scores for take#v\n    take#v#1: 17\n    take#v#10: 158\n    take#v#17: 174\n  Winning score: 174\nContext: i#CL take#v my#CL &lt;target&gt;checks#n&lt;/target&gt; to#CL the#CL bank#n .#IT\n  Scores for checks#n\n    check#n#1: 198\n    check#n#2: 117\n    check#n#3: 42\n  Winning score: 198\nContext: take#v my#CL checks#n to#CL the#CL &lt;target&gt;bank#n&lt;/target&gt; .#IT\n  Scores for bank#n\n    bank#n#1: 81\n    bank#n#2: 202\n    bank#n#3: 68\n    bank#n#4: 37\n  Winning score: 202\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430761664, "last_edit_date": 1430761664, "creation_date": 1430760815, "answer_id": 30036297, "question_id": 30035003, "link": "https://stackoverflow.com/questions/30035003/perl-variable-not-assigned-in-foreach-scope-issues/30036297#30036297", "title": "Perl variable not assigned in foreach: scope issues", "body": "<p>You're confusing yourself by trying to print the results as soon as <code>$tokpos</code> changes. For one thing it's the values for <code>$prevtokpos</code> that are complete, but your trying to output the data for <code>$tokpos</code>; and also you're never going to display the <em>last</em> block of data because you require a change in <code>$tokpos</code> to trigger the output.</p>\n\n<p>It's far easier to accumulate all the data for a given file and then print it when the end of file is reached. This program works by keeping the three values\n<code>$tokpos</code>, <code>$sense</code>, and <code>$rawscore</code> for each line of the output in array <code>@results</code>, together with the total score for each value of <code>$tokpos</code> in <code>%totals</code>. Then it's simply a matter of dumping the contents of <code>@results</code> with an extra column that divides each value by the corresponding total.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.014; # For non-destructive substitution\n\nfor my $file ( @ARGV ) {\n\n    open my $fh, '&lt;', $file or die $!;\n\n    my (@results, %totals);\n\n    while ( &lt;$fh&gt; ) {\n        chomp;\n        next unless my ($tokpos, $sense, $rawscore) = / ^ \\s{4} ( [^#]+ \\# [^#]+ ) \\# (\\d+) : \\s+ (\\d+)  /x;\n        push @results, [ $tokpos, $sense, $rawscore ];\n        $totals{$tokpos} += $rawscore;\n    }\n\n    print \"** $file **\\n\";\n    for my $item ( @results ) {\n        my ($tokpos, $sense, $rawscore) = @$item;\n        printf \"%s\\t%s\\t%6.4f\\n\", $tokpos.$sense, $rawscore, $rawscore / $totals{$tokpos};\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>** tokpos.txt **\ntake#v#1  17  0.0487\ntake#v#10 158 0.4527\ntake#v#17 174 0.4986\ncheck#n#1 198 0.5546\ncheck#n#2 117 0.3277\ncheck#n#3 42  0.1176\nbank#n#1  81  0.2088\nbank#n#2  202 0.5206\nbank#n#3  68  0.1753\nbank#n#4  37  0.0954\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 2425270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHcYL.jpg?s=128&g=1", "display_name": "GJacobs", "link": "https://stackoverflow.com/users/2425270/gjacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 30035296, "answer_count": 2, "score": -1, "last_activity_date": 1430764423, "creation_date": 1430756738, "last_edit_date": 1430764423, "question_id": 30035003, "link": "https://stackoverflow.com/questions/30035003/perl-variable-not-assigned-in-foreach-scope-issues", "title": "Perl variable not assigned in foreach: scope issues", "body": "<p>I am trying to normalize some scores from a .txt file by dividing each score for each possible sense (eg. take#v#2; referred to as $tokpossense in my code) by the sum of all scores for a wordtype (e.g. take#v; referred to as $tokpos). The difficulty is in grouping the wordtypes together when processing each line of the so that the normalized scores are printed upon finding a new wordtype/$tokpos. I used two hashes and an if block to achieve this.</p>\n\n<p>Currently, the problem seems to be that $tokpos is undefined as a key in SumHash{$tokpos} at line 20 resulting in a division by zero. However, I believe $tokpos is properly defined within the scope of this block. What is the problem exactly and how would I best solve it? I would also gladly hear alternative approaches to this problem.</p>\n\n<p>Here's an example inputfile:</p>\n\n<pre><code>i#CL take#v#17 my#CL checks#n#1 to#CL the#CL bank#n#2 .#IT \nContext: i#CL &lt;target&gt;take#v&lt;/target&gt; my#CL checks#n to#CL the#CL bank#n\n  Scores for take#v\n    take#v#1: 17\n    take#v#10: 158\n    take#v#17: 174\n  Winning score: 174\nContext: i#CL take#v my#CL &lt;target&gt;checks#n&lt;/target&gt; to#CL the#CL bank#n .#IT\n  Scores for checks#n\n    check#n#1: 198\n    check#n#2: 117\n    check#n#3: 42\n  Winning score: 198\nContext: take#v my#CL checks#n to#CL the#CL &lt;target&gt;bank#n&lt;/target&gt; .#IT\n  Scores for bank#n\n    bank#n#1: 81\n    bank#n#2: 202\n    bank#n#3: 68\n    bank#n#4: 37\n  Winning score: 202\n</code></pre>\n\n<p>My erroneous Code:</p>\n\n<pre><code>@files = @ARGV;\nforeach $file(@files){\n    open(IN, $file);\n    @lines=&lt;IN&gt;;\n    foreach (@lines){\n        chomp;\n        #store tokpossense (eg. \"take#v#1\") and rawscore (eg. 4)\n        if (($tokpossense,$rawscore)= /^\\s{4}(.+): (\\d+)/) {\n            #split tokpossense for recombination\n            ($tok,$pos,$sensenr)=split(/#/,$tokpossense);\n            #tokpos (eg. take#v) will be a unique identifier when calculating normalized score\n            $tokpos=\"$tok\\#$pos\";\n            #block for when new tokpos(word) is found in inputfile\n            if (defined($prevtokpos) and\n                ($tokpos ne $prevtokpos)) {\n                    # normalize hash: THE PROBLEM LIES IN $SumHash{$tokpos} which is returned as zero &gt; WHY?\n                    foreach (keys %ScoreHash) {\n                        $normscore=$ScoreHash{$_}/$SumHash{$tokpos};\n                        #print the results to a file\n                        print \"$_\\t$ScoreHash{$_}\\t$normscore\\n\";\n                    }\n                    #empty hashes\n                    undef %ScoreHash;\n                    undef %SumHash;\n            }\n            #prevtokpos is assigned to tokpos for condition above\n            $prevtokpos = $tokpos;\n            #store the sum of scores for a tokpos identifier for normalization\n            $SumHash{$tokpos}+=$rawscore;\n            #store the scores for a tokpossense identifier for normalization\n            $ScoreHash{$tokpossense}=$rawscore;\n        }\n        #skip the irrelevant lines of inputfile\n        else {next;}\n    }\n}\n</code></pre>\n\n<p>Extra info: I am doing Word Sense Disambiguation using Pedersen's Wordnet WSD tool which uses Wordnet::Similarity::AllWords. The output file is generated by this package and the found scores have to be normalized for implementation in our toolset.</p>\n"}, {"tags": ["string", "perl", "divide"], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 4454952, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/06b5b99d23cc74962544e91326ab1335?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/4454952/mateusz"}, "edited": false, "score": 0, "creation_date": 1430757931, "post_id": 30034817, "comment_id": 48186736, "body": "Do you have maybe idea how can I use as stringB for example &quot;*.pl&quot;?"}, {"owner": {"reputation": 251, "user_id": 4454952, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/06b5b99d23cc74962544e91326ab1335?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/4454952/mateusz"}, "edited": false, "score": 0, "creation_date": 1430759168, "post_id": 30034817, "comment_id": 48187421, "body": "I mean, that I want to print * symbol as StringB :P Because when I use for example: &quot;perl lab2.pl ./e.pl&quot; it works ok and show me &quot;.&quot; as stringA and &quot;e.pl&quot; as stringB. But when I use &quot;perl lab2.pl ./*.pl&quot; it shows me &quot;.&quot; as stringA and &quot;lab2.pl&quot; as stringB, and I want to have &quot;*.pl&quot; as stringB."}], "tags": [], "owner": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "is_accepted": true, "score": 1, "last_activity_date": 1430758274, "last_edit_date": 1430758274, "creation_date": 1430756127, "answer_id": 30034817, "question_id": 30034680, "link": "https://stackoverflow.com/questions/30034680/how-to-divide-string-in-perl-for-2-parts/30034817#30034817", "title": "How to divide string in perl for 2 parts", "body": "<p>you can try something like this:</p>\n\n<pre><code>$string =~ m|^(.*)/(.*)$|;\n($stringA,$stringB) = ($1,$2);\nprint \"stringA = $stringA\\n\";\nprint \"stringB = $stringB\\n\";\n</code></pre>\n\n<p><strong>= edit: =</strong> </p>\n\n<p>restrict to certain values of <code>stringB</code>:</p>\n\n<pre><code>if($string =~ m|^(.*)/(.*\\.pl)$|) {\n    ($stringA,$stringB) = ($1,$2);\n    print \"stringA = $stringA\\n\";\n    print \"stringB = $stringB\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 4454952, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/06b5b99d23cc74962544e91326ab1335?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/4454952/mateusz"}, "edited": false, "score": 0, "creation_date": 1430756679, "post_id": 30034830, "comment_id": 48186033, "body": "Thanks for help, but I forget to say that I can&#39;t use anything like &quot;use XXX::YYY&quot; :P"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1430756182, "creation_date": 1430756182, "answer_id": 30034830, "question_id": 30034680, "link": "https://stackoverflow.com/questions/30034680/how-to-divide-string-in-perl-for-2-parts/30034830#30034830", "title": "How to divide string in perl for 2 parts", "body": "<p>Use <a href=\"http://p3rl.org/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nuse Path::Tiny;\n\nfor my $path (qw( ../dira/dirb/*.txt\n                  dira/dirb/dirc/.../dirn/test.pl\n             )) {\n    my $path_o = 'Path::Tiny'-&gt;new($path);\n    my $basename = $path_o-&gt;basename;\n    my $dirname = $path_o-&gt;dirname;\n    $dirname =~ s=/$==;               # Remove the trailing slash.\n    say $basename, ' ', $dirname;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 553730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272a64855b068de155abf613ad86ed24?s=128&d=identicon&r=PG", "display_name": "fvox", "link": "https://stackoverflow.com/users/553730/fvox"}, "is_accepted": false, "score": 1, "last_activity_date": 1430756636, "creation_date": 1430756636, "answer_id": 30034975, "question_id": 30034680, "link": "https://stackoverflow.com/questions/30034680/how-to-divide-string-in-perl-for-2-parts/30034975#30034975", "title": "How to divide string in perl for 2 parts", "body": "<p>You can use <a href=\"https://metacpan.org/pod/File::Basename\" rel=\"nofollow\">File::Basename</a> functions to parse file paths:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse File::Basename;\n\nmy $string = \"../dira/dirb/*.txt\";\nmy $stringA = dirname($string);\nmy $stringB = basename($string);\n\nprintf \"String A: %-25sString B: %s\\n\", $stringA, $stringB;\n\n$string = \"dira/dirb/dirc/.../dirn/test.pl\";\n$stringA = dirname($string);\n$stringB = basename($string);\n\nprintf \"String A: %-25sString B: %s\\n\", $stringA, $stringB;\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 4454952, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/06b5b99d23cc74962544e91326ab1335?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/4454952/mateusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 30034817, "answer_count": 3, "score": 1, "last_activity_date": 1430758274, "creation_date": 1430755671, "question_id": 30034680, "link": "https://stackoverflow.com/questions/30034680/how-to-divide-string-in-perl-for-2-parts", "title": "How to divide string in perl for 2 parts", "body": "<p>so I need to divide my string in perl for 2 parts. For example I have:</p>\n\n<pre><code>$string = \"../dira/dirb/*.txt\"\n</code></pre>\n\n<p>And I want to divide it on:</p>\n\n<pre><code>$stringA = \"../dira/dirb\"\n$stringB = \"*.txt\"\n</code></pre>\n\n<p>But if I have:</p>\n\n<pre><code>$string = \"dira/dirb/dirc/.../dirn/test.pl\";\n</code></pre>\n\n<p>I want to divie it on:</p>\n\n<pre><code>$stringA = \"dira/dirb/dirc/.../dirn\"\n$stringB = \"test.pl\"\n</code></pre>\n\n<p>Somebody have idea how can I do it? I tried to do something like:</p>\n\n<pre><code>$howmany++ while $string =~ m/\\//g;\n</code></pre>\n\n<p>So I know how many slashes I have. But I have no idea what I can do more with this :/</p>\n"}, {"tags": ["perl", "perl-module", "perl-data-structures"], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1430755264, "post_id": 30034111, "comment_id": 48185209, "body": "I don&#39;t think <code>Time::HiRes</code> addresses the OP&#39;s requirements. He already has a high-resolution time value <code>1372252864.901871</code>. He wants to break it down into year, month, ..., seconds, with the seconds in high resolution."}, {"owner": {"reputation": 91, "user_id": 4862770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b909005c3e49a1fc4437980410988c7b?s=128&d=identicon&r=PG", "display_name": "OpenSourceEnthusiast", "link": "https://stackoverflow.com/users/4862770/opensourceenthusiast"}, "edited": false, "score": 0, "creation_date": 1430755475, "post_id": 30034111, "comment_id": 48185334, "body": "Exactly. Time::HiRes doesn&#39;t work out for me. I need to convert the epoch to Year-Month-Day-Secs-Millisecs resolution. I then need to add values of x msecs to this. Are there any functions which take care of addition of values to local time?"}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 1, "creation_date": 1430755955, "post_id": 30034111, "comment_id": 48185628, "body": "I think you might be over-complicating the problem. Since an epoch date is in seconds, and the hi-res value is in fractional seconds, turn x msec into x fractional seconds by dividing my 1000. Add it to your existing fractional seconds and Bob&#39;s your uncle?"}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "edited": false, "score": 1, "creation_date": 1430756315, "post_id": 30034111, "comment_id": 48185835, "body": "In other words - keep the time in fractional epoch form - don&#39;t convert to a localtime list until you need to use it for display."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430756667, "post_id": 30034111, "comment_id": 48186025, "body": "Do you just need the epoch value converted to date/time fields, or do you want correction for the current time zone? Also, you say you want <i>Year-Month-Day-Secs-Millisecs</i>. Not hours and minutes?"}], "tags": [], "owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "is_accepted": false, "score": 0, "last_activity_date": 1430753842, "creation_date": 1430753842, "answer_id": 30034111, "question_id": 30033899, "link": "https://stackoverflow.com/questions/30033899/fractional-part-of-epoch/30034111#30034111", "title": "Fractional part of epoch", "body": "<p>You might want <a href=\"https://metacpan.org/pod/Time::HiRes\" rel=\"nofollow\">Time::HiRes</a>:</p>\n\n<blockquote>\n  <p>The Time::HiRes module implements a Perl interface to the usleep,\n  nanosleep, ualarm, gettimeofday, and setitimer/getitimer system calls,\n  in other words, high resolution time and timers</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1430755815, "creation_date": 1430755815, "answer_id": 30034723, "question_id": 30033899, "link": "https://stackoverflow.com/questions/30033899/fractional-part-of-epoch/30034723#30034723", "title": "Fractional part of epoch", "body": "<p>The <code>localtime</code> function breaks down a raw time like <code>1372252864</code> into year, month, day, etc. Any fractional part of the raw time is quietly ignored.</p>\n\n<p>I'm not aware of any function, either built-in or in a module, that supports broken-down times with a resolution finer than 1 second.</p>\n\n<p>But since you <em>already have</em> the fractional seconds, I'd say you can already do what you need to do. Just use <code>localtime</code> (or <code>gmtime</code>) to break down the integer part of your raw timestamp, and then take the fractional part:</p>\n\n<pre><code>$timestamp = 1372252864.901871;\n@parts = localtime($timestamp);\n$fraction = $timestamp - int($timestamp);\n$milliseconds = int($fraction * 1000.0);\n</code></pre>\n\n<p>It should be easy enough to write your own high-resolution replacement for <code>localtime</code> that does this for you.</p>\n\n<p>If you need to add 86.7 milliseconds to a timestamp, you'll need to use the raw form anyway:</p>\n\n<pre><code>$timestamp = 1372252864.901871;\n$timestamp += 86.7/1000.0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1430756875, "creation_date": 1430756875, "answer_id": 30035046, "question_id": 30033899, "link": "https://stackoverflow.com/questions/30033899/fractional-part-of-epoch/30035046#30035046", "title": "Fractional part of epoch", "body": "<p>If you just want to add to an epoch time and get another epoch time, just do:</p>\n\n<pre><code>1372252864.901871 + .0867\n</code></pre>\n\n<p>If you are doing something else, no, localtime does not preserve fractional seconds.  You probably want to use DateTime to deal with fractional seconds:</p>\n\n<pre><code>use DateTime;\nmy $time = DateTime-&gt;from_epoch(epoch=&gt;1372252864.901871, time_zone=&gt;'local');\n$time-&gt;add(nanoseconds=&gt;86.7e6);\nprint $time-&gt;epoch + $time-&gt;nanosecond / 1e9;\n</code></pre>\n\n<p>(time_zone isn't needed for this example, but sounds like what you might want for other things you might be doing with this time)</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430770762, "last_edit_date": 1430770762, "creation_date": 1430758277, "answer_id": 30035505, "question_id": 30033899, "link": "https://stackoverflow.com/questions/30033899/fractional-part-of-epoch/30035505#30035505", "title": "Fractional part of epoch", "body": "<p>The simplest way that occurs to me is to use <a href=\"https://metacpan.org/pod/Time::HiRes::Value\" rel=\"nofollow\"><code>Time::HiRes::Value</code></a> to handle arithmetic on times to 1\u03bcs accuracy, and <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow\"><code>Time::Piece</code></a> to format the result as a date/time string.</p>\n\n<p><code>Time::HiRes::Value</code> holds the time as a two-element array; the first field has the whole seconds while the second has the number of microseconds. That's the same format that <code>Time::HiRes</code> functions work with, but there's nothing that I know of that will natively convert to a date/time string so I've used <code>Time::Piece</code> to convert the whole seconds and just appended the fractional seconds.</p>\n\n<p>It looks like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Time::HiRes::Value;\nuse Time::Piece;\n\nmy $dt    = Time::HiRes::Value-&gt;new(1372252864.901871);\nmy $delta = Time::HiRes::Value-&gt;new(86.7E-3); # 86.7ms\n$dt += $delta;\nprint dt_to_string($dt), \"\\n\";\n\nsub dt_to_string {\n  my ($dt) = @_;\n  Time::Piece-&gt;new($dt-&gt;[0])-&gt;datetime =~ s{(\\d+)\\z}{$1 + $dt-&gt;[1] / 1E6}er;\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>2013-06-26T14:21:4.98857\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4862770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b909005c3e49a1fc4437980410988c7b?s=128&d=identicon&r=PG", "display_name": "OpenSourceEnthusiast", "link": "https://stackoverflow.com/users/4862770/opensourceenthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1430770762, "creation_date": 1430753267, "last_edit_date": 1430754367, "question_id": 30033899, "link": "https://stackoverflow.com/questions/30033899/fractional-part-of-epoch", "title": "Fractional part of epoch", "body": "<p>I have an epoch value of 1372252864.901871 which needs to be converted to localtime in perl. I know that localtime($val) where $val is set to   1372252864.901871 converts the value to local time. But I also need to add values of 100 msecs or say 86.7 msecs to this and determine the computed local time. How do I do this? Does the function localtime() take care of fractional epoch value that I have given?</p>\n"}, {"tags": ["regex", "perl", "pattern-matching", "string-matching"], "comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1430754260, "post_id": 30032309, "comment_id": 48184579, "body": "What do you mean by &quot;matches&quot; ?  Are the values <code>102 127</code>a range or discrete values?  Do you want to print &quot;<code>1</code>&quot; even if multiple matches occur on a line? Shouldn&#39;t the output from the above be <code>-1, -1, -1, -1, 1</code> ?"}, {"owner": {"reputation": 555, "user_id": 4384625, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/743dbb4becdbf21ab889a65844ae2617?s=128&d=identicon&r=PG&f=1", "display_name": "Abhis", "link": "https://stackoverflow.com/users/4384625/abhis"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1430804432, "post_id": 30032309, "comment_id": 48205401, "body": "@G. Cito Thanks for your help..!! The <code>102 127</code> are discrete values. And yes I want to print &quot;<code>1</code>&quot; even if multiple matches occur on a line"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1430845825, "post_id": 30032309, "comment_id": 48233120, "body": "OK I understand ... more or less :-)   I will change my response to show both approaches. This might make the answer more useful to others. If the new code does what you want you can accept my answer."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1430850005, "post_id": 30032309, "comment_id": 48235798, "body": "I edited your question and changed the &quot;output from the above&quot;.  Surely you meant that the output should read: <code>1,-1,-1,-1,-1</code> - <i>i.e.</i> one match and four non-matches ?"}], "answers": [{"comments": [{"owner": {"reputation": 555, "user_id": 4384625, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/743dbb4becdbf21ab889a65844ae2617?s=128&d=identicon&r=PG&f=1", "display_name": "Abhis", "link": "https://stackoverflow.com/users/4384625/abhis"}, "edited": false, "score": 0, "creation_date": 1430805454, "post_id": 30034464, "comment_id": 48205831, "body": "The in the first line of the <code>INPUTFILE.txt file</code> <code>127</code> is there. And that is the only match we got so it will print <code>1</code> and <code>-1</code> for the rest of the line as none of the values matched to any of the values in <code>113 114 115 116 127</code>."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 555, "user_id": 4384625, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/743dbb4becdbf21ab889a65844ae2617?s=128&d=identicon&r=PG&f=1", "display_name": "Abhis", "link": "https://stackoverflow.com/users/4384625/abhis"}, "edited": false, "score": 1, "creation_date": 1430848196, "post_id": 30034464, "comment_id": 48234636, "body": "@Abhis: Thanks for the feedback. I have changed my answer based on your information. Is it acceptable? Does the code work as expected?"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 555, "user_id": 4384625, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/743dbb4becdbf21ab889a65844ae2617?s=128&d=identicon&r=PG&f=1", "display_name": "Abhis", "link": "https://stackoverflow.com/users/4384625/abhis"}, "edited": false, "score": 0, "creation_date": 1430848215, "post_id": 30034464, "comment_id": 48234654, "body": "@Abhis Oh and: &quot;Welcome to Stackoverflow!&quot;"}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": true, "score": 1, "last_activity_date": 1431141041, "last_edit_date": 1431141041, "creation_date": 1430754996, "answer_id": 30034464, "question_id": 30032309, "link": "https://stackoverflow.com/questions/30032309/comparing-files-line-by-line-using-a-simple-pattern-match/30034464#30034464", "title": "Comparing files line by line using a simple pattern match", "body": "<p>This combines your two scripts into one. It reads through the <code>$inputfile</code> file handle that is pointing at <code>\"INPUTFILE.txt\"</code>looking for matches based on either a regular expression (<code>$regexp</code>) or the existence of a search key in the <code>%patterns</code> hash.  </p>\n\n<p>Since the match is simple, the regular expression we use is built up using <code>join</code>, <code>|</code>, and the required search strings. In the alternative approach (which is commented out here) we use the hash keys themselves to check whether a search pattern exists.</p>\n\n<p>I have changed the variables and file names in the <code>open</code> statements somewhat since the capitalized file names made them seem like old style file handles:</p>\n\n<pre><code>#!perl -l\n\nmy $inputfile  = \"INPUTFILE.txt\";\nmy $outputfile = \"OUTPUTFILE.txt\";\nmy $matchfile  = \"MATCHFILE.txt\";\n\nopen my $inputfh, '&lt;', $inputfile  or die \"No file '$inputfile': $!\";\nopen my $matchfh, '&lt;', $matchfile  or die \"No file '$matchfile': $!\\n\";\nopen my $outfh,   '&gt;', $outputfile or die \"No file '$outputfile': $!\\n\";\n\nmy %patterns;\nwhile (&lt;$matchfh&gt;) {\n  $patterns{$_} = () for map { split /,/, $_ } /Issues:(.*)/;    \n}\n\nmy $regex = join \"|\", keys %patterns;\n$regex = qr/$regex/; # create a regex from %patterns\nprint \"Search patterns : \", join \" \", keys %patterns;\nprint \"Regex           : $regex \\n\";\n\nwhile (my $line = &lt;$inputfh&gt;) {\n  chomp $line;    \n  # Print \"1\" for 3 digits matching search pattern; \"-1\" otherwise:\n  #print exists $patterns{$_} ? \"1\" : \"-1\" for $line =~ m/(\\d\\d\\d)/g;\n\n  # Print \"1\" if a matching pattern is on a line; -1 otherwise:   \n  if (grep /$regex/, $line) {    #\n    print \"1  - $line\";\n  }\n  else {\n    print \"-1 - $line\";\n  }\n}\n</code></pre>\n\n<p>The above script should work.  You can remove <code>- $line</code> from the last <code>print</code> statements and add a file handle destination (<code>$outfh</code>) to direct the output to a file. </p>\n\n<p>Since there are five lines in the <code>inputfile</code>, the output is:</p>\n\n<pre><code>Search patterns : 127 116 114 115 113\nRegex           : (?^:127|116|114|115|113) \n\n1 - I have never had an issue.  L_102 ----- L_127\n-1 - I travel overseas ... very useful to me L_105 ----- L_134 ----- L_148\n-1 - Expense to have L_522\n-1 - Great benefits  L_148\n-1 - prestige    L_118\n</code></pre>\n\n<p><strong>NB</strong> the final <code>if ... else</code> blocks could be shortened using the <a href=\"http://perldoc.perl.org/perlop.html#Conditional-Operator\" rel=\"nofollow\">\"ternary operator\"</a>(<code>&lt;cond&gt; ? 1 : 0</code>) to:</p>\n\n<pre><code> print $line =~ /$regex/ ? '1' : '-1';\n</code></pre>\n\n<p>so that \"<code>1</code>\" will printed if <code>$line =~ /$regex/</code> evaluates to \"true\" (or \"1\") ; and \"<code>-1</code>\" will be printed if it evaluates to \"false\" (or \"0\"). </p>\n\n<p>If you read from your two files and simply redirect the output with your shell, the short version of all this would be:</p>\n\n<pre><code>#!perl -l\n\nmy $inputfile = \"INPUTFILE.txt\";\nmy $matchfile = \"MATCHFILE.txt\";\n\nopen my $inputfh, '&lt;', $inputfile or die \"No '$inputfile': $!\";\nopen my $matchfh, '&lt;', $matchfile or die \"No '$matchfile': $!\\n\";\n\nmy %patterns;\nwhile (&lt;$matchfh&gt;) {\n  $patterns{$_} = () for map { split /,/, $_ } /Issues:(.*)/;\n}\n\nmy $regex = join \"|\", keys %patterns;\n$regex = qr/$regex/;\n\nwhile (my $line = &lt;$inputfh&gt;) {\n  chomp $line;\n  print $line =~ $regex ? '1' : '-1';\n}\n</code></pre>\n"}], "owner": {"reputation": 555, "user_id": 4384625, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/743dbb4becdbf21ab889a65844ae2617?s=128&d=identicon&r=PG&f=1", "display_name": "Abhis", "link": "https://stackoverflow.com/users/4384625/abhis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 2, "accepted_answer_id": 30034464, "answer_count": 1, "score": 1, "last_activity_date": 1431141041, "creation_date": 1430748702, "last_edit_date": 1430921119, "question_id": 30032309, "link": "https://stackoverflow.com/questions/30032309/comparing-files-line-by-line-using-a-simple-pattern-match", "title": "Comparing files line by line using a simple pattern match", "body": "<p>I have two files: in the first file each line has some labels associated with it; the second file contains the labels which fall under certain categories.</p>\n\n<p><strong>File1</strong> - labelled lines:</p>\n\n<pre><code>I have never had an issue.  L_102 ----- L_127\nI travel overseas and offer a lot of services that are very useful to me    L_105 ----- L_134 ----- L_148\nExpense to have L_522\nGreat benefits  L_148\nprestige    L_118\n</code></pre>\n\n<p><strong>File2</strong> - categories under which the labels fall:</p>\n\n<pre><code>Issues:113,114,115,116,127\nBenefits:105,220,154,543,590\nGeneral:148,134,154\n</code></pre>\n\n<p>I have written a Perl script to fetch labels from the first file.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $file = shift || \"INPUTFILE\";\nmy $outputfile = shift || \"OUTPUTFILE\";\n\nopen my $fh, '&lt;', $file or die \"Can not open '$file': $!\";\nopen( OUTFILE, \"&gt;\", $outputfile) or die \"Can not open '$outputfile': $!\";\n\nwhile(my $w = &lt;$fh&gt;) {\n    my @matches = $w =~ m/(L_[0-9][0-9][0-9])/g;\n    for(@matches){s/L_//g;\n    s/\\s+/\\t/g;\n    }\n    print OUTFILE \"@matches\\n\";\n}\n</code></pre>\n\n<p>The output from this first script is:</p>\n\n<pre><code>102 127\n105 134 148\n522\n148\n118\n</code></pre>\n\n<p>I have a second Perl script to fetch the levels from second file (which contains the categories):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $file = shift || \"INPUTFILE\";\nmy $outputfile = shift || \"OUTPUTFILE\";\nmy $patern = shift ||\"Issues:\"\n\nopen my $fh, '&lt;', $file or die \"Can not open '$file': $!\";\nopen( OUTFILE, \"&gt;\", $outputfile) or die \"Can not open '$outputfile': $!\";\n\nwhile(my $var = &lt;$fh&gt;) {\nif(my @matches =$var=~/(.*$patern.*)/)\n{\nfor(@matches){s/$patern//g;s/\\,/\\t/g}\nprint OUTFILE \"@matches\\n\";\n}\n}\n</code></pre>\n\n<p>The second output from the second script is:</p>\n\n<pre><code>113 114 115 116 127\n</code></pre>\n\n<p>Now I want to match the first output with the second output line by line.\nThe results I want are: if the any of the numbers in the second output matches with any of the lines in the first output then I want to print 1;  or else if there is no match print -1 for that line.</p>\n\n<p>The output from the above would be as below:</p>\n\n<pre><code> 1\n-1\n-1\n-1\n-1\n</code></pre>\n"}, {"tags": ["perl", "shell", "video", "rename"], "comments": [{"owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 0, "creation_date": 1430746490, "post_id": 30031389, "comment_id": 48179293, "body": "Try to use double-quote, not backtick for this: <code>rename -n &quot;s&#47;${line}.mp4&#47;${e}.mp4&#47;&quot; *.mp4</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1430746768, "post_id": 30031389, "comment_id": 48179484, "body": "Why has the question a perl tag?"}, {"owner": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "edited": false, "score": 0, "creation_date": 1430747839, "post_id": 30031389, "comment_id": 48180229, "body": "because rename uses perl expression and double quotes is not working!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 0, "creation_date": 1430748272, "post_id": 30031389, "comment_id": 48180492, "body": "@tivn, That only solves one of the three or four problems with that line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1430748304, "post_id": 30031389, "comment_id": 48180512, "body": "@H&#229;kon H&#230;gland, Because <code>rename</code> is written in Perl, the argument is supposed to be Perl code, and the OP is having problem determine what to pass as the argument."}, {"owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430748503, "post_id": 30031389, "comment_id": 48180627, "body": "@ikegami I also thought mv is the one should be used. My previous suggestion is to &#39;reduce&#39; the error message."}, {"owner": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "edited": false, "score": 0, "creation_date": 1430750474, "post_id": 30031389, "comment_id": 48181993, "body": "The correct modification was rename &quot;s/${line}............\\.mp4/${e}.mp4/&quot; *.mp4 . Sorry my fault though. Thanks everybody for the help!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430750509, "post_id": 30031389, "comment_id": 48182011, "body": "No, that still has numerous problems."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "edited": false, "score": 0, "creation_date": 1430748335, "post_id": 30032140, "comment_id": 48180534, "body": "This is giving Error: mv: cannot stat \u2018Update Map Intent - Solution - Developing Android Apps.mp4\u2019: No such file or directory Lesson 6 Recap - Developing Android Apps mv: cannot stat \u2018Lesson 6 Recap - Developing Android Apps.mp4\u2019: No such file or directory Storytime: Future of Android - Developing Android Apps mv: cannot stat \u2018Storytime: Future of Android - Developing Android Apps.mp4\u2019: No such file or directory Congratulations! Android Party! - Developing Android Apps mv: cannot stat \u2018Congratulations! Android Party! - Developing Android Apps.mp4\u2019: No such file or directory"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "edited": false, "score": 0, "creation_date": 1430748411, "post_id": 30032140, "comment_id": 48180567, "body": "That&#39;s because you are telling it to rename files that don&#39;t exist."}, {"owner": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "edited": false, "score": 0, "creation_date": 1430748552, "post_id": 30032140, "comment_id": 48180663, "body": "These files are in the folder. I am trying to rename these file from a file called Android playlist. I am reading the Android playlist, finding the file and then renaming as 1.mp4 then I move to the next line and rename the next file as 2.mp4 .. This is what I am trying to do. The script and the files are contained in same folder."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "edited": false, "score": 0, "creation_date": 1430748677, "post_id": 30032140, "comment_id": 48180752, "body": "<code>mv</code> disagrees. I&#39;ll take its word over yours. Doesn&#39;t matter what directory the script is in; you said to look in the current work directory."}, {"owner": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "edited": false, "score": 0, "creation_date": 1430750852, "post_id": 30032140, "comment_id": 48182234, "body": "the files contained some extra characters which I hadn&#39;t noticed. Thanks"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1430748225, "creation_date": 1430748225, "answer_id": 30032140, "question_id": 30031389, "link": "https://stackoverflow.com/questions/30031389/renaming-files-in-folder-using-shell-script/30032140#30032140", "title": "Renaming files in folder using shell script", "body": "<pre><code>rename -n `s/${line}.mp4/${e}.mp4/` *.mp4\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>mv \"${line}.mp4\" \"${e}.mp4\"\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4862365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29cd455d86879f2a33bcab6eaa35fd03?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Chauhan", "link": "https://stackoverflow.com/users/4862365/rohan-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 30032140, "answer_count": 1, "score": 1, "last_activity_date": 1440601181, "creation_date": 1430746063, "last_edit_date": 1430747811, "question_id": 30031389, "link": "https://stackoverflow.com/questions/30031389/renaming-files-in-folder-using-shell-script", "title": "Renaming files in folder using shell script", "body": "<p>I have downloaded a playlist of videos and want to organise them using a file called android playlist. For eg: the first file with some title like \"Introduction to Android.mp4\" , I have to rename it as 1.mp4 . I don't know perl or unix but I have managed to write this code so far:</p>\n\n<pre><code>`IFS=''\nc=0\nd=0\ne=1\nwhile read line\n do\n     d=`expr $c % 4`\n     if [ $d == 0 ]\n     then\n     echo $line\n     rename -n `s/${line}.mp4/${e}.mp4/` *.mp4\n     e=`expr $e + 1`\n     fi\n     c=`expr $c + 1`\ndone &lt; Android\\ playlist`\n</code></pre>\n\n<p>but this is giving error:</p>\n\n<pre><code>Bareword found where operator expected at (eval 1) line 1, near \"3rd\"\n    (Missing operator before rd?)\nsyntax error at (eval 1) line 1, near \"3rd Party \"\nLocationEntry Solution - Developing Android Apps\nren.sh: line 11: s/LocationEntry Solution - Developing Android Apps.mp4$/243.mp4/: No such file or directory\nBareword found where operator expected at (eval 1) line 1, near \"3rd\"\n    (Missing operator before rd?)\nsyntax error at (eval 1) line 1, near \"3rd Party \"\nSQLiteOpenHelper onUpgrade() method - Developing Android Apps\nren.sh: line 11: s/SQLiteOpenHelper onUpgrade() method - Developing Android Apps.mp4$/244.mp4/: No such file or directory\nBareword found where operator expected at (eval 1) line 1, near \"3rd\"\n    (Missing operator before rd?)\nsyntax error at (eval 1) line 1, near \"3rd Party \"\nJUnit testing - Developing Android Apps\nren.sh: line 11: s/JUnit testing - Developing Android Apps.mp4$/245.mp4/: No such file or directory\nBareword found where operator expected at (eval 1) line 1, near \"3rd\"\n    (Missing operator before rd?)\nsyntax error at (eval 1) line 1, near \"3rd Party \"\nInsertReadDbTest - Developing Android Apps\nren.sh: line 11: s/InsertReadDbTest - Developing Android Apps.mp4$/246.mp4/: No such file or directory\nBareword found where operator expected at (eval 1) line 1, near \"3rd\"\n    (Missing operator before rd?)\nsyntax error at (eval 1) line 1, near \"3rd Party \"\nInsertReadDbTest Solution - Developing Android Apps\nren.sh: line 11: s/InsertReadDbTest Solution - Developing Android Apps.mp4$/247.mp4/: No such file or directory\nBareword found where operator expected at (eval 1) line 1, near \"3rd\"\n    (Missing operator before rd?)\nsyntax error at (eval 1) line 1, near \"3rd Party \"\nSimplify Tests - Developing Android Apps\nren.sh: line 11: s/Simplify Tests - Developing Android Apps.mp4$/248.mp4/: No such file or directory\n</code></pre>\n\n<p>Please help me. Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1430767395, "post_id": 30031049, "comment_id": 48192460, "body": "use Net::SFTP::Foreign instead"}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 3539775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892a66074a0512f0fcf3018bb03d9a3d?s=128&d=identicon&r=PG", "display_name": "J Singh", "link": "https://stackoverflow.com/users/3539775/j-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1430810930, "creation_date": 1430810930, "answer_id": 30046715, "question_id": 30031049, "link": "https://stackoverflow.com/questions/30031049/running-sftp-commands-using-expect-pm/30046715#30046715", "title": "Running sftp commands using Expect.pm", "body": "<p>Any reason for using Expect and system sftp command for this? Using Net::SFTP module would make the job much more easier and clean.</p>\n"}], "owner": {"reputation": 3669, "user_id": 1867151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f031f9c0fa73a79510c52afe063d5370?s=128&d=identicon&r=PG", "display_name": "user1867151", "link": "https://stackoverflow.com/users/1867151/user1867151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 30046715, "answer_count": 1, "score": 0, "last_activity_date": 1430810930, "creation_date": 1430745017, "question_id": 30031049, "link": "https://stackoverflow.com/questions/30031049/running-sftp-commands-using-expect-pm", "title": "Running sftp commands using Expect.pm", "body": "<p>I am trying to download few files from specific folders using sftp utility and am doing it through Expect.pm . Below is the code for that :</p>\n\n<pre><code>use strict;\n\nuse Expect;\n\nmy $userid = `whoami`;\n\nchomp($userid);\n\nmy $Password = \"&lt;password&gt;\";\n\nmy $command = \"sftp \" . \"$userid\" . \"\\@&lt;server-name&gt;\";\n\nmy $spawn_ok = 0;\n\nmy $timeout = 10;\n\nprint \"$command \\n\";\n\nmy $exp = new Expect();\n$exp-&gt;log_file(\"FTPLOGFILE.txt\");\n$exp-&gt;spawn(\"$command\") or die \"Cannot spawn $command: $!\\n\";\n\n$exp-&gt;log_stdout(0);\n$exp-&gt;expect($timeout,\n            [ 'Password:',\n              sub {\n                    $spawn_ok = 1;\n                    my $fh = shift;\n                    print \"Sending password \\n\";\n                    $fh-&gt;send(\"$Password\\r\");\n                    exp_continue;\n                  }\n            ],\n            [ 'sftp&gt; ',\n              sub {\n                      my $fh = shift;\n                      $spawn_ok = 3;\n                      print \"Downloading cfg files \\n\";\n                      $fh-&gt;send(\"get /home/cfg/*.cfg /tmp/ACC_CCM_CFG\",\"\\n\");\n                      $fh-&gt;send(\"bye\",\"\\n\");\n                      exp_continue;\n                  }\n             ]\n</code></pre>\n\n<p>The problem is apart from downloading files into the above folder : /tmp/ACC_CCM_CFG i also want to run the below command inside the same sftp session :\nget /home/appl/*.pl /tmp/ACC_CCM_APPL \nBut i can't do that since the regular expression for the expect function would be same (sftp>) . How do i run a series of commands inside the same sftp session using expect if the regex of the prompt does not change .</p>\n\n<p>Please throw some light on the above since i can't find any solution .</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1430744785, "post_id": 30030841, "comment_id": 48178127, "body": "I&#39;m sorry that&#39;s about as clear as mud. Why would that output &quot;whhfnss&quot;? What are the rules? Could you make an example that doesn&#39;t look like you&#39;ve just randomly hit your keyboard with your head?"}, {"owner": {"reputation": 39, "user_id": 4389780, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-w6i5MwvKw7Q/AAAAAAAAAAI/AAAAAAAAAK4/xoxIE6T7WL4/photo.jpg?sz=128", "display_name": "Ahmed Mahdi", "link": "https://stackoverflow.com/users/4389780/ahmed-mahdi"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1430744967, "post_id": 30030841, "comment_id": 48178242, "body": "Ok I mean extract and print for example just 5 letters (a,h,k,l,f) and ignore others"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1430745029, "post_id": 30030841, "comment_id": 48178290, "body": "But your example doesn&#39;t match your input. Order isn&#39;t the same for instance."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4389780, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-w6i5MwvKw7Q/AAAAAAAAAAI/AAAAAAAAAK4/xoxIE6T7WL4/photo.jpg?sz=128", "display_name": "Ahmed Mahdi", "link": "https://stackoverflow.com/users/4389780/ahmed-mahdi"}, "edited": false, "score": 0, "creation_date": 1430745032, "post_id": 30031000, "comment_id": 48178293, "body": "thanks for answering"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1430744871, "creation_date": 1430744871, "answer_id": 30031000, "question_id": 30030841, "link": "https://stackoverflow.com/questions/30030841/how-to-keep-a-specific-set-of-characters-from-a-string-using-regular-expression/30031000#30031000", "title": "How to keep a specific set of characters from a string using regular expression in PERL", "body": "<pre><code>say $s =~ /[whnsf]/g;\n</code></pre>\n\n<p>&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;</p>\n"}], "owner": {"reputation": 39, "user_id": 4389780, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-w6i5MwvKw7Q/AAAAAAAAAAI/AAAAAAAAAK4/xoxIE6T7WL4/photo.jpg?sz=128", "display_name": "Ahmed Mahdi", "link": "https://stackoverflow.com/users/4389780/ahmed-mahdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1430829296, "answer_count": 1, "score": -4, "last_activity_date": 1430744932, "creation_date": 1430744429, "last_edit_date": 1430744932, "question_id": 30030841, "link": "https://stackoverflow.com/questions/30030841/how-to-keep-a-specific-set-of-characters-from-a-string-using-regular-expression", "closed_reason": "Not suitable for this site", "title": "How to keep a specific set of characters from a string using regular expression in PERL", "body": "<p>I have this string </p>\n\n<pre><code> $eq= \"ew';@#rfhnbgsu.,/&gt;&lt;hdjsdedokk\";\n</code></pre>\n\n<p>By Perl I want to extract just the characters <code>w</code>, <code>h</code>, <code>n</code>, <code>s</code>, and <code>f</code> from the string.</p>\n\n<p>The output should be like this</p>\n\n<pre><code>whhfnss\n</code></pre>\n\n<p>Could you help me?</p>\n"}, {"tags": ["bash", "perl", "sed", "pattern-matching", "bind"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 2072145, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aaac2706c3a48d5b888db126af0bb878?s=128&d=identicon&r=PG", "display_name": "PatricF", "link": "https://stackoverflow.com/users/2072145/patricf"}, "edited": false, "score": 0, "creation_date": 1430745291, "post_id": 30030779, "comment_id": 48178458, "body": "Wow, that was fast. Thank you very much, it seems to be working only that I just get the output directly to the shell. Do you know how to actually make it manipulate the file?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430745495, "post_id": 30030779, "comment_id": 48178599, "body": "<code>-nie</code> will not do what you expect. That will create a <code>zones.locale</code> file as backup.a"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430745535, "post_id": 30030779, "comment_id": 48178618, "body": "This also only works if the closing <code>};</code> is on a line with no leading or trailing spaces, which might work for this case but may not be universally true."}], "tags": [], "owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "is_accepted": false, "score": 0, "last_activity_date": 1430750308, "last_edit_date": 1430750308, "creation_date": 1430744241, "answer_id": 30030779, "question_id": 30030586, "link": "https://stackoverflow.com/questions/30030586/remove-zone-block-from-bind-config-file-by-pattern-from-the-command-line/30030779#30030779", "title": "Remove zone block from bind config file by pattern from the command line", "body": "<p>This sed trick will work for both master and node, if your blocks end with a literal <code>};\\n</code>:</p>\n\n<pre><code>sed -n -e '/\\\"example.com\\\"/,/^\\};$/d;p;' zones.local\n</code></pre>\n\n<p>However, because this makes assumptions about how your file is structured, I would recommend the <code>perl</code> variant by @Wintermute.</p>\n"}, {"comments": [{"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430746716, "post_id": 30031122, "comment_id": 48179442, "body": "Very elegant solution. When I try it however, only the first occurance of the pattern is removed."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430746746, "post_id": 30031122, "comment_id": 48179469, "body": "I added the <code>g</code> flag to the <code>s</code> command. It should work for all now."}, {"owner": {"reputation": 349, "user_id": 2072145, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aaac2706c3a48d5b888db126af0bb878?s=128&d=identicon&r=PG", "display_name": "PatricF", "link": "https://stackoverflow.com/users/2072145/patricf"}, "edited": false, "score": 0, "creation_date": 1431063029, "post_id": 30031122, "comment_id": 48343356, "body": "This looks great but I just get the result output printed to the shell. Can I make it so it makes the change directly to the file?"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1431073301, "post_id": 30031122, "comment_id": 48348202, "body": "Just do <code>cp named.conf.local named.conf.local~ &amp;&amp; perl remove_zone.pl named.conf.local~ &gt; named.conf.local</code>. You&#39;ll even have a backup."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 1, "last_activity_date": 1430754523, "last_edit_date": 1430754523, "creation_date": 1430745255, "answer_id": 30031122, "question_id": 30030586, "link": "https://stackoverflow.com/questions/30030586/remove-zone-block-from-bind-config-file-by-pattern-from-the-command-line/30031122#30031122", "title": "Remove zone block from bind config file by pattern from the command line", "body": "<p>I'd use Perl for its recursive regexes. We can use them to match a brace-enclosed block, from an opening brace to the corresponding closing brace. For example:</p>\n\n<pre><code>perl -i -0777 -pe 's/zone\\s*\"example.net\"\\s*(\\{([^{}]|(?1))*\\});\\s*//g' foo.conf\n</code></pre>\n\n<p>The tricky part of the regex is <code>(\\{([^{}]|(?1))*\\})</code>. This is captured as capturing group 1 and referenced recursively inside itself as <code>(?1)</code>, so it matches a brace-enclosed group of arbitrary many non-brace characters and brace-enclosed groups.</p>\n\n<p>As long as there are no braces in comments or strings, this should survive all your formatting changes.</p>\n\n<p><strong>Update:</strong> I had to look a bit, but there are BIND config file parsers out there that offer a more robust solution to the problem -- ultimately, regexes (even recursive ones) can carry you only so far and will break in some special cases. In general, it is better to use proper parsers for structured data like this, even if the code becomes longer for it. For example, with the <a href=\"http://search.cpan.org/dist/BIND-Config-Parser/lib/BIND/Config/Parser.pm\" rel=\"nofollow\">BIND::Config::Parser</a> Perl module, you could write</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse BIND::Config::Parser;\n\nmy $parser = new BIND::Config::Parser;\n\nmy $indent = 0;\nmy $ignoredepth = 0;\nmy $file = $ARGV[0];\nmy $domain = \"\\\"$ARGV[1]\\\"\";\n\n$parser-&gt;set_open_block_handler(\n    sub {\n        if(($_[0] eq \"zone\" &amp;&amp; $_[1] eq $domain) || $ignoredepth != 0) {\n            ++$ignoredepth;\n        } else {\n            print \"  \" x $indent, join(\" \", @_), \" {\\n\";\n            ++$indent;\n        }\n    });\n\n$parser-&gt;set_close_block_handler(\n    sub {\n        if($ignoredepth != 0) {\n            --$ignoredepth;\n        } else {\n            --$indent;\n            print \"  \" x $indent, \"};\\n\";\n        }\n    });\n\n$parser-&gt;set_statement_handler(\n    sub {\n        if($ignoredepth == 0) {\n            print \"  \" x $indent, join(\" \", @_), \"\\;\\n\";\n        }\n    });\n\n$parser-&gt;parse_file($file);\n</code></pre>\n\n<p>and call </p>\n\n<pre><code>perl remove_zone.pl named.conf.local example.net\n</code></pre>\n\n<p>This will nuke comments but keep the functional parts of the config file intact no matter what's in there that could confuse a regex. For automated use, this is the better way.</p>\n"}, {"comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430745493, "post_id": 30031133, "comment_id": 48178596, "body": "Bind&#39;s config file format does not require empty lines between zones, and you will have some trouble with subdomains this way."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430745580, "post_id": 30031133, "comment_id": 48178643, "body": "Thanks for the info. If the posted sample input doesn&#39;t reflect the real structure of the input files then the OP can post a sample that does and we can tweak the solution to suit."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430745674, "post_id": 30031133, "comment_id": 48178703, "body": "Balanced braces really seems like the only sane way to go to me. Awk, as good as it is for many things, is ill-equipped for this. EDIT: Actually, I&#39;m looking for proper bind config file parsers because they&#39;re the only sane way to go. Balanced braces is better but also stopgap."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430745798, "post_id": 30031133, "comment_id": 48178781, "body": "Not sure why you&#39;d say that. Could you edit your question (or mine) to post an example that you think awk would struggle with but some other tool won&#39;t? Actually, let&#39;s let the OP do it if necessary as I suspect that like many &quot;CSV&quot; questions this is one of those cases where a fool-proof solution would require a language parser but the OP has a specific subset of possible constructs/layout and so will be happy with a cheap-and-cheerful solution just for his specific file and doesn&#39;t need something robust enough to handle all possible cases."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430745957, "post_id": 30031133, "comment_id": 48178887, "body": "Put the last <code>};</code> of the slave <code>example.net</code> zone on the same line as the closing of the <code>masters</code> block, so that it reads <code>};};</code>. How do you match that as well as the old format in awk? The root problem is that the language we&#39;re trying to match is not regular. (In particular about your awk code: If there&#39;s an empty line within a <code>zone</code> block, which you really do have to expect, it will produce a broken config file and bind will not start)."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430746356, "post_id": 30031133, "comment_id": 48179178, "body": "A more complicated example would be where the file name contains braces too, e.g. <code>file &quot;slave&#47;foo};bar{.net&quot;;</code> (or can there be comments?) so let&#39;s see if the OP will post the most complicated example he really has to deal with in his specific config file(s) and we&#39;ll tackle THAT or just tell him to get/write a parser for that language."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430746564, "post_id": 30031133, "comment_id": 48179350, "body": "...you really want to parse <i>config files</i> by splitting them along empty lines? I&#39;m sorry to say this because I know you know better, but the approach is bad, and I don&#39;t know why anyone would seriously consider doing this."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430746770, "post_id": 30031133, "comment_id": 48179487, "body": "I really have no idea what <code>bind</code> is, it&#39;s all just records and fields to me and all I have to go on is what the OP tells us he has to deal with. I expect that what the OP has shown us in his question is exactly what he has to deal with and all the other possible complexity is simply a non-issue for him. If that&#39;s not the case he can tell us more but if he needs to deal with all possible layouts than it sounds like he needs a language parser so idk why we&#39;d want to start trying to deal with some possible additional complexity but not others."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430748452, "post_id": 30031133, "comment_id": 48180591, "body": "This is not going to be used to replace one occurrence of the zone once in one file, or the solution would be a text editor, so we&#39;re looking at a script that is meant to remove an arbitrary domain zone from a bind config file and that is to be used on many config files. In this scenario, some assumptions about the input are more reasonable than others, and quite frankly, the assumption that there are no empty lines in a zone block ranks at the bottom of that list. I&#39;d take my chances with the sed solution before trying this. I don&#39;t like to do this, especially not to you, but -1 from me."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430752027, "post_id": 30031133, "comment_id": 48183037, "body": "I think downvoting an answer that clearly, simply, and efficiently does everything the OP requested is completely unreasonable, especially when there doesn&#39;t appear to be any answer given so far that would satisfy every possible condition that apparently MIGHT exist in a <code>bind</code> file (whatever that is), but knock yourself out...."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430752996, "post_id": 30031133, "comment_id": 48183754, "body": "BIND is a nameserver. This is a configuration file for it. You can find out more about the format <a href=\"https://wiki.gentoo.org/wiki/BIND/Tutorial\" rel=\"nofollow noreferrer\">here</a>, for example, but from the data shown it should already be clear that this is structured data that shouldn&#39;t be handled with awk or sed any more than should JSON or XML. This answer does not contain reasonable code to handle this sort of input, and I still don&#39;t see how you could possibly think that it does."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 0, "last_activity_date": 1430745505, "last_edit_date": 1430745505, "creation_date": 1430745301, "answer_id": 30031133, "question_id": 30030586, "link": "https://stackoverflow.com/questions/30030586/remove-zone-block-from-bind-config-file-by-pattern-from-the-command-line/30031133#30031133", "title": "Remove zone block from bind config file by pattern from the command line", "body": "<p>sed is NOT for anything involving multiple lines, it's for simple substitutions on a single line. All of seds arcane language constructs to handle multiple input lines simultaneously became obsolete in the mid-1970s when awk was invented, it's WAY past time to let them go:</p>\n\n<pre><code>$ awk -v RS= -v ORS='\\n\\n' '/example.com/' file\nzone \"example.com\" {\n    type master;\n    file \"master/example.com\";\n};\n</code></pre>\n\n<p>With all of your samples in one file:</p>\n\n<pre><code>$ cat file\nzone \"example.com\" {\n    type master;\n    file \"master/example.com\";\n};\n\nzone \"example.net\" {\n    type master;\n    file \"master/example.net\";\n};\n\nzone \"example.com\" {\n    type slave;\n    file \"slave/example.com\";\n    masters {\n            10.0.0.1;\n    };\n};\n\nzone \"example.net\" {\n    type slave;\n    file \"slave/example.net\";\n    masters {\n            10.0.0.1;\n    };\n};\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ awk -v RS= -v ORS='\\n\\n' '/example.com/' file\nzone \"example.com\" {\n    type master;\n    file \"master/example.com\";\n};\n\nzone \"example.com\" {\n    type slave;\n    file \"slave/example.com\";\n    masters {\n            10.0.0.1;\n    };\n};\n</code></pre>\n\n<p>.</p>\n\n<pre><code>$ awk -v RS= -v ORS='\\n\\n' '/example.net/' file\nzone \"example.net\" {\n    type master;\n    file \"master/example.net\";\n};\n\nzone \"example.net\" {\n    type slave;\n    file \"slave/example.net\";\n    masters {\n            10.0.0.1;\n    };\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430747010, "post_id": 30031621, "comment_id": 48179644, "body": "Wow. Bind config files are TCL? I did not know that. I retract my shoddy brace-matching Perl and second this."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430747180, "post_id": 30031621, "comment_id": 48179762, "body": "Actually, this is a bad solution: it will only print &quot;zone&quot; blocks and will choke on any other kind of line. I could write an &quot;unknown&quot; command handler, but Tcl will eat quotes and braces for the arguments."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430747296, "post_id": 30031621, "comment_id": 48179835, "body": "Hum. But if the format fits this looks like it could be extended to a good solution. I&#39;m afraid I don&#39;t know enough TCL to do it, though. I&#39;ll take the Perl back up for the moment; will remove it again if this can be fixed."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1430746709, "creation_date": 1430746709, "answer_id": 30031621, "question_id": 30030586, "link": "https://stackoverflow.com/questions/30030586/remove-zone-block-from-bind-config-file-by-pattern-from-the-command-line/30031621#30031621", "title": "Remove zone block from bind config file by pattern from the command line", "body": "<p>That zone file obeys the syntax of Tcl, so we can define a procedure named \"zone\" and read the zone file as if it's a Tcl script:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>#!/usr/bin/env tclsh\nlassign $argv domain_to_remove zone_file\nproc zone {domain body} {\n    if {$domain ne $::domain_to_remove} {\n        puts [format {zone \"%s\" {%s}} $domain $body]\n    }\n}\nsource $zone_file\n</code></pre>\n\n<p>and then</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ tclsh remove_zone.tcl example.com zones \nzone \"example.net\" {\n    type slave;\n    file \"slave/example.net\";\n    masters {\n            10.0.0.1;\n    };\n}\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 2072145, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aaac2706c3a48d5b888db126af0bb878?s=128&d=identicon&r=PG", "display_name": "PatricF", "link": "https://stackoverflow.com/users/2072145/patricf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1430754523, "creation_date": 1430743662, "last_edit_date": 1430750104, "question_id": 30030586, "link": "https://stackoverflow.com/questions/30030586/remove-zone-block-from-bind-config-file-by-pattern-from-the-command-line", "title": "Remove zone block from bind config file by pattern from the command line", "body": "<p>I'm trying to figure out how to make a script that will delete a specific zone in my Bind zone-file.</p>\n\n<p>I have around 200 domains in my zone-file and I was thinking I could make a script that will delete a specific domain for me.\nOn my master server the zone-file looks like this:</p>\n\n<pre><code>zone \"example.com\" {\n    type master;\n    file \"master/example.com\";\n};\n\nzone \"example.net\" {\n    type master;\n    file \"master/example.net\";\n};\n</code></pre>\n\n<p>However on my slave there are two end-brackets instead of one.</p>\n\n<pre><code>zone \"example.com\" {\n    type slave;\n    file \"slave/example.com\";\n    masters {\n            10.0.0.1;\n    };\n};\n\nzone \"example.net\" {\n    type slave;\n    file \"slave/example.net\";\n    masters {\n            10.0.0.1;\n    };\n};\n</code></pre>\n\n<p>So I could technically grep example.com, take that line and every line until <code>};</code> and delete. The same goes for the slave server only there it will have to delete every line until the second <code>};</code></p>\n\n<p>This would work on the master:</p>\n\n<pre><code>sed -n -e '/\\\"example.net\\\"/,/\\};/p' zones.local\n</code></pre>\n\n<p>But not on the slave.\nDoes anyone know how to fix this?\nThe zone-file looks the same and there's no comments or anything like that.</p>\n"}, {"tags": ["perl", "debugging", "komodo"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1430771840, "post_id": 30029398, "comment_id": 48194932, "body": "I would imagine this is down the the fact that <code>fork()</code> spawns a new and independent process, which is completely separate. I&#39;m not sure how i would go about doing it with a debugger - I would assume you might need to fork and attach the debugger to the child process too."}, {"owner": {"reputation": 105, "user_id": 2952191, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/32715312773be0b2ae7cf54ed78ed9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Darius", "link": "https://stackoverflow.com/users/2952191/darius"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1431333394, "post_id": 30029398, "comment_id": 48432609, "body": "I dont want to debug the fork process, but the things that come after that. No idea about that?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1431333688, "post_id": 30029398, "comment_id": 48432785, "body": "Unfamiliar with Komodo, but when using <code>strace</code> you&#39;d use <code>fTt</code> to explicitly tell it to trace past forks."}, {"owner": {"reputation": 105, "user_id": 2952191, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/32715312773be0b2ae7cf54ed78ed9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Darius", "link": "https://stackoverflow.com/users/2952191/darius"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1431334824, "post_id": 30029398, "comment_id": 48433493, "body": "Can you explain that more detailed? That would be great. I am very new to perl and Komodo."}], "owner": {"reputation": 105, "user_id": 2952191, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/32715312773be0b2ae7cf54ed78ed9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Darius", "link": "https://stackoverflow.com/users/2952191/darius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1430740298, "creation_date": 1430740124, "last_edit_date": 1430740298, "question_id": 30029398, "link": "https://stackoverflow.com/questions/30029398/forks-debugging-in-komodo", "title": "Forks debugging in Komodo", "body": "<p>I'm usig the Komodo Debugger as it allows me to set breakpoints and read the currently used variables. I am using the <code>Forks-module</code> (something like threads) to run some processes simoultaously. Unfortunately I cannot debug anything that comes after the fork-command. If I set a breakpoint on a line that comes after the fork command it is just being ignored and the script goes on until the end.</p>\n\n<p>Is there any way to debug forks properly (or scripts, that use this module). I am not interested in what happens in the fork process itself, but in the things past the fork process.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1430744355, "post_id": 30026618, "comment_id": 48177809, "body": "What do you mean by <i>\u201cno start and end tag for certain nodes\u201d</i>?"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1430732185, "creation_date": 1430732185, "answer_id": 30026883, "question_id": 30026618, "link": "https://stackoverflow.com/questions/30026618/how-to-modify-an-xml-file-using-perl-where-in-the-xml-file-there-is-no-start-and/30026883#30026883", "title": "How to modify an XML file using Perl where in the XML file there is no start and end tag for certain nodes", "body": "<p>You can use <a href=\"http://p3rl.org/XML::XSH2\">XML::XSH2</a>, a wrapper around <a href=\"http://p3rl.org/XML::LibXML\">XML::LibXML</a>:</p>\n\n<pre><code>open file.xml ;\nset /ROOT/TESTING[INSTANCE]/INSTANCE/PHY/@FREQ 42 ;\nsave :f newname.xml ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1430921376, "creation_date": 1430921376, "answer_id": 30079217, "question_id": 30026618, "link": "https://stackoverflow.com/questions/30026618/how-to-modify-an-xml-file-using-perl-where-in-the-xml-file-there-is-no-start-and/30079217#30079217", "title": "How to modify an XML file using Perl where in the XML file there is no start and end tag for certain nodes", "body": "<p>In your example - your <code>FREQ</code> tag <em>does</em> have a start and end. That's what the trailing <code>/</code> means. This is one of the reasons why parsing XML with a parser is important. It's a unary tag. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; new ( pretty_print =&gt; 'indented' ) -&gt; parsefile ( 'my.xml' );\n$twig -&gt; get_xpath('TESTING/INSTANCE/PHY',0) -&gt; set_att('FREQ', 300);\n$twig -&gt; print;\n</code></pre>\n\n<p>(For printing to a file, you probably want <code>open</code> and <code>$twig -&gt; sprint</code>); </p>\n"}], "owner": {"reputation": 1, "user_id": 4861562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18a6626fe9a2134543d4244aaa111bf6?s=128&d=identicon&r=PG&f=1", "display_name": "ranjit", "link": "https://stackoverflow.com/users/4861562/ranjit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1430921376, "creation_date": 1430731320, "last_edit_date": 1430744367, "question_id": 30026618, "link": "https://stackoverflow.com/questions/30026618/how-to-modify-an-xml-file-using-perl-where-in-the-xml-file-there-is-no-start-and", "title": "How to modify an XML file using Perl where in the XML file there is no start and end tag for certain nodes", "body": "<p>For Example the XML file is like </p>\n\n<pre><code>&lt;ROOT&gt; \n  &lt;TESTING DUMMY=\"FALSE\" NAME=\"SYSTEM\"/&gt; \n  &lt;TESTING DUMMY=\"FALSE\" NAME=\"SYSTEM1\"&gt; \n    &lt;INSTANCE&gt; \n      &lt;PHY FREQ=\"1000\"/&gt; \n    &lt;/INSTANCE&gt; \n  &lt;/TESTING&gt; \n&lt;/ROOT&gt; \n</code></pre>\n\n<p>Here in the XML file I want to update the FREQ value and save the file in different name. How to do that?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4596929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10207d6bff407c8deef05945d39fa7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Pratiksha", "link": "https://stackoverflow.com/users/4596929/pratiksha"}, "edited": false, "score": 0, "creation_date": 1430730754, "post_id": 30026418, "comment_id": 48169726, "body": "That meance the while loop continues upto Yes."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 117, "user_id": 4596929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10207d6bff407c8deef05945d39fa7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Pratiksha", "link": "https://stackoverflow.com/users/4596929/pratiksha"}, "edited": false, "score": 0, "creation_date": 1430731338, "post_id": 30026418, "comment_id": 48170015, "body": "Yes, it will repeat the loop while answer is <code>y</code>"}, {"owner": {"reputation": 117, "user_id": 4596929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10207d6bff407c8deef05945d39fa7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Pratiksha", "link": "https://stackoverflow.com/users/4596929/pratiksha"}, "edited": false, "score": 0, "creation_date": 1430732122, "post_id": 30026418, "comment_id": 48170400, "body": "I am new in perl So, thnk you."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1430730677, "creation_date": 1430730677, "answer_id": 30026418, "question_id": 30026348, "link": "https://stackoverflow.com/questions/30026348/how-to-use-prompt-code-repeatedly-in-perl-script/30026418#30026418", "title": "How to use prompt code repeatedly in Perl script", "body": "<p>Replace</p>\n\n<pre><code>if (prompt_yn(\"Do you want to start a process\")){\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while (prompt_yn(\"Do you want to start a process\")){\n</code></pre>\n\n<p>?</p>\n"}], "owner": {"reputation": 117, "user_id": 4596929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10207d6bff407c8deef05945d39fa7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Pratiksha", "link": "https://stackoverflow.com/users/4596929/pratiksha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "accepted_answer_id": 30026418, "answer_count": 1, "score": 2, "last_activity_date": 1430743119, "creation_date": 1430730420, "last_edit_date": 1430743119, "question_id": 30026348, "link": "https://stackoverflow.com/questions/30026348/how-to-use-prompt-code-repeatedly-in-perl-script", "title": "How to use prompt code repeatedly in Perl script", "body": "<pre><code>sub prompt {\n  my ($query) = @_; # take a prompt string as argument\n  local $| = 1; # activate autoflush to immediately show the prompt\n  print $query;\n  chomp(my $answer = &lt;STDIN&gt;);\n  return $answer;\n}\n\n\nsub prompt_yn {\n  my ($query) = @_;\n  my $answer = prompt(\"$query (Y/N): \");\n  return lc($answer) eq 'y';\n}\n\n\nif (prompt_yn(\"Do you want to start a process\")){\n    my $list1 = prompt(\"Enter ID:\\n\");\n    my $list2 = prompt(\"Enter Name:\\n\");\n\n    print $list1;\n    print $list2;\n  ## $list1 and $list2 will be used in the code here..\n  #...\n  #.....\n}\n</code></pre>\n\n<p>I want to repeat the contents of the <code>if</code> block again and again, prompting again each time it completes if I press y from <code>(Y/N)</code>.</p>\n"}, {"tags": ["perl", "runtime", "compiler-optimization"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1430730280, "post_id": 30026270, "comment_id": 48169517, "body": "<code>use</code> runs at compile time, so putting it to subroutines makes no difference."}, {"owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1430732066, "post_id": 30026270, "comment_id": 48170372, "body": "so there is no way to load only neccessary subs?"}], "answers": [{"comments": [{"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1432453935, "post_id": 30026545, "comment_id": 48928185, "body": "There is also the Class::Autouse module on CPAN which can be used if autouse isn&#39;t compatible with the module you want to load delayed."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 4, "last_activity_date": 1430732218, "last_edit_date": 1592644375, "creation_date": 1430731090, "answer_id": 30026545, "question_id": 30026270, "link": "https://stackoverflow.com/questions/30026270/saving-memory-and-compile-time/30026545#30026545", "title": "Saving memory and compile time", "body": "<p>From <a href=\"http://perldoc.perl.org/autouse.html\" rel=\"nofollow noreferrer\"><code>perldoc autouse</code></a></p>\n<blockquote>\n<p>autouse - postpone load of modules until a function is used</p>\n<p>If the module Module is already loaded, then the declaration</p>\n<p><code>   use autouse 'Module' =&gt; qw(func1 func2($;$));</code></p>\n<p>is equivalent to</p>\n<p><code>   use Module qw(func1 func2);</code></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": false, "score": 3, "last_activity_date": 1430740720, "creation_date": 1430740720, "answer_id": 30029577, "question_id": 30026270, "link": "https://stackoverflow.com/questions/30026270/saving-memory-and-compile-time/30029577#30029577", "title": "Saving memory and compile time", "body": "<p><code>use</code> always runs in compile time. But <code>require</code> doesn't. So you can use <code>require Module;</code> just before any function call.</p>\n\n<p>Of course, the module will be loaded only the first time <code>require</code> is executed (and stay loaded).</p>\n\n<p>Mind that <code>use</code> also calls <code>import</code> on the loaded module and you may want to do that too. <code>use Module qw(f1 f2)</code> is a compile-time version of <code>require Module; Module-&gt;import(qw(f1 f3))</code>.</p>\n"}], "owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1430740720, "creation_date": 1430730178, "question_id": 30026270, "link": "https://stackoverflow.com/questions/30026270/saving-memory-and-compile-time", "title": "Saving memory and compile time", "body": "<p>Is there any way to save memory and compile time in perl using modules? For example not load all of the unneccessary, unused subs?</p>\n\n<p>Or it is a good way if I split my subs to many different <code>pm</code> files, and then I load only neccessary modules? For example:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nsub mysub1() {\n    use MySubsGroup1;\n}\nsub mysub2() {\n    use MySubsGroup2;\n}\n</code></pre>\n\n<p>This solution use less memory and get less compile time? Or what is the best practice to load only neccessary functions?</p>\n"}, {"tags": ["perl", "postgresql"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1430727337, "post_id": 30025475, "comment_id": 48168036, "body": "Do you really need <code>qq</code>?"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1430727563, "post_id": 30025475, "comment_id": 48168155, "body": "Use <code>q()</code> instead to avoid interpolation of variables. <code>?</code> will also need to be escaped, check the documentation for <code>DBI</code> for how to do that."}], "answers": [{"tags": [], "owner": {"reputation": 2182, "user_id": 1102638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c9fbc08343c7fbfc9c5888d8e803e05?s=128&d=identicon&r=PG", "display_name": "Vadim Pushtaev", "link": "https://stackoverflow.com/users/1102638/vadim-pushtaev"}, "is_accepted": true, "score": 3, "last_activity_date": 1430729063, "creation_date": 1430729063, "answer_id": 30025990, "question_id": 30025475, "link": "https://stackoverflow.com/questions/30025475/perl-and-postgresql-escaping/30025990#30025990", "title": "Perl and PostgreSQL escaping $", "body": "<p><code>qq(something)</code> is just another way to say <code>\"something\"</code> while <code>q(something)</code> means <code>'something'</code>.</p>\n\n<p>The difference between <code>\"this\"</code> and <code>'this'</code> is interpolation, which is enabled only inside double quotes.</p>\n\n<pre><code>my $foo = 123;\nprint \"&lt;&lt; $foo &gt;&gt;\";  # prints &lt;&lt; 123 &gt;&gt;\nprint '&lt;&lt; $foo &gt;&gt;';  # prints &lt;&lt; $foo &gt;&gt;\n</code></pre>\n\n<p>So, since <code>$</code> is not special symbol inside <code>''</code>, just change <code>qq</code> to <code>q</code>.</p>\n"}], "owner": {"reputation": 1148, "user_id": 2194126, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XJzge.jpg?s=128&g=1", "display_name": "Jayadevan", "link": "https://stackoverflow.com/users/2194126/jayadevan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 0, "accepted_answer_id": 30025990, "answer_count": 1, "score": 0, "last_activity_date": 1430729063, "creation_date": 1430727069, "question_id": 30025475, "link": "https://stackoverflow.com/questions/30025475/perl-and-postgresql-escaping", "title": "Perl and PostgreSQL escaping $", "body": "<p>I have an SQL statement executed from perl.</p>\n\n<pre><code>$my_sql = qq (\n            SELECT 1 AS ....\n            );\n</code></pre>\n\n<p>Then I do</p>\n\n<pre><code>my $sm = $dbh-&gt;prepare($my_sql);\n   $sm-&gt;execute;\n</code></pre>\n\n<p>The issue is that my SQL has regex like this in many places.</p>\n\n<pre><code>value ~ '^[1-9][0-9]?/[1-9][0-9]?/[1-9][0-9]{3}$':\n</code></pre>\n\n<p>So I get errors when I execute the perl script because of these '$'.</p>\n\n<pre><code>Use of uninitialized value $' in concatenation (.) or string at\nDBD::Pg::st execute failed: execute called with an unbound placeholder at\n</code></pre>\n\n<p>How can I avoid these errors and make the SQL statement work?</p>\n"}, {"tags": ["perl", "windows-7", "openssl"], "comments": [{"owner": {"reputation": 5503, "user_id": 2903341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ekzpx.jpg?s=128&g=1", "display_name": "Dinistro", "link": "https://stackoverflow.com/users/2903341/dinistro"}, "edited": false, "score": 0, "creation_date": 1430727004, "post_id": 30025378, "comment_id": 48167887, "body": "Please add some code"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430738525, "post_id": 30025378, "comment_id": 48174050, "body": "Where exactly you are getting this error? Can you create a minimal example to reproduce the problem and add it to your question?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1430759187, "post_id": 30025378, "comment_id": 48187433, "body": "<i>&quot;Is this a Perl, or OpenSSL, or certificate error?&quot;</i> - it looks like it could be a problem around the PERL code. Can you post the relevant PERL code? On the good side, you have Steffen here, so He should be a  big help to you."}, {"owner": {"reputation": 31, "user_id": 4861153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w5mspBRuXf4/AAAAAAAAAAI/AAAAAAAAAKc/QinUoyJNK3c/photo.jpg?sz=128", "display_name": "Antun Le\u017e", "link": "https://stackoverflow.com/users/4861153/antun-le%c5%be"}, "edited": false, "score": 0, "creation_date": 1430769318, "post_id": 30025378, "comment_id": 48193575, "body": "I will try to post minimal example tomorrow. Error happens after data dumping..."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430807518, "post_id": 30025378, "comment_id": 48206701, "body": "I case you&#39;ve used IO::Socket::SSL::Intercept to intercept SSL connections I might be able to reproduce the problem and you might check out version 2.014 of IO::Socket::SSL (just released) to see if it is fixed: <a href=\"https://github.com/noxxi/p5-io-socket-ssl\" rel=\"nofollow noreferrer\">github.com/noxxi/p5-io-socket-ssl</a>"}, {"owner": {"reputation": 31, "user_id": 4861153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w5mspBRuXf4/AAAAAAAAAAI/AAAAAAAAAKc/QinUoyJNK3c/photo.jpg?sz=128", "display_name": "Antun Le\u017e", "link": "https://stackoverflow.com/users/4861153/antun-le%c5%be"}, "edited": false, "score": 0, "creation_date": 1430946268, "post_id": 30025378, "comment_id": 48288239, "body": "After installing IO::Socket::SSL v 2.014, everything works without errors."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4861153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w5mspBRuXf4/AAAAAAAAAAI/AAAAAAAAAKc/QinUoyJNK3c/photo.jpg?sz=128", "display_name": "Antun Le\u017e", "link": "https://stackoverflow.com/users/4861153/antun-le%c5%be"}, "is_accepted": false, "score": 1, "last_activity_date": 1430980112, "creation_date": 1430980112, "answer_id": 30093454, "question_id": 30025378, "link": "https://stackoverflow.com/questions/30025378/openssl-1-0-2a-with-perl-5-18-4-on-windows-7-error/30093454#30093454", "title": "OpenSSL 1.0.2a with Perl 5.18.4 on Windows 7 error", "body": "<p>Everything works after updating IO::Socket::SSL to version 2.014.</p>\n"}], "owner": {"reputation": 31, "user_id": 4861153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w5mspBRuXf4/AAAAAAAAAAI/AAAAAAAAAKc/QinUoyJNK3c/photo.jpg?sz=128", "display_name": "Antun Le\u017e", "link": "https://stackoverflow.com/users/4861153/antun-le%c5%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430980112, "creation_date": 1430726659, "last_edit_date": 1430744925, "question_id": 30025378, "link": "https://stackoverflow.com/questions/30025378/openssl-1-0-2a-with-perl-5-18-4-on-windows-7-error", "title": "OpenSSL 1.0.2a with Perl 5.18.4 on Windows 7 error", "body": "<p>I am using Perl script (with HTTP::Proxy 0.303, Net::SSLeay 1.66 and IO::Socket::SSL 2.012 modules) with OpenSSL on Win7 and getting error:</p>\n\n<pre>failure during X509V3_EXT_conf_nid() for nid=177\n6896:error:2208B08F:X509 V3 routines:V2I_AUTHORITY_INFO_ACCESS:invalid syntax:v3_info.c:1\n1:\nfailure during X509V3_EXT_conf_nid() for nid=89\n6896:error:22082086:X509 V3 routines:R2I_CERTPOL:invalid policy identifier:v3_cpols.c:160:\nsection:,name:Policy,value:1.3.6.1.4.1.11129.2.5.1</pre>\n\n<p>Is this a Perl, or OpenSSL, or certificate error?</p>\n\n<p>URL: <code>www.google.hr:443</code></p>\n\n<p>Output from:</p>\n\n<p><code>openssl s_client -connect www.google.com:443 -tls1 -servername www.google.com | openssl x509 -text -noout</code></p>\n\n<p>is:</p>\n\n<pre>Loading 'screen' into random state - done\ndepth=2 C = US, O = GeoTrust Inc., CN = GeoTrust Global CA\nverify error:num=20:unable to get local issuer certificate\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number:\n            6a:f4:e4:88:96:4e:ef:db\n    Signature Algorithm: sha1WithRSAEncryption\n        Issuer: C=US, O=Google Inc, CN=Google Internet Authority G2\n        Validity\n            Not Before: Apr 22 13:46:42 2015 GMT\n            Not After : Jul 21 00:00:00 2015 GMT\n        Subject: C=US, ST=California, L=Mountain View, O=Google Inc, CN=www.google.com\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (2048 bit)\n                Modulus:\n                    00:c0:07:f5:b5:1c:4f:d9:03:c3:6f:07:fa:0e:ae:\n                    0e:96:37:8c:ca:ea:f7:6d:f6:ea:93:a6:4d:ca:01:\n                    0c:d0:fd:ed:aa:c3:2e:56:a1:ec:0d:98:98:31:f5:\n                    13:cb:22:e1:d1:79:31:fe:3a:b8:7c:bc:5d:63:93:\n                    6e:eb:0b:cf:4f:9e:cf:6b:46:c1:3f:15:58:e9:69:\n                    e7:cd:1e:2d:ed:ad:51:5b:0c:77:15:76:b5:3a:25:\n                    6d:17:8e:c1:b5:fb:06:cb:f2:e4:94:bc:33:22:7b:\n                    2e:19:36:a5:1f:a2:95:f7:30:9e:8b:1e:91:6b:e4:\n                    58:2b:45:6d:51:b1:e9:93:b3:f0:5f:5e:30:b8:32:\n                    80:5d:c2:7b:7a:c6:89:63:87:e2:87:cf:27:32:f0:\n                    e8:26:09:55:cf:38:db:9b:c9:42:94:79:8f:d4:8b:\n                    d3:da:5f:41:96:87:97:44:e6:e1:7b:da:31:bc:35:\n                    53:ec:eb:b2:bb:aa:97:e6:ad:d5:52:18:7b:d1:c4:\n                    7d:cf:03:00:3d:d1:e2:a5:6a:47:a5:a8:24:9f:72:\n                    b6:57:0f:ca:bb:12:c3:01:42:f4:50:6d:b1:5e:ba:\n                    1f:d3:7b:17:62:5f:ef:21:03:53:d7:34:c1:14:44:\n                    ae:72:d8:40:73:e6:30:1b:2e:eb:8b:6d:03:cd:fc:\n                    3a:99\n                Exponent: 65537 (0x10001)\n        X509v3 extensions:\n            X509v3 Extended Key Usage:\n                TLS Web Server Authentication, TLS Web Client Authentication\n            X509v3 Subject Alternative Name:\n                DNS:www.google.com\n            Authority Information Access:\n                CA Issuers - URI:http://pki.google.com/GIAG2.crt\n                OCSP - URI:http://clients1.google.com/ocsp\n\n            X509v3 Subject Key Identifier:\n                A0:01:08:F5:54:1F:91:E6:20:3D:67:2B:20:80:45:F1:83:EA:11:17\n            X509v3 Basic Constraints: critical\n                CA:FALSE\n            X509v3 Authority Key Identifier:\n                keyid:4A:DD:06:16:1B:BC:F6:68:B5:76:F5:81:B6:BB:62:1A:BA:5A:81:2F\n\n            X509v3 Certificate Policies:\n                Policy: 1.3.6.1.4.1.11129.2.5.1\n\n            X509v3 CRL Distribution Points:\n\n                Full Name:\n                  URI:http://pki.google.com/GIAG2.crl\n\n    Signature Algorithm: sha1WithRSAEncryption\n         65:56:21:57:c6:67:5d:33:a2:7a:71:58:14:04:75:b0:f6:7b:\n         12:a0:96:da:4a:ec:07:13:70:5f:a3:da:eb:83:35:7c:d0:c6:\n         b3:78:36:8c:fe:d7:55:48:20:80:e2:30:ff:f2:3c:89:af:78:\n         e5:e3:0b:5a:cc:7f:5f:92:7e:e8:05:4c:58:10:2d:b6:5f:2e:\n         bc:b7:19:ca:32:ee:4b:37:37:be:78:c6:d2:b3:b3:0a:4a:a7:\n         0f:77:56:5d:52:6f:b7:c5:cb:27:49:cd:db:9a:f9:bf:02:e3:\n         9d:e1:63:ee:78:c8:58:76:be:1c:ab:05:21:b7:ec:85:48:1a:\n         84:a7:ce:7a:26:3c:6c:60:39:57:eb:58:7d:8b:b2:aa:d8:40:\n         0f:c4:0f:bd:1a:f4:f6:73:98:fd:ba:95:17:99:46:15:9c:ba:\n         f1:e3:18:d7:2e:a6:db:6a:19:6c:29:df:9f:c2:f6:59:ed:b1:\n         52:bb:21:52:f3:3b:39:1d:17:cb:d6:4b:96:d6:2e:fd:70:7a:\n         6e:36:a4:26:cc:2f:83:ac:51:76:a2:e2:62:ee:e0:91:fc:0e:\n         98:7d:ad:83:17:ae:e8:c8:76:4a:5e:ea:20:57:09:28:f9:c7:\n         d5:7b:dd:6f:f9:a0:10:57:29:6d:93:30:1c:67:2f:f1:6b:2a:\n         48:f1:61:63</pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "is_accepted": true, "score": 3, "last_activity_date": 1430729467, "last_edit_date": 1430729467, "creation_date": 1430725848, "answer_id": 30025155, "question_id": 30024500, "link": "https://stackoverflow.com/questions/30024500/perl-edit-file-not-just-output-to-shell/30025155#30025155", "title": "Perl: edit file, not just output to shell", "body": "<p>I am assuming you want to replace the string inside the files found by <code>find</code>.\nCommand example below will change <strong>in-place</strong> (<code>-i</code>) any <code>\"foo\"</code> with <code>\"bar\"</code> for all <code>*.txt</code> files from curent directory.</p>\n\n<pre><code>find . -type f -name '*.txt' -print0 | xargs -0 perl -p -i -e 's/foo/bar/g;'\n</code></pre>\n\n<p>And for your question, you should be able to get it with this command:</p>\n\n<pre><code>find . -type f -print0 | xargs -0 perl -p -i -e 's/\\d+(\\s*;\\s*[sS]erial)/2015050466\\1/;'\n</code></pre>\n\n<p>Note: It is good habit to always use single quotes rather than double quotes. This is because inside double quotes, a <code>\\</code>, <code>$</code>, etc. may be processed by the shell before passed to Perl. See <a href=\"http://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html\" rel=\"nofollow\">Bash manual</a>.</p>\n"}], "owner": {"reputation": 349, "user_id": 2072145, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aaac2706c3a48d5b888db126af0bb878?s=128&d=identicon&r=PG", "display_name": "PatricF", "link": "https://stackoverflow.com/users/2072145/patricf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30025155, "answer_count": 1, "score": 3, "last_activity_date": 1430729467, "creation_date": 1430723597, "question_id": 30024500, "link": "https://stackoverflow.com/questions/30024500/perl-edit-file-not-just-output-to-shell", "title": "Perl: edit file, not just output to shell", "body": "<p>I found a little one-liner of perl code that will change the serial in my zone-files on my Bind server.\nHowever it wont change the actual file, it just gives me the output directly to the shell.</p>\n\n<p>This is what I run:</p>\n\n<pre><code>find . -type f -print0 | xargs -0 perl -e \"while(&lt;&gt;){ s/\\d+(\\s*;\\s*[sS]erial)/2015050466\\1/; print; }\"\n</code></pre>\n\n<p>This gives me the correct output to the shell and if I remove the <code>print;</code> at the end of the perl line nothing happens and I want it to actually change the files to the output I got.</p>\n\n<p>I'm a total noob when it comes to Perl so this might be a simple fix so any answer would be appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4861077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6d9a57aab2c07989f6346145fcda94?s=128&d=identicon&r=PG&f=1", "display_name": "qa24684", "link": "https://stackoverflow.com/users/4861077/qa24684"}, "edited": false, "score": 0, "creation_date": 1430778945, "post_id": 30030740, "comment_id": 48198208, "body": "Thank you so much. It worked beautifully and gives me exactly what I wanted!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430744134, "creation_date": 1430744134, "answer_id": 30030740, "question_id": 30023977, "link": "https://stackoverflow.com/questions/30023977/how-do-i-edit-this-perl-script-so-that-it-outputs-a-single-row-per-subject-inste/30030740#30030740", "title": "How do I edit this perl script so that it outputs a single row per subject instead of two rows?", "body": "<p>Your original code is a bit clunky. This will do as you ask</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy ($infile, $outfile) = @ARGV;\n\nopen my $in_fh,  '&lt;', $infile  or die qq{Cannot open \"$infile\" for input: $!\\n};\nopen my $out_fh, '&gt;', $outfile or die qq{Cannot open \"$outfile\" for output: $!\\n};\nselect $out_fh;\n\nwhile ( &lt;$in_fh&gt; ) {\n  my $start = 0;\n  for my $item ( split ) {\n    my ($pop, $end) = split /:/, $item;\n    print $pop x ($end - $start);\n    $start = $end;\n  }\n  print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4861077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6d9a57aab2c07989f6346145fcda94?s=128&d=identicon&r=PG&f=1", "display_name": "qa24684", "link": "https://stackoverflow.com/users/4861077/qa24684"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430744134, "creation_date": 1430721520, "question_id": 30023977, "link": "https://stackoverflow.com/questions/30023977/how-do-i-edit-this-perl-script-so-that-it-outputs-a-single-row-per-subject-inste", "title": "How do I edit this perl script so that it outputs a single row per subject instead of two rows?", "body": "<p>I have a file that is an output in the form below per subject:</p>\n\n<p>01:14502 11:15415 01:21265 11:24508 00:25150</p>\n\n<p>The numbers to the left of the colon are then output to a long form file where the 0 is on the first row and the 1 on the 2nd row till column 14502 and so on.</p>\n\n<p>The long form will look like this, displayed in 2 rows per subject:</p>\n\n<p>Row 1:0000000...till 14502, then 111111...till 15415 and so forth till 25150</p>\n\n<p>Row 2:1111111...till 14502, then 111111...till 15415 and so forth till 25150</p>\n\n<p>I want to edit the perl script that outputs the long form so that it only outputs it to 1 row per subject in the form below:</p>\n\n<p>01010101...till 14502, then 111111...till 15415, 010101...till 21265 and so on up to 0000...till 25150.</p>\n\n<p>The perl script that outputs the long form is:</p>\n\n<pre><code>#!/usr/bin/perl -w\n\n#use strict;\n\nif ((scalar @ARGV) != 2){\n\nprint \"USAGE::./thisprog.pl &lt;LAMPLD-outfile&gt; &lt;postprocessed-file&gt;\\n\";\ndie;\n\n}\nmy $infile = shift @ARGV;\nmy $outfile = shift @ARGV;\nmy @hap1;\nmy @hap2;\n\nopen IN, $infile or die \"print cannot open $infile\\n\";\nopen OUT, \"&gt;$outfile\" or die \"print cannot open $outfile\\n\"; \n\n$count = 0; \nwhile (my $line = &lt;IN&gt;) {\n\n$line =~ s/^\\s+//; \nchomp $line; \n# print \"Ind: $count\\n\";\nmy @temp =  split /\\s+/, $line;\nmy $start = 0;\nundef @hap1;\nundef @hap2;\nforeach my $bkpt (@temp){\n#   print $bkpt.\"\\n\";\n    my ($pop, $end ) = split /:/, $bkpt;\nfor (my $i =$start; $i &lt; $end; $i++){\n    my @ancs = split //, $pop ;\n    push(@hap1, $ancs[0]);\n    push(@hap2, $ancs[1]);\n}\n  $start = $end;\n}\nprint OUT join(\"\",@hap1).\"\\n\";\nprint OUT join(\"\",@hap2).\"\\n\";\n\n$count++;\n}\nclose(IN);\nclose(OUT);\n</code></pre>\n\n<p>As far as I understand the code, the <strong>@hap1</strong> and <strong>@hap2</strong> are the ones that output it to the two 2 rows in the long form file, so I only want it to output it to one row.</p>\n\n<p>Any help would be greatly appreciated. Thank you!</p>\n"}, {"tags": ["perl", "optimization"], "comments": [{"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 1, "creation_date": 1430726751, "post_id": 30023740, "comment_id": 48167770, "body": "What do you want improved? Runtime? Readability? And what are default tools? Is <code>List::MoreUtils</code> a default tool?"}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 2, "creation_date": 1430727432, "post_id": 30023740, "comment_id": 48168083, "body": "Also, you might have a bug if you&#39;re not operating on a torus. You might want to start your loop at one, or use <code>$i+1</code> and <code>$i</code> instead of <code>$i</code> and <code>$i-1</code> for indices since you&#39;re getting a negative result in the iteration and that means it takes from the end of the array."}, {"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "reply_to_user": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1430730574, "post_id": 30023740, "comment_id": 48169635, "body": "@patrick Yes, moreutils is default. Both runtime and readabilty."}], "answers": [{"comments": [{"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1430735382, "post_id": 30027733, "comment_id": 48172268, "body": "There is some bug in the code. I get completely different solution than the function in the body. Pair routines would be nice to see. Can you make this without 5.010, by the newest Perl? It would be make it more extensible."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "reply_to_user": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1430736524, "post_id": 30027733, "comment_id": 48172928, "body": "@Masi: Perl <code>v5.10.0</code> is about eight years old now. And you can use it with any newer version. You just need at least 5.10.0 for the <code>&#47;&#47;</code> &quot;defined or&quot; operator, but any newer one will do. Which are the modules that you need 5.8.x for?"}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "reply_to_user": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1430736856, "post_id": 30027733, "comment_id": 48173105, "body": "@Masi: yeah I switched x and y for the y crossing part. now it should be the same."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1430739468, "post_id": 30027733, "comment_id": 48174602, "body": "I realize these are bugs in the OP&#39;s implementation, but you&#39;ll get divide by zero errors if the line is vertical; and no intersection or only an x- or y-value will be returned for lines that start on the axes (by design?)."}, {"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1430748975, "post_id": 30027733, "comment_id": 48180950, "body": "@ThisSuitIsBlackNot In each iteration of loop, <code>if ($k ==0) break;</code> enough to fix the bug? But then can we have only <code>my $k;</code> inside the for -loop."}], "tags": [], "owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "is_accepted": false, "score": 3, "last_activity_date": 1430815872, "last_edit_date": 1495542114, "creation_date": 1430734880, "answer_id": 30027733, "question_id": 30023740, "link": "https://stackoverflow.com/questions/30023740/function-to-extract-intersections-of-crossing-lines-on-axes/30027733#30027733", "title": "Function to extract intersections of crossing lines on axes", "body": "<p>This is one alternative solution.\nThe code in the question calculates the value of <code>$k</code> every iteration, that's way too often, since you'll only need it if you want to store the value in one of the return arrays.\nThis code loops over the indices from <code>0</code> to <code>$#x-1</code> and makes use of the fact that the index is always stored in <code>$_</code>. This way, you some sort of lazy evaluation.\nAlso I'm not sure if it is a bug, but in the first iteration of the <code>for</code> loop in the OP the comparison is <code>$y[-1] * $y[0] &gt; 0</code>. This code doesn't do that.</p>\n\n<pre><code>use 5.010;              # for the // iterator\nsub extract_crossing2 {\n  my @x = @{ $_[0] }; my @y = @{ $_[1] };\n  my (@xcross, @ycross);\n  # \"lazily\" calculate $k,\n  # there is a possibility of division by zero here! maybe catch that \n  # with if (defined $@){\u2026}\n  my $get_k = sub {\n    eval {($y[$_] - $y[$_+1]) / ($x[$_] - $x[$_+1])}\n  };\n  foreach (0..$#x-1){\n    my $k;        # only gets set if needed\n    push @xcross, ($x[$_] - $y[$_]) / ($k  = $get_k-&gt;()) if $y[$_] * $y[$_+1] &lt; 0;\n    push @ycross, ($y[$_] - $x[$_]) * ($k // $get_k-&gt;()) if $x[$_] * $x[$_+1] &lt; 0;\n  }\n  return \\(@xcross, @ycross);\n}\n</code></pre>\n\n<p>There might be a nice solution with the <code>pair*</code> routines provided by <code>List::MoreUtils</code> and <code>List::Util</code>.</p>\n\n<p><strong>Edit</strong>: As <a href=\"https://stackoverflow.com/users/176646/thissuitisblacknot\">ThisSuitIsBlackNot</a> has pointed out, there is a possibility of a division by zero error in the question's code. I didn't work around that error.</p>\n"}, {"comments": [{"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1430753527, "post_id": 30033880, "comment_id": 48184086, "body": "Can you give an example how to combine these tests the ruling part of the function in the body, please? The failing of the last two tests is not a bug. It is a mathematical feature."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 1, "creation_date": 1430756727, "post_id": 30033880, "comment_id": 48186063, "body": "@Masi I added an implementation for calculating the x-intercepts of multiple contiguous segments."}, {"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1431350877, "post_id": 30033880, "comment_id": 48443979, "body": "Which package has this <code>Math::Geometry::Planar</code>? I switched to OSX and cannot this this working in this environment. I opened the OSX issue here <a href=\"http://apple.stackexchange.com/q/186636/15504\">apple.stackexchange.com/q/186636/15504</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 2, "creation_date": 1431353187, "post_id": 30033880, "comment_id": 48445674, "body": "@Masi Use <code>cpan</code>: <code>cpan Math::Geometry::Planar</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1431355013, "post_id": 30033880, "comment_id": 48447016, "body": "@Masi I&#39;m not sure what you mean when you say &quot;I replaced the function in the body with your function...&quot; I would recommend posting a new question that shows the exact code you&#39;re using and the error you get. Comments aren&#39;t really suitable for posting long snippets of code since they are quite difficult to read."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1431375443, "post_id": 30033880, "comment_id": 48459683, "body": "Excellent answer.  Great module.  ++ for using tests in such a simple and useful way."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 3, "last_activity_date": 1430756178, "last_edit_date": 1430756178, "creation_date": 1430753190, "answer_id": 30033880, "question_id": 30023740, "link": "https://stackoverflow.com/questions/30023740/function-to-extract-intersections-of-crossing-lines-on-axes/30033880#30033880", "title": "Function to extract intersections of crossing lines on axes", "body": "<p>If <code>List::MoreUtils</code> qualifies as one of Perl's \"default tools\" as you say in a comment, <a href=\"https://metacpan.org/pod/Math::Geometry::Planar\" rel=\"nofollow\"><code>Math::Geometry::Planar</code></a> should qualify as well. <code>Math::Geometry::Planar</code> provides a number of handy functions for calculating the intersection of segments, rays, and lines, as well as functions for manipulating polygons, calculating distances, and other goodies.</p>\n\n<p>When evaluating any solution, you should make sure it generates correct results for a number of inputs, including edge cases. Your original code has at least one bug (a divide-by-zero error for vertical line segments)...let's make sure <a href=\"https://metacpan.org/pod/Math::Geometry::Planar#SegmentLineIntersection-p1-p2-p3-p4\" rel=\"nofollow\"><code>SegmentLineIntersection</code></a> from <code>Math::Geometry::Planar</code> works as expected:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Math::Geometry::Planar qw(SegmentLineIntersection);\nuse Test::More tests =&gt; 8;\n\nmy @x_axis = ( [0, 0], [1, 0] );\nmy @y_axis = ( [0, 0], [0, 1] );\n\nis_deeply(\n    SegmentLineIntersection([ [-1, 2], [2, -1], @x_axis ]),\n    [1, 0],\n    'Segment (-1, 2), (2, -1) intersects x-axis once at (1, 0)'\n);\n\nis_deeply(\n    SegmentLineIntersection([ [-1, 2], [2, -1], @y_axis ]),\n    [0, 1],\n    'Segment (-1, 2), (2, -1) intersects y-axis once at (0, 1)'\n);\n\nis(\n    SegmentLineIntersection([ [0, 1], [1, 1], @x_axis ]),\n    0,\n    'Horizontal segment above x-axis never intersects x-axis'\n);\n\nis(\n    SegmentLineIntersection([ [1, 0], [1, 1], @y_axis ]),\n    0,\n    'Vertical segment to the right of y-axis never intersects y-axis'\n);\n\nis(\n    SegmentLineIntersection([ [0, 0], [1, 0], @x_axis ]),\n    0,\n    'Horizontal segment on x-axis returns false (intersects infinite times)'\n);\n\nis(\n    SegmentLineIntersection([ [0, 0], [0, 1], @y_axis ]),\n    0,\n    'Vertical segment on y-axis returns false (intersects infinite times)'\n);\n\nis_deeply(\n    SegmentLineIntersection([ [0, 0], [1, 1], @x_axis ]),\n    [0, 0],\n    'Segment beginning at origin intersects x-axis at (0, 0)'\n);\n\nis_deeply(\n    SegmentLineIntersection([ [0, 0], [1, 1], @y_axis ]),\n    [0, 0],\n    'Segment beginning at origin intersects y-axis at (0, 0)'\n);\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1..8\nok 1 - Segment (-1, 2), (2, -1) intersects x-axis once at (1, 0)\nok 2 - Segment (-1, 2), (2, -1) intersects y-axis once at (0, 1)\nok 3 - Horizontal segment above x-axis never intersects x-axis\nok 4 - Vertical segment to the right of y-axis never intersects y-axis\nok 5 - Horizontal segment on x-axis returns false (intersects infinite times)\nok 6 - Vertical segment on y-axis returns false (intersects infinite times)\nnot ok 7 - Segment beginning at origin intersects x-axis at (0, 0)\n#   Failed test 'Segment beginning at origin intersects x-axis at (0, 0)'\n#   at geometry line 49.\n#     Structures begin differing at:\n#          $got = '0'\n#     $expected = ARRAY(0x1b1f088)\nnot ok 8 - Segment beginning at origin intersects y-axis at (0, 0)\n#   Failed test 'Segment beginning at origin intersects y-axis at (0, 0)'\n#   at geometry line 55.\n#     Structures begin differing at:\n#          $got = '0'\n#     $expected = ARRAY(0x1b1f010)\n# Looks like you failed 2 tests of 8.\n</code></pre>\n\n<p>Looks like our last two tests failed: apparently segments with one end on a line don't count as intersecting (this is the case in your original algorithm as well). I'm not a geometry expert, so I can't evaluate whether this is a bug or mathematically correct.</p>\n\n<h2>Calculating intercepts for multiple segments</h2>\n\n<p>The following function returns the x-intercepts for multiple connected line segments. The implementation for calculating y-intercepts would be nearly identical. Note that if a pair of segments meet exactly on the axis, it doesn't count as an intercept, as in your original function. That may or may not be desirable.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Math::Geometry::Planar qw(SegmentLineIntersection);\nuse Test::Exception;\nuse Test::More tests =&gt; 3;\n\nsub x_intercepts {\n    my ($points) = @_;\n\n    die 'Must pass at least 2 points' unless @$points &gt;= 2;\n\n    my @intercepts;\n    my @x_axis = ( [0, 0], [1, 0] );\n\n    foreach my $i (0 .. $#$points - 1) {\n        my $intersect = SegmentLineIntersection([ @$points[$i, $i + 1], @x_axis ]);\n        push @intercepts, $intersect if $intersect;\n    }\n\n    return \\@intercepts;\n}\n\ndies_ok { x_intercepts([ [0, 0] ]) } 'Dies with &lt; 2 points';\n\nis_deeply(\n    x_intercepts([ [-1, -1], [1, 1], [1, -1] ]),\n    [ [0, 0], [1, 0] ],\n    'Intersects x-axis at (0, 0) and (1, 0)'\n);\n\nis_deeply(\n    x_intercepts([ [-1, -1], [0, 0], [1, 1] ]),\n    [],\n    \"No intercept when segments start or end on x-axis but don't cross it\"\n);\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1..3\nok 1 - Dies with &lt; 2 points\nok 2 - Intersects x-axis at (0, 0) and (1, 0)\nok 3 - No intercept when segments start or end on x-axis but don't cross it\n</code></pre>\n\n<p>Note that this implementation accepts a single array reference of points, where a point is a reference to a two-element array, instead of separate array references of x- and y-coordinates. I think this is a little bit more intuitive.</p>\n"}], "owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 3, "accepted_answer_id": 30033880, "answer_count": 2, "score": 5, "last_activity_date": 1431372348, "creation_date": 1430720441, "last_edit_date": 1431372348, "question_id": 30023740, "link": "https://stackoverflow.com/questions/30023740/function-to-extract-intersections-of-crossing-lines-on-axes", "title": "Function to extract intersections of crossing lines on axes", "body": "<p>Code in Perl is 5.18.2.</p>\n\n<pre><code>sub extract_crossing {\n    my @x = @{ $_[0] }; my @y = @{ $_[1] };\n    my @xcross =(); my @ycross =();\n    for (my $i=0; $i&lt;$#x; $i++) {\n        my $k = ($y[$i] - $y[$i+1]) / ($x[$i] - $x[$i+1]);\n        if($y[$i+1] * $y[$i] &lt; 0) {\n            my $xc = $x[$i+1] - $y[$i+1] / $k;\n            push(@xcross, $xc);\n        }\n        if($x[$i+1] * $x[$i] &lt; 0) {\n            my $yc = $y[$i+1] - $x[$i+1] * $k;\n            push(@ycross, $yc);\n        }\n    }\n    return (\\@xcross, \\@ycross);\n}\n</code></pre>\n\n<p>which extracts successfully crossing points with x- and y-axes. \nIt looks first point where the product of two subsequent points is negative. \nIf so, intersection point with corresponding axis. </p>\n\n<p>However, I feel this function extraneous, since it is so basic operation. </p>\n\n<p><strong>How can you do this extraction better with default tools in Perl?</strong></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "reply_to_user": {"reputation": 841, "user_id": 3348338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1yPya.jpg?s=128&g=1", "display_name": "Asheliahut", "link": "https://stackoverflow.com/users/3348338/asheliahut"}, "edited": false, "score": 0, "creation_date": 1430707730, "post_id": 30021786, "comment_id": 48161041, "body": "Just of out curiosity, do you know why it got pulled down?"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1430742652, "post_id": 30021786, "comment_id": 48176568, "body": "Install <code>Perl::Tidy</code>. It comes with a script, <code>perltidy</code> which reformats Perl code. <a href=\"https://metacpan.org/pod/Perl::Tidy\" rel=\"nofollow noreferrer\">metacpan.org/pod/Perl::Tidy</a> <a href=\"https://metacpan.org/pod/distribution/Perl-Tidy/bin/perltidy\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/Perl-Tidy/bin/perltidy</a>"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1430743611, "post_id": 30021786, "comment_id": 48177269, "body": "PS: While you&#39;re at it, install <code>Perl::Critic</code>. It comes with a script, <code>perlcritic</code>, which complains about your Perl code. It follow many of PBP. <a href=\"https://metacpan.org/pod/Perl::Critic\" rel=\"nofollow noreferrer\">metacpan.org/pod/Perl::Critic</a> <a href=\"https://metacpan.org/pod/perlcritic\" rel=\"nofollow noreferrer\">metacpan.org/pod/perlcritic</a>"}, {"owner": {"reputation": 4324, "user_id": 109483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1605dbda0d18f0df226b6c1b379f9a4?s=128&d=identicon&r=PG", "display_name": "Ashley", "link": "https://stackoverflow.com/users/109483/ashley"}, "edited": false, "score": 0, "creation_date": 1430763763, "post_id": 30021786, "comment_id": 48190257, "body": "\u201cPerl Best Practices\u201d is a great discussion and outline of style issues and considerations. There are a couple dozen which I would call poor (e.g., prefer inside-out objects) and another 50 or so which I would call subjective (never use postfix <code>unless</code>). It\u2019s a very good book to read though! Reading the code of top CPAN modules and their tests (ones with many contributors/devs especially) is also a good way to see what community standards look like."}], "answers": [{"comments": [{"owner": {"reputation": 885, "user_id": 1169785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb88c0410d5380a5b590a2e993b053a?s=128&d=identicon&r=PG", "display_name": "G. Allen Morris III", "link": "https://stackoverflow.com/users/1169785/g-allen-morris-iii"}, "edited": false, "score": 3, "creation_date": 1430707500, "post_id": 30021834, "comment_id": 48161006, "body": "You might also look at: &quot;Perl Best Practices&quot; by Damian Conway."}, {"owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "edited": false, "score": 0, "creation_date": 1430707855, "post_id": 30021834, "comment_id": 48161078, "body": "Haha. I ordered that book earlier today, actually."}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1430714080, "post_id": 30021834, "comment_id": 48162501, "body": "Thanks for the edit, @user2864740.  I couldn&#39;t pick anything decent to give the answer more than the link."}], "tags": [], "owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "is_accepted": true, "score": 8, "last_activity_date": 1430747920, "last_edit_date": 1592644375, "creation_date": 1430707203, "answer_id": 30021834, "question_id": 30021786, "link": "https://stackoverflow.com/questions/30021786/is-there-a-definitive-perl-style-guide/30021834#30021834", "title": "Is there a definitive Perl style guide?", "body": "<p>There's <a href=\"http://perldoc.perl.org/perlstyle.html\" rel=\"nofollow noreferrer\">perldoc perlstyle</a> in the standard documentation.</p>\n<blockquote>\n<p>Regarding aesthetics of code lay out, about the only thing Larry cares strongly about is that the closing curly bracket of a multi-line BLOCK should line up with the keyword that started the construct. Beyond that, he has other preferences that aren't so strong..</p>\n<p>.. Larry has his reasons for each of these things, but he doesn't claim that everyone else's mind works the same as his does.</p>\n</blockquote>\n<p>If you install the <code>Perl::Tidy</code> module it includes the program/tool <code>perltidy</code> that will reformat your code to conform to Larry Wall's preferences as expressed in <code>perlstyle</code>.  With the command line parameter <code>-pbp</code> it will instead conform to the style preferences Damian Conway expressed in his book <code>Perl Best Practices</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1569932491, "post_id": 30021934, "comment_id": 102748922, "body": "As a recovering programmer who looked at Perl, many of Tom&#39;s suggestions are ant-best-practices as noted in more maintainable languages.  For example, functions named by what the do, instead of what the provide.  That&#39;s a mantinabliity nightmare, because if you change the function&#39;s contents, you should rename it, forcing a refactoring of the entire codebase (and Perl lacks great refactoring tools)"}], "tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 3, "last_activity_date": 1430708025, "last_edit_date": 1495540855, "creation_date": 1430708025, "answer_id": 30021934, "question_id": 30021786, "link": "https://stackoverflow.com/questions/30021786/is-there-a-definitive-perl-style-guide/30021934#30021934", "title": "Is there a definitive Perl style guide?", "body": "<p>There is a <a href=\"http://www.perl.com/doc/FMTEYEWTK/style/slide-index.html\" rel=\"nofollow noreferrer\">Perl Style</a> guide written by <a href=\"https://stackoverflow.com/users/471272/tchrist\">Tom Christiansen</a>, who is one of the top Perlers out there.</p>\n"}], "owner": {"reputation": 463, "user_id": 4368834, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9FDCf.jpg?s=128&g=1", "display_name": "th3v0id", "link": "https://stackoverflow.com/users/4368834/th3v0id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2462, "favorite_count": 0, "closed_date": 1430716643, "accepted_answer_id": 30021834, "answer_count": 2, "score": 3, "last_activity_date": 1430747920, "creation_date": 1430706835, "question_id": 30021786, "link": "https://stackoverflow.com/questions/30021786/is-there-a-definitive-perl-style-guide", "closed_reason": "Not suitable for this site", "title": "Is there a definitive Perl style guide?", "body": "<p>I'm wondering if there's a document or a page which has a style guide for Perl. For example, this is one that I use for C++: <a href=\"https://google-styleguide.googlecode.com/svn/trunk/cppguide.html\" rel=\"nofollow\">https://google-styleguide.googlecode.com/svn/trunk/cppguide.html</a>.</p>\n\n<p>Is there a style guide for Perl that most people use / follow? </p>\n"}, {"tags": ["html", "perl", "validation", "digital-signature"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1430706162, "post_id": 30021664, "comment_id": 48160735, "body": "Welcome to Stack Overflow.  Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  I&#39;m puzzled \u2014 this looks more like HTML and form management than Perl."}, {"owner": {"reputation": 21, "user_id": 4860644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4aa2c6451857574cd0ff7d30fcf419?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4860644/jason"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1430706382, "post_id": 30021664, "comment_id": 48160781, "body": "Thank You, I will. - Our teacher called his lesson &quot;perl and the web&quot;, its a new and completely confusing to me."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430717204, "post_id": 30021858, "comment_id": 48163438, "body": "The problem mentioned in your last para can be avoided by using a salted hash rather than an unsalted one. The attacker would have to know the secret salt to spoof."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430717381, "post_id": 30021858, "comment_id": 48163497, "body": "I&#39;m not sure why you suggest CRC as the hashing algorithm; it&#39;s just as easy using a far better one."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430717949, "post_id": 30021858, "comment_id": 48163670, "body": "@ikegami: The OP says <i>\u201che wanted us to write a program to prevent spoofing without using a post method\u201d</i>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1430718066, "post_id": 30021858, "comment_id": 48163721, "body": "Missed that! Deleted the comment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430718328, "post_id": 30021858, "comment_id": 48163821, "body": "@ikegami: I chose CRC because this is intended only as an explanation of the principle and, as they say <i>Perl and the Web</i> is <i>\u201cnew and completely confusing\u201d</i> I imagined that the OP has a better chance of understanding <i>CRC</i> than <i>hash function</i>. Were this a real application I would probably go for, as you say, salted MD5"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430719421, "post_id": 30021858, "comment_id": 48164237, "body": "Ack! Just as bad. Use SHA, please!"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1430724809, "post_id": 30021858, "comment_id": 48166788, "body": "@ikegami It&#39;s not &quot;just as bad&quot;. MD5 is a proper cryptographic hash. While it has known weaknesses, it is significantly better than a simple CRC, and quite possibly good enough for this operational scenario. I agree that for educational purposes, a stronger hash would probably be a better example, but you are seriously overreacting here IMHO."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430748521, "post_id": 30021858, "comment_id": 48180644, "body": "MD5 collisions can be generated in under a second on a basic desktop. MD5 shouldn&#39;t be used anymore. So yeah, it&#39;s just as bad."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1430707395, "creation_date": 1430707395, "answer_id": 30021858, "question_id": 30021664, "link": "https://stackoverflow.com/questions/30021664/how-do-you-detect-that-a-visitor-changed-a-value-in-the-query-string/30021858#30021858", "title": "How do you detect that a visitor changed a value in the query string?", "body": "<p>One difference between GET and POST is that the information for the former is passed in the URL itself. That means you can type what you like in the browser's address bar -- it doesn't have to have come from an HTML form. I think that's what is meant by <em>spoofing</em> here.</p>\n\n<p>The most obvious protection is to calculate a CRC of all the protected fields -- in this case <code>MickeyMouse</code> -- and put that value in a hidden field of the HTML form sent out by the server. Then, when the request comes back, calculate the CRC of the same fields and check that it matches the value of the returned hidden field.</p>\n\n<p>Of course that can be circumvented if the user works out how the protection functions and adds his own calculation of the CRC of his spoofed data as well. But this should be sufficient for a proof of concept.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1430717483, "post_id": 30022434, "comment_id": 48163523, "body": "Almost. A client-side library won&#39;t help. He can just as easily change the value by changing the field. You&#39;d want to hash the values (salted with a secret) on the server and include the salt in a hidden field in the form. The server would check for tampering by checking the hash of the submitted value with the submitted hash."}], "tags": [], "owner": {"reputation": 11399, "user_id": 74585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o1jYf.jpg?s=128&g=1", "display_name": "Matthew Lock", "link": "https://stackoverflow.com/users/74585/matthew-lock"}, "is_accepted": false, "score": 0, "last_activity_date": 1430717432, "last_edit_date": 1430717432, "creation_date": 1430712120, "answer_id": 30022434, "question_id": 30021664, "link": "https://stackoverflow.com/questions/30021664/how-do-you-detect-that-a-visitor-changed-a-value-in-the-query-string/30022434#30022434", "title": "How do you detect that a visitor changed a value in the query string?", "body": "<p>If you want to detect if a user has changed a parameter in the querystring of a url after a form has performed a GET action, then generate a client side hash before the form is submitted. The hash would be based on the values of the form fields, and then compared to a recalculated hash based on the current parameter values on the response page. If the hashes don't match the querystring has been tampered with.</p>\n\n<p>Here's a client side Crypto library to calculate the hashes <a href=\"https://code.google.com/p/crypto-js/\" rel=\"nofollow\">https://code.google.com/p/crypto-js/</a></p>\n\n<p>Note this is only for educational use, and wouldn't provide enough security in the real world, as a person could also discover the hashing key by inspecting the page source and use that to generate their own hashes.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1430924731, "creation_date": 1430924731, "answer_id": 30080606, "question_id": 30021664, "link": "https://stackoverflow.com/questions/30021664/how-do-you-detect-that-a-visitor-changed-a-value-in-the-query-string/30080606#30080606", "title": "How do you detect that a visitor changed a value in the query string?", "body": "<p>A <code>POST</code> method wouldn't prevent spoofing anyway. <code>POST</code> and <code>GET</code> do almost exactly the same thing - they send plain text encoded variables to a web server.</p>\n\n<p>They're insanely easy to \"spoof\" - the point isn't the spoofing, it's that you shouldn't trust \"user input\" like that, ever.  </p>\n\n<p>I would suggest in the case of the names, it doesn't matter. So what if I fudge your web page to \"pretend\" I am called \"baseball bat\" instead? </p>\n\n<p>If it's important, like for example, ensuring I can only see <em>my</em> test results - then you need to handle the data processing server side. One method of doing this is via session tracking - so rather than including field in a web form, I instead use a \"session token\". </p>\n\n<p>You would 'send' me a username and password - ideally using a hash to make it impossible to 'see' as you're sending it, or in your browser history. And then I would check it against my server, to check if that hash is 'valid' by performing the same operation on the server, and comparing the two. </p>\n\n<p>So perlishly:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse Digest::SHA qw ( sha1_base64 );\n\nmy ( $firstname, $lastname ) = qw ( Mickey Mouse ); \nmy $timewindow = int ( time / 300 ); \nmy $token = sha1_base64 ( $timewindow.$firstname.$lastname );\n\nprint $token;\n</code></pre>\n\n<p>This produces a token that doesn't last long - it changes every 5 minutes - but it's extremely difficult to tamper with. </p>\n\n<p>The reason for including the time, is to avoid <code>replay</code> attacks, whereby if look in your browser history, I can find \"your\" token and reuse it. (That's probably the next question after the \"spoofing\" one though :))</p>\n\n<p>If you sent the parameters with the token, bear in mind that it's actually quite easy for a malicious actor to perform the same calculation themselves, and send some completely faked credentials and tokens. </p>\n\n<p>This is something of a simplistic example though - because really, faked parameters shouldn't matter, because you shouldn't trust them in the first place. If 'Mickey Mouse' is valid, and 'baseball bat' isn't, then your server should detect that when processing the form, and discard the latter, which makes the whole 'form spoofing' thing irrelevant. </p>\n"}, {"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 0, "last_activity_date": 1430925595, "creation_date": 1430925595, "answer_id": 30080962, "question_id": 30021664, "link": "https://stackoverflow.com/questions/30021664/how-do-you-detect-that-a-visitor-changed-a-value-in-the-query-string/30080962#30080962", "title": "How do you detect that a visitor changed a value in the query string?", "body": "<p>The question is rather narrowly phrased, so this answer might not quite address what you're asking. But as a matter of policy, if you don't want your users to tamper with your data you should not give them custody of it. Why are you relying on the query string for the user name if the server already knows it? Rely on the client for authentication and for new information, and rely on your records for any information that should stay beyond the user's control. </p>\n\n<p>POST requests can be crafted almost as easily as GET requests, and cryptographic protection, <em>even when it is secure,</em> is only useful to the extent that the client cannot access\n the encrypted data; so why transmit it back and forth?</p>\n"}, {"tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": false, "score": 3, "last_activity_date": 1430926981, "last_edit_date": 1495539819, "creation_date": 1430926981, "answer_id": 30081512, "question_id": 30021664, "link": "https://stackoverflow.com/questions/30021664/how-do-you-detect-that-a-visitor-changed-a-value-in-the-query-string/30081512#30081512", "title": "How do you detect that a visitor changed a value in the query string?", "body": "<p>What you need to do is to authenticate the data in the query string, and validate it when you receive it.  There is a standard tool(set) for this: a cryptographic <a href=\"//en.wikipedia.org/wiki/Message_authentication_code\" rel=\"nofollow noreferrer\">Message Authentication Code (MAC)</a>.</p>\n\n<p>Basically, a MAC is a function that takes in a message (any arbitrary string) and a secret key, and outputs a random-looking token that depends, in a complicated way, on both the message and the key.  Importantly, it is effectively impossible to compute a valid MAC token for a modified message without knowing the key.</p>\n\n<p>To validate a query string (or some other data) with a MAC, you'd basically follow these steps:</p>\n\n<ol>\n<li><p>Encode the data into a \"canonical\" form as a string.  For an HTTP URL, you could just use the query string (and/or the entire URL) as it is, although you may wish to normalize it e.g. by %-decoding any characters that don't <em>have</em> to be encoded, and normalizing the case of any %-encoded values (e.g. <code>%3f</code> &rarr; <code>%3F</code>).</p>\n\n<p>Alternatively, you could decode the query string into, say, an associative array, and serialize this array in a format of your choice.  This can make it easier to combine parameters from multiple sources (e.g. hidden form fields), to add extra data fields (see below) and to choose which fields you want to validate.</p></li>\n<li><p>Optionally, combine the data with any additional information you wish to associate it with, such as a user ID and/or a timestamp.  (You can either transmit the timestamp explicitly, or just round it down to, say, the last hour, and check both the current and the previous timestamp when validating it.)  Changing any of these values will change the MAC output, thus preventing attackers from e.g. trying to submit one user's data under another user's account.</p></li>\n<li><p>Store a secret key (preferably, a securely generated random value of, say, 128 bits) on the server.  Obviously, this secret key must be stored so that users cannot access it (e.g. by guessing the path to the config file).</p></li>\n<li><p>Feed the canonically encoded data and the secret key into the MAC algorithm.  Take the result and (if your MAC library doesn't do this for you) encode it in some convenient matter (e.g. using the <a href=\"https://stackoverflow.com/questions/10513035/hashing-or-encrypting-variables-to-be-sent-in-a-url/10515786#10515786\">URL-safe Base64 variant</a>).</p></li>\n<li><p>Append the encoded MAC token as an extra parameter in the URL.</p></li>\n<li><p>When you receive the data back, remove the MAC token, feed the rest of the data back into the MAC generation code as described above, and check that the resulting MAC matches the one you received.</p></li>\n</ol>\n\n<p>MAC algorithms can be constructed from <a href=\"//en.wikipedia.org/wiki/Cryptographic_hash_function\" rel=\"nofollow noreferrer\">cryptographic hash functions</a> like MD5 or SHA-1/2/3.  In fact, a basic MAC can be obtained simply by concatenating the secret and the message, hashing them, and using the result as the token.</p>\n\n<p>For some hash functions, like SHA-3, the simple MAC construction described above is actually believed to be secure; for older hash functions, which were not explicitly designed with this use in mind, however, it's safer to use the (slightly) more complicated <a href=\"//en.wikipedia.org/wiki/Hash-based_message_authentication_code\" rel=\"nofollow noreferrer\">HMAC</a> construction, which hashes the input twice.</p>\n\n<p>Alternatively, there are also MAC algorithms, such as <a href=\"//en.wikipedia.org/wiki/CMAC\" rel=\"nofollow noreferrer\">CMAC</a>, which are based on block ciphers (like AES) instead of hash functions.  In some cases (e.g. on embedded platforms, where a fast hash function may not be available) these may be more efficient than HMAC; for a web application, however, the choice is essentially a matter of taste.</p>\n"}], "owner": {"reputation": 21, "user_id": 4860644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4aa2c6451857574cd0ff7d30fcf419?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4860644/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1430926981, "creation_date": 1430705862, "last_edit_date": 1430718735, "question_id": 30021664, "link": "https://stackoverflow.com/questions/30021664/how-do-you-detect-that-a-visitor-changed-a-value-in-the-query-string", "title": "How do you detect that a visitor changed a value in the query string?", "body": "<p>For our last week in school (finals next week) our teacher decided to give us a crash course in Perl. We talked about all the differences we would encounter if we used Perl and then we started talking about \"spoofing\".</p>\n\n<p>We were given an HTML example where a user could input their first and last names. Of course our example already had Mickey as the first name and Mouse as the last name.</p>\n\n<pre><code>&lt;form action=\"action_page.php\"&gt;\nFirst name:&lt;br&gt;\n&lt;input type=\"text\" value=\"Mickey\"&gt;\n&lt;br&gt;\nLast name:&lt;br&gt;\n&lt;input type=\"text\" name=\"lastname\" value=\"Mouse\"&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;input type=\"submit\" value=\"Submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>At the end when you hit submit you were redirected to a new screen that said your first name is Mickey and your last name is Mouse.</p>\n\n<p>Our teacher said \"spoofing\" is when you change the method = get in the URL so instead of having</p>\n\n<pre><code>firstname=Mickey&amp;lastname=Mouse\n</code></pre>\n\n<p>you would enter something like</p>\n\n<pre><code>firstname=baseball&amp;lastname=bat\n</code></pre>\n\n<p>That would instantly alter the intended command and you would end up getting first name as baseball and lastname as bat.</p>\n\n<p>This all sounds pretty straight forward, until he said he wanted us to write a program to prevent spoofing without using a post method.</p>\n\n<p>Instead when a user attempts to spoof the system we're supposed to print out some anti-spoofing comment.</p>\n\n<p>Unfortunately, we never really talked about spoofing aside from the examples. I've attempted to Google spoofing to see some example code, or at least understand this concept, but I haven't had much luck, or I haven't looked in the right places.</p>\n\n<p>So I thought I would ask here. Can someone who is decent at Perl direct me towards basic anti-spoofing programs and content, or at least explain and show how spoofing is supposed to work.</p>\n"}, {"tags": ["c#", "perl", "com", "ole"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1430697072, "post_id": 30019596, "comment_id": 48158822, "body": "Set <code>$Win32::OLE::Warn = 3</code> for <code>Win32::OLE</code> to croak on errors (with possibly useful information)."}, {"owner": {"reputation": 551, "user_id": 1210198, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/063b86783ae03d48a9abddaf4e6e86c6?s=128&d=identicon&r=PG", "display_name": "Darth_Evil", "link": "https://stackoverflow.com/users/1210198/darth-evil"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430709545, "post_id": 30019596, "comment_id": 48161439, "body": "Thanks, this definitely helps alot"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 1210198, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/063b86783ae03d48a9abddaf4e6e86c6?s=128&d=identicon&r=PG", "display_name": "Darth_Evil", "link": "https://stackoverflow.com/users/1210198/darth-evil"}, "edited": false, "score": 0, "creation_date": 1430696005, "post_id": 30020335, "comment_id": 48158567, "body": "It turns out my dll was being built for 32 bit while Perl is 64-bit. Running your script with wscript/cscript in the SysWOW64 folder helped me find that. Thank you and excuse my terrible Perl skills (I&#39;m not a Perl dev lol)."}], "tags": [], "owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": true, "score": 1, "last_activity_date": 1430693931, "creation_date": 1430693931, "answer_id": 30020335, "question_id": 30019596, "link": "https://stackoverflow.com/questions/30019596/unable-to-use-c-com-object-from-perl/30020335#30020335", "title": "Unable to use C# COM object from Perl", "body": "<p>It would help to have a more useful debugging message than oops.  I would suggest writing a vbscript program that would give a more useful message.</p>\n\n<p>Is your version of Perl that you are running 32 or 64 bit?  If it is 64-bit, then your program is failing because in-process servers (DLL OLE servers) have to have the same bit-ness as their clients.  If that is the case, then you need to run the 64-bit version of regasm which will be in the Framework64 directory instead of the Framework directory.</p>\n\n<p>Excel will succeed because it is an out of process server and the bit-ness is not required to match--of course the bit-ness might match.</p>\n\n<p>A simple vbscript program is:</p>\n\n<pre><code>Dim obj\nSet obj = CreateObject(\"ExampleCom.ComClass\")\nMsgBox TypeName(obj)\n</code></pre>\n\n<p>On a 64-bit OS, the standard version of cscript.exe or wscript.exe is a 64-bit program.  You might try running with the 32-bit version with c:\\windows\\SysWOW64\\wscript.exe (or cscript.exe).</p>\n"}], "owner": {"reputation": 551, "user_id": 1210198, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/063b86783ae03d48a9abddaf4e6e86c6?s=128&d=identicon&r=PG", "display_name": "Darth_Evil", "link": "https://stackoverflow.com/users/1210198/darth-evil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 30020335, "answer_count": 1, "score": 1, "last_activity_date": 1430693931, "creation_date": 1430688332, "question_id": 30019596, "link": "https://stackoverflow.com/questions/30019596/unable-to-use-c-com-object-from-perl", "title": "Unable to use C# COM object from Perl", "body": "<p>I'm trying to create a C# COM Object to be used in a Perl script (As far as I understand COM is the best way to go).</p>\n\n<p>Here is the C# code:</p>\n\n<pre><code>using System.Runtime.InteropServices;\n\nnamespace ExampleCom\n{\n    [Guid(\"EAA4976A-45C3-4BC5-BC0B-E474F4C3C83F\")]\n    public interface IComClass\n    {\n\n    }\n\n    [Guid(\"7BD20046-DF8C-44A6-8F6B-687FAA26FA71\")]\n    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]\n    public interface IComClassEvents\n    {\n\n    }\n\n    [Guid(\"0D53A3E8-E51A-49C7-944E-E72A2064F938\")]\n    [ClassInterface(ClassInterfaceType.None)]\n    [ComSourceInterfaces(typeof(IComClassEvents))]\n    [ProgId(\"ExampleCom.ComClass\")]\n    public class ComClass : IComClass\n    {\n    }\n}\n</code></pre>\n\n<p>Here is the output of RegAsm:</p>\n\n<pre><code>Microsoft .NET Framework Assembly Registration Utility version 4.0.30319.0\nfor Microsoft .NET Framework version 4.0.30319.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\nRegAsm : warning RA0000 : Registering an unsigned assembly with /codebase can ca\nuse your assembly to interfere with other applications that may be installed on\nthe same computer. The /codebase switch is intended to be used only with signed\nassemblies. Please give your assembly a strong name and re-register it.\nTypes registered successfully\n</code></pre>\n\n<p>And finally, the perl script:</p>\n\n<pre><code>use Win32::OLE;\n$ex = Win32::OLE-&gt;new('ExampleCom.ComClass') or die \"oops\\n\";\nprint $ex;\n</code></pre>\n\n<p>Unfortunately, every time I run the Perl script I get the output \"Oops\", so it isn't callable. However, I can successfully instantiate the \"Excel.Application\" object. I have set the settings \"Register for COM interop\" and \"Make assembly COM-Visible\" in the Visual Studio project settings and as mentioned above I have separately used RegAsm to try and register the dll.</p>\n\n<p>Does anyone have experience here they can share, point me in the right direction or advise me of where I'm going wrong please?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "list"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430692549, "post_id": 30019569, "comment_id": 48157706, "body": "For the sake of all that is holy, please don&#39;t naively sum numbers if you are going to do Stats. See <a href=\"http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance\" rel=\"nofollow noreferrer\">Algorithms for calculating variance</a>, especially this <a href=\"http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Example\" rel=\"nofollow noreferrer\">example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1430689764, "post_id": 30019629, "comment_id": 48156951, "body": "Assume you would have a cross sum where you want to sum @x and @y where step is <code>$sum += $x[$i] * $y[$i]</code>. Which of these options is suitable for that? Something like <code>sum map $_[0] * $_[1], @x @y;</code> which however does not make sense to me."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 2, "creation_date": 1430690868, "post_id": 30019629, "comment_id": 48157253, "body": "I would probably write <code>sum map { $x[$_] * $y[$_] } 0 .. $#x</code>. Or <code>List::MoreUtils</code> has a <code>pairwise</code> function that let&#39;s you write <code>sum pairwise { $a * $b } @x, @y</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1430688595, "creation_date": 1430688595, "answer_id": 30019629, "question_id": 30019569, "link": "https://stackoverflow.com/questions/30019569/sum-squares-by-lists-in-perl/30019629#30019629", "title": "Sum Squares by lists in Perl", "body": "<p>Your second chunk of code isn't written as a subroutine so there is no <code>@_</code> array to use and <code>my @x = @{ $_[0] }</code> won't work. It also differs from the first chunk because it is expecting a <em>reference</em> to an array of values, whereas the first subroutine just takes a list of values as parameters. </p>\n\n<p>The main problem is that you are writing</p>\n\n<pre><code>my $Sxx = sum( @x * @x );\n</code></pre>\n\n<p>which squares the <em>size</em> of the array. What you need is</p>\n\n<pre><code>my $sum_xx = sum map $_ * $_, @x;\n</code></pre>\n\n<p>or, if you prefer</p>\n\n<pre><code>my $sum_xx = sum map { $_ * $_ } @x;\n</code></pre>\n\n<p>which is just different syntax for the same construct</p>\n"}], "owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "accepted_answer_id": 30019629, "answer_count": 1, "score": 1, "last_activity_date": 1430688595, "creation_date": 1430688107, "question_id": 30019569, "link": "https://stackoverflow.com/questions/30019569/sum-squares-by-lists-in-perl", "title": "Sum Squares by lists in Perl", "body": "<p>Code </p>\n\n<pre><code>sub sqrsumfunc {\n    my $sum; $sum += ($_) * ($_) for @_; $sum;\n}\n</code></pre>\n\n<p>which I tried to substitute by element-wise multiplication and its summing</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util qw(sum);\nmy @x = @{ $_[0] };\nmy $Sxx = sum( @x * @x );\n</code></pre>\n\n<p>but there are much deviation from the actual result. </p>\n\n<p><strong>How can you replace the first function with Perl standard functions?</strong></p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 98839, "user_id": 3848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W10YY.jpg?s=128&g=1", "display_name": "Motti", "link": "https://stackoverflow.com/users/3848/motti"}, "edited": false, "score": 3, "creation_date": 1430681749, "post_id": 30018380, "comment_id": 48154318, "body": "You should <code>use strict;</code>"}, {"owner": {"reputation": 21, "user_id": 3118860, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120112288/picture?type=large", "display_name": "ce.arifemre", "link": "https://stackoverflow.com/users/3118860/ce-arifemre"}, "edited": false, "score": 0, "creation_date": 1430723151, "post_id": 30018380, "comment_id": 48165882, "body": "Yes i used to. But it&#39;s just a mistake what i can&#39;t see. My fault. Sorry guys."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3118860, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120112288/picture?type=large", "display_name": "ce.arifemre", "link": "https://stackoverflow.com/users/3118860/ce-arifemre"}, "edited": false, "score": 0, "creation_date": 1430682296, "post_id": 30018453, "comment_id": 48154475, "body": "What a silly mistake :) Thank you for your help I was stuck there."}], "tags": [], "owner": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "is_accepted": true, "score": 2, "last_activity_date": 1430681645, "creation_date": 1430681645, "answer_id": 30018453, "question_id": 30018380, "link": "https://stackoverflow.com/questions/30018380/plus-in-two-dimensional-array-in-perl/30018453#30018453", "title": "Plus in two dimensional array in perl", "body": "<p>you forgot two <code>$</code>'s:</p>\n\n<pre><code>print \"$table1[$k][$l] \";\n</code></pre>\n\n<p>Standard recommendation here: </p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>at the beginning of your script, and perl itself tells you about this mistake...</p>\n"}], "owner": {"reputation": 21, "user_id": 3118860, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1120112288/picture?type=large", "display_name": "ce.arifemre", "link": "https://stackoverflow.com/users/3118860/ce-arifemre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 30018453, "answer_count": 1, "score": 0, "last_activity_date": 1430681645, "creation_date": 1430681222, "question_id": 30018380, "link": "https://stackoverflow.com/questions/30018380/plus-in-two-dimensional-array-in-perl", "title": "Plus in two dimensional array in perl", "body": "<p>I have a code like that</p>\n\n<pre><code>my @table1 = ([0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]);\n\n$table1[0][1] = $table1[0][1] + 1;\n\nfor(my $k=0;$k&lt;4;$k++){\n    for(my $l=0;$l&lt;6;$l++){\n        print \"$table1[k][l] \";\n    }\n    print \"\\n\";\n}     \n</code></pre>\n\n<p>But i can't a true response from the writing section. It turns all \"0\".</p>\n\n<p>How can i fix that? Thanks for your helping.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 378392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe68f5398a3f4cb9b22a94e5c9d7af84?s=128&d=identicon&r=PG", "display_name": "Sean O&#39;Leary", "link": "https://stackoverflow.com/users/378392/sean-oleary"}, "edited": false, "score": 1, "creation_date": 1430683656, "post_id": 30018621, "comment_id": 48154962, "body": "Do you mean <code>BEGIN { My::Pack-&gt;import(qw(pack_func)) }</code>?"}, {"owner": {"reputation": 304, "user_id": 378392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe68f5398a3f4cb9b22a94e5c9d7af84?s=128&d=identicon&r=PG", "display_name": "Sean O&#39;Leary", "link": "https://stackoverflow.com/users/378392/sean-oleary"}, "edited": false, "score": 0, "creation_date": 1430683758, "post_id": 30018621, "comment_id": 48155000, "body": "I had completely forgotten that Exporter et al run an import() sub that uses caller to figure out who wants the symbol in their namespace.  Thank you!"}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1430686331, "last_edit_date": 1430686331, "creation_date": 1430682570, "answer_id": 30018621, "question_id": 30018194, "link": "https://stackoverflow.com/questions/30018194/perl-package-defined-in-script-file-how-to-have-package-export-subroutines/30018621#30018621", "title": "Perl package defined in script file, how to have package export subroutines?", "body": "<p>The statement:</p>\n\n<pre><code>use Some::Module qw(foo bar);\n</code></pre>\n\n<p>is <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow\">exactly equivalent to</a>:</p>\n\n<pre><code>BEGIN {\n    require Some::Module;\n    Some::Module-&gt;import( qw(foo bar) );\n}\n</code></pre>\n\n<p>in your case, the code for the <code>My::Pack</code> module has already been loaded, so you don't need to <code>require</code> it.  Thus, you can just do:</p>\n\n<pre><code>BEGIN { My::Pack-&gt;import( qw(pack_func) ) }\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 378392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe68f5398a3f4cb9b22a94e5c9d7af84?s=128&d=identicon&r=PG", "display_name": "Sean O&#39;Leary", "link": "https://stackoverflow.com/users/378392/sean-oleary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 30018621, "answer_count": 1, "score": 1, "last_activity_date": 1430686331, "creation_date": 1430680199, "last_edit_date": 1430682305, "question_id": 30018194, "link": "https://stackoverflow.com/questions/30018194/perl-package-defined-in-script-file-how-to-have-package-export-subroutines", "title": "Perl package defined in script file, how to have package export subroutines?", "body": "<p>Given the following:</p>\n\n<pre><code>package My::Pack;\n\nuse Exporter::Easy (\n    OK =&gt; [ qw(pack_func) ],\n);\n\nsub pack_func {\n    ...\n}\n\npackage main;\n&lt;script here that uses pack_func&gt;\n</code></pre>\n\n<p>How do I import the symbol I want?</p>\n\n<p><code>use</code> doesn't work since it's looking for another file to open.\n<code>require</code> doesn't support the syntax that <code>use</code> does for specifying the symbols you want.</p>\n\n<p>Are my only choices to say <code>My::Pac::pack_func()</code> in the script or import the symbol manually through typeglob assignmnet?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "edited": false, "score": 0, "creation_date": 1430676411, "post_id": 30017404, "comment_id": 48152250, "body": "Modules import subs into other &quot;namespaces&quot; so they can be called by their declared name rather than <i>fully qualified</i>. So instead of trying to selectively import subs, refer to them by their full name. (Your snippet: <code>test::sub1()</code>, <code>test::sub2()</code>, etc.)."}, {"owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "edited": false, "score": 0, "creation_date": 1430676602, "post_id": 30017404, "comment_id": 48152323, "body": "Also, <code>@EXPORT</code> exports all by default. So all subs are already at the underlying <code>pl</code> file&#39;s exposal. You can selectively <i>import</i> when the subs are in <code>@EXPORT_OK</code>."}, {"owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "reply_to_user": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "edited": false, "score": 0, "creation_date": 1430676622, "post_id": 30017404, "comment_id": 48152328, "body": "@LinusKleen: If I use this full name, then load into the memory only the used functions?"}, {"owner": {"reputation": 31148, "user_id": 255756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d5f5a95c73b1c3c353c27a8e90e6158?s=128&d=identicon&r=PG", "display_name": "Linus Kleen", "link": "https://stackoverflow.com/users/255756/linus-kleen"}, "edited": false, "score": 2, "creation_date": 1430676727, "post_id": 30017404, "comment_id": 48152360, "body": "No. You can <code>use</code> the module, then refer to its subs fully qualified. Exporting them only saves you from referring to the subs by their &quot;full name&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 3, "creation_date": 1430682185, "post_id": 30018110, "comment_id": 48154450, "body": "This is all good advice, but I don&#39;t think it actually answers the OP&#39;s question. See my answer for what I believe is the actual issue the OP is facing."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1430679714, "creation_date": 1430679714, "answer_id": 30018110, "question_id": 30017404, "link": "https://stackoverflow.com/questions/30017404/perl-use-qw-or-import-subroutines-from-pm-files/30018110#30018110", "title": "Perl `use qw` or import subroutines from pm files", "body": "<p>First of all, all Perl globals should use capital letters, so the name of your package should begin with capital letter, and the name of the file should be altered to agree</p>\n\n<p>Secondly, there is much less overhead if, instead of <em>inheriting</em> from <code>Exporter</code>, you load its <code>import</code> method directly</p>\n\n<p>I don't understand what sort of thing <code>err1</code> and <code>err2</code> are, but should put <em>optional</em> exports in the array <code>@EXPORT_OK</code></p>\n\n<p>That leaves your module looking like this</p>\n\n<p><strong>Test.pm</strong></p>\n\n<pre><code>package Test;\n\nuse strict;\nuse warnings;\n\nuse Exporter 'import';\n\nour @EXPORT_OK = qw/ sub1 sub2 /;\n\nsub sub1 {\n  print \"sub1\\n\";\n}\n\nsub sub2 {\n  print \"sub2\\n\";\n}\n</code></pre>\n\n<p>and a program that uses it would look like this</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Test qw/ sub1 /;\n\nsub1;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>sub1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "edited": false, "score": 0, "creation_date": 1430727264, "post_id": 30018530, "comment_id": 48168007, "body": "Thanks your answer. And the next question is how can I save memory and compiling time with perl modules and <code>use</code>? It is possible at all?"}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "edited": false, "score": 0, "creation_date": 1430734193, "post_id": 30018530, "comment_id": 48171579, "body": "That might a subject for a separate question, but just to start with, see the <a href=\"http://perldoc.perl.org/AutoLoader.html\" rel=\"nofollow noreferrer\">AutoLoader</a> and <a href=\"http://perldoc.perl.org/SelfLoader.html\" rel=\"nofollow noreferrer\">SelfLoader</a> modules, and the <a href=\"http://perldoc.perl.org/perlsub.html#Autoloading\" rel=\"nofollow noreferrer\">&quot;Autoloading&quot; section in perlsub</a>."}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": true, "score": 8, "last_activity_date": 1430682082, "creation_date": 1430682082, "answer_id": 30018530, "question_id": 30017404, "link": "https://stackoverflow.com/questions/30017404/perl-use-qw-or-import-subroutines-from-pm-files/30018530#30018530", "title": "Perl `use qw` or import subroutines from pm files", "body": "<p>The reason your code:</p>\n\n<pre><code>my @subs = ('sub1', 'sub2');\nuse test @subs;\n</code></pre>\n\n<p>doesn't work is that <a href=\"http://perldoc.perl.org/functions/use.html\"><code>use</code></a> statements are evaluated immediately during parsing, before (almost) any other code.  Thus, the second line of your code actually runs <em>before</em> the first one, and so <code>@subs</code> is still empty at that point.</p>\n\n<p>This <em>would</em> work:</p>\n\n<pre><code>my @subs;\nBEGIN { @subs = ('sub1', 'sub2'); }\nuse test @subs;\n</code></pre>\n\n<p>as would this:</p>\n\n<pre><code>BEGIN {\n    my @subs = ('sub1', 'sub2');\n    require test;\n    test-&gt;import(@subs);\n}\n</code></pre>\n\n<p>In the former version, the <code>BEGIN</code> block is used to make the assignment to <code>@subs</code> happen already during parsing; in the second version, the entire code is put inside a <code>BEGIN</code> block, and the <code>use</code> statement is replaced with its run-time equivalent (<code>require</code> + <code>import</code>).</p>\n\n<hr>\n\n<p>However, you probably don't have any reason to do this in the first place.  When you load a module, <em>all</em> of its code is loaded anyway,<sup>*</sup> so you don't actually save any memory by just importing some of the functions the module provides.  In fact, just about the only real reason not to import everything a module provides is to avoid conflicts between modules that might be trying to export functions with the same name, or with your own function.</p>\n\n<p>In any case, it's always<sup>*</sup> possible to call functions in a module without importing them at all, just by prefixing them with the module name and <code>::</code>.  So, instead of:</p>\n\n<pre><code>use test qw(foo bar);\nfoo();\nbar();\n</code></pre>\n\n<p>you can just do:</p>\n\n<pre><code>use test ();\ntest::foo();\ntest::bar();\n</code></pre>\n\n<hr>\n\n<p><sup>*) Technically, there are few things that are <em>guaranteed</em> in Perl, and it's quite possible for a module to implement some kind of a lazy-loading mechanism that only creates functions (or loads them from another module) when you import them.  But that requires a custom <code>import</code> (and/or <code>AUTOLOAD</code>) method; for ordinary modules using <a href=\"http://perldoc.perl.org/Exporter.html\">Exporter</a>, the simplified description above is true.</sup></p>\n"}], "owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1942, "favorite_count": 0, "accepted_answer_id": 30018530, "answer_count": 2, "score": 2, "last_activity_date": 1537360929, "creation_date": 1430676001, "last_edit_date": 1537360929, "question_id": 30017404, "link": "https://stackoverflow.com/questions/30017404/perl-use-qw-or-import-subroutines-from-pm-files", "title": "Perl `use qw` or import subroutines from pm files", "body": "<p>I have a perl module <code>.pm</code> file what containts my subroutines and it looks like this:</p>\n\n<pre><code>package test;\nuse strict;\nuse vars qw($VERSION @ISA @EXPORT $ERROR $NAME);\nrequire Exporter;\n@ISA  = qw(Exporter);\n@EXPORT = (\n    sub1\n    sub2\n    err1\n    err2\n);\n#...etc...\n</code></pre>\n\n<p>Now I have a <code>pl</code> file, what need to import subroutines, but not every one, only if they are in the configured list. For example:</p>\n\n<pre><code>@subs = ('sub1', 'sub2'); # need to load sub1 &amp; sub2, but do not load err1 &amp; err2\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@subs = ('sub1', 'err1'); # need to load sub1 &amp; err1, but do not load sub2 &amp; err2\n</code></pre>\n\n<p>How can I do this?</p>\n\n<p>I tried to do this, but not working:</p>\n\n<pre><code>my @subs = ('sub1', 'sub2');\nuse test @subs;\n</code></pre>\n\n<p>Is there any way to load only the needed functions? And what is needed is read from SQL or config file or any other way...</p>\n"}, {"tags": ["perl", "thread-safety", "timeout"], "answers": [{"tags": [], "owner": {"reputation": 862, "user_id": 1155333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dcec13071dd7747b48798a80a6fa59b?s=128&d=identicon&r=PG", "display_name": "Cornel Ghiban", "link": "https://stackoverflow.com/users/1155333/cornel-ghiban"}, "is_accepted": false, "score": 1, "last_activity_date": 1430673294, "creation_date": 1430673294, "answer_id": 30016878, "question_id": 30016510, "link": "https://stackoverflow.com/questions/30016510/threadsafe-function-timeouts-in-perl/30016878#30016878", "title": "Threadsafe function timeouts in Perl?", "body": "<p>You could use alarms to set a timeout. Read about them <a href=\"http://perldoc.perl.org/perlipc.html\" rel=\"nofollow\">perlpic</a> manual and <a href=\"http://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow\">alarm</a>.</p>\n\n<p>As long you set the signal/alarm inside the thread, you should be fine.</p>\n"}], "owner": {"reputation": 179, "user_id": 1294591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6e74b3f0849c232f5c6287c546175fd?s=128&d=identicon&r=PG", "display_name": "reedog117", "link": "https://stackoverflow.com/users/1294591/reedog117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430673294, "creation_date": 1430671516, "question_id": 30016510, "link": "https://stackoverflow.com/questions/30016510/threadsafe-function-timeouts-in-perl", "title": "Threadsafe function timeouts in Perl?", "body": "<p>I have found multiple posts in Stack Overflow about implementing timeouts in Perl. However, I have not seen any information on whether any of the suggested methods are threadsafe. </p>\n\n<p>I have a custom Perl application with multiple threads that each run a particular function. I would like to create a timeout such that if the function running within each thread does not complete within a certain amount of time, execution of that function stops in that particular thread and I run some cleanup code.</p>\n\n<p>A potential workaround could be to run these multiple threads as separate Perl script instances instead to avoid using threads completely, but that would require some major rewriting of my code.</p>\n\n<p>What would be the best way to implement this timeout functionality in a threadsafe manner?</p>\n"}, {"tags": ["html", "css", "perl", "cgi"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1430834361, "post_id": 30016329, "comment_id": 48224722, "body": "Please tell me that there isn&#39;t really a charity that is running on code like this?"}, {"owner": {"reputation": 5, "user_id": 4820935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7eSMaqm7qWs/AAAAAAAAAAI/AAAAAAAAAQ4/8WqGgR5q9FM/photo.jpg?sz=128", "display_name": "iEddiez", "link": "https://stackoverflow.com/users/4820935/ieddiez"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1431015031, "post_id": 30016329, "comment_id": 48324007, "body": "No its not, this is for a personal project.. dont worry"}], "answers": [{"comments": [{"owner": {"reputation": 4866, "user_id": 1783062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b434481331d26b3bd667c1a18448c87f?s=128&d=identicon&r=PG", "display_name": "Bruno C&#233;sar", "link": "https://stackoverflow.com/users/1783062/bruno-c%c3%a9sar"}, "edited": false, "score": 0, "creation_date": 1430671965, "post_id": 30016479, "comment_id": 48150652, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference. Link-only answers can become invalid if the linked page changes. See <a href=\"http://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3963634"}, "is_accepted": false, "score": 1, "last_activity_date": 1430671347, "creation_date": 1430671347, "answer_id": 30016479, "question_id": 30016329, "link": "https://stackoverflow.com/questions/30016329/perl-is-loading-as-plain-text-in-browser/30016479#30016479", "title": "Perl is loading as plain text in browser", "body": "<p><a href=\"http://editrocket.com/articles/perl_apache_windows.html\" rel=\"nofollow\">AddHandler</a>\nYou need to make sure the web server is configured to execute the code correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 4820935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7eSMaqm7qWs/AAAAAAAAAAI/AAAAAAAAAQ4/8WqGgR5q9FM/photo.jpg?sz=128", "display_name": "iEddiez", "link": "https://stackoverflow.com/users/4820935/ieddiez"}, "is_accepted": false, "score": -3, "last_activity_date": 1430672054, "creation_date": 1430672054, "answer_id": 30016624, "question_id": 30016329, "link": "https://stackoverflow.com/questions/30016329/perl-is-loading-as-plain-text-in-browser/30016624#30016624", "title": "Perl is loading as plain text in browser", "body": "<p>Fixed, Resorting back to PRINT on every line.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 0, "last_activity_date": 1430925062, "creation_date": 1430925062, "answer_id": 30080733, "question_id": 30016329, "link": "https://stackoverflow.com/questions/30016329/perl-is-loading-as-plain-text-in-browser/30080733#30080733", "title": "Perl is loading as plain text in browser", "body": "<p>Your error is here:</p>\n\n<pre><code>Content-type: text/html\n&lt;html&gt;\n</code></pre>\n\n<p>You need an extra line after the <code>Content-Type</code>. </p>\n"}], "owner": {"reputation": 5, "user_id": 4820935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7eSMaqm7qWs/AAAAAAAAAAI/AAAAAAAAAQ4/8WqGgR5q9FM/photo.jpg?sz=128", "display_name": "iEddiez", "link": "https://stackoverflow.com/users/4820935/ieddiez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 30080733, "answer_count": 3, "score": -1, "last_activity_date": 1430925062, "creation_date": 1430670601, "last_edit_date": 1430675617, "question_id": 30016329, "link": "https://stackoverflow.com/questions/30016329/perl-is-loading-as-plain-text-in-browser", "title": "Perl is loading as plain text in browser", "body": "<p>So, this was working fine two minutes ago and for some reason It has now stopped working.</p>\n\n<pre><code>#!/usr/bin/perl\n# Dan Edwards\n\n\nopen (FILE, \"donations.txt\") || &amp;ErrorMessage;\n@filemessages = &lt;FILE&gt;;\nclose (FILE);\n\nprint &lt;&lt;EndHTML;\n\n\nContent-type: text/html\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Teenage Cancer Research Charity Donations&lt;/title&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"sponsor.css\\\"&gt;\n\n\n&lt;/head&gt;\\\n&lt;body &gt;\n&lt;div id=\"container\"&gt;\n\n        &lt;div id=\"header\"&gt;\n            &lt;h1&gt;&lt;center&gt;Teenage Cancer Research&lt;/center&gt;&lt;/h1&gt;\n        &lt;/div&gt;\n\n\n  &lt;div id=\"nav\"&gt;\n\n  &lt;/div&gt;\n\n\n\n  &lt;div id=\"aside\"&gt;\n\n  &lt;/div&gt;\n\n        &lt;div id=\"welcome\"&gt;\n            &lt;h1&gt;Welcome to the Teenage Cancer Research Donations Page&lt;h1&gt;\n\n\n\n\n        &lt;/div&gt;\n\n\n\n\n\n\n&lt;div id=\"donationsTable\"&gt;\nEndHTML\n\n$n=0;\nprint \"&lt;UL&gt;&lt;H2&gt;Below are the Current Donations&lt;/H2&gt;&lt;/UL&gt;\";\nforeach $message (@filemessages) {\n    print \"&lt;LI&gt;&lt;I&gt;$message&lt;/I&gt;\\n\"; \n    $n++;\n}\n\nprint&lt;&lt;EndHTML;\n&lt;br&gt;\n&lt;br&gt;\n\n&lt;h1&gt;Please dig deep and give whatever you can!&lt;/h1&gt;\n&lt;br&gt;\n&lt;a href=\"donate.html\" class=\"button\"/&gt;SPONSOR ME!&lt;/a&gt;\n\n&lt;/div&gt;\n\n\n\n\n&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;div id=\"totalTable\"&gt;\n&lt;table class=\"center\" border=\"1\"&gt;\n&lt;tr&gt;&lt;th&gt;Total Donated Online&lt;/th&gt;\n&lt;td&gt;\u00a3&lt;/td&gt;\n&lt;th&gt;Gift Aid Plus Supplement&lt;/th&gt;\n&lt;td&gt;\u00a3&lt;/td&gt;\n&lt;/tr&gt;\n\n\n\n&lt;/table&gt;\n&lt;/div&gt;\n\n  &lt;div id=\"footer\"&gt;\nCopyright \u00a9 Teenage Cancer Research\n&lt;/div&gt;\n  &lt;/div&gt;\n\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n\nEndHTML\n</code></pre>\n\n<p>It finds the file and opens the page, but it loads as plain text. I am totally stuck and have no idea what to do.</p>\n\n<p>I am a complete Perl novice and I dont have a clue why its not working</p>\n"}, {"tags": ["mysql", "perl", "catalyst"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "edited": false, "score": 0, "creation_date": 1430908897, "post_id": 30063524, "comment_id": 48262200, "body": "Thanks for the reply. That the has_many relationship to itself may be the problem is what I thougt too. The loader didn&#39;t show errors, when it attempted to overwrite the original schmema, so my guess was, that the programmer didn&#39;t edit the generated code (if he had, the checksum check would have failed?!). I thought, that regenerating is the way to go for updates rather than editing. Source control isn&#39;t attached (yet). For updating the schema I try now to get familiar with the DBIx::Class::DeploymentHandler, as it seems that I have to go deeper anyway."}, {"owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "reply_to_user": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "edited": false, "score": 0, "creation_date": 1430920896, "post_id": 30063524, "comment_id": 48271379, "body": "Check your code base into source control before you make any (more) changes."}], "tags": [], "owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "is_accepted": false, "score": 1, "last_activity_date": 1430861291, "creation_date": 1430861291, "answer_id": 30063524, "question_id": 30014784, "link": "https://stackoverflow.com/questions/30014784/perl-dbixclassschemaloader-suffixes-2-to-duplicate-relationship-name/30063524#30063524", "title": "Perl / DBIx::Class::Schema::Loader suffixes _2 to duplicate relationship name", "body": "<p>I'm going to suggest that the second line in this is your problem:</p>\n\n<pre><code>company_user belongs_to company (foreign key) \ncompany_user has_many company_user (\"last_changed_by_user\") \ncompany_user has_many company (secondary relationship via \"last_changed_by_user\")\n</code></pre>\n\n<p>Your user table has a foereign key relatioship to itself, so since its <code>has_many</code> realtionship with itself is called <code>company</code>, the <code>belongs_to</code> realtionship is named <code>company_2</code>.</p>\n\n<p>My guess is that the previous version did something similar, but the programmer edited the generated files to change <code>company_2</code> to something other name.</p>\n\n<p>I will guess that the broken code is complaining of a missing relationship.  That will be the name you need to use.</p>\n\n<p>But why are you regenerating the DBIC stuff instead of juts editing it? \nDidn't it get committed to source control?</p>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "is_accepted": true, "score": 0, "last_activity_date": 1550146005, "last_edit_date": 1550146005, "creation_date": 1550131909, "answer_id": 54685773, "question_id": 30014784, "link": "https://stackoverflow.com/questions/30014784/perl-dbixclassschemaloader-suffixes-2-to-duplicate-relationship-name/54685773#54685773", "title": "Perl / DBIx::Class::Schema::Loader suffixes _2 to duplicate relationship name", "body": "<p>I fixed the naming problem by remapping the wrong names in the generator script call via <code>rel_name_map</code>. There are just two problematic joins, so the effort is sufficient for me. I know that this is no general solution, but maybe it helps someone.</p>\n\n<p>I used <code>rel_name_map</code> like so:</p>\n\n\n\n<pre><code>dev:~# script/prj_create.pl \n       model PrjDB DBIC::Schema \n       prj::Schema::PrjDB \n       create=static \n       preserve_case=1 \n       moniker_map='sub {return $_[0];}' \n       rel_name_map=\"{company_2 =&gt; \\\"company\\\", user_2 =&gt; \\\"user\\\"}\"\n       col_accessor_map='sub {return $_[0];}' \n       inflect_plural='sub {return $_[0];}' \n       inflect_singular='sub {return $_[0];}' \n       exclude='^view_' \n       components=TimeStamp,PassphraseColumn,DynamicDefault \n       use_moose=1 \n       dbi:mysql:prj root ********\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 1792103, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/56805e4f85c6205c017347c95b4f85c0?s=128&d=identicon&r=PG", "display_name": "deR_Ed", "link": "https://stackoverflow.com/users/1792103/der-ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 54685773, "answer_count": 2, "score": 1, "last_activity_date": 1550146005, "creation_date": 1430662288, "last_edit_date": 1430831741, "question_id": 30014784, "link": "https://stackoverflow.com/questions/30014784/perl-dbixclassschemaloader-suffixes-2-to-duplicate-relationship-name", "title": "Perl / DBIx::Class::Schema::Loader suffixes _2 to duplicate relationship name", "body": "<p>I'm pretty new to Perl and got this Catalyst project to maintain. There is a MySQL database, that is connected via DBIx and I need to do some changes. In the documentation of the project I found, how the model is created:</p>\n\n<pre><code>dev:~# script/prj_create.pl \nmodel PrjDB DBIC::Schema \nprj::Schema::PrjDB \ncreate=static \npreserve_case=1 \nmoniker_map='sub {return $_[0];}' \ncol_accessor_map='sub {return $_[0];}' \ninflect_plural='sub {return $_[0];}' \ninflect_singular='sub {return $_[0];}' \nexclude='^view_' \ncomponents=TimeStamp,PassphraseColumn,DynamicDefault \nuse_moose=1 \ndbi:mysql:prj root ********\n</code></pre>\n\n<p>In the database there are relationships like</p>\n\n<pre><code>company_user belongs_to company (foreign key)\ncompany_user has_many company_user (\"last_changed_by_user\")\ncompany_user has_many company (secondary relationship via \"last_changed_by_user\")\n</code></pre>\n\n<p>The original model that I got has following lines created in \"company_user.pm\":</p>\n\n<pre><code>__PACKAGE__-&gt;has_many(\n  \"company\",\n  \"prj::Schema::PrjDB::Result::company\",\n  { \"foreign.last_changed_by\" =&gt; \"self.id\" },\n  { cascade_copy =&gt; 0, cascade_delete =&gt; 0 },\n);\n\n__PACKAGE__-&gt;belongs_to(\n  \"company\",\n  \"prj::Schema::PrjDB::Result::company\",\n  { id =&gt; \"company\" },\n  { is_deferrable =&gt; 1, on_delete =&gt; \"CASCADE\", on_update =&gt; \"CASCADE\" },\n);\n</code></pre>\n\n<p>If I now try to recreate the model I get: </p>\n\n<pre><code>__PACKAGE__-&gt;has_many(\n  \"company\",\n  \"prj::Schema::PrjDB::Result::company\",\n  { \"foreign.last_changed_by\" =&gt; \"self.id\" },\n  { cascade_copy =&gt; 0, cascade_delete =&gt; 0 },\n);\n\n__PACKAGE__-&gt;belongs_to(\n  \"company_2\",\n  \"prj::Schema::PrjDB::Result::company\",\n  { id =&gt; \"company\" },\n  { is_deferrable =&gt; 1, on_delete =&gt; \"CASCADE\", on_update =&gt; \"CASCADE\" },\n);\n</code></pre>\n\n<p>(Notice the \"_2\" suffix in the belongs_to package.)</p>\n\n<p>With this model, all the existing code breaks as it can't find some methods anymore. I frankly don't really know, what to search for, so I hoped someone here can help me.</p>\n\n<p>Is there any option in loader, that I need to set / unset or is it maybe something that doesn't even has to do anything with the loader?</p>\n\n<hr>\n\n<p>Edit:\nThe only thing I found for a {rel}_2 notation so far is in the <a href=\"http://search.cpan.org/~ribasushi/DBIx-Class-0.082820/lib/DBIx/Class/ResultSet.pm#join\" rel=\"nofollow\">ResultSet class</a> where it says: </p>\n\n<blockquote>\n  <p>If the same join is supplied twice, it will be aliased to {rel}_2 (and similarly for a third time).</p>\n</blockquote>\n\n<p>I don't know, if this is the source of my problem and how to circumvent it.</p>\n\n<p>One thing, that i didn't had in my original question: the working model was created with a DBIx version of 2012(? I think, not documented) and I now use the newest available one.</p>\n"}, {"tags": ["perl", "optimization"], "comments": [{"owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 1, "creation_date": 1430656361, "post_id": 30018574, "comment_id": 48154484, "body": "List::Util contains sum function that do what you want"}, {"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "reply_to_user": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 0, "creation_date": 1430657151, "post_id": 30018574, "comment_id": 48154485, "body": "@cuonglm Name of such function? It is not <code>sum</code> or <code>sum0</code> here <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/List/Util.html</a>"}, {"owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "edited": false, "score": 0, "creation_date": 1430657562, "post_id": 30018574, "comment_id": 48154486, "body": "You can use both. <code>sum0</code> will return 0 instead of undef when given an empty list. <a href=\"http://perldoc.perl.org/List/Util.html#%24num_or_undef-%3d-sum-%40list\" rel=\"nofollow noreferrer\">perldoc.perl.org/List/Util.html#%24num_or_undef-%3d-sum-%40l&zwnj;&#8203;ist</a>"}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1430684006, "post_id": 30018574, "comment_id": 48155113, "body": "<code>sub sum { my $sum; $sum += $_ for @_; $sum; }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 2344631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WDYfQzrarRo/AAAAAAAAAAI/AAAAAAAADE8/dLfjG8491mE/photo.jpg?sz=128", "display_name": "roaima", "link": "https://stackoverflow.com/users/2344631/roaima"}, "is_accepted": true, "score": 4, "last_activity_date": 1430677956, "creation_date": 1430677956, "answer_id": 30018575, "question_id": 30018574, "link": "https://stackoverflow.com/questions/30018574/any-sumfunc-in-perl-by-default/30018575#30018575", "title": "Any sumfunc in Perl by default", "body": "<p>A quick search shows that a function to sum a list is <code>sum</code> and is available from the standard module <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow\">List::Util</a>.</p>\n\n<p>The documentation's <a href=\"http://perldoc.perl.org/List/Util.html#SYNOPSIS\" rel=\"nofollow\">synopsis</a> shows that it's necessary to declare the functions that will be required. For example,</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util qw(sum);\n\nmy @a = qw(1 3 5 7 9);\nmy $b = sum @a;\nprint \"b=$b.\\n\";\n</code></pre>\n\n<p>The same documentation tree allows searching that is specific to your Perl 5.18.2; the function is (still) available there.</p>\n"}, {"comments": [{"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1430733672, "post_id": 30027072, "comment_id": 48171276, "body": "This would be nice if it would be more readable and extensible to square sums and cross-sums etc."}], "tags": [], "owner": {"reputation": 139, "user_id": 4116912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6378f856c17a9b95e86ee269cef29b5a?s=128&d=identicon&r=PG&f=1", "display_name": "wurtel", "link": "https://stackoverflow.com/users/4116912/wurtel"}, "is_accepted": false, "score": 1, "last_activity_date": 1430732774, "creation_date": 1430732774, "answer_id": 30027072, "question_id": 30018574, "link": "https://stackoverflow.com/questions/30018574/any-sumfunc-in-perl-by-default/30027072#30027072", "title": "Any sumfunc in Perl by default", "body": "<p>I always try to keep the list of modules and other external dependencies as low as possible. This will also work:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @a = qw(1 3 5 7 9);\nmy $b = 0;\nmap {$b += $_} @a;\nprint \"b=$b.\\n\";\n</code></pre>\n\n<p><code>map</code> executes the block for each element of the list, setting <code>$_</code> in turn to each element.</p>\n\n<p>You could also use <code>grep</code>, the difference is that <code>map</code> returns a list of each result of the expression (i.e. (1, 4, 9, 16, 25) in this case), and <code>grep</code> returns a list of those elements for which the expression evaluates to true which in this case is (1, 3, 5, 7, 9); if there was a zero as first element in the input list it would not be returned, or if the second element was -1 it would also result in an 0-valued expression and hence not be returned. However in this case the difference is not relevant.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1430682318, "question_id": 200114}, "owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 30018575, "answer_count": 2, "score": 2, "last_activity_date": 1430732774, "creation_date": 1430655331, "question_id": 30018574, "link": "https://stackoverflow.com/questions/30018574/any-sumfunc-in-perl-by-default", "title": "Any sumfunc in Perl by default", "body": "<p>Code </p>\n\n<pre><code>sub sumfunc {\n    my (@x) = @_; my $sum = 0;\n    for(my $i=0; $i&lt;=$#x; $i++) {\n        $sum += $x[$i];\n    }\n    return $sum;\n}\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>my $Sx  = sumfunc(@x);\n</code></pre>\n\n<p><strong>How can you do sumfunc better?</strong> \nAny default function for this event in Perl 5.18.2?\nTo sum up everything in @x. \nI feel a separate function extraneous. </p>\n"}, {"tags": ["perl", "webserver", "psgi"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430650061, "post_id": 30012118, "comment_id": 48143626, "body": "Try that with Nodejs and see how many concurrent connections you can serve."}, {"owner": {"reputation": 3268, "user_id": 373710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9827ddb7c8cb132375cf55bf7e624250?s=128&d=identicon&r=PG", "display_name": "Jakob", "link": "https://stackoverflow.com/users/373710/jakob"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430673985, "post_id": 30012118, "comment_id": 48151350, "body": "@Sinan&#220;n&#252;r Thanks, I&#39;ll give Nodejs a try. Nevertheless this question is about a solution in Perl, have you any experience with this language?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430692262, "post_id": 30012118, "comment_id": 48157615, "body": "I don&#39;t think you understood what I said."}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1430704717, "post_id": 30012118, "comment_id": 48160437, "body": "Hi   Sinan &#220;n&#252;r, you&#39;re hinting at something, can you be more direct/clear?"}], "answers": [{"comments": [{"owner": {"reputation": 3268, "user_id": 373710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9827ddb7c8cb132375cf55bf7e624250?s=128&d=identicon&r=PG", "display_name": "Jakob", "link": "https://stackoverflow.com/users/373710/jakob"}, "edited": false, "score": 0, "creation_date": 1430735921, "post_id": 30021529, "comment_id": 48172603, "body": "Sorry, the <code>sleep</code> is misleading because it blocks the thread. The limit is the number of open TCP connections."}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "reply_to_user": {"reputation": 3268, "user_id": 373710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9827ddb7c8cb132375cf55bf7e624250?s=128&d=identicon&r=PG", "display_name": "Jakob", "link": "https://stackoverflow.com/users/373710/jakob"}, "edited": false, "score": 0, "creation_date": 1430872374, "post_id": 30021529, "comment_id": 48245742, "body": "Jakob, sleep didn&#39;t mislead me, while(1) is an infine loop where you increment counter and write ... you&#39;re supposed to setup a timer like in the mojo example I linked. For the most part apps don&#39;t control socket creation, but if you use websocket you can have however many your os/hardware support."}], "tags": [], "owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "is_accepted": false, "score": 1, "last_activity_date": 1430704609, "creation_date": 1430704609, "answer_id": 30021529, "question_id": 30012118, "link": "https://stackoverflow.com/questions/30012118/how-to-server-a-psgi-application-with-many-concurrent-connections/30021529#30021529", "title": "How to server a PSGI application with many concurrent connections", "body": "<p>I don't think you're supposed to have infinite loops inside apps, I think you're supposed to only setup a recurring timer, and in that timer notify/message/write... See <a href=\"https://metacpan.org/pod/Plack::App::WebSocket\" rel=\"nofollow\">Plack::App::WebSocket - WebSocket server as a PSGI application</a> and <a href=\"http://perlmonks.com/?node_id=1110901\" rel=\"nofollow\">Re^4: real-time output from Mojolicious WebSockets?</a></p>\n"}, {"tags": [], "owner": {"reputation": 1158, "user_id": 2779629, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9OCH1xMxP2c/AAAAAAAAAAI/AAAAAAAAABc/ysbFYiQdY5k/photo.jpg?sz=128", "display_name": "Peter Scott", "link": "https://stackoverflow.com/users/2779629/peter-scott"}, "is_accepted": false, "score": 0, "last_activity_date": 1474459493, "creation_date": 1474459493, "answer_id": 39616104, "question_id": 30012118, "link": "https://stackoverflow.com/questions/30012118/how-to-server-a-psgi-application-with-many-concurrent-connections/39616104#39616104", "title": "How to server a PSGI application with many concurrent connections", "body": "<p>While I have not yet tried it I came across this question whilst searching for a solution to a problem faced when using a socket server to report on progress etc of long-running jobs. Initially I was thinking of an approach along the lines of <a href=\"http://search.cpan.org/~msouth/ParallelUserAgent-2.62/lib/LWP/Parallel/UserAgent.pm\" rel=\"nofollow\">ParallelUserAgent</a> except as a server and not a client.\nReturning to the problem a few days later after realising that <a href=\"http://Net::WebSocket::Server\" rel=\"nofollow\">Net::WebSocket::Server</a> blocked new connection requests if a long-running block of code within the new connection handler callback.\nMy next approach will be split out the long running functionality to a new spawned shell process and use a DB to track the progress which can then be accessed as required within the server without lengthy blocking.</p>\n\n<p>Thought I'd throw up my approach in case it helps anyone walking a similar path.</p>\n"}], "owner": {"reputation": 3268, "user_id": 373710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9827ddb7c8cb132375cf55bf7e624250?s=128&d=identicon&r=PG", "display_name": "Jakob", "link": "https://stackoverflow.com/users/373710/jakob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1474459493, "creation_date": 1430644454, "last_edit_date": 1430735843, "question_id": 30012118, "link": "https://stackoverflow.com/questions/30012118/how-to-server-a-psgi-application-with-many-concurrent-connections", "title": "How to server a PSGI application with many concurrent connections", "body": "<p>How can a PSGI application be served with many concurrent connections? I have tried event-based and preforking webservers but the number of concurrent connections seems to be limited by the number of worker processes. I've heard that for instance Node.js scales to several thousand parallel connections, can you achieve similar in Perl?</p>\n\n<p>Here is a sample application that keeps connection open infinitely. The point is not to have infinite connections but to keep connections open long enough to hit connection limits:</p>\n\n<pre><code>my $app = sub {\n  my $env = shift;\n  return sub {\n    my $responder = shift;\n    my $writer = $responder-&gt;(['200', ['Content-Type' =&gt; 'text/plain' ]]);\n    my $counter=0;\n    while (1);   \n      $writer-&gt;write(++$counter.\"\\n\");\n      sleep 1; # or non-blocking sleep such as Coro::AnyEvent::sleep\n    }\n    $writer-&gt;close;\n  };\n};\n</code></pre>\n"}, {"tags": ["perl", "nlp", "machine-translation", "bleu"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1430658077, "post_id": 30011056, "comment_id": 48146023, "body": "The messages about smartmatch and use of uninitialized value are just warnings, although the latter occurring in IQ/Config.pm suggests that something may be missing in your config file. Beyond that, it&#39;s hard to diagnose without seeing the actual code...I would look at line 251 of IQ/Config.pm and see if the text &quot;does not exist!&quot; occurs nearby. If you can find the relevant section of code but aren&#39;t sure how to debug it, feel free to edit a snippet into your question."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1439481406, "post_id": 30011056, "comment_id": 51890457, "body": "Did you try setting the <code>ASIYA_HOME</code> environment variable like the project developer told you to on their <a href=\"http://nlp.lsi.upc.edu/redmine/boards/11/topics/138\" rel=\"nofollow noreferrer\">support forum</a>?"}], "owner": {"reputation": 93695, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1480773040, "creation_date": 1430635720, "question_id": 30011056, "link": "https://stackoverflow.com/questions/30011056/how-to-use-basic-bleu-score-in-asiya-machine-translation-evaluation-toolkit", "title": "How to use basic BLEU score in Asiya Machine Translation Evaluation toolkit?", "body": "<p>Asiya is the machine translation evaluation toolkit to score machine translation outputs (<a href=\"http://asiya.lsi.upc.edu/\" rel=\"nofollow\">http://asiya.lsi.upc.edu/</a>). It is largely written in Perl.</p>\n\n<p><strong>How do I use Asiya to perform BLEU metrics?</strong></p>\n\n<p>I have followed the youtube introduction video: <a href=\"https://www.youtube.com/watch?v=rA5De9Z4uWI\" rel=\"nofollow\">https://www.youtube.com/watch?v=rA5De9Z4uWI</a></p>\n\n<p>And created a config file (Asiya.config):</p>\n\n<pre><code>input=raw\nsrclang=en\nsrccase=en\ntrglang=ja\ntrgcase=ja\n\nsrc=corpus.tok/test.tok.en\nref=corpus.tok/hyp.tok.ja\nsys=corpus.tok/test.tok.ja\n\nsome_metrics= BLEU NIST METEOR-ex Ol\n</code></pre>\n\n<p>My machine translation output file is in <code>corpus.tok/hyp.tok.ja</code>, the source file is in <code>corpus.tok/test.tok.en</code> and the reference file (correct translation) is at <code>corpus.tok/test.tok.ja</code>. They are tokenized plain text files, each line is a sentence.</p>\n\n<p>And when I ran:</p>\n\n<pre><code>/home/expert/asiya/bin/Asiya.pl -eval single -g all -metric_set some_metrics Asiya.config\n</code></pre>\n\n<p>I got this error:</p>\n\n<pre><code>Smartmatch is experimental at /home/expert/asiya/bin/../lib/IQ/Common.pm line 784.\nSmartmatch is experimental at /home/expert/asiya/bin/../lib/IQ/Common.pm line 791.\nSmartmatch is experimental at /home/expert/asiya/bin/../lib/IQ/Scoring/ESA.pm line 339.\nUse of uninitialized value in concatenation (.) or string at /home/expert/asiya/bin/../lib/IQ/Config.pm line 251.\n[ASIYA] directory &lt;/tools&gt; does not exist!\n</code></pre>\n\n<p>The tools directory does exists as a subdirectory in the current directory that I ran the command. <strong>What went wrong? Is there a parameter that I could add for the Asiya tools directory?</strong></p>\n\n<p>How do I use Asiya to perform BLEU evaluation?</p>\n\n<p><strong>If I don't use Asiya, how else can I get the BLEU score per sentence and system BLEU scores for my machine translation output?</strong></p>\n\n<p>(more details on <a href=\"http://nlp.lsi.upc.edu/redmine/boards/11/topics/138\" rel=\"nofollow\">http://nlp.lsi.upc.edu/redmine/boards/11/topics/138</a>)</p>\n"}, {"tags": ["perl", "logging"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1430612685, "post_id": 30007403, "comment_id": 48136203, "body": "Log::Log4perl&#39;s <a href=\"https://www.securecoding.cert.org/confluence/plugins/servlet/mobile#content/view/76775519\" rel=\"nofollow noreferrer\">easy mode</a> is pretty simple: <code>use Log::Log4perl qw(:easy);  Log::Log4perl-&gt;easy_init($DEBUG); DEBUG(&#39;Debug this!&#39;); ERROR(&#39;Error this!&#39;);</code>"}, {"owner": {"reputation": 1033, "user_id": 77193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf82705f5ab43c73273ab5d690866b3?s=128&d=identicon&r=PG", "display_name": "Tim Bunce", "link": "https://stackoverflow.com/users/77193/tim-bunce"}, "edited": false, "score": 0, "creation_date": 1431262636, "post_id": 30007403, "comment_id": 48410639, "body": "&quot;logging messages from multiple processes to a common local log file&quot; if each process simply appends to the log file then you&#39;re likely to get a corrupted logfile (intermixed writes) if the writes are larger than a certain size (<a href=\"http://stackoverflow.com/questions/1154446/is-file-append-atomic-in-unix\">PIPE_BUF, typically 4096 bytes</a>). To workaround that you&#39;d need to use locking or send the logs to a separate process such as rsyslogd to offload and serialize the writes."}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 3, "last_activity_date": 1430603977, "creation_date": 1430603977, "answer_id": 30007946, "question_id": 30007403, "link": "https://stackoverflow.com/questions/30007403/looking-for-a-log4perl-alternative-for-concurrent-logging-from-multiple-processe/30007946#30007946", "title": "Looking for a Log4perl alternative for concurrent logging from multiple processes", "body": "<p><a href=\"https://metacpan.org/pod/Log::Any\" rel=\"nofollow\">Log::Any</a> with <a href=\"https://metacpan.org/pod/Log::Any::Adapter::File\" rel=\"nofollow\">Log::Any::Adapter::File</a> should do the trick.</p>\n\n<pre><code>use Log::Any::Adapter (\n    File =&gt; $ENV{ EASYLOG_PATH }\n    log_level =&gt; 'warn',\n);\n</code></pre>\n\n<p>Set this in the your application. Any modules used by your application,</p>\n\n<pre><code>use Log::Any qw( $log );\n</code></pre>\n\n<p>Later on, if you want to switch to <code>Log4perl</code>, you only need to change the <code>use Log::Any::Adapter</code> statement.</p>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 30007946, "answer_count": 1, "score": 3, "last_activity_date": 1430608162, "creation_date": 1430600267, "last_edit_date": 1430608162, "question_id": 30007403, "link": "https://stackoverflow.com/questions/30007403/looking-for-a-log4perl-alternative-for-concurrent-logging-from-multiple-processe", "title": "Looking for a Log4perl alternative for concurrent logging from multiple processes", "body": "<p>I need a logging module with a <em>simple</em> interface, for logging messages from multiple processes to a common local log file.</p>\n\n<p>Since some of these processes may be running simultaneously, the logging module must manage conflicting write requests from these process.</p>\n\n<p>I know about <code>Log::Log4perl</code>, but every time I try to use it I end up with an inordinately complex logging interface.  I'm looking for an alternative.  Any suggestions?</p>\n\n<hr>\n\n<p>I looked into <code>Log::Message</code>, which is AFAICT the only logging module included among Perl's core modules (sadly enough, IMO).  I found no indication that it handles concurrency at all.</p>\n\n<p>I also tried searching CPAN for an alternative, but just searching for 'Log::' under Modules produced over 3000 hits, in no particular order.  Even scanning this list is impractical, let alone reading the documentation for the possible candidates, and trying out those that seem promising.  (I wonder if the very difficulty of finding a reasonable logging module in CPAN is what gets people to roll their own, which they submit later to CPAN, thus adding one more item to the already unsurmountable mountain of logging modules.  IOW, we may have a case of runaway growth here.)</p>\n\n<hr>\n\n<p>I'm looking for a <em>simple</em> interface.  Ideally, all the setup (e.g. the path to the log file, log level, etc.) would be done via a globally-shared <code>~/.*rc</code>-type config file and/or environment variables.</p>\n\n<p>Here's an example of what I mean by \"a simple interface\" (though, of course, I don't expect that I'll find a module out there that offers this exact interface; and, of course also, <code>EasyLog</code> is a made-up name; if a module by that name already exists, it is a coincidence):</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# some/script.pl\n\nuse strict;\nuse EasyLog ':all';\n\n...\n\nDEBUG \"cwd: \" + Cwd::cwd();\n\n...\n\nWARN \"skipping empty line $.\";\n\n...\n\nFATAL \"timeout\";  # maybe calls exit ?\n</code></pre>\n\n<p>Then, in some file <code>$ENV{ EASYLOG_PATH }</code>, I'd see lines like</p>\n\n<pre><code>30031   1430599390  /path/to/some/script.pl 2   INFO    Starting script.pl on Sat May  2 16:43:10 2015\n30031   1430599429  /path/to/some/script.pl 19  WARN    skipping empty line 898\n30036   1430599542  /path/to/some/script.pl 2   INFO    Starting script.pl on Sat May  2 16:45:42 2015\n30031   1430599583  /path/to/some/script.pl 94  INFO    script.pl terminated normally on Sat May  2 16:46:23 2015\n30036   1430599583  /path/to/some/script.pl 32  FATAL   timeout\n</code></pre>\n"}, {"tags": ["perl", "file", "concatenation", "string-concatenation"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430596077, "post_id": 30006610, "comment_id": 48131886, "body": "It looks like <code>$bestData[$i][$j]</code> is undefined for some values of <code>$i</code> and <code>$j</code>. At a guess there are some lines in <code>BESTDATAFILEIN</code> that have less than four fields. You should dump the contents of <code>@bestData</code> using <code>Data::Dump</code> to see what you actually have."}], "answers": [{"tags": [], "owner": {"reputation": 50625, "user_id": 3549014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290cbac6da9b4ef5ac976e5d50ab637e?s=128&d=identicon&r=PG", "display_name": "Gyrocode.com", "link": "https://stackoverflow.com/users/3549014/gyrocode-com"}, "is_accepted": false, "score": 1, "last_activity_date": 1430596333, "creation_date": 1430596333, "answer_id": 30006764, "question_id": 30006610, "link": "https://stackoverflow.com/questions/30006610/cannot-locate-error-causing-perl-warning-use-of-unitialized-value-in-concatenat/30006764#30006764", "title": "Cannot locate error causing Perl warning: Use of unitialized value in concatenation (.) or string", "body": "<p>There could be a few reasons:</p>\n\n<ul>\n<li><code>ApgarMedicalBest.txt</code> contains empty fields, for example <code>1,2,,4</code></li>\n<li><code>ApgarMedicalBest.txt</code> contains lines with less than <code>4</code> fields (defined in <code>COLUMNS</code>), for example <code>1,2,4</code></li>\n</ul>\n\n<p>You could modify <code>readBestData</code> as follows to alleviate both problems:</p>\n\n<pre><code>sub readBestData {\n     my $IN;\n     my $counter = 0;\n     my @tempData = ();\n     @bestData = ();\n     open ($IN, '&lt;', BESTDATAFILEIN);\n     while (&lt;$IN&gt;) {\n          # Split string and avoid skipping empty fields\n          @tempData = split(/,/, $_, -1);\n\n          # If data contains required number of columns\n          if(scalar(@tempData) == COLUMNS){\n              for (my $i = 0; $i &lt; COLUMNS; $i++) {\n                  ($bestData[$counter][$i] = $tempData[$i]);\n              }\n          }\n          $counter++;\n     }\n     close $IN; \n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4857743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247d15fb5bb5fb0fbf30b96ba42eec76?s=128&d=identicon&r=PG&f=1", "display_name": "zz0896", "link": "https://stackoverflow.com/users/4857743/zz0896"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430609685, "creation_date": 1430595268, "last_edit_date": 1430598336, "question_id": 30006610, "link": "https://stackoverflow.com/questions/30006610/cannot-locate-error-causing-perl-warning-use-of-unitialized-value-in-concatenat", "title": "Cannot locate error causing Perl warning: Use of unitialized value in concatenation (.) or string", "body": "<p>I'm trying to program a File I/O for the first time and I don't understand why I'm getting this error in my for loop (line 22 or line 3 in sub routine printBestData). An extra pair of eyes would be greatly appreciated! Here's my code:</p>\n\n<pre><code>my (@bestData, @cushingData, @combinedData);\nuse constant BESTDATAFILEIN =&gt; \"./ApgarMedicalBest.txt\";\nuse constant CUSHINGDATAFILEIN =&gt; \"./ApgarMedicalCushing.txt\";\nuse constant DATAFILEOUT =&gt; \"./MergedApgarMedical.csv\";\nuse constant COLUMNS =&gt; 4;\nsub readBestData {\n     my $IN;\n     my $counter = 0;\n     my @tempData = ();\n     @bestData = ();\n     open ($IN, '&lt;', BESTDATAFILEIN);\n     while (&lt;$IN&gt;) {\n          @tempData = split(/,/);\n          for (my $i = 0; $i &lt; COLUMNS; $i++) {\n              ($bestData[$counter][$i] = $tempData[$i]);\n          }\n          $counter++;\n     }\n     close $IN; \n}\n\nsub printBestData {\n    my $size = @bestData;\n    for (my $i = 0; $i &lt; $size; $i++) {\n        for (my $j = 0; $j &lt; COLUMNS; $j++) {\n        #Error occurs in this line \n            print \"$bestData[$i][$j] \";\n        }\n        print \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "installation"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430570695, "post_id": 30002367, "comment_id": 48123475, "body": "Well, where is <code>PREFIX=&#47;home&#47;onlinetv&#47;perl&#47;usr</code> coming from?"}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1430571249, "post_id": 30002367, "comment_id": 48123611, "body": "@Sinan&#220;n&#252;r Where can I find this? I don&#39;t have .bashrc or bash_profile files in my home dir. And it&#39;s not shown in &quot;perl -V&quot;."}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430574271, "post_id": 30002367, "comment_id": 48124448, "body": "@Borodin There is no ~/.profile file. So, nothing is there. I tried to run <code>unset PREFIX</code>, then ran cpan shell. But the error is still there."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430576039, "post_id": 30002367, "comment_id": 48125010, "body": "Provide the output of <code>o conf</code> from with the cpan shell.  There are too says of interest.  One starts with <code>mbuild</code>. I can&#39;t remember the other but it&#39;s similar. Also provide output of <code>set | grep ^PERL</code> from your command shell"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1430576163, "post_id": 30002367, "comment_id": 48125048, "body": "SU&amp;Bo, PREFIX and INSTALL_BASE are Makefile.PL args, not env vars"}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430582288, "post_id": 30002367, "comment_id": 48127098, "body": "@ikegami I updated the question, printing the necessary lines"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430582442, "post_id": 30002367, "comment_id": 48127151, "body": "<code>make_arg</code> should be blank, but it might not be causing any problems."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1430582589, "post_id": 30002367, "comment_id": 48127206, "body": "You can see the actual problem now, right? It&#39;s picking up one setting from the env and the other from <code>cpan</code>. Get rid of the one you don&#39;t want"}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430584085, "post_id": 30002367, "comment_id": 48127704, "body": "@ikegami Should I run the command: &quot;unset PERL_LOCAL_LIB_ROOT&quot; in bash?"}, {"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430657230, "post_id": 30002367, "comment_id": 48145754, "body": "@ikegami Could you please give an answer, how to unset those variables. I ran <code>&quot;unset PERL_LOCAL_LIB_ROOT</code>, then &quot;export PERL_LOCAL_LIB_ROOT&quot;  in bash. But the error is still there."}], "answers": [{"comments": [{"owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "edited": false, "score": 0, "creation_date": 1430574128, "post_id": 30002830, "comment_id": 48124409, "body": "Unfortunately, I can&#39;t access root on that machine. Is it possible to install it locally for my user?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1430575807, "post_id": 30002830, "comment_id": 48124947, "body": "If you messed cpanm&#39;s configuration in the same way, you get the same result."}], "tags": [], "owner": {"reputation": 39, "user_id": 4773648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZzBmyH5vsCs/AAAAAAAAAAI/AAAAAAAABbY/jReCfKS7JXk/photo.jpg?sz=128", "display_name": "NeoNox NeoNox", "link": "https://stackoverflow.com/users/4773648/neonox-neonox"}, "is_accepted": false, "score": 0, "last_activity_date": 1430573135, "creation_date": 1430573135, "answer_id": 30002830, "question_id": 30002367, "link": "https://stackoverflow.com/questions/30002367/cant-install-a-perl-module-from-cpan/30002830#30002830", "title": "Can&#39;t install a Perl module from CPAN", "body": "<p>cpan is nice tool when you have many time and account for StackOverflow. Please install App::cpanminus and use cpanm instead. </p>\n\n<pre><code>curl -L https://cpanmin.us | perl - --sudo App::cpanminus\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4645538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765fd0904b2e51993af6dea418210e70?s=128&d=identicon&r=PG&f=1", "display_name": "sanug", "link": "https://stackoverflow.com/users/4645538/sanug"}, "is_accepted": false, "score": -1, "last_activity_date": 1430580705, "last_edit_date": 1430580705, "creation_date": 1430579531, "answer_id": 30003920, "question_id": 30002367, "link": "https://stackoverflow.com/questions/30002367/cant-install-a-perl-module-from-cpan/30003920#30003920", "title": "Can&#39;t install a Perl module from CPAN", "body": "<p>To address this error:</p>\n\n<p><strong>Trying to run a Perl script on Linux, I got an error: \"Can't locate Devel/GlobalDestruction.pm\u201d</strong></p>\n\n<h2>cpanm</h2>\n\n<p>I use <a href=\"http://search.cpan.org/~miyagawa/App-cpanminus-1.7033/lib/App/cpanminus.pm\" rel=\"nofollow\">cpanm</a> from Tatsuhiko Miyagawa.</p>\n\n<p>Following the personal install guidelines in that document, this next section will install <strong>cpanm</strong> into <strong>~/bin</strong>, which needs to be in your <strong>PATH</strong>.</p>\n\n<pre><code>cd ~/bin\ncurl -L https://cpanmin.us/ -o cpanm\nchmod +x cpanm\nwhich cpanm\n</code></pre>\n\n<p>Now use <strong>cpanm</strong> to install the missing library in a directory named <strong>local</strong> inside a given directory holding the original script, such as <strong>dir</strong>:</p>\n\n<pre><code>cd &lt;dir&gt;\ncpanm -L local Devel::GlobalDestruction\n</code></pre>\n\n<p>To include the package installed in that directory, </p>\n\n<ul>\n<li><p><strong>use FindBin</strong> to locate the current local directory, and </p></li>\n<li><p><strong>use lib</strong> to locate your recently installed files.</p></li>\n</ul>\n\n<p>Here is the code to add to the original script, located in <strong>dir</strong></p>\n\n<pre><code>use FindBin qw( $Bin );\nuse lib \u201c$Bin/local/lib/perl5\u201d;\n</code></pre>\n\n<p>The <strong>cpanm</strong> code recursively installs all dependencies. In my session I got these two:</p>\n\n<pre><code>cpanm -L local Devel::GlobalDestruction\n--&gt; Working on Devel::GlobalDestruction\nFetching http://www.cpan.org/authors/id/H/HA/HAARG/Devel-GlobalDestruction-0.13.tar.gz ... OK\nConfiguring Devel-GlobalDestruction-0.13 ... OK\n==&gt; Found dependencies: Sub::Exporter::Progressive\n--&gt; Working on Sub::Exporter::Progressive\nFetching http://www.cpan.org/authors/id/F/FR/FREW/Sub-Exporter-Progressive-0.001011.tar.gz ... OK\nConfiguring Sub-Exporter-Progressive-0.001011 ... OK\nBuilding and testing Sub-Exporter-Progressive-0.001011 ... OK\nSuccessfully installed Sub-Exporter-Progressive-0.001011\nBuilding and testing Devel-GlobalDestruction-0.13 ... OK\nSuccessfully installed Devel-GlobalDestruction-0.13\n2 distributions installed \n</code></pre>\n\n<hr>\n\n<h2>As a small variation of the above</h2>\n\n<p>Change the <strong>cpanm</strong> argument from upper L <strong>[-L]</strong> to lower l <strong>[-l]</strong> to see if their is a  difference in being complete, or not in the package dependency set.  </p>\n\n<p>Delete the <strong>local</strong> directory between those attempts to ensure that the packages installed are minimal.</p>\n\n<hr>\n\n<h2>A test</h2>\n\n<p>As an example use of the above, here is the modification to the 03_minusc.t test case that finds the new libraries in the directory into which I downloaded the libraries above into a directory named <strong>local</strong>: </p>\n\n<p>The link with the original test:</p>\n\n<p><a href=\"http://cpansearch.perl.org/src/HAARG/Devel-GlobalDestruction-0.13/t/03_minusc.t\" rel=\"nofollow\">http://cpansearch.perl.org/src/HAARG/Devel-GlobalDestruction-0.13/t/03_minusc.t</a></p>\n\n<p>Here is the modification to the code:</p>\n\n<pre><code>use FindBin qw( $Bin );\nuse lib \"$Bin/local/lib/perl5\";\nuse Devel::GlobalDestruction;\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>1..3\nok - Test properly running under minus-c\nok - BEGIN is not GD with -c\n./test.pl syntax OK\nok - Final cleanup object destruction properly in GD\n</code></pre>\n\n<p>After reading Sinan\u2019s post, I think my perl, used below, /opt/local/bin/perl, should be changed to the one he suggested <strong>/home/onlinetv/perl/bin/perl</strong></p>\n\n<p>Here is the test code with the modification:</p>\n\n<pre><code>#!/opt/local/bin/perl\n\nBEGIN {\n  if ($ENV{DEVEL_GLOBALDESTRUCTION_PP_TEST}) {\n    unshift @INC, sub {\n      die 'no XS' if $_[1] eq 'Devel/GlobalDestruction/XS.pm';\n    };\n  }\n}\n\n{\n  package Test::Scope::Guard;\n  sub new { my ($class, $code) = @_; bless [$code], $class; }\n  sub DESTROY { my $self = shift; $self-&gt;[0]-&gt;() }\n}\n\nsub ok ($$) {\n  print \"not \" if !$_[0];\n  print \"ok\";\n  print \" - $_[1]\" if defined $_[1];\n  print \"\\n\";\n  !!$_[0]\n}\n\nBEGIN {\n  require B;\n  B::minus_c();\n\n  print \"1..3\\n\";\n  ok( $^C, \"Test properly running under minus-c\" );\n}\n\nuse FindBin qw( $Bin );\nuse lib \"$Bin/local/lib/perl5\";\nuse Devel::GlobalDestruction;\n\nBEGIN {\n    ok !in_global_destruction(), \"BEGIN is not GD with -c\";\n}\n\nour $foo;\nBEGIN {\n  $foo = Test::Scope::Guard-&gt;new( sub {\n    ok( in_global_destruction(), \"Final cleanup object destruction properly in GD\" ) or do {\n      require POSIX;\n      POSIX::_exit(1);\n    };\n  });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1480694758, "last_edit_date": 1480694758, "creation_date": 1430718654, "answer_id": 30023361, "question_id": 30002367, "link": "https://stackoverflow.com/questions/30002367/cant-install-a-perl-module-from-cpan/30023361#30023361", "title": "Can&#39;t install a Perl module from CPAN", "body": "<p><code>cpan</code> is configured to provide one setting to <code>Makefile.PL</code>, and <code>Makefile.PL</code> is picking up a conflicting setting from the environment.</p>\n\n<p>It looks like you use local::lib, which uses the <code>INSTALL_BASE</code> paradigm. As such, simply tell <code>cpan</code> to stop specifying <code>PREFIX</code>. From within the <code>cpan</code> shell,</p>\n\n<pre><code>o conf makepl_arg ''\no conf mbuildpl_arg ''\no conf commit\n</code></pre>\n\n<p>At the same time, fix the nonsense value for <code>make_arg</code>.</p>\n\n<pre><code>o conf make_arg ''\no conf commit\n</code></pre>\n"}], "owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5559, "favorite_count": 1, "accepted_answer_id": 30023361, "answer_count": 3, "score": 0, "last_activity_date": 1480694758, "creation_date": 1430570101, "last_edit_date": 1592644375, "question_id": 30002367, "link": "https://stackoverflow.com/questions/30002367/cant-install-a-perl-module-from-cpan", "title": "Can&#39;t install a Perl module from CPAN", "body": "<p>Trying to run a Perl script on Linux, I got an error: &quot;Can't locate Devel/GlobalDestruction.pm&quot;</p>\n<p>So, I ran CPAN shell and tried to install it:</p>\n<pre><code>$ perl -MCPAN -e shell\ncpan&gt; install Devel::GlobalDestruction\n</code></pre>\n<p>But, unfortunately, got an error:</p>\n<pre><code>...\nLooks good\nWarning: prerequisite Devel::GlobalDestruction::XS 0 not found.\nWarning: prerequisite Sub::Exporter::Progressive 0.001011 not found.\nOnly one of PREFIX or INSTALL_BASE can be given.  Not both.\nNo 'Makefile' created  HAARG/Devel-GlobalDestruction-0.13.tar.gz\n  /usr/bin/perl Makefile.PL PREFIX=/home/onlinetv/perl/usr -- NOT OK\nFailed during this command:\n HAARG/Devel-GlobalDestruction-0.13.tar.gz    : writemakefile NO -- No 'Makefile' created\n</code></pre>\n<p>Probably, something is wrong here: &quot;Only one of PREFIX or INSTALL_BASE can be given.  Not both.&quot;</p>\n<p>But I don't know, how to fix it.</p>\n<h2>Update</h2>\n<p><code>&gt;o conf</code> outputs the following:</p>\n<pre><code>make_arg           [PREFIX=/home/onlinetv/perl/usr]\nmake_install_arg   []\nmake_install_make_command undef\nmakepl_arg         [PREFIX=/home/onlinetv/perl/usr]\nmbuild_install_build_command [./Build]\nmbuildpl_arg       [PREFIX=/home/onlinetv/perl/usr]\n</code></pre>\n<p>I printed only lines, related to PREFIX</p>\n<pre><code>-bash-3.2$ set | grep ^PERL\nPERL5LIB=/home/onlinetv/perl5/lib/perl5\nPERL_LOCAL_LIB_ROOT=/home/onlinetv/perl5\nPERL_MB_OPT='--install_base &quot;/home/onlinetv/perl5&quot;'\nPERL_MM_OPT=INSTALL_BASE=/home/onlinetv/perl5\n</code></pre>\n"}, {"tags": ["perl", "design-patterns", "matching"], "comments": [{"owner": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 2, "creation_date": 1430556718, "post_id": 30000248, "comment_id": 48119480, "body": "Welcome to Stack Overflow! This question is a little short on information. Can you provide your code? What have you tried so far, and what problems have you run into? Also, could yo reduce the contents of the files you posted to the portions relevant to the question?"}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "reply_to_user": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 0, "creation_date": 1430557249, "post_id": 30000248, "comment_id": 48119642, "body": "The output file which i was getting only the header portion of sequence not the sequence and header as in my File 1.Thanks"}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "reply_to_user": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 0, "creation_date": 1430557470, "post_id": 30000248, "comment_id": 48119697, "body": "Actually i want in my output file the fuul header portion associated with sequence. According to sequence id file it checks the sequence header portion and give the output file header associated with full sequence."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430560145, "post_id": 30000248, "comment_id": 48120336, "body": "Your required output looks the same as your first input file. What am I missing?"}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430570760, "post_id": 30000248, "comment_id": 48123494, "body": "absolutely correct Borodin. The final output file contain the sequences which actually match the header pattern according to my sequence id files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1430573353, "post_id": 30000248, "comment_id": 48124178, "body": "Ah, so you want to extract the blocks named in the sequence ID file?"}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430573697, "post_id": 30000248, "comment_id": 48124275, "body": "my sequence id file  i.e file 2 containing the header match the header line of sequence file i.e. file 1 and when the header match and the final output file contain the sequence along with header like the input sequence file 1"}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430576638, "post_id": 30000248, "comment_id": 48125220, "body": "I have two input file one is sequence file and another one is sequence id file contain only the header part of the main sequence file. The program is actually doing what a simple pattern matching program. The user give two input files and according to the second input file i.e. sequence id file match the header portion of sequence file and final output file contain the sequence along with header which actually match the header part of sequence id file. That is extract the sequence from 1st sequence file according the header part of sequence id file i.e. file 2."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430591787, "post_id": 30000248, "comment_id": 48130462, "body": "kindly give me the suggestion for the problem"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430570964, "post_id": 30001251, "comment_id": 48123544, "body": "Thanks wheee. My requirement is that produce a single output file which containing the sequences along with header portion that match with the header of sequence id file i.e. file 2."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430633695, "post_id": 30001251, "comment_id": 48139750, "body": "Thanks wheee i think this code is helpful for me."}, {"owner": {"reputation": 16, "user_id": 1927018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3d959ae3d90a98f38366260acd8d0e?s=128&d=identicon&r=PG", "display_name": "wheee", "link": "https://stackoverflow.com/users/1927018/wheee"}, "reply_to_user": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430640012, "post_id": 30001251, "comment_id": 48141183, "body": "Glad I could help. Oh, and can you click &#39;accept&#39; for my answer, please? Thank you."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430640277, "post_id": 30001251, "comment_id": 48141246, "body": "Wheee as per your suggestion i am writing your code with slight modification. But the output file show only the header portion not the sequence. Kindly check my code and suggest me where i am wrong."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430640287, "post_id": 30001251, "comment_id": 48141253, "body": "#!/usr/bin/perl -w use strict; my $list = $ARGV[0] || &#39;accessionids.txt&#39;; my $data = $ARGV[1] || &#39;fasta.txt&#39;; my $outs = $ARGV[2] || &#39;SQ.fas&#39;; my (%ids, $id); open (LIST,$list) or die &quot;Cannot open file $list: $!\\n&quot;; while (&lt;LIST&gt;) {       $ids{$_} = 1;     } close LIST; open (IN, $data) or die &quot;Cannot open file $data: $!\\n&quot;;; while (&lt;IN&gt;) { \tmy $line = $_; \tif ($line =~ /^&gt;?(\\w+\\|.+\\n)/) { \t\t\t\t$id = $1; \t\t\t\t$id =~ tr/|/_/; \t\t\t\t   } \t\t\t\t   } \t\t\t\t   close IN; \t\t\t\t   open (OUT, &quot;&gt;$outs&quot;) or die &quot;Cannot create file $outs: $!\\n&quot;; foreach my $id (@list) {     print OUT &quot;&gt;$id\\n&quot;; } close OUT;"}, {"owner": {"reputation": 16, "user_id": 1927018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3d959ae3d90a98f38366260acd8d0e?s=128&d=identicon&r=PG", "display_name": "wheee", "link": "https://stackoverflow.com/users/1927018/wheee"}, "reply_to_user": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430641304, "post_id": 30001251, "comment_id": 48141534, "body": "There&#39;s two problems:1) You never read the sequences, only the IDs from the header in the FASTA file. 2) The <code>@list</code> array in the last <code>foreach</code> loop is never initialized. Consider writing both the sequences and the headers in same loop you use for reading the FASTA file."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430641608, "post_id": 30001251, "comment_id": 48141606, "body": "Thanks Whee as you said I am already done  initialize @list  for foreach loop but the output file getting blank ni information in it. Kindly verify my code once again. Thanks for your support."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430641641, "post_id": 30001251, "comment_id": 48141617, "body": "my $list = $ARGV[0] || &#39;accessionids.txt&#39;; my $data = $ARGV[1] || &#39;fasta.txt&#39;; my $outs = $ARGV[2] || &#39;SQ.fas&#39;; my (%ids, $id); my @list = (); open(IDS, $list)or die &quot;Cannot open file $list: $!\\n&quot;; while (&lt;IDS&gt;) {         $ids{$_} = 1; }  close(IDS);  open (IN, $data) or die &quot;Cannot open file $data: $!\\n&quot;;; while (&lt;IN&gt;) { \tmy $line = $_; \tif ($line =~ /^&gt;?(\\w+\\|.+\\n)/) { \t\t\t\t$id = $1; \t\t\t\t$id =~ tr/|/_/; \t\t\t\t   } \t\t\t\t   } \t\t\t\t   close IN; \t\t\t\t   open (OUT, &quot;&gt;$outs&quot;) or die &quot;Cannot create file $outs: $!\\n&quot;; foreach my $id (@list) {     print OUT &quot;&gt;$id\\n&quot;; } close OUT;"}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430642202, "post_id": 30001251, "comment_id": 48141730, "body": "I need my output file contain both the header portion along with sequence itself. Those sequences whose header portion match with the header portion of sequence id file i.e. file 2."}, {"owner": {"reputation": 16, "user_id": 1927018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3d959ae3d90a98f38366260acd8d0e?s=128&d=identicon&r=PG", "display_name": "wheee", "link": "https://stackoverflow.com/users/1927018/wheee"}, "reply_to_user": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430642838, "post_id": 30001251, "comment_id": 48141872, "body": "There is still nothing inside <code>@list</code>, since you never put anything in it. All you have is one single ID in <code>$id</code>. The output is empty because you redefine <code>$id</code> as a new variable in the <code>foreach</code> loop (<code>my $id</code>). The previous value is overwritten. You have to do something with the lines that aren&#39;t headers as well. Look at the second <code>while</code> loop in my code again. Also, could you put your new code into your question and just tell us about the updates in the comments? That way it would be properly formatted. It&#39;s very hard to read otherwise."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430643911, "post_id": 30001251, "comment_id": 48142099, "body": "ok. i am giving here one code which i had modified with your code. just check my code and suggest me where put your code with my code."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430644514, "post_id": 30001251, "comment_id": 48142251, "body": "my $list = $ARGV[0] || &#39;accessionids.txt&#39;; my $data = $ARGV[1] || &#39;fasta.txt&#39;; my $outs = $ARGV[2] || &#39;SQ.fas&#39;; my (%ids, $id); my @list = (); open(IDS, $list)or die &quot;Cannot open file $list: $!\\n&quot;; while (&lt;IDS&gt;) {         $ids{$_} = 1; } close(IDS); open (IN, $data) or die &quot;Cannot open file $data: $!\\n&quot;;; while (&lt;IN&gt;) { \tmy $line = $_; \tif ($line =~ /^&gt;?(\\w+\\|.+\\n)/) { \t\t\t\t$id = $1; \t\t\t\t$id =~ tr/|/_/; \t\t\t\t   } \t\t\t\t   } \t\t\t\t   close IN; \t\t\t\t   open (OUT, &quot;&gt;$outs&quot;) or die &quot;Cannot create file $outs: $!\\n&quot;; foreach my $id (@list) {     print OUT &quot;&gt;$id\\n&quot;; } close OUT;"}, {"owner": {"reputation": 16, "user_id": 1927018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3d959ae3d90a98f38366260acd8d0e?s=128&d=identicon&r=PG", "display_name": "wheee", "link": "https://stackoverflow.com/users/1927018/wheee"}, "reply_to_user": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430645483, "post_id": 30001251, "comment_id": 48142491, "body": "This is the same code as before, I think you copied the wrong one. But please, edit your original question post and add the code there. These small comment fields without formatting are terrible to read."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430646342, "post_id": 30001251, "comment_id": 48142706, "body": "ok. if possible kindly give me your email id so i mailed you in details.."}, {"owner": {"reputation": 16, "user_id": 1927018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3d959ae3d90a98f38366260acd8d0e?s=128&d=identicon&r=PG", "display_name": "wheee", "link": "https://stackoverflow.com/users/1927018/wheee"}, "reply_to_user": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430688470, "post_id": 30001251, "comment_id": 48156590, "body": "I&#39;m sorry but I&#39;d rather not post my email address here. Just read my code again and try to understand what each part does and why it is important, especially the parts where the hash <code>%ids</code> is used. Then head over to your code and check which parts are still missing from it. I&#39;m sure you can figure it out."}, {"owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "edited": false, "score": 0, "creation_date": 1430734366, "post_id": 30001251, "comment_id": 48171667, "body": "ok. thanks wheee for your suggestion"}], "tags": [], "owner": {"reputation": 16, "user_id": 1927018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3d959ae3d90a98f38366260acd8d0e?s=128&d=identicon&r=PG", "display_name": "wheee", "link": "https://stackoverflow.com/users/1927018/wheee"}, "is_accepted": true, "score": 0, "last_activity_date": 1430688664, "last_edit_date": 1430688664, "creation_date": 1430562998, "answer_id": 30001251, "question_id": 30000248, "link": "https://stackoverflow.com/questions/30000248/extract-fasta-sequence-using-sequence-id/30001251#30001251", "title": "extract FASTA sequence using sequence ID", "body": "<p><strong>Edit:</strong> New code, I didn't understand your question the first time. This script reads both files, stores all IDs in a hash and then goes through all sequences in the first file. Only those sequences whose IDs are in the second file get written into the output file. Note that the output is written with <code>|</code> as separator like in the first file, not <code>_</code> like the IDs in the second file. The missing <code>&gt;</code> in the beginning of the first file is also reproduced correctly.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\n# Check command line arguments\nunless ($#ARGV == 1 &amp;&amp; -e $ARGV[0] &amp;&amp; -e $ARGV[1]) {\n        print STDERR \"Usage: split-fasta.pl DATA IDS\\n\";\n        exit 1;\n}\n\nmy (%ids, $id);\n\n# Read sequence IDs\nopen(IDS, \"&lt;$ARGV[1]\") or die \"Can't open IDs file: $1\";\n\nwhile (&lt;IDS&gt;) {\n        $ids{$_} = 1;\n}\n\nclose(IDS);\n\n\n# Read sequence data and write results to output.fasta\nopen(DATA,    \"&lt;$ARGV[0]\") or die \"Can't open sequences file: $1\";\nopen(OUTFILE, \"&gt;&gt;output.fasta\") or die \"Can't open output file: $1\";\n\nwhile (&lt;DATA&gt;) {\n        my $line = $_;\n\n\n        if ($line =~ /^&gt;?(\\w+\\|.+\\n)/) {\n                $id = $1;\n                $id =~ tr/|/_/;\n        }\n\n        print OUTFILE $line if defined $ids{$id};\n}\n\nclose(DATA);\nclose(OUTFILE);\n</code></pre>\n\n<p><s>So, you basically want to split file 1 into multiple files that each only contain one sequence? Maybe this ugly (maybe close each filehandle and not only the last one ...) piece of Perl will help you out.</p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\n\nwhile (&lt;&gt;) {\n        my $line = $_;\n\n        if ($line =~ /&gt;?([0-9]+|\\w+)\\//) {\n                my $file_name = $1;\n                open(OUTFILE, \"&gt;&gt;$file_name\");\n        }\n\n        print OUTFILE $line;\n}\n\nclose(OUTFILE);\n</code></pre>\n\n<p><strong>Edit:</strong> In case you want to feed in IDs from the second file, just add another <code>if</code> that matches the ID with the headers from the first file. This should work as long as both files are in the same order since the input is immediately discarded upon writing and can't be searched anymore.</s></p>\n"}], "owner": {"reputation": 1, "user_id": 4854164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115199055172726/picture?type=large", "display_name": "Rahul Banik", "link": "https://stackoverflow.com/users/4854164/rahul-banik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "closed_date": 1430573690, "accepted_answer_id": 30001251, "answer_count": 1, "score": -5, "last_activity_date": 1430688664, "creation_date": 1430556291, "last_edit_date": 1430646298, "question_id": 30000248, "link": "https://stackoverflow.com/questions/30000248/extract-fasta-sequence-using-sequence-id", "closed_reason": "Needs details or clarity", "title": "extract FASTA sequence using sequence ID", "body": "<p>I have two files:\nFile 1:</p>\n\n<pre><code>84C2_Locus_14_Transcript_1/3_Confidence_0.571_Length_1244\nAAACTAGTCAATAGAGAAAATCCAAAGTGGATGAAATTGAAGTGATTGTATGGCACAAGT...so on\n\n&gt;84C2_Locus_14_Transcript_2/3_Confidence_0.857_Length_1961\nAAACTAGTCAATAGAGAAAATCCAAAGTGGATGAAATTGAAGTGATTGTATGGCACAAGT...so on\n\n&gt;84C2|Locus_15_Transcript_1/9_Confidence_0.190_Length_757\nATTTGCTCGGAAAAACACTTCTCGTGGAACTTGTTAGCGCTGAGCTTGATCCCAAGACGA.....so on\n\n&gt;84C2_Locus_15_Transcript_5/9_Confidence_0.333_Length_1841\nATTTGCTCGGAAAAACACTTCTCGTGGAACTTGTTAGCGCTGAGCTTGATCCCAAGACGA....so on\n</code></pre>\n\n<p>File2: only the sequence IDS</p>\n\n<pre><code>84C2_Locus_14_Transcript_1/3_Confidence_0.571_Length_1244\n84C2_Locus_14_Transcript_2/3_Confidence_0.857_Length_1961\n84C2_Locus_14_Transcript_3/3_Confidence_0.571_Length_1248\n84C2_Locus_15_Transcript_1/9_Confidence_0.190_Length_757\n</code></pre>\n\n<p>...........so many.</p>\n\n<p>my output file should be contain the sequence associated with header. i.e. matching the sequence id file header portion with original fasta sequence file and those sequences header match the fasta sequence header store in another output file containing header with sequence.Just like this:</p>\n\n<p>Original output file should like this:</p>\n\n<pre><code>&gt;84C2_Locus_15_Transcript_5/9_Confidence_0.333_Length_1841\nATTTGCTCGGAAAAACACTTCTCGTGGAACTTGTTAGCGCTGAGCTTGATCCCAAGACGA......so on\n</code></pre>\n\n<p>Please suggest me the way in perl which is applicable for my problem.</p>\n"}]