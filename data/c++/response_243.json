[{"tags": ["c++", "pointers", "linked-list", "g++"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1567640927, "post_id": 57796776, "comment_id": 102026556, "body": "&quot;<i>requires me to copy a node, change its name, delete the old node and reinsert the new one back into the list.</i>&quot; - why does it need you to remove the old node? Your code is not making any copy, it just changes the name of the existing node that it finds, then it tries to remove that node, invalidating the pointer to the node, so you can&#39;t use that same pointer to reinsert a node afterwards. That is where your code is failing. Perhaps the requirement is to remove the found node and insert a NEW node with the new name? It doesn&#39;t make sense for a function named <code>changeName()</code> to remove anything"}, {"owner": {"reputation": 29, "user_id": 11454164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6585113a773eff0e842aaa0b00702a?s=128&d=identicon&r=PG&f=1", "display_name": "SelfStudy22", "link": "https://stackoverflow.com/users/11454164/selfstudy22"}, "edited": false, "score": 0, "creation_date": 1567641043, "post_id": 57796776, "comment_id": 102026574, "body": "the linked list needs to be in alphabetical order and she doesn&#39;t want us to re sort it after a name change. The old node needs to be deleted and then the new one placed based on its new name."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1567641128, "post_id": 57796776, "comment_id": 102026588, "body": "Then the code you have shown is not implemented correctly for that task"}, {"owner": {"reputation": 29, "user_id": 11454164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6585113a773eff0e842aaa0b00702a?s=128&d=identicon&r=PG&f=1", "display_name": "SelfStudy22", "link": "https://stackoverflow.com/users/11454164/selfstudy22"}, "edited": false, "score": 0, "creation_date": 1567641156, "post_id": 57796776, "comment_id": 102026600, "body": "I guess that&#39;s what i need help with now. How do I properly do this? Your suggestion to remove the old node and then insert a new one makes sense. I will try that."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 3, "creation_date": 1567642154, "post_id": 57796776, "comment_id": 102026775, "body": "Hi there--Stack Overflow questions are designed to be useful to future visitors. Removing code or any other significant portion of a question due to your classmates&#39; behavior or any other reason significantly invalidates the question&#39;s usefulness, as well as that of its answers. For the time being I&#39;ve rolled back your last edit. If you have concerns about your code being copied, edit it down to a minimal <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mvce</a> representation of the issue you&#39;re facing, so that it&#39;s not as useful for plagiarism."}, {"owner": {"reputation": 29, "user_id": 11454164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6585113a773eff0e842aaa0b00702a?s=128&d=identicon&r=PG&f=1", "display_name": "SelfStudy22", "link": "https://stackoverflow.com/users/11454164/selfstudy22"}, "edited": false, "score": 0, "creation_date": 1567642389, "post_id": 57796776, "comment_id": 102026820, "body": "I reedited it down. Thank you."}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1567642469, "post_id": 57796776, "comment_id": 102026834, "body": "This looks perfect. Thank you for taking the time to make the edit."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1567643699, "last_edit_date": 1567643699, "creation_date": 1567641550, "answer_id": 57796874, "question_id": 57796776, "link": "https://stackoverflow.com/questions/57796776/understanding-why-a-string-stored-in-a-linked-list-wont-print-properly/57796874#57796874", "title": "Understanding why a string stored in a linked list won&#39;t print properly", "body": "<p>Your code is not making any copy of a node. It merely updates the <code>name</code> of the existing node that it finds, then it saves a <em>pointer</em> to that node, removes that node from the list <strong>invalidating the pointer you just saved</strong>, then tries to use that <em>invalid pointer</em> to get the values to use when inserting a new node. That is where your code is failing.</p>\n\n<p>Try this instead:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool changeName(int nID, string newName)\n{\n    Product *node = head;\n\n    while (node) //while there are items in the list\n    {\n        if (node-&gt;id == nID) //if ids match\n        {\n            double price = node-&gt;price;\n            removeNode(nID); //remove node from the linkedlist\n            addNode(newName, nID, price); //insert new node\n            return true;\n        }\n\n        node = node-&gt;next; //move to next node\n    }\n\n    return false;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/W6tfqv\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>However, this is a little inefficient, as <code>removeNode()</code> is likely doing the same <code>id</code> search all over again.  A linked list is able to insert and remove a node <em>quickly</em>, without traversing the list multiple times.  Just unlink the found node from its surrounding nodes.  At the very least, you can get rid of the call to <code>removeNode()</code> in <code>changeName()</code> like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool changeName(int nID, string newName)\n{\n    Product *node = head, *prev = NULL;\n\n    while (node) //while there are items in the list\n    {\n        if (node-&gt;id == nID) //if ids match\n        {\n            double price = node-&gt;price;\n\n            //remove node from the linkedlist\n            //removeNode(nID);\n            if (prev) prev-&gt;next = node-&gt;next;\n            if (node == head) head = node-&gt;next;\n            delete node;\n\n            //insert new node\n            addNode(newName, nID, price);\n\n            return true; \n        }\n\n        prev = node;\n        node = node-&gt;next; //move to next node\n    }\n\n    return false;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/nm3bms\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>Another option would be to not actually destroy the found node at all, simply relocate it as-is.  Unlink it from its surrounding nodes, and then link it to the nodes at the desired new position, eg:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool changeName(int nID, string newName)\n{\n    Product *node = head, *prev = NULL;\n\n    while (node) //while there are items in the list\n    {\n        if (node-&gt;id == nID) //if ids match\n        {\n            //remove node from the linkedlist\n            if (prev) prev-&gt;next = node-&gt;next;\n            if (node == head) head = node-&gt;next;\n\n            //insert node in new position\n            Product **node2 = &amp;head;\n            while ((*node2) &amp;&amp; ((*node2)-&gt;name &lt; newName)) {\n                node2 = &amp;((*node2)-&gt;next);\n            }\n\n            node-&gt;name = newName;\n            node-&gt;next = *node2;\n            *node2 = node;\n\n            return true; \n        }\n\n        prev = node;\n        node = node-&gt;next; //move to next node\n    }\n\n    return false;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/sAQPuA\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 29, "user_id": 11454164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6585113a773eff0e842aaa0b00702a?s=128&d=identicon&r=PG&f=1", "display_name": "SelfStudy22", "link": "https://stackoverflow.com/users/11454164/selfstudy22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 57796874, "answer_count": 1, "score": 0, "last_activity_date": 1567643699, "creation_date": 1567640532, "last_edit_date": 1567642363, "question_id": 57796776, "link": "https://stackoverflow.com/questions/57796776/understanding-why-a-string-stored-in-a-linked-list-wont-print-properly", "title": "Understanding why a string stored in a linked list won&#39;t print properly", "body": "<p>I'm working on an assignment where I've been given specific member functions I need to complete for a linked-list. One of them requires me to copy a node, change its name, delete the old node and reinsert the new one back into the list. I've come up with this code </p>\n\n<pre><code>while(start != NULL)\n{\n    if(start-&gt;id == nID) \n    {\n        start-&gt;name = newName;\n        holdNode = start;\n        removeNode(nID); //removes start from the linkedlist\n        addNode(holdNode-&gt;name, holdNode-&gt;id, holdNode-&gt;cost); \n\n        found = true; \n        break;\n    }\n    else\n        start = start-&gt;next; \n</code></pre>\n\n<p>I get the correct output in xcode, but when I run it with g++ the name field is either empty or a series of random characters. I'm guessing it has something to do with pointing to the start node and then deleting it, but I can't figure out why it will work in one place but not the other. </p>\n\n<p>Xcode Output</p>\n\n<pre><code>1, testing, $9.99\n</code></pre>\n\n<p>g++</p>\n\n<pre><code>1, , $9.99\n</code></pre>\n\n<p>Any help is very much appreciated</p>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1567639909, "post_id": 57796694, "comment_id": 102026391, "body": "I&#39;m on mobile, so up for grabs: it&#39;s <code>std::greater&lt;&gt;</code> and it has an <code>operator()</code> template instead of a fixed type."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1567640020, "post_id": 57796694, "comment_id": 102026412, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20317413/what-are-transparent-comparators\">What are transparent comparators?</a>. tl;dr - what Quentin said. Instead of the comparator being a class template, its operator () is a template."}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 1, "creation_date": 1567644109, "post_id": 57796694, "comment_id": 102027131, "body": "I don&#39;t agree that this is a duplicate. The linked <a href=\"https://stackoverflow.com/questions/20317413/what-are-transparent-comparators\">&quot;duplicate&quot;</a> has a good discussion about transparent comparators, and how they&#39;re defined - but it doesn&#39;t answer the OP&#39;s question - &quot;how does this code work&quot;"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1567645631, "post_id": 57796694, "comment_id": 102027400, "body": "@MarshallClow: It works <i>because</i> the transparent comparators exist; once you know about the <code>&lt;class=void&gt;</code>, the behavior here is obvious.  Is that good enough?"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1567648890, "post_id": 57796694, "comment_id": 102027880, "body": "@DavisHerring I think there&#39;s a missing link: having a default template-argument doesn&#39;t make the template-argument-list (<code>&lt;&gt;</code>) omittable. It&#39;s actually the power of CTAD, which is not mentioned in the &quot;duplicate&quot;."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1567656174, "post_id": 57796694, "comment_id": 102029118, "body": "@cpplearner: Fair enough: we could even have a deduction guide from <code>()</code> to <code>&lt;void&gt;</code> if we wanted to, without allowing <code>&lt;&gt;</code>.  (There\u2019s no such distinction for <i>functions</i>, which probably affected my analysis.)"}, {"owner": {"reputation": 325, "user_id": 5867097, "user_type": "registered", "profile_image": "https://graph.facebook.com/1126993607334909/picture?type=large", "display_name": "Warp", "link": "https://stackoverflow.com/users/5867097/warp"}, "edited": false, "score": 0, "creation_date": 1567713483, "post_id": 57796694, "comment_id": 102055832, "body": "Could someone show me how the deduction guide would be implemented to make this work?"}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1567643460, "post_id": 57796982, "comment_id": 102027012, "body": "Yes, but <i>how</i> does <code>greater()</code> end up at the 2nd one?"}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1567643920, "post_id": 57796982, "comment_id": 102027087, "body": "Well, it can&#39;t be the first one - because you didn&#39;t provide a template parameter; so it has to be the second one."}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1567655893, "post_id": 57796982, "comment_id": 102029062, "body": "oops. Thanks, Davis. Fixed."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1567656268, "post_id": 57796982, "comment_id": 102029132, "body": "@MarshallClow: cpplearner\u2019s point (which might also have been yours) stands: CTAD has to be mentioned here."}, {"owner": {"reputation": 325, "user_id": 5867097, "user_type": "registered", "profile_image": "https://graph.facebook.com/1126993607334909/picture?type=large", "display_name": "Warp", "link": "https://stackoverflow.com/users/5867097/warp"}, "edited": false, "score": 0, "creation_date": 1567713364, "post_id": 57796982, "comment_id": 102055788, "body": "This answer, at least all by itself, does not work. I tried it, and I&#39;m getting the error &quot;missing template arguments before &#39;(&#39; token&quot; when trying to use it like &quot;std::sort(values, values+5, greater());&quot; Clearly it&#39;s expecting it to be used like &quot;greater&lt;&gt;()&quot;. However, as shown in my original question, std::greater doesn&#39;t require the empty brackets. Thus my question remains unanswered. I also have to object to this being marked as a duplicate to that other post, because that other post does <i>not</i> answer the question either."}, {"owner": {"reputation": 325, "user_id": 5867097, "user_type": "registered", "profile_image": "https://graph.facebook.com/1126993607334909/picture?type=large", "display_name": "Warp", "link": "https://stackoverflow.com/users/5867097/warp"}, "edited": false, "score": 0, "creation_date": 1567715022, "post_id": 57796982, "comment_id": 102056392, "body": "Oops. Scratch that. I was testing it with gcc 7.1, which gives erroneously an error for that code. It appears that it&#39;s not until gcc 9 that it compiles without the &lt;&gt; brackets."}], "tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": false, "score": 5, "last_activity_date": 1567655891, "last_edit_date": 1567655891, "creation_date": 1567642769, "answer_id": 57796982, "question_id": 57796694, "link": "https://stackoverflow.com/questions/57796694/c17-template-argument-deduction-mystery/57796982#57796982", "title": "C++17 template argument deduction mystery", "body": "<p>There are <em>two</em> different definitions for <code>std::greater</code>.\nOne requires a template parameter on the type, the other does not.</p>\n\n<p>You're using the second one.</p>\n\n<p>This is what <code>std::greater</code> looks like (leaving off modifiers like <code>constexpr</code> and <code>noexcept</code> and different return types):</p>\n\n<pre><code>template &lt;typename T = void&gt;\nstruct greater\n{\n    bool operator () (const T&amp; x, const T&amp; y) { return x &gt; y; }\n};\n\ntemplate &lt;&gt;\nstruct greater&lt;void&gt;\n{\n    template &lt;typename T1, typename T2&gt;\n    bool operator () (const T1&amp; x, const T2&amp; y) { return x &gt; y; }\n    typedef void is_transparent;\n};\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 5867097, "user_type": "registered", "profile_image": "https://graph.facebook.com/1126993607334909/picture?type=large", "display_name": "Warp", "link": "https://stackoverflow.com/users/5867097/warp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "closed_date": 1567643713, "answer_count": 1, "score": 5, "last_activity_date": 1567655891, "creation_date": 1567639697, "last_edit_date": 1567640349, "question_id": 57796694, "link": "https://stackoverflow.com/questions/57796694/c17-template-argument-deduction-mystery", "closed_reason": "Duplicate", "title": "C++17 template argument deduction mystery", "body": "<p>In C++17 you can do this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\nint main()\n{\n    double values[5] = { 1.1, 2.2, 3.3, 4.4, 5.5 };\n\n    // Notice this:\n    std::sort(values, values+5, std::greater());\n\n    for(double v: values) std::cout &lt;&lt; v &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>You don't actually need to specify the template parameter of <code>std::greater</code>.\nIt will be automatically deduced as <code>double</code>. That's really nice.</p>\n\n<p>But wait... How?!?</p>\n\n<p>There's nothing telling <code>std::greater</code> that the template parameter should be\nof type <code>double</code>. It's not taking any constructor parameters or anything.\nAnd the declaration of <code>std::sort()</code> is ostensibly like this:</p>\n\n<pre><code>template&lt;class RandomIt, class Compare&gt;\nvoid sort(RandomIt first, RandomIt last, Compare comp);\n</code></pre>\n\n<p>so there's nothing there telling it that it should be double either.</p>\n\n<p>So how?</p>\n"}, {"tags": ["c++", "macos", "qt", "qt5"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1567638613, "post_id": 57796370, "comment_id": 102026162, "body": "FWIW when I compile and run the posted code on my Mac, it opens two separate windows (using MacOS/X 10.14.6 and Qt 5.13.0).  AFAICT your code is correct; I think what you want to do is go to the Dock preferences pane in your System Preferences and change the &quot;Prefer tabs when opening documents&quot; setting to some setting other than &quot;Always&quot;."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1567640062, "post_id": 57796370, "comment_id": 102026418, "body": "Sure. Even so I was wondering if there is someway to trap that setting."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1567641811, "post_id": 57796370, "comment_id": 102026725, "body": "I doubt there&#39;s any way to do it from within Qt; there might be some Objective C or CoreFoundation type API for it, but if there is I don&#39;t know what it is."}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1567719723, "post_id": 57801117, "comment_id": 102057867, "body": "In my experience that does not make a difference wrt Apple&#39;s auto-tabbing behavior."}], "tags": [], "owner": {"reputation": 78, "user_id": 6162459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5ec22a9e2a1a0f196a0bdbe3b56adb?s=128&d=identicon&r=PG&f=1", "display_name": "Rhnbmpl", "link": "https://stackoverflow.com/users/6162459/rhnbmpl"}, "is_accepted": false, "score": -1, "last_activity_date": 1567671082, "creation_date": 1567671082, "answer_id": 57801117, "question_id": 57796370, "link": "https://stackoverflow.com/questions/57796370/open-widget-in-another-window-on-macos/57801117#57801117", "title": "Open widget in another window on macOS", "body": "<p>Open the anotherWidget as a QMainWindow type instead of QWidget.</p>\n"}, {"tags": [], "owner": {"reputation": 6616, "user_id": 1951488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIsyf.jpg?s=128&g=1", "display_name": "Zlatomir", "link": "https://stackoverflow.com/users/1951488/zlatomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1567773996, "last_edit_date": 1567773996, "creation_date": 1567711454, "answer_id": 57811858, "question_id": 57796370, "link": "https://stackoverflow.com/questions/57796370/open-widget-in-another-window-on-macos/57811858#57811858", "title": "Open widget in another window on macOS", "body": "<p>To do that, you need to set the flag of the second widget to <code>Qt::Dialog</code></p>\n\n<pre><code>QWidget anotherWidget;\nanotherWidget.setWindowTitle(\"Another Widget\");\nanotherWidget.setWindowFlag(Qt::Dialog);\nanotherWidget.show();\n</code></pre>\n"}], "owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57811858, "answer_count": 2, "score": 0, "last_activity_date": 1567773996, "creation_date": 1567636536, "last_edit_date": 1567637586, "question_id": 57796370, "link": "https://stackoverflow.com/questions/57796370/open-widget-in-another-window-on-macos", "title": "Open widget in another window on macOS", "body": "<p>The app opens another widget as a pane. I guess this follows macOS guidelines but is it possible to force widget to open in another window?</p>\n\n<p><a href=\"https://i.stack.imgur.com/3HjNm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3HjNm.png\" alt=\"enter image description here\"></a></p>\n\n<p>Like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NnLZZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NnLZZ.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QMainWindow&gt;\n\nint main(int argc, char *argv[]) {\n    QApplication a(argc, argv);\n\n    QMainWindow w;\n    w.setWindowTitle(\"Main Widget\");\n    w.show();\n\n    QWidget anotherWidget;\n    anotherWidget.setWindowTitle(\"Another Widget\");\n    anotherWidget.show();\n\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "algorithm", "search"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567634450, "post_id": 57796114, "comment_id": 102025319, "body": "You could use <code>std::for_each</code> with a lambda but that will give you the same code."}], "answers": [{"tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": false, "score": 2, "last_activity_date": 1567634745, "creation_date": 1567634745, "answer_id": 57796178, "question_id": 57796114, "link": "https://stackoverflow.com/questions/57796114/best-way-to-find-if-string-contains-any-one-element-of-a-vector-of-string/57796178#57796178", "title": "Best way to find if string contains any one element of a vector of string", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\"><code>std::any_of</code></a> will do the job.</p>\n\n<pre><code>std::string target = \"United States\"; \nstd::vector&lt;std::string&gt; stringVec = {\"United\",\"America\",\"Kindom\"};\nbool found = std::any_of(stringVec.begin(), stringVec.end(), \n                         [&amp;target](const auto&amp; s){ return target.find(s) != std::string::npos; });\nif(found) \n    std::cout &lt;&lt; \"Contains\";\nelse\n    cout &lt;&lt; \"Not existed\";\n</code></pre>\n\n<p>Your code will do something for <em>every</em> string if it meets the condition, not only once if the string is found (which is what you wanted I believe, judging by the description).</p>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 5, "last_activity_date": 1567634758, "creation_date": 1567634758, "answer_id": 57796183, "question_id": 57796114, "link": "https://stackoverflow.com/questions/57796114/best-way-to-find-if-string-contains-any-one-element-of-a-vector-of-string/57796183#57796183", "title": "Best way to find if string contains any one element of a vector of string", "body": "<p>Abstracting away a bit from the specifics of C++ code, the problem you're describing is called the multi-string search problem. In that problem, you're given a list of pattern strings P<sub>1</sub>, P<sub>2</sub>, ..., P<sub>k</sub> and a text string T, and the goal is to determine which substrings appear within the pattern string. This is a well-studied problem and there are some great algorithms for it.</p>\n\n<p>If you have a fixed set of patterns and will be searching over lots of different strings to find those patterns, then the <a href=\"https://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_algorithm\" rel=\"noreferrer\">Aho-Corasick algorithm</a> is a great solution. It does a small (linear) amount of preprocessing on the pattern strings to build a matcher that can then find all matches of those strings in variable texts quickly (in time linear in the length of the string to search plus the number of matches). There are a number of C++ implementations of this algorithm available; check Google for some examples.</p>\n\n<p>On the other hand, if you have a fixed string and a variable set of patterns, you might want to look into <a href=\"https://en.wikipedia.org/wiki/Suffix_array\" rel=\"noreferrer\">suffix arrays</a> or <a href=\"https://en.wikipedia.org/wiki/Suffix_tree\" rel=\"noreferrer\">suffix trees</a>, which, after linear preprocessing work on the string to search inside of, support efficient (linear, or close-to-linear) searches of that string for any pattern you'd like.</p>\n\n<p>These algorithms have the downside that they're a bit complex not something you'd code up unless you really needed the efficiency. For example, if you're working on strings that are millions of characters long, then these approaches are probably what you're looking for. So in that sense, if you're searching short strings, you can probably get away with just using the code that you have, since it's unlikely to be a bottleneck and is fairly easy to understand.</p>\n"}], "owner": {"reputation": 11, "user_id": 3186070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e550185b09c340a53a6e044ad65088?s=128&d=identicon&r=PG&f=1", "display_name": "HoldBreath", "link": "https://stackoverflow.com/users/3186070/holdbreath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "closed_date": 1567642077, "answer_count": 2, "score": 0, "last_activity_date": 1567634769, "creation_date": 1567634344, "last_edit_date": 1567634769, "question_id": 57796114, "link": "https://stackoverflow.com/questions/57796114/best-way-to-find-if-string-contains-any-one-element-of-a-vector-of-string", "closed_reason": "Needs details or clarity", "title": "Best way to find if string contains any one element of a vector of string", "body": "<p>I have a target string and a vector of strings. I want to check if any of the string in the vector is contained in my target string and do something. Otherwise, do others.</p>\n\n<p>What would be the best way of doing this. I know I can use for loop and string::find. But if there is any other function in stl can do this? Or using lambda function?</p>\n\n<p>I tried for loop and it surely will work</p>\n\n<pre><code>std::string target = \"United States\"; \n\nstd::vector&lt;std::string&gt; stringVec = {\"United\",\"America\",\"Kindom\"};\n\nFor (auto it = stringVec.cbegin(); it!=stringVec.cend(); ++it)\n{\n\n    if (target.find(*it)!=std::string::npos)\n        cout &lt;&lt; \"Contains\";\n    else\n        cout &lt;&lt; \"Not existed\";\n}\n</code></pre>\n"}, {"tags": ["c++", "graph", "variant"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567636672, "post_id": 57796100, "comment_id": 102025792, "body": "Related to <a href=\"https://stackoverflow.com/questions/39454347/using-stdvariant-with-recursion-without-using-boostrecursive-wrapper\">using-stdvariant-with-recursion-without-using-boostrecursive&zwnj;&#8203;-wrapper</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567636974, "post_id": 57796100, "comment_id": 102025861, "body": "So you have to use (smart-)pointers to &quot;break&quot; the cyclic dependency."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1567636984, "post_id": 57796100, "comment_id": 102025867, "body": "Per Jarod42, possible duplicate of <a href=\"https://stackoverflow.com/questions/39454347/using-stdvariant-with-recursion-without-using-boostrecursive-wrapper\">Using std::variant with recursion, without using boost::recursive_wrapper</a> (the answer doesn\u2019t depend on having used Boost)."}, {"owner": {"reputation": 23, "user_id": 8450861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a49851926431127b37e5a33eb1e22b3?s=128&d=identicon&r=PG&f=1", "display_name": "Wil", "link": "https://stackoverflow.com/users/8450861/wil"}, "edited": false, "score": 0, "creation_date": 1567712948, "post_id": 57796100, "comment_id": 102055624, "body": "Ah, so dynamic allocation is the necessary evil for this to work."}], "owner": {"reputation": 23, "user_id": 8450861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a49851926431127b37e5a33eb1e22b3?s=128&d=identicon&r=PG&f=1", "display_name": "Wil", "link": "https://stackoverflow.com/users/8450861/wil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567634212, "creation_date": 1567634212, "question_id": 57796100, "link": "https://stackoverflow.com/questions/57796100/how-to-eliminate-cyclic-dependence-in-c-graph-structure", "title": "How to eliminate cyclic dependence in C++ graph structure", "body": "<p>I am trying to develop a grammar graph structure within C++. The current goal is to write a program which can check if expressions in a user-generated grammar are valid. This ultimately reduces to generating a directed syntax graph that expressions attempt to traverse.</p>\n\n<p>One of the ways I have tried to keep the tokenization portion of the code separate from the syntax checker is by supplying the tokens as iterators as opposed to formal container types (e.g. <code>std::vector&lt;token&gt;</code>). I am happy with this decision, however it eliminates possibility to generate graph nodes in the canonical OOP style, i.e.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Unfortunately, virtual functions can not be templated\nstruct node{\n    template&lt;class TokenIt&gt;\n    virtual bool match(TokenIt begin, TokenIt end);\n};\n\n// Many node subtypes which all 'match' in their own way\n</code></pre>\n\n<p>Because I know the finite number of node subtypes at compile time, I have instead tried to use <code>std::variant</code> to conglomerate all of the nodes as a single type for use in containers and token matching. A current attempt (which does not compile) is shown below.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class node_t;\n\nclass string_literal{\nprivate:\n    std::string str;\npublic:\n    template&lt;class TokenIt&gt;\n    bool match(TokenIt begin, TokenIt end){ \n        // try to match tokens to str\n    }\n};\n\nclass wildcard{\nprivate:\n    node_t node;\npublic\n    template&lt;class TokenIt&gt;\n    bool match(TokenIt begin, TokenIt end){\n        // try to match 'node' zero or more times\n    }\n};\n\n// Many more node types ...\n\nusing node_t = std::variant&lt;string_literal, wildcard /*, more node types */&gt;;\n</code></pre>\n\n<p>Is there any way in which I can eliminate the cyclic dependency of <code>node_t</code> and classes which encapsulate a <code>node_t</code> while maintaining a overall similar design? I'm sorry if this question appears a bit vague, but I am beginning to hit a wall with solutions.</p>\n"}, {"tags": ["c++", "data-structures", "queue"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1567636581, "post_id": 57796092, "comment_id": 102025778, "body": "Why does <code>largest_value()</code> take a <code>Queue</code> as input? Is <code>Queue[i]</code> is supposed to be <code>F[i]</code>? And if the queue being searched is empty, then accessing <code>Queue[0]</code> will be out of bounds. Why not search the array in <code>this</code> instead? And why is the loop <code>remove()</code>ing every element in <code>F</code>?  And <code>aux</code> is a local variable, it will be cleared when <code>largest_value()</code> exits, so what is the point of having it?"}, {"owner": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1567636974, "post_id": 57796092, "comment_id": 102025862, "body": "I think Queue[0] should be F[i], and Queue[i] should be F[i], I tried it but didnt work as well. In Queue aux , I&#39;m declaring a new object from Queue which is the auxiliary queue."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1567637111, "post_id": 57796092, "comment_id": 102025890, "body": "Why would <code>F.remove()</code> know which element to remove?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1567637922, "post_id": 57796092, "comment_id": 102026043, "body": "@AngryDog but why is the <code>aux</code> queue INSIDE the <code>remove()</code> function?"}, {"owner": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "edited": false, "score": 0, "creation_date": 1567638531, "post_id": 57796092, "comment_id": 102026151, "body": "The aux queue isn&#39;t inside of the remove function. In Queue aux , I&#39;m declaring a new object from Queue inside of the largest_value() function."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "edited": false, "score": 0, "creation_date": 1567646474, "post_id": 57796507, "comment_id": 102027518, "body": "It worked but I think it&#39;s missing something. For example, for testing: Original queue for testing (Can be any values) Main = 4\t9\t45\t7  After removing largest Main = 4\t9\t7\t7 Aux = 45"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "edited": false, "score": 0, "creation_date": 1567646761, "post_id": 57796507, "comment_id": 102027557, "body": "@AngryDog It is not missing anything. You are just not taking into account that the 4th element in the array is no longer valid after the the 3rd element is &quot;removed&quot;.  Since the array can&#39;t physically be resized, the value in the 4th slot is simply copied to the 3rd slot and the 4th slot retains its value, but the <code>counter</code> is decremented to ignore the 4th slot."}, {"owner": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "edited": false, "score": 0, "creation_date": 1567647376, "post_id": 57796507, "comment_id": 102027636, "body": "got it ! It worked now. I just called the remove function to remove the duplicate.  Like this if (q1.remove_largest_value(item)) {   aux.insert(item);     q1.insert(item);     q1.remove();     cout&lt;&lt;&quot;Main Queue&quot;;     q1.print();     cout&lt;&lt;&quot;\\n&quot;;     cout&lt;&lt;&quot;Aux Queue&quot;;     aux.print();   }"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "edited": false, "score": 0, "creation_date": 1567649859, "post_id": 57796507, "comment_id": 102028035, "body": "@AngryDog why are you calling <code>remove()</code> after <code>remove_largest_value()</code>? That implies your class may have some bigger design problems you need to work out."}, {"owner": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "edited": false, "score": 0, "creation_date": 1567650618, "post_id": 57796507, "comment_id": 102028158, "body": "I called the remove function to remove the duplicate in the main queue after remove the largest. It might not be the best practice but it&#39;s working."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "edited": false, "score": 0, "creation_date": 1567652037, "post_id": 57796507, "comment_id": 102028379, "body": "@AngryDog the duplicate is only in physical memory, it should not be considered as still being &quot;in&quot; the queue. So again, if your class still &quot;sees&quot; the duplicate &quot;in&quot; the queue after <code>remove_largest_value()</code> was supposed to &quot;remove&quot; it from the queue, then your class design is buggy. I assumed the <code>counter</code> would handle that, but clearly your class relies on something else instead. So whatever logic <code>remove()</code> normally uses to make sure an item is actually removed from the queue (which you haven&#39;t shown) needs to be applied to <code>remove_largest_value()</code> as well when it removes the item it found."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1567637882, "creation_date": 1567637882, "answer_id": 57796507, "question_id": 57796092, "link": "https://stackoverflow.com/questions/57796092/c-data-strutures-queue-find-the-largest-element-in-the-queue-using-for-loop/57796507#57796507", "title": "C++ Data Strutures Queue: Find the largest element in the queue using for loop", "body": "<p>Try something more like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Queue{\n  private:\n    int arrayqueue[size];\n    int ... counter;\n  public:\n    ...\n    bool remove_largest_value(int &amp;value);\n};\n\n...\n\nbool Queue::remove_largest_value(int &amp;value) {\n  if (counter == 0)\n    return false;\n\n  int largest = 0;\n  for(int i = 1; i &lt; counter; ++i) {\n    if (arrayqueue[largest] &lt; arrayqueue[i])\n      largest = i;\n  }\n\n  value = arrayqueue[largest];\n\n  for(int i = largest + 1; i &lt; counter; ++i) {\n    arrayqueue[i-1] = arrayqueue[i];\n  }\n  --counter;\n\n  return true;\n}\n</code></pre>\n\n<p>Then you can do this:</p>\n\n<pre><code>Queue main;\n// populate main as needed...\n\nQueue aux; \nint item;\n\nif (main.remove_largest_value(item))\n{\n  aux.insert(item);\n  ...\n  main.insert(item);\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10668703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Cx1IWl8BJI/AAAAAAAAAAI/AAAAAAAAAto/P98-Z_6A5aw/photo.jpg?sz=128", "display_name": "AngryDog", "link": "https://stackoverflow.com/users/10668703/angrydog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 57796507, "answer_count": 1, "score": 1, "last_activity_date": 1567648239, "creation_date": 1567634171, "last_edit_date": 1567648239, "question_id": 57796092, "link": "https://stackoverflow.com/questions/57796092/c-data-strutures-queue-find-the-largest-element-in-the-queue-using-for-loop", "title": "C++ Data Strutures Queue: Find the largest element in the queue using for loop", "body": "<p>I need to find the largest element in an unsorted queue, remove it and store it in an auxiliary queue, then place it back as the first element in the main queue, WITHOUT using the standard queue functions from C++.</p>\n\n<p>I tried to use a <code>for</code> loop to go through the queue and search for the largest element, but it didn't work. Any suggestion on how to do it properly?</p>\n\n<pre><code>//The queue was created as a class as follows:\n\nclass Queue{\n  private:\n    int arrayqueue[size];\n    int start, end, counter;\n  public:\n    Queue();\n    bool empty();\n    bool full();\n    bool insert(int item);\n    bool remove();\n    bool front(int &amp;item);\n    int counter_size();\n    void copy(Queue &amp;F);\n    bool equal(Queue &amp;F);\n    void print();\n    int largest_value(Queue &amp;F,int n);\n};\n\nQueue::Queue(){\n  counter = 0;\n  start = 0;\n  end = size -1;\n} \n</code></pre>\n\n<p>This is the function I tried to build to find the largest element in the queue and store in the auxiliary queue:</p>\n\n<pre><code>//Create an auxiliary queue\n//Find the largest element in the main queue, then remove it and insert it in the aux queue\n\nint Queue::largest_value(Queue &amp;F,int n){\n  //int *Queue;\n  // n is the size of the queue\n  Queue aux; \n  int largest = Queue[0];\n  for(int i = 1;i &lt;n; i++) {\n    if(largest &lt; Queue[i])\n      largest = Queue[i];\n  }\n  F.remove();\n  aux.insert(largest);\n  return largest;\n}\n</code></pre>\n\n<p>Function to verify if it's empty:</p>\n\n<pre><code>bool Queue::empty(){\n  if(counter == 0)\n    return true;\n  else\n    return false;\n}\n\n</code></pre>\n\n<p>The function to remove elements:</p>\n\n<pre><code>bool Queue::remove(){\n  if(empty()==true)\n    return false;\n  if(start==size-1)\n    start = 0;\n  else\n    start++;\n  counter--;\n  return true;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "this", "nullptr"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 5, "creation_date": 1567634237, "post_id": 57796051, "comment_id": 102025272, "body": "There is no real reason to do the check. If it is nullptr, we&#39;re already in UB land"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1567634702, "post_id": 57796051, "comment_id": 102025372, "body": "It is a pretty decent way to detect a bug in the caller of your function.  Not terribly compatible with C++ sensibilities however, users of your code that you don&#39;t know and are unlikely to be skilled programmers are never allowed to get it wrong.  You have to always be ready to take the phone call, such is the price of being the smart guy.  Do beware it isn&#39;t necessary nullptr when you have a base class."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 8, "last_activity_date": 1567635415, "last_edit_date": 1592644375, "creation_date": 1567634192, "answer_id": 57796097, "question_id": 57796051, "link": "https://stackoverflow.com/questions/57796051/c-is-this-nullptr-safe-in-member-functions/57796097#57796097", "title": "c++: Is `this == nullptr` safe in member functions?", "body": "<p><code>this == nullptr</code> is &quot;safe&quot; in the sense that it has no side-effects whatsoever.</p>\n<p><code>this == nullptr</code> is <strong>useless</strong> in the sense that in any program with well defined behaviour, it is never <code>true</code>. As such, the optimizer is allowed to pretend that you had instead written:</p>\n<pre><code>if (false)\n    return -1;\nreturn std::max(left-&gt;get_height(), right-&gt;get_height()) + 1;\n</code></pre>\n<p>Which is same as having written:</p>\n<pre><code>return std::max(left-&gt;get_height(), right-&gt;get_height()) + 1;\n</code></pre>\n<p>What isn't safe is calling a member function through a null pointer (or any other pointer that doesn't point to an object with active lifetime). This check doesn't protect against that, even though one might intuitively think that it does. The behaviour of the example program is undefined.</p>\n<p>An example of well defined implementation of the function:</p>\n<pre><code>int get_height() const {\n    int lh = left  ? left-&gt;get_height()  : -1;\n    int rh = right ? right-&gt;get_height() : -1;\n    return std::max(lh, rh) + 1;\n}\n</code></pre>\n<p>A non-member function may be useful in avoiding the little bit of repetition.</p>\n<hr />\n<p>P.S. A good compiler will warn you about the potential mistake:</p>\n<blockquote>\n<p>warning: 'this' pointer cannot be null in well-defined C++ code; comparison may be assumed to always evaluate to false [-Wtautological-undefined-compare]</p>\n<pre><code>    if (this == nullptr)\n        ^~~~    ~~~~~~~\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1567634227, "creation_date": 1567634227, "answer_id": 57796102, "question_id": 57796051, "link": "https://stackoverflow.com/questions/57796051/c-is-this-nullptr-safe-in-member-functions/57796102#57796102", "title": "c++: Is `this == nullptr` safe in member functions?", "body": "<p>No, <code>if (this == nullptr)</code> is not \"safe\".  The only way the if statement could be true is if you called the member function on a null pointer and doing that is undefined behavior.  That means the check is completely superfluous as it can never be true in legal code.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": 1, "last_activity_date": 1567634570, "creation_date": 1567634570, "answer_id": 57796151, "question_id": 57796051, "link": "https://stackoverflow.com/questions/57796051/c-is-this-nullptr-safe-in-member-functions/57796151#57796151", "title": "c++: Is `this == nullptr` safe in member functions?", "body": "<p><code>this</code> cannot be <code>nullptr</code> and compiler likely would  optimize it out, because <code>this</code> being a null pointer is result of UB.</p>\n\n<p>Similar case:</p>\n\n<pre><code>  ptr-&gt;someStaticMethod();   // if ptr is null this is an UB, even if method is static.\n\n  if(!ptr) \n      abort();   // May never happen, even if ptr is nullptr\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "edited": false, "score": 0, "creation_date": 1567634962, "post_id": 57796198, "comment_id": 102025413, "body": "yeah, alright, I know that, but curious if using member functions would make any difference."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1567634839, "creation_date": 1567634839, "answer_id": 57796198, "question_id": 57796051, "link": "https://stackoverflow.com/questions/57796051/c-is-this-nullptr-safe-in-member-functions/57796198#57796198", "title": "c++: Is `this == nullptr` safe in member functions?", "body": "<p>If you would like to be able to deal with <code>nullptr</code> while attempting to get the height of an object, you should use a non-member function.</p>\n\n<pre><code>namespace MyApp\n{\n   int get_height(Node const* n)\n   {\n      return ( n == nullptr ) ? -1 : n-&gt;get_height();\n   }\n}\n</code></pre>\n\n<p>and use</p>\n\n<pre><code>Node* n = ...;\n\n...\n\nint h = MyApp::get_height(n);\n</code></pre>\n"}], "owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 57796097, "answer_count": 4, "score": 0, "last_activity_date": 1567668386, "creation_date": 1567633993, "last_edit_date": 1567668386, "question_id": 57796051, "link": "https://stackoverflow.com/questions/57796051/c-is-this-nullptr-safe-in-member-functions", "title": "c++: Is `this == nullptr` safe in member functions?", "body": "<p>To calculate the height of a binary tree, <code>height(left)+height(right)+1</code> is used and the height of non-existent nodes are defined as -1. So, if left or right is null, then the formula works without specifying these cases explicitly.</p>\n\n<p>I implemented this idea in C++, and I ensured that the member functions will NOT access member variables if <code>this == nullptr</code>. My implementation is successful and works (at least on my Linux machine).</p>\n\n<p>I want to find out what kind of practical downsides this approach can have, and if the standard stipulates anything about it. So, that's my question.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nstruct Node {\n    // default values of the child nodes are NULL\n    Node *left = nullptr;\n    Node *right = nullptr;\n\n    // store some value\n    int v;\n\n    int get_height() const __attribute__ ((optimize(0))) {\n        if (this == nullptr)\n            return -1;\n        return std::max(left-&gt;get_height(), right-&gt;get_height()) + 1;\n    }\n};\n\nint main() {\n    Node node1, node2, node3, node4;\n    node2.left = &amp;node1;\n    node2.right = &amp;node3;\n    node3.right = &amp;node4;\n    std::cout &lt;&lt; node2.get_height() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Edit: If optimization are enabled the code fails with a segmentation fault. It is possible to fix the problem by appending <code>__attribute__ ((optimize(0)))</code> to the function.</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1567633537, "post_id": 57795950, "comment_id": 102025121, "body": "You can&#39;t remove things from an array in <code>C++</code> - their size is constant. Either use a magic number that represents the lack of value (not recommended) or use dynamic memory management in form of <code>std::vector</code>."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1567633627, "post_id": 57795950, "comment_id": 102025140, "body": "possible duplicate: <a href=\"https://stackoverflow.com/questions/879603/remove-an-array-element-and-shift-the-remaining-ones/879629\" title=\"remove an array element and shift the remaining ones\">stackoverflow.com/questions/879603/&hellip;</a>"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1567633701, "post_id": 57795950, "comment_id": 102025156, "body": "Welcome to Stack Overflow. I think you are taking the wrong approach. There is no reason to modify the array at all. Are you familiar with <code>std::map</code>?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1567633782, "post_id": 57795950, "comment_id": 102025170, "body": "The code in the question does not produce the output shown in he question."}, {"owner": {"reputation": 1, "user_id": 12022012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iD2Dk.jpg?s=128&g=1", "display_name": "NateCraft", "link": "https://stackoverflow.com/users/12022012/natecraft"}, "edited": false, "score": 0, "creation_date": 1567633796, "post_id": 57795950, "comment_id": 102026672, "body": "Can&#39;t mark as duplicate because of lack of reputation but here is a <a href=\"https://stackoverflow.com/questions/879603/remove-an-array-element-and-shift-the-remaining-ones\">relevant response</a>. Basically you have to overwrite memory instead of what you&#39;re used to with &quot;deleting&quot;."}, {"owner": {"reputation": 1588, "user_id": 1899494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8bff769c85b3fc72eec038070928ff?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1899494/hugo"}, "edited": false, "score": 0, "creation_date": 1567633893, "post_id": 57795950, "comment_id": 102025189, "body": "I think in such a simple case, using &quot;magic empty values&quot; instead of a std::vector is legitimate. Especially since the values only need be printed and are not further worked with."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 1588, "user_id": 1899494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8bff769c85b3fc72eec038070928ff?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1899494/hugo"}, "edited": false, "score": 0, "creation_date": 1567634616, "post_id": 57795950, "comment_id": 102025351, "body": "@hugo but it enforces bad habits that should not be practised."}, {"owner": {"reputation": 1588, "user_id": 1899494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8bff769c85b3fc72eec038070928ff?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1899494/hugo"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1567634897, "post_id": 57795950, "comment_id": 102025406, "body": "@Fureeish Yes, it could <i>encourage</i> (not enforce!) bad style. One should be allowed to pick the best solution for the problem at hand; but I agree that <b>in the general case</b>, the &quot;magic empty values&quot; approach is bad."}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1567665140, "post_id": 57795950, "comment_id": 102031578, "body": "Title of the question is clear. Body of the question is confusing."}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1567667252, "post_id": 57795950, "comment_id": 102032460, "body": "Perhaps your question should be retitled as <i>How do I output the count of duplicate items in an array and in the order that they were added?</i>"}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 6162459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5ec22a9e2a1a0f196a0bdbe3b56adb?s=128&d=identicon&r=PG&f=1", "display_name": "Rhnbmpl", "link": "https://stackoverflow.com/users/6162459/rhnbmpl"}, "is_accepted": false, "score": 0, "last_activity_date": 1567671646, "creation_date": 1567671646, "answer_id": 57801268, "question_id": 57795950, "link": "https://stackoverflow.com/questions/57795950/how-do-i-remove-repeated-numbers-from-an-array/57801268#57801268", "title": "How do I remove repeated numbers from an array?", "body": "<p>Create a 2D vector(because of dynamic size beacuse of varying numbers) of int to store the number and counter. 1st row to store the number and the second row to store the number of occurences.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; counter;\n\nfor(int i=0;i&lt;30;i++)\n{\n  for(int x=0;x&lt;counter.size();x++)\n  {\n    if(txtArray[i]==counter[x][0])//repeat occurrence\n    {\n      counter[x][1]=counter[x][1]+1;\n    }\n    else//First occurence\n    {\n      std::vector&lt;int&gt; new;\n      new.push_back(txtArray[i]);\n      new.push_back(1);\n      counter.push_back(new);\n    }\n  }\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2513, "user_id": 3169556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lIlqX.jpg?s=128&g=1", "display_name": "v78", "link": "https://stackoverflow.com/users/3169556/v78"}, "is_accepted": false, "score": 0, "last_activity_date": 1567680147, "creation_date": 1567680147, "answer_id": 57803693, "question_id": 57795950, "link": "https://stackoverflow.com/questions/57795950/how-do-i-remove-repeated-numbers-from-an-array/57803693#57803693", "title": "How do I remove repeated numbers from an array?", "body": "<p>Corrected code. Added changes to skip dupicates in calculations.</p>\n\n<p>Change 1:</p>\n\n<pre><code>for (int x = 0; x &lt; size; x++) {\n    dupliCounter[x] = 1;\n}\n</code></pre>\n\n<p>Change 2(first loop):</p>\n\n<pre><code>if (dupliCounter[x] == 0) continue;\n</code></pre>\n\n<p>Change 3(nested loop):</p>\n\n<pre><code>if (x != y) continue;\n</code></pre>\n\n<p>Final Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{   \n\n    //initializer section\n    int dupliCounter[30];\n    int txtArray[30];\n    for (int x = 0; x &lt; size; x++) {\n        dupliCounter[x] = 1;\n    }\n\n    //Section to find out how many numbers are duplicates\n    for (int x = 0; x &lt; size; x++)\n    {\n        if (dupliCounter[x] == 0) continue;\n        int temp = txtArray[x];\n        for (int y = 0; y &lt; size; y++)\n        {\n            if (x != y) continue;\n            if (temp == txtArray[y])\n            {\n                dupliCounter[x] += 1;\n                dupliCounter[y] = 0;\n            }\n        }\n    }\n\n    //Final formatting section\n    cout &lt;&lt; \"Min Number: \" &lt;&lt; min &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Number     Count\" &lt;&lt; endl;\n\n    for (int k = 0; k &lt; size; k++)\n    {\n        if (dupliCounter[k] != 0)\n        {\n            cout &lt;&lt; txtArray[k];\n            cout &lt;&lt; \"       \";\n            cout &lt;&lt; dupliCounter[k] &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12011200, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oOxS5Lp2SA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcNmel0sntoMfn_B83GSgrFqwHMYA/photo.jpg?sz=128", "display_name": "Daniel Jacoby", "link": "https://stackoverflow.com/users/12011200/daniel-jacoby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1567680147, "creation_date": 1567633363, "question_id": 57795950, "link": "https://stackoverflow.com/questions/57795950/how-do-i-remove-repeated-numbers-from-an-array", "title": "How do I remove repeated numbers from an array?", "body": "<p>I'm trying to figure out how to remove integers from an array. The homework problem has this desired output of:</p>\n\n<pre><code>Enter input file name: t1.txt \n\nMin Number: -3\n\nNumber  Count\n2           3\n1           1\n-3          1\n</code></pre>\n\n<p>But what I'm getting is this output:</p>\n\n<pre><code>Enter file input name: t1.txt\n\nMin Number: 1\n\nNumber          Count\n2               3\n10              1\n2               3\n1               1\n2               3\n</code></pre>\n\n<p>Which isn't what I need as the duplicates are still showing. \nMy issue is that the text file the teacher provides for this has 5 integers in it. Which is all fine and dandy, but that means the code to get this specific output needs to remove integers from whatever he is printing out. I'm just having a hard time figuring out exactly how to remove integers from an array like this. </p>\n\n<p>I've tried to implement a std::find bit within a for loop so that it finds the duplicates and replaces those values within a array with 0, but that didn't work and it just kept chugging along ignoring that bit of code. I've also tried to sort the array, but my problem is that it won't output in the same way as the desired output which has the numbers in the same order as the .txt file that I'm reading from.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{   \n\n    //initializer section\n    int dupliCounter[30];\n    int txtArray[30];\n\n    //Section to find out how many numbers are duplicates\n    for (int x = 0; x &lt; size; x++)\n    {\n        int temp = txtArray[x];\n        for (int y = 0; y &lt; size; y++)\n        {\n            if (temp == txtArray[y])\n            {\n                dupliCounter[x] += 1;\n            }\n        }\n    }\n\n    //Final formatting section\n    cout &lt;&lt; \"Min Number: \" &lt;&lt; min &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Number     Count\" &lt;&lt; endl;\n\n    for (int k = 0; k &lt; size; k++)\n    {\n        if (dupliCounter[k] != 0)\n        {\n            cout &lt;&lt; txtArray[k];\n            cout &lt;&lt; \"       \";\n            cout &lt;&lt; dupliCounter[k] &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>I have it at a point where the code can detect repeated numbers, and then modifies another value that is basically counting how many times it repeats, but I can't figure out a way to get it to delete multiple instances of the same number.</p>\n\n<p>Thank you for the help everyone!</p>\n"}, {"tags": ["c++", "dll", "shared-libraries", "dllexport"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1567631857, "post_id": 57795698, "comment_id": 102024619, "body": "Does <a href=\"https://softwareengineering.stackexchange.com/questions/213259/whats-is-the-point-of-pimpl-pattern-while-we-can-use-interface-for-the-same-pur\">this</a> help?"}, {"owner": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1567632662, "post_id": 57795698, "comment_id": 102024864, "body": "Not really. I would still end up writing a helper function for every public function, although putting them in the class&#39;s own .cpp file is an improvement."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1567633032, "post_id": 57795698, "comment_id": 102024997, "body": "If that doesn&#39;t help, your question is unclear. If you are not willing to pull the private portions of <code>A</code>s class out of the header file, you are stuck. How about you propose the syntax you would wish to achieve?"}, {"owner": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1567633219, "post_id": 57795698, "comment_id": 102025044, "body": "My question as stated is &quot;Is there a syntax that lets me define the public members of a class (in A) without also defining all the private members?&quot; Are you saying the answer is &quot;no&quot;? If that&#39;s the case, then I will probably end up writing the helper functions, I just want to know if there&#39;s a syntactic sugar already built in to do this. I see no reason the private members and public members of every class always need to be defined in the same header. I am willing to pull the private portions of A out of the header file. In fact, that is exactly what I want. I&#39;m looking for the syntax."}], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "edited": false, "score": 0, "creation_date": 1567638700, "post_id": 57796182, "comment_id": 102026174, "body": "This is definitely a step in the right direction. My only major issue with this is what it does to the consumer apps calls to my classes. Instead of <code>Worker worker(); worker.doWork();</code>, I now have <code>std::unique_ptr&lt;Worker&gt; worker = Worker::make(); worker.get()-&gt;doWork();</code>. Now I have the urge to wrap this up in yet another class. I&#39;m gonna hold out for a better solution for a while, then accept this if it nothing better turns up."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "edited": false, "score": 0, "creation_date": 1567638986, "post_id": 57796182, "comment_id": 102026230, "body": "That should be <code>auto worker = Worker::make();</code> and <code>worker-&gt;doWork();</code>. Not really so bad."}, {"owner": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "edited": false, "score": 0, "creation_date": 1567639206, "post_id": 57796182, "comment_id": 102026265, "body": "Hmm. Didn&#39;t know that <code>unique_ptr</code> would typeshift to a normal reference so easilly. Works for me."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "edited": false, "score": 0, "creation_date": 1567639544, "post_id": 57796182, "comment_id": 102026329, "body": "It&#39;s not a typeshift in the sense I think you mean. It is the delegation syntax (overload of the <code>-&gt;</code> operator)."}, {"owner": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "edited": false, "score": 0, "creation_date": 1567639676, "post_id": 57796182, "comment_id": 102026347, "body": "I had never considered overloading <code>-&gt;</code>. Yep, that&#39;d do it."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 1, "last_activity_date": 1567634756, "creation_date": 1567634756, "answer_id": 57796182, "question_id": 57795698, "link": "https://stackoverflow.com/questions/57795698/c-dynamic-library-with-public-api-that-obscures-dependent-libraries/57796182#57796182", "title": "C++ dynamic library with public api that obscures dependent libraries", "body": "<p>Here is a technique that may be close to what you want to achieve.</p>\n\n<p>You can define an interface that relies only on public interfaces from <strong>A</strong>, and therefore lacks any dependency on <strong>B</strong>. The interface class includes a factory. This interface would be part of the header file for your library.</p>\n\n<pre><code>class Interface {\npublic:\n\n    virtual void foo () = 0;\n    virtual void bar () = 0;\n\n    static std::unique_ptr&lt;Interface&gt; make ();\n\n    virtual ~Interface () = default;\n};\n</code></pre>\n\n<p>In a source file of your library, you would include header files for both <strong>A</strong> and <strong>B</strong>, and create an implementation of the interface as well as a definition of the factory.</p>\n\n<pre><code>class Implementation : public Interface {\n    //...\n};\n\nstd::unique_ptr&lt;Interface&gt;\nInterface::make () {\n    return std::make_unique&lt;Implementation&gt;();\n}\n</code></pre>\n\n<p>So, users of your library get access to the interface, and can call the public methods without any knowledge of private members or private methods.</p>\n\n<p><a href=\"https://tio.run/##lVFNS8QwFLznVzzwsHpY8NzWXkRhL6tIPQhCyKapBNskpsmClPrXa7Lp9hNFc8nHezNvZkKV2r5R2l1wQUubM0i4rI1mpErR@FaxSurPtKMlqWvYCcN0QSiDBil7KDmNEAK3jlwbS0o4Sp5DISVcXsENXMfr4oHooXiq1oYYTt2WR5EV/MMyrIxOhlEpVOSdOUw8H/U1ijnx5awgtjQxal1jL7dSJauY8BOkgAiC5pkNT1lozkS@ljCDp6HuxeDQtGzwEn@jGx0Nx8AHZ@RCsPPVtMH0JNcmMFNpDSQJYPz4dJdlL/j@eX@b7R72GPvnzavYxDBB98H/D@2z/NkHWvvoE9XMWC3@lFjbcWHcH3Mxwok1EpT71MWAc05qm7owJjdnLnB9Aw\" rel=\"nofollow noreferrer\" title=\"C++ (gcc) \u2013 Try It Online\">Try it online!</a></p>\n"}], "owner": {"reputation": 639, "user_id": 11529348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04841364af7bdde45d0f48dadf800a29?s=128&d=identicon&r=PG&f=1", "display_name": "memtha", "link": "https://stackoverflow.com/users/11529348/memtha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 57796182, "answer_count": 1, "score": 0, "last_activity_date": 1567634756, "creation_date": 1567631540, "last_edit_date": 1567633964, "question_id": 57795698, "link": "https://stackoverflow.com/questions/57795698/c-dynamic-library-with-public-api-that-obscures-dependent-libraries", "title": "C++ dynamic library with public api that obscures dependent libraries", "body": "<p>I am trying to create a multi-platform library in C++ for use by C++ consumer applications. Call my library <strong>A</strong>. I want to ship a dynamic library file per target platform, and a header file (call this export.h) that the consumer app could use to compile and execute. My library depends on a third-party open-source library, written in c, which is difficult to link to correctly; call this library <strong>B</strong>.</p>\n\n<p>In order to save my consumers the pains of linking to B, I want to abstract every call to it so that the consumer need not even have a single header file from B. Consumer app (<strong>C</strong>) should be able to compile with only A.dll, B.dll and export.h; and run with only A.dll and B.dll as dependencies (substituting the platform-specific suffix for a shared library as needed).</p>\n\n<p>B defines a great many types, mostly structs. (B is not written in objective c, although it probably should have been.) Part of A's job is to produce classes that contain and manage groups of structs around logical lines, which are readily apparent. C needs to call functions belonging to classes in A, so the function prototypes need to be in export.h, but the B types cannot be in export.h or else C will need to include headers from B.</p>\n\n<p>Is there a syntax that lets me define the public members of a class (in A) without also defining all the private members?</p>\n\n<p>Obviously, there are no public members in A that rely on types from B. The closest thing I've found so far is <a href=\"https://stackoverflow.com/questions/29883482/shipping-a-c-dll-with-only-a-c-api-exposed\">this question</a>. Opaque pointers may be part of the solution, but C needs access to functions of classes in A. I really don't want to write a helper function for every public A class member, though that would probably work. Any ideas?</p>\n\n<p><strong>Edit:</strong> As requested, explanation code.</p>\n\n<p>Worker.h:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;SomeThirdPartyLib.h&gt;\nclass Worker {\npublic:\n  Worker();\n  ~Worker();\n  void DoWork();\nprivate:\n  Truck t;\n}\n</code></pre>\n\n<p>SomeThirdPartyLib.h:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct TruckS {\n  char data[200];\n  char* location;\n} Truck;\n</code></pre>\n\n<p>Worker.cpp:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include \"worker.h\"\nWorker::Worker() {}\nWorker::~Worker() {}\nWorker::DoWork() {\n  t.location = \"Work\";\n}\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;export.h&gt;\nint main(int argc, char** argv) {\n  Worker w();\n  w.DoWork();\n}\n</code></pre>\n\n<p>Now I'm looking for the syntax to put in export.h that would allow this external application to be compiled using that header and my dll, but without requiring access to <code>SomeThirdPartyLib.h</code>.</p>\n"}, {"tags": ["c++", "pointers", "pointer-to-pointer"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1567630264, "post_id": 57795435, "comment_id": 102024080, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">string literals</a> is a good place to start, at least as it pertains to C++."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1567630287, "post_id": 57795435, "comment_id": 102024086, "body": "this is not c this is c++. And in C++ you cannot cast string literals to non const char *"}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1567630555, "post_id": 57795435, "comment_id": 102024176, "body": "@Jean-Fran&#231;oisFabre yes you can, as the OP does in this example. The undefined behavior only comes when you try to modify the data it points to."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1567631601, "post_id": 57795435, "comment_id": 102024549, "body": "You&#39;re allocating an array of pointers to constants. If the pointed-to strings were dynamic, things get a bit more interesting. Also, there&#39;s rarely a reason to do this type of string storage in C++. (C is another matter.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1567632684, "post_id": 57795435, "comment_id": 102024874, "body": "This is undefined behaviour in C++, you could use <code>new</code> rather than <code>malloc</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1567633218, "post_id": 57795435, "comment_id": 102025041, "body": "@eerorika <a href=\"https://stackoverflow.com/questions/40873520/\">see here</a>, the assignment operator requires the left operand to refer to an object that exists already  (not storage with no objects in it, as in this case)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1567633343, "post_id": 57795435, "comment_id": 102025076, "body": "@M.M yeah, I just realized that myself and added it to my answer."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1567631207, "post_id": 57795466, "comment_id": 102024393, "body": "&quot;if I&#39;m not mistaken&quot; - you may be - many architectures don&#39;t have a &quot;data section&quot;, or any sections at all."}, {"owner": {"reputation": 1886, "user_id": 422894, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/6e377d0d9da13a5cb14259ac9c0d9538?s=128&d=identicon&r=PG", "display_name": "Anton Andreev", "link": "https://stackoverflow.com/users/422894/anton-andreev"}, "edited": false, "score": 0, "creation_date": 1567631526, "post_id": 57795466, "comment_id": 102024521, "body": "I see, the data segment is different from the stack."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 1886, "user_id": 422894, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/6e377d0d9da13a5cb14259ac9c0d9538?s=128&d=identicon&r=PG", "display_name": "Anton Andreev", "link": "https://stackoverflow.com/users/422894/anton-andreev"}, "edited": false, "score": 0, "creation_date": 1567631772, "post_id": 57795466, "comment_id": 102024597, "body": "@AntonAndreev there could also be multiple data &quot;segments&quot; in completely different address spaces. On a Harvard architecture (vs von Neumann), for instance, the literal strings would be stored in code space, and the poorly-named <code>p</code> array would reside in one of many possible writable spaces. The string literals may not reside in the same address space or even on the same physical device."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1567631967, "post_id": 57795466, "comment_id": 102024644, "body": "<code>Same with arrays that you declare with constant length, without using malloc</code> Not quite. A statically-sized array that is non-const will still be located in writable space, since it&#39;s... well, writable. Stuffing that into a code segment, code space, or whatever it&#39;s called for your specific platform makes no sense. Even a <code>char *s=&quot;asdfasd&#39;</code> can be modified, since it&#39;s non-<code>const</code>."}], "tags": [], "owner": {"reputation": 17487, "user_id": 36498, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/040b73282faf88b2eea3dc64507339c0?s=128&d=identicon&r=PG", "display_name": "alamar", "link": "https://stackoverflow.com/users/36498/alamar"}, "is_accepted": true, "score": 2, "last_activity_date": 1567630172, "creation_date": 1567630172, "answer_id": 57795466, "question_id": 57795435, "link": "https://stackoverflow.com/questions/57795435/does-char-with-text-automatically-reserves-memory-as-if-malloc-is-used/57795466#57795466", "title": "Does char* with text automatically reserves memory as if malloc is used?", "body": "<p><code>malloc</code> does <strong>dynamic</strong> memory allocation. Here you have classic <strong>static</strong> memory allocation, where string constants will be allocated in data section of your binary (if I'm not mistaken). Compiler knows in advance how many bytes you need, so it will just allocate it during compilation. This is as opposed to malloc, where you can ask for any number of bytes calculated in runtime and unknown in advance.</p>\n\n<p>Same with arrays that you declare with constant length, without using <code>malloc</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1567631380, "post_id": 57795513, "comment_id": 102024459, "body": "&quot;and, by extension, C++&quot;, well, no <code>char *str = &quot;text&quot;;</code> is illegal in C++."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1567632135, "last_edit_date": 1567632135, "creation_date": 1567630448, "answer_id": 57795513, "question_id": 57795435, "link": "https://stackoverflow.com/questions/57795435/does-char-with-text-automatically-reserves-memory-as-if-malloc-is-used/57795513#57795513", "title": "Does char* with text automatically reserves memory as if malloc is used?", "body": "<p>[This is the C answer, since the question was originally tagged <code>[c]</code> also.  But it mostly applies to C++ as well.]</p>\n\n<p>When you say</p>\n\n<pre><code>char *str = \"text\"\n</code></pre>\n\n<p>or, as in your code,</p>\n\n<pre><code>p[0] = \"Apple\";\n</code></pre>\n\n<p>the compiler <em>does</em> allocate memory for those strings <code>\"test\"</code> and <code>\"Apple\"</code>.  It definitely is not as if <code>malloc</code> was called, however.  In particular, the memory where those strings are stored is not guaranteed to be (and, these days, typically is not) writable.  And you can't pass those pointers to <code>free</code> or <code>realloc</code> -- because, again, they did not come from <code>malloc</code> in the first place.</p>\n\n<p>This is a longstanding aspect of C (and, by extension, C++), true since forever and under any compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1567633772, "last_edit_date": 1567633772, "creation_date": 1567631961, "answer_id": 57795757, "question_id": 57795435, "link": "https://stackoverflow.com/questions/57795435/does-char-with-text-automatically-reserves-memory-as-if-malloc-is-used/57795757#57795757", "title": "Does char* with text automatically reserves memory as if malloc is used?", "body": "<blockquote>\n  <p>seems to reserve memory automatically. There is no malloc. </p>\n</blockquote>\n\n<p>Dynamic allocation is not the only way to acquire memory in C++.</p>\n\n<p>The variable <code>p</code> has automatic storage. The string literals are arrays that have static storage. Objects with automatic, static or thread local storage are destroyed automatically. All variables have one of these three storage durations.</p>\n\n<p>Automatic objects are destroyed at the end of the (narrowest surrounding) scope, static objects are destroyed after <code>main</code> returns and thread local objects are destroyed when the thread exits.</p>\n\n<blockquote>\n  <p>Is this C/C++ standard or compiler specific?</p>\n</blockquote>\n\n<p>The example program is mostly standard, except:</p>\n\n<ul>\n<li>You haven't included a header that is guaranteed to declare <code>malloc</code>.</li>\n<li>You haven't created <code>char*</code> objects into the dynamically allocated memory, so the behaviour of the program is technically undefined in C++. See P.P.P.S. below for how to fix this.</li>\n</ul>\n\n<hr>\n\n<p>P.S. It is quite unsafe to point at string literals with non-const pointers to char. Attempting to modify the literal through such pointer would be syntactically correct, but the behaviour of the program would be undefined at runtime. Use <code>const char*</code> instead. Conveniently, you can get rid of some of the explicit conversions.</p>\n\n<p>P.P.S. C-style explicit conversions are not recommended in C++. Use <code>static_cast</code>, <code>const_cast</code> or <code>reinterpret_cast</code> or their combination instead.</p>\n\n<p>P.P.P.S. It is not recommended to use <code>malloc</code> in C++. Use <code>new</code> or <code>new[]</code> instead... or even better, see next point.</p>\n\n<p>P.P.P.P.S. It is not recommended to have bare owning pointers to dynamic memory. Using a RAII container such as <code>std::vector</code> here would be a good idea.</p>\n\n<p>P.P.P.P.P.S. Your example program leaks the dynamic allocation. This is one of the reasons to avoid bare owning pointers.</p>\n\n<hr>\n\n<blockquote>\n  <p>So p is allocated on the STACK pointing to a block of memory (array) in the HEAP where each element points (is a pointer) to a literal in the DATA segment?</p>\n</blockquote>\n\n<p>The language itself is agnostic to concepts such as stack and heap memory and data segment. These are details specific to the implementation of the language on the system that you are using.</p>\n"}], "owner": {"reputation": 1886, "user_id": 422894, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/6e377d0d9da13a5cb14259ac9c0d9538?s=128&d=identicon&r=PG", "display_name": "Anton Andreev", "link": "https://stackoverflow.com/users/422894/anton-andreev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 57795466, "answer_count": 3, "score": 2, "last_activity_date": 1567671965, "creation_date": 1567630002, "last_edit_date": 1567671965, "question_id": 57795435, "link": "https://stackoverflow.com/questions/57795435/does-char-with-text-automatically-reserves-memory-as-if-malloc-is-used", "title": "Does char* with text automatically reserves memory as if malloc is used?", "body": "<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    char **p;\n    p = (char **)malloc(100);\n    p[0] = (char *)\"Apple\";      // or write *p, points to location of 'A'\n    p[1] = (char *)\"Banana\";     // or write *(p+1), points to location of 'B'\n\n    cout &lt;&lt; *p &lt;&lt; endl;          //Prints the first pointer \n}\n</code></pre>\n\n<p>In the above code :</p>\n\n<pre><code>p[0] = (char *)\"Apple\"; \n</code></pre>\n\n<p>seems to reserve memory automatically. There is no malloc. Is this C/C++ standard or compiler specific?</p>\n\n<p><strong>UPDATE 1</strong>\nI am actually interested how it is in C and then in C++. It is just that I did not have a C compiler installed for the code above, so I used C++.</p>\n\n<p>So p is allocated on the STACK pointing to a block of memory (array) in the HEAP where each element points (is a pointer) to a literal in the DATA segment? Wow! </p>\n"}, {"tags": ["c++", "visual-studio", "iostream"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 4, "creation_date": 1567629903, "post_id": 57795390, "comment_id": 102023939, "body": "yes you can, but you&#39;ve got to ask yourself: Is is worth it?"}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "edited": false, "score": 0, "creation_date": 1567630004, "post_id": 57795390, "comment_id": 102023974, "body": "You would need some kind of cursor control library.  Some command lines  let you move the cursor around with escape sequences.  It really depends on your environment."}, {"owner": {"reputation": 45, "user_id": 11826320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-6N0pWsflA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcC9mg5N7YMrah1J3Oe4rPEymc1jA/photo.jpg?sz=128", "display_name": "open surce", "link": "https://stackoverflow.com/users/11826320/open-surce"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1567630074, "post_id": 57795390, "comment_id": 102024006, "body": "Hi @bolov, I&#39;m making a text based adventure game, and the UI will consist of this being wrapped around the text field, so if I can figure out how to do it simply in this example, I can further implement it when I build my UI"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1567630356, "post_id": 57795390, "comment_id": 102024113, "body": "Have you heard of <a href=\"https://pdcurses.org/\" rel=\"nofollow noreferrer\">PDCurses</a>?"}, {"owner": {"reputation": 45, "user_id": 11826320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-6N0pWsflA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcC9mg5N7YMrah1J3Oe4rPEymc1jA/photo.jpg?sz=128", "display_name": "open surce", "link": "https://stackoverflow.com/users/11826320/open-surce"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1567630673, "post_id": 57795390, "comment_id": 102024220, "body": "Hi @Eljay, I have, I just struggled to get to grips with it all, as I couldn&#39;t find solid documentation on all functions etc. Is this what you would recommend? If so I&#39;ll fully commit and look into this."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1567631315, "post_id": 57795390, "comment_id": 102024441, "body": "It is one option that you can consider.  There are also direct WinAPI calls you could consider.  It really depends on what you need."}, {"owner": {"reputation": 45, "user_id": 11826320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-6N0pWsflA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcC9mg5N7YMrah1J3Oe4rPEymc1jA/photo.jpg?sz=128", "display_name": "open surce", "link": "https://stackoverflow.com/users/11826320/open-surce"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1567632092, "post_id": 57795390, "comment_id": 102024684, "body": "@Eljay for a simple task just like this for example, what would you recommend?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1567647565, "post_id": 57795390, "comment_id": 102027662, "body": "I&#39;d use PDCurses (on Windows) or the very similar NCurses (on Unix)."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1567631433, "last_edit_date": 1567631433, "creation_date": 1567630682, "answer_id": 57795558, "question_id": 57795390, "link": "https://stackoverflow.com/questions/57795390/print-cout-before-cin/57795558#57795558", "title": "Print &quot;cout&quot; before cin?", "body": "<p>There is no standard way of achieving this in C++.</p>\n\n<p>Different terminals have their own capabilities and different systems have their own API's for interacting with the terminal.</p>\n\n<p>The output of the bottom line must certainly be performed first before waiting for the input, but it may be possible to move the output \"cursor\" to some other location than the bottom of the screen. You may find details in the documentation of the system that you intend to target.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 11826320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-6N0pWsflA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcC9mg5N7YMrah1J3Oe4rPEymc1jA/photo.jpg?sz=128", "display_name": "open surce", "link": "https://stackoverflow.com/users/11826320/open-surce"}, "edited": false, "score": 0, "creation_date": 1567724609, "post_id": 57798970, "comment_id": 102058926, "body": "This works exactly how I want it to, thank you! I should be able to build the rest of my UI with manipulation of the cursor position now! I just have 2 questions, what is &quot;hConsole&quot; getting? (Some reference of the console maybe?) and what is the if statement actually checking?"}, {"owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "reply_to_user": {"reputation": 45, "user_id": 11826320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-6N0pWsflA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcC9mg5N7YMrah1J3Oe4rPEymc1jA/photo.jpg?sz=128", "display_name": "open surce", "link": "https://stackoverflow.com/users/11826320/open-surce"}, "edited": false, "score": 0, "creation_date": 1567738094, "post_id": 57798970, "comment_id": 102061317, "body": "hConsole: A handle to the console screen buffer. You could specify a security descriptor for the console screen buffer when calling the <a href=\"https://docs.microsoft.com/en-us/windows/console/createconsolescreenbuffer\" rel=\"nofollow noreferrer\">CreateConsoleScreenBuffer function</a>. If the function succeeds, the return value is a handle to the new console screen buffer.If the function fails, the return value is INVALID_HANDLE_VALUE.The if statement is to ensure that the handle of the console screen buffer has <a href=\"https://docs.microsoft.com/en-us/windows/console/console-buffer-security-and-access-rights\" rel=\"nofollow noreferrer\">GENERIC_READ access</a>."}], "tags": [], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "is_accepted": true, "score": 0, "last_activity_date": 1567661551, "creation_date": 1567661551, "answer_id": 57798970, "question_id": 57795390, "link": "https://stackoverflow.com/questions/57795390/print-cout-before-cin/57798970#57798970", "title": "Print &quot;cout&quot; before cin?", "body": "<p>I suggest you could try to use <a href=\"https://docs.microsoft.com/en-us/windows/console/setconsolecursorposition\" rel=\"nofollow noreferrer\">SetConsoleCursorPosition function</a> to set the cursor position in the specified console screen buffer.</p>\n\n<p>This code uses SetConsoleCursorPosition() to move the current output location to row 1, column 9:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\nstring cmd;\n\nint main()\n{\n\n\n    cout &lt;&lt; \"-------------\\n\" &lt;&lt; \"command:  \\n\" &lt;&lt; \"-------------\" &lt;&lt; endl;\n\n\n    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    if (INVALID_HANDLE_VALUE != hConsole)\n    {\n        COORD pos = {9, 1 };\n        SetConsoleCursorPosition(hConsole, pos);\n        cin &gt;&gt; cmd;\n    }\n\n\n    system(\"pause\");\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0xDDP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0xDDP.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 45, "user_id": 11826320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V-6N0pWsflA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcC9mg5N7YMrah1J3Oe4rPEymc1jA/photo.jpg?sz=128", "display_name": "open surce", "link": "https://stackoverflow.com/users/11826320/open-surce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 57798970, "answer_count": 2, "score": 2, "last_activity_date": 1567661551, "creation_date": 1567629767, "question_id": 57795390, "link": "https://stackoverflow.com/questions/57795390/print-cout-before-cin", "title": "Print &quot;cout&quot; before cin?", "body": "<p>I've got a small problem and I'm not sure if there's a possible way around this with iostream code, but I thought it's worth asking anyway.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring cmd;\n\nint main() {\n\ncout &lt;&lt; \"-------------\" &lt;&lt; endl;\ncout &lt;&lt; \"command: \";\ncin &gt;&gt; cmd;\ncout &lt;&lt; \"-------------\" &lt;&lt; endl;\nsystem(\"pause\");\n}\n</code></pre>\n\n<p>Is it anyway possible to print the 3rd <code>cout</code> line before the user has typed into the <code>cmd</code> variable? That way, the text field will be wrapped with the <code>\"-\"</code> above and below, looking like this: </p>\n\n<pre><code>-------------\ncommand: &lt;user would type here&gt;\n-------------\n</code></pre>\n\n<p>If this is not possible, could you please point me into the direction of some possible libraries that I could use to achieve this?</p>\n"}, {"tags": ["c++", "arduino", "integer-arithmetic"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1567629723, "post_id": 57795331, "comment_id": 102023876, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/implicit_conversion#Numeric_promotions\" rel=\"nofollow noreferrer\">Handy reading</a>"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1567629881, "post_id": 57795331, "comment_id": 102023926, "body": "I remember one nice duplicate target with a list of promotion steps in order, but I cannot find it. Anyway, operands for arithmetic operations are always first promoted to <code>int</code> first. You cannot perform the operations on smaller type. It just happens that coliru has bigger <code>int</code> type than Arduino (I suspect Arduino has <code>sizeof(int) == 2</code>, but you should check that)."}, {"owner": {"reputation": 635, "user_id": 909968, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e28a47d4d3f81bd4536687c08db2d129?s=128&d=identicon&r=PG", "display_name": "AgentRev", "link": "https://stackoverflow.com/users/909968/agentrev"}, "edited": false, "score": 0, "creation_date": 1567630179, "post_id": 57795331, "comment_id": 102024043, "body": "Arduino type sizes: <a href=\"https://learn.adafruit.com/assets/31818\" rel=\"nofollow noreferrer\">learn.adafruit.com/assets/31818</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1567630750, "post_id": 57795331, "comment_id": 102024246, "body": "To expand on the dupe since it isn&#39;t exactly spelled out: When you do arithmetic with objects that have types &quot;smaller&quot; than an <code>int</code>, those objects are converted to an <code>int</code>/<code>unsigned int</code> using the usual arithmetic conversions.  In the Coliru case <code>int</code> is 32 bits so you do the math in 32 bit space and no overflow happens so you get <code>1000</code>.    In the Ardunio case, <code>int</code> is 16 bits so you do overflow and get <code>16</code> as the result.  This is not undefined behavior though since <code>s1</code> and <code>s2</code> are promoted to <code>unsigned int</code> and unsigned overflow has well defined behavior."}], "owner": {"reputation": 635, "user_id": 909968, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e28a47d4d3f81bd4536687c08db2d129?s=128&d=identicon&r=PG", "display_name": "AgentRev", "link": "https://stackoverflow.com/users/909968/agentrev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1567630558, "answer_count": 0, "score": 0, "last_activity_date": 1567629411, "creation_date": 1567629411, "question_id": 57795331, "link": "https://stackoverflow.com/questions/57795331/intermediary-data-type-used-between-arithmetic-operations-on-integers", "closed_reason": "Duplicate", "title": "Intermediary data type used between arithmetic operations on integers", "body": "<p>Consider the following code, <a href=\"http://coliru.stacked-crooked.com/a/58656fd929cf9d4f\" rel=\"nofollow noreferrer\">ran on Coliru</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvolatile unsigned short s1 = 1000;\nvolatile unsigned short s2 = 1000;\n\nint main()\n{\n    unsigned short test1 = s1*s1; // multiplication overflows\n    test1 /= s2;\n    std::cout &lt;&lt; test1 &lt;&lt; std::endl;\n\n    unsigned short test2 = s1*s1/s2; // multiplication doesn't overflow?\n    std::cout &lt;&lt; test2 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>16\n1000\n</code></pre>\n\n<p>Now, consider the following code, ran on an Arduino Mega:</p>\n\n<pre><code>volatile unsigned short s1 = 1000;\nvolatile unsigned short s2 = 1000;\n\nvoid setup()\n{\n    Serial.begin(9600);\n\n    unsigned short test1 = s1*s1; // multiplication overflows\n    test1 /= s2;\n    Serial.println(test1);\n\n    unsigned short test2 = s1*s1/s2; // multiplication also overflows\n    Serial.println(test2);\n}\n\nvoid loop() {}\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>16\n16\n</code></pre>\n\n<p>I'm confused as to what's happening here. Why is the <code>s1*s1</code> from <code>test2</code> not overflowing on Coliru? If every step of the operation was treated like an <code>unsigned short</code>, it should overflow, which it does on Arduino, but not on Coliru. Is there a bigger \"intermediary\" integer type used between each operation step, and if so, what determines that type?</p>\n"}, {"tags": ["c++", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 5596200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad4f6608569fcbe4907bf196df92aa1?s=128&d=identicon&r=PG&f=1", "display_name": "shay", "link": "https://stackoverflow.com/users/5596200/shay"}, "edited": false, "score": 0, "creation_date": 1567629339, "post_id": 57795237, "comment_id": 102023737, "body": "That makes sense, but then why does explicitly casting <code>m_arr_sz</code> to <code>long unsigned int</code> not suppress the warning?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 610, "user_id": 5596200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad4f6608569fcbe4907bf196df92aa1?s=128&d=identicon&r=PG&f=1", "display_name": "shay", "link": "https://stackoverflow.com/users/5596200/shay"}, "edited": false, "score": 0, "creation_date": 1567629660, "post_id": 57795237, "comment_id": 102023856, "body": "@shay Because casting it could still give you the same behavior.  No matter how you do it if variable holds <code>-1</code> then the result is going to be a very large number.  The cast won&#39;t stop that behavior so you still get a warning."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1567628854, "last_edit_date": 1567628854, "creation_date": 1567628759, "answer_id": 57795237, "question_id": 57795161, "link": "https://stackoverflow.com/questions/57795161/different-wsign-conversion-behavior-when-creating-array-with-member/57795237#57795237", "title": "Different -Wsign-conversion behavior when creating array with member", "body": "<p>When you have <code>const int sz = 1;</code> in the global scope it is a constant expression.  This means the compiler knows 100% what the value is and it knows that since the value of <code>sz</code> is represetanble in the range of an unsigned integer type it does not issue a warning.</p>\n\n<p>Conversely, <code>const int m_arr_sz = 1;</code> in the class is not a constant expression.  It is a member of the class, and it will be initialized to <code>1</code> if no initializer is given in a constructor.  This makes the variable a \"run time variable\", i.e. one whose value might not be known at compile time.  Since that is the case, gcc is going to issue a warning since it can't guarantee in all cases that you'll get the correct behavior.  Yes, in this trivial case it could do a more in-depth static analysis, but that slows down compile times.  It's easier to just issue a warning.</p>\n"}], "owner": {"reputation": 610, "user_id": 5596200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad4f6608569fcbe4907bf196df92aa1?s=128&d=identicon&r=PG&f=1", "display_name": "shay", "link": "https://stackoverflow.com/users/5596200/shay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57795237, "answer_count": 1, "score": 1, "last_activity_date": 1567628854, "creation_date": 1567628289, "question_id": 57795161, "link": "https://stackoverflow.com/questions/57795161/different-wsign-conversion-behavior-when-creating-array-with-member", "title": "Different -Wsign-conversion behavior when creating array with member", "body": "<p>I'm seeing different sign conversion warning behavior when I allocate an array with a member variable as the size than when I allocate with a non-member variable. </p>\n\n<p>If I create an array with a member variable of type <code>const int</code> I get a <code>warning: conversion to \u2018long unsigned int\u2019 from \u2018const int\u2019 may change the sign of the result [-Wsign-conversion]</code> warning. I get this warning even if I <code>static_cast</code> the member to <code>long unsigned int</code>. If I initialize the array with a non-member variable of type <code>const int</code> I get no sign conversion warnings.</p>\n\n<p>I'm seeing this with gcc 7.4.0 on Ubuntu 18.04, compiling with just <code>g++ -Wsign-conversion main.cpp</code></p>\n\n<p>Example:</p>\n\n<pre><code>const int sz = 1;\n\nclass Foo\n{\n  Foo()\n    :\n      m_arr1(new char[sz]),                                       // no warning\n      m_arr2(new char[static_cast&lt;long unsigned int&gt;(sz)]),       // no warning\n      m_arr3(new char[m_arr_sz]),                                 // warning\n      m_arr4(new char[static_cast&lt;long unsigned int&gt;(m_arr_sz)])  // warning\n  {\n\n  }\n\n  ~Foo()\n  {\n    delete[] m_arr1;\n    delete[] m_arr2;\n    delete[] m_arr3;\n    delete[] m_arr4;\n  }\n\nprivate:\n  const int m_arr_sz = 1;\n  char* m_arr1;\n  char* m_arr2;\n  char* m_arr3;\n  char* m_arr4;\n};\n\n\nint main()\n{\n  return 0;\n}\n</code></pre>\n\n<p>It doesn't seem to matter whether the initialization happens in the member initializer list, or in the body of the constructor, or if the array being initialized is a member or not.</p>\n\n<p>Is this a bug? Or is there actually some difference that I'm not aware of?</p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1567626431, "post_id": 57794926, "comment_id": 102022969, "body": "Can you explain what the <code>N</code> and <code>M</code> arguments are supposed to control?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1567626500, "post_id": 57794926, "comment_id": 102022993, "body": "N and M would be the size of the first and second parameter vectors (input and output in foo()s)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567626551, "post_id": 57794926, "comment_id": 102023013, "body": "FWIW, if you are using <code>dynamic_cast</code> you generally have a design flaw.  If you are going to use it you really should check the return value to make sure it is not <code>nullptr</code> otherwise you&#39;re going to open yourself up to undefined behavior."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1567626581, "post_id": 57794926, "comment_id": 102023023, "body": "If <code>N</code> and <code>M</code> are the size of the vectors, and they have to be known at compile time, why are you using <code>std::vector</code> and not <code>std::array</code>?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567626667, "post_id": 57794926, "comment_id": 102023056, "body": "@NathanOliver agreed, on cast, just trying to keep the minimal example small :-)"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1567626732, "post_id": 57794926, "comment_id": 102023081, "body": "@cdhowie the larger program in which this need arose justifies the vector. And even if it were a bad decision, well, the API is vector. But good point, once I have the solution working for vectors I&#39;ll consider a change"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1567628139, "post_id": 57794926, "comment_id": 102023336, "body": "Strictly C++11 or also C++14 and C++17 feature are allowed?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1567628663, "post_id": 57794926, "comment_id": 102023480, "body": "@max66 any of the three (i&#39;m assuming anything before 11 would be extremely convoluted and 20 is too recent)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1567630632, "post_id": 57794926, "comment_id": 102024201, "body": "@Jeffrey - OK: added a C++14 answer (but also an example of a C++20 simplification)"}], "answers": [{"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": true, "score": 2, "last_activity_date": 1567629556, "last_edit_date": 1567629556, "creation_date": 1567628155, "answer_id": 57795141, "question_id": 57794926, "link": "https://stackoverflow.com/questions/57794926/template-function-for-casting-multiple-number-of-params/57795141#57795141", "title": "Template function for casting multiple number of params", "body": "<p>The basic idea behind any template recursion is to handle the arguments one at a time, recurse on the function with one input type argument removed, and then terminate when the template argument list is empty.</p>\n\n<p>A common way to handle two variadic type lists is to define a \"pack\" type that you can specialize on, where the pack takes a variable number of template arguments.  This gives you the ability to easily separate multiple sets of variadic type arguments.</p>\n\n<p>Here, I demonstrate this example by declaring <code>type_pack</code> without any implementation (which is fine, we only use it as a type and we never instantiate it) and then I declare multiple specializations of <code>foo_fn</code> that are designed to:</p>\n\n<ul>\n<li>Peel the first type off of one of the two lists and perform the <code>dynamic_cast</code>.</li>\n<li>Determine the next step by removing the first type argument to the relevant pack type.</li>\n<li>Transition to the second pack when the first one becomes empty.</li>\n<li>Pass the processed (cast) arguments through to the next step.</li>\n<li>Finally, call <code>bar()</code> with the computed arguments when both packs are empty.</li>\n</ul>\n\n<pre><code>template &lt;typename...&gt;\nstruct type_pack;\n\n// Base declaration that we will specialize.\ntemplate &lt;int, int, typename, typename&gt;\nstruct foo_fn;\n\n// Specialization handling when the first pack is not empty.\ntemplate &lt;int OffsetA, int OffsetB, typename THead, typename... T1, typename... T2&gt;\nstruct foo_fn&lt;OffsetA, OffsetB, type_pack&lt;THead, T1...&gt;, type_pack&lt;T2...&gt;&gt; {\n    template &lt;typename... Args&gt;\n    static void f(foovec_t const &amp; input, foovec_t const &amp; output, Args &amp;&amp; ... args) {\n        return foo_fn&lt;\n            OffsetA + 1,\n            OffsetB,\n            type_pack&lt;T1...&gt;,\n            type_pack&lt;T2...&gt;\n        &gt;::f(input, output, std::forward&lt;Args&gt;(args)..., dynamic_cast&lt;THead *&gt;(input[OffsetA]));\n    }\n};\n\n// Specialization handling when the first pack is empty and the second\n// pack is not empty.\ntemplate &lt;int OffsetA, int OffsetB, typename THead, typename... T&gt;\nstruct foo_fn&lt;OffsetA, OffsetB, type_pack&lt;&gt;, type_pack&lt;THead, T...&gt;&gt; {\n    template &lt;typename... Args&gt;\n    static void f(foovec_t const &amp; input, foovec_t const &amp; output, Args &amp;&amp; ... args) {\n        return foo_fn&lt;\n            OffsetA,\n            OffsetB + 1,\n            type_pack&lt;&gt;,\n            type_pack&lt;T...&gt;\n        &gt;::f(input, output, std::forward&lt;Args&gt;(args)..., dynamic_cast&lt;THead *&gt;(output[OffsetB]));\n    }\n};\n\n// Specialization handling the terminating case (all packs empty).\ntemplate &lt;int OffsetA, int OffsetB&gt;\nstruct foo_fn&lt;OffsetA, OffsetB, type_pack&lt;&gt;, type_pack&lt;&gt;&gt; {\n    template &lt;typename... Args&gt;\n    static void f(foovec_t const &amp;, foovec_t const &amp;, Args &amp;&amp; ... args) {\n        bar(std::forward&lt;Args&gt;(args)...);\n    }\n};\n\n// Helper type to provide the two initial integer values.\ntemplate &lt;typename, typename&gt;\nstruct foo;\n\ntemplate &lt;typename... T1, typename... T2&gt;\nstruct foo&lt;type_pack&lt;T1...&gt;, type_pack&lt;T2...&gt;&gt; {\n    static void f(foovec_t const &amp; input, foovec_t const &amp; output) {\n        foo_fn&lt;0, 0, type_pack&lt;T1...&gt;, type_pack&lt;T2...&gt;&gt;::f(input, output);\n    }\n};\n</code></pre>\n\n<p>You would call this like <code>foo&lt;type_pack&lt;DerivedFooData, Other&gt;, type_pack&lt;DerivedFooData, Other, Other&gt;&gt;::f(container, container2)</code> in your second example.  Note that you don't have to provide any sizes; these are inferred from the size of each pack.</p>\n\n<p>See <a href=\"http://coliru.stacked-crooked.com/a/036bdd6cd6aa476a\" rel=\"nofollow noreferrer\">this demo</a> and note that the pointer arguments where the type doesn't match come through as null.</p>\n\n<p>I don't attempt to define <code>bar()</code> as I assume you have already done this, or know how to do it.  The <code>bar()</code> in my example only accepts specific pointer types (for the purposes of testing that the casts were correctly performed).</p>\n\n<p>This code uses only C++11 features.</p>\n\n<hr>\n\n<p>Note that <code>std::forward</code> is not strictly necessary because the cast values are always pointers.  However, it's good to get in the habit of using it when forwarding a variable-size argument list.  If the values were huge strings/vectors then forwarding at each step would eliminate a ton of useless copying.</p>\n"}, {"comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1567650926, "post_id": 57795311, "comment_id": 102028196, "body": "Clever use of <code>std::index_sequence</code>, I like it."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 3, "last_activity_date": 1567630568, "last_edit_date": 1567630568, "creation_date": 1567629215, "answer_id": 57795311, "question_id": 57794926, "link": "https://stackoverflow.com/questions/57794926/template-function-for-casting-multiple-number-of-params/57795311#57795311", "title": "Template function for casting multiple number of params", "body": "<p>Not elegant at all (and not sure about the exact indexes) but... something as follows (given that you can use C++14) should works (if I understand correctly what do you want)</p>\n\n<pre><code>template &lt;std::size_t Dim1, typename ... Ts, std::size_t ... Is&gt;\nvoid foo_helper (std::index_sequence&lt;Is...&gt;, std::vector&lt;FooData*&gt; inV,\n                 std::vector&lt;FooData*&gt; outV)\n { bar( dynamic_cast&lt;Ts*&gt;(Is &lt; Dim1 ? inV[Is] : outV[Is-Dim1])... ); }\n\ntemplate &lt;std::size_t Dim1, std::size_t Dim2, typename ... Ts&gt;\nvoid foo (std::vector&lt;FooData*&gt; inV, std::vector&lt;FooData*&gt; outV)\n { foo_helper&lt;Dim1, Ts...&gt;\n      (std::make_index_sequence&lt;Dim1+Dim2&gt;{}, inV, outV); }\n</code></pre>\n\n<p>I know that C++20 is too recent for you but, just for fun, I show you how use the new C++20 lambda-template feature to avoid the use of the helper function</p>\n\n<pre><code>// from C++20: foo_helper() isn't needed anymore\ntemplate &lt;std::size_t Dim1, std::size_t Dim2, typename ... Ts&gt;\nvoid foo (std::vector&lt;FooData*&gt; inV, std::vector&lt;FooData*&gt; outV)\n { [&amp;]&lt;std::size_t ... Is&gt;(std::index_sequence&lt;Is...&gt;)\n    { bar( dynamic_cast&lt;Ts*&gt;(Is &lt; Dim1 ? inV[Is] : outV[Is-Dim1])... ); }\n      (std::make_index_sequence&lt;Dim1+Dim2&gt;{}); }\n</code></pre>\n\n<p>The following is a full compiling C++14 example</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;type_traits&gt;\n\n\nstruct FooData { virtual ~FooData() {}; };\nclass DerivedFooData: public FooData { };\nclass Other         : public FooData { }; \n\nvoid bar (DerivedFooData*, DerivedFooData*) {}\nvoid bar (DerivedFooData*, Other*, DerivedFooData*, Other*, Other*) {}\n\ntemplate &lt;std::size_t Dim1, typename ... Ts, std::size_t ... Is&gt;\nvoid foo_helper (std::index_sequence&lt;Is...&gt;, std::vector&lt;FooData*&gt; inV,\n                 std::vector&lt;FooData*&gt; outV)\n { bar( dynamic_cast&lt;Ts*&gt;(Is &lt; Dim1 ? inV[Is] : outV[Is-Dim1])... ); }\n\ntemplate &lt;std::size_t Dim1, std::size_t Dim2, typename ... Ts&gt;\nvoid foo (std::vector&lt;FooData*&gt; inV, std::vector&lt;FooData*&gt; outV)\n { foo_helper&lt;Dim1, Ts...&gt;\n      (std::make_index_sequence&lt;Dim1+Dim2&gt;{}, inV, outV); }\n\nint main ()\n {\n   DerivedFooData d1, d2, d3;\n   std::vector&lt;FooData*&gt; container1 {&amp;d1, &amp;d2};\n   std::vector&lt;FooData*&gt; container2 {&amp;d1, &amp;d2, &amp;d3};\n\n   foo&lt;1, 1, DerivedFooData, DerivedFooData&gt;(container1, container2);\n\n   foo&lt;2, 3, DerivedFooData, Other, DerivedFooData, Other, Other&gt;\n      (container1, container2);\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1567634797, "last_edit_date": 1567634797, "creation_date": 1567634116, "answer_id": 57796081, "question_id": 57794926, "link": "https://stackoverflow.com/questions/57794926/template-function-for-casting-multiple-number-of-params/57796081#57796081", "title": "Template function for casting multiple number of params", "body": "<p>I prefer \"pack type\" syntax instead of give extra numbers, so</p>\n\n<pre><code>foo&lt;std::tuple&lt;DerivedFooData, Other&gt;, std::tuple&lt;DerivedFooData, Other, Other&gt;&gt;\n</code></pre>\n\n<p>instead of your:</p>\n\n<pre><code>foo&lt;2, 3, DerivedFooData, Other, DerivedFooData, Other, Other&gt;\n</code></pre>\n\n<p>You can still do:</p>\n\n<pre><code>template &lt;typename Tuple, std::size_t ... Is1, std::size_t ... Is2, typename ... Ts&gt;\nvoid foo(std::index_sequence&lt;Is1...&gt;, std::index_sequence&lt;Is2...&gt;, Ts&amp;&amp;...args)\n{\n    foo&lt;std::tuple&lt;std::tuple_element_t&lt;Is1, Tuple&gt;...&gt;,\n        std::tuple&lt;std::tuple_element_t&lt;sizeof...(Is1) + Is2, Tuple&gt;...&gt;&gt;(\n            std::forward&lt;Ts&gt;(args)...);\n}\n\ntemplate &lt;std::size_t N1, std::size_t N2, typename ... Ts&gt;\nvoid foo(const std::vector&lt;FooData*&gt;&amp; input, const std::vector&lt;FooData*&gt;&amp; output)\n{\n    static_assert(N1 + N2 == sizeof...(Ts), \"!\");\n    foo&lt;std::tuple&lt;Ts...&gt;&gt;(std::make_index_sequence&lt;N1&gt;{},\n                           std::make_index_sequence&lt;N2&gt;{},\n                           input,\n                           output);\n}\n</code></pre>\n\n<p>to use your syntax.</p>\n\n<p>Now using a primary helper to cast each vector element inside a <code>tuple</code></p>\n\n<pre><code>template &lt;typename Pack&gt; struct dynamic_cast_as_tuple;\n\ntemplate &lt;typename ...Ts&gt;\nstruct dynamic_cast_as_tuple&lt;std::tuple&lt;Ts...&gt;&gt;\n{\n    template &lt;typename T&gt;\n    std::tuple&lt;Ts*...&gt; operator ()(const std::vector&lt;T*&gt;&amp; v) const\n    {\n        return (*this)(v, std::index_sequence_for&lt;Ts...&gt;{});\n    }\n\nprivate:\n    template &lt;typename T, std::size_t ... Is&gt;\n    std::tuple&lt;Ts*...&gt; operator ()(const std::vector&lt;T*&gt;&amp; v, std::index_sequence&lt;Is...&gt;) const\n    {\n        return {dynamic_cast&lt;Ts*&gt;(v[Is])...};\n    }\n};\n</code></pre>\n\n<p>And then, wanted function is:</p>\n\n<pre><code>template &lt;typename pack1, typename pack2&gt;\nvoid foo(const std::vector&lt;FooData*&gt;&amp; input, const std::vector&lt;FooData*&gt;&amp; output)\n{\n    std::apply([](auto*... ps){ bar(ps...); },\n               std::tuple_cat(\n                   dynamic_cast_as_tuple&lt;pack1&gt;{}(input),\n                   dynamic_cast_as_tuple&lt;pack2&gt;{}(output))\n        );\n}\n\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/aJ1YZQ\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p><code>std::index_sequence</code> is C++14 and <code>std::apply</code> c++17, but can be implemented in C++11.</p>\n"}], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 57795141, "answer_count": 3, "score": 1, "last_activity_date": 1567634797, "creation_date": 1567626256, "last_edit_date": 1567629486, "question_id": 57794926, "link": "https://stackoverflow.com/questions/57794926/template-function-for-casting-multiple-number-of-params", "title": "Template function for casting multiple number of params", "body": "<p>I'm trying to write a template function that will perform a set of <code>dynamic_casts()</code> based on its template parameter. I've got the following to illustrate:</p>\n\n<pre><code>class FooData\n{\npublic:\n    virtual ~FooData() {};\n};\nclass DerivedFooData: public FooData{};\nclass Other: public FooData{};\n\nvoid bar(DerivedFooData* d1, DerivedFooData* d2) {}\nvoid bar(DerivedFooData* d1, Other*, DerivedFooData* d2, Other*, Other*) {}\n\n\nint main()\n{\n    DerivedFooData d1,d2;\n    std::vector&lt;FooData*&gt; container1{&amp;d1, &amp;d2};\n    std::vector&lt;FooData*&gt; container2{&amp;d1, &amp;d2};\n\n    // I want bar to be called with container1[0] cast to DerivedFooData and container2[1] cast to DerivedFooData \n    // the first two template params are each container size\n\n    foo&lt;1, 1, DerivedFooData, DerivedFooData&gt;(container, container2);\n\n    // I want bar to be called with\n    // container1[0] cast to DerivedFooData\n    // container1[1] cast to Other\n    // container2[0] cast to DerivedFooData\n    // container2[1] cast to Other\n    // container2[2] cast to Other\n    foo&lt;2, 3, DerivedFooData, Other, DerivedFooData, Other, Other&gt;(container, container2);\n}\n</code></pre>\n\n<p>I can manually create some of those:</p>\n\n<pre><code>template &lt;int N, int M, typename U, typename V&gt;\nvoid foo(const std::vector&lt;FooData*&gt;&amp; input, const std::vector&lt;FooData*&gt;&amp; output) \n{\n    bar(dynamic_cast&lt;U*&gt;(input[0]), dynamic_cast&lt;V*&gt;(output[0]));\n}\n\ntemplate &lt;int N, int M, typename U, typename V, typename W, typename X, typename Y&gt;\nvoid foo(const std::vector&lt;FooData*&gt;&amp; input, const std::vector&lt;FooData*&gt;&amp; output) \n{\n    bar(dynamic_cast&lt;U*&gt;(input[0]), dynamic_cast&lt;V*&gt;(input[1]), dynamic_cast&lt;W*&gt;(output[0]), dynamic_cast&lt;X*&gt;(output[1]), dynamic_cast&lt;Y*&gt;(output[2]));\n}\n</code></pre>\n\n<p>But I can't figure out how to specify in a generic way all combinations of <code>N</code> and <code>M</code>. I assume variadic templates will come in somewhere, but I would need some guidance.</p>\n"}, {"tags": ["c++", "eclipse", "sfml", "mingw-w64"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1567627213, "post_id": 57794659, "comment_id": 102023243, "body": "The first one is a pthread implementation for windows. I&#39;m not sure about that one. Never had a problem with it. The second two are bits of the C++ Standard library implementation, and if adding <code>-static</code> to c++ Build-&gt;Settings-&gt; MinGW C++ Linker-&gt;Miscellaneous-&gt;Linker Flags Didn&#39;t resolve them, All I can suggest is that you make sure you&#39;ve added <code>-static</code> to both the Debug and Release configuration."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567631221, "post_id": 57794659, "comment_id": 102024398, "body": "Did you try to put all of the dlls in the same folder as the executable?"}, {"owner": {"reputation": 1, "user_id": 12005217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAQfJo6qzmaMHdUfiwsvmWXqaQAN_sp_kvuzzYF=k-s128", "display_name": "Maksim Shaynyuk", "link": "https://stackoverflow.com/users/12005217/maksim-shaynyuk"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567727873, "post_id": 57794659, "comment_id": 102059565, "body": "@drescherjm I did add all the dll&#39;s, I&#39;ve added a image in my original post to show the folder and the error it gives me. @user4581301 I&#39;ve added <code>-static</code> to the linker settings and the debug configuration and still gives me the same issue."}], "owner": {"reputation": 1, "user_id": 12005217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAQfJo6qzmaMHdUfiwsvmWXqaQAN_sp_kvuzzYF=k-s128", "display_name": "Maksim Shaynyuk", "link": "https://stackoverflow.com/users/12005217/maksim-shaynyuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567727477, "creation_date": 1567624992, "last_edit_date": 1567727477, "question_id": 57794659, "link": "https://stackoverflow.com/questions/57794659/trouble-setting-up-sfml-c-in-eclipse", "title": "Trouble setting up sfml/c++ in eclipse", "body": "<p>I've been trying to set up SFML for graphics for a while and I'm having an issue with running the application. Looked at various tutorials and videos and couldn't find anything, nothing with eclipse that is. After setting up the environment and linking the headers and libraries, the application doesn't open and requires these 3 files:</p>\n\n<ul>\n<li>libwinpthread-1.dll</li>\n<li>libgcc_s_seh-1.dll</li>\n<li>libstdc++-6.dll</li>\n</ul>\n\n<p>I've tried a couple things, linking them statically (doesn't seem to work gives the me same error requiring the files), pasting the files into the folder with the other dll files (gives me a error saying  application was unable to start correctly 0xc000007b). The code that is in my main file is from the tutorial page from the sfml website. Here are some properties of my project...</p>\n\n<p><a href=\"https://i.stack.imgur.com/bxFGm.png\" rel=\"nofollow noreferrer\">libraries</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Io9mh.png\" rel=\"nofollow noreferrer\">linker settings</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ePUkb.png\" rel=\"nofollow noreferrer\">workspace</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/JNPjF.jpg\" rel=\"nofollow noreferrer\">dll's</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/l2F4P.png\" rel=\"nofollow noreferrer\">error</a></p>\n\n<p>What am I missing here please help!</p>\n"}, {"tags": ["c++", "linux", "dynamic"], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 10271057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6a85b0e30d380ec495e739a096e75c?s=128&d=identicon&r=PG&f=1", "display_name": "Sohrab Honargohar", "link": "https://stackoverflow.com/users/10271057/sohrab-honargohar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567996077, "creation_date": 1567996077, "answer_id": 57847194, "question_id": 57794597, "link": "https://stackoverflow.com/questions/57794597/finding-the-rendezvous-structure-of-tracee-program-being-debugged/57847194#57847194", "title": "Finding the rendezvous structure of tracee (program being debugged)", "body": "<pre><code>// You need to include &lt;link.h&gt;. All structures are explained\n// in elf(5) manual pages.\n// Caller has opened \"prog_name\", the debugee, and fd is the\n// file descriptor. You can send the name instead, and do open()\n// here.\n// Debugger is tracing the debugee, so we are using ptrace().\n\nvoid getRandezvousStructure(int fd, pid_t pd, r_debug&amp; rendezvous) {\n\n    Elf64_Ehdr elfHeader;\n    char* elfHdrPtr = (char*) &amp;elfHeader;\n    read(fd, elfHdrPtr, sizeof(elfHeader));\n\n    Elf64_Addr debugeeEntry = elfHeader.e_entry; // entry point of debugee\n\n// Here, set a break at debugeeEntry, and after \"PTRACE_CONT\",\n// and waitpid(), remove the break, and set rip back to debugeeEntry.\n// After that, here it goes.\n\n    lseek(fd, elfHeader.e_shoff, SEEK_SET); // offset of section header\n\n    Elf64_Shdr secHeader;\n    elfHdrPtr = (char*) &amp;secHeader;\n    Elf64_Dyn* dynPtr;\n\n// Keep reading until we get: secHeader.sh_addr.\n// That is the address of _DYNAMIC.\n\n    for (int i = 0; i &lt; elfHeader.e_shnum; i++) {\n        read(fd, elfHdrPtr, elfHeader.e_shentsize);\n        if (secHeader.sh_type == SHT_DYNAMIC) {\n            dynPtr = (Elf64_Dyn*) secHeader.sh_addr; // address of _DYNAMIC\n            break;\n        }\n    }\n\n// Here, we get \"dynPtr-&gt;d_un.d_ptr\" which points to rendezvous\n// structure, r_debug\n\n    uint64_t data;\n\n    for (;; dynPtr++) {\n        data = ptrace(PTRACE_PEEKDATA, pd, dynPtr, 0);\n        if (data == DT_NULL) break;\n        if (data == DT_DEBUG) {\n            data = ptrace(PTRACE_PEEKDATA, pd, (uint64_t) dynPtr + 8 , 0);\n            break;\n        }\n    }\n\n// Using ptrace() we read sufficient chunk of memory of debugee\n// to copy to rendezvous.\n\n    int ren_size = sizeof(rendezvous);\n    char* buffer = new char[2 * ren_size];\n    char* p = buffer;\n    int total = 0;\n    uint64_t value;\n\n    for (;;) {\n        value = ptrace(PTRACE_PEEKDATA, pd, data, 0);\n        memcpy(p, &amp;value, sizeof(value));\n        total += sizeof(value);\n        if (total &gt; ren_size + sizeof(value)) break;\n        data += sizeof(data);\n        p += sizeof(data);\n    }\n\n// Finally, copy the memory to rendezvous, which was\n// passed by reference.\n\n    memcpy(&amp;rendezvous, buffer, ren_size);\n    delete [] buffer;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10271057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6a85b0e30d380ec495e739a096e75c?s=128&d=identicon&r=PG&f=1", "display_name": "Sohrab Honargohar", "link": "https://stackoverflow.com/users/10271057/sohrab-honargohar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567996077, "creation_date": 1567624634, "question_id": 57794597, "link": "https://stackoverflow.com/questions/57794597/finding-the-rendezvous-structure-of-tracee-program-being-debugged", "title": "Finding the rendezvous structure of tracee (program being debugged)", "body": "<p>I need debugger I am writing to give me the name of shared lib that program being debugged is linking with, or loading dynamically. I get the rendezvous structure as described in link.h, and answers to other questions, using DT_DEBUG, in the loop over _DYNAMIC[].\nFirst, debugger never hits the break point set at r_brk.\nThen I put a break in the program being debugged, and use link_map to print all loaded libraries. It only prints libraries loaded by the debugger, not the program being debugged.\nIt seems that, the rendezvous structure I am getting belongs to the debugger itself. If so, could you please tell me how to get the rendezvous structure of the program I am debugging? If what I am doing must work, your confirmation will be helpful, perhaps with some hint as to what else might be needed.\nThank you.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567624758, "post_id": 57794592, "comment_id": 102022328, "body": "did you try and see any difference?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567624781, "post_id": 57794592, "comment_id": 102022340, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/180172/default-constructor-with-empty-brackets\" title=\"default constructor with empty brackets\">stackoverflow.com/questions/180172/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1567625250, "post_id": 57794629, "comment_id": 102022527, "body": "<i>which a smart compiler is likely to optimize A a = A(); into anyway.</i> starting in C++17 it is mandated to be the same. <i>thank you guaranteed copy elision</i>"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1567624809, "creation_date": 1567624809, "answer_id": 57794629, "question_id": 57794592, "link": "https://stackoverflow.com/questions/57794592/what-is-the-difference-between-object-creating-types-in-c/57794629#57794629", "title": "What is the difference between object creating types in c++?", "body": "<p><code>A a();</code> is not a variable declaration, it is a function declaration. It declares a function <code>a</code> that takes no parameters and returns an <code>A</code>.</p>\n\n<p><code>A a = A();</code> is a variable declaration and initialization.  It declares a variable <code>a</code> of type <code>A</code> and initializes it from the temp object that is created by explicitly calling <code>A</code>'s default constructor.  The simpler way to do this is <code>A a;</code> (note the lack of parenthesis!), which a smart compiler is likely to optimize <code>A a = A();</code> into anyway.  If you want to explicitly call the default constructor (if one is present), use curly brackets instead of parenthesis: <code>A a{};</code></p>\n"}], "owner": {"reputation": 71, "user_id": 11995641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6160db6c7228552bb3449ba52176175b?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11995641/programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 57794629, "answer_count": 1, "score": 1, "last_activity_date": 1567624809, "creation_date": 1567624621, "question_id": 57794592, "link": "https://stackoverflow.com/questions/57794592/what-is-the-difference-between-object-creating-types-in-c", "title": "What is the difference between object creating types in c++?", "body": "<p>Assume that I have \"A\" class. I want to create an \"a\" object using that class with 2 different ways, i.e:</p>\n\n<pre><code>A a();\nA a = A();\n</code></pre>\n\n<p>What is the difference between them?</p>\n"}, {"tags": ["c++", "parsing", "arduino", "nodemcu"], "comments": [{"owner": {"reputation": 302, "user_id": 11958215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9htzU.jpg?s=128&g=1", "display_name": "Breno Teodoro", "link": "https://stackoverflow.com/users/11958215/breno-teodoro"}, "edited": false, "score": 0, "creation_date": 1567626008, "post_id": 57794555, "comment_id": 102022818, "body": "it may have something to do with the fingerprint being expired. The comment just above the constant declaration indicates the fingerprint expires on June/2019"}, {"owner": {"reputation": 23, "user_id": 9947035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b31b837edfe9ec78d634276de51eb?s=128&d=identicon&r=PG&f=1", "display_name": "John D.", "link": "https://stackoverflow.com/users/9947035/john-d"}, "reply_to_user": {"reputation": 302, "user_id": 11958215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9htzU.jpg?s=128&g=1", "display_name": "Breno Teodoro", "link": "https://stackoverflow.com/users/11958215/breno-teodoro"}, "edited": false, "score": 0, "creation_date": 1567632743, "post_id": 57794555, "comment_id": 102024891, "body": "Sorry, it was the false codesnippet, but with the current snippet the problem is still there."}], "owner": {"reputation": 23, "user_id": 9947035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86b31b837edfe9ec78d634276de51eb?s=128&d=identicon&r=PG&f=1", "display_name": "John D.", "link": "https://stackoverflow.com/users/9947035/john-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567632623, "creation_date": 1567624417, "last_edit_date": 1567632623, "question_id": 57794555, "link": "https://stackoverflow.com/questions/57794555/why-dont-i-get-the-whole-page-when-parsing-a-website", "title": "Why don&#39;t I get the whole page when parsing a website?", "body": "<p>I want parse a https-website with an NodeMCU-Board. For that, I used the original Arduino BasicHttpsClient example. But unfortunately I don't get the full source-code of the website back. The result everytime only consist of the HTML-Header and a few lines of the HTML-Body. The rest of the website is allways missing.</p>\n\n<p>Does someone knows, why this problem occurs?</p>\n\n<pre><code> /**\n   BasicHTTPSClientNofingerprint.ino\n\n   1.03.2019\n\n*/\n\n#include &lt;Arduino.h&gt;\n\n#include &lt;ESP8266WiFi.h&gt;\n#include &lt;ESP8266WiFiMulti.h&gt;\n\n#include &lt;ESP8266HTTPClient.h&gt;\n\n#include &lt;WiFiClientSecureBearSSL.h&gt;\n// Fingerprint for demo URL, expires on June 2, 2019, needs to be updated well before this date\n// const uint8_t fingerprint[20] = {0x5A, 0xCF, 0xFE, 0xF0, 0xF1, 0xA6, 0xF4, 0x5F, 0xD2, 0x11, 0x11, 0xC6, 0x1D, 0x2F, 0x0E, 0xBC, 0x39, 0x8D, 0x50, 0xE0};\n\nESP8266WiFiMulti WiFiMulti;\n\nvoid setup() {\n\n  Serial.begin(115200);\n  // Serial.setDebugOutput(true);\n\n  Serial.println();\n  Serial.println();\n  Serial.println();\n\n  for (uint8_t t = 4; t &gt; 0; t--) {\n    Serial.printf(\"[SETUP] WAIT %d...\\n\", t);\n    Serial.flush();\n    delay(1000);\n  }\n\n  WiFi.mode(WIFI_STA);\n  WiFiMulti.addAP(\"SSID\", \"PASSWORD\");\n}\n\nvoid loop() {\n  // wait for WiFi connection\n  if ((WiFiMulti.run() == WL_CONNECTED)) {\n\n    std::unique_ptr&lt;BearSSL::WiFiClientSecure&gt;client(new BearSSL::WiFiClientSecure);\n\n    //client-&gt;setFingerprint(fingerprint);\n    client-&gt;setInsecure();\n\n    HTTPClient https;\n\n    Serial.print(\"[HTTPS] begin...\\n\");\n    if (https.begin(*client, \"https://jigsaw.w3.org/HTTP/connection.html\")) {  // HTTPS\n\n      Serial.print(\"[HTTPS] GET...\\n\");\n      // start connection and send HTTP header\n      int httpCode = https.GET();\n\n      // httpCode will be negative on error\n      if (httpCode &gt; 0) {\n        // HTTP header has been send and Server response header has been handled\n        Serial.printf(\"[HTTPS] GET... code: %d\\n\", httpCode);\n\n        // file found at server\n        if (httpCode == HTTP_CODE_OK || httpCode == HTTP_CODE_MOVED_PERMANENTLY) {\n          String payload = https.getString();\n          Serial.println(payload);\n        }\n      } else {\n        Serial.printf(\"[HTTPS] GET... failed, error: %s\\n\", https.errorToString(httpCode).c_str());\n      }\n\n      https.end();\n    } else {\n      Serial.printf(\"[HTTPS] Unable to connect\\n\");\n    }\n  }\n\n  Serial.println(\"Wait 10s before next round...\");\n  delay(10000);\n}\n</code></pre>\n"}, {"tags": ["c++", "runtime"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 2, "creation_date": 1567624066, "post_id": 57794473, "comment_id": 102022042, "body": "No difference if you tell the compiler to optimize it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1567624122, "post_id": 57794473, "comment_id": 102022065, "body": "Most likely the compiler will turn the second code block into the first.  Check the assembly to confirm.  If you are really worried, you can use a tool like google benchmark (you can use <a href=\"http://quick-bench.com/\" rel=\"nofollow noreferrer\">this online version</a> to play around with) to get real data to go on"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1567624502, "post_id": 57794473, "comment_id": 102022215, "body": "You can explore this for yourself, live: <a href=\"https://godbolt.org/z/H0nLgb\" rel=\"nofollow noreferrer\">godbolt.org/z/H0nLgb</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1567629332, "post_id": 57794473, "comment_id": 102023734, "body": "This doesn&#39;t address the question, but note that <code>4&#47;3</code> is 1."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567631015, "post_id": 57794473, "comment_id": 102024333, "body": "I would write <code>constexpr double drop_size_adder(double r1, double r2) { return cbrt((sphere_volume(r1) + sphere_volume(r2)) &#47; sphere_volume(1.));}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "is_accepted": true, "score": 1, "last_activity_date": 1567625519, "last_edit_date": 1567625519, "creation_date": 1567625202, "answer_id": 57794708, "question_id": 57794473, "link": "https://stackoverflow.com/questions/57794473/using-extra-variables-to-make-calculations-easier-to-understand-how-much-am/57794708#57794708", "title": "Using extra variables to make calculations easier to understand - (how much) am I slowing down my code?", "body": "<p>In a debug build, in a debugger, that code will be much easier to step through and see what's going on, yes.</p>\n\n<p>In an optimized build, the output should be identical to the less 'steppable' version[s].</p>\n\n<p>You can even using something like <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">CompilerExplorer</a> to compare the compiled output with various compiler flags.  <code>-O2</code> (upper case 'o', not zero) is a commonly supported compiler flag.  It'll also let you compare the output/behavior across different compilers.</p>\n\n<p>Without an optimization flag, the assembly will change.  With it, it'll be the same.  Which is precisely what you want.</p>\n\n<p>Compiler optimizations are pretty darn good these days.  Optimizing your execution speed is more about algorithms/containers (\"big O\") and memory usage patterns (\"cache coherency\") than it is about tweaking the assembly just so.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1567625588, "creation_date": 1567625588, "answer_id": 57794791, "question_id": 57794473, "link": "https://stackoverflow.com/questions/57794473/using-extra-variables-to-make-calculations-easier-to-understand-how-much-am/57794791#57794791", "title": "Using extra variables to make calculations easier to understand - (how much) am I slowing down my code?", "body": "<p>Write code for readability. Don't try to be clever. </p>\n\n<p>This being said, if you still want to know what is the difference, then you can look at the compilers output (eg <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">here</a>). This:</p>\n\n<pre><code>#define M_PI 1\n\ndouble cbrt(double);\n\ndouble drop_size_adder(double r1, double r2) {\n    return cbrt((4 / 3 * M_PI * r1*r1*r1 + 4 / 3 * M_PI * r2*r2*r2) * 3 / (4 * M_PI));\n}\n\ndouble drop_size_adder2(double r1, double r2) {\n    double vol1, vol2, vol3, r3;\n    vol1 = 4 / 3 * M_PI * r1*r1*r1;\n    vol2 = 4 / 3 * M_PI * r2*r2*r2;\n    vol3 = vol1 + vol2;\n    r3 = cbrt(3 * vol3 / (4 * M_PI));\n    return r3;\n}\n</code></pre>\n\n<p>Is translated by gcc (-O3) to:</p>\n\n<pre><code>_Z15drop_size_adderdd:\n        movapd  xmm2, xmm0\n        mulsd   xmm0, xmm0\n        mulsd   xmm0, xmm2\n        movapd  xmm2, xmm1\n        mulsd   xmm2, xmm1\n        mulsd   xmm2, xmm1\n        addsd   xmm0, xmm2\n        mulsd   xmm0, QWORD PTR .LC0[rip]\n        mulsd   xmm0, QWORD PTR .LC1[rip]\n        jmp     _Z4cbrtd\n_Z16drop_size_adder2dd:\n        movapd  xmm2, xmm0\n        mulsd   xmm0, xmm0\n        mulsd   xmm0, xmm2\n        movapd  xmm2, xmm1\n        mulsd   xmm2, xmm1\n        mulsd   xmm2, xmm1\n        addsd   xmm0, xmm2\n        mulsd   xmm0, QWORD PTR .LC0[rip]\n        mulsd   xmm0, QWORD PTR .LC1[rip]\n        jmp     _Z4cbrtd\n.LC0:\n        .long   0\n        .long   1074266112\n.LC1:\n        .long   0\n        .long   1070596096\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/nOEr6u\" rel=\"nofollow noreferrer\">same example @ godbolt</a></p>\n\n<p>I am not fluent in assembly, but obviously the two are identical. Conclusion: If you do care about efficiency then still write your code for readability. The compiler very likely knows better how to optimize code than you.</p>\n"}], "owner": {"reputation": 43, "user_id": 12011784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc948bf6b4a5ac36a3adfd38080ab2d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/12011784/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57794708, "answer_count": 2, "score": 1, "last_activity_date": 1567625588, "creation_date": 1567623983, "question_id": 57794473, "link": "https://stackoverflow.com/questions/57794473/using-extra-variables-to-make-calculations-easier-to-understand-how-much-am", "title": "Using extra variables to make calculations easier to understand - (how much) am I slowing down my code?", "body": "<p><strong>Main question</strong></p>\n\n<p>Suppose I am writing a function to find the radius of the resulting globule when two water drops collide:</p>\n\n<pre><code>double drop_size_adder(double r1, double r2) {\n    return cbrt((4 / 3 * M_PI * r1*r1*r1 + 4 / 3 * M_PI * r2*r2*r2) * 3 / (4 * M_PI));\n}\n</code></pre>\n\n<p>(I realise that a lot of that factors out, but imagine it doesn't for the sake of this part of the question.)</p>\n\n<p>I could rewrite the above calculation to make it much easier to understand what's going on by introducing various variables to split the calculation into steps:</p>\n\n<pre><code>double drop_size_adder(double r1, double r2) {\n    double vol1, vol2, vol3, r3;\n    vol1 = 4 / 3 * M_PI * r1*r1*r1;\n    vol2 = 4 / 3 * M_PI * r2*r2*r2;\n    vol3 = vol1 + vol2;\n    r3 = cbrt(3 * vol3 / (4 * M_PI));\n    return r3;\n}\n</code></pre>\n\n<p>Would this significantly increase the time it takes for the function to run?</p>\n\n<p><strong>Secondary question</strong></p>\n\n<p>Additionally, suppose I rewrote the above function, would there be any significant runtime difference between the two blocks of code below:</p>\n\n<pre><code>double drop_size_adder(double r1, double r2) {\n    return cbrt(r1*r1*r1 + r2*r2*r2);\n}\n\nint main()\n{\n    double water_r = 3.2;\n    double oil_r = 5.4;\n    combined_r = drop_size_adder(water_r, oil_r);\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>int main()\n{\n    double water_r = 3.2;\n    double oil_r = 5.4;\n    combined_r = cbrt(water_r*water_r*water_r + oil_r*oil_r*oil_r);\n}\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "class"], "comments": [{"owner": {"reputation": 2741, "user_id": 1988667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0QYaj.jpg?s=128&g=1", "display_name": "Reanimation", "link": "https://stackoverflow.com/users/1988667/reanimation"}, "reply_to_user": {"reputation": 811, "user_id": 3126207, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000574810448/picture?type=large", "display_name": "pedrohreis", "link": "https://stackoverflow.com/users/3126207/pedrohreis"}, "edited": false, "score": 0, "creation_date": 1567626534, "post_id": 57794450, "comment_id": 102023004, "body": "Thank you for the link. I don&#39;t think it is a duplication as the <code>main.cpp</code> is already used. So I just need to know how a method in that file can be called from the java class. Thank you for posting."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1567630259, "post_id": 57794450, "comment_id": 102024077, "body": "The answers to the linked question at the top of the page describe how to use JNI to do what you want."}], "answers": [{"comments": [{"owner": {"reputation": 2741, "user_id": 1988667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0QYaj.jpg?s=128&g=1", "display_name": "Reanimation", "link": "https://stackoverflow.com/users/1988667/reanimation"}, "edited": false, "score": 0, "creation_date": 1567668704, "post_id": 57795445, "comment_id": 102033104, "body": "Thank you for posting. Unfortunately, I get the following error in the console: E/art: No implementation found for void <code>com.secrethq.utils.PTServicesBridge.adjustScoreUpNow() (tried Java_com_secrethq_utils_PTServicesBridge_adjustScoreUpNow and Java_com_secrethq_utils_PTServicesBridge_adjustScoreUpNow__) D&#47;AndroidRuntime: Shutting down VM</code> Which is confusing because the method is there."}, {"owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "reply_to_user": {"reputation": 2741, "user_id": 1988667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0QYaj.jpg?s=128&g=1", "display_name": "Reanimation", "link": "https://stackoverflow.com/users/1988667/reanimation"}, "edited": false, "score": 0, "creation_date": 1567675569, "post_id": 57795445, "comment_id": 102036623, "body": "@Reanimation are you sure that your method get to the library .so? Extract native library from you apk or find it in your local build then execute <code>objdump -TC &lt;lib.so location&gt; | grep adjustScoreUpNow</code>. Please note that <code>objdump</code> should be from android NDK."}, {"owner": {"reputation": 2741, "user_id": 1988667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0QYaj.jpg?s=128&g=1", "display_name": "Reanimation", "link": "https://stackoverflow.com/users/1988667/reanimation"}, "edited": false, "score": 0, "creation_date": 1567686604, "post_id": 57795445, "comment_id": 102042687, "body": "Well the generated Android Studio project already has a working main.cpp. So I\u2019ve just added the function to that. As you can tell I have no experience with Android or Java. Thanks."}, {"owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "reply_to_user": {"reputation": 2741, "user_id": 1988667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0QYaj.jpg?s=128&g=1", "display_name": "Reanimation", "link": "https://stackoverflow.com/users/1988667/reanimation"}, "edited": false, "score": 0, "creation_date": 1567688546, "post_id": 57795445, "comment_id": 102043807, "body": "@Reanimation I understand that you use cocos2d and I even have generated project on my side. If <code>main.cpp</code> get built it should contain <code>Java_&lt;full_package_name&gt;_PTServicesBridge_adjustScoreUpNow</code> function. Right? But java cannot load it so probably <code>.so</code> library haven&#39;t been updated. In order to verify that provide result of command I&#39;ve mentioned above. Otherwise I will not be able to help you"}, {"owner": {"reputation": 2741, "user_id": 1988667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0QYaj.jpg?s=128&g=1", "display_name": "Reanimation", "link": "https://stackoverflow.com/users/1988667/reanimation"}, "edited": false, "score": 0, "creation_date": 1567778640, "post_id": 57795445, "comment_id": 102077204, "body": "Thank you for trying to help. I&#39;m unable to find the location and I don&#39;t know how to execute that command. I think this is a sign to forget Android :("}, {"owner": {"reputation": 925, "user_id": 5280144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lmosh.jpg?s=128&g=1", "display_name": "iman kazemayni", "link": "https://stackoverflow.com/users/5280144/iman-kazemayni"}, "edited": false, "score": 0, "creation_date": 1619093799, "post_id": 57795445, "comment_id": 118804003, "body": "Depends on how you load your library, you may need this in your java class: System.loadLibrary(&quot;native-lib&quot;);"}], "tags": [], "owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "is_accepted": false, "score": 1, "last_activity_date": 1567630084, "creation_date": 1567630084, "answer_id": 57795445, "question_id": 57794450, "link": "https://stackoverflow.com/questions/57794450/call-c-method-from-java-class/57795445#57795445", "title": "Call C++ method from Java class?", "body": "<p>In <code>PTServicesBridge</code> define native java function. Something like:</p>\n\n<pre><code>private static native void  adjustScoreUpNow();\n</code></pre>\n\n<p>In <code>main.cpp</code> provide following implementation </p>\n\n<pre><code>extern \"C\" {\nJNIEXPORT void JNICALL Java_&lt;full_package_name&gt;_PTServicesBridge_adjustScoreUpNow(JNIEnv *env, jclass clazz) {\n   //Call native side conterpart \n   adjustScoreUpNow();     \n}\n}\n</code></pre>\n\n<p>Where <code>&lt;full_package_name&gt;</code> should be package name of <code>PTServicesBridge</code> with <code>_</code> instead of <code>.</code>. </p>\n\n<p>For more info about how JNI works please take a look at <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html\" rel=\"nofollow noreferrer\">docs</a>.</p>\n"}], "owner": {"reputation": 2741, "user_id": 1988667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0QYaj.jpg?s=128&g=1", "display_name": "Reanimation", "link": "https://stackoverflow.com/users/1988667/reanimation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "closed_date": 1567630234, "answer_count": 1, "score": 1, "last_activity_date": 1567630084, "creation_date": 1567623901, "last_edit_date": 1567626440, "question_id": 57794450, "link": "https://stackoverflow.com/questions/57794450/call-c-method-from-java-class", "closed_reason": "Duplicate", "title": "Call C++ method from Java class?", "body": "<p>I make applications using an engine that generates Xcode or Android Projects and I primarily use Xcode for my projects. However I am looking to use Android Studio for the first time.</p>\n\n<p>In the generated Android Studio project I have a <code>PTServicesBridge</code> Class where I add my own code for additional features outside the engine. (In this instance I need to adjust a score variable up but 1).</p>\n\n<p><strong>PTServicesBridge Class:</strong></p>\n\n<pre><code>public class PTServicesBridge\n    public static PTServicesBridge instance() {\n        if (sInstance == null)\n            sInstance = new PTServicesBridge();\n        return sInstance;\n    }\n\n    public static void initBridge(Cocos2dxActivity activity, String appId){\n        //some initialisations\n    }\n\n    //...\n\n    public static void adjustScoreUp(){\n        //I need to call a function from here &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n    }\n}\n</code></pre>\n\n<p>The project includes a <code>main.cpp</code> file that includes the method I need to call.</p>\n\n<p><strong>Main.cpp</strong></p>\n\n<pre><code>#include \"screens/PTPScoreController.h\"\n\nusing namespace cocos2d;\n\nextern \"C\"\n{\n    jint JNI_OnLoad(JavaVM *vm, void *reserved){\n    JniHelper::setJavaVM(vm);\n    return JNI_VERSION_1_4;\n}\n\n//...\n\nvoid adjustScoreUpNow{\n    PTPScoreController::scores().points.addCurrent(1); //This method &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n}\n</code></pre>\n\n<p>How can I call the <code>adjustScoreUpNow</code> from the <code>PTServicesBridge</code> Class?</p>\n\n<p>Edit:\nI was told by the engines support to do it this way. I was hoping there was an easy solution to calling the .cpp method from the Java class.</p>\n"}, {"tags": ["c++", "vector", "resize", "2d-vector"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567622923, "post_id": 57794100, "comment_id": 102021620, "body": "Warning: Using <code>#include &lt;vector&gt;</code> along with <code>#include &lt;bits&#47;stdc++.h&gt;</code> suggests you don&#39;t know what <code>#include &lt;bits&#47;stdc++.h&gt;</code> does. Don&#39;t use stuff until you&#39;ve researched and understood it. That said, once you&#39;ve found out what <code>#include &lt;bits&#47;stdc++.h&gt;</code> does and the implications, you&#39;ll probably not want to use it. But if you do continue to use it, be very careful using it in conjunction with <code>using namespace std;</code> because they make some of each other&#39;s worst effects much more likely to occur."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 3, "last_activity_date": 1567623664, "last_edit_date": 1567623664, "creation_date": 1567622625, "answer_id": 57794169, "question_id": 57794100, "link": "https://stackoverflow.com/questions/57794100/2-d-vector-size/57794169#57794169", "title": "2-D vector Size", "body": "<p>Here </p>\n\n<blockquote>\n<pre><code>vector&lt;vector&lt;int&gt;&gt; d;\nfor (int i = 0; i &lt; size; i++)\n{\n    d[i].resize(size);\n    //...\n</code></pre>\n</blockquote>\n\n<p><code>d</code> is a vector of size <code>0</code> and accessing <code>d[i]</code> is out of bounds. You seem to be aware that you first have to resize the inner vectors, but you missed to do the same for the outer one. I dont really understand how your code can run as far as printing anything for <code>arr[0].size();</code> without segfaulting. Anyhow, the problem is that there is no element at <code>arr[0]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 10846184, "user_type": "registered", "profile_image": "https://graph.facebook.com/1430016000468900/picture?type=large", "display_name": "Damian Andrysiak", "link": "https://stackoverflow.com/users/10846184/damian-andrysiak"}, "is_accepted": false, "score": 0, "last_activity_date": 1567671134, "last_edit_date": 1567671134, "creation_date": 1567626748, "answer_id": 57795015, "question_id": 57794100, "link": "https://stackoverflow.com/questions/57794100/2-d-vector-size/57795015#57795015", "title": "2-D vector Size", "body": "<p>But first, Look at your function argument -> is a copy of your vector ,use (vector&lt;> &amp; my vec) to avoid the copying mechanism of vector class (copy constructor for instance) cause if you put there your vector as a parameter and u will make some changes inside the function brackets you will not see any results ( if you dont wanna change your primary vector from function main, keep it without changes). </p>\n\n<p>Secondly, look at code snippet pasted below. </p>\n\n<pre><code>std::vector&lt;std::vector&lt;typename&gt;&gt; my_vector{};\nmy_vector.resize(width);\nfor (size_t i = 0; i &lt; my_vector.size(); ++i)\n{\n    my_vector[i].resize(height);\n}\n</code></pre>\n\n<p>It gives you two dimensional vector</p>\n\n<p>Operator[] for vector is overloaded and you have to use my_vector[0].size() just\nmy_vector[1].size() and so on ! I recommend for that displaying the size by kind of loops given in c++ standards</p>\n\n<p>Regards!</p>\n"}], "owner": {"reputation": 43, "user_id": 11671234, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-w48twANsLtw/AAAAAAAAAAI/AAAAAAAACqw/ondcnUE5YCE/photo.jpg?sz=128", "display_name": "Garvit Joshi", "link": "https://stackoverflow.com/users/11671234/garvit-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 57794169, "answer_count": 2, "score": 1, "last_activity_date": 1567671134, "creation_date": 1567622247, "last_edit_date": 1567623044, "question_id": 57794100, "link": "https://stackoverflow.com/questions/57794100/2-d-vector-size", "title": "2-D vector Size", "body": "<p>In C++ , I Made A Code That has A 2D Vector in it and Users are Required to give The inputs In 2D vector . I find It difficult To find The no. of rows in 2 vector with the help of size function.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint diagonalDifference(vector&lt;vector&lt;int&gt;&gt; arr)\n{\n    int d = arr[0].size();\n    cout &lt;&lt; d;\n    return 0;\n}\n\nint main()\n{\n    int size;\n    cin &gt;&gt; size;\n    vector&lt;vector&lt;int&gt;&gt; d;\n    for (int i = 0; i &lt; size; i++)\n    {\n        d[i].resize(size);\n        for (int j = 0; j &lt; size; j++)\n        {\n            cin &gt;&gt; d[i][j];\n        }\n    }\n    cout &lt;&lt; diagonalDifference(d);\n}\n</code></pre>\n\n<p>The Output Should BE No. Rows , But it is coming NULL</p>\n"}, {"tags": ["c++", "std"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12021499"}, "edited": false, "score": 0, "creation_date": 1567622561, "post_id": 57794092, "comment_id": 102021488, "body": "Is it possible to find all the indexes of occurrences of the word in the vector?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1567622637, "post_id": 57794092, "comment_id": 102021526, "body": "@Gani Yes, perform the search in a loop. Instead of searching from <code>begin</code> to <code>end</code>, replace <code>begin</code> by the iterator following the last one you found. I don&#39;t think the standard library has a function for that."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1567623016, "post_id": 57794092, "comment_id": 102021650, "body": "@Gani: Why do you want indices so badly? What&#39;s wrong with using iterators?"}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "edited": false, "score": 2, "creation_date": 1567623348, "post_id": 57794092, "comment_id": 102021763, "body": "Iterators are the glue that holds containers and algorithms together.  I&#39;ve seen several 3rd party collection libraries, and none of them had iterators.  They also didn&#39;t have algorithms because they (we) couldn&#39;t get them to work with enough containers without &#39;em."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12021499"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1567636715, "post_id": 57794092, "comment_id": 102025805, "body": "@NicolBolas I am working on some algorithm which needs all the indexes to be stored in the vector. Its easy to code for it but I was just curious if the STL library has something for me."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1567637199, "post_id": 57794092, "comment_id": 102025907, "body": "@Gani It&#39;s the standard library, or std library. STL is something else and essentially unused anymore. <a href=\"https://stackoverflow.com/questions/5205491/whats-the-difference-between-stl-and-c-standard-library\">What&#39;s the difference between \u201cSTL\u201d and \u201cC++ Standard Library\u201d?</a> Someone else already edited your question to reflect this."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 12, "last_activity_date": 1567622570, "last_edit_date": 1567622570, "creation_date": 1567622201, "answer_id": 57794092, "question_id": 57794072, "link": "https://stackoverflow.com/questions/57794072/why-does-the-stdfind-for-vector-return-a-iterator-instead-of-the-integer-posit/57794092#57794092", "title": "Why does the std::find for vector return a iterator instead of the integer position", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"noreferrer\"><code>std::find</code></a> works for all sorts of containers, not just <code>std::vector</code>. For example, it works with <code>std::list</code> but that container does not allow accessing elements by index (at least not easily). For it to work with all kinds of containers it needs to return something all containers understand, an iterator.</p>\n\n<p>Edit : If you want to find the index position equivalent to a given iterator, you can use <a href=\"https://en.cppreference.com/w/cpp/iterator/distance\" rel=\"noreferrer\"><code>std::distance</code></a>. For example : </p>\n\n<p><code>std::distance(std::begin(words), itr1);</code></p>\n\n<p>This will work for standard containers but it may be slower for some. It returns the size of the container if the element is not found, since <code>find</code> returns <code>end</code> if it fails to find the element and the distance between <code>begin</code> and <code>end</code> is the size of the container.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12021499"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 57794092, "answer_count": 1, "score": 7, "last_activity_date": 1567622682, "creation_date": 1567622097, "last_edit_date": 1567622682, "question_id": 57794072, "link": "https://stackoverflow.com/questions/57794072/why-does-the-stdfind-for-vector-return-a-iterator-instead-of-the-integer-posit", "title": "Why does the std::find for vector return a iterator instead of the integer position", "body": "<p>Why does the vector find return the iterator instead of the integer value?</p>\n\n<pre><code>vector&lt;string&gt;::iterator itr1 = std::find(words.begin(), words.end(), word);\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl", "glfw", "glm-math"], "owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1570726604, "creation_date": 1567621853, "last_edit_date": 1570726604, "question_id": 57794023, "link": "https://stackoverflow.com/questions/57794023/texture-view-gl-depth-stencil-texture-mode-parameter-set-to-gl-stencil-index-an", "title": "Texture view, GL_DEPTH_STENCIL_TEXTURE_MODE parameter set to GL_STENCIL_INDEX and Intel GPU", "body": "<p>I have a depth-stencil texture attached to a framebuffer. I need to access the stencil index of this texture from a shader.</p>\n\n<p>I'm using a texture view to ease the access to the stencil index of this texture (as suggested in <a href=\"https://stackoverflow.com/a/27536167/9659683\">this answer</a>). It works perfectly fine on the dedicated nVidia GPU, but doesn't work on the integrated Intel GPU. I know that the stencil values are there in the depth-stencil texture because I checked them via glGetTexImage(). But when I access these values in the shader (by the texture view) I get only zeroes.\nI can't figure out if either my code is wrong/incomplete or the Intel driver is bugged.</p>\n\n<p>I did some tests. If I set the parameter <code>GL_DEPTH_STENCIL_TEXTURE_MODE</code> to <code>GL_STENCIL_INDEX</code> directly on the depth-stencil texture, avoiding the use of the texture view, then it works fine. If I use the texture view to retrieve the depth component (leaving <code>GL_DEPTH_STENCIL_TEXTURE_MODE</code> to the default value, i.e. <code>GL_DEPTH_COMPONENT</code>), then the texture view works fine. It seems that only the combination of both produces an error.</p>\n\n<ul>\n<li>OpenGL 4.3 </li>\n<li>Dedicated GPU: NVIDIA GeForce MX150 (support OpenGL up to\n4.6) </li>\n<li>Integrated GPU: Intel UHD Graphics 620 (support OpenGL up to 4.4) OS: Windows 64-bit 10.0.18362</li>\n</ul>\n\n<p>The full minimal code is pretty long, so I removed certain parts, though I cannot remove more parts, since I'm not sure where the bug could be.</p>\n\n<p><strong>filter.fs</strong></p>\n\n<pre><code>#version 430 core\nout vec4 fs_frag_color;\n\nin vec2 vs_tex_coords;\n\nlayout (binding = 0) uniform usampler2D u_stencil_tex;\n\n\nvoid main()\n{   \n    uint draw_count = texture(u_stencil_tex, vs_tex_coords).r;\n\n    // Show stencil buffer\n    if(draw_count == 1)\n    {\n        fs_frag_color = vec4(0, 1, 0, 1);\n    }\n    else if(draw_count &gt; 1 &amp;&amp; draw_count &lt;= 10)\n    {\n        float orange_shade = float(draw_count + 5) / 15.0;\n        fs_frag_color = vec4(orange_shade, orange_shade, 0 ,1);\n    }\n    else if(draw_count &gt; 10 &amp;&amp; draw_count &lt;= 50)\n    {\n        float red_shade = float(draw_count + 5) / 55.0;\n        fs_frag_color = vec4(red_shade, 0, 0, 1);\n    }\n    else\n    {\n        fs_frag_color = vec4(0, 0, 0, 1);\n    }\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>int main(void)\n{\n    //Initialize GLFW and open a window with a 4.3 OpenGL context\n    // ...\n\n    glEnable(GL_DEBUG_OUTPUT);\n    glEnable(GL_DEBUG_OUTPUT_SYNCHRONOUS);\n    glDebugMessageCallback(debugMessage_callback, nullptr);\n\n\n\n    Shader main_shader;\n    main_shader.load(\"shader.vs\", \"shader.fs\");\n\n    Shader filter_shader;\n    filter_shader.load(\"filter.vs\", \"filter.fs\");\n\n\n    //CUBE VAO\n    GLuint cube_VAO;\n    GLuint cube_VBO;\n    glGenVertexArrays(1, &amp;cube_VAO);\n    glGenBuffers(1, &amp;cube_VBO);\n    glBindVertexArray(cube_VAO);\n        // cube_VAO settings...\n    glBindVertexArray(0);\n\n\n    //OFFSCREEN FBO\n    GLuint offscreen_FBO = 0;\n    GLuint offscreen_colorTex = 0;\n    GLuint offscreen_depthStencilTex = 0;\n    GLuint offscreen_stencilTexView = 0;\n\n    int offscreen_width, offscreen_height;\n    glfwGetFramebufferSize(window1, &amp;offscreen_width, &amp;offscreen_height);\n    glGenFramebuffers(1, &amp;offscreen_FBO);\n    glBindFramebuffer(GL_FRAMEBUFFER, offscreen_FBO);\n\n        glGenTextures(1, &amp;offscreen_colorTex);\n        glActiveTexture(GL_TEXTURE0);\n        glBindTexture(GL_TEXTURE_2D, offscreen_colorTex);\n            glTexStorage2D(GL_TEXTURE_2D, 1, GL_RGB8, offscreen_width, \n                           offscreen_height);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n        glBindTexture(GL_TEXTURE_2D, 0); //unbind\n\n        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,\n                               GL_TEXTURE_2D, offscreen_colorTex, 0);\n\n        static GLenum offscreen_drawBuffers[] = { GL_COLOR_ATTACHMENT0 };\n        glDrawBuffers(1, offscreen_drawBuffers);\n\n\n        glGenTextures(1, &amp;offscreen_depthStencilTex);\n        glActiveTexture(GL_TEXTURE0);\n        glBindTexture(GL_TEXTURE_2D, offscreen_depthStencilTex);\n            glTexStorage2D(GL_TEXTURE_2D, 1, GL_DEPTH24_STENCIL8, \n                           offscreen_width, offscreen_height);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n        glBindTexture(GL_TEXTURE_2D, 0); //unbind\n\n        // Attach the depth and stencil texture to the framebuffer\n        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, \n                               GL_TEXTURE_2D, offscreen_depthStencilTex, 0);\n\n\n        glGenTextures(1, &amp;offscreen_stencilTexView);\n        glTextureView(offscreen_stencilTexView, GL_TEXTURE_2D, \n                      offscreen_depthStencilTex, GL_DEPTH24_STENCIL8, 0, 1, 0, 1);\n        glActiveTexture(GL_TEXTURE0);\n        glBindTexture(GL_TEXTURE_2D, offscreen_stencilTexView);\n            glTexParameteri(GL_TEXTURE_2D, GL_DEPTH_STENCIL_TEXTURE_MODE, \n                            GL_STENCIL_INDEX);\n        glBindTexture(GL_TEXTURE_2D, 0);\n        // ^^^^^^\n        // ^^^^^^  Here the important block\n        // ^^^^^^\n\n\n        // Check if the framebuffer is complete\n        if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)\n            throw std::runtime_error(\"The offscreen FBO is not complete.\");\n\n    glBindFramebuffer(GL_FRAMEBUFFER, 0); //unbind\n\n\n\n    // WINDOW RECTANGLE VAO\n    GLuint wRect_VAO;\n    GLuint wRect_VBO;\n    glGenVertexArrays(1, &amp;wRect_VAO);\n    glGenBuffers(1, &amp;wRect_VBO);\n    glBindVertexArray(wRect_VAO);\n        // wRect_VAO settings ...\n    glBindVertexArray(0);\n\n\n    while (!glfwWindowShouldClose(window1))\n    {\n        float ratio;\n        int width, height;\n\n        glfwGetFramebufferSize(window1, &amp;width, &amp;height);\n        ratio = width / (float)height;\n\n        glViewport(0, 0, width, height);\n\n\n        // Drawing on the offscreen FBO\n        glBindFramebuffer(GL_FRAMEBUFFER, offscreen_FBO);\n            glEnable(GL_DEPTH_TEST);\n\n            glEnable(GL_STENCIL_TEST);\n                glStencilFunc(GL_ALWAYS, 1, 0xFF); //stencil test always pass\n                glStencilOp(GL_KEEP, GL_INCR, GL_INCR); //the value stored in the stencil buffer is increased every time a fragment is not discarded\n\n            glClearColor(1.f, 1.f, 1.f, 1.f);\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);\n\n            main_shader.bind();\n\n            glm::mat4 view(1.0f); view = glm::translate(view, glm::vec3(0.f, 0.f, -3.f));\n            glm::mat4 projection = glm::perspective(glm::radians(45.f), 800.f / 600.f, 0.1f, 100.0f);\n            glm::mat4 model(1.f);\n            model = glm::rotate(model, glm::radians(static_cast&lt;float&gt;(glfwGetTime() * 20.f)), glm::vec3(1.f, 1.f, 0.f));\n            main_shader.set_mat4(\"model\", model);\n            main_shader.set_mat4(\"view\", view);\n            main_shader.set_mat4(\"projection\", projection);\n\n            glBindVertexArray(cube_VAO);\n                glDrawArrays(GL_TRIANGLES, 0, 36);\n            glBindVertexArray(0);\n\n        // Drawing on the default FBO\n        glBindFramebuffer(GL_FRAMEBUFFER, 0);\n            glDisable(GL_DEPTH_TEST);\n            glClearColor(0.f, 1.f, 1.f, 1.f);\n            glClear(GL_COLOR_BUFFER_BIT);\n\n            filter_shader.bind();\n\n            glActiveTexture(GL_TEXTURE0);\n            glBindTexture(GL_TEXTURE_2D, offscreen_stencilTexView);\n\n            glBindVertexArray(wRect_VAO);\n                glDrawArrays(GL_TRIANGLES, 0, 6);\n            glBindVertexArray(0);                                   \n        glBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n\n        glfwSwapBuffers(window1);\n\n\n        glfwPollEvents();\n    }\n\n    //Destroy the window and shut down GLFW ...\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "reference", "c++17"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1567622185, "post_id": 57793907, "comment_id": 102021338, "body": "I guess it&#39;s easier to handle memory the same way <code>new</code> does; this is, returning a pointer to the allocated block of memory."}, {"owner": {"reputation": 480, "user_id": 5108968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1606955929562108/picture?type=large", "display_name": "Victor Drouin", "link": "https://stackoverflow.com/users/5108968/victor-drouin"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1567622487, "post_id": 57793907, "comment_id": 102021458, "body": "that&#39;s not the point. I&#39;m not talking about allocation/deallocation of memory resource but about the way memory resources as passed around.  the reason memory_resource returns a pointer when allocating isn&#39;t because it&#39;s easier to do the same way new is doing but because allocation could fail (ex: by lack of memory) therefor returning nullptr is valid."}], "answers": [{"comments": [{"owner": {"reputation": 480, "user_id": 5108968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1606955929562108/picture?type=large", "display_name": "Victor Drouin", "link": "https://stackoverflow.com/users/5108968/victor-drouin"}, "edited": false, "score": 0, "creation_date": 1567622011, "post_id": 57794022, "comment_id": 102021257, "body": "About first point it&#39;s a good explanation.  About second one I still don&#39;t understand why get/set return a pointer and not a reference, and why polymorphic_allocator does take a pointer and not a reference."}, {"owner": {"reputation": 480, "user_id": 5108968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1606955929562108/picture?type=large", "display_name": "Victor Drouin", "link": "https://stackoverflow.com/users/5108968/victor-drouin"}, "edited": false, "score": 0, "creation_date": 1567623692, "post_id": 57794022, "comment_id": 102021894, "body": "do you have any knowledge about &quot;passing non-const references [...] is usually considered bad practice (except in overloaded operators)&quot; ? Same for &quot;there is a more compelling practice of avoiding constructors that take objects by reference and store their addresses&quot; : what is the reason behind that ?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1567622376, "last_edit_date": 1567622376, "creation_date": 1567621851, "answer_id": 57794022, "question_id": 57793907, "link": "https://stackoverflow.com/questions/57793907/why-set-get-default-resource-use-pointer-and-not-reference/57794022#57794022", "title": "Why set/get_default_resource use pointer and not reference?", "body": "<p>As the page you link cites, <code>set_default_resource()</code> does accept a null pointer and has specific behavior for that case:</p>\n\n<blockquote>\n  <p>If <code>r</code> is not null, sets the default memory resource pointer to <code>r</code>; otherwise, sets the default memory resource pointer to <code>std::pmr::new_delete_resource()</code>.</p>\n</blockquote>\n\n<p>The initial paper, <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3525.pdf\" rel=\"nofollow noreferrer\">N3525</a>, also cites as rationale:</p>\n\n<blockquote>\n  <p>We have found it is convenient to use <code>nullptr</code> as a surrogate for the \u201cdefault-default\u201d handler in various interfaces. The use here simply provides consistency and makes it easy to reset the default resource to its initial state.</p>\n</blockquote>\n\n<p>And a subsequent revision, <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2014/n3916.pdf\" rel=\"nofollow noreferrer\">N3916</a>, states:</p>\n\n<blockquote>\n  <p>Note that the memory-resource library is designed so that the <code>ShoppingList</code>\n  constructor accepts a pointer to a <code>memory_resource</code> rather than a reference to a\n  <code>memory_resource</code>. It was noted that one common practice is to use references\n  rather than pointers in situations where a null pointer is out of contract. However, there is a more compelling practice of avoiding constructors that take objects by reference and store their addresses. We also want to avoid passing non-const references, as that, too, is usually considered bad practice (except in overloaded operators).</p>\n</blockquote>\n"}], "owner": {"reputation": 480, "user_id": 5108968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1606955929562108/picture?type=large", "display_name": "Victor Drouin", "link": "https://stackoverflow.com/users/5108968/victor-drouin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 57794022, "answer_count": 1, "score": 3, "last_activity_date": 1567622376, "creation_date": 1567621283, "last_edit_date": 1567622303, "question_id": 57793907, "link": "https://stackoverflow.com/questions/57793907/why-set-get-default-resource-use-pointer-and-not-reference", "title": "Why set/get_default_resource use pointer and not reference?", "body": "<p>When using C++17 polymorphic allocator and set/get_default_resource methods (see <a href=\"https://en.cppreference.com/w/cpp/memory/set_default_resource\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/memory/set_default_resource</a> for instance), all resources are passed/returned by pointer while it makes little to no sens to use nullptr and it feels it could most of the time be a reference (then stored as ref_wrapper if needed).</p>\n\n<p>Is there any logical/style reason for that ?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 2, "creation_date": 1567620955, "post_id": 57793773, "comment_id": 102020806, "body": "What makes you think that the console supports drawing text in multiple sizes (simultaneously)?"}, {"owner": {"reputation": 63, "user_id": 6827763, "user_type": "registered", "profile_image": "https://graph.facebook.com/1240664809308093/picture?type=large", "display_name": "Francesco Zappal&#224;", "link": "https://stackoverflow.com/users/6827763/francesco-zappal%c3%a0"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1567621136, "post_id": 57793773, "comment_id": 102020886, "body": "I don&#39;t know, I&#39;m just asking if it&#39;s possible"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 7, "creation_date": 1567621367, "post_id": 57793773, "comment_id": 102020970, "body": "A console only has one font in one size, so no, you can&#39;t use different sizes."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 2, "creation_date": 1567631314, "post_id": 57793773, "comment_id": 102024440, "body": "You have a leak with the unnecessary <code>new</code> operator. Just declare <code>CONSOLE_FONT_INFOEX info = {0};</code> and pass <code>&amp;info</code> in to relevant function."}], "owner": {"reputation": 63, "user_id": 6827763, "user_type": "registered", "profile_image": "https://graph.facebook.com/1240664809308093/picture?type=large", "display_name": "Francesco Zappal&#224;", "link": "https://stackoverflow.com/users/6827763/francesco-zappal%c3%a0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567621007, "creation_date": 1567620633, "last_edit_date": 1567621007, "question_id": 57793773, "link": "https://stackoverflow.com/questions/57793773/is-there-a-way-to-print-2-textes-with-different-font-sizes-c", "title": "Is there a way to print 2 textes with different font sizes? C++", "body": "<p>I would like to print 2 textes, but with different size</p>\n\n<p>now I'm using this code to change the font size, it works but if I want a text bigger I can't.</p>\n\n<pre><code>#pragma comment(lib, \"user32\")\n\nHANDLE out = GetStdHandle(STD_OUTPUT_HANDLE);\n\nvoid fontsize(int a, int b) {\n\n    PCONSOLE_FONT_INFOEX lpConsoleCurrentFontEx = new CONSOLE_FONT_INFOEX();\n    lpConsoleCurrentFontEx-&gt;cbSize = sizeof(CONSOLE_FONT_INFOEX);\n    GetCurrentConsoleFontEx(out, 0, lpConsoleCurrentFontEx);\n    lpConsoleCurrentFontEx-&gt;dwFontSize.X = a;\n    lpConsoleCurrentFontEx-&gt;dwFontSize.Y = b;\n    SetCurrentConsoleFontEx(out, 0, lpConsoleCurrentFontEx);\n}\n\nvoid main() {\n\n\n    fontsize(12, 16);\n    cout &lt;&lt; \"text\" &lt;&lt; endl;\n\n\n    system(\"pause\");\n}\n\n</code></pre>\n\n<p>so imagine I have 2 textes, textA and textB.\nI want textB bigger than textA.</p>\n"}, {"tags": ["c++", "concurrency", "race-condition"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1567620571, "post_id": 57793739, "comment_id": 102020649, "body": "Not sure what needs clarifying. You say yourself that it&#39;s a race. Races introduce undefined behavior. Anything can happen."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1567620691, "post_id": 57793739, "comment_id": 102020704, "body": "Both threads are trying to modify <code>va</code> <b>at the same time</b>, even inside for-loops. Who wins? Unknow, so the final value of <code>va</code> can be anything."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1567620788, "post_id": 57793739, "comment_id": 102020739, "body": "I suspect that you believe that the increment and decrement operations are atomic. They\u2019re not."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567620809, "post_id": 57793739, "comment_id": 102020748, "body": "Even if the operation is atomic, without synchronization there&#39;s no guarantee if or when changes to <code>va</code> are actually pushed to a place that other threads can see them. For example, <code>va</code> may very well stored in a register."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1567620956, "post_id": 57793739, "comment_id": 102020807, "body": "BTW, optimizer are allowed to change those method as <code>va += 10000;</code>, <code>va += 10000;</code>, reducing even more &quot;chances&quot; to see race effect."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1567621053, "post_id": 57793739, "comment_id": 102020841, "body": "Note that a data race is a static property of a program. It\u2019s not a behaviour."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567621684, "post_id": 57793739, "comment_id": 102021119, "body": "Note that in general order matters also if you would properly synchonize access. Assume one thread would do <code>va = 0;</code> and the other <code>va = 1;</code> then even in a correct code (no data race) you do not necessarily know what thread comes first"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1567621923, "last_edit_date": 1592644375, "creation_date": 1567620904, "answer_id": 57793819, "question_id": 57793739, "link": "https://stackoverflow.com/questions/57793739/race-condition-when-incrementing-and-decrementing-global-variable-in-c/57793819#57793819", "title": "Race condition when incrementing and decrementing global variable in C++", "body": "<p>The standard says (quoting the latest draft):</p>\n<blockquote>\n<p>[intro.races]</p>\n<p>Two expression evaluations conflict if one of them modifies a memory location ([intro.memory]) and the other one reads or modifies the same memory location.</p>\n<p>The execution of a program contains a data race if it contains two potentially concurrent conflicting actions, at least one of which is not atomic, and neither happens before the other, except for the special case for signal handlers described below.\nAny such data race results in <strong>undefined behavior</strong>.</p>\n</blockquote>\n<p>Your example program has a data race, and the behaviour of the program is undefined.</p>\n<hr />\n<blockquote>\n<p>What I don't understand is how the order of operations matter in this example.</p>\n</blockquote>\n<p>The order of operations matters because the operations are not atomic, and they read and modify the same memory location.</p>\n<blockquote>\n<p>can undertand that the order matters if I had used va = va + 1; because then RHS va could have changed before getting back to assigned LHS va</p>\n</blockquote>\n<p>The same applies to the increment operator. The abstract machine will:</p>\n<ul>\n<li>Read a value from memory</li>\n<li>Increment the value</li>\n<li>Write a value back to memory</li>\n</ul>\n<p>There are multiple steps there that can interleave with operations in the other thread.</p>\n<p>Even if there was a single operation per thread, there would be no guarantee of well defined behaviour unless those operations are atomic.</p>\n<hr />\n<p>Note outside of the scope of C++: A CPU might have a single instruction for incrementing an integer in memory. For example, x86 has such instruction. It can be invoked both atomically and non-atomically. It would be wasteful for the compiler to use the atomic instruction unless you explicitly use atomic operations in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567621496, "post_id": 57793820, "comment_id": 102021019, "body": "imho your first part is slightly misleading. UB can result in assembly that looks fine one day but not the other day"}, {"owner": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567622255, "post_id": 57793820, "comment_id": 102021362, "body": "@formerlyknownas_463035818 I&#39;ve tried to make this more clear by emphasizing that the c++ operation is non-atomic because the underlying assembly instructions perform the get and set separately."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567622325, "post_id": 57793820, "comment_id": 102021399, "body": "actually only now I understand what you are saying ;) +1"}], "tags": [], "owner": {"reputation": 486, "user_id": 12016524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7AVMg_Fn_830g5v9YNnaTlqWUc-AOmj5Fp8lY=k-s128", "display_name": "fendall", "link": "https://stackoverflow.com/users/12016524/fendall"}, "is_accepted": false, "score": 4, "last_activity_date": 1567622023, "last_edit_date": 1567622023, "creation_date": 1567620911, "answer_id": 57793820, "question_id": 57793739, "link": "https://stackoverflow.com/questions/57793739/race-condition-when-incrementing-and-decrementing-global-variable-in-c/57793820#57793820", "title": "Race condition when incrementing and decrementing global variable in C++", "body": "<p>The important idea here is that when c++ is compiled it is \"translated\" to assembly language. The translation of <code>++va</code> or <code>--va</code> will result in assembly code that moves the value of <code>va</code> to a register, then stores the result of adding 1 to that register back to <code>va</code> in a separate instruction. In this way, it is exactly the same as <code>va = va + 1;</code>. It also means that the operation <code>va++</code> is not necessarily <strong><em>atomic</em></strong>.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/48497636/understanding-the-difference-between-i-and-i-at-the-assembly-level\">here</a> for an explanation of what the Assembly code for these instructions will look like.</p>\n\n<p>In order to make atomic operations, the variable could use a locking mechanism. You can do this by declaring an atomic variable (which will handle synchronization of threads for you):</p>\n\n<pre><code>std::atomic&lt;int&gt; va;\n</code></pre>\n\n<p>Reference: <a href=\"https://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/atomic/atomic</a></p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1567621023, "creation_date": 1567621023, "answer_id": 57793845, "question_id": 57793739, "link": "https://stackoverflow.com/questions/57793739/race-condition-when-incrementing-and-decrementing-global-variable-in-c/57793845#57793845", "title": "Race condition when incrementing and decrementing global variable in C++", "body": "<p>First of all, this is undefined behaviour since the two threads' reads and writes of the same non-atomic variable <code>va</code> are potentially concurrent and neither happens before the other.</p>\n\n<p>With that being said, if you want to understand what your computer is actually doing when this program is run, it may help to assume that <code>++va</code> is the same as <code>va = va + 1</code>. In fact, the standard says they are identical, and the compiler will likely compile them identically. Since your program contains UB, the compiler is not required to do anything sensible like using an atomic increment instruction. If you wanted an atomic increment instruction, you should have made <code>va</code> atomic. Similarly, <code>--va</code> is the same as <code>va = va - 1</code>. So in practice, various results are possible.</p>\n"}], "owner": {"reputation": 223, "user_id": 10337686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603f74483866e9de4db7500284262089?s=128&d=identicon&r=PG&f=1", "display_name": "sornbro", "link": "https://stackoverflow.com/users/10337686/sornbro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "accepted_answer_id": 57793819, "answer_count": 3, "score": 0, "last_activity_date": 1567622023, "creation_date": 1567620460, "question_id": 57793739, "link": "https://stackoverflow.com/questions/57793739/race-condition-when-incrementing-and-decrementing-global-variable-in-c", "title": "Race condition when incrementing and decrementing global variable in C++", "body": "<p>I found an example of a race condition that I was able to reproduce under <code>g++</code> in linux. What I don't understand is how the order of operations matter in this example.</p>\n\n<pre><code>int va = 0;\n\nvoid fa() {\n    for (int i = 0; i &lt; 10000; ++i)\n        ++va;\n}\n\nvoid fb() {\n    for (int i = 0; i &lt; 10000; ++i)\n        --va;\n}\n\nint main() {\n    std::thread a(fa);\n    std::thread b(fb);\n    a.join();\n    b.join();\n    std::cout &lt;&lt; va;\n}\n</code></pre>\n\n<p>I can undertand that the order matters if I had used <code>va = va + 1;</code> because then RHS <code>va</code> could have changed before getting back to assigned LHS <code>va</code>. Can someone clarify?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1567619554, "post_id": 57793518, "comment_id": 102020224, "body": "Just put that code in a loop that repeats 5 times. Btw you do not have to flush <code>std::cout</code> before reading from <code>std::cin</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567619559, "post_id": 57793518, "comment_id": 102020226, "body": "Read the section in your c++references on loops. This problem seems well suited to a <code>for</code> loop."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567620069, "post_id": 57793518, "comment_id": 102020435, "body": "&quot;<i>I&#39;m not allowed to use more then one variable of the same type</i>&quot; - Then perhaps an array, like <code>int num[5];</code> would be allowed? That would fit well with the loop the other guys suggested."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567620516, "post_id": 57793518, "comment_id": 102020620, "body": "@TedLyngmo Other guys? I&#39;ll have you know, sir, that <a href=\"https://en.wikipedia.org/wiki/On_the_Internet,_nobody_knows_you%27re_a_dog\" rel=\"nofollow noreferrer\"><i>I</i> am a chihuahua.</a>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567620630, "post_id": 57793518, "comment_id": 102020679, "body": "@user4581301 Sorry, I didn&#39;t mean to use <i>guys</i> in a gender or species specific way. I learned something by that: <a href=\"https://english.stackexchange.com/a/11817\">english.stackexchange.com/a/11817</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567621237, "post_id": 57793518, "comment_id": 102020927, "body": "Once again I fail to be funny. I&#39;m the best there is at what I do."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567622757, "post_id": 57793518, "comment_id": 102021559, "body": "@user4581301 :-D :-D <i>That</i> was funny :-)"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1567621339, "post_id": 57793875, "comment_id": 102020961, "body": "Style note: I&#39;d move the definition of <code>n</code> into the loops. Prevents accidental leakage of the loop index out into the rest of the code where it could cause problems."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567626430, "post_id": 57793875, "comment_id": 102022968, "body": "&quot;<i>One could say that both nums and n are of the same type</i>&quot; - One would be wrong."}], "tags": [], "owner": {"reputation": 5195, "user_id": 4005175, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/3N6Ze.jpg?s=128&g=1", "display_name": "Martin Heraleck&#253;", "link": "https://stackoverflow.com/users/4005175/martin-heraleck%c3%bd"}, "is_accepted": false, "score": 0, "last_activity_date": 1567621175, "creation_date": 1567621175, "answer_id": 57793875, "question_id": 57793518, "link": "https://stackoverflow.com/questions/57793518/how-do-i-get-this-c-code-to-read-five-integers-from-the-user-instead-of-one/57793875#57793875", "title": "How do I get this C++ code to read five integers from the user instead of one?", "body": "<p>If you want to repeat the procedure 5 times, you could just copy-paste it, but that's definitely not a good practice. What's much better is to use a loop/cycle, like <code>for</code>.</p>\n\n<p>You'll also need to store all 5 integers into memory. You could use 5 variables (<code>int n1, n2, n3...</code>), but again, that's not a very good practice and as you state, that's not allowed in your case. Solution is to use an array, which can hold several values of the same type.</p>\n\n<p>Here is a working example with explaining comments:</p>\n\n<pre><code>int nums[5];                 // this array will hold 5 integers\nint n;\n\ncout &lt;&lt; \"Write down 5 integers:\" &lt;&lt; endl;\nfor (n = 0; n &lt; 5; ++n) {    // run code in the braces 5 times\n    cin &gt;&gt; nums[n];          // store typed integer into nth position of the array\n}\n\ncout &lt;&lt; \"You wrote: \";\nfor (n = 0; n &lt; 5; ++n) {    // run code in the braces 5 times\n    cout &lt;&lt; nums[n] &lt;&lt; \" \";  // print integer at nth position of the array\n}\n</code></pre>\n\n<hr>\n\n<p><em>Note: One could say that both <code>nums</code> and <code>n</code> are of the same type, <code>int</code>. In that case, you could extend the array <code>nums</code> to the size of 6 items and use the last one (to which you can refer as <code>nums[5]</code>) as an indexing variable for the loops.</em></p>\n"}], "owner": {"reputation": 147, "user_id": 9312204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83b3dea4dabd6c79c8634664a59354?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9312204/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567621654, "creation_date": 1567619404, "last_edit_date": 1567619895, "question_id": 57793518, "link": "https://stackoverflow.com/questions/57793518/how-do-i-get-this-c-code-to-read-five-integers-from-the-user-instead-of-one", "title": "How do I get this C++ code to read five integers from the user instead of one?", "body": "<p>I'm taking an elementary programming course where we use C++ and I'm stuck on a couple of assignments. Please excuse my potentially bad terminology going forward. Part of my basic program I'm writting asks \"Write down 5 integers: \" and then the user gets to pick the integers and a message \"You wrote the integers: n1 n2 n3 n4 n5\" is returned. There are several of these questions and I'm not allowed to use more then one variable of the same type. The problem is that the user could respond with n1 n2 n3 n4 n5 hello, and hello is supposed to be ignored. How do I accomplish this? </p>\n\n<p>If we for a moment assume that we are only to write down one integer instead of 5, then perhaps something along the lines of the code below would work.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n     int num;\n     cout &lt;&lt; \"Write down an integer: \"\n          &lt;&lt; flush;\n     cin &gt;&gt; num;\n     cout &lt;&lt; \"You wrote the integer: \"\n          &lt;&lt; num\n          &lt;&lt; endl;   \n}\n</code></pre>\n\n<p>But how do I do this with five integers. Further, how do I ignore that extra hello? I'm assming that cin.ignore is to be used here somehow.</p>\n"}, {"tags": ["c++", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "edited": false, "score": 0, "creation_date": 1567625220, "post_id": 57793541, "comment_id": 102022515, "body": "I am trying to implement your last suggestion (passing class as argument) and somehow things aren&#39;t working as expected. would you care to give a simple example of how the declaration and definition of such solution would work? Thanks!"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "edited": false, "score": 0, "creation_date": 1567625836, "post_id": 57793541, "comment_id": 102022746, "body": "@SAR Something like <code>struct Foo {int a, b;};</code>, then <code>void operator[](Foo param){&#47;*use param.a and param.b here*&#47;}</code>."}, {"owner": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "edited": false, "score": 0, "creation_date": 1567626519, "post_id": 57793541, "comment_id": 102022999, "body": "Thank you so much!  It&#39;s so simple, and works like a charm"}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 5, "last_activity_date": 1567619866, "last_edit_date": 1567619866, "creation_date": 1567619476, "answer_id": 57793541, "question_id": 57793498, "link": "https://stackoverflow.com/questions/57793498/overloading-operator-to-accept-range/57793541#57793541", "title": "Overloading Operator [] to Accept Range", "body": "<p>It's impossible.</p>\n\n<p>You need to pick a different syntax, e.g:</p>\n\n<ul>\n<li><code>MyClass(1,5)</code> - overloaded <code>operator()</code>.</li>\n<li><code>MyClass.foo(1,5)</code> - a member function.</li>\n<li><code>MyClass[{1,5}]</code> - overloaded <code>operator[]</code> with a parameter of class type, which has a constructor that accepts 2 parameters.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "edited": false, "score": 0, "creation_date": 1567620769, "post_id": 57793554, "comment_id": 102020734, "body": "Thanks @Vlad from Moscow, could you give an example of how you&#39;d implement the oprator?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "edited": false, "score": 0, "creation_date": 1567620831, "post_id": 57793554, "comment_id": 102020758, "body": "@SAR Show at first what you are going to do with this operator and the corresponding class where the operator should be defined."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1567619562, "creation_date": 1567619562, "answer_id": 57793554, "question_id": 57793498, "link": "https://stackoverflow.com/questions/57793498/overloading-operator-to-accept-range/57793554#57793554", "title": "Overloading Operator [] to Accept Range", "body": "<p>You can use for example std::initializer_list as an argument.</p>\n\n<p>For example</p>\n\n<pre><code>T &amp; operator []( const std::initializer_list&lt;size_t&gt; &amp; );\nconst T &amp; operator []( const std::initializer_list&lt;size_t&gt; &amp; ) const;\n</code></pre>\n\n<p>or just like</p>\n\n<pre><code>T operator []( const std::initializer_list&lt;size_t&gt; &amp; ) const;\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 10409952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e37fe24c3bd70ee72376302fc440906b?s=128&d=identicon&r=PG&f=1", "display_name": "SAR", "link": "https://stackoverflow.com/users/10409952/sar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57793541, "answer_count": 2, "score": 1, "last_activity_date": 1567622289, "creation_date": 1567619298, "last_edit_date": 1567622289, "question_id": 57793498, "link": "https://stackoverflow.com/questions/57793498/overloading-operator-to-accept-range", "title": "Overloading Operator [] to Accept Range", "body": "<p>I would like to overload operator[] to accept 2 <code>int</code>'s, so that the user will be able to specify a range of indices like so:</p>\n\n<pre><code>MyClass[1:5]\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>void operator[](const int, const int);\n</code></pre>\n\n<p>with the hope that I would be able to use it with comma:</p>\n\n<pre><code>MyClass[1,5]\n</code></pre>\n\n<p>but I get a compiler error:</p>\n\n<pre><code>too many parameters for this operator function\n</code></pre>\n\n<p>Is there a way that I can achieve such behaviour?</p>\n\n<p>Thanks</p>\n\n<p>EDIT:\nI was hoping the operator would do something like so:</p>\n\n<pre><code>struct MyClass\n{\n    vector&lt;std::string&gt; data;\n    void operator[] (const int start, const int end)\n    {\n        for(int index = start; index &lt;= end; index++)\n        {\n            cout &lt;&lt; data[index] &lt;&lt; '\\n';\n        }\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "cout", "scientific-notation", "iomanip"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1567617433, "post_id": 57793038, "comment_id": 102019417, "body": "First (among many) questions - what is <code>some_datatype</code>?"}, {"owner": {"reputation": 43, "user_id": 12011784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc948bf6b4a5ac36a3adfd38080ab2d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/12011784/david"}, "edited": false, "score": 1, "creation_date": 1567617547, "post_id": 57793038, "comment_id": 102019466, "body": "That is part of the question - I have no idea what it would be, if it were to exist. Question edited to include this"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567618356, "post_id": 57793038, "comment_id": 102019781, "body": "<code>some_datatype</code> (<code>std::ios_base::fmtflags</code>) would be <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/fmtflags\" rel=\"nofollow noreferrer\">implementation specific</a>. I don&#39;t understand what you&#39;re expecting to see when you write <code>cout &lt;&lt; floatfield</code> though, that would print the value of <code>floatfield</code> if possible, not adjust cout formatting in any way..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1567618775, "post_id": 57793038, "comment_id": 102019927, "body": "What&#39;s unclear about this? Come on guys."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1567618887, "post_id": 57793038, "comment_id": 102019972, "body": "<a href=\"https://coliru.stacked-crooked.com/a/9fe99371051eb2eb\" rel=\"nofollow noreferrer\">Here&#39;s the answer.</a> Would have posted it as such had the question not been closed. :( Ping me if it gets re-opened and I&#39;ll fix it"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567618940, "post_id": 57793038, "comment_id": 102019992, "body": "@Romen <a href=\"https://en.cppreference.com/w/cpp/io/manip/fixed\" rel=\"nofollow noreferrer\">It need not be implementation specific at all.</a> And the end result you describe is literally the point of the question."}, {"owner": {"reputation": 43, "user_id": 12011784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc948bf6b4a5ac36a3adfd38080ab2d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/12011784/david"}, "edited": false, "score": 0, "creation_date": 1567620005, "post_id": 57793038, "comment_id": 102020402, "body": "Thanks, that&#39;s exactly what I was looking for."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568032868, "post_id": 57793038, "comment_id": 102134698, "body": "@LightnessRacesinOrbit Harder now when they changed the voting limits again. :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568033657, "post_id": 57793038, "comment_id": 102135129, "body": "Yay, finally :)"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 12011784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc948bf6b4a5ac36a3adfd38080ab2d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/12011784/david"}, "edited": false, "score": 0, "creation_date": 1567619957, "post_id": 57793343, "comment_id": 102020386, "body": "Thanks, this was helpful. A better answer was posted in a comment on the question by @LightnessRacesinOrbit - this was what I was looking for!"}], "tags": [], "owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "is_accepted": false, "score": 1, "last_activity_date": 1567618668, "creation_date": 1567618668, "answer_id": 57793343, "question_id": 57793038, "link": "https://stackoverflow.com/questions/57793038/can-i-set-a-variable-that-will-change-the-floatfield-when-using-cout/57793343#57793343", "title": "Can I set a variable that will change the floatfield when using cout?", "body": "<p>I'm not sure I understood the question correctly, but this could be a solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct my_float {\n    float value_;\n    bool scientific_ = true;\n    my_float(float value) : value_(value) {}\n    void set_scientific() { scientific_ = true; }\n    void set_fixed() { scientific_ = false; }\n};\nostream&amp; operator&lt;&lt;(ostream&amp; os, const my_float&amp; f) {\n    if (f.scientific_)\n        return os &lt;&lt; scientific &lt;&lt; f.value_;\n    else\n        return os &lt;&lt; fixed &lt;&lt; f.value_;\n}\n\nint main() {\n    my_float number = 5.894;\n    bool condition = true; // &lt;--- Change this!\n    if (condition) {\n        number.set_scientific();\n    }\n    else {\n        number.set_fixed();\n    }\n    cout &lt;&lt; \"hello\" &lt;&lt; number &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This is of course very crude, and the class could definitely be more complete. </p>\n\n<p>Don't use this to store many floats, because id may easily double your memory requirements.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1568033642, "creation_date": 1568033642, "answer_id": 57854480, "question_id": 57793038, "link": "https://stackoverflow.com/questions/57793038/can-i-set-a-variable-that-will-change-the-floatfield-when-using-cout/57854480#57854480", "title": "Can I set a variable that will change the floatfield when using cout?", "body": "<p>I/O manipulators are actually functions (!), and the ones you want to switch between happen to have the same signature.</p>\n\n<p>So, you can use a function pointer to achieve your goal:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    using ManipFuncType = std::ios_base&amp;(std::ios_base&amp;);\n    const bool condition = true; // or false!\n\n    ManipFuncType* floatfield;\n    float number = 5.894;\n    if (condition)\n        floatfield = std::scientific;\n    else\n        floatfield = std::fixed;\n\n    std::cout &lt;&lt; \"hello\" &lt;&lt; floatfield &lt;&lt; number &lt;&lt; std::endl;\n}\n</code></pre>\n\n<h3>(<a href=\"https://coliru.stacked-crooked.com/a/d161fc53c1fe0ecc\" rel=\"nofollow noreferrer\">live demo</a>)</h3>\n"}], "owner": {"reputation": 43, "user_id": 12011784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc948bf6b4a5ac36a3adfd38080ab2d?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/12011784/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 57854480, "answer_count": 2, "score": -2, "last_activity_date": 1568033642, "creation_date": 1567617133, "last_edit_date": 1567677018, "question_id": 57793038, "link": "https://stackoverflow.com/questions/57793038/can-i-set-a-variable-that-will-change-the-floatfield-when-using-cout", "title": "Can I set a variable that will change the floatfield when using cout?", "body": "<p>I want to be able to easily change the floatfield from scientific to fixed dependent on a condition, so my result would change from something like 3.000000e+00 to 3.0, using code that might look something like this:</p>\n\n<pre><code>some_datatype floatfield;\nfloat number = 5.894\nif (condition) {\n    floatfield = 'scientific';\n} else floatfield = 'fixed';\ncout &lt;&lt; \"hello\" &lt;&lt; floatfield &lt;&lt; number &lt;&lt; endl;\n</code></pre>\n\n<p>I'm aware I can achieve the same effect using</p>\n\n<pre><code>float number = 5.894\nif (condition) {\n    cout &lt;&lt; \"hello\" &lt;&lt; scientific &lt;&lt; number &lt;&lt; endl;\n} else cout &lt;&lt; \"hello\" &lt;&lt; fixed &lt;&lt; number &lt;&lt; endl;\n</code></pre>\n\n<p>But this does not generalise well if I start using more stream format flags.</p>\n\n<p>If <code>some_datatype</code> exists, what is it? If not, is there any other way of changing the stream format flags using a condition?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1567617027, "post_id": 57792947, "comment_id": 102019242, "body": "It&#39;s a good question. However, I question the intended use. You can create a non-member function to construct a fully initialized C-struct without having to derive from it and using the derived class&#39;s constructor to initialize the members of the C-struct."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1567617512, "post_id": 57792947, "comment_id": 102019447, "body": "<a href=\"https://stackoverflow.com/a/32759314/485343\">Here&#39;s</a> an authoritative answer regarding C/C++ layout compatibility. Then you just need to take care to maintain <i>standard layout</i>, e.g. not use virtual members, virtual inheritance etc."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1567618340, "post_id": 57792947, "comment_id": 102019775, "body": "Have you actually tried doing this? And, if so, have you thought of maybe putting a checking directive in your code, like comparing <code>sizeof(base)</code> to <code>sizeof(derived)</code> (both should be compile-time constants)?"}, {"owner": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "edited": false, "score": 0, "creation_date": 1567619479, "post_id": 57792947, "comment_id": 102020192, "body": "Adrian, what rustyx links to does&#39;t tell anything about the issue of a possible size-increase of a derived class without any additional data-members."}], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "edited": false, "score": 0, "creation_date": 1567617725, "post_id": 57793086, "comment_id": 102019531, "body": "Why should the derived class add any padding? The base structure will be padded according to the language-settings already set."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "edited": false, "score": 0, "creation_date": 1567617835, "post_id": 57793086, "comment_id": 102019578, "body": "@BonitaMontero: The implementation <i>may</i> have different padding rules for C and C++. The OP asks especially for using c++ derived class in combination with C library functions. As said: I would not expect that, but it is also possible. BTW: It is undefined behavior and this point is only a possible reason!"}, {"owner": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "edited": false, "score": 0, "creation_date": 1567618016, "post_id": 57793086, "comment_id": 102019653, "body": "1. I&#39;m the OP. 2. As you can&#39;t mark C-structs included in C++-sourcefiles as C-specific there can&#39;t be different padding rules."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "edited": false, "score": 0, "creation_date": 1567618811, "post_id": 57793086, "comment_id": 102019947, "body": "@BonitaMontero: We discuss how compilers <i>may</i> be constructed. It is, whatever reason we find from the c++ standard undefined behavior. You use an instance of one type as an instance of another one. UB! Technically I believe it will work perfectly as long you use no additional data members nor virtual inheritance and functions."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "edited": false, "score": 0, "creation_date": 1567621057, "post_id": 57793086, "comment_id": 102020843, "body": "@BonitaMontero: What should I write? You got two answers with more or less the same content: What you want to do is UB. We can continue to discuss what the potential reasons can be behind the implementation details of the compiler. But it will not help. It is still UB but will work in most cases..."}, {"owner": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "edited": false, "score": 0, "creation_date": 1567622173, "post_id": 57793086, "comment_id": 102021328, "body": "Klaus, a structure defined in a C-header included in a C++ translation-unit isn&#39;t handled differently as any other structure. And even C-structures included into a C-module have have a compatible layout with C++ to enable interoperability."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1567617691, "last_edit_date": 1567617691, "creation_date": 1567617340, "answer_id": 57793086, "question_id": 57792947, "link": "https://stackoverflow.com/questions/57792947/size-of-a-derived-class-without-any-additional-data-members/57793086#57793086", "title": "Size of a derived class without any additional data-members", "body": "<blockquote>\n  <p>But is there any guarantee of the C++-language that the derived objectds have the same size as the base-stuct </p>\n</blockquote>\n\n<p>In general I would expect, that the class will not add any additional to the class memory layout, as long you did not introduce new data members or virtual functions. Use of virtual functions results in adding the v-table pointer.</p>\n\n<p>The implementation is also free to add a v-table pointer if you use virtual inheritance. This will also change the layout for most compilers ( clang and c++ use a vtable in that case! )</p>\n\n<p>But this all is implementation specific and I did not know of a guarantee in the C++ standards which defines that the class layout will guarantee that you can use a derived class without a cast operation as the base class.</p>\n\n<p>You also have to think of padding of data structures which <em>may</em> be different for the derived class.</p>\n\n<p>Generate something ( the derived class ) and use it as something different ( the base struct ) is in general undefined behavior. We are not talking of cast operations! If you cast the derived class to the base class, everything is fine. But packing many instances into a derived class array and simply use it as a base class array is undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1567619409, "last_edit_date": 1567619409, "creation_date": 1567618002, "answer_id": 57793223, "question_id": 57792947, "link": "https://stackoverflow.com/questions/57792947/size-of-a-derived-class-without-any-additional-data-members/57793223#57793223", "title": "Size of a derived class without any additional data-members", "body": "<p>In general, there is no such guarantee. And in particular, if you introduce virtual member functions for example, then there would typically be additional memory used for the virtual table pointer.</p>\n\n<p>If we add an additional assumption that the derived class is standard layout, and no non-standard features such as \"packing\" is used, then the size would be the same in practice.</p>\n\n<p>However, even if the size is the same, you technically cannot pretend that an array of derived type is an array of base type. In particular, iterating the \"pretended\" array with a pointer to base would have undefined behaviour. At least that's how it is within C++. Those operations are presumably performed in C across the API. I really don't know what guarantees there are in that case.</p>\n\n<hr>\n\n<p>I would recommend that if you <em>need</em> to deal with arrays of the C struct (i.e. the pointer would be incremented or subscripted by the API), then instead of wrapping the individual struct, create a C++ wrapper for the entire array.</p>\n"}], "owner": {"reputation": 847, "user_id": 6469690, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kvGyE.png?s=128&g=1", "display_name": "Bonita Montero", "link": "https://stackoverflow.com/users/6469690/bonita-montero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1567619409, "creation_date": 1567616647, "last_edit_date": 1567618167, "question_id": 57792947, "link": "https://stackoverflow.com/questions/57792947/size-of-a-derived-class-without-any-additional-data-members", "title": "Size of a derived class without any additional data-members", "body": "<p>When using C-libraries it might be appropopriate to derive a class from a C-structure and add some methods to operate on it without any data-members. F.e. you could add a constructor to initialize the members more conveniently. So this objects might be implicitly upcasted and passed to the C-APIs.</p>\n\n<p>There might be cases where the API expects an array of the C-structures. But is there any guarantee of the C++-language that the derived objectds have the same size as the base-struct so that the distances between the objects are properly offsetted?</p>\n\n<p>BTW: None of the suggestions of similar questions matches my question.</p>\n"}, {"tags": ["c++", "triangulation", "voronoi", "boost-polygon"], "comments": [{"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1567616936, "post_id": 57792882, "comment_id": 102019210, "body": "It looks like you added random heights to the 2D points, and the overlap is just caused by the 3D projection. Are the triangles still overlapping if you view the mesh from directly above?"}, {"owner": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1567617313, "post_id": 57792882, "comment_id": 102019377, "body": "@G.Sliepen: Yes they are overlapping, there is no random height in the image."}], "owner": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567616342, "creation_date": 1567616342, "question_id": 57792882, "link": "https://stackoverflow.com/questions/57792882/triangulating-a-point-set-using-boostpolygonvoronoi-results-in-overlapping-t", "title": "Triangulating a point set using boost::polygon::voronoi results in overlapping triangles", "body": "<p>I'm triangulating a set of 2d points using <code>boost::polygon::voronoi</code> and the code below (found under this <a href=\"https://stackoverflow.com/questions/34342038/how-to-triangulate-polygons-in-boost\">question</a>)</p>\n\n<pre><code>boost::polygon::voronoi_diagram&lt;vert_value_typed&gt; vd{};\nboost::polygon::construct_voronoi(vertices.begin(), vertices.end(), &amp;vd);\nfor (const auto&amp; vertex : vd.vertices()) {\n    boost::container::static_vector&lt;uint32_t, 40&gt; big_face{};\n    const auto* start_edge = vertex.incident_edge();\n    auto* edge = start_edge;\n    do {\n        const auto cell = edge-&gt;cell();\n        ASSERT(cell &amp;&amp; cell-&gt;contains_point());\n        big_face.push_back(util::checked_cast&lt;uint32_t&gt;(cell-&gt;source_index()));\n        if (big_face.size() == 3) {\n            // process output triangles\n            faces.push_back({\n                big_face[0],\n                big_face[1],\n                big_face[2]\n            });\n            big_face.erase(big_face.begin() + 1);\n        }\n        edge = edge-&gt;rot_next();\n    } while (edge != start_edge);\n}\n</code></pre>\n\n<p>However, some of my triangles overlap as illustrated by the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6jYza.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6jYza.png\" alt=\"Image of resulting triangles\"></a>\nNote that the overlapping triangles always have a reversed culling compared to the rest, i.e they are pointing downwards.</p>\n\n<p>How can I modify the algorithm so that the resulting mesh does not contain these overlapping images? I'm not fluent enough in voronoi diagrams to solve this manually.</p>\n"}, {"tags": ["c++", "opencv", "ffmpeg", "mp4", "fourcc"], "comments": [{"owner": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 1, "creation_date": 1567677002, "post_id": 57792837, "comment_id": 102037389, "body": "OpenCV looks to be finicky about which codecs are allowed in which containers. So XVID has to go in AVI even though ffmpeg allows it."}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "reply_to_user": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 0, "creation_date": 1567689867, "post_id": 57792837, "comment_id": 102044666, "body": "@Gyan yes it worked! So what codec should go with a <code>.mp4</code> container?"}, {"owner": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 1, "creation_date": 1567692654, "post_id": 57792837, "comment_id": 102046362, "body": "<code>&#39;H&#39;,&#39;2&#39;,&#39;6&#39;,&#39;4&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 3670186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/373cec2afce147d96f5d3d6597e1b39b?s=128&d=identicon&r=PG&f=1", "display_name": "robowolf", "link": "https://stackoverflow.com/users/3670186/robowolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1615254022, "creation_date": 1615254022, "answer_id": 66539616, "question_id": 57792837, "link": "https://stackoverflow.com/questions/57792837/opencv-ffmpeg-tag-is-not-supported-with-codec-id-12-and-format-mp4-mp4/66539616#66539616", "title": "OpenCV: FFMPEG: tag is not supported with codec id 12 and format &#39;mp4 / MP4", "body": "<p>I basically replaced 'MP4V' with 'mp4v' and got rid of the issue. It seems like that the API is case sensitive.</p>\n"}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4189, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1615254022, "creation_date": 1567616131, "last_edit_date": 1567689281, "question_id": 57792837, "link": "https://stackoverflow.com/questions/57792837/opencv-ffmpeg-tag-is-not-supported-with-codec-id-12-and-format-mp4-mp4", "title": "OpenCV: FFMPEG: tag is not supported with codec id 12 and format &#39;mp4 / MP4", "body": "<p>I was trying to run a repo located <a href=\"https://github.com/Pratik08/Vis-DSS\" rel=\"nofollow noreferrer\">HERE</a>. Basically, just targeting <code>SimpleVideoSummarizer.cc</code> which uses OpenCV for some basic video processing. I'm using Ubuntu 14.04. Following is the save part of the code:</p>\n\n<pre><code>void SimpleVideoSummarizer::playAndSaveSummaryVideo(char* videoFileSave) {\n    cv::VideoCapture capture(videoFile);\n    cv::Mat frame;\n    capture.set(CV_CAP_PROP_POS_FRAMES, 0);\n    cv::VideoWriter videoWriter;\n    if (videoFileSave != \"\") {\n        videoWriter = cv::VideoWriter(videoFileSave, CV_FOURCC('M', 'J', 'P', 'G'), static_cast&lt;int&gt;(capture.get(CV_CAP_PROP_FPS)), cv::Size(capture.get(CV_CAP_PROP_FRAME_WIDTH), capture.get(CV_CAP_PROP_FRAME_HEIGHT)));\n    }\n    for (std::set&lt;int&gt;::iterator it = summarySet.begin(); it != summarySet.end(); it++) {\n        capture.set(CV_CAP_PROP_POS_FRAMES, segmentStartTimes[*it] * frameRate);\n        for (int i = segmentStartTimes[*it]; i &lt; segmentStartTimes[*it + 1]; i++) {\n            for (int j = 0; j &lt; frameRate; j++) {\n                capture &gt;&gt; frame;\n                cv::putText(frame, \"Time: \" + IntToString(i) + \" seconds\", cvPoint(30, 30),\n                            cv::FONT_HERSHEY_COMPLEX_SMALL, 0.8, cvScalar(200, 200, 250), 1, CV_AA);\n                if (frame.data) {\n                    cv::imshow(\"Summary Video\", frame);\n                }\n                if (videoFileSave != \"\") {\n                    videoWriter.write(frame);\n                }\n                // Press  ESC on keyboard to exit\n                char c = static_cast&lt;char&gt;(cv::waitKey(25));\n                if (c == 27) {\n                    break;\n                }\n            }\n        }\n    }\n    capture.release();\n}\n</code></pre>\n\n<p>I pass an <code>input.mp4</code> file and specify a <code>out.mp4</code> as well. Unfortunately, when the example is trying to save the output video file, it throws errors on the FOURCC:</p>\n\n<pre><code>OpenCV: FFMPEG: tag 0x44495658/'XVID' is not supported with codec id 12 and format 'mp4 / MP4 (MPEG-4 Part 14)'\nOpenCV: FFMPEG: fallback to use tag 0x7634706d/'mp4v'\n</code></pre>\n\n<p>or another one:</p>\n\n<pre><code>OpenCV: FFMPEG: tag 0x3234504d/'MP42' is not supported with codec id 15 and format 'mp4 / MP4 (MPEG-4 Part 14)'\n[mp4 @ 0x16bc700] Could not find tag for codec msmpeg4v2 in stream #0, codec not currently supported in container\n</code></pre>\n\n<p>I tried to change the FOURCC in this part of the code which writes the video, and applied XVID, MJPG, X264, MP42, MP4V. None worked and threw similar errors.</p>\n\n<p><strong>What is the problem? How to fix it?</strong></p>\n"}, {"tags": ["c++", "segmentation-fault", "fault"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1567615719, "post_id": 57792733, "comment_id": 102018702, "body": "Please show us your test cases. Also please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 11, "user_id": 10530196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af95794f580ea5a1218c5024930ff327?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/10530196/nilesh-kumar"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567615831, "post_id": 57792733, "comment_id": 102018749, "body": "I am trying to solve this question, <a href=\"https://www.hackerearth.com/problem/algorithm/find-prime/description/\" rel=\"nofollow noreferrer\">hackerearth.com/problem/algorithm/find-prime/description</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1567616048, "post_id": 57792733, "comment_id": 102018842, "body": "A question must be &quot;self contained&quot;. All relevant information should be <i>in</i> the question. <i>Not</i> behind external links."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567616221, "post_id": 57792733, "comment_id": 102018913, "body": "<code>memset(prime,true,sizeof(prime));</code> - while <code>memset</code> in a C++ program <i>can</i> be correct, it is certainly always an odd thing to use. <code>std::fill</code> or just value initialization would be more common. Do you have a C background? Also, VLAs are <i>not</i> valid standard C++ (even if <i>some</i> compilers accept them (as extensions))."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1567616228, "post_id": 57792733, "comment_id": 102018915, "body": "Unless your <code>bool</code> has size one, and it probably doesn&#39;t, your <code>memset</code> is completely wrong \u2013 both the value and the size \u2013 and leads to undefined behaviour. I&#39;m surprised that anything works at all."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1567616389, "post_id": 57792733, "comment_id": 102018985, "body": "I agree with @JesperJuhl, all the information should be in the question. Since you&#39;ve narrowed down which test case is failing, surely it wouldn&#39;t be any trouble to hard-code values into <code>n</code>n and <code>n1</code>?"}, {"owner": {"reputation": 11, "user_id": 10530196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af95794f580ea5a1218c5024930ff327?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/10530196/nilesh-kumar"}, "edited": false, "score": 0, "creation_date": 1567616615, "post_id": 57792733, "comment_id": 102019071, "body": "Sorry Jesper, will keep this is mind from next time, and yes i have a background in C"}, {"owner": {"reputation": 11, "user_id": 10530196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af95794f580ea5a1218c5024930ff327?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/10530196/nilesh-kumar"}, "edited": false, "score": 0, "creation_date": 1567616677, "post_id": 57792733, "comment_id": 102019099, "body": "i tried various input and for 10001 1000001 it&#39;s showing run time error."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1567616447, "post_id": 57792805, "comment_id": 102019008, "body": "Addendum: <code>std::vector&lt;bool&gt;</code> isn&#39;t like ordinary <code>vector</code>s, so it&#39;s a worth a look-through <a href=\"https://en.cppreference.com/w/cpp/container/vector_bool\" rel=\"nofollow noreferrer\">of some good documentation</a> to familiarize yourself with the differences.."}, {"owner": {"reputation": 11, "user_id": 10530196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af95794f580ea5a1218c5024930ff327?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/10530196/nilesh-kumar"}, "edited": false, "score": 1, "creation_date": 1567616715, "post_id": 57792805, "comment_id": 102019122, "body": "I tried using vector and still it&#39;s having the same error for the input 10001 1000001"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 11, "user_id": 10530196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af95794f580ea5a1218c5024930ff327?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/10530196/nilesh-kumar"}, "edited": false, "score": 0, "creation_date": 1567617232, "post_id": 57792805, "comment_id": 102019332, "body": "@NileshKumar Added a fix for you."}, {"owner": {"reputation": 11, "user_id": 10530196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af95794f580ea5a1218c5024930ff327?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/10530196/nilesh-kumar"}, "edited": false, "score": 0, "creation_date": 1567617510, "post_id": 57792805, "comment_id": 102019445, "body": "Thanks a lot, now i understood my mistake."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1567624197, "last_edit_date": 1567624197, "creation_date": 1567615965, "answer_id": 57792805, "question_id": 57792733, "link": "https://stackoverflow.com/questions/57792733/how-to-fix-run-time-error-in-c-its-passing-all-the-test-cases-except-1/57792805#57792805", "title": "How to fix run time error in c++ , it&#39;s passing all the test cases except 1", "body": "<p>Instead of non-standard variable length array in:</p>\n\n<pre><code>bool prime[n+1];\nmemset(prime,true,sizeof(prime));\n</code></pre>\n\n<p>which may overflow the stack if <code>n</code> is sufficiently large, do:</p>\n\n<pre><code>std::vector&lt;bool&gt; prime(n + 1, true);\n</code></pre>\n\n<p>The vector doesn't overflow the stack and stores 8 <code>bool</code> values in a byte.</p>\n\n<hr>\n\n<p>It crashes on input 10001 1000001 because multiplication <code>i * i</code> overflows a 32-bit <code>int</code> when <code>i &gt; 46341</code>. Replace <code>int</code> indexes with <code>long</code> (if <code>long</code> is at least 64-bit wide on your platform) or <code>int64_t</code> to fix. E.g.:</p>\n\n<pre><code>long f(long n1, long n) {\n    std::vector&lt;bool&gt; prime(n + 1, true);\n    for(long i = 2; i &lt;= n; ++i) {\n        if(prime[i])\n            for(long j = i * i; j &lt;= n; j += i)\n                prime[j] = false;\n    }\n    prime[1] = false;\n\n    long temp = 0;\n    for(long i = n1; i &lt;= n; ++i)\n        temp += prime[i];\n    return temp;\n}\n\nint main() {\n    std::cout &lt;&lt; f(10001, 1000001) &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10530196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af95794f580ea5a1218c5024930ff327?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/10530196/nilesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567624197, "creation_date": 1567615638, "last_edit_date": 1567615757, "question_id": 57792733, "link": "https://stackoverflow.com/questions/57792733/how-to-fix-run-time-error-in-c-its-passing-all-the-test-cases-except-1", "title": "How to fix run time error in c++ , it&#39;s passing all the test cases except 1", "body": "<p>I am trying to find total number prime number in a range given by user [a,b], \nI am able to pass all the test cases except the last one and its showing run time error</p>\n\n<pre><code>int n1,n;\n        cin&gt;&gt;n1&gt;&gt;n;\n        bool prime[n+1];\n        memset(prime,true,sizeof(prime));\n        int i=2;\n        while(i&lt;=n)\n        {\n            if(prime[i]==true)\n            {\n                int j=i*i;\n                while(j&lt;=n)\n                {\n                    prime[j]=false;\n                    j=j+i;\n                }\n            }\n            i++;\n        }\n        prime[1]=false;\n        i=n1;\n        int temp=0;\n        while(i&lt;=n)\n        {\n            if(prime[i]==true)\n            {\n                temp++;\n            }\n            i++;\n        }\n        cout&lt;&lt;temp&lt;&lt;\"\\n\";\n</code></pre>\n\n<p>The output is correct for all the given test cases but it's generating run time error for last case</p>\n"}, {"tags": ["c++", "c", "sockets", "tcp", "send"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1567615947, "post_id": 57792687, "comment_id": 102018800, "body": "Are you using TCP or UDP?"}, {"owner": {"reputation": 1265, "user_id": 613996, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p4yhq.jpg?s=128&g=1", "display_name": "ARH", "link": "https://stackoverflow.com/users/613996/arh"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567616287, "post_id": 57792687, "comment_id": 102018942, "body": "@JesperJuhl This is all TCP sockets"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1567616506, "post_id": 57792687, "comment_id": 102019032, "body": "<i>&quot;I have no idea how can I tell which portion of the message is not sent&quot;</i> - sendmsg returns the total size it has send. It sends the buffers in the order you&#39;ve given. It sends each buffer from the beginning. Since you know the size of the buffers you can compute where it stopped sending and thus where you need to continue. Of course, this might be inside one of the buffers. <i>&quot;Does it send the iovs sequentially ?&quot;</i> - sure it does, what would you expect it to do otherwise. TCP is a byte stream and not a message protocol, so there is no real choice apart from sending all in the given order"}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 1, "creation_date": 1567616878, "post_id": 57792687, "comment_id": 102019181, "body": "If you do non-blocking io then you may think about using one of the select, poll, epoll functions. This is the standard approach. You can also implement a Proactor. You may find some related stuff here: <a href=\"https://github.com/Armin-Montigny/SmlParser\" rel=\"nofollow noreferrer\">github.com/Armin-Montigny/SmlParser</a>"}, {"owner": {"reputation": 1265, "user_id": 613996, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p4yhq.jpg?s=128&g=1", "display_name": "ARH", "link": "https://stackoverflow.com/users/613996/arh"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1567617539, "post_id": 57792687, "comment_id": 102019461, "body": "@SteffenUllrich I accept your answer. I wish if you provide a reference for the fact that iovs are sent sequentially and there is no way that they can sent out of order in the current kernel and would not be the case in the future kernel releases as well."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1567623908, "post_id": 57792687, "comment_id": 102021983, "body": "@ARH: It is not clearly defined in POSIX since I guess nobody even had the idea that data to an ordered byte stream could be written differently then in the most logical order in <code>iov</code>, i.e. from the start of the array to the end of the array. Similar it is not explicitly written down that the buffer in <code>send</code> gets written from start to end, since everything else would just be strange."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1567633011, "post_id": 57792687, "comment_id": 102024992, "body": "@SteffenUllrich isn&#39;t this from <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/sendmsg.html\" rel=\"nofollow noreferrer\">here</a> enough?: &quot;The data from each storage area indicated by msg_iov is sent in turn&quot;"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1567656642, "post_id": 57792687, "comment_id": 102029203, "body": "@mosvy: I&#39;m not fully familiar with the fine details of English language. But for me &quot;in turn&quot; just means that they are sent in a specific and fixed order and not what this specific order actually is. This is more clearly defined in the Linux man page for <a href=\"https://linux.die.net/man/2/writev\" rel=\"nofollow noreferrer\">writev</a> which has a similar interface: <i>&quot;Buffers are processed in <b>array order</b>. This means ...  <b>iov[0] before ... iov[1]</b>, and so on. ...  writev() <b>writes out the entire contents of iov[0] before proceeding to iov[1]</b>, and so on.&quot;</i>"}, {"owner": {"reputation": 7725, "user_id": 681479, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/20bba354e7258f5e647102f63904a7a9?s=128&d=identicon&r=PG", "display_name": "Brian White", "link": "https://stackoverflow.com/users/681479/brian-white"}, "edited": false, "score": 0, "creation_date": 1567686987, "post_id": 57792687, "comment_id": 102042913, "body": "See also: <a href=\"https://stackoverflow.com/questions/14241235/what-happens-when-i-write-data-to-a-blocking-socket-faster-than-the-other-side/14244450#14244450\" title=\"what happens when i write data to a blocking socket faster than the other side\">stackoverflow.com/questions/14241235/&hellip;</a> which describes the TCP operation and how buffering works.  Though that was written in the context of a <i>blocking</i> send, the behavior is identical except that a <i>non-blacking</i> <code>sendmsg()</code> returns immediately telling you how many bytes from the beginning of the buffer were added to the local send window."}], "owner": {"reputation": 1265, "user_id": 613996, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p4yhq.jpg?s=128&g=1", "display_name": "ARH", "link": "https://stackoverflow.com/users/613996/arh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567616688, "creation_date": 1567615445, "last_edit_date": 1567616688, "question_id": 57792687, "link": "https://stackoverflow.com/questions/57792687/how-to-deal-with-sendmsg2-when-it-send-a-message-partially-in-linux", "title": "How to deal with sendmsg(2) when it send a message partially in Linux?", "body": "<p>I have a performance sensitive client and server application with stream POSIX TCP sockets. All communications on the socket are done with  non-blocking flag. I am using <code>sendmsg(2)</code> system call to send a message with multiple buffer and use <code>recv(2)</code> to pick the buffers individually on the other side of the wire. </p>\n\n<p><code>sendmsg(2)</code> can send the message partially and I have no idea how can I tell which portion of the message is not sent so I can send it again. I don't want to send entire message again. </p>\n\n<p>I did a little research and found for example Linux CIFS in this case terminates the connection session and send the entire message again. <a href=\"https://github.com/torvalds/linux/blob/master/fs/cifs/transport.c#L430\" rel=\"nofollow noreferrer\">Reference</a>. That is not really what I want. </p>\n\n<p>For example:</p>\n\n<pre><code>void sys_sendmsg(int fd, struct iovec *iov, size_t length, int flags) \n{\n    struct msghdr msg = (struct msghdr) {\n        .msg_iov    = iov,\n        .msg_iovlen = length,\n    };  \n\n    ssize_t iov_byte_len;\n    for (i = 0; i &lt; msg.msg_iovlen; ++i) {\n        iov_byte_len += msg.msg_iov[i].iov_len;\n    }\n\n    ssize_t sent_len;\n    sent_len = sendmsg(fd, &amp;msg, flags);\n\n    if( sent_len &gt; 0 &amp;&amp; sent_len &lt; iov_byte_len){\n        // What should I do here ?\n        // I don't want to send entire message again\n        // Which portion of this message is sent ?\n        // Does it send the iovs sequentially ? \n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567615981, "post_id": 57792782, "comment_id": 102018815, "body": "<i>So pointers that point to string literals shall have the qualifier const.</i> reads like you need <code>type * const</code>, not <code>type const *</code> which is what is needed."}, {"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1567668442, "post_id": 57792782, "comment_id": 102032997, "body": "Thank you for your inputs. Based on your inputs I changed L&quot;winsta0\\\\default&quot; to wchar_t *pwdefault = L&quot;winsta0\\\\default&quot;;    si.lpDesktop = pwdefault;"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1567616052, "last_edit_date": 1567616052, "creation_date": 1567615875, "answer_id": 57792782, "question_id": 57792675, "link": "https://stackoverflow.com/questions/57792675/deprecated-string-conv-gen-conversion-from-a-string-literal-to-pointer-to-chara/57792782#57792782", "title": "deprecated_string_conv_gen: conversion from a string literal to pointer-to-character (non-const) is deprecated in C++", "body": "<p>String literals in C++ have types of constant character arrays. So pointers that point to string literals shall have the qualifier const that is they shall point to constant objects.</p>\n\n<p>However this data member</p>\n\n<pre><code>LPWSTR  lpDesktop;\n</code></pre>\n\n<p>does have the qualifier <code>const</code>.</p>\n\n<p>The data member should be declared like</p>\n\n<pre><code>LPCWSTR  lpDesktop;\n</code></pre>\n\n<p>To avoid the error you could declare a non-constant array and initialize it with the string literal <code>L\"winsta0\\\\default\"</code> and then set the pointer to point to this array.</p>\n"}], "owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567616052, "creation_date": 1567615415, "question_id": 57792675, "link": "https://stackoverflow.com/questions/57792675/deprecated-string-conv-gen-conversion-from-a-string-literal-to-pointer-to-chara", "title": "deprecated_string_conv_gen: conversion from a string literal to pointer-to-character (non-const) is deprecated in C++", "body": "<p>From the coverity tool, I am getting the below warning message in the C++ code:</p>\n\n<p><strong>deprecated_string_conv_gen: conversion from a string literal to pointer-to-character (non-const) is deprecated</strong></p>\n\n<p>at the below line:</p>\n\n<p>si.lpDesktop = L\"winsta0\\default\";</p>\n\n<p>Could anyone please help me how to resolve this warning message?</p>\n\n<p><strong>Below is the complete code snippet:</strong></p>\n\n<pre><code>LONG RcRegJob::CreateProcessandExit()\n{\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    WCHAR pwszMcSvrCntPath[MAX_PATH];\n    DWORD dwExitCode = 0;\n    dwExitCode = ::GetModuleFileName(NULL, pwszMcSvrCntPath, MAX_PATH);\n\n    if (dwExitCode)\n    {\n        std::wstring strFilePath = pwszMcSvrCntPath;\n        std::wstring strProcessName;\n        int npos = strFilePath.rfind(L\"\\\\\");\n\n        strProcessName = strFilePath.substr(npos + 1, strFilePath.length());\n        strFilePath = strFilePath.substr(0, npos);\n\n        ::ZeroMemory(&amp;si, sizeof(si));\n        ::ZeroMemory(&amp;pi, sizeof(pi));\n\n        si.cb = sizeof(si);\n        si.lpDesktop = L\"winsta0\\\\default\";\n\n        {\n            dwExitCode = ::CreateProcess(0, (LPWSTR)strProcessName.c_str(),\n                0, 0, FALSE, NORMAL_PRIORITY_CLASS, 0,\n                strFilePavth, &amp;si, &amp;pi);\n        }\n\n        if (0 == dwExitCode)\n        {\n            dwExitCode = ::GetLastError(); \n        }\n        else\n        {\n            exit(0);\n        }\n    }\n\n    return dwExitCode;\n}\n</code></pre>\n\n<p><strong>Declaration:</strong></p>\n\n<pre><code>LPWSTR  lpDesktop;\n</code></pre>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1567615317, "post_id": 57792634, "comment_id": 102018537, "body": "What happens when you run this code? What do you want it to do differently?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567615400, "post_id": 57792634, "comment_id": 102018564, "body": "Could you please explain a little more?  It is very unclear to me what you are asking"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1567615611, "post_id": 57792634, "comment_id": 102018658, "body": "You use <code>count</code> uninitialized and you need to cast it for it to be visible: <code>cout &lt;&lt; static:cast&lt;int&gt;(count++);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 4, "last_activity_date": 1567615398, "creation_date": 1567615398, "answer_id": 57792669, "question_id": 57792634, "link": "https://stackoverflow.com/questions/57792634/print-incremental-count-variable-val-within-while/57792669#57792669", "title": "print incremental count variable val within while", "body": "<p><code>count</code> is uninitialized. Since you want to start from <code>1</code>, you should initialize it that way. And, you should use an integer.</p>\n\n<pre><code>int count=1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 3, "last_activity_date": 1567615423, "creation_date": 1567615423, "answer_id": 57792678, "question_id": 57792634, "link": "https://stackoverflow.com/questions/57792634/print-incremental-count-variable-val-within-while/57792678#57792678", "title": "print incremental count variable val within while", "body": "<ol>\n<li><p>You should declare <code>count</code> as an <code>int</code> and initialize it:</p>\n\n<pre><code>int count = 0;\n</code></pre>\n\n<p>I suggest you learn about the different primitive data types that C++ has. Using the correct type for what you want to do will save you a lot of headache.</p></li>\n<li><p>You are incrementing <strong>and</strong> printing out with one command:</p>\n\n<pre><code>cout &lt;&lt; count++;\n</code></pre>\n\n<p>Instead, you only need to increment:</p>\n\n<pre><code>count++;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 6983, "user_id": 973397, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/7pwAF.jpg?s=128&g=1", "display_name": "fred randall", "link": "https://stackoverflow.com/users/973397/fred-randall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1567615402, "answer_count": 2, "score": 0, "last_activity_date": 1567615423, "creation_date": 1567615260, "last_edit_date": 1567615374, "question_id": 57792634, "link": "https://stackoverflow.com/questions/57792634/print-incremental-count-variable-val-within-while", "closed_reason": "Duplicate", "title": "print incremental count variable val within while", "body": "<p>Below is what I currently have; I am not sure why I cannot just print the value, incrementally with the below; i.e. 1,2,3.. etc. I have also tried  <code>cout&lt;&lt;count;</code></p>\n\n<pre><code> #include &lt;iostream&gt;\n    using namespace std;\n    int main()\n    {char count;\n\n\n     while(count&lt;=10)\n     {\n     cout&lt;&lt;\"My name is Bill\"&lt;&lt;endl;\n     cout &lt;&lt; \"The # is:\" &lt;&lt;count&lt;&lt;endl;\n     cout &lt;&lt; count++;\n     }\n     }\n</code></pre>\n"}, {"tags": ["c++", "string", "fgets", "getline", "c-strings"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1567614498, "post_id": 57792459, "comment_id": 102018203, "body": "Don&#39;t use <code>gets</code>.  It was deprecated and has since been removed from both C and C++."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1567614736, "post_id": 57792459, "comment_id": 102018304, "body": "C or C++?  You used C in the title, but tagged your question with C++.  They are <b>not</b> the same, and the proper answer(s) will be different."}, {"owner": {"reputation": 337, "user_id": 4091452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100002156861277/picture?type=large", "display_name": "Andrei Damian", "link": "https://stackoverflow.com/users/4091452/andrei-damian"}, "edited": false, "score": 0, "creation_date": 1567632540, "post_id": 57792459, "comment_id": 102024822, "body": "I think you need a new teacher."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12020824"}, "edited": false, "score": 0, "creation_date": 1567616968, "post_id": 57792481, "comment_id": 102019219, "body": "\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u0441\u043a\u0438\u043d\u0443 \u043e\u0434\u043d\u043e\u043a\u0443\u0440\u0441\u043d\u0438\u043a\u0430\u043c, \u043f\u0443\u0441\u043a\u0430\u0439 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u044f\u0442, \u043d\u043e \u043c\u044b \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u043a\u0443\u0440\u0441\u0435 \u0438 \u044d\u0442\u043e \u0431\u044b\u043b\u043e \u043d\u0430\u0448\u0435 \u043f\u0435\u0440\u0432\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 \u043f\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e, \u0438 \u044f \u043d\u0435 \u043f\u043e\u043d\u044f\u043b 50% \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0442\u044b \u043d\u0430\u043f\u0438\u0441\u0430\u043b. \u041a\u043e\u0434, \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0439 \u043c\u043d\u043e\u044e \u0432 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442\u0435 \u0432\u0437\u044f\u0442 \u0438\u0437 \u043c\u0435\u0442\u043e\u0434\u0438\u0447\u043a\u0438, \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0439 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u043c, \u0438, \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f, \u043e\u043d \u043d\u0435 \u0440\u0430\u0431\u043e\u0447\u0438\u0439?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1567617160, "post_id": 57792481, "comment_id": 102019302, "body": "@freshman The code from the training manual is incorrect. As I already wrote, the gets function is not a standard function. Secondly, the sentence cin &gt;&gt; s2;  doesn\u2019t allow you to read several words in one line, as it reads up to the first space character. Keep in mind that there is a Russian-language website ru.stackoverflow.com."}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1567617168, "post_id": 57792481, "comment_id": 102019306, "body": "While valid as an example, just make sure to not mix stdio and iostream in real programs, and prefer to use the iostream library, since reading into a <code>std::string</code> is just much safer."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1567617613, "post_id": 57792481, "comment_id": 102019489, "body": "@freshman I think that the most difficult part of the program is this statement s1[std::strcspn( s1, &quot;\\n&quot; )] = &#39;\\0&#39;;. The problem is that the function fgets can append the new line character to the read string. This statement allows to exclude this character from the string. the function strcspn finds the position of the new line character and then it is substituted for the terminating zero character &#39;\\0&#39;;"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1567615534, "last_edit_date": 1567615534, "creation_date": 1567614498, "answer_id": 57792481, "question_id": 57792459, "link": "https://stackoverflow.com/questions/57792459/%d0%a1-error-s1-s2-are-used-uninitialised-in-this-function/57792481#57792481", "title": "\u0421 error &quot;s1, s2 are used uninitialised in this function&quot;", "body": "<p>These pointers</p>\n\n<pre><code>char *s1, *s2;\n</code></pre>\n\n<p>with the automatic storage duration are not initialized and have indeterminate values. As a result the program has undefined behavior.</p>\n\n<p>Use instead character arrays or objects of the type <code>std::string</code>.</p>\n\n<p>Take into account that the function <code>gets</code> is not supported by the C Standard. Use <code>fgets</code> instead of <code>gets</code>.</p>\n\n<p>Or as this is a C++ program then use <code>std::getline</code> or the member function <code>std::cin.getline</code>.</p>\n\n<p>Pay attention to that this statement</p>\n\n<pre><code>cin &gt;&gt; s2;\n</code></pre>\n\n<p>does not allow to enter several words separated by white-spaces.</p>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n\nint main() \n{\n    const size_t N = 100;\n    char s1[N];\n    std::string s2;\n\n    std::ios_base::sync_with_stdio();\n\n    std::printf( \"Enter your name and surname for fgets(): \" );\n    std::fgets( s1, sizeof( s1 ), stdin );\n    s1[std::strcspn( s1, \"\\n\" )] = '\\0';\n\n    std::printf( \"Enter your name and surname for std::cin: \" );\n    std::getline( std::cin, s2 );\n\n    std::cout &lt;&lt; s1 &lt;&lt; \"! Hello from fgets\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; s2 &lt;&lt; \"! Hello from std::cin\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>Enter your name and surname for fgets(): Bob Fisher\nEnter your name and surname for std::cin: Tomas Man\nBob Fisher! Hello from fgets\nTomas Man! Hello from std::cin\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1567616533, "last_edit_date": 1567616533, "creation_date": 1567614670, "answer_id": 57792526, "question_id": 57792459, "link": "https://stackoverflow.com/questions/57792459/%d0%a1-error-s1-s2-are-used-uninitialised-in-this-function/57792526#57792526", "title": "\u0421 error &quot;s1, s2 are used uninitialised in this function&quot;", "body": "<p>Your program has undefined behavior.</p>\n\n<p><code>gets</code> expects an argument that points to enough valid memory to read and store the input. In your posted code, <code>s1</code> does not meet that requirement. Similar problem exists with your usage of <code>cin</code> and <code>s2</code>.</p>\n\n<p>More importantly, don't use <code>gets</code> any more. It's a deprecated function due to security issues. Use <code>std::string</code> and <code>std::getline</code>.</p>\n\n<pre><code>int main(void)\n{\n   std::string s1;\n   std::string s2;\n\n   puts(\"Enter your name and surname\");\n   std::getline(std::cin, s1);\n\n   puts(\"Enter your name and surname again\");\n   std::getline(std::cin, s2);\n\n   // Use s1 and s2.\n   return 0;\n}\n</code></pre>\n\n<p>Useful read: <a href=\"https://stackoverflow.com/questions/2565727/which-functions-from-the-standard-library-must-should-be-avoided\">Which functions from the standard library must (should) be avoided?</a></p>\n"}, {"tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1567615117, "creation_date": 1567615117, "answer_id": 57792608, "question_id": 57792459, "link": "https://stackoverflow.com/questions/57792459/%d0%a1-error-s1-s2-are-used-uninitialised-in-this-function/57792608#57792608", "title": "\u0421 error &quot;s1, s2 are used uninitialised in this function&quot;", "body": "<p>Additionally, remember that declaring/creating a pointer variable does not automatically create a pointed-to object. You must <em>always</em> do that explicitly.</p>\n\n<pre><code>char* s = new char[ N ];\n</code></pre>\n\n<p>...for whatever value <code>N</code> is. Do t forget to free the memory at some point after you have fi wished using it.</p>\n\n<pre><code>delete [] s;\n</code></pre>\n\n<p>That said, since you are using C++, you can usually avoid handling pointers directly, and if you must, use a <code>std::unique_ptr</code> or a <code>std::shared_ptr</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12020824"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 57792526, "answer_count": 3, "score": 1, "last_activity_date": 1567617080, "creation_date": 1567614381, "last_edit_date": 1567617080, "question_id": 57792459, "link": "https://stackoverflow.com/questions/57792459/%d0%a1-error-s1-s2-are-used-uninitialised-in-this-function", "title": "\u0421 error &quot;s1, s2 are used uninitialised in this function&quot;", "body": "<p>This is one of the problems I get after first lesson on programming basics lecture</p>\n\n<p>gets() works kinda properly(I think), but \"cin\" refuses to work</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(void)\n{\n    char *s1, *s2;\n    puts(\"Enter your name and surname for gets()\");\n    gets(s1);\n    puts(\"Enter your name and surname for cin()\");\n    cin &gt;&gt; s2;\n    cout &lt;&lt; s1 &lt;&lt; \"! Hello from gets\" &lt;&lt; endl;\n    cout &lt;&lt; s2 &lt;&lt; \"! Hello from cin\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I expect cin to output what you had typed in console, but after typing programm waits for a second and then everything closes without any output at all.</p>\n\n<p>Screenshot is what our teacher gave us and it's not working</p>\n\n<p><a href=\"https://i.stack.imgur.com/QENuS.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n"}, {"tags": ["c++", "debugging", "assembly", "crash"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567614127, "post_id": 57792331, "comment_id": 102018041, "body": "Are you asking for how to inspect the assembly code produced by the compiler? There are several ways, but I don&#39;t think the question &quot;how do I view the generated assembly code&quot; is on topic for stackoverflow... (Also, your <code>DoubleToFlaot</code> has a typo...)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "edited": false, "score": 1, "creation_date": 1567614638, "post_id": 57792331, "comment_id": 102018264, "body": "@J... Not sure if you&#39;re serious. The code shows a double being passed to (what looks like) a function that is a misspelled version of <code>DoubleToFloat</code> and the return value being assigned to a float. It could of course do anything, but this is about as obvious of a typo as it gets. Also note that the question doesn&#39;t ask for why this happens but how to best debug it further."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "edited": false, "score": 0, "creation_date": 1567616816, "post_id": 57792331, "comment_id": 102019151, "body": "You could try to by rewriting your function as <code>constexpr float DoubleToFlaot(double d) { return static_cast&lt;float&gt;(d); }</code> or remove the function and rewrite your declaration as <code>static const float kDefaultTolerance = 0.25f;</code> - but we really need to know either 1) what development environment are you using. This could make someone tell you how to debug your program. - or, as @J... asked, 2) What does <code>DoubleToFlaot</code> look like? Show the code and someone may spot the error."}, {"owner": {"reputation": 511, "user_id": 4206920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a46313b0205173e3ba5124f15111f57?s=128&d=identicon&r=PG&f=1", "display_name": "Pendyala", "link": "https://stackoverflow.com/users/4206920/pendyala"}, "edited": false, "score": 0, "creation_date": 1567618530, "post_id": 57792331, "comment_id": 102019843, "body": "Typos edited and provided definition"}, {"owner": {"reputation": 511, "user_id": 4206920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a46313b0205173e3ba5124f15111f57?s=128&d=identicon&r=PG&f=1", "display_name": "Pendyala", "link": "https://stackoverflow.com/users/4206920/pendyala"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567618642, "post_id": 57792331, "comment_id": 102019885, "body": "@TedLyngmo, both the solutions you suggested are working. Do you have any idea what is going on here?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567619473, "post_id": 57792331, "comment_id": 102020189, "body": "@Pendyala Hmm... was your <code>static inline float DoubleToFloat(double x);</code> defined in a <code>.cpp</code> file? Multiple <code>.cpp</code> files even? What was the purpose of making it <code>static</code>?"}, {"owner": {"reputation": 511, "user_id": 4206920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a46313b0205173e3ba5124f15111f57?s=128&d=identicon&r=PG&f=1", "display_name": "Pendyala", "link": "https://stackoverflow.com/users/4206920/pendyala"}, "edited": false, "score": 0, "creation_date": 1567623342, "post_id": 57792331, "comment_id": 102021758, "body": "Actually all these snippets are from some third party open source which we are consuming in our application. So I dont have context why they made it static. what I observed is this definition is present in header file. So they seems to be solving multiple definitions error by making this function static. When we make static, all object files will get their own copies."}], "owner": {"reputation": 511, "user_id": 4206920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a46313b0205173e3ba5124f15111f57?s=128&d=identicon&r=PG&f=1", "display_name": "Pendyala", "link": "https://stackoverflow.com/users/4206920/pendyala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567618297, "creation_date": 1567613757, "last_edit_date": 1567618297, "question_id": 57792331, "link": "https://stackoverflow.com/questions/57792331/c-how-to-debug-sigill-ill-illopn", "title": "C++ - How to debug SIGILL ILL_ILLOPN", "body": "<p>Recently I ran into a crash while the following statement is getting executed</p>\n\n<pre><code>static const float kDefaultTolerance = DoubleToFloat(0.25);\n</code></pre>\n\n<p>where DoubleToFloat is defined as below</p>\n\n<pre><code> static inline float DoubleToFloat(double x){\n    return static_cast&lt;float&gt;(x);\n }\n</code></pre>\n\n<p>And the log statements shows below</p>\n\n<pre><code>09-04 01:08:50.727   882   882 F DEBUG   : signal 4 (SIGILL), code 2 (ILL_ILLOPN), fault addr 0x7f9e3ca96818\n</code></pre>\n\n<p>when I read about SIGILL, I understand that it happens when process encounters to run an invalid operation. So I think compiler (clang in my case) is generating some junk code while translating the above snippet. How to check what is compiler generating and see what is going wrong in this particular case? Also suggest me if there are any tools to debug these kind of issues.</p>\n"}, {"tags": ["c++", "unique-ptr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567612846, "post_id": 57792090, "comment_id": 102017402, "body": "How is it &quot;not working&quot;?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1567612925, "post_id": 57792090, "comment_id": 102017457, "body": "Your design is likely wrong. <code>VAO</code> is the <b><i>unique</i></b> owner of this resource. It cannot share the object outside, because it would mean losing unique ownership of the object. You can either (best option) reorganize your logic so that no getters are needed, (slightly worse) transfer the object together with the ownership or (not bad, but worst of these three) make the pointer <code>std::shared_ptr</code>, so that it can have many owners."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1567613019, "post_id": 57792090, "comment_id": 102017505, "body": "Another option would be to return a reference to the pointer."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1567613738, "post_id": 57792090, "comment_id": 102017869, "body": "If you give someone something unique, you no longer have that thing. You should think twice before doing that."}, {"owner": {"reputation": 325, "user_id": 6220486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b0fd0714b6147991aece5929542eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user34299", "link": "https://stackoverflow.com/users/6220486/user34299"}, "edited": false, "score": 0, "creation_date": 1567773594, "post_id": 57792090, "comment_id": 102074423, "body": "Two thoughts, which is better?  First, make member m_VBO a public member of class VAO of type std::unique_ptr&lt;VBO&gt; and exclude the &quot;getter&quot; method.  Second, make m_VBO a private member of class VAO of type VBO, with the same &quot;getter&quot; method, and then instantiate instances of VAO as a std::unique pointer&lt;VAO&gt;."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1567614099, "last_edit_date": 1567614099, "creation_date": 1567613245, "answer_id": 57792221, "question_id": 57792090, "link": "https://stackoverflow.com/questions/57792090/how-do-i-use-a-get-method-to-return-a-private-stdunique-ptr-member-of-a-clas/57792221#57792221", "title": "How do I use a &quot;get&quot; method to return a private std::unique_ptr member of a class", "body": "<p>If you are sharing pointers with others you need to consider who is in charge of life time of the object pointed to.</p>\n\n<p>If there can only ever be a single entity in charge of lifetime, then <code>std::unique_ptr</code> is a good choice. You then have the options of either passing lifetime management responsibilities to someone else, by <em>moving</em> the unique_ptr. Or you can give out raw pointers if you know that your clients are only observers and will not participate in lifetime management (and you then need to ensure that the entity holding the unique_ptr outlives all observers).</p>\n\n<p>If multiple entities should all be able to individually keep an object alive - shared ownership - then a <code>std::shared_ptr</code> is a better choice.</p>\n"}, {"comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1567613337, "post_id": 57792223, "comment_id": 102017668, "body": "this is crapy solution. Exposing implementation detail"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1567614847, "post_id": 57792223, "comment_id": 102018350, "body": "At least, make the std::uniqe_ptr const, no? Still not great but would at least prevent modifications."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1567621136, "post_id": 57792223, "comment_id": 102020887, "body": "@Jeffrey: whereas returning <code>std::unique_ptr&lt;T&gt;&amp;</code> might make sense (as you may actually modify it), returning <code>const std::unique_ptr&lt;T&gt;&amp;</code> is pointless. better to return <code>&#47;* const *&#47; T*</code> instead (or reference if not null)."}], "tags": [], "owner": {"reputation": 39, "user_id": 4041908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d700c18c2e802b438d0e680ddbaab23c?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4041908/raj"}, "is_accepted": false, "score": -2, "last_activity_date": 1567613259, "creation_date": 1567613259, "answer_id": 57792223, "question_id": 57792090, "link": "https://stackoverflow.com/questions/57792090/how-do-i-use-a-get-method-to-return-a-private-stdunique-ptr-member-of-a-clas/57792223#57792223", "title": "How do I use a &quot;get&quot; method to return a private std::unique_ptr member of a class", "body": "<p>Your get function should look like</p>\n\n<pre><code>std::unique_ptr&lt;VBO&gt;&amp; VBO::GetVBO()\n{\n    return m_VBO;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 6220486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b0fd0714b6147991aece5929542eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user34299", "link": "https://stackoverflow.com/users/6220486/user34299"}, "edited": false, "score": 0, "creation_date": 1567773649, "post_id": 57792294, "comment_id": 102074450, "body": "I will watch the Herb Sutter video.  Thanks."}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 4, "last_activity_date": 1567613940, "last_edit_date": 1567613940, "creation_date": 1567613571, "answer_id": 57792294, "question_id": 57792090, "link": "https://stackoverflow.com/questions/57792090/how-do-i-use-a-get-method-to-return-a-private-stdunique-ptr-member-of-a-clas/57792294#57792294", "title": "How do I use a &quot;get&quot; method to return a private std::unique_ptr member of a class", "body": "<p>Unique pointer as name says is unique. So you can't clone it! You can only move it.</p>\n\n<p>So basically depending on your needs there are couple reasonable solutions:</p>\n\n<ol>\n<li>Expose reference to object (or raw pointer to object):</li>\n</ol>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>VBO&amp; VAO::GetVBO() const\n{\n    return *m_VBO;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Transfer of ownership:</li>\n</ol>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::unique_ptr&lt;VBO&gt; VAO::takeVBO()\n{\n    return std::move(m_VBO);\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>Provide clone functionality for <code>VBO</code>:</li>\n</ol>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::unique_ptr&lt;VBO&gt; VAO::clone() const\n{\n    return std::make_unique&lt;VBO&gt;(*m_VBO);\n}\n</code></pre>\n\n<ol start=\"4\">\n<li>Change <code>std::unique_ptr</code> to <code>std::shared_ptr</code></li>\n</ol>\n\n<p><hr>\nI recommend watching: <a href=\"https://youtu.be/JfmTagWcqoE\" rel=\"nofollow noreferrer\">Herb Sutter \u201cLeak-Freedom in C++... By Default.\u201d</a></p>\n"}], "owner": {"reputation": 325, "user_id": 6220486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/16b0fd0714b6147991aece5929542eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user34299", "link": "https://stackoverflow.com/users/6220486/user34299"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1567614099, "creation_date": 1567612749, "question_id": 57792090, "link": "https://stackoverflow.com/questions/57792090/how-do-i-use-a-get-method-to-return-a-private-stdunique-ptr-member-of-a-clas", "title": "How do I use a &quot;get&quot; method to return a private std::unique_ptr member of a class", "body": "<p>I have created a class with private, std::unique_ptr members, viz., <code>m_VBO</code> and <code>m_EBO</code>, as shown.</p>\n\n<pre><code>class VAO {\n\npublic:\n    VAO();\n    std::unique_ptr&lt;VBO&gt; GetVBO();\n    std::unique_ptr&lt;EBO&gt; GetEBO();\n\nprivate:\n    std::unique_ptr&lt;VBO&gt; m_VBO;\n    std::unique_ptr&lt;EBO&gt; m_EBO;\n};\n</code></pre>\n\n<p>The class also includes \"get\" methods to protect and return those members for use when needed.</p>\n\n<p>The definition of those \"get\" methods is,</p>\n\n<pre><code>//*************************************************************************************************\nstd::unique_ptr&lt;VBO&gt; VAO::GetVBO()\n{\n    return std::make_unique&lt;VBO&gt;(m_VBO);\n    //return std::make_unique&lt;VBO&gt;();\n}\n\n//*************************************************************************************************\nstd::unique_ptr&lt;EBO&gt; VAO::GetEBO()\n{\n    //return std::make_unique&lt;EBO&gt;(m_EBO);\n    return std::make_unique&lt;EBO&gt;();\n}\n</code></pre>\n\n<p>which is not working.</p>\n\n<p>I cannot figure out the correct technique for writing the \"get\" methods.</p>\n\n<p>How is it done?</p>\n"}, {"tags": ["c++", "algorithm", "oop", "c++11"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1567611172, "post_id": 57791577, "comment_id": 102016504, "body": "Why is the pointer invalid in the first place? What is the lifetime of those objects? Who manages those pointers? Are they part of any invariant?"}, {"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 1, "creation_date": 1567611280, "post_id": 57791577, "comment_id": 102016556, "body": "Yeah, unfortunately because you designed your architecture in this way the code is going to be ugly. C++ has no &quot;safe navigation operator&quot; like something like C# does. You would have to implement that yourself. But a much better alternative would be to significantly refactor your architecture. You should try your best to avoid having coupling that is several layers deep, because dealing with them is always going to be a nightmare."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 5, "creation_date": 1567611807, "post_id": 57791577, "comment_id": 102016850, "body": "Not an answer, but:  The Law of Demeter suggests that when you find yourself having to chain multiple dereferences like that, it&#39;s time to refactor your API so that you no longer have to do so:   <a href=\"http://www.cpptips.com/demeter2\" rel=\"nofollow noreferrer\">cpptips.com/demeter2</a>"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1567612935, "post_id": 57791577, "comment_id": 102017465, "body": "@JeremyFriesner In &quot;Clean Code&quot; it is called &quot;<a href=\"http://www.thinkcode.se/blog/2011/12/30/how-many-train-wrecks-are-lurking-in-your-code\" rel=\"nofollow noreferrer\">train wreck</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1567611434, "post_id": 57791689, "comment_id": 102016641, "body": "Reference type data members are troublesome. Because they can&#39;t be reseated it makes it hard to implement assignment and move semantics. Additionally, it&#39;s not clear that one of the pointers isn&#39;t <i>intended</i> to be <code>nullptr</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1567611678, "post_id": 57791689, "comment_id": 102016773, "body": "This is ill-advised in general and also not necessarily applicable to OP (there is no clarification on the source of null pointers). Member references really complicate dealing with the class, and they should be reserved for truly necessary cases. Often a non-owning pointer is a better alternative."}, {"owner": {"reputation": 3029, "user_id": 1060004, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZOBMa.jpg?s=128&g=1", "display_name": "ustulation", "link": "https://stackoverflow.com/users/1060004/ustulation"}, "edited": false, "score": 0, "creation_date": 1567612072, "post_id": 57791689, "comment_id": 102017002, "body": "Fair enough, I incorrectly thought the OP wanted to ensure that it shouldn&#39;t be a null or a design that is such. I misunderstood it as if you are checking for null-ness then you are probably not sure when you should be using it and then maybe it&#39;s not null but garbage."}], "tags": [], "owner": {"reputation": 3029, "user_id": 1060004, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZOBMa.jpg?s=128&g=1", "display_name": "ustulation", "link": "https://stackoverflow.com/users/1060004/ustulation"}, "is_accepted": false, "score": -1, "last_activity_date": 1567611312, "creation_date": 1567611312, "answer_id": 57791689, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes/57791689#57791689", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>The problem is not with a pointer being <code>null</code>. That is in-fact good as it mostly crashes at runtime. What if it's not <code>null</code> but has been previously freed/deleted ? The usage will probably lead to Undefined Behaviour.</p>\n\n<p>A better way would be to use references if you can:</p>\n\n<pre><code>class A\n{\nprivate:\n  B&amp; _b;\npublic:\n  A(B&amp; b): _b{b} {}\n  B&amp; getB ()\n  {\n    return _b;\n  }\n};\n</code></pre>\n\n<p>Or something like that. Then you at-least don't have anything dangling (unless you are also using pointers somewhere).</p>\n\n<p>If you have to use pointers then use one of the smart-pointers - see if <code>std::unique_ptr</code> solves if for you. If not then for shared ownership use <code>std::shared_ptr</code> and so on. Also ensure the way you initialise objects don't lead to a default null there.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1567611747, "post_id": 57791754, "comment_id": 102016808, "body": "This is a technical answer for potentially a bigger design issue. Chances are, OP would be better off fixing the design. Also this multiple nesting is a pain to read, and it should not be suggested."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1567611918, "post_id": 57791754, "comment_id": 102016911, "body": "@SergeyA Sure, but the OP is about avoiding using <code>nullptr</code> when they are used as a sentinel value.  This answers that question.  You want to go in an fix all the OP&#39;s problems - great!  But that doesn&#39;t make this answer incorrect."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1567612030, "post_id": 57791754, "comment_id": 102016981, "body": "Your answer doesn&#39;t answer. OP is already aware they can do multiple check, the question is specifically how to avoid doing so."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1567611535, "creation_date": 1567611535, "answer_id": 57791754, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes/57791754#57791754", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>You need to test all along the way:</p>\n\n<pre><code>A foo;\nB* BPrt = foo.getB();\nif (BPrt)\n{\n    C* CPtr = BPrt-&gt;getC();\n    if (CPtr)\n    {\n        int n = CPtr-&gt;getN();\n        ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1567611727, "post_id": 57791783, "comment_id": 102016796, "body": "I don&#39;t think it&#39;s reasonable to assume the pointers can always be meaningfully initialized. And it doesn&#39;t account for the situation where one of the pointers may be made <code>nullptr</code> later."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567611757, "post_id": 57791783, "comment_id": 102016816, "body": "@Fran&#231;oisAndrieux I am note sure if your comment is relevant to my particular code."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1567611860, "post_id": 57791783, "comment_id": 102016871, "body": "That might be a good and valuable advice, assuming default objects make sense for OP. Unfortunately, OP has really given us no indication of what the desired behavior actually is."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567611898, "post_id": 57791783, "comment_id": 102016899, "body": "It&#39;s specifically addressed to this particular post. Your answer is to always initialize the pointers but I don&#39;t believe there is any indication that is possible for OPs case and certainly isn&#39;t generally something that is meaningful. Objects represents concepts, information, behaviors, etc. This solution assumes that a global non-<code>const</code> instance of each of these objects is meaningful but that&#39;s not usually true."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567612021, "post_id": 57791783, "comment_id": 102016976, "body": "@Fran&#231;oisAndrieux It seems to me your comments are misplaced. You may like to post you own answer. Feel free to disagree."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": -1, "last_activity_date": 1567611920, "last_edit_date": 1567611920, "creation_date": 1567611644, "answer_id": 57791783, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes/57791783#57791783", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>You can make sure that your pointers are always initialized, if possible:</p>\n\n<pre><code>class C {\nprivate:\n    int _n = 0;\npublic:\n    int getN() {return _n;}\n};\n\n\nclass B {\nprivate:\n    static C default_c;\n    C* _c = &amp;default_c;\npublic:\n    C&amp; getC() {return *_c;}\n};\n\nC B::default_c; // An out-of-line static member definition is required.\n\nclass A {\nprivate:\n    static B default_b;\n    B* _b = &amp;default_b;\npublic:\n    B&amp; getB() {return *_b;}\n};\n\nB A::default_b; // An out-of-line static member definition is required.\n\nint main() {\n    A a;\n    std::cout &lt;&lt; a.getB().getC().getN() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Note that pointers make better members than references because the references break value semantics and make your class non-assignable.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1567614670, "last_edit_date": 1567614670, "creation_date": 1567611848, "answer_id": 57791843, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes/57791843#57791843", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>In order to avoid having null pointers, you may want to establish a class-invariant that the member is never null. This can be achieved with following steps:</p>\n\n<ol>\n<li>Encapsulate access to the member so that nothing outside the class can set the member. You've already achieved this through the use of private access. Just make sure that you pass/return a reference or a pointer to the member from a member function to the outside.</li>\n<li>Ensure that no member nor friend function ever sets the member to null.</li>\n<li>Also ensure that the member is always initialised. This is achieved by use of a custom constructor. Example:</li>\n</ol>\n\n<hr>\n\n<pre><code>class A {\n    B* b;\npublic:\n    A(B* b) : b(b) {\n        if (!b) {\n            // unlike indirection through null pointer, an exception can\n            // be caught and (potentially) handled gracefully at runtime\n            throw std::runtime_error(\"Naughty!\");\n        }\n    }\n\n    // following prevents passing null literal at compile time\n    A(std::nullptr_t) = delete; // nullptr\n    A(int)            = delete; // 0\n\n    // since it is never null, we can safely return a reference\n    B&amp; getB() {return *b;}\n}\n</code></pre>\n\n<p>While references have the nice property of not being ever null, they are tricky as members, since they are also not assignable. As an argument to a constructor, they are tricky since it is generally not conventional or expected for a class object to keep references to objects passed into a constructor. As such, I advocate the use of pointers in this case even when null is undesirable.</p>\n\n<blockquote>\n  <p>Note: I do not have access to change the implementation of the hierarchy of classes (A,B,C) as they are generated code and I do not have access to change the generator.</p>\n</blockquote>\n\n<p>In this case you may instead wrap the generated classes with better classes:</p>\n\n<pre><code>class AWrapper {\n    A a;\n    // custom implementation that encapsulates A\n}\n</code></pre>\n\n<hr>\n\n<p>If null pointers are valid values that cannot be avoided, then such invariant is of course not possible. In such case, you must always check whether the pointer is null before indirecting through it:</p>\n\n<pre><code>if (B* b = foo.getB())\n    if (C* c = b-&gt;getC())\n        c-&gt;getN();\n</code></pre>\n\n<p>Another thing that you might consider is whether all these pointers are necessary. Perhaps it would be simpler if the classes contained each other instead of indirectly referring to one another.</p>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1567616611, "post_id": 57792838, "comment_id": 102019066, "body": "Those casts aren&#39;t needed."}, {"owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1567616818, "post_id": 57792838, "comment_id": 102019154, "body": "In this case, that&#39;s correct. But the form is presented that preserves the reversal of the code from call chain to cast-ternary which can be grown to handle <code>n</code> cases of call-chaining."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567617870, "post_id": 57792838, "comment_id": 102019592, "body": "What do the <code>static</code>s add here? I can&#39;t imagine a scenario where a local variable in <code>main</code> would benefit from being <code>static</code>."}, {"owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "edited": false, "score": 0, "creation_date": 1567618297, "post_id": 57792838, "comment_id": 102019756, "body": "It&#39;s not really necessary here\u2014just a leftover from the original code I worked with."}], "tags": [], "owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "is_accepted": false, "score": 0, "last_activity_date": 1567616154, "creation_date": 1567616154, "answer_id": 57792838, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes/57792838#57792838", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>Here's how I solved the problem:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass C {\nprivate:\n    int _n;\npublic:\n    int getN() {return _n;}\n};\n\nclass B {\nprivate:\n    C* _c;\npublic:\n    C* getC() {return _c;}\n};\n\n\nclass A {\nprivate:\n    B* _b;\npublic:\n    B* getB() {return _b;}\n};\n\nint main(void);\nint main() {\n    static B b;\n    static C c;\n    static A foo; \n    unsigned int n;\n    B *bPtr; C *cPtr;\n\n    /* --RECODE (CHAIN-CALL): foo.getB()-&gt;getC()-&gt;getN();-- */\n    bPtr = (B *) (foo.getB());\n    cPtr = (C *) (bPtr ? bPtr-&gt;getC() : 0);\n    n    = (int) (cPtr ? cPtr-&gt;getN() : 0);\n    /* --USE (CAST) and (TERNARY) instead of (CHAIN-CALL)-- */\n\n    cout &lt;&lt; n &lt;&lt; endl;\n    return n;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1567616409, "post_id": 57792867, "comment_id": 102018995, "body": "Dereferencing a null pointer results in undefined behavior. It is not required to throw an exception."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": -1, "last_activity_date": 1567616284, "creation_date": 1567616284, "answer_id": 57792867, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes/57792867#57792867", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>Did you consider:</p>\n\n<pre><code>try {\nfoo.getB()-&gt;getC()-&gt;getN();\n}\ncatch(...)\n{\n    //Here you know something is Null\n}\n</code></pre>\n\n<p>That seems the simplest safest,when dealing with existing code.</p>\n"}, {"tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 0, "last_activity_date": 1567625907, "last_edit_date": 1567625907, "creation_date": 1567625524, "answer_id": 57794778, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes/57794778#57794778", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>If the classes cannot be changed then the checking could be done via a template:</p>\n\n<pre><code>template &lt;typename T, typename A, typename ...Args&gt;\nauto recurse(T t, A a, Args... args)\n{\n    if (!t)\n        throw std::exception{};\n    auto next = (t-&gt;*a)();\n    if constexpr (sizeof...(Args) &gt; 0)\n        return recurse(next, args...);\n    else\n        return next;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/RJaWOV\" rel=\"nofollow noreferrer\">Then call as follows</a>:</p>\n\n<pre><code>recurse(&amp;foo, &amp;A::getB, &amp;B::getC, &amp;C::getN);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12020224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Eg-Fj0I6Zag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re7M2uFwmKb9EFEJHQ_KH6_EwBrBw/photo.jpg?sz=128", "display_name": "Bolivar Simon", "link": "https://stackoverflow.com/users/12020224/bolivar-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 7, "score": 1, "last_activity_date": 1567625907, "creation_date": 1567610936, "last_edit_date": 1567613055, "question_id": 57791577, "link": "https://stackoverflow.com/questions/57791577/avoid-null-pointers-while-accessing-objects-in-a-tree-hierarchy-of-classes", "title": "Avoid null pointers while accessing objects in a tree hierarchy of classes", "body": "<p>I have to work with a tree based hierarchy of objects where I need to access the deepest element that contains the data required by the application. I'm not sure if the previous statement explains in its best the problem itself so its better to present it with an example. Given the following scenario:</p>\n\n<pre><code>class A {\nprivate:\n    B* _b;\npublic:\n    B* getB() {return _b;}\n};\n\nclass B {\nprivate:\n    C* _c;\npublic:\n    C* getC() {return _c;}\n};\n\nclass C {\nprivate:\n    int _n;\npublic:\n    int getN() {return _n;}\n};\n</code></pre>\n\n<p>The desired operation would be to access <strong>n</strong> via <strong>A</strong>. So I would call the following:</p>\n\n<pre><code>A foo;\nfoo.getB()-&gt;getC()-&gt;getN();\n</code></pre>\n\n<p>The problem comes when any of the parts of the path are null we end up having a core dump. In the above scenario if B is null we end up in a core dump scenario.</p>\n\n<p>Therefore I seek help and advice on any strategy or pattern that I can use to avoid this core dumps scenarios. If the path is extremely big I end up checking every single pointer if its valid and end up having really ugly code and also risk that I might have missed checking a part of the path. <strong>Note: I do not have access to change the implementation of the hierarchy of classes (A,B,C) as they are generated code and I do not have access to change the generator.</strong> Changing the previous would be my preferred solution but unfortunately I cannot.</p>\n"}, {"tags": ["c++", "codeblocks"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1567611192, "post_id": 57791565, "comment_id": 102016514, "body": "I&#39;ll bet you could remove at least 90% of that code and still get the error."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1567611277, "post_id": 57791565, "comment_id": 102016554, "body": "@Brabrara Where is the variable doors used in this statement  std::cout &lt;&lt; &quot;Doors: &quot; &lt;&lt; std::to_string(doors)&lt;&lt; &quot;\\n&quot;; declared? Is it a private data member of the class Car? If so then you may not use it in this context."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7965178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46080f0aac1e31d87865442e1ff8e5f?s=128&d=identicon&r=PG&f=1", "display_name": "xhighway999", "link": "https://stackoverflow.com/users/7965178/xhighway999"}, "is_accepted": false, "score": 0, "last_activity_date": 1567612998, "creation_date": 1567612998, "answer_id": 57792153, "question_id": 57791565, "link": "https://stackoverflow.com/questions/57791565/error-messages-in-c-function-variable-was-not-declared-in-this-scope-var/57792153#57792153", "title": "error messages in C++: function / variable &quot;was not declared in this scope&quot;, variable &quot;is private&quot;", "body": "<p>You can't access  Watercraft:maxdepth and WatercraftType::type because you've declared them private. In order to use them in your Amphibian class you need to declare them public or private. </p>\n\n<p>To fix your error in Amphibian::printVehicle() you need to write </p>\n\n<pre><code>`void Amphibian::printVehicle()\n{\n    std::cout &lt;&lt; \"Id: \" &lt;&lt; id &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Model: \" &lt;&lt; model &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Year: \" &lt;&lt; std::to_string(catchYear()) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Doors: \" &lt;&lt; std::to_string(doors)&lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"MaxDepth: \" &lt;&lt; std::to_string(maxdepth) &lt;&lt; \"\\n\";\n    switch(type)\n    {\n            case WatercraftType::AVC:           std::cout &lt;&lt; \"Type: \" &lt;&lt; \"AVC\" &lt;&lt; \"\\n\";                 break;\n            case WatercraftType::WATERJET:      std::cout &lt;&lt; \"Type: \" &lt;&lt; \"WATERJET\" &lt;&lt; \"\\n\";            break;\n            case WatercraftType::PROPELLER:     std::cout &lt;&lt; \"Type: \" &lt;&lt; \"PROPELLER\"&lt;&lt; \"\\n\";           break;\n            default:            std::cout &lt;&lt; \"Type: Unknown WatercraftType\" &lt;&lt; \"\\n\";\n    }\n}`\n</code></pre>\n\n<p>You can find the fixed version here:\n<a href=\"https://godbolt.org/z/RF-Kqi\" rel=\"nofollow noreferrer\">https://godbolt.org/z/RF-Kqi</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12020138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b58e328ccf4329e0d8cdc6ca41f11a?s=128&d=identicon&r=PG&f=1", "display_name": "Brabrara", "link": "https://stackoverflow.com/users/12020138/brabrara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 697, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567615194, "creation_date": 1567610894, "last_edit_date": 1567615194, "question_id": 57791565, "link": "https://stackoverflow.com/questions/57791565/error-messages-in-c-function-variable-was-not-declared-in-this-scope-var", "title": "error messages in C++: function / variable &quot;was not declared in this scope&quot;, variable &quot;is private&quot;", "body": "<p>I am new to programming in general and to C++ in particular and I am trying to set up a programme in Code::Blocks for a car dealer. It should be possible to buy and sell vehicles and to print out information about the cars. The different vehicles are all separated into different classes. In the main function I implemented an interface with a selection menu for possible actions like selling a car. </p>\n\n<p>I keep getting error messages that I don`t understand (like \"was not declared in this scope\"), although I have already declared the functions / variables in header files (watercraftType.h, watercraft.h, amphibian.h, motorbike.h, car.h, vehicle.h, vehicleDealer.h) and included those in the respective source files and the main function (as needed). </p>\n\n<p>I am getting the following error messages:</p>\n\n<blockquote>\n  <p>error messages in watercraft.h:  \"double Watercraft:maxdepth\" is\n  private; \"WatercraftType::type\" is private</p>\n  \n  <p>error message in car.h:  \"int Car::doors\" is private</p>\n</blockquote>\n\n<p>I don`t understand why the error messages show up during the\ndeclaration of the variables in watercraft.h. In car.h the error\nmessage shows up during the declaration of the class constructor. </p>\n\n<blockquote>\n  <p>error messages in amphibian.cpp: \"catchYear\" was not declared in this\n  scope; \"AVC\", \"WATERJET\", \"PROPELLER\" was not declared in this scope</p>\n</blockquote>\n\n<p>I have included the header \"vehicle.h\", which includes the declaration\nfor catchYear(), and the header \"amphibian.h\" in the file, which\nincludes the header \"watercraft.h\". \"watercraft.h\" includes\n\"watercraftType.h\" with the declaration of the enum class\nWatercraftType. </p>\n\n<blockquote>\n  <p>error messages in main.cpp: in case 2: \"Motorbike\", \"Motorrad1\" was\n  not declared in this scope; expected type-specifier before\n  \"Motorbike\"; in case 3 for: cin >> vType;: no match for \"operator>>\"\n  (operand types are \"std::istream {aka std:basic_istream}\" and\n  \"WatercraftType\")</p>\n</blockquote>\n\n<p>I don`t understand why I am getting these error messages, because I am\nusing the exact same syntax as with the class Car in case 1.</p>\n\n<pre><code>//vehicle.h\n#ifndef VEHICLE_H_INCLUDED\n#define VEHICLE_H_INCLUDED\n#include &lt;string&gt;\n\nclass Vehicle\n{\n    public:\n        std::string id;\n        std::string model;\n        virtual ~Vehicle();\n        virtual void printVehicle();\n        static bool checkID(std::string vId);\n        int catchYear();\n\n    private:\n        int year;\n\n    protected:\n        Vehicle(std::string vId, std::string vModel, int vYear);\n};\n\n#endif // VEHICLE_H_INCLUDED\n\n\n\n//car.h\n#ifndef CAR_H_INCLUDED\n#define CAR_H_INCLUDED\n#include \"vehicle.h\"\n#include &lt;string&gt;\n\nclass Car : public Vehicle\n{\n        public:\n            Car(std::string vId, std::string vModel, int vYear, int vDoors, bool vRightHandDrive);\n            void printVehicle();\n\n        private:\n            int doors;\n            bool rightHandDrive;\n};\n\n#endif // CAR_H_INCLUDED\n\n\n\n//watercraft.h\n#ifndef WATERCRAFT_H_INCLUDED\n#define WATERCRAFT_H_INCLUDED\n#include \"watercraftType.h\"\n\nclass Watercraft\n{\n    private:\n        double maxdepth;\n        WatercraftType type;\n\n    protected:\n        Watercraft(double vMaxdepth, WatercraftType vType);\n        void printVehicle();\n};\n\n#endif // WATERCRAFT_H_INCLUDED\n\n\n\n//watercraftType.h\n#ifndef WATERCRAFTTYPE_H_INCLUDED\n#define WATERCRAFTTYPE_H_INCLUDED\n\nenum class WatercraftType {AVC, WATERJET, PROPELLER};\n\n#endif // WATERCRAFTTYPE_H_INCLUDED\n\n\n\n//amphibian.h\n#ifndef AMPHIBIAN_H_INCLUDED\n#define AMPHIBIAN_H_INCLUDED\n#include \"car.h\"\n#include \"watercraft.h\"\n\nclass Amphibian : public Car, public Watercraft\n{\n    public:\n        Amphibian(std::string vId, std::string vModel, int vYear, int vDoors, double vMaxdepth, WatercraftType vType);\n        void printVehicle();\n};\n\n#endif // AMPHIBIAN_H_INCLUDED\n\n\n\n//amphibian.cpp\n#include \"amphibian.h\"\n#include \"vehicle.h\"\n#include &lt;iostream&gt;\n\n//Amphibian Konstruktor\nAmphibian::Amphibian(std::string vId, std::string vModel, int vYear, int vDoors, double vMaxdepth, WatercraftType vType) :\n            Car(vId, vModel, vYear, vDoors, false),\n            Watercraft(vMaxdepth, vType)\n            {}\n\n//Methode printVehicle\nvoid Amphibian::printVehicle()\n{\n    std::cout &lt;&lt; \"Id: \" &lt;&lt; id &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Model: \" &lt;&lt; model &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Year: \" &lt;&lt; std::to_string(catchYear()) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Doors: \" &lt;&lt; std::to_string(doors)&lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"MaxDepth: \" &lt;&lt; std::to_string(maxdepth) &lt;&lt; \"\\n\";\n    switch(type)\n    {\n            case AVC:           std::cout &lt;&lt; \"Type: \" &lt;&lt; \"AVC\" &lt;&lt; \"\\n\";                 break;\n            case WATERJET:      std::cout &lt;&lt; \"Type: \" &lt;&lt; \"WATERJET\" &lt;&lt; \"\\n\";            break;\n            case PROPELLER:     std::cout &lt;&lt; \"Type: \" &lt;&lt; \"PROPELLER\" &lt;&lt; \"\\n\";           break;\n            default:            std::cout &lt;&lt; \"Type: Unknown WatercraftType\" &lt;&lt; \"\\n\";\n    }\n}\n\n\n\n//main.cpp\n#include \"vehicle.h\"\n#include \"car.h\"\n#include \"motorbike.h\"\n#include \"amphibian.h\"\n#include \"vehicleDealer.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    while (true)\n    {\n        VehicleDealer Haendler (\"Dealer\");\n        int auswahl;\n\n        cout &lt;&lt; \"Willkommen beim Autoh\u00e4ndler: \" &lt;&lt; Haendler.name &lt;&lt; \".\\n\"\n                \"Was m\u00f6chten Sie tun?\\n\"\n                \"Dr\u00fccken Sie die entsprechende Zahl auf der Tastatur.\\n\"\n                \"1 - Auto hinzuf\u00fcgen.\\n\"\n                \"2 - Motorrad hinzuf\u00fcgen.\\n\"\n                \"3 - Amphibienfahrzeug hinzuf\u00fcgen.\\n\"\n                \"4 - Fahrzeug entfernen.\\n\"\n                \"5 - Fahrzeuge anzeigen.\\n\"\n                \"Sonstige Einzelzahl: Autoh\u00e4ndler verlassen.\\n\";\n        cin &gt;&gt; auswahl;\n\n        switch(auswahl)\n        {\n            case 1:\n                {\n                string vId;\n                string vModel;\n                int vYear;\n                int vDoors;\n                bool vRightHandDrive;\n                cout &lt;&lt; \"Bitte geben Sie die n\u00f6tigen Paramter zur Erstellung eines Autos ein.\\n\"\n                \"Bitte geben Sie die Fahrzeugnummer (7-stellig) ein.\\n\";\n                cin &gt;&gt; vId;\n                if (Vehicle::checkID(vId) == false)\n                    {\n                        cout &lt;&lt; \"Die Nummer ist falsch. Bitte geben Sie die Fahrzeugnummer (7-stellig) erneut ein.\\n\";\n                        cin &gt;&gt; vId;\n                    }\n                cout &lt;&lt; \"Bitte geben Sie die Modellbezeichnung ein.\\n\";\n                cin &gt;&gt; vModel;\n                cout &lt;&lt; \"Bitte geben Sie die Anzahl der T\u00fcren ein.\\n\";\n                cin &gt;&gt; vDoors;\n                cout &lt;&lt; \"Bitte geben Sie das Herstellungsjahr des Autos ein.\\n\";\n                cin &gt;&gt; vYear;\n                cout &lt;&lt; \"Bitte geben Sie an, ob es sich bei dem Auto um einen Rechtslenker handelt.\\n\";\n                cin &gt;&gt; vRightHandDrive;\n                Car* Auto1;\n                Auto1 = new Car(vId, vModel, vYear, vDoors, vRightHandDrive);\n                if (Haendler.buyVehicle((Vehicle*)Auto1) == false)\n                    {\n                    cout &lt;&lt; \"Das Auto konnte nicht hinzugef\u00fcgt werden.\\n\";\n                    }\n                break;\n                }\n\n            case 2:\n                {\n                string vId;\n                string vModel;\n                int vYear;\n                cout &lt;&lt; \"Bitte geben Sie die n\u00f6tigen Paramter zur Erstellung eines Motorrads ein.\\n\"\n                \"Bitte geben Sie die Fahrzeugnummer (7-stellig) ein.\\n\";\n                cin &gt;&gt; vId;\n                if (Vehicle::checkID(vId) == false)\n                    {\n                        cout &lt;&lt; \"Die Nummer ist falsch. Bitte geben Sie die Fahrzeugnummer (7-stellig) erneut ein.\\n\";\n                        cin &gt;&gt; vId;\n                    }\n                cout &lt;&lt; \"Bitte geben Sie die Modellbezeichnung ein.\\n\";\n                cin &gt;&gt; vModel;\n                cout &lt;&lt; \"Bitte geben Sie das Herstellungsjahr des Motorrads ein.\\n\";\n                cin &gt;&gt; vYear;\n                Motorbike* Motorrad1;\n                Motorrad1 = new Motorbike(vId, vModel, vYear);\n                if (Haendler.buyVehicle((Vehicle*)Motorrad1) == false)\n                    {\n                    cout &lt;&lt; \"Das Motorrad konnte nicht hinzugef\u00fcgt werden.\\n\";\n                    }\n                break;\n                }\n\n            case 3:\n                {\n                string vId;\n                string vModel;\n                int vYear;\n                int vDoors;\n                double vMaxdepth;\n                WatercraftType vType;\n                cout &lt;&lt; \"Bitte geben Sie die n\u00f6tigen Paramter zur Erstellung eines Amphibienfahrzeugs ein.\\n\"\n                \"Bitte geben Sie die Fahrzeugnummer (7-stellig) ein.\\n\";\n                cin &gt;&gt; vId;\n                if (Vehicle::checkID(vId) == false)\n                    {\n                        cout &lt;&lt; \"Die Nummer ist falsch. Bitte geben Sie die Fahrzeugnummer (7-stellig) erneut ein.\\n\";\n                        cin &gt;&gt; vId;\n                    }\n                cout &lt;&lt; \"Bitte geben Sie die Modellbezeichnung ein.\\n\";\n                cin &gt;&gt; vModel;\n                cout &lt;&lt; \"Bitte geben Sie das Herstellungsjahr des Amphibienfahrzeugs ein.\\n\";\n                cin &gt;&gt; vYear;\n                cout &lt;&lt; \"Bitte geben Sie die Anzahl der T\u00fcren ein.\\n\";\n                cin &gt;&gt; vDoors;\n                cout &lt;&lt; \"Bitte geben Sie die maximale Tiefe als Gleitkommazahl (mit Punkt) an.\\n\";\n                cin &gt;&gt; vMaxdepth;\n                cout &lt;&lt; \"Bitte geben Sie den Antriebstyp an (AVC, WATERJET, PROPELLER).\\n\";\n                cin &gt;&gt; vType;\n                Amphibian* Amphibian1;\n                Amphibian1 = new Amphibian(vId, vModel, vYear, vDoors, vMaxdepth, vType);\n                if (Haendler.buyVehicle((Vehicle*)Amphibian1) == false)\n                    {\n                    cout &lt;&lt; \"Das Amphibienfahrzeug konnte nicht hinzugef\u00fcgt werden.\\n\";\n                    }\n                break;\n                }\n\n            case 4:\n                {\n                string vId;\n                cout &lt;&lt; \"Bitte geben Sie die Fahrzeugnummer (7-stellig) des Fahrzeugs ein, das Sie entfernen wollen.\\n\";\n                cin &gt;&gt; vId;\n                if (Haendler.sellVehicle(vId) == false)\n                    {\n                    cout &lt;&lt; \"Das Fahrzeug konnte nicht entfernt werden.\\n\";\n                    }\n                break;\n                }\n\n            case 5:\n                {\n                cout &lt;&lt; \"Alle vorhandenen Fahrzeuge werden ausgegeben.\\n\";\n                Haendler.printVehicles();\n                break;\n                }\n\n            default:\n                {\n                cout &lt;&lt; \"Sie haben eine sonstige Ziffer gew\u00e4hlt. Das Programm wird beendet.\\n\";\n                return 0;\n                }\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "libgit2"], "comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1567611947, "post_id": 57791388, "comment_id": 102016927, "body": "What do you mean by \u201catomic\u201d (perhaps \u201clow-level\u201d)?"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1567628452, "post_id": 57791388, "comment_id": 102023414, "body": "You can&#39;t achieve this without strong understanding how Git database (hash tree) works under hood."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1567664808, "post_id": 57791388, "comment_id": 102031460, "body": "@DavisHerring By atomic I mean that we need much more than one line to write the equivalent of a git command (I already have written a <i>&quot;git clone url</i>&quot;, <i>&quot;git add .&quot;</i>, <i>&quot;git commit -m message&quot;</i>, <i>&quot;git push&quot;</i> and <i>&quot;git fetch&quot;</i>). This being said, whether you understand or not what I mean by atomic is not the point of the question anyway ;)"}], "answers": [{"comments": [{"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1567682109, "post_id": 57803423, "comment_id": 102040083, "body": "Thanks for your answer. Finally I found a way. I used <code>git_reference_name_to_id()</code> with <i>&quot;HEAD&quot;</i> and <i>&quot;FETCH_HEAD&quot;</i> to get the head_id and fetch_head_id and I compared them with <code>git_oid_equal()</code>. I also replaced <code>git_annotated_commit_from_fetchhead()</code> by <code>git_annotated_commit_lookup()</code> and I gave the fetch_head_id that I previously got."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1567682615, "post_id": 57803423, "comment_id": 102040400, "body": "In fact, I cannot use <code>git_repository_fetchhead_foreach</code> because I don&#39;t know what it is supposed to do nor how to fill the required callback (without any concrete example, I&#39;m afraid I&#39;ll never understand this black magic). But as I only work on origin/master (only one remote and only one branch), my method (as I mentioned in the first comment) works well."}, {"owner": {"reputation": 63488, "user_id": 729881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdfaf0aad74fef442e2ffc9999ef9c1?s=128&d=identicon&r=PG", "display_name": "Edward Thomson", "link": "https://stackoverflow.com/users/729881/edward-thomson"}, "reply_to_user": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1567694266, "post_id": 57803423, "comment_id": 102047314, "body": "Seems reasonable, regardless, I added an example."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1567755387, "post_id": 57803423, "comment_id": 102065936, "body": "Thanks for the example. Actually I have no issue to provide a callback into a function parameter :) but I rather don&#39;t know how to fill the callback function body (<code>fetchhead_cb</code> in this case). With your example, I now know how to write it to get the IDs. I&#39;m not sure if it is sufficient for a git pull."}], "tags": [], "owner": {"reputation": 63488, "user_id": 729881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdfaf0aad74fef442e2ffc9999ef9c1?s=128&d=identicon&r=PG", "display_name": "Edward Thomson", "link": "https://stackoverflow.com/users/729881/edward-thomson"}, "is_accepted": false, "score": 0, "last_activity_date": 1567694246, "last_edit_date": 1567694246, "creation_date": 1567679215, "answer_id": 57803423, "question_id": 57791388, "link": "https://stackoverflow.com/questions/57791388/how-to-write-a-proper-git-pull-with-libgit2/57803423#57803423", "title": "How to write a proper git pull with libgit2", "body": "<blockquote>\n  <p>How to check if the fetched HEAD is equal or different to the local HEAD ?</p>\n</blockquote>\n\n<p>You can call <a href=\"https://libgit2.org/libgit2/#HEAD/group/merge/git_merge_analysis\" rel=\"nofollow noreferrer\"><code>git_merge_analysis</code></a>, which will tell you if you would need to do a merge.  In this case, <code>GIT_MERGE_ANALYSIS_UP_TO_DATE</code> indicates that there is no need to merge (<code>git merge</code> on the command line would respond with \"Already up to date\").</p>\n\n<blockquote>\n  <p>How or where to get the git_oid * id required by git_annotated_commit_from_fetchhead()?</p>\n</blockquote>\n\n<p>You can iterate the <code>FETCH_HEAD</code> file with <a href=\"https://libgit2.org/libgit2/#HEAD/group/repository/git_repository_fetchhead_foreach\" rel=\"nofollow noreferrer\"><code>git_repository_fetchhead_foreach</code></a>.  It will provide you all the information necessary to generate an annotated commit from whichever remote branch you want to merge.</p>\n\n<p>For example:</p>\n\n<pre><code>int fetchhead_cb(const char *ref_name, const char *remote_url, const git_oid *oid, unsigned int is_merge, void *payload)\n{\n    if (is_merge)\n    {\n        printf(\"reference: '%s' is the reference we should merge\\n\");\n        git_oid_cpy((git_oid *)payload, oid);\n    }\n}\n\nvoid pull(void)\n{\n    /* here's the id we want to merge */\n    git_oid id_to_merge;\n\n    /* Do the fetch */\n\n    /* Populate id with the for_merge branch from FETCH_HEAD */\n    git_repository_fetchhead_foreach(repo, fetchhead_cb, &amp;id_to_merge);\n}\n</code></pre>\n\n<p>(Note that you'd probably want to actually capture all the details of the <code>FETCH_HEAD</code> information - not just the id - so that you could create an annotated commit from the data, but this is an example of how the <code>git_repository_fetchhead_foreach</code> function works with callbacks.)</p>\n"}], "owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567694246, "creation_date": 1567610214, "question_id": 57791388, "link": "https://stackoverflow.com/questions/57791388/how-to-write-a-proper-git-pull-with-libgit2", "title": "How to write a proper git pull with libgit2", "body": "<p>I want to write a <em>C++</em> <em>libgit2</em> wrapper to perform some basic git operations because <em>libgit2</em> is too much atomic to be used as is (in my opinion).<br/>\nAs <em>libgit2</em> is written in <em>C</em>, it does not matter if I get a <em>C</em> or <em>C++</em> oriented solution, I will adapt it by myself.</p>\n\n<p>I encounter difficulties with the <code>gitPull()</code> function that is supposed to be the <em>\"git pull\"</em> equivalent.</p>\n\n<p>I planned to implement it as follows:</p>\n\n<ul>\n<li><a href=\"https://libgit2.org/libgit2/#HEAD/group/remote/git_remote_fetch\" rel=\"nofollow noreferrer\"><code>git_remote_fetch()</code></a></li>\n<li><a href=\"https://libgit2.org/libgit2/#HEAD/group/annotated/git_annotated_commit_from_fetchhead\" rel=\"nofollow noreferrer\"><code>git_annotated_commit_from_fetchhead()</code></a></li>\n<li><a href=\"https://libgit2.org/libgit2/#HEAD/group/merge/git_merge\" rel=\"nofollow noreferrer\"><code>git_merge()</code></a> (with the previously got <code>git_annotated_commit</code>)</li>\n<li><a href=\"https://libgit2.org/libgit2/#HEAD/group/commit/git_commit_create\" rel=\"nofollow noreferrer\"><code>git_commit_create()</code></a></li>\n</ul>\n\n<p>Considering that it is the proper way to do it (tell me if it is not), I struggle with two issues:</p>\n\n<ul>\n<li><strong>How to check if the fetched HEAD is equal or different to the local HEAD ?</strong> (in order to know if the merge + commit are needed or not, in other words, if there is something to merge or if we already are up-to-date).</li>\n<li><strong>How or where to get the <code>git_oid * id</code> required by <code>git_annotated_commit_from_fetchhead()</code> ?</strong> (the last parameter).</li>\n</ul>\n\n<p>I know these questions may look quite basic but I could not find any exploitable information or example neither on the <a href=\"https://libgit2.org/libgit2/#HEAD\" rel=\"nofollow noreferrer\"><em>libgit2</em> API reference documentation</a> nor in the <a href=\"https://libgit2.org/docs/guides/101-samples/\" rel=\"nofollow noreferrer\"><em>libgit2</em> samples</a>.</p>\n\n<p>I already have checked the already existing stackoverflow threads about this topic but none of them provide any exploitable code sample.</p>\n\n<p>I will be very grateful if someone could give me some helpful information about how to achieve it or explain what I have misunderstood.</p>\n"}, {"tags": ["c++", "r", "eigen", "rcpp"], "comments": [{"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 1, "creation_date": 1567693894, "post_id": 57791272, "comment_id": 102047107, "body": "You have to write your own if you don&#39;t want to use the <code>Rcpp::as</code> and <code>Rcpp::wrap</code> specializations provided by <code>RcppEigen</code> (I still don&#39;t understand why ...). See <a href=\"http://dirk.eddelbuettel.com/code/rcpp/Rcpp-extending.pdf\" rel=\"nofollow noreferrer\">dirk.eddelbuettel.com/code/rcpp/Rcpp-extending.pdf</a> and <a href=\"https://gallery.rcpp.org/articles/custom-templated-wrap-and-as-for-seamingless-interfaces/\" rel=\"nofollow noreferrer\">gallery.rcpp.org/articles/&hellip;</a>."}], "owner": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567609793, "creation_date": 1567609793, "question_id": 57791272, "link": "https://stackoverflow.com/questions/57791272/how-do-i-convert-r-data-types-into-an-eigenmatrixdouble-dim-1-in-this-situat", "title": "How do I convert R data types into an Eigen::Matrix&lt;double,dim,1&gt; in this situation?", "body": "<p>Why is this reporting <code>error: no matching function for call to \u2018as&lt;Eigen::Matrix&lt;double, 400, 1, 0, 400, 1&gt; &gt;(int)\u2019</code> and <code>cannot convert \u20183\u2019 (type \u2018int\u2019) to type \u2018SEXP {aka SEXPREC*}\u2019</code>? There appears to be a similar problem <a href=\"https://stackoverflow.com/questions/40114103/rcpp-eigen-map-error-with-matrixxf\">here</a>.</p>\n\n<p>In a <a href=\"https://stackoverflow.com/questions/57778952/correctly-registering-a-plugin-to-use-eigen-via-rcpp\">previous question, I asked about registering plugins</a> so that I could use a c++ template library from within <code>R</code>. Continuing on with that example, I still cannot get this small example to work. The plugin issue has been figured out, but now <code>Rcpp::as</code> won't allow me to convert numeric vectors and matrices from <code>R</code> into the appropriate c++ type. </p>\n\n<pre><code>library(Rcpp)\ninc &lt;- \n'template &lt;size_t dim&gt;\nclass SillyWrapper  \n{\npublic:\n  Eigen::Matrix&lt;double,dim,1&gt; m_vec;\n  SillyWrapper(const Eigen::Matrix&lt;int,dim,1&gt;&amp; vec) : m_vec(vec) {};\n  void printData() { Rcpp::Rcout &lt;&lt; m_vec(0); };\n};'\nsrc &lt;- '\nvoid foo(){\n  const int dim = 400;\n  SillyWrapper&lt;dim&gt; myThing(Rcpp::as&lt;Eigen::Map&lt;Eigen::Matrix&lt;double,dim,1&gt;&gt;&gt;(3));\n  myThing.printData();\n}'\nf &lt;- function(x){\n  plug &lt;- Rcpp.plugin.maker(include.before = \"#include &lt;Eigen/Dense&gt;\")\n  settings &lt;- plug()\n  settings$env$PKG_CPPFLAGS = \"-I/usr/include/eigen3\"\n  settings\n}\nRcpp::registerPlugin(name = \"Eigen3\", plugin = f)\nfun &lt;- cppFunction(code = src, \n                   plugins = \"Eigen3\",\n                   includes = inc)\n</code></pre>\n\n<p>A few other things:</p>\n\n<ul>\n<li>I am registering my own plugin instead of using RcppEigen for practice (perhaps it will help later when I need to use other header only libraries). I plan on relying on plugins because I have a lot of header files I need to include, and I don't want to <code>paste</code> them all together and assign the massive string to <code>inc</code> above.</li>\n<li>I cannot use <code>Eigen::MatrixXd</code> I need to size the matrices with the compiler.</li>\n<li><a href=\"https://stackoverflow.com/users/143305/dirk-eddelbuettel\">@DirkEddelbuettel</a> mentioned something about <code>configure</code> logic. I tried searching that, but no luck.</li>\n</ul>\n"}, {"tags": ["c++", "lambda", "c++14", "c++17", "template-argument-deduction"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1567609860, "post_id": 57791248, "comment_id": 102015803, "body": "&quot;<i>modern way</i>&quot; What&#39;s wrong with the old way? The struct method is much easier to read at the function site."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1567610148, "post_id": 57791248, "comment_id": 102015956, "body": "In the <i>old way</i>, you likely don&#39;t want to provide both default template and function arguments this way: <a href=\"https://wandbox.org/permlink/PtSwiQwsNDyDrshu\" rel=\"nofollow noreferrer\">wandbox.org/permlink/PtSwiQwsNDyDrshu</a>. Use <code>Functor func = Functor()</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567610049, "post_id": 57791297, "comment_id": 102015909, "body": "works only with non-capturing lambda, no? (not relevant for the question as asked)"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1567610112, "post_id": 57791297, "comment_id": 102015932, "body": "@formerlyknownas_463035818: If you pass a capturing lambda, then the template function will deduce the type of this lambda, thus overriding the default type of <code>int(int)</code>."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1567610116, "post_id": 57791297, "comment_id": 102015933, "body": "@formerlyknownas_463035818 I don&#39;t think you can capture anything in this context since the lambda is used as a default argument."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567610162, "post_id": 57791297, "comment_id": 102015960, "body": "@BiagioFesta oh right ;) maybe some globals but I dont care about them"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1567610282, "post_id": 57791297, "comment_id": 102016022, "body": "@formerlyknownas_463035818 You couldn&#39;t capture a global anyway. Capturing requires <i>automatic</i> storage."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1567610437, "post_id": 57791297, "comment_id": 102016118, "body": "Note that GCC and Clang are smart enough to inline the lambda call even though it gets converted into a function pointer. <a href=\"https://godbolt.org/z/nl4qEj\" rel=\"nofollow noreferrer\">godbolt.org/z/nl4qEj</a>"}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": true, "score": 8, "last_activity_date": 1567609923, "creation_date": 1567609923, "answer_id": 57791297, "question_id": 57791248, "link": "https://stackoverflow.com/questions/57791248/default-argument-for-a-functor-in-a-templated-parameter/57791297#57791297", "title": "Default argument for a functor in a templated parameter", "body": "<p>From <em>C++11</em> you can already do that:</p>\n\n<pre><code>template &lt;typename Functor = int(int)&gt;\nint run_new(int x, Functor func = [](int a){ return a+1; }) \n{\n    return func(x);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1567609987, "last_edit_date": 1567609987, "creation_date": 1567609927, "answer_id": 57791299, "question_id": 57791248, "link": "https://stackoverflow.com/questions/57791248/default-argument-for-a-functor-in-a-templated-parameter/57791299#57791299", "title": "Default argument for a functor in a templated parameter", "body": "<p>Just add an overload for this.</p>\n\n<pre><code>template &lt;typename Functor&gt;\nint run_new(int x, Functor func) \n{\n    return func(x);\n}\n\nint run_new(int x) \n{\n    return run_new(x, [](int a){ return a+1; });\n}\n</code></pre>\n\n<p>Allows you to get around not beening able to have a lambda expression as a default function argument.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1567609930, "creation_date": 1567609930, "answer_id": 57791302, "question_id": 57791248, "link": "https://stackoverflow.com/questions/57791248/default-argument-for-a-functor-in-a-templated-parameter/57791302#57791302", "title": "Default argument for a functor in a templated parameter", "body": "<p>Not quite \"modern\" but you could use plain old overloading with a non-template method taking only a single parameter:</p>\n\n<pre><code>int run_new(int x) \n{\n    return func(x,[](int a){ return a+1;});  // calls the template overload\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1567610689, "post_id": 57791472, "comment_id": 102016273, "body": "Do note that you do incur a cost for this.  <code>std::function</code> uses type erasure so you have dynamic allocation and more than likely lose the ability to inline the code."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1567610790, "post_id": 57791472, "comment_id": 102016321, "body": "@NathanOliver Both GCC and Clang seem to be smart enough to generate the same inlined assembly code for <code>f</code>, which is minimal: <a href=\"https://godbolt.org/z/uuEeNE\" rel=\"nofollow noreferrer\">godbolt.org/z/uuEeNE</a>. Need to admit I was surprised."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 3, "creation_date": 1567611026, "post_id": 57791472, "comment_id": 102016431, "body": "@DanielLangr But now the functor has to be copyable"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1567611150, "post_id": 57791472, "comment_id": 102016496, "body": "@Artyer That&#39;s the drawback. The advantage is that you don&#39;t need to expose the function definition in a header file."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 0, "last_activity_date": 1567610788, "last_edit_date": 1567610788, "creation_date": 1567610512, "answer_id": 57791472, "question_id": 57791248, "link": "https://stackoverflow.com/questions/57791248/default-argument-for-a-functor-in-a-templated-parameter/57791472#57791472", "title": "Default argument for a functor in a templated parameter", "body": "<p>Alternatively to other questions, you can even avoid templates:</p>\n\n<pre><code>int run_new(int x, std::function&lt;int(int)&gt; func = [](int a){ return a + 1; })\n{\n   return func(x);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1567610877, "creation_date": 1567610877, "answer_id": 57791557, "question_id": 57791248, "link": "https://stackoverflow.com/questions/57791248/default-argument-for-a-functor-in-a-templated-parameter/57791557#57791557", "title": "Default argument for a functor in a templated parameter", "body": "<p>The best I can imagine pass through a variable</p>\n\n<pre><code>static constexpr auto defFunc = [](int a){ return a+1; };\n\ntemplate &lt;typename Functor = decltype(defFunc)&gt;\nint run_new(int x, Functor func = defFunc) \n{\n    return func(x);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1567612432, "creation_date": 1567612432, "answer_id": 57792009, "question_id": 57791248, "link": "https://stackoverflow.com/questions/57791248/default-argument-for-a-functor-in-a-templated-parameter/57792009#57792009", "title": "Default argument for a functor in a templated parameter", "body": "<p>Just for fun, in C++20 we have both (1) lambdas in unevaluated contexts and (2) lambdas without capture are default constructible. Combine those two and you get:</p>\n\n<pre><code>template &lt;typename Functor = decltype([](int a){ return a+1; })&gt;\nint run_new(int x, Functor func = {})\n{\n    return func(x);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/d1wj13\" rel=\"nofollow noreferrer\">Obligatory godbolt</a>.</p>\n"}], "owner": {"reputation": 7242, "user_id": 109019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/266408e128b44b980a953eda085d38a2?s=128&d=identicon&r=PG", "display_name": "Salgar", "link": "https://stackoverflow.com/users/109019/salgar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 2, "accepted_answer_id": 57791297, "answer_count": 6, "score": 7, "last_activity_date": 1567612432, "creation_date": 1567609725, "last_edit_date": 1567610972, "question_id": 57791248, "link": "https://stackoverflow.com/questions/57791248/default-argument-for-a-functor-in-a-templated-parameter", "title": "Default argument for a functor in a templated parameter", "body": "<p>I would like to have a default lambda for a functor argument in my function.</p>\n\n<p>I am aware it is possible using a <code>struct</code> and <code>operator()</code> like this:</p>\n\n<pre><code>struct AddOne {\n    int operator()(int a) {\n        return a+1;\n    }\n};\n\ntemplate &lt;typename Functor = AddOne&gt;\nint run_old(int x, Functor func = AddOne()) \n{\n    return func(x);\n}\n</code></pre>\n\n<p>But I was wondering if there was a modern way, given the changes in the standard in either c++14/17/20, to make this work?</p>\n\n<pre><code>template &lt;typename Functor&gt;\nint run_new(int x, Functor func = [](int a){ return a+1; }) \n{\n    return func(x);\n}\n</code></pre>\n\n<p>I'm not sure what one would use as the default type to Functor, or if there is syntax i'm unaware of.</p>\n\n<p><a href=\"https://godbolt.org/z/Hs6vQs\" rel=\"nofollow noreferrer\">https://godbolt.org/z/Hs6vQs</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 3, "creation_date": 1567608728, "post_id": 57790964, "comment_id": 102015160, "body": "When you debug your code, the error is on which line?"}, {"owner": {"reputation": 879, "user_id": 2724196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae7ad61d6f045d20b45985f80a9724ae?s=128&d=identicon&r=PG&f=1", "display_name": "bznein", "link": "https://stackoverflow.com/users/2724196/bznein"}, "edited": false, "score": 1, "creation_date": 1567608764, "post_id": 57790964, "comment_id": 102015174, "body": "Honestly, your code is barely readable.  Fix your indentation and give the variables better names. Apart from this, run your program through a debugger."}, {"owner": {"reputation": 9, "user_id": 10116917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZvoSa4Dd1do/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r7nho9jKlOzG4EO2HuIMQK4ozEmQ/mo/photo.jpg?sz=128", "display_name": "hack sark", "link": "https://stackoverflow.com/users/10116917/hack-sark"}, "edited": false, "score": 0, "creation_date": 1567608807, "post_id": 57790964, "comment_id": 102015205, "body": "Actually i dont debug it"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1567608837, "post_id": 57790964, "comment_id": 102015223, "body": "You cannot allocate such large arrays on the stack. Allocate them on the heap (with <code>new</code> or a <code>std::vector</code>) or as a global."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 6, "creation_date": 1567608850, "post_id": 57790964, "comment_id": 102015232, "body": "<i>Actually i dont debug it</i> That&#39;s the point - you should! ;-)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1567608972, "post_id": 57790964, "comment_id": 102015310, "body": "probably not the problem, but <code>vector&lt;pair&lt;int,int&gt;&gt; adj[n];</code> is questionable in several ways. Why create a c-array of vectors? And you are using a VLA here, which is not standard c++"}, {"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1567608990, "post_id": 57790964, "comment_id": 102015327, "body": "Now that it is formatted, what are you solving? the link does not work"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1567609051, "post_id": 57790964, "comment_id": 102015366, "body": "Never ever, ever do this: <code>#include&lt;bits&#47;stdc++.h&gt; using namespace std;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1567608995, "post_id": 57791039, "comment_id": 102015328, "body": "There is even a name for such mistakes: <a href=\"https://en.wikipedia.org/wiki/Off-by-one_error\" rel=\"nofollow noreferrer\">Off-by-one error</a> (and a Wikipedia article in various languages)."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1567609096, "post_id": 57791039, "comment_id": 102015390, "body": "@Scheff Nice, didn&#39;t know that."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 0, "last_activity_date": 1567609605, "last_edit_date": 1567609605, "creation_date": 1567608884, "answer_id": 57791039, "question_id": 57790964, "link": "https://stackoverflow.com/questions/57790964/how-to-fix-segmentation-fault-in-this-program/57791039#57791039", "title": "How to fix segmentation fault in this program", "body": "<p>One possible cause is that you store indexes from <code>1</code> to <code>n</code> to the queue <code>q</code>:</p>\n\n<pre><code>for (k = 1; k &lt;= n; k++) {\n   q.push(k);\n</code></pre>\n\n<p>and then use them (as <code>z</code>) for indexing <code>adj</code> of size <code>n</code>:</p>\n\n<pre><code>   while (!q.empty()) {\n     z = q.front();  // z equals n in the first iteration here\n     ...\n     for (i = 0; i &lt; adj[z].size(); i++) // adj[n] will be accessed\n</code></pre>\n\n<p>Indexes in C++ are <strong>zero-based</strong>, therefore the valid ones are from <code>0</code> to <code>n-1</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 10116917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZvoSa4Dd1do/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7r7nho9jKlOzG4EO2HuIMQK4ozEmQ/mo/photo.jpg?sz=128", "display_name": "hack sark", "link": "https://stackoverflow.com/users/10116917/hack-sark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1567611205, "accepted_answer_id": 57791039, "answer_count": 1, "score": -9, "last_activity_date": 1567609605, "creation_date": 1567608634, "last_edit_date": 1567609076, "question_id": 57790964, "link": "https://stackoverflow.com/questions/57790964/how-to-fix-segmentation-fault-in-this-program", "closed_reason": "Not suitable for this site", "title": "How to fix segmentation fault in this program", "body": "<p>Im solving this question but cannot get correct output it show segmentation fault\n <a href=\"https://www.hackerearth.com/practice/algorithms/graphs/breadth-first-search/practice-problems/algorithm/agitated-chandan/description/\" rel=\"nofollow noreferrer\">https://www.hackerearth.com/practice/algorithms/graphs/breadth-first-search/practice-problems/algorithm/agitated-chandan/description/</a></p>\n\n<p>This is the code that i write for this program </p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint main()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);\n    int visited[100001], dist[100001];\n    int largest;\n\n    int t, x, y, w, i, z, k;\n    int large;\n    cin &gt;&gt; t;\n    while (t--)\n\n    {\n        int large = 0;\n        int n;\n        cin &gt;&gt; n;\n        vector&lt;pair&lt;int, int&gt;&gt; adj[n];\n\n        for (i = 1; i &lt; n; i++)\n        {\n            cin &gt;&gt; x &gt;&gt; y &gt;&gt; w;\n            adj[x].push_back(make_pair(y, w));\n            adj[y].push_back(make_pair(x, w));\n        }\n        queue&lt;int&gt; q;\n        for (k = 1; k &lt;= n; k++)\n        {\n            q.push(k);\n            for (i = 1; i &lt;= n; i++)\n            {\n                visited[i] = -1;\n                dist[i] = 0;\n            }\n            largest = 0;\n            while (!q.empty())\n            {\n\n                z = q.front();\n                visited[z] = 1;\n                q.pop();\n\n                for (i = 0; i &lt; adj[z].size(); i++)\n                {\n\n                    if (visited[adj[z][i].first] == -1)\n                    {\n                        dist[adj[z][i].first] = dist[z] + adj[z][i].second;\n\n                        if (largest &lt; dist[adj[z][i].first])\n                        {\n                            largest = dist[adj[z][i].first];\n                        }\n                        q.push(adj[z][i].first);\n                        visited[adj[z][i].first] = 1;\n                    }\n                }\n\n            }\n\n            if (large &lt; largest)\n            {\n                large = largest;\n            }\n        }\n        if (large &lt; 100)\n        {\n            cout &lt;&lt; 0 &lt;&lt; \" \";\n\n        }\n        if (large &gt; 100 &amp;&amp; large &lt; 1000)\n        {\n            cout &lt;&lt; 100 &lt;&lt; \" \";\n\n        }\n        if (large &gt; 1000 &amp;&amp; large &lt; 10000)\n        {\n            cout &lt;&lt; 1000 &lt;&lt; \" \";\n\n        }\n        if (large &gt; 10000)\n        {\n            cout &lt;&lt; 10000 &lt;&lt; \" \";\n\n        }\n        cout &lt;&lt; large;\n    }\n}\n</code></pre>\n\n<p>I expect output be\n0 8\nJust heck the logic is it write or wrong</p>\n"}, {"tags": ["c++", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567636776, "post_id": 57790846, "comment_id": 102025819, "body": "I added a tag for <code>Qt-Creator</code> since the question appears to be about the IDE and not the <code>Qt</code> framework."}, {"owner": {"reputation": 1858, "user_id": 599484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/38907a1ff475a70dc71663370685a1a1?s=128&d=identicon&r=PG", "display_name": "fyngyrz", "link": "https://stackoverflow.com/users/599484/fyngyrz"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567643810, "post_id": 57790846, "comment_id": 102027064, "body": "drescherjm: Thank you"}], "owner": {"reputation": 1858, "user_id": 599484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/38907a1ff475a70dc71663370685a1a1?s=128&d=identicon&r=PG", "display_name": "fyngyrz", "link": "https://stackoverflow.com/users/599484/fyngyrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567636716, "creation_date": 1567608236, "last_edit_date": 1567636716, "question_id": 57790846, "link": "https://stackoverflow.com/questions/57790846/qt-creator-output-messages-on-a-per-file-compile-basis", "title": "Qt-Creator: output messages on a per-file-compile basis?", "body": "<p><strong>Qt 5.8.0, Qt Creator 4.2.2, OSX 10.12.6, CLang</strong></p>\n\n<p>When Qt builds my project, it dutifully dumps all the compile invocation information to the <code>4 Compile Output</code> pane. This is a <em>lot</em> of text, and it scrolls by pretty fast, sometimes so fast I can't keep track of which file it is building, or has built.</p>\n\n<p>There's a <code>6 General Messages</code> pane that receives messages as set up in the project's <code>project.pro</code> file. For instance, putting the following command at the end of the <code>.pro</code> file results in an immediate dump to the <code>6 General Messages</code> pane as soon as the .pro file is processed...</p>\n\n<p><code>message(This is a test)</code></p>\n\n<p>...so what I'd like to do, if possible, is modify the built in compiler variable to output a message to the <code>6 General Messages</code> window <em>as each individual file is compiled.</em> I imagine it might go something like this...</p>\n\n<p><code>CC += message($$FILENAME)</code></p>\n\n<p>... where <code>FILENAME</code> is a placeholder for the actual variable name for the file being passed to the compiler to build. I have no idea exactly what the syntax or variable names might actually be, presuming this is possible at all. Any insight regarding this objective is most welcome.</p>\n"}, {"tags": ["c++", "windows", "winapi", "dll-injection"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1567609742, "post_id": 57790792, "comment_id": 102015751, "body": "<code>GetFinalPathFromHandle</code> require file handle. hMem - not a file handle"}, {"owner": {"reputation": 33, "user_id": 11695970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x8bIXcqtCBI/AAAAAAAAAAI/AAAAAAAABlM/lIJG-x7L1hs/photo.jpg?sz=128", "display_name": "Nocturnal", "link": "https://stackoverflow.com/users/11695970/nocturnal"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610072, "post_id": 57790792, "comment_id": 102015917, "body": "Yes i know. I tried that with NtOpenFile function which has a file handle.I forgot to remove GetFinalPathFromHandle from question."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610073, "post_id": 57790792, "comment_id": 102015919, "body": "you need call <code>GetClipboardFormatName</code> - may be you get <code>CFSTR_FILENAMEW</code> or <code>CFSTR_SHELLIDLIST</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610135, "post_id": 57790792, "comment_id": 102015946, "body": "<i>I tried that with NtOpenFile function</i> - but you need have file name for this first"}, {"owner": {"reputation": 33, "user_id": 11695970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x8bIXcqtCBI/AAAAAAAAAAI/AAAAAAAABlM/lIJG-x7L1hs/photo.jpg?sz=128", "display_name": "Nocturnal", "link": "https://stackoverflow.com/users/11695970/nocturnal"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610650, "post_id": 57790792, "comment_id": 102016254, "body": "@RbMm i used GetFinalPathFromHandle when i hooked into the NtOpenFile function from ntdll. GetClipboardFormatName outputs multiple values such as DataObject, ShellIdListArray, DataObjectAttributes, FileName, FileNameW."}, {"owner": {"reputation": 33, "user_id": 11695970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x8bIXcqtCBI/AAAAAAAAAAI/AAAAAAAABlM/lIJG-x7L1hs/photo.jpg?sz=128", "display_name": "Nocturnal", "link": "https://stackoverflow.com/users/11695970/nocturnal"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610768, "post_id": 57790792, "comment_id": 102016313, "body": "@RbMm is there anyway to get filename or path from the handle?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610827, "post_id": 57790792, "comment_id": 102016340, "body": "of course exist. but i not understand your question - are this about clipboard data, are this about get file name by handle.."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610874, "post_id": 57790792, "comment_id": 102016364, "body": "if you have <code>FileNameW</code> (same as <code>CFSTR_FILENAMEW</code>) - what else you want ?"}, {"owner": {"reputation": 33, "user_id": 11695970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x8bIXcqtCBI/AAAAAAAAAAI/AAAAAAAABlM/lIJG-x7L1hs/photo.jpg?sz=128", "display_name": "Nocturnal", "link": "https://stackoverflow.com/users/11695970/nocturnal"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567610964, "post_id": 57790792, "comment_id": 102016404, "body": "@RbMm i want to get the filename before it goes to clipboard so i can prevent or allow it based on the file name."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1567611106, "post_id": 57790792, "comment_id": 102016474, "body": "so ask another question - i have file handle - how get file path by it. or something else. how here clipboard related ?"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1567612945, "post_id": 57790792, "comment_id": 102017475, "body": "You realize the user can just copy the file in other ways?"}, {"owner": {"reputation": 33, "user_id": 11695970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x8bIXcqtCBI/AAAAAAAAAAI/AAAAAAAABlM/lIJG-x7L1hs/photo.jpg?sz=128", "display_name": "Nocturnal", "link": "https://stackoverflow.com/users/11695970/nocturnal"}, "reply_to_user": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1567613086, "post_id": 57790792, "comment_id": 102017540, "body": "@Anders yes the scope of the hook is to only prevent copy action using ctrl+c or copy from right click menu."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1567620865, "last_edit_date": 1567620865, "creation_date": 1567619461, "answer_id": 57793537, "question_id": 57790792, "link": "https://stackoverflow.com/questions/57790792/obtain-file-name-from-setclipboarddata-hook/57793537#57793537", "title": "Obtain file name from SetClipboardData hook", "body": "<p>Files can be copied/pasted using a number of different clipboard formats, and multiple formats can reside on the clipboard at the same time.</p>\n\n<ul>\n<li>CF_HDROP</li>\n<li>CFSTR_FILECONTENTS</li>\n<li>CFSTR_FILEDESCRIPTOR</li>\n<li>CFSTR_FILENAME</li>\n<li>CFSTR_FILENAMEMAP</li>\n<li>CFSTR_MOUNTEDVOLUME</li>\n<li>CFSTR_SHELLIDLIST</li>\n<li>CFSTR_SHELLIDLISTOFFSET</li>\n</ul>\n\n<p>Refer to <a href=\"https://docs.microsoft.com/en-us/windows/win32/shell/clipboard\" rel=\"nofollow noreferrer\">Shell Clipboard Formats</a> for specific details about each format.  In particular, see <a href=\"https://docs.microsoft.com/en-us/windows/win32/shell/clipboard#formats-for-transferring-file-system-objects\" rel=\"nofollow noreferrer\">Formats for Transferring File System Objects</a>.</p>\n\n<p>So, you would need something like this:</p>\n\n<pre><code>const UINT ui_CFSTR_SHELLIDLIST = RegisterClipboardFormat(CFSTR_SHELLIDLIST);\nconst UINT ui_CFSTR_FILENAMEA = RegisterClipboardFormat(CFSTR_FILENAMEA);\nconst UINT ui_CFSTR_FILENAMEW = RegisterClipboardFormat(CFSTR_FILENAMEW);\n...\n\nHANDLE WINAPI mySetClipBoardData (UINT uFormat, HANDLE hMem)\n{\n    if (!hMem) // DELAYED RENDERING! The real data will come later...\n        return SetClipboardData(uFormat, hMem);\n\n    if (uFormat == CF_HDROP)\n    {\n        LPDROPFILES pDF = (LPDROPFILES) GlobalLock(hMem);\n        if (pDF-&gt;fWide)\n        {\n            LPWSTR pFiles = (LPWSTR) (((LPBYTE)pDF) + pDF-&gt;pFiles);\n            while (*pFiles)\n            {\n                LPWSTR pFile = pFiles;\n                if (pFile refers to the desired file)\n                {\n                    GlobalUnlock(hMem);\n                    SetLastError(...);\n                    return NULL;\n\n                    // alternatively, build up a new string to place on the clipboard that omits this file...\n                }\n                pFiles += (lstrlenW(pFile) + 1);\n            }\n        }\n        else\n        {\n            LPSTR pFiles = (LPSTR) (((LPBYTE)pDF) + pDF-&gt;pFiles);\n            while (*pFiles)\n            {\n                LPSTR pFile = pFiles;\n                if (pFile refers to the desired file)\n                {\n                    GlobalUnlock(hMem);\n                    SetLastError(...);\n                    return NULL;\n\n                    // alternatively, build up a new string to place on the clipboard that omits this file...\n                }\n                pFiles += (lstrlenA(pFile) + 1);\n            }\n        }\n\n        GlobalUnlock(hMem);\n\n        /* alternatively:\n\n        TCHAR szFile[MAX_PATH];\n        UINT count = DragQueryFile((HDROP)hMem, (UINT)-1, NULL, 0);\n        for (UINT i = 0; i &lt; count; ++i)\n        {\n            DragQueryFile((HDROP)hMem, i, szFile, MAX_PATH);\n            if (szFile refers to the desired file)\n            {\n                SetLastError(...);\n                return NULL;\n\n                // alternatively, build up a new string to place on the clipboard that omits this file...\n            }\n        }\n        */\n    }\n    else if (uFormat == ui_CFSTR_SHELLIDLIST)\n    {\n        #define HIDA_GetPIDLFolder(pida) (LPCITEMIDLIST)(((LPBYTE)pida)+(pida)-&gt;aoffset[0])\n        #define HIDA_GetPIDLItem(pida, i) (LPCITEMIDLIST)(((LPBYTE)pida)+(pida)-&gt;aoffset[i+1])\n\n        LPIDA pIDA = (LPIDA) GlobalLock(hMem);\n        LPCITEMIDLIST pidlParent = HIDA_GetPIDLFolder(pIDA);\n\n        for (UINT i = 0; i &lt; pIDA-&gt;cidl; ++i)\n        {\n            LPCITEMIDLIST pidlFile = HIDA_GetPIDLItem(pIDA, i);\n\n            if (pidlParent+pidlFile refers to the desired file)\n            {\n                GlobalUnlock(hMem);\n                SetLastError(...);\n                return NULL;\n\n                // alternatively, build up a new array to place on the clipboard that omits this file...\n            }\n        }\n\n        GlobalUnlock(hMem);\n    }\n    else if (uFormat == ui_CFSTR_FILENAMEA)\n    {\n        LPSTR pFile = (LPSTR) GlobalLock(hMem);\n        if (pFile refers to the desired file)\n        {\n            GlobalUnlock(hMem);\n            SetLastError(...);\n            return NULL;\n        }\n        GlobalUnlock(hMem);\n    }\n    else if (uFormat == ui_CFSTR_FILENAMEW)\n    {\n        LPWSTR pFile = (LPWSTR) GlobalLock(hMem);\n        if (pFile refers to the desired file)\n        {\n            GlobalUnlock(hMem);\n            SetLastError(...);\n            return NULL;\n        }\n        GlobalUnlock(hMem);\n    }\n    else\n    {\n        // handle other shell formats as needed...\n    }\n\n    return SetClipboardData(uFormat, hMem);\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11695970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x8bIXcqtCBI/AAAAAAAAAAI/AAAAAAAABlM/lIJG-x7L1hs/photo.jpg?sz=128", "display_name": "Nocturnal", "link": "https://stackoverflow.com/users/11695970/nocturnal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 57793537, "answer_count": 1, "score": -1, "last_activity_date": 1567620865, "creation_date": 1567608017, "last_edit_date": 1567619228, "question_id": 57790792, "link": "https://stackoverflow.com/questions/57790792/obtain-file-name-from-setclipboarddata-hook", "title": "Obtain file name from SetClipboardData hook", "body": "<p>I used EasyHook to hook into the <code>SetClipboardData()</code> function.</p>\n\n<pre><code>HANDLE mySetClipBoardData (UINT uFormat, HANDLE hMem){\n    return SetClipboardData(uFormat, hMem);\n    //return NULL;\n}\n</code></pre>\n\n<p>I can either pass the data to the original function or return NULL.</p>\n\n<p>The goal is to prevent the user from copying specific files.</p>\n\n<p>This DLL will be injected into <code>Explorer.exe</code> and will be called whenever a user tries to copy a file.</p>\n\n<p>How to obtain the filename being copied?</p>\n\n<p>Is there any other way to achieve this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567607510, "post_id": 57790573, "comment_id": 102014390, "body": "I&#39;d recommend using <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow noreferrer\">ncurses</a> (or one of its clones/derivatives) for something like this."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 1, "creation_date": 1567610724, "post_id": 57790573, "comment_id": 102016291, "body": "Except for <code>\\x20</code> = space, those aren&#39;t ASCII codes; they&#39;re <a href=\"https://en.wikipedia.org/wiki/Code_page_437\" rel=\"nofollow noreferrer\">IBM437</a> codes.  I assume your program is running on a DOS or Windows system?"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1567614398, "post_id": 57791195, "comment_id": 102018164, "body": "What is the meaning of the &#39;k&#39; prefix on the enum names?"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1567618368, "post_id": 57791195, "comment_id": 102019785, "body": "@ThomasMatthews <a href=\"https://stackoverflow.com/questions/5016622/where-does-the-k-prefix-for-constants-come-from\" title=\"where does the k prefix for constants come from\">stackoverflow.com/questions/5016622/&hellip;</a>"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1567618487, "post_id": 57791195, "comment_id": 102019829, "body": "@ThomasMatthews bad habit developed from working on others&#39; code."}], "tags": [], "owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "is_accepted": true, "score": 5, "last_activity_date": 1567609946, "last_edit_date": 1567609946, "creation_date": 1567609499, "answer_id": 57791195, "question_id": 57790573, "link": "https://stackoverflow.com/questions/57790573/dynamic-ascii-box-with-numbers-inside/57791195#57791195", "title": "Dynamic ASCII Box with Numbers Inside", "body": "<p>I'm sure there's a simpler solution, but off the top of my head:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nenum  BoxParts {\n    kLeftUpper = '\\xDA',\n    kVertical = '\\xB3',\n    kLeftBreak = '\\xC3',\n    kLeftLower = '\\xC0',\n    kEmpty = '\\x20',\n    kHorizontal = '\\xC4',\n    kIntersection = '\\xC5',\n    kBottomBreak = '\\xC1',\n    kRightUpper = '\\xBF',\n    kRightBreak = '\\xB4',\n    kRightLower = '\\xD9',\n    kTopBreak = '\\xC2',\n    kCount = 12\n};\n\nvoid drawLine(const int cellCount, const int cellWidth, const char left, const char divider, const char contents, const char right)\n{\n    cout &lt;&lt; left;\n    for (int i = 1; i &lt; cellCount * cellWidth; ++i)\n    {\n        if (0 == i % cellWidth)\n            cout &lt;&lt; divider;\n        else\n            cout &lt;&lt; contents;\n    }\n    cout &lt;&lt; right &lt;&lt; endl;\n}\n\nvoid drawBox(const int cellCount, const int cellWidth, const int cellHeight)\n{\n    // top\n    drawLine(cellCount, cellWidth, kLeftUpper, kTopBreak, kHorizontal, kRightUpper);\n    for (int i = 1; i &lt; cellCount * cellHeight; ++i)\n    {\n        if (0 == i % cellHeight)\n            drawLine(cellCount, cellWidth, kLeftBreak, kIntersection, kHorizontal, kRightBreak);\n        else\n            drawLine(cellCount, cellWidth, kVertical, kVertical, ' ', kVertical);\n    }\n    // bottom\n    drawLine(cellCount, cellWidth, kLeftLower, kBottomBreak, kHorizontal, kRightLower);\n}\n\n\n\nint main(int argc, char** argv) {\n\n    const int n = 4;\n    drawBox(n, 10, 5);\n    getchar();\n\n    return 0;\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gdlS4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gdlS4.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 73, "user_id": 12014730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC_cTV9jW_S4mQboeUm-BzkUIdyJaBEvaflWU-uEA=k-s128", "display_name": "Razna", "link": "https://stackoverflow.com/users/12014730/razna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 57791195, "answer_count": 1, "score": 4, "last_activity_date": 1567609946, "creation_date": 1567607246, "last_edit_date": 1567607348, "question_id": 57790573, "link": "https://stackoverflow.com/questions/57790573/dynamic-ascii-box-with-numbers-inside", "title": "Dynamic ASCII Box with Numbers Inside", "body": "<p>Having a problem in making a dynamic box using these set of ASCII codes. I'm really lost on what to do. This dynamic box also has numbers inside them.</p>\n\n<p>I already tried making loops inside loops to adjust the box's size.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(){\n    char asciis[] = {'\\xDA','\\xB3','\\xC3','\\xC0','\\x20','\\xC4','\\xC5','\\xC1','\\xBF','\\xB4','\\xD9', '\\xC2'};\n    int box size = (n*2)+1;\n    char box[box size][box size]; //set the size of the box\n    //set a in all coordinates\n    /*for (int r = 0; r &lt; n; r++){\n        for (int c = 0; c &lt; n; c++){\n            box[r][c] = 'a';\n        }\n    }*/\n\n    for (int r = 0; r &lt; n; r++){\n        for (int c = 0; c &lt; n; c++){\n            for (int boxrow = 0; boxrow &lt; box size; boxrow++){\n                for (int boxcol = 0; boxcol &lt; box size; boxcol++){\n                    //conditions\n                }\n            }\n        }\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>This is the output I'm trying to create: \n<a href=\"https://i.stack.imgur.com/FQuLc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FQuLc.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.imgur.com/YRgMlaJ.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/YRgMlaJ.png</a></p>\n\n<p>Don't mind those numbers, I was just mapping the array.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1567607287, "post_id": 57790528, "comment_id": 102014248, "body": "This really sounds like it should be on meta, not main.  FWIW this is why I always cite the section as a link.  For instance I&#39;ll use <a href=\"https://timsong-cpp.github.io/cppwp/expr.const.cast#4.3\" rel=\"nofollow noreferrer\">&#91;expr.const.cast&#93;/4.3</a> so if the link breaks you at least know what I was referring to."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567607400, "post_id": 57790528, "comment_id": 102014315, "body": "@NathanOliver I wasn&#39;t sure since I though Meta should contain only questions about SO, which is not my case: <a href=\"https://stackoverflow.com/help/whats-meta\">stackoverflow.com/help/whats-meta</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567607747, "post_id": 57790528, "comment_id": 102014543, "body": "On second thought this might not be a meta question, but It still feels that way to me.  Not sure if it should be a C++ question but I have no idea what else to tag it with or where else to ask."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567608334, "post_id": 57790528, "comment_id": 102014936, "body": "@NathanOliver I have the very same feeling about it."}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1567610558, "post_id": 57790857, "comment_id": 102016207, "body": "Re: &quot;while I&#39;m not sure if it&#39;s a hard rule&quot; -- it&#39;s a hard rule -- tags don&#39;t change. The one exception is the move from C++03 to C++11, when I removed the &quot;lib.&quot; from the beginning of all the library sections. Being a library guy, I didn&#39;t like making it look like the was library a second-class citizen. Fortunately, this didn&#39;t result in any duplicate names."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 1, "last_activity_date": 1567608276, "creation_date": 1567608276, "answer_id": 57790857, "question_id": 57790528, "link": "https://stackoverflow.com/questions/57790528/can-updates-of-online-c-standard-draft-invalidate-links-to-it/57790857#57790857", "title": "Can updates of online C++ Standard Draft invalidate links to it?", "body": "<p>Links to sections are generally fine.  The C++ standard uses named sections that are fairly stable between standard revisions.  Subsections may be moved around between parent sections (that's why you have things like [intro.object] being a subsection of [basic] rather than [intro]), but, while I'm not sure if it's a hard rule, they don't generally get renamed or removed.</p>\n\n<p>Links to paragraphs within a section aren't as stable.  They will continue to <em>work</em>, but they may not point to the paragraph you intended after a later standard revision.  AFAIK there is no effort made to keep paragraph numbering consistent between standard revisions.</p>\n"}], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 57790857, "answer_count": 1, "score": 0, "last_activity_date": 1567608276, "creation_date": 1567607075, "question_id": 57790528, "link": "https://stackoverflow.com/questions/57790528/can-updates-of-online-c-standard-draft-invalidate-links-to-it", "title": "Can updates of online C++ Standard Draft invalidate links to it?", "body": "<p>Links to the online C++ Stadnard Draft at <a href=\"http://eel.is/c++draft/\" rel=\"nofollow noreferrer\">http://eel.is/c++draft/</a> may contain <strong>paragraph and sentence numbers</strong>, such as: <code>http://eel.is/c++draft/description#structure.summary-1.sentence-2</code>. I wonder what happens when the Draft is updated, e.g, when some paragraphs/sentences are added in front of existing paragraph/sentences. This would shift their numbers and possibly invalidate links, wouldn't it?. However, there are many such links on SO but I haven't seen a single invalid one. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 1, "creation_date": 1567607275, "post_id": 57790518, "comment_id": 102014241, "body": "Because you aren&#39;t passing it by reference to the class. Look at your constructor, it is accepting a string, not a reference to a string."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567607993, "post_id": 57790518, "comment_id": 102014719, "body": "Please do not edit the question to apply the fixes provided by the answers. Doing so invalidates those answers making them meaningless. Leave the question with the initial error so that future readers can benefit from the full context of the question."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1567608479, "post_id": 57790518, "comment_id": 102015017, "body": "If you remove the indirections through a class and a function, that is the same as <code>int main() { std::string st = &quot;hello&quot;; std::string s(st); st[0] = &#39;j&#39;; st[0] = &#39;i&#39;;}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1567607365, "creation_date": 1567607365, "answer_id": 57790597, "question_id": 57790518, "link": "https://stackoverflow.com/questions/57790518/if-i-pass-some-string-by-reference-to-a-class-constructor-then-why-is-the-addres/57790597#57790597", "title": "If I pass some string by reference to a Class Constructor then why is the address of the string(class member) different from the actual string", "body": "<p>Your member variable <code>std::string s;</code> is not a reference, it's a plain string. So when you initialize it it gets constructed by copying the string you initialize it with.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 4041908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d700c18c2e802b438d0e680ddbaab23c?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4041908/raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1567607839, "creation_date": 1567607839, "answer_id": 57790743, "question_id": 57790518, "link": "https://stackoverflow.com/questions/57790518/if-i-pass-some-string-by-reference-to-a-class-constructor-then-why-is-the-addres/57790743#57790743", "title": "If I pass some string by reference to a Class Constructor then why is the address of the string(class member) different from the actual string", "body": "<p>In your example, you're not passing the string as a reference to the constructor.</p>\n\n<pre><code>Abc(std::string str)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>Abc(std::string&amp; str)\n</code></pre>\n\n<p>If you want the value change of the original string to reflect into the member variable in class(or the other way around). Then you need to make member variable as reference. Your class should look like</p>\n\n<pre><code>Class Abc\n{\n private:\n     std::string&amp; s;\n public:\n      Abc(std::string&amp; str)\n         : s(str)\n      {}\n };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 9170571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681b567ae09cf43a1e33b0c36478748?s=128&d=identicon&r=PG&f=1", "display_name": "Jan15", "link": "https://stackoverflow.com/users/9170571/jan15"}, "is_accepted": false, "score": 1, "last_activity_date": 1567608190, "creation_date": 1567608190, "answer_id": 57790836, "question_id": 57790518, "link": "https://stackoverflow.com/questions/57790518/if-i-pass-some-string-by-reference-to-a-class-constructor-then-why-is-the-addres/57790836#57790836", "title": "If I pass some string by reference to a Class Constructor then why is the address of the string(class member) different from the actual string", "body": "<p>You are copying the string by value in the constructor. </p>\n\n<p>This is how you would store the reference:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Abc{\n    std::string&amp; str;\n  public:\n    Abc(std::string&amp; s): str(s){}\n};\n\nvoid foo(){\n    std::string str;\n    Abc abc(str);\n    str = \u201dHello World\u201d;\n     /// abc.str is now also hello world \n}\n</code></pre>\n\n<p>But now, beware about lifetimes!\nBy passing the object by reference to the object in the constructor, the lifetime is not extended, meaning when str goes out of scope, abc.str points to invalid memory -> undefined behavior. </p>\n\n<p>C++, unlike other languages such as python is a value-based language as in that assignments copy by default unless you do extra tricks like <code>move</code>, taking the address or taking a reference (which is a similar thing to taking the address). </p>\n"}], "owner": {"reputation": 13, "user_id": 11791628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075082a07d0bc3dd09a1a380e00f9cf7?s=128&d=identicon&r=PG&f=1", "display_name": "johnjakal", "link": "https://stackoverflow.com/users/11791628/johnjakal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1567608190, "creation_date": 1567607055, "last_edit_date": 1567607955, "question_id": 57790518, "link": "https://stackoverflow.com/questions/57790518/if-i-pass-some-string-by-reference-to-a-class-constructor-then-why-is-the-addres", "title": "If I pass some string by reference to a Class Constructor then why is the address of the string(class member) different from the actual string", "body": "<p>I don't understand, If I pass a string by ref. to a function then the address of actual string passed will be same as that of formal string in this function. Any changes to either will impact on either of the two. But it is not same for passing string by ref. to a class ctor. Why is that? Although I do understand, different objects must have different addresses.</p>\n\n<pre><code>Class Abc\n{\n  private:\n    std::string s;\n  public:\n    Abc(std::string str)\n    : s(str)\n    {}\n};\n\nvoid fun(std::string&amp; str)\n{  str [0]='i';}  // changes content in st\n\nint main()\n{\n    std::string st = \"hello\";\n    Abc obj(st);\n\n    //if we change st shouldn't it change s in obj \n    st[0] = 'j';\n\n    fun(st);\n}\n</code></pre>\n"}, {"tags": ["c++", "fbx"], "owner": {"reputation": 83, "user_id": 10477613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb00bfbdbfcfd5928c20f00e7e0b0b7d?s=128&d=identicon&r=PG&f=1", "display_name": "wd357dui", "link": "https://stackoverflow.com/users/10477613/wd357dui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567606790, "creation_date": 1567606790, "question_id": 57790453, "link": "https://stackoverflow.com/questions/57790453/how-does-a-fbxmesh-determine-which-fbxsurfacematerial-to-use-fbx-sdk-2019", "title": "How does a FbxMesh determine which FbxSurfaceMaterial to use? (FBX SDK 2019)", "body": "<p>According to the FBX SDK official document, a FbxMesh contains an \"IndexArray\" to the materials, but it didn't clearly say whether if it's an index to the materials that attached to the parent node, or an index to the materials of the entire scene (which can be accessed through FbxScene)</p>\n\n<p>So which case was it?</p>\n\n<p>I thought it should be the index to the materials of the entire scene, but according to the example in the official document, it's the index to the materials of the parent node. But if THAT is the case however, then:</p>\n\n<p>Since one mesh can be attached to multiple nodes, and different nodes can have different materials attached, does that means that one mesh can have different materials when referenced by different nodes? Is this intentional?</p>\n\n<p>What I believed:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>FbxScene* scene;\nFbxMesh* mesh;\nFbxLayerElementMaterial* layerElementMaterial = mesh-&gt;GetElementMaterial();\nif (layerElementMaterial -&gt;GetMappingMode() == FbxLayerElement::eAllSame)\n{\n    int index = layerElementMaterial-&gt;GetIndexArray()[0];\n    FbxSurfaceMaterial* material = scene-&gt;GetMaterial(index);\n}\n</code></pre>\n\n<p>What the official document sugguested:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>FbxNode* node;\nFbxMesh* mesh;\nFbxLayerElementMaterial* layerElementMaterial = mesh-&gt;GetElementMaterial();\nif (layerElementMaterial -&gt;GetMappingMode() == FbxLayerElement::eAllSame)\n{\n    int index = layerElementMaterial-&gt;GetIndexArray()[0];\n    FbxSurfaceMaterial* material = node-&gt;GetMaterial(index);\n}\n</code></pre>\n"}, {"tags": ["php", "c++", "bash"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 3, "creation_date": 1567606064, "post_id": 57790149, "comment_id": 102013536, "body": "Use a lock file. The first program creates/locks a lock file and edits <code>configuration.txt</code>. As long a the lock file exists/is locked other programs are not allowed to read or write. <a href=\"https://dmorgan.info/posts/linux-lock-files/\" rel=\"nofollow noreferrer\">dmorgan.info/posts/linux-lock-files</a>"}, {"owner": {"reputation": 5632, "user_id": 640043, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1956c99653c4440e55834c3ce7cde28f?s=128&d=identicon&r=PG", "display_name": "Brett Gregson", "link": "https://stackoverflow.com/users/640043/brett-gregson"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1567606421, "post_id": 57790149, "comment_id": 102013744, "body": "@ThomasSablik post that as an answer, deserves an upvote"}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 11233023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2401dac2930aac704ab87da3acc8d4?s=128&d=identicon&r=PG&f=1", "display_name": "bleah1", "link": "https://stackoverflow.com/users/11233023/bleah1"}, "edited": false, "score": 0, "creation_date": 1567607157, "post_id": 57790354, "comment_id": 102014163, "body": "Can I get some examples please ? Do I need to <code>move</code> files in PHP, C++, the bash script or in all of them ?"}], "tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1567606441, "creation_date": 1567606441, "answer_id": 57790354, "question_id": 57790149, "link": "https://stackoverflow.com/questions/57790149/how-can-i-avoid-errors-when-php-c-and-shell-script-try-to-access-the-same-fil/57790354#57790354", "title": "How can I avoid errors when PHP, C++ and shell script try to access the same file?", "body": "<p>So you want to avoid one of your readers getting a partial copy of the file as it is being written?</p>\n\n<p>So the usual way to avoid this issue is that when you write the file, you write it to a different name in the same folder. Then use move to replace the original file.</p>\n\n<p>Unix will ensure that if there are any existing readers for the original file, the file is kept as a hidden file until they all close. Any new readers will see the newly moved file. No readers should see a broken file.</p>\n\n<p>To do the same thing by modifying the file, the best you can do is keep some sort of serial number in the file. The writer should update the serial before it writes, and again after. Any reader should read the serial before and after the read. If the serial changes, then the read is invalid and should be repeated. The issue of ensuring the data is not cached also needs addressing. This is OK for occasionally updating files, but clearly it will impair the performance of the readers if the content is frequently updated.</p>\n"}, {"comments": [{"owner": {"reputation": 449, "user_id": 11233023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2401dac2930aac704ab87da3acc8d4?s=128&d=identicon&r=PG&f=1", "display_name": "bleah1", "link": "https://stackoverflow.com/users/11233023/bleah1"}, "edited": false, "score": 0, "creation_date": 1567607088, "post_id": 57790446, "comment_id": 102014120, "body": "I am not sure I understand how to apply this. What do I do with <code>flock</code> ? Do I need to write it in PHP, in the C++ program, in the bash script, in all of them ? Or do I use <code>flock</code> on the file somehow and all of the above languages will know automatically how to treat the file ? And what happens if one reader can&#39;t open the file. Will it throw an error ? Will it skip over it and never read it ?"}, {"owner": {"reputation": 449, "user_id": 11233023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2401dac2930aac704ab87da3acc8d4?s=128&d=identicon&r=PG&f=1", "display_name": "bleah1", "link": "https://stackoverflow.com/users/11233023/bleah1"}, "edited": false, "score": 0, "creation_date": 1567607443, "post_id": 57790446, "comment_id": 102014342, "body": "And where do I use those lines ? Who is <code>read.sh</code> and <code>write.sh</code> ?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 449, "user_id": 11233023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2401dac2930aac704ab87da3acc8d4?s=128&d=identicon&r=PG&f=1", "display_name": "bleah1", "link": "https://stackoverflow.com/users/11233023/bleah1"}, "edited": false, "score": 0, "creation_date": 1567607462, "post_id": 57790446, "comment_id": 102014359, "body": "You can call <code>flock</code> in your programs and scripts. Without <code>--nonblock</code> it will wait. With <code>--nonblock</code> it will fail with an error."}, {"owner": {"reputation": 449, "user_id": 11233023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2401dac2930aac704ab87da3acc8d4?s=128&d=identicon&r=PG&f=1", "display_name": "bleah1", "link": "https://stackoverflow.com/users/11233023/bleah1"}, "edited": false, "score": 0, "creation_date": 1567607552, "post_id": 57790446, "comment_id": 102014414, "body": "Ok. Thank you ! I still don&#39;t understand a thing, but I will search how to use flock in PHP, C++ and bash script."}], "tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": true, "score": 1, "last_activity_date": 1567607629, "last_edit_date": 1567607629, "creation_date": 1567606777, "answer_id": 57790446, "question_id": 57790149, "link": "https://stackoverflow.com/questions/57790149/how-can-i-avoid-errors-when-php-c-and-shell-script-try-to-access-the-same-fil/57790446#57790446", "title": "How can I avoid errors when PHP, C++ and shell script try to access the same file?", "body": "<p>A common way to avoid race conditions is to use a lock file. When a program tries to read or write to <code>configuration.txt</code> it checks the lock file first.</p>\n\n<p>There are two kinds of locks:</p>\n\n<ul>\n<li>shared lock</li>\n<li>exclusive lock</li>\n</ul>\n\n<p>A program can get a <strong>shared lock</strong> (read lock) as long as no other program has an exclusive lock. This is used to read file. Multiple programs can read a file as long as no other program write to that file.</p>\n\n<p>A program can get an <strong>exclusive lock</strong> (write lock) only if no other program has a lock (neither exclusive nor shared). This is used to write to a file. As long as a program is reading or writing to a file other programs are not allowed to write.</p>\n\n<p>On a linux system you can use <code>flock</code> to manage file locks.</p>\n\n<p>Read:</p>\n\n<pre><code>flock --shared lockfile -c read.sh\n</code></pre>\n\n<p>Write</p>\n\n<pre><code>flock --exclusive lockfile -c write.sh\n</code></pre>\n\n<p>Usually this command will wait until the lock is available. With</p>\n\n<p>flock --nonblock lockfile</p>\n\n<p>the command will fail immediately instead of waiting.</p>\n\n<p>From manpage </p>\n\n<blockquote>\n  <p>SYNOPSIS</p>\n\n<pre><code>   flock [options] &lt;file|directory&gt; &lt;command&gt; [command args]\n   flock [options] &lt;file|directory&gt; -c &lt;command&gt;\n   flock [options] &lt;file descriptor number&gt;\n</code></pre>\n  \n  <p>DESCRIPTION</p>\n  \n  <p>This utility manages flock(2) locks from within shell scripts or the command line.</p>\n  \n  <p>The  first  and  second  forms  wrap the lock around the executing a command, in a manner similar to su(1) or newgrp(1).  It\n  locks a specified file or directory, which is created\n         (assuming appropriate permissions), if it does not already exist.  By default, if the lock cannot be immediately acquired, flock\n  waits until the lock is available.</p>\n  \n  <p>The third form uses open file by file descriptor number.  See examples how that can be used.</p>\n</blockquote>\n\n<p><a href=\"https://linux.die.net/man/2/flock\" rel=\"nofollow noreferrer\">Here</a> is the manpage for c++ and <a href=\"https://linux.die.net/man/1/flock\" rel=\"nofollow noreferrer\">here</a> is the manpage for shell scripts.</p>\n"}], "owner": {"reputation": 449, "user_id": 11233023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2401dac2930aac704ab87da3acc8d4?s=128&d=identicon&r=PG&f=1", "display_name": "bleah1", "link": "https://stackoverflow.com/users/11233023/bleah1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57790446, "answer_count": 2, "score": 0, "last_activity_date": 1567607629, "creation_date": 1567605753, "question_id": 57790149, "link": "https://stackoverflow.com/questions/57790149/how-can-i-avoid-errors-when-php-c-and-shell-script-try-to-access-the-same-fil", "title": "How can I avoid errors when PHP, C++ and shell script try to access the same file?", "body": "<p>Are there methods in PHP, C++ and bash scripts that can make the respective program wait its turn when accessing a file ?</p>\n\n<p>I have a web-page written in PHP that gives the user the ability to input 6 values:</p>\n\n<pre><code>URL\nURL Refresh Interval\nBrightness\nColor1 in hex\nColor2 in hex\nColor3 in hex\n</code></pre>\n\n<p>These values will be written in <code>configuration.txt</code>.</p>\n\n<p>Each time the web-page is accessed <code>configuration.txt</code> gets opened, the PHP gets some values from there and then closes it.\n<code>configuration.txt</code> is also opened when one or more of the above values are submitted and then it gets closed.</p>\n\n<p>Next, I have a bash that regularly <code>wgets</code> the URL from <code>configuration.txt</code> and writes the output to a different file, called <code>url_response.txt</code>.</p>\n\n<pre><code>while [ 0 ]\ndo\n    line=$(head -n 1 data/configuration.txt)\n    wget -q -i $line -O url_response.txt\n    sleep 2\ndone\n</code></pre>\n\n<p>This script will be put inside a C++ program.</p>\n\n<p>Finally, the same C++ program will have to access <code>url_response.txt</code> to get and parse some strings from it and it will also have to access <code>configuration.txt</code> to get the three colors from it.</p>\n\n<p>I am pretty sure that these 3 programs will intersect at one point and I don't want to find out what happens then.</p>\n"}, {"tags": ["c++", "string", "c++11", "atoi", "strtol"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1567605937, "post_id": 57790116, "comment_id": 102013478, "body": "Possibly because by default they wanted <code>stoi(&quot;000123456&quot;)</code> to yield a decimal number (just trim the leading zeros) instead of making it an octal value with the leading zeros trimmed off."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 15, "last_activity_date": 1567606419, "creation_date": 1567606419, "answer_id": 57790343, "question_id": 57790116, "link": "https://stackoverflow.com/questions/57790116/the-base-argument-of-stdstoi/57790343#57790343", "title": "the base argument of std::stoi", "body": "<p>I wrote the proposal that added these functions. The goal of the various <code>stoX</code> conversion functions was to provide <strong>simple</strong> conversions. Base 10 is by far the most common usage, and ought to be the simplest, hence the default. Base 0 would lead to many beginner's questions about why converting the string <code>\"010\"</code> doesn't produce 10. You can see this if you read enough questions on Stackoverflow -- many beginners are confused about the rules for literal constants, and expect <code>int x = 010;</code> to initialize <code>x</code> to 10.</p>\n"}], "owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "accepted_answer_id": 57790343, "answer_count": 1, "score": 8, "last_activity_date": 1567606419, "creation_date": 1567605647, "question_id": 57790116, "link": "https://stackoverflow.com/questions/57790116/the-base-argument-of-stdstoi", "title": "the base argument of std::stoi", "body": "<p>The <code>stoi</code> function of c++ is defined as:</p>\n\n<pre><code>int stoi(const std::string&amp; str, std::size_t* pos = 0, int base = 10);\n</code></pre>\n\n<p>as you can see, the <code>base</code> argument is defaulted as <code>10</code>, so by default it could only handle decimal numbers. By setting <code>base</code> to <code>0</code>, it could handle numbers by their prefixes. This is same behavior as <code>strtol</code>, so why is the default value being set to <code>10</code>, rather than <code>0</code>?</p>\n"}, {"tags": ["c++", "containers", "language-lawyer"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1567605647, "post_id": 57790017, "comment_id": 102013323, "body": "Looks like a typo.  It should say <i>copy-assigns all elements of a from elements of b</i>"}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 1, "creation_date": 1567605672, "post_id": 57790017, "comment_id": 102013336, "body": "b may be r-value result of function call"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1567605854, "post_id": 57790017, "comment_id": 102013442, "body": "The STL is the wrong term. It is not the name of the standard library, it&#39;s an old library from which many parts were migrated into what is now the standard library. <a href=\"https://stackoverflow.com/questions/5205491/whats-the-difference-between-stl-and-c-standard-library\">What&#39;s the difference between \u201cSTL\u201d and \u201cC++ Standard Library\u201d?</a>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1567608276, "post_id": 57790017, "comment_id": 102014907, "body": "@Fran&#231;oisAndrieux What would you use if you wanted to refer to the C++ standard library in less than 8 syllables/20 characters?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567608534, "post_id": 57790017, "comment_id": 102015047, "body": "@MaxLanghof If you are under an 8 character constraint, you can probably get away with &quot;stdlib&quot;. &quot;the std library&quot; is not very long either. Edit : Misread the end of your comment as &quot;in less than 8 characters?&quot;."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1578303498, "post_id": 57790017, "comment_id": 105382733, "body": "@MaxLanghof <code>std::</code> or &quot;namespace std&quot; depending on if I were writing or talking"}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 10, "last_activity_date": 1567606118, "creation_date": 1567606118, "answer_id": 57790261, "question_id": 57790017, "link": "https://stackoverflow.com/questions/57790017/c-stl-container-requirements-post-condition-confusion/57790261#57790261", "title": "C++ STL Container requirements - Post condition confusion", "body": "<p>The <a href=\"https://en.cppreference.com/w/cpp/named_req/Container\" rel=\"noreferrer\">cppreference page</a> is abridged and adapted from the standard for readability. In this case it oversimplifies the requirements, which have to distinguish between the different value categories (as you correctly reasoned). Or maybe the two separate assignment cases (which do not appear consecutively in the table in the standard) have been merged by accident. Either way, cppreference is currently wrong.</p>\n\n<p>Here is what the (current draft) standard says:</p>\n\n<p><a href=\"http://eel.is/c++draft/containers#container.requirements.general-4\" rel=\"noreferrer\">http://eel.is/c++draft/containers#container.requirements.general-4</a></p>\n\n<p>For move-assignment:</p>\n\n<blockquote>\n  <p><strong>Expression:</strong> <code>a = rv</code> (where <code>rv</code> is a non-const rvalue)<br>\n  <strong>Return type:</strong> <code>X&amp;</code><br>\n  <strong>Operational Semantics:</strong> All existing elements of <code>a</code> are either move assigned to or destroyed<br>\n  <strong>Ensures:</strong> <code>a</code> is equal to the value that <code>rv</code> had before this assignment<br>\n  <strong>Complexity:</strong>   linear</p>\n</blockquote>\n\n<p>For copy-assignment:</p>\n\n<blockquote>\n  <p><strong>Expression:</strong> <code>r = a</code><br>\n  <strong>Return type:</strong>  <code>X&amp;</code><br>\n  <strong>Ensures:</strong> <code>r == a</code><br>\n  <strong>Complexity:</strong> linear</p>\n</blockquote>\n"}], "owner": {"reputation": 1726, "user_id": 1414496, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c75b36035fb412c9f2629a888bfb977e?s=128&d=identicon&r=PG", "display_name": "Joel Bodenmann", "link": "https://stackoverflow.com/users/1414496/joel-bodenmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "accepted_answer_id": 57790261, "answer_count": 1, "score": 6, "last_activity_date": 1578302123, "creation_date": 1567605358, "last_edit_date": 1578302123, "question_id": 57790017, "link": "https://stackoverflow.com/questions/57790017/c-stl-container-requirements-post-condition-confusion", "title": "C++ STL Container requirements - Post condition confusion", "body": "<p>I am currently looking at implementing a custom container which needs to be compatible with STL algorithms and therefore must meet the C++ container requirements as described <a href=\"https://en.cppreference.com/w/cpp/named_req/Container\" rel=\"noreferrer\">here</a>.</p>\n\n<p>In that documentation the <code>Methods and operators</code> table states, that the expression <code>a = b</code> has the post condition of <code>a == b</code>. I am heavily confused by this.\nAs the table entry for this expression states: </p>\n\n<blockquote>\n  <p>destroys or move-assigns all elements of <code>a</code> from elements of <code>b</code></p>\n</blockquote>\n\n<p>To my understanding, moving an object comes with the expectation that the moved object (source object?) will be left in a valid but undefined state. Therefore, the condition <code>a == b</code> cannot be met in my opinion.</p>\n\n<p>What am I missing here? </p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1567605446, "post_id": 57790011, "comment_id": 102013186, "body": "<a href=\"https://meta.stackoverflow.com/a/285557/7359094\">Images of code</a> are discouraged. Please provide the code as text directly in the question."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1567605525, "post_id": 57790011, "comment_id": 102013243, "body": "With <code>using namespace std;</code> the name <code>max</code> might mean your <code>::max</code> or <code>std::max</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1567605594, "post_id": 57790011, "comment_id": 102013295, "body": "This is why you should never use <code>using namespace std</code>"}], "owner": {"reputation": 177, "user_id": 11675308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YMGUP84mFTg/AAAAAAAAAAI/AAAAAAAAA9o/dCjiCWx8uyc/photo.jpg?sz=128", "display_name": "Rahul Choudhary", "link": "https://stackoverflow.com/users/11675308/rahul-choudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1567605581, "answer_count": 0, "score": 0, "last_activity_date": 1567621639, "creation_date": 1567605347, "question_id": 57790011, "link": "https://stackoverflow.com/questions/57790011/why-is-sort-working-for-structure-but-not-for-int-vector", "closed_reason": "Duplicate", "title": "Why is sort working for structure but not for int vector", "body": "<p>I read an article in geekforgeeks for sorting in a particular order (vector).\nThis is the code that I got from the site.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mmu99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mmu99.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can see the output is correct below in the image.\nThis is my code now</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\nbool max(int a, int b)\n{\n    return (a &lt; b);\n}\nint main()\n{\n    vector&lt;int&gt; v;\n    cout&lt;&lt;\"Current size is \"&lt;&lt;v.size()&lt;&lt;\"\\nPutting elements now\\n\";     \n    for(int i=0;i&lt;10;i++) \n        v.push_back(rand()%1000);                                            \n    //sort(v.begin(),v.end(),greater&lt;int&gt;());                                \n    sort(v.begin(),v.end(),max);\n    for(int i=0;i&lt;v.size();i++) \n        cout&lt;&lt;v[i]&lt;&lt;\" \";\n     return 0;\n}\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code> error: no matching function for call to 'sort(std::vector&lt;int&gt;::iterator, std::vector&lt;int&gt;::iterator, &lt;unresolved overloaded function type&gt;)'\n     sort(v.begin(),v.end(),max);\n</code></pre>\n\n<p><strong><code>PS: I know about using greater &lt;int&gt; ()</code></strong> </p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["c++", "opengl", "glut", "opengl-compat"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1567607337, "post_id": 57789988, "comment_id": 102014278, "body": "Have a look at <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glDrawPixels.xml\" rel=\"nofollow noreferrer\">glDrawPixels</a>. IMHO, replacing <code>GL_RGBA</code> with <code>GL_LUMINANCE</code> should do the job for greyscale images (with 1 channel)."}, {"owner": {"reputation": 81, "user_id": 9570045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605e24ee0e1544408586fbe39c955206?s=128&d=identicon&r=PG&f=1", "display_name": "quela", "link": "https://stackoverflow.com/users/9570045/quela"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1567607420, "post_id": 57789988, "comment_id": 102014328, "body": "@Scheff Thanks! That fixed it. I wasn\u2019t sure what that command was as it didn\u2019t sound like something I needed to be using."}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1567607674, "last_edit_date": 1567607674, "creation_date": 1567607366, "answer_id": 57790599, "question_id": 57789988, "link": "https://stackoverflow.com/questions/57789988/is-there-a-way-to-render-single-channel-greyscale-images-using-gldrawpixels/57790599#57790599", "title": "Is there a way to render single channel greyscale images using glDrawPixels?", "body": "<p>If you've to an image where each pixel is a single grayscale value, then you can use the <em>format</em> <code>GL_LUMINANCE</code>. See <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glReadPixels.xml\" rel=\"nofollow noreferrer\"><code>glDrawPixels</code></a>.<br>\nThe luminance value converted and is set to the red, green, and blue color channel, the alpha channel will be set 1.  </p>\n\n<p>If the type of each pixel is a 32 bit floating point value, the the format is <code>GL_FLOAT</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glDrawPixels(W, H, GL_LUMINANCE, GL_FLOAT, img);\n</code></pre>\n\n<p>If the grayscale value is encoded in a byte, then you've to use the unsigned normalized floating point format <code>GL_UNSIGNED_BYTE</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glDrawPixels(W, H, GL_LUMINANCE, GL_UNSIGNED_BYTE, img);\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9570045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/605e24ee0e1544408586fbe39c955206?s=128&d=identicon&r=PG&f=1", "display_name": "quela", "link": "https://stackoverflow.com/users/9570045/quela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57790599, "answer_count": 1, "score": 2, "last_activity_date": 1567607674, "creation_date": 1567605262, "last_edit_date": 1567607634, "question_id": 57789988, "link": "https://stackoverflow.com/questions/57789988/is-there-a-way-to-render-single-channel-greyscale-images-using-gldrawpixels", "title": "Is there a way to render single channel greyscale images using glDrawPixels?", "body": "<p>I'm trying to create a program that handles images of all types by using oiio and OpenGL (simple functions, nothing too crazy). </p>\n\n<p>I've got 4 channel and 3 channel images working, I'm just not sure how to render greyscale (1 channel) images.</p>\n\n<pre><code>if (channels == 4){\n   glDrawPixels(W, H, GL_RGBA, GL_FLOAT, img);\n}\n</code></pre>\n\n<p>I'm hoping the answer is something like the snippet above.</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 1, "last_activity_date": 1567620593, "creation_date": 1567620593, "answer_id": 57793761, "question_id": 57789987, "link": "https://stackoverflow.com/questions/57789987/how-to-schedule-an-operation-to-run-at-future-time/57793761#57793761", "title": "How to schedule an operation to run at future time", "body": "<p>You can use <code>boost::asio::high_resolution_timer</code> with its <code>async_wait</code> method.</p>\n\n<p>Every time when you want to schedule the operation of pushing task into queue you have to:</p>\n\n<ol>\n<li>create <code>high_resolution_timer</code></li>\n<li>call <code>expires_after</code> which specifies the expiry time (SLEEP_TIME_MS) i.e. when handler is called. In your case in this handler you push a task into the queue.</li>\n<li>call <code>async_wait</code> with your handler </li>\n</ol>\n\n<hr>\n\n<p>If we assume that <code>execute</code> method returns <code>bool</code> which indicates whether a task is completed (all phases were executed), it may be rewritten into sth like this:</p>\n\n<pre><code>     while (!m_queue.empty()) // this condition should be changed\n     {\n         Task* task = m_queue.pop();\n         bool finished = task-&gt;execute();\n         if (!finished)\n            scheduler works here - start async_wait with handler\n     }\n</code></pre>\n\n<p>If I understand correctly, you want to push task into queue when <code>SLEEP_TIME_MS</code> is expired, so you cannot break loop when queue is empty, because you have to wait until pending tasks will be completion. You can introduce <code>stop</code> flag. And break loop on demand.   </p>\n\n<hr>\n\n<p>Below I put a snippet of code which works in the way you described (I hope):</p>\n\n<pre><code>struct Scheduler {\n    Scheduler(boost::asio::io_context&amp; io)\n    : io(io) {}\n\n    boost::asio::io_context&amp; io;\n\n    template&lt;class F&gt;\n    void schedule (F&amp;&amp; handler) {\n        auto timer = std::make_shared&lt;boost::asio::high_resolution_timer&gt;(io);\n        timer-&gt;expires_after(std::chrono::milliseconds(5000)); // SLEEP_TIME_MS \n        timer-&gt;async_wait(\n            [timer,handler](const boost::system::error_code&amp; ec) {\n                handler();\n            });\n    }\n};\n\nstruct Task  {\n    int phase = -1;\n\n    bool execute() {\n        ++phase;\n        std::cout &lt;&lt; \"phase: \" &lt;&lt; phase &lt;&lt; std::endl;\n        if (phase == 0) {\n            return false;\n        }\n        else {\n\n        }\n        return true;\n    }\n};\n\nstruct TaskManager {\n    Scheduler s;\n    std::queue&lt;std::shared_ptr&lt;Task&gt;&gt; tasks;\n    std::mutex tasksMtx;\n    std::atomic&lt;bool&gt; stop{false};\n\n    TaskManager(boost::asio::io_context&amp; io) : s(io) {\n        for (int i = 0; i &lt; 5; ++i)\n            tasks.push(std::make_shared&lt;Task&gt;());\n    }\n\n    void run() {\n        while (true) {\n            if (stop)\n                break;\n\n            {\n                std::lock_guard&lt;std::mutex&gt; lock{tasksMtx};\n                if (tasks.empty())\n                    continue;\n            }\n\n            std::shared_ptr&lt;Task&gt; currTask = tasks.front();\n            tasks.pop();\n\n            bool finished = currTask-&gt;execute();\n            if (!finished)\n                s.schedule( [this, currTask](){ insertTaskToVector(std::move(currTask)); } );\n        }\n    }\n\n    template&lt;class T&gt;\n    void insertTaskToVector(T&amp;&amp; t) {\n        std::lock_guard&lt;std::mutex&gt; lock{tasksMtx};\n        tasks.push(std::forward&lt;T&gt;(t));\n    }\n};\n\nint main() {\n    boost::asio::io_context io;\n    boost::asio::io_context::work work{io};\n    std::thread th([&amp;io](){ io.run();});\n    TaskManager tm(io);\n    tm.run();\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 6071697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ea2947bcc835bb3b6ab9ca5303272b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Epic", "link": "https://stackoverflow.com/users/6071697/epic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 57793761, "answer_count": 1, "score": 0, "last_activity_date": 1567620593, "creation_date": 1567605253, "question_id": 57789987, "link": "https://stackoverflow.com/questions/57789987/how-to-schedule-an-operation-to-run-at-future-time", "title": "How to schedule an operation to run at future time", "body": "<p>I have a class TaskManager that holds a queue of tasks. Each time the next task is popped and executed. </p>\n\n<pre><code>class TaskManager\n{\n    TaskQueue m_queue;\n\n    svc_tasks()\n    {\n         while (!m_queue.empty())\n         {\n             Task* task = m_queue.pop();\n             task-&gt;execute();\n         }\n    }\n};\n</code></pre>\n\n<p>Inside the Task there are certain points I would like to pause for at least SLEEP_TIME_MS milliseconds. During this pause I would like to start executing the next task. When the pause ends I would like to put the task in the queue again.</p>\n\n<pre><code>class Task\n{\n    int m_phase = -1;\n\n    execute()\n    {\n        m_phase++;\n\n        switch(m_phase)\n        {\n         case 0:\n             ...\n             do_pause(SLEEP_TIME_MS);\n             return;\n         case 1:\n             ...\n             break;\n        }\n    }\n};\n</code></pre>\n\n<p>Is there a scheduler in std (C++ 17) or boost that I could use that would call a handler function when SLEEP_TIME_MS passes?</p>\n\n<p>Thank you for any advice </p>\n"}, {"tags": ["c++", "cmake", "protocol-buffers"], "owner": {"reputation": 597, "user_id": 4829317, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/367552656772840/picture?type=large", "display_name": "Pingjiang Li", "link": "https://stackoverflow.com/users/4829317/pingjiang-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567605650, "creation_date": 1567605190, "last_edit_date": 1567605650, "question_id": 57789959, "link": "https://stackoverflow.com/questions/57789959/how-to-change-cmake-protobuff-working-directory-path", "title": "How to change cmake protobuff working directory/path?", "body": "<p>I want to compile and generate library from protobuf using cmake. But I cannot assign a proto file path in CMakeLists.txt. The problem is that other .proto file using relative import from a parent folder ( import \"modules/common/proto/abc.pb.h\") cannot recognize the imported proto correctly.</p>\n\n<p>Different file path in direct protoc command will generate different namespace:</p>\n\n<pre><code>protoc --cpp_out=proto proto/person.proto (namespace is protobuf_proto_2fperson_2eproto)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>protoc --cpp_out=./ person.proto (namespace is protobuf_person_2eproto)\n</code></pre>\n\n<p>How to make it in CMakeLists.txt and generate the .cc file using structured namespace like protobuf_proto_2fperson_2eproto? Thanks.</p>\n\n<p>My files list as below:</p>\n\n<pre><code>../test/\n`-- proto\n    |-- CMakeLists.txt\n    |-- demo.proto\n    `-- person.proto\n</code></pre>\n\n<p>in demo.proto:</p>\n\n<pre><code>syntax = \"proto2\";\n\npackage tutorial;\n\nimport \"proto/person.proto\";\n\nmessage AddressBook {\n  repeated Person people = 1;\n}\n</code></pre>\n\n<p>in person.proto:</p>\n\n<pre><code>syntax = \"proto2\";\n\npackage tutorial;\n\nmessage Person {\n  required string name = 1;\n}\n</code></pre>\n\n<p>My CMakeLists.txt is\uff1a</p>\n\n<pre><code>PROJECT(tutorial)\n\ncmake_minimum_required(VERSION 2.8)\n\nfind_package(Protobuf REQUIRED)\n\nset(PROTOBUF_IMPORT_DIRS \"../\")\n\ninclude_directories(\n${Protobuf_INCLUDE_DIRS}\n)\n\nfile(GLOB ProtoFiles \"*.proto\")\n\nprotobuf_generate_cpp(ProtoSources ProtoHeaders ${ProtoFiles})\n\nadd_library(proto SHARED ${ProtoSources} ${ProtoHeaders})\ntarget_link_libraries(proto ${Protobuf_LIBRARIES})\nset_target_properties(proto PROPERTIES LINKER_LANGUAGE CXX)\n</code></pre>\n"}, {"tags": ["c++", "sockets", "networking", "udp", "winsock"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1567605102, "post_id": 57789856, "comment_id": 102012982, "body": "If you can&#39;t live with dropped packets, UDP is the wrong protocol to use. It&#39;s by intent and design unreliable with no guarantee of delivery."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1567605420, "post_id": 57789856, "comment_id": 102013166, "body": "<i>&quot;data rate per camera is often close to the capacity of the network interface&quot;</i> - <i>&quot;we have connected 4 cameras to one computer&quot;</i> - it makes little sense to ask about reducing UDP packet drop rate... Try switching to 10G cable first or employ separate 1G networks for each camera."}, {"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 1, "creation_date": 1567605759, "post_id": 57789856, "comment_id": 102013392, "body": "maybe the OS&#39;s buffer size for UDP is too small. we had similar issues and fixed it by increasing the buffer size. another away is to query the socket more frequently, although this is not always possible, depending on your application."}, {"owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1567606954, "post_id": 57789856, "comment_id": 102014036, "body": "@Shawn: I know UDP is not optimal. But that IS and WAS not my choice - it&#39;s a choice of the communication standard which the cameras use (Gigabit Ethernet Vision -&gt; which defines GVSP as the protocol which uses UDP as a transport layer)."}, {"owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1567607072, "post_id": 57789856, "comment_id": 102014107, "body": "@VTT: Each camera is connected via it&#39;s own dedicated network adapter (directly camera -&gt; NIC) without a switch in between."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1567607152, "post_id": 57789856, "comment_id": 102014156, "body": "UDP is an inherently unreliable protocol, and any application that uses it must take that into account, either by ignoring dropped datagrams (not packets, after all, the &quot;D&quot; in UDP is for Datagram) or by requesting missing data be resent (typically invloves an application-layer protocol)."}, {"owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "reply_to_user": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 0, "creation_date": 1567607325, "post_id": 57789856, "comment_id": 102014272, "body": "@fdan: Any pointers on how to increase the OS&#39;s buffer size for UDP packets (step by step guide)?"}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1567609864, "post_id": 57789856, "comment_id": 102015806, "body": "Based on you note that you know UDP is unreliable, then your application must simply deal with lost datagrams. As far as the host/NIC configurations, those question are for <a href=\"https://serverfault.com\">Server Fault</a>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1567609947, "post_id": 57789856, "comment_id": 102015855, "body": "(1) Start with one thread per connected camera just reading the message(s).  Don&#39;t do anything with the messages except monitor for dropped packets. (2) Now queue the incoming messages for processing, again monitor for dropped packets.  (3) Add processing (of the queue), checked for drops ... (4) etc   Obviously if you get dropped packets at any stage you need to look closer at CPU/Network usage and how you implement the problem stage."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1567610076, "post_id": 57789856, "comment_id": 102015923, "body": "One thing to keep in mind is that the UDP packets can get dropped anywhere along the path they travel (including inside the sending device&#39;s IP stack!) -- and if the packets are lost before they get to your computer, there is very little you can do about it."}, {"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 0, "creation_date": 1567610378, "post_id": 57789856, "comment_id": 102016074, "body": "@SDwarfs no sorry, we used to work with XP, I think things changed since then (on XP it&#39;s just some registry values). google knows better than me."}, {"owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1567611788, "post_id": 57789856, "comment_id": 102016839, "body": "@Jeremy Friesner I assume packets to leave cameras perfectly, as long the bandwidth allows it (they use FPGAs; this is probably why they support UDP only -&gt; just send similar frames of the same structure + stateless). The cables are ~5m and of good quality, a bit error should be very very rare. Hence,  I assume it&#39;s either (a) the NIC running out of buffer space (too slow processing by OS / driver bugs) or more probable (b) the OS is dropping packets in case the receiving programs UDP-socket buffer runs out of space (due to not fetching packets from the socket buffer fast enough)."}, {"owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "edited": false, "score": 0, "creation_date": 1567611931, "post_id": 57789856, "comment_id": 102016918, "body": "Hence, the most obvious solution is to increase buffers to allow for longer delays in the processing AND/OR to reduce any processing lags by a higher processing priority of the thread/application AND/OR by reducing the needed recv()-calls to the Kernel (which reduces the number of context switches and hence reduces CPU load)."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1567612296, "post_id": 57789856, "comment_id": 102017116, "body": "@SDwarfs is there any chance of running your software (or perhaps just some sort of minimal test-software) under a different OS?  You might find the problem is reduced (or alternatively, exaggerated) under e.g. Linux or BSD, which would be a hint that the problem is more related to the efficiency of the OS and/or the TCP stack and less of a problem at the hardware level.  (or if the packets are dropped the same under every OS, that would suggest maybe a network-card issue)"}, {"owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1567666871, "post_id": 57789856, "comment_id": 102032303, "body": "@Jeremy: It can be compiled/run under Linux. However, there is no Linux PC with the number of network adapters available right now. I tested it at a different setup some months ago and had packet losses less often (usually only when the cameras were configured to deliver a frame rate that did overload the network capacity). However, these tests used a different cameras and an older revision of the software."}, {"owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1567769360, "post_id": 57789856, "comment_id": 102072373, "body": "@RichardCritten (1) There is always exactly 1 thread per camera; If I have the chance I&#39;ll this... I already massively decoupled UDP frame reception from image processing in two stages; while the first stage just takes care for reading the very simple header to find the block where to memcpy() the data. However, any finished image is also handed over to a callback routine, where it makes a private copy of the data and returns. Maybe copying up to 12 MB of data takes too long. I&#39;ll try to temporarily transfer the ownership of the memory block to the callback routine - so that this is decoupled."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1567770462, "post_id": 57789856, "comment_id": 102072888, "body": "@SDwarfs try using dedicated pre-allocated buffers and just swapping between them so no need to copy anything.  If you run-out of buffers then the processing is taking too long ... and that&#39;s another problem."}, {"owner": {"reputation": 331, "user_id": 9285776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LxFNE.jpg?s=128&g=1", "display_name": "Marcelino", "link": "https://stackoverflow.com/users/9285776/marcelino"}, "edited": false, "score": 0, "creation_date": 1571261979, "post_id": 57789856, "comment_id": 103186275, "body": "I think you should use a network sniffer to know where your packets are lost. In a point to point network it could happen on the network cable (data corrupted) or in the socket buffer (buffer full). In the first case you can&#39;t do anything but change the cables, in the second you can fix it reading faster in your software."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12820816, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/584eaca1f076920c97415ecd2f082e5d?s=128&d=identicon&r=PG", "display_name": "user12820816", "link": "https://stackoverflow.com/users/12820816/user12820816"}, "is_accepted": false, "score": 0, "last_activity_date": 1580489637, "creation_date": 1580489637, "answer_id": 60008148, "question_id": 57789856, "link": "https://stackoverflow.com/questions/57789856/minimizing-dropped-udp-packets-at-high-packet-rates-windows-10/60008148#60008148", "title": "Minimizing dropped UDP packets at high packet rates (Windows 10)", "body": "<ul>\n<li>IOCP and WSARecv in overlapped mode, you can setup around ~60k WSARecv</li>\n<li>on the thread that handles the GetQueuedCompletionStatus process the data and also do a WSARecv in that thread to comnpensate for the one being used when receiving the data</li>\n</ul>\n\n<p>please note that your udp packet size should stay below the MTU above it will cause drops depending on all the network hardware between the camera and the software</p>\n\n<ul>\n<li>write some UDP testers that mimuc the camera to test the network just to be sure that the hardware will support the load.</li>\n</ul>\n\n<p><a href=\"https://www.winsocketdotnetworkprogramming.com/winsock2programming/winsock2advancediomethod5e.html\" rel=\"nofollow noreferrer\">https://www.winsocketdotnetworkprogramming.com/winsock2programming/winsock2advancediomethod5e.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 6346982, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N63z6.png?s=128&g=1", "display_name": "Czarking", "link": "https://stackoverflow.com/users/6346982/czarking"}, "edited": false, "score": 0, "creation_date": 1603983905, "post_id": 62570687, "comment_id": 114213679, "body": "Do you know if there is a maximum rate for Windows to read UDP packets? Does Microsoft provide an &quot;at least X GBps&quot; spec?"}, {"owner": {"reputation": 38, "user_id": 596143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QE68I.jpg?s=128&g=1", "display_name": "Torkel", "link": "https://stackoverflow.com/users/596143/torkel"}, "reply_to_user": {"reputation": 123, "user_id": 6346982, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N63z6.png?s=128&g=1", "display_name": "Czarking", "link": "https://stackoverflow.com/users/6346982/czarking"}, "edited": false, "score": 1, "creation_date": 1604886589, "post_id": 62570687, "comment_id": 114475144, "body": "I don&#39;t know about any fixed max rate, I think it is a system spec thing. I would be very surprised if Microsoft was able to give guarantees about it, given how many different hardwares they can run on."}], "tags": [], "owner": {"reputation": 38, "user_id": 596143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QE68I.jpg?s=128&g=1", "display_name": "Torkel", "link": "https://stackoverflow.com/users/596143/torkel"}, "is_accepted": false, "score": 0, "last_activity_date": 1593072295, "creation_date": 1593072295, "answer_id": 62570687, "question_id": 57789856, "link": "https://stackoverflow.com/questions/57789856/minimizing-dropped-udp-packets-at-high-packet-rates-windows-10/62570687#62570687", "title": "Minimizing dropped UDP packets at high packet rates (Windows 10)", "body": "<p>To increase the UDP Rx performance for GigE cameras on Widnows you may want to look into writing a custom filter driver (NDIS). This allows you to intercept the messages in the kernel, stop them from reaching userspace, pack them into some buffer and then send to userspace via a custom ioctl to your application. I have done this, it took about a week of work to get done. There is a sample available from Microsoft which I used as base for it.</p>\n<p>It is also possible to use an existing generic driver, such as pcap, which I also tried and that took about half a week. This is not as good because pcap cannot determine when the frames end so packet grouping will be sub optimal.</p>\n<p>I would suggest first digging deep in the network stack settings and making sure that the PC is not starved for resources. Look at guides for tuning e.g. Intel network cards for this type of load, that could potentially have a larger impact than a custom driver.</p>\n<p>(I know this is an older thread and you have probably solved your problem. But things like this is good to document for future adventurers..)</p>\n"}], "owner": {"reputation": 3054, "user_id": 1598462, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/jg12d.png?s=128&g=1", "display_name": "SDwarfs", "link": "https://stackoverflow.com/users/1598462/sdwarfs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1664, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1593072295, "creation_date": 1567604872, "last_edit_date": 1567609697, "question_id": 57789856, "link": "https://stackoverflow.com/questions/57789856/minimizing-dropped-udp-packets-at-high-packet-rates-windows-10", "title": "Minimizing dropped UDP packets at high packet rates (Windows 10)", "body": "<p><strong>IMPORTANT NOTE: I'm aware that UDP is an unreliable protocol. But, as I'm not the manufacturer of the device that delivers the data, I can only try to minimize the impact. Hence, please don't post any more statements about UDP being unreliable. I need suggestions to reduce the loss to a minimum instead.</strong></p>\n\n<p>I've implemented an application C++ which needs to receive a large amount of UDP packets in short time and needs to work under Windows (Winsock). The program works, but seems to drop packets, if the Datarate (or Packet Rate) per UDP stream reaches a certain level... Note, that I cannot change the camera interface to use TCP.</p>\n\n<p>Details: It's a client for Gigabit-Ethernet cameras, which send their images to the computer using UDP packets. The data rate per camera is often close to the capacity of the network interface (~120 Megabytes per second), which means even with 8KB-Jumbo Frames the packet rate is at 10'000 to 15'000 per camera. Currently we have connected 4 cameras to one computer... and this means up to 60'000 packets per second.</p>\n\n<p>The software handles all cameras at the same time and the stream receiver for each camera is implemented as a separate thread and has it's own receiving UDP socket.\nAt a certain frame rate the software seems miss a few UDP frames (even the network capacity is used only by ~60-70%) every few minutes.</p>\n\n<h2>Hardware Details</h2>\n\n<ul>\n<li>Cameras are from foreign manufacturers! They send UDP streams to a configurable UDP endpoint via ethernet. No TCP-support... </li>\n<li>Cameras are connected via their own dedicated network interface (1GBit/s)</li>\n<li>Direct connection, no switch used (!)</li>\n<li>Cables are CAT6e or CAT7</li>\n</ul>\n\n<h2>Implementation Details</h2>\n\n<p>So far I set the SO_RCVBUF to a large value:</p>\n\n<pre><code>int32_t rbufsize = 4100 * 3100 * 2; // two 12 MP images\nif (setsockopt(s, SOL_SOCKET, SO_RCVBUF, (char*)&amp;rbufsize, sizeof(rbufsize)) == -1) {\n    perror(\"SO_RCVBUF\");\n    throw runtime_error(\"Could not set socket option SO_RCVBUF.\");\n}\n</code></pre>\n\n<p>The error is not thrown. Hence, I assume the value was accepted.\nI also set the priority of the main process to HIGH-PRIORITY_CLASS by using the following code:</p>\n\n<pre><code>SetPriorityClass(GetCurrentProcess(), HIGH_PRIORITY_CLASS); \n</code></pre>\n\n<p>However, I didn't find any possibility to change the thread priorities. The threads are created after the process priority is set...</p>\n\n<p>The receiver threads use blocking IO to receive one packet at a time (with a 1000 ms timeout to allow the thread to react to a global shutdown signal). If a packet is received, it's stored in a buffer and the loop immediately continues to receive any further packets.</p>\n\n<h2>Questions</h2>\n\n<p>Is there any other way how I can reduce the probability of a packet loss? Any possibility to maybe receive all packets that are stored in the sockets buffer with one call? (I don't need any information about the sender side; just the contained payload)\nMaybe, you can also suggest some registry/network card settings to check...</p>\n"}, {"tags": ["c++", "visual-studio", "cmake", "external-dependencies", "cmake-modules"], "owner": {"reputation": 78, "user_id": 9740720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ab169d2cec0c6508209acf6ac71870?s=128&d=identicon&r=PG&f=1", "display_name": "bigla", "link": "https://stackoverflow.com/users/9740720/bigla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567607135, "creation_date": 1567604696, "last_edit_date": 1567607135, "question_id": 57789798, "link": "https://stackoverflow.com/questions/57789798/executable-built-with-cmakevisual-studio-2015-needs-qt5svg-dll-but-original-vi", "title": "Executable built with CMake(Visual Studio 2015) needs Qt5SVG.dll but original Visual Studio 2015 does not. Why?", "body": "<h1>Situation</h1>\n\n<p>I learned a lot over the last year, but this is something I just could not wrap my head around. Project is <code>C++</code>. CMake <code>1.15.2</code>. Visual Studio <code>2015</code>.</p>\n\n<p>I converted a whole Solution <code>*.sln</code> file with <a href=\"https://github.com/pavelliavonau/cmakeconverter\" rel=\"nofollow noreferrer\">cmake-converter</a> and wrote FindXXX.cmake Modules for all external <code>*.lib</code>s defined in the <code>*.vcxproj</code> files. </p>\n\n<p>Everytime I encountered an <code>error: unresolved external</code> I added the corresponding Target <code>Sometarget::somecomponent</code> to the <code>target_link_libraries(ConsumingTarget ... )</code> call. </p>\n\n<p>Now I have a build that works and produces no errors. Some executables say something along the lines of:</p>\n\n<p>\"Execution of code cannot be continued because somecomponent.dll is not found...\"</p>\n\n<h3>I have</h3>\n\n<ul>\n<li>An original <code>.sln</code> file that produces executables only requiring <code>.lib</code> files</li>\n<li>A CMake generated <code>.sln</code> file that produces executables requiring <code>.dll</code> files</li>\n<li>Working FindXXX.cmake files which <code>add_library(XXX::yyy UNKNOWN IMPORTED)</code>\n\n<ul>\n<li>They find the headers and the <code>.lib</code> files (<code>.dll</code> files are not existing/intended/needed in the original VS <code>.sln</code>)</li>\n<li>They create the corresponding Targets for all <code>.lib</code> files</li>\n</ul></li>\n<li>Consuming Targets which <code>target_link_libraries(ConsumingTarget PRIVATE XXX::yyy)</code></li>\n<li>\"A working build\"</li>\n<li>An error \"before starting the main function\".</li>\n</ul>\n\n<h3>What I have tried</h3>\n\n<p>I have tried <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/16931#note_273637\" rel=\"nofollow noreferrer\">defining an OBJECT Library</a> and adding this to the sources of <code>ConsumingTarget</code> and removing <code>Sometarget::somecomponent</code> from the <code>target_link_libraries</code> call. <a href=\"https://cmake.org/cmake/help/v3.8/manual/cmake-buildsystem.7.html#object-libraries\" rel=\"nofollow noreferrer\">CMake Doc on Object Libraries</a></p>\n\n<p>I have tried reading and understanding the difference between <a href=\"https://stackoverflow.com/questions/4099975/difference-between-a-module-library-and-a-framework\">module and library</a>. Even the CMake documentation on <a href=\"https://cmake.org/cmake/help/latest/command/add_library.html?highlight=add_library#imported-libraries\" rel=\"nofollow noreferrer\">imported Libraries</a> couldn't help me understand my problem.</p>\n\n<p>I have tried reading and understanding the difference between linking a static and shared library.</p>\n\n<h3>My Assumptions</h3>\n\n<ul>\n<li>Adding the imported library is done wrong by me.\n\n<ul>\n<li>Reason: <a href=\"https://github.com/lucasg/Dependencies\" rel=\"nofollow noreferrer\">DependenciesGui.exe</a> shows different dependencies for the cmake-generated-executable and the original-sln-executable but the linker calls (shown in VisualStudio 2015) seem to be the same.</li>\n</ul></li>\n<li>Whole Program Optimization in the CMake File does not work the same way it does in the original .sln file although the Flags are activated at all levels described in this <a href=\"https://stackoverflow.com/a/48439179/9740720\">answer</a>.\n\n<ul>\n<li>Reason: compiling with the original file I noticed <code>warning C4505: 'foobar': unreferenced local function has been removed</code> - I don't seem to get those warnings with the cmake-generated build.</li>\n<li>subassumption: Functions which won't be called are optimized away, thus removing the necessity for the <code>.dll</code> file.</li>\n</ul></li>\n</ul>\n\n<h1>I expect/hope for</h1>\n\n<ul>\n<li><code>ConsumingTarget.exe</code> to run without asking for <code>somecomponent.dll</code></li>\n<li>another explanation on imported targets and how to link libraries where <code>.dll</code>s should not be necessary.</li>\n<li>an explanation on how to analyze/compare the two binaries regarding their symbols(?) and map the seen information to CMake commands. (I am using <a href=\"https://github.com/lucasg/Dependencies\" rel=\"nofollow noreferrer\">DependenciesGui.exe</a> to look for dependencies in the .exe file)</li>\n</ul>\n\n<h1>Possible reason for failure</h1>\n\n<ul>\n<li>One executable had <a href=\"https://github.com/pavelliavonau/cmakeconverter/issues/89\" rel=\"nofollow noreferrer\">no /DELAYLOAD... directive</a> after conversion with cmake-converter. Opened Issue. Question Title still holds.</li>\n</ul>\n\n<p>Edits: \n1: Added possible reason for failure</p>\n"}, {"tags": ["c++", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1567604857, "post_id": 57789762, "comment_id": 102012837, "body": "Where do you use <code>deleteTriple</code> function? It doesn&#39;t seem to delete anything."}, {"owner": {"reputation": 25, "user_id": 8372869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18jEA.jpg?s=128&g=1", "display_name": "mcholewinski", "link": "https://stackoverflow.com/users/8372869/mcholewinski"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1567605544, "post_id": 57789762, "comment_id": 102013257, "body": "Well it&#39;s only linkedList.cpp. I have another cpp file in which I run everything."}, {"owner": {"reputation": 25, "user_id": 8372869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18jEA.jpg?s=128&g=1", "display_name": "mcholewinski", "link": "https://stackoverflow.com/users/8372869/mcholewinski"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1567606950, "post_id": 57789762, "comment_id": 102014031, "body": "the <code>deleteElement</code> is meant to delete single element and I want to use it to help me delete the triple"}, {"owner": {"reputation": 25, "user_id": 8372869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18jEA.jpg?s=128&g=1", "display_name": "mcholewinski", "link": "https://stackoverflow.com/users/8372869/mcholewinski"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1567607040, "post_id": 57789762, "comment_id": 102014085, "body": "To put it another way: I don&#39;t know how to iterate through the first 3 elements than another 3 elements and another 3 elements. I will figure something out when I do it"}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1567623909, "post_id": 57789762, "comment_id": 102021984, "body": "Can you explain why in the case of <code>3 3 3</code> it would delete the second and third elements if <code>K = 3</code>?  From your problem description I would expect nothing to be deleted.  If <code>avg &gt; K</code> delete second and third, if <code>avg &lt; K</code> delete first.  In this case you have <code>avg == K</code> so it is neither greater nor less than <code>K</code>."}, {"owner": {"reputation": 25, "user_id": 8372869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18jEA.jpg?s=128&g=1", "display_name": "mcholewinski", "link": "https://stackoverflow.com/users/8372869/mcholewinski"}, "reply_to_user": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1567628291, "post_id": 57789762, "comment_id": 102023370, "body": "@pstrjds hmm... The tutor that made this task didn&#39;t specify what to do in that case"}], "answers": [{"comments": [{"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1567624116, "post_id": 57790736, "comment_id": 102022063, "body": "Instead of <code>while(true)</code> I think it would be cleaner to have <code>while (nodePtr)</code> or for clarity <code>while (nodePtr != nullptr)</code>."}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1567624513, "post_id": 57790736, "comment_id": 102022218, "body": "Also just noticed that you seem to be calling the <code>deleteElement</code>  <code>deleteElement</code> method as shown in OPs question, but it would be incorrect to use that in this case as 1 - it requires traversing the list a second time, which is unecessary, and 2 it starts from the top and removes the first matching value element, which may or may not be the one you think you are deleting.  Using OPs example of <code>7,6,6,3,3,3,2,1,1,1,1</code>, and the case of <code>3,3,3</code> where you are supposed to delete the second and third <code>3</code>, if you call <code>deleteElement</code> you will delete the first and second instead of second and third."}, {"owner": {"reputation": 25, "user_id": 8372869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18jEA.jpg?s=128&g=1", "display_name": "mcholewinski", "link": "https://stackoverflow.com/users/8372869/mcholewinski"}, "reply_to_user": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1567629261, "post_id": 57790736, "comment_id": 102023701, "body": "Thanks! Changed it a slight bit and that answer fixes my problem. @pstrjds - It doesn&#39;t work exactly as I wanted it to but the end result after running the function is good enough for this task."}], "tags": [], "owner": {"reputation": 1880, "user_id": 11829247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7ed099888314cc282b63908b890a76?s=128&d=identicon&r=PG&f=1", "display_name": "Frodyne", "link": "https://stackoverflow.com/users/11829247/frodyne"}, "is_accepted": true, "score": -1, "last_activity_date": 1567607825, "creation_date": 1567607825, "answer_id": 57790736, "question_id": 57789762, "link": "https://stackoverflow.com/questions/57789762/how-can-i-check-each-3-elements-of-a-singly-linked-list-and-then-delete-some-of/57790736#57790736", "title": "How can I check each 3 elements of a singly linked list and then delete some of them?", "body": "<p>Try something like this.</p>\n\n<pre><code>void tripleFunc(Node* head, int K)\n{\n    Node* nodePtr = head; // nodePtr always points at the start of a new triple\n    while (true)\n    {\n        Node* first = nullptr;\n        Node* second = nullptr;\n        Node* third = nullptr;\n\n        first = nodePtr; // When taking the three elements out, remember to always check for a null pointer BEFORE accessing the element\n        if (first)\n            second = first-&gt;next;\n        if (second)\n            third = second-&gt;next;\n        if (third)\n            nodePtr = third-&gt;next; // Keep the nodePtr pointing at the start of the next triple\n        else\n            return; // Only happens if one or more of the previous ifs failed, which means that we don't have enough elements left for a full triple\n\n        if (calculateAverage(first, second, third) &lt; K) // Make this function\n        {\n            deleteElement(first-&gt;value);\n        }\n        else\n        {\n            deleteElement(second-&gt;value);\n            deleteElement(third-&gt;value);\n        }\n    }\n}\n</code></pre>\n\n<p>I haven't tested it though, so any possible bugs are left as an exercise to the reader to find and sort out. :)</p>\n"}], "owner": {"reputation": 25, "user_id": 8372869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18jEA.jpg?s=128&g=1", "display_name": "mcholewinski", "link": "https://stackoverflow.com/users/8372869/mcholewinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57790736, "answer_count": 1, "score": 0, "last_activity_date": 1567607825, "creation_date": 1567604624, "question_id": 57789762, "link": "https://stackoverflow.com/questions/57789762/how-can-i-check-each-3-elements-of-a-singly-linked-list-and-then-delete-some-of", "title": "How can I check each 3 elements of a singly linked list and then delete some of them?", "body": "<p>So basically I have this assignment on my University that asks to make a sorted singly linked list and then make some methods on it. The one that I'm having trouble is: \"create delete() function that checks the average of each triple elements and if it's lower than integer 'K' (which is a parameter of said function) deletes the first element of the triple or deletes second and last element of the triple if it's higher.\"</p>\n\n<p>I already made a function/method that deletes a single element of the linked list.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void LinkedList::deleteElement(int a)\n{\n    Node *temp = head;\n    Node *previousTemp = head;\n\n    while(temp != nullptr)\n    {\n        if(temp-&gt;value == a)\n        {\n            break;\n        }\n        else\n        {\n            previousTemp = temp;\n            temp = temp-&gt;next;\n        }\n    }\n    if(temp == nullptr)\n    {\n        cout &lt;&lt; \"Can't delete. Element not found.\" &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"\\nDeleting element: \" &lt;&lt; temp-&gt;value &lt;&lt; endl;\n        previousTemp-&gt;next = temp-&gt;next;\n        delete temp;\n    }\n    howMany--;\n}\n\nvoid Sznur::deleteTriple()\n{\n    Node *first = head;\n    Node *second = first-&gt;next;\n    Node *third = second-&gt;next;\n\n}\n</code></pre>\n\n<p>The task is written pretty hard to understand but for ex.:</p>\n\n<pre><code>int K=3\nlinkedList: 7,6,6,3,3,3,2,1,1,1,1\n</code></pre>\n\n<p>after running the function:</p>\n\n<pre><code>linkedList: 7,3,1,1,1,1\n</code></pre>\n\n<p>(7+6+6)/3 > K -> deletes 6 and 6</p>\n\n<p>(3+3+3)/3 > K -> deltes second 3 and last 3</p>\n\n<p>(2+1+1)/3 &lt; K -> deletes 2</p>\n\n<p>If the linkedList length is not dividable by 3 the last elements stay in their place.</p>\n"}, {"tags": ["python", "c++", "python-3.x", "flask", "ctypes"], "comments": [{"owner": {"reputation": 21, "user_id": 6475794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce834bf1de1f6bf242ae9552b98526b?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6475794/matt"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1567716498, "post_id": 57789728, "comment_id": 102056901, "body": "@CristiFati This seemed to fix it thanks! I have a function for deleting pointers too but I thought id omit and code that wasn&#39;t strictly relevant."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1567724492, "post_id": 57789728, "comment_id": 102058901, "body": "Glad to hear you worked things out!. My previous comment seems ho have autodeleted itself... :)"}], "owner": {"reputation": 21, "user_id": 6475794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce834bf1de1f6bf242ae9552b98526b?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6475794/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 1, "closed_date": 1567716521, "answer_count": 0, "score": 2, "last_activity_date": 1567604520, "creation_date": 1567604520, "question_id": 57789728, "link": "https://stackoverflow.com/questions/57789728/calling-python-wrapper-functions-for-c-library-from-flask-webserver", "closed_reason": "Duplicate", "title": "Calling python wrapper functions for c++ library from flask webserver", "body": "<p>I written a wrapper in python for a c++ library and am trying to call it from a flask server so that I can process and display some information however this causes c++ library that is being called through the wrapper to segfault. The library works fine when functions are through the wrapper in main but once calls to the wrapper are embedded in a function they fail.</p>\n\n<p><strong>Calling the same function from main works fine while calling the same function from within another function causes it to fail</strong></p>\n\n<p>I have tried to make sure that the argtypes and restypes I am providing for the function wrapper are correct. Ive tried sending different datatypes / encoding the strings in different ways (and modifying the c++ library accordingly) but this seems to change nothing.\nI have tried running the flask sever both inside and outside of a virtual environment but this also makes no difference.</p>\n\n<p>Flask code:</p>\n\n<pre><code>from flask import *\nimport wrapper\nfrom flask_socketio import SocketIO\n\n// If i call wrapper functions from here they work fine\ntest = wrapper.analysetweets()\nprint(test)\n\napp = Flask(__name__)\nsocketio = SocketIO(app)\n\n@socketio.on(\"startanalysis\")\ndef startanalysis():\n// If the wrapper functions are called from here they segfault\n    test = wrapper.analysetweets()\n    print(test);\n\n@app.route(\"/analysis\")\ndef analysis():\n    return render_template(\"analysis.html\")\n\nif __name__ == \"__main__\":\n    socketio.run(app)\n</code></pre>\n\n<p>Python wrapper code:</p>\n\n<pre><code>from ctypes import *\nimport json\n\nstdcpp = cdll.LoadLibrary(\"libstdc++.so.6\")\nlib = cdll.LoadLibrary('./main.so')\n\nclass Tweet(object):\n    def __init__(self):\n        lib.inittext.argtypes = [c_void_p, c_char_p]\n        lib.inittext.restype = None\n        self.obj = lib.Tweet_new()\n\n    def inittext(self, st):\n        print(self)\n        lib.inittext(self.obj, st)\n\ndef analysetweets():\n    t = Tweet();\n    testtext=c_char_p(b'testing'.encode(\"utf-8\"))\n    t.inittext(testtext)\n    return \"Works\"\n</code></pre>\n\n<p>The c++ lib looks something like this:</p>\n\n<pre><code>class Tweet\n{\npublic:\n    string text;\n\n    void inittext(char t[280])\n    {\n        text = t;\n    }\n}\n\nextern \"C\"\n{\n    Tweet *Tweet_new() { return new Tweet(); }\n    void inittext(Tweet *tweet, char str[280]) { tweet-&gt;inittext(str); }\n}\n</code></pre>\n\n<p>The c++ code is being compiled into a library with the following code:</p>\n\n<pre><code>g++ -c -fPIC -std=c++11 main.cpp -o main.o\n</code></pre>\n\n<pre><code>g++ -shared -Wl,-soname,main.so -o main.so main.o\n</code></pre>\n\n<p>The flask server is being run in a virtualenv</p>\n\n<p>Any help would be greatly appreciated :)</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1567604592, "post_id": 57789708, "comment_id": 102012672, "body": "It would be useful if you show the code that deletes tree view items."}, {"owner": {"reputation": 174, "user_id": 11220945, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I0JOPp3o7Ig/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIoSj-S-REmsMB063DQVfSdQeC2g/mo/photo.jpg?sz=128", "display_name": "Lazy", "link": "https://stackoverflow.com/users/11220945/lazy"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1567604877, "post_id": 57789708, "comment_id": 102012850, "body": "@vahancho just deletes the model with all its items and creates a new one or deletes only one item and creates a new one. This way works when it&#39;s not called from the context menu"}], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 11220945, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I0JOPp3o7Ig/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIoSj-S-REmsMB063DQVfSdQeC2g/mo/photo.jpg?sz=128", "display_name": "Lazy", "link": "https://stackoverflow.com/users/11220945/lazy"}, "is_accepted": false, "score": 0, "last_activity_date": 1568107607, "creation_date": 1568107607, "answer_id": 57867804, "question_id": 57789708, "link": "https://stackoverflow.com/questions/57789708/deleting-qtreeview-item-using-custom-context-menu-crashes/57867804#57867804", "title": "Deleting QTreeView item using custom context menu crashes", "body": "<p>Okay, I found the answer.\nBefore deleting the QMenu make sure to call <code>QMenu::hide()</code> to stop the use of it.</p>\n"}], "owner": {"reputation": 174, "user_id": 11220945, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I0JOPp3o7Ig/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfIoSj-S-REmsMB063DQVfSdQeC2g/mo/photo.jpg?sz=128", "display_name": "Lazy", "link": "https://stackoverflow.com/users/11220945/lazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1568107607, "creation_date": 1567604424, "last_edit_date": 1567605575, "question_id": 57789708, "link": "https://stackoverflow.com/questions/57789708/deleting-qtreeview-item-using-custom-context-menu-crashes", "title": "Deleting QTreeView item using custom context menu crashes", "body": "<p>I have my QTreeView with custom model and items. Each item can have context menu triggered by right click. My problem is that when I am trying to refresh the View after deleting an item using its context menu, the application crashes because it get segmentation fault. The context menu is run in other thread by exec() so it doesn't know when the item (and its context menu QMenu) is deleted and crashes.</p>\n\n<pre><code>void ProjectExplorerDock::onCustomContextMenu(const QPoint&amp; point)\n{\n  QModelIndex index = this-&gt;pProjectExplorerView-&gt;indexAt(point);\n  auto item = static_cast&lt;TreeItem*&gt;(index.internalPointer());\n  if(item)\n  {\n    if(item-&gt;getMenu())\n    {\n      item-&gt;getMenu()-&gt;exec(this-&gt;pProjectExplorerView-&gt;viewport()-&gt;mapToGlobal(point));\n    }\n  }\n}\n</code></pre>\n\n<p>The triggered action emits a signal to delete the item. I've tried to do this after the exec() like this:</p>\n\n<pre><code>void ProjectExplorerDock::onCustomContextMenu(const QPoint&amp; point)\n{\n  QModelIndex index = this-&gt;pProjectExplorerView-&gt;indexAt(point);\n  auto item = static_cast&lt;TreeItem*&gt;(index.internalPointer());\n  if(item)\n  {\n    if(item-&gt;getMenu())\n    {\n      item-&gt;getMenu()-&gt;exec(this-&gt;pProjectExplorerView-&gt;viewport()-&gt;mapToGlobal(point));\n      emit refreshProject();\n    }\n  }\n}\n</code></pre>\n\n<p>but it's much more work to distinguish if it is necessary to refresh or not.</p>\n\n<p>Is there a way to stop the exec() when the QMenu is deleted?</p>\n\n<p>Example function to show how it is done. It is called every time I want to refresh the view. Each TreeItem has QMenu.</p>\n\n<pre><code>void ProjectExplorerDock::fillModel(Project&amp; project)\n{\n  delete pTreeModel;\n  pTreeModel = new TreeModel(mHeaders);\n  if(!project.getName().empty())\n  {\n    QList&lt;QVariant&gt; projectName {QString::fromStdString(project.getName()), \"\"};\n    TreeItem* projectNameItem = new TreeItem(projectName);\npTreeModel-&gt;addNewTreeItem(projectNameItem, pTreeModel-&gt;getRootItem());\npProjectExplorerView-&gt;setModel(pTreeModel);\n</code></pre>\n\n<pre><code>void TreeModel::addNewTreeItem(TreeItem* item, TreeItem* parentItem)\n{\n  beginInsertRows(QModelIndex(), rowCount(), rowCount());\n  item-&gt;setParent(parentItem);\n  parentItem-&gt;appendChild(item);\n  endInsertRows();\n}\n</code></pre>\n"}, {"tags": ["c++", "mocking", "googletest"], "comments": [{"owner": {"reputation": 1288, "user_id": 11680056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352e207181e5b85c5ffeef7be921898c?s=128&d=identicon&r=PG&f=1", "display_name": "sklott", "link": "https://stackoverflow.com/users/11680056/sklott"}, "edited": false, "score": 0, "creation_date": 1567606083, "post_id": 57789553, "comment_id": 102013547, "body": "Did you try something like, <code>EXPECT_CALL(mock_object, foo(AnyOf(Eq(0),Ne(0))));</code>? Otherwise, I think you need to implement you own matcher..."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4141648, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ca2dea6866cd22801b7ed0df873cf72?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/4141648/karl"}, "edited": false, "score": 0, "creation_date": 1567678626, "post_id": 57792273, "comment_id": 102038257, "body": "Thank you, Yksisarvinen. It works for me without linking errors."}], "tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": true, "score": 3, "last_activity_date": 1618404316, "last_edit_date": 1618404316, "creation_date": 1567613479, "answer_id": 57792273, "question_id": 57789553, "link": "https://stackoverflow.com/questions/57789553/for-gtest-how-to-mock-methods-which-have-the-same-name-but-different-types/57792273#57792273", "title": "For gtest, how to mock methods which have the same name, but different types", "body": "<p>You can use typed wildcard (<a href=\"https://github.com/google/googletest/blob/release-1.10.0/googlemock/docs/cheat_sheet.md#wildcard\" rel=\"nofollow noreferrer\">documentation</a>):</p>\n<pre><code>EXPECT_CALL(mock_object, foo(An&lt;int&amp;&gt;())).WillOnce(SetArgReferee&lt;0&gt;(10));\nEXPECT_CALL(mock_object, foo(A&lt;double&amp;&gt;())).WillOnce(SetArgReferee&lt;0&gt;(10.));\n</code></pre>\n<p><code>A&lt;&gt;</code> and <code>An&lt;&gt;</code> mean exactly the same, they have two names just for nicer reading.\nSee it online on <a href=\"https://godbolt.org/z/89ac7fsdq\" rel=\"nofollow noreferrer\">godbolt</a></p>\n<hr />\n<p>Side note: You don't have to <code>Return()</code> from <code>void</code> method.</p>\n"}], "owner": {"reputation": 67, "user_id": 4141648, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ca2dea6866cd22801b7ed0df873cf72?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/4141648/karl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 57792273, "answer_count": 1, "score": 1, "last_activity_date": 1618404316, "creation_date": 1567603980, "question_id": 57789553, "link": "https://stackoverflow.com/questions/57789553/for-gtest-how-to-mock-methods-which-have-the-same-name-but-different-types", "title": "For gtest, how to mock methods which have the same name, but different types", "body": "<p>I use Gtest to verify my C++ code, and now I face a mocking problem.\nFor several reasons, I have some methods, which have the same name, but different type arguments and implementation, like</p>\n\n<pre><code>void foo(int&amp; i);\nvoid foo(double&amp; d);\nvoid foo(float&amp; f);\n</code></pre>\n\n<p>For them, I make mock methods, like</p>\n\n<pre><code>MOCK_METHOD1(foo, void(int&amp;));\nMOCK_METHOD1(foo, void(double&amp;));\nMOCK_METHOD1(foo, void(float&amp;));\n</code></pre>\n\n<p>However, I could not use EXPECT_CALL for them. In a test code, I set action for foo(int), like</p>\n\n<pre><code>EXPECT_CALL(mock_object, foo(_)).WillOnce(DoAll(SetArgReferee&lt;0&gt;(10),Return()));\n</code></pre>\n\n<p>but, compiler failed because target is ambiguous among int, double and float.</p>\n\n<p>Is there any way to use EXPECT_CALL for specific type mock method?</p>\n\n<p>I failed to use testing::MatcherCast and testing::SafeMatcherCast, because they only accept const type. However, I need to update the argument, so I could not use const.</p>\n"}, {"tags": ["c++", "templates", "overload-resolution"], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 15, "last_activity_date": 1567605983, "last_edit_date": 1567605983, "creation_date": 1567604389, "answer_id": 57789696, "question_id": 57789497, "link": "https://stackoverflow.com/questions/57789497/overload-resolution-of-template-functions/57789696#57789696", "title": "Overload resolution of template functions", "body": "<blockquote>\n  <p>the template argument deduction does not take the return type into account, </p>\n</blockquote>\n\n<p>Yes. <a href=\"https://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"noreferrer\">Template argument deduction</a> is performed based on function arguments.</p>\n\n<blockquote>\n  <p>so why <code>max&lt;int&gt;</code> is ambiguous and not <code>max&lt;double&gt;</code>?</p>\n</blockquote>\n\n<p>Given <code>::max&lt;int&gt;(7, 4.)</code>, for the 1st overload, the 1st template parameter <code>T1</code> is specified as <code>int</code>, and <code>T2</code> is deduced as <code>double</code> from the 2nd function argument <code>4.</code>, then the instantiation would be <strong><code>double max(int, double)</code></strong>. For the 2nd overload, the 1st template parameter <code>RT</code> is specified as <code>int</code>, <code>T1</code> is deduced as <code>int</code> from <code>7</code>, <code>T2</code> is deduced as <code>double</code> from <code>4.</code>, then the instantiation would be <strong><code>int max(int, double)</code></strong>. <a href=\"https://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"noreferrer\">Overload resolution</a> doesn't consider return type too, the two overloads are both <strong>exact match</strong> and then ambiguous.</p>\n\n<p>Given <code>::max&lt;double&gt;(7, 4.)</code>, for the 1st overload, the 1st template parameter <code>T1</code> is specified as <code>double</code>, and <code>T2</code> is deduced as <code>double</code> from <code>4.</code>, so the instantiation would be <strong><code>double max(double, double)</code></strong>. For the 2nd overload, the 1st template parameter <code>RT</code> is specified as <code>double</code>, <code>T1</code> is deduced as <code>int</code> from <code>7</code>, <code>T2</code> is deduced as <code>double</code> from <code>4.</code>, then the instantiation would be <strong><code>double max(int, double)</code></strong>. Then the 2nd overload wins in <a href=\"https://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"noreferrer\">overload resolution</a> because it's an <strong>exact match</strong>, the 1st one requires the <strong>implicit conversion</strong> from <code>int</code> to <code>double</code> for the 1st argument <code>7</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 2, "last_activity_date": 1567604580, "creation_date": 1567604580, "answer_id": 57789747, "question_id": 57789497, "link": "https://stackoverflow.com/questions/57789497/overload-resolution-of-template-functions/57789747#57789747", "title": "Overload resolution of template functions", "body": "<p>Let's look at what specifying <code>double</code> as an argument does for the compiler during overload resolution.</p>\n\n<p>For the \"Number1\" <code>max</code> template, it specifies that the first argument must be of type <code>double</code>. When attempting to do the template match, the compiler deduces that the second argument is of type <code>double</code>. So the resultant signature is <code>auto max(double, double)</code>. That's a match, though it involves casting the first argument from <code>int</code> to <code>double</code>.</p>\n\n<p>For the \"Number2\" <code>max</code> template, it specifies that the return type is <code>double</code>. The argument types are deduced. So the resultant signature is <code>double max(int, double)</code>. That's an exact match, removing any ambiguity.</p>\n\n<p>Now let's look at specifying <code>int</code>. Now the two signatures are <code>auto max(int, double)</code> and <code>double max(int, double)</code>. As you can see, there's no difference which is relevant to overload resolution, resulting in the ambiguity.</p>\n\n<p>Essentially, by passing in <code>double</code>, you've poisoned one of the overloads by forcing an unnecessary conversion; the other overload thereby gets to dominate. Passing in <code>int</code>, in contrast, does not further constrain either overload's ability to be a perfect match.</p>\n"}, {"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 3, "last_activity_date": 1567604619, "creation_date": 1567604619, "answer_id": 57789758, "question_id": 57789497, "link": "https://stackoverflow.com/questions/57789497/overload-resolution-of-template-functions/57789758#57789758", "title": "Overload resolution of template functions", "body": "<p>For each of your function calls the compiler has 2 functions to choose from and chooses the best one. Unknown template parameters are deduced from the arguments apart from <code>RT</code> which must be explicitly specified and can't be deduced.</p>\n\n<pre><code>auto a = ::max(4, 7.2);\n</code></pre>\n\n<p>As <code>RT</code> is not specified and can't be deduced, the second overload is not usable so is ignored. The first is chosen and the types are deduced as <code>int</code> and <code>double</code>.</p>\n\n<pre><code>auto b = ::max&lt;double&gt;(4, 7.4);\n</code></pre>\n\n<p><code>RT</code> is now specified so the compiler can choose to either use <code>max&lt;double,int,double&gt;</code> or <code>max&lt;double, double&gt;</code>, the argument types for the 3 template parameter version match the function arguments exactly whereas the 2 template parameter version would require a cast from <code>int</code> to <code>double</code> so the 3 parameter overload is chosen.</p>\n\n<pre><code>auto c = ::max&lt;int&gt;(7, 4.);\n</code></pre>\n\n<p><code>RT</code> is now specified so the compiler can choose to either use <code>max&lt;int,int,double&gt;</code> or <code>max&lt;int, double&gt;</code>, the argument types both functions are now the same so the compiler can't choose between them.</p>\n"}], "owner": {"reputation": 155, "user_id": 2482623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40681c18add473b8ec16a12dc322df4?s=128&d=identicon&r=PG", "display_name": "DamissaK", "link": "https://stackoverflow.com/users/2482623/damissak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 5, "accepted_answer_id": 57789696, "answer_count": 3, "score": 13, "last_activity_date": 1567605983, "creation_date": 1567603831, "last_edit_date": 1567605117, "question_id": 57789497, "link": "https://stackoverflow.com/questions/57789497/overload-resolution-of-template-functions", "title": "Overload resolution of template functions", "body": "<p>Consider this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n//Number1\ntemplate&lt;typename T1, typename T2&gt;\nauto max (T1 a, T2 b)\n{\n    std::cout &lt;&lt; \"auto max(T1 a, T2 b)\" &lt;&lt;std::endl;\n    return  b &lt; a ? a : b;\n}\n\n//Number2\ntemplate&lt;typename RT, typename T1, typename T2&gt;\nRT max (T1 a, T2 b)\n{\n    std::cout &lt;&lt; \"RT max(T1 a, T2 b)\" &lt;&lt; std::endl;\n    return  b &lt; a ? a : b;\n}\n\n\nint main()\n{\n    auto a = ::max(4, 7.2);         //Select Number1\n\n    auto b = ::max&lt;double&gt;(4, 7.4); //Select Number2\n\n    auto c = ::max&lt;int&gt;(7, 4.);     //Compile-time error overload ambiguous\n\n    auto c = ::max&lt;double&gt;(7, 4.); //Select Number2\n\n}\n</code></pre>\n\n<p><code>auto c = ::max&lt;int&gt;(7, 4.);</code> : This line fails to compile because of overload ambiguity with the following message:</p>\n\n<pre><code>maxdefault4.cpp:9:27: error: call of overloaded 'max(int, double)' is ambiguous\n  auto c = ::max&lt;int&gt;(7, 4.);\n                           ^\nmaxdefault4.cpp:9:27: note: candidates are:\nIn file included from maxdefault4.cpp:1:0:\nmaxdefault4.hpp:4:6: note: auto max(T1, T2) [with T1 = int; T2 = double]\n auto max (T1 a, T2 b)\n      ^\nmaxdefault4.hpp:11:4: note: RT max(T1, T2) [with RT = int; T1 = int; T2 = double]\n RT max (T1 a, T2 b)\n    ^\n</code></pre>\n\n<p>while the following code:\n<code>\u00e0uto c = ::max&lt;double&gt;(7, 4.)</code> succeed, why don't we have the same error message saying the call is amgiguous for <code>max&lt;double&gt;</code> the same the way <code>max&lt;int&gt;</code> failed ?</p>\n\n<p>Why for <code>double</code> there's no problem ?</p>\n\n<p>I've read in \"C++ templates, the completes Guide\" book that the template argument deduction does not take the return type into account, so why <code>max&lt;int&gt;</code> is ambiguous and not <code>max&lt;double&gt;</code>?</p>\n\n<p>Does the return type of a template function really not taken into account in argument dedcution ?</p>\n"}, {"tags": ["c++", "embedded"], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1567642852, "post_id": 57789220, "comment_id": 102026906, "body": "the file name suffix: <code>cpp</code> indicates the code is written in C++,  so please change the tag from <code>c</code> to <code>c++</code>.   Those are two different languages (and becoming more different with each new release of the language manual"}], "tags": [], "owner": {"reputation": 3419, "user_id": 9251158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4363eda8c47b24634bf833202e67d8bd?s=128&d=identicon&r=PG&f=1", "display_name": "miguelmorin", "link": "https://stackoverflow.com/users/9251158/miguelmorin"}, "is_accepted": false, "score": 1, "last_activity_date": 1567602873, "creation_date": 1567602873, "answer_id": 57789220, "question_id": 57789219, "link": "https://stackoverflow.com/questions/57789219/how-to-include-a-third-party-library-in-local-build-for-particle-spark/57789220#57789220", "title": "How to include a third-party library in local build for Particle (Spark)?", "body": "<p>If you read further, <a href=\"https://docs.particle.io/support/particle-tools-faq/local-build/\" rel=\"nofollow noreferrer\">the instructions page</a> has a section on third-party libraries:</p>\n\n<blockquote>\n  <p>To use libraries with local build you should use the extended project structure within the APPDIR.\n  It looks like this:</p>\n  \n  <ul>\n  <li>myappdir\n  \n  <ul>\n  <li>project.properties</li>\n  <li>src\n  \n  <ul>\n  <li>myapp.cpp</li>\n  </ul></li>\n  <li>lib</li>\n  </ul></li>\n  </ul>\n  \n  <p>If you have a project in the extended format, building with APPDIR\n  automatically builds all of the libraries in lib as well, and all of the src\n  directories in the libraries are added to the include search path, so for\n  example you can just: <code>#include \"neopixel.h\"</code></p>\n</blockquote>\n\n<p>You could also use the same extended project structure and <code>git clone</code> the Github repository into <code>lib</code>.</p>\n\n<p>Note that the local build is less forgiving than the web IDE, for example you will not be able to use functions before declaring them.</p>\n"}], "owner": {"reputation": 3419, "user_id": 9251158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4363eda8c47b24634bf833202e67d8bd?s=128&d=identicon&r=PG&f=1", "display_name": "miguelmorin", "link": "https://stackoverflow.com/users/9251158/miguelmorin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568393704, "creation_date": 1567602873, "last_edit_date": 1568393704, "question_id": 57789219, "link": "https://stackoverflow.com/questions/57789219/how-to-include-a-third-party-library-in-local-build-for-particle-spark", "title": "How to include a third-party library in local build for Particle (Spark)?", "body": "<p>I have code for a Particle Photon that I can compile using the <a href=\"https://build.particle.io\" rel=\"nofollow noreferrer\">web IDE</a>. I am using the <a href=\"https://github.com/pkourany/I2CDEV_MPU6050\" rel=\"nofollow noreferrer\">MPU6050 library for Particle</a>, so the IDE added the line:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;MPU6050.h&gt;\n</code></pre>\n\n<p>I want to compile it locally and follow <a href=\"https://docs.particle.io/support/particle-tools-faq/local-build/\" rel=\"nofollow noreferrer\">these instructions</a>. I get the error</p>\n\n<pre><code>app.cpp:2:21: fatal error: MPU6050.h: No such file or directory\n</code></pre>\n\n<p>I cloned the Github repository and added its path to the environment variable <code>LIBRARY_PATH</code> but I still get the same error.</p>\n\n<p><a href=\"https://community.particle.io/t/how-to-include-library-files-using-particle-build-ide/26141\" rel=\"nofollow noreferrer\">This thread</a> mentions a similar problem with the Particle dev but does not detail the solution.</p>\n\n<p>How can I compile locally with a third-party library?</p>\n"}, {"tags": ["python", "c++", "python-3.x", "random"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1567602521, "post_id": 57789083, "comment_id": 102011398, "body": "<code>rand</code> in C++ is basically an implementation defined function.  If you want the code to be portable I&#39;d suggest using something like a messner twister (<code>std::mt19937</code>)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567604781, "post_id": 57789083, "comment_id": 102012783, "body": "@NathanOliver -- s/messner/mersenne/."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1567603835, "creation_date": 1567603835, "answer_id": 57789501, "question_id": 57789083, "link": "https://stackoverflow.com/questions/57789083/rand-and-rands-implementation-in-python/57789501#57789501", "title": "rand and rands implementation in python", "body": "<p><code>rand</code> is not a cryptographic function.</p>\n\n<p><code>rand</code>'s algorithm is not stable between systems compilers or anything else.</p>\n\n<p>If you have no choice, your best bet is to use python-C/C++ interoperability techniques and actually run <code>rand()</code> and <code>srand()</code>.  That will suck, but it will suck as much as the original code did.</p>\n"}], "owner": {"reputation": 13, "user_id": 9649356, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "megacrazyman", "link": "https://stackoverflow.com/users/9649356/megacrazyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 57789501, "answer_count": 1, "score": 0, "last_activity_date": 1567603835, "creation_date": 1567602366, "question_id": 57789083, "link": "https://stackoverflow.com/questions/57789083/rand-and-rands-implementation-in-python", "title": "rand and rands implementation in python", "body": "<p>I need an implementation of rand and rands from c++ in python to re-encrypt a bunch of files. But can't seem to get it right.</p>\n\n<p>I have a exe that un-encrypts a file into text, I also have to source code, after editing the file I need to encrypt it using the same method.</p>\n\n<p>Since I don't know how to write c++ code, I opted to write in python. Trying first to decrypt it to know the method is the same.</p>\n\n<hr>\n\n<p>The following code is the c++ code that un-encrypted the files, where \"buff\" is the beginning of the encrypted block and \"len\" length of said block.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>static const char KEY[] = \"KF4QHcm2\";\nstatic const unsigned long KEY_LEN = sizeof(KEY) - 1;\n\nvoid unobfuscate(unsigned char* buff, unsigned long len) {\n  srand((char)buff[len - 1]);\n\n  for (unsigned long i = 0; i &lt; len - 2; i += 2) {\n    buff[i] ^= KEY[rand() % KEY_LEN];\n  }\n}\n</code></pre>\n\n<p>From what I understand it takes the last character of the encrypted block as the seed, and from the beginning every 2 bytes it xors the value with an element of the KEY array, this index is determined by the remainder of a random number divided by the KEY length.</p>\n\n<p>Searching around the web, I find that c++ uses a simple <a href=\"https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\" rel=\"nofollow noreferrer\">Linear Congruential Generator</a> that shouldn't be used for encryption, but can't seem to make it work.</p>\n\n<p>I found <a href=\"https://gist.github.com/wbowling/e20b6cd096d480d623462632b4ba0329\" rel=\"nofollow noreferrer\">one example of the code</a> and tried to implement the other but either don't seem to work.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#My try at implementing it\ndef rand():\n  global seed\n  seed = (((seed * 1103515245) + 12345) &amp; 0x7FFFFFFF)\n\n  return seed\n</code></pre>\n\n<p>I also read that the rand function is between 0 and RAND_MAX, but can't find the value of RAND_MAX, if I found it maybe random.randrange() could be used.</p>\n\n<p>It can also be the way I set the seed since it seems in c++ a char works but in python I'm setting it to the value of the character.</p>\n\n<p>Here is what I observe when un-encrypting the file using the various methods. This is just the first 13 bytes, so if someone needs to check if it works it is possible to do so. </p>\n\n<pre><code>The block ends with the sequence: 4C 0A 54 C4 this means C4 is the seed\nExample encrypted:\n77 43 35 69 26 6B 0C 6E 3A 74 4B 33 71     wC5i&amp;k.n:tK3q\nExample un-encrypted using c++:\n24 43 6C 69 63 6B 49 6E 69 74 0A 33 34     $ClickInit.34\nExample un-encrypted using python example:\n1A 43 7E 69 77 6B 38 6E 0E 74 1A 33 3A     .C~iwk8n.t.3:\nExample un-encrypted using python implementation:\n3C 43 73 69 6E 6B 4A 6E 0E 74 1A 33 37     &lt;CsinkJn.t.37\n</code></pre>\n\n<p>I can also have something wrong in my python script, so here is the file in case it has any errors:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\n\ndef srand(s):\n  global seed\n  seed = s\n\ndef rand():\n    global seed\n    #Example code\n    #seed = (seed * 214013 + 2531011) % 2**64\n\n    #return (seed &gt;&gt; 16)&amp;0x7fff\n\n    #Implementation code\n    seed = (((seed * 1103515245) + 12345) &amp; 0x7FFFFFFF)\n\n    return seed\n\nKEY = ['K','F','4','Q','H','c','m','2']\nKEY_LEN = len(KEY) - 1\n\nfor filename in os.listdir(\".\"):\n    if filename.endswith(\".dat\"):\n        print(\"    Decoding \" + filename)\n\n        #open file\n        file = open(filename, \"rb\")\n\n        #set file attributes\n        file_length = os.path.getsize(filename)\n        file_buffer = [0] * file_length\n\n        #copy contents of file to array\n        for i in range(file_length):\n            file_buffer[i] = int.from_bytes(file.read(1), 'big')\n\n        #close file\n        file.close()\n\n        print(\"    Random Seed: \" + chr(file_buffer[-1]))\n\n        #set random generator seed\n        srand(file_buffer[-1])\n\n        #decrypt the file\n        for i in range(3600, file_length, 2):\n            file_buffer[i] ^= ord(KEY[rand() % KEY_LEN])\n\n        #print to check if output is un-encrypted\n        for i in range(3600, 3613, 1):\n            print(file_buffer[i])\n            print(chr(file_buffer[i]))\n\n        continue\n    else:\n        #Do not try to un-encrypt the python script\n        print(\"/!\\ Can't decode \" + filename)\n    continue\n</code></pre>\n\n<hr>\n\n<p>If anyone can help me figure this out I would be grateful, if possible I would love this to work in python but, from what I can gather, it seems like I will have to learn c++ to get it to work.</p>\n"}, {"tags": ["c++", "boost", "boost-test"], "comments": [{"owner": {"reputation": 1941, "user_id": 1641845, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4vbV6.png?s=128&g=1", "display_name": "namezero", "link": "https://stackoverflow.com/users/1641845/namezero"}, "edited": false, "score": 0, "creation_date": 1578944586, "post_id": 57789066, "comment_id": 105596795, "body": "Hi, did you ever find a solution to testing this? Though I don&#39;t know how this would be implemented, as each template might require different data. I&#39;m thinking about a fixture that is specialized with data."}], "owner": {"reputation": 86, "user_id": 2883580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e00f10fe75db800410e75850ebe678?s=128&d=identicon&r=PG&f=1", "display_name": "JulesW", "link": "https://stackoverflow.com/users/2883580/julesw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1567602330, "creation_date": 1567602330, "question_id": 57789066, "link": "https://stackoverflow.com/questions/57789066/boost-test-case-mixing-dataset-and-template", "title": "Boost test case mixing dataset and template", "body": "<p>I'm using boost.test for unit testing (currently using boost 1.71.0). I have a template class I would like to test with a dataset.</p>\n\n<p>I could only find ways to test on different template parameters (using <code>BOOST_AUTO_TEST_CASE_TEMPLATE</code>) or on a dataset (using <code>BOOST_DATA_TEST_CASE</code>). But i couldn't find a way to mix both template and dataset.</p>\n\n<p>Here is a MWE of what I achieved to do, and commented what I'm trying to do.</p>\n\n<p><code>test.cpp</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define BOOST_TEST_MODULE data_template\n#include &lt;boost/mpl/list.hpp&gt;\n#include &lt;boost/test/data/test_case.hpp&gt;\n#include &lt;boost/test/unit_test.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;list&gt;\n#include &lt;numeric&gt; // std::accumulate\n\ntemplate &lt;typename C&gt;\nstruct Testee{\n    C container;\n    typename C::value_type f(){\n        // just a dummy function to be tested\n        return std::accumulate(container.begin(),container.end(),0);\n    }\n};\n\ntypedef boost::mpl::list&lt;std::vector&lt;double&gt;, std::list&lt;double&gt;, std::vector&lt;size_t&gt;&gt; container_types;\n\ntemplate &lt;class T&gt; void test_containers(size_t size)\n{\n    Testee&lt;T&gt; t;\n    t.container = T(size,1);\n\n    BOOST_CHECK_EQUAL(t.f(), size);\n}\n\n// test on all container types but only with size=100 (3 test cases)\nBOOST_AUTO_TEST_CASE_TEMPLATE(test1, T, container_types)\n{\n    test_containers&lt;T&gt;(100);\n}\n\n// test with several container sizes but only for vector&lt;double&gt; (6 test cases)\nBOOST_DATA_TEST_CASE(test2, boost::unit_test::data::make({0, 1, 2, 10, 100, 1000}), size)\n{\n    test_containers&lt;std::vector&lt;double&gt;&gt;(size);\n}\n\n// What I'm looking for looks like:\n// // test for each combination of container type and size (6*3=18 test cases)\n// BOOST_DATA_TEST_CASE_TEMPLATE(test3, T, container_types, boost::unit_test::data::make({0, 1, 2, 10, 100, 1000}), size)\n// {\n//     test_containers&lt;T&gt;(size);\n// }\n</code></pre>\n\n<p><code>CMakeLists.txt</code>:</p>\n\n<pre><code>CMAKE_MINIMUM_REQUIRED( VERSION 3.5 )\nPROJECT(data_template_test\n    LANGUAGES CXX)\n\nset (CMAKE_CXX_FLAGS \"-std=c++17 -Wall ${CMAKE_CXX_FLAGS}\")\n\nfind_package(Boost 1.59 REQUIRED COMPONENTS unit_test_framework)\nadd_executable(${PROJECT_NAME} test.cpp)\ntarget_link_libraries(${PROJECT_NAME} Boost::unit_test_framework)\ntarget_compile_definitions(${PROJECT_NAME} PRIVATE BOOST_TEST_DYN_LINK)\n</code></pre>\n\n<p>The MWE produces 9 test cases that pass without errors, but I want the combination of all types with all sizes, so 3x6=18 test cases.\nIs there any way to do that using boost-test? Maybe using some more verbose / less friendly API?</p>\n\n<p>Thanks for helping!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1567602463, "post_id": 57789063, "comment_id": 102011364, "body": "You can also have <code>((((((((x)))))))) = ((((((5))))));</code>..."}, {"owner": {"reputation": 363, "user_id": 12019933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5680d9fb639c9df597b24a2855e634a3?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12019933/user"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1567602627, "post_id": 57789063, "comment_id": 102011459, "body": "@0x5453 I agree. Thanks"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567603030, "post_id": 57789063, "comment_id": 102011745, "body": "As for what <code>(x)</code> means, see: <a href=\"https://timsong-cpp.github.io/cppwp/expr.prim.paren\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/expr.prim.paren</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1567604935, "post_id": 57789063, "comment_id": 102012881, "body": "Someone was cleaning up their desk and found some spare parentheses."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567615864, "post_id": 57789063, "comment_id": 102018763, "body": "Heh, I only just realised the accepted answer over there is one of mine. Actually read it 3 hours ago and everything."}], "answers": [{"tags": [], "owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "is_accepted": false, "score": 1, "last_activity_date": 1567602996, "last_edit_date": 1567602996, "creation_date": 1567602630, "answer_id": 57789152, "question_id": 57789063, "link": "https://stackoverflow.com/questions/57789063/what-does-variable-mean-in-c/57789152#57789152", "title": "What does (variable) mean in c++?", "body": "<p><code>decltype(x)</code> inspects the type of <code>x</code> entity. But when you put <code>x</code> inside parentheses, <code>decltype</code> have rules for deducing types for these expressions:</p>\n\n<ul>\n<li>if the value category of <em>expression</em> is xvalue, then decltype yields\n<code>T&amp;&amp;</code>;</li>\n<li>if the value category of <em>expression</em> is lvalue, then decltype yields\n<code>T&amp;</code>;</li>\n<li>if the value category of <em>expression</em> is prvalue, then decltype yields\n<code>T</code>.</li>\n</ul>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/decltype\" rel=\"nofollow noreferrer\">source</a>.</p>\n"}], "owner": {"reputation": 363, "user_id": 12019933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5680d9fb639c9df597b24a2855e634a3?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/12019933/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1567602738, "answer_count": 1, "score": 1, "last_activity_date": 1567602996, "creation_date": 1567602307, "question_id": 57789063, "link": "https://stackoverflow.com/questions/57789063/what-does-variable-mean-in-c", "closed_reason": "Duplicate", "title": "What does (variable) mean in c++?", "body": "<p>In such case:</p>\n\n<pre><code>int x=0;\n(x)=5;\n</code></pre>\n\n<p>Why is <code>(x)</code> a valid lvalue (and <code>decltype((x))</code> gives <code>int&amp;</code>)?\nWhat do parentheses mean here? Is there any similar situation?</p>\n"}, {"tags": ["c++", "performance", "sparse-matrix", "eigen", "numerical-methods"], "comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1567663582, "post_id": 57788939, "comment_id": 102031050, "body": "The LDLT factorization will not change the input matrix, so your idea should be save (of course, you should run this once with a lot of extra assertions)."}, {"owner": {"reputation": 15, "user_id": 1066437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447b3a881ce6007f4a2331f98426b04f?s=128&d=identicon&r=PG", "display_name": "user1066437", "link": "https://stackoverflow.com/users/1066437/user1066437"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1567721128, "post_id": 57788939, "comment_id": 102058210, "body": "Thanks, that is a good point. If there are good ways of ensuring that the storage is not changed, forming an array of pointers would probably work..."}], "answers": [{"tags": [], "owner": {"reputation": 246, "user_id": 8953350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd8ef51578ef9559629d93f63e48a25?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie S", "link": "https://stackoverflow.com/users/8953350/charlie-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1569436237, "creation_date": 1569436237, "answer_id": 58104566, "question_id": 57788939, "link": "https://stackoverflow.com/questions/57788939/strategies-for-filling-an-eigen3-sparse-matrix-when-the-order-of-insertion-is-kn/58104566#58104566", "title": "Strategies for filling an Eigen3 sparse matrix when the order of insertion is known", "body": "<p>If the sparsity pattern of your matrix is not changing each time step, then you can directly change the values of the raw data array with <code>valuePtr()</code>. This is extremely simple and can be done in parallel if needed. If you can figure out how to do this in a linear fashion, i.e.</p>\n\n<pre><code>SparseMatrix&lt;double&gt; A;\n\nfor(int i = 0; i &lt; n; i++)\n   A.valuePtr()[i] = ...\n</code></pre>\n\n<p>then it will stupid fast (something to do with avoiding cache misses and other black magic). As for the previous comment that the LDLT factorization will not change, that is true from a theoretical standpoint. However, according to the Eigen documentation:</p>\n\n<p><em>\"In factorize(), the factors of the coefficient matrix are computed. <strong>This step should be called each time the values of the matrix change</strong>. However, the structural pattern of the matrix should not change between multiple calls.\"</em></p>\n\n<p><a href=\"https://eigen.tuxfamily.org/dox/group__TopicSparseSystems.html\" rel=\"nofollow noreferrer\">https://eigen.tuxfamily.org/dox/group__TopicSparseSystems.html</a></p>\n\n<p>I think this is because the factors are stored within the solver object, though I could be wrong. A test should be pretty easy to confirm one way or another. That said, I think you have to call <code>factorize()</code> after you change the values. Still though, you can save considerable time by only calling the <code>analyzePattern()</code> routine once.</p>\n"}], "owner": {"reputation": 15, "user_id": 1066437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447b3a881ce6007f4a2331f98426b04f?s=128&d=identicon&r=PG", "display_name": "user1066437", "link": "https://stackoverflow.com/users/1066437/user1066437"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 58104566, "answer_count": 1, "score": 0, "last_activity_date": 1569436237, "creation_date": 1567601905, "question_id": 57788939, "link": "https://stackoverflow.com/questions/57788939/strategies-for-filling-an-eigen3-sparse-matrix-when-the-order-of-insertion-is-kn", "title": "Strategies for filling an Eigen3 sparse matrix when the order of insertion is known", "body": "<p>So in my nonlinear finite element solver i use Eigen3 sparse matrices and the LDLT factorization. </p>\n\n<p>The thing is, this factorization needs to be performed many times during a dynamic simulation, and a lot of time is spent inserting the coefficients in the iteration matrix based on triplets (storage is reserved). </p>\n\n<p>Is there any good strategies on how to utilize the fact that the sparsity is unchanged and the order of insertions are the same? When forming this matrix, looping over the elements, coupligs etc. in the model, the order of insertion are the same at every time step during the simulation. </p>\n\n<p>Using coeffref increased simulation time with about 10x. </p>\n\n<p>I've been thinking of making a single pass of the model and forming pointers directly to the respective location in the coefficient matrix, but this seems a bit dangerous, especially since the LDLT factorisation is run in between.</p>\n"}, {"tags": ["c++", "arrays", "sorting", "visual-studio-2015"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1567601167, "post_id": 57788701, "comment_id": 102010656, "body": "how about <code>std::sort</code> ?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1567601305, "post_id": 57788701, "comment_id": 102010731, "body": "The cleanest would be to copy the content of array with <code>std::copy</code> and sort the copy with <code>std::sort</code>, but I&#39;m not sure how well is that working with winapi."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1567601540, "post_id": 57788701, "comment_id": 102010863, "body": "<code>std::partial_sort_copy()</code> can be used to copy and sort at the same time without modifying the original."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1567601570, "post_id": 57788701, "comment_id": 102010879, "body": "<code>ParamsCount = 3</code>? I would count 6 elements in array. but missing <code>{</code>."}, {"owner": {"reputation": 61, "user_id": 10662128, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153320694983177/picture?type=large", "display_name": "Steven Gibb", "link": "https://stackoverflow.com/users/10662128/steven-gibb"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567601801, "post_id": 57788701, "comment_id": 102011003, "body": "@Jarod42 - Typo on my part, thanks for pointing out.  Fixed!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1567602453, "post_id": 57788701, "comment_id": 102011357, "body": "Whenever you have a problem like this, your first step should be to browse through the list of algorithms provided by the standard library."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567602544, "post_id": 57788701, "comment_id": 102011418, "body": "@Yksisarvinen There really isn&#39;t any WinAPI here - granted, <code>TCHAR</code> is being used, but that&#39;s just either <code>char</code> or <code>wchar_t</code> so we&#39;re dealing with pure C-strings and wide C-strings"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567602499, "post_id": 57788967, "comment_id": 102011383, "body": "However, you&#39;ll also need to teach predicates since the array contains C-strings."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567602761, "post_id": 57788967, "comment_id": 102011557, "body": "@LightnessRacesinOrbit Or just tell OP to use <code>std::string</code> instead of whatever <code>TCHAR *</code> and <code>TEXT()</code> are. This is just to give him an idea of how to use the function. Adding a custom comparison function is left as an exercise for the reader."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1567603201, "post_id": 57788967, "comment_id": 102011852, "body": "Perhaps as a bonus, but as it currently stands this answer is insufficient for the question posed. When they apply this solution, they will get the wrong answer. You <i>could</i> leave the predicate as an exercise to the reader, but you should at least mention that the exercise exists."}, {"owner": {"reputation": 61, "user_id": 10662128, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153320694983177/picture?type=large", "display_name": "Steven Gibb", "link": "https://stackoverflow.com/users/10662128/steven-gibb"}, "edited": false, "score": 0, "creation_date": 1567676037, "post_id": 57788967, "comment_id": 102036889, "body": "@Shawn - &quot;Or just tell OP to use std::string instead of whatever TCHAR * and TEXT() are.&quot; No.  These can&#39;t be changed like that and must remain as they are."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1567602287, "last_edit_date": 1567602287, "creation_date": 1567601980, "answer_id": 57788967, "question_id": 57788701, "link": "https://stackoverflow.com/questions/57788701/how-can-i-use-c-to-sort-an-array-alphabetically-into-a-new-array/57788967#57788967", "title": "How can I use C++ to sort an array alphabetically into a new array?", "body": "<p>One way is to use <a href=\"https://en.cppreference.com/w/cpp/algorithm/partial_sort_copy\" rel=\"nofollow noreferrer\"><code>std::partial_sort_copy()</code></a> which, despite the name, can be used to sort a copy of an entire array without modifying the order of the original.</p>\n\n<p>Demonstration:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;class T, std::size_t N&gt;\nvoid print_array(const std::array&lt;T, N&gt; &amp;ar) {\n  for (const auto &amp;elem : ar) {\n    std::cout &lt;&lt; elem &lt;&lt; ' ';\n  }\n  std::cout &lt;&lt; '\\n';\n}\n\nint main() {\n  std::array&lt;int, 5&gt; orig = { 10, 8, 1, 4, 3 }, sorted;\n  std::partial_sort_copy(orig.begin(), orig.end(), sorted.begin(), sorted.end());\n  print_array(orig);\n  print_array(sorted);\n}\n</code></pre>\n\n<p>when compiled and run will print out</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>10 8 1 4 3 \n1 3 4 8 10 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1567602602, "post_id": 57789133, "comment_id": 102011446, "body": "<code>sizeof(strs) &#47; sizeof (char*)</code> Whoops. This is wrong because your array now has <code>std::string</code>s. Use <code>std::size</code> to avoid such mistakes."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1567602631, "post_id": 57789133, "comment_id": 102011462, "body": "Also populating a tree (map) is nowhere near as fast as a contiguous vector that&#39;s been constructed in a sorted manner"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567602657, "post_id": 57789133, "comment_id": 102011480, "body": "Also you&#39;d use <code>copy</code> with an insert_iterator, not an old loop like this"}, {"owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567603694, "post_id": 57789133, "comment_id": 102012123, "body": "@LightnessRacesinOrbit Populating a map is fast enough when there are repetitions. Usual case for text information, sorting words in the text."}, {"owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567689503, "post_id": 57789133, "comment_id": 102044394, "body": "copy does not fit the requirements of counting repetitions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567689609, "post_id": 57789133, "comment_id": 102044485, "body": "This is the first I&#39;ve heard of such a requirement. Can you go into more detail?"}, {"owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567693651, "post_id": 57789133, "comment_id": 102046955, "body": "Repetition is a very normal thing when taking the words from any real text."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567697916, "post_id": 57789133, "comment_id": 102049333, "body": "That does not address my comment, nor clarify yours. What does &quot;counting repetitions&quot; have to do with this question? And why does it mean <code>copy</code> (actually we&#39;re suggesting <code>partial_sort_copy</code>) does not satisfy the OP&#39;s needs?"}, {"owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567705028, "post_id": 57789133, "comment_id": 102052437, "body": "Ok. In this case, let&#39;s take a look at &quot;tree (map) is nowhere near as fast as a contiguous vector that&#39;s been constructed in a sorted manner&quot;. In which way exactly? The partial_sort_copy creates a tree inside and after that sorts it, ok, it is contiguous. How a binary tree is faster than a binary tree(contiguous)?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567705485, "post_id": 57789133, "comment_id": 102052589, "body": "Where/when does <code>partial_sort_copy</code> create a tree structure? It takes input from a contiguous block of bytes, and puts its output into a contiguous block of bytes."}, {"owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567706028, "post_id": 57789133, "comment_id": 102052821, "body": "Inside implementation, it does two steps make_heap(!!) and sort_heap _Partial_sort_copy() { _RanIt _Mid2 = _First2; for (; _First1 != _Last1 &amp;&amp; _Mid2 != _Last2; ++_First1, ++_Mid2) <i>_Mid2 = *_First1; make_heap(_First2, _Mid2, _Pred);  for (; _First1 != _Last1; ++_First1) if (_DEBUG_LT_PRED(_Pred, *_First1, *_First2)) _Adjust_heap(_First2, _Diff(0), _Diff(_Mid2 - _First2), _Ty(</i>_First1), _Pred);  sort_heap(_First2, _Mid2, _Pred); return (_Mid2); }"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567764960, "post_id": 57789133, "comment_id": 102070373, "body": "Look up the word &quot;contiguous&quot;. Then research cache efficiency. Also this algorithm can do &quot;tree things&quot; more intelligently than copying into a map one at a time, which must do tree rebalances etc in a general manner with no knowledge of what the final result will be"}, {"owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567771133, "post_id": 57789133, "comment_id": 102073180, "body": "What is so magic in the word &quot;contiguous&quot; when there is no intention to access elements by index? The index in a tree is meaningless, no matter if is contiguous or not. So, why a binary tree is nowhere faster than a binary tree?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1567772597, "post_id": 57789133, "comment_id": 102073977, "body": "Like I said, go look up cache efficiency. Your map has <i>loads of indirection</i>. The vector has none (once you&#39;ve dereferenced the one pointer-to-buffer)"}, {"owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568047732, "post_id": 57789133, "comment_id": 102142486, "body": "So? But there is no need to insert twice inserting the same element in case of repetitions. When traversing the contiguous tree, you should do more calculation on indexing. Also more calculations for building it."}], "tags": [], "owner": {"reputation": 1152, "user_id": 4582948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041736225840403/picture?type=large", "display_name": "armagedescu", "link": "https://stackoverflow.com/users/4582948/armagedescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1567602672, "last_edit_date": 1567602672, "creation_date": 1567602570, "answer_id": 57789133, "question_id": 57788701, "link": "https://stackoverflow.com/questions/57788701/how-can-i-use-c-to-sort-an-array-alphabetically-into-a-new-array/57789133#57789133", "title": "How can I use C++ to sort an array alphabetically into a new array?", "body": "<p>I would collect into a map, this is a simple and fast way</p>\n\n<pre><code>//initial data\nstring strs[] = {\"value1\", \"value2\", \"hello\", \"value1\", \"hello\"};\n//collect\nfor (int i = 0; i &lt; sizeof(strs) / sizeof (string); i++)\n    mp[strs[i]]++;\n</code></pre>\n\n<p>There is how I get sorted data in a vector of strings</p>\n\n<pre><code>//get sorted\nvector&lt;string&gt; vstr;\nfor (map&lt;string, int&gt;::iterator it = mp.begin(); it != mp.end(); it++)\n    for (int i = 0; i &lt; it-&gt;second; i++)\n        vstr.push_back(it-&gt;first);\n</code></pre>\n\n<p>This is that you need to include</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10662128, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153320694983177/picture?type=large", "display_name": "Steven Gibb", "link": "https://stackoverflow.com/users/10662128/steven-gibb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1567602672, "creation_date": 1567601133, "last_edit_date": 1567601725, "question_id": 57788701, "link": "https://stackoverflow.com/questions/57788701/how-can-i-use-c-to-sort-an-array-alphabetically-into-a-new-array", "title": "How can I use C++ to sort an array alphabetically into a new array?", "body": "<p>I have an array called <em>g_Parameters</em> that I am looking to sort alphabetically in a new array called <em>g_SortedParameters</em>.</p>\n\n<p>I have provided the code for the array.  I need to sort it alphabetically to use in a log, but without <em>g_Parameters</em> itself being sorted alphabetically as other code relies on the indexing as it stands.     </p>\n\n<pre><code>const unsigned long ParamsCount = 6;\nconst TCHAR * const g_Parameters[ParamsCount] =\n{ TEXT(\"AllowFatal\"), TEXT(\"Variant\"), TEXT(\"EnableLogs\"),\n  TEXT(\"AllowRescan\"), TEXT(\"Path\"), TEXT(\"Filter\"),\n};\n</code></pre>\n\n<p>I would appreciate any help with sorting this array into a new array. I'm happy to provide more information if it is required.  </p>\n"}, {"tags": ["c++", "ios", "qt"], "comments": [{"owner": {"reputation": 1779, "user_id": 4899818, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qryDVrx3kqw/AAAAAAAAAAI/AAAAAAAAADw/9njsX-dGfOI/photo.jpg?sz=128", "display_name": "William Chong", "link": "https://stackoverflow.com/users/4899818/william-chong"}, "edited": false, "score": 0, "creation_date": 1567601109, "post_id": 57788507, "comment_id": 102010627, "body": "Does putting them onto iCloud fits your usecase?"}, {"owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "reply_to_user": {"reputation": 1779, "user_id": 4899818, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qryDVrx3kqw/AAAAAAAAAAI/AAAAAAAAADw/9njsX-dGfOI/photo.jpg?sz=128", "display_name": "William Chong", "link": "https://stackoverflow.com/users/4899818/william-chong"}, "edited": false, "score": 0, "creation_date": 1567608661, "post_id": 57788507, "comment_id": 102015121, "body": "Not really. I just need to save a configuration file in a place, where I can manually edit it using any text editor."}], "answers": [{"tags": [], "owner": {"reputation": 11084, "user_id": 2166050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc047b125ce1d69a0b57efab23a8fdf1?s=128&d=identicon&r=PG&f=1", "display_name": "User123335511231", "link": "https://stackoverflow.com/users/2166050/user123335511231"}, "is_accepted": false, "score": 0, "last_activity_date": 1567600969, "creation_date": 1567600969, "answer_id": 57788653, "question_id": 57788507, "link": "https://stackoverflow.com/questions/57788507/an-accesible-directory-on-ios/57788653#57788653", "title": "An accesible directory on iOS", "body": "<p>From your iOS app you can only see the files in that app, not others. This is the way iOS OS was build for security reasons.</p>\n\n<p>Might be done maybe on Jailbroken devices</p>\n"}, {"tags": [], "owner": {"reputation": 94591, "user_id": 3418066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/De72L.jpg?s=128&g=1", "display_name": "Paulw11", "link": "https://stackoverflow.com/users/3418066/paulw11"}, "is_accepted": false, "score": 0, "last_activity_date": 1567603168, "creation_date": 1567603168, "answer_id": 57789301, "question_id": 57788507, "link": "https://stackoverflow.com/questions/57788507/an-accesible-directory-on-ios/57789301#57789301", "title": "An accesible directory on iOS", "body": "<p>There is nowhere within your app's own file structure that is accessible to other apps due to iOS sandboxing. </p>\n\n<p>You can use <a href=\"https://developer.apple.com/documentation/uikit/uidocumentpickerviewcontroller\" rel=\"nofollow noreferrer\"><code>UIDocumentPickerViewController</code></a> to export a file from your app directly to a file provider location such as iCloud, OneDrive, Dropbox or any other file provider that the user has installed on their device. </p>\n"}], "owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572103554, "creation_date": 1567600427, "last_edit_date": 1572103554, "question_id": 57788507, "link": "https://stackoverflow.com/questions/57788507/an-accesible-directory-on-ios", "title": "An accesible directory on iOS", "body": "<p>I am developing Qt based iOS application. Currently I am trying to save a file from within the application in a place, where I will be able to access it from other applications, such as file explorers. At first I used:</p>\n\n<pre><code>QStandardPaths::writableLocation(QStandardPaths::DownloadLocation);\n</code></pre>\n\n<p>just for testing purposes. I was surprised that the path obtained was:</p>\n\n<pre><code>/var/mobile/Containers/Data/Application/4FDF6B25-8197-469B-ADE7-A1A1FD181D0F/Documents/Downloads/\n</code></pre>\n\n<p>I have no possibility to access this location from another app.\nThe iOS file exploring capability is quite limited. Is there any real way of accomplishing this?</p>\n"}, {"tags": ["c++", "dictionary", "find"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 6, "creation_date": 1567598315, "post_id": 57787918, "comment_id": 102009114, "body": "What is the compilation error? And have you tried looking at suitable <a href=\"https://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\">reference documentation</a> to check what map&#39;s <code>value_type</code> is?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1567598478, "post_id": 57787918, "comment_id": 102009213, "body": "<code>map&lt;&lt;int,int&gt;::iterator it;</code> remove one of those <code>&lt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 11353589, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rg4dc8b1N_0/AAAAAAAAAAI/AAAAAAAAAYA/Zus2hEsQl5A/photo.jpg?sz=128", "display_name": "Filip", "link": "https://stackoverflow.com/users/11353589/filip"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1569347277, "post_id": 57788020, "comment_id": 102565199, "body": "I&#39;m sorry for troubleing the ones that help. I see my question has 3 downvotes and I don&#39;t know why. It was my first question and a legitimate issue, as I saw it, but obviously it bothered some. This downvote with no reasons made me feel bullied... I wish it could be more friendly... Sorry if this is off topic. Hopefully, this comment will be useful in the future..."}], "tags": [], "owner": {"reputation": 85, "user_id": 11353589, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rg4dc8b1N_0/AAAAAAAAAAI/AAAAAAAAAYA/Zus2hEsQl5A/photo.jpg?sz=128", "display_name": "Filip", "link": "https://stackoverflow.com/users/11353589/filip"}, "is_accepted": true, "score": 3, "last_activity_date": 1567598627, "creation_date": 1567598627, "answer_id": 57788020, "question_id": 57787918, "link": "https://stackoverflow.com/questions/57787918/what-is-the-iterator-for-a-mapint-int-its-not-pairint-int/57788020#57788020", "title": "What is the *iterator for a map&lt;int,int&gt;? It&#39;s not pair&lt;int,int&gt;", "body": "<p>Got it. The *iterator it's</p>\n\n<pre><code>pair&lt;const int, int&gt;\n</code></pre>\n\n<p>and not </p>\n\n<pre><code>par&lt;int,int&gt;\n</code></pre>\n\n<p>because the key element must be const in the map. Now it works.</p>\n"}], "owner": {"reputation": 85, "user_id": 11353589, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rg4dc8b1N_0/AAAAAAAAAAI/AAAAAAAAAYA/Zus2hEsQl5A/photo.jpg?sz=128", "display_name": "Filip", "link": "https://stackoverflow.com/users/11353589/filip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 57788020, "answer_count": 1, "score": -3, "last_activity_date": 1567625651, "creation_date": 1567598228, "last_edit_date": 1567598789, "question_id": 57787918, "link": "https://stackoverflow.com/questions/57787918/what-is-the-iterator-for-a-mapint-int-its-not-pairint-int", "title": "What is the *iterator for a map&lt;int,int&gt;? It&#39;s not pair&lt;int,int&gt;", "body": "<p>I'm testing the STL find algorithm. And I reached the maps containers. However, map has its own method (map_name.find(key)). Even so, the generic find function should work, if a pair is provided as element to find. But it doesn't work.</p>\n\n<p>I tried finding a pair of the elements in the map, but it doesn't work. I tried finding a *iterator and it works. So... that means *iterator is not a pair?!</p>\n\n<pre><code>map&lt;int,int&gt; m = {{0,1}, {1,2}, {2,3}};\nmap&lt;int,int&gt;::iterator it;\npair&lt;int,int&gt; p = make_pair(0,1);\n//this returns compilation error\n//it = find(m.begin(), m.end(), p);\n//this works fine\nit = find(m.begin(), m.end(), *m.begin());\ncout &lt;&lt; it-&gt;first &lt;&lt; ' ' &lt;&lt; it-&gt;second &lt;&lt; endl; //prints 0 1\n</code></pre>\n\n<p>I would have expected 0 1 in both cases, but it seems that the deferenced map::iterator it is not a pair. Than what is it?</p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1567598279, "post_id": 57787666, "comment_id": 102009090, "body": "the standard library can do things that are otherwise illegal in user code, so I would say yes, it is possible for the standard library to implement such a construct, even if it were illegal otherwise. Don&#39;t quote me though."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1567598519, "post_id": 57787666, "comment_id": 102009235, "body": "@bolov: issue is user&#39;s <b>usage</b>. class definition is trivial and doesn&#39;t have issue. but once in <code>std</code>, that imposes extra restriction to user (as no specialization unless allowed)."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567598564, "post_id": 57787666, "comment_id": 102009254, "body": "@Jarod42 god, C++ can be have such dark corners..."}], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1567598512, "post_id": 57787933, "comment_id": 102009230, "body": "This is such an out-of-the-box state-of-the-art solution, that I was afraid to upvote it. Got over it though. So +1 from me."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1567598652, "post_id": 57787933, "comment_id": 102009304, "body": "Does it really require C++20? Won&#39;t something like <code>std::_UglyTypeWeCannotTouch</code> will do?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1567598893, "post_id": 57787933, "comment_id": 102009439, "body": "@StoryTeller: Could be, but not sure that a type like that doesn&#39;t break requirement <i>&quot;without core language changes&quot;</i>."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1567598960, "post_id": 57787933, "comment_id": 102009483, "body": "@Jarod42 how about <code>template &lt;&gt; struct always_false&lt;&#47;* implementation defined *&#47;&gt; : std::true_type{};</code> aka unspecified and hidden, not special otherwise."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1567599100, "post_id": 57787933, "comment_id": 102009550, "body": "What bolov said. That&#39;s what those <code>_Identifiers</code> are for after all."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1567599765, "post_id": 57787933, "comment_id": 102009915, "body": "@StoryTeller it was your idea. If you feel like it do the honors with an answer."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 14, "last_activity_date": 1567598502, "last_edit_date": 1567598502, "creation_date": 1567598294, "answer_id": 57787933, "question_id": 57787666, "link": "https://stackoverflow.com/questions/57787666/is-it-possible-to-implement-always-false-in-the-c-standard-library/57787933#57787933", "title": "Is it possible to implement always_false in the C++ standard library?", "body": "<p>In C++20, with lambda, you might do something like:</p>\n\n<pre><code>template &lt;class... T&gt; struct always_false : std::false_type {};\n\n// To have true, but for a type that user code can't reuse as lambda types are unique.\ntemplate &lt;&gt; struct always_false&lt;decltype([](){})&gt; : std::true_type{};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567603891, "post_id": 57788465, "comment_id": 102012243, "body": "Accepting this solution because it is more encompassing (and I guess more standard-like)."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 12, "last_activity_date": 1567600277, "creation_date": 1567600277, "answer_id": 57788465, "question_id": 57787666, "link": "https://stackoverflow.com/questions/57787666/is-it-possible-to-implement-always-false-in-the-c-standard-library/57788465#57788465", "title": "Is it possible to implement always_false in the C++ standard library?", "body": "<p>To paraphrase Jarod's idea, It could be something like</p>\n\n<pre><code>template &lt;class... T&gt; struct always_false : std::false_type {};\n\ntemplate &lt;&gt; struct always_false&lt;/* implementation defined */&gt; : std::true_type{};\n</code></pre>\n\n<p>Where <code>/* implementation defined */</code> can be filled by <code>std::_ReservedIdentifer</code>. User code can't access it, since the identifier is reserved to the library, but there exists a specialization that is <code>true</code>. That should avoid questions about the ODR and lambdas in specializations.</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1607101437, "post_id": 65145940, "comment_id": 115175340, "body": "<code>-fdelayed-template-parsing</code> is an option of some compilers to enable non-standard behavior. But my question is about a theoretical addition to the standard library while keeping standard-compliant behavior. It&#39;s not even related to compilers."}], "tags": [], "owner": {"reputation": 13, "user_id": 14761211, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZA5i6IQQE7M/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmcL51t4XlatS0TdBLZ64X-AAbrIQ/photo.jpg?sz=128", "display_name": "\u5434\u5e26\u7237", "link": "https://stackoverflow.com/users/14761211/%e5%90%b4%e5%b8%a6%e7%88%b7"}, "is_accepted": false, "score": -4, "last_activity_date": 1607094384, "creation_date": 1607094384, "answer_id": 65145940, "question_id": 57787666, "link": "https://stackoverflow.com/questions/57787666/is-it-possible-to-implement-always-false-in-the-c-standard-library/65145940#65145940", "title": "Is it possible to implement always_false in the C++ standard library?", "body": "<p>just use option <code>-fdelayed-template-parsing</code></p>\n"}], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 6, "accepted_answer_id": 57788465, "answer_count": 3, "score": 17, "last_activity_date": 1607094384, "creation_date": 1567597378, "last_edit_date": 1592644375, "question_id": 57787666, "link": "https://stackoverflow.com/questions/57787666/is-it-possible-to-implement-always-false-in-the-c-standard-library", "title": "Is it possible to implement always_false in the C++ standard library?", "body": "<p>There are cases where one uses an <code>always_false</code> helper to e.g. cause unconditional <code>static_assert</code> failure if instantiation of some template is attempted:</p>\n<pre><code>template &lt;class... T&gt; struct always_false : std::false_type {};\n\ntemplate&lt;class T&gt;\nstruct UsingThisShouldBeAnError {\n  static_assert(always_false&lt;T&gt;::value, &quot;You should not use this!&quot;);\n};\n</code></pre>\n<p>This helper is necessary because a template definition must (at least theoretically) have at least one set of template parameters for which a valid specialization can be produced in order for the program to be well-formed:</p>\n<blockquote>\n<p><a href=\"http://eel.is/c++draft/temp.res#8\" rel=\"noreferrer\">[temp.res]/8</a>: The program is ill-formed, no diagnostic required, if:</p>\n<ul>\n<li>no valid specialization can be generated for a template [...] and the template is not instantiated, or</li>\n</ul>\n<p>[...]</p>\n</blockquote>\n<p>(Writing <code>static_assert(false, &quot;You should not use this!&quot;);</code> above would thus be ill-formed and a compiler could always fire the static assert, even without the template being instantiated, which is not the intention.)</p>\n<p>Here is a quick sampling of questions involving this pattern (including further explanation):</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/34745581/forbids-functions-with-static-assert\">Forbids functions with `static_assert`</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/42913556/are-static-asserts-to-be-evaluated-if-a-member-template-isnt-instantiated/42913797#42913797\">Are static_asserts to be evaluated if a member template isn&#39;t instantiated?</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/29468724/conditional-compilation-of-templates\">Conditional compilation of templates</a></p>\n</li>\n</ul>\n<p>It might be useful to have <code>always_false</code> as a tool in the standard library so we don't have to constantly write it again. However, the answer to the following question makes me wonder whether this is even possible:</p>\n<p><a href=\"https://stackoverflow.com/questions/57783393/dependent-non-type-parameter-packs-what-does-the-standard-say/57785778\">Dependent non-type parameter packs: what does the standard say?</a></p>\n<p>There the argument is made (also with respect to [temp.res]/8) that <code>std::enable_if_t&lt;T&gt;</code> is always either <code>void</code> or not a type and that it is illegal for anyone to specialize it further. Therefore, a template that relies on the theoretical &quot;specializability&quot; of <code>std::enable_if</code> to avoid the [temp.res]/8 clause actually causes the program to be ill-formed, no diagnostic required.</p>\n<p>Coming back to my question: If the standard provided <code>always_false</code>, it would have to forbid library users from specializing it as usual (for obvious reasons). But by the above reasoning, that would defeat the whole point of <code>always_false</code> (namely that it could theoretically be specialized to something other than <code>std::false_type</code>) - with respect to [temp.res]/8 it would be the same as using <code>std::false_type</code> directly.</p>\n<p><strong>Am I wrong in this reasoning?</strong> Or is it actually impossible for the standard library to provide <code>always_false</code> in a meaningful/useful way (without core language changes)?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1567596606, "post_id": 57787434, "comment_id": 102008186, "body": "random numbers have some very well defined properties, eg the follow a certain distribution, and there are important measures for quality of randomness. Even if you would get numbers that appear to be random in this way, they are practically useless as pseudo random numbers"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 4, "creation_date": 1567596626, "post_id": 57787434, "comment_id": 102008198, "body": "How could dividing numbers possibly get you a random number?"}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 3, "creation_date": 1567596672, "post_id": 57787434, "comment_id": 102008217, "body": "More important: how do you expect this code to give different result each time you launch it? Your code is fully deterministic. I think you confuse accuracy with randomness. These are completely different things."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1567596841, "post_id": 57787434, "comment_id": 102008320, "body": "So this would be something between a duplicate of <a href=\"https://stackoverflow.com/q/13445688/69809\">How to get a random number in C++</a> and and <a href=\"https://stackoverflow.com/q/588004/69809\">Is floating point math broken</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1567596880, "post_id": 57787434, "comment_id": 102008343, "body": "If your system uses <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE754</a> (very likely) then double-precision floating point numbers only have a little under 16 decimal digits of precision. Anything more than that won&#39;t give accurate results."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1567597212, "post_id": 57787434, "comment_id": 102008488, "body": "It seems like you are looking for math correct pseoudo-random number generator. Check <a href=\"https://en.wikipedia.org/wiki/List_of_random_number_generators\" rel=\"nofollow noreferrer\">List of random number generators</a>. And check for the <a href=\"https://en.wikipedia.org/wiki/Permuted_congruential_generator\" rel=\"nofollow noreferrer\">PCG</a>"}], "answers": [{"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 8, "last_activity_date": 1567598716, "last_edit_date": 1567598716, "creation_date": 1567596722, "answer_id": 57787489, "question_id": 57787434, "link": "https://stackoverflow.com/questions/57787434/too-much-accuracy-in-double/57787489#57787489", "title": "Too much accuracy in double", "body": "<p>You are misunderstanding what floating point accuracy means. It means that the value stored in a floating point variable (<code>float</code> or <code>double</code>) is not necessary exactly the same value as mathematically assigned/computed. This happens because not all mathematical real numbers can be represented in a floating point type.</p>\n\n<p>It does not mean you will get different results when you perform the same instructions on the same values on the same build on the same machine.</p>\n\n<p>For instance the integer value <code>16,777,217</code> cannot be represented in IEE 754 float. So in</p>\n\n<pre><code>float a = 16'777'217;\n</code></pre>\n\n<p><code>a</code> will be \"inaccurate\" in the sense that it is not <code>16'777'217</code>, but it will always have the same \"inaccuracy\".</p>\n\n<hr>\n\n<blockquote>\n  <p>I need to get a random value</p>\n</blockquote>\n\n<p>Then use the C++11 random library.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1567598202, "last_edit_date": 1567598202, "creation_date": 1567597081, "answer_id": 57787580, "question_id": 57787434, "link": "https://stackoverflow.com/questions/57787434/too-much-accuracy-in-double/57787580#57787580", "title": "Too much accuracy in double", "body": "<p>There is no inaccuracy and therefore no randomness.</p>\n\n<p>Just like the integers are an approximation for real numbers, the same can be said for floating point numbers. The distribution of floating point numbers across the reals is even in logarithmic space in the same way that the distribution of integers is even in real space.</p>\n\n<p>When you write a number like <code>1.234</code> and assign that to a <code>double</code>, the <em>closest</em> <code>double</code> to <code>1.234</code> is picked. This is different to assigning that to an <code>int</code> where the nearest <code>int</code> towards 0 is picked. But the <em>principle</em> is the same.</p>\n\n<p>When you compute <code>nump / 10;</code>, floating point standards (e.g. IEEE754) often require that the closest <code>double</code> to the result is picked.</p>\n\n<p>If you need pseudo-random numbers then use appropriate functions that are part of the C++ standard library.</p>\n\n<p>If you want <em>true</em> random numbers, and are very rich, then you can acquire some hardware for generating them, else you can use someone else's hardware: e.g. <a href=\"https://qrng.anu.edu.au/\" rel=\"nofollow noreferrer\">https://qrng.anu.edu.au/</a></p>\n"}], "owner": {"reputation": 129, "user_id": 11363114, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MdKmgvHTDvc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relSlxQtXA8nsik_33aMcVEygGXIQ/mo/photo.jpg?sz=128", "display_name": "\u042f\u0440\u0438\u0433\u0430 \u041e\u043b\u0435\u0433", "link": "https://stackoverflow.com/users/11363114/%d0%af%d1%80%d0%b8%d0%b3%d0%b0-%d0%9e%d0%bb%d0%b5%d0%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 57787489, "answer_count": 2, "score": -2, "last_activity_date": 1567598716, "creation_date": 1567596465, "question_id": 57787434, "link": "https://stackoverflow.com/questions/57787434/too-much-accuracy-in-double", "title": "Too much accuracy in double", "body": "<p>I need to get a random value, after lots of operations. I see, that if I write, e.g. 1000000 and divide it to 10 for 100 times, I should get an almost random number.</p>\n\n<pre><code>double nump = 1000000000;\ncout.precision(45);\nfor (int i = 1; i &lt;= 100; i++) {\n    nump = nump / 10;\n}\ncout &lt;&lt; nump;\n</code></pre>\n\n<p>But if I launch this code, I get every time the similar numbers. Where is inaccuracy which have machines? Why is this so accuracy? How to make such a calculation, that will lead to big inaccuracy?</p>\n"}, {"tags": ["c++", "dll", "cmake"], "comments": [{"owner": {"reputation": 3029, "user_id": 1060004, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZOBMa.jpg?s=128&g=1", "display_name": "ustulation", "link": "https://stackoverflow.com/users/1060004/ustulation"}, "edited": false, "score": 0, "creation_date": 1567596617, "post_id": 57787421, "comment_id": 102008192, "body": "<code>add_library(bar SHARED&#47;STATIC IMPORTED)</code> ? Check <a href=\"https://stackoverflow.com/questions/28597351/how-do-i-add-a-library-path-in-cmake\" title=\"how do i add a library path in cmake\">stackoverflow.com/questions/28597351/&hellip;</a>"}, {"owner": {"reputation": 253, "user_id": 7929898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1db971e351da0ecaf7f654df9952c1a?s=128&d=identicon&r=PG", "display_name": "shaman888", "link": "https://stackoverflow.com/users/7929898/shaman888"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1567678892, "post_id": 57787421, "comment_id": 102038373, "body": "@Tsyvarev mylib.so is not anydll.dll. Functionally, it is indeed a duplicate, but from the point of view of the text, these are different issues. I believe that this issue should remain so that it can be found in the search."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1567683768, "post_id": 57787421, "comment_id": 102041093, "body": "&quot;but from the point of view of the text, these are different issues.&quot; - Whatever <i>static</i> or <i>shared</i>, Linux (<code>.so</code>) or Windows (<code>.dll</code>), <code>any_dll.dll</code> is an <b>external library</b> for your CMake project, so the duplicate question has been chosen correctly. &quot;I believe that this issue should remain so that it can be found in the search.&quot; - <i>Duplicate</i> status by no means marks the question as &quot;bad&quot; or &quot;should be deleted&quot;. If someone will find your question useful, he/she still able to upvote it. The only thing which is disabled by <i>duplicate</i> status is adding (new) answers for the question."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1567684300, "post_id": 57787421, "comment_id": 102041400, "body": "BTW, the banner &quot;This question already has an answer here&quot; and its reference are tied to the question post while it is in a <i>duplicate</i> status. So there is no needs to repeat reference to the duplicate question in the question post itself. (You may include the reference to other question post if it helps to <b>understand</b> your <b>question</b>, but I see no reason for it in your case. Note, that &quot;understand a question&quot; doesn&#39;t mean &quot;understand how to <i>resolve</i> it&quot;. On Stack Overflow we don&#39;t mix a problems and their possible resolutions in the question post.)"}], "answers": [{"tags": [], "owner": {"reputation": 310, "user_id": 11993393, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SNO8PIrqOAI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcsyJAMPFkchG18HhDZtDnEvSSk-A/photo.jpg?sz=128", "display_name": "IIRistoII", "link": "https://stackoverflow.com/users/11993393/iiristoii"}, "is_accepted": true, "score": 1, "last_activity_date": 1567597981, "last_edit_date": 1567597981, "creation_date": 1567597333, "answer_id": 57787652, "question_id": 57787421, "link": "https://stackoverflow.com/questions/57787421/how-to-link-any-dll-to-cmake-project/57787652#57787652", "title": "How to link any DLL to Cmake project", "body": "<p>If CMake does not now a target (i.e. it is not build by CMake) it assumes it to be a prebuild library.</p>\n\n<pre><code>link_directories(\n  \"C:/Program Files/program\"\n)\n\nadd_executable(${PROJECT_NAME} \"main.cpp\")\n\ntarget_link_libraries(${PROJECT_NAME}\n  any_dll\n)\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 7929898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1db971e351da0ecaf7f654df9952c1a?s=128&d=identicon&r=PG", "display_name": "shaman888", "link": "https://stackoverflow.com/users/7929898/shaman888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1567599142, "accepted_answer_id": 57787652, "answer_count": 1, "score": 0, "last_activity_date": 1567684576, "creation_date": 1567596415, "last_edit_date": 1567684576, "question_id": 57787421, "link": "https://stackoverflow.com/questions/57787421/how-to-link-any-dll-to-cmake-project", "closed_reason": "Duplicate", "title": "How to link any DLL to Cmake project", "body": "<p>Is job in qmake:</p>\n\n<pre><code>LIBS+= -L\"C:\\Program Files\\program\\any_dll.dll\"\n</code></pre>\n\n<p>How to in cmake?</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nproject(my_project)\n\nadd_executable(${PROJECT_NAME} \"main.cpp\")\n</code></pre>\n"}, {"tags": ["c++", "freertos"], "comments": [{"owner": {"reputation": 751, "user_id": 5552166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8941926688c6212b73aa67cbb2c70428?s=128&d=identicon&r=PG&f=1", "display_name": "hessam hedieh", "link": "https://stackoverflow.com/users/5552166/hessam-hedieh"}, "edited": false, "score": 1, "creation_date": 1567596541, "post_id": 57787406, "comment_id": 102008154, "body": "What is that extra <code>GPIO_PinWrite</code> in line 6 of <code>vOnOff</code>? remove that and u shall be fine"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 751, "user_id": 5552166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8941926688c6212b73aa67cbb2c70428?s=128&d=identicon&r=PG&f=1", "display_name": "hessam hedieh", "link": "https://stackoverflow.com/users/5552166/hessam-hedieh"}, "edited": false, "score": 0, "creation_date": 1567596742, "post_id": 57787406, "comment_id": 102008257, "body": "good question i think i copied something wrong i did remove that still get the same errors"}, {"owner": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 1, "creation_date": 1567596915, "post_id": 57787406, "comment_id": 102008362, "body": "I got no idea of the subject but I know a little C++. What strikes me is that led and led_pin are not declared anywhere. I think this could also explain the error."}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "edited": false, "score": 0, "creation_date": 1567597012, "post_id": 57787406, "comment_id": 102008394, "body": "they are but i forget them to add to the question sorry"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1567597164, "post_id": 57787406, "comment_id": 102008465, "body": "@Marc Roelse What is it PRINTF(&quot;Hello led\\n&quot;);? Is it a macro?"}, {"owner": {"reputation": 751, "user_id": 5552166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8941926688c6212b73aa67cbb2c70428?s=128&d=identicon&r=PG&f=1", "display_name": "hessam hedieh", "link": "https://stackoverflow.com/users/5552166/hessam-hedieh"}, "edited": false, "score": 0, "creation_date": 1567597171, "post_id": 57787406, "comment_id": 102008472, "body": "I scanned the code it seems to be ok, the problem shall exist in other parts, a missing <code>,</code> probably, re read the code and try to find it"}, {"owner": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 0, "creation_date": 1567597202, "post_id": 57787406, "comment_id": 102008482, "body": "Ok. I guess they are not defined correctly. Do you know where e.g. SEMC_D12 comes from? Are you sure this should not be a string, i.e. &quot;SEMC_D12&quot;? Or did you miss an import that defines what SEMC_D12 is?"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1567597268, "post_id": 57787406, "comment_id": 102008521, "body": "@VladfromMoscow that is for my log/putty file so i can see it got into the correct task"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 0, "creation_date": 1567597323, "post_id": 57787406, "comment_id": 102008549, "body": "@ErikNellessen it comes from my pin.map that is in FreeRTOS i tryed to comment this task and run it then it works so i don&#39;t think it is an problem with that and i tryed when you say to make it an string and then i get the same amount of errors"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 751, "user_id": 5552166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8941926688c6212b73aa67cbb2c70428?s=128&d=identicon&r=PG&f=1", "display_name": "hessam hedieh", "link": "https://stackoverflow.com/users/5552166/hessam-hedieh"}, "edited": false, "score": 0, "creation_date": 1567597357, "post_id": 57787406, "comment_id": 102008567, "body": "@hessamhedieh the perculier thing is when i comment the task my code works"}, {"owner": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 0, "creation_date": 1567597527, "post_id": 57787406, "comment_id": 102008670, "body": "From my point of view the error message still says that there is something wrong with either led or led_pin. What data structures do they represent? If they represent just Integers or Strings, could you try pasting the values directly, i.e. do something like GPIO_PinWrite(1, 2, 0u); and see if that works?"}, {"owner": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 0, "creation_date": 1567597557, "post_id": 57787406, "comment_id": 102008683, "body": "What part of the code exactly did you comment to make it work?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 4, "creation_date": 1567597637, "post_id": 57787406, "comment_id": 102008733, "body": "Remove semicolon from #defines"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 0, "creation_date": 1567597654, "post_id": 57787406, "comment_id": 102008740, "body": "@ErikNellessen if i comment the if till the else it works"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567597800, "post_id": 57787406, "comment_id": 102008812, "body": "for the question i had @AnttiHaapala fixed it my code stil not works but that was my question"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 0, "creation_date": 1567597821, "post_id": 57787406, "comment_id": 102008824, "body": "now i get the error that my variables are not right and that is what @ErikNellessen pointed out"}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "edited": false, "score": 0, "creation_date": 1567597882, "post_id": 57787406, "comment_id": 102008859, "body": "i am new what should i do with this post now"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567598054, "post_id": 57787406, "comment_id": 102008960, "body": "@MarcRoelse since there are no answers yet you should edit your question to be an useful one."}, {"owner": {"reputation": 312, "user_id": 4185533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f8d4be832630111d5300959af6ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Nellessen", "link": "https://stackoverflow.com/users/4185533/erik-nellessen"}, "edited": false, "score": 0, "creation_date": 1567598059, "post_id": 57787406, "comment_id": 102008963, "body": "@Marc I guess it could still help people if you post an answer to this question with the working code and mark it as the right answer, so they can see the solution if they have the same problem and find this question."}, {"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567598166, "post_id": 57787406, "comment_id": 102009029, "body": "i am gone do that @AnttiHaapala and then when i have the working code i wil post that to help people that run into the same problem as me becouse i was also looking for this for half a day"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1567598288, "post_id": 57787406, "comment_id": 102009095, "body": "Your question is bad since it does not have a <i>minimal</i> example. C.f. with <a href=\"https://stackoverflow.com/questions/12327358/define-causes-an-expected-primary-expression-error\" title=\"define causes an expected primary expression error\">stackoverflow.com/questions/12327358/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "edited": false, "score": 0, "creation_date": 1567599158, "post_id": 57788085, "comment_id": 102009595, "body": "thanks for the explanations of why there shouldn&#39;t be an ; behind define."}, {"owner": {"reputation": 362, "user_id": 11936229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11da23565b039811f58b2beecf7493b3?s=128&d=identicon&r=PG&f=1", "display_name": "BTables", "link": "https://stackoverflow.com/users/11936229/btables"}, "edited": false, "score": 0, "creation_date": 1567600089, "post_id": 57788085, "comment_id": 102010117, "body": "Because #define isn&#39;t handled by the compiler, it is handled by the preprocessor. for a statement #define q1 q2 all it does is literally replace every occurrence of q1 with q2. As said in the post, this would cause unnecessary semicolons to be placed in the code when it gets to compile time."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1567598916, "creation_date": 1567598916, "answer_id": 57788085, "question_id": 57787406, "link": "https://stackoverflow.com/questions/57787406/expected-primary-expression-before-when-writing-gpio-pin/57788085#57788085", "title": "expected primary-expression before &#39;,&#39; when writing gpio_pin", "body": "<p>FreeRTOS is a RTOS abstraction - it has nothing to do with handling gpio.</p>\n\n<pre><code>#define led SEMC_D12;\n#define led_pin GPIO_EMC_34;\n</code></pre>\n\n<p>Are invalid. There should be no <code>;</code> after the macro definition. Because there is <code>;</code>, compiler sees:</p>\n\n<pre><code>GPIO_PinWrite(SEMC_D12;, GPIO_EMC_34;, 0u)\n</code></pre>\n\n<p>and exists with compilation error. </p>\n\n<p>The <a href=\"https://mcuxpresso.nxp.com/api_doc/dev/329/group__lpc__gpio.html\" rel=\"nofollow noreferrer\">MCUXpresso SDK API Reference Manual</a> says that:</p>\n\n<blockquote>\n  <p>static void   GPIO_PinWrite (GPIO_Type *base, uint32_t port, uint32_t pin, uint8_t output)</p>\n</blockquote>\n\n<p>I guess you need 4 parameters to <code>GPIO_PinWrite</code>, not 3.</p>\n"}], "owner": {"reputation": 85, "user_id": 9503054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Marc Roelse", "link": "https://stackoverflow.com/users/9503054/marc-roelse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 57788085, "answer_count": 1, "score": -2, "last_activity_date": 1567599914, "creation_date": 1567596373, "last_edit_date": 1567599914, "question_id": 57787406, "link": "https://stackoverflow.com/questions/57787406/expected-primary-expression-before-when-writing-gpio-pin", "title": "expected primary-expression before &#39;,&#39; when writing gpio_pin", "body": "<p>i am new to c++ or freertos but i am trying to only use 1 pin to power an external led but i get the error </p>\n\n<pre><code>expected primary-expression before ',' token\n     GPIO_PinWrite(led, led_pin, 0u)\n</code></pre>\n\n<p>i also get this ^^ with the other pin write</p>\n\n<p><strong>this was fixed by deleting the semicoloms behind the define</strong></p>\n\n<p>i don't specificaly know how to make an gpio pinWrite but i copied the one that is in the example of the baremetal function.</p>\n\n<p>this is my task i am using an imxrt1050-evkb</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>**this is standard import by MCUXpresso**\n#include &lt;stdio.h&gt;\n#include \"board.h\"\n#include \"peripherals.h\"\n#include \"pin_mux.h\"\n#include \"clock_config.h\"\n#include \"MIMXRT1052.h\"\n#include \"fsl_debug_console.h\"\n\n**this is freeRTOS**\n#include \"FreeRTOSConfig.h\"\n#include \"FreeRTOS.h\"\n#include \"task.h\"\n#include \"queue.h\"\n\n\n#define led SEMC_D12;\n#define led_pin GPIO_EMC_34;\n\nvolatile bool g_pinSet = false;\n\n\nvoid vOnOff(void *pvParameters)\n{\n    while(true){\n            vTaskDelay(200);\n            PRINTF(\"Hello led\\n\");\n            if(g_pinSet)\n            {\n                GPIO_PinWrite(led, led_pin, 1u);\n                g_pinSet = true;\n            }\n            else\n            {\n                GPIO_PinWrite(led, led_pin, 0u);\n                g_pinSet = false;\n            }\n\n}\n\n}\nint main(void) {\n     gpio_pin_config_t led_config = {kGPIO_DigitalOutput, 0, kGPIO_NoIntmode};\n    /* Init board hardware. */\n    BOARD_InitBootPins();\n    BOARD_InitBootClocks();\n    BOARD_InitBootPeripherals();\n    /* Init FSL debug console. */\n    BOARD_InitDebugConsole();\n\n//    GPIO_PinInit(led , led_pin , &amp;led_config);\n\n    xTaskCreate(\n            (TaskFunction_t) vOnOff,\n            \"task3\",\n            configMINIMAL_STACK_SIZE,\n            NULL,\n            10,\n            NULL\n    );\n    vTaskStartScheduler();\n    return 0 ;\n}\n\n</code></pre>\n\n<p>i believe the code here ^^ is all the good i use for this example becouse i am working in an sandbox with spaghetti code everywhere</p>\n\n<p>as you can see in my code i got GPIO_PinInit commented i don't know if i need to use that?</p>\n\n<p>i expect to send an signal on and of to an io pin</p>\n"}, {"tags": ["c++", "gtkmm", "gtkmm3"], "answers": [{"comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1567608639, "post_id": 57787700, "comment_id": 102015103, "body": "Concerning <i>I did not know if there is a container widget which allows direct positioning by giving a point position.</i>: Are you looking for <a href=\"https://developer.gnome.org/gtkmm/stable/classGtk_1_1Fixed.html\" rel=\"nofollow noreferrer\"><code>Gtk::Fixed</code></a>?"}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1567597470, "creation_date": 1567597470, "answer_id": 57787700, "question_id": 57787262, "link": "https://stackoverflow.com/questions/57787262/how-to-align-the-button-in-gtkmm/57787700#57787700", "title": "How to align the button in Gtkmm?", "body": "<p>If you want to place a widget like a button, you have to use some container widget like <code>Gtk::Box</code>or <code>Gtk::Grid</code>. Inside such container widgets you can place you child widget as you like, but typically <em>not</em> directly per point position.</p>\n\n<p>The container widgets use some internal logic to order and resize the contained widgets.</p>\n\n<p>From the documentation:</p>\n\n<blockquote>\n  <p>Many GUI toolkits require you to precisely place widgets in a window, using absolute positioning, often using a visual editor. This leads to several problems: ...\n  gtkmm uses the packing system to solve these problems.</p>\n</blockquote>\n\n<p>You can find the full documentation here:\n<a href=\"https://developer.gnome.org/gtkmm-tutorial/stable/sec-multi-item-containers.html.en\" rel=\"nofollow noreferrer\">Multi-item widgets</a></p>\n\n<p>I did not know if there is a container widget which allows direct positioning by giving a point position. If someone has an additional hint, let us know!</p>\n\n<p>Sometimes automatic is better than manual handling, but sometimes it is not :-)</p>\n"}], "owner": {"reputation": 199, "user_id": 10938148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e6c396abe4dfd500a3616338e3e4f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jon marsh", "link": "https://stackoverflow.com/users/10938148/jon-marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567597470, "creation_date": 1567595799, "question_id": 57787262, "link": "https://stackoverflow.com/questions/57787262/how-to-align-the-button-in-gtkmm", "title": "How to align the button in Gtkmm?", "body": "<p>I am using Ubuntu OS.</p>\n\n<p>I am new to GTKMM GUI building application.\nI am following the tutorials which they have on their websites.</p>\n\n<p><code>https://developer.gnome.org/gtkmm-tutorial/stable/sec-helloworld.html.en</code></p>\n\n<p>I can resize the window with <code>helloworld.set_default_size(500,500);</code></p>\n\n<p>but I cannot move the position of button(\"hello world\").</p>\n\n<p>It is always aligned at center.</p>\n\n<p>I tried with <code>m_button.set_alignment(0.0,0.0)</code> but nothing seems to be working.</p>\n\n<p>Why it is that much difficult to move button to any position.?</p>\n\n<p>kindly suggest some solution if available.</p>\n"}, {"tags": ["c++", "inheritance", "constructor", "initialization", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 1397, "user_id": 2056191, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe75bdfda5b7b10e0a4b57da8e0fd410?s=128&d=identicon&r=PG", "display_name": "Bomaz", "link": "https://stackoverflow.com/users/2056191/bomaz"}, "edited": false, "score": 0, "creation_date": 1568798992, "post_id": 57786970, "comment_id": 102386438, "body": "This made me sad. So much boilerplate"}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 5, "last_activity_date": 1567594689, "creation_date": 1567594689, "answer_id": 57786970, "question_id": 57786791, "link": "https://stackoverflow.com/questions/57786791/avoid-constructor-with-empty-base-class-with-virtual-method/57786970#57786970", "title": "Avoid constructor with empty base class with virtual method", "body": "<blockquote>\n  <p>Is there any way I can avoid manually implementing the constructors of Derived in order to be able to initialize it?</p>\n</blockquote>\n\n<p>No. Having a base class and virtual functions causes <code>Derived</code> not being an aggregate.</p>\n\n<p>If you remove the <code>virtual</code> functions, you have aggregates and you can</p>\n\n<pre><code>return Derived{{}, 5}.f(3);\n//             ^^ explicitly initialize base class\n</code></pre>\n\n<p>but as this is not the point of your question, this is no solution to it.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1567595330, "last_edit_date": 1567595330, "creation_date": 1567594697, "answer_id": 57786973, "question_id": 57786791, "link": "https://stackoverflow.com/questions/57786791/avoid-constructor-with-empty-base-class-with-virtual-method/57786973#57786973", "title": "Avoid constructor with empty base class with virtual method", "body": "<p>Both the base class and the derived class has an implicit default constructor (as well as copy and move), and there is no need to manually implement those.</p>\n\n<p>Neither class is an aggregate, so they cannot be initialised using list initialisation without implementing a custom constructor that accepts compatible list of arguments. This is why your example program does not work. Neither class can become an aggregate without removing the virtual member function.</p>\n\n<p>So, your options are:</p>\n\n<ul>\n<li>Don't use list initialisation, except with an empty list of parameters which is a special case that performs value initialisation which invokes the default constructor</li>\n<li>or provide a custom constructor for the list of arguments that you want to pass</li>\n<li>or remove the virtual member function so that the classes become aggregates, and their members can then be initialised directly with list initialisation</li>\n</ul>\n"}], "owner": {"reputation": 1397, "user_id": 2056191, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe75bdfda5b7b10e0a4b57da8e0fd410?s=128&d=identicon&r=PG", "display_name": "Bomaz", "link": "https://stackoverflow.com/users/2056191/bomaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 57786970, "answer_count": 2, "score": 4, "last_activity_date": 1567607237, "creation_date": 1567594010, "last_edit_date": 1567607237, "question_id": 57786791, "link": "https://stackoverflow.com/questions/57786791/avoid-constructor-with-empty-base-class-with-virtual-method", "title": "Avoid constructor with empty base class with virtual method", "body": "<p>I have an empty base class with a virtual function. Is there any way I can avoid manually implementing the constructors of Derived in order to be able to initialize it?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Base\n{\n    virtual int f(int) const = 0;\n    virtual ~Base() = 0; \n};\n\nBase::~Base() {}\n\nstruct Derived: public Base\n{\n    int v;\n\n    int f(int) const override{ return v;};\n};\n\nint main() \n{\n    return Derived{5}.f(3);\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "new-operator", "compiler-bug", "aggregate-initialization"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 7, "creation_date": 1567594393, "post_id": 57786717, "comment_id": 102007069, "body": "Yeah, it has been broken for several years. The stuff inside <code>{}</code> is completely ignored so you can write some nonsense like <code>auto items = new Item[2] { { std::cout, &quot; sdf&quot; , 0.3f} };</code>. I&#39;ve tried to find related issues at VS feedback hub (at least the one I&#39;ve created) but the search there is broken as well..."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1567594545, "post_id": 57786717, "comment_id": 102007161, "body": "Following up @VTT comment still very broken, live: <a href=\"https://godbolt.org/z/Fn6dgp\" rel=\"nofollow noreferrer\">godbolt.org/z/Fn6dgp</a>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 3, "creation_date": 1567594710, "post_id": 57786717, "comment_id": 102007270, "body": "@rafix07 It is still broken in VS2019"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1567594818, "post_id": 57786717, "comment_id": 102007336, "body": "VS2019 Code Analysis gives:  <code>warning C6001: Using uninitialized memory &#39;items[0].id&#39;</code>. But <code>clang-cl</code> inside VS2019 works fine."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1567595827, "post_id": 57786717, "comment_id": 102007789, "body": "That&#39;s scary. And the fact MS doesn&#39;t fix this is even more scary..."}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1568142962, "post_id": 57786717, "comment_id": 102178677, "body": "This works with <code>std::vector</code> but not <code>std::array</code>. The pre-compiler complains of &quot;too many initializer values&quot; and the actual compiler throws a <code>C2440</code> error with the note: &quot;Invalid aggregate initialization.&quot; The above code as-is only warns about accessing unintialized memory."}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 10692604, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wEdvIrNuH9k/AAAAAAAAAAI/AAAAAAAAAb4/PE-pApl1Dhw/photo.jpg?sz=128", "display_name": "Noa Sakurajin", "link": "https://stackoverflow.com/users/10692604/noa-sakurajin"}, "is_accepted": false, "score": 1, "last_activity_date": 1568139253, "last_edit_date": 1568139253, "creation_date": 1568132330, "answer_id": 57874741, "question_id": 57786717, "link": "https://stackoverflow.com/questions/57786717/visual-studio-2019-does-not-handle-aggregate-initialization-of-dynamic-array-of/57874741#57874741", "title": "Visual Studio 2019 does not handle aggregate initialization of dynamic array of structs correctly", "body": "<p>I got it to work by writing the following but then the data is not stored on the Heap.</p>\n\n<pre><code>Item items[] {\n    { 1, 1 },\n    { 2, 2 }\n};\n</code></pre>\n\n<p>If you need it on the heap use the solution below it seems to work with the vc++ compiler. (Note that this is only a workaround and does nt fix the underlying problem):</p>\n\n<pre><code>Item* Items[2];\nItems[0] = new Item{3,3};\nItems[1] = new Item{4,4};\n\nstd::cout &lt;&lt; (*Items[0]).id &lt;&lt; (*Items[0]).type &lt;&lt; std::endl;\nstd::cout &lt;&lt; (*Items[1]).id &lt;&lt; (*Items[1]).type &lt;&lt; std::endl;\n</code></pre>\n\n<p>Altenatively you can create the Array using the first option and then copy it into an Array on the heap like this:</p>\n\n<pre><code>Item items[2]{\n    {1,1},\n    {2,2}\n};\n\nItem* hitem = new Item[2];\nfor(int i = 0; i &lt; 2; i++){\n    hitem[i].id = items[i].id + 4;\n    hitem[i].type = items[i].type + 4;\n}\n</code></pre>\n\n<p>While this is slow it works like it is supposed to even on the vc++ compiler.\nYou can view the whole code here:<a href=\"https://rextester.com/VNJM26393\" rel=\"nofollow noreferrer\">https://rextester.com/VNJM26393</a></p>\n\n<p>I don't know why it only works like this...</p>\n"}], "owner": {"reputation": 1574, "user_id": 835103, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8dab7c872486626557a85b2918ba3f9d?s=128&d=identicon&r=PG", "display_name": "vkrzv", "link": "https://stackoverflow.com/users/835103/vkrzv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 1, "answer_count": 1, "score": 26, "last_activity_date": 1568139253, "creation_date": 1567593707, "last_edit_date": 1567603871, "question_id": 57786717, "link": "https://stackoverflow.com/questions/57786717/visual-studio-2019-does-not-handle-aggregate-initialization-of-dynamic-array-of", "title": "Visual Studio 2019 does not handle aggregate initialization of dynamic array of structs correctly", "body": "<p>The code below prints garbage (or zeroes) if compiled with VC++ 2017 and \"1122\" if compiled with GCC or Clang (<a href=\"https://rextester.com/JEV81255\" rel=\"noreferrer\">https://rextester.com/JEV81255</a>). Is it bug of VC++ or I'm missing something here?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Item {\n    int id;\n    int type;\n};\n\nint main()\n{\n    auto items = new Item[2]\n    {\n        { 1, 1 },\n        { 2, 2 }\n    };\n\n    std::cout &lt;&lt; items[0].id &lt;&lt; items[0].type;\n    std::cout &lt;&lt; items[1].id &lt;&lt; items[1].type;\n}\n</code></pre>\n\n<p>At the same time it works if elements are of a primitive type (like <code>int</code>).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1567593238, "post_id": 57786502, "comment_id": 102006538, "body": "You need a logging library. Check out spdlog."}, {"owner": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 0, "creation_date": 1567593355, "post_id": 57786502, "comment_id": 102006581, "body": "you can use if-else preprocessor"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1567593796, "post_id": 57786502, "comment_id": 102006780, "body": "you can put <code>if (DEBUG) std::clog</code> into macro like <code>#define DEBUG_CLOG if (DEBUG) std::clog</code>, then <code>DEBUG_CLOG &lt;&lt; &quot;my message&quot;;</code> ... make sure the <code>DEBUG</code> variable is actually <code>constexpr</code> like <code>constexpr bool DEBUG = false;</code>, so the compiler know at compile time that the whole <code>if</code> is false and can be removed. (not sure if elegant... and macros are generally source of problems ... but in this particular case the resulting source seems reasonable to me) (or you can pass that <code>true&#47;false</code> value at compile time as another define, i.e. <code>-DDEBUGLOGON=false</code> and do <code>if (DEBUGLOGON)</code>"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1567593998, "post_id": 57786502, "comment_id": 102006885, "body": "btw avoid generic names as <code>DEBUG</code>, that will easily clash with something else... i.e. if you will go to the dark path of defines and preprocessor, use something distinct like <code>ADAMSCICO_LOG_ON=false</code> ..."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 3, "creation_date": 1567596703, "post_id": 57786502, "comment_id": 102008240, "body": "If you already use some library like boost you can use the logger, e.g. <a href=\"https://www.boost.org/doc/libs/1_63_0/libs/log/doc/html/index.html\" rel=\"nofollow noreferrer\">boost logger</a> or <a href=\"https://pocoproject.org/docs/Poco.Logger.html\" rel=\"nofollow noreferrer\">poco logger</a>"}], "answers": [{"tags": [], "owner": {"reputation": 846, "user_id": 7200084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3f015adb015ff957d7924beb4be217?s=128&d=identicon&r=PG&f=1", "display_name": "f4f", "link": "https://stackoverflow.com/users/7200084/f4f"}, "is_accepted": false, "score": 0, "last_activity_date": 1567683827, "creation_date": 1567683827, "answer_id": 57804751, "question_id": 57786502, "link": "https://stackoverflow.com/questions/57786502/optional-logging-into-a-file-in-c/57804751#57804751", "title": "Optional logging into a file in C++", "body": "<p>You may use any external logging library for C/C++.\nOr create your own small implementation with only utilities what you need.</p>\n\n<p>A traditional logging mechanism is build on macros (or inline functions) and looks like:</p>\n\n<pre><code>#define LOG_MESSAGE(msg) \\\n{\n#ifdef DEBUG\n// your debug logging\n#else\n// your release logging, may be leaved empty\n#endif // DEBUG\n}\n</code></pre>\n\n<p>It's also useful to add different logging levels: Error, Warning, Info, etc.</p>\n"}], "owner": {"reputation": 3, "user_id": 11440873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e097a20f643d254724f86012aafdb7d8?s=128&d=identicon&r=PG&f=1", "display_name": "AdamP", "link": "https://stackoverflow.com/users/11440873/adamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567683827, "creation_date": 1567592874, "last_edit_date": 1567676770, "question_id": 57786502, "link": "https://stackoverflow.com/questions/57786502/optional-logging-into-a-file-in-c", "title": "Optional logging into a file in C++", "body": "<p>I am writing a scientific computation code in C++. There are outputs that I want to write in a console and outputs that I write into a file. However, when debugging after implementing a new feature, it is useful to print out much more information than usual. So far I was just sending  more information to std::cout/clog and commented these lines out when not needed.</p>\n\n<p>What I want is like std::clog, which would go into a file when needed, or not do anything at all, when not needed. It is ok, if I need to recompile the code to switch between the two regimes. It is important that nothing happens when not needed, because for a real large calculation the log file would be enormous (or the the console full of rubbish) and all the writing would slow the calculation down.</p>\n\n<p>I am looking for the smallest possible implementation, ideally using only standard libraries for portability.</p>\n\n<p>The obvious solution is to have a global variable, redirect clog to a file and then use an if statement.</p>\n\n<pre><code>bool DEBUG = true;\nstd::ofstream out(\"logfile\");\nstd::clog.rdbuf(out.rdbuf());\n...\nif (DEBUG) std::clog &lt;&lt; \"my message\" &lt;&lt; std::endl;\n...\n</code></pre>\n\n<p>Is there a more elegant way of doing this?</p>\n\n<p><strong>Edit:</strong>\nI would like to avoid using non-standard libraries and preprocessor macros (program is spread across many files and also a bad programming habit in general). One way I could imagine this working, but I don't know how to do it, is to create a globally accessible object that would be able to accept messages using &lt;&lt; and would save them to a file. Then I could just comment out the line inside this object class that saves it to a file. However, I don't know how much performance impact may result from passing messages to such a disfunctional object.</p>\n"}, {"tags": ["c++", "encryption", "openssl"], "comments": [{"owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "edited": false, "score": 0, "creation_date": 1567592673, "post_id": 57786299, "comment_id": 102006244, "body": "<i>Note</i>: Since you are using an IV of all zeroes and the data to be encrypted is at most the same length as the block size, essentially you are encrypting using ECB mode."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1567593247, "post_id": 57786299, "comment_id": 102006540, "body": "The shown code ignores <code>final_length</code>. That&#39;s at least one flaw."}, {"owner": {"reputation": 1464, "user_id": 936269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1fac3223b59eb3774aef86f7684f7f5f?s=128&d=identicon&r=PG", "display_name": "Lars Nielsen", "link": "https://stackoverflow.com/users/936269/lars-nielsen"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1567594348, "post_id": 57786299, "comment_id": 102007043, "body": "@SamVarshavchik ignores it ?"}, {"owner": {"reputation": 1464, "user_id": 936269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1fac3223b59eb3774aef86f7684f7f5f?s=128&d=identicon&r=PG", "display_name": "Lars Nielsen", "link": "https://stackoverflow.com/users/936269/lars-nielsen"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1567594560, "post_id": 57786299, "comment_id": 102007168, "body": "@SamVarshavchik from what I can tell with vectors, should I be able to ignore it?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1567594714, "post_id": 57786299, "comment_id": 102007273, "body": "Output parameters are not something that mean nothing. Otherwise they wouldn&#39;t be there in the first place. There&#39;s a reason for the output parameter. See OpenSSL&#39;s documentation."}], "owner": {"reputation": 1464, "user_id": 936269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1fac3223b59eb3774aef86f7684f7f5f?s=128&d=identicon&r=PG", "display_name": "Lars Nielsen", "link": "https://stackoverflow.com/users/936269/lars-nielsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567592102, "creation_date": 1567592102, "question_id": 57786299, "link": "https://stackoverflow.com/questions/57786299/decryption-fails-for-aes-cbc-128-bit-using-openssl-using-the-evp-api-in-c", "title": "Decryption fails for AES CBC 128 bit using OpenSSL using the EVP API in C++", "body": "<p>Hello I have a set of data vectors <code>std::vector&lt;uint8_t&gt;</code> I need to encrypt using AES CBC 128, and I am trying to use OpenSSL AES CBC 128 using the EVP API for this. However for some reason I cannot get the data to decrypt. As shown in the console output: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ./a.out \nOriginal data: b25f6a3f71a9285\nData before encryption b25f6a3f71a9285\nData after encryption bceb55ccb26d83b02d63ff785e538af000000000\nData was encrypted moving on to decryption\nOrigninal data after decryption b25f6a3f71a9285\ndata after decryption e7fc6fdb4f9aa50cfb46764c04010fb000000000\n[Failure] we failed data is not decrypted```\n</code></pre>\n\n<p>However, I cannot find where in my code I have made the mistake. </p>\n\n<p>Here is a bare minimum example I have been using: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\n#include &lt;vector&gt;\n#include &lt;cstdint&gt;\n\n#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;cassert&gt;\n\n#include &lt;openssl/aes.h&gt;\n#include &lt;openssl/evp.h&gt;\n\n#include &lt;iostream&gt;\n\n#include &lt;utility&gt;\n#include &lt;sstream&gt;\n\nvoid print_data(const std::vector&lt;uint8_t&gt; data)\n{\n    std::stringstream ss; \n    for (const auto&amp; elm : data)\n    {\n        ss &lt;&lt; std::hex &lt;&lt; (int)elm; \n    }\n    std::cout &lt;&lt; ss.str() &lt;&lt; std::endl; ; \n}\n\nstd::vector&lt;uint8_t&gt; generate_data(size_t size)\n{\n    srand(static_cast&lt;uint32_t&gt;(time(0)));\n\n    std::vector&lt;uint8_t&gt; data(size);\n    std::generate(data.begin(), data.end(), rand);\n    return data; \n}\n\nvoid aes_128_cbc_init_cryptert(EVP_CIPHER_CTX* crypter_context, const std::string&amp; key, bool decrypter=false)\n{\n    unsigned char aes_key[key.size()];\n    strcpy((char*) aes_key, key.c_str()); \n\n    std::vector&lt;uint8_t&gt; iv(AES_BLOCK_SIZE, 0);\n\n    EVP_CIPHER_CTX_init(crypter_context);\n    if (decrypter)\n    {\n        EVP_DecryptInit_ex(crypter_context, EVP_aes_128_cbc(), NULL, aes_key, iv.data());\n    }\n    else\n    {\n        EVP_EncryptInit_ex(crypter_context, EVP_aes_128_cbc(), NULL, aes_key, iv.data());\n    }\n\n}\n\n\nvoid encrypt(const std::string&amp; key, std::vector&lt;uint8_t&gt;&amp; data)\n{\n\n    // Maximum lenghter of cipher is data.sizE() + AES_BLOCK_SIZE - 1 \n    int cipher_length = data.size() + 1 + AES_BLOCK_SIZE;\n    int final_length = 0;\n    int data_length = static_cast&lt;int&gt;(data.size()); \n\n    std::vector&lt;uint8_t&gt; cipher(cipher_length, 0);\n\n    EVP_CIPHER_CTX en;\n    aes_128_cbc_init_cryptert(&amp;en, key);\n\n    EVP_EncryptUpdate(&amp;en, cipher.data(), &amp;cipher_length, data.data(), data_length);\n\n    EVP_EncryptFinal_ex(&amp;en, cipher.data()+cipher_length, &amp;final_length);\n    data = cipher;    \n}\n\nvoid decrypt(const std::string&amp; key, std::vector&lt;uint8_t&gt;&amp; data)\n{\n    // Will always be smaller that encrypted data\n    int out_length = data.size();\n    int final_length = 0;\n    std::vector&lt;uint8_t&gt; out(out_length);\n\n    EVP_CIPHER_CTX en;\n    aes_128_cbc_init_cryptert(&amp;en, key, true);\n    EVP_DecryptUpdate(&amp;en, out.data(), &amp;out_length, data.data(), data.size());\n    EVP_DecryptFinal_ex(&amp;en, out.data()+out_length, &amp;final_length);\n    data = out; \n}\n\n\nint main(void)\n{\n    std::string key = \"7LVQ2YOYWI4AQNYC\";\n\n    std::vector&lt;uint8_t&gt; org_data = generate_data(8);\n\n    std::cout &lt;&lt; \"Original data: \"; \n    print_data(org_data);\n    auto data = org_data;\n    std::cout &lt;&lt; \"Data before encryption \";\n    print_data(data); \n    encrypt(key, data);\n\n    std::cout &lt;&lt; \"Data after encryption \";\n    print_data(data); \n    if (data == org_data)\n    {\n        std::cout &lt;&lt; \"Data was not encrypted\" &lt;&lt; std::endl;\n        return -1;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Data was encrypted moving on to decryption\" &lt;&lt; std::endl; \n    }\n\n    decrypt(key, data);\n\n    std::cout &lt;&lt; \"Origninal data after decryption \";\n    print_data(org_data);\n    std::cout &lt;&lt; \"data after decryption \";\n    print_data(data);\n\n    if (data == org_data)\n    {\n        std::cout &lt;&lt; \"[Success] Data was decrypted\" &lt;&lt; std::endl;\n        return 0;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"[Failure] we failed data is not decrypted\" &lt;&lt; std::endl;\n        return - 1; \n    }\n}\n</code></pre>\n\n<p>I am think it is because I am doing something wrong with either size of input and output to decrypt or the initalisation of the \"decrypter\" it self, but I have been unable to confirm this. I have been working of, of this example: <a href=\"https://github.com/saju/misc/blob/master/misc/openssl_aes.c\" rel=\"nofollow noreferrer\">https://github.com/saju/misc/blob/master/misc/openssl_aes.c</a> </p>\n"}, {"tags": ["c++", "nested-loops", "lidar"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1567591932, "post_id": 57786141, "comment_id": 102005877, "body": "The problem here is not the nested loop, but the fact that it is not interrupted once timestamp goes out of bounds. Iterating all the way up to <code>measurement.size()</code> every time is just a waste of resources."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 7, "creation_date": 1567592052, "post_id": 57786141, "comment_id": 102005923, "body": "you are asking the wrong question: &quot;two nested loops or 1 single loop or 3 nested loops&quot; doesn&#39;t matter. It might seem counter-intuitive, but what really matters is <b>complexity</b>. You might associate 2 nesed loops with <code>O(n^2)</code> complexity, but that is definetely not always the case. Plus you can easily have <code>O(n^2)</code> or worst complexity (more or less hidden) in a single loop."}, {"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "edited": false, "score": 0, "creation_date": 1567592346, "post_id": 57786141, "comment_id": 102006083, "body": "I am really sorry for the naming convention. &quot;timeStamp&quot; is not timeStamp anymore in the project but the deltaTime between transmission and reception of Lidar pulse. It is always under the limit. I need to reduce the overhead caused by two for loops for 56000 points."}, {"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1567592492, "post_id": 57786141, "comment_id": 102006153, "body": "@bolov Thank you. All I need to know is that how I can reduce the time taken by the code and I do not have any worries on the memory."}, {"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 0, "creation_date": 1567592652, "post_id": 57786141, "comment_id": 102006229, "body": "Did you consider something like vector operations to speed up the calculation?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1567593546, "post_id": 57786141, "comment_id": 102006660, "body": "Yes, two nested loops here is a logically-flawed approach. This should be done as a single, simple loop. Unfortunately, the complete specification for how to combine samples, with respect to the timestamp, is not clear so no further suggestion can be made."}, {"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "edited": false, "score": 0, "creation_date": 1567596743, "post_id": 57786141, "comment_id": 102008260, "body": "Combining samples is as simple as adding the power of overlapped samples with immediate neighbor samples and time is the average value as seen in the code."}], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 7362174, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C1UAQVy1QHA/AAAAAAAAAAI/AAAAAAAAAA0/cfDmZpE6xV8/photo.jpg?sz=128", "display_name": "Isaac Clancy", "link": "https://stackoverflow.com/users/7362174/isaac-clancy"}, "is_accepted": false, "score": 0, "last_activity_date": 1567592930, "creation_date": 1567592930, "answer_id": 57786522, "question_id": 57786141, "link": "https://stackoverflow.com/questions/57786141/how-to-avoid-using-nested-loops-in-cpp/57786522#57786522", "title": "How to avoid using nested loops in cpp?", "body": "<p>If your values are in ascending order of timeStamp adding <code>else break</code> to the if statement shouldn't effect the result but should be a lot quicker.</p>\n\n<pre><code>for(auto i= 0; i&lt; measurement.size(); i++){\n   for(auto j=i+1; i&lt; measurement.size(); j++){\n      if(measurement[j].timeStamp - measurement[i].timeStamp) &lt; pulseDuration){\n          measurement[i].Power += measurement[j].Power;\n          measurement[i].timeStamp = (measurement[i].timeStamp + measurement[j].timeStamp)/2.0f;\n    } else {\n      break;\n    }\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "edited": false, "score": 0, "creation_date": 1567596515, "post_id": 57786728, "comment_id": 102008137, "body": "Jitters and noises are modeled already and in this piece of code I just have to assume that the power remains the same over the interval of time where overlap happened and the time of strongest signal should just be the middle point of overlap"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "edited": false, "score": 0, "creation_date": 1567604081, "post_id": 57786728, "comment_id": 102012336, "body": "So basically you want to combine too-close-timestamped samples into one sample? How do you model the samples if you have a few samples which are too close to both samples <b>a</b> and <b>b</b>, while <b>a</b> and <b>b</b> are well-apart?"}], "tags": [], "owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "is_accepted": false, "score": 1, "last_activity_date": 1567593766, "creation_date": 1567593766, "answer_id": 57786728, "question_id": 57786141, "link": "https://stackoverflow.com/questions/57786141/how-to-avoid-using-nested-loops-in-cpp/57786728#57786728", "title": "How to avoid using nested loops in cpp?", "body": "<p>Due to jitter and other timing   complexities, instead of simple summation, you need to switch to <strong>[Numerical Integration][\u06f1]</strong> (eg. <strong><a href=\"https://en.wikipedia.org/wiki/Trapezoidal_rule?wprov=sfla1\" rel=\"nofollow noreferrer\">Trapezoidal Integration</a></strong>...).</p>\n"}, {"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 3, "last_activity_date": 1567595056, "last_edit_date": 1567595056, "creation_date": 1567593791, "answer_id": 57786737, "question_id": 57786141, "link": "https://stackoverflow.com/questions/57786141/how-to-avoid-using-nested-loops-in-cpp/57786737#57786737", "title": "How to avoid using nested loops in cpp?", "body": "<p>You can take advantage that the vector is sorted by <code>timeStamp</code> and find the next pulse with binary search, thus reducing the complexity from <code>O(n^2)</code> to <code>O(n log n)</code>:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n#include &lt;iterator\n</code></pre>\n\n<pre><code>auto it = measurement.begin();\nauto end = measurement.end();\n\nwhile (it != end)\n{\n    // next timestamp as in your code\n    auto timeStampLower = it-&gt;timeStamp + pulseDuration;\n\n    // next value in measurement with a timestamp &gt;= timeStampLower\n    auto lower_bound = std::lower_bound(it, end, timeStampLower, [](float a, const LidarPoints&amp; b) {\n            return a &lt; b.timeStamp;\n        });\n\n    // sum over [timeStamp, timeStampLower)\n    float sum = std::accumulate(it, lower_bound, 0.0f, [] (float a, const LidarPoints&amp; b) {\n            return a + b.timeStamp;\n        });\n\n    auto num = std::distance(it, lower_bound);\n    // num should be &gt;= since the vector is sorted and pulseDuration is positive\n    // you should uncomment next line to catch unexpected error\n    // Expects(num &gt;= 1); // needs GSL library\n    // assert(num &gt;= 1); // or standard C if you don't want to use GSL\n\n    // average over [timeStamp, timeStampLower)\n    it-&gt;timeStamp = sum / num;\n\n    // advance it\n    it = lower_bound;\n}\n</code></pre>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/algorithm/lower_bound\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/algorithm/lower_bound</a>\n<a href=\"https://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/algorithm/accumulate</a></p>\n\n<p>Also please note that my algorithm will produce different result than yours because you don't really compute the average over multiple values with <code>measurement[i].timeStamp = (measurement[i].timeStamp + measurement[j].timeStamp)/2.0f</code> </p>\n\n<p>Also to consider: (I am by far not an expert in the field, so I am just throwing the ideea, it's up to you to know if its valid or not): with your code you just \"squash\" together close measurement, instead of having a vector of measurement with periodic time. It might be what you intend or not.</p>\n\n<p><strong>Disclaimer</strong>: not tested beyond \"it compiles\". Please don't just copy-paste it. It could be incomplet and incorrekt. But I hope I gave you a direction to investigate.</p>\n"}], "owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 2, "accepted_answer_id": 57786737, "answer_count": 3, "score": 3, "last_activity_date": 1567595056, "creation_date": 1567591600, "last_edit_date": 1567591904, "question_id": 57786141, "link": "https://stackoverflow.com/questions/57786141/how-to-avoid-using-nested-loops-in-cpp", "title": "How to avoid using nested loops in cpp?", "body": "<p>I am working on digital sampling for sensor. I have following code to compute the highest amplitude and the corresponding time.</p>\n\n<pre><code>struct LidarPoints{\n   float timeStamp;\n   float Power;\n}\nstd::vector&lt;LidarPoints&gt; measurement; // To store Lidar points of current measurement\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/beQoc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/beQoc.png\" alt=\"enter image description here\"></a></p>\n\n<p>Currently power and energy are the same (because of delta function)and vector is arranged in ascending order of time. I would like to change this to step function. Pulse duration is a constant 10ns. </p>\n\n<p><a href=\"https://i.stack.imgur.com/32pQ1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/32pQ1.png\" alt=\"enter image description here\"></a> </p>\n\n<pre><code>uint32_t pulseDuration = 5;\n</code></pre>\n\n<p>The problem is to find any overlap between the samples and if any to add up the amplitudes.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mAG0A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mAG0A.png\" alt=\"enter image description here\"></a></p>\n\n<p>I currently use following code:</p>\n\n<pre><code>for(auto i= 0; i&lt; measurement.size(); i++){\n   for(auto j=i+1; i&lt; measurement.size(); j++){\n      if(measurement[j].timeStamp - measurement[i].timeStamp) &lt; pulseDuration){\n          measurement[i].Power += measurement[j].Power;\n          measurement[i].timeStamp = (measurement[i].timeStamp + measurement[j].timeStamp)/2.0f;\n    } \n  }\n}\n</code></pre>\n\n<p>Is it possible to code this without two for loops since I cannot afford the amount of time being taken by nested loops.</p>\n"}, {"tags": ["c++", "webkit", "activex"], "answers": [{"comments": [{"owner": {"reputation": 2021, "user_id": 5476766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abcb6694c3beb2e67d9b8ef2086896f3?s=128&d=identicon&r=PG&f=1", "display_name": "DjSh", "link": "https://stackoverflow.com/users/5476766/djsh"}, "edited": false, "score": 0, "creation_date": 1572531801, "post_id": 58645042, "comment_id": 103595860, "body": "Please avoid posting links as answer."}], "tags": [], "owner": {"reputation": 9, "user_id": 2387713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f249775bfb6e4d2810ccbc51aabe3f?s=128&d=identicon&r=PG", "display_name": "eliasp", "link": "https://stackoverflow.com/users/2387713/eliasp"}, "is_accepted": false, "score": -1, "last_activity_date": 1572530652, "creation_date": 1572530652, "answer_id": 58645042, "question_id": 57786120, "link": "https://stackoverflow.com/questions/57786120/how-to-set-click-events-in-webkitx-activex-control-in-c/58645042#58645042", "title": "How to set click events in WebKitX ActiveX control in C++", "body": "<p>WebKitX - Getting Started with C++\n<a href=\"https://www.webkitx.com/doc/light/Getting%20Started%20with%20CPP.html\" rel=\"nofollow noreferrer\">https://www.webkitx.com/doc/light/Getting%20Started%20with%20CPP.html</a></p>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572530652, "creation_date": 1567591528, "question_id": 57786120, "link": "https://stackoverflow.com/questions/57786120/how-to-set-click-events-in-webkitx-activex-control-in-c", "title": "How to set click events in WebKitX ActiveX control in C++", "body": "<p>I am using WebKitX ActiveX control for displaying web page in MFC Dialog. Now i want to set click events for same. I am setting click events using below code : </p>\n\n<pre><code>m_ctrlWebKit.SetEvents(m_ctrlWebKit.DOM_EVENT_CLICK || m_ctrlWebKit.DOM_EVENT_DBLCKICK);\n</code></pre>\n\n<p>But when i click on web page i always get only click event not double click. So can anyone tell me how to do it.</p>\n"}, {"tags": ["c++", "live555"], "comments": [{"owner": {"reputation": 11, "user_id": 11784223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zyJZZ5RWf_w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBK3wRTX-zFq1Mks-oMdSUjRgpXA/photo.jpg?sz=128", "display_name": "2tapgosu", "link": "https://stackoverflow.com/users/11784223/2tapgosu"}, "edited": false, "score": 1, "creation_date": 1567591389, "post_id": 57786067, "comment_id": 102005606, "body": "result are not code... it&#39;s just output of terminal"}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 0, "creation_date": 1567591952, "post_id": 57786067, "comment_id": 102005883, "body": "It is difficult to guide, when we cannot see the code that produces the output."}, {"owner": {"reputation": 1024, "user_id": 4164901, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49fdcd344d77f958bc7864b6c5d86bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Durgesh", "link": "https://stackoverflow.com/users/4164901/durgesh"}, "edited": false, "score": 0, "creation_date": 1567596796, "post_id": 57786067, "comment_id": 102008293, "body": "@2tapgosu What do you mean by receive result ? handleResponseBytes is related to RTSP and afterGettingFrame is related to RTP."}, {"owner": {"reputation": 11, "user_id": 11784223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zyJZZ5RWf_w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBK3wRTX-zFq1Mks-oMdSUjRgpXA/photo.jpg?sz=128", "display_name": "2tapgosu", "link": "https://stackoverflow.com/users/11784223/2tapgosu"}, "reply_to_user": {"reputation": 1024, "user_id": 4164901, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49fdcd344d77f958bc7864b6c5d86bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Durgesh", "link": "https://stackoverflow.com/users/4164901/durgesh"}, "edited": false, "score": 0, "creation_date": 1567647094, "post_id": 57786067, "comment_id": 102027588, "body": "@Durgesh i have 2 rtsp url, output of ./testProgs/testRTSPClient &quot;rtsp://123,456,789,0&quot; is Received 2968 new bytes of response data. and other url is /testProgs/testRTSPClient &quot;rtsp://123.456.123.456/&quot;  that output is Stream &quot;rtsp://123.456.123.456&quot;; video/H264: Received 19938 bytes. Presentation time: 1567593326.272000"}], "owner": {"reputation": 11, "user_id": 11784223, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zyJZZ5RWf_w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBK3wRTX-zFq1Mks-oMdSUjRgpXA/photo.jpg?sz=128", "display_name": "2tapgosu", "link": "https://stackoverflow.com/users/11784223/2tapgosu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567594184, "creation_date": 1567591355, "last_edit_date": 1567594184, "question_id": 57786067, "link": "https://stackoverflow.com/questions/57786067/why-rtsp-receive-form-is-different-between-2-cases", "title": "Why RTSP receive form is different between 2 cases", "body": "<p>In <code>testRTSPClient.cpp</code>, I have 2 cases of receive result.</p>\n\n<p>One is <code>DummySink::afterGettingFrame</code> and the other is <code>RTSPClient::handleResponseBytes</code></p>\n\n<p>I am getting different receieve form for these two.</p>\n\n<p>I traced and debugged the code to know what is different, but failed.</p>\n\n<p>one of the result</p>\n\n<blockquote>\n  <p>Stream \"rtsp://user@ip\"; video/H264:  Received 19938\n  bytes.    Presentation time: 1567593326.272000 Stream \"rtsp://user@ip//\";\n  audio/PCMA:   Received 640 bytes. Presentation time: 1567593326.292000</p>\n</blockquote>\n\n<p>the other result</p>\n\n<blockquote>\n  <p>Received 2944 new bytes of response data. Received 2373 new bytes of\n  response data.</p>\n</blockquote>\n\n<p>can anyone tell me why they are different?</p>\n"}, {"tags": ["c++", "c++17", "compile-time", "static-assert"], "comments": [{"owner": {"reputation": 448, "user_id": 6271671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d181593f8c690c09eccc6b002416c7?s=128&d=identicon&r=PG&f=1", "display_name": "george_ptr", "link": "https://stackoverflow.com/users/6271671/george-ptr"}, "edited": false, "score": 0, "creation_date": 1567591026, "post_id": 57785911, "comment_id": 102005363, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/static_assert\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/static_assert</a> ?"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 448, "user_id": 6271671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d181593f8c690c09eccc6b002416c7?s=128&d=identicon&r=PG&f=1", "display_name": "george_ptr", "link": "https://stackoverflow.com/users/6271671/george-ptr"}, "edited": false, "score": 4, "creation_date": 1567591085, "post_id": 57785911, "comment_id": 102005403, "body": "@george_ptr Will always give a compile time error, because <code>i</code> is not usuable in a constant expression in that context."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1567591575, "post_id": 57785911, "comment_id": 102005709, "body": "I am certain this is impossible to do. You will sadly have to settle for something like <code>dims = check_value&lt;0&gt;();</code>"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1567591661, "post_id": 57785911, "comment_id": 102005744, "body": "I don&#39;t think you can do that with a non-constexpr function"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1567591822, "post_id": 57785911, "comment_id": 102005823, "body": "sloppy speaking, in <code>dims = 0;</code> the <code>0</code> is a runtime value. Only if you can accept to turn it into a compile time value you can statically assert on it (eg as a template param, as suggested by StackDanny)"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1567593091, "post_id": 57785911, "comment_id": 102006456, "body": "Looks like you actually want some static analysis, not sure if that actually exist, although not that far-fetched"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1567593633, "post_id": 57785911, "comment_id": 102006704, "body": "Out of interest, how many dimensions do you need to support? You <i>could</i> engineer this with a change of syntax, like <code>dims = zero;</code> for example, but that could be viewed as silly (I wouldn&#39;t do it)."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1567594527, "post_id": 57785911, "comment_id": 102007149, "body": "@Bathsheba ty, thats a good idea, however i cannot use in the actual case and it&#39;s not even dimensions (I just thought that would convey the meaning better)"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1567594642, "post_id": 57785911, "comment_id": 102007218, "body": "@Bathsheba but if you feel like it, post it as an answer as it could help in other cases perhaps."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1567594673, "post_id": 57785911, "comment_id": 102007244, "body": "@darune: Not sure I should - I think it&#39;s too idiosyncratic and I wouldn&#39;t do it myself, and I&#39;m of the opinion that a runtime assertion is good enough."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1567596194, "post_id": 57785911, "comment_id": 102007966, "body": "In this case, it is easy to see that the assert will be broken, but in general, this seems to be tough. Is this the actual thing you want to check? I&#39;m asking because in general, in might be more fruitful to have such things done by unit tests, and maybe have them called by a script you also use for compilation, or by a deployment script, or similar. Other than that, can you work with <code>constexpr</code> at such places?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1567596452, "post_id": 57785911, "comment_id": 102008105, "body": "Wanted to make it work with <code>std::is_constant_evaulated()</code> but it acts strangely, maybe someone else will be able to fix it <a href=\"https://godbolt.org/z/Yg5Ysu\" rel=\"nofollow noreferrer\">godbolt</a>."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1567596862, "post_id": 57785911, "comment_id": 102008336, "body": "@Aziuth constexpr might be interesting to explore - unfortunately I cannot use that directly in my actual case though"}], "answers": [{"comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1567595918, "post_id": 57787097, "comment_id": 102007832, "body": "Is this possible with msvc as well ? (or clang ?)"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1567595997, "post_id": 57787097, "comment_id": 102007880, "body": "clang supports gnu extensions, so it should work with clang, however you have to change <code>__attribute__((__warning__))</code> to <code>__attribute__((__deprecated__))</code>. clang doesn&#39;t recognize <code>warning</code> and <code>error</code> attributes, but has a <code>deprecated</code> attribute, typically used."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1567596251, "post_id": 57787097, "comment_id": 102007992, "body": "And I guess this is not possible with MSVC then ? and theres no plans on MS side to support it (?)"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 1, "creation_date": 1567596528, "post_id": 57787097, "comment_id": 102008145, "body": "I have no experience with MSVC, so I am not inclined to answer. I have never seen a way to do <code>__builtin_constant_p</code> in MSVC."}, {"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "edited": false, "score": 1, "creation_date": 1615859646, "post_id": 57787097, "comment_id": 117817024, "body": "@KamilCuk : how would that work on <code>clang</code> with <code>__attribute__((__deprecated__))</code> ? It seems this one triggers a warning any time the function is called in the source code, irrespective of the fact that it will be called or not, thus oblivious to DCE optimization."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 8, "last_activity_date": 1567595192, "creation_date": 1567595192, "answer_id": 57787097, "question_id": 57785911, "link": "https://stackoverflow.com/questions/57785911/compile-time-check-and-runtime-check-at-the-same-time/57787097#57787097", "title": "Compile time check AND runtime check &#39;at the same time&#39;", "body": "<p>A typical way to do in C with gcc compiler, that will also work in C++: you use <code>__builtin_constant_p</code> builtin to check if an expression is a constantly evaluated and then check the expression and then call a function declared with a <code>__attribute__((__warning__))</code> or with <code>__attribute__((__error__))</code>. Like so:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;type_traits&gt;\n\n#define CONCAT(a, b) a ## b\n#define XCONCAT(a, b) CONCAT(a, b)\n#define maybe_static_maybe_not_assert(expr) do { \\\n    if (__builtin_constant_p(expr)) { \\\n            if (!(expr)) { \\\n                extern __attribute__((__warning__( \\\n                \"static_assert: expression: \" #expr \" will fail on runtime!\" \\\n                ))) void XCONCAT(maybe_static_maybe_not_assert_warn, __LINE__)(); \\\n              XCONCAT(maybe_static_maybe_not_assert_warn, __LINE__)(); \\\n         } \\\n    } \\\n    assert(expr); \\\n} while(0)\n\nstruct Dimensions {\n\n    Dimensions&amp; operator=(int i) {\n        maybe_static_maybe_not_assert(i != 0);\n        return *this;\n    }\n\n};\n\nint getDim();\n\nint main() {\n    Dimensions dims;\n    dims = getDim();\n    dims = 0;\n    dims = 1;\n    return 0;\n}\n</code></pre>\n\n<p>It should issue a warning when compiled with optimizations:</p>\n\n<pre><code>In member function 'Dimensions&amp; Dimensions::operator=(int)',\n    inlined from 'int main()' at &lt;source&gt;:32:12:\n&lt;source&gt;:12:70: warning: call to 'maybe_static_maybe_not_assert_warn21' declared with attribute warning: static_assert: expression: i != 0 will fail on runtime! [-Wattribute-warning]\n   12 |                 XCONCAT(maybe_static_maybe_not_assert_warn, __LINE__)(); \\\n      |                                                                      ^\n&lt;source&gt;:21:9: note: in expansion of macro 'maybe_static_maybe_not_assert'\n   21 |         maybe_static_maybe_not_assert(i != 0);\n      |         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nCompiler returned: 0\n</code></pre>\n\n<p>This is the way <code>_FORTIFY_SOURCE</code> is implemented in <a href=\"https://github.com/bminor/glibc/blob/master/string/bits/string_fortified.h#L59\" rel=\"noreferrer\">glibc</a>.</p>\n"}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 4, "answer_count": 1, "score": 16, "last_activity_date": 1567595192, "creation_date": 1567590861, "last_edit_date": 1567594598, "question_id": 57785911, "link": "https://stackoverflow.com/questions/57785911/compile-time-check-and-runtime-check-at-the-same-time", "title": "Compile time check AND runtime check &#39;at the same time&#39;", "body": "<p>Suppose I have the following simplified program:</p>\n\n<p><a href=\"https://godbolt.org/z/W0Orji\" rel=\"noreferrer\">Link to godbolt.org</a>:</p>\n\n<pre><code>#include &lt;cassert&gt;\n\nstruct Dimensions {\n\n    Dimensions&amp; operator=(int i) {\n      assert(i != 0);\n      return *this;\n    }\n\n};\n\nint getDim();\n\nint main() {\n    Dimensions dims;\n    dims = getDim();//ok, just use runtime assert\n    dims = 0;//compile error wanted here\n    return 0;\n}\n</code></pre>\n\n<p>In the first case (<code>getDim</code>), it's not possible to check compile-time so we are happy to just check it at runtime.</p>\n\n<p>But is it somehow possible to detect at compile as well (for the second case, <code>dims = 0;</code>), when <em>in theory</em> it looks like it could be possible ? (perhaps with some kind of overloading or wrapper even ?)</p>\n"}, {"tags": ["c++", "numpy", "pybind11"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1567595373, "post_id": 57785564, "comment_id": 102007589, "body": "A numpy array is not an std::vector, so there is no way to wrap <i>this</i> function to avoid copying. You need a function that accepts a numpy array argument instead."}], "answers": [{"tags": [], "owner": {"reputation": 2343, "user_id": 9448377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wim Lavrijsen", "link": "https://stackoverflow.com/users/9448377/wim-lavrijsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1567991172, "creation_date": 1567991172, "answer_id": 57846825, "question_id": 57785564, "link": "https://stackoverflow.com/questions/57785564/pybind11-how-to-wrap-c-function-that-takes-stdvectordouble-as-argument-to/57846825#57846825", "title": "pybind11: how to wrap c++ function that takes std::vector&lt;double&gt; as argument to avoid data copy", "body": "<p>Where does the array you want to pass in start its life? If you have control over its creation, then you can make it an std::vector and take a numpy view on that vector's data(). That way, you can use both at the same time: the vector when in C++-land, the numpy array when on the Python side.</p>\n\n<p>Only caveat is that the vector should not resize during the lifetime of the numpy view (or you know its maximum size ever, and reserve() that memory just after creation).</p>\n\n<p>If the vector never resizes, then you can make the vector a data member of the view to sync the life times.</p>\n"}], "owner": {"reputation": 565, "user_id": 3970001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9251b8fbe0be6bf9f2b4d347642fc35?s=128&d=identicon&r=PG&f=1", "display_name": "cncggvg", "link": "https://stackoverflow.com/users/3970001/cncggvg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567991172, "creation_date": 1567589753, "question_id": 57785564, "link": "https://stackoverflow.com/questions/57785564/pybind11-how-to-wrap-c-function-that-takes-stdvectordouble-as-argument-to", "title": "pybind11: how to wrap c++ function that takes std::vector&lt;double&gt; as argument to avoid data copy", "body": "<p>c++ function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    double cpp_func(const std::vector&lt;double&gt;&amp; x) {\n        return ...;\n    }\n</code></pre>\n\n<p>I want to use <code>pybind11</code> to wrap this function to python which accept numpy array as argument and <code>x</code> may be very large so I want to pass the numpy array by reference or pointer.</p>\n"}, {"tags": ["c++", "string", "char", "int", "ostream"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1567589873, "post_id": 57785558, "comment_id": 102004675, "body": "<a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">asciitable.com</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1567605300, "post_id": 57785558, "comment_id": 102013097, "body": "Re: &quot;I cast it to string&quot; -- there are no casts in this code. A cast is something you write in your source code to tell the compiler to do a conversion."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 2, "last_activity_date": 1567590319, "last_edit_date": 1567590319, "creation_date": 1567589965, "answer_id": 57785628, "question_id": 57785558, "link": "https://stackoverflow.com/questions/57785558/troubles-with-string-and-double-get-another-number-after-equating/57785628#57785628", "title": "Troubles with string and double, get another number after equating", "body": "<p>That's because here</p>\n\n<pre><code>res = str[str.size() - 9];\n</code></pre>\n\n<p>You are storing the value of a <code>char</code> in an <code>int</code>. Printing the same value as <code>int</code> can have different results when you send it to <code>std::cout</code> than when you print it as <code>char</code>. For integers <a href=\"http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/\" rel=\"nofollow noreferrer\">this</a> operator is called, while for chars <a href=\"http://www.cplusplus.com/reference/ostream/ostream/operator-free/\" rel=\"nofollow noreferrer\">this</a> operator is called instead.</p>\n\n<p>In your example, you probably have a value of <code>'1'</code> (which is <code>49</code> in ASCII). When you print it as a <code>char</code> it prints <code>1</code>, and when you print it as an <code>int</code>, it prints <code>49</code>.</p>\n\n<p>One way to solve this problem is to make <code>int res</code> be a <code>char</code> instead.</p>\n"}], "owner": {"reputation": 129, "user_id": 11363114, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MdKmgvHTDvc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relSlxQtXA8nsik_33aMcVEygGXIQ/mo/photo.jpg?sz=128", "display_name": "\u042f\u0440\u0438\u0433\u0430 \u041e\u043b\u0435\u0433", "link": "https://stackoverflow.com/users/11363114/%d0%af%d1%80%d0%b8%d0%b3%d0%b0-%d0%9e%d0%bb%d0%b5%d0%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57785628, "answer_count": 1, "score": 2, "last_activity_date": 1569584840, "creation_date": 1567589701, "last_edit_date": 1569584840, "question_id": 57785558, "link": "https://stackoverflow.com/questions/57785558/troubles-with-string-and-double-get-another-number-after-equating", "title": "Troubles with string and double, get another number after equating", "body": "<p>After calculating a number, I need to get several digits of this one. I cast it to string, and print a digit, but in one piece of code, it works correct (prints only one digit), but after I equate it to another variable, the program prints 2 digits. </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;ctime&gt;    \n#include &lt;sstream&gt;\n\nusing namespace std;\nint main()\n{\n    time_t seconds;\n    int res = 0;\n    seconds = time(NULL);\n    double nump = seconds;\n    cout.precision(45);\n    for (int i = 1; i &lt;= 100; i++) {\n        nump = nump /10;\n    }\n    std::ostringstream strs;\n    strs.precision(55);\n    strs &lt;&lt; nump;\n    std::string str = strs.str();\n    cout &lt;&lt; str[str.size() - 9] &lt;&lt; endl; // here we get a gidit from the string (e.g. 5)\n    res = str[str.size() - 9];\n    cout &lt;&lt; res &lt;&lt; endl; // here we get a number (e.g. 49)\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I cant understand whats going on. Please help!</p>\n"}, {"tags": ["c++", "qt", "qcombobox"], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 10220019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1b2e39d80ba5e709c2c81017833b54d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Binair", "link": "https://stackoverflow.com/users/10220019/c-binair"}, "edited": false, "score": 0, "creation_date": 1567592864, "post_id": 57785890, "comment_id": 102006354, "body": "Is there any difference between using <code>auto data = ui.comboBox-&gt;itemData(0).value&lt;QList&lt;QVariant&gt;&gt;();</code> and <code>QList&lt;QVariant&gt; data = ui.comboBox-&gt;itemData(0).value&lt;QList&lt;QVariant&gt;&gt;();</code>?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "reply_to_user": {"reputation": 343, "user_id": 10220019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1b2e39d80ba5e709c2c81017833b54d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Binair", "link": "https://stackoverflow.com/users/10220019/c-binair"}, "edited": false, "score": 0, "creation_date": 1567593186, "post_id": 57785890, "comment_id": 102006516, "body": "The difference is that you explicitly declare the type of <code>data</code>. You may write it in that way too. No problem in this case."}], "tags": [], "owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "is_accepted": true, "score": 1, "last_activity_date": 1567590774, "creation_date": 1567590774, "answer_id": 57785890, "question_id": 57785545, "link": "https://stackoverflow.com/questions/57785545/qcombobox-with-additional-data-for-items-next-to-the-string/57785890#57785890", "title": "QCombobox with additional data for items next to the string", "body": "<p>You can construct a variant out of a <code>QList</code> and set it as a user data. For example:</p>\n\n<pre><code>ui.comboBox-&gt;addItem(\"Animal name\",\n                     QList&lt;QVariant&gt;() &lt;&lt; animal_index &lt;&lt; animal_type);\n</code></pre>\n\n<p>To read the item data back you can do this:</p>\n\n<pre><code>auto data = ui.comboBox-&gt;itemData(0).value&lt;QList&lt;QVariant&gt;&gt;();\nassert(data.size() == 2);\nauto animal_index = data.first().toInt();\nauto animal_type = data.last().toInt();\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 10220019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1b2e39d80ba5e709c2c81017833b54d?s=128&d=identicon&r=PG&f=1", "display_name": "C. Binair", "link": "https://stackoverflow.com/users/10220019/c-binair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 57785890, "answer_count": 1, "score": 1, "last_activity_date": 1567590774, "creation_date": 1567589672, "question_id": 57785545, "link": "https://stackoverflow.com/questions/57785545/qcombobox-with-additional-data-for-items-next-to-the-string", "title": "QCombobox with additional data for items next to the string", "body": "<p>I'm having a database with two types of one thing. Let's say I have animals and then the two types are birds and fish. I want one combobox in which the two are combined. So basically you can chose any animal either some bird or some fish. </p>\n\n<p>In the combobox I would like to display the names of all the animals in the database, but I would also like to add some extra data to each item next to the name to use that for programming. I would like to add the index and the type.</p>\n\n<p>Before I've used the userdata variable to add the index, but then I only had one type so new which db it should query after. (See QCombobox documentation: <code>addItem(const QString &amp;text, const QVariant &amp;userData = QVariant())</code>). So what I did then was: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>ui.comboBox-&gt;addItem(\"Animal name\", animal_index);\n</code></pre>\n\n<p>I'm not sure if this is the purpose of the userdata variable but this way it did what I wanted it to do. When an okay button was pressed I can read the current data and use that to query the database for all properties of that animal.</p>\n\n<p>But what I want now is to add two additional information variables to a combobox item. Such that I know which db table I should query to obtain the animal properties.</p>\n\n<p>So I would either like to be able do something like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>ui.comboBox-&gt;addItem(\"Animal name\", animal_index, animal type);\n</code></pre>\n\n<p>I expect this also requires a change to the current data procedure to actually obtain the second variable.\nSo what I think would be better is with the use of an array/vector/struct:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>ui.comboBox-&gt;addItem(\"Animal name\", [animal_index, animal type]);\n</code></pre>\n\n<p>But I'm not sure how to make a array/vector/struct as QVariant.</p>\n\n<p>I know I could also just make ranges in the index. So all bird have a index between 0 and 999 and all fish between 1000-1999. But this would require some extra database management which I do not want.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1567589474, "post_id": 57785400, "comment_id": 102004467, "body": "Please show a minimal input and actual vs. expected output."}, {"owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "edited": false, "score": 0, "creation_date": 1567589851, "post_id": 57785400, "comment_id": 102004668, "body": "<code>first = fir;</code>?? That is just the beginning of your problems. You will not get the expected result (fraction) since you&#39;re doing integer division."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567591139, "post_id": 57785400, "comment_id": 102005443, "body": "Are you intending to overwrite every element of <code>arrays</code> each time, or do you mean to keep old answers there?"}, {"owner": {"reputation": 73, "user_id": 11592922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5bwT1I34ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp_CDZLy2GqrbaSVW0uBN_1v9HEw/mo/photo.jpg?sz=128", "display_name": "Ball Rall", "link": "https://stackoverflow.com/users/11592922/ball-rall"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567594596, "post_id": 57785400, "comment_id": 102007189, "body": "@Caleth I want it to keep the old answers. Eg Input ten names and then after all the names are inputted It will output all the ten names"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567594796, "post_id": 57785400, "comment_id": 102007326, "body": "Then you probably <i>don&#39;t</i> want <code>for (int i = 0; i &lt; limit; i++) { arrays[i] = answer; }</code>, instead e.g. <code>int answer_count = 0;</code> ... <code>arrays[answer_count++] = answer;</code>. Or much better <code>std::vector&lt;int&gt; answers;</code> ... <code>answers.push_back(answer);</code>"}, {"owner": {"reputation": 73, "user_id": 11592922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5bwT1I34ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp_CDZLy2GqrbaSVW0uBN_1v9HEw/mo/photo.jpg?sz=128", "display_name": "Ball Rall", "link": "https://stackoverflow.com/users/11592922/ball-rall"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567607992, "post_id": 57785400, "comment_id": 102014717, "body": "@Caleth I have tried the count++ from before but the answer was still 0 and I am not that good with vectors.I have modified the code it is still 0."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567608231, "post_id": 57785400, "comment_id": 102014882, "body": "<code>printfraction</code> would need loop to count, rather than limit, and not be reading the space after the last answer"}, {"owner": {"reputation": 73, "user_id": 11592922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5bwT1I34ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp_CDZLy2GqrbaSVW0uBN_1v9HEw/mo/photo.jpg?sz=128", "display_name": "Ball Rall", "link": "https://stackoverflow.com/users/11592922/ball-rall"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567608772, "post_id": 57785400, "comment_id": 102015179, "body": "@Caleth I did not quite get that.Did you mean to create a loop in print fraction func and do not use i&lt;limit;. and what about the final part relating to the spaces.I did not understand it"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567609673, "post_id": 57785400, "comment_id": 102015717, "body": "You start with 40 zeroes. If you read in 3 fractions, you&#39;ll have 3 answers followed by 37 zeros. Incrementing <code>count</code> in the printing will print one of those zeroes. Yes, use a loop but with <code>i &lt; count</code> not <code>i &lt; limit</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 73, "user_id": 11592922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5bwT1I34ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp_CDZLy2GqrbaSVW0uBN_1v9HEw/mo/photo.jpg?sz=128", "display_name": "Ball Rall", "link": "https://stackoverflow.com/users/11592922/ball-rall"}, "edited": false, "score": 0, "creation_date": 1567610559, "post_id": 57785400, "comment_id": 102016208, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198950/discussion-between-caleth-and-ball-rall\">continue this discussion in chat</a>."}, {"owner": {"reputation": 73, "user_id": 11592922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5bwT1I34ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp_CDZLy2GqrbaSVW0uBN_1v9HEw/mo/photo.jpg?sz=128", "display_name": "Ball Rall", "link": "https://stackoverflow.com/users/11592922/ball-rall"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1567614533, "post_id": 57785400, "comment_id": 102018220, "body": "@Caleth thanks for the help.Could you give me an idea of the duration required for me to learn how to develop an app or a software as a beginner."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 11592922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5bwT1I34ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp_CDZLy2GqrbaSVW0uBN_1v9HEw/mo/photo.jpg?sz=128", "display_name": "Ball Rall", "link": "https://stackoverflow.com/users/11592922/ball-rall"}, "edited": false, "score": 0, "creation_date": 1567590522, "post_id": 57785635, "comment_id": 102005043, "body": "thanks fixed that but then the output was not being outputted so I modify the code and now the output is bunch of zeros.Can you help me out with that.Sorry was a bit distracted so I did not notice the fir=first.Thanks"}], "tags": [], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1567590827, "last_edit_date": 1567590827, "creation_date": 1567589984, "answer_id": 57785635, "question_id": 57785400, "link": "https://stackoverflow.com/questions/57785400/the-program-would-not-end-and-show-the-output-when-it-must/57785635#57785635", "title": "The program would not end and show the output when it must", "body": "<p>First of all, you do'nt need the num and dum variables in your main function, when you don't use them there:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\nconst int limit = 40;\n\nstruct fraction\n{\n    int numenator = 0;\n    int dumenator = 0;\n};\n\nclass FractionClass\n{\npublic:\n\n    int arrays[limit] = {};\n    int answer = 0;\n    int sentinel = 0;\n    bool right = true;\n\n    void readfraction()\n    {\n        cout &lt;&lt; \"Input the first number: \";\n        cin &gt;&gt; fir;\n\n        if (fir == -1)\n        {\n            right = false;\n            return;\n        }\n\n        cout &lt;&lt; \"Input the second number: \";\n        cin &gt;&gt; sec;\n\n\n        answer = fir / sec;\n\n        if (answer == -1)\n        {\n            right = false;\n            return;\n        }\n\n        for (int i = 0; i &lt; limit; i++)\n        {\n            arrays[i] = answer;\n        }\n\n    }\n\n    void printfraction()\n    {\n        for (int i = 0; i &lt; limit; i++)\n        {\n            cout &lt;&lt; \"Answer: \" &lt;&lt; arrays[i];\n        }\n\n    }\n\nprivate:\n    int fir, sec;\n};\n\n\nint main()\n{\n    FractionClass bill;\n\n    while (bill.right == true)\n    {\n        bill.readfraction();\n        cout &lt;&lt; endl;\n    }\n\n    bill.printfraction();\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Second you assign <code>first = fir</code> after you read your input in <code>first</code>. <code>fir</code> is never initialized, so it is undefined behaviour. The same applies to <code>second</code> and <code>sec</code>. Remember the left value gets assigned with the value on the right, not in the other direction! </p>\n\n<p>If you really want ro return after the first value = -1 you should add a return statement in the if-clause.<br>\nSecond you never reach the else-clause in main, because you break the while loop when right is set to false. I think you should print the output outside the loop. I don't understand your code, or what you are trying to achieve...</p>\n"}], "owner": {"reputation": 73, "user_id": 11592922, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B5bwT1I34ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp_CDZLy2GqrbaSVW0uBN_1v9HEw/mo/photo.jpg?sz=128", "display_name": "Ball Rall", "link": "https://stackoverflow.com/users/11592922/ball-rall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567611051, "creation_date": 1567589160, "last_edit_date": 1567611051, "question_id": 57785400, "link": "https://stackoverflow.com/questions/57785400/the-program-would-not-end-and-show-the-output-when-it-must", "title": "The program would not end and show the output when it must", "body": "<p>I cannot understand the reason behind it but it would not end when the input is -1 or the output is -1.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\n\nconst int limit = 40;\n\nstruct fraction\n{\n    int numenator = 0;\n    int dumenator = 0;\n};\n\nclass FractionClass\n{\npublic:\n\n    double answer = 0;\n    double sentinel = 0;\n    bool right = true;\n    double count = 0;\n    vector&lt;int&gt; answers;\n\n    void readfraction()\n    {\n        cout &lt;&lt; \"Input the first number: \";\n        cin &gt;&gt; fir;\n\n        if (fir == -1)\n        {\n            right = false;\n        }\n\n        cout &lt;&lt; \"Input the second number: \";\n        cin &gt;&gt; sec;\n\n\n        answer = fir / sec;\n\n        if (answer == -1)\n        {\n            right = false;\n        }\n\n        answers.push_back(answer);\n    }\n\n    void printfraction()\n    {\n        for (int answer : answers) cout &lt;&lt; \"Answer: \" &lt;&lt; answer;\n    }\n\nprivate:\n    double fir, sec;\n};\n\n\nint main()\n{\n    FractionClass bill;\n\n    while (bill.right == true)\n    {\n        bill.readfraction();\n        cout &lt;&lt; endl;\n    }\n\n    bill.printfraction();\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>This is the code. I wanted it to end and display the output once the first input fir or answer the output is -1.I think that the problem is in the while loop.I am not sure. Any help is appreciated.</p>\n\n<p>My wanted output</p>\n\n<p>Enter the fractions: -</p>\n\n<p>Fraction #1: 2</p>\n\n<p>Fraction #1: 5</p>\n\n<p>Fraction #2: 8</p>\n\n<p>Fraction #2: 3</p>\n\n<p>Fraction #3: 2</p>\n\n<p>Fraction #3: -1</p>\n\n<p>Fraction #4: 4</p>\n\n<p>Fraction #4: -9</p>\n\n<p>Fraction #5: -1</p>\n\n<hr>\n\n<p>Result Are The Followings: -\nFraction #1: 0.4</p>\n\n<p>Fraction #2: 2.6666667</p>\n\n<p>Fraction #3: -2</p>\n\n<p>Fraction #4: -0.4444444</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 1200, "user_id": 9298910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819944a4b6fdd239fcefe369a25a129?s=128&d=identicon&r=PG&f=1", "display_name": "Lehks", "link": "https://stackoverflow.com/users/9298910/lehks"}, "edited": false, "score": 1, "creation_date": 1567588887, "post_id": 57785266, "comment_id": 102004137, "body": "What do you mean by &quot;the name of the C++ STL&quot;?"}, {"owner": {"reputation": 21, "user_id": 1940257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9abd9eddf4da2d794f87383691443c2?s=128&d=identicon&r=PG", "display_name": "TestUser", "link": "https://stackoverflow.com/users/1940257/testuser"}, "reply_to_user": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 0, "creation_date": 1567590348, "post_id": 57785266, "comment_id": 102004941, "body": "@gast128 - Did you mean that MAP and Vector on windows is same as MAP and Vector on linux?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1567590409, "post_id": 57785266, "comment_id": 102004977, "body": "The STL was a library put out by HP and later SGI back in the 90&#39;s. It probably had conditional blocks for different compilers and OSes in its source. The specifications of large chunks of it were adopted into the first C++ standard, and different compiler vendors have their own implementations of the standard library..."}, {"owner": {"reputation": 1484, "user_id": 11102572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c83b6b17eb13d31ab7c5d1ac554ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Igor G", "link": "https://stackoverflow.com/users/11102572/igor-g"}, "edited": false, "score": 0, "creation_date": 1567590455, "post_id": 57785266, "comment_id": 102005011, "body": "Is a wooden spoon the same as a silver spoon?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 1484, "user_id": 11102572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c83b6b17eb13d31ab7c5d1ac554ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Igor G", "link": "https://stackoverflow.com/users/11102572/igor-g"}, "edited": false, "score": 0, "creation_date": 1567590479, "post_id": 57785266, "comment_id": 102005025, "body": "@IgorG I was the Golden Spoon mathematician in my final year at Cambridge (lowest 1st class degree). The wooden spoon was given to the person with the lowest 3rd class degree."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 1, "creation_date": 1567590689, "post_id": 57785266, "comment_id": 102005157, "body": "@Testuser. you need to specify which vendor&#39;s implementation you use. The STL only describes the expected behavior of std::map, e.g. O(log(n)) performance in lookup. In practice most use a red - black tree in the implementation but anything adhering to the specification is STL compliant."}, {"owner": {"reputation": 21, "user_id": 1940257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9abd9eddf4da2d794f87383691443c2?s=128&d=identicon&r=PG", "display_name": "TestUser", "link": "https://stackoverflow.com/users/1940257/testuser"}, "reply_to_user": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 2, "creation_date": 1567591234, "post_id": 57785266, "comment_id": 102005505, "body": "@gast128 - so will it be right to say that vector and map adhere to Same specifications but underlying implementation might differ?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1567591329, "post_id": 57785266, "comment_id": 102005580, "body": "@TestUser: Boom! Exactly that."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1567590238, "post_id": 57785335, "comment_id": 102004888, "body": "Thanks for removing that final paragraph. Downvote converted to upvote."}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": false, "score": 6, "last_activity_date": 1567590195, "last_edit_date": 1567590195, "creation_date": 1567588917, "answer_id": 57785335, "question_id": 57785266, "link": "https://stackoverflow.com/questions/57785266/does-stl-library-differ-on-different-platforms/57785335#57785335", "title": "Does STL library differ on different platforms?", "body": "<p>C++ was designed for abstract hardware but Standard C++ Library <strong>implementations</strong> differ, yes. Library vendors are required to follow the C++ Standard rules but are free to provide their implementation where allowed (the <em>implementation defined</em> wording in the standard). Headers also differ.</p>\n"}, {"comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1567589254, "post_id": 57785358, "comment_id": 102004338, "body": "Actually, you don&#39;t &quot;always need to include&quot; the same headers to use various things. Some implementations might have other header interdependencies in which case your code works fine with one standard library implementation but not another. Of course, it&#39;s always programmer error for not including what you use, but"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1567589305, "post_id": 57785358, "comment_id": 102004378, "body": "@rubenvb: Don&#39;t I make that clear in my final paragraph? (Although I have made an edit following your comment.)"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1567589421, "post_id": 57785358, "comment_id": 102004440, "body": "Now it&#39;s better yes. The wording was a bit strong in the first version :)."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1567589443, "post_id": 57785358, "comment_id": 102004456, "body": "@rubenvb: Yes I&#39;m rather dogmatic for a cat."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1567593894, "post_id": 57785358, "comment_id": 102006830, "body": "Actually the specification has platform specific elements in it, as: time functions returning 0 if the platform doesn&#39;t have a clock. Although the c++ interface would be the same, the behavior can be different"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 8, "last_activity_date": 1567594498, "last_edit_date": 1567594498, "creation_date": 1567589014, "answer_id": 57785358, "question_id": 57785266, "link": "https://stackoverflow.com/questions/57785266/does-stl-library-differ-on-different-platforms/57785358#57785358", "title": "Does STL library differ on different platforms?", "body": "<p>The <em>specification</em> of the C++ Standard Library is not contingent on any particular platform or compiler, although it does depend on the target C++ <em>standard</em>, and its behaviour is dependent function on various properties of a platform.</p>\n\n<p>But the <em>implementation</em> of the C++ Standard Library is extremely dependent on the compiler and operating system. Some of the C++ Standard Library can even hardcoded into compilers.</p>\n\n<p>But you use it in the same way. E.g. for <code>std::cout</code> and <code>std::cin</code> you should <em>always</em> write <code>#include &lt;iostream&gt;</code> as that's what the documentation says you're supposed to do. The names of header files can vary between implementations, but the ones you are supposed to use directly never differ.</p>\n\n<p>This is why it's a good idea not to rely on <code>#include</code>s being available implicitly via other headers, or by using fancy non-standard <code>#include</code>s like <code>&lt;bits/...&gt;</code>. If you do so then you are not writing portable C++.</p>\n"}], "owner": {"reputation": 21, "user_id": 1940257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d9abd9eddf4da2d794f87383691443c2?s=128&d=identicon&r=PG", "display_name": "TestUser", "link": "https://stackoverflow.com/users/1940257/testuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567594498, "creation_date": 1567588688, "last_edit_date": 1567589299, "question_id": 57785266, "link": "https://stackoverflow.com/questions/57785266/does-stl-library-differ-on-different-platforms", "title": "Does STL library differ on different platforms?", "body": "<p>Is C++ Standard Template Library (STL) on Windows different than the one on Linux OR any other Platform? Are the headers of STL differ with platform as well OR is STL just a header library and its implementation in CRT?</p>\n\n<p>We know that compiler differ with platform and also the C Runtime Library differ with Platform. Going by this is it true that even Standard Template Library (STL) differ with platform?</p>\n\n<p>Please clarify this doubt.</p>\n\n<p>Also, what is the name of the C++ STL on windows and whats on Linux?</p>\n\n<p>I have been trying to understand this by going various articles online and trying to frame a single workflow in my mind to understand the terms better.</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1567595901, "post_id": 57786514, "comment_id": 102007819, "body": "Thank you for your answer. I used coverity tool and it is showing this warning."}], "tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": true, "score": 0, "last_activity_date": 1567592905, "creation_date": 1567592905, "answer_id": 57786514, "question_id": 57785219, "link": "https://stackoverflow.com/questions/57785219/uninit-member-non-static-class-member-field-m-cjobstate-bstatus-is-not-initiali/57786514#57786514", "title": "uninit_member: Non-static class member field m_cJobState.bstatus is not initialized in this constructor nor in any functions that it calls", "body": "<p>You did not specify from what tool you got warnings and also posted code\nshould give different errors I suspect. Seems that the tool requires you to initialize all aggregate members in constructors (C++ standard does not). </p>\n\n<p>Since C++11 (question was tagged like that) it should compile and run with uniform initialization of aggregate members: </p>\n\n<pre><code>enum WorkState {SomethingElse, Crappy, Etc}; // wasn't defined in OP\n\nstruct MgrStatus\n{\n    bool bEULA;                 \n    bool bstatus; \n    WorkState eActivationState;\n};\n\nclass SubManager\n{\npublic:\n    SubManager();  // constructor declaration was missing in OP \nprivate:\n    MgrStatus m_cJobState;\n};\n\nSubManager::SubManager()\n    : m_cJobState{false,false,Crappy}\n{ }\n\nint main() // to demo it runs \n{ \n    SubManager s;\n    (void)s; // just to silence unused variable s warning\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 57786514, "answer_count": 1, "score": 0, "last_activity_date": 1567592905, "creation_date": 1567588469, "last_edit_date": 1567589205, "question_id": 57785219, "link": "https://stackoverflow.com/questions/57785219/uninit-member-non-static-class-member-field-m-cjobstate-bstatus-is-not-initiali", "title": "uninit_member: Non-static class member field m_cJobState.bstatus is not initialized in this constructor nor in any functions that it calls", "body": "<p><strong>I am getting the below warning at SubManager constructor:</strong></p>\n\n<blockquote>\n  <p>Uninitialized scalar field (UNINIT_CTOR)</p>\n  \n  <p>uninit_member: Non-static class member field m_cJobState.bEULA is not initialized in this constructor nor in any functions that it calls.</p>\n  \n  <p>uninit_member: Non-static class member field m_cJobState.bstatus is not initialized in this constructor nor in any functions that it calls.</p>\n  \n  <p>uninit_member: Non-static class member field m_cJobState.eActivationState is not initialized in this constructor nor in any functions that it calls.</p>\n</blockquote>\n\n<p><strong>Below is the code snippet:</strong></p>\n\n<p><strong>SubManager.h file</strong></p>\n\n<pre><code>struct MgrStatus\n{\n    bool bEULA;                 \n    bool bstatus; \n    WorkState eActivationState;\n};\n\nclass SubManager\n{\nprivate:\n    MgrStatus m_cJobState;   \n};\n</code></pre>\n\n<p><strong>SubManager.cpp file</strong></p>\n\n<pre><code>SubManager::SubManager()\n{\n}\n</code></pre>\n\n<p>To resolve the warning,</p>\n\n<p>Do we need to initialize structure variables in the above constructor?\nIf we need to initialize, how to initialize the enum variable (WorkState eActivationState;)?</p>\n"}, {"tags": ["c++", "callback"], "comments": [{"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1567587962, "post_id": 57785003, "comment_id": 102003600, "body": "Like this?  <code>serial.setCallback(std::bind(&amp;MyClass::received, this, std::placeholders::_1, std::placeholders::_2));</code>"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 1, "creation_date": 1567588037, "post_id": 57785003, "comment_id": 102003634, "body": "Yep, exactly in this way."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1567588058, "post_id": 57785003, "comment_id": 102003646, "body": "Have you tried making your <code>MyClass:received</code> function a <code>static</code> member?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567588701, "post_id": 57785003, "comment_id": 102004018, "body": "@MaxLanghof Right, mis-parsed the question."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567589855, "post_id": 57785003, "comment_id": 102004670, "body": "Sadly the most direct duplicate is <a href=\"https://stackoverflow.com/questions/400257/how-can-i-pass-a-class-member-function-as-a-callback\">stuck in pre-C++11 land</a>... Do we not have a canonical dupe target for this?"}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567588874, "post_id": 57785256, "comment_id": 102004125, "body": "Do you not have lambdas available? <code>std::bind</code> is basically obsolete since C++11..."}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567588940, "post_id": 57785256, "comment_id": 102004164, "body": "How would this look using lambdas?"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 2, "creation_date": 1567589021, "post_id": 57785256, "comment_id": 102004212, "body": "Like that <code>serial.setCallback([this] (auto data, auto len) { received(data, len); })</code>."}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1567589137, "post_id": 57785256, "comment_id": 102004277, "body": "Also works great. Thank you! Is this the more recommended approach?"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1567589287, "post_id": 57785256, "comment_id": 102004361, "body": "Yes it is. Watch <a href=\"https://www.youtube.com/watch?v=ZlHi8txU4aQ\" rel=\"nofollow noreferrer\">this video</a>  for more details on the subject."}], "tags": [], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "is_accepted": false, "score": 1, "last_activity_date": 1567588665, "last_edit_date": 1567588665, "creation_date": 1567588641, "answer_id": 57785256, "question_id": 57785003, "link": "https://stackoverflow.com/questions/57785003/using-a-void-function-as-a-callback-convert-from-stdfunctionvoid/57785256#57785256", "title": "Using a void function as a callback, convert from &quot;std::function&lt;void ()&gt;?", "body": "<p>Answered in comments by <a href=\"https://stackoverflow.com/users/8950365/rafix07\">rafix07</a></p>\n\n<p>What I needed was to adjust the <code>setCallback</code> line to:</p>\n\n<pre><code>serial.setCallback(\n    std::bind(&amp;MyClass::received, this, std::placeholders::_1, std::placeholders::_2));\n</code></pre>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567588665, "creation_date": 1567587708, "question_id": 57785003, "link": "https://stackoverflow.com/questions/57785003/using-a-void-function-as-a-callback-convert-from-stdfunctionvoid", "title": "Using a void function as a callback, convert from &quot;std::function&lt;void ()&gt;?", "body": "<p>I have a boost::Asio based serial port reader that uses a callback, as follows:</p>\n\n<pre><code>void received(const char *data, unsigned int len)\n{\n\n        string s(data, len);\n        cout &lt;&lt;  s  &lt;&lt; endl;    \n\n}\n\nint main()\n{\n\n    try {\n        CallbackAsyncSerial serial(\"COM4\", 115200);\n        serial.setCallback(received);\n        for(;;)\n        {\n            if(serial.errorStatus() || serial.isOpen()==false)\n            {\n                cerr&lt;&lt;\"Error: serial port unexpectedly closed\"&lt;&lt;endl;\n                break;\n            }\n            char c;\n            cin.get(c); //blocking wait for standard input\n           serial.write(&amp;c,1);\n        }\n        quit:\n        serial.close();\n    } catch (std::exception&amp; e) {\n        cerr&lt;&lt;\"Exception: \"&lt;&lt;e.what()&lt;&lt;endl;\n    }\n\n}\n</code></pre>\n\n<p>This, as above, compiles and runs. Now I need to merge it into an existing class, so i have:</p>\n\n<pre><code>void MyClass::received(const char *data, unsigned int len)\n{\n\n        string s(data, len);\n        cout &lt;&lt;  s  &lt;&lt; endl;    \n\n}\n\nint MyClass::main()\n{\n\n    try {\n        CallbackAsyncSerial serial(\"COM4\", 115200);\n        serial.setCallback(received); //COMPILE ERROR HERE\n        for(;;)\n        {\n            if(serial.errorStatus() || serial.isOpen()==false)\n            {\n                cerr&lt;&lt;\"Error: serial port unexpectedly closed\"&lt;&lt;endl;\n                break;\n            }\n            char c;\n            cin.get(c); //blocking wait for standard input\n           serial.write(&amp;c,1);\n        }\n        quit:\n        serial.close();\n    } catch (std::exception&amp; e) {\n        cerr&lt;&lt;\"Exception: \"&lt;&lt;e.what()&lt;&lt;endl;\n    }\n\n}\n</code></pre>\n\n<p>However, adding <code>MyClass::received</code> stops the compile, giving me:</p>\n\n<pre><code>Error (active)  E0415   no suitable constructor exists to convert from \"void (const char *data, unsigned int len)\" to \"std::function&lt;void (const char *, size_t)&gt;\"\n</code></pre>\n\n<p>I have tried adjusting it to:</p>\n\n<p><code>std::function&lt; void() &gt;received(const char *data, unsigned int len);</code></p>\n\n<p>But i see the same thing. \nWhat do i need to do here?</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "watermark", "blending"], "comments": [{"owner": {"reputation": 12540, "user_id": 11089932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N9t0d.jpg?s=128&g=1", "display_name": "HansHirse", "link": "https://stackoverflow.com/users/11089932/hanshirse"}, "edited": false, "score": 0, "creation_date": 1567596667, "post_id": 57784853, "comment_id": 102008214, "body": "In <code>addWeighted(src1(pos), alpha, src2_copy, beta, 0.0, dst)</code> you overwrite <code>dst</code> with the smaller, logo-size result. Change that to <code>addWeighted(dst(pos), alpha, src2_copy, beta, 0.0, dst(pos))</code>, and the final <code>dst</code> should be good."}, {"owner": {"reputation": 151, "user_id": 6911480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1daab39250cf2bfa7ccb9c7b68d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/6911480/saeed"}, "reply_to_user": {"reputation": 12540, "user_id": 11089932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N9t0d.jpg?s=128&g=1", "display_name": "HansHirse", "link": "https://stackoverflow.com/users/11089932/hanshirse"}, "edited": false, "score": 0, "creation_date": 1567599357, "post_id": 57784853, "comment_id": 102009727, "body": "@hanshire yes. it is worked correctly. thank you. :)"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 6911480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1daab39250cf2bfa7ccb9c7b68d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/6911480/saeed"}, "edited": false, "score": 0, "creation_date": 1567591042, "post_id": 57785307, "comment_id": 102005377, "body": "@hanshire Just a question. finally in y\u062eur code, we blend a part of main image with logo and both have equal size. but final output is not which i want. i want see first image as a result, which has a logo as a watermark."}, {"owner": {"reputation": 12540, "user_id": 11089932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N9t0d.jpg?s=128&g=1", "display_name": "HansHirse", "link": "https://stackoverflow.com/users/11089932/hanshirse"}, "reply_to_user": {"reputation": 151, "user_id": 6911480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1daab39250cf2bfa7ccb9c7b68d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/6911480/saeed"}, "edited": false, "score": 0, "creation_date": 1567591401, "post_id": 57785307, "comment_id": 102005614, "body": "@Saeed Yes, I just figured that out - sorry. For a separate output image <code>dst</code>, you either have to create a copy beforehand, i.e. <code>cv::Mat dst = img.clone()</code> and then further work on <code>dst</code> instead of <code>img</code> OR you clone the contents of <code>img</code> after the blending to <code>dst</code>."}, {"owner": {"reputation": 151, "user_id": 6911480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1daab39250cf2bfa7ccb9c7b68d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/6911480/saeed"}, "edited": false, "score": 0, "creation_date": 1567595203, "post_id": 57785307, "comment_id": 102007492, "body": "@hanshire Actually I want to have in-palce blending so i want to use source as destination.  I mean, at the end, I want main image which have a small logo in a corner of it. currently, i see final image as the same size of logo."}, {"owner": {"reputation": 12540, "user_id": 11089932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N9t0d.jpg?s=128&g=1", "display_name": "HansHirse", "link": "https://stackoverflow.com/users/11089932/hanshirse"}, "reply_to_user": {"reputation": 151, "user_id": 6911480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1daab39250cf2bfa7ccb9c7b68d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/6911480/saeed"}, "edited": false, "score": 0, "creation_date": 1567595577, "post_id": 57785307, "comment_id": 102007686, "body": "@Saeed Can&#39;t confirm. For me, <code>img</code> has still size <code>300 x 300</code>. Of course, <code>img(pos)</code> has size <code>25 x 25</code>, but you have to look at <code>img</code>! Apart from that, I can&#39;t think of any other pitfall. Maybe provide the code, you actually use right now."}, {"owner": {"reputation": 151, "user_id": 6911480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1daab39250cf2bfa7ccb9c7b68d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/6911480/saeed"}, "edited": false, "score": 0, "creation_date": 1567595989, "post_id": 57785307, "comment_id": 102007875, "body": "@hanshire You are right. you used an artificial image and I read a real image instead. now i write my code which i run it."}], "tags": [], "owner": {"reputation": 12540, "user_id": 11089932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N9t0d.jpg?s=128&g=1", "display_name": "HansHirse", "link": "https://stackoverflow.com/users/11089932/hanshirse"}, "is_accepted": true, "score": 2, "last_activity_date": 1567591498, "last_edit_date": 1567591498, "creation_date": 1567588808, "answer_id": 57785307, "question_id": 57784853, "link": "https://stackoverflow.com/questions/57784853/how-to-add-a-logo-to-an-image-as-a-watermark/57785307#57785307", "title": "How to add a logo to an image as a watermark?", "body": "<p>You can access a (rectangular) <a href=\"https://docs.opencv.org/4.1.1/d3/d63/classcv_1_1Mat.html#a4272fce43d7405603fbb5e5f52580e57\" rel=\"nofollow noreferrer\">region of interest (ROI)</a> inside a <code>cv::Mat</code> using a <code>cv::Rect</code> (see the <a href=\"https://docs.opencv.org/4.1.1/d2/d44/classcv_1_1Rect__.html\" rel=\"nofollow noreferrer\">documentation on the base class</a>), which is described by <code>x</code>, <code>y</code>, <code>width</code>, and <code>height</code>. This is a widely used technique, which becomes handy in a lot of use cases!</p>\n\n<p>So, now you just need to set up a proper ROI within your main image and blend your watermark there. Let's have a look at the following code snippet:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Artificial main image\ncv::Mat img = cv::Mat(300, 300, CV_8UC3, cv::Scalar(128, 128, 128));\n\n// Artificial watermark\ncv::Mat wtm = cv::Mat(25, 25, CV_8UC3, cv::Scalar(0, 0, 255));\n\n// Position of watermark in main image\nint x = 30;\nint y = 35;\nint w = wtm.size().width;\nint h = wtm.size().height;\ncv::Rect pos = cv::Rect(x, y, w, h);\n\n// Blending\ndouble alpha = 0.7;\ndouble beta = (1.0 - alpha);\ncv::addWeighted(img(pos), alpha, wtm, beta, 0.0, img(pos));\n</code></pre>\n\n<p>The artifical main image looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1zhGB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1zhGB.png\" alt=\"Main image\"></a></p>\n\n<p>The artificial watermark image looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pBsvI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pBsvI.png\" alt=\"Watermark\"></a></p>\n\n<p>And, the final result looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/E3vxg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E3vxg.png\" alt=\"Result\"></a></p>\n\n<p>As you can see, in</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>cv::addWeighted(img(pos), alpha, wtm, beta, 0.0, img(pos))\n</code></pre>\n\n<p>the ROI <code>img(pos)</code> is used as source and destination of the operation, so you have in-place blending. If you want to have a separate output image while preserving your main image untouched, maybe clone your main image in the beginning, i.e.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>cv::Mat dst = img.clone()\n</code></pre>\n\n<p>and then do the blending with <code>dst(pos)</code> instead of <code>img(pos)</code>. </p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 151, "user_id": 6911480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1daab39250cf2bfa7ccb9c7b68d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeed", "link": "https://stackoverflow.com/users/6911480/saeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 57785307, "answer_count": 1, "score": 3, "last_activity_date": 1567596524, "creation_date": 1567587182, "last_edit_date": 1567596524, "question_id": 57784853, "link": "https://stackoverflow.com/questions/57784853/how-to-add-a-logo-to-an-image-as-a-watermark", "title": "How to add a logo to an image as a watermark?", "body": "<p>Recently, I'm interested in image processing using OpenCV, but I'm new to it.</p>\n\n<p>I do some simple image processing on a lot of images, and finally I want to watermark each image with a logo which is a small <code>png</code> image.</p>\n\n<p>There are a lot of codes which blend two images. Here is an example which I used to blend two images:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main( int argc, char** argv )\n{\n        double alpha = 0.5; double beta; double input;\n        Mat src1, src2, dst;\n\n        // main image with real size.(Large)\n        src1 = imread(\"a.jpg\");\n\n        // logo which will be used as a watermark.(small size)\n        src2 = imread(\"logo.png\");\n\n        namedWindow(\"Linear Blend\", 1);\n        beta = ( 1.0 - alpha );\n\n        addWeighted( src1, alpha, src2, beta, 0.0, dst);\n\n        imshow( \"Linear Blend\", dst );\n\n        waitKey(0);\n        return 0;\n}\n</code></pre>\n\n<p>Here, both images should be the same type and the same size, while my logo image is a small image which I want to blend to the main image in a corner (actually at an arbitrary point).</p>\n\n<p>Can anyone help me to do that? (Maybe, one solution is to create a matrix from the logo which is the same size of the main image so every point outside of the logo should be zero and then finally blend two images which have equal size.)</p>\n\n<p>my final code is like this:</p>\n\n<pre><code>int main( int argc, char** argv )\n{\n        double alpha = 0.5; double beta; double input;\n        Mat src1, src2, src2_copy, dst;\n\n        src1 = imread(\"a.jpg\");\n        src2 = imread(\"logo.png\");\n\n\n        resize(src2, src2_copy, src2.size() / 2, 0.5, 0.5);\n\n        int x = 100;\n        int y = 100;\n        int w = src2_copy.size().width;\n        int h = src2_copy.size().height;\n        cv::Rect pos = cv::Rect(x, y, w, h);\n\n\n        dst = src1.clone();\n\n        namedWindow(\"Linear Blend\", 1);\n        beta = ( 1.0 - alpha );\n\n        addWeighted(src1(pos), alpha, src2_copy, beta, 0.0, dst);\n\n        imshow(\"Linear \", dst);\n\n\n        waitKey(0);\n        return 0;\n}\n\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 3, "creation_date": 1567587248, "post_id": 57784818, "comment_id": 102003209, "body": "Please don&#39;t post images of code, post the code itself as text"}, {"owner": {"reputation": 21, "user_id": 12018671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debf2e4bcdabff0c6dc7307dbe334b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Super Girl", "link": "https://stackoverflow.com/users/12018671/super-girl"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1567587312, "post_id": 57784818, "comment_id": 102003246, "body": "I tried to, but it didn&#39;t format correctly :(, like the #include did not even show"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1567587314, "post_id": 57784818, "comment_id": 102003248, "body": "You need to check that the file open and the reads succeeded"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1567587345, "post_id": 57784818, "comment_id": 102003266, "body": "see <a href=\"https://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a>"}, {"owner": {"reputation": 21, "user_id": 12018671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debf2e4bcdabff0c6dc7307dbe334b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Super Girl", "link": "https://stackoverflow.com/users/12018671/super-girl"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1567587385, "post_id": 57784818, "comment_id": 102003290, "body": "ok let me try :o"}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 1, "creation_date": 1567587642, "post_id": 57784818, "comment_id": 102003438, "body": "first, check if the open succeded and second, check if the file is at the correct location"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567587645, "post_id": 57784818, "comment_id": 102003440, "body": "When you paste the code, you should select it and then you can click the braces icon -<code>{}</code> or press <code>Ctrl+K</code> to automatically format it as code."}, {"owner": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "edited": false, "score": 0, "creation_date": 1567588776, "post_id": 57784818, "comment_id": 102004062, "body": "@SuperGirl, Just wondering, are you sure you&#39;ve saved the file &quot;lol.txt&quot; before running the code ? :)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1567589127, "post_id": 57784818, "comment_id": 102004268, "body": "Show the first 4-5 lines of lol.txt"}], "answers": [{"tags": [], "owner": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "is_accepted": false, "score": 0, "last_activity_date": 1567588905, "last_edit_date": 1567588905, "creation_date": 1567588207, "answer_id": 57785137, "question_id": 57784818, "link": "https://stackoverflow.com/questions/57784818/file-wont-open-i-dont-know-why/57785137#57785137", "title": "File won&#39;t open, I don&#39;t know why", "body": "<p>If you want to save and read values from/to file, then try something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    // Write values to a file\n    const int size = 5;\n    int values[] = { 1,2,3,4,5,6 };\n    ofstream myfile(\"lol.txt\");\n    if (myfile.is_open())\n    {\n        for (int count = 0; count &lt; size; count++) {\n            myfile &lt;&lt; values[count] &lt;&lt; endl;\n        }\n        myfile.close();\n    }\n    else {\n        cout &lt;&lt; \"Unable to open file\";\n    }\n\n    // Write read values from a file\n    std::ifstream file(\"lol.txt\");\n    if (file.is_open()) {\n        std::string line;\n        while (getline(file, line)) {\n            cout &lt;&lt; line.c_str() &lt;&lt; endl;\n        }\n        file.close();\n    }\n    else {\n        cout &lt;&lt; \"Unable to open file\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1206, "user_id": 4039619, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-TD1WY5pcbCc/AAAAAAAAAAI/AAAAAAAAAFE/mxlKAxe_A2Q/photo.jpg?sz=128", "display_name": "Sigve Karolius", "link": "https://stackoverflow.com/users/4039619/sigve-karolius"}, "is_accepted": false, "score": 0, "last_activity_date": 1567588876, "creation_date": 1567588876, "answer_id": 57785322, "question_id": 57784818, "link": "https://stackoverflow.com/questions/57784818/file-wont-open-i-dont-know-why/57785322#57785322", "title": "File won&#39;t open, I don&#39;t know why", "body": "<p>First off, pardon my use of 'goto', I just felt like it... Try something like what I have shown below where I check if the file actually opened (save the code stub as \"asdf.cpp\"). Of course you will have to read the data into an array, but it may be a good place to start.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;                                                                                                      \n#include &lt;fstream&gt;                                                                                                                                                                                                                            \n\nusing namespace std;                                                                                                                                                                                                                          \n\nint main(int argc, char * argv[])                                                                                      \n{                                                                                                                        \n  string line;                                                                                                           \n  ifstream f(\"asdf.cpp\");\n\n  if ( !f.is_open() )                                                                                                      \n    goto error_file_not_open;                                                                                                                                                                                                                                                                                                                                          \n\n  while( getline(f, line) )                                                                                                \n    cout &lt;&lt; line &lt;&lt; endl;                                                                                                                                                                                                                       \n\n  f.close();                                                                                                                                                                                                                                    \n\n  return 0;                                                                                                                                                                                                                                   \n\nerror_file_not_open:                                                                                                     \n  cout &lt;&lt; \"Could not open file\" &lt;&lt; endl;                                                                                 \n  return -1;                                                                                                                                                                                                                                  \n}     \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12018887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAYmy6Nny7gszIG03l-EFfO134vfgRBBos6g_GU=k-s128", "display_name": "StJohnson LeonJo", "link": "https://stackoverflow.com/users/12018887/stjohnson-leonjo"}, "is_accepted": false, "score": -1, "last_activity_date": 1567590409, "creation_date": 1567590409, "answer_id": 57785769, "question_id": 57784818, "link": "https://stackoverflow.com/questions/57784818/file-wont-open-i-dont-know-why/57785769#57785769", "title": "File won&#39;t open, I don&#39;t know why", "body": "<p>I'am afraid that your file is not an ANSI-ASCII encoded text file. May be it is encoded by UTF-8 or the Unicode format. The following code will check that the encode of your file. Just try to run it or you could open the lol.txt by any text editor such as, vscode or notepad++. \nIt will show the encode format of the file at the right-down corner.\nAnother way to prevent from this issue is try to save the text file to the ANSC-ASCII format. Hope this will help! ^_^</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nunsigned char UTF8Header[] = {0xef, 0xbb, 0xbf};\nunsigned char UNICODEHeader[] = {0xff, 0xfe};\n\nint main()\n\n{\n\n    char fileName[] = \"lol.txt\"; // replace the file with your actual file name.\n    std::ifstream in;\n\n    char buffer[3] = {0};\n    in.open(fileName, std::ios::in | std::ios::binary);\n    if (!in.is_open())\n    {\n        std::cout &lt;&lt; \"Error opening file\";\n        return -1;\n    }\n    if (!in.eof())\n        in.read(buffer, 2);\n\n    if (!in.eof())\n        in.read(buffer + 2, 1);\n\n    if (buffer[0] == UNICODEHeader[0] &amp;&amp; buffer[1] == UNICODEHeader[1])\n        cout &lt;&lt; \"The file is encoded by unicode format\" &lt;&lt; endl;\n    else if (buffer[0] == UTF8Header[0] &amp;&amp; buffer[1] == UTF8Header[1] &amp;&amp; buffer[2] == UTF8Header[2])\n        cout &lt;&lt; \"The file is encoded by UTF-8 format\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12018671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debf2e4bcdabff0c6dc7307dbe334b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Super Girl", "link": "https://stackoverflow.com/users/12018671/super-girl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1574087301, "creation_date": 1567587095, "last_edit_date": 1574087301, "question_id": 57784818, "link": "https://stackoverflow.com/questions/57784818/file-wont-open-i-dont-know-why", "title": "File won&#39;t open, I don&#39;t know why", "body": "<p>My FILE WONT OPEN HELP</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\n\nusing namespace std;\n\n\nint main()\n{\n    string input_file_name, output_file_name;   //file names\n\n    ifstream infile;    //input file object\n    ofstream outfile;   //output file object\n\n    //prompt user for input file\n    cout &lt;&lt; \"Enter the input file name: \";\n    cin &gt;&gt; input_file_name;\n\n    //open input file\n    infile.open(input_file_name.c_str());\n\n    //check if file opened successfully\n    if (!infile)\n    {\n        cout &lt;&lt; \"Error: Unable to open file\" &lt;&lt; endl;\n                cout &lt;&lt; \"Terminating program...\";\n                return 1;\n    }\n    else\n    {\n        cout &lt;&lt; \"Successfully opened file!\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>when asked for user input i type filename.txt and it wont display successfuly opened message? why....i have the filename.txt on my pc</p>\n"}, {"tags": ["c++", "boost", "raspberry-pi", "raspbian"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 4, "creation_date": 1567586139, "post_id": 57784467, "comment_id": 102002614, "body": "boost doesn&#39;t generate a &quot;boost.so&quot; file in any versions I&#39;ve used. Try instead : <code>find &#47;usr -type f -name &quot;libboost*.so*&quot;</code>"}, {"owner": {"reputation": 311, "user_id": 6908061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLmW2.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6908061/ben"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1567586498, "post_id": 57784467, "comment_id": 102002803, "body": "@SanderDeDycker Thanks! I found files and updated my question. But it is probably another question now. :)"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1567587589, "post_id": 57784467, "comment_id": 102003409, "body": "You need to look in the configure log file to see what its looking for and what it didn&#39;t find"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1567589560, "post_id": 57784467, "comment_id": 102004516, "body": "If <code>sudo apt install libboost-iostreams1.67-dev</code> fixed your problem with <code>boost-iostreams</code>can you guess the command to fix problems with <code>boost-locale</code>? you probably want to run <code>sudo apt install libboost-dev</code>"}, {"owner": {"reputation": 311, "user_id": 6908061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLmW2.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6908061/ben"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1567589780, "post_id": 57784467, "comment_id": 102004633, "body": "@AlanBirtles Yes, I understand. But the 67-file for locale was there, on the contrary to the iostream, which was another version. Also, in other questions and comments installing &#39;libboost-dev&#39; did not solve the problem and I was not sure if I mess things up with it. But it worked, thanks. I still had to give the path, though."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 6908061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLmW2.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6908061/ben"}, "edited": false, "score": 0, "creation_date": 1567588153, "post_id": 57784914, "comment_id": 102003702, "body": "This helped, but I now got an error with <code>boost_iostreams</code>. I updated it in the question at the bottom."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 311, "user_id": 6908061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLmW2.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6908061/ben"}, "edited": false, "score": 1, "creation_date": 1567588313, "post_id": 57784914, "comment_id": 102003802, "body": "@Ben : note that the iostreams library you have installed (<code>&#47;usr&#47;lib&#47;arm-linux-gnueabihf&#47;libboost_iostreams.so.1.58.0</code>) is an older version. You&#39;ll want to make sure you have the 1.67 version for that as well."}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": true, "score": 2, "last_activity_date": 1567587418, "creation_date": 1567587418, "answer_id": 57784914, "question_id": 57784467, "link": "https://stackoverflow.com/questions/57784467/why-is-configure-libbitcoin-system-not-finding-boost-library-on-raspian-butch/57784914#57784914", "title": "Why is ./configure libbitcoin-system not finding boost library on Raspian Butch?", "body": "<p>Given that you found the boost shared objects in <code>/usr/lib/arm-linux-gnueabihf/</code> (using <code>find /usr -type f -name \"libboost*.so*\"</code>), you'll have to let the configure script know to look for the boost libraries in that location :</p>\n\n<pre><code>./configure --with-boost-libdir=/usr/lib/arm-linux-gnueabihf\n</code></pre>\n\n<p>followed by the rest of the build commands (make etc.).</p>\n"}], "owner": {"reputation": 311, "user_id": 6908061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLmW2.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6908061/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 57784914, "answer_count": 1, "score": 0, "last_activity_date": 1568987547, "creation_date": 1567585838, "last_edit_date": 1568987547, "question_id": 57784467, "link": "https://stackoverflow.com/questions/57784467/why-is-configure-libbitcoin-system-not-finding-boost-library-on-raspian-butch", "title": "Why is ./configure libbitcoin-system not finding boost library on Raspian Butch?", "body": "<p><strong>tl;dr: <code>Boost</code> was there, but had issues. The <code>./configure</code> did not know the path to <code>boost</code>.</strong></p>\n\n<hr>\n\n<p>I did clone for <code>libbitcoin-system</code> and did <code>git checkout v3.6.0</code> and followed <a href=\"https://github.com/libbitcoin/libbitcoin-system#autotools-advanced-users\" rel=\"nofollow noreferrer\">this</a> (logs are below):</p>\n\n<pre><code>$ ./autogen.sh\n$ ./configure\n$ make\n$ sudo make install\n$ sudo ldconfig\n</code></pre>\n\n<p><code>./configure</code> exits with</p>\n\n<pre><code>checking for boostlib &gt;= 1.62.0... yes\nconfigure: boost_CPPFLAGS : -I/usr/include\nconfigure: boost_ISYS_CPPFLAGS : -isystem/usr/include\nconfigure: boost_LDFLAGS : -L/usr/lib\nconfigure: boost_BUILD_CPPFLAGS : -I/usr/include\nchecking whether the Boost::Chrono library is available... yes\nconfigure: error: Could not find a version of the library!\n</code></pre>\n\n<p>I am running a <strong>Raspbian Buster on a RP3B</strong>. I did install <a href=\"https://github.com/bitcoin\" rel=\"nofollow noreferrer\">bitcoin core</a> and it runs well. I did not install <code>boost</code> but it is on my system.</p>\n\n<hr>\n\n<p>First I thought something is wrong with <code>boost</code>. Following a comment I found with <code>sudo find /usr -type f -name \"libboost*.so*\"</code>:</p>\n\n<pre><code>/usr/lib/arm-linux-gnueabihf/libboost_iostreams.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_program_options.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_prg_exec_monitor.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_unit_test_framework.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_date_time.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_atomic.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_iostreams.so.1.58.0\n/usr/lib/arm-linux-gnueabihf/libboost_system.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_thread.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_locale.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_chrono.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_timer.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_regex.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_wserialization.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_filesystem.so.1.67.0\n/usr/lib/arm-linux-gnueabihf/libboost_serialization.so.1.67.0\n</code></pre>\n\n<p><strong>So I suspect everything is fine with <code>boost</code>, right?</strong> (EDIT: No, it was not.)</p>\n\n<hr>\n\n<p>Here is the full log after <code>./configure</code>:</p>\n\n<pre><code>pi@raspberrypi:~/libbitcoin-system $ ./configure\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... no\nchecking for mawk... mawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking whether make supports the include directive... yes (GNU style)\nchecking for g++... g++\nchecking whether the C++ compiler works... yes\nchecking for C++ compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C++ compiler... yes\nchecking whether g++ accepts -g... yes\nchecking dependency style of g++... gcc3\nchecking how to run the C++ preprocessor... g++ -E\nchecking for grep that handles long lines and -e... /bin/grep\nchecking for egrep... /bin/grep -E\nchecking for ANSI C header files... yes\nchecking for sys/types.h... yes\nchecking for sys/stat.h... yes\nchecking for stdlib.h... yes\nchecking for string.h... yes\nchecking for memory.h... yes\nchecking for strings.h... yes\nchecking for inttypes.h... yes\nchecking for stdint.h... yes\nchecking for unistd.h... yes\nchecking minix/config.h usability... no\nchecking minix/config.h presence... no\nchecking for minix/config.h... no\nchecking whether it is safe to define __EXTENSIONS__... yes\nchecking for gcc... gcc\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\nchecking whether gcc understands -c and -o together... yes\nchecking dependency style of gcc... gcc3\nchecking for ar... ar\nchecking the archiver (ar) interface... ar\nchecking build system type... armv7l-unknown-linux-gnueabihf\nchecking host system type... armv7l-unknown-linux-gnueabihf\nchecking how to print strings... printf\nchecking for a sed that does not truncate output... /bin/sed\nchecking for fgrep... /bin/grep -F\nchecking for ld used by gcc... /usr/bin/ld\nchecking if the linker (/usr/bin/ld) is GNU ld... yes\nchecking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B\nchecking the name lister (/usr/bin/nm -B) interface... BSD nm\nchecking whether ln -s works... yes\nchecking the maximum length of command line arguments... 1572864\nchecking how to convert armv7l-unknown-linux-gnueabihf file names to armv7l-unknown-linux-gnueabihf format... func_convert_file_noop\nchecking how to convert armv7l-unknown-linux-gnueabihf file names to toolchain format... func_convert_file_noop\nchecking for /usr/bin/ld option to reload object files... -r\nchecking for objdump... objdump\nchecking how to recognize dependent libraries... pass_all\nchecking for dlltool... no\nchecking how to associate runtime and link libraries... printf %s\\n\nchecking for archiver @FILE support... @\nchecking for strip... strip\nchecking for ranlib... ranlib\nchecking command to parse /usr/bin/nm -B output from gcc object... ok\nchecking for sysroot... no\nchecking for a working dd... /bin/dd\nchecking how to truncate binary pipes... /bin/dd bs=4096 count=1\nchecking for mt... mt\nchecking if mt is a manifest tool... no\nchecking for dlfcn.h... yes\nchecking for objdir... .libs\nchecking if gcc supports -fno-rtti -fno-exceptions... no\nchecking for gcc option to produce PIC... -fPIC -DPIC\nchecking if gcc PIC flag -fPIC -DPIC works... yes\nchecking if gcc static flag -static works... yes\nchecking if gcc supports -c -o file.o... yes\nchecking if gcc supports -c -o file.o... (cached) yes\nchecking whether the gcc linker (/usr/bin/ld) supports shared libraries... yes\nchecking whether -lc should be explicitly linked in... no\nchecking dynamic linker characteristics... GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking whether stripping libraries is possible... yes\nchecking if libtool supports shared libraries... yes\nchecking whether to build shared libraries... yes\nchecking whether to build static libraries... yes\nchecking how to run the C++ preprocessor... g++ -E\nchecking for ld used by g++... /usr/bin/ld\nchecking if the linker (/usr/bin/ld) is GNU ld... yes\nchecking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes\nchecking for g++ option to produce PIC... -fPIC -DPIC\nchecking if g++ PIC flag -fPIC -DPIC works... yes\nchecking if g++ static flag -static works... yes\nchecking if g++ supports -c -o file.o... yes\nchecking if g++ supports -c -o file.o... (cached) yes\nchecking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes\nchecking dynamic linker characteristics... (cached) GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking whether we are using the GNU C++ compiler... (cached) yes\nchecking whether g++ accepts -g... (cached) yes\nchecking dependency style of g++... (cached) gcc3\nchecking for a sed that does not truncate output... (cached) /bin/sed\nchecking whether make supports nested variables... (cached) yes\nchecking for pkg-config... /usr/bin/pkg-config\nchecking pkg-config is at least version 0.9.0... yes\nchecking whether g++ supports C++11 features by default... yes\nchecking --with-pkgconfigdir option... ${exec_prefix}/lib/pkgconfig\nchecking --with-tests option... yes\nchecking --with-examples option... yes\nchecking --with-icu option... no\nchecking --with-png option... no\nchecking --with-qrencode option... no\nchecking --enable-ndebug option... yes\nchecking --enable-isystem option... no\nchecking for boostlib &gt;= 1.62.0... yes\nconfigure: boost_CPPFLAGS : -I/usr/include\nconfigure: boost_ISYS_CPPFLAGS : -isystem/usr/include\nconfigure: boost_LDFLAGS : -L/usr/lib\nconfigure: boost_BUILD_CPPFLAGS : -I/usr/include\nchecking whether the Boost::Chrono library is available... yes\nconfigure: error: Could not find a version of the library!\n</code></pre>\n\n<p>Output of <code>$ ./autogen.sh</code>:</p>\n\n<pre><code>libtoolize: putting auxiliary files in AC_CONFIG_AUX_DIR, 'build-aux'.\nlibtoolize: copying file 'build-aux/ltmain.sh'\nlibtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.\nlibtoolize: copying file 'm4/libtool.m4'\nlibtoolize: copying file 'm4/ltoptions.m4'\nlibtoolize: copying file 'm4/ltsugar.m4'\nlibtoolize: copying file 'm4/ltversion.m4'\nlibtoolize: copying file 'm4/lt~obsolete.m4'\nconfigure.ac:36: installing 'build-aux/ar-lib'\nconfigure.ac:36: installing 'build-aux/compile'\nconfigure.ac:39: installing 'build-aux/config.guess'\nconfigure.ac:39: installing 'build-aux/config.sub'\nconfigure.ac:30: installing 'build-aux/install-sh'\nconfigure.ac:30: installing 'build-aux/missing'\nMakefile.am: installing 'build-aux/depcomp'\nparallel-tests: installing 'build-aux/test-driver'\n</code></pre>\n\n<p>After I got the error the first time I installed <code>libbitcoin-secp256k1</code> from <a href=\"https://github.com/libbitcoin/secp256k1\" rel=\"nofollow noreferrer\">source</a> which worked fine.</p>\n\n<hr>\n\n<p>EDIT: Following a comment I told <code>./configure</code> where to find <code>boost</code> and this helped a bit but now it is exiting with <code>boost_iostreams</code>:</p>\n\n<pre><code>checking for boostlib &gt;= 1.62.0... yes\nconfigure: boost_CPPFLAGS : -I/usr/include\nconfigure: boost_ISYS_CPPFLAGS : -isystem/usr/include\nconfigure: boost_LDFLAGS : -L/usr/lib/arm-linux-gnueabihf\nconfigure: boost_BUILD_CPPFLAGS : -I/usr/include\nchecking whether the Boost::Chrono library is available... yes\nchecking for exit in -lboost_chrono... yes\nconfigure: boost_chrono_LIBS : -lboost_chrono\nchecking whether the Boost::Date_Time library is available... yes\nchecking for exit in -lboost_date_time... yes\nconfigure: boost_date_time_LIBS : -lboost_date_time\nchecking whether the Boost::Filesystem library is available... yes\nchecking for exit in -lboost_filesystem... yes\nconfigure: boost_filesystem_LIBS : -lboost_filesystem\nchecking whether the Boost::IOStreams library is available... yes\nchecking for exit in -lboost_iostreams... no\nchecking for exit in -lboost_iostreams... (cached) no\nconfigure: error: Could not link against boost_iostreams !\n</code></pre>\n\n<hr>\n\n<p>EDIT: Following another comment I updated <code>boost_iostreams</code> from <a href=\"https://packages.debian.org/sid/libboost-iostreams1.67-dev\" rel=\"nofollow noreferrer\">here</a> with <code>sudo apt install libboost-iostreams1.67-dev</code> which installed the <code>armhf</code>-file in the right place.</p>\n\n<p>Now the <code>./configure</code> is exiting with  </p>\n\n<pre><code>checking whether the Boost::Locale library is available... yes\nchecking for exit in -lboost_locale... no\nconfigure: error: Could not link against boost_locale !\n</code></pre>\n\n<hr>\n\n<p><strong>I solved it with <code>sudo apt install libboost-dev</code>.</strong> I was reluctant to do this because I read other comments where people did it and it still did not work and I wanted to find out what is specifically wrong with my (pre)-installation of <code>boost</code> on my Raspian Butch.</p>\n"}, {"tags": ["c++", "qt", "c++11"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1567588644, "post_id": 57784350, "comment_id": 102003993, "body": "I once fiddled with images, <code>QLabel</code>s, aspect-ratio and such. May be, this helps you too: <a href=\"https://stackoverflow.com/a/42852010/7478597\">SO: Qt - How to create Image that scale with window, and keeps aspect ratio?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 3666387, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/B8WLt.jpg?s=128&g=1", "display_name": "MarKS", "link": "https://stackoverflow.com/users/3666387/marks"}, "edited": false, "score": 0, "creation_date": 1567597043, "post_id": 57787371, "comment_id": 102008407, "body": "Damn! Didn&#39;t knew layouts can be this complicated. I wanna first understand what you did and will try to implement. Will let you know how it looks. Thanks you so much for the effort."}], "tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": false, "score": 1, "last_activity_date": 1567596220, "creation_date": 1567596220, "answer_id": 57787371, "question_id": 57784350, "link": "https://stackoverflow.com/questions/57784350/layout-design-issue-with-qt-application/57787371#57787371", "title": "Layout design issue with Qt application", "body": "<p>I'm not 100 % sure how to achieve the precise layout requirements of the OP.</p>\n\n<p>This didn't became better after fiddling a bit with stretch factors in the samples I have prepared.</p>\n\n<p>So, my answer elaborates the IMHO two essential aspects which have to considered.</p>\n\n<h1>Setting up Stretch Factors</h1>\n\n<p>This is my experience about layout of widget sets which I first collected in OSF/Motif, then in GTK+ (which has the IMHO best layout management) and finally in Qt:</p>\n\n<p>Don't try to fight against layout manager &ndash; you will end up in frustration (like <a href=\"https://en.wikipedia.org/wiki/Don_Quixote\" rel=\"nofollow noreferrer\">Don Quixote</a>). Instead, try to provide the right hints (however this is possible) to let the layout manager do something which does match your expectations most.</p>\n\n<p>(Or just write an own which provides fixed widget positions and sizes to the underlying widget set. This can be enlighting to realize why the layout manager are that damn complicated to use.)</p>\n\n<p>So, my first attempt was to set up the stretch factors right:</p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n\nint main(int argc, char **argv)\n{\n  qDebug() &lt;&lt; \"Qt Version:\" &lt;&lt; QT_VERSION_STR;\n  QApplication app(argc, argv);\n  QImage img(\"cats.jpg\");\n  QPixmap pixmap; \n  // setup GUI\n  QWidget winMain;\n  winMain.setWindowTitle(\"Layout Sample\");\n  QVBoxLayout v;\n  QHBoxLayout h;\n  QLabel widget1(\"Widget1\");\n  widget1.setFrameStyle(QLabel::Box | QLabel::Plain);\n  h.addWidget(&amp;widget1, 1); // remark widget1 for growing (horizontally in HBox h)\n  QGridLayout g;\n  QLabel img1;\n  img1.setPixmap(QPixmap::fromImage(img));\n  g.addWidget(&amp;img1, 0, 0);\n  QLabel img2;\n  img2.setPixmap(QPixmap::fromImage(img));\n  g.addWidget(&amp;img2, 0, 1);\n  QLabel img3;\n  img3.setPixmap(QPixmap::fromImage(img));\n  g.addWidget(&amp;img3, 1, 0);\n  QLabel img4;\n  img4.setPixmap(QPixmap::fromImage(img));\n  g.addWidget(&amp;img4, 1, 1);\n  h.addLayout(&amp;g, 0); // remark g for not growing (horizontally in HBox h)\n  v.addLayout(&amp;h, 0); // remark h for not growing (vertically in VBox v)\n  QLabel widget2(\"Widget2\");\n  widget2.setFrameStyle(QLabel::Box | QLabel::Plain);\n  widget2.setAlignment(Qt::AlignLeft | Qt::AlignTop);\n  v.addWidget(&amp;widget2, 1); // remark widget2 for growing (vertically in VBox v)\n  QLabel widget3(\"Widget3\");\n  widget3.setFrameStyle(QLabel::Box | QLabel::Plain);\n  widget3.setAlignment(Qt::AlignLeft | Qt::AlignTop);\n  v.addWidget(&amp;widget3, 1); // remark widget3 for growing (vertically in VBox v)\n  winMain.setLayout(&amp;v);\n  winMain.show();\n  // runtime loop\n  return app.exec();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QrQk7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QrQk7.png\" alt=\"Snapshot of testQLayout (initial)\"></a> <a href=\"https://i.stack.imgur.com/Zan99.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zan99.png\" alt=\"Snapshot of testQLayout (hor. stretched)\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ORDtj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ORDtj.png\" alt=\"Snapshot of testQLayout (vert. stretched)\"></a> <a href=\"https://i.stack.imgur.com/zds4g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zds4g.png\" alt=\"Snapshot of testQLayout (hor. &amp; vert. stretched)\"></a></p>\n\n<p>This doesn't look that bad.</p>\n\n<h1>The Scaling Image Label</h1>\n\n<p>However, the image size in <code>QLabel</code> doesn't change. To fix this, I recalled an old answer of mine <a href=\"https://stackoverflow.com/a/42852010/7478597\">SO: Qt - How to create Image that scale with window, and keeps aspect ratio?</a>.</p>\n\n<p>I removed all explicit stretching factors from the above sample and replaced the <code>QLabel</code>s with images by instances of the derived <code>ImageLabel</code> with resp. adjustment of <code>QPixmap</code> size:</p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n\nclass LabelImage: public QLabel {\n\n  private:\n    QPixmap _qPixmap, _qPixmapScaled;\n\n  public:\n    LabelImage(const QPixmap &amp;qPixmap, QWidget *pQParent = nullptr):\n      QLabel(pQParent), _qPixmap(qPixmap)\n    {\n      QSizePolicy sizePolicy;\n      sizePolicy.setHorizontalPolicy(QSizePolicy::Ignored);\n      sizePolicy.setVerticalPolicy(QSizePolicy::Ignored);\n      sizePolicy.setHeightForWidth(true);\n      sizePolicy.setWidthForHeight(true);\n      setSizePolicy(sizePolicy);\n    }\n    virtual ~LabelImage() = default;\n    LabelImage(const LabelImage&amp;) = delete;\n    LabelImage&amp; operator=(const LabelImage&amp;) = delete;\n\n  public:\n    //virtual QSize sizeHint() const override;\n    virtual int heightForWidth(int w) const override;\n  protected:\n    virtual void resizeEvent(QResizeEvent *pQEvent) override;\n};\n\n//QSize LabelImage::sizeHint() const { return _qPixmap.size(); }\n\nint LabelImage::heightForWidth(int w) const\n{\n  if (_qPixmap.width() == 0 || _qPixmap.height() == 0) return w;\n  return _qPixmap.height() * w / _qPixmap.width();\n}\n\nvoid LabelImage::resizeEvent(QResizeEvent *pQEvent)\n{\n  QLabel::resizeEvent(pQEvent);\n  _qPixmapScaled = _qPixmap.scaled(pQEvent-&gt;size(), Qt::KeepAspectRatio);\n  QLabel::setPixmap(_qPixmapScaled);\n}\n\nint main(int argc, char **argv)\n{\n  qDebug() &lt;&lt; \"Qt Version:\" &lt;&lt; QT_VERSION_STR;\n  QApplication app(argc, argv);\n  QImage img(\"cats.jpg\");\n  QPixmap pixmap; \n  // setup GUI\n  QWidget winMain;\n  winMain.setWindowTitle(\"Layout Sample\");\n  QVBoxLayout v;\n  QHBoxLayout h;\n  QLabel widget1(\"Widget1\");\n  widget1.setFrameStyle(QLabel::Box | QLabel::Plain);\n  h.addWidget(&amp;widget1);\n  QGridLayout g;\n  LabelImage img1(QPixmap::fromImage(img));\n  g.addWidget(&amp;img1, 0, 0);\n  LabelImage img2(QPixmap::fromImage(img));\n  g.addWidget(&amp;img2, 0, 1);\n  LabelImage img3(QPixmap::fromImage(img));\n  g.addWidget(&amp;img3, 1, 0);\n  LabelImage img4(QPixmap::fromImage(img));\n  g.addWidget(&amp;img4, 1, 1);\n  h.addLayout(&amp;g);\n  v.addLayout(&amp;h);\n  QLabel widget2(\"Widget2\");\n  widget2.setFrameStyle(QLabel::Box | QLabel::Plain);\n  widget2.setAlignment(Qt::AlignLeft | Qt::AlignTop);\n  v.addWidget(&amp;widget2);\n  QLabel widget3(\"Widget3\");\n  widget3.setFrameStyle(QLabel::Box | QLabel::Plain);\n  widget3.setAlignment(Qt::AlignLeft | Qt::AlignTop);\n  v.addWidget(&amp;widget3);\n  winMain.setLayout(&amp;v);\n  winMain.show();\n  // runtime loop\n  return app.exec();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sJ6Ec.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sJ6Ec.png\" alt=\"Snapshot of testQLayoutAR\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/yDmiU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yDmiU.png\" alt=\"Snapshot of testQLayoutAR (after hor. stretching)\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/t0Gkb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t0Gkb.png\" alt=\"Snapshot of testQLayoutAR (after hor. &amp; vert. stretching)\"></a> <a href=\"https://i.stack.imgur.com/GkIjF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GkIjF.png\" alt=\"Snapshot of testQLayoutAR (after vert. stretching)\"></a></p>\n\n<p>The layout management doesn't play that nicely (as expected &ndash; I didn't gave any stretch hint).\nHowever, at least, the <code>ImageLabel</code></p>\n\n<ul>\n<li>ensures scaling of image considering aspect-ratio correctly</li>\n<li>(tries to) resize the <code>QLabel</code> according to the image aspect-ratio (when possible).</li>\n</ul>\n\n<p>The <code>QSizePolicy</code> plays an important role. After having read the doc. downwards and upwards, I must admit I tried some settings which seemed to be promising after I found one which matched my expectations most.</p>\n\n<hr>\n\n<p>IMHO, OPs solution is the right combination of the techniques in both samples.</p>\n"}], "owner": {"reputation": 444, "user_id": 3666387, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/B8WLt.jpg?s=128&g=1", "display_name": "MarKS", "link": "https://stackoverflow.com/users/3666387/marks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567596220, "creation_date": 1567585433, "question_id": 57784350, "link": "https://stackoverflow.com/questions/57784350/layout-design-issue-with-qt-application", "title": "Layout design issue with Qt application", "body": "<p>Firstly, I apologise for my ugly drawing skills. I have an application where i load 4 images of size <code>640x480</code>in the QLabels as shown in the image. \n<a href=\"https://i.stack.imgur.com/wsIT9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wsIT9.jpg\" alt=\"image\"></a></p>\n\n<p>Letters V, H and G here mean Vertical, Horizontal and Grid layouts respectively.</p>\n\n<p>Implemented <code>sizeHint()</code>, <code>heightForWidth()</code> and <code>widthForHeight()</code>for the <code>QLabel</code>. In the <code>resizeEvent()</code> of my <code>QMainwindow</code> i call <code>setFixedWidth()</code> on <code>QLabel</code>which solves the issue of fitting the size of <code>QLabel</code> to the image keeping the aspect ratio. I want to maintain the aspect ratio of the image at all times.</p>\n\n<p><strong>Issues:</strong></p>\n\n<ol>\n<li>Setting a fixed width on <code>QLabel</code> pushes the widget3 out of view in smaller resolution screens like my laptop. </li>\n</ol>\n\n<p>I tried setting no fixed widths for the <code>QLabel</code> and tried to load the images keeping the aspect ratio. Size policy is set to expanding</p>\n\n<p><code>QSizePolicy sizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);</code> </p>\n\n<p>I get something like this</p>\n\n<p><a href=\"https://i.stack.imgur.com/3xgzB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3xgzB.jpg\" alt=\"image2\"></a></p>\n\n<p><strong>Issues:</strong></p>\n\n<p>Loading the image while keeping the aspect ratio leads to unwanted expanding of <code>QLabel</code>beyond the image horizontally which looks ugly. </p>\n\n<p><strong>What do i want:</strong></p>\n\n<ol>\n<li><code>QLabel</code> should fit to the image all the time irrespective of its own size.</li>\n<li>There should not be any weird empty spaces between <code>widget1</code> and <code>QLabel</code></li>\n<li>The whole application should fit on any resolution by changing the size of the <code>QLabel</code> while keeping the aspect ratio of the image.</li>\n</ol>\n\n<p>I feel it is kind of definition/design problem than being a technical problem. I tried all sorts of constraints and policies but couldn't achieve what i wanted. I believe i could get some suggestions here.</p>\n"}, {"tags": ["c++", "arrays", "string", "pointers", "char"], "comments": [{"owner": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567584327, "post_id": 57783990, "comment_id": 102001718, "body": "Inline 9th its    cout &lt;&lt; a1&lt;&lt; endl;"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1567584399, "post_id": 57783990, "comment_id": 102001754, "body": "If you are completely new to C++ and programming in general, it is advisable to use <code>std::vector</code> (or rather <code>std::string</code> as in this case) rather than raw manually allocated arrays. There is seldom a reason to use manual memory allocation."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1567584536, "post_id": 57783990, "comment_id": 102001820, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12353973/sizeof-char-array-in-c-c\">sizeof char* array in C/C++</a>"}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "edited": false, "score": 0, "creation_date": 1567584611, "post_id": 57783990, "comment_id": 102001849, "body": "Several mistakes here, all of which could be avoided if you started practicing &quot;real&quot; (aka. modern) C++ instead of C. In short: stop using <code>char*</code> for strings and start using <code>std::string</code> instead. Copying them is as simple as copying an <code>int</code>."}, {"owner": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567585040, "post_id": 57783990, "comment_id": 102002075, "body": "can you tell me my mistakes here or correct them, please? I am following a tutorial and I change the code a little bit. but now I am confused.  u mean that I shouldn&#39;t use char*?why?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1567585285, "post_id": 57783990, "comment_id": 102002187, "body": "You can&#39;t change the value of <code>a1</code> in <code>main</code> by passing its value to <code>f</code>. Assigning to a (non-reference) parameter has no effect outside the function. There is nothing special about pointers."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1567585391, "post_id": 57783990, "comment_id": 102002232, "body": "@HamidReza null-terminated  C strings (<code>char*</code>) come from the C language, which C++ is based on, but C++ has many facilities that C doesn&#39;t and that are safer/cleaner to use, especially if you are new to this. There is rarely a reason to use a null-terminated C string over <code>std::string</code> in C++. See <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">the definitive C++ book guide</a> for recommendations of better learning material."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1567585483, "post_id": 57783990, "comment_id": 102002273, "body": "Also, <code>sizeof(b) &#47; sizeof(b[0])</code> is the same as <code>sizeof(char*) &#47; sizeof(char)</code>, which will be either four or eight."}], "answers": [{"comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1567586990, "post_id": 57784349, "comment_id": 102003066, "body": "Incidentally, I agree with many of the comments here about the &#39;bad style&#39;. However, this is a beginner who is exploring the workings of C/C++, so lets try to be helpful, and point out the errors and why they are errors. It&#39;s called learning/teaching."}, {"owner": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567588584, "post_id": 57784349, "comment_id": 102003956, "body": "thx for answer, u passed the varibale with refrence. cant wi pass the varibale with pointer? u used &#39;&amp;&#39; .. my problem is  why this code works?main(){char *s1;char *s2=&quot;ali&quot;;f1(s1,s2);cout&lt;&lt;s1;getch()}void f(char *a,const char *b){for(;(*a=*b)!=&#39;\\n&#39;;++a,++b);}"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567588742, "post_id": 57784349, "comment_id": 102004041, "body": "@HamidReza <code>&amp;</code> has multiple meanings in C++, depending on context. Because it is not part of a type name in this case, it means <code>take the address of the variable</code>. It has nothing to do with C++ references and works the same in C which doesn&#39;t have references. Your tutorial should have covered that before."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567588783, "post_id": 57784349, "comment_id": 102004068, "body": "@Hamid Reza - Yes, you could use a <i>reference</i> to the pointer in place of a pointer to it! Just wasn&#39;t sure if you had come across reference arguments, yet. In fact, reference makes the code a bit simpler (but it probably compiles down to very similar code)."}, {"owner": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567588887, "post_id": 57784349, "comment_id": 102004136, "body": "@klaus  may u chek my edited comment? why does that code work? it is my real problem. because I change a bitthis learning code."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 1, "creation_date": 1567588957, "post_id": 57784349, "comment_id": 102004174, "body": "@HamidReza That code doesn&#39;t work. There will not be a compilation error (but maybe a warning), but it will cause undefined behavior because you are using the uninitialized (indeterminate) value of <code>s1</code> in <code>f</code>, even dereferencing it. If it happens to print something, that is pure coincidence."}], "tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 0, "last_activity_date": 1567589260, "last_edit_date": 1567589260, "creation_date": 1567585422, "answer_id": 57784349, "question_id": 57783990, "link": "https://stackoverflow.com/questions/57783990/how-to-pass-char-variable-thorough-a-function-with-pointersexample-already-sent/57784349#57784349", "title": "how to pass char variable thorough a function with pointers(example already sent)?", "body": "<p>Without changing the basic style of your code, here is a fixed version, with comments:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nvoid f(char**, char*); // You need to pass a pointer to the pointer!\nvoid f2(char*&amp;, char*); // Alternative passing the pointer by reference\nint main()\n{\n    char* a1;\n    char a2[] = \"1234\";\n\n//  f(&amp;a1, a2);     // Pass the address of the 'a1' pointer\n    f2(a1, a2);     // a1 pointer is now passed by reference\n    cout &lt;&lt; a1 &lt;&lt; endl;\n    delete a1[]; // Here, we free the memory allocated by the new call!\n    return 0;\n}\n\nvoid f(char** a, char* b)\n{\n    int len;\n//  len = sizeof(b) / sizeof(b[0]); // You can't get the array length like this!\n    len = strlen(b); // Assuming your string is null-terminate!\n    *a = new char[len + 1]; // Make room for the null terminator!\n    // Make a copy of the pointer (atemp) - otherwise you are changing the address of the new character\n    // array you just created - and this will then fail in the 2nd loop ...\n    for (char* atemp = *a; (*atemp = *b) != '\\0'; atemp++, b++)\n        cout &lt;&lt; *atemp &lt;&lt; endl;\n\n    for (int i = 0; i &lt; len; i++) // Length won't always be 4!\n//  for (int i = 0; i &lt; 4; i++)\n        cout &lt;&lt; (*a)[i] &lt;&lt; endl;\n}\n\nvoid f2(char*&amp; a, char* b)\n{\n    size_t len = strlen(b); // Assuming your string is null-terminate!\n    a = new char[len + 1];\n    for (char* atemp = a; (*atemp = *b) != '\\0'; atemp++, b++)\n        cout &lt;&lt; *atemp &lt;&lt; endl;\n\n    for (int i = 0; i &lt; len; i++) // Length won't always be 4!\n        cout &lt;&lt; a[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Feel free to ask for more details about <strong><em>why</em></strong> the changes were made!</p>\n\n<p>EDIT: Added alternative using argument as a reference.</p>\n"}, {"comments": [{"owner": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567588074, "post_id": 57784358, "comment_id": 102003654, "body": "I thought when we define a variable in the function it doesn&#39;t need to be deleted. because they are local. so, how can I delete a function variable which I located memory to it? if I delete it in the function it doesn&#39;t return any output."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "edited": false, "score": 0, "creation_date": 1567588307, "post_id": 57784358, "comment_id": 102003798, "body": "@HamidReza The variable defined in a function is deleted automatically, right! But this is only the pointer and not the manually allocated memory which address is stored iStop via EndlessLoopBreakern that pointer! So you have to delete the memory which you allocated, not the pointer which points to that memory."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1567585914, "last_edit_date": 1567585914, "creation_date": 1567585462, "answer_id": 57784358, "question_id": 57783990, "link": "https://stackoverflow.com/questions/57783990/how-to-pass-char-variable-thorough-a-function-with-pointersexample-already-sent/57784358#57784358", "title": "how to pass char variable thorough a function with pointers(example already sent)?", "body": "<p>A lot of mistakes in your program:</p>\n\n<pre><code>void f(char *a, char *b)\n{\n    len = sizeof(b) / sizeof(b[0]);\n</code></pre>\n\n<p><code>b</code> is a pointer to char. As this it has the pointer size of the machine type, typically it is 32 or 64 bit. So you never get the size of the array! </p>\n\n<p>If you really want to pass a raw pointer to char to a function and want to handle the data stored at the position where the pointer points to, you have either to pass also the size ( number of elements ) or you have to know an end mark. In case of a c-sytle string you have a '\\0' at the end of the string which makes it possible to use it.</p>\n\n<p>So you have first to count the number of elements until '\\0' is reached, allocate a new array, copy the elements and than return the pointer.</p>\n\n<p>Next failure: If you allocate memory with <code>new</code>, you have to use <code>delete</code> later in your program.</p>\n\n<p>But:\nWhat you did is bad sytle C code! It has really nothing todo with C++ nor with good C. There is no need to write a own string copy function as there is already <code>strcpy</code> and <code>strlen</code> to get the size.</p>\n\n<p>In C++ your code can be something like that:</p>\n\n<pre><code>void f( const std::string&amp; src, std::string&amp; target )\n{\n    target = src;\n}\n\nint main()\n{\n    std::string a2{\"abcd\"};\n    std::string a1;\n    f( a2, a1 );\n    std::cout &lt;&lt; a1 &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 10471715, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gw38Gw7rv8U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4cULeBSBM-UOAPrKTmqLyNf0klQ/mo/photo.jpg?sz=128", "display_name": "Hamid Reza", "link": "https://stackoverflow.com/users/10471715/hamid-reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 57784349, "answer_count": 2, "score": -1, "last_activity_date": 1567589260, "creation_date": 1567584159, "last_edit_date": 1567585409, "question_id": 57783990, "link": "https://stackoverflow.com/questions/57783990/how-to-pass-char-variable-thorough-a-function-with-pointersexample-already-sent", "title": "how to pass char variable thorough a function with pointers(example already sent)?", "body": "<p>I am practicing c++ and this code is supposed to copy an array to another array.output types are character and which is passed by pointer through the function 'f'. my output type is pointer which is pointing to a char array.here is my code:</p>\n\n<pre><code>using namespace std;\nvoid f(char*, char*);\nint main()\n    {\n    char *a1;\n    char a2[] = \"1234\";\n\n    f(a1, a2);\n    cout &lt;&lt; a1&lt;&lt; endl;\n    return 0;\n\n    }\n\nvoid f(char *a, char *b)\n    {\n    int len;\n    len = sizeof(b) / sizeof(b[0]);\n    a = new char[len];\n    for (; (*a=*b )!= '\\0'; a++, b++)\n    cout&lt;&lt;*a&lt;&lt;endl;\n\n    for (int i=0;i&lt;4;i++)\n    cout&lt;&lt;a[i]&lt;&lt;endl;\n    }\n</code></pre>\n\n<ol>\n<li>in the function each time for loop runs 'a' elements changes to the unreadable value. at first, it shows right value and then it changes. for example, in the first loop inside the function, it prints right value of 'a' but in second loop it changes it for no reason!</li>\n<li>this function doesn't return any value. as I expect by calling by pointer it has to change the variable but nothing happens. \ndeep explanation is appreciated. I am completely new in c++ programming.</li>\n</ol>\n"}, {"tags": ["c++", "assembly", "x86", "inline-assembly"], "answers": [{"tags": [], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "is_accepted": true, "score": 1, "last_activity_date": 1567593171, "last_edit_date": 1567593171, "creation_date": 1567592387, "answer_id": 57786380, "question_id": 57783978, "link": "https://stackoverflow.com/questions/57783978/how-to-use-inline-assembly-in-c-to-set-the-trap-flag/57786380#57786380", "title": "How to use inline assembly in C++ to set the Trap flag", "body": "<p>You are making a 32-bit program. Why are you trying to use 16-bit addresses? Your stack pointer is most likely larger than <code>0xffff</code>. You should instead</p>\n\n<ol>\n<li>Do 32-bit <code>MOV</code> in the second assembly line to avoid losing higher bits of <code>ESP</code>,</li>\n<li>Use 32-bit register to access the value you've pushed.</li>\n</ol>\n\n<p>Moreover, there's no need to even clobber <code>EBP</code>: in 32-bit addressing mode you can directly access stack via <code>[ESP]</code>.</p>\n\n<p>After taking all this into account your function will look as follows.</p>\n\n<pre><code>void trap() \n{\n    __asm PUSHF ;\n    __asm AND WORD PTR[ESP], 0FEFFH;\n    __asm POPF;\n}\n</code></pre>\n\n<p>Still, this code doesn't seem to make much sense: you'll get another trap after executing <code>pushf</code>, and the <code>and</code> instruction may never get executed.</p>\n"}], "owner": {"reputation": 33, "user_id": 6857741, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bnrtl6Y6lVs/AAAAAAAAAAI/AAAAAAAAAdw/fZGI06jgCaI/photo.jpg?sz=128", "display_name": "Paul Wainaina", "link": "https://stackoverflow.com/users/6857741/paul-wainaina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "closed_date": 1567593303, "accepted_answer_id": 57786380, "answer_count": 1, "score": 3, "last_activity_date": 1567593171, "creation_date": 1567584113, "last_edit_date": 1567593021, "question_id": 57783978, "link": "https://stackoverflow.com/questions/57783978/how-to-use-inline-assembly-in-c-to-set-the-trap-flag", "closed_reason": "Duplicate", "title": "How to use inline assembly in C++ to set the Trap flag", "body": "<p>How do we access the trap flag in x86 architecture and change its value in a 32 bit program?</p>\n\n<p>I have tried using inline assembly in Visual Studio:</p>\n\n<pre><code>     #include &lt;iostream&gt;\n      void trap() \n       {\n          __asm PUSHF ;\n          __asm MOV BP, SP;\n          __asm AND WORD PTR[BP + 0], 0FEFFH;\n          __asm POPF;\n       }\n</code></pre>\n\n<p>and got the following errors:</p>\n\n<pre><code>error C2432:  illegal reference to 16-bit data in 'first operand'\nerror C2415:  improper operand type\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 21, "user_id": 12018243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LN-7JcxLm84/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relaXAd7xDZwWwo59cYBkS86hpd5w/photo.jpg?sz=128", "display_name": "GWPart", "link": "https://stackoverflow.com/users/12018243/gwpart"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1567584683, "post_id": 57783895, "comment_id": 102001893, "body": "Thx. I&#39;ll try this."}, {"owner": {"reputation": 21, "user_id": 12018243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LN-7JcxLm84/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relaXAd7xDZwWwo59cYBkS86hpd5w/photo.jpg?sz=128", "display_name": "GWPart", "link": "https://stackoverflow.com/users/12018243/gwpart"}, "edited": false, "score": 0, "creation_date": 1567746552, "post_id": 57783895, "comment_id": 102062868, "body": "I&#39;ve tried exactly the same code from that link, but It still has same problem. XOpenDisplay() fails."}], "owner": {"reputation": 21, "user_id": 12018243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LN-7JcxLm84/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relaXAd7xDZwWwo59cYBkS86hpd5w/photo.jpg?sz=128", "display_name": "GWPart", "link": "https://stackoverflow.com/users/12018243/gwpart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "closed_date": 1567584519, "answer_count": 0, "score": 2, "last_activity_date": 1567746499, "creation_date": 1567583831, "last_edit_date": 1567746499, "question_id": 57783895, "link": "https://stackoverflow.com/questions/57783895/is-there-any-method-to-generate-render-buffer-object-frame-buffer-object-witho", "closed_reason": "Duplicate", "title": "Is there any method to generate Render Buffer Object &amp; Frame Buffer Object without creating window in openGL?", "body": "<p>My opengl program creates a glwindow, draw images, capture the pixels and save as image file. It works well with my laptop, but it occurs freeglut error (failed to open display.) when I run the program in non-display linux ssh server.\nI believe 'glCreateWindow' occurs that error, but I can't generate Renderbuffer or Framebuffer without creating window.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glutInit(&amp;myargc, myargv);\nglutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH );\nglutInitWindowPosition( 50, 50 );\nglutInitWindowSize( WIDTH, HEIGHT );\nmain_window = glutCreateWindow(\"__Window__\"); // CreateWindow\n\nglewInit();\n\nglGenTextures(1, &amp;tex);\nglBindTexture(GL_TEXTURE_2D, tex);\nglTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\nglTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\nglTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, WIDTH, HEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);\nglBindTexture(GL_TEXTURE_2D, 0);\n\nLOG(INFO) &lt;&lt; \"0\";\nglGenRenderbuffers(1, &amp;depth);\nLOG(INFO) &lt;&lt; \"1\";\nglBindRenderbuffer(GL_RENDERBUFFER, depth);\n\n</code></pre>\n\n<p>If I run this code in non-display linux ssh server, the error message says \"freeglut : failed to open display.\"</p>\n\n<p>And If I skip creating window,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// main_window = glutCreateWindow(\"__Window__\"); // skip this code\n</code></pre>\n\n<p>The LOG output is only 0 then segmentation fault occurs, which means It cannot generate render buffer without window.</p>\n"}]