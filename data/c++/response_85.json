[{"tags": ["c++", "debugging", "gdb"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1472083484, "post_id": 39134731, "comment_id": 65614789, "body": "I suspect the function is dependent on some other parts of the application having run, and you&#39;re trying to call it before that setup has been done, so it&#39;s getting an error."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1472085420, "post_id": 39134731, "comment_id": 65615200, "body": "That&#39;s clearly not C! And not related to Python either - unless you omitted relevant information."}, {"owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "edited": false, "score": 0, "creation_date": 1472087535, "post_id": 39134731, "comment_id": 65615628, "body": "Can you put a break point on the method? Or list it out? Maybe it is not fully setup"}, {"owner": {"reputation": 3493, "user_id": 1511337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/KB2az.jpg?s=128&g=1", "display_name": "Chan Kim", "link": "https://stackoverflow.com/users/1511337/chan-kim"}, "edited": false, "score": 0, "creation_date": 1472451994, "post_id": 39134731, "comment_id": 65739388, "body": "Hmm, looks like it has to with inline functions. most functions I tried to run are defined as inline functions.. But at the same time, when I print a variable via a pointer, it gives me error too.."}], "owner": {"reputation": 3493, "user_id": 1511337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/KB2az.jpg?s=128&g=1", "display_name": "Chan Kim", "link": "https://stackoverflow.com/users/1511337/chan-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472085396, "creation_date": 1472083171, "last_edit_date": 1472085396, "question_id": 39134731, "link": "https://stackoverflow.com/questions/39134731/cant-see-function-output-while-using-gdb-error-accessing-memory-address-inp", "title": "Can&#39;t see function output while using gdb, (Error accessing memory address.. Input/output error)", "body": "<p>I'm seeing a problem in using gdb (actually I'm using ddd which is a grahpic debugger using gdb inside) which is that I cannot see a function's return value.<br>\nWith a simple program, I could see that I can print a function's output. For example, if an object.peek() return an integer, if I type <code>p object.peek()</code>, then I get for example <code>1234</code>. And I remember printing any values when I'm degging a C or C++ program.<br>\nI'm now running and analyzing a complex program which is a python program containing a shared object library written in C++. I can set a breakpoint in C++ code and follow steps. But when I try to see some functions' output like <code>param.input_dim_size()</code>, the debugger give me the output :  </p>\n\n<pre><code>(gdb) p param.input_dim_size()\nWarning:\nCannot insert breakpoint 0.\nError accessing memory address 0x232460: Input/output error.\n\nAn error occurred while in a function called from GDB.\nEvaluation of the expression containing the function\n(caffe::NetParameter::input_dim_size() const) will be abandoned.\nWhen the function is done executing, GDB will silently stop.\n</code></pre>\n\n<p>Has is something to do with attaching two debuggers to the same program? or using C++ library inside Python? (I guess not). Or is there any restriction for seeing the output of functions in gdb?</p>\n"}, {"tags": ["c++", "devenv", "msvc12"], "answers": [{"tags": [], "owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "is_accepted": false, "score": 1, "last_activity_date": 1472084823, "creation_date": 1472084823, "answer_id": 39134921, "question_id": 39134711, "link": "https://stackoverflow.com/questions/39134711/change-microsoft-compiler-from-vc14-to-vc12-in-devenv-exe/39134921#39134921", "title": "change microsoft compiler from vc14 to vc12 in devenv.exe", "body": "<p>Open the project in msvc, then go to \"Project -> Properties -> Configuration Properties -> General -> Platform Toolset\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/j3zmZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j3zmZ.png\" alt=\"corresponding properties page\"></a></p>\n"}], "owner": {"reputation": 27, "user_id": 2517097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/168c31ffab9674cb7b256f50d486e288?s=128&d=identicon&r=PG", "display_name": "user2517097", "link": "https://stackoverflow.com/users/2517097/user2517097"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472121442, "creation_date": 1472083081, "last_edit_date": 1472121442, "question_id": 39134711, "link": "https://stackoverflow.com/questions/39134711/change-microsoft-compiler-from-vc14-to-vc12-in-devenv-exe", "title": "change microsoft compiler from vc14 to vc12 in devenv.exe", "body": "<p>I compile command line most of my applications using msvc12's vsvarsall.bat and setting the platform.  Now I have a project that comes with a visual studio solution and it compiles with msvc14.  To keep compatability I would like to compile with vc12.  How do I switch compilers inside devenv.exe?</p>\n"}, {"tags": ["c++", "windows", "time", "login"], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1472084180, "creation_date": 1472084180, "answer_id": 39134850, "question_id": 39134623, "link": "https://stackoverflow.com/questions/39134623/how-to-obtain-time-since-last-user-log-on-windows/39134850#39134850", "title": "How to obtain time since last user log on Windows?", "body": "<p>Call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa370654.aspx\" rel=\"nofollow\"><code>NetUserGetInfo</code></a> with level = 2. This gives you a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa371337.aspx\" rel=\"nofollow\"><code>USER_INFO_2</code></a> structure, which includes <code>usri2_last_logon;</code> (a DWORD holding a 32-bit UNIX time stamp--i.e., seconds since midnight, Jan 1, 1970).</p>\n\n<p>Note that if you're in a domain, the domain controllers (at least the backup controllers) store the logon time individually, so to get the most recent you need to ask all the domain controllers and use the most recent time-stamp of the results you get.</p>\n"}], "owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "closed_date": 1472085478, "answer_count": 1, "score": 0, "last_activity_date": 1472084296, "creation_date": 1472082440, "last_edit_date": 1472082803, "question_id": 39134623, "link": "https://stackoverflow.com/questions/39134623/how-to-obtain-time-since-last-user-log-on-windows", "closed_reason": "Duplicate", "title": "How to obtain time since last user log on Windows?", "body": "<p>How to obtain time since last user log on Windows in C++ app?</p>\n\n<p>We have functions like <code>GetTickCount64</code> and <code>QueryUnbiasedInterruptTime</code> to retrieve time since OS startup. But I can not find anything related to the user logon.</p>\n\n<p>Can we use <code>GetSystemTimes</code> and divide <code>lpUserTime</code> to the number of logical cores in the system?</p>\n"}, {"tags": ["c++", "struct", "sizeof"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 1, "creation_date": 1472082285, "post_id": 39134584, "comment_id": 65614519, "body": "You might want to look up the term &quot;struct padding.&quot; Once you have that term, you can probably find a lot of really good resources about it on this site. Hope this helps!"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1472082308, "post_id": 39134584, "comment_id": 65614523, "body": "You&#39;re on a system with 64-bit pointers, so telling it that the struct is smaller (5 bytes) than the pointer (8 bytes) might be a bad idea."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1472082525, "post_id": 39134584, "comment_id": 65614566, "body": "There might be a compiler-specific way to specify that you want the structure to be packed -- but <a href=\"http://stackoverflow.com/q/8568432/827263\">that can be unsafe</a>. Note that the code to access members of a packed structure is likely to be larger, so packing doesn&#39;t help unless you have a lot of objects of the same type (or possibly if code and data memory are allocated independently)."}, {"owner": {"reputation": 562, "user_id": 2339953, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/l3X5d.jpg?s=128&g=1", "display_name": "Prof. Hell", "link": "https://stackoverflow.com/users/2339953/prof-hell"}, "edited": false, "score": 0, "creation_date": 1472082664, "post_id": 39134584, "comment_id": 65614601, "body": "but I need memory efficient in AVR or ARM platform!"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1472082979, "post_id": 39134584, "comment_id": 65614664, "body": "With <code>gcc</code>, do (e.g.) <code>struct A __attribute__((packed)) {</code>, but then you <i>might</i> get an alignment exception [not from the compiler, but from the processor at runtime], so try it, but be careful"}, {"owner": {"reputation": 562, "user_id": 2339953, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/l3X5d.jpg?s=128&g=1", "display_name": "Prof. Hell", "link": "https://stackoverflow.com/users/2339953/prof-hell"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1472083124, "post_id": 39134584, "comment_id": 65614696, "body": "thanks @CraigEstey"}, {"owner": {"reputation": 562, "user_id": 2339953, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/l3X5d.jpg?s=128&g=1", "display_name": "Prof. Hell", "link": "https://stackoverflow.com/users/2339953/prof-hell"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1472083400, "post_id": 39134584, "comment_id": 65614763, "body": "@CraigEstey , Is __attribute__((packed)) need some header file? because it give me this error :  error: expected unqualified-id before &#39;{&#39; token"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1472083708, "post_id": 39134584, "comment_id": 65614837, "body": "Oops. My bad. I did that from memory. It was misplaced. I just checked some of my actual code. It is <code>struct A { char x; int *y; } __attribute__((packed));</code>. It can even be <code>typedef struct A { char x; int *y; } __attribute__((packed)) A_t;</code>"}, {"owner": {"reputation": 3184, "user_id": 1058916, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f2f3475aba0c4b388692df3f5546bb9?s=128&d=identicon&r=PG", "display_name": "fefe", "link": "https://stackoverflow.com/users/1058916/fefe"}, "edited": false, "score": 1, "creation_date": 1472089644, "post_id": 39134584, "comment_id": 65616011, "body": "@Prof.Hell Be careful, you may get a core dump for misaligned data on ARM."}], "answers": [{"comments": [{"owner": {"reputation": 562, "user_id": 2339953, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/l3X5d.jpg?s=128&g=1", "display_name": "Prof. Hell", "link": "https://stackoverflow.com/users/2339953/prof-hell"}, "edited": false, "score": 0, "creation_date": 1472082630, "post_id": 39134607, "comment_id": 65614592, "body": "but I need memory efficient in AVR or ARM platform!"}, {"owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "reply_to_user": {"reputation": 562, "user_id": 2339953, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/l3X5d.jpg?s=128&g=1", "display_name": "Prof. Hell", "link": "https://stackoverflow.com/users/2339953/prof-hell"}, "edited": false, "score": 1, "creation_date": 1472082955, "post_id": 39134607, "comment_id": 65614656, "body": "Then use compiler flags to force a packed struct.  More preferably, just don&#39;t worry about it until it actually blocks you.  If you&#39;re worried about memory limitations, there are tons of other things you should check before trying to eliminate struct padding.  I wouldn&#39;t start trying to fix a problem you aren&#39;t having yet."}], "tags": [], "owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "is_accepted": true, "score": 1, "last_activity_date": 1472082300, "creation_date": 1472082300, "answer_id": 39134607, "question_id": 39134584, "link": "https://stackoverflow.com/questions/39134584/size-of-struct-with-pointer/39134607#39134607", "title": "size of Struct with pointer", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow\">Alignment</a>.  The members of your datastructures (and their total sizes) are padded with empty space between in order to speed up access and reduce redundant reads that would be necessary when a larger type spans a boundary.</p>\n"}, {"tags": [], "owner": {"reputation": 469, "user_id": 4789526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AARen.jpg?s=128&g=1", "display_name": "Ouss4", "link": "https://stackoverflow.com/users/4789526/ouss4"}, "is_accepted": false, "score": 1, "last_activity_date": 1472082327, "creation_date": 1472082327, "answer_id": 39134610, "question_id": 39134584, "link": "https://stackoverflow.com/questions/39134584/size-of-struct-with-pointer/39134610#39134610", "title": "size of Struct with pointer", "body": "<p>The compiler decides to add some extra padding bits to allign your struct.\nIt's much faster to work with power of 8 data then spending time to extract them from memory.</p>\n"}], "owner": {"reputation": 562, "user_id": 2339953, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/l3X5d.jpg?s=128&g=1", "display_name": "Prof. Hell", "link": "https://stackoverflow.com/users/2339953/prof-hell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 869, "favorite_count": 0, "closed_date": 1472082387, "accepted_answer_id": 39134607, "answer_count": 2, "score": 1, "last_activity_date": 1472082327, "creation_date": 1472082078, "last_edit_date": 1472082290, "question_id": 39134584, "link": "https://stackoverflow.com/questions/39134584/size-of-struct-with-pointer", "closed_reason": "Duplicate", "title": "size of Struct with pointer", "body": "<p>I compiled this code:</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\nusing namespace std;\nstruct A\n{\n    char a;\n};\nstruct B\n{\n    char b;\n    int a;\n};\nstruct C\n{\n    int * a;\n    unsigned char b;\n};\n\nint main()\n{\n    cout&lt;&lt; \"size of Strcut A:\\t\"&lt;&lt; sizeof(A)&lt;&lt;endl;\n    cout&lt;&lt; \"size of Strcut B:\\t\"&lt;&lt; sizeof(B)&lt;&lt;endl;\n    cout&lt;&lt; \"size of Strcut C:\\t\"&lt;&lt; sizeof(C)&lt;&lt;endl;\n    cout&lt;&lt; \"size of int* :  \\t\"&lt;&lt; sizeof(int*)&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>And I got this result:</p>\n\n<pre><code>size of Strcut A:   1\nsize of Strcut B:   8\nsize of Strcut C:   16\nsize of int* :      8\n</code></pre>\n\n<p>now I want to ask why the size of Strcut B is not 5? why the size of Struct C is not 9? \nwhen the memory is importent in Embedded system how I should save memory in another platforms like ARM?</p>\n\n<h2>Can I say to the compiler it's 5 bytes or 9 bytes?</h2>\n\n<p><a href=\"http://cpp.sh/2rv6b\" rel=\"nofollow\">http://cpp.sh/2rv6b</a></p>\n"}, {"tags": ["c++", "xcode", "navigation"], "comments": [{"owner": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1472106368, "post_id": 39134516, "comment_id": 65620470, "body": "What version of Xcode are you using?"}, {"owner": {"reputation": 325, "user_id": 2271843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9538f335cedc8a2589f4b4f4e630fe3c?s=128&d=identicon&r=PG", "display_name": "bhawley", "link": "https://stackoverflow.com/users/2271843/bhawley"}, "reply_to_user": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1472152975, "post_id": 39134516, "comment_id": 65649836, "body": "Currently 5.1.1, but I have seen the same issue in 7.2.1"}, {"owner": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1472158364, "post_id": 39134516, "comment_id": 65652579, "body": "Hmm. I&#39;m using 7.3.1. And I use C++ daily. What I&#39;ve noticed is the following. In the .cpp, it properly shows the method with a keyword after the parens, regardless if it is a virtual or not. In the .h, however it has a different behavior. It will show the method provided the trailing keyword is not <code>override</code>. <code>final</code> or <code>const</code> do show up."}, {"owner": {"reputation": 325, "user_id": 2271843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9538f335cedc8a2589f4b4f4e630fe3c?s=128&d=identicon&r=PG", "display_name": "bhawley", "link": "https://stackoverflow.com/users/2271843/bhawley"}, "reply_to_user": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1472161736, "post_id": 39134516, "comment_id": 65653955, "body": "Weird. I see the discrepancy in both the header and .cpp. Do you think it&#39;s just a formatting thing? Like different spacing(s) cause different behaviors?"}, {"owner": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1472164489, "post_id": 39134516, "comment_id": 65654927, "body": "Not sure. I copied and pasted your code into my header and it showed up fine. Formatting-wise, I just had one leading tab. The rest was as you had typed it in. I do not believe it looks up the hierarchy for correctness of whether or not the virtual exists in the superclass. I also found out that a pure virtual decl will not show up. So you can chalk up <code>override</code> and <code>=0</code> as the ones that don&#39;t appear. I&#39;m not sure how to alter Xcode on these rules, I think it is built in. Sorry, I know this doesn&#39;t answer your q."}, {"owner": {"reputation": 325, "user_id": 2271843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9538f335cedc8a2589f4b4f4e630fe3c?s=128&d=identicon&r=PG", "display_name": "bhawley", "link": "https://stackoverflow.com/users/2271843/bhawley"}, "reply_to_user": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1472165005, "post_id": 39134516, "comment_id": 65655107, "body": "It&#39;s ok. Kinda a long shot hoping for an answer anyways :)"}], "owner": {"reputation": 325, "user_id": 2271843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9538f335cedc8a2589f4b4f4e630fe3c?s=128&d=identicon&r=PG", "display_name": "bhawley", "link": "https://stackoverflow.com/users/2271843/bhawley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472081577, "creation_date": 1472081577, "question_id": 39134516, "link": "https://stackoverflow.com/questions/39134516/xcode-document-item-settings", "title": "Xcode Document Item Settings", "body": "<p>When in Xcode you can open the Document Item menu with ^6 (control 6). This menu should show all method declarations/instantiations in the currently displayed file. I use it a lot in our current project, but it seems that not all methods will be displayed in the menu. For instance, if a method declaration looks like:</p>\n\n<p><code>virtual void print (std::ostream&amp; os) const;</code></p>\n\n<p>The method will not display in the menu, but  </p>\n\n<p><code>virtual void print (std::ostream&amp; os);</code></p>\n\n<p>will show up. It appears that anything after the method's parentheses will cause the method to not appear in the menu (I've seen the same problem with 'override'). Any ideas about how to change this setting in Xcode?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "edited": false, "score": 0, "creation_date": 1472081456, "post_id": 39134491, "comment_id": 65614300, "body": "Why the -1 marking. What did I do wrong?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1472081460, "post_id": 39134491, "comment_id": 65614302, "body": "<code>SP</code> obviously is a template, so please <a href=\"https://stackoverflow.com/posts/39134491/edit\">edit</a> your question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1472081513, "post_id": 39134491, "comment_id": 65614320, "body": "@BaummitAugen - What I have provided is a simple complete verifiable example."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1472081562, "post_id": 39134491, "comment_id": 65614331, "body": "<a href=\"http://coliru.stacked-crooked.com/a/c8932e63e01fbcbc\" rel=\"nofollow noreferrer\">It does not reproduce</a> the error, so it is not a MCVE."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1472081698, "post_id": 39134491, "comment_id": 65614366, "body": "The error says the problem is on line 90, so there are 90 lines of code before <code>template &lt; typename T &gt; class SP</code> that you haven&#39;t provided."}, {"owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "edited": false, "score": 0, "creation_date": 1472081776, "post_id": 39134491, "comment_id": 65614382, "body": "@ksfone - I have the habit of comment my code extensively while learning. I am able to get the exact same error."}], "answers": [{"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 2, "last_activity_date": 1472081793, "creation_date": 1472081793, "answer_id": 39134547, "question_id": 39134491, "link": "https://stackoverflow.com/questions/39134491/class-definition-error-sp-is-not-a-template-type/39134547#39134547", "title": "class definition error: \u2018SP\u2019 is not a template type", "body": "<p>You can't have two definitions of the same class.</p>\n\n<pre><code>struct S {};\ntemplate&lt;typename T&gt; struct S{};\n</code></pre>\n\n<p>reproduces your compiler error: <a href=\"http://ideone.com/7KpAPl\" rel=\"nofollow\">http://ideone.com/7KpAPl</a></p>\n\n<p>In this case, you only need the template definition.</p>\n"}], "owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 39134547, "answer_count": 1, "score": -1, "last_activity_date": 1472081793, "creation_date": 1472081336, "last_edit_date": 1472081699, "question_id": 39134491, "link": "https://stackoverflow.com/questions/39134491/class-definition-error-sp-is-not-a-template-type", "title": "class definition error: \u2018SP\u2019 is not a template type", "body": "<p>I am tyring a custom implementation of smart pointers. The code is given below.</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass Person\n{\n    int age;\n    std::string pName;\n\n    public:\n        Person(): pName(0),age(0)\n        {\n        }\n        Person(std::string pName, int age): pName(pName), age(age)\n        {\n        }\n        ~Person()\n        {\n        }\n\n        void Display()\n        {\n            std::cout &lt;&lt; \"Name: \" &lt;&lt; pName &lt;&lt; \"Age: \" &lt;&lt; age &lt;&lt; std::endl;\n        }\n        void Shout()\n        {\n            std::cout &lt;&lt; \"Ooooooooooooooooooo\" &lt;&lt; std::endl;\n\n        }\n};\n</code></pre>\n\n<p>/*Smart Pointer Interface */</p>\n\n<pre><code>class SP\n{\nprivate:\n    Person* pData; // pointer to person class\npublic:\n    SP(Person* pValue) : pData(pValue)\n    {\n\n    }\n    ~SP()\n    {\n        /*pointer no longer requried*/\n        delete pData;\n    }\n\n    Person&amp; operator* ()\n    {\n        return *pData;\n    }\n\n    Person* operator-&gt; ()\n    {\n        return pData;\n    }\n};\n</code></pre>\n\n<p>Trying to make it more generic.</p>\n\n<pre><code>template &lt; typename T &gt; class SP\n{\n    private:\n       T* pData; // Generic pointer to be stored\n    public:\n       SP(T *pValue) : pData(pValue)\n       {\n       }\n       ~SP()\n       {\n          delete pData;\n       }\n\n       T&amp; operator*()\n       {\n          return *pData;\n       }\n\n       T * operator-&gt;()\n       {\n          return pData;\n       }\n};\n\nint main()\n{\n    SP&lt;PERSON&gt; p(new Person(\"Scott\", 25));\n    p-&gt;Display();\n    {\n        SP&lt;PERSON&gt; q = p;\n        q-&gt;Display();\n        /*Destructor of q will be called here..*/\n    }\n    p-&gt;Display();\n    /*Destructor of p will be called here.*/\n    return 0;\n}\n</code></pre>\n\n<p>When I try to compile the above code I get the error.</p>\n\n<pre><code>smart_pointers.cpp:90:31: error: \u2018SP\u2019 is not a template type\n template &lt; typename T &gt; class SP\n                               ^\nsmart_pointers.cpp: In function \u2018int main()\u2019:\nsmart_pointers.cpp:116:5: error: \u2018SP\u2019 is not a template\n     SP&lt;PERSON&gt; p(new Person(\"Scott\", 25));\n</code></pre>\n\n<p>What is the reason for this?</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-geometry"], "comments": [{"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1472082241, "post_id": 39134437, "comment_id": 65614504, "body": "&quot;<i>Almost coincidence</i>&quot; What do you mean? Did you mean almost <i>congruent</i>?"}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1472082336, "post_id": 39134437, "comment_id": 65614529, "body": "@VinceEmigh yes - some edges are &quot;almost right on top of each other&quot;"}], "owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472084987, "creation_date": 1472080888, "last_edit_date": 1472084987, "question_id": 39134437, "link": "https://stackoverflow.com/questions/39134437/precision-problems-with-boostgeometrydifference", "title": "Precision problems with `boost::geometry::difference`", "body": "<p>Most of the time when I use <code>boost::geometry::difference</code> it does what I'd expect. However, when I have two polygons whose edges are almost coincident, I get some weird behavior. Consider this example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;list&gt;\n\n#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/point_xy.hpp&gt;\n#include &lt;boost/geometry/geometries/polygon.hpp&gt;\n#include &lt;boost/geometry/geometries/multi_polygon.hpp&gt;\n\nusing PointType = boost::geometry::model::d2::point_xy&lt;double&gt;;\nusing PolygonType = boost::geometry::model::polygon&lt;PointType&gt;;\nusing MultiPolygonType = boost::geometry::model::multi_polygon&lt;PolygonType&gt;;\n\ntemplate &lt;typename TPolygon&gt;\nvoid printValidity(const TPolygon&amp; polygons)\n{\n    boost::geometry::validity_failure_type failure;\n    bool valid = boost::geometry::is_valid(polygons, failure);\n\n    if(!valid) {\n        std::cout &lt;&lt; \"not valid: \" &lt;&lt; failure &lt;&lt; std::endl;\n    }\n    else {\n        std::cout &lt;&lt; \"valid.\" &lt;&lt; std::endl;\n    }\n}\n\ntemplate &lt;typename TPolygon&gt;\nvoid WritePolygonsToSVG(const std::vector&lt;TPolygon&gt;&amp; polygons, const std::string&amp; filename)\n{\n    std::ofstream svg(filename);\n\n    boost::geometry::svg_mapper&lt;PointType&gt; mapper(svg, 400, 400);\n\n    for(size_t polygonID = 0; polygonID &lt; polygons.size(); ++polygonID) {\n        mapper.add(polygons[polygonID]);\n        int redValue = 50 * polygonID; // NOTE: This will break with more than 5 polygons\n        mapper.map(polygons[polygonID], \"fill:rgb(\" + std::to_string(redValue) + \",128,0);stroke:rgb(0,0,100);stroke-width:1\");\n    }\n}\n\nint main()\n{\n    MultiPolygonType polygon1;\n    boost::geometry::read_wkt(\"MULTIPOLYGON(((-23.8915 -12.2238,-23.7604 -10.2739,-23.1774 -7.83411,-22.196 -5.52561,-20.8436 -3.41293,-19.7976 -2.26009,-19.8108 -2.00306,24.8732 2.51519,26.0802 -9.42191,-23.6662 -14.452,-23.8915 -12.2238)))\", polygon1);\n    WritePolygonsToSVG(polygon1, \"polygon1.svg\");\n\n    MultiPolygonType polygon2;\n    boost::geometry::read_wkt(\"MULTIPOLYGON(((-8.85138 -12.954,-8.89712 -12.7115,-8.9307 -12.5279,-3.35773 -12.078,-3.42937 -11.5832,-3.50013 -11.0882,-3.57007 -10.5932,-3.63925 -10.098,-3.70775 -9.60273,-3.77561 -9.10737,-3.84289 -8.61192,-3.90967 -8.1164,-3.976 -7.62081,-4.04194 -7.12517,-4.10756 -6.62948,-4.17291 -6.13375,-4.23805 -5.63799,-4.30305 -5.14222,-4.36797 -4.64643,-4.43287 -4.15064,-4.49781 -3.65485,-4.56285 -3.15909,-4.62806 -2.66331,-4.69349 -2.16756,-4.75921 -1.67185,-4.82528 -1.17619,-4.89175 -0.680597,-4.91655 -0.497015,17.8166 1.80166,17.8143 1.61653,17.8078 1.11656,17.8009 0.61658,17.7937 0.116605,17.7863 -0.383369,17.7786 -0.883343,17.7707 -1.3833,17.7627 -1.88324,17.7545 -2.38318,17.7463 -2.88312,17.7381 -3.38307,17.7299 -3.88301,17.7218 -4.38295,17.7139 -4.8829,17.706 -5.38285,17.6984 -5.88279,17.6911 -6.38274,17.684 -6.88269,17.6772 -7.38265,17.6709 -7.8826,17.6649 -8.38256,17.6595 -8.88251,17.6545 -9.38247,17.6501 -9.88244,17.6471 -10.2746,-8.85138 -12.954)))\", polygon2);\n    WritePolygonsToSVG(polygon2, \"polygon2.svg\");\n\n    MultiPolygonType differencePolygon;\n\n    boost::geometry::difference(polygon1, polygon2, differencePolygon);\n    WritePolygonsToSVG(differencePolygon, \"difference.svg\");\n\n    printValidity(differencePolygon);\n\n    MultiPolygonType realDifference;\n    boost::geometry::read_wkt(\"MULTIPOLYGON(((-23.8915 -12.2238,-23.7604 -10.2739,-23.1774 -7.83411,-22.196 -5.52561,-20.8436 -3.41293,-19.7976 -2.26009,-19.8108 -2.00306,24.8732 2.51519,26.0802 -9.42191,-23.6662 -14.452,-23.8915 -12.2238),(-8.85138 -12.954,17.6471 -10.2746,17.6501 -9.88244,17.6545 -9.38247,17.6595 -8.88251,17.6649 -8.38256,17.6709 -7.8826,17.6772 -7.38265,17.684 -6.88269,17.6911 -6.38274,17.6984 -5.88279,17.706 -5.38285,17.7139 -4.8829,17.7218 -4.38295,17.7299 -3.88301,17.7381 -3.38307,17.7463 -2.88312,17.7545 -2.38318,17.7627 -1.88324,17.7707 -1.3833,17.7786 -0.883343,17.7863 -0.383369,17.7937 0.116605,17.8009 0.61658,17.8078 1.11656,17.8143 1.61653,17.8166 1.80166,-4.91655 -0.497015,-4.89175 -0.680597,-4.82528 -1.17619,-4.75921 -1.67185,-4.69349 -2.16756,-4.62806 -2.66331,-4.56285 -3.15909,-4.49781 -3.65485,-4.43287 -4.15064,-4.36797 -4.64643,-4.30305 -5.14222,-4.23805 -5.63799,-4.17291 -6.13375,-4.10756 -6.62948,-4.04194 -7.12517,-3.976 -7.62081,-3.90967 -8.1164,-3.84289 -8.61192,-3.77561 -9.10737,-3.70775 -9.60273,-3.63925 -10.098,-3.57007 -10.5932,-3.50013 -11.0882,-3.42937 -11.5832,-3.35773 -12.078,-8.9307 -12.5279,-8.89712 -12.7115,-8.85138 -12.954)))\", realDifference);\n    WritePolygonsToSVG(realDifference, \"realDifference.svg\");\n    printValidity(realDifference);\n\n    return 0;\n}\n</code></pre>\n\n<p>The 'differencePolygon' computed using <code>boost::geometry::difference</code> in this code is \"valid\", though it has an infinitesimally thin region:\n<a href=\"https://i.stack.imgur.com/QELlL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QELlL.png\" alt=\"enter image description here\"></a></p>\n\n<p>The 'realDifference' polygon is what I output from my \"real code\" (where the input was slightly different due to (what I'm guessing) is the precision of the WKT writer). You can see this polygon has two infinitesimally small regions, and actually returns not valid (21: failure_self_intersections):\n<a href=\"https://i.stack.imgur.com/Zz4Me.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zz4Me.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there some kind of tolerance parameter than can be set to avoid these infinitesimally small regions during the difference operation (which apparently sometimes break the polygon)? Or is there a function to \"correct\" the polygon by removing these self intersections? (I know the correct() function only fixes ring ordering).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1472081072, "post_id": 39134436, "comment_id": 65614197, "body": "Why is your api designed so that people pass in arguments with no way to detect if they&#39;re valid or not ahead of time?  If they can detect that in any way, they should be doing so. Failing to do so should throw an exception representing a violation of logical preconditions."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472081124, "post_id": 39134436, "comment_id": 65614211, "body": "&quot;These errors are presumably detectable before the program executes.&quot; means &quot;it is possible to write code at compile time to detect and prevent these errors from occurring&quot;."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1472081315, "post_id": 39134436, "comment_id": 65614259, "body": "What&#39;s the confusion? If you are passed an argument, validate it, and find the validation failed, you have an invalid argument. Who cares why it&#39;s invalid? It&#39;s the caller&#39;s fault for the invalid argument, so it&#39;s a logical error in the program. If you raw read some user input into a string, and that string is invalid, then it&#39;s your fault for not validating it before using it as an argument. Everything fits."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1472082420, "post_id": 39134436, "comment_id": 65614544, "body": "@MooingDuck &quot;Why is your api designed so that people pass in arguments with no way to detect if they&#39;re valid or not ahead of time?&quot;  Simply because variuos condition cannot be always tested ahead of time - or it&#39;s highly impractical to do so. Imagine a condition of &quot;your membership level doesn&#39;t allow you to ask this. Your trial period expired just 3 seconds ago&quot; The best place to test it is somewhere in the &quot;com::evil_corporate::account_mgmt&quot; module, not in the &quot;com::evil_corporate::be_nice_face&quot;."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472082927, "post_id": 39134436, "comment_id": 65614651, "body": "@MooingDuck &quot;to write code at compile time to detect and prevent these errors from occurring&quot;.  Yes, but I&#39;m asking why there&#39;s no standard error signalling <i>at runtime</i> &quot;non-compliant input from caller&quot;, in which the caller is not supposed the be your buddy in the next cubicle."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 1, "creation_date": 1472083179, "post_id": 39134436, "comment_id": 65614707, "body": "Validation may not be possible/practical in a single point. See my &quot;your trial account just expired&quot;, a test which practical consideration dictates need to be performed deep into the calling chain and let it surface as an exception with the message to the user."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1472083226, "post_id": 39134436, "comment_id": 65614722, "body": "Have you considered that a generic <code>buddy_I_found_garbage_in_your_input</code> exception might not be the best way to convey that your trial account just expired?"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1472083569, "post_id": 39134436, "comment_id": 65614811, "body": "@zneak - I&#39;m sure you&#39;ll be able to imagine a case of &quot;invalid_args&quot; that can be detected in a context of a system state known only to deeper code. Just try it"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1472083772, "post_id": 39134436, "comment_id": 65614852, "body": "I can imagine the throw, but I can&#39;t imagine the catch."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1472085183, "post_id": 39134436, "comment_id": 65615159, "body": "@zneak &quot;I can imagine the throw, but I can&#39;t imagine the catch&quot;  Well the catch is &quot;Even applying faultless logic, one can make an invalid argument - e.g. because one of the premisses is false.&quot; Therefore, it is logic an invalid_argument needs to be a runtime_error rather than a logic one :) (but I digress)"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472085853, "post_id": 39134436, "comment_id": 65615287, "body": "@AdrianColomitchi: &quot;your membership level doesn&#39;t allow you to ask this&quot; that&#39;s not an <code>invalid_argument</code>, that would be some sort of <code>permissions_exception</code> which should derive from <code>runtime_error</code>, since it doesn&#39;t signal some programming error."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472086391, "post_id": 39134436, "comment_id": 65615398, "body": "@MooingDuck - ...&quot;that&#39;s not an invalid_argument&quot;... mate, surely there are cases in which the validity of the provided input can be verified only in deeper contexts of the code. Does my failure to get you a proper one invalidate my question? Or are you trying to say <i>&quot;The validity of the parameter values can always be assessed in the method start or early. Any other kind of parameter validation error is not an *invalid arg value*, but is...&quot;</i> (what exactly?)"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472142566, "post_id": 39134436, "comment_id": 65644234, "body": "@AdrianColomitchi: If it doesn&#39;t represent a preventable error, it&#39;s not a logic_error, it&#39;s a runtime_error. If the parameter isn&#39;t obviously invalid up front, it&#39;s not a invalid_argument, it&#39;d be a XXX depending on why it&#39;s invalid."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472170562, "post_id": 39134436, "comment_id": 65656678, "body": "@MooingDuck &quot;If the parameter isn&#39;t obviously invalid up front&quot;... mmm, again, the case of building on top of 3rd-party libraries; what is &quot;upfront&quot; for the library programmer, may be an obscure place for me, as the consumer of that library (used deep-down in my code). What you say amounts to &quot;write your validation upfront, in the &#39;gateway&#39; of your code, even if such a code is already implemented in the library you are using&quot; - code bloat, loss of performance, etc."}], "answers": [{"comments": [{"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472088082, "post_id": 39135082, "comment_id": 65615734, "body": "Well, I can&#39;t find any error in you logic - matches the reality so far. I came back to C++ after years of Java, and I found their expns hierarchy quite common-sensical, in spite of their huge numbers. Now, seeing &quot;logic_error&quot; and &quot;runtime_error&quot;, I sorta expected deep-thought went into the <code>stdexcept</code> and the sparsity of it is the result of elevated minds analysing heaps of code and deciding &quot;those are the ones everyone will ever need as foundation to build on&quot;. Surprise\u2026 not one to tell the user &quot;something wrong with your input&quot; - that&#39;s sooo standardly basic. So, worry\u2026 what am I missing?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472142753, "post_id": 39135082, "comment_id": 65644366, "body": "@AdrianColomitchi: <code>std::runtime_error</code> is designed to be derived from. For each category of thing that can be wrong, there ought to be an exception that derives from a standard exception class. It&#39;s designed to be pretty rare to actually <i>throw</i> one of the standard exceptions, because there is no set of standard exceptions that could possibly cover most use-cases for most programs."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472169365, "post_id": 39135082, "comment_id": 65656390, "body": "@MooingDuck True. However, there are categories of exceptions that are so widely used that worth standardizing - invalid_input at runtime being one of them."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1472169965, "post_id": 39135082, "comment_id": 65656549, "body": "@MooingDuck Lacking a &quot;standard&quot; one with that meaning means that if I build on top of 3 libs, each one with its own form of &quot;invalid_input&quot;, I&#39;ll need 3 specialized catchers.  As zneak put it &quot;I can imagine the throw, but I can&#39;t imagine the catch&quot;."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472240785, "post_id": 39135082, "comment_id": 65689594, "body": "@AdrianColomitchi: You should have a catch at each place you need to handle an exception. In general, that should be one per couple functions, regardless of same types or different types."}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 3, "last_activity_date": 1472108118, "last_edit_date": 1472108118, "creation_date": 1472086292, "answer_id": 39135082, "question_id": 39134436, "link": "https://stackoverflow.com/questions/39134436/is-there-a-defacto-standard-exception-or-best-practice-way-in-signalling-invali/39135082#39135082", "title": "Is there a defacto standard exception or best-practice way in signalling &quot;invalid input&quot; by exception?", "body": "<p>The idea behind <code>std::logic_error</code> and derived classes is to be a bit like a glorified assert - and in the standard library they are used somewhat like that (think <code>vector::at</code> - what kind of recovery do you want to have from an invalid vector index? It just means that the logic is botched, it's just a friendly alternative to UB); also <code>invalid_argument</code> is used for something like that, IIRC in <code>std::bitset</code>.</p>\n\n<p>But I agree that in general an \"invalid argument\" kind of exception can derive both from a \"logical\" or \"runtime\" error; my main point here is: don't seek much logic where there isn't any. </p>\n\n<p>The whole <code>&lt;stdexcept&gt;</code> thing looks like it was jotted down as an afterthought before going to dinner, and then completely forgot. Extremely wide classes of errors are squarely divided into this logic/runtime dichotomy (of disputable value), essentially based on how they are used in the standard library for those that are used; those that aren't used (which should be a convenience for the programmer) are random both in choice (<code>overflow</code>/<code>underflow</code>/<code>domain_error</code> - maybe they were thinking just about mathematical functions?) and characterization (an <code>out_of_range</code> is \"logic\" but an <code>overflow</code> is \"runtime\"? debatable at best).</p>\n\n<p>In short: don't overthink the <code>stdexcept</code> ideas - they are vague, disputable and then hammered to fit some needs of the standard library. Derive the exception hierarchy that makes sense for your application from <code>std::exception</code> or <code>std::runtime_error</code> and be happy with it. </p>\n"}], "owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "closed_date": 1472091971, "accepted_answer_id": 39135082, "answer_count": 1, "score": 4, "last_activity_date": 1472108118, "creation_date": 1472080885, "last_edit_date": 1472095539, "question_id": 39134436, "link": "https://stackoverflow.com/questions/39134436/is-there-a-defacto-standard-exception-or-best-practice-way-in-signalling-invali", "closed_reason": "Opinion-based", "title": "Is there a defacto standard exception or best-practice way in signalling &quot;invalid input&quot; by exception?", "body": "<p><code>invalid_argument</code> is-a <code>logic_error</code>.</p>\n\n<p>Both <a href=\"http://en.cppreference.com/w/cpp/error/logic_error\" rel=\"nofollow\">reference</a> <a href=\"http://www.cplusplus.com/reference/stdexcept/logic_error/\" rel=\"nofollow\">sites</a> indicate something on the line of</p>\n\n<blockquote>\n  <p>This class <code>[i.e. logic_error]</code> defines the type of objects thrown as exceptions to report errors in the internal logical of the program, such as violation of logical preconditions or class invariants.</p>\n  \n  <p><em>These errors are presumably detectable before the program executes.</em></p>\n</blockquote>\n\n<p><strong>Question:</strong> accepting that the semantics of <code>invalid_argument</code> is strictly bound to \"programmers' mistake\", <em>is there any de facto standard exception</em> a program/library/server may use to communicate<sup>++</sup> at <strong>runtime</strong> to an external calling party \"the provided input is invalid\"?\n<br>Does your prev experience show a regular pattern in the use of an \"invalid_input\" type of exception?\n<br>If so, is it standard or does everyone just derive their exceptions as needed?</p>\n\n<p>Notes:</p>\n\n<ol>\n<li><p>clearly, <code>stdexcept</code> provides none with the <em>runtime</em> semantics. And neither do boost</p></li>\n<li><p>while I know/follow the validation-as-early-as-possible rule, I found frequent enough cases in which input data (originated from a user or not) can be validated only in deeper context: the as-early-as-possible may require matching against a deep context, not available \"at the gateway\".</p></li>\n</ol>\n\n<hr>\n\n<p><sup>++</sup> \"to communicate\" = have, up in the calling chain (or deep in the stack-trace, if you so prefer), a block like</p>\n\n<pre><code>// fwd declaration\nvoid function_facing_dirty_code(struct user_input&amp; data);\n\nvoid function_facing_the_user(const char* jsonArgs) {\n  try {\n    struct user_input;\n    parse_user_input(json_args, user_input);\n    function_facing_dirty_code(user_input);\n  }\n  catch(invalid_input&amp; ii) {\n    // **this** should be a standard error for erroneous input/args/etc\n    // treat it by telling the out-of-my-control caller to behave\n  }\n  catch (std::runtime_exception&amp; e) {\n    // tell the caller: sorry, you've done nothing wrong,\n    // but I'm having generic runtime troubles.\n  }\n}\n\nvoid function_facing_dirty_code(struct user_input&amp; data) {\n  try {\n    // ... do some work\n    // ... do some more work\n    // Ahhh\n    throw std::invalid_argument(\"Requested amount over the daily redraw limit\");\n    // ooops. This will cause a BSoD instead of telling the user.\n    // Because std::invalid_argument is a logic error\n  }\n  catch(std::logic_error&amp; bsod) {\n    // log an error, blame the author, snitch it to his boss,\n    // then generate a BSoD for the user's delight,\n    // because she must NOT see our coding family's dirty laundry\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1472079983, "post_id": 39134319, "comment_id": 65613913, "body": "You should also get some learning material from this millennium / tell your teacher the 80s are gone."}, {"owner": {"reputation": 176, "user_id": 1768682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6745281c82ad0e7a243883dba1219346?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1768682/matt"}, "edited": false, "score": 1, "creation_date": 1472080124, "post_id": 39134319, "comment_id": 65613952, "body": "You should look into &quot;Resource Acquisition Is Initialization&quot; (RAII) and all the lovely modern flavors of pointers in <b>modern</b> C++. Here&#39;s a good start: <a href=\"http://stackoverflow.com/questions/395123/raii-and-smart-pointers-in-c\" title=\"raii and smart pointers in c\">stackoverflow.com/questions/395123/raii-and-smart-pointers-i&zwnj;&#8203;n-c</a>"}, {"owner": {"reputation": 1, "user_id": 5869684, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153819444636145/picture?type=large", "display_name": "Jeremi Proulx", "link": "https://stackoverflow.com/users/5869684/jeremi-proulx"}, "edited": false, "score": 0, "creation_date": 1472080128, "post_id": 39134319, "comment_id": 65613956, "body": "haha ok! wow thanks...!"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1472080133, "post_id": 39134319, "comment_id": 65613957, "body": "The code that you&#39;ve shown us here doesn&#39;t return -1. You need to give us an example that reproduces the problem."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5869684, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153819444636145/picture?type=large", "display_name": "Jeremi Proulx", "link": "https://stackoverflow.com/users/5869684/jeremi-proulx"}, "edited": false, "score": 0, "creation_date": 1472081292, "post_id": 39134409, "comment_id": 65614255, "body": "Thanks! It makes sense! I&#39;ll try it"}], "tags": [], "owner": {"reputation": 899, "user_id": 5125025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g0KKA.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5125025/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1472080711, "creation_date": 1472080711, "answer_id": 39134409, "question_id": 39134319, "link": "https://stackoverflow.com/questions/39134319/linked-list-not-working-in-c/39134409#39134409", "title": "Linked list not working in c++", "body": "<p>Make sure head has been allocated before you reference it. This is the most likely source of your problem when you run InsertBack, which depends on having head be initialized already, because it goes through all the elements in the list starting with the first one but assumes the first one has already been allocated.</p>\n\n<p>It also makes an unnecessary memory allocation--it creates a new Node, and then immediately writes over the thing that's pointing to it, so what was the point?</p>\n\n<pre><code> Node *temp1 = new Node;\n temp1 = head;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5869684, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153819444636145/picture?type=large", "display_name": "Jeremi Proulx", "link": "https://stackoverflow.com/users/5869684/jeremi-proulx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "closed_date": 1472117622, "accepted_answer_id": 39134409, "answer_count": 1, "score": -2, "last_activity_date": 1472080711, "creation_date": 1472079899, "question_id": 39134319, "link": "https://stackoverflow.com/questions/39134319/linked-list-not-working-in-c", "closed_reason": "Not suitable for this site", "title": "Linked list not working in c++", "body": "<p>So i'm trying to get the linked list and this is my code so far. Everything look fine when i'm adding a node at the front of my list, but when i try to add my first node at the back, my code compile but return me -1. I'm not sure what's wrong with it but I know it's in the insertBack() function. And by the way, if there's anything else wrong let me know, it's my first try on linked list!\nThanks!</p>\n\n<pre><code>#include \"LinkedList.h\"\n#include &lt;iostream&gt;\n#include &lt;stddef.h&gt;\n\nLinkedList::LinkedList()\n{\n    head=NULL;\n    length=0;\n}\n\nvoid LinkedList::InsertFront(int item)\n{\n    Node *temp = new Node;\n    temp-&gt;data = item;\n    temp-&gt;next = head;\n    head = temp;\n    length++;\n}\n\nvoid LinkedList::InsertBack(int item)\n{\n    Node *temp1 = new Node;\n    temp1 = head;\n\n    while(temp1-&gt;next != NULL)\n    {\n        temp1 = temp1-&gt;next;\n    }\n    Node *temp = new Node;\n    temp-&gt;data = item;\n    temp-&gt;next = NULL;\n    temp1-&gt;next = temp;\n\n    length++;\n}\n\nvoid LinkedList::MakeEmpty()\n{\n    Node *temp;\n    while(head!= NULL)\n    {\n        temp = head;\n        head = head-&gt;next;\n        delete temp;\n    }\n    length;\n}\n\nvoid LinkedList::ShowItems()\n{\n    Node *temp = head;\n    while(temp != NULL)\n    {\n        std::cout&lt;&lt;temp-&gt;data&lt;&lt;std::endl;\n        temp = temp-&gt;next;\n    }\n}\n\n\nLinkedList::~LinkedList()\n{\n    MakeEmpty();\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "mfc", "windows-ce"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1472111558, "post_id": 39134306, "comment_id": 65623583, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/ms904384.aspx\" rel=\"nofollow noreferrer\">Using the MUI with Applications (Windows CE 5.0)</a>."}, {"owner": {"reputation": 779, "user_id": 123986, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77439a40c57295b1c92b6f195f2b4903?s=128&d=identicon&r=PG", "display_name": "David Gray Wright", "link": "https://stackoverflow.com/users/123986/david-gray-wright"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1472187940, "post_id": 39134306, "comment_id": 65660619, "body": "What I needed was &quot;HMENU hmenu = SHGetMenu( pCommandBar-&gt;m_hWnd );&quot; and use the HMENU from this command and the popup menu text is now modified as I require. The only issue left is the CommandBar button that the menu comes off does not change from its integer value."}], "answers": [{"tags": [], "owner": {"reputation": 779, "user_id": 123986, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77439a40c57295b1c92b6f195f2b4903?s=128&d=identicon&r=PG", "display_name": "David Gray Wright", "link": "https://stackoverflow.com/users/123986/david-gray-wright"}, "is_accepted": true, "score": 0, "last_activity_date": 1472190537, "creation_date": 1472190537, "answer_id": 39159110, "question_id": 39134306, "link": "https://stackoverflow.com/questions/39134306/how-to-change-menu-text/39159110#39159110", "title": "How to change menu text", "body": "<p>What I needed was </p>\n\n<pre><code>HMENU hmenu = SHGetMenu( pCommandBar-&gt;m_hWnd );\nNavigateMenu( hmenu );\n</code></pre>\n\n<p>and use the HMENU from this command and the popup menu text is now modified as I require.</p>\n\n<p>To set the toolbar button text i needed to use TB_SETBUTTONINFO on the pCommandBar->m_hWnd;</p>\n\n<pre><code>TBBUTTONINFO buttonInfo;\nZeroMemory( &amp;buttonInfo, sizeof( TBBUTTONINFO ) );\nbuttonInfo.cbSize = sizeof( TBBUTTONINFO );\nbuttonInfo.dwMask = TBIF_TEXT | TBIF_BYINDEX;// | TBIF_COMMAND ;\nwchar_t buffer[200];\nbuttonInfo.pszText = buffer;\nbuttonInfo.cchText = 200;\nHWND hwnd = pCommandBar-&gt;m_hWnd;\n::SendMessage( hwnd, TB_GETBUTTONINFO, 0, (LPARAM)&amp;buttonInfo );\nOutputDebug( L\" *** Button Text = [%s]\", buttonInfo.pszText );\n\nbuttonInfo.pszText = L\"BLAH\";\nbuttonInfo.cchText = 5;\n\n::SendMessage( hwnd, TB_SETBUTTONINFO, 0, (LPARAM)&amp;buttonInfo );\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 123986, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77439a40c57295b1c92b6f195f2b4903?s=128&d=identicon&r=PG", "display_name": "David Gray Wright", "link": "https://stackoverflow.com/users/123986/david-gray-wright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 39159110, "answer_count": 1, "score": 1, "last_activity_date": 1472190537, "creation_date": 1472079843, "last_edit_date": 1472106382, "question_id": 39134306, "link": "https://stackoverflow.com/questions/39134306/how-to-change-menu-text", "title": "How to change menu text", "body": "<p>I am currently trying to make our Windows CE device multi language.</p>\n\n<p>To do this I substituted numbers for text in the menu resource like \"51234\". On Creating the Menu Bar I iterate over the menu and sub menus and convert the textual number to an integer and look it up in a database and convert the text.</p>\n\n<pre><code>IDMB_BULK_AUDIT MENU \nBEGIN\n    POPUP \"51420\"\n    BEGIN\n        MENUITEM \"51432\",                 ID_OPTIONS_PREFERENCES\n        MENUITEM \"51435\",                 ID_OPTIONS_STATS\n    END\nEND\n</code></pre>\n\n<p>To get the integer text I am using GetMenuItemInfo and to set the text with SetMenuItemInfo. Sample code is below. I have my own OutputDebug(...) method and this method is called NavigateMenu and is called recursively (refer end if block).</p>\n\n<p>So my question is can I change the menu this way or do I need to build it dynamically (at run time). The code navigates the menu hierarchy and gets the integer values out the calls to GetMenuItemInfo and SetMenuItemInfo all succeed. The CommandBar_DrawMenuBar fails with Invalid Menu Handle (1401).</p>\n\n<pre><code>   // This is how I call the method.\n   NavigateMenu( pCommandBar-&gt;GetMenu( ) );\n   if( ::CommandBar_DrawMenuBar( pCommandBar-&gt;m_hCommandBar, MenuId ) )\n   {\n      OutputDebug( L\"Draw - OK\\n\" );\n   }\n   else\n   {\n      DWORD lastError = GetLastError( );\n      OutputDebug( L\"Draw - Fail [%d]\\n\", lastError );\n   }\n\n\nvoid CMainFrame::NavigateMenu( HMENU HandleMenu )\n{\n   wchar_t menuText[ 200 ];\n\n   BOOL cont = TRUE;\n\n   for( int i = 0; cont; ++i )\n   {\n      MENUITEMINFO menuiteminfo;\n      menuiteminfo.cbSize = sizeof( MENUITEMINFO );\n      menuiteminfo.fMask = MIIM_SUBMENU | MIIM_TYPE;\n\n      menuiteminfo.dwTypeData = menuText;\n      menuiteminfo.cch = 200;\n      menuiteminfo.hSubMenu = 0;\n      menuiteminfo.fType = MFT_STRING;\n\n      cont = GetMenuItemInfo( HandleMenu, i, true, &amp;menuiteminfo );\n      if( cont )\n      {\n         CStringW menuText2( ( wchar_t * )menuiteminfo.dwTypeData );\n         if( menuText2.GetLength( ) )\n         {\n            const int menuId = StringToInt( menuText2 );\n            if( menuId &gt; 0 )\n            {\n               CStringW menuText3( LoadResString( menuId ) );\n               wcscpy( menuText, menuText3 );\n               menuiteminfo.cch = menuText3.GetLength( ) + 1;\n               menuiteminfo.fMask = MIIM_TYPE;\n\n               //if( ModifyMenu( HandleMenu, i, MF_BYPOSITION, MF_STRING, menuText ) )\n               //if( ModifyMenu( HandleMenu, menuiteminfo.wID, MF_BYCOMMAND, MF_STRING, menuText ) )\n               if( SetMenuItemInfo( HandleMenu, i, true, &amp;menuiteminfo ) )\n               {\n               //if( SetMenuItemInfo( HandleMenu, menuiteminfo.wID, false, &amp;menuiteminfo ) )\n                  OutputDebug( L\"Success - &gt; %d to '%s'\\n\", menuId, menuiteminfo.dwTypeData );\n               }\n               else\n               {\n                  DWORD menuError = GetLastError( );\n                  OutputDebug( L\"Fail [%d] - &gt; %d to '%s'\\n\", menuError, menuId, menuiteminfo.dwTypeData );\n               }\n            }\n         }\n         if( menuiteminfo.hSubMenu )\n         {\n            NavigateMenu( menuiteminfo.hSubMenu );\n         }\n      }\n   }\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 899, "user_id": 5125025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g0KKA.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5125025/tom"}, "edited": false, "score": 0, "creation_date": 1472079934, "post_id": 39134269, "comment_id": 65613899, "body": "It sounds like it is not a C++ object, but a visual studio object.  You may be able to hunt down a way to delete whatever is making visual studio think the class still exists, but if that proves frustrating and this is just a small project with one or two files, it may be easier to just make a new project and copy your code into new files."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 2025478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a6a7fb9fa3189a9d5aa4c2cfcca3d08?s=128&d=identicon&r=PG", "display_name": "BBDev", "link": "https://stackoverflow.com/users/2025478/bbdev"}, "edited": false, "score": 0, "creation_date": 1472081022, "post_id": 39134321, "comment_id": 65614182, "body": "Thanks this was strange. My Recent Documents had a reference to the class and even though the class was deleted it was still causing the issue. I deleted the reference from my recent documents and it worked. Don&#39;t understand why but this was all I did."}], "tags": [], "owner": {"reputation": 56, "user_id": 6749139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050048ce8ebee17fb40f8cceabe29434?s=128&d=identicon&r=PG&f=1", "display_name": "Born2Pizza", "link": "https://stackoverflow.com/users/6749139/born2pizza"}, "is_accepted": true, "score": 1, "last_activity_date": 1472080266, "last_edit_date": 1472080266, "creation_date": 1472079927, "answer_id": 39134321, "question_id": 39134269, "link": "https://stackoverflow.com/questions/39134269/object-x-already-exists/39134321#39134321", "title": "Object &#39;X&#39; already exists", "body": "<p>Probably some stored data are still there from the previous project.\n1st solution: I would suggest you to change from the name tag, your project name. Maybe something was still there.\nThen, second option: restart Visual studio</p>\n\n<p>2nd solution: Watch also to the solution explorer, if there are hidden folder named as your class name. If so, delete them and create the class again</p>\n\n<p>Let me know.  </p>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 3645859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c63b3e50cbe65d9a7c5735da468c0a04?s=128&d=identicon&r=PG&f=1", "display_name": "Addi", "link": "https://stackoverflow.com/users/3645859/addi"}, "is_accepted": false, "score": 0, "last_activity_date": 1497714242, "creation_date": 1497714242, "answer_id": 44606403, "question_id": 39134269, "link": "https://stackoverflow.com/questions/39134269/object-x-already-exists/44606403#44606403", "title": "Object &#39;X&#39; already exists", "body": "<p>To solve this problem I created a file with the name that did not work via windows explorer in my project folder. I then dragged the file into visual studio and it worked.</p>\n"}], "owner": {"reputation": 83, "user_id": 2025478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a6a7fb9fa3189a9d5aa4c2cfcca3d08?s=128&d=identicon&r=PG", "display_name": "BBDev", "link": "https://stackoverflow.com/users/2025478/bbdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 39134321, "answer_count": 2, "score": 1, "last_activity_date": 1497714242, "creation_date": 1472079573, "question_id": 39134269, "link": "https://stackoverflow.com/questions/39134269/object-x-already-exists", "title": "Object &#39;X&#39; already exists", "body": "<p>I'm learning C++ and am redoing a tutorial that I did before. I deleted the project folder and recreated it. I right clicked on the solution, clicked Add Class and entered my class name, but I get the error that 'Object 'X' already exists' even though I deleted the previous folder. I'm just learning C++ so I guess I don't understand how C++ creates objects.</p>\n"}, {"tags": ["c++", "embedded"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 6, "creation_date": 1472078407, "post_id": 39134053, "comment_id": 65613488, "body": "If there only was a way to get the current time inside a loop ..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1472078538, "post_id": 39134053, "comment_id": 65613519, "body": "Are you running this on a POSIX system? You can use <code>alarm()</code> to send a signal after 5 minutes, and the signal handler will do what you want."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1472078623, "post_id": 39134053, "comment_id": 65613538, "body": "Or, at a push, hatch a <code>std::thread</code> and <code>sleep</code> on that. But only if desperation takes hold \u2014 threads aren&#39;t free."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472078625, "post_id": 39134053, "comment_id": 65613539, "body": "You might want to set up an event loop here, or use an off-the-shelf one like <a href=\"http://libuv.org\" rel=\"nofollow noreferrer\">libuv</a> which gives you a lot of timer functionality."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1472078652, "post_id": 39134053, "comment_id": 65613545, "body": "@RadLexus , this isn&#39;t a joking matter - these <code>time</code> system calls are expensive to perform... :-p ...and signal handlers such as the ones used with <code>alarm</code> are notoriously tricky. Even timer event polling using <code>epoll</code> or <code>kqueue</code> with a timer <code>fd</code> are full of requirements... seriously, what is a performance oriented programmer to do?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1472078768, "post_id": 39134053, "comment_id": 65613575, "body": "@Myst: well, OP ruled out using the obvious solution: threads. That leaves very few options."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1472078876, "post_id": 39134053, "comment_id": 65613602, "body": "Oh, you&#39;re right. So he wants not to move execution outside of a single do/while loop, but also for execution not to be blocked while waiting for the event to happen?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1472078888, "post_id": 39134053, "comment_id": 65613606, "body": "@RadLexus , I&#39;m happy you like my humor :-)"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1472142022, "post_id": 39134053, "comment_id": 65643876, "body": "I have attempted to salvage this question, and have voted to reopen. I think it is useful now in its current form. Also, fwiw, too broad was not the appropriate close reason. Unclear was. Please don&#39;t blow through review queues!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1472167337, "post_id": 39134053, "comment_id": 65655803, "body": "Without further information, an answer is impossible. If that is some bare-metal MCU, timers and interrupts are an option. Possibly an RTOS with timer-tasks. None is simple for a beginner, but you might find information by some <b>research on your own</b>."}, {"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1472484870, "post_id": 39134053, "comment_id": 65758763, "body": "Crazy idea - can the program be split up using OpenMP or manual subdivision? Even without an RTOS, separate processes can run concurrently without explicit use of threads."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 0, "creation_date": 1472078962, "post_id": 39134142, "comment_id": 65613635, "body": "I cannot use boost since its very large and occupies lots of space. I am working on embedded device where I have storage limitation"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "reply_to_user": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "edited": false, "score": 2, "creation_date": 1472079951, "post_id": 39134142, "comment_id": 65613905, "body": "@RDoonds Did you not feel that that would have been useful information to mention in your question? o.O"}, {"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1472081041, "post_id": 39134142, "comment_id": 65614188, "body": "Boost can be embedded just fine, as far as I know.  <a href=\"http://stackoverflow.com/questions/166542/using-boost-in-embedded-system-with-memory-limitation\" title=\"using boost in embedded system with memory limitation\">stackoverflow.com/questions/166542/&hellip;</a>"}, {"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1472150191, "post_id": 39134142, "comment_id": 65648468, "body": "In any case, io_service and deadline_timer are only recommendations. Asynchronous dispatches with variable delays are your best bet. What are you using for threading? What are your other constraints, if any? Maybe I can still help."}, {"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1472150774, "post_id": 39134142, "comment_id": 65648778, "body": "Wait, you aren&#39;t using threads but you don&#39;t want to stop execution? Just count time elapsed and execute if you meet your threshold. You&#39;re out of luck if any of the calls take too long or fail to return; if possible, use some form of coroutine, partial result, or timeout to mitigate this risk."}], "tags": [], "owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1472078872, "creation_date": 1472078872, "answer_id": 39134142, "question_id": 39134053, "link": "https://stackoverflow.com/questions/39134053/executing-code-at-an-interval-with-polling/39134142#39134142", "title": "Executing code at an interval, with polling", "body": "<p>This sounds like you're looking for two different capabilities; one, to dispatch a command without disrupting execution; two, to wait for a certain amount of time. For the first, you're looking for asynchronous programming. For the second, I recommend <code>Boost::deadline_timer</code>. To combine the two, look at <code>Boost::io_service</code>, which will allow you to register asynchronous callbacks with or without the use of a timer.</p>\n"}, {"comments": [{"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 3, "creation_date": 1472079054, "post_id": 39134150, "comment_id": 65613666, "body": "@Myst I always just figure some people don&#39;t like the fact that my avatar incorrectly portrays a giraffe as having a short neck."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1472167517, "post_id": 39134150, "comment_id": 65655852, "body": "Not my DV, but I don&#39;t think this is a good answer. Actually the question is not good, too and far too broad. &quot;Most MCU&#39;s provide a way to query the CPU counter and the frequency. &quot; - is plain wrong. Hardly any MCU with less than 32 bits even has a CPU-counter (whatever that might be -1 CPU, 2 CPUs?) and almost none has a way to query the frequency - how would it without a defined 2nd reference clock?"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1472167751, "post_id": 39134150, "comment_id": 65655928, "body": "@Olaf Yeah the question is dubious. I tried, but you know what they say, can&#39;t polish a turd. As for the answer, I will change &quot;most&quot; to &quot;some ... may&quot;, and hopefully that will put your soul at ease and let us move past this great tragedy. Hopefully there is at least some redeeming quality in the <i>rest</i> of my answer besides that single qualitative word, but I completely understand how that may have invalidated the entire thing. (Amusingly, when I wrote &quot;most&quot; to begin with I thought, &quot;maybe I should change that... nah, surely any reader with a brain will be able to get the point here&quot;)."}], "tags": [], "owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1472167842, "last_edit_date": 1472167842, "creation_date": 1472078925, "answer_id": 39134150, "question_id": 39134053, "link": "https://stackoverflow.com/questions/39134053/executing-code-at-an-interval-with-polling/39134150#39134150", "title": "Executing code at an interval, with polling", "body": "<p>Well, of course, the advice to spawn off a separate thread (that's what I would do) or use <code>alarm()</code> given in the comments is good advice, but may not be possible on your device. However, focusing on your current approach, generally the idea is, pseudo-code:</p>\n\n<pre><code>last action time = current time\n\nwhile (true) {\n   do things.\n   if current time - last action time &gt;= 5 minutes then\n       perform action\n       last action time = current time\n       // or last action time += 5 minutes if you want to mitigate drift\n   end\n}\n</code></pre>\n\n<p>So now you just need to pick your favorite way to get the current time. On a desktop platform you could use e.g. <code>time()</code>, <a href=\"http://linux.die.net/man/2/gettimeofday\" rel=\"nofollow\"><code>gettimeofday()</code></a>, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724408(v=vs.85).aspx\" rel=\"nofollow\"><code>GetTickCount()</code></a> on Windows, etc.  Some embedded platforms may provide those as well. However, this could be problematic:</p>\n\n<p>Since you mentioned in a comment that you are working on an embedded device, \"your favorite way to get the current time\" will vary depending on the platform, you'll just have to check the device docs. If you're lucky, your MCU may provide a way to query the CPU counter, and the frequency you usually know already from your setup. But it may not.</p>\n\n<p>If it does not, another alternative is if your device provides an on-board timer. In this case, you may be able to configure it and respond to periodic interrupts, in that case your two options are generally:</p>\n\n<ol>\n<li>Do the action in the timer interrupt handler - but only do this if it's short, and you take proper precautions for interrupt-safety.</li>\n<li>Set a <code>volatile</code> flag in the timer interrupt handler, check that flag in the main loop and execute the action + reset the flag there if it is set. This is generally a much simpler approach.</li>\n</ol>\n\n<p>Doing it that way is architecturally similar to using <code>alarm()</code>. However, there are certainly embedded platforms that implement <code>time()</code> and/or <code>gettimeofday()</code> as well. But those are your choices.</p>\n"}], "owner": {"reputation": 315, "user_id": 4123611, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d3a7501ed64597b7418267b9dbd0af54?s=128&d=identicon&r=PG&f=1", "display_name": "RDoonds", "link": "https://stackoverflow.com/users/4123611/rdoonds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 39134150, "answer_count": 2, "score": -3, "last_activity_date": 1472203699, "creation_date": 1472078290, "last_edit_date": 1472141795, "question_id": 39134053, "link": "https://stackoverflow.com/questions/39134053/executing-code-at-an-interval-with-polling", "title": "Executing code at an interval, with polling", "body": "<p>I am try to implement a periodic event in C++, on an embedded device with limited library functions available. I cannot use sleep or other delays since it stop the current execution.</p>\n\n<p>For eg.</p>\n\n<pre><code>do\n{\n    if(something)\n    {\n       //Do something\n    }\n\n    if(something)\n    {\n       //Do something\n    }\n\n    if(every 5 minutes)\n    {\n       //Do something only once after 5 minutes\n    }\n}\nwhile(true)\n</code></pre>\n\n<p>I am not sure how to go about this. Can you help me with this since I need to implement this in this do while loop? I would have used threads, but on this device that's not really possible, so I'm looking for another way.</p>\n"}, {"tags": ["c++", "sdl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6347871, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad00d69609ac6007fa8cc7ff88e47e17?s=128&d=identicon&r=PG&f=1", "display_name": "The1Dev", "link": "https://stackoverflow.com/users/6347871/the1dev"}, "edited": false, "score": 0, "creation_date": 1472157780, "post_id": 39136794, "comment_id": 65652305, "body": "sorry i didn&#39;t understand your code. you just confused me by conflicting my code and your code .. can you highlight what should i do exactly and thank youuuuuuu bery much!"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "reply_to_user": {"reputation": 11, "user_id": 6347871, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad00d69609ac6007fa8cc7ff88e47e17?s=128&d=identicon&r=PG&f=1", "display_name": "The1Dev", "link": "https://stackoverflow.com/users/6347871/the1dev"}, "edited": false, "score": 0, "creation_date": 1472186151, "post_id": 39136794, "comment_id": 65660164, "body": "Added some comments, not sure if it may help. There are diff tools around, although I don&#39;t believe they will be useful for so short code. If you have a question about something particular - ask away; otherwise I don&#39;t think I know the language to explain it."}], "tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": false, "score": 11, "last_activity_date": 1472185961, "last_edit_date": 1472185961, "creation_date": 1472100006, "answer_id": 39136794, "question_id": 39133873, "link": "https://stackoverflow.com/questions/39133873/how-to-set-a-gui-button-in-the-win32-window-using-sdl-c/39136794#39136794", "title": "How to set a GUI Button in the win32 window using SDL C++?", "body": "<p>It's not as simple as one or two lines. Here is an example:</p>\n\n<pre><code>#include &lt;SDL2/SDL.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct {\n    SDL_Rect draw_rect;    // dimensions of button\n    struct {\n        Uint8 r, g, b, a;\n    } colour;\n\n    bool pressed;\n} button_t;\n\nstatic void button_process_event(button_t *btn, const SDL_Event *ev) {\n    // react on mouse click within button rectangle by setting 'pressed'\n    if(ev-&gt;type == SDL_MOUSEBUTTONDOWN) {\n        if(ev-&gt;button.button == SDL_BUTTON_LEFT &amp;&amp;\n                ev-&gt;button.x &gt;= btn-&gt;draw_rect.x &amp;&amp;\n                ev-&gt;button.x &lt;= (btn-&gt;draw_rect.x + btn-&gt;draw_rect.w) &amp;&amp;\n                ev-&gt;button.y &gt;= btn-&gt;draw_rect.y &amp;&amp;\n                ev-&gt;button.y &lt;= (btn-&gt;draw_rect.y + btn-&gt;draw_rect.h)) {\n            btn-&gt;pressed = true;\n        }\n    }\n}\n\nstatic bool button(SDL_Renderer *r, button_t *btn) {\n    // draw button\n    SDL_SetRenderDrawColor(r, btn-&gt;colour.r, btn-&gt;colour.g, btn-&gt;colour.b, btn-&gt;colour.a);\n    SDL_RenderFillRect(r, &amp;btn-&gt;draw_rect);\n\n    // if button press detected - reset it so it wouldn't trigger twice\n    if(btn-&gt;pressed) {\n        btn-&gt;pressed = false;\n        return true;\n    }\n    return false;\n}\n\nint main (int argc, char *argv[]){\n    int quit = 0;\n    SDL_Init(SDL_INIT_VIDEO);\n    SDL_Window* window = NULL;\n    window = SDL_CreateWindow(\"\",350, 150, 800, 500,    SDL_WINDOW_SHOWN);\n    if (window == NULL){\n        fprintf(stderr, \"create window failed: %s\\n\", SDL_GetError());\n        return 1;   // 'error' return status is !0. 1 is good enough\n    }\n\n    SDL_Renderer* renderer = NULL;\n    renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);\n    if(!renderer) {   // renderer creation may fail too\n        fprintf(stderr, \"create renderer failed: %s\\n\", SDL_GetError());\n        return 1;\n    }\n\n    SDL_Texture* txt = NULL;\n\n    SDL_Rect rct;\n    rct.x = 0 ;\n    rct.y = 0;\n    rct.h = 500;\n    rct.w = 800;\n\n    // button state - colour and rectangle\n    button_t start_button = {\n        .colour = { .r = 255, .g = 255, .b = 255, .a = 255, },\n        .draw_rect = { .x = 128, .y = 128, .w = 128, .h = 128 },\n    };\n\n    enum {\n        STATE_IN_MENU,\n        STATE_IN_GAME,\n    } state = 0;\n\n    while(!quit) {\n        SDL_Event evt;    // no need for new/delete, stack is fine\n\n        // event loop and draw loop are separate things, don't mix them\n        while(SDL_PollEvent(&amp;evt)) {\n            // quit on close, window close, or 'escape' key hit\n            if(evt.type == SDL_QUIT ||\n                    (evt.type == SDL_WINDOWEVENT &amp;&amp; evt.window.event == SDL_WINDOWEVENT_CLOSE) ||\n                    (evt.type == SDL_KEYDOWN &amp;&amp; evt.key.keysym.sym == SDLK_ESCAPE)) {\n                quit = 1;\n            }\n\n            // pass event to button\n            button_process_event(&amp;start_button, &amp;evt);\n        }\n\n        SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255);\n        SDL_RenderClear(renderer);\n\n//      SDL_RenderCopy(renderer, txt, NULL, &amp;rct);\n\n        if(state == STATE_IN_MENU) {\n            if(button(renderer, &amp;start_button)) {\n                printf(\"start button pressed\\n\");\n                state = STATE_IN_GAME;   // state change - button will not be drawn anymore\n            }\n        } else if(state == STATE_IN_GAME) {\n            /* your game logic */\n        }\n\n        SDL_RenderPresent(renderer);\n    }\n    SDL_DestroyWindow(window);\n    SDL_DestroyRenderer(renderer);\n    return 0;\n}\n</code></pre>\n\n<p>(it is C but it's not a point here). It draws a simple constant-colour rectangle and detects clicks on it. It is trivial to replace rectangle with e.g. texture; adding text may be a bit harder, using SDL_ttf is probably simplest way to do it.</p>\n\n<p>It may be improved in many ways depending on what you wanted to get. E.g. it reacts on mouse button down, while in some cases you might want to react to button release, and track where it was pressed and released. And if you'll have many buttons, calling event update on each one is ugly, so you might want to come with different system for that. You might also want to have non-rectangular buttons (e.g. some shape specified by image) - that will need quite different approach as you'll need to check mouse click against shape mask.</p>\n\n<p>I would recommend taking a look at <a href=\"https://github.com/ocornut/imgui\" rel=\"noreferrer\">imgui</a>.</p>\n\n<p>As a side note, don't <code>new</code> <code>SDL_Event</code>, there is absolutely no point in that.</p>\n"}], "owner": {"reputation": 11, "user_id": 6347871, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad00d69609ac6007fa8cc7ff88e47e17?s=128&d=identicon&r=PG&f=1", "display_name": "The1Dev", "link": "https://stackoverflow.com/users/6347871/the1dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6927, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472185961, "creation_date": 1472077206, "last_edit_date": 1472087332, "question_id": 39133873, "link": "https://stackoverflow.com/questions/39133873/how-to-set-a-gui-button-in-the-win32-window-using-sdl-c", "title": "How to set a GUI Button in the win32 window using SDL C++?", "body": "<p>Iam soo newbie in SDL and games developement. I want to make a game and I need to put a \"Start\" button in the game's window. So please can anyone help me on how to do it?\nNo mouse event in the whole screen I want just to create a button to click on it, where can I  insert the code of the button?\nthis is my code:</p>\n\n<pre><code> int main (int argc, char *argv[]){\n    int quit = 0;\n    SDL_Init(SDL_INIT_VIDEO);\n    SDL_Window* window = NULL;\n    window = SDL_CreateWindow(\"Snaykie v1.0\",350, 150, 800, 500,    SDL_WINDOW_SHOWN);\n    if (window == NULL){\n        std::cout &lt;&lt; \"Can not open the game\" &lt;&lt; std::endl;\n        return 0;\n    }\n    SDL_Renderer* renderer = NULL;\n    renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);\n    SDL_Event* evt = new SDL_Event();\n\n    SDL_Texture* txt = NULL;\n    txt = IMG_LoadTexture(renderer, \"mainview.bmp\");\n\n    SDL_Rect rct;\n    rct.x = 0 ;\n    rct.y = 0;\n    rct.h = 500;\n    rct.w = 800;\n\n    SDL_Surface *button = NULL;\n\n    while (!quit &amp;&amp; evt-&gt;type != SDL_QUIT){\n        SDL_PollEvent(evt);\n       SDL_RenderClear(renderer);\n       SDL_RenderCopy(renderer, txt, NULL, &amp;rct);\n       SDL_RenderPresent(renderer);\n    }\n    SDL_DestroyWindow(window);\n    SDL_DestroyRenderer(renderer);\n    delete evt;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "openssl", "include", "include-path"], "comments": [{"owner": {"reputation": 2057, "user_id": 2231098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e13eb8b89352b54a72a7b9bec2a9a9d2?s=128&d=identicon&r=PG&f=1", "display_name": "hyun", "link": "https://stackoverflow.com/users/2231098/hyun"}, "edited": false, "score": 0, "creation_date": 1472084574, "post_id": 39133830, "comment_id": 65615013, "body": "Very interesting.. If I were you, (1)check everything is doing same config.(I mean build is debug but include path setting is release.. etc)  (2)move openssl folder and test"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472094675, "post_id": 39133830, "comment_id": 65617088, "body": "Please provide some of your build log."}], "answers": [{"tags": [], "owner": {"reputation": 5331, "user_id": 1464780, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/93db7adb43e6578e81422e6120fb3cab?s=128&d=identicon&r=PG", "display_name": "Walter Fabio Simoni", "link": "https://stackoverflow.com/users/1464780/walter-fabio-simoni"}, "is_accepted": false, "score": 1, "last_activity_date": 1472230188, "creation_date": 1472230188, "answer_id": 39171153, "question_id": 39133830, "link": "https://stackoverflow.com/questions/39133830/my-additional-include-directory-for-openssl-isnt-recognized/39171153#39171153", "title": "my additional include directory for openSSL isn&#39;t recognized", "body": "<p>I solved the problem by setting the library/include path in \"All Configuration\" instead of x86/x64.</p>\n\n<p>Problem solved.</p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 5331, "user_id": 1464780, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/93db7adb43e6578e81422e6120fb3cab?s=128&d=identicon&r=PG", "display_name": "Walter Fabio Simoni", "link": "https://stackoverflow.com/users/1464780/walter-fabio-simoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491135048, "creation_date": 1472076903, "last_edit_date": 1491135048, "question_id": 39133830, "link": "https://stackoverflow.com/questions/39133830/my-additional-include-directory-for-openssl-isnt-recognized", "title": "my additional include directory for openSSL isn&#39;t recognized", "body": "<p>I'm trying to use openSSL on a c++ application on VS2015.\nI downloaded the OpenSSL Win32 binaries.</p>\n\n<p>I have a directory with an \"Include\" and \"Lib\" subdirectory.\nThe \"Include\" subdirectory contains right the \"OpenSSL\" folder.</p>\n\n<p>I was going in the property of my project ( x86) under \" Properties -> C/C++ -> General -> Additional Include Directories\" and i added the full directory:</p>\n\n<pre><code>C:\\OpenSSL-Win32\\include\n</code></pre>\n\n<p>Then i added under \"Project Properties -> Linker -> General -> Additional Library Directories\" i added the \"Lib\" subfolder, then i was on \"Project Properties -> Linker -> Input -> Additional Dependencies\" and add these two lines:</p>\n\n<pre><code>libeay32.lib \nssleay32.lib\n</code></pre>\n\n<p>When i'm trying to do:</p>\n\n<pre><code>#include &lt;openssl/ssl.h&gt; \n</code></pre>\n\n<blockquote>\n  <p>the \"openssl\" directory is not found.</p>\n</blockquote>\n\n<p>I really verify all the path, all appear to be ok but i didn't work.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1472076893, "post_id": 39133806, "comment_id": 65613003, "body": "<code>Class</code> is not a keyword, <code>class</code> is a keyword.  If that was a typo, then there is no difference."}, {"owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1472076947, "post_id": 39133806, "comment_id": 65613020, "body": "My apologies for that I meant to say for example int&amp; x vs int &amp; x what&#39;s the difference"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1472077077, "post_id": 39133806, "comment_id": 65613061, "body": "Both are the same, you are declaring a reference to an integer.  Note that references must be initialised (or you get a compilation error)."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1472077097, "post_id": 39133806, "comment_id": 65613073, "body": "Adding or removing white space between the tokens has no effect on the meaning."}, {"owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "edited": false, "score": 0, "creation_date": 1472077190, "post_id": 39133806, "comment_id": 65613104, "body": "So which function will be executed                                                                   1) ostream&amp; operator &lt;&lt; ( ostream&amp; os, const Rider&amp; r) {    os &lt;&lt; &quot;Rider name: &quot; &lt;&lt; r.name        &lt;&lt; &quot; Age: &quot; &lt;&lt; r.age       &lt;&lt; &quot; Rank: &quot; &lt;&lt; r.rank        &lt;&lt; &quot; Weyr: &quot; &lt;&lt; r.weyr &lt;&lt; endl;    return os; }                                                                                                               2)ofstream&amp; operator &lt;&lt; ( ofstream&amp; os, const Rider&amp; r ) {    os &lt;&lt; r.name &lt;&lt; endl       &lt;&lt; r.age &lt;&lt; endl       &lt;&lt; r.rank &lt;&lt; endl       &lt;&lt; r.weyr &lt;&lt; endl;     return os; }"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1472077568, "post_id": 39133806, "comment_id": 65613217, "body": "@Anny Why are you asking about code when the answer is that there is no difference between the two declarations?"}, {"owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "edited": false, "score": 0, "creation_date": 1472077688, "post_id": 39133806, "comment_id": 65613261, "body": "Cause this is one of the code I have to explain but my teacher insist that there is a difference &#39;("}, {"owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "edited": false, "score": 0, "creation_date": 1472078127, "post_id": 39133806, "comment_id": 65613423, "body": "But still thanks for clarification."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1472105257, "post_id": 39133806, "comment_id": 65620009, "body": "@Anny the difference is in the <b>types</b> of parameters being passed, not the <b>syntax</b> of the reference notation. #1 works with <i>any</i> <code>ostream</code> descendant, whereas #2 <i>only</i> works with <code>ofstream</code> and descendants. <code>ofstream</code> is an <code>ostream</code> descendant. If both #1 and #2 are in scope, an <code>ofstream</code> variable will invoke #2 since it is a better match."}, {"owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "edited": false, "score": 0, "creation_date": 1472123093, "post_id": 39133806, "comment_id": 65631149, "body": "Got it Remy Lebeau now understand why I need these 2 functions as 1 for writing and second 1 for display"}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1472077533, "post_id": 39133869, "comment_id": 65613211, "body": "Downvoter, an explanation would be nice ..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472078708, "post_id": 39133869, "comment_id": 65613558, "body": "Not dv, but space may change the meaning in some places.<code>#define F()</code> vs <code>#define F    ()</code> for example."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472082360, "post_id": 39133869, "comment_id": 65614535, "body": "@Jarod42 But that is a pre-processor token, not part of the language? But i do agree, i mean <code>+ =</code> is different to <code>+=</code>, so maybe independent is the wrong word to use."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1472082280, "last_edit_date": 1472082280, "creation_date": 1472077190, "answer_id": 39133869, "question_id": 39133806, "link": "https://stackoverflow.com/questions/39133806/pass-by-reference-notation-in-c/39133869#39133869", "title": "Pass by reference Notation in C++", "body": "<p>These: </p>\n\n<pre><code>int &amp;a = c;\nint&amp; a = c;\nint &amp; a = c;\nint &amp; \\\na = c;\n</code></pre>\n\n<p>Are all the same. <a href=\"http://ideone.com/C4AKCT\" rel=\"nofollow\">Live example</a></p>\n"}], "owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1472113425, "answer_count": 1, "score": -1, "last_activity_date": 1472082280, "creation_date": 1472076728, "last_edit_date": 1472077904, "question_id": 39133806, "link": "https://stackoverflow.com/questions/39133806/pass-by-reference-notation-in-c", "closed_reason": "Needs details or clarity", "title": "Pass by reference Notation in C++", "body": "<p>Hi can Anyone Explain difference between the following declaration as I am new to c++:</p>\n\n<p><code>T&amp; s</code> vs  <code>T &amp; s</code>.</p>\n\n<p>what's the difference between the above notation.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11", "gcc", "linker", "g++"], "answers": [{"comments": [{"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 2, "creation_date": 1472087259, "post_id": 39135130, "comment_id": 65615572, "body": "Also, a good practice in these situations is to use the <code>-v</code> flag (verbose) in order to see what the search paths are (amogst other useful informations)."}, {"owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 0, "creation_date": 1472139896, "post_id": 39135130, "comment_id": 65642529, "body": "Awesome!  So, it looks like this will not work for dynamically linked libraries (shared objects).  And that was the problem.  Thanks."}], "tags": [], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "is_accepted": true, "score": 2, "last_activity_date": 1472086735, "creation_date": 1472086735, "answer_id": 39135130, "question_id": 39133689, "link": "https://stackoverflow.com/questions/39133689/g-cannot-find-shared-library/39135130#39135130", "title": "g++ cannot find shared library", "body": "<blockquote>\n  <p>The only difference between using an '-l' option and specifying a file\n  name is that '-l' surrounds library with 'lib' and `.a' and searches\n  several directories.</p>\n</blockquote>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.0/gcc_3.html#SEC16\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc-3.0/gcc_3.html#SEC16</a></p>\n"}], "owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4720, "favorite_count": 1, "accepted_answer_id": 39135130, "answer_count": 1, "score": 2, "last_activity_date": 1472086735, "creation_date": 1472076060, "question_id": 39133689, "link": "https://stackoverflow.com/questions/39133689/g-cannot-find-shared-library", "title": "g++ cannot find shared library", "body": "<p>I apologize that this is redundant, but none of the answers available seem to be able to solve my problem.  I am attempting to compile an executable using a shared object library.  The shared object library is called <code>libsession.so</code> and is found in the same directory that I am compiling the executable.  To compile and link, I use the following command</p>\n\n<p><code>\ng++ test_main.cpp -o program -std=c++11 -I ../src/base -L. -lsession\n</code></p>\n\n<p>Unforutanely, I get the <em>cannot find -lsession</em> error when linking.  If I change the command to directly reference the shared library as follows</p>\n\n<p><code>\ng++ test_main.cpp -o program -std=c++11 -I ../src/base libsession.so\n</code></p>\n\n<p>then the executable compiles/links and all is well.  Does anyone have any thoughts as to what I may be doing wrong?</p>\n"}, {"tags": ["c#", "c++", "windows", "com", "uri-scheme"], "comments": [{"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1472076181, "post_id": 39133686, "comment_id": 65612781, "body": "Totally possible and you&#39;re on the right track. Take a look at <a href=\"https://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a>"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1472104575, "post_id": 39133686, "comment_id": 65619741, "body": "A sample is available here <a href=\"https://blogs.msdn.microsoft.com/noahc/2006/10/19/register-a-custom-url-protocol-handler/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/noahc/2006/10/19/&hellip;</a>"}, {"owner": {"reputation": 87, "user_id": 1403584, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/025b655826cc2e838847d3e5f912680a?s=128&d=identicon&r=PG", "display_name": "Ji\u0159&#237; Trav\u011bnec", "link": "https://stackoverflow.com/users/1403584/ji%c5%99%c3%ad-trav%c4%9bnec"}, "edited": false, "score": 0, "creation_date": 1472161663, "post_id": 39133686, "comment_id": 65653926, "body": "OK. This lets me to open my application when the URI is called. But what if I want to deliver an object via this URI. e.g. File.Read(&quot;my://test.txt&quot;);"}], "answers": [{"tags": [], "owner": {"reputation": 116487, "user_id": 80274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cdf128a0ee0cf38f0a673dbc82a74449?s=128&d=identicon&r=PG", "display_name": "Scott Chamberlain", "link": "https://stackoverflow.com/users/80274/scott-chamberlain"}, "is_accepted": false, "score": 0, "last_activity_date": 1472164543, "creation_date": 1472164543, "answer_id": 39155785, "question_id": 39133686, "link": "https://stackoverflow.com/questions/39133686/is-possible-to-define-custom-uri-scheme-used-system-wide/39155785#39155785", "title": "Is possible to define custom URI scheme used system-wide?", "body": "<p>Doing <code>File.ReadAllBytes(\"ftp://example.com/touch.txt\");</code> does not work, if you try it you get a exception like</p>\n\n<pre><code>System.NotSupportedException was unhandled\n  Message=The given path's format is not supported.\n  Source=mscorlib\n  StackTrace:\n       at System.Security.Util.StringExpressionSet.CanonicalizePath(String path, Boolean needFullPath)\n       at System.Security.Util.StringExpressionSet.CreateListFromExpressions(String[] str, Boolean needFullPath)\n       at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)\n       at System.Security.Permissions.FileIOPermission..ctor(FileIOPermissionAccess access, AccessControlActions control, String[] pathList, Boolean checkForDuplicates, Boolean needFullPath)\n       at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)\n       at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)\n       at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)\n       at System.IO.File.ReadAllBytes(String path)\n       at WindowsFormsApplication1.Form1.button1_Click(Object sender, EventArgs e) in D:\\Code\\WindowsFormsApplication1\\WindowsFormsApplication1\\Form1.cs:line 25\n       at System.Windows.Forms.Control.OnClick(EventArgs e)\n       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)\n       at System.Windows.Forms.Control.WmMouseUp(Message&amp; m, MouseButtons button, Int32 clicks)\n       at System.Windows.Forms.Control.WndProc(Message&amp; m)\n       at System.Windows.Forms.ButtonBase.WndProc(Message&amp; m)\n       at System.Windows.Forms.Button.WndProc(Message&amp; m)\n       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message&amp; m)\n       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)\n       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG&amp; msg)\n       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)\n       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)\n       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)\n       at WindowsFormsApplication1.Program.Main() in D:\\Code\\WindowsFormsApplication1\\WindowsFormsApplication1\\Program.cs:line 17\n       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)\n       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\n       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n       at System.Threading.ThreadHelper.ThreadStart()\n  InnerException: \n</code></pre>\n\n<p>The reason it works when you do a OpenFileDialog is windows cheats with that and will download the file to a local temp folder first. It only does this for <code>ftp:</code> and <code>http:</code> because OpenFileDialog is handled by the windows shell and the shell is what uses URI schemes.</p>\n\n<p>I believe the <code>Source Filter</code> key under <code>HKCR\\ftp</code> points to a registered COM object that handles the logic of doing that local copy.</p>\n\n<p>If you just want your application to be opened by going to a URL like steam does with it's <code>steam://rungameid/382110</code> you just need to follow the instructions in <a href=\"https://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow\">this MSDN page</a>.</p>\n\n<p>If you want your file to be \"openable\" via a shell like <code>http:</code> or <code>ftp:</code> does with the open file dialog you will need to write a COM object that acts as the \"Source Filter\", I do not know of any place to find documentation on that.</p>\n\n<p><strong>Update</strong>: Reading more it does look like <a href=\"https://msdn.microsoft.com/en-us/library/aa767916(v=vs.85).aspx\" rel=\"nofollow\">Asynchronous Pluggable Protocol</a> like you mentioned is how you make those source filters. I have never tried to make one so I can't help you beyond that.</p>\n"}], "owner": {"reputation": 87, "user_id": 1403584, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/025b655826cc2e838847d3e5f912680a?s=128&d=identicon&r=PG", "display_name": "Ji\u0159&#237; Trav\u011bnec", "link": "https://stackoverflow.com/users/1403584/ji%c5%99%c3%ad-trav%c4%9bnec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 590, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1472164543, "creation_date": 1472076057, "last_edit_date": 1472161737, "question_id": 39133686, "link": "https://stackoverflow.com/questions/39133686/is-possible-to-define-custom-uri-scheme-used-system-wide", "title": "Is possible to define custom URI scheme used system-wide?", "body": "<p>I have been wondering for quite some time whether t is possible to create a library which would act as a file provider in Windows.</p>\n\n<p>For example if you try to open <code>ftp://example.com/touch.txt</code> file using standard Open file dialog, it (somehow magically) works. Is there a way how to implement my own provider for my own URI scheme?</p>\n\n<p>Could <code>Asynchronous Pluggable Protocol</code> be a solution? I was not able to find a working code example on how to make it work.</p>\n\n<p>To understand: I need this to work system-wide. This is nowise connected to internet browsers.</p>\n\n<p><strong>What if I need this <code>File.Open(\"my://test.txt\")</code> to work?</strong></p>\n"}, {"tags": ["c++", "qt", "destroy", "reusability"], "answers": [{"comments": [{"owner": {"reputation": 4602, "user_id": 2202101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/c1L7d.png?s=128&g=1", "display_name": "Neurotransmitter", "link": "https://stackoverflow.com/users/2202101/neurotransmitter"}, "edited": false, "score": 0, "creation_date": 1472124712, "post_id": 39135680, "comment_id": 65632207, "body": "Works, thanks! This is a best practice to reuse identificators?"}, {"owner": {"reputation": 35314, "user_id": 344347, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1d83837bce9d9a2656c4f5704d40c430?s=128&d=identicon&r=PG", "display_name": "Pavel Strakhov", "link": "https://stackoverflow.com/users/344347/pavel-strakhov"}, "reply_to_user": {"reputation": 4602, "user_id": 2202101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/c1L7d.png?s=128&g=1", "display_name": "Neurotransmitter", "link": "https://stackoverflow.com/users/2202101/neurotransmitter"}, "edited": false, "score": 2, "creation_date": 1472128818, "post_id": 39135680, "comment_id": 65634995, "body": "It depends on context. Generally, scope of any variable should not be bigger than it needs to be. In some cases it may be better to move repeated parts to a separate function."}], "tags": [], "owner": {"reputation": 35314, "user_id": 344347, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1d83837bce9d9a2656c4f5704d40c430?s=128&d=identicon&r=PG", "display_name": "Pavel Strakhov", "link": "https://stackoverflow.com/users/344347/pavel-strakhov"}, "is_accepted": true, "score": 2, "last_activity_date": 1472091127, "creation_date": 1472091127, "answer_id": 39135680, "question_id": 39133673, "link": "https://stackoverflow.com/questions/39133673/reuse-existing-qdiriterator-in-qt-5/39135680#39135680", "title": "Reuse existing QDirIterator in Qt 5", "body": "<p>C++ allows you to introduce a new scope anywhere you need, for example:</p>\n\n<pre><code>{\n  QDirIterator i(path1, QDir::Dirs | QDir::NoDotAndDotDot);\n  while (i.hasNext()) {\n    doSomething();\n  };\n}\n{\n  QDirIterator i(path2, QDir::Dirs | QDir::NoDotAndDotDot);\n  while (i.hasNext()) {\n    doSomething();\n  };\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1472251721, "last_edit_date": 1472251721, "creation_date": 1472251013, "answer_id": 39175515, "question_id": 39133673, "link": "https://stackoverflow.com/questions/39133673/reuse-existing-qdiriterator-in-qt-5/39175515#39175515", "title": "Reuse existing QDirIterator in Qt 5", "body": "<p>You can implement a forward sequential iterator adapter to <code>QDirIterator</code>:</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/dir-iterator-39133673\n#include &lt;QtCore&gt;\n#include &lt;boost/optional.hpp&gt;\n#include &lt;boost/iterator/iterator_facade.hpp&gt;\n\nclass QDir_iterator : public\n        boost::iterator_facade&lt;QDir_iterator, QString,\n        boost::forward_traversal_tag, QString&gt;\n{\n    friend class boost::iterator_core_access;\n    boost::optional&lt;QDirIterator &amp;&gt; it;\n    bool equal(const QDir_iterator &amp; other) const {\n        return **this == *other;\n    }\n    QString dereference() const {\n        return it != boost::none ? it-&gt;filePath() : QString{};\n    }\n    void increment() {\n        it-&gt;next();\n    }\npublic:\n    QDir_iterator() = default;\n    QDir_iterator(QDirIterator &amp; dir) : it{dir} {\n        it-&gt;next();\n    }\n};\n\nQDir_iterator begin(QDirIterator &amp; dir) { return QDir_iterator{dir}; }\nQDir_iterator end(QDirIterator &amp;) { return QDir_iterator{}; }\n</code></pre>\n\n<p>The adapter is usable on a <code>QDirIterator</code>, thus you can pass a <code>QDirIterator</code> directly to a range-for:</p>\n\n<pre><code>void test1() {\n    auto curr = QDir::current();\n    auto entries = curr.entryList();\n    int i = 0;\n    for (auto dir : QDirIterator{curr}) ++i;\n    Q_ASSERT(i == entries.count());\n}\n</code></pre>\n\n<p>You can pass any necessary flags or filters to <code>QDirIterator</code>, of course. The adapter will follow them.</p>\n\n<p>If you're allergic to Boost, you could factor out iterating a directory to \"save\" having to deal with a braced scope:</p>\n\n<pre><code>template &lt;typename F&gt;\nvoid iterate(QDirIterator &amp;&amp; it, F &amp;&amp; fun) {\n     while (it.hasNext())\n        fun(it.next());\n}\n</code></pre>\n\n<p>Iteration uses a temporary iterator - uniform initialization makes it quite painless:</p>\n\n<pre><code>void test2() {\n    auto curr = QDir::current();\n    auto entries = curr.entryList();\n    int i = 0, j = 0;\n    iterate({curr}, [&amp;](const QString &amp;){ ++i; });\n    Q_ASSERT(entries.length() == i);\n    iterate({curr}, [&amp;](const QString &amp;){ ++j; });\n    Q_ASSERT(entries.length() == j);\n}\n</code></pre>\n"}], "owner": {"reputation": 4602, "user_id": 2202101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/c1L7d.png?s=128&g=1", "display_name": "Neurotransmitter", "link": "https://stackoverflow.com/users/2202101/neurotransmitter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 39135680, "answer_count": 2, "score": 1, "last_activity_date": 1472251721, "creation_date": 1472075971, "question_id": 39133673, "link": "https://stackoverflow.com/questions/39133673/reuse-existing-qdiriterator-in-qt-5", "title": "Reuse existing QDirIterator in Qt 5", "body": "<p>I use multiple <code>QDirIterator</code>s in a single scope of a Qt 5 project. They typically look like this:</p>\n\n<pre><code>QDirIterator i(QDir::currentPath(), QDir::Dirs | QDir::NoDotAndDotDot);\nwhile (i.hasNext()) {\n    doSomething();\n};\n</code></pre>\n\n<p>Now I use multiple objects all with theirs own names (<code>i0</code>, <code>i1</code>, <code>i2</code> etc.), and I wonder how can I use just one name across the project, <code>i</code> in this example? How should I decommission existing <code>QDirIterator</code> to reuse it?</p>\n"}, {"tags": ["c++", "multithreading", "performance", "x86", "lock-free"], "comments": [{"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "edited": false, "score": 0, "creation_date": 1472076162, "post_id": 39133635, "comment_id": 65612777, "body": "Are you saying that if you run the test on an empty CPU, it runs slower than if you run the exact same test while doing something in the background?  Also, source code would be essential for debugging any unusual timing."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "reply_to_user": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "edited": false, "score": 0, "creation_date": 1472076417, "post_id": 39133635, "comment_id": 65612874, "body": "Yes, indeed. I can attach sourcecode, but it is so long that I think it will be discouraging for readers. ( as in my previous (deleted) post)."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1472082540, "post_id": 39133635, "comment_id": 65614570, "body": "How long do you run your test for?  Maybe the CPUs are in a power-saving mode when you run your test on an idle system, and you don&#39;t run the test for long enough to bring the CPU(s) out of power-saving mode.  Link to Google search results on the subject:  <a href=\"https://www.google.com/search?q=corei7+power+saving+modes\" rel=\"nofollow noreferrer\">google.com/search?q=corei7+power+saving+modes</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1472175700, "post_id": 39133635, "comment_id": 65657827, "body": "@AndrewHenle: <a href=\"http://stackoverflow.com/questions/38299023/why-does-this-delay-loop-start-to-run-faster-after-several-iterations-with-no-sl/38300014#38300014\">this Q&amp;A</a> has more details on power-saving / turbo affecting benchmarks."}], "answers": [{"comments": [{"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1472112223, "post_id": 39134986, "comment_id": 65623961, "body": "Ok, so we have to accept performance hit in maximus-contention cases? &quot;Contention probably causes a significant performance hit with cmpxchg loops, because only one CPU will succeed each time, and all the rest will retry every time.)&quot;. I think so too.  &quot;to avoid memory-ordering mis-speculation&quot;. I cannot understand what do you mean here. After all, x86 can only reorder StoreLoad operation but I use sequential ( default) semantic on my atomics so compiler is forced to place fences ( like <code>mfences</code>). So, please me explain or reference me somewhere. ( I am gonna read given link later )"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 1, "creation_date": 1472112524, "post_id": 39134986, "comment_id": 65624143, "body": "@Gilgamesz: Right, an x86 CPU has to make memory operations become globally visible within the ISA&#39;s ordering requirements.  But internally it can <i>speculatively</i> reorder things for more performance, and detect + roll-back if it would break the rules.  Normally this is a win, because loads/stores of heavily-contended shared memory are rare."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 1, "creation_date": 1472112598, "post_id": 39134986, "comment_id": 65624185, "body": "You didn&#39;t say you used <code>mo_seq_cst</code> for your stores.  That might increase the cost of contention."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1472113178, "post_id": 39134986, "comment_id": 65624563, "body": "&quot;That might increase the cost of contention.&quot;. I know that I have to change this semantic to weaker, but at that moment I have other problems :). &quot; internally it can speculatively reorder things for more performance&quot;. What does it mean- speculatively reorder? Afer all, every store ( even speculative) must be globally visible so it can be a problem ( misspeculation). I can imagine how works speculativly executed a branch."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 1, "creation_date": 1472113347, "post_id": 39134986, "comment_id": 65624673, "body": "@Gilgamesz: Right, you can&#39;t speculatively store, but you can speculatively load.  If it turns out the value you fed into the out-of-order engine has changed by the time the load should be globally visible, you have to roll back when you detect the mis-speculation."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1472114316, "post_id": 39134986, "comment_id": 65625332, "body": "Thanks @PeterCordes: now it is more clear. It is interesting how the CPU know that mispeculated value was changed and it is necessary to flush pipeline. Can you reference me somewhere I can read about it ( If you know about such literature of course)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1472114655, "post_id": 39134986, "comment_id": 65625578, "body": "@Gilgamesz: I&#39;ve had a hard time googling for good links when I mention it in answers.  e.g. I found <a href=\"https://en.wikipedia.org/wiki/Memory_dependence_prediction\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Memory_dependence_prediction</a>, but that&#39;s about speculating about store addresses within a single core.   The other hits for &quot;memory order mis-speculation&quot; were mostly books.  But I&#39;ve definitely seen it said that one of the major benefits of <code>pause</code> is that it tells the CPU not to do this speculation, so you don&#39;t have a mis-speculation just as you&#39;re breaking out of a spin-loop.  There&#39;s a perf counter for it."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1472114712, "post_id": 39134986, "comment_id": 65625620, "body": "IIRC, I included a link about the relevant perf counter in a paragraph about False Sharing in <a href=\"http://stackoverflow.com/questions/37361145/deoptimizing-a-program-for-the-pipeline-in-intel-sandybridge-family-cpus/37362225#37362225\">this answer</a>.  Yup: <a href=\"http://www.jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune/doc/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/pentium4_hh/er4/memory_order_machine_clear_performance_impact.htm\" rel=\"nofollow noreferrer\">jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune&zwnj;&#8203;/&hellip;</a>.  Of course, that&#39;s for P4, but SnB-family has a similar counter."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1472176100, "last_edit_date": 1472176100, "creation_date": 1472085369, "answer_id": 39134986, "question_id": 39133635, "link": "https://stackoverflow.com/questions/39133635/locking-free-queue-loaded-vs-unloded-cpu/39134986#39134986", "title": "Locking-Free queue, loaded vs unloded CPU", "body": "<p>Bouncing cache lines between cores is expensive.  It sounds reasonable that one core could push/pop more than 4x faster than 4 cores contending with each other while they try to modify the same memory.</p>\n\n<p>So it sounds like the problem is in deciding what changes in the total wall-clock time or total CPU time of all the threads tell you about whether your code is good or not.</p>\n\n<hr>\n\n<p>To put it another way:  You're testing the maximum-contention case, where your threads are spending all their time pushing and popping, and not doing any other work.  In real code that used this queue, the other work done by a thread would throttle the access rate to your queue, probably a lot, so threads would step on each other's toes a lot less.  (Contention probably causes a significant performance hit with cmpxchg loops, because only one CPU will succeed each time, and all the rest will retry every time.)</p>\n\n<p>Related: <a href=\"http://preshing.com/20111118/locks-arent-slow-lock-contention-is/\" rel=\"nofollow\">Locks Aren't Slow; Lock Contention Is (Jeff Preshing)</a> makes the same points for testing parallel algorithms that use locks in high vs. low contention cases.</p>\n\n<hr>\n\n<p><strong>Maybe try benchmarking with some threads doing read-only access</strong></p>\n\n<p>Lock-free algorithms really shine when a lot of the accesses are reads.  I guess a queue is normally popped, not just read, so maybe this doesn't make sense for real use.  But I bet you'd see different results if some of your threads were just reading the shared queue instead of updating it.  (e.g. traverse it from head to tail as a linked list).</p>\n\n<hr>\n\n<p>Another interesting thing to try, in the write code: add a <code>pause</code> instruction ( <code>_mm_pause()</code>) before a load from shared memory somewhere in your benchmark, to avoid memory-ordering mis-speculation.  (i.e. where the CPU speculatively uses a value loaded before the load is allowed to become globally visible,  and then has to roll back when it turns out the value was changed by another core by the time the load was supposed to become globally visible).  Keep in mind that <code>pause</code> sleeps for ~5 cycles on Haswell, but ~100 cycles on Skylake, so even if you see a speedup from it in a non-synthetic benchmark on Haswell, it's probably a bad idea to leave it in for real use on future CPUs.</p>\n\n<p>Note that <code>pause</code> isn't useful before <code>lock</code>ed read-modify-write instructions; they're already expecting writes from other cores.</p>\n\n<p>Normally you do a relaxed load an then a cmpxchg, so I'm suggesting putting a <code>pause</code> before the load.</p>\n"}], "owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 39134986, "answer_count": 1, "score": 0, "last_activity_date": 1472176100, "creation_date": 1472075745, "last_edit_date": 1472113022, "question_id": 39133635, "link": "https://stackoverflow.com/questions/39133635/locking-free-queue-loaded-vs-unloded-cpu", "title": "Locking-Free queue, loaded vs unloded CPU", "body": "<p>My CPU is Corei7 ( 4 physical cores/ 8 logical). I am testing my implementation of free-locking queue. What is the test? I just create a lot of threads ( \"pusher\" and \"popper\") and they push/pop elements. I noticed that it works much faster when... CPU is loaded. So, when the CPU isn't relatively loaded it works slower ( relatively much). And, when it is loaded it works faster.</p>\n\n<ol>\n<li><p>How to understand it? I think that it is caused by the fact, that \"popper\" and \"pusher\" have to race to \"head/\"tail\". ( I mean incrementation of node because of the memory managment). If there is less popper/pusher then counter is lower. But, please note that it works free-locking in fact ( I think so :) )</p></li>\n<li><p>Does it mean that I should send thread in some situation to sleep for 2 ms ? Maybe 10 ms ( it's so long time for CPU). I am not sure.</p></li>\n</ol>\n"}, {"tags": ["c++", "geometry", "computational-geometry"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472080471, "post_id": 39134023, "comment_id": 65614055, "body": "I&#39;m not sure what you mean by 2. The only available points I really have are the endpoints on each line. Do I need to calculate a 3rd point?"}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472082435, "post_id": 39134023, "comment_id": 65614550, "body": "No, just use either endpoint. Whichever you prefer. You should get exactly the same answer regardless."}, {"owner": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472086829, "post_id": 39134023, "comment_id": 65615476, "body": "I&#39;m misunderstanding something or doing something completely wrong but now i get (0,0) always <a href=\"https://ideone.com/J4QQ7y\" rel=\"nofollow noreferrer\">ideone.com/J4QQ7y</a>"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1472227013, "post_id": 39134023, "comment_id": 65682994, "body": "The vector may not be perpendicular in some cases."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1472227594, "post_id": 39134023, "comment_id": 65683299, "body": "@YvesDaoust I don&#39;t agree. It feels like it could happen when the intersection point is near the edge of the Minkowski sum but taking the diagonal to a corner will always be further than following the normal to one of the edges. Can you provide either some reasoning or an example?"}], "tags": [], "owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "is_accepted": false, "score": -1, "last_activity_date": 1472078117, "creation_date": 1472078117, "answer_id": 39134023, "question_id": 39133632, "link": "https://stackoverflow.com/questions/39133632/calculating-the-minimum-translation-to-seperate-two-lines/39134023#39134023", "title": "Calculating the minimum translation to seperate two lines", "body": "<p>You've got the right approach. From reasoning about the Minkowski sum, the shortest vector of separation will be perpendicular to one of the lines and will be just long enough to push one of the endpoints to the surface of the other line.</p>\n\n<p>However your <code>DistanceFromPoint</code> returns an unsigned distance: it's always zero or positive. You then use a single perpendicular per line to multiply that by. So you should end up going the wrong way 50% of the time because your distance has no sign.</p>\n\n<p>You might prefer to rearrange, not least because it'll save some of your square roots:</p>\n\n<ol>\n<li>get the two axes;</li>\n<li>for each line, project the vector from any point on the line to each endpoint of the other line onto that line's axis. This produces a signed result;</li>\n<li>pick the shortest of those results by magnitude;</li>\n<li>calculate the separation axis as the negative of the shortest number times the axis it was calculated on.</li>\n</ol>\n\n<p>... because if you're embedded by <code>n</code> units along axis <code>q</code> then the way to resolve that is to move <code>-n</code> units along <code>q</code>; so pick the least <code>n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472179008, "post_id": 39145990, "comment_id": 65658587, "body": "your demo seems to move a different line depending on the distance. I would like to always move CD"}, {"owner": {"reputation": 1068, "user_id": 1405348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63354593ca4e532e32cb7589af18682a?s=128&d=identicon&r=PG", "display_name": "hkrish", "link": "https://stackoverflow.com/users/1405348/hkrish"}, "reply_to_user": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472200166, "post_id": 39145990, "comment_id": 65666622, "body": "That&#39;s a minor modification. In the demo (I have updated it), you can replace line 53 with <code>var pointLinePairs = [[p1, l2], [p2, l2]];</code>.  That will always move the line <code>l2</code>."}, {"owner": {"reputation": 1068, "user_id": 1405348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63354593ca4e532e32cb7589af18682a?s=128&d=identicon&r=PG", "display_name": "hkrish", "link": "https://stackoverflow.com/users/1405348/hkrish"}, "reply_to_user": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472281668, "post_id": 39145990, "comment_id": 65698572, "body": "Yup, I was quick to suggest (wrongly) the edit above. It should be fixed now."}, {"owner": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472291643, "post_id": 39145990, "comment_id": 65700999, "body": "what did you do to fix it?"}, {"owner": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472292121, "post_id": 39145990, "comment_id": 65701140, "body": "I don&#39;t really know much js so I&#39;m having trouble following your code."}, {"owner": {"reputation": 1068, "user_id": 1405348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63354593ca4e532e32cb7589af18682a?s=128&d=identicon&r=PG", "display_name": "hkrish", "link": "https://stackoverflow.com/users/1405348/hkrish"}, "reply_to_user": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "edited": false, "score": 0, "creation_date": 1472302700, "post_id": 39145990, "comment_id": 65704220, "body": "Line 83:  ``` if (minLine != lineToDisplace) {     vecD = -vecD } ``` Considering line segments AB and CD from your example, first, we run through a loop to find the end point with minimum distance from the lines. We have to get the distance and the corresponding line (call it <code>dist</code> and <code>baseLine</code>). If the baseline is the one you are trying to move (CD in your example), we just translate CD w.r.t. the vector <code>&lt;unit normal of baseLine * dist&gt;</code>. On the other hand, if baseline is equal to AB, then we have to reverse the direction to translate. That&#39;s the change made in the demo."}], "tags": [], "owner": {"reputation": 1068, "user_id": 1405348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63354593ca4e532e32cb7589af18682a?s=128&d=identicon&r=PG", "display_name": "hkrish", "link": "https://stackoverflow.com/users/1405348/hkrish"}, "is_accepted": true, "score": 0, "last_activity_date": 1472281616, "last_edit_date": 1472281616, "creation_date": 1472129804, "answer_id": 39145990, "question_id": 39133632, "link": "https://stackoverflow.com/questions/39133632/calculating-the-minimum-translation-to-seperate-two-lines/39145990#39145990", "title": "Calculating the minimum translation to seperate two lines", "body": "<p>Your idea will work. You only need to have a signed distance function like @Tommy mentioned. Also, note that you will have to get the <em>right</em> perpendicular direction as well, depending on your sign conventions in the distance function.</p>\n\n<p><a href=\"http://sketch.paperjs.org/#S/jVZZb9tGEP4rYz3UZErRFCU7jR2nSKO2CJCgRl20D4oeVuRIIrzcJXZXtlVB/70zy0NXkloCxOUc38492vSUKLF33bt/QJcte1Ev0zm/f1HzlcpcoRUs0N0XC4X5uLBOqAwDEcEsgkq5EDZfFNDnURj49e4ebmGA/UF6s6M+YkbUGfRB7FErQUQC2CPXv8Ucgs/CLWMxswHpxs8hvGXo7ir+GHQroxg7XsO7W0jgZ4KMn+Ea+vxsILeA0uIp5vp/MJ9bTAZbEyg/WsydE5J8YHEK0CdUC7cMwprZQNV3wavatH4D7V/JgguQBElw9ffiAjabjX/+jgqNcAhWlJVEkIVCu5eQXKP9qBwai5kL5CACmXauNHfLAZvVSZGaDUgqlt5QeAdJc7fPxoA8UfgEd7pQLhiMLiNIL5Ow4aYH3HT0mrhXr1vu8FD3KiXuT5ctd3Sk+yaCweiq4cruXs7OJ3IzqMibKm356Sl/SPxR2ETsT6FyXULF4DaGWqss1PjQpiShWxP2J9dtnEj7j5WrVg4KC1rJNZQoVKEW85XkinFLhGxlHtGCyNxKSJIo2nCe1Rg+bv66H+urYuMNCkLK8jBJGqn0RVLDF0mNXiJFyTdY6kcMwqZqZXpC+U7sa41vx34LT8uCCjM4+2op+uyQDdYZ/YAftNSGsM6dLoXT58RKj1ljxOr+Yf2LXOG5T+x2u+3a4rdC5T4d5HdRrkrImzkETgOqvM4+6DnMNJW27xZmsQoR0HjSjcdqukNQDxaG8umF5tqUrD6xB2Mu8np/6c8UtmnXKnwZR+OOACzZPplU3utpBJMq7U4UKjnwp5E/TW9aBM4eA/AAPACjDOUrmq5dnwcsWthKigxLVI6iLw8mLg9QQpGTZHo4lYg0mHZ1LuAHGsDCoPeWIga7kDGF3YygE6fQUXqzJTyhV1qQ8IKpmS6pX2qULgeE4dGginc28HSXscUFm23JvNjL7ARmhwKDEwHGJ5nv7Z5vrg3W5QnfEY7iSPaEXxv9E1akbE0PJn3DPMKgJqDkflRzqkm3puN0Graj3GfBl06rwd6mNxzc9/JJrC1wKxKpq4imINra8Nkj6Xp5csb6QP4btwP/27Ma1dNIksIJb5cGglZU9ELyDY568G2/BeU3mohGO9pAObxJIMeFQWqpTOrs4Z/CYuQBxoWpFwuXgBf3uwkrMpcnaj1Bl9qiosrRJi+U32lr67Cs/Whs2J/VjRUxhbTfnp/DuJYs/sUg3E0FP5MFl0qXlsafGp7OfhHUt7zaRTfx7cw104b+7PYoY7s+q0H6/NxbmXLscxpTUGgyhrGjOWwlOchLf0xrPvKatOhp3o3jXNjle2PEmifGMBpO21qhf1wzg+Kh7sje9WS6/Q8=\" rel=\"nofollow\">Here is a demo</a></p>\n"}], "owner": {"reputation": 23, "user_id": 6549309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bc495e9549738d9559f747c06404b5?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Williamson", "link": "https://stackoverflow.com/users/6549309/greg-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 39145990, "answer_count": 2, "score": 0, "last_activity_date": 1472281616, "creation_date": 1472075722, "last_edit_date": 1472077140, "question_id": 39133632, "link": "https://stackoverflow.com/questions/39133632/calculating-the-minimum-translation-to-seperate-two-lines", "title": "Calculating the minimum translation to seperate two lines", "body": "<p>Given two intersecting  line segments(AB and CD) in R2 find the translation with the smallest magnitude to apply to CD so that it is no longer intersecting AB.</p>\n\n<p>What I've tried. I calculate the distance from each point on each line to the opposite line. Then I pick the smallest of the 4 values and apply that to the perpendicular of the line. However, the translation I calculate is often in the wrong direction. How do I fix this?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\nclass Vector2\n{\npublic:\n    double x;\n    double y;\n\n    Vector2() : x(x), y(y) {}\n    Vector2(double x, double y) : x(x), y(y) {}\n\n    Vector2 operator*(double val) { return Vector2(x*val, y*val);}\n    Vector2 operator/(double val) { return Vector2(x/val, y/val);}\n    Vector2 operator+(Vector2 &amp;v) { return Vector2(x+v.x, y+v.y);}\n    Vector2 operator-(Vector2 &amp;v) { return Vector2(x-v.x, y-v.y);}\n\n     Vector2 Perpendicular()  { return Vector2(y, -x); }\n     double Dot( Vector2 &amp;v)  {return (x * v.x) + (y * v.y); }\n     double Magnitude()  { return std::sqrt(Dot(*this)); }\n     Vector2 Normal()  { return *this / Magnitude(); }\n     double GetDistance( Vector2 &amp;v)  {  Vector2 d = *this - v; return d.Magnitude(); }\n};\n\n\nclass Line\n{\npublic:\n    Line() : a(Vector2()), b(Vector2()) {}\n    Line( Vector2 a,  Vector2 b) : a(a), b(b) {};\n     double DistanceFromPoint( Vector2 &amp;p) ;\n     Vector2 GetTranslation( Line &amp;l) ;\n     Vector2&amp; GetPoint(unsigned i) {if (i==0) return a; else return b;}\n     double GetLength()  { return GetPoint(0).GetDistance(GetPoint(1)); }\n\n    Vector2 a;\n    Vector2 b;\n};\n\n double Line::DistanceFromPoint( Vector2 &amp;p) \n{\n     double l2 = GetLength() * GetLength();\n     Vector2 pv = p - GetPoint(0);\n     Vector2 wv = GetPoint(1) - GetPoint(0);\n     double t = std::max(0.d, std::min(1.d, pv.Dot(wv) / l2));\n     Vector2 projection = (wv * t) + GetPoint(0);\n\n    return p.GetDistance(projection);\n}\n\n Vector2 Line::GetTranslation( Line &amp;l) \n{\n    // Calculate Distances from each point to rthe opposite line\n    std::vector&lt;double&gt; dist(4);\n    dist[0] = DistanceFromPoint(l.GetPoint(0));\n    dist[1] = DistanceFromPoint(l.GetPoint(1));\n    dist[2] = l.DistanceFromPoint(GetPoint(0));\n    dist[3] = l.DistanceFromPoint(GetPoint(1));\n\n    //Get the smallest distance\n    auto it = std::min_element(std::begin(dist), std::end(dist));\n    double min = *it;\n    unsigned pos = std::distance(std::begin(dist), it);\n\n    // Get the normalized perpendicular of line\n    Vector2 axis;\n    if (pos == 2 || pos == 3)\n        axis = (GetPoint(1) - GetPoint(0)).Perpendicular().Normal();\n    else\n        axis = (l.GetPoint(1) - l.GetPoint(0)).Perpendicular().Normal();\n\n    std::cout &lt;&lt; \"min: \" &lt;&lt; min &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"axis: (\" &lt;&lt; axis.x &lt;&lt; \",\" &lt;&lt; axis.y &lt;&lt; \")\" &lt;&lt; std::endl;\n\n    //Apply that min to the perpendicular\n    return axis * min;\n}\n\nint main()\n{\n    Line A;\n    Line B;\n\n    Vector2 t;\n\n    std::cout &lt;&lt; \"Left\" &lt;&lt; std::endl;\n    A = Line(Vector2(0, 4), Vector2(8, 4));\n    B = Line(Vector2(2, 0), Vector2(2, 6));\n    t = A.GetTranslation(B);\n    std::cout &lt;&lt; \"Expected: (-2, 0)\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Got: (\" &lt;&lt; t.x &lt;&lt; \",\" &lt;&lt; t.y &lt;&lt; \")\" &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Right\" &lt;&lt; std::endl;\n    B = Line(Vector2(6, 0), Vector2(6, 6));\n    t = A.GetTranslation(B);\n    std::cout &lt;&lt; \"Expected: (2, 0)\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"translation: (\" &lt;&lt; t.x &lt;&lt; \",\" &lt;&lt; t.y &lt;&lt; \")\" &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Top\" &lt;&lt; std::endl;\n    B = Line(Vector2(4, 0), Vector2(4, 6));\n    t = A.GetTranslation(B);\n    std::cout &lt;&lt; \"Expected: (0, -2)\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"translation: (\" &lt;&lt; t.x &lt;&lt; \",\" &lt;&lt; t.y &lt;&lt; \")\" &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Bottom\" &lt;&lt; std::endl;\n    B = Line(Vector2(4, 6), Vector2(4, 8));\n    t = A.GetTranslation(B);\n    std::cout &lt;&lt; \"Expected: (0, -2)\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"translation: (\" &lt;&lt; t.x &lt;&lt; \",\" &lt;&lt; t.y &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 2, "creation_date": 1472075559, "post_id": 39133539, "comment_id": 65612561, "body": "This code works as expected for me. Please double check that you posted the actual code"}, {"owner": {"reputation": 31, "user_id": 6441972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0mKhCtcp6o/AAAAAAAAAAI/AAAAAAAAIxo/ZwzYIKepaVE/photo.jpg?sz=128", "display_name": "marcos alberto gomez redondo", "link": "https://stackoverflow.com/users/6441972/marcos-alberto-gomez-redondo"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1472075872, "post_id": 39133539, "comment_id": 65612688, "body": "oh.. thank you.. Really I&#39;m returning H from a function Mat getMat() and then i do cout&lt;&lt;geMat()"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1472075911, "post_id": 39133539, "comment_id": 65612709, "body": "That doesn&#39;t help ;D . Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 31, "user_id": 6441972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0mKhCtcp6o/AAAAAAAAAAI/AAAAAAAAIxo/ZwzYIKepaVE/photo.jpg?sz=128", "display_name": "marcos alberto gomez redondo", "link": "https://stackoverflow.com/users/6441972/marcos-alberto-gomez-redondo"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1472076466, "post_id": 39133539, "comment_id": 65612897, "body": "sorry, I have changed my post, does it help?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6441972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0mKhCtcp6o/AAAAAAAAAAI/AAAAAAAAIxo/ZwzYIKepaVE/photo.jpg?sz=128", "display_name": "marcos alberto gomez redondo", "link": "https://stackoverflow.com/users/6441972/marcos-alberto-gomez-redondo"}, "edited": false, "score": 0, "creation_date": 1472077810, "post_id": 39133770, "comment_id": 65613319, "body": "Thank you. I understand, but I do a Pre-calculate on h before return. I&#39;ll try with the first option you gave me.."}, {"owner": {"reputation": 31, "user_id": 6441972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0mKhCtcp6o/AAAAAAAAAAI/AAAAAAAAIxo/ZwzYIKepaVE/photo.jpg?sz=128", "display_name": "marcos alberto gomez redondo", "link": "https://stackoverflow.com/users/6441972/marcos-alberto-gomez-redondo"}, "edited": false, "score": 0, "creation_date": 1472078056, "post_id": 39133770, "comment_id": 65613398, "body": "It works. Thank you. I&#39;ll be more careful with blocks and deallocation.. :P"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 31, "user_id": 6441972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0mKhCtcp6o/AAAAAAAAAAI/AAAAAAAAIxo/ZwzYIKepaVE/photo.jpg?sz=128", "display_name": "marcos alberto gomez redondo", "link": "https://stackoverflow.com/users/6441972/marcos-alberto-gomez-redondo"}, "edited": false, "score": 0, "creation_date": 1472078089, "post_id": 39133770, "comment_id": 65613410, "body": "Glad it helped ;D"}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 4, "last_activity_date": 1472076579, "creation_date": 1472076579, "answer_id": 39133770, "question_id": 39133539, "link": "https://stackoverflow.com/questions/39133539/how-can-i-initialize-a-mat-from-double-array/39133770#39133770", "title": "How can I initialize a Mat from double array?", "body": "<p>The <code>data</code> buffer will be deallocated once you exit the <code>getMat</code> function, so it will contain garbage.</p>\n\n<p>You need to copy the data buffer with <code>clone()</code>:</p>\n\n<pre><code>Mat getMat(){\n    double data[9] = {0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0};  \n    Mat H = Mat(3, 3, CV_64FC1, data).clone();  \n    return H;\n} \n</code></pre>\n\n<p>For small matrices, you can also use:</p>\n\n<pre><code>Mat getMat(){\n    Mat H = (Mat1d(3, 3) &lt;&lt; 0.0, 1.0, 2.0, \n                            3.0, 4.0, 5.0, \n                            6.0, 7.0, 8.0);\n    return H;\n} \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6441972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0mKhCtcp6o/AAAAAAAAAAI/AAAAAAAAIxo/ZwzYIKepaVE/photo.jpg?sz=128", "display_name": "marcos alberto gomez redondo", "link": "https://stackoverflow.com/users/6441972/marcos-alberto-gomez-redondo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 1, "accepted_answer_id": 39133770, "answer_count": 1, "score": 2, "last_activity_date": 1472076579, "creation_date": 1472075255, "last_edit_date": 1472076328, "question_id": 39133539, "link": "https://stackoverflow.com/questions/39133539/how-can-i-initialize-a-mat-from-double-array", "title": "How can I initialize a Mat from double array?", "body": "<p>I'm trying to get a Mat:</p>\n\n<pre><code>Mat getMat(){\ndouble data[9] = {0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0};  \nMat H = Mat(3, 3, CV_64FC1, data);  \nreturn H;\n} \n</code></pre>\n\n<p>In the main function I have:</p>\n\n<pre><code>cout &lt;&lt; getMat() &lt;&lt; endl;\n</code></pre>\n\n<p>But I get:</p>\n\n<pre><code>[9.803620554343549e-312, 9.815415529972478e-312, -5.314010372517808e+303;\n 6.952533064904583e-310, 6.952533112667539e-310, 6.952533065625869e-310;\n 6.952531771280892e-310, 6.952531720111155e-310, 1.30821040513014e-310] \n</code></pre>\n\n<p>when I print inside the function it works..</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472075238, "post_id": 39133492, "comment_id": 65612420, "body": "The error message is pretty clear, it refers to <b>Team::fillTeamVector()</b> You forgot to provide the definition under class scope."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1472075246, "post_id": 39133492, "comment_id": 65612422, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Most of what you posted is completely irrelevant."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472075265, "post_id": 39133527, "comment_id": 65612435, "body": "C&#39;mon. We have a dupe for that!"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 0, "last_activity_date": 1472075210, "creation_date": 1472075210, "answer_id": 39133527, "question_id": 39133492, "link": "https://stackoverflow.com/questions/39133492/fillvector-with-objects-c/39133527#39133527", "title": "fillVector with objects C++", "body": "<p>You wrote a function called <code>fillTeamVector</code>.</p>\n\n<p>This is not the same thing as a class method called <code>Team::fillTeamVector</code>, which is called by the constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 285, "user_id": 2964459, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100006602768186/picture?type=large", "display_name": "Aris Kantas", "link": "https://stackoverflow.com/users/2964459/aris-kantas"}, "edited": false, "score": 0, "creation_date": 1472075597, "post_id": 39133538, "comment_id": 65612576, "body": "Your Answer solved my problem. I appreciate it."}], "tags": [], "owner": {"reputation": 525, "user_id": 5869301, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/86a49e0145a284ba5a05873250323f4d?s=128&d=identicon&r=PG&f=1", "display_name": "bisthebis", "link": "https://stackoverflow.com/users/5869301/bisthebis"}, "is_accepted": false, "score": 2, "last_activity_date": 1472075247, "creation_date": 1472075247, "answer_id": 39133538, "question_id": 39133492, "link": "https://stackoverflow.com/questions/39133492/fillvector-with-objects-c/39133538#39133538", "title": "fillVector with objects C++", "body": "<p>You have defined \"fillTeamVector\" as a free function in team.cpp, while it's a member function in the .h.\nSo fillTeamVector method of Team does not exist, but is called, hence the error.\nIn team.cpp, replace this :\n     void fillTeamVector(vector&amp; team)</p>\n\n<p>by this :\n     void Team::fillTeamVector(vector&amp; team)</p>\n"}, {"comments": [{"owner": {"reputation": 285, "user_id": 2964459, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100006602768186/picture?type=large", "display_name": "Aris Kantas", "link": "https://stackoverflow.com/users/2964459/aris-kantas"}, "edited": false, "score": 1, "creation_date": 1472075610, "post_id": 39133542, "comment_id": 65612579, "body": "Your Answer solved my problem. I appreciate it."}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 2, "last_activity_date": 1472075270, "creation_date": 1472075270, "answer_id": 39133542, "question_id": 39133492, "link": "https://stackoverflow.com/questions/39133492/fillvector-with-objects-c/39133542#39133542", "title": "fillVector with objects C++", "body": "<p>You've declared the function:</p>\n\n<pre><code>void fillTeamVector(vector&lt;Player&gt;&amp; team){ // ...\n</code></pre>\n\n<p>But you forgot the \"class-scope\", that because that function is a <em>member-function</em> so you have to add:</p>\n\n<pre><code>void Team::fillTeamVector(vector&lt;Player&gt;&amp; team){ // ...\n</code></pre>\n\n<p>Exactly what you've done for the constructor (<code>Team::Team()</code>).</p>\n"}], "owner": {"reputation": 285, "user_id": 2964459, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100006602768186/picture?type=large", "display_name": "Aris Kantas", "link": "https://stackoverflow.com/users/2964459/aris-kantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1472088107, "answer_count": 3, "score": 0, "last_activity_date": 1472075270, "creation_date": 1472075054, "question_id": 39133492, "link": "https://stackoverflow.com/questions/39133492/fillvector-with-objects-c", "closed_reason": "Duplicate", "title": "fillVector with objects C++", "body": "<p>I have a class  Player and a class Team. </p>\n\n<p>I want to create a vector of Players in constructor of class Team. I have written a method called <strong>fillVector</strong> witch creates all the players. I have added method fillVector into class Team witch is shown bellow. I do not think class Player is necessary. </p>\n\n<p>When I compile my programm with codeblocks there is the following error: </p>\n\n<p><strong>Team.cpp|9|undefined reference to `Team::fillTeamVector(std::vector >&amp;)'|\n|error: ld returned 1 exit status|</strong></p>\n\n<p>This is the Team.cpp code : </p>\n\n<pre><code>#include \"Team.h\"\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include \"Player.h\"\n\nTeam::Team()\n{\n    vector&lt;Player&gt; team;\n    fillTeamVector(team);\n\n}\n\n    void fillTeamVector(vector&lt;Player&gt;&amp; team){\n\n    cout &lt;&lt; \"How many players are in the team? \" &lt;&lt;endl;\n    string name;\n    int teamSize,x,y,num,target_line;\n    cin &gt;&gt; teamSize;\n\n    for (int i=0 ; i&lt;=teamSize ; i++){\n        cout &lt;&lt; \"Give player's name\" &lt;&lt; endl;\n        cin &gt;&gt; name;\n        cout &lt;&lt; \"Give player's number\" &lt;&lt; endl;\n        cin &gt;&gt; num;\n        cout &lt;&lt; \"Give player's x position\" &lt;&lt; endl;\n        cin &gt;&gt; x;\n        cout &lt;&lt; \"Give player's y position\" &lt;&lt; endl;\n        cin &gt;&gt; y;\n        cout &lt;&lt; \"Give player's target line\" &lt;&lt; endl;\n        cin &gt;&gt; target_line;\n        Player newPlayer(name,num,x,y,target_line);\n        team.push_back(newPlayer);\n    }\n\n}\n</code></pre>\n\n<p>This is the Team.h code : </p>\n\n<pre><code>#ifndef TEAM_H\n#define TEAM_H\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include \"Player.h\"\n\nusing namespace std;\n\nclass Team\n{\n    public:\n        Team();\n\n        void fillTeamVector(vector&lt;Player&gt;&amp;);\n\n};\n\n#endif // TEAM_H\n</code></pre>\n\n<p>This is the main.cpp code : </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include \"Player.h\"\n#include \"Team.h\"\n\nusing namespace std;\n\nint main()\n{\n    Team team;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging", "windbg"], "comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1472075072, "post_id": 39133304, "comment_id": 65612351, "body": "There is an <code>x</code> command (= Examine Symbols), it just never works or I am missing its syntax!? I don&#39;t know how to access/mention the member variable. It&#39;s in a module, than a class and its member of that class."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1472075149, "post_id": 39133304, "comment_id": 65612382, "body": "It does something different: it is finding symbols. Once found, use <code>dt</code> (display type)."}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1472075248, "post_id": 39133304, "comment_id": 65612423, "body": "@ThomasWeller It does find functions but why does it not find member variables which are also symbols"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1472075384, "post_id": 39133304, "comment_id": 65612488, "body": "I am mostly working with release build"}], "answers": [{"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1490135407, "post_id": 39133545, "comment_id": 72975656, "body": "the <code>x</code> doesn&#39;t really show member variables still and the wild card doesn&#39;t work on <code>dt</code> either. I know it should but don&#39;t know why it doesn&#39;t."}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": false, "score": 2, "last_activity_date": 1472076273, "last_edit_date": 1472076273, "creation_date": 1472075285, "answer_id": 39133545, "question_id": 39133304, "link": "https://stackoverflow.com/questions/39133304/how-to-see-values-of-member-variables-in-windbg/39133545#39133545", "title": "How to see values of member variables in WinDbg?", "body": "<p>If I get the MASM documentation right, the syntax with two colons should be ok for symbols:</p>\n\n<blockquote>\n  <p>Use two colons (::) or two underscores (__) to indicate the members of a class</p>\n</blockquote>\n\n<p>In a release build, you might need to consider that the compiler was able to optimize the member variable away.</p>\n\n<p>Other than that, the <code>x</code> command can only show the symbols itself and does not map it to a memory address, therefore I think you're looking for the <code>dt</code> (<strong>d</strong>isplay <strong>t</strong>ype) command, with either </p>\n\n<pre><code>dt -r Db!MyRecordSet &lt;address&gt;\n</code></pre>\n\n<p>for recursive display or expanded to a given hierarchy level</p>\n\n<pre><code>dt Db!MyRecordSet... &lt;address&gt;\n</code></pre>\n\n<p>for a 3-level tree.</p>\n\n<p>Example, cited from WinDbg's documentation (because I don't have an example at hand):</p>\n\n<pre><code>0:000&gt; dt nt!_PEB CriticalSectionTimeout.. 7ffdf000 \n   +0x070 CriticalSectionTimeout   :  0xffffe86d`079b8000\n      +0x000 LowPart                  : 0x79b8000\n      +0x004 HighPart                 : -6035\n      +0x000 u                        :\n         +0x000 LowPart                  : 0x79b8000\n         +0x004 HighPart                 : -6035\n      +0x000 QuadPart                 : -25920000000000 \n</code></pre>\n\n<p>Another option could be the C++ evaluation</p>\n\n<pre><code>??@@c++(variable-&gt;member)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1535739566, "post_id": 52108278, "comment_id": 91192922, "body": "Thanks for posting. Will try this out next time around."}], "tags": [], "owner": {"reputation": 83, "user_id": 3135625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMYF9.png?s=128&g=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3135625/tony"}, "is_accepted": false, "score": 1, "last_activity_date": 1535688222, "creation_date": 1535688222, "answer_id": 52108278, "question_id": 39133304, "link": "https://stackoverflow.com/questions/39133304/how-to-see-values-of-member-variables-in-windbg/52108278#52108278", "title": "How to see values of member variables in WinDbg?", "body": "<p><a href=\"https://blogs.msdn.microsoft.com/jigarme/2007/10/28/how-to-look-at-value-of-structure-object-who-is-member-of-class-object-while-debugging-in-windbg/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/jigarme/2007/10/28/how-to-look-at-value-of-structure-object-who-is-member-of-class-object-while-debugging-in-windbg/</a></p>\n\n<p>check this out.</p>\n\n<p>simply the command is like:\ndt -b modulename!classname 0xffffffff`xxxxxxxx memberofclass</p>\n"}, {"comments": [{"owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "edited": false, "score": 0, "creation_date": 1540407930, "post_id": 52970522, "comment_id": 92859049, "body": "you should qualify your answer with reference to newer releases    dx wasn&#39;t available back then  when the question was asked"}], "tags": [], "owner": {"reputation": 1702, "user_id": 1408005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6f155380babfb7dd23b13b5fb9c6abc2?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/1408005/elliot"}, "is_accepted": false, "score": 0, "last_activity_date": 1540422618, "last_edit_date": 1592644375, "creation_date": 1540388398, "answer_id": 52970522, "question_id": 39133304, "link": "https://stackoverflow.com/questions/39133304/how-to-see-values-of-member-variables-in-windbg/52970522#52970522", "title": "How to see values of member variables in WinDbg?", "body": "<p>There is now the dx command.</p>\n<p>Here I'm in a c++ function with a local _picture object; to display one member (&quot;field&quot;?) I used this:</p>\n<blockquote>\n<p>0:000&gt; dx _picture.rows</p>\n<pre><code>_picture.rows    : 400 [Type: int]\n</code></pre>\n</blockquote>\n<p>And here is the result of dv, showing that I actually have two picture objects in the function:</p>\n<blockquote>\n<p>0:000&gt; dv</p>\n<pre><code>   _picture2 = class cv::Mat\n   _picture = class cv::Mat\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5753, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1540422618, "creation_date": 1472074118, "last_edit_date": 1535726487, "question_id": 39133304, "link": "https://stackoverflow.com/questions/39133304/how-to-see-values-of-member-variables-in-windbg", "title": "How to see values of member variables in WinDbg?", "body": "<p>The command <code>x</code> never really works for me. I can do <code>dv</code> which shows the local variables but doesn't show member variables of class. I have been relying on watch locals variables window to see those values but how can see them through <code>x</code> command?</p>\n\n<p>For example I have a variable in module <code>Db!MyRecordSet::m_strQuery</code> how can I see value of m_strQuery?</p>\n\n<p>I particularly like to use wildcard to see all member variables like this:</p>\n\n<pre><code>x Db!MyRecordSet m_*\n</code></pre>\n\n<p>But it returns without doing anything or displaying any message..it just returns like nothing happened.</p>\n"}, {"tags": ["c++", "logging", "c++03"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1472074177, "post_id": 39133286, "comment_id": 65611988, "body": "You want to avoid having if condition be tested twice (by caller and log function)?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472074345, "post_id": 39133286, "comment_id": 65612069, "body": "As local struct cannot be used in template (in c++03), I would say it is the best you can have."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "reply_to_user": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1472074429, "post_id": 39133286, "comment_id": 65612108, "body": "@jpo38 Yes, your interpretation is correct."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1472074953, "post_id": 39133286, "comment_id": 65612304, "body": "@JeffG: Then macros could help you there. They are often used to setup trace systems."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1472076222, "post_id": 39133286, "comment_id": 65612796, "body": "Wouldn&#39;t the instruction cache miss caused by passing a function to a function and then executing the passed function inside be worse than a simple second integer comparison?"}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1472077019, "post_id": 39133286, "comment_id": 65613044, "body": "@JerryJeremiah The question wasn&#39;t intended to be about improving efficiency.  The issue I want to address is code maintainability.  If a coworker wants to change the log level of a statement in the current code, (s)he has to change it in two places (in the guarding &quot;if&quot; and the call to &quot;log&quot;).  I like the idea of only building the log message when necessary, but don&#39;t like the duplicate hard-coded constants that result.  I could create a variable prior to the conditional to store the log level, but that makes the code less readable."}], "answers": [{"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1472076350, "post_id": 39133391, "comment_id": 65612845, "body": "And if your macro parameter includes commas (like his example of sprintf) you can always surround the macro parameter with parenthesis so that it is passed verbatim.  You say the if won&#39;t be done twice but your example has no if.  Could you make your example be the one used in the question?"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1472076654, "post_id": 39133391, "comment_id": 65612944, "body": "@JerryJeremiah: I beleve any <code>sprint</code> statement can be replaced by a stream manipulation. By the way, there is definitely a <code>if</code> with in the macro (<code>if (level &lt;= logLevel)</code>)."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 0, "creation_date": 1472078983, "post_id": 39133391, "comment_id": 65613642, "body": "Interesting idea.  Many of the offending lines are already sprintf style, while others combine both sprintf and cout.  I <i>could</i> convert everything to use the cout style, but that would require a significant amount of work, with nonzero risk of introducing an error during the conversion (there are thousands of log statements in our current codebase).  I think I prefer leaving the code as-is instead of doing all the work required to go the macro route."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 2, "last_activity_date": 1472104214, "last_edit_date": 1472104214, "creation_date": 1472074537, "answer_id": 39133391, "question_id": 39133286, "link": "https://stackoverflow.com/questions/39133286/c-deferred-logging-without-c11/39133391#39133391", "title": "C++ Deferred Logging (Without C++11)", "body": "<p>Even if macros are commonly not recommended, they could help in this specific case, specially if all your text can be handled by streams.</p>\n\n<p>Make your log function be a macro:</p>\n\n<pre><code>#define LOG(level, msg) { if (level &lt;= logLevel) { cout &lt;&lt; msg &lt;&lt; endl; } }\n</code></pre>\n\n<p>Then, if you do:</p>\n\n<pre><code>LOG( 1, \"Some format \" &lt;&lt; someNum )\n</code></pre>\n\n<p><code>if</code> test is done and only one and any complex formatting done in macro's second parameter will only be executed if log level condition is <code>true</code>.</p>\n\n<p>Note: For existing lines using sprintf, you will still need to declare a function...:</p>\n\n<pre><code>inline std::string printNum( int someNum )\n{\n    char msg[200];\n    sprintf(msg, \"Some format %d\", someNum);\n    return msg;\n}\n\nLOG( 1, printNum(3) )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1580496393, "creation_date": 1580496393, "answer_id": 60009614, "question_id": 39133286, "link": "https://stackoverflow.com/questions/39133286/c-deferred-logging-without-c11/60009614#60009614", "title": "C++ Deferred Logging (Without C++11)", "body": "<p>To supplement the answer provided by @jpo38, simply add another macro to accept variadic arguments in order to support a <code>printf</code>-style function:</p>\n\n<pre><code>#define LOGF(LEVEL, ...)\\\n    if ((LEVEL) &lt;= logLevel) {\\\n        char msg[200];\\\n        sprintf(msg, __VA_ARGS__);\\\n        log((LEVEL), msg);\\\n    }\n</code></pre>\n\n<p>Then either of the following calls would produce the same output:</p>\n\n<pre><code>LOG(1, \"Some format \" &lt;&lt; someNum);\nLOGF(1, \"Some format %d\", someNum);\n</code></pre>\n"}], "owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 39133391, "answer_count": 2, "score": 2, "last_activity_date": 1580496393, "creation_date": 1472074006, "last_edit_date": 1472074122, "question_id": 39133286, "link": "https://stackoverflow.com/questions/39133286/c-deferred-logging-without-c11", "title": "C++ Deferred Logging (Without C++11)", "body": "<p>Currently, our code base has a lot of code that looks like the following:</p>\n\n<pre><code>void log(int level, const char *msg) {\n    // logLevel is some global int defining which messages to log\n    if (level &lt;= logLevel) {\n        cout &lt;&lt; msg &lt;&lt; endl;\n    }\n}\n\n...\n\nint someNum = 3;\nif (1 &lt;= logLevel) {\n    char msg[200];\n    sprintf(msg, \"Some format %d\", someNum);\n    log(1, msg);\n}\n</code></pre>\n\n<p>We are using Visual Studio 2008, and therefore cannot use any features of C++11.  Is there a clean way to pass a closure to the log method, so I can remove the duplicate \"if\" condition?  For example, I am looking for code equivalent to the following in pre C++11 syntax:</p>\n\n<pre><code>void log(int level, std::function&lt;std::string ()&gt; getMessage) {\n    if (level &lt;= logLevel) {\n        cout &lt;&lt; getMessage() &lt;&lt; endl;\n    }\n}\n\n...\n\nint someNum = 3;\nlog(1, [someNum]() -&gt; std::string {\n    std::ostringstream sstream;\n    sstream &lt;&lt; \"Some format \" &lt;&lt; someNum;\n    return sstream.str();\n});\n</code></pre>\n\n<p>The best I could come up with is:</p>\n\n<pre><code>struct LogMessage {\n    virtual std::string operator()() const = 0;\n};\n\nvoid log(int level, const LogMessage &amp;getMessage) {\n    if (level &lt;= logLevel) {\n        cout &lt;&lt; getMessage() &lt;&lt; endl;\n    }\n}\n\n...\n\nstruct X : public LogMessage {\n    X(int num) : myNum(num) { }\n    std::string operator()() const {\n        std::ostringstream out;\n        out &lt;&lt; \"Some format \" &lt;&lt; myNum;\n        return out.str();\n    }\n    private: const int myNum;\n} a(someNum);\nlog(1, a);\n</code></pre>\n"}, {"tags": ["c++", "constructor", "copy-constructor"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1472072763, "post_id": 39133004, "comment_id": 65611331, "body": "Copy elision. I think that compiling without optimization should do it."}, {"owner": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1472072820, "post_id": 39133004, "comment_id": 65611365, "body": "I read about that but to me that still did not explain why not even the variant with the 3 default calls is the case."}, {"owner": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472073161, "post_id": 39133004, "comment_id": 65611518, "body": "And I am not compiling with optimization anyway."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472073232, "post_id": 39133004, "comment_id": 65611552, "body": "Yeah, I was wrong with the optimization part"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1472073535, "post_id": 39133004, "comment_id": 65611688, "body": "Because copy elision."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1472073696, "post_id": 39133004, "comment_id": 65611767, "body": "@lotolmencre <i>And I am not compiling with optimization anyway</i>  -- This has no bearing on whether the compiler will decide to elide copies or not."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1472074114, "post_id": 39133004, "comment_id": 65611955, "body": "@lotolmencre <i>I was confused why my program behaved in an unexpected way</i> -- Well, if that &quot;unexpected way&quot; led to a bug, then the moral of the story is not to write copy constructors that have side-effects.  A copy constructor&#39;s job is to make a copy, and not really to perform important business logic."}], "answers": [{"tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 2, "last_activity_date": 1472073479, "last_edit_date": 1495535328, "creation_date": 1472073479, "answer_id": 39133178, "question_id": 39133004, "link": "https://stackoverflow.com/questions/39133004/missing-constructor-call/39133178#39133178", "title": "Missing constructor call", "body": "<p>This is because of <strong>copy elision</strong>. More specifically, <strong>N</strong>amed <strong>R</strong>eturn <strong>V</strong>alue <strong>O</strong>ptimization, or NRVO.</p>\n\n<p>NRVO happens when a local (to the function) variable with automatic storage duration is returned by value from a function, and that value is assigned to a variable:</p>\n\n<pre><code>friend A&lt;T&gt; operator&lt;&lt;(A&amp; a, unsigned i)\n{\n    //...\n    A tmp; //automatic storage variable \n    //...\n    return tmp; //returned by value\n}\n\nA&lt;int&gt; a2(a1 &lt;&lt; 2); //Assigned to a2\n</code></pre>\n\n<p>The compiler is allowed to elide the copy of <code>tmp</code> to <code>a2</code>. This basically means that when the function ends, <em>the memory of <code>tmp</code> is not deallocated!</em> Then, it just assigns <code>a2</code> to that memory location, which basically results in a \"copy\" of <code>tmp</code>.</p>\n\n<p>This happens if even the copy/move constructors and destructor have side-effects, like outputting some value. Due note however that this is implementation defined, some compiler might as well output the second and/or the third case.</p>\n\n<p>For other forms of copy elision, refer to <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">those answers</a>.</p>\n"}], "owner": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1472073580, "accepted_answer_id": 39133178, "answer_count": 1, "score": 1, "last_activity_date": 1472073479, "creation_date": 1472072689, "question_id": 39133004, "link": "https://stackoverflow.com/questions/39133004/missing-constructor-call", "closed_reason": "Duplicate", "title": "Missing constructor call", "body": "<p>I was confused why my program behaved in an unexpected way. Then I wrote this simplified version of it and discovered that there is a constructor call \"missing\".</p>\n\n<pre><code>template &lt;class T&gt;\nclass A\n{\npublic:\n\n    A () {std::cout &lt;&lt; \"default\" &lt;&lt; \"\\n\";}  // default ctor\n\n    A (const A&amp; src)                        // copy ctor\n    {\n        std::cout &lt;&lt; \"copy\" &lt;&lt; \"\\n\";\n    }\n\n    friend A&lt;T&gt; operator&lt;&lt;(A&amp; a, unsigned i)\n    {\n        std::cout &lt;&lt; \"x1\" &lt;&lt; \"\\n\";\n        A tmp;\n        std::cout &lt;&lt; \"x2\" &lt;&lt; \"\\n\";\n        return tmp;\n    }\n};\n\n\nint main()\n{\n    A&lt;int&gt; a1;\n    A&lt;int&gt; a2(a1 &lt;&lt; 2);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>default\nx1\ndefault\nx2\n</code></pre>\n\n<p>What I had expected was</p>\n\n<pre><code>default\nx1\ndefault\nx2\ncopy\n</code></pre>\n\n<p>as the r-value returned by <code>a1 &lt;&lt; 2</code> would be passed into the <code>const A&amp;</code> parameter of the copy ctor. But that is not what happens. And if not that then at least I would expect</p>\n\n<pre><code>default\nx1\ndefault\nx2\ndefault\n</code></pre>\n\n<p>because I would have thought that the constructor for <code>a2</code> would need to be called.</p>\n\n<p>What is going on here?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 2, "creation_date": 1472072399, "post_id": 39132918, "comment_id": 65611161, "body": "You are looking for <code>int (A::*ptr)()</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1472072422, "post_id": 39132918, "comment_id": 65611171, "body": "<i>&quot;Is there a way I can do this in C++?&quot;</i> Sure there is. Lookup <code>std::function</code> and member function pointers."}, {"owner": {"reputation": 176, "user_id": 1768682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6745281c82ad0e7a243883dba1219346?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1768682/matt"}, "edited": false, "score": 0, "creation_date": 1472072615, "post_id": 39132918, "comment_id": 65611265, "body": "Are you looking to have <code>class A</code> execute both its member functions when this <code>a.&lt;fn-ptr&gt;</code> is called?"}, {"owner": {"reputation": 161, "user_id": 3339920, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eca5ea3372c00f89c64e750ab7d6a41a?s=128&d=identicon&r=PG&f=1", "display_name": "azeemshaikh38", "link": "https://stackoverflow.com/users/3339920/azeemshaikh38"}, "edited": false, "score": 0, "creation_date": 1472074028, "post_id": 39132918, "comment_id": 65611915, "body": "Thanks! that&#39;s exactly what I was looking for."}], "owner": {"reputation": 161, "user_id": 3339920, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eca5ea3372c00f89c64e750ab7d6a41a?s=128&d=identicon&r=PG&f=1", "display_name": "azeemshaikh38", "link": "https://stackoverflow.com/users/3339920/azeemshaikh38"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1472072482, "answer_count": 0, "score": 0, "last_activity_date": 1472072331, "creation_date": 1472072331, "question_id": 39132918, "link": "https://stackoverflow.com/questions/39132918/c-pass-a-function-for-an-object", "closed_reason": "Duplicate", "title": "C++ - pass a function for an object", "body": "<p>I'm trying to do something to this effect in C++:</p>\n\n<pre><code>class A {\n  int get_something();\n  int get_something_else();\n}\n\nint AccessA(A a, &lt;fn-ptr&gt;) {\n    return a.&lt;fn-ptr&gt;\n}\n</code></pre>\n\n<p>Basically, I want to pass the function I would like to call on a given object. </p>\n\n<p>Is there a way I can do this in C++?</p>\n\n<p>Thanks,\nAzeem</p>\n"}, {"tags": ["c++", "graphics"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1472072292, "post_id": 39132876, "comment_id": 65611116, "body": "It is running slower doing what?"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1472103445, "post_id": 39132876, "comment_id": 65619335, "body": "why hash ? you can compare the floats as integers instead that should be faster. But the slowest thing here is the list manipulation which I do not see anywhere in the code. sorting by (any) axises may help a lot"}, {"owner": {"reputation": 573, "user_id": 3853544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8fb5bb3d5d9f89483269b8ba233de92c?s=128&d=identicon&r=PG&f=1", "display_name": "user3853544", "link": "https://stackoverflow.com/users/3853544/user3853544"}, "edited": false, "score": 0, "creation_date": 1472131896, "post_id": 39132876, "comment_id": 65637185, "body": "There is no list manipulation.  Just a list of facets in an unspecified order.  I want to find the relationship between facets that share the same verities."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 3853544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8fb5bb3d5d9f89483269b8ba233de92c?s=128&d=identicon&r=PG&f=1", "display_name": "user3853544", "link": "https://stackoverflow.com/users/3853544/user3853544"}, "edited": false, "score": 1, "creation_date": 1475587665, "post_id": 39133145, "comment_id": 66994954, "body": "I ended up using boost::geometry::index::rtree"}, {"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "reply_to_user": {"reputation": 573, "user_id": 3853544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8fb5bb3d5d9f89483269b8ba233de92c?s=128&d=identicon&r=PG&f=1", "display_name": "user3853544", "link": "https://stackoverflow.com/users/3853544/user3853544"}, "edited": false, "score": 0, "creation_date": 1475589004, "post_id": 39133145, "comment_id": 66995950, "body": "Great! Thanks for letting us know."}], "tags": [], "owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "is_accepted": true, "score": 2, "last_activity_date": 1475588981, "last_edit_date": 1475588981, "creation_date": 1472073295, "answer_id": 39133145, "question_id": 39132876, "link": "https://stackoverflow.com/questions/39132876/efficiently-generating-a-topology-from-an-stl-file/39133145#39133145", "title": "Efficiently generating a topology from an STL file", "body": "<p>You should have a look at data structures that are optimized for 3D nearest-neighbor searches. Here are the most popular ones:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Binary_space_partitioning\" rel=\"nofollow\">Binary Space Partitioning</a> (BSP) and <a href=\"https://en.wikipedia.org/wiki/K-d_tree\" rel=\"nofollow\">k-d Trees</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Locality-sensitive_hashing\" rel=\"nofollow\">Locality-sensitive Hashing</a> (LSH)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/R-tree\" rel=\"nofollow\">r-Trees</a></li>\n</ul>\n"}], "owner": {"reputation": 573, "user_id": 3853544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8fb5bb3d5d9f89483269b8ba233de92c?s=128&d=identicon&r=PG&f=1", "display_name": "user3853544", "link": "https://stackoverflow.com/users/3853544/user3853544"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 39133145, "answer_count": 1, "score": 1, "last_activity_date": 1475588981, "creation_date": 1472072155, "last_edit_date": 1472074512, "question_id": 39132876, "link": "https://stackoverflow.com/questions/39132876/efficiently-generating-a-topology-from-an-stl-file", "title": "Efficiently generating a topology from an STL file", "body": "<p>I have an STL file for a printable 3D shape.  An STL file is basically a bag full of facets (triangles with a normal) in 3 space that represent a 3D object.  Each facet is represented by 3 vertices and a normal.  </p>\n\n<p>Using a hash table I have match all the vertices that are equivalent and used that information to extract a topological model so I can ask for a relation ship such as getNearbyFacets() and countNearbyFacets().  This information is very important latter when contouring slices of the model.</p>\n\n<p>Here is how I matched the verticies:</p>\n\n<pre><code>//used to compare pointers to the vertex objects\nstruct lex_compare {\n    bool operator() (CAMu3DPoint const* lhs, CAMu3DPoint const* rhs) const{\n        return *lhs == *rhs;\n    }\n};\n\n//hash function for the verticies\nstruct lex_hash{\n    std::size_t operator()(CAMu3DPoint const* vert) const{\n        return\n            (std::hash&lt;float&gt;()(vert-&gt;x)) ^\n            (std::hash&lt;float&gt;()(vert-&gt;y)) ^\n            (std::hash&lt;float&gt;()(vert-&gt;z));\n    }\n};\n</code></pre>\n\n<p>As I construct the facet list I shove all the vertices into an unordered_set then copy this set into a vector.  References to the vertices are stored in the facet object which allows for me to search based on neighboring facets.</p>\n\n<p>This code is running slower than I would like it too.  My question is how can I create a topological relationship between my facets faster than this?</p>\n"}, {"tags": ["c++", "templates", "eigen", "traits"], "answers": [{"comments": [{"owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "edited": false, "score": 0, "creation_date": 1472075288, "post_id": 39133470, "comment_id": 65612447, "body": "I understand that reasoning for some of those definitions. However, the class from which <code>Matrix</code> inherits, <code>MatrixBase</code>, publicly defines some of these typedefs, such as <code>Scalar</code>, which brings us back to the start - why not define <code>Scalar</code> in Matrix to begin with?"}, {"owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "edited": false, "score": 0, "creation_date": 1472076951, "post_id": 39133470, "comment_id": 65613023, "body": "Very clear - thank you very much for taking the time!"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 7, "last_activity_date": 1472076688, "last_edit_date": 1472076688, "creation_date": 1472074925, "answer_id": 39133470, "question_id": 39132754, "link": "https://stackoverflow.com/questions/39132754/typedef-in-traits-vs-typedef-in-class/39133470#39133470", "title": "Typedef in traits vs typedef in class", "body": "<p>I suspect that, since the traits class is <code>internal</code>, that this is the point of using a traits class. That is, to keep these things <em>internal</em>. That way, <code>Matrix</code> doesn't have a lot of oddball definitions and such, even in its private interface.</p>\n\n<p>Consider the enumeration in your example. Those \"enums\" (aka: <code>static constexpr</code> variables before C++11) don't look like anything that a user should know about. It's an implementation detail, and therefore it should be hidden.</p>\n\n<hr>\n\n<p><code>MatrixBase</code>'s problem is a CRTP issue.</p>\n\n<p>See, <code>Matrix</code> would be defined like this:</p>\n\n<pre><code>class Matrix : public MatrixBase&lt;Matrix&gt;\n</code></pre>\n\n<p>This partial definition causes 2 things to happen:</p>\n\n<ol>\n<li><p>If <code>Matrix</code> has not already been declared as a class type, then it becomes a legal class who's name can be referenced and used.</p></li>\n<li><p>The template <code>MatrixBase</code> must be instantiated with the type <code>Matrix</code>. <em>Right now</em>.</p></li>\n</ol>\n\n<p>The problem here is that \"right now\", <code>Matrix</code> is an <em>incomplete</em> class. The compiler has not yet entered the body of that definition, so the compiler doesn't know anything about its internals. But <code>MatrixBase</code> must be instantiated right now.</p>\n\n<p>Therefore, <code>MatrixBase</code> cannot use any of the <em>contents</em> of the <code>Derived</code> class it is provided. If <code>Matrix</code> has some typedef in it, <code>MatrixBase&lt;Derived&gt;</code> <em>cannot</em> see it.</p>\n\n<p>Now, member functions of <code>MatrixBase&lt;Derived&gt;</code> can look at definitions in <code>Derived</code>, because those are defined after the full class is defined. Even if those functions are defined within the scope of the class.</p>\n\n<p>But you can't have properties of <code>MatrixBase</code> access properties of <code>Derived</code>. Hence the traits indirection. The traits class can use a specialization based on an incomplete type to expose defines to <code>MatrixBase</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "edited": false, "score": 0, "creation_date": 1472076940, "post_id": 39133778, "comment_id": 65613019, "body": "Ah, I see, makes sense. Thanks!"}], "tags": [], "owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": false, "score": 3, "last_activity_date": 1472076600, "creation_date": 1472076600, "answer_id": 39133778, "question_id": 39132754, "link": "https://stackoverflow.com/questions/39132754/typedef-in-traits-vs-typedef-in-class/39133778#39133778", "title": "Typedef in traits vs typedef in class", "body": "<p>The main reason for this <code>traits</code> class is to avoid recursive dependencies in the <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow\">CRTP</a>. Without it, we would end up with something like:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Matrix : Base&lt;Matrix&lt;T&gt;&gt; {\n  typedef T Scalar;\n};\ntemplate &lt;typename Derived&gt;\nstruct Base {\n  typename Derived::Scalar foo();\n};\n</code></pre>\n\n<p>that fails to compile in some circumstances.\nBasically, this class <code>traits</code> permits to fully declare <code>Base&lt;Matrix&gt;</code> without knowing the declaration of <code>Matrix</code>.</p>\n"}], "owner": {"reputation": 550, "user_id": 354722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f3038cad221663a6f50f86c142b85e1?s=128&d=identicon&r=PG", "display_name": "Moos Hueting", "link": "https://stackoverflow.com/users/354722/moos-hueting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 5, "accepted_answer_id": 39133470, "answer_count": 2, "score": 9, "last_activity_date": 1472076688, "creation_date": 1472071609, "last_edit_date": 1472076177, "question_id": 39132754, "link": "https://stackoverflow.com/questions/39132754/typedef-in-traits-vs-typedef-in-class", "title": "Typedef in traits vs typedef in class", "body": "<p>I'm looking through the Eigen source code for educational purposes. I've noticed that for each concrete class template <code>X</code> in the hierarchy, there is an <code>internal::traits&lt;X&gt;</code> defined. A typical example can be found in Matrix.h:</p>\n\n<pre><code>namespace internal {\ntemplate&lt;typename _Scalar, int _Rows, int _Cols, int _Options, int _MaxRows, int _MaxCols&gt;\nstruct traits&lt;Matrix&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt; &gt;\n{\n  typedef _Scalar Scalar;\n  typedef Dense StorageKind;\n  typedef DenseIndex Index;\n  typedef MatrixXpr XprKind;\n  enum {\n    RowsAtCompileTime = _Rows,\n    ColsAtCompileTime = _Cols,\n    MaxRowsAtCompileTime = _MaxRows,\n    MaxColsAtCompileTime = _MaxCols,\n    Flags = compute_matrix_flags&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt;::ret,\n    CoeffReadCost = NumTraits&lt;Scalar&gt;::ReadCost,\n    Options = _Options,\n    InnerStrideAtCompileTime = 1,\n    OuterStrideAtCompileTime = (Options&amp;RowMajor) ? ColsAtCompileTime : RowsAtCompileTime\n  };\n};\n}\n</code></pre>\n\n<p>Now I understand traits to be a way of extending existing classes that you do not want to modify with extra information pertaining to some piece of new code. For example, a user of class template <code>Foo&lt;class TAllocator&gt;</code> might want to make use of existing memory allocators <code>FastAlloc</code> and <code>AlignedAlloc</code>, but Foo needs to know how to interface with these two, and as such a <code>FooTraits&lt;AlignedAlloc&gt;::allocate()</code> and <code>FooTraits&lt;FastAlloc&gt;::allocate()</code> are defined by the user, which in turn are used by <code>Foo</code>.</p>\n\n<p>In this case, however, I don't readily see the problem with just specifying <code>Scalar</code> in each derived class, i.e. have <code>Matrix</code> define <code>Matrix::Scalar</code> using a typedef in the class body. What is the advantage here of using a traits class? Is it just for the purposes of keeping the code clean, i.e. storing all relevant properties of each class in the traits class?</p>\n\n<p>Edit as per Nicol Bolas's response: I understand that some of these typedefs might need to be kept \"internal\", i.e. should not be exposed to the user, which would explain the traits class. That seems to make sense, however some of these typedefs, such as <code>Scalar</code>, <em>are</em> available to the outside world, through a typedef in the base class of <code>Matrix</code>:</p>\n\n<pre><code>template&lt;typename Derived&gt; class MatrixBase\n  : public DenseBase&lt;Derived&gt;\n{\n  public:\n\n    typedef MatrixBase StorageBaseType;\n    typedef typename internal::traits&lt;Derived&gt;::StorageKind StorageKind;\n    typedef typename internal::traits&lt;Derived&gt;::Index Index;\n    typedef typename internal::traits&lt;Derived&gt;::Scalar Scalar;\n    typedef typename internal::packet_traits&lt;Scalar&gt;::type PacketScalar;\n    typedef typename NumTraits&lt;Scalar&gt;::Real RealScalar;\n</code></pre>\n\n<p>This brings us back to the original question: why isn't <code>Scalar</code> just a typedef in <code>Matrix</code> itself? Is there any reason aside from stylistic choice?</p>\n"}, {"tags": ["c++", "linux", "gcc", "sysv"], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 6766506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c362b1c4a28bf5744d374823b8a5a7c?s=128&d=identicon&r=PG&f=1", "display_name": "villytiger", "link": "https://stackoverflow.com/users/6766506/villytiger"}, "is_accepted": true, "score": 5, "last_activity_date": 1472374351, "creation_date": 1472374351, "answer_id": 39189524, "question_id": 39132507, "link": "https://stackoverflow.com/questions/39132507/compile-libstdc-with-hash-style-sysv/39189524#39189524", "title": "Compile libstdc++ with hash style SYSV", "body": "<p>Try to rebuild your GCC with <em><a href=\"https://gcc.gnu.org/install/configure.html\" rel=\"noreferrer\">--disable-gnu-unique-object</a></em> configure option. According to documentation on GCC configure options:</p>\n\n<blockquote>\n  <p>--enable-gnu-unique-object</p>\n  \n  <p>--disable-gnu-unique-object</p>\n  \n  <p>Tells GCC to use the gnu_unique_object relocation for C++ template static data members and inline function local statics. Enabled by default for a toolchain with an assembler that accepts it and GLIBC 2.11 or above, otherwise disabled. </p>\n</blockquote>\n\n<p>Using gnu_unique_object may lead to GNU ABI in your final executable, which is not supported in old Red Hat.</p>\n"}], "owner": {"reputation": 1113, "user_id": 969295, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dea809ef5ac9770fb400f1eb65544443?s=128&d=identicon&r=PG", "display_name": "Sassa", "link": "https://stackoverflow.com/users/969295/sassa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1282, "favorite_count": 1, "accepted_answer_id": 39189524, "answer_count": 1, "score": 5, "last_activity_date": 1472374351, "creation_date": 1472070520, "question_id": 39132507, "link": "https://stackoverflow.com/questions/39132507/compile-libstdc-with-hash-style-sysv", "title": "Compile libstdc++ with hash style SYSV", "body": "<p>Is there any way to compile GCC's libstdc++ with hash style SYSV instead of GNU/Linux? I have a toolchain (via crosstool-ng) that I use to compile our company library to work with a very wide range of Linux systems.</p>\n\n<p>One of these system is a very old RedHat that have only SYSV hash style, when I compile a C only library/program with the toolchain, it works great since the generated binary uses SYSV.</p>\n\n<p>But, when I link with libstdc++, the binary automatically changes to GNU/Linux style, the reason is because libstdc++ was built as GNU/Linux, hence the question.</p>\n\n<p>Running the binary in this system gives me the error</p>\n\n<pre><code>ELF file OS ABI invalid\n</code></pre>\n\n<p>Just for completeness, I have already tried -Wl,--hash-style=sysv, without success.</p>\n\n<p>Also, I have another toolchain for ARM system which have the same version of GCC, GLIBC, etc, but in this toolchain libstdc++ uses SYSV, dunno why.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "linux", "gcc", "cross-compiling", "openwrt"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472070968, "post_id": 39132266, "comment_id": 65610519, "body": "<i>&quot;I tried also&quot;</i> What?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 6242603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa0581471e636ca2cb71d6254ad96672?s=128&d=identicon&r=PG&f=1", "display_name": "Moh. Qaid", "link": "https://stackoverflow.com/users/6242603/moh-qaid"}, "is_accepted": true, "score": 0, "last_activity_date": 1472806295, "creation_date": 1472806295, "answer_id": 39288188, "question_id": 39132266, "link": "https://stackoverflow.com/questions/39132266/error-in-cross-compiling-for-adding-libpcap-to-mipsel/39288188#39288188", "title": "Error in cross compiling for adding libpcap to mipsel", "body": "<p>I did something wrong. I find that the SDK was 32 bit and I have 64bit OS then I downloaded 64bit SDK and everything work well.</p>\n"}], "owner": {"reputation": 13, "user_id": 6242603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa0581471e636ca2cb71d6254ad96672?s=128&d=identicon&r=PG&f=1", "display_name": "Moh. Qaid", "link": "https://stackoverflow.com/users/6242603/moh-qaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 39288188, "answer_count": 1, "score": -1, "last_activity_date": 1472806295, "creation_date": 1472069469, "last_edit_date": 1472076324, "question_id": 39132266, "link": "https://stackoverflow.com/questions/39132266/error-in-cross-compiling-for-adding-libpcap-to-mipsel", "title": "Error in cross compiling for adding libpcap to mipsel", "body": "<p>I compiled C and link libpcap\nafter adding the library. I use the following line to compile my code.</p>\n\n<pre><code>mipsel-openwrt-linux-gcc -c -Wall -I /home/osboxes/Downloads/OpenWrt-SDK-brcm47xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/toolchai,n-mipsel_gcc-4.3.3+cs_uClibc-0.9.30.1/include -o sniffex.o sniffex.c</code></pre>\n\n<p>Output:</p>\n\n<pre><code>cc1: error: /home/osboxes/Downloads/OpenWrt-SDK-brcm47xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.3.3/../../../../mipsel-openwrt-linux-uclibc/sys-include: not a directory\ncc1: error: /home/osboxes/Downloads/OpenWrt-SDK-brcm47xx-for-Linux-i686-gcc-4.3.3+cs_uClibc-0.9.30.1/staging_dir/toolchain-mipsel_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/bin/../lib/gcc/../../lib/gcc/mipsel-openwrt-linux-uclibc/4.3.3/../../../../mipsel-openwrt-linux-uclibc/sys-include: not a directory\n\n</code></pre>\n\n<p>I tried also to do it with Makefile</p>\n"}, {"tags": ["c#", "c++", "unity3d", "clr", "unsafe"], "comments": [{"owner": {"reputation": 79, "user_id": 6422158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1736602039933222/picture?type=large", "display_name": "Davit Goderdzishvili", "link": "https://stackoverflow.com/users/6422158/davit-goderdzishvili"}, "edited": false, "score": 0, "creation_date": 1472068837, "post_id": 39132079, "comment_id": 65609475, "body": "If something is unclear please tell me and I will correct it."}, {"owner": {"reputation": 12860, "user_id": 361899, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c16354d30a3d1531f8a7fa053b95716c?s=128&d=identicon&r=PG", "display_name": "aybe", "link": "https://stackoverflow.com/users/361899/aybe"}, "edited": false, "score": 1, "creation_date": 1472069451, "post_id": 39132079, "comment_id": 65609782, "body": "Since Unity is a black box, we don&#39;t really know what C# features are supported when code gets converted. A rough guess is unsafe stuff is not. Have you considered using <code>Marshal</code> class methods ?"}, {"owner": {"reputation": 79, "user_id": 6422158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1736602039933222/picture?type=large", "display_name": "Davit Goderdzishvili", "link": "https://stackoverflow.com/users/6422158/davit-goderdzishvili"}, "reply_to_user": {"reputation": 12860, "user_id": 361899, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c16354d30a3d1531f8a7fa053b95716c?s=128&d=identicon&r=PG", "display_name": "aybe", "link": "https://stackoverflow.com/users/361899/aybe"}, "edited": false, "score": 0, "creation_date": 1472070349, "post_id": 39132079, "comment_id": 65610185, "body": "do you mean dll  import? &#39; [DllImport(&quot;C++ unitshi.dll&quot;)] &#39;     static extern int add(int a, int b);&#39;"}, {"owner": {"reputation": 12860, "user_id": 361899, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c16354d30a3d1531f8a7fa053b95716c?s=128&d=identicon&r=PG", "display_name": "aybe", "link": "https://stackoverflow.com/users/361899/aybe"}, "edited": false, "score": 0, "creation_date": 1472071252, "post_id": 39132079, "comment_id": 65610652, "body": "No I mean all pointer types and pointer arithmetic, they certainly had to draw a line for the web player. But it seems that @Programmer answer allows you to do so."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 6422158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1736602039933222/picture?type=large", "display_name": "Davit Goderdzishvili", "link": "https://stackoverflow.com/users/6422158/davit-goderdzishvili"}, "edited": false, "score": 9, "creation_date": 1472073509, "post_id": 39132664, "comment_id": 65611672, "body": "thank you very much! this is the best forum on earth."}, {"owner": {"reputation": 959, "user_id": 6751556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PbVfI.png?s=128&g=1", "display_name": "Suraj S", "link": "https://stackoverflow.com/users/6751556/suraj-s"}, "edited": false, "score": 0, "creation_date": 1578797459, "post_id": 39132664, "comment_id": 105554839, "body": "It&#39;s worth noting that we should use smcs.rsp (for .Net 2.0 Subset) or gmcs.rsp (for .Net 2.0)"}], "tags": [], "owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "is_accepted": true, "score": 32, "last_activity_date": 1493260595, "last_edit_date": 1493260595, "creation_date": 1472071156, "answer_id": 39132664, "question_id": 39132079, "link": "https://stackoverflow.com/questions/39132079/how-to-use-unsafe-code-unity/39132664#39132664", "title": "How to use unsafe code Unity", "body": "<p>You have to explicitly enable <code>unsafe</code> code in Unity. You can follow the steps below:</p>\n\n<p><strong>1</strong>. First step, Change <strong>Api Compatibility Level</strong>  to <strong>.NET 2.0 Subset</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xzefc.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xzefc.gif\" alt=\"enter image description here\"></a></p>\n\n<p><strong>2</strong>. Create a file in your <code>&lt;Project Path&gt;/Assets</code> directory and name it <strong>smcs.rsp</strong> then put <code>-unsafe</code> inside that file. Save and close that file. </p>\n\n<p><a href=\"https://i.stack.imgur.com/FUyld.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FUyld.gif\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Close and reopen Visual Studio and Unity.</strong> <strong>You must re-start both of them</strong>.</p>\n\n<p>It's worth noting that even after doing this and re-starting both Unity and Visual Studio but the problem is still there, <a href=\"https://docs.unity3d.com/Manual/PlatformDependentCompilation.html\" rel=\"noreferrer\">rename</a> the <strong>smcs.rsp</strong> file  to <strong>csc.rsp</strong>, or <strong>gmcs.rsp</strong> and re-start each time until you get one that works. Although, <strong>smcs.rsp</strong> should do it the first time.</p>\n\n<p>Simple C# unsafe code that compiles after this.</p>\n\n<pre><code>public class newspawn_real : MonoBehaviour\n{\n    unsafe static void SquarePtrParam(int* p)\n    {\n        *p *= *p;\n    }\n\n    void Start()\n    {\n        unsafe\n        {\n            int i = 5;\n            // Unsafe method: uses address-of operator (&amp;):\n            SquarePtrParam(&amp;i);\n            Debug.Log(i);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>For the latest Unity version, the file name should be <strong>mcs.rsp</strong>. Everything else remains the-same.</p>\n"}], "owner": {"reputation": 79, "user_id": 6422158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1736602039933222/picture?type=large", "display_name": "Davit Goderdzishvili", "link": "https://stackoverflow.com/users/6422158/davit-goderdzishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20986, "favorite_count": 3, "accepted_answer_id": 39132664, "answer_count": 1, "score": 11, "last_activity_date": 1493260595, "creation_date": 1472068743, "last_edit_date": 1493260525, "question_id": 39132079, "link": "https://stackoverflow.com/questions/39132079/how-to-use-unsafe-code-unity", "title": "How to use unsafe code Unity", "body": "<p>I want to use c++ code in c# for unity using CLR. </p>\n\n<blockquote>\n  <p>The program works properly outside of unity, but inside of engine it gives me an error:<br>\n  <em>\"cs0227: unsafe code requires the 'unsafe' command line option to be specified\"</em></p>\n</blockquote>\n\n<p>I am really confused, because the project builds successfully in visual studio (without any errors or warnings). I have \"<strong>allow</strong> <strong>unsafe</strong>\" button activated. </p>\n\n<pre><code>using UnityEngine;\nusing System.Collections;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\n\n\npublic class newspawn_real : MonoBehaviour {\n\nvoid Start () {\n\n    unsafe\n        {\n\n            fixed (int * p = &amp;bam[0, 0, 0])\n            {\n                CppWrapper.CppWrapperClass controlCpp = new CppWrapper.CppWrapperClass();\n\n                controlCpp.allocate_both();\n                controlCpp.fill_both();\n                controlCpp.fill_wrapper();\n}\n</code></pre>\n"}, {"tags": ["c++", "if-statement", "char", "logic"], "comments": [{"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1472068397, "post_id": 39131935, "comment_id": 65609241, "body": "Does <code>if (Opperator==&#39;a&#39;||&#39;s&#39;||&#39;m&#39;||&#39;d&#39;)</code> work? Shouldn&#39;t it be <code>if ((Opperator == &#39;a&#39;) || (Opperator == &#39;s&#39;) || ...)</code>, should it?"}, {"owner": {"reputation": 41, "user_id": 6753988, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B_6Y4ytr4Hc/AAAAAAAAAAI/AAAAAAAADPg/QpCaqOB_wso/photo.jpg?sz=128", "display_name": "Martin Johnsrud", "link": "https://stackoverflow.com/users/6753988/martin-johnsrud"}, "reply_to_user": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1472068897, "post_id": 39131935, "comment_id": 65609507, "body": "Yes, you are right. That makes the it work perfectly"}], "answers": [{"tags": [], "owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1472068411, "creation_date": 1472068411, "answer_id": 39131977, "question_id": 39131935, "link": "https://stackoverflow.com/questions/39131935/logic-operators-in-if-statments/39131977#39131977", "title": "Logic operators in if statments", "body": "<p>This is wrong:</p>\n\n<pre><code>if(Opperator=='a'||'s'||'m'||'d')\n</code></pre>\n\n<p>you can NOT test for equality (or inequality) like this. The code executes as the equivalent of</p>\n\n<pre><code>if (Operator == (result of boolean ORs))\n</code></pre>\n\n<p>You have to test for equality individually:</p>\n\n<pre><code>if ((op == 'a') || (op == 's') || etc...)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 334, "user_id": 6604220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WUnLx.png?s=128&g=1", "display_name": "Joseph Rosson", "link": "https://stackoverflow.com/users/6604220/joseph-rosson"}, "is_accepted": false, "score": 0, "last_activity_date": 1472068534, "creation_date": 1472068534, "answer_id": 39132015, "question_id": 39131935, "link": "https://stackoverflow.com/questions/39131935/logic-operators-in-if-statments/39132015#39132015", "title": "Logic operators in if statments", "body": "<p>Why not just break it out like so,</p>\n\n<pre><code>if (Opperator == 'a' || \n    Opperator == 's' ||\n    Opperator == 'm' ||\n    Opperator == 'd')\n{\n    // Good values\n}\nelse\n{\n    // Bad values\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2629, "user_id": 6341295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I74tV.png?s=128&g=1", "display_name": "Priyesh Kumar", "link": "https://stackoverflow.com/users/6341295/priyesh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1472069044, "creation_date": 1472069044, "answer_id": 39132146, "question_id": 39131935, "link": "https://stackoverflow.com/questions/39131935/logic-operators-in-if-statments/39132146#39132146", "title": "Logic operators in if statments", "body": "<pre><code>if(Opperator=='a'||'s'||'m'||'d')\n</code></pre>\n\n<p>It checks whether Opperator is equal to 'a', if not then 's' always returns true and so all logic becomes true.</p>\n\n<p>You can use <code>if</code> statement:</p>\n\n<pre><code>if (Opperator == 'a' || Opperator == 's' || Opperator == 'm' ||  Opperator == 'd') {\n    // my calc works well\n} else {\n    // again my calc works well\n} \n</code></pre>\n\n<p>OR you can use <code>switch</code>:</p>\n\n<pre><code>switch(Opperator) {\n    case 'a':\n    case 's':\n    case 'm':\n    case 'd': // do normal operation here\n              break;\n    default:  // error handle\n              break;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 1768682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6745281c82ad0e7a243883dba1219346?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1768682/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1472069569, "creation_date": 1472069569, "answer_id": 39132289, "question_id": 39131935, "link": "https://stackoverflow.com/questions/39131935/logic-operators-in-if-statments/39132289#39132289", "title": "Logic operators in if statments", "body": "<p>You must test each char for equality:</p>\n\n<pre><code>if(Opperator=='a'||Opperator=='s'||Opperator=='m'||Opperator=='d') {\n    ...execute\n} else {\n    ...execute something else\n}\n</code></pre>\n\n<p>If you want to be fancy you can use <code>algorithm::anyOf()</code>.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nconst std::vector&lt;char&gt; validValues{'a','s','m','d'};\n\nif(any_of(validValues.begin(),\n          validValues.end(),\n          [&amp;](const char &amp;x) { return x == Opperator; }) {\n    // good values\n} else {\n    // bad values\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4479471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9198f61dae1b5619c8b606007ccbc790?s=128&d=identicon&r=PG&f=1", "display_name": "Neil Asnani", "link": "https://stackoverflow.com/users/4479471/neil-asnani"}, "is_accepted": false, "score": 1, "last_activity_date": 1472071684, "creation_date": 1472071684, "answer_id": 39132774, "question_id": 39131935, "link": "https://stackoverflow.com/questions/39131935/logic-operators-in-if-statments/39132774#39132774", "title": "Logic operators in if statments", "body": "<p>The error is in your if statement.  In C++, when you are comparing the same variable to multiple values, for example if opperator is a, m, s, d, you need to restate the variable for each comparison.</p>\n\n<pre><code>if( Opperator=='a' || Opperator=='s' || Opperator=='m' || Opperator=='d' )\n</code></pre>\n\n<p>Instead of your current if statement.</p>\n\n<p>Also, as a tip, a switch statement is much better in these cases, you can simply state</p>\n\n<pre><code>int ans;\nswitch (customerPackage) {\n  case 'a':\n    ans = int1 + int2;\n  case 's':\n    ans = int1 - int2;\n  case 'd':\n    ans = int1 * int2;\n  case 'm':\n    ans = int1 / int2;\n  default:\n    string ans;\n    ans = \"invalid input\";\n}\ncout &lt;&lt;ans;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6753988, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B_6Y4ytr4Hc/AAAAAAAAAAI/AAAAAAAADPg/QpCaqOB_wso/photo.jpg?sz=128", "display_name": "Martin Johnsrud", "link": "https://stackoverflow.com/users/6753988/martin-johnsrud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 39131977, "answer_count": 5, "score": -1, "last_activity_date": 1472440526, "creation_date": 1472068215, "last_edit_date": 1472440526, "question_id": 39131935, "link": "https://stackoverflow.com/questions/39131935/logic-operators-in-if-statments", "title": "Logic operators in if statments", "body": "<p>So i am writing a calculator as an exercise in c++, were you first select operators <code>+</code>, <code>-</code>, <code>*</code> or <code>/</code> by inputting a, s, m or d. The calculator works fine, except for a filter i set up to respond with an error if the user inputs something other than a, s, m or d. The filter is an if statement:</p>\n\n<pre><code>if(Opperator=='a'||'s'||'m'||'d')\n    {\n        //some code\n    }\n\n    else\n    {\n        //\"Operatorfault\"\n        cout &lt;&lt;\"opperatorfeil\";\n    }\n</code></pre>\n\n<p>Even though the \"operator\" has other <code>char</code> values than those the if statement is suppose to execute, the code within the if statement is still executed. The whole code is below. The outputs and variables are in Norwegian, but i have tried to translate in the comments.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n//The calculator function\nint Kalkulator(int IN1, int IN2, char Opperator)\n{\n    int Svar;\n\n    //Detects witch operator the user choose, and preforms the assigned operation\n    if(Opperator=='a')\n    {\n        Svar=IN1+IN2;\n    }\n\n    if(Opperator=='s')\n    {\n        Svar=IN1-IN2;\n    }\n\n    if(Opperator=='m')\n    {\n        Svar=IN1*IN2;\n    }\n\n    if(Opperator=='d')\n    {\n        Svar=IN1/IN2;\n    }\n\n    //Returns the answer\n    return Svar;\n}\n\nint main()\n{\n    //Input a, s, m or d for addition, subtraction, multiplication or division, respectively\n    cout &lt;&lt;\"Skriv \\\"a\\\" for addisjon, \\\"s\\\" for subtraksjon, \\\"m\\\" for multipliksjon, og \\\"d\\\" for  divisjon\";\n\n    cout &lt;&lt;endl;\n    cout &lt;&lt;endl;\n\n    char Opperator;\n\n    cin &gt;&gt;Opperator;\n    cout &lt;&lt;endl;\n\n    //Checks if the input is valid\n    if(Opperator=='a'||'s'||'m'||'d')\n    {\n        cout &lt;&lt;\"Skriv inn det f\u00f8rste tallet du vil gj\u00f8re opperasjonen p\u00e5, trykk derreter enter, og skriv inn det andre\";\n        cout &lt;&lt;endl;\n        cout &lt;&lt;endl;\n\n        int IN1;\n        int IN2;\n\n        cin &gt;&gt;IN1;\n        cin &gt;&gt;IN2;\n        cout &lt;&lt;endl;\n\n        //\"The answer is\"\n        cout &lt;&lt; \"Svaret er: \";\n        //Calls the calculator function, and inputs the values it has gathered, then prints the answer\n        cout &lt;&lt;Kalkulator(IN1, IN2, Opperator);\n    }\n\n    else\n    {\n        //\"Operatorfault\"\n        cout &lt;&lt;\"opperatorfeil\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "glibc"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472068786, "post_id": 39131893, "comment_id": 65609455, "body": "IIRC what you&#39;re claiming works. I think cppreference needs an update about this."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472069128, "post_id": 39131893, "comment_id": 65609617, "body": "Documentation:  Check out one of the drafts for the latest C++ standard.  It documents the library functions (but possibly by referring to a C standard).  Note that there is a general rule &quot;you can&#39;t pass NULL to a library function unless it explicitly says you can&quot;."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472069137, "post_id": 39131893, "comment_id": 65609621, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: The thing is that neither in the C nor C++ standard (at least in the versions I can find in the internet) I can find any reference to this. Nor in the according man pages on the linux systems I tested it on."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472069621, "post_id": 39131893, "comment_id": 65609864, "body": "@MartinBonner: Thanks, but I know, where to look for the documentation for ISO C or C++ but couldn&#39;t find any reference to this behavior in either of those documents (which doesn&#39;t necessarily mean it doesn&#39;t exist). Apparently this isn&#39;t even mentioned in the POSIX spec, which often requires additional functionality (e.g. POSIX specified multithreading behavior long befor ISO C or C++ did)."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1472069966, "post_id": 39131893, "comment_id": 65610015, "body": "I think its more efficient to create a stack buffer and then construct the <code>std::string</code> directly passing the address of the stack buffer and the return value of <code>std::strftime()</code>, passing it the same stack buffer along with the rest of the format parameters.Then <code>std::strftime</code> fills the stack buffer and returns the correct length to construct the <code>std:string</code> directly. That saves calling <code>st::strftime</code> twice and filling the <code>std::string</code> twice."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1472070085, "post_id": 39131893, "comment_id": 65610061, "body": "Here is an example: <a href=\"https://stackoverflow.com/questions/31281293/timestamps-for-embedded-system/31281976#31281976\" title=\"timestamps for embedded system\">stackoverflow.com/questions/31281293/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472070527, "post_id": 39131893, "comment_id": 65610278, "body": "This looks like undefined behavior to me.  strftime does not have any requirement in the C standard to do what you say and it does say <i>If the total number of resulting characters including the terminating null character is not more than maxsize, the strftime function returns the number of characters placed into the array pointed to by s not including the terminating null character.</i> so it looks to me like it will attempt to write into the array and doing that is UB."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1472070712, "post_id": 39131893, "comment_id": 65610367, "body": "@Galik: Thank you. You are most probably right and this was certainly not meant as demonstration of how to best use <code>strftime</code>. I came across something similar in some older code of mine (while porting it to windows) and was surprised that I didn&#39;t find anything about this in the Linux/POSIX documentation."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472070843, "post_id": 39131893, "comment_id": 65610439, "body": "@NathanOliver: I agree, that is UB according to the ISO C and C++ standard. But just because something is UB in the ISO-C or C++ standard doesn&#39;t necessarily mean it is not specified for an actual standard library implementation that might (in addition) adhere to other standards like POSIX."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1472073735, "post_id": 39131893, "comment_id": 65611788, "body": "@mikemb: it is not in posix either. It is probably an undocumented glibc extension."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1472075558, "post_id": 39131893, "comment_id": 65612559, "body": "@rici: Thank you very much. You were absolutely right just that it is documented and I was to stupid to search at the right place."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472075860, "post_id": 39131893, "comment_id": 65612681, "body": "Neither C11 nor POSIX (2008, 2013) mandates the &#39;return the number of characters that would have been printed&#39; behaviour.  However, it parallels the behaviour of <code>snprintf()</code> which is mandated to behave sanely like that, so there is precedent for the specification."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472076399, "post_id": 39133589, "comment_id": 65612867, "body": "This answer would be improved if you&#39;d mention that this behavior is not specified by the C or C++ standard or by POSIX. For implementations other than glibc, passing a null pointer as the first argument to <code>strftime</code> has undefined behavior. (Of course returning useful information is entirely consistent with undefined behavior.)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472077453, "post_id": 39133589, "comment_id": 65613177, "body": "A quibble: This is a glibc issue; it has nothing directly to do with gcc or g++. For example, you can use clang or clang++ with glibc, and you can use gcc or g++ with other library implementations."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1472078300, "post_id": 39133589, "comment_id": 65613460, "body": "@KeithThompson: Fixed. Thank you."}], "tags": [], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "is_accepted": true, "score": 4, "last_activity_date": 1472077579, "last_edit_date": 1472077579, "creation_date": 1472075514, "answer_id": 39133589, "question_id": 39131893, "link": "https://stackoverflow.com/questions/39131893/return-value-of-stdstrftime/39133589#39133589", "title": "Return value of std::strftime", "body": "<p>As far as I can tell and as others have wrote in the comments, above code is most probably undefined behavior according to the ISO C or C++ standard and as far as my own experiments are concerned will crash when compiled with VS2015.</p>\n\n<p>However, as far as glibc is concerned, @rici was spot on:</p>\n\n<p>From the documentation of <a href=\"http://www.gnu.org/software/libc/manual/html_node/Formatting-Calendar-Time.html\" rel=\"nofollow\">The GNU C Library</a>:</p>\n\n<blockquote>\n  <p>If s is a null pointer, strftime does not actually write anything, but instead returns the number of characters it would have written. </p>\n</blockquote>\n"}], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 0, "accepted_answer_id": 39133589, "answer_count": 1, "score": 5, "last_activity_date": 1472077844, "creation_date": 1472068068, "last_edit_date": 1472077844, "question_id": 39131893, "link": "https://stackoverflow.com/questions/39131893/return-value-of-stdstrftime", "title": "Return value of std::strftime", "body": "<p>I think I read somewhere that if I pass a nullptr to <a href=\"http://en.cppreference.com/w/cpp/chrono/c/strftime\" rel=\"nofollow\">std::strftime</a>, the function would return the required buffer size. And indeed, the following code works perfectly well on numerous linux systems I've tried it on (not when compiled with VS though): </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::time_t time{};\n    std::tm const * ltime = std::localtime(&amp;time);\n\n    const char * formatString = \"%Y-%b-%d\";\n    //allocate buffer of appropriate size\n    auto requiredSize = 1 + std::strftime(nullptr, 50, formatString, ltime);\n    std::cout &lt;&lt; \"Required buffer size:\" &lt;&lt; requiredSize &lt;&lt; \"\\n\";\n\n    //Format time to string\n    std::string buff(requiredSize, ' ');\n    std::strftime(&amp;buff[0], requiredSize, formatString, ltime);\n\n    std::cout &lt;&lt; buff &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>However, I was unable to find my original source or any other documentation that would specify this behavior. So my question is:</p>\n\n<ul>\n<li>On which systems / compilers / standard library implementations (if any) is this a guaranteed behavior?</li>\n<li>Where can I find the according documentation?</li>\n</ul>\n\n<p>Edit: I added the C label, as I've seen the same result with equivalent C code and at least with gcc/g++ (or rather glibc/libstdc++) <code>std::strftime</code> is probably just an alias for the c-function <code>strftime</code> anyway. </p>\n"}, {"tags": ["c++", "opengl", "glsl", "buffer"], "answers": [{"comments": [{"owner": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "edited": false, "score": 0, "creation_date": 1472068342, "post_id": 39131847, "comment_id": 65609224, "body": "First, you are amazing. Second, it all makes sense now! On the linked wiki page, I thought that the &quot;NORM&quot; column within the table of image formats would tell us whether an image format <i>has</i> to be supported by the driver/hardware. Now I understand it means <i>normalized</i>. Also, I completely missed the <code>u</code> in <code>ushort</code>, stupid me. Also, you are right about the shader &quot;crash&quot;, that was just a simplification. It does, in fact, just not compile. I&#39;m going to look into flat interpolation, the page you linked does, however, not contain any information. At any rate, thank you so much!"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 6, "last_activity_date": 1472068556, "last_edit_date": 1472068556, "creation_date": 1472067851, "answer_id": 39131847, "question_id": 39131610, "link": "https://stackoverflow.com/questions/39131610/how-to-properly-send-16-bit-integers-to-glsl-shaders-via-buffer-texture/39131847#39131847", "title": "How to properly send 16 bit integers to GLSL Shaders via Buffer Texture", "body": "<blockquote>\n  <p>GL_R16</p>\n</blockquote>\n\n<p>That is an unsigned <em><a href=\"https://www.opengl.org/wiki/Normalized_Integer\" rel=\"nofollow\">normalized integer</a></em> format. Your buffer sampler expects signed, <em>non-normalized</em> integers.</p>\n\n<p>The <a href=\"https://www.opengl.org/wiki/Image_Format\" rel=\"nofollow\">correct image format</a> would be <code>GL_R16I</code>.</p>\n\n<blockquote>\n  <p>Frag shader crashes when this is int, why</p>\n</blockquote>\n\n<p>Probably because you didn't use <a href=\"https://www.opengl.org/wiki/Type_Qualifier_(GLSL)#Interpolation_qualifiers\" rel=\"nofollow\"><code>flat</code> interpolation</a>. Interpolation doesn't work for non-floating-point values.</p>\n\n<p>And it wouldn't crash; it would simply fail to compile. You should <em>always</em> check compile errors in your shaders.</p>\n"}], "owner": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1447, "favorite_count": 0, "accepted_answer_id": 39131847, "answer_count": 1, "score": 0, "last_activity_date": 1472068556, "creation_date": 1472067007, "last_edit_date": 1472067378, "question_id": 39131610, "link": "https://stackoverflow.com/questions/39131610/how-to-properly-send-16-bit-integers-to-glsl-shaders-via-buffer-texture", "title": "How to properly send 16 bit integers to GLSL Shaders via Buffer Texture", "body": "<p>I have 3072 values of type <code>std::int16_t</code> (16 bit integer), which corresponds to a <code>GLshort</code>. I want to send those to my GLSL Shaders. I read up on <a href=\"https://www.opengl.org/wiki/Buffer_Texture\" rel=\"nofollow\">Buffer Textures</a> and tried to implement that approach. However, the data does not seem to be intact anymore once it arrives in the Shader. I'm not certain yet, but it looks like the values are all either <code>0</code> or maxed out. What am I doing wrong?</p>\n\n<p>My initialization code looks like this (bar some stuff that isn't relevant):</p>\n\n<pre><code>// 1: Get the data - array of GLshort:\n\nGLshort tboData[3072];\nfor (size_t i = 0; i &lt; 3072; ++i)\n{\n    // cdb.getSprite() returns std::int16_t\n    tboData[i] = (GLshort) cbd.getSprite(i);\n}\n\n// 2: Make sure the Shader Program is being used:\n\nsp-&gt;use(); // sp is a wrapper class for GL Shader Programs\n\n// 3: Generate the GL_TEXTURE_BUFFER, bind it and send the data:\n\nGLuint tbo;\nglGenBuffers(1, &amp;tbo);\nglBindBuffer(GL_TEXTURE_BUFFER, tbo);\nglBufferData(GL_TEXTURE_BUFFER, sizeof(tboData), tboData, GL_STATIC_DRAW);\n\n// 4: Generate the Buffer Texture, activate and bind it:\n\nGLuint tboTex;\nglGenTextures(1, &amp;tboTex);\nglActiveTexture(GL_TEXTURE1); // GL_TEXTURE0 is a spritesheet\nglBindTexture(GL_TEXTURE_BUFFER, tboTex);\n\n// 5: Associate them using `GL_R16` to match the 16 bit integer array:\n\nglTexBuffer(GL_TEXTURE_BUFFER, GL_R16, tbo);\n\n// 6: Make the connection within the Shader:\n\nglUniform1i(sp-&gt;getUniformLocation(\"tbo\"), 1);\nglBindBuffer(GL_TEXTURE_BUFFER, 0);\n</code></pre>\n\n<p>At the beginning of my rendering loop, I make sure everything is bound:</p>\n\n<pre><code>glActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, spriteSheet);\n\nglActiveTexture(GL_TEXTURE1);\nglBindTexture(GL_TEXTURE_BUFFER, tboTex);\n</code></pre>\n\n<p>In my rendering loop, I set a uniform that will be used to index the TBO:</p>\n\n<pre><code>glUniform1i(sp-&gt;getUniformLocation(\"tboIndex\"), tboIndex);\n</code></pre>\n\n<p>Now, the <strong>Vertex Shader's</strong> important pieces:</p>\n\n<pre><code>#version 140\n\n// other ins, outs, uniforms ...\n\nuniform int tboIndex;\nuniform isamplerBuffer tbo;\nout float pass_Sprite; // Frag shader crashes when this is int, why?\n\nvoid main()\n{\n    // gl_Position, matrices, etc ...\n    pass_Sprite = texelFetch(tbo, tboIndex).r;\n}\n</code></pre>\n\n<p>Any advice is welcome.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1472065962, "post_id": 39131302, "comment_id": 65607977, "body": "The <code>,</code> operator does not do what you think!"}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 1, "creation_date": 1472065982, "post_id": 39131302, "comment_id": 65607988, "body": "The problem is in the line before: <code>cin &gt;&gt; number1, number2, number3;</code>. <code>number2</code> and <code>number3</code> are not initialized, because they are parsed as separate statements. Use <code>cin &gt;&gt; number1 &gt;&gt; number2 &gt;&gt; number3;</code> instead. Voting to close as simple typo."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1472066293, "post_id": 39131302, "comment_id": 65608139, "body": "Initialising a variable: <code>int x = 0;</code>. Initialising two: <code>int x = 0; int y = 0;</code> (better) or <code>int x = 0, y = 0;</code> (more prone to error and less obvious). This generalises in the obvious way to more than two variables. (This is covered in the introduction to variables in the book you should invest in.)"}], "answers": [{"tags": [], "owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "is_accepted": false, "score": 3, "last_activity_date": 1472065974, "creation_date": 1472065974, "answer_id": 39131346, "question_id": 39131302, "link": "https://stackoverflow.com/questions/39131302/c4700-uninitialized-local-variable-number2-and-number3/39131346#39131346", "title": "C4700 uninitialized local variable &quot;number2&quot; and &quot;number3&quot;", "body": "<p>This line does not do what you expect it to do:</p>\n\n<pre><code>cin &gt;&gt; number1, number2, number3;\n</code></pre>\n\n<p>You probably wanted to read 3 numbers from <code>cin</code>, this is done the following way:</p>\n\n<pre><code>cin &gt;&gt; number1 &gt;&gt; number2 &gt;&gt; number3;\n</code></pre>\n\n<p>In the current form it's evaluated as </p>\n\n<pre><code>(cin &gt;&gt; number1), number2, number3;\n</code></pre>\n\n<p>The result of this expression is <code>number3</code>, which is not initialized in your program. <code>number2</code> is part of the expression, also not initialized, so compiler warns about it too, though the value is discarded.</p>\n"}, {"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472066625, "post_id": 39131353, "comment_id": 65608316, "body": "It doesn&#39;t necessarily <i>ignore</i> the rest. In fact, it doesn&#39;t, as it results in a error. <code>number2</code> and <code>number3</code> will get evaluated, and since they are not initialized, you&#39;ll get a compiler error."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472066712, "post_id": 39131353, "comment_id": 65608370, "body": "@Rakete1111 It is not clear to me from the original post, but are you sure this is an error and not a warning?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472066760, "post_id": 39131353, "comment_id": 65608398, "body": "VS2015 reports an error, I don&#39;t know about other compilers"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472066809, "post_id": 39131353, "comment_id": 65608428, "body": "@Rakete1111 OK, I will amend my answer."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472066865, "post_id": 39131353, "comment_id": 65608454, "body": "GCC and Clang report warnings, so I guess MSCV is wrong again :)"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472066898, "post_id": 39131353, "comment_id": 65608476, "body": "@Rakete1111 nice.  C-:=  anyhow, I have already removed that part from my answer."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472067283, "post_id": 39131353, "comment_id": 65608679, "body": "@Rakete1111 It&#39;s not an error, it&#39;s a warning <a href=\"https://msdn.microsoft.com/en-us/library/axhfhh6x.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/axhfhh6x.aspx</a> You may have enabled &quot;Treat warnings as errors&quot; if you are getting an error here."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1472067435, "post_id": 39131353, "comment_id": 65608766, "body": "@Paul I haven&#39;t, but SDL checks was enabled, which treats specific warnings, like C4700, as errors. Thanks :)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472068155, "post_id": 39131353, "comment_id": 65609116, "body": "No compiler is wrong.  Evaluating an uninitialized variable is undefined behaviour, which means <i>anything</i> is allowed by the standard."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472074713, "post_id": 39131353, "comment_id": 65612220, "body": "@MartinBonner Could you please quote the standard where it says that accessing uninitialized variable is undefined behaviour?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1472102873, "post_id": 39131353, "comment_id": 65619145, "body": "@Paul:  This answer refers to C rather than C++ <a href=\"http://stackoverflow.com/a/6725981/771073\">stackoverflow.com/a/6725981/771073</a>, but the standards are very close here.  The point is that some behaviour is undefined because of an absence of anything defining the behaviour."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472103659, "post_id": 39131353, "comment_id": 65619404, "body": "@MartinBonner There is undefined behaviour and unspecified behaviour. <i>[1.3.25] unspecified behavior - behavior, for a well-formed program construct and correct data, that depends on the implementation. [1.3.26] well-formed program - C++ program constructed according to the syntax rules, diagnosable semantic rules, and the One Definition Rule (3.2).</i> The program where the int variable is not initialized is still well-formed program. There is no undefined behaviour in reading it."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472109776, "post_id": 39131353, "comment_id": 65622441, "body": "I am pretty sure you are wrong; reading an uninitialized variable is not unspecified behaviour, it is undefined.  I will comment again if I can find the cite."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472141042, "post_id": 39131353, "comment_id": 65643300, "body": "@MartinBonner You are correct, I take my words back. According to [dcl.init]/12 <i>If no initializer is specified for an object, the object is default-initialized. When storage for an object with automatic or dynamic storage duration is obtained, the object has an indeterminate value, and if no initialization is performed for the object, that object retains an indeterminate value until that value is replaced (5.18). If an indeterminate value is produced by an evaluation, the behavior is undefined except in the following cases:</i> (all exceptions are for narrow character types)."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1472151368, "post_id": 39131353, "comment_id": 65649057, "body": "I still wonder why the downvote."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1472158260, "post_id": 39131353, "comment_id": 65652524, "body": "@MikeNakis Maybe because of phrasing <i>would read the expression number1, number2, number3 from cin</i>. Comma operator has the lowest precedence, so <code>cin &gt;&gt; number1, number2, number3</code> is not <code>cin &gt;&gt; (number1, number2, number3)</code> but <code>(cin &gt;&gt; number1), number2, number3</code>."}], "tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1472160908, "last_edit_date": 1472160908, "creation_date": 1472066001, "answer_id": 39131353, "question_id": 39131302, "link": "https://stackoverflow.com/questions/39131302/c4700-uninitialized-local-variable-number2-and-number3/39131353#39131353", "title": "C4700 uninitialized local variable &quot;number2&quot; and &quot;number3&quot;", "body": "<p>The comma operator separates expressions in C++ and joins them into a bigger expression, so the statement <code>cin &gt;&gt; number1, number2, number3</code> <strike>would read the expression <code>number1, number2, number3</code> from <code>cin</code></strike> is equivalent to <code>(cin &gt;&gt; number1), number2, number3</code> which does not make much sense, and is certainly not what you intended to do. </p>\n\n<p>Try <code>cin &gt;&gt; number1 &gt;&gt; number2 &gt;&gt; number3</code> instead.</p>\n\n<p>This is one of those weird \"features\" of C++ that the language would have been much better off without.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472066607, "post_id": 39131396, "comment_id": 65608310, "body": "You should know better what to answer or not meanwhile!"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1472066149, "creation_date": 1472066149, "answer_id": 39131396, "question_id": 39131302, "link": "https://stackoverflow.com/questions/39131302/c4700-uninitialized-local-variable-number2-and-number3/39131396#39131396", "title": "C4700 uninitialized local variable &quot;number2&quot; and &quot;number3&quot;", "body": "<p>As mentioned, this should work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    // ...\n    cin &gt;&gt; number1 &gt;&gt; number2 &gt;&gt; number3; // here is the fix\n\n    // ...\n    cout &lt;&lt; \"The average is\" &lt;&lt; average &lt;&lt; endl; // same as you did here\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6456990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fd8fb6a56873730052aec482c05e33?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Puebla", "link": "https://stackoverflow.com/users/6456990/jose-puebla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1472067863, "answer_count": 3, "score": -3, "last_activity_date": 1472160908, "creation_date": 1472065856, "last_edit_date": 1472066389, "question_id": 39131302, "link": "https://stackoverflow.com/questions/39131302/c4700-uninitialized-local-variable-number2-and-number3", "closed_reason": "Not suitable for this site", "title": "C4700 uninitialized local variable &quot;number2&quot; and &quot;number3&quot;", "body": "<p>I have this problem with my visual studio 2015. The error occurs in the 15th line. Suddenly is says that I hadn't initialize the variable, I don't know how to initialize them.</p>\n\n<pre><code>// Average.cpp. : Defines the entry point for the console application.\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\n\nint main()\n{\n    int number1, number2, number3;\n    double average;\n    cout &lt;&lt; \"Enter three integers and I will display the average\" &lt;&lt; endl;\n    cin &gt;&gt; number1, number2, number3;\n    average = (number1 + number2 + number3) / 3.0;\n    cout &lt;&lt; \"The average is\" &lt;&lt; average &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "variadic-functions"], "comments": [{"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1472066152, "post_id": 39131230, "comment_id": 65608074, "body": "<code>these are necessarily cdecl functions</code> well at least the C++ standard does not require this."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1472066283, "post_id": 39131230, "comment_id": 65608132, "body": "Now, we have variadic template, so why bother with old ellipsis C-argument ?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 1, "creation_date": 1472066296, "post_id": 39131230, "comment_id": 65608144, "body": "@cpplearner: True.  The standard has no concept of <code>cdecl</code> functions - but in practise for a varargs function, the call<b>er</b> has to be responsible for cleanup, because the call<b>ee</b> doesn&#39;t know how many args were passed:  <code>printf(&quot;%s&quot;, &quot;a&quot;, &quot;b&quot;);</code> is entirely legal."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1472066384, "post_id": 39131230, "comment_id": 65608186, "body": "It&#39;s not clear how they should behave, so it&#39;s forbidden. Similarly, before C++11 you couldn&#39;t use <code>union</code>s with non-trivial types until it was agreed upon how should they work."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1472066537, "post_id": 39131230, "comment_id": 65608267, "body": "@milleniumbug what is unclear about how they should behave?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1472066539, "post_id": 39131230, "comment_id": 65608269, "body": "@milleniumbug: Why not &quot;copy  construct into the argument list, and destruct afterwards&quot;?  Sounds the most natural analog of how they work for pods."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472066681, "post_id": 39131230, "comment_id": 65608355, "body": "The references in the question don&#39;t contain any link about the standard, or I cannot see that. <i>&quot;why the C++ standard was set this way&quot;</i>, where in the standard has been expressed such thing?"}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1472066929, "post_id": 39131230, "comment_id": 65608498, "body": "Are you asking why you can&#39;t pass a <i>class</i> to a varargs function, or why you can&#39;t pass a non-POD object?  i.e. given <code>class Foo {}; Foo a; void f(int a, ...) {}</code>, are you asking about <code>f(42, Foo);</code> or  <code>f(42, a);</code>?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1472066930, "post_id": 39131230, "comment_id": 65608499, "body": "My guess: In the old old days of C, the compiler understood only three types for function arguments - <code>int</code>, <code>double</code>, and <code>pointer</code>. It was able to convert any arguments used in a function call to one of the above types. It couldn&#39;t do that, you were SOL. Hence, <code>struct</code>s were completely out of the reckoning as a type that could be used in variable argument function calls."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "reply_to_user": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1472067069, "post_id": 39131230, "comment_id": 65608569, "body": "@Ray I&#39;m asking about non-POD object arguments. In your terminology you can&#39;t pass a class as argument to <i>any</i> function, variadic or not."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1472067130, "post_id": 39131230, "comment_id": 65608611, "body": "This is only UB in C++03 and earlier. It&#39;s conditionally-supported in C++11."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472067200, "post_id": 39131230, "comment_id": 65608646, "body": "@BiagioFesta the 2nd link directly quotes the C++11 standard, which is a bit less stern then &#39;undefined behaviour&#39; but still leaves me wondering: &quot;C++11 5.2.2/7: Passing a potentially-evaluated argument of class type having a non-trivial copy constructor, a non-trivial move constructor, or a non-trivial destructor, with no corresponding parameter, is conditionally-supported with implementation-defined semantics.&quot;"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1472067245, "post_id": 39131230, "comment_id": 65608664, "body": "Can you clarify what you mean by a &quot;cdecl function&quot;?  That&#39;s not a term I&#39;ve ever seen (in either language&#39;s standard).  Do you mean <code>extern &quot;C&quot;</code>?  And the C++ and C standards say nothing about register allocation - that&#39;s purely a platform ABI issue (and certainly varies between platforms)."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1472067450, "post_id": 39131230, "comment_id": 65608773, "body": "@OfekShilon I suspected that was the question, but wanted to confirm.  Since you&#39;re asking why you <i>can&#39;t</i> do it, it might be a good idea to edit the title to ask which of the illegal statements you&#39;re actually asking about."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1472067455, "post_id": 39131230, "comment_id": 65608775, "body": "@TobySpeight here&#39;s a meatier discussion about this exactly: <a href=\"http://stackoverflow.com/questions/2512746/in-c-do-variadic-functions-those-with-at-the-end-of-the-parameter-list\" title=\"in c do variadic functions those with at the end of the parameter list\">stackoverflow.com/questions/2512746/&hellip;</a>"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472067582, "post_id": 39131230, "comment_id": 65608838, "body": "@OfekShilon What you&#39;ve just cited is about <i>&quot;C++11&quot;</i> and there is no mention about an undefined behaviour anyway. Moreover what about C++ &lt; 11? Again: there is no reference to any kind of standard about undefined behaviour."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472067774, "post_id": 39131230, "comment_id": 65608921, "body": "@BiagioFesta as commented above, it is UB in C++03 (which I can&#39;t quote), but the question remains: can you shed some light on why it is only conditionally supported in C++11? Why is it even problematic?"}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1472068479, "post_id": 39131230, "comment_id": 65609291, "body": "@RSahu To clarify, that was in pre-ANSI C.  You can pass a structure to a function, variadic or not, in any version of standard C.  The only thing va_arg doesn&#39;t work with is function pointers, due to the manner in which it constructs the pointer type from its parameter (it appends a *)."}, {"owner": {"reputation": 1864, "user_id": 3303940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a08da5ae18a11702d64935b9e5a310d?s=128&d=identicon&r=PG", "display_name": "Akos Bannerth", "link": "https://stackoverflow.com/users/3303940/akos-bannerth"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 1, "creation_date": 1472068974, "post_id": 39131230, "comment_id": 65609543, "body": "@BiagioFesta: see <a href=\"http://www.open-std.org/Jtc1/sc22/wg21/docs/papers/2005/n1804.pdf\" rel=\"nofollow noreferrer\">section 5.2.2</a>, 6-7: <i>&quot;... If the argument has a non-POD class type (clause9), the behavior is undefined. ...&quot;</i>"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 1864, "user_id": 3303940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a08da5ae18a11702d64935b9e5a310d?s=128&d=identicon&r=PG", "display_name": "Akos Bannerth", "link": "https://stackoverflow.com/users/3303940/akos-bannerth"}, "edited": false, "score": 1, "creation_date": 1472069469, "post_id": 39131230, "comment_id": 65609789, "body": "@AkosBannerth What you&#39;ve just linked is <i>11</i> years old. The new C++17 std is almost out of there, can we think for a moment that C++ is a evolving language? Anyway <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow noreferrer\">section 5.2.2</a> 7. What you&#39;ve cited does not exists any more. But if you guys want, just change the question title and write <i>&quot;Why C++ didn&#39;t support no-pod class 10 years ago?&quot;</i>"}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472069596, "post_id": 39131230, "comment_id": 65609852, "body": "@BiagioFesta does C++17 make any guarantees about passing class objects to variadic functions?  If not - do you know why?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1472069908, "post_id": 39131230, "comment_id": 65609992, "body": "@Ray: You should be able to use a function pointer type using a <code>typedef</code> name."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472071306, "post_id": 39131230, "comment_id": 65610666, "body": "@KeithThompson Probably.  (It certainly <i>works</i> in gcc, as do other ways; they just might be implementation-dependent.) C99 6.7.7.7 Example 4 seems to support the idea that you can append * to a function type decl and end up with a pointer to function, but I can&#39;t find where that syntax is actually discussed."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1472071707, "post_id": 39131230, "comment_id": 65610841, "body": "Class types, or non-PODs? Class types can be POD."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472071754, "post_id": 39131230, "comment_id": 65610862, "body": "@OfekShilon I don&#39;t know actually"}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1472078225, "post_id": 39131230, "comment_id": 65613442, "body": "Note that you <i>can</i> pass a <code>class</code> object to a varargs function in MSVC++ (not in GCC, though)."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472120658, "post_id": 39131230, "comment_id": 65629566, "body": "Is it possible complications arise with C++ exception semantics?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1472162006, "post_id": 39131230, "comment_id": 65654067, "body": "The C++ standard allows implementations wide latitude about the low-level details of both non-PODS types and variadic argument passing, some implementations document how they handle such things, and some programs rely upon such details.  Some implementations could not support passing non-PODS types to variadic functions without changing how non-PODS types or variadic functions work <i>even in programs that don&#39;t pass non-PODS types to variadic functions</i>, and mandating such support would thus be a breaking change."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472159847, "post_id": 39132535, "comment_id": 65653260, "body": "In C++98 and C++03 there is &quot;If the argument has a non-POD class type (clause 9), the behavior is undefined.&quot;.  I guess this would have been for C compatibility: C code that passed structs via varargs should continue to work."}], "tags": [], "owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "is_accepted": false, "score": 9, "last_activity_date": 1472070630, "last_edit_date": 1592644375, "creation_date": 1472070630, "answer_id": 39132535, "question_id": 39131230, "link": "https://stackoverflow.com/questions/39131230/why-does-the-spec-prohibit-passing-class-types-to-variable-argument-c-function/39132535#39132535", "title": "Why does the spec prohibit passing class types to variable-argument C++ functions?", "body": "<p><strong>I'm recording this, because it's too big to be a comment, and it was reasonably time consuming to hunt this down, so no one else wastes time looking down this route.</strong></p>\n<p>The text was first changed to something similar to the current wording in the draft standard in <a href=\"http://www.open-std.org/Jtc1/sc22/wg21/docs/papers/2006/n2134.pdf\" rel=\"noreferrer\">N2134</a> released 2006-11-03.</p>\n<p>With some effort, I was able to trace back the wording to <a href=\"http://www2.open-std.org/JTC1/SC22/WG21/docs/papers/2006/n2055.html#506\" rel=\"noreferrer\">DR506</a>.</p>\n<blockquote>\n<p>Paper J16/04-0167=WG21 N1727 suggests that passing a non-POD object to ellipsis be ill-formed. In discussions at the Lillehammer meeting, however, the CWG felt that the newly-approved category of conditionally-supported behavior would be more appropriate.</p>\n</blockquote>\n<p>The paper referenced (<a href=\"http://www2.open-std.org/JTC1/SC22/WG21/docs/papers/2004/n1727.pdf\" rel=\"noreferrer\">N1727</a>), says very little on the subject:</p>\n<blockquote>\n<p>The  existing  wording   (5.2.2\u00b67)   makes  it   undefined   behavior  to  pass   a  non-POD   object   to   an ellipsis in a function call:</p>\n<p>{Snip}</p>\n<p>Once again, the CWG saw no reason not to require implementations to issue a diagnostic in such cases.</p>\n</blockquote>\n<p>However, this doesn't tell me very much about why it was the way it was to begin with, which is what you want to know.  Turning the clock back further to when that language was first written is not possible for me, because the oldest freely available draft standard is from 2005 and already has the wording you're wondering about, all standards prior to this either require authentication or are simply contentless.</p>\n"}, {"tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": false, "score": 6, "last_activity_date": 1472071361, "last_edit_date": 1472071361, "creation_date": 1472070690, "answer_id": 39132551, "question_id": 39131230, "link": "https://stackoverflow.com/questions/39131230/why-does-the-spec-prohibit-passing-class-types-to-variable-argument-c-function/39132551#39132551", "title": "Why does the spec prohibit passing class types to variable-argument C++ functions?", "body": "<p>I guess the problem is/was the breach of type safety. Generally, passing a derived class object where a base class object is expected should be safe. If the base class object is taken by value, then the derived class object will be simply sliced. If it is taken by pointer/reference - the pointer/reference to the derived class object is adjusted properly during compilation. This doesn't work with variable-argument functions, where interpretation of the input types is performed by the code rather than by the compiler.</p>\n\n<p>Example:</p>\n\n<pre><code>struct A { char c; };\nstruct B { int i; };\nstruct D : A, B { double d; };\n\n// This is similar to printf, but also handles the\n// format specifier %b assuming an object of type B\nvoid non_pod_printf(const char* fmt, ...);\n\nD d1, d2;\n\n// I bet that the code inside non_pod_printf will fail to correctly\n// handle the d1 and d2 arguments even though the language rules\n// ensure that D is a B\nnon_pod_printf(\"%d %b %b\", 123, d1, d2);\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>As a now deleted comment pointed out, <code>A</code>, <code>B</code> and <code>D</code> in the example above are actually POD types. However, the problem that I am bringing to your attention has to do with inheritance, which, although allows POD types, but in the majority of cases involves non-POD types.</p>\n"}, {"comments": [{"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472119976, "post_id": 39132884, "comment_id": 65629108, "body": "Thanks for your answer. If this is the case, how come <code>std::string str(&quot;Hello&quot;);printf(&quot;%s&quot;, str)</code> doesn&#39;t leak memory? I just tested and it doesn&#39;t - there isn&#39;t even a std::string copy ctor called."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 3, "creation_date": 1472120039, "post_id": 39132884, "comment_id": 65629156, "body": "The terminology in this answer is somewhat misleading. Although there is a <code>__cdecl</code> calling convention on the Windows platform, it exists only for 32-bit code. Your object code example is obviously 64-bit code, since it uses the 64-bit registers. There is no <code>__cdecl</code> for 64-bit platforms on Windows. In fact, there are only two calling conventions for AMD64: (a) the standard Microsoft 64-bit calling convention, which doesn&#39;t have a name, and (b) <code>__vectorcall</code>."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472120300, "post_id": 39132884, "comment_id": 65629334, "body": "It just so happens that if you pass an object with a destructor, the 32-bit <code>__cdecl</code>, like the 32-bit <code>__stdcall</code> and <code>__fastcall</code>, all transfer a copy of that entire object on the stack. This changes the object&#39;s ownership, making the recipient responsible for managing its lifetime. The Microsoft 64-bit calling convention, like <code>__vectorcall</code>, is the same in spirit, but different in implementation because it passes a copy of the destructor-containing object in a register, only falling back to the stack if all registers are used."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472135296, "post_id": 39132884, "comment_id": 65639551, "body": "@OfekShilon most STLs implement <a href=\"https://github.com/elliotgoodrich/SSO-23/blob/master/README.md\" rel=\"nofollow noreferrer\">small string optimizations</a>. In MSVC&#39;s case (at least for 64 bits), strings under 16 characters don&#39;t need a dynamic allocation. I only have a Windows machine at work so I can&#39;t check the constructor/destructor situation."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472135626, "post_id": 39132884, "comment_id": 65639777, "body": "@zneak The same holds for a had crafted toy class without such optimizations. It&#39;s hard to demo in a comment - implement some TestVariadic(int, ...) and test it with a 2nd argument of class C with ctor, dtor and copy ctor.   When you&#39;d set breakpoints or inspect the disassembly (MSVC 2015, no optimizations) you&#39;d see no copy ctor calls."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472136378, "post_id": 39132884, "comment_id": 65640284, "body": "@zneak I mean to say: it seems <i>variadic</i> functions don&#39;t behave like regular cdecl functions of the sort you demonstrated."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472136468, "post_id": 39132884, "comment_id": 65640345, "body": "@OfekShilon, I get that part. I&#39;ll check that once I get to a Windows machine, probably in a little more than an hour."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472136541, "post_id": 39132884, "comment_id": 65640388, "body": "@zneak this doesn&#39;t seem like a windows artifact. I&#39;m able to reproduce disassembly pretty much identical to yours for your (non variadic) example"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472144712, "post_id": 39132884, "comment_id": 65645487, "body": "@OfekShilon, CL special-cases parameter passing for variadic functions (as that native scheme cannot work). The object is bitwise-copied to a new location on the stack and the address of the bitwise copy is passed in. The variadic function then invokes the copy constructor passing that address at the <code>va_arg</code> site. This most likely corresponds to the implementation-defined semantics of the newer C++ standards. However, the delayed copy causes all sorts of strange things that I can only categorize as UB. For instance, <a href=\"http://pastebin.com/CEgV038K\" rel=\"nofollow noreferrer\">this program</a> prints &quot;bar bar&quot;."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1472146416, "post_id": 39132884, "comment_id": 65646383, "body": "Or maybe this is the closest to copying an object before passing it as a parameter that CL can do because of structural limitations, and the scenario is just unsupported because it doesn&#39;t map closely enough to the parameter passing semantics that CL wants."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1472159325, "post_id": 39132884, "comment_id": 65653057, "body": "@zneak: &quot;At least on Windows...&quot; - things like that are determined by the implementation (by the compiler), not by the OS."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472211042, "post_id": 39132884, "comment_id": 65672849, "body": "@zneak it seems the problem in your program isn&#39;t variadic class arguments, but rather that variadic() takes the first foo by reference - which breaks a different language law. MSVC doesn&#39;t even let you compile it unless you define <code>_CRT_NO_VA_START_VALIDATION</code>. If you remove the reference from the first foo the program seems to run fine."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472220637, "post_id": 39132884, "comment_id": 65678954, "body": "@OfekShilon, the problem is absolutely how MSVC passes objects as variadic parameters. If you prefer, I can take the first parameter by pointer and get the same result. I could also pass multiple objects that have pointers or references to one another."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472226208, "post_id": 39132884, "comment_id": 65682552, "body": "@zneak Thanks for your efforts, but I&#39;m still not sure this is the answer. You&#39;ve shown how POD-specific optimizations break when non-PODs are plugged in. Still, couldn&#39;t a different C++ standard prohibit these optimizations and work? Is there anything inherent in variadic functions that prevents the expected semantics?  (caller constructs and destructs the object arguments)"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 1, "creation_date": 1472228088, "post_id": 39132884, "comment_id": 65683586, "body": "@OfekShilon, this is the only right thing to do for PODs, not an optimization. The extension of this mechanism for non-POD types requires two full copies of each object passed as a variadic argument. You might not be able to fix the double copy issue without changing how va_lists work in C. Ultimately, there might be no better answer than &quot;it broke a bunch of assumptions and nobody cares enough&quot;."}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1472229527, "post_id": 39132884, "comment_id": 65684354, "body": "@zneak the bitwise copy is definitely a POD-specific optimization that could be generalized to &#39;copy construction&#39; if the standard mandated it. But I agree that this is probably the best answer out there.."}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1472664327, "post_id": 39132884, "comment_id": 65846883, "body": "What&#39;s to stop the C++ standard from defining its own calling convention? I don&#39;t see how the fact that no convenient calling convention currently exists is a deal breaker."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1472664881, "post_id": 39132884, "comment_id": 65847207, "body": "@JordanMelo, see second half of the answer and the double-copy problem."}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1472667765, "post_id": 39132884, "comment_id": 65848822, "body": "@zneak The second half is definitely an interesting reason why the standard probably wouldn&#39;t adopt this, and I like how you brought up that variadic templates are a better tool for the same job, but I feel like the first half, in my opinion, is not very compelling as the calling convention doesn&#39;t have to be static."}], "tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": true, "score": 12, "last_activity_date": 1472159153, "last_edit_date": 1472159153, "creation_date": 1472072193, "answer_id": 39132884, "question_id": 39131230, "link": "https://stackoverflow.com/questions/39131230/why-does-the-spec-prohibit-passing-class-types-to-variable-argument-c-function/39132884#39132884", "title": "Why does the spec prohibit passing class types to variable-argument C++ functions?", "body": "<p>The calling convention does specify who does the low-level stack dance, but it doesn't say who's responsible for \"high-level\" C++ bookkeeping. At least on Windows, a function that accepts an object by value is responsible for calling its destructor, even though it is not responsible for the storage space. For instance, if you build this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct Foo {\n    Foo() { puts(\"created\"); }\n    Foo(const Foo&amp;) { puts(\"copied\"); }\n    ~Foo() { puts(\"destroyed\"); }\n};\n\nvoid __cdecl x(Foo f) { }\n\nint main() {\n    Foo f;\n    x(f);\n    return 0;\n}\n</code></pre>\n\n<p>you get:</p>\n\n<pre><code>x:\n    mov     qword ptr [rsp+8],rcx\n    sub     rsp,28h\n    mov     rcx,qword ptr [rsp+30h]\n    call    module!Foo::~Foo (00000001`400027e0)\n    add     rsp,28h\n    ret\n\nmain:\n    sub     rsp,48h\n    mov     qword ptr [rsp+38h],0FFFFFFFFFFFFFFFEh\n    lea     rcx,[rsp+20h]\n    call    module!Foo::Foo (00000001`400027b0) # default ctor\n    nop\n    lea     rax,[rsp+21h]\n    mov     qword ptr [rsp+28h],rax\n    lea     rdx,[rsp+20h]\n    mov     rcx,qword ptr [rsp+28h]\n    call    module!Foo::Foo (00000001`40002780) # copy ctor\n    mov     qword ptr [rsp+30h],rax\n    mov     rcx,qword ptr [rsp+30h]\n    call    module!x (00000001`40002810)\n    mov     dword ptr [rsp+24h],0\n    lea     rcx,[rsp+20h]\n    call    module!Foo::~Foo (00000001`400027e0)\n    mov     eax,dword ptr [rsp+24h]\n    add     rsp,48h\n    ret\n</code></pre>\n\n<p>Notice how <code>main</code> constructs two <code>Foo</code> objects but destroys only one; <code>x</code> takes care of the other one. That obviously wouldn't work if the object was passed as a vararg.</p>\n\n<hr>\n\n<p>EDIT: Another problem with passing objects to functions with variadic parameters is that in its current form, regardless of the calling convention, the \"right thing\" requires two copies, whereas normal parameter passing requires just one. Unless C++ extended C variadic functions by making it possible to pass and/or accept references to objects (which is extremely unlikely to ever happen, given that C++ solves the same problem in a type-safe way using variadic templates), the caller needs to make one copy of the object, and <code>va_arg</code> only allows the callee to get a copy of that copy.</p>\n\n<p>Microsoft's CL tries to get away with one bitwise copy and one full copy construction of that bitwise copy at the <code>va_arg</code> site, but it can have nasty consequences. Consider this example:</p>\n\n<pre><code>struct foo {\n    char* ptr;\n\n    foo(const char* ptr) { this-&gt;ptr = _strdup(ptr); }\n    foo(const foo&amp; that) { ptr = _strdup(that.ptr); }\n    ~foo() { free(ptr); }\n\n    void setPtr(const char* ptr) {\n        free(this-&gt;ptr);\n        this-&gt;ptr = _strdup(ptr);\n    }\n};\n\nvoid variadic(foo&amp; a, ...)\n{\n    a.setPtr(\"bar\");\n\n    va_list list;\n    va_start(list, a);\n    foo b = va_arg(list, foo);\n    va_end(list);\n\n    printf(\"%s %s\\n\", a.ptr, b.ptr);\n}\n\nint main() {\n    foo f = \"foo\";\n    variadic(f, f);\n}\n</code></pre>\n\n<p>On my machine, this prints \"bar bar\", even though it would print \"foo bar\" if I had a non-variadic function whose second parameter accepted another <code>foo</code> by copy. This is because a bitwise copy of <code>f</code> happens in <code>main</code> at the call site of <code>variadic</code>, but the copy constructor is only invoked when <code>va_arg</code> is called. Between the two, <code>a.setPtr</code> invalidates the original <code>f.ptr</code> value, which is however still present in the bitwise copy, and by pure coincidence <code>_strdup</code> returns that same pointer (albeit with a new string inside). Another outcome of the same code could be a crash in <code>_strdup</code>.</p>\n\n<p>Note that this design works great for POD types; it only falls apart when constructors and destructors need side effects.</p>\n\n<p>The original point that calling conventions and parameter passing mechanisms don't necessarily support non-trivial construction and destruction of objects still stands: this is exactly what happens here.</p>\n\n<hr>\n\n<p>EDIT: answer originally said that the construction and destruction behavior was specific to cdecl; it is not. (Thanks Cody!)</p>\n"}], "owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 3, "accepted_answer_id": 39132884, "answer_count": 3, "score": 25, "last_activity_date": 1472230009, "creation_date": 1472065564, "last_edit_date": 1495540862, "question_id": 39131230, "link": "https://stackoverflow.com/questions/39131230/why-does-the-spec-prohibit-passing-class-types-to-variable-argument-c-function", "title": "Why does the spec prohibit passing class types to variable-argument C++ functions?", "body": "<p>Passing non-PODs to variable argument functions such as printf is undefined behaviour (<a href=\"https://stackoverflow.com/questions/3493415/is-there-a-way-to-prohibit-the-use-of-a-class-by-value-in-c-style-variable-argum\">1</a>, <a href=\"http://www.viva64.com/en/d/0099/print/\" rel=\"nofollow noreferrer\">2</a>), but I don't understand <em>why</em> the C++ standard was set this way. Is there anything inherent in variable arg functions that prevents them from accepting classes as arguments?</p>\n\n<p>The variable-arg callee indeed knows nothing about their type - but nor does it know anything about built-in types or plain PODs it accepts.</p>\n\n<p>Also, these are necessarily cdecl functions, so the <em>caller</em> can be responsible e.g. for copying them upon passing and destroying them on return.</p>\n\n<p>Any insight would be  appreciated.</p>\n\n<hr>\n\n<p>EDIT: I still see no reason why the suggested variadic semantics won't work, but zneak's answer demonstrates well what it would take to adjust compilers to it - so I accepted it.  Ultimately, it might be some historical glitch.</p>\n"}, {"tags": ["c++", "windows", "dll", "exe"], "comments": [{"owner": {"reputation": 11496, "user_id": 300187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o5Qmp.jpg?s=128&g=1", "display_name": "Artem Sokolov", "link": "https://stackoverflow.com/users/300187/artem-sokolov"}, "edited": false, "score": 1, "creation_date": 1472065648, "post_id": 39131185, "comment_id": 65607835, "body": "It cannot. See the following: <a href=\"http://stackoverflow.com/questions/1210873/difference-between-dll-and-exe\" title=\"difference between dll and exe\">stackoverflow.com/questions/1210873/&hellip;</a>"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1472065883, "post_id": 39131185, "comment_id": 65607943, "body": "Related: <a href=\"http://stackoverflow.com/questions/19110747/loadlibrary-an-exe\">stackoverflow.com/questions/19110747/loadlibrary-an-exe</a>"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1472067285, "post_id": 39131185, "comment_id": 65608683, "body": "Not an an expert, so I will just add 2 things to watch out: 1) two main entry points (exe vs dll have different ). 2) dll base address is not fixed, so your &quot;dll&quot; code must be &quot;position-independent code&quot;. There&#39;s for sure lot more things to get right about the file content to have all the required sections, etc.. looks like Sami&#39;s comment has nice tutorial how to. I would avoid that mix due to maintenance reasons (MS will break it one day, I bet :) ). But it looks possible, if you insist."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472067367, "post_id": 39131185, "comment_id": 65608734, "body": "No, it is not possible. There is a single bit in the PE header that the loader uses to differentiate between EXEs and DLLs. A single file cannot possibly be both, because a bit cannot be both set and unset. However, you can load resources and code from an EXE in a very similar way that you could from a DLL. Is there an actual problem that you&#39;re trying to solve? If you <a href=\"https://stackoverflow.com/posts/39131185/edit\">edit</a> that into your question, we could provide you with much more helpful and detailed answers."}, {"owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472113664, "post_id": 39131185, "comment_id": 65624874, "body": "@CodyGray - IMAGE_FILE_EXECUTABLE_IMAGE (0x002) and IMAGE_FILE_DLL (0x2000) are both flags of the Characteristics field of the PE-header. Your point is that these flags cannot both be set by their description? But their values could be OR&#39;d - I guess by your explanation, that the loader would generate an error then? No, I&#39;m just making the question, because I was wondering, not because I&#39;ve an actual problem :-)"}], "answers": [{"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472067532, "post_id": 39131288, "comment_id": 65608818, "body": "Um, the article basically shows how you can do the extra work that LoadLibrary <i>doesn&#39;t</i> do for DLLs. It doesn&#39;t show how something can be both an EXE and a DLL, it shows how you can jump through extra hoops to make a DLL work like an EXE. Of course that is possible, you just write the same code that Microsoft did in the loader. I don&#39;t know what you mean by &quot;process explorer sources&quot;. Do you have the source code for Process Explorer? How is it relevant to this issue?"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472067763, "post_id": 39131288, "comment_id": 65608917, "body": "Also, I suspect the real reason why the LoadLibrary function documentation says this is historical. In the 16-bit days, the DLL extension was not widely used (in Windows 1.0, of course, it didn&#39;t even exist). All code-containing binaries had the file extension EXE, including KRNL386.EXE, USER.EXE, GDI.EXE, etc. But these were just DLLs as we now know them. A single bit in the PE header determined how they were to be loaded. The documentation has probably never been updated, and backwards compatibility dicates that the code hasn&#39;t been either. Plus, resources can be loaded from an EXE this way."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1472067871, "post_id": 39131288, "comment_id": 65608968, "body": "@CodyGray: I don&#39;t think that&#39;s right.  DLLs come with all sorts of extensions (eg .ocx) and even a .exe doesn&#39;t have to end with .exe."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472067947, "post_id": 39131288, "comment_id": 65608997, "body": "@CodyGray I don&#39;t want to start a terminology discussion but the question was <i>&quot;Is it possible for a file to be both an executable (EXE) and a dynamic-link library (DLL) at the same time?&quot;</i> My answer is that yes, exe <b>can</b> be <b>dynamic-link library</b>, i. e. a binary module that you can dynamically load at run-time and use it as library, dynamically linking to its exported symbols"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472068027, "post_id": 39131288, "comment_id": 65609042, "body": "Well, the point is that the file extension doesn&#39;t matter. It can be anything you want. The bits in the binary determine it, specifically the PE header when you&#39;re talking about Windows binaries. The loader does something different with what we know as executables (generally with the extension EXE but not necessarily), and what we know as dynamic libraries (generally with the extension DLL but not necessarily). You can write additional code to make them behave in similar ways, but it doesn&#39;t change the fact that they are two different things as far as the loader is concerned. And the spec."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472068138, "post_id": 39131288, "comment_id": 65609102, "body": "Thanks @MartinBonner for doing my work here, I was going to mention .ocx, .tli, etc... even .txt can be DLL in the sence of this question..."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472068698, "post_id": 39131288, "comment_id": 65609412, "body": "@CodyGray My last post in this page: I read this question just <b>practicaly</b>. It is not a theoretical situation and I was there by myself: I had a big executable with a lot of functions that could be used in another project. Re-factoring that exe (old and huge) into dll was not possible due to a lot unrelated reasons. I needed to use those functions in another exe and had very short time to get it working. Thanks to the fact that <i>&quot;exe can be used as library&quot;</i> that goal was achived quite quickly. Thus my answer."}], "tags": [], "owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "is_accepted": false, "score": 7, "last_activity_date": 1472067226, "last_edit_date": 1495535352, "creation_date": 1472065788, "answer_id": 39131288, "question_id": 39131185, "link": "https://stackoverflow.com/questions/39131185/can-a-file-both-be-an-executable-exe-and-a-dynamic-link-library-dll-at-the-s/39131288#39131288", "title": "Can a file both be an executable (EXE) and a dynamic-link library (DLL) at the same time?", "body": "<p>From <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684175(v=vs.85).aspx\" rel=\"nofollow noreferrer\">LoadLibrary</a> documentation:</p>\n\n<blockquote>\n  <p>The name of the module. <strong>This can be either a library module (a .dll file) or an executable module (an .exe file)</strong>. The name specified is the file name of the module and is not related to the name stored in the library module itself, as specified by the LIBRARY keyword in the module-definition (.def) file.</p>\n</blockquote>\n\n<p>EDIT: I expected downvotes when I wrote this answer. I know many people think it is not possible (SO questions and answers from comments confirm it). But for those who are interested I can provide POC (or simply look at well known \"process explorer\" sources)</p>\n\n<p>Note that if you need to export symbols from module you need to use those EXPORT statements in <code>.def</code> file. Then you can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683212(v=vs.85).aspx\" rel=\"nofollow noreferrer\">GetProcAddress</a></p>\n\n<p>Actually, I see that this <a href=\"https://stackoverflow.com/questions/19110747/loadlibrary-an-exe\">SO question</a>, also mentioned in comments, has answer that points to article <a href=\"http://www.codeproject.com/Articles/1045674/Load-EXE-as-DLL-Mission-Possible\" rel=\"nofollow noreferrer\">\"Load EXE as DLL: Mission Possible\"</a>, which I also was going to quote. That answer is not accepted, accepted answer says \"no\" and even is taken as community wiki. Well <a href=\"https://stackoverflow.com/questions/6520052/whats-wrong-with-cplusplus-com\">\"SO doesn't claim to be (in part) a library reference\"</a></p>\n"}, {"tags": [], "owner": {"reputation": 2432, "user_id": 6666728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2419c7add6fb7414e9622f792b4125b2?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Lykke Iversen", "link": "https://stackoverflow.com/users/6666728/nicolas-lykke-iversen"}, "is_accepted": false, "score": 2, "last_activity_date": 1472207139, "creation_date": 1472207139, "answer_id": 39164070, "question_id": 39131185, "link": "https://stackoverflow.com/questions/39131185/can-a-file-both-be-an-executable-exe-and-a-dynamic-link-library-dll-at-the-s/39164070#39164070", "title": "Can a file both be an executable (EXE) and a dynamic-link library (DLL) at the same time?", "body": "<p>In the official PE documentation, <code>IMAGE_FILE_EXECUTABLE_IMAGE (0x002)</code> and <code>IMAGE_FILE_DLL (0x2000)</code> are both flags of the <code>Characteristics</code> field of the PE-header. </p>\n\n<p>As seen in the <code>IMAGE_FILE_DLL (0x2000)</code>: </p>\n\n<blockquote>\n  <p>The image file is a dynamic-link library (DLL). Such files are\n  considered executable files for almost all purposes, although they\n  cannot be directly run.</p>\n</blockquote>\n\n<p>However, for <code>IMAGE_FILE_EXECUTABLE_IMAGE (0x002)</code>:</p>\n\n<blockquote>\n  <p>Image only. This indicates that the image file is valid and can be\n  run. If this flag is not set, it indicates a linker error.</p>\n</blockquote>\n\n<p>Since, the DLL cannot be directly run, it may not have the <code>IMAGE_FILE_EXECUTABLE_IMAGE (0x002)</code> flag set.</p>\n\n<p>I guess, that these flags OR'd toghether would result in an error at load time, but I'm not sure.</p>\n"}], "owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1464, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1472207139, "creation_date": 1472065377, "question_id": 39131185, "link": "https://stackoverflow.com/questions/39131185/can-a-file-both-be-an-executable-exe-and-a-dynamic-link-library-dll-at-the-s", "title": "Can a file both be an executable (EXE) and a dynamic-link library (DLL) at the same time?", "body": "<p>Is it possible for a file to be both an executable (EXE) and a dynamic-link library (DLL) at the same time? \n(I.e. it can be executed as an EXE and loaded at run-time as a shared library.)</p>\n\n<p>I can't see why it shouldn't be possible, but maybe someone can give an explanation?</p>\n"}, {"tags": ["c++", "templates", "lua", "function-pointers"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1472065403, "post_id": 39131137, "comment_id": 65607711, "body": "I read <a href=\"http://stackoverflow.com/search?q=%5Bc%2B%2B%5Dfunction+pointer+as+template+parameter\"><i>function pointer as template argument</i></a> about five to seven times a week (if not more frequently) here. Sure you cannot find any primary information, which is already available?"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472065461, "post_id": 39131137, "comment_id": 65607745, "body": "I didn&#39;t got what <code>myTemp()</code> is supposed to be. Maybe you miss a return type?"}, {"owner": {"reputation": 31, "user_id": 5608504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d24ef15c9ca00261ec96dff0d1d74cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/5608504/robin"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472067123, "post_id": 39131137, "comment_id": 65608607, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I searched for function pointer as template argument, but all I found are the first two cases, and not the third in which I&#39;m interested. If you have a link concerning this case, I would be gratefull."}], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1472069398, "post_id": 39132174, "comment_id": 65609759, "body": "Anyway the question has not the <i>c1z</i> tag, so I guess this doesn&#39;t really answer it. Am I wrong?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1472069617, "post_id": 39132174, "comment_id": 65609860, "body": "@skypjack: pre-c++1z, that syntax is not supported, so to really answer to OP&#39;s question, no it is not possible to use similar syntax."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1472070014, "post_id": 39132174, "comment_id": 65610030, "body": "Well, that one (<i>no, it is not possible</i>) would be a response indeed. Then, adding information about the upcoming features enriches the answer, of course. :-)"}, {"owner": {"reputation": 31, "user_id": 5608504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d24ef15c9ca00261ec96dff0d1d74cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/5608504/robin"}, "edited": false, "score": 0, "creation_date": 1472070786, "post_id": 39132174, "comment_id": 65610406, "body": "@Jarod42 Thank you very much. This answers my question. I will try if the c++17 syntax is already available with my compiler version."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1556141380, "last_edit_date": 1556141380, "creation_date": 1472069135, "answer_id": 39132174, "question_id": 39131137, "link": "https://stackoverflow.com/questions/39131137/function-pointer-as-template-argument-and-signature/39132174#39132174", "title": "Function pointer as template argument and signature", "body": "<p>c++17 allows:</p>\n\n<pre><code>template &lt;auto value&gt; struct wrapper;\n</code></pre>\n\n<p>and then your specialization</p>\n\n<pre><code>template&lt;typename RT, typename... ATs, RT (*pF)(ATs...)&gt;\nstruct wrapper&lt;pF&gt; {\n    static void reg(lua_State *L, const char* n) {\n        auto lw = [](lua_State *L) {\n            lua_pushnumber(L, call(L, std::index_sequence_for&lt;ATS...&gt;()));\n            return 1;\n        };\n        lua_pushcfunction(L, lw);\n        lua_setglobal(L, n);\n    }\n\n    template&lt;std::size_t ... Is&gt;\n    static\n    RT call(lua_State *L, std::index_sequence&lt;Is...&gt;) {\n        return pF(lua_tonumber(L, 1 + Is)...);\n    }\n};\n</code></pre>\n\n<p>And usage:</p>\n\n<pre><code>wrapper&lt;&amp;add&gt;::reg(L, \"add\");\n</code></pre>\n\n<p>Before c++17, your <code>wrapper</code> has to be</p>\n\n<pre><code>template &lt;typename Sig, sig Pf&gt; struct wrapper;\n\ntemplate&lt;typename RT, typename... ATs, RT (*pF)(ATs...)&gt;\nstruct wrapper&lt;Rt (*)(ATS...), pF&gt; {\n    // Code\n};\n</code></pre>\n\n<p>which forces you to repeat the function name (if you don't manually type its signature)</p>\n\n<pre><code>wrapper&lt;decltype(&amp;add), &amp;add&gt;::reg(L, \"add\");\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5608504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d24ef15c9ca00261ec96dff0d1d74cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/5608504/robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1687, "favorite_count": 1, "accepted_answer_id": 39132174, "answer_count": 1, "score": 2, "last_activity_date": 1556141380, "creation_date": 1472065232, "question_id": 39131137, "link": "https://stackoverflow.com/questions/39131137/function-pointer-as-template-argument-and-signature", "title": "Function pointer as template argument and signature", "body": "<p>Can I pass a \"general\" function pointer as an template argument with it's signature? I know that I can pass the function signature to a template:</p>\n\n<pre><code>template&lt;typename signature&gt;\nstruct wrapper;\n\ntemplate&lt;typename RT, typename... ATs&gt;\nstruct wrapper&lt;RT (ATs...)&gt; {};\n\nint f(int, double)\n\nwrapper&lt;decltype(f)&gt; w;\n</code></pre>\n\n<p>I also can pass an function pointer as a non-type template argument:</p>\n\n<pre><code>   template&lt;int (*pF)(int, double)&gt; myTemp() {\n      pf(1, 1.0);\n   }\n\n   myTemp&lt;f&gt;();\n</code></pre>\n\n<p>What I would like to do is something like this</p>\n\n<pre><code>   template&lt;typename RT (*pF)(typename ATs...)&gt;\n</code></pre>\n\n<p>Is this possible? The function pointer must be passed as a template argument and must not be passed as a function parameter.</p>\n\n<hr>\n\n<p>I want to use the template to wrap c functions and make them callable from lua. The following code works (c++14, gcc, lua-5.3), but could be improved.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nextern \"C\"  {\n#include &lt;lua.h&gt;\n#include &lt;lualib.h&gt;\n#include &lt;lauxlib.h&gt;\n}\n\nusing namespace std;\n\nint add(int i, int j) {\n    cout &lt;&lt; \"adding \" &lt;&lt; i &lt;&lt; \" to \" &lt;&lt; j &lt;&lt; \".\" &lt;&lt; endl;\n    return i + j;\n}\n\nint sub(int i, int j) {\n    cout &lt;&lt; \"subtracting \" &lt;&lt; j &lt;&lt; \" from \" &lt;&lt; i &lt;&lt; \".\" &lt;&lt; endl;\n    return i - j;\n}\n\n// ****************************\n\ntemplate&lt;typename signature&gt;\nstruct wrapper;\n\ntemplate&lt;typename RT, typename... ATs&gt;\nstruct wrapper&lt;RT (ATs...)&gt; {\n\n    template&lt;RT (*pF)(ATs...)&gt;\n    void reg(lua_State *L, const char*n) {\n        auto lw = [](lua_State *L) -&gt; RT {\n            lua_pushnumber(L, call&lt;0&gt;(pF, L));\n            return 1;\n        };\n        lua_pushcfunction(L, lw);\n        lua_setglobal(L, n);\n    }\n\n    template&lt;int i, typename... ETs&gt;\n    static\n    typename std::enable_if&lt;i != sizeof...(ATs), RT&gt;::type\n    call(RT (*f)(ATs...), lua_State *L, ETs... Es) {\n        auto arg = lua_tonumber(L, i+1);\n        return call&lt;i+1&gt;(f, L, Es..., arg);\n    }\n\n    template&lt;int i, typename... ETs&gt;\n    static\n    typename std::enable_if&lt;i == sizeof...(ATs), RT&gt;::type\n    call(RT (*f)(ATs...), lua_State *L, ETs... Es) {\n        return f(Es...);\n    }\n\n};\n\n#define regLua(L, fct, str) wrapper&lt;decltype(fct)&gt;().reg&lt;fct&gt;(L, str)\n\nint main() {\n    lua_State *L = luaL_newstate();\n    luaL_openlibs(L);\n\n    luaL_dostring(L, \"print(\\\"Hello World!\\\")\");\n\n    // Ugly: add must be passed two times! Not a very userfriendly syntax.\n    wrapper&lt;decltype(add)&gt;().reg&lt;add&gt;(L, \"add\");\n    // Looks better, but uses a macro...\n    regLua(L, sub, \"sub\");\n    // optimal (but possible??):\n    // wrap&lt;sub&gt;(L, \"sub\");\n\n    luaL_dostring(L, \"print(\\\"add:\\\", add(3, 5))\");\n    luaL_dostring(L, \"print(\\\"sub:\\\", sub(3, 5))\");\n\n    lua_close(L);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2013", "visual-studio-2015", "release-mode"], "comments": [{"owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "edited": false, "score": 1, "creation_date": 1472064303, "post_id": 39130837, "comment_id": 65607113, "body": "Show your code. You might be lucky that it was working before/in debug mode."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1472064384, "post_id": 39130837, "comment_id": 65607156, "body": "Probably undefined behaviour, debug the release version of your program."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1472064385, "post_id": 39130837, "comment_id": 65607157, "body": "Usually it means that you&#39;re using an uninitialized variable someplace, but it could be almost anything. Debug builds set uninitialized variables to a known value, but Release builds leave it random."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1472064457, "post_id": 39130837, "comment_id": 65607198, "body": "the pointer could be pointing to random memory in release mode, unlike in debug mode, like @MarkRansom suggested."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1472068940, "post_id": 39130837, "comment_id": 65609530, "body": "<i>EDIT: When I used VS 2013 everything worked fine.</i>  -- Looks like VS 2015 exposed a hidden bug in your VS 2013 version of your app .  Be thankful."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1472064671, "creation_date": 1472064671, "answer_id": 39130976, "question_id": 39130837, "link": "https://stackoverflow.com/questions/39130837/app-works-properly-in-debug-mode-but-release-mode-shows-error/39130976#39130976", "title": "App works properly in DEBUG mode, but RELEASE mode shows error", "body": "<p>You should post your code if you want a proper answer. Without it, all I (we) can do is guess.</p>\n\n<p>In any case; there are <em>many</em> differences between release and debug mode. Apart from enabling/disabling optimizations, local variables are often zero initialized (or default initialized) in debug builds, but since that is not mandated by the standard, release builds (optimized ones) don't bother, since it's costly. That's just one example - there are more - but it's the one I'm <em>guessing</em> is biting you.</p>\n\n<p>In any case; it seems your program contains undefined behaviour - which basically means you can't trust it to do <em>anything</em> right, and the optimizing compiler is just exploiting that a lot more than it does in debug mode.</p>\n\n<p>Don't write broken programs containing undefined behaviour! It <em>will</em> bite.</p>\n"}], "owner": {"reputation": 181, "user_id": 3240979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0d63e06157c4e55ecbcce8069753120?s=128&d=identicon&r=PG&f=1", "display_name": "Beks", "link": "https://stackoverflow.com/users/3240979/beks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1472065765, "creation_date": 1472064193, "last_edit_date": 1472065765, "question_id": 39130837, "link": "https://stackoverflow.com/questions/39130837/app-works-properly-in-debug-mode-but-release-mode-shows-error", "title": "App works properly in DEBUG mode, but RELEASE mode shows error", "body": "<p>Recently I migrated my application from Visual Studio 2013 to Visual Studio 2015. Everything works fine in DEBUG mode, but if I switch to RELEASE mode this error is popped up: \"Unhandled exception at 0x773F7FB2 (ucrtbase.dll) in MyApp.exe: An invalid parameter was passed to a function that considers invalid parameters fatal\" (In my application I passed a pointer-to-list). What might be the reason for this error? \nEDIT: \nWhen I used VS 2013 everything worked fine. Isn't it the problem with VS 2015? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 4, "creation_date": 1472063837, "post_id": 39130701, "comment_id": 65606847, "body": "That&#39;s 7 digits of <b>precision</b>, not <b>range</b>."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472063997, "post_id": 39130701, "comment_id": 65606932, "body": "Maybe I&#39;m stupid, but can you give to me an example to get it? What&#39;s the min (positive) value?"}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1472064047, "post_id": 39130701, "comment_id": 65606957, "body": "And 9 is the max, not 7. <a href=\"http://stackoverflow.com/a/13543600/1241334\">stackoverflow.com/a/13543600/1241334</a>"}, {"owner": {"reputation": 1891, "user_id": 995218, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZKQoe.jpg?s=128&g=1", "display_name": "atkins", "link": "https://stackoverflow.com/users/995218/atkins"}, "edited": false, "score": 0, "creation_date": 1472064110, "post_id": 39130701, "comment_id": 65607003, "body": "This is probably a more useful wiki page to start with <a href=\"https://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Floating_point</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1472064131, "post_id": 39130701, "comment_id": 65607011, "body": "Floating-point types are (almost always) represented using binary, not decimal. The value <code>0.0000001</code> typically can&#39;t even be represented exactly. The number of &quot;decimal digits&quot; it can represent is just a user-friendly way of talking about how precise they are. Also, the exact values can vary from one implementation to another, though IEEE representation is nearly universal these days."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1472064341, "post_id": 39130701, "comment_id": 65607137, "body": "@JonnyHenly - The linked answer is somewhat misleading.  The precision is constant, but the number of decimal digits required to uniquely identify particular <code>float</code> values does vary."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1472064793, "post_id": 39130701, "comment_id": 65607403, "body": "Even though your number might have 38 or 45 digits in it, only 7 of them will be correct - less if it&#39;s denormal."}], "answers": [{"comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1472064965, "post_id": 39130975, "comment_id": 65607490, "body": "This doesn&#39;t answer the question (i.e. the confusion about precision vs. range)."}], "tags": [], "owner": {"reputation": 115, "user_id": 1242063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b6285e79dbe9c913239a050a2b4f38?s=128&d=identicon&r=PG", "display_name": "fuentessifuentes", "link": "https://stackoverflow.com/users/1242063/fuentessifuentes"}, "is_accepted": false, "score": -2, "last_activity_date": 1472064669, "creation_date": 1472064669, "answer_id": 39130975, "question_id": 39130701, "link": "https://stackoverflow.com/questions/39130701/min-positive-value-for-float/39130975#39130975", "title": "Min positive value for float?", "body": "<p>It has to be distinguished between the internal representation and the format. </p>\n\n<p>In the internal representation Floating-point numbers are typically packed as sign bit, the exponent field, and the significand or mantissa, from left to right. This representation is defined for the range you mentioned (mathematical limit)</p>\n\n<p>The format defines the \"external\" representation and is limited to the available space and thereby to the precision of the data type e.g. float about 7 digits (technical limit).</p>\n"}, {"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 8, "last_activity_date": 1472580829, "last_edit_date": 1472580829, "creation_date": 1472573208, "answer_id": 39232328, "question_id": 39130701, "link": "https://stackoverflow.com/questions/39130701/min-positive-value-for-float/39232328#39232328", "title": "Min positive value for float?", "body": "<p>A floating point number consists of 3 parts: a sign, a fraction, and an exponent. These are all integers, and they're combined to get a real number:\n(-1)<sup>sign</sup> \u00d7 (fraction \u00d7 2<sup>-23</sup>) \u00d7 2<sup>exponent</sup></p>\n\n<p>The Wikipedia article uses a binary number with a decimal point for the fraction, but I find it clearer to think of it as an integer multiplied by a fixed constant. Mathematically it's the same.</p>\n\n<p>The fraction is 23 bits, but there's an extra hidden bit that makes it a 24-bit value. The largest integer that can be represented in 24 bits is 16777215, which has just over 7 decimal digits. This defines the <em>precision</em> of the format.</p>\n\n<p>The exponent is the magic that expands the <em>range</em> of the numbers beyond what the precision can hold. There are 8 bits to hold the exponent, but a couple of those values are special. The value 255 is reserved for infinities and Not-A-Number (NAN) representations, which aren't real numbers and don't follow the formula given above. The value 0 represents the denormal range, which are called that because the hidden bit of the fraction is 0 rather than 1 - it's not normalized. In this case the exponent is always <code>-126</code>. Note that the precision of denormal numbers declines as the fraction gets smaller, because it has fewer digits. For all the other bit patterns 1-254, the hidden bit of the fraction is 1 and the exponent is <code>bits-127</code>. You can see the details at the Wikipedia section on <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format#Exponent_encoding\" rel=\"noreferrer\">exponent encoding</a>.</p>\n\n<p>The smallest positive denormal number is (-1)<sup>0</sup> \u00d7 (1 \u00d7 2<sup>-23</sup>) \u00d7 2<sup>-126</sup>, or 1.4e-45.</p>\n\n<p>The smallest positive normalized number is (-1)<sup>0</sup> \u00d7 (0x800000 \u00d7 2<sup>-23</sup>) \u00d7 2<sup>(1 - 127)</sup>, or 1.175494e-38.</p>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7901, "favorite_count": 3, "answer_count": 2, "score": 7, "last_activity_date": 1472580829, "creation_date": 1472063749, "question_id": 39130701, "link": "https://stackoverflow.com/questions/39130701/min-positive-value-for-float", "title": "Min positive value for float?", "body": "<p>I'm new to C++!</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"noreferrer\">Wiki says</a> this about <code>float</code>: The minimum positive normal value is 2^\u2212126 \u2248 1.18 \u00d7 10^\u221238 and the minimum positive (denormal) value is 2^\u2212149 \u2248 1.4 \u00d7 10^\u221245.</p>\n\n<p>But if a float can have max 7 digit (<code>\u2248 7.225</code>), the min is it not just <code>0,0000001</code>? I'm confused :)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472062396, "post_id": 39130296, "comment_id": 65606025, "body": "I think that you aren&#39;t passing enough arguments."}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 1, "creation_date": 1472062409, "post_id": 39130296, "comment_id": 65606034, "body": "You have 9 % arguments in your string and ony 8 data elements in the list"}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1472098121, "post_id": 39130296, "comment_id": 65617912, "body": "Up voting because you use the compiler switch!"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1472139267, "post_id": 39130296, "comment_id": 65642130, "body": "I&#39;m guessing the missing parameter is the one corresponding to <code>m=%7.2f</code>.  Just a hunch, based off the names..."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1472063934, "post_id": 39130334, "comment_id": 65606904, "body": "Specifically, going by the variable names and the prefixes in the format string, it looks like he&#39;s missing the argument that should be printed with <code>m=%7.2f</code>."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1472069254, "post_id": 39130334, "comment_id": 65609680, "body": "@Barmar Such effort! I was going to let the asker work that out. You are so above and beyond!"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 3, "last_activity_date": 1472062406, "creation_date": 1472062406, "answer_id": 39130334, "question_id": 39130296, "link": "https://stackoverflow.com/questions/39130296/warning-more-conversions-than-data-arguments-wformat-c/39130334#39130334", "title": "warning: more &#39;%&#39; conversions than data arguments [-Wformat] C++", "body": "<p>You have 9 format specifiers and only 8 following <code>printf</code> arguments.</p>\n\n<p>The warning explains itself. It is good that you have not ignored this, because the resulting behavior of this call is <em>undefined</em>. </p>\n\n<p>To fix this either add the extra argument or remove one of the format specifiers (<code>%</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1472139668, "creation_date": 1472139668, "answer_id": 39149493, "question_id": 39130296, "link": "https://stackoverflow.com/questions/39130296/warning-more-conversions-than-data-arguments-wformat-c/39149493#39149493", "title": "warning: more &#39;%&#39; conversions than data arguments [-Wformat] C++", "body": "<p>Your error becomes more evident if you align the format specifiers with their arguments:</p>\n\n<pre><code>fprintf(fitxer_sortida,\n        \"blob %d\"  \" -&gt;\\t a=%7.0f\"   \"\\t p=%8.2f\"    \" (%8.2f extern)\\t \"  \"pconvex=%8.2f\\t \"   \"ext=%.0f\\t \"  \"m=%7.2f\\t \"  \"c=%3.2f\\t \"    \"l=%8.2f\\n\",\n        i,          area[i],          perimetre[i],  externPerimeter[i],   perimetreConvex[i],  exterior[i],   /* oops */    compacitat[i],   longitud[i]);\n</code></pre>\n\n<p>This does lead to long lines - if you don't like that, consider making more than one call to <code>fprintf()</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6580029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897c659bec6d63dc21cd32674a8ada42?s=128&d=identicon&r=PG&f=1", "display_name": "Johrdon", "link": "https://stackoverflow.com/users/6580029/johrdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2832, "favorite_count": 0, "accepted_answer_id": 39130334, "answer_count": 2, "score": -2, "last_activity_date": 1472139668, "creation_date": 1472062312, "last_edit_date": 1472069415, "question_id": 39130296, "link": "https://stackoverflow.com/questions/39130296/warning-more-conversions-than-data-arguments-wformat-c", "title": "warning: more &#39;%&#39; conversions than data arguments [-Wformat] C++", "body": "<p>I have this code:</p>\n\n<pre><code>    fprintf( fitxer_sortida, \"blob %d -&gt;\\t a=%7.0f\\t p=%8.2f (%8.2f extern)\\t pconvex=%8.2f\\t ext=%.0f\\t m=%7.2f\\t c=%3.2f\\t l=%8.2f\\n\",\n                 i, area[i], perimetre[i], externPerimeter[i], perimetreConvex[i], exterior[i], compacitat[i], longitud[i] );\n</code></pre>\n\n<p>and I receive the error: </p>\n\n<pre><code>warning: more '%' conversions than data arguments [-Wformat]\n</code></pre>\n\n<p>What is the cause of this?</p>\n"}, {"tags": ["c++", "cmake", "cross-compiling"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1472064528, "post_id": 39130265, "comment_id": 65607242, "body": "Show us some minimal code, what module are you using that has undocumented stuff?"}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1472065068, "post_id": 39130265, "comment_id": 65607545, "body": "well, I just mean that CMAKE_REQUIRED_FLAGS isn&#39;t documented, in the public documentation, only at the start of those cmake (internal) module files."}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1472111512, "post_id": 39130265, "comment_id": 65623556, "body": "My recommendation would be to update to CMake 3.6 and add <code>set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)</code>. Also see <a href=\"http://stackoverflow.com/questions/38700198/how-to-partially-disabling-cmake-c-c-custom-compiler-checking\">here</a> and <a href=\"http://stackoverflow.com/questions/37931068/tell-cmake-to-use-c-compiler-for-c-files-coming-from-cmake\">here</a>."}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "reply_to_user": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1472135862, "post_id": 39130265, "comment_id": 65639951, "body": "@Florian - solves my problem - add it as an answer and I&#39;ll accept."}], "answers": [{"tags": [], "owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "is_accepted": true, "score": 2, "last_activity_date": 1472152596, "last_edit_date": 1495541312, "creation_date": 1472152596, "answer_id": 39153136, "question_id": 39130265, "link": "https://stackoverflow.com/questions/39130265/cmake-cmake-required-flags-and-flags-that-start-with-d/39153136#39153136", "title": "cmake: CMAKE_REQUIRED_FLAGS and flags that start with &quot;/D&quot;", "body": "<p><em>Turning my comment into an answer</em></p>\n\n<p>Please don't use internal CMake commands. My recommendation in your case - <code>try_compile</code> not working in cross-compiling environment and the linker is throwing errors - is to update to CMake 3.6 and add</p>\n\n<pre><code>set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)\n</code></pre>\n\n<p>Then CMake's <code>try_compile</code> will only try static library linking (and not an executable).</p>\n\n<p><strong>References</strong></p>\n\n<ul>\n<li><a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_TRY_COMPILE_TARGET_TYPE.html\" rel=\"nofollow noreferrer\"><code>CMAKE_TRY_COMPILE_TARGET_TYPE</code></a></li>\n<li><a href=\"https://stackoverflow.com/questions/38700198/how-to-partially-disabling-cmake-c-c-custom-compiler-checking\">How to partially disabling cmake C/C++ custom compiler checking</a></li>\n<li><a href=\"https://stackoverflow.com/questions/37931068/tell-cmake-to-use-c-compiler-for-c-files-coming-from-cmake\">Tell CMake to use C++ compiler for C files coming from CMake?</a></li>\n</ul>\n"}], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 39153136, "answer_count": 1, "score": 0, "last_activity_date": 1472152596, "creation_date": 1472062193, "last_edit_date": 1472065011, "question_id": 39130265, "link": "https://stackoverflow.com/questions/39130265/cmake-cmake-required-flags-and-flags-that-start-with-d", "title": "cmake: CMAKE_REQUIRED_FLAGS and flags that start with &quot;/D&quot;", "body": "<p>I am trying to cross compile a library with CMake. The target platform is non-standard. The library several <code>try_compile</code> commands. In particular, the ones inside CheckTypeSize.cmake are failing. To have the compilation succeed, I need to change the flags and link libraries that those <code>try_compile</code> command uses (and I do not want to modify the CMake installation). It seems as though the (undocumented) <code>CMAKE_REQUIRED_LIBRARIES</code> and <code>CMAKE_REQUIRED_FLAGS</code> are used within that module. In the toolchain file, I do:</p>\n\n<pre><code>set(CMAKE_REQUIRED_FLAGS \"/DLL\")\n</code></pre>\n\n<p>Unfortunately, I want to set a flag that starts with <code>/D</code> (in this case <code>/DLL</code>). When I do this, the variable gets translated into <code>/D LL</code>. Is there any way to indicate to CMake that the string shouldn't be parsed into a compile define?</p>\n"}, {"tags": ["c++", "windows", "c++11", "mfc"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5139619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/985c8fe846c8c64fab9b300616578cdb?s=128&d=identicon&r=PG&f=1", "display_name": "basjak", "link": "https://stackoverflow.com/users/5139619/basjak"}, "edited": false, "score": 0, "creation_date": 1472133046, "post_id": 39134220, "comment_id": 65638027, "body": "You made an amazing explanation. Thank you."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1472081968, "last_edit_date": 1472081968, "creation_date": 1472079330, "answer_id": 39134220, "question_id": 39130256, "link": "https://stackoverflow.com/questions/39130256/mfc-openfilename-structure-m-ofn-lpstrcustomfilter/39134220#39134220", "title": "MFC, OPENFILENAME structure: m_ofn.lpstrCustomFilter", "body": "<p>According to the <a href=\"https://msdn.microsoft.com/en-gb/library/windows/desktop/ms646839.aspx\" rel=\"nofollow\"><code>OPENFILENAME</code></a> documentation:</p>\n\n<blockquote>\n  <p><strong>lpstrCustomFilter</strong><br>\n  Type: <strong>LPTSTR</strong><br>\n  A static buffer that contains a pair of null-terminated filter strings for preserving the filter pattern chosen by the user. The first string is your display string that describes the custom filter, and the second string is the filter pattern selected by the user. The first time your application creates the dialog box, you specify the first string, which can be any nonempty string. When the user selects a file, the dialog box copies the current filter pattern to the second string. The preserved filter pattern can be one of the patterns specified in the <strong>lpstrFilter</strong> buffer, or it can be a filter pattern typed by the user. The system uses the strings to initialize the user-defined file filter the next time the dialog box is created. If the <strong>nFilterIndex</strong> member is zero, the dialog box uses the custom filter. </p>\n  \n  <p>If this member is <strong>NULL</strong>, the dialog box does not preserve user-defined filter patterns.</p>\n  \n  <p>If this member is not <strong>NULL</strong>, the value of the <strong>nMaxCustFilter</strong> member must specify the size, in characters, of the <strong>lpstrCustomFilter</strong> buffer.</p>\n  \n  <p><strong>nMaxCustFilter</strong><br>\n  Type: <strong>DWORD</strong><br>\n  The size, in characters, of the buffer identified by <strong>lpstrCustomFilter</strong>. This buffer should be at least 40 characters long. This member is ignored if <strong>lpstrCustomFilter</strong> is <strong>NULL</strong> or points to a <strong>NULL</strong> string.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>TCHAR szfilter[256] = TEXT(\"custom filter\\0*.ext\\0\");\n\n...\n\nm_ofn.lpstrCustomFilter = szFilter;\nm_ofn.nMaxCustFilter = 256;\nm_ofn.nFilterIndex = 0;\n</code></pre>\n\n<p>The documentation implies that when the dialog is first shown and <code>nFilterIndex</code> is 0, the initial filter specified by <code>lpstrCustomFilter</code> is active, even if it is different than the filters specified by <code>lpstrFilter</code>.  If the user then selects/enters a different filter, <code>szfilter</code> is updated to contain the user's selected filter.  This allows you to save <code>szFilter</code> so that next time you display the dialog, you could initialize the dialog with the user's last selected filter, if desired.</p>\n\n<p>And in practice, this works fine in XP and earlier.</p>\n\n<p>In Windows 7 (and probably Vista) and later, <code>GetOpenFileName()</code> <strong>DOES NOT</strong> behave like this anymore, no matter how the <code>OPENFILENAME</code> is configured.  <code>GetOpenFileName()</code> simply ignores <code>lpstrCustomFilter</code>, never applies the initial custom filter, and never overwrites the <code>szFilter</code> buffer.  This implies that <code>lpstrCustomFilter</code> is now deprecated and no longer used, and setting <code>nFilterIndex=0</code> will silently be promoted to <code>nFilterIndex=1</code>.  Which might explain why all of the examples just set <code>lpstrCustomFilter</code> to <code>NULL</code>.</p>\n\n<p>The reason for this change in behavior is because <code>GetOpenFileName()</code> is deprecated, it is now a wrapper for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776913.aspx\" rel=\"nofollow\"><code>IFileOpenDialog</code></a> for backwards compatibility with legacy code.  <code>IFileOpenDialog</code> does not support preserving user-specified filters, it only works with application-defined filters.  There is no API in the newer dialog for setting or retrieving user-specified filters, so Microsoft clearly did not make the <code>GetOpenFileName()</code> wrapper try to simulate the old <code>lpstrCustomFilter</code> functionality within the newer dialog.</p>\n\n<p>You could try to simulate the old <code>lpstrCustomFilter</code> behavior manually by using <code>lpstrFilter</code> instead.  Create an extra entry for <code>custom filter</code>. If the user has previously selected a file, initialize that entry with the selected file's extension, and set <code>nFilterIndex</code> to the 1-based index of that entry. Then, when the dialog is closed, extract the user's actual selected file extension using <code>lpstrFile</code> and <code>nFileExtension</code> and save it so you can initialize the <code>custom filter</code> entry later.</p>\n"}], "owner": {"reputation": 83, "user_id": 5139619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/985c8fe846c8c64fab9b300616578cdb?s=128&d=identicon&r=PG&f=1", "display_name": "basjak", "link": "https://stackoverflow.com/users/5139619/basjak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 1, "accepted_answer_id": 39134220, "answer_count": 1, "score": 1, "last_activity_date": 1527695408, "creation_date": 1472062154, "last_edit_date": 1472077535, "question_id": 39130256, "link": "https://stackoverflow.com/questions/39130256/mfc-openfilename-structure-m-ofn-lpstrcustomfilter", "title": "MFC, OPENFILENAME structure: m_ofn.lpstrCustomFilter", "body": "<p>I'm just trying to figure out how to use <code>m_ofn.lpstrCustomFilter</code> in MFC's <code>CFileDialog</code>.</p>\n\n<p>The internal structure is a <code>OPENFILENAME</code>.</p>\n\n<p>I need a practical example, as all examples I have found are setting <code>lpstrCustomFilter</code> to NULL.</p>\n"}, {"tags": ["c++", "class", "enums"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1472062371, "post_id": 39130205, "comment_id": 65606010, "body": "@crashmstr ^ Similar"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472062475, "post_id": 39130205, "comment_id": 65606076, "body": "But according to &#182;9.4.3 of Bjarne Stoustrup&#39;s book, PPP 4th edition: The compiler doesn&#39;t care about order of class function and data members; It takes the declarations in any order you care to present them. Does an enum class violate this?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 4, "creation_date": 1472062476, "post_id": 39130205, "comment_id": 65606077, "body": "@LogicStuff You <i>can</i> actually forward declare <i>strongly typed enum</i>s (&quot;enum class&quot;) in C++11 and later.."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472062594, "post_id": 39130205, "comment_id": 65606131, "body": "So Im confused, can I do it or not? Is this a bug?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1472062629, "post_id": 39130205, "comment_id": 65606150, "body": "<b><i>Is this a bug?</i></b> It is not a bug. An enum is not a class function or data member."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1472063387, "post_id": 39130205, "comment_id": 65606598, "body": "@ArnavBorborah That quote is a bit oversimplified.  Within inline function <code>{}</code> braces or within member initializers, the compiler takes the whole class definition into account.  Otherwise, like in the declaration of a function, all names must be previously declared."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472064227, "post_id": 39130205, "comment_id": 65607068, "body": "hmmmm.... I have to think about this, a point to ponder...."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472608943, "post_id": 39130205, "comment_id": 65816253, "body": "Why was this downvoted?"}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472063809, "post_id": 39130522, "comment_id": 65606832, "body": "I don&#39;t think a forward declaration (<code>enum class Origin;</code>) would do. Both <code>Origin</code> and <code>Origin::Top_Left</code> need to be visible."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472063994, "post_id": 39130522, "comment_id": 65606927, "body": "You may be right - sounds plausible. I admit I didn&#39;t actually check in this case."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472064005, "post_id": 39130522, "comment_id": 65606936, "body": "And the problematic part is <code>Origin::Top_Left</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472064177, "post_id": 39130522, "comment_id": 65607035, "body": "Updated answer. Thank you for the feedback guys (gals)."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472064262, "post_id": 39130522, "comment_id": 65607084, "body": "Then how come when declaring integers at the bottom of a class doesn&#39;t create same error? Eg like this: <code>class A {public: A(int aa) : a{aa} {} &#47;&#47;.... private: int a;};</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472064813, "post_id": 39130522, "comment_id": 65607416, "body": "<code>int</code> is a built-in/known type. Not a user-defined one."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 2, "last_activity_date": 1472064136, "last_edit_date": 1472064136, "creation_date": 1472063086, "answer_id": 39130522, "question_id": 39130205, "link": "https://stackoverflow.com/questions/39130205/declaring-enum-at-beginning-of-class-vs-end/39130522#39130522", "title": "Declaring enum at beginning of class vs end", "body": "<p>In your second example you are using the enumeration before it is declared.\nYou need to either declare it before first use (in the constructor) or add a forward declaration before first use (not going to fly here, but would in other scenarios).</p>\n\n<p>The compiler needs to know what <code>Origin</code> and <code>Origin::Top_Left</code> is before its use in <code>Coord(Origin origin = Origin::Top_Left)</code>.\nRemember; the compiler parses your code from the top down. It needs to know what types <em>are</em> before they are used. It <em>does not</em> view the entire compilation unit in a holistic fassion. The language just works like that - \"must know what stuff is before stuff is used and I read from the top-down in every file\". Sometimes \"knowing stuff\" needs to be the full definition, sometimes a forward declaration is enough (details of that are outside the scope of this question).</p>\n"}], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 39130522, "answer_count": 1, "score": 0, "last_activity_date": 1472064136, "creation_date": 1472061966, "question_id": 39130205, "link": "https://stackoverflow.com/questions/39130205/declaring-enum-at-beginning-of-class-vs-end", "title": "Declaring enum at beginning of class vs end", "body": "<p>Take the following 2 examples below:</p>\n\n<pre><code>struct Coord\n{\nprivate:\n    enum class Origin\n    {\n        Top_Left = 0,\n        Center\n    };\npublic:\n    Coord(Origin origin = Origin::Top_Left) \n    {}\n};\n\n\nint main()\n{\n}\n</code></pre>\n\n<p>Running this above, I get no errors. On the other hand, when I run this, I get the following error.</p>\n\n<pre><code>struct Coord\n{\npublic:\n    Coord(Origin origin = Origin::Top_Left) \n    {}\nprivate:\n    enum class Origin\n    {\n        Top_Left = 0,\n        Center\n    };\n};\n\n\nint main()\n{\n}\n</code></pre>\n\n<blockquote>\n  <p>7:16: error: expected ')' before 'origin'</p>\n</blockquote>\n\n<p>In addition, in Visual Studio 2015, I get the error for identifier <code>Origin</code> not being found in the constructor.</p>\n\n<p>Why is this?</p>\n\n<p>Error here: <kbd><a href=\"http://cpp.sh/3vvuo\" rel=\"nofollow\">Live Example</a></kbd></p>\n"}, {"tags": ["c++", "c++11", "c++14", "nan", "cmath"], "comments": [{"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1472061498, "post_id": 39130040, "comment_id": 65605539, "body": "Is Clang using libc++, or the same libstdc++ that gcc is?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1472061696, "post_id": 39130040, "comment_id": 65605645, "body": "@ildjarn <code>ldd</code> says it&#39;s the same (<code>&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libstdc++.so.6</code>). I&#39;ve edited the question to remove the clang part."}, {"owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "edited": false, "score": 0, "creation_date": 1472061746, "post_id": 39130040, "comment_id": 65605683, "body": "Weird problem.. What if you swap strings including cmath and math.h? As for me, I&#39;m avoiding usage of c* headers like cmath"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "edited": false, "score": 0, "creation_date": 1472061785, "post_id": 39130040, "comment_id": 65605702, "body": "@AntonMalyshev are you asking about order of inclusion? That makes no difference."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1472061849, "post_id": 39130040, "comment_id": 65605733, "body": "What version of the compilers are you using?  I cannot reproduce with <a href=\"http://coliru.stacked-crooked.com/a/79a28e0056232dd1\" rel=\"nofollow noreferrer\">g++</a> or <a href=\"http://coliru.stacked-crooked.com/a/393e772c6846ef3c\" rel=\"nofollow noreferrer\">clang</a> on coliru."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "edited": false, "score": 0, "creation_date": 1472061871, "post_id": 39130040, "comment_id": 65605746, "body": "@AntonMalyshev can&#39;t avoid the usage of the c* headers - this is old code which needs to be built as part of a larger codebase built using newer standards"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472061983, "post_id": 39130040, "comment_id": 65605804, "body": "@NathanOliver I&#39;m using <code>g++ 5.4.0</code>. glibc version is <code>2.23</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472062147, "post_id": 39130040, "comment_id": 65605898, "body": "hmm.  Apparently coliru uses ldd (Ubuntu EGLIBC 2.15-0ubuntu10.13) 2.15"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472062222, "post_id": 39130040, "comment_id": 65605941, "body": "@NathanOliver following your comment I tried on <a href=\"http://melpon.org/wandbox\" rel=\"nofollow noreferrer\">Wandbox</a>. It doesn&#39;t have <code>gcc-5.4.0</code> but it does have <code>5.3.0</code> and <code>6.1.0</code>, and I can&#39;t replicate on either... Very strange!"}, {"owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 0, "creation_date": 1472062258, "post_id": 39130040, "comment_id": 65605953, "body": "Don&#39;t use both cmath and math.h..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472062421, "post_id": 39130040, "comment_id": 65606039, "body": "It looks like it may be a bug with the library.  <a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a> fails 4.9.2 through 5.3 but works on 6.1"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 0, "creation_date": 1472062439, "post_id": 39130040, "comment_id": 65606050, "body": "@Ven, I&#39;m not. The code in question uses <code>math.h</code>. However, I assume some other include is including something which is including something which ultimately includes <code>cmath</code>, so both are in scope. Hence the compile failure, and hence me writing this small app to diagnose what is happening"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472062609, "post_id": 39130040, "comment_id": 65606139, "body": "@NathanOliver that&#39;s very interesting! <a href=\"http://gcc.godbolt.org\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a> fails to compile for 5.3, while <a href=\"http://melpon.org/wandbox\" rel=\"nofollow noreferrer\">wandbox</a> works for 5.3."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472062907, "post_id": 39130040, "comment_id": 65606314, "body": "Very bizarre.  It will be interesting to see what the cause of this inconsistency is.  Sorry I could only confuse the problem more :)"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472063174, "post_id": 39130040, "comment_id": 65606471, "body": "@NathanOliver no, thanks for helping confirm I&#39;m not crazy! I&#39;ll have a look on bugzilla and see if I can find anything"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472063307, "post_id": 39130040, "comment_id": 65606546, "body": "@NathanOliver I&#39;ve run this on Centos gcc-4.9.1 and gcc-5.2.1 and it works on both. Running it on Ubuntu gcc-4.9.3 works, but gcc-5.4.0 doesn&#39;t. Given godbolt fails for some, but wandbox doesn&#39;t... well, I&#39;m not sure what to think?!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1472070652, "post_id": 39130040, "comment_id": 65610342, "body": "@SteveLorimer If you do not find something out in a couple days give me a ping and I will place a bounty.  I would really love to know what is going on."}], "answers": [{"comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 1, "creation_date": 1472066331, "post_id": 39131338, "comment_id": 65608165, "body": "I can compile both <code>std::isnan</code> and <code>isnan</code> on <code>gcc-6.1</code> on <a href=\"https://godbolt.org/g/eTRVmF\" rel=\"nofollow noreferrer\">godbolt</a>"}, {"owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "edited": false, "score": 1, "creation_date": 1472071991, "post_id": 39131338, "comment_id": 65610981, "body": "If it were problem with undef, the order of including would matter, but it doesn&#39;t matter"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "reply_to_user": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "edited": false, "score": 3, "creation_date": 1472073144, "post_id": 39131338, "comment_id": 65611508, "body": "@AntonMalyshev : Why would the order matter? <code>cmath</code> will almost always include <code>math.h</code>, which will have a header guard \u2013 it will always be included once, and only once."}], "tags": [], "owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "is_accepted": false, "score": 3, "last_activity_date": 1472065961, "creation_date": 1472065961, "answer_id": 39131338, "question_id": 39130040, "link": "https://stackoverflow.com/questions/39130040/cmath-hides-isnan-in-math-h-in-c14-c11/39131338#39131338", "title": "&lt;cmath&gt; hides isnan in &lt;math.h&gt; in C++14 / C++11?", "body": "<p>A lot of the functions inside <code>math.h</code> are actually macros. Since this is not idiomatic c++ the header <code>cmath</code> contains following code:</p>\n\n<pre><code>    ...\n    #undef isinf\n    #undef isnan\n    #undef isnormal\n    ...\n</code></pre>\n\n<p>And implements then all those undefined macros as function in the <code>namespace std</code>. This is at least true for gcc 6.1.1. That's why your compiler can't find <code>isnan</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 9, "last_activity_date": 1472072774, "last_edit_date": 1472072774, "creation_date": 1472071729, "answer_id": 39132787, "question_id": 39130040, "link": "https://stackoverflow.com/questions/39130040/cmath-hides-isnan-in-math-h-in-c14-c11/39132787#39132787", "title": "&lt;cmath&gt; hides isnan in &lt;math.h&gt; in C++14 / C++11?", "body": "<p>If you look inside <code>&lt;cmath&gt;</code> from GCC, it has this:</p>\n\n<pre><code>. . .\n#include &lt;math.h&gt;\n. . .\n#undef isnan\n</code></pre>\n\n<p>That's why the order doesn't matter - whenever you <code>#include &lt;cmath&gt;</code>, <code>&lt;math.h&gt;</code> is auto-included and its contents is (partially) nuked.</p>\n\n<p>Attempting to include it again will have no effect because of <code>#ifndef _MATH_H</code>.</p>\n\n<hr>\n\n<p>Now, what does the standard have to say about this behavior?</p>\n\n<p><a href=\"http://eel.is/c++draft/depr.c.headers\">[depr.c.headers]</a>:</p>\n\n<blockquote>\n  <p>... every C header, each\n  of which has a name of the form <code>name.h</code>, behaves as if each name placed\n  in the standard library namespace by the corresponding c<em>name</em> header is\n  placed within the global namespace scope. It is unspecified whether\n  these names are first declared or defined within namespace scope\n  ([basic.scope.namespace]) of the namespace <code>std</code> and are then injected\n  into the global namespace scope by explicit <em>using-declarations</em>\n  ([namespace.udecl]).</p>\n  \n  <p>[ Example: The header <code>&lt;cstdlib&gt;</code> assuredly provides its declarations\n  and definitions within the namespace <code>std</code>. It <strong><em>may</em></strong> also provide these\n  names within the global namespace. The header <code>&lt;stdlib.h&gt;</code> assuredly\n  provides the same declarations and definitions within the global\n  namespace, much as in the C Standard. It may also provide these names\n  within the namespace <code>std</code>.  \u2014 end example ]</p>\n</blockquote>\n\n<p>So it's OK that <code>&lt;cmath&gt;</code> does not provide <code>isnan</code> in the global namespace.</p>\n\n<p>But it's a gray area what should happen when <em>both</em> are included in one compilation unit, although one could argue that the statement above <em>implies</em> that both versions must interoperate, in which case it would be a bug in GCC/libstdc++ (some versions).</p>\n"}, {"comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1472135798, "post_id": 39133379, "comment_id": 65639902, "body": "@NathanOliver you saw this answer?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 1, "creation_date": 1472224603, "post_id": 39133379, "comment_id": 65681620, "body": "@SteveLorimer I have now.  Thanks T.C. for another great answer."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 20, "last_activity_date": 1472074449, "creation_date": 1472074449, "answer_id": 39133379, "question_id": 39130040, "link": "https://stackoverflow.com/questions/39130040/cmath-hides-isnan-in-math-h-in-c14-c11/39133379#39133379", "title": "&lt;cmath&gt; hides isnan in &lt;math.h&gt; in C++14 / C++11?", "body": "<p>Briefly summarizing the pertinent points, mostly from <a href=\"http://developers.redhat.com/blog/2016/02/29/why-cstdlib-is-more-complicated-than-you-might-think/\">Jonathan Wakely's excellent blog post</a>:</p>\n\n<ul>\n<li>glibc &lt;2.23's <code>math.h</code> declares the obsolete X/Open <code>int isnan(double);</code> that is incompatible with the C99/C++11 version (<code>bool isnan(double);</code>).</li>\n<li>glibc 2.23's <code>math.h</code> fixes this by not declaring the <code>isnan</code> function in C++11 or later.</li>\n<li>All of them still define an <code>isnan</code> macro. <code>#include &lt;cmath&gt;</code> nukes that macro as required by the C++ standard.</li>\n<li>GCC 6's libstdc++ provides its own special <code>math.h</code> header that declares a <code>bool isnan(double);</code> in the global namespace (unless the libc <code>math.h</code> declares the obsolete signature) and also nukes the macros as required by the standard.</li>\n<li>Before GCC 6, <code>#include &lt;math.h&gt;</code> simply included the header from your libc, so the macro isn't nuked.</li>\n<li><code>#include &lt;cmath&gt;</code> always nukes the macros.</li>\n</ul>\n\n<p>Net result, in C++11 mode:</p>\n\n<pre><code>glibc &lt;  2.23, GCC &lt;  6: &lt;math.h&gt; uses the macro; &lt;cmath&gt; uses obsolete signature\nglibc &gt;= 2.23, GCC &lt;  6: &lt;math.h&gt; uses the macro; &lt;cmath&gt; results in error\nglibc &lt;  2.23, GCC &gt;= 6: &lt;math.h&gt; and &lt;cmath&gt; use obsolete signature\nglibc &gt;= 2.23, GCC &gt;= 6: &lt;math.h&gt; and &lt;cmath&gt; use standard signature\n</code></pre>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4603, "favorite_count": 2, "accepted_answer_id": 39133379, "answer_count": 3, "score": 23, "last_activity_date": 1472086245, "creation_date": 1472061382, "last_edit_date": 1592644375, "question_id": 39130040, "link": "https://stackoverflow.com/questions/39130040/cmath-hides-isnan-in-math-h-in-c14-c11", "title": "&lt;cmath&gt; hides isnan in &lt;math.h&gt; in C++14 / C++11?", "body": "<p>I have here a small test app which uses <code>isnan</code> from <code>&lt;math.h&gt;</code>:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    double d = NAN;\n\n    std::cout &lt;&lt; isnan(d) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n<p><strong>Build and run under 3 different standards:</strong></p>\n<blockquote>\n<pre><code>$ g++ -std=c++98 main.cpp; ./a.out\n1\n\n$ g++ -std=c++11 main.cpp; ./a.out\n1\n\n$ g++ -std=c++14 main.cpp; ./a.out\n1\n</code></pre>\n</blockquote>\n<p>Now we also include <code>&lt;cmath&gt;</code>, and test with both <code>isnan</code> and <code>std::isnan</code>:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    double d = NAN;\n\n    std::cout &lt;&lt; std::isnan(d) &lt;&lt; '\\n';\n    std::cout &lt;&lt; isnan(d) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n<p><strong>Build and run:</strong></p>\n<p><em><strong>C++98 works</strong></em></p>\n<blockquote>\n<pre><code>$ g++ -std=c++98 main.cpp; ./a.out\n1\n1\n</code></pre>\n</blockquote>\n<p><em><strong>C++11 and C++14 don't, <code>isnan</code> is not found.</strong></em></p>\n<blockquote>\n<pre><code>$ g++ -std=c++11 main.cpp\nmain.cpp: In function \u2018int main()\u2019:\nmain.cpp:10:25: error: \u2018isnan\u2019 was not declared in this scope\n     std::cout &lt;&lt; isnan(d) &lt;&lt; '\\n';\n                         ^\nmain.cpp:10:25: note: suggested alternative:\nIn file included from main.cpp:3:0:\n/usr/include/c++/5/cmath:641:5: note:   \u2018std::isnan\u2019\n     isnan(_Tp __x)\n     ^\n\n$ g++ -std=c++14 main.cpp\nmain.cpp: In function \u2018int main()\u2019:\nmain.cpp:10:25: error: \u2018isnan\u2019 was not declared in this scope\n     std::cout &lt;&lt; isnan(d) &lt;&lt; '\\n';\n                         ^\nmain.cpp:10:25: note: suggested alternative:\nIn file included from main.cpp:3:0:\n/usr/include/c++/5/cmath:641:5: note:   \u2018std::isnan\u2019\n     isnan(_Tp __x)\n     ^\n</code></pre>\n</blockquote>\n<p>Note the order of inclusion is not important. If I include <code>&lt;cmath&gt;</code> before <code>&lt;math.h&gt;</code> or after, the result is the same.</p>\n<p><strong>Questions</strong></p>\n<ul>\n<li>Why is <code>isnan</code> gone?</li>\n<li>Without having to go back and change old code to compile under the new standard, is there any way to fix this?</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1472058238, "post_id": 39129171, "comment_id": 65603781, "body": "<i>&quot;but potentially messy?&quot;</i> How so?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 3, "creation_date": 1472058243, "post_id": 39129171, "comment_id": 65603784, "body": "Why would option 3 be messy? It looks fine IMO :)"}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472058299, "post_id": 39129171, "comment_id": 65603815, "body": "I guess I was worried about cluttering the header file with struct definitions.  Now that I think about it, it doesn&#39;t seem very messy"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1472058491, "post_id": 39129171, "comment_id": 65603917, "body": "Then there is always the option of using <a href=\"http://stackoverflow.com/questions/8972588/is-the-pimpl-idiom-really-used-in-practice\">the PIMPL idiom</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1472058549, "post_id": 39129171, "comment_id": 65603950, "body": "@RSahu <i>Pimpl</i> is slightly different IMO."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472058674, "post_id": 39129171, "comment_id": 65604015, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, it is different from what the OP has posted about but is similar in the sense that it is another way of encapsulating private data."}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1472061092, "post_id": 39129171, "comment_id": 65605316, "body": "it&#39;s one of C++ design problem IMO. Headers are to hide implementation details, for both distribution/integration and for compilation speed, but in this case your (2) and (3) options are both bad. (2) requires dynamic memory allocation and (3) doesn&#39;t hide implementation details at all. A possible solution could be partial classes, e.g. like in C#"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1472061356, "post_id": 39129171, "comment_id": 65605465, "body": "@RSahu Extended my answer a bit."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 10, "last_activity_date": 1472058284, "creation_date": 1472058284, "answer_id": 39129208, "question_id": 39129171, "link": "https://stackoverflow.com/questions/39129171/where-to-define-struct-only-to-be-used-as-private-member-variable/39129208#39129208", "title": "Where to define struct only to be used as private member variable?", "body": "<p>For the option 2 to compile, <code>_bar</code> should be a pointer. Option 3 is best, since it doesn't pollute namespace.</p>\n"}, {"comments": [{"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 1, "creation_date": 1472058557, "post_id": 39129234, "comment_id": 65603961, "body": "I edited the question to strike the messy portion out.  I was concerned about cluttering the header file with large struct definitions, but I don&#39;t think those concerns are really that valid."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472061756, "post_id": 39129234, "comment_id": 65605690, "body": "@schumacher574 I edited my answer to show you a 4. option (Cleanest may be, regarding of your concerns <i>cluttering the header file ...</i>)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1472062967, "post_id": 39129234, "comment_id": 65606358, "body": "@SergeyA I&#39;ve been thinking about that option, but decided to leave that detail out for clarity. THX for mentioning though. I changed my example to be more compliant what the standards offer."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472063211, "post_id": 39129234, "comment_id": 65606488, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6  unfortunately not all projects that will implement this code have the luxury of a heap, so I can&#39;t go with Pimpl.  I can see the usefulness of the idiom when available, however.  Thanks!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472063313, "post_id": 39129234, "comment_id": 65606552, "body": "@schumacher574 <i>&quot;so I can&#39;t go with Pimpl&quot;</i> You don&#39;t necessarily need a <i>heap</i> (whatever this means) to realize <i>Pimpl</i>. Lookup <i>placement <code>new()</code></i> for instance."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472063661, "post_id": 39129234, "comment_id": 65606752, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Interesting.  So I could allocate on the stack and use a placement new to use the allocated space.  Good tool to know."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472063707, "post_id": 39129234, "comment_id": 65606774, "body": "@schumacher574 TBH I can&#39;t see why you accepted <i>@Sergey</i>&#39;s answer actually? But well ..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472063919, "post_id": 39129234, "comment_id": 65606899, "body": "@schumacher574 To have it residing on <i>the stack</i> (whatever this means), you won&#39;t want a member variable of <code>FooData</code>. So you could use it from a internal anonymous namespace completely. As mentioned from the very 1st time you should elaborate more on your question, what your requirements and concerns are. You&#39;re completely drifting off now."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472064059, "post_id": 39129234, "comment_id": 65606967, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6  simply because at the time of accepting, he was the first to answer and both of yours seemed to make the same statement.  Since then you&#39;ve edited to include the pimpl option, which is nice."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1472064471, "post_id": 39129234, "comment_id": 65607205, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Why would I bring up requirements for heap/stack/bss size in my original question when I wasn&#39;t even aware that they would come into play?  And they aren&#39;t a requirement for every situation.  I&#39;m simply asking you more information about the pimpl idiom you outlined, and how to implement it without declaring objects on the heap."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 1, "creation_date": 1472064744, "post_id": 39129234, "comment_id": 65607376, "body": "@schumacher574 I didn&#39;t knew about your memory requirements as well, when you were asking :P. For having everything instantiated on the <i>&quot;stack&quot;</i> just go for option 3 as mentioned initially."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 5, "last_activity_date": 1472063230, "last_edit_date": 1495542254, "creation_date": 1472058403, "answer_id": 39129234, "question_id": 39129171, "link": "https://stackoverflow.com/questions/39129171/where-to-define-struct-only-to-be-used-as-private-member-variable/39129234#39129234", "title": "Where to define struct only to be used as private member variable?", "body": "<blockquote>\n  <p><strong>Option 3: declare within class</strong></p>\n  \n  <p>Maybe the best option to limit scope</p>\n</blockquote>\n\n<p>Of course, that's the best way to limit scope and doesn't pollute the namespace. Go for option 3.</p>\n\n<blockquote>\n  <p><s>but potentially messy?</s></p>\n</blockquote>\n\n<p>I didn't get your concerns (you may wanted to elaborate that in your question), there's nothing <em>messy</em> with that at all. </p>\n\n<p><strong>Note:</strong> Whenever needed to make a roundtrip from clients with it, they can use the <code>auto</code> keyword to refer to <code>Bar</code> variables.</p>\n\n<hr>\n\n<p>Another option as <a href=\"https://stackoverflow.com/questions/39129171/where-to-define-struct-only-to-be-used-as-private-member-variable#comment65603917_39129171\">mentioned by R.Sahu</a>, is to use the <a href=\"https://stackoverflow.com/questions/8972588/is-the-pimpl-idiom-really-used-in-practice\"><em>Pimpl Idiom</em></a>:</p>\n\n<pre><code>struct FooData;\nclass Foo {\n    ...\nprivate:\n\n    std::unique_ptr&lt;FooData&gt; data_; // Note I not prefer to use leading underscores\n\npublic:\n    Foo();\n};\n</code></pre>\n\n<p>And in <code>Foo</code>'s translation unit:</p>\n\n<pre><code>namespace {\n    struct FooData;\n    {\n        int a;\n        int b;\n        ...\n    };\n}\n\nFoo::Foo() : data_(std::make_unique&lt;FooData&lt;()) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472058942, "post_id": 39129357, "comment_id": 65604160, "body": "<i>&quot;nothing except Foo can access Bar&quot;</i> Depends on how you define <i>access</i>."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472059330, "post_id": 39129357, "comment_id": 65604366, "body": "Access, meaning, access member variables and functions of Bar outside the class."}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 4, "last_activity_date": 1472059155, "last_edit_date": 1592644375, "creation_date": 1472058875, "answer_id": 39129357, "question_id": 39129171, "link": "https://stackoverflow.com/questions/39129171/where-to-define-struct-only-to-be-used-as-private-member-variable/39129357#39129357", "title": "Where to define struct only to be used as private member variable?", "body": "<blockquote>\n<p><strong>Option 1: define in header?</strong></p>\n<p>I'd like to avoid this, as I don't want Bar to be usable outside the Foo class scope.</p>\n</blockquote>\n<p>With option one, you just answered your own question.</p>\n<blockquote>\n<p><strong>Option 2: forward declare in header, define in cpp</strong></p>\n</blockquote>\n<p>Same problem here as option 1(scope visibility ), but only advantage is Bar's implementation won't be visible to other <code>.cpp</code> files.</p>\n<blockquote>\n<p><strong>Option 3: declare within class</strong></p>\n</blockquote>\n<p><strong>Option 3</strong> is the best, since it fulfills the purpose you ask for, and only that. In addition, with that <code>Bar</code> is available to the whole class. Also, nesting the class prevents unnecessary clutter in your code, as nothing except <code>Foo</code> can access <code>Bar</code>. And it definitely does NOT seem messy, and plus, you could declare just the struct like this:</p>\n<pre><code>class Foo\n{\nprivate:\n    struct Bar {int a, int b};\n    //.....\n};\n</code></pre>\n<p>For a small class, and that seems ok since it is a 1-liner. A disadvantage would be forward-declaring the class, not possible, as seen in this answer: <a href=\"https://stackoverflow.com/a/951245/6525260\">https://stackoverflow.com/a/951245/6525260</a>.</p>\n"}], "owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5512, "favorite_count": 4, "accepted_answer_id": 39129208, "answer_count": 3, "score": 15, "last_activity_date": 1472063230, "creation_date": 1472058133, "last_edit_date": 1472058359, "question_id": 39129171, "link": "https://stackoverflow.com/questions/39129171/where-to-define-struct-only-to-be-used-as-private-member-variable", "title": "Where to define struct only to be used as private member variable?", "body": "<p>Take the following header file example, where Bar is a struct:</p>\n\n<pre><code>class Foo\n{\n    ...\nprivate:\n    Bar _bar;\n};\n</code></pre>\n\n<p>I only want <code>Bar</code> to be accessible as a private member variable for <code>Foo</code>.  What is the proper way to declare and define <code>Bar</code>?</p>\n\n<p><strong>Option 1: define in header?</strong></p>\n\n<p>I'd like to avoid this, as I don't want <code>Bar</code> to be usable outside the <code>Foo</code> class scope.</p>\n\n<pre><code>struct Bar\n{\n    int a;\n    int b;\n    ...\n};\n\nclass Foo\n{\n    ...\nprivate:\n    Bar _bar;\n};\n</code></pre>\n\n<p><strong>Option 2:  forward declare in header, define in cpp?</strong></p>\n\n<p>Not sure if this is legal, as how will the compiler know the size of <code>Foo</code> strictly from the header if <code>Bar</code>'s definition isn't directly available?  Also, will this hide <code>Bar</code> from other files that include the header?</p>\n\n<p>header:</p>\n\n<pre><code>struct Bar;\n\nclass Foo\n{\n    ...\nprivate:\n    Bar _bar;\n};\n</code></pre>\n\n<p>implementation file:</p>\n\n<pre><code>struct Bar\n{\n    int a;\n    int b;\n    ...\n};\n</code></pre>\n\n<p><strong>Option 3:  declare within class</strong></p>\n\n<p>Maybe the best option to limit scope<s>, but potentially messy</s>?</p>\n\n<pre><code>class Foo\n{\n    ...\nprivate:\n    struct Bar\n    {\n        int a;\n        int b;\n        ...\n    };\n\n    Bar _bar;\n};\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt4", "qtscript"], "answers": [{"comments": [{"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1472955095, "post_id": 39252853, "comment_id": 65958719, "body": "Oh cool, thanks. It appears <code>QScriptContext#pushScope</code> isn&#39;t documented in any version of Qt; so I asked about it on the Qt forums. Apparently it&#39;s internal and not really for public use, which theoretically means it could go away at any time, but on the other hand QtScript is deprecated as a whole in newer Qt versions so it doesn&#39;t really add any risk that isn&#39;t there already. And it <i>does</i> work and meets my requirements, I don&#39;t think there&#39;s anything better. Thanks!"}], "tags": [], "owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1472655067, "creation_date": 1472655067, "answer_id": 39252853, "question_id": 39128858, "link": "https://stackoverflow.com/questions/39128858/is-there-a-way-to-maintain-qt-script-context-environment-outside-of-qscriptengin/39252853#39252853", "title": "Is there a way to maintain Qt script context environment outside of QScriptEngine#pushContext/popContext?", "body": "<p>You could use global object. It will share property value accross all evaluations:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;QDebug&gt;\n#include &lt;QtScript/QScriptEngine&gt;\n#include &lt;QtScript/QScriptContext&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n    QScriptEngine engine;\n\n    engine.globalObject().setProperty(\"value\", 2);\n    engine.globalObject().setProperty(\"value2\", 3);\n\n    qDebug() &lt;&lt; engine.evaluate(\"value\").toNumber(); // outputs 2\n    qDebug() &lt;&lt; engine.evaluate(\"value2\").toNumber(); // outputs 3\n\n\n    return a.exec();\n}\n</code></pre>\n\n<p>Or if you do not want global scope : </p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;QDebug&gt;\n#include &lt;QtScript/QScriptEngine&gt;\n#include &lt;QtScript/QScriptContext&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n    QScriptEngine engine;\n    QScriptContext *context;\n\n    QScriptValue scope = engine.newObject();\n    scope.setProperty(\"value\", 1);\n    scope.setProperty(\"value2\", 2);\n\n    context = engine.pushContext();\n\n    context-&gt;pushScope(scope);\n    qDebug() &lt;&lt; engine.evaluate(\"value\").toNumber(); // outputs 1\n    qDebug() &lt;&lt; engine.evaluate(\"value2\").toNumber(); // outputs 2\n\n    engine.popContext();\n\n    return a.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "accepted_answer_id": 39252853, "answer_count": 1, "score": 6, "last_activity_date": 1472655067, "creation_date": 1472056999, "last_edit_date": 1495535628, "question_id": 39128858, "link": "https://stackoverflow.com/questions/39128858/is-there-a-way-to-maintain-qt-script-context-environment-outside-of-qscriptengin", "title": "Is there a way to maintain Qt script context environment outside of QScriptEngine#pushContext/popContext?", "body": "<p>In Qt 4.8's scripting engine, \"local\" variables can be set by <a href=\"https://stackoverflow.com/a/39089978/616460\">obtaining a <code>QScriptContext</code> from <code>QScriptEngine::pushContext</code> then setting the properties of its activation object</a>. This can only be done within push/pop calls, since that's the only place a <code>QScriptContext</code> is available and AFAICT there is no equivalent of <code>QScriptEngine#evaluate</code> that takes a <code>QScriptContext</code> to use as the environment:</p>\n\n<pre><code>QScriptEngine engine;\nQScriptContext *local;\n\nlocal = engine.pushContext();\nlocal-&gt;activationObject().setProperty(\"value\", 2); // set value=2\nqDebug() &lt;&lt; engine.evaluate(\"value\").toNumber(); // outputs 2\nengine.popContext();\n</code></pre>\n\n<p>Is there some way to maintain an environment to use with evaluations <em>outside</em> of the push/pop calls? For example, I've tried creating a <code>QScriptValue</code> to use as the activation object and then setting it:</p>\n\n<pre><code>QScriptEngine engine;\nQScriptContext *local;\n\n// Use ao as activation object, set variables here, prior to pushContext.\nQScriptValue ao;\nao.setProperty(\"value\", 1);\n\n// Test with ao:\nlocal = engine.pushContext();\nlocal-&gt;setActivationObject(ao);\nqDebug() &lt;&lt; engine.evaluate(\"value\").toNumber();\nengine.popContext();\n</code></pre>\n\n<p>But that doesn't work. It outputs <code>nan</code> instead of <code>1</code>, as <code>value</code> is undefined. For some reason <code>setActivationObject</code> didn't change the value.</p>\n\n<p>My general goal is:</p>\n\n<ol>\n<li>Set up a local environment outside of the evaluation code.</li>\n<li>Then use that pre-configured local environment when evaluating scripts between <code>pushContext</code> and <code>popContext</code> calls, without having to re-set all the variables in that environment every time.</li>\n</ol>\n\n<p>So:</p>\n\n<ul>\n<li>Is there a way to do this?</li>\n<li>Is it possible I'm on the right track but I set up <code>ao</code> improperly? For example, there is an undocumented <code>QScriptEngine#newActivationObject()</code> that yields an \"unimplemented\" error when used, perhaps this is a hint?</li>\n</ul>\n\n<p>How can I set up a local context but basically not have to re-configure it every time I push a context (since it's essentially lost for good every time I pop the context).</p>\n"}, {"tags": ["c++", "qt", "qml", "qtquick2"], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 4621545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m1YBD.jpg?s=128&g=1", "display_name": "Francisco Hernandez", "link": "https://stackoverflow.com/users/4621545/francisco-hernandez"}, "edited": false, "score": 0, "creation_date": 1472069326, "post_id": 39129255, "comment_id": 65609728, "body": "Could you show me how would I call TextEdit::textDocument in the QSyntaxHighlighter constructor with some sample code?"}, {"owner": {"reputation": 5296, "user_id": 4666542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb01b3cfca5ffedec62cbf12217ac63a?s=128&d=identicon&r=PG", "display_name": "jpnurmi", "link": "https://stackoverflow.com/users/4666542/jpnurmi"}, "reply_to_user": {"reputation": 162, "user_id": 4621545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m1YBD.jpg?s=128&g=1", "display_name": "Francisco Hernandez", "link": "https://stackoverflow.com/users/4621545/francisco-hernandez"}, "edited": false, "score": 2, "creation_date": 1472069831, "post_id": 39129255, "comment_id": 65609950, "body": "Create a C++ property or method that takes a <code>QQuickTextDocument*</code>. From QML, assign or pass the value of <code>TextEdit::textDocument</code> to that property or method. Then you can do: <code>QSyntaxHighlighter *highlighter = new QSyntaxHighlighter(quickTextDocument-&gt;textDocument());</code>"}], "tags": [], "owner": {"reputation": 5296, "user_id": 4666542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb01b3cfca5ffedec62cbf12217ac63a?s=128&d=identicon&r=PG", "display_name": "jpnurmi", "link": "https://stackoverflow.com/users/4666542/jpnurmi"}, "is_accepted": true, "score": 5, "last_activity_date": 1472073852, "last_edit_date": 1472073852, "creation_date": 1472058483, "answer_id": 39129255, "question_id": 39128725, "link": "https://stackoverflow.com/questions/39128725/how-to-implement-rich-text-logic-on-qml-textedit-with-qsyntaxhighlighter-class-i/39129255#39129255", "title": "How to implement rich text logic on QML TextEdit with QSyntaxHighlighter class in Qt?", "body": "<p>You can use <a href=\"http://doc.qt.io/qt-5/qml-qtquick-textedit.html#textDocument-prop\" rel=\"nofollow\"><code>TextEdit::textDocument</code></a>, which holds an instance of <a href=\"http://doc.qt.io/qt-5/qquicktextdocument.html\" rel=\"nofollow\"><code>QQuickTextDocument</code></a>, to gain access to the underlying <code>QTextDocument</code> that you can pass to <code>QSyntaxHighlighter</code> constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 4621545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m1YBD.jpg?s=128&g=1", "display_name": "Francisco Hernandez", "link": "https://stackoverflow.com/users/4621545/francisco-hernandez"}, "is_accepted": false, "score": 2, "last_activity_date": 1472502807, "creation_date": 1472502807, "answer_id": 39214738, "question_id": 39128725, "link": "https://stackoverflow.com/questions/39128725/how-to-implement-rich-text-logic-on-qml-textedit-with-qsyntaxhighlighter-class-i/39214738#39214738", "title": "How to implement rich text logic on QML TextEdit with QSyntaxHighlighter class in Qt?", "body": "<p>In case someone needs a more detailed explanation for this. \nFirst, I created a <a href=\"http://doc.qt.io/qt-5/properties.html\" rel=\"nofollow\">Q_PROPERTY</a> inside a custom C++ class.</p>\n\n<pre><code>Q_PROPERTY(QQuickTextDocument* mainTextEdit READ mainTextEdit WRITE setMainTextEdit NOTIFY mainTextEditChanged)\n</code></pre>\n\n<p>Then I assign <code>textEdit.textDocument</code> to the <a href=\"http://doc.qt.io/qt-5/properties.html\" rel=\"nofollow\">Q_PROPERTY</a> in the QML.</p>\n\n<pre><code>customClass.mainTextEdit = textEdit.textDocument\n</code></pre>\n\n<p>Then I call <code>initHighlighter()</code> (the function has to be <a href=\"http://doc.qt.io/qt-5/qobject.html#Q_INVOKABLE\" rel=\"nofollow\">Q_INVOKABLE</a>) in my QML which calls the constructor of my highlighter class and passes it the text document of the <a href=\"http://doc.qt.io/qt-5/qml-qtquick-textedit.html\" rel=\"nofollow\">textEdit</a>. </p>\n\n<pre><code>void initHighlighter()\n{\nHighlighter *highlighter;\nhighlighter = new Highlighter(m_mainTextEdit-&gt;textDocument());\n}\n</code></pre>\n\n<p>Note: The custom highlighter class needs to be derived from <a href=\"http://doc.qt.io/qt-5/qtwidgets-richtext-syntaxhighlighter-example.html\" rel=\"nofollow\">QSyntaxHighlighter</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 9649, "user_id": 1052261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4961b82d779d8b8119c69524f1a324cc?s=128&d=identicon&r=PG", "display_name": "Dawid Drozd", "link": "https://stackoverflow.com/users/1052261/dawid-drozd"}, "is_accepted": false, "score": 2, "last_activity_date": 1488366823, "creation_date": 1488366823, "answer_id": 42530223, "question_id": 39128725, "link": "https://stackoverflow.com/questions/39128725/how-to-implement-rich-text-logic-on-qml-textedit-with-qsyntaxhighlighter-class-i/42530223#42530223", "title": "How to implement rich text logic on QML TextEdit with QSyntaxHighlighter class in Qt?", "body": "<p>Sample implementation:</p>\n\n<p><code>HighlightComponent.h</code></p>\n\n<pre><code>class HighlightComponent : public QObject\n{\nQ_OBJECT\n    //@formatter:off\n    Q_PROPERTY(QString text\n                       READ getText\n                       WRITE setText\n                       NOTIFY textChanged)\n    //@formatter:on\n    using inherited = QObject;\npublic:\n    explicit HighlightComponent(QObject* parent = nullptr);\n\n    static void registerQmlType();\n\n    const QString&amp; getText()\n    {\n        return _text;\n    }\n\n    void setText(const QString&amp; newText)\n    {\n        if (newText != _text)\n        {\n            _text = newText;\n            emit textChanged();\n        }\n    }\n\n    Q_INVOKABLE void onCompleted();\n\nsignals:\n    void textChanged();\n\nprivate:\n    std::unique_ptr&lt;QSyntaxHighlighter&gt; _highlight;\n    QString _text = \"\";\n};\n</code></pre>\n\n<p><code>HighlightComponent.cpp</code></p>\n\n<pre><code>HighlightComponent::HighlightComponent(QObject* parent)\n        : inherited(parent)\n{\n}\n\nvoid HighlightComponent::onCompleted()\n{\n    auto property = parent()-&gt;property(\"textDocument\");\n    auto textDocument = property.value&lt;QQuickTextDocument*&gt;();\n    auto document = textDocument-&gt;textDocument();\n    //TODO init here your QSyntaxHighlighter\n}\n\nvoid HighlightComponent::registerQmlType()\n{\n    qmlRegisterType&lt;HighlightComponent&gt;(\"com.HighlightComponent\", 1, 0, \"HighlightComponent\");\n}\n</code></pre>\n\n<p><code>main.cpp</code></p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    QGuiApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n    HighlightComponent::registerQmlType();\n\n    engine.load(QUrl(QStringLiteral(\"qrc:/view/main.qml\")));\n\n    return app.exec();\n}\n</code></pre>\n\n<p>Sample QML</p>\n\n<pre><code>TextArea {\n    id: testTextArea\n    text: testTextArea.text\n    //inputMethodHints: Qt.ImhNoPredictiveText\n\n    onTextChanged: {\n        testTextArea.text = text\n    }\n\n    HighlightComponent {\n        id: testTextArea\n        Component.onCompleted: onCompleted()\n    }\n}\n</code></pre>\n\n<p>Links:</p>\n\n<p><a href=\"https://wiki.qt.io/How_to_Bind_a_QML_Property_to_a_C%2B%2B_Function\" rel=\"nofollow noreferrer\">https://wiki.qt.io/How_to_Bind_a_QML_Property_to_a_C%2B%2B_Function</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html</a></p>\n\n<p><a href=\"http://wiki.qt.io/Spell-Checking-with-Hunspell\" rel=\"nofollow noreferrer\">http://wiki.qt.io/Spell-Checking-with-Hunspell</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-interactqmlfromcpp.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtqml-cppintegration-interactqmlfromcpp.html</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qtwidgets-richtext-syntaxhighlighter-example.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtwidgets-richtext-syntaxhighlighter-example.html</a></p>\n"}], "owner": {"reputation": 162, "user_id": 4621545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m1YBD.jpg?s=128&g=1", "display_name": "Francisco Hernandez", "link": "https://stackoverflow.com/users/4621545/francisco-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1941, "favorite_count": 3, "accepted_answer_id": 39129255, "answer_count": 3, "score": 3, "last_activity_date": 1488366823, "creation_date": 1472056554, "last_edit_date": 1472067092, "question_id": 39128725, "link": "https://stackoverflow.com/questions/39128725/how-to-implement-rich-text-logic-on-qml-textedit-with-qsyntaxhighlighter-class-i", "title": "How to implement rich text logic on QML TextEdit with QSyntaxHighlighter class in Qt?", "body": "<p>I have a TextEdit in my QML file and I have a QSyntaxHighlighter C++ class. I want to specify the highlighting logic in the C++ class and apply it to the TextEdit, but I am not sure how to make the connection between the QML object and the C++ class. Can you also please provide some sample code? I couldn't find how to implement it with the Qt documentation.</p>\n"}, {"tags": ["c++", "vulkan"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472060351, "post_id": 39128658, "comment_id": 65604933, "body": "&quot;<i>every villager has its own pipeline(different textures, bonelayouts, etc)</i>&quot; Why would using different textures or matrix sets necessitate having a different <i>pipeline</i>?"}, {"owner": {"reputation": 489, "user_id": 4801255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bce593ce51b5b9afb7319391d5aec5a?s=128&d=identicon&r=PG&f=1", "display_name": "Dynamitos", "link": "https://stackoverflow.com/users/4801255/dynamitos"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472065978, "post_id": 39128658, "comment_id": 65607987, "body": "@NicolBolas What I initially meant with &quot;multiple pipelines&quot; was: Not evey model has the same vertex attributes(positions, normals, tangents, etc.), which means that one would need to generate at least a different layout for each model. But this has been resolved, since all data not included in each model is either unusable or has to be calculated with dummy values."}, {"owner": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "edited": false, "score": 0, "creation_date": 1472107894, "post_id": 39128658, "comment_id": 65621236, "body": "I think it is a very valid question! There were a lot of talks addressing this issue at GDC. First, don&#39;t re-implement a driver in Vulkan. It will not be better than the existing one. But with a careful design you can do things better. My favorite thing is separating copy/compute/raster. In a deferred render shading is only compute. Shadow maps are only raster."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "edited": false, "score": 1, "creation_date": 1472143719, "post_id": 39128658, "comment_id": 65644919, "body": "@starmole: It may be a useful question, but it is not a <i>valid</i> one as far as SO is concerned. It&#39;s <i>way</i> too open-ended, even with the OP&#39;s edits. There are so many considerations that no one answer could possibly handle all of them. At best, this should go to Prog.SE, but I suspect it&#39;d be too broad even for them."}, {"owner": {"reputation": 489, "user_id": 4801255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bce593ce51b5b9afb7319391d5aec5a?s=128&d=identicon&r=PG&f=1", "display_name": "Dynamitos", "link": "https://stackoverflow.com/users/4801255/dynamitos"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472150545, "post_id": 39128658, "comment_id": 65648673, "body": "@NicolBolas how about this: we keep this question on hold, and I ask some seperate, more detailed questions, since I already have an idea for a design now. After I got all the detailed information I need, I post an answer here explaining the concepts and ideas behind it including something like a diagramm"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472150810, "post_id": 39128658, "comment_id": 65648794, "body": "@Dynamitos: If you&#39;ve got more specific questions in mind, go ahead and ask them. But the answers to them will not make <i>this question</i> any more appropriate for SO."}, {"owner": {"reputation": 2878, "user_id": 191584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5f4f7f52bd218b462400abf6c8e3065?s=128&d=identicon&r=PG", "display_name": "kloffy", "link": "https://stackoverflow.com/users/191584/kloffy"}, "edited": false, "score": 1, "creation_date": 1472179971, "post_id": 39128658, "comment_id": 65658769, "body": "What happened to marking such questions as community wikis? I would also be interested in the answers people might post to this question."}], "owner": {"reputation": 489, "user_id": 4801255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bce593ce51b5b9afb7319391d5aec5a?s=128&d=identicon&r=PG&f=1", "display_name": "Dynamitos", "link": "https://stackoverflow.com/users/4801255/dynamitos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 1, "closed_date": 1472068950, "answer_count": 0, "score": 3, "last_activity_date": 1472103282, "creation_date": 1472056330, "last_edit_date": 1472103282, "question_id": 39128658, "link": "https://stackoverflow.com/questions/39128658/vulkan-advanced-render-design", "closed_reason": "Needs more focus", "title": "Vulkan advanced render design", "body": "<p>I've finally managed to make it through the basic concepts of vulkan and have some knowledge of primary/secondary commandbuffers, renderpasses etc. Now I was wondering how one would design a more advanced render engine(not like the simples ones from the samples)?</p>\n\n<p>Let me ask it more specifically:</p>\n\n<p>If I would want to render a small village(a few houses) containing some villagers, which are animated using skeletal animation, how would the design approach look like? Would you create two Renderer classes, one for the villagers, one for the houses, each generating a secondary commandbuffer for each object? And if so, how would one make proper use of multithreading? <s>And if, lets say, every villager has its own pipeline(different textures, bonelayouts, etc), how would one manage those?</s></p>\n\n<p><strong>Edit:</strong> I'm not searching for \"the render engine\", I just want to know how one could make effective use of multithreading then rendering a scene with different \"types\" of models(NPCs, houses, terrain).</p>\n"}, {"tags": ["c++", "design-patterns", "singleton"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1472056015, "post_id": 39128544, "comment_id": 65602567, "body": "Since c++11, you can mark them <code>delete</code> instead of private without definition."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472056136, "post_id": 39128544, "comment_id": 65602632, "body": "copy constructor and assignment have similar semantic, so it is logical to implement them grouped."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1472056411, "post_id": 39128544, "comment_id": 65602792, "body": "You can still invoke assignment with code like: <code>auto&amp; instance = Singleton::GetInstance(); instance = instance;</code> (even if it should not be problematic)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1472056437, "post_id": 39128544, "comment_id": 65602810, "body": "A better option would be to stay a million killometers away from the singleton anti-pattern IMHO."}, {"owner": {"reputation": 337, "user_id": 5066038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rdJwa.jpg?s=128&g=1", "display_name": "asad_nitp", "link": "https://stackoverflow.com/users/5066038/asad-nitp"}, "edited": false, "score": 0, "creation_date": 1472056855, "post_id": 39128544, "comment_id": 65603037, "body": "yeah that is what i have been told..it&#39;s an Anti Pattern"}], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 6753274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce811811db4d5a2f4ff76d0e4f05bd3?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/6753274/matt"}, "is_accepted": false, "score": -1, "last_activity_date": 1472056483, "creation_date": 1472056483, "answer_id": 39128702, "question_id": 39128544, "link": "https://stackoverflow.com/questions/39128544/is-it-neccessary-to-make-assignment-operator-private-while-designing-singleton-p/39128702#39128702", "title": "Is it neccessary to make assignment operator private while designing Singleton pattern", "body": "<p>They may have been referring to an assignment operator which performs copying:</p>\n\n<pre><code>Singleton&amp; operator=(const Singleton&amp; other);\n</code></pre>\n\n<p>This implies multiple instances of Singleton, since you would need another instance (the 'other') to copy into the Singleton instance, which doesn't make sense. Therefore, you can make it private or mark it as deleted. </p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472060081, "post_id": 39128888, "comment_id": 65604782, "body": "It might be called, as in my example in comment. and prior to c++11, declare private without definition is the way instead of <code>=delete</code>. And declare it <code>=delete</code> is not the same thing than not declare it at all..."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472061949, "post_id": 39128888, "comment_id": 65605784, "body": "@Jarod42 I didn&#39;t mean what you said. My answer is quite clear: there is no <i>practical</i> difference different into declaring it <code>public</code> or <code>private</code>. For that reason avoid to <i>define</i> (more correct) it using <code>delete</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472062336, "post_id": 39128888, "comment_id": 65605990, "body": "There are differences between public/private as it can be used. And marking it as deleted is not the same than not declare it as it will be auto generated by compiler."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472063147, "post_id": 39128888, "comment_id": 65606456, "body": "<i>&quot;There are differences between public/private as it can be used.&quot;</i> Ofc, Waht I said there is no <b>practical</b> (cite myself) difference <b>in such context</b>. <i>&quot;And marking it as deleted is not the same than not declare it as it will be auto generated by compiler.&quot;</i> I never said that. I just said that <i>the most practical choice is to avoid to define it, using <code>delete</code></i>. English is no my first language but I thing my answer was pretty clear."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472064471, "post_id": 39128888, "comment_id": 65607206, "body": "IMO, it is not clear. (BTW, your cite your second sentence about the first one). &quot;avoid to define it, using delete&quot;. For example is a <i>&quot;contradiction&quot;</i> for me. Probably a language issue."}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 0, "last_activity_date": 1472062012, "last_edit_date": 1472062012, "creation_date": 1472057117, "answer_id": 39128888, "question_id": 39128544, "link": "https://stackoverflow.com/questions/39128544/is-it-neccessary-to-make-assignment-operator-private-while-designing-singleton-p/39128888#39128888", "title": "Is it neccessary to make assignment operator private while designing Singleton pattern", "body": "<blockquote>\n  <p>Since only one instance can be created I think it does not make sense to declare Assignment operator private.</p>\n</blockquote>\n\n<p>It does not make sense to declare Assignment operator at all. Anyway you're right. <code>public</code> or <code>private</code> it does make any difference because it will never be used.</p>\n\n<p>For those reasons the most practical choice is to avoid to <em>define</em> it at all, and make sure it cannot be called: <em>C++11</em> has introduced <a href=\"http://en.cppreference.com/w/cpp/language/function#Deleted_functions\" rel=\"nofollow\">that</a> functionality.</p>\n\n<p>So, you can just delete it.</p>\n\n<pre><code>Singleton&amp; operator=(const Singleton&amp;) = delete;\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 5066038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rdJwa.jpg?s=128&g=1", "display_name": "asad_nitp", "link": "https://stackoverflow.com/users/5066038/asad-nitp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472062012, "creation_date": 1472055946, "question_id": 39128544, "link": "https://stackoverflow.com/questions/39128544/is-it-neccessary-to-make-assignment-operator-private-while-designing-singleton-p", "title": "Is it neccessary to make assignment operator private while designing Singleton pattern", "body": "<p>I have just Learned about the first Design Pattern in my career :)\nand Implemented it both using early and Lazy method. While it is Logical to\nmake the Copy Constructor Private but i was told that also make assignment operator private. Since only one instance can be created I think it does not\nmake sense to declare Assignment operator private.   </p>\n"}, {"tags": ["c++", "c++11", "gcc", "lambda", "variadic-templates"], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 6721679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111509d953a505412fe82bf57a81d22d?s=128&d=identicon&r=PG&f=1", "display_name": "smateo", "link": "https://stackoverflow.com/users/6721679/smateo"}, "is_accepted": false, "score": 2, "last_activity_date": 1472064792, "creation_date": 1472064792, "answer_id": 39131012, "question_id": 39128413, "link": "https://stackoverflow.com/questions/39128413/c-lambda-not-capturing-variable-on-2nd-expansion-in-template/39131012#39131012", "title": "C++ lambda not capturing variable on 2nd expansion in template?", "body": "<p>First of all I don't have a solution, I'd want to add this extra information as a comment, but unfortunately I can't comment yet.</p>\n\n<p>I tried your previous code with Intel 17 c++ compiler and worked fine:</p>\n\n<pre><code>&amp;bar=0x7fff29e40c50\n  bar=0x616c20\n  bar=2a\n\n&amp;bar=0x7fff29e40c50\n  bar=0x616c20\n  bar=2a\n</code></pre>\n\n<p>In some cases the <code>&amp;bar</code> (the address of the new variable used to store the captured value) was different between the first call and the second, but it also worked.</p>\n\n<p>I also tried your code with GNU's g++ changing the type of <code>bar</code> from <code>int*</code> to <code>int</code>. The captured value was wrong in the second and successive calls even in this case:</p>\n\n<pre><code>&amp;bar=0x7fffeae12480\n  bar=2a\n&amp;bar=0x7fffeae12480\n  bar=0\n&amp;bar=0x7fffeae12480\n  bar=0\n</code></pre>\n\n<p>Finally I tried modifying a bit the code and passing by value and object, so the copy constructor must be called:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nstruct  A {\n    A(int x) : _x(x) { \n      std::cerr &lt;&lt; \"Constructor!\" &lt;&lt; n++ &lt;&lt; std::endl;\n    }\n    A(const A&amp; a) : _x(a._x) {\n      std::cerr &lt;&lt; \"Copy Constructor!\"  &lt;&lt; n++ &lt;&lt; std::endl;\n    }\n    static int n;\n    int _x;  \n};\n\nint A::n = 0;\n\ntemplate&lt;typename... Args&gt;\nvoid foo(Args ... args) {\n  A a(42);\n\n  std::cerr &lt;&lt; \"-------------------------------------------------\" &lt;&lt; std::endl;\n  using expand_type = int[];\n  expand_type  {\n   (args( [a]() {\n          std::cerr &lt;&lt; \"&amp;a, \"&lt;&lt; &amp;a &lt;&lt; \", a._x,\" &lt;&lt; a._x &lt;&lt; std::endl;\n         }\n       ),\n    0) ... \n  };\nstd::cerr &lt;&lt; \"-------------------------------------------------\" &lt;&lt; std::endl;\n}\n\nint main() {\n  std::function&lt;void(std::function&lt;void()&gt;)&gt; clbk_func_invoker = [](std::function&lt;void()&gt; f) { f(); };\n  foo(clbk_func_invoker, clbk_func_invoker, clbk_func_invoker);\n  return 0;\n}\n</code></pre>\n\n<p>My current version of g++ (<code>g++ (GCC) 6.1.0</code>) is not able to compile this code. I also tried with Intel and it worked, although I don't fully understand why the copy constructor is called so many times:</p>\n\n<pre><code>Constructor!0\n-------------------------------------------------\nCopy Constructor!1\nCopy Constructor!2\nCopy Constructor!3\n&amp;a, 0x617c20, a._x,42\nCopy Constructor!4\nCopy Constructor!5\nCopy Constructor!6\n&amp;a, 0x617c20, a._x,42\nCopy Constructor!7\nCopy Constructor!8\nCopy Constructor!9\n&amp;a, 0x617c20, a._x,42\n-------------------------------------------------\n</code></pre>\n\n<p>That's all I tested so far.</p>\n"}, {"comments": [{"owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1472071099, "post_id": 39131065, "comment_id": 65610577, "body": "Personally, I&#39;m inclined to think it is actually a compiler bug in GCC, but I would like to be absolutely certain before filing it.  I know you should almost never blame the compiler, but maybe this time...  Also, I have a work around for my real case.  I wouldn&#39;t be surprised if this was a relatively unique test case for the compiler.  The code is rather preposterous."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "edited": false, "score": 0, "creation_date": 1472074272, "post_id": 39131065, "comment_id": 65612032, "body": "@Yakk you didn&#39;t answered the core issue, <i>..they are instead sharing variables across functor(?) instances..</i> why expanding the pack don&#39;t create a copy of bar for each expansion instead of sharing just one copy of bar for all expanded closures, what make this kind of expansion so special ?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "edited": false, "score": 1, "creation_date": 1472090003, "post_id": 39131065, "comment_id": 65616096, "body": "@xhamr because support for lambdas inside parameter pack expansion is flakey?  I gave up doing it because most compilers failed to compile legal code."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 1, "creation_date": 1472090066, "post_id": 39131065, "comment_id": 65616116, "body": "@ross I am very certain your compiler screwed up.  Figuring out how rewuires reading the disassembly or the gcc source code or both."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "edited": false, "score": 0, "creation_date": 1472147520, "post_id": 39131065, "comment_id": 65647016, "body": "@Yakk, all was about the evaluation of the lambdas not the expansion, I posted what I found."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1472065457, "last_edit_date": 1472065457, "creation_date": 1472065025, "answer_id": 39131065, "question_id": 39128413, "link": "https://stackoverflow.com/questions/39128413/c-lambda-not-capturing-variable-on-2nd-expansion-in-template/39131065#39131065", "title": "C++ lambda not capturing variable on 2nd expansion in template?", "body": "<p>Parameter packs <em>with lambdas in them</em> tend to give compilers fits.  One way to avoid that is to move the expansion part and the lambda part separate.</p>\n\n<pre><code>template&lt;class F, class...Args&gt;\nauto for_each_arg( F&amp;&amp; f ) {\n  return [f=std::forward&lt;F&gt;(f)](auto&amp;&amp;...args){\n    using expand_type = int[];\n    (void)expand_type{0,(void(\n      f(decltype(args)(args))\n    ),0)...};\n  };\n}\n</code></pre>\n\n<p>This takes a lambda <code>f</code> and returns an object that will invoke <code>f</code> on each of its arguments.</p>\n\n<p>We can then rewrite <code>foo</code> to use it:</p>\n\n<pre><code>template&lt;typename... Args&gt;\nvoid foo(Args ... args) {\n  int * bar = new int();\n  *bar = 42;\n\n  for_each_arg( [bar](auto&amp;&amp; f){\n    f( [bar]() {\n      std::cerr&lt;&lt;std::hex;\n      std::cerr&lt;&lt;\"&amp;bar=\"&lt;&lt;(void*)&amp;bar&lt;&lt;std::endl;\n      std::cerr&lt;&lt;\"  bar=\"&lt;&lt;(void*)bar&lt;&lt;std::endl;\n      std::cerr&lt;&lt;\"  bar=\"&lt;&lt;*bar&lt;&lt;std::endl&lt;&lt;std::endl;\n    } );\n  } )\n  ( std::forward&lt;Args&gt;(args)... );\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/38060a13391139ee\" rel=\"nofollow\">live example</a>.</p>\n\n<p>I initially thought it had to do with the <code>std::function</code> constructor.  It does not.  <a href=\"http://coliru.stacked-crooked.com/a/3afc2dc71c7639a2\" rel=\"nofollow\">A simpler example</a> without a <code>std::function</code> that crashes the same way:</p>\n\n<pre><code>template&lt;std::size_t...Is&gt;\nvoid foo(std::index_sequence&lt;Is...&gt;) {\n  int * bar = new int();\n  *bar = 42;\n\n  using expand_type = int[];\n  expand_type{(\n    ([bar]() {\n      std::cerr&lt;&lt;\"bar=\"&lt;&lt;*bar&lt;&lt;'\\n';\n    })(),\n    (int)Is) ... \n  };\n}\n\nint main() {\n  foo(std::make_index_sequence&lt;2&gt;{});\n\n  return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9cda773ccdfcea01\" rel=\"nofollow\">we can invoke the segfault without the <code>cerr</code></a>, giving us disassembly that is easier to read:</p>\n\n<pre><code>void foo&lt;3, 0ul, 1ul&gt;(std::integer_sequence&lt;unsigned long, 0ul, 1ul&gt;)::{lambda()#1}::operator()() const:\n    pushq   %rbp\n    movq    %rsp, %rbp\n    movq    %rdi, -8(%rbp)\n    movq    -8(%rbp), %rax\n    movq    (%rax), %rax\n    movl    $3, (%rax)\n    nop\n    popq    %rbp\n    ret\nvoid foo&lt;3, 0ul, 1ul&gt;(std::integer_sequence&lt;unsigned long, 0ul, 1ul&gt;):\n    pushq   %rbp\n    movq    %rsp, %rbp\n    pushq   %rbx\n    subq    $40, %rsp\n    movl    $4, %edi\n    call    operator new(unsigned long)\n    movl    $0, (%rax)\n    movq    %rax, -24(%rbp)\n    movq    -24(%rbp), %rax\n    movl    $42, (%rax)\n    movq    -24(%rbp), %rax\n    movq    %rax, -48(%rbp)\n    leaq    -48(%rbp), %rax\n    movq    %rax, %rdi\n    call    void foo&lt;3, 0ul, 1ul&gt;(std::integer_sequence&lt;unsigned long, 0ul, 1ul&gt;)::{lambda()#1}::operator()() const\n    movabsq $-4294967296, %rax\n    andq    %rbx, %rax\n    movq    %rax, %rbx\n    movq    $0, -32(%rbp)\n    leaq    -32(%rbp), %rax\n    movq    %rax, %rdi\n    call    void foo&lt;3, 0ul, 1ul&gt;(std::integer_sequence&lt;unsigned long, 0ul, 1ul&gt;)::{lambda()#1}::operator()() const\n    movl    %ebx, %edx\n    movabsq $4294967296, %rax\n    orq     %rdx, %rax\n    movq    %rax, %rbx\n    nop\n    addq    $40, %rsp\n    popq    %rbx\n    popq    %rbp\n    ret\n</code></pre>\n\n<p>I have yet to parse the disassembly, but it obviously trashes the state of the second lambda when playing with the first.</p>\n"}, {"comments": [{"owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1472151844, "post_id": 39151767, "comment_id": 65649270, "body": "So you&#39;re saying that the lambdas&#39; capture arguments are misclassified as &quot;trivial&quot; when they aren&#39;t actually &quot;trivial&quot;?  The variable that I am passing in is a pointer.  I would expect the pointer to be copied by value and for that pointer to be as close to a &quot;trivial&quot; item as possible.  The weird thing is that the pointer is set to 0 after the first lambda is invoked.  That looks like some sort of destructor behavior or possibly even stack corruption."}, {"owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1472152192, "post_id": 39151767, "comment_id": 65649434, "body": "In my specific case I would actually <i>expect</i> <code>&amp;bar</code> to be the same on each invocation since the lambda is on the stack and it is two copies of the exact same lambda.  What is weird is that the value of the pointer is being modified to <code>0x0</code>."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1472154149, "post_id": 39151767, "comment_id": 65650402, "body": "Pointers doesn&#39;t have notion of trivial class because their refer to an address which may have an object with &quot;trivial class&quot; or not, in this case both &quot;int&quot; and &quot;A&quot;(as default constructible) are trivial, the pointer is not copied in the original code because all lambdas are expanded in place and at the moment of execution all of them see the same variable even if it&#39;s a pointer, but in the first snapshot i posted."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1472154157, "post_id": 39151767, "comment_id": 65650406, "body": "If you look each expansion of the lambda is also an execution which produce a different evaluation, that&#39;s why in that case the pointer is copied. and BTW the pointer isn&#39;t set to 0x0 neither in g++ nor in clang."}, {"owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1472155517, "post_id": 39151767, "comment_id": 65651168, "body": "Can you help me understand why execution of the original code prints this out on the 2nd invocation? <code>bar=0</code>  That looks a great deal like the pointer is being set to <code>null</code>."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1472157691, "post_id": 39151767, "comment_id": 65652259, "body": "@Yakk you&#39;re right, It&#39;s weird that compiling under g++ seem that after the first lambda execution the pointer is cleaned, I didn&#39;t notice that."}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": false, "score": 1, "last_activity_date": 1472147862, "last_edit_date": 1472147862, "creation_date": 1472147470, "answer_id": 39151767, "question_id": 39128413, "link": "https://stackoverflow.com/questions/39128413/c-lambda-not-capturing-variable-on-2nd-expansion-in-template/39151767#39151767", "title": "C++ lambda not capturing variable on 2nd expansion in template?", "body": "<p>After a few test I found that all was about the evaluation of the lambdas not the pack expansion.</p>\n\n<p>What you have is a set of lambdas that do not execute until the pack expansion complete so that at the moment of execution all of them observe the same instance of the variables, which would be different if the execution of each lambda correspond with the order of the expansion, then each expansion will get it's own copy of the variable and the lambda would be considered a materialized <code>prvalue</code> which lifetime has ended:</p>\n\n<pre><code>template&lt;typename... Args&gt;\nvoid foo(Args ... args) {\n    int * bar = new int();\n    *bar = 42;\n\n    using expand_type = int[];\n    expand_type{( args([bar]{\n       std::cerr&lt;&lt;std::hex;\n       std::cerr&lt;&lt;\"&amp;bar=\"&lt;&lt;(void*)&amp;bar&lt;&lt;std::endl;\n       std::cerr&lt;&lt;\"  bar=\"&lt;&lt;(void*)bar&lt;&lt;std::endl;\n       std::cerr&lt;&lt;\"  bar=\"&lt;&lt;*bar&lt;&lt;std::endl&lt;&lt;std::endl;\n       return 0;\n    }()),0) ...\n  };\n};\n\nint main() {\n    std::function&lt;void(int)&gt; clbk_func_invoker = [](int) {  };    \n    foo(clbk_func_invoker, clbk_func_invoker);    \n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4328e1e91ca9658f\" rel=\"nofollow\">live example.</a></p>\n\n<p>However, the compiler is able to do a little optimization even when evaluated lambdas are expanded and not executed while expanding for <code>trivial classes</code> under <code>capture by copy</code>.</p>\n\n<p>Let put a more simple example:</p>\n\n<pre><code>struct A{ };\n\ntemplate&lt;class... T&gt;\nauto foo(T... args){\n  A a;\n  std::cout&lt;&lt; &amp;a &lt;&lt; std::endl;\n  using expand = int[];\n\n expand{ 0,(args([a] { \n      std::cout &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; std::endl; return 0; }),void(),0)... \n };\n}\n\nfoo([](auto i){ i(); }, [](auto i){  i(); }); \n</code></pre>\n\n<p>Will output the same address of <code>a</code> for every expanded lambda, even when individuals copy of <code>a</code> are expected. since <code>capture by copy</code> produce a constant version of the copied variable and no mutation can be made no these copies, for <code>trivial classes</code> is a kind of performance to share the same instance through all expanded lambdas(because no change is guaranteed).</p>\n\n<p>But if the type now is not a trivial one, that optimization has been broken and different copies are required for each expanded lambda:</p>\n\n<pre><code> struct A{ \n    A() = default;\n    A(const A&amp;){}\n };\n</code></pre>\n\n<p>This change on <code>A</code> cause different address for <code>a</code> appear in the output.</p>\n"}], "owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 3, "accepted_answer_id": 39131065, "answer_count": 3, "score": 8, "last_activity_date": 1472147862, "creation_date": 1472055573, "last_edit_date": 1495541312, "question_id": 39128413, "link": "https://stackoverflow.com/questions/39128413/c-lambda-not-capturing-variable-on-2nd-expansion-in-template", "title": "C++ lambda not capturing variable on 2nd expansion in template?", "body": "<p>I have some tortuous code in a template that uses <a href=\"https://stackoverflow.com/a/17340003/20712\">@R. Martinho Fernandes</a>'s trick to loop unroll some packed parameters in a variadic template and invoke the same code on each argument in the argument list.</p>\n\n<p>However, it <em>seems</em> as though the lambdas are not being initialized properly and they are instead sharing variables across functor(?) instances, which seems wrong.</p>\n\n<p>Given this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\ntemplate&lt;typename... Args&gt;\nvoid foo(Args ... args) {\n  int * bar = new int();\n  *bar = 42;\n\n  using expand_type = int[];\n  expand_type{(\n    args([bar]() {\n        std::cerr&lt;&lt;std::hex;\n        std::cerr&lt;&lt;\"&amp;bar=\"&lt;&lt;(void*)&amp;bar&lt;&lt;std::endl;\n        std::cerr&lt;&lt;\"  bar=\"&lt;&lt;(void*)bar&lt;&lt;std::endl;\n        std::cerr&lt;&lt;\"  bar=\"&lt;&lt;*bar&lt;&lt;std::endl&lt;&lt;std::endl;\n    }),\n    0) ... \n  };\n};\n\nint main() {\n  std::function&lt;void(std::function&lt;void()&gt;)&gt; clbk_func_invoker = [](std::function&lt;void()&gt; f) { f(); };\n  foo(clbk_func_invoker, clbk_func_invoker);\n\n  return 0;\n}\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>&amp;bar=0x7ffd22a2b5b0\n  bar=0x971c20\n  bar=2a\n\n&amp;bar=0x7ffd22a2b5b0\n  bar=0\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>So, what I believe I'm seeing is that the two functor instances share the same address for captured variable <code>bar</code>, and after the invocation of the first functor, <code>bar</code> is being set to <code>nullptr</code>, and then the second functor seg'-faults when it tries to dereference the <em>same</em> <code>bar</code> variable ( in the exact same address ).</p>\n\n<p>FYI, I realize that I can work around this issue by moving the <code>[bar](){...</code> functor into a variable <code>std::function</code> variable and then capturing that variable.  However, I would like to understand <em>why</em> the second functor instance is using the exact same <code>bar</code> address and why it is getting a <code>nullptr</code> value.</p>\n\n<p>I ran this with GNU's g++ against their trunk version retrieved and compiled yesterday.</p>\n"}, {"tags": ["c++", "api-design", "temporary", "data-members"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472054969, "post_id": 39128193, "comment_id": 65601942, "body": "<i>then this is wrong because the temporary object returned by parent() does not have its lifetime extended because the const&amp; does not refer to the temporary but to a data member of it</i> this is wrong.  I am looking for the question that shows the lifetime is extended"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472055170, "post_id": 39128193, "comment_id": 65602065, "body": "@NathanOliver: What&#39;s wrong about what he said? He said that the temporary&#39;s lifetime is <i>not extended</i>. And it won&#39;t be."}, {"owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472056649, "post_id": 39128193, "comment_id": 65602925, "body": "@NathanOliver [citation needed]"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472056740, "post_id": 39128193, "comment_id": 65602968, "body": "@NicolBolas I believe <a href=\"http://stackoverflow.com/questions/38226443/const-reference-to-member-of-temporary-object\">this</a> and its target state that a const reference to the member of a temporary is legal."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472056764, "post_id": 39128193, "comment_id": 65602982, "body": "Just posted a new comment since I just missed the edit deadline"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1472057118, "post_id": 39128193, "comment_id": 65603173, "body": "@NathanOliver But there&#39;s a difference between <code>temp().member</code> and <code>temp().get()</code> where <code>get()</code> happens to return <code>member</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1472057500, "post_id": 39128193, "comment_id": 65603381, "body": "@aschepler I don&#39;t think so.  As long as <code>get</code> returns a reference to the member then you have the member as the reference is just an alias."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472057840, "post_id": 39128193, "comment_id": 65603563, "body": "@NathanOliver: How could the compiler <i>possibly know</i> that <code>get</code> returns a reference to a member? All the compiler can see is that <code>get</code> returns a <i>reference</i>. No, temporary lifetime extension only happens when you get an NSDM, not call a member function."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472057958, "post_id": 39128193, "comment_id": 65603612, "body": "@NathanOliver How will a compiler know to extend the lifetime of the temporary if <code>get</code> is not inline?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472058054, "post_id": 39128193, "comment_id": 65603660, "body": "Okay so it is only if you take a reference to the member directly the compiler is allowed to extend the lifetime.  Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 0, "creation_date": 1472055484, "post_id": 39128341, "comment_id": 65602251, "body": "What would you do if one of the platforms you had to support didn&#39;t have a C++11 compiler?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 0, "creation_date": 1472055780, "post_id": 39128341, "comment_id": 65602429, "body": "@PaulJ.Lucas Well, it depends. I would use another platform to compile the code for the platform I had to support :) If this isn&#39;t possible, I would use the second version. Given that <code>path</code> isn&#39;t really long in most cases, the performance lost doesn&#39;t really matter in my opinion, as it is minimal :)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 0, "creation_date": 1472055833, "post_id": 39128341, "comment_id": 65602458, "body": "@PaulJ.Lucas: I would stop worrying about trivial efficiency issues like this, and just return <code>std::string</code> by value.  Actually, unless the OP has evidence that those copies are expensive, that is what I would do anyway."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472059657, "post_id": 39128341, "comment_id": 65604541, "body": "I would move <code>path</code> for rvalue to avoid the copy."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472059734, "post_id": 39128341, "comment_id": 65604576, "body": "@Jarod42 Doesn&#39;t this &quot;stop&quot; the compiler from using RVO?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472059832, "post_id": 39128341, "comment_id": 65604645, "body": "<code>path</code> is not a local variable, so NRVO doesn&#39;t apply here."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1472059952, "post_id": 39128341, "comment_id": 65604706, "body": "@Jarod42 Interesting :) Thanks"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 7, "last_activity_date": 1472060110, "last_edit_date": 1472060110, "creation_date": 1472055287, "answer_id": 39128341, "question_id": 39128193, "link": "https://stackoverflow.com/questions/39128193/lifetime-extension-of-temporaries-data-members-and-api-design/39128341#39128341", "title": "Lifetime extension of temporaries&#39; data members and API design", "body": "<p>What you could do is create 2 different versions of <code>as_utf8()</code>, one when used on lvalues, and one for rvalues. You would need C++11 though.</p>\n\n<p>That way, you get the best of both worlds: a <code>const&amp;</code> when the object isn't a temporary, and an efficient move when it isn't:</p>\n\n<pre><code>std::string const&amp; as_utf8() const &amp; {\n                               // ^^^ Called from lvalues only\n    return path;\n}\n\nstd::string as_utf8() const &amp;&amp; {\n                        // ^^^^ Called from rvalues only\n    return std::move(path); //We don't need path any more\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1472056608, "creation_date": 1472056608, "answer_id": 39128744, "question_id": 39128193, "link": "https://stackoverflow.com/questions/39128193/lifetime-extension-of-temporaries-data-members-and-api-design/39128744#39128744", "title": "Lifetime extension of temporaries&#39; data members and API design", "body": "<p>To my mind the guiding principle as to whether to return a reference or an object is to examine the defined role of the originating class.</p>\n\n<p>i.e. is the method exposing a simple property (argues for a reference, particularly if it's immutable), or is it <em>generating</em> something?</p>\n\n<p>If it's generating a new object or representation we can reasonably expect it to return a distinct object.</p>\n\n<p>Users of APIs are generally accustomed to understanding that properties do not outlive their host objects. This can of course be made plain in the documentation.</p>\n\n<p>e.g.</p>\n\n<pre><code>struct path\n{\n    /// a property\n    /// @note lifetime is no longer than the lifetime of this object\n    std::string const&amp; native() const;\n\n    /// generate a new string representation in a different format\n    std::string to_url() const;\n\n};\n</code></pre>\n\n<p>I personally would avoid the prefix of <code>as_</code> in this case since to me it suggest that we're returning a new representation of the same object, such as:</p>\n\n<pre><code>struct world \n: std::enable_shared_from_this&lt;world&gt;\n{\n    struct sky {} my_sky_;\n\n    /// returns a shared_ptr to my sky object, which shares its lifetime\n    /// with this world.\n    std::shared_ptr&lt;sky&gt; as_sky() \n    { \n      return std::shared_ptr&lt;sky&gt;(shared_from_this(), std::addressof(my_sky_));\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 39128341, "answer_count": 2, "score": 8, "last_activity_date": 1472060110, "creation_date": 1472054834, "last_edit_date": 1472055088, "question_id": 39128193, "link": "https://stackoverflow.com/questions/39128193/lifetime-extension-of-temporaries-data-members-and-api-design", "title": "Lifetime extension of temporaries&#39; data members and API design", "body": "<p>Suppose I have a cross-platform <code>Path</code> class like:</p>\n\n<pre><code>class Path {\npublic:\n    // ...\n    Path parent() const;                // e.g., /foo/bar -&gt; /foo\n\n    std::string const&amp; as_utf8() const {\n        return path;\n    }\nprivate:\n    std::string path;\n};\n</code></pre>\n\n<p>The <code>parent()</code> member function returns the parent path of <code>this</code> path, so it (rightly) returns a newly constructed <code>Path</code> object that represents it.</p>\n\n<p>For a platform that represents paths at the OS-level as UTF-8 strings (e.g., Unix), it seems reasonable for <code>as_utf8()</code> to return a reference directly to the internal representation <code>path</code> since it's <em>already</em> UTF-8.</p>\n\n<p>If I have code like:</p>\n\n<pre><code>std::string const &amp;s = my_path.as_utf8();  // OK (as long as my_path exists)\n// ...\nPath const &amp;parent = my_path.parent();     // OK (temporary lifetime extended)\n</code></pre>\n\n<p>Both these lines are fine because:</p>\n\n<ul>\n<li>Assuming <code>my_path</code> persists, then <code>s</code> remains valid.</li>\n<li>The lifetime of the temporary object returned by <code>parent()</code> is extended by the <code>const&amp;</code>.</li>\n</ul>\n\n<p>So far, so good. However, if I have code like:</p>\n\n<pre><code>std::string const &amp;s = my_path.parent().as_utf8(); // WRONG\n</code></pre>\n\n<p>then this is <em>wrong</em> because the temporary object returned by <code>parent()</code> does <em>not</em> have its lifetime extended because the <code>const&amp;</code> does <em>not</em> refer to the temporary but to a data member of it. At this point, if you try to use <code>s</code>, you'll either get garbage or a core dump. If the code were instead:</p>\n\n<pre><code>    std::string as_utf8() const {                 // Note: object and NOT const&amp;\n        return path;\n    }\n</code></pre>\n\n<p>then the code would be correct.  However, it would be inefficient to create a temporary every time this member function is called.  The implication is also that <em>no</em> \"getter\" member functions should <em>ever</em> return references to their data members.</p>\n\n<p>If the API is left as-is, then it would seem to place an undue burden on the caller to have to look at the return type of <code>as_utf8()</code> to see whether it returns a <code>const&amp;</code> or not: if it does, then the caller <em>must</em> use an object and <em>not</em> a <code>const&amp;</code>; if it returns an object, then the caller <em>may</em> use a <code>const&amp;</code>.</p>\n\n<p>So is there any way to solve this problem such that the API is both efficient in most cases yet prevents the user from obtaining dangling references from seemingly innocuous looking code?</p>\n\n<hr>\n\n<p>By the way, this was compiled using g++ 5.3. It's possible that the lifetime of the temporary <em>should</em> be extended, but that the compiler has a bug.</p>\n"}, {"tags": ["c++", "serialization", "deserialization", "cereal"], "comments": [{"owner": {"reputation": 2016, "user_id": 446717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Cdf.jpg?s=128&g=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/446717/roberto"}, "edited": false, "score": 0, "creation_date": 1472055888, "post_id": 39128155, "comment_id": 65602495, "body": "You should show us the input file"}, {"owner": {"reputation": 106, "user_id": 1501707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d2a3fc711adbc6ae3bd5856e83bb337?s=128&d=identicon&r=PG", "display_name": "Brian Templeton", "link": "https://stackoverflow.com/users/1501707/brian-templeton"}, "reply_to_user": {"reputation": 2016, "user_id": 446717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Cdf.jpg?s=128&g=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/446717/roberto"}, "edited": false, "score": 0, "creation_date": 1472057412, "post_id": 39128155, "comment_id": 65603338, "body": "There is no input file, I&#39;m reading and writing to strings."}, {"owner": {"reputation": 106, "user_id": 1501707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d2a3fc711adbc6ae3bd5856e83bb337?s=128&d=identicon&r=PG", "display_name": "Brian Templeton", "link": "https://stackoverflow.com/users/1501707/brian-templeton"}, "reply_to_user": {"reputation": 2016, "user_id": 446717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Cdf.jpg?s=128&g=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/446717/roberto"}, "edited": false, "score": 1, "creation_date": 1472058083, "post_id": 39128155, "comment_id": 65603680, "body": "istringstream construction is fixed and seems to work properly now."}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 1501707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d2a3fc711adbc6ae3bd5856e83bb337?s=128&d=identicon&r=PG", "display_name": "Brian Templeton", "link": "https://stackoverflow.com/users/1501707/brian-templeton"}, "edited": false, "score": 0, "creation_date": 1472057254, "post_id": 39128581, "comment_id": 65603238, "body": "In simplifying my code, I left out where I read ostream back into istream. Question is updated."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 106, "user_id": 1501707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d2a3fc711adbc6ae3bd5856e83bb337?s=128&d=identicon&r=PG", "display_name": "Brian Templeton", "link": "https://stackoverflow.com/users/1501707/brian-templeton"}, "edited": false, "score": 0, "creation_date": 1472059269, "post_id": 39128581, "comment_id": 65604324, "body": "You are still doing no different than what I have shown IMO. Do you see any issue with my solution ?"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 106, "user_id": 1501707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d2a3fc711adbc6ae3bd5856e83bb337?s=128&d=identicon&r=PG", "display_name": "Brian Templeton", "link": "https://stackoverflow.com/users/1501707/brian-templeton"}, "edited": false, "score": 0, "creation_date": 1472059309, "post_id": 39128581, "comment_id": 65604349, "body": "Well the question is updated, but there is no question now :)"}, {"owner": {"reputation": 106, "user_id": 1501707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d2a3fc711adbc6ae3bd5856e83bb337?s=128&d=identicon&r=PG", "display_name": "Brian Templeton", "link": "https://stackoverflow.com/users/1501707/brian-templeton"}, "edited": false, "score": 0, "creation_date": 1472137723, "post_id": 39128581, "comment_id": 65641165, "body": "Your solution isn&#39;t exactly right, but it did help show me I wasn&#39;t constructing my istringstream right."}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": false, "score": 1, "last_activity_date": 1472056087, "creation_date": 1472056087, "answer_id": 39128581, "question_id": 39128155, "link": "https://stackoverflow.com/questions/39128155/cereal-binary-archive-serialize-deserialize/39128581#39128581", "title": "Cereal Binary Archive Serialize/Deserialize", "body": "<p>Your input archive <code>iarchive</code> has no data to read from since <code>is</code> is empty. You should first write to the <code>stringstream</code> using output archive and use the same stringstream for <code>iarchive</code> to read from (I guess that is what you want to do)</p>\n\n<p>You should try something like below (I did not test it):</p>\n\n<pre><code>MyDTO dto1;    \nstd::stringstream os(std::stringstream::binary);\n{\n    cereal::BinaryOutputArchive oarchive(os); // Create an output archive\n    oarchive(dto1);\n}\n\nMyDTO dto2;\n\n{\n    cereal::BinaryInputArchive iarchive(os); // Create an output archive\n    try {\n        iarchive(dto2);\n    }\n    catch (std::runtime_error e) {\n        e.what();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 1501707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d2a3fc711adbc6ae3bd5856e83bb337?s=128&d=identicon&r=PG", "display_name": "Brian Templeton", "link": "https://stackoverflow.com/users/1501707/brian-templeton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1672, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472058028, "creation_date": 1472054758, "last_edit_date": 1472058028, "question_id": 39128155, "link": "https://stackoverflow.com/questions/39128155/cereal-binary-archive-serialize-deserialize", "title": "Cereal Binary Archive Serialize/Deserialize", "body": "<p>I'm using the following code to attempt to serialize/deserialize an object as binary data:</p>\n\n<pre><code>MyDTO dto1;    \nstd::ostringstream os(std::stringstream::binary);\n{\n    cereal::BinaryOutputArchive oarchive(os); // Create an output archive\n    oarchive(dto1);\n}\n\nMyDTO dto2;\n\nstd::istringstream is(os.str(), std::stringstream::binary);\n{\n    cereal::BinaryInputArchive iarchive(is); // Create an input archive\n    try {\n        iarchive(dto2);\n    }\n    catch (std::runtime_error e) {\n        e.what();\n    }\n}\n</code></pre>\n\n<p><strike>When the code runs, an exception is caught with the message:</p>\n\n<p><code>\"Failed to read 8 bytes from input stream! Read 0\"</code></p>\n\n<p>Can anyone help me understand what's going wrong?</strike></p>\n"}, {"tags": ["c++", "qt", "widget"], "answers": [{"tags": [], "owner": {"reputation": 245, "user_id": 1154638, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5941c947347f0f948a7efc6f4c36b9ea?s=128&d=identicon&r=PG", "display_name": "Anduril28", "link": "https://stackoverflow.com/users/1154638/anduril28"}, "is_accepted": true, "score": 4, "last_activity_date": 1472058404, "creation_date": 1472058404, "answer_id": 39129235, "question_id": 39128153, "link": "https://stackoverflow.com/questions/39128153/how-do-you-display-a-qchartview-in-a-custom-widget/39129235#39129235", "title": "How do you display a QChartView in a Custom Widget?", "body": "<p>I made the class inherit from QChartView (which inherits QWidget) instead of QWidget, then did:</p>\n\n<pre><code>setChart(myChart);\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 556462, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/1wwxJ.jpg?s=128&g=1", "display_name": "bandito40", "link": "https://stackoverflow.com/users/556462/bandito40"}, "is_accepted": false, "score": 5, "last_activity_date": 1476027399, "creation_date": 1476027399, "answer_id": 39945352, "question_id": 39128153, "link": "https://stackoverflow.com/questions/39128153/how-do-you-display-a-qchartview-in-a-custom-widget/39945352#39945352", "title": "How do you display a QChartView in a Custom Widget?", "body": "<p>This is how I did it.</p>\n\n<p>In your .h file:</p>\n\n<pre><code>QGridLayout* gridLayot;\nQChart *chart;\nQChartView *chartView;\n</code></pre>\n\n<p>in your .cpp file in the main constructor:</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow){    \nui-&gt;setupUi(this);\nui-&gt;centralWidget = new QWidget(this);\nthis-&gt;setCentralWidget(ui-&gt;centralWidget);    \n\nchart  = new QChart;\nchartView = new QChartView(chart);\ngridLayout = new QGridLayout(ui-&gt;centralWidget);\ngridLayout-&gt;addWidget(chartView,0,0);\n</code></pre>\n\n<p>Anytime you want to change the chart I do this:</p>\n\n<pre><code>chart  = new QChart;\nchartView = new QChartView(chart);\ngridLayout-&gt;addWidget(chartView,0,0);\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 1154638, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5941c947347f0f948a7efc6f4c36b9ea?s=128&d=identicon&r=PG", "display_name": "Anduril28", "link": "https://stackoverflow.com/users/1154638/anduril28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9576, "favorite_count": 0, "accepted_answer_id": 39129235, "answer_count": 2, "score": 2, "last_activity_date": 1476027399, "creation_date": 1472054757, "question_id": 39128153, "link": "https://stackoverflow.com/questions/39128153/how-do-you-display-a-qchartview-in-a-custom-widget", "title": "How do you display a QChartView in a Custom Widget?", "body": "<p>I have a QChart that I've assigned to a QChartView. In the example I've been following the chart is displayed, in main.cpp, as: </p>\n\n<pre><code>window.setCentralWidget(chartView);\n</code></pre>\n\n<p>In my project I want to utilize the designer and as such have created a custom widget, but it's not displaying the QChart. I found an example where they assigned they assigned the view to a layout and then set the layout, as such:</p>\n\n<pre><code>mainLayout = new QGridLayout;\nmainLayout-&gt;addWidget(chartView, 0, 0);\nsetLayout(mainLayout);\n</code></pre>\n\n<p>But this seems to mess with the layout of all the other widgets within the window. How do I get the Custom Widget to display my chartView?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "gsoap", "onvif"], "answers": [{"tags": [], "owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "is_accepted": true, "score": 1, "last_activity_date": 1472071647, "last_edit_date": 1472071647, "creation_date": 1472068100, "answer_id": 39131902, "question_id": 39128088, "link": "https://stackoverflow.com/questions/39128088/gsoap-and-onvif-nvt-namespace-tag-issue/39131902#39131902", "title": "gSOAP and ONVIF NVT Namespace/Tag Issue", "body": "<p>It should not need modification in typemap.dat file, you should be able to do this using the <a href=\"http://www.genivia.com/doc/dom/html/#c-api\" rel=\"nofollow\">gSOAP dom api</a>.</p>\n\n<p>In order to allow to assign DOM element to <code>xsd_anyType</code> you should add <code>-d</code> to the wsdl2h command :</p>\n\n<blockquote>\n  <p>-d        use DOM to populate xs:any and xsd:anyType elements</p>\n</blockquote>\n\n<p>Then the specialized capabilitites structure that is allocated with something like:</p>\n\n<pre><code>tev__Capabilities *tevcapabilities = soap_new_tev__Capabilities(soap);\n</code></pre>\n\n<p>can be set to the <code>_any</code> field of the <code>tds::Capabilities</code> structure like this: </p>\n\n<pre><code>tds__Service_Capabilities *capabilities = soap_new__tds__Service_Capabilities(soap);\ncapabilities-&gt;__any = soap_dom_element(soap, NULL, \"tev:Capabilities\", \n                          tevcapabilities, tevcapabilities-&gt;soap_type());\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 4626795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a091502e1b7704fa258790cdeff557a2?s=128&d=identicon&r=PG&f=1", "display_name": "Caglar AKYUZ", "link": "https://stackoverflow.com/users/4626795/caglar-akyuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "accepted_answer_id": 39131902, "answer_count": 1, "score": 0, "last_activity_date": 1472072162, "creation_date": 1472054569, "last_edit_date": 1472072162, "question_id": 39128088, "link": "https://stackoverflow.com/questions/39128088/gsoap-and-onvif-nvt-namespace-tag-issue", "title": "gSOAP and ONVIF NVT Namespace/Tag Issue", "body": "<p>I'm trying to implement a ONVIF server (nvt) device using gsoap. I'm following the instructions and typemap.dat given in <a href=\"http://www.genivia.com/resources.html#How_do_I_use_gSOAP_with_the_ONVIF_specifications?\" rel=\"nofollow\">gsoap's website</a> for code generation. I use \"-P\" and \"-x\" parameters for wsdl2h and \"-S -i -x -w\" for soapcpp2. Everything is working as expected, but there is a little quirk.</p>\n\n<p>ONVIF core specification defines GetServices() action which includes an optional \"Capabilities\" member in its response under \"Service\" implementation. Since optional members are not created by wsdl2h (due to my parameters I guess), I make the following modification to my typemap file:</p>\n\n<p><code>_tds__Service_Capabilities = $ xsd__anyType * Capabilities;</code></p>\n\n<p>Then I'm able to assign custom/derived Capabilities objects to this member as required by ONVIF specification depending on the Service type implementation. However, final Capabilities object is always represented with the same namespace of GetServices() action which is not the desired operation. For instance here is the expected response (simplified):</p>\n\n<pre><code>&lt;tds:Service&gt;\n    &lt;tds:Capabilities&gt;\n        &lt;tds:Capabilities&gt;\n        &lt;/tds:Capabilities&gt;\n    &lt;/tds:Capabilities&gt;\n&lt;/tds:Service&gt;\n&lt;tds:Service&gt;\n    &lt;tds:Capabilities&gt;\n        &lt;trt:Capabilities&gt;\n        ...\n        &lt;/trt:Capabilities&gt;\n    &lt;/tds:Capabilities&gt;\n&lt;/tds:Service&gt;\n&lt;tds:Service&gt;\n    &lt;tds:Capabilities&gt;\n        &lt;tev:Capabilities&gt;\n            ...\n        &lt;/tev:Capabilities&gt;\n    &lt;/tds:Capabilities&gt;\n&lt;/tds:Service&gt;\n</code></pre>\n\n<p>whereas the actual response is:</p>\n\n<pre><code>&lt;tds:Service&gt;\n    &lt;tds:Capabilities&gt;\n        &lt;tds:Capabilities&gt;\n        &lt;/tds:Capabilities&gt;\n    &lt;/tds:Capabilities&gt;\n&lt;/tds:Service&gt;\n&lt;tds:Service&gt;\n    &lt;tds:Capabilities&gt;\n        &lt;tds:Capabilities&gt;\n        ...\n        &lt;/tds:Capabilities&gt;\n    &lt;/tds:Capabilities&gt;\n&lt;/tds:Service&gt;\n&lt;tds:Service&gt;\n    &lt;tds:Capabilities&gt;\n        &lt;tds:Capabilities&gt;\n            ...\n        &lt;/tds:Capabilities&gt;\n    &lt;/tds:Capabilities&gt;\n&lt;/tds:Service&gt;\n</code></pre>\n\n<p>To overcome this quirk, I apply following ugly patch to created soapC.cpp file:</p>\n\n<pre><code>@@ -42068,7 +51777,7 @@ void tev__Capabilities::soap_serialize(struct soap *soap) const\n\n int tev__Capabilities::soap_out(struct soap *soap, const char *tag, int id, const char *type) const\n {\n-   return soap_out_tev__Capabilities(soap, \"tev:Capabilities\", id, this, type);\n+   return soap_out_tev__Capabilities(soap, tag, id, this, type);\n }\n\n SOAP_FMAC3 int SOAP_FMAC4 soap_out_tev__Capabilities(struct soap *soap, const char *tag, int id, const tev__Capabilities *a, const char *type)\n@@ -64741,7 +74450,7 @@ void trt__Capabilities::soap_serialize(struct soap *soap) const\n\n int trt__Capabilities::soap_out(struct soap *soap, const char *tag, int id, const char *type) const\n {\n-   return soap_out_trt__Capabilities(soap, \"trt:Capabilities\", id, this, type);\n+   return soap_out_trt__Capabilities(soap, tag, id, this, type);\n }\n</code></pre>\n\n<p>I have to apply this patch everytime I re-generate files and I have serious concerns that this may cause some compatibility problems in the future. What is the proper way of overriding namespace tags?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 3, "creation_date": 1472054178, "post_id": 39127933, "comment_id": 65601397, "body": "Looks like you need a good debugger to step through your code to find the logic error and fix it. <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">This article</a> is a good starting point."}, {"owner": {"reputation": 147, "user_id": 6531984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/814e9f2e22dad9f69f5f3d9c4b34c0e5?s=128&d=identicon&r=PG&f=1", "display_name": "Sgene9", "link": "https://stackoverflow.com/users/6531984/sgene9"}, "edited": false, "score": 0, "creation_date": 1472056153, "post_id": 39127933, "comment_id": 65602646, "body": "A sample input and expected output from Hackerrank.com would be appreciated. However, I think your answer is already given."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5020014, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d59aa7ecc2462a5d498863a0b83d3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay", "link": "https://stackoverflow.com/users/5020014/abhay"}, "edited": false, "score": 0, "creation_date": 1472058981, "post_id": 39128195, "comment_id": 65604179, "body": "Yes this case and other similar cases lead to wrong output. So I&#39;ll need to check the outcomes due to the two possibilities and then choose whether to lose or not."}], "tags": [], "owner": {"reputation": 1680, "user_id": 1230538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/78b4e14f289aae8169be76f8c50f9cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sji", "link": "https://stackoverflow.com/users/1230538/sji"}, "is_accepted": true, "score": 2, "last_activity_date": 1472054844, "creation_date": 1472054844, "answer_id": 39128195, "question_id": 39127933, "link": "https://stackoverflow.com/questions/39127933/mistake-in-this-solution-for-hackerrank/39128195#39128195", "title": "Mistake in this solution for HackerRank", "body": "<p>I think:</p>\n\n<p>Imagine the following input:</p>\n\n<pre><code>5\n6 -5 -2 -2 -2\n</code></pre>\n\n<p>Your algorithm will encounter the <code>6</code> and add it, so strength becomes <code>6</code>.</p>\n\n<p>Next we encounter the <code>-5</code>. Since this will not kill us we accept that loss. Strength becomes <code>1</code>.</p>\n\n<p>Next we come to the <code>-2</code>. This will kill us (takes us to <code>-1</code>) so we flip it using the power. Our strength becomes <code>3</code>.</p>\n\n<p>The following two <code>-2</code>s will therefor kill us.</p>\n\n<p>However if you had used the power on the <code>-5</code> bringing the total strength to <code>11</code> at that point, you would have got to the end, so in this case your answer is incorrect.</p>\n"}], "owner": {"reputation": 31, "user_id": 5020014, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d59aa7ecc2462a5d498863a0b83d3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay", "link": "https://stackoverflow.com/users/5020014/abhay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 39128195, "answer_count": 1, "score": -1, "last_activity_date": 1472056010, "creation_date": 1472054110, "last_edit_date": 1472054944, "question_id": 39127933, "link": "https://stackoverflow.com/questions/39127933/mistake-in-this-solution-for-hackerrank", "title": "Mistake in this solution for HackerRank", "body": "<p>Here's a problem from HackerRank (rated Medium):</p>\n\n<p>When Daenerys, got her new phone there were no games in it. So she went to the play store and downloaded one of the top rated game called Princess and Angels.</p>\n\n<p>In the game princess starts with 0 total strength. there are N angels before princess and her castle. And each i th angel give Ai strength. but some of the angels are actually evil wearing angel clothes and they give negative strength trying to fight with Princess. The game can be won if Daenerys can get through all the N angels without dying. Princess will die if her total strength ever gets less than 0. fortunately Princess has a special power. she can fight with an angel and reverse it's strength atmost once. if she use that power on i th angel with x strength, She can apply this power and make it to -x.</p>\n\n<p>Daenerys can foresee the strengths of N angels. when passing through each angel, the strength is added to total strength. Princess can also reverse the strength of that angel before adding, but only once.</p>\n\n<p>Given N Strengths of angels, can u help Daenerys figure out the best possible result she can have?.</p>\n\n<p>print \"She did it!\" (without the quotes ) if she can win the game. Otherwise print the maximum position up to which she could reach (i.e. the position at which she died due to the negative total strength).</p>\n\n<p>Input Format</p>\n\n<p>First line of input contains T , number of testcases.</p>\n\n<p>Each testcase have two lines, N in the first line and N space separated integers in the next line.</p>\n\n<p>Constraints</p>\n\n<p>1&lt;=T&lt;=1000</p>\n\n<p>1&lt;=N&lt;=100000</p>\n\n<p>-1000&lt;=strength&lt;=1000</p>\n\n<p>Output Format</p>\n\n<p>For each test case, print a single line denoting the answer to the problem.</p>\n\n<p>And this is my attempt at the solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\nint main() {\n    int strength, power, n, t, count = 1, i, pos;\n    cin&gt;&gt;t;\n\n    while(count &lt;= t)\n        {\n        strength = 0;\n        power = 1;\n        cin&gt;&gt;n;\n        int a[n];\n        for(i = 0; i &lt; n; i++)\n            cin&gt;&gt;a[i];\n\n        for(i = 0; i &lt; n; i++)\n            {\n            if((strength + a[i]) &lt; 0 &amp;&amp; power == 1)\n                {\n                strength -= a[i];\n                power = 0;\n            }\n            else if((strength + a[i] &lt; 0) &amp;&amp; power == 0)\n               {\n                if(strength &gt;= 0)\n                    {\n                    pos = i + 1;\n                    strength += a[i];\n                    break;\n                }\n            }\n            else if((strength + a[i]) &gt;= 0)\n                strength += a[i];\n        }\n        if(strength &gt;= 0)\n            cout&lt;&lt;\"She did it!\"&lt;&lt;endl;\n        else if(strength &lt; 0)\n            cout&lt;&lt;pos&lt;&lt;endl;\n        count++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "testing", "polymorphism", "googletest"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4995435, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/061c6b61413d6ee3927e7bcb2858fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "mappa", "link": "https://stackoverflow.com/users/4995435/mappa"}, "edited": false, "score": 0, "creation_date": 1472203517, "post_id": 39143088, "comment_id": 65668607, "body": "Hi, thanks @PiotrNycz, the objectUnderTest did the trick. I was confused by the INSTANTIATE_ macro but as I checked its declaration it was indeed just a #prefix for the first argument. Nevertheless I can still use the same name with my CatTest to execute both common and individual test together then. ( can&#39;t upvote yet, still need a few more rep to go ; ( )."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 29, "user_id": 4995435, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/061c6b61413d6ee3927e7bcb2858fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "mappa", "link": "https://stackoverflow.com/users/4995435/mappa"}, "edited": false, "score": 0, "creation_date": 1472214092, "post_id": 39143088, "comment_id": 65674609, "body": "@mappa I am glad to help. Please accept this answer,  I am assuming it solves your problem..."}], "tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": true, "score": 3, "last_activity_date": 1472122023, "last_edit_date": 1472122023, "creation_date": 1472121618, "answer_id": 39143088, "question_id": 39127901, "link": "https://stackoverflow.com/questions/39127901/polymorphism-for-gtest-type-parameterized/39143088#39143088", "title": "Polymorphism for gtest type parameterized", "body": "<p>You shall not make a test class to be an object under test. </p>\n\n<p>I mean object-under-test should be member of your test class (aggregation, not inheritance) - then everything becomes simple:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass AnimalTest : public ::testing::Test \n{\npublic:\n    T objectUnderTest; // animal\n    virtual void SetUp()\n    {\n       objectUnderTest.SetUp();\n    }\n};\n\nTYPED_TEST_P( AnimalTest , HasLegs ) \n{\n    ASSERT_EQ( 4, objectUnderTest.Legs );\n}\n\nREGISTER_TYPED_TEST_CASE_P( AnimalTest , HasLegs );\ntypedef ::testing::Types&lt; Cat, Dog &gt; AnimalsTypes;\n\nINSTANTIATE_TYPED_TEST_CASE_P( AnimalWithFourLegs, AnimalTest , AnimalsTypes );\n</code></pre>\n\n<hr>\n\n<p>Explanation to  </p>\n\n<blockquote>\n  <p>However these SetUp is never called, in fact even the constructor of\n  DogTest() or CatTest() was never invoked.</p>\n</blockquote>\n\n<p>is simple.</p>\n\n<p>First argument to <code>INSTANTIATE_TYPED_TEST_CASE_P</code> is not class name - it is just some name describing third argument - so you would know which test is which. Saying <code>INSTANTIATE_TYPED_TEST_CASE_P( CatTest, AnimalTest , AnimalsTypes );</code> does not mean it is anyhow related to class <code>CatTest</code>... Read <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#type-parameterized-tests\" rel=\"nofollow\">gtest-doc</a>.</p>\n"}], "owner": {"reputation": 29, "user_id": 4995435, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/061c6b61413d6ee3927e7bcb2858fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "mappa", "link": "https://stackoverflow.com/users/4995435/mappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 39143088, "answer_count": 1, "score": 1, "last_activity_date": 1472122023, "creation_date": 1472054006, "question_id": 39127901, "link": "https://stackoverflow.com/questions/39127901/polymorphism-for-gtest-type-parameterized", "title": "Polymorphism for gtest type parameterized", "body": "<p>I'm trying to use gtest type-parameterized to ensure the basic functionality of my classes. However I'm stucked in the test setup. Following is the example:</p>\n\n<p>I have two classes called CatTest &amp; DogTest, and a base class called AnimalTest that will test all the similarities of Cat &amp; Dog:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass AnimalTest : public ::testing::Test \n{\npublic:\n    virtual void SetUp()\n    {\n      // Do something here so that it will call the correct setup\n    }\n};\n\nTYPED_TEST_P( AnimalTest , HasLegs ) \n{\n    ASSERT_EQ( 4, this-&gt;Legs );\n}\n\nREGISTER_TYPED_TEST_CASE_P( AnimalTest , HasLegs );\n</code></pre>\n\n<p>Now in my CatTest.cpp, I have the following macro declared ( same goes for DogTest )</p>\n\n<pre><code>typedef ::testing::Types&lt; Cat &gt; AnimalsTypes;\n\nINSTANTIATE_TYPED_TEST_CASE_P( CatTest, AnimalTest , AnimalsTypes );\n\nclass CatTest : public CatSetUp\n              , public AnimalTest&lt; AnimalsTypes &gt;\n{\npublic:\n    virtual void SetUp()\n    {\n        CatSetUp::SetUp();\n    }\n}\n</code></pre>\n\n<p>In a normal type-parameterized test example, HasLegs test will run for both Cat and Dog type.\nThe problem here is CatTest has its own SetUp(), and so does DogTest(). These needs to be executed in order to initialize the Cat object so I can pass it to the type-parameterized test ( Animal test ). However these SetUp is never called, in fact even the constructor of DogTest() or CatTest() was never invoked. I thought that the type parameterized test will call the corresponding instance of the derived class with the overriden SetUp() ? Or am I missing something here ? </p>\n"}, {"tags": ["c++", "c++11", "search", "stl", "stl-algorithm"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472053489, "post_id": 39127708, "comment_id": 65600964, "body": "What&#39;s wrong with <code>std::find_if</code>?"}, {"owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1472053644, "post_id": 39127708, "comment_id": 65601063, "body": "@Rakete1111: find_if is linear, but the problem is solvable in LogN time"}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 0, "creation_date": 1472053699, "post_id": 39127708, "comment_id": 65601099, "body": "@ Armen Tsirunyan True, even besides that I woudnt know how to use find_if in this context"}, {"owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "edited": false, "score": 0, "creation_date": 1472053777, "post_id": 39127708, "comment_id": 65601141, "body": "@user695652: You would use it like this <code>auto iter = std::find_if(vec.begin(), vec.end(), std::bind(std::greater&lt;int&gt;(), _1, 0));</code> which would return an iterator to the first positive element"}, {"owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "edited": false, "score": 1, "creation_date": 1472053847, "post_id": 39127708, "comment_id": 65601192, "body": "The same can be achieved with a lambda: <code>auto iter = std::find_if(vec.begin(), vec.end(), [](int x){return x &gt; 0;});</code>"}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 0, "creation_date": 1472054340, "post_id": 39127708, "comment_id": 65601527, "body": "Ah right because find_if returns the <i>first</i> element matching the condition"}], "answers": [{"tags": [], "owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "is_accepted": true, "score": 14, "last_activity_date": 1472053597, "last_edit_date": 1472053597, "creation_date": 1472053525, "answer_id": 39127744, "question_id": 39127708, "link": "https://stackoverflow.com/questions/39127708/given-sorted-vector-find-transition-from-negative-to-positive/39127744#39127744", "title": "Given sorted vector find transition from negative to positive", "body": "<p>You should find the <a href=\"http://en.cppreference.com/w/cpp/algorithm/lower_bound\">lower_bound</a> of 0:</p>\n\n<pre><code>auto iter = std::lower_bound(vec.begin(), vec.end(), 0);\n</code></pre>\n\n<p>the resulting iterator will point to the earliest position where you can insert 0 without disrupting the ordering of elements. Similarly, <code>upper_bound</code> will return the right-most such iterator.</p>\n\n<p>The runtime of the algorithm is <code>O(logN)</code></p>\n"}], "owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 2, "accepted_answer_id": 39127744, "answer_count": 1, "score": 6, "last_activity_date": 1472069420, "creation_date": 1472053424, "last_edit_date": 1472054143, "question_id": 39127708, "link": "https://stackoverflow.com/questions/39127708/given-sorted-vector-find-transition-from-negative-to-positive", "title": "Given sorted vector find transition from negative to positive", "body": "<p>Given a sorted <code>std::vector&lt;int&gt;</code>, I would like, using C++11-STD functions, to  find the index where the elements transition from negative to positive.</p>\n\n<p>I am aware that I can implement this using a binary search but I am interested if there is any function in the standard library, similar to the unary<code>find_if</code>, which would facilitate this search (maybe in connection with the right lambda expression).</p>\n"}, {"tags": ["c++", "initialization", "singleton"], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472065640, "post_id": 39127998, "comment_id": 65607830, "body": "Can you quote chapter and verse for initialization of static variables at <i>namespace scope</i> being thread safe?  &#167;6.7 [stmt.dcl] p4: says that &quot;declaration statements&quot; are thread safe, but I think that only applies to declarations at block scope.  (in other words, static declarations inside a function).  To be clear - it would be great if you can."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472067203, "post_id": 39127998, "comment_id": 65608647, "body": "@MartinBonner, never meant to say anything about namespace scope. The context of the question is certainly about function-scope static. Will clarify to be 100% clear."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472067481, "post_id": 39127998, "comment_id": 65608790, "body": "I didn&#39;t read that into the question, but re-reading, I think you are right.  Its an important caveat though, for other people who find this question via google later."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1472067230, "last_edit_date": 1472067230, "creation_date": 1472054316, "answer_id": 39127998, "question_id": 39127703, "link": "https://stackoverflow.com/questions/39127703/c-is-static-variable-initialization-with-atomic/39127998#39127998", "title": "C++ is static variable initialization with = atomic?", "body": "<p>Since C++11, initialization of static variables which are local to functions is atomic and thread safe, so yes, your lines of code is thread-safe and practically equivalent. (Syntax-wise your first version calls for copy constructor, but no compiler will generate it).</p>\n\n<p>However, it is not clear what arguments are going to be provided to your Factory function and where are those  going to be taken from?  </p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1472054317, "last_edit_date": 1592644375, "creation_date": 1472054317, "answer_id": 39127999, "question_id": 39127703, "link": "https://stackoverflow.com/questions/39127703/c-is-static-variable-initialization-with-atomic/39127999#39127999", "title": "C++ is static variable initialization with = atomic?", "body": "<p><code>variable_type variable_name = initializer</code> is always initialization and not default construction and assignment.  [dcl.init]/15 has</p>\n<blockquote>\n<p>The initialization that occurs in the form</p>\n<pre><code>T x = a;\n</code></pre>\n<p>as well as in argument passing, function return, throwing an exception (15.1), handling an exception (15.3), and aggregate member initialization (8.5.1) is called copy-initialization. [ Note: Copy-initialization may invoke a move (12.8). \u2014end note ]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1472067333, "post_id": 39128079, "comment_id": 65608711, "body": "If a I aver see a static initialization which creates threads I would immediately raise concerns with the management about the developer who wrote it :)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1472067639, "post_id": 39128079, "comment_id": 65608864, "body": "Particularly exciting if we are talking about a Windows DLL - where doing almost anything inside DllMain (which is what does the static init), can lead to deadlock on the static loader lock :-)"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1472054546, "last_edit_date": 1495541311, "creation_date": 1472054546, "answer_id": 39128079, "question_id": 39127703, "link": "https://stackoverflow.com/questions/39127703/c-is-static-variable-initialization-with-atomic/39128079#39128079", "title": "C++ is static variable initialization with = atomic?", "body": "<p>8.5.2 is  \"[dcl.init.string]\", and doesn't seem to be relevant.  I think you mean 8.5 para2.  </p>\n\n<p>Yes, this is strictly initialization (specifically <em>copy initialization</em> - see 8.5 para14).</p>\n\n<p>If the declaration is inside a function, then, as <a href=\"https://stackoverflow.com/a/1661564/771073\">the answer to the linked question shows</a>, all is well.</p>\n\n<p>However if this is a static variable at namespace scope, then I can't see anything which requires the initialization to be thread safe.  (That is only a problem if initialization creates threads - but I bet it does.)</p>\n"}], "owner": {"reputation": 1769, "user_id": 974040, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/483eaae1aa0c673b91e343ac04f7b1ac?s=128&d=identicon&r=PG", "display_name": "Michael Conlen", "link": "https://stackoverflow.com/users/974040/michael-conlen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 39128079, "answer_count": 3, "score": 1, "last_activity_date": 1472067230, "creation_date": 1472053377, "last_edit_date": 1495541697, "question_id": 39127703, "link": "https://stackoverflow.com/questions/39127703/c-is-static-variable-initialization-with-atomic", "title": "C++ is static variable initialization with = atomic?", "body": "<p>The Meyers Singleton depends on the fact that <a href=\"https://stackoverflow.com/questions/1661529/is-meyers-implementation-of-singleton-pattern-thread-safe\">local static variable initialization is atomic</a>. </p>\n\n<p>I'm building something similar but I want the singleton to actually be one of a number of derived types. The base class <code>getInstance()</code> method should call a factory that will return the appropriate type. </p>\n\n<p>My first idea is  </p>\n\n<pre><code>static Foo *instance = FooFactory(...);\n</code></pre>\n\n<p>8.5p2 of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow noreferrer\">N3337</a> seems to indicate that this is strictly initialization and not initialization and assignment and I interpret that to mean the entire statement is atomic. Is this correct? </p>\n\n<p>If not would the statement </p>\n\n<pre><code>static Foo *instance(FooFactory(...));\n</code></pre>\n\n<p>be different?</p>\n\n<p>Edit 8.5.2 -> 8.5.p2</p>\n"}, {"tags": ["c++", "web-services", "openxml", "memorystream"], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 3502564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82d03725db855271695f63ae2974112?s=128&d=identicon&r=PG", "display_name": "scraymer", "link": "https://stackoverflow.com/users/3502564/scraymer"}, "is_accepted": true, "score": 2, "last_activity_date": 1472507978, "creation_date": 1472507978, "answer_id": 39215842, "question_id": 39127573, "link": "https://stackoverflow.com/questions/39127573/editing-docx-with-openxml-returns-invalid-memorystream/39215842#39215842", "title": "Editing docx with openxml returns invalid memorystream", "body": "<p>After reviewing the supplied code I have provided a modified code snippet that should fit your needs of returning a modified <code>MemoryStream</code> from a file template using the <code>WordprocessingDocument</code> class by OpenXML. Your web service code snippet provided should work as is.</p>\n\n<pre><code>// file path of template\nstring strTemplate = AppDomain.CurrentDomain.BaseDirectory + \"Report Template.docx\";\n\n// create FileStream to read from template\nFileStream fsTemplate = new FileStream(strTemplate, FileMode.Open, FileAccess.Read);\n\n// create MemoryStream to copy template into and modify as needed\nMemoryStream msDocument = new MemoryStream();\n\n// copy template FileStream into document MemoryStream\nfsTemplate.CopyTo(msDocument);\n\n// close the template FileStream as it is no longer necessary\nfsTemplate.Close();\n\n// reset cursor position of document MemoryStream back to top \n// before modifying\nmsDocument.Position = 0;\n\n// create WordProcessingDocument using the document MemoryStream\nusing (WordprocessingDocument wdDocument = WordprocessingDocument.Open(msDocument, true)) {\n\n    //Access the main Workbook part, which contains all references.\n    MainDocumentPart mainPart = wdDocument.MainDocumentPart;\n\n    /* ... CODE TO UPDATE TEMPLATE ... */\n\n    // save modification to main document part\n    wdDocument.MainDocumentPart.Document.Save();\n\n   // close wdDocument as it is no longer needed\n   wdDocument.Close();\n}\n\n// reset cursor position of document MemoryStream back to top\nmsDocument.Position = 0;\n\n// return memory stream as promised\nreturn msDocument;\n</code></pre>\n"}], "owner": {"reputation": 215, "user_id": 6753111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a6e775cb8b32d0afc516adfd34b30293?s=128&d=identicon&r=PG&f=1", "display_name": "David Cyr", "link": "https://stackoverflow.com/users/6753111/david-cyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 39215842, "answer_count": 1, "score": 1, "last_activity_date": 1472507978, "creation_date": 1472052987, "question_id": 39127573, "link": "https://stackoverflow.com/questions/39127573/editing-docx-with-openxml-returns-invalid-memorystream", "title": "Editing docx with openxml returns invalid memorystream", "body": "<p>I created a DLL that takes a Word template, I have code that edits the document using openXML then the result is sent via memory stream to a web service where the documents is downloaded to the user. The issue is that the memory stream is sending is either the original template document without the updates OR sends the updated Word document XML format where the document is obviously corrupted. Here is the code:</p>\n\n<pre><code>string strTemplate = AppDomain.CurrentDomain.BaseDirectory + \"Report Template.docx\";\n\nWordprocessingDocument wdDocument;\n\n//stream the template\nbyte[] fileBytes = File.ReadAllBytes(strTemplate);\nMemoryStream memstreamDocument = new MemoryStream();\n\nmemstreamDocument.Write(fileBytes, 0, (int)fileBytes.Length);\n\nwdDocument = WordprocessingDocument.Open(memstreamDocument, true);\n\n//CODE TO UPDATE TEMPLATE\n\n//Save entire document\nwdDocument.MainDocumentPart.Document.Save();\n</code></pre>\n\n<p>After saving the document, if using the following code the memory stream returns the original template without any updates to the document:</p>\n\n<pre><code>return memstreamDocument;\n</code></pre>\n\n<p>If using the following code the memory stream returns the openXML data with the updates but the document is corrupted:</p>\n\n<pre><code>MemoryStream memstreamUpdatedDocument = new MemoryStream();\nStream streamDocument = wdDocument.MainDocumentPart.GetStream();\nstreamDocument.CopyTo(memstreamUpdatedDocument);\nreturn memstreamUpdatedDocument;\n</code></pre>\n\n<p>Here is my code in the web service which works fine:</p>\n\n<pre><code>HttpResponse response = HttpContext.Current.Response;\nMemoryStream stream = GR.GetReport(\"\", intReportID, Culture, ConnectionString, false);\n\nresponse.Clear();\nresponse.ClearHeaders();\nresponse.ClearContent();\nresponse.AddHeader(\"content-disposition\", \"attachment; filename=\\\"\" + \"Report_\" + intReportID+ \".docx\\\"\");\nresponse.ContentType = \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\nresponse.ContentEncoding = Encoding.GetEncoding(\"ISO-8859-1\");\nstream.Position = 0;\nstream.CopyTo(response.OutputStream);\nresponse.End();\nreturn response;\n</code></pre>\n"}, {"tags": ["java", "c++", "multithreading", "java-native-interface", "uncaughtexceptionhandler"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 788767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/155d7622ab4f89509ad38abc3419e8c0?s=128&d=identicon&r=PG", "display_name": "user788767", "link": "https://stackoverflow.com/users/788767/user788767"}, "edited": false, "score": 0, "creation_date": 1473436942, "post_id": 39129439, "comment_id": 66155774, "body": "James, thanks so much for your clarification, quite helpful. We do invoke the Java method using a jenv.CheckException(...) method, and the exception is captured in C++. So I think the code is safe to run, but we just want to log all the exceptions in Java instead of C. However, seems it can&#39;t be achieved by UncaughtExceptionHandler."}], "tags": [], "owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "is_accepted": true, "score": 1, "last_activity_date": 1472059870, "last_edit_date": 1472059870, "creation_date": 1472059162, "answer_id": 39129439, "question_id": 39127512, "link": "https://stackoverflow.com/questions/39127512/java-uncaughtexceptionhandler-havent-got-any-exception-using-jni/39129439#39129439", "title": "Java UncaughtExceptionHandler haven&#39;t got any exception using JNI", "body": "<p>It sounds like you are talking about the <em>Java Invocation API</em> (i.e., you are calling Java methods from within a C++ program, as opposed to simple JNI where the calls go the other way.)</p>\n\n<p>I'm not a big expert, but I have worked with the Java Invocation API.</p>\n\n<p>As far as I know, an uncaught exception handler only will be invoked when an exception is thrown by a Java thread's <code>run()</code> method.  But there <em>isn't</em> any <code>run()</code> method in a thread that was created by C/C++ code.</p>\n\n<p>I wrote C, not C++, so my calls into Java all looked like </p>\n\n<pre><code>jobject return_value = (*env)-&gt;CallObjectMethod(env, instance, method_id, ...);\n</code></pre>\n\n<p>When that's called from C, it always returns, but before you use the <code>return_value</code>, you have to check whether the method returned normally or threw an exception.</p>\n\n<p>If it threw an exception, there's no way for the exception to be \"uncaught\",  If the C code doesn't call <code>(*env)-&gt;ExceptionClear(env)</code> (i.e., if the C code doesn't \"catch\" the exception), then I don't remember what happens, but I don't think it's good.</p>\n"}], "owner": {"reputation": 73, "user_id": 788767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/155d7622ab4f89509ad38abc3419e8c0?s=128&d=identicon&r=PG", "display_name": "user788767", "link": "https://stackoverflow.com/users/788767/user788767"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 39129439, "answer_count": 1, "score": 7, "last_activity_date": 1472059870, "creation_date": 1472052822, "last_edit_date": 1472054683, "question_id": 39127512, "link": "https://stackoverflow.com/questions/39127512/java-uncaughtexceptionhandler-havent-got-any-exception-using-jni", "title": "Java UncaughtExceptionHandler haven&#39;t got any exception using JNI", "body": "<p>I have a Java library which run a series of tasks. And I registered a default uncaught exception handler using:</p>\n\n<p><code>Thread.setDefaultUncaughtExceptionHandler(new JavaUncaughtExceptionHandler());</code></p>\n\n<p>The UncaughtExceptionHandler implements <code>UncaughtExceptionHandler</code> and only log the error information in <code>STDERR</code>.</p>\n\n<p>My Java library is called through JNI from C++ code, and the JNI is calling it with <code>ExceptionCheck()</code> and log the error as FATAL in C++. </p>\n\n<p>The problem is:</p>\n\n<p>In the runtime, when there's a <code>RuntimeException</code> (or any other uncaught exception) happens in my Java code, the error got captured in C++ instead of my <code>JavaUncaughtExceptionHandler</code> registered as thread default uncaught exception handler. </p>\n\n<ol>\n<li>Is that the excepted behaviour? </li>\n<li>When will the <code>DefaultUncaughtExceptionHandler</code> actually got called? I know before thread got shutdown, but when specifically in JNI case. Is that called before return to C++ or after C++ code finished as well). I think it's related to the thread management in JNI, please share any related information as well.</li>\n<li>Is there anyway I can catch all the exceptions in my Java code (other alternative way except put a <code>try</code>/<code>catch</code> blocks) </li>\n</ol>\n\n<p>Thanks so much.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1472052486, "post_id": 39127389, "comment_id": 65600334, "body": "Well, the Chrome is based <a href=\"https://www.chromium.org/\" rel=\"nofollow noreferrer\">Chromium</a>, which is open source. You can have a look :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472052525, "post_id": 39127389, "comment_id": 65600355, "body": "You may want to read <a href=\"http://stackoverflow.com/help/on-topic\">what you can ask here</a> befor posting such overly broad question."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5458991, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e51c60688b68e4d6bc7c5314de7f12d?s=128&d=identicon&r=PG", "display_name": "Aakarsh", "link": "https://stackoverflow.com/users/5458991/aakarsh"}, "edited": false, "score": 0, "creation_date": 1472055157, "post_id": 39127489, "comment_id": 65602059, "body": "Is this how chrome was made?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1472055625, "post_id": 39127489, "comment_id": 65602334, "body": "You may want to add <a href=\"http://www.sfml-dev.org\" rel=\"nofollow noreferrer\">SFML</a> and <a href=\"https://www.libsdl.org\" rel=\"nofollow noreferrer\">SDL</a> to that list :)"}], "tags": [], "owner": {"reputation": 1176, "user_id": 698689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bfb5a741c50baa43e5f32697105058?s=128&d=identicon&r=PG", "display_name": "George Ga&#225;l", "link": "https://stackoverflow.com/users/698689/george-ga%c3%a1l"}, "is_accepted": false, "score": 2, "last_activity_date": 1593004267, "last_edit_date": 1593004267, "creation_date": 1472052753, "answer_id": 39127489, "question_id": 39127389, "link": "https://stackoverflow.com/questions/39127389/c-for-graphical-software/39127489#39127489", "title": "C++ for graphical software", "body": "<p>C++ doesn't include any graphical library in it. So you need to use any existing third-party library or API of operating system.</p>\n<p>For example, there exists next graphical libraries, which supports C++:</p>\n<ol>\n<li>MFC</li>\n<li>Qt</li>\n<li>wxWidgets</li>\n<li>TCL/Tk</li>\n<li>GTK+</li>\n</ol>\n<p>Some of them are object oriented and some - not. Some of them are portable, some - not. Some of them are proprietary, some - not.</p>\n<p>Also you always can use low-level API's such as Win32 API</p>\n"}], "owner": {"reputation": 55, "user_id": 5458991, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e51c60688b68e4d6bc7c5314de7f12d?s=128&d=identicon&r=PG", "display_name": "Aakarsh", "link": "https://stackoverflow.com/users/5458991/aakarsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1472052529, "answer_count": 1, "score": -2, "last_activity_date": 1593004267, "creation_date": 1472052415, "question_id": 39127389, "link": "https://stackoverflow.com/questions/39127389/c-for-graphical-software", "closed_reason": "Needs more focus", "title": "C++ for graphical software", "body": "<p>I'm in the process of learning C++ and was wondering about the graphical implications of C++.  </p>\n\n<p>I know Chrome was developed in C++, but I don't see how to replicate it or create any sort of GUI.</p>\n\n<p>How is Chrome programmed for the UI? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 2, "creation_date": 1472051865, "post_id": 39127171, "comment_id": 65599902, "body": "It&#39;s not so bad with lambdas."}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1472051923, "post_id": 39127171, "comment_id": 65599938, "body": "@LogicStuff I still think is more readable with names than with lambdas"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1472052104, "post_id": 39127171, "comment_id": 65600065, "body": "Supporting unary and binary function at same time might be confusing."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1472052234, "post_id": 39127171, "comment_id": 65600157, "body": "@Felics  In general I agree with you. However in this expression std::less_equal&lt;int&gt;( 42 ) there is not clear whether 42 is the left of the right operand of the comparison."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1472052252, "post_id": 39127171, "comment_id": 65600171, "body": "What if I want 42 to go on the left? Do we need 2 unary functions for each binary one? How do we call them?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472052327, "post_id": 39127171, "comment_id": 65600229, "body": "Note that <a href=\"http://en.cppreference.com/w/cpp/utility/functional/binary_function\" rel=\"nofollow noreferrer\">std::binary_function</a> and <a href=\"http://en.cppreference.com/w/cpp/utility/functional/unary_function\" rel=\"nofollow noreferrer\">std::unary_function</a> were deprecated in C++11 and will be removed in C++17."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472052530, "post_id": 39127171, "comment_id": 65600361, "body": "@Felics you can name your lambdas <code>const auto some_name = []{};</code> and then just use the named object."}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1472054395, "post_id": 39127171, "comment_id": 65601568, "body": "@VladfromMoscow maybe the name is not the best, <code>less_equal_than</code> or <code>less_than</code> might be a better name"}], "answers": [{"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 4, "creation_date": 1472052019, "post_id": 39127237, "comment_id": 65600007, "body": "I do not think so. Using a meaningfull name for a functional object  instead of a lambda makes the code more readable and clear because the name of the functional object is well-known."}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1472052064, "post_id": 39127237, "comment_id": 65600038, "body": "I kind of agree with @VladfromMoscow, it&#39;s easier to read the intent with named functions"}, {"owner": {"reputation": 3510, "user_id": 4128833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079bb7879c594630684e2c9ed4ecad7e?s=128&d=identicon&r=PG", "display_name": "paul-g", "link": "https://stackoverflow.com/users/4128833/paul-g"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1472052361, "post_id": 39127237, "comment_id": 65600252, "body": "@VladfromMoscow agreed in most cases :) ! my personal preference is lambdas for anything ad-hoc less than 1 or 2 lines; named functions for everything else; from my perspective having to remember X unary predicates is a bit more hassle than having to remember one common mechanism; but lambdas can become complex to read and understand when they get large;"}], "tags": [], "owner": {"reputation": 3510, "user_id": 4128833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079bb7879c594630684e2c9ed4ecad7e?s=128&d=identicon&r=PG", "display_name": "paul-g", "link": "https://stackoverflow.com/users/4128833/paul-g"}, "is_accepted": true, "score": 6, "last_activity_date": 1472053212, "last_edit_date": 1472053212, "creation_date": 1472051926, "answer_id": 39127237, "question_id": 39127171, "link": "https://stackoverflow.com/questions/39127171/std-unary-functions-for-common-operations/39127237#39127237", "title": "std unary functions for common operations", "body": "<p>IMHO since C++11/14, lambdas make this sort of predicates superfluous?</p>\n\n<pre><code>find_if(begin(v), end(v), [](auto x){ return x &lt;= 42; });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1472053354, "last_edit_date": 1472053354, "creation_date": 1472052460, "answer_id": 39127401, "question_id": 39127171, "link": "https://stackoverflow.com/questions/39127171/std-unary-functions-for-common-operations/39127401#39127401", "title": "std unary functions for common operations", "body": "<p>I think there is no technical reason why your second approach should be disallowed. Prior to deprecation, <code>std::bind2nd</code> helper function would come very close to your desired approach:</p>\n\n<pre><code>std::find_if(std::begin(v), std::end(v), std::bind2nd(std::less_equal&lt;int&gt;(), 42));\n</code></pre>\n\n<p>Of course you can always make your own helper - it is very short:</p>\n\n<pre><code>template &lt;typename T&gt; auto cmp_less_equal(const T&amp; x) {\n  return std::bind(std::less_equal&lt;T&gt;(), std::placeholders::_1, x);\n}\n</code></pre>\n\n<p>Now you can write</p>\n\n<pre><code>std::find_if(std::begin(v), std::end(v), cmp_less_equal(42));\n</code></pre>\n\n<p>using your own wrapper (<a href=\"http://ideone.com/CKCau7\" rel=\"nofollow\">demo</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1472054339, "post_id": 39127906, "comment_id": 65601526, "body": "Yes, this is an option, but the whole idea of the standard library is to provide common functionality even if it is really easy to implement. There are many examples of one liners in the standard library just because they happen to be used very often"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1472054729, "post_id": 39127906, "comment_id": 65601795, "body": "I&#39;m not trying to argue what should/should not be in the standard. I&#39;m just attempting to provide a way to solve your problem :-)"}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1472054895, "post_id": 39127906, "comment_id": 65601886, "body": "My question was more about the reasons behind omitting this functionality in the standard library than to solve the problem and yes, I think this is a more elegant solution than the bind one I used as a sample. +1:)"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1472054021, "creation_date": 1472054021, "answer_id": 39127906, "question_id": 39127171, "link": "https://stackoverflow.com/questions/39127171/std-unary-functions-for-common-operations/39127906#39127906", "title": "std unary functions for common operations", "body": "<p>How about you just give a lambda a name?</p>\n\n<pre><code>const auto cmp_less_eq = [](auto x){ return x &lt;= 42; };\nconst auto result = find_if(begin(v), end(v), cmp_less_eq);\n</code></pre>\n"}], "owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 39127237, "answer_count": 3, "score": 3, "last_activity_date": 1472054021, "creation_date": 1472051704, "question_id": 39127171, "link": "https://stackoverflow.com/questions/39127171/std-unary-functions-for-common-operations", "title": "std unary functions for common operations", "body": "<p>Is there a reason to not have unary versions for the binary functions from <a href=\"http://en.cppreference.com/w/cpp/header/functional\" rel=\"nofollow\">functional</a>?</p>\n\n<p>I know is simple to create unary versions by using <code>std::bind</code>, but the code looks ugly:</p>\n\n<pre><code>std::find_if(std::begin(v), std::end(v), std::bind(std::less_equal&lt;int&gt;(), std::placeholders::_1, 42));\n</code></pre>\n\n<p>I think it would be much nicer to have something like:</p>\n\n<pre><code>std::find_if(std::begin(v), std::end(v), std::less_equal&lt;int&gt;(42));\n</code></pre>\n"}, {"tags": ["c++", "regex", "casting", "stdstring"], "answers": [{"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 2, "last_activity_date": 1472051053, "last_edit_date": 1495540865, "creation_date": 1472051053, "answer_id": 39126962, "question_id": 39126756, "link": "https://stackoverflow.com/questions/39126756/basic-regex-throws-bad-cast-with-char32-t/39126962#39126962", "title": "basic_regex throws bad_cast with char32_t", "body": "<p>You can find here: <a href=\"http://en.cppreference.com/w/cpp/regex/regex_traits\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/regex/regex_traits</a>:</p>\n\n<blockquote>\n  <p>To use std::basic_regex with other character types (for example, char32_t), a user-provided trait class must be used.</p>\n</blockquote>\n\n<p>so you would have to implement <code>std::regex_traits&lt;char32_t&gt;</code></p>\n\n<p>and to see why there is no definition for it see here: <a href=\"https://stackoverflow.com/questions/33708892/why-is-there-no-definition-for-stdregex-traitschar32-t-and-thus-no-stdbas\">Why is there no definition for std::regex_traits&lt;char32_t&gt; (and thus no std::basic_regex&lt;char32_t&gt;) provided?</a></p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 11192546, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bHkEpj58BPo/AAAAAAAAAAI/AAAAAAAAAJU/EZWONML2Ir4/photo.jpg?sz=128", "display_name": "Alex Angel", "link": "https://stackoverflow.com/users/11192546/alex-angel"}, "edited": false, "score": 0, "creation_date": 1614568596, "post_id": 55323606, "comment_id": 117416130, "body": "Could you please provide an example?"}, {"owner": {"reputation": 9718, "user_id": 1424244, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d8d370542399af1afe3202ed1fc1ab88?s=128&d=identicon&r=PG", "display_name": "IS4", "link": "https://stackoverflow.com/users/1424244/is4"}, "reply_to_user": {"reputation": 101, "user_id": 11192546, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bHkEpj58BPo/AAAAAAAAAAI/AAAAAAAAAJU/EZWONML2Ir4/photo.jpg?sz=128", "display_name": "Alex Angel", "link": "https://stackoverflow.com/users/11192546/alex-angel"}, "edited": false, "score": 0, "creation_date": 1614607910, "post_id": 55323606, "comment_id": 117428901, "body": "@AlexAngel You can find a working implementation <a href=\"https://github.com/IllidanS4/PawnPlus/blob/4038e8e0ae4d3a6dcd376f91466527cbee8065b7/plugins/src/modules/strings.cpp#L164\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/IllidanS4/PawnPlus/blob/4038e8e0ae4d3a6dcd376f91466527cbee8065b7/plugins/src/modules/strings.h#L356\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 9718, "user_id": 1424244, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d8d370542399af1afe3202ed1fc1ab88?s=128&d=identicon&r=PG", "display_name": "IS4", "link": "https://stackoverflow.com/users/1424244/is4"}, "is_accepted": false, "score": 1, "last_activity_date": 1553429134, "creation_date": 1553429134, "answer_id": 55323606, "question_id": 39126756, "link": "https://stackoverflow.com/questions/39126756/basic-regex-throws-bad-cast-with-char32-t/55323606#55323606", "title": "basic_regex throws bad_cast with char32_t", "body": "<p>On GCC or Clang, the code compiles fine even with custom regex traits, but fails at runtime with <code>std::bad_cast</code>. If you've got yourself here, the issue comes from <code>std::use_facet&lt;std::ctype&lt;char32_t&gt;&gt;</code> throwing the error, because the current locale doesn't support it. You have to specialize <code>std::ctype&lt;char32_t&gt;</code> and set the global locale via <code>std::locale::global</code> to a new locale constructed using the old one and the specialized facet.</p>\n"}], "owner": {"reputation": 1276, "user_id": 3496846, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61b8fab1c7d87e4da4c841accaf11a1b?s=128&d=identicon&r=PG&f=1", "display_name": "user3496846", "link": "https://stackoverflow.com/users/3496846/user3496846"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 39126962, "answer_count": 2, "score": 1, "last_activity_date": 1553429134, "creation_date": 1472050526, "question_id": 39126756, "link": "https://stackoverflow.com/questions/39126756/basic-regex-throws-bad-cast-with-char32-t", "title": "basic_regex throws bad_cast with char32_t", "body": "<p>Why does the following code generate <code>std::bad_cast</code> exception?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::basic_string&lt;char32_t&gt; reg = U\"^\\\\w\";\n\n    try\n    {\n        std::basic_regex&lt;char32_t&gt; tagRegex(reg);\n    }\n    catch(std::exception &amp;e)\n    {\n        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>This sample on Ideone for convenience: <a href=\"https://ideone.com/Saea88\" rel=\"nofollow\">https://ideone.com/Saea88</a></p>\n\n<p>Using <code>char</code> or <code>wchar</code> instead of <code>char32_t</code> runs without throwing though (proof: <a href=\"https://ideone.com/OBlXed\" rel=\"nofollow\">https://ideone.com/OBlXed</a>).</p>\n"}, {"tags": ["c++", "algorithm", "combinations"], "comments": [{"owner": {"reputation": 2451, "user_id": 4388775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajn8C.jpg?s=128&g=1", "display_name": "L. Meyer", "link": "https://stackoverflow.com/users/4388775/l-meyer"}, "edited": false, "score": 1, "creation_date": 1472050800, "post_id": 39126712, "comment_id": 65599079, "body": "Is it normal that 4 appears in <code>{4, 7, 9}</code> AND <code>{1, 2, 4}</code> ?"}, {"owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "reply_to_user": {"reputation": 2451, "user_id": 4388775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajn8C.jpg?s=128&g=1", "display_name": "L. Meyer", "link": "https://stackoverflow.com/users/4388775/l-meyer"}, "edited": false, "score": 0, "creation_date": 1472050851, "post_id": 39126712, "comment_id": 65599127, "body": "Wow today is not my day. It is not supposed to be. I&#39;ll fix that."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1472053232, "post_id": 39126712, "comment_id": 65600808, "body": "&quot;is this actually feasible in terms of run time and memory?&quot; We can bound the number of operations by 50 choose 3 which is 19600, so probably not so bad. Combinatorial complexity, though, is not great in general."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1472053266, "post_id": 39126712, "comment_id": 65600834, "body": "does the order of the <i>groups</i> matter? would <code>{ {3,7,9}, {1,2,4}, {5,6,8} }</code> be a valid member of the same solution as <code>{ {1,2,4}, {3,7,9}, {5,6,8} }</code>?"}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 0, "creation_date": 1472053495, "post_id": 39126712, "comment_id": 65600967, "body": "Do you want to group the numbers 3 by 3 in <i>n</i> groups or in 3 groups of <i>n</i> numbers ? You inconveniently chose a set of 3&#178; elements, so that isn&#39;t clear from your example."}, {"owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1472053652, "post_id": 39126712, "comment_id": 65601070, "body": "@jaggedSpire the order of the groups does not matter, so those solutions are the same"}, {"owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "reply_to_user": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 0, "creation_date": 1472053764, "post_id": 39126712, "comment_id": 65601132, "body": "@Nelxiost I&#39;m not sure what you mean. I want groups of three. so if there were 12 numbers, there would be 4 groups of numbers, each with 3 numbers in them."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1472061976, "post_id": 39126712, "comment_id": 65605800, "body": "For 10 groups of 3 (30 numbers), there are 1,208,883,745,669,600,000 possible partitionings, so enumerating all of them is probably impractical."}, {"owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1472062052, "post_id": 39126712, "comment_id": 65605843, "body": "@rici thank you, is there a link or a formula you used to calculate that number? I&#39;m just wondering out of curiousity"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1472062113, "post_id": 39126712, "comment_id": 65605872, "body": "Now I see such sequence: 1, 10, 280, 15400, 1401400...."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1472062187, "post_id": 39126712, "comment_id": 65605924, "body": "@rici considering the request of OP <i>&quot;The order of the numbers in the groups does not matter, nor does the order of the groups in the entire example.&quot;</i> and <i>&quot;excluding the ones that have a number appearing in multiple groups&quot;</i> what are the solutions that I&#39;m not counting in my answer?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1472062191, "post_id": 39126712, "comment_id": 65605926, "body": "@Dillydill123: Based on m69&#39;s correct algorithm, the formula for k groups is 3k-1*3k-2*3k-4*3k-5*...*1/2**k. In other words, the product of all the numbers from 1 to 3k which are not 0 mod 3, divided by 2 to the power of k. I computed it with python."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1472062248, "post_id": 39126712, "comment_id": 65605949, "body": "@Bob_: since you only show 12 out of the claimed 55, how would I know which ones are missing?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1472062322, "post_id": 39126712, "comment_id": 65605985, "body": "@rici look better."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1472062604, "post_id": 39126712, "comment_id": 65606136, "body": "@Bob__: I look just fine, thanks :) I think you meant, &quot;please look again, I&#39;ve edited my answer&quot;. None of your partitions includes, for example, the triple <code>{1,6,7}</code>, so there are 280 partitions right there. (I just took that one at random) One concrete example: <code>{{1,6,7},{2,3,4},{5,8,9},{10,11,12}}</code>"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 2, "creation_date": 1472062951, "post_id": 39126712, "comment_id": 65606346, "body": "Short formula: <code>(3k)! &#47; (k! * 6^k)</code>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1472063488, "post_id": 39126712, "comment_id": 65606655, "body": "@rici Thanks, I see the error now (I only considered to mix two different groups, while I could take a number form three groups instead)."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "reply_to_user": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1472063906, "post_id": 39126712, "comment_id": 65606889, "body": "@MBo I&#39;m indeed getting 1, 10, 280, 15400, 1401400, 190590400 solutions."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1472101721, "post_id": 39126712, "comment_id": 65618753, "body": "The size of the output is <a href=\"https://oeis.org/search?q=1%2C10%2C280%2C15400&amp;language=english&amp;go=Search\" rel=\"nofollow noreferrer\">this sequence</a>. It is totally infeasible for 30 elements."}], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1472050626, "creation_date": 1472050626, "answer_id": 39126788, "question_id": 39126712, "link": "https://stackoverflow.com/questions/39126712/algorithm-that-can-create-all-combinations-and-all-groups-of-those-combinations/39126788#39126788", "title": "Algorithm that can create all combinations and all groups of those combinations", "body": "<p>For n things taken 3 at a time, you could use 3 nested loops:</p>\n\n<pre><code>    for(k = 0; k &lt; n-2; k++){\n        for(j = k+1; j &lt; n-1; j++){\n            for(i = j+1; i &lt; n  ; i++){\n                ...  S[k] ... S[j] ... S[i]\n            }\n        }\n    }\n</code></pre>\n\n<p>For a generic solution of n things taken k at a time, you could use an array of k counters.</p>\n"}, {"tags": [], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "is_accepted": false, "score": 0, "last_activity_date": 1472057311, "creation_date": 1472057311, "answer_id": 39128956, "question_id": 39126712, "link": "https://stackoverflow.com/questions/39126712/algorithm-that-can-create-all-combinations-and-all-groups-of-those-combinations/39128956#39128956", "title": "Algorithm that can create all combinations and all groups of those combinations", "body": "<p>I think You can solve it by using coin change problem with dynamic programming, just assume You are looking for change of 3 and every index in array is a coin value 1, then just output coins(values in Your array) that has been found.\nLink: <a href=\"https://www.youtube.com/watch?v=18NVyOI_690\" rel=\"nofollow\">https://www.youtube.com/watch?v=18NVyOI_690</a></p>\n"}, {"comments": [{"owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "edited": false, "score": 0, "creation_date": 1472060101, "post_id": 39129475, "comment_id": 65604795, "body": "This looks interesting, and may be just what I need. I noticed that you have an error in the second set after you say &quot;recurse with the rest of the values.&quot; The number 7 appears in more than one group. When you talk about spots (a) (b) and (c), are these only for the first set of 3 numbers? Also, can you explain how I recurse with the rest of the values? I&#39;m not seeing the whole picture here"}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "reply_to_user": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "edited": false, "score": 0, "creation_date": 1472062101, "post_id": 39129475, "comment_id": 65605865, "body": "@Dillydill123 I&#39;ve expanded the answer a bit on a computer with a working keyboard :-)"}, {"owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "edited": false, "score": 1, "creation_date": 1472062457, "post_id": 39129475, "comment_id": 65606061, "body": "Thank you for your very in-depth answer!! Unfortunately with my large sample sizes it will not be feasible to create all combinations. I will accept your answer though!"}, {"owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "edited": false, "score": 0, "creation_date": 1472065460, "post_id": 39129475, "comment_id": 65607744, "body": "could you tell me the purpose of the array g? I&#39;m not familiar with JavaScript and right now it doesn&#39;t look like it does anything to me."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "reply_to_user": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "edited": false, "score": 0, "creation_date": 1472076243, "post_id": 39129475, "comment_id": 65612805, "body": "@Dillydill123 That was a left-over from a first version of the code, and I forgot to remove it; sorry about that. I&#39;ve fixed the code example a bit."}], "tags": [], "owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "is_accepted": true, "score": 12, "last_activity_date": 1570375491, "last_edit_date": 1570375491, "creation_date": 1472059335, "answer_id": 39129475, "question_id": 39126712, "link": "https://stackoverflow.com/questions/39126712/algorithm-that-can-create-all-combinations-and-all-groups-of-those-combinations/39129475#39129475", "title": "Algorithm that can create all combinations and all groups of those combinations", "body": "<p>You can do this recursively, and avoid duplicates, if you keep the first element fixed in each recursion, and only make groups of 3 with the values in order, eg:</p>\n\n<blockquote>\n  <p>{1,2,3,4,5,6,7,8,9}  </p>\n</blockquote>\n\n<p>Put the lowest element in the first spot (a), and keep it there:  </p>\n\n<blockquote>\n  <p>{a,b,c} = {1, *, *}  </p>\n</blockquote>\n\n<p>For the second spot (b), iterate over every value from the second-lowest to the second-highest:  </p>\n\n<blockquote>\n  <p>{a,b,c} = {1, 2~8, *}</p>\n</blockquote>\n\n<p>For the third spot (c), iterate over every value higher than the second value:  </p>\n\n<blockquote>\n  <p>{1, 2~8, b+1~9}  </p>\n</blockquote>\n\n<p>Then recurse with the rest of the values.  </p>\n\n<blockquote>\n  <p>{1,2,3} {4,5,6} {7,8,9}<br>\n  {1,2,3} {4,5,7} {6,8,9}<br>\n  {1,2,3} {4,5,8} {6,7,9}<br>\n  {1,2,3} {4,5,9} {6,7,8}<br>\n  {1,2,3} {4,6,7} {5,8,9}<br>\n  {1,2,3} {4,6,8} {5,7,9}<br>\n  {1,2,3} {4,6,9} {5,7,8}<br>\n  {1,2,3} {4,7,8} {5,6,9}<br>\n  {1,2,3} {4,7,9} {5,6,8}<br>\n  {1,2,3} {4,8,9} {5,6,7}<br>\n  {1,2,4} {3,5,6} {7,8,9}<br>\n  ...<br>\n  {1,8,9} {2,6,7} {3,4,5}</p>\n</blockquote>\n\n<p>Wen I say \"in order\", that doesn't have to be any specific order (numerical, alphabetical...), it can just be the original order of the input. You can avoid having to re-sort the input of each recursion if you make sure to pass the rest of the values on to the next recursion in the order you received them.</p>\n\n<hr>\n\n<p>A run-through of the recursion:  </p>\n\n<p>Let's say you get the input {1,2,3,4,5,6,7,8,9}. As the first element in the group, you take the first element from the input, and for the other two elements, you iterate over the other values:  </p>\n\n<blockquote>\n  <p>{1,2,3}<br>\n  {1,2,4}<br>\n  {1,2,5}<br>\n  {1,2,6}<br>\n  {1,2,7}<br>\n  {1,2,8}<br>\n  {1,2,9}<br>\n  {1,3,4}<br>\n  {1,3,5}<br>\n  {1,3,6}<br>\n  ...<br>\n  {1,8,9}  </p>\n</blockquote>\n\n<p>making sure the third element always comes after the second element, to avoid duplicates like:  </p>\n\n<blockquote>\n  <p>{1,3,5} &lrarr; {1,5,3}  </p>\n</blockquote>\n\n<p>Now, let's say that at a certain point, you've selected this as the first group:  </p>\n\n<blockquote>\n  <p>{1,3,7}  </p>\n</blockquote>\n\n<p>You then pass the rest of the values onto the next recursion:  </p>\n\n<blockquote>\n  <p>{2,4,5,6,8,9}  </p>\n</blockquote>\n\n<p>In this recursion, you apply the same rules as for the first group: take the first element as the first element in the group and keep it there, and iterate over the other values for the second and third element:  </p>\n\n<blockquote>\n  <p>{2,4,5}<br>\n  {2,4,6}<br>\n  {2,4,8}<br>\n  {2,4,9}<br>\n  {2,5,6}<br>\n  {2,5,8}<br>\n  {2,5,9}<br>\n  {2,6,7}<br>\n  ...<br>\n  {2,8,9}  </p>\n</blockquote>\n\n<p>Now, let's say that at a certain point, you've selected this as the second group:  </p>\n\n<blockquote>\n  <p>{2,5,6}  </p>\n</blockquote>\n\n<p>You then pass the rest of the values onto the next recursion:  </p>\n\n<blockquote>\n  <p>{4,8,9}  </p>\n</blockquote>\n\n<p>And since this is the last group, there is only one possibility, and so this particular recursion would end in the combination:  </p>\n\n<blockquote>\n  <p>{1,3,7} {2,5,6} {4,8,9}  </p>\n</blockquote>\n\n<p>As you see, you don't have to sort the values at any point, as long as you pass them onto the next recursion in the order you recevied them. So if you receive e.g.:  </p>\n\n<blockquote>\n  <p>{q,w,e,r,t,y,u,i,o}  </p>\n</blockquote>\n\n<p>and you select from this the group:  </p>\n\n<blockquote>\n  <p>{q,r,u}  </p>\n</blockquote>\n\n<p>then you should pass on:  </p>\n\n<blockquote>\n  <p>{w,e,t,y,i,o}  </p>\n</blockquote>\n\n<hr>\n\n<p>Here's a JavaScript snippet which demonstrates the method; it returns a 3D array with combinations of groups of elements.<br>\n<i>(The filter function creates a copy of the input array, with elements 0, i and j removed.)</i>  </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function clone2D(array) {\r\n    var clone = [];\r\n    for (var i = 0; i &lt; array.length; i++) clone.push(array[i].slice());\r\n    return clone;\r\n}\r\n\r\nfunction groupThree(input) {\r\n    var result = [], combination = [];\r\n    group(input, 0);\r\n    return result;\r\n\r\n    function group(input, step) {\r\n        combination[step] = [input[0]];\r\n        for (var i = 1; i &lt; input.length - 1; i++) {\r\n            combination[step][1] = input[i];\r\n            for (var j = i + 1; j &lt; input.length; j++) {\r\n                combination[step][2] = input[j];\r\n                if (input.length &gt; 3) {\r\n                    var rest = input.filter(function(elem, index) {\r\n                        return index &amp;&amp; index != i &amp;&amp; index != j;\r\n                    });\r\n                    group(rest, step + 1);\r\n                }\r\n                else result.push(clone2D(combination));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nvar result = groupThree([1,2,3,4,5,6,7,8,9]);\r\nfor (var r in result) document.write(JSON.stringify(result[r]) + \"&lt;br&gt;\");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 653, "user_id": 6605200, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7nmUU.png?s=128&g=1", "display_name": "Dillydill123", "link": "https://stackoverflow.com/users/6605200/dillydill123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2237, "favorite_count": 3, "accepted_answer_id": 39129475, "answer_count": 3, "score": 4, "last_activity_date": 1570375491, "creation_date": 1472050409, "last_edit_date": 1472061236, "question_id": 39126712, "link": "https://stackoverflow.com/questions/39126712/algorithm-that-can-create-all-combinations-and-all-groups-of-those-combinations", "title": "Algorithm that can create all combinations and all groups of those combinations", "body": "<p>Let's say I have a set of elements <code>S = { 1, 2, 3, 4, 5, 6, 7, 8, 9 }</code></p>\n\n<p>I would like to create combinations of 3 and group them in a way such that no number appears in more than one combination. </p>\n\n<p>Here is an example:\n<code>{ {3, 7, 9}, {1, 2, 4}, {5, 6, 8} }</code></p>\n\n<p>The order of the numbers in the groups does not matter, nor does the order of the groups in the entire example.</p>\n\n<p>In short, I want every possible group combination from every possible combination in the original set, excluding the ones that have a number appearing in multiple groups.</p>\n\n<p>My question: is this actually feasible in terms of run time and memory? My sample sizes could be somewhere around 30-50 numbers.</p>\n\n<p>If so, what is the best way to create this algorithm? Would it be best to create all possible combinations, and choose the groups only if the number hasn't already appeared? </p>\n\n<p>I'm writing this in Qt 5.6, which is a C++ based framework.</p>\n"}, {"tags": ["c++", "arduino", "byte", "rs485"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472055979, "post_id": 39126690, "comment_id": 65602545, "body": "Several critical bugs in this code.  First one certainly is that your DataReceived event doesn&#39;t actually receive a message.  You normally only get one or two bytes, serial ports are slow and modern computers are fast.  Which makes setting Message_Length back to 0 a bug.  And an especially nasty one, your BeginInvoke() call does not pass the data you received.  Now you have a threading race bug, the DataReceived event keeps in firing and modifying Msg while your UI thread displays Msg."}, {"owner": {"reputation": 161, "user_id": 5681487, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-xKRBhpyrP30/AAAAAAAAAAI/AAAAAAAACEs/7xTFokEGQaI/photo.jpg?sz=128", "display_name": "Gavin Hannah", "link": "https://stackoverflow.com/users/5681487/gavin-hannah"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472108636, "post_id": 39126690, "comment_id": 65621695, "body": "Ok, so how do I pass the data? Is it instead of the keyword <code>this</code> in the  <code>BeginInvoke </code> method?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472109099, "post_id": 39126690, "comment_id": 65622001, "body": "No.  Use Invoke() instead of BeginInvoke() so this bug cannot bite.  Add some Debug::Print() statements so you can see what you actually receive.  Test at a low baudrate."}, {"owner": {"reputation": 161, "user_id": 5681487, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-xKRBhpyrP30/AAAAAAAAAAI/AAAAAAAACEs/7xTFokEGQaI/photo.jpg?sz=128", "display_name": "Gavin Hannah", "link": "https://stackoverflow.com/users/5681487/gavin-hannah"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472110240, "post_id": 39126690, "comment_id": 65622717, "body": "Whats are the differences between the two methods?"}, {"owner": {"reputation": 161, "user_id": 5681487, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-xKRBhpyrP30/AAAAAAAAAAI/AAAAAAAACEs/7xTFokEGQaI/photo.jpg?sz=128", "display_name": "Gavin Hannah", "link": "https://stackoverflow.com/users/5681487/gavin-hannah"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472140714, "post_id": 39126690, "comment_id": 65643082, "body": "I have verified that this is a Visual Studio issue (or my code most likely). I viewed the return data using Putty and the data bytes were correctly formatted when sent from the Arduino, and when received at the computer.  When using my VS software, for some reason, reading these bytes is splitting the high and low nibbles up into separate bytes....?"}], "owner": {"reputation": 161, "user_id": 5681487, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-xKRBhpyrP30/AAAAAAAAAAI/AAAAAAAACEs/7xTFokEGQaI/photo.jpg?sz=128", "display_name": "Gavin Hannah", "link": "https://stackoverflow.com/users/5681487/gavin-hannah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472050365, "creation_date": 1472050365, "question_id": 39126690, "link": "https://stackoverflow.com/questions/39126690/simple-c-cli-serialport-readbyte-at-least-so-i-thought", "title": "Simple C++/CLI SerialPort ReadByte (at least, so I thought...)", "body": "<p>So, I am working with C++/CLI in VisualStudio and an Arduino based board. My goal is to implement MODBUS via RS485.</p>\n\n<p>So the setup I have for development is as follows...</p>\n\n<p>Laptop connected Via FTDI USB-RS485 interface cable to Maxim MAX3485 chip which is connected to Arduino serial port \"Serial1\".</p>\n\n<p>I have been writing my MODBUS protocol in Visual Studio and testing it out by asking the Arduino to respond with the contents of 5 registers (a 5 byte array).\nEverything works except for some reason, return bytes are getting split in two when I check the result.</p>\n\n<p>I.E... I'm sending the following bytes from the Arduino:</p>\n\n<pre><code>0 A 0 14 0 1E 0 28 0 32\n</code></pre>\n\n<p>A is actually \"0A\", but the terminal window only displays it as \"A\". The software on the computer receives the bytes, and stores them in an array. I then display the bytes received on the screen as text. What I get is:</p>\n\n<pre><code>0 A 0 1 4 0 1 E 0 2 8 0 3 2\n</code></pre>\n\n<p>Which looks correct, except the space between the \"1 &amp; 4\", \"2 &amp; 8\" etc.. which is telling me that I have 14 bytes instead of the 10 bytes the I sent out.</p>\n\n<p>I'm displaying each byte on the screen separated by a space. I verified the bytes leaving are correctly formatted using a terminal window on a separate com port, so the problem must be in the reading of the bytes? </p>\n\n<p>My Arduino code:</p>\n\n<pre><code>// Print to terminal window to verify bytes leaving\n  Serial.print(\"Sending:-  \"); \n  for (int x = 0; x &lt; i_Index; x++) {\n\n    Serial.print(DataTxRegister[x], HEX);\n    Serial.print(\" \");\n\n  }\n  Serial.println(\" \");\n\n\n  // CONFIGURE 485 CHIP TO TX MODE\n  digitalWrite(CNTL_PIN, HIGH);\n  delay(5);\n\n  // TRANSMIT ALL DATA FROM TX REGISTER\n  for (int x = 0; x &lt; i_Index; x++) {\n\n    Serial1.print(DataTxRegister[x], HEX);\n\n  }\n\n  i_Index = 0;\n  delay(5);\n  // CONFIGURE 485 CHIP BACK TO RX MODE\n  digitalWrite(CNTL_PIN, LOW);\n</code></pre>\n\n<p>Visual Studio code</p>\n\n<p>Read Bytes....</p>\n\n<pre><code>int8_t Byte;\n// DATA RECIEVED FROM ARDUINO / DEVICE USING MODBUS PROTOCOL\nif(sender == this-&gt;serialPort1){\n\n    Msg.Message_Length = 0;\n    while (this-&gt;serialPort1-&gt;BytesToRead != 0) {\n\n    Byte = this-&gt;serialPort1-&gt;ReadByte;         \n    if (Byte != -1) {\n\n        Msg.Incoming_Bytes[Msg.Message_Length++] = (Byte);\n    }\n\n\n    }\n\nthis-&gt;BeginInvoke(gcnew EventHandler(this, &amp;Form1::DisplayMBRecieved));\n}\n</code></pre>\n\n<p>Display Bytes...</p>\n\n<pre><code>this-&gt;textBox1-&gt;AppendText(\"\\r\\n\");\nthis-&gt;textBox1-&gt;AppendText(\"Bytes Received: \");\nthis-&gt;textBox1-&gt;AppendText(Convert::ToInt32(Msg.Message_Length).ToString(\"X8\") + \"  :-  \");\n\nfor (unsigned int i = 0; i &lt; Msg.Message_Length; i++) {\n\n    this-&gt;textBox1-&gt;AppendText(Convert::ToString(Convert::ToChar(Msg.Incoming_Bytes[i])));\n\n    this-&gt;textBox1-&gt;AppendText(\" \");\n\n}\n\nMsg.Message_Length = 0;\n</code></pre>\n"}, {"tags": ["c++", "memory", "struct", "allocation"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472050543, "post_id": 39126632, "comment_id": 65598869, "body": "I think you might be approaching the problem in the wrong way.  Can you detail out what you are trying to accomplish and we can help you come up with a cache friendly, non-false sharing solution?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472050887, "post_id": 39126632, "comment_id": 65599159, "body": "Before you go into micro-managing things like this, have you <i>measure</i> that it is a bottleneck in your program? Any optimization you do in the source <i>will</i> add a degree of unmaintainability, especially if you do it before you even <i>know</i> there is a problem. Remember that the compiler is usually very good when it comes to optimizations, including adding good padding to structures."}, {"owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 0, "creation_date": 1472050907, "post_id": 39126632, "comment_id": 65599178, "body": "It seems to me that there are two conflicting informations: If you know at compile time what struct you are going to save in there, then you have constant buf_bytes: sizeof(Struct). If you don&#39;t know at compile time, then the &quot;named struct accessor&quot; is impossible anyway and the Option 2 seems ideal. Can you please clarify?"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1472051273, "post_id": 39126632, "comment_id": 65599469, "body": "Why not just <code>alignas</code> from <code>c++11</code>?"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 1, "creation_date": 1472051276, "post_id": 39126632, "comment_id": 65599472, "body": "I think you need to look at the allocator concept, this kind of work (alignment, blocking and padding) sounds like work for an allocator."}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472052269, "post_id": 39126632, "comment_id": 65600186, "body": "@NathanOliver sure I&#39;ve added more details to the post"}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472052565, "post_id": 39126632, "comment_id": 65600380, "body": "@JoachimPileborg I certainly appreciate your sentiment. This is in the inner loop and and a hot spot as determined by perf_events, but it&#39;s not so hot that I need to write incredibly complicated code. I&#39;m hoping I can just learn about some aspect of C++ or best practice that will be both efficient and reasonably well written/maintainable."}, {"owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "reply_to_user": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 0, "creation_date": 1472052668, "post_id": 39126632, "comment_id": 65600444, "body": "@michalsrb buf_bytes and cache_pad_bytes are not constant expressions and therefore the size of the struct is not known at compile time."}, {"owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 0, "creation_date": 1472055066, "post_id": 39126632, "comment_id": 65602000, "body": "Maybe I do not understand your requirements exactly, by why not simplify things taking a different approach? As long as the buffer entries are not interrelated, and you don&#39;t really need say, read or write 2 or more of them at once, they can be all dynamically allocated (during initialization), and there is not really any performance benefit from having them allocated as a single block. You don&#39;t really have any way to control caching, and having them is a contiguous block doesn&#39;t guarantee anything, esp if the buffer is large.(cont)"}, {"owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 0, "creation_date": 1472055079, "post_id": 39126632, "comment_id": 65602008, "body": "I would consider a different implementation, which is employ a &quot;pool&quot; kind of structure - implement it the way you like, only req is atomic access. Producer threads would get an available entry from the pool, store their output there and send it to the consumer queue. Producers should put the entry back into the pool, after they are done. And this IS efficient, as the entries aren&#39;t really allocated/freed all the time. Access to the pool data structure should be serialized, but this is no problem as you only keep it locked very briefly, just to get or store a buffer entry (pointer) there."}, {"owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 0, "creation_date": 1472056410, "post_id": 39126632, "comment_id": 65602791, "body": "To clarify things, could you add to the question what would be the ideal outside interface of the array/container?"}], "owner": {"reputation": 712, "user_id": 4438651, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/19c65aec0e9e4476777f960719df3473?s=128&d=identicon&r=PG&f=1", "display_name": "Kulluk007", "link": "https://stackoverflow.com/users/4438651/kulluk007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472052704, "creation_date": 1472050222, "last_edit_date": 1472052704, "question_id": 39126632, "link": "https://stackoverflow.com/questions/39126632/allocating-contiguous-array-of-non-default-constructed-templated-structs", "title": "Allocating contiguous array of non-default constructed templated structs", "body": "<p>I'm writing a C++ library in a multi-threaded application where performance is important, and am not sure of the best way to achieve my goal of allocating a fixed-size array of templated structs. I'd like a single contiguous block of memory for cache locality, and pad the cache lines to avoid false sharing. </p>\n\n<p>Here's the struct definition:</p>\n\n<pre><code>template&lt;size_t buf_bytes, size_t cache_pad_bytes&gt;\nstruct PaddedBuffer {\n    char buf[buf_bytes];\n    char cache_line_padding[cache_pad_bytes];\n}\n</code></pre>\n\n<p>Ideally the contiguous block of memory would look something like this, and be accessible as an array:</p>\n\n<pre><code>[ {buf, pad}, {buf, pad}, ..., {buf, pad} ]\n</code></pre>\n\n<p>where [ ] indicates the array, and { } indicates a struct. The fundamental challenge is that the size of buf is not known until runtime.</p>\n\n<p>This is what I really want to be able to do, but given that buf_bytes is not a constant expression, the C++ standard doesn't allow this with a templated function (of course).</p>\n\n<pre><code>PaddedBuffer&lt;buf_bytes, cache_pad_bytes&gt; buffers[num_buffered_entries];\n</code></pre>\n\n<p>I can think of a couple options, but don't really like any of them. Is there a better way?</p>\n\n<p><strong>Option 1: Dynamically allocate everything</strong>\nChange the PaddedBuffer definition to make the buffer a pointer (char* buf). Then, dynamically allocate an array of PaddedBuffer*, and then dynamically allocate as <code>num_buffered_entries</code> of them. This isn't ideal because the buffers aren't going to [necessarily] be adjacent.</p>\n\n<p><strong>Option 2: Dynamically allocate one large buffer</strong>\nI can essentially allocate a big chunk of memory of size <code>(num_buffered_entries * (buf_bytes + cache_pad_bytes)</code>, then define my own operator[] function, and just use it pretty much as normal after that. I think this works, but feels a bit hacky. Also, I loose the named struct accessor ability, so I can't add a field <code>foo</code> to the struct and just write <code>object.foo</code>. I'd have to manage that myself. In this case, I only need the buffer (not the cache line padding) so it doesn't really matter, but it does feel a bit like I'm reinventing the wheel.</p>\n\n<p>(Note: I realize I can use a <code>std::vector</code> and initialize it with a copy constructor, but I don't want a std::vector for a variety of reasons.)</p>\n\n<p>A bit more background on the problem I'm solving: This data structure is essentially used for a lock-free single-producer producer-consumer queue, where the buffers are reused thousands or millions of times throughout the course of the application. I'd like to be able to allocate the memory once at the beginning of the program and then access the memory efficiently (and without false sharing). I'm assuming I can achieve good higher level cache locality by allocating this as a contiguous chunk; I'm assuming I can obviate false sharing with the cache line padding. (I did investigate using related libraries (TBB, Boost, TBB) and they were close but didn't quite map to my problem given.) This is in the inner loop of a large library, and therefore want it to be reasonably fast. I can just go with one of these options (Option 1 would be the most straightforward) if there isn't a clean solution, but if there is a clean solution, I'd like to use it. Note that the queue is intended to be of a fixed size, and therefore is implemented as a circular buffer with bounds appropriate checking.</p>\n\n<p>Is there a cleaner and recommended approach?</p>\n"}, {"tags": ["c++", "multithreading", "shell", "unix"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472050441, "post_id": 39126525, "comment_id": 65598791, "body": "First of all, if <code>start_flag</code> is shared among multiple threads it shoul be <code>std::atomic&lt;bool&gt; start_flag = false;</code>"}, {"owner": {"reputation": 151, "user_id": 1236984, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tny9w.jpg?s=128&g=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/1236984/sushant"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472050474, "post_id": 39126525, "comment_id": 65598811, "body": "thanks, point noted"}, {"owner": {"reputation": 2948, "user_id": 1676075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/66baf8475c22361bf3c617f13681ee5a?s=128&d=identicon&r=PG", "display_name": "user1676075", "link": "https://stackoverflow.com/users/1676075/user1676075"}, "edited": false, "score": 0, "creation_date": 1472051966, "post_id": 39126525, "comment_id": 65599970, "body": "See <a href=\"http://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at\" title=\"quick and dirty way to ensure only one instance of a shell script is running at\">stackoverflow.com/questions/185451/&hellip;</a> for how to add this to your scripts."}], "answers": [{"tags": [], "owner": {"reputation": 19025, "user_id": 17826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a7aca325b6be746ea9e9ae17ff5b6b?s=128&d=identicon&r=PG", "display_name": "Mark Bessey", "link": "https://stackoverflow.com/users/17826/mark-bessey"}, "is_accepted": false, "score": 1, "last_activity_date": 1472052514, "creation_date": 1472052514, "answer_id": 39127415, "question_id": 39126525, "link": "https://stackoverflow.com/questions/39126525/launching-the-same-shell-scripts-in-multiple-threads-c/39127415#39127415", "title": "Launching the same shell scripts in multiple threads C++", "body": "<p>First, your code seems like it doesn't change the arguments to the folderpath.sh script, depending on the value of start_flag. Without passing <em>some</em> kind of information to the shell script, it's going to be hard to get it to do something different for one thread than for the others. </p>\n\n<p>Secondly, you will need to use some sort of mutual exclusion to ensure that only one thread sees the \"start_flag\" set to \"true\" at a time. Since you mentioned shell scripts, it's probably a safe guess that you're on a POSIX system, which means you can use the pthreads API. </p>\n\n<p>Since you're kicking off the the process in response to an input of some sort, it might make sense to have a condition variable that each of the threads waits on, then run the shell script once on the main thread with the appropriate flag to have it create a new path. Once that's done, broadcast the condition variable to have it start all of the other threads to use the new path.</p>\n"}], "owner": {"reputation": 151, "user_id": 1236984, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tny9w.jpg?s=128&g=1", "display_name": "Sushant", "link": "https://stackoverflow.com/users/1236984/sushant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472052514, "creation_date": 1472049965, "last_edit_date": 1472050335, "question_id": 39126525, "link": "https://stackoverflow.com/questions/39126525/launching-the-same-shell-scripts-in-multiple-threads-c", "title": "Launching the same shell scripts in multiple threads C++", "body": "<p>I have a multi-threaded(3 threads) C++ application to create three files in a single location. The application gets a start and stop command as input(say a user input at runtime). For each start-stop pair, all three threads should create files in a same folder.</p>\n\n<p>I am using a single shell script to create file paths for each file generated by each of the three threads. There is a shell script which is getting called from within each thread. The shell script reads a number maintained in a common file called \"count\" and creates a string(filepath) using this count, with the count number appended to the directory to signify a new set. The number inside the \"count\" file should be updated only by the first thread that receives the update flag or \"start_flag\" from user input</p>\n\n<p>The shell script is run inside the C++ file as follows:</p>\n\n<p>Global variable to capture the start file update:</p>\n\n<pre><code>bool start_flag = false;\n</code></pre>\n\n<p>Inside each of the threads, there is something like:</p>\n\n<pre><code>if(true == start_flag) /*one of the threads that first receives the start signal*/    \n    system(\"./folderpath.sh\"); /*This will create a new string by incrementing count and update the file path in a file which will be later read*/    \nelse\n    system(\"./folderpath.sh\"); /*This will create a string using teh same count previously updated by another thread */\n</code></pre>\n\n<p>Inside the shell script, I am creating a text string and writing it into a file called Filepath.txt. I read this file to finally fopen a file in the generated path</p>\n\n<p>I want to ensure that correct strings are updated in each of the Filepath.txt and read the content updated in the Filepath.txt by each of the threads without any issues</p>\n\n<p>I observe that I am not getting what is expected.</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["c++", "qml", "qsettings"], "answers": [{"tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 2, "last_activity_date": 1472233263, "last_edit_date": 1472233263, "creation_date": 1472050092, "answer_id": 39126576, "question_id": 39126360, "link": "https://stackoverflow.com/questions/39126360/qsettings-able-to-store-value-only-once/39126576#39126576", "title": "Qsettings able to store value only once?", "body": "<p>Most probably it's because you're leaking <code>QSettings</code>' memory <strong>and resources</strong> in your functions, so the first call makes later ones fail, because of occupied file handle, or shomething.</p>\n"}], "owner": {"reputation": 89, "user_id": 4885698, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9dfa406899d1ed4ea625134cf6e28516?s=128&d=identicon&r=PG&f=1", "display_name": "Shravan Singh", "link": "https://stackoverflow.com/users/4885698/shravan-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 39126576, "answer_count": 1, "score": 0, "last_activity_date": 1472233263, "creation_date": 1472049551, "last_edit_date": 1472054162, "question_id": 39126360, "link": "https://stackoverflow.com/questions/39126360/qsettings-able-to-store-value-only-once", "title": "Qsettings able to store value only once?", "body": "<p>I am using Qsetting to store the last used values. My code works for only one field. That means it only works once when I am applying the same logic for the second go round it doesnt do that.</p>\n\n<p><strong>fileio.cpp</strong></p>\n\n<pre><code>#include \"fileio.h\"\n#include &lt;QSettings&gt;\n#include &lt;QStandardPaths&gt;\n#include &lt;QtAndroid&gt;\n#include &lt;QtAndroidExtras/QAndroidJniObject&gt;\n#include &lt;QAndroidJniEnvironment&gt;\n#include &lt;QtGui&gt;\n#include &lt;QDebug&gt;\n\nFileIo::FileIo(QObject *parent)\n    : QObject(parent)\n{\n    connect(this, SIGNAL(maxrpmChanged()), this, SLOT(writeSettings()));\n    connect(this, SIGNAL(rampupChanged()), this, SLOT(writeSettings()));\n}\n//for Maxrpm\nvoid FileIo::setMaxrpm(const QString &amp;a) {\n    if (a != m_maxrpm) {\n        m_maxrpm = a;\n        emit maxrpmChanged();\n    }\n}\nQString FileIo::getMaxrpm() const {return m_maxrpm;}\n\n//for Filename\nvoid FileIo::setFilename(const QString &amp;a) {\n\n    if (a != m_filename) {\n        m_filename = a;\n        emit filenameChanged();\n    }\n}\nQString FileIo::getFilename() const {return m_filename;}\n\n//for Rampup\nvoid FileIo::setRampup(const QString &amp;a) {\n    if (a != m_rampup) {\n        m_rampup = a;\n        emit rampupChanged();\n    }\n}\nQString FileIo::getRampup() const {return m_rampup;}\n\n\n\nvoid FileIo::readSettings(const QString &amp;temp)\n{\n    QString m_path ;\n    QString m_filename;\n    QSettings * p_settings;\n    QSettings settings(\"BlueSparq\",\"motorapp\");\n    m_path = QStandardPaths::writableLocation(QStandardPaths::ConfigLocation) ;\n    m_filename = temp ;\n    p_settings = new QSettings(m_path + \"/\"+ m_filename,QSettings::IniFormat) ;\n    setMaxrpm(p_settings-&gt;value(\"target_RPM\",QString(\"900\")).toString());\n    qDebug() &lt;&lt;m_maxrpm;\n    //for Rampup\n    setRampup(p_settings-&gt;value(\"rampup\",\"250\").toString());\n    qDebug() &lt;&lt;m_rampup;\n}\n\nvoid FileIo::writeSettings()\n{\n    QString m_path ;\n    QSettings * p_settings;\n    QSettings settings(\"BlueSparq\",\"motorapp\");\n    m_path = QStandardPaths::writableLocation(QStandardPaths::ConfigLocation) ;\n    p_settings = new QSettings(m_path + \"/\"+ m_filename,QSettings::IniFormat) ;\n    p_settings-&gt;setValue(\"target_RPM\",m_maxrpm);\n    qDebug() &lt;&lt; m_rampup;\n    p_settings-&gt;setValue(\"rampup\",m_rampup);\n    qDebug() &lt;&lt; m_rampup;\n    p_settings-&gt;sync();\n}\n</code></pre>\n\n<p><strong>fileio.h</strong></p>\n\n<pre><code>#ifndef FILEIO_H\n#define FILEIO_H\n#include &lt;QObject&gt;\n\nclass FileIo : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(QString maxrpm READ getMaxrpm WRITE setMaxrpm NOTIFY maxrpmChanged)\n    Q_PROPERTY(QString filename READ getFilename WRITE setFilename NOTIFY filenameChanged)\n    Q_PROPERTY(QString rampup READ getRampup WRITE setRampup NOTIFY rampupChanged)\npublic:\n    explicit FileIo(QObject *parent = 0);\n\n    //For MaxRPM\n    void setMaxrpm(const QString &amp;a);\n    QString getMaxrpm() const;\n\n    //For Filename\n    void setFilename(const QString &amp;a);\n    QString getFilename() const;\n\n    //For Ramup\n    void setRampup(const QString &amp;a);\n    QString getRampup() const;\n\n    Q_INVOKABLE void writeSettings();\n    Q_INVOKABLE void readSettings(const QString &amp;temp);\n\nsignals:\n    void maxrpmChanged();\n    void filenameChanged();\n    void rampupChanged();\n\n\n\npublic slots:\n\n\nprivate slots:\n\n\nprivate:\n    QString m_maxrpm;\n    QString m_filename;\n    QString m_rampup;\n\n};\n\n\n#endif // FILEIO_H\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;QtGui&gt;\n#include &lt;QtQuick&gt;\n#include \"sertransclient.h\"\n#include \"fileio.h\"\nQObject *object;\n\nint main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n    //added now\n    QQuickView view;\n\n    QObject::connect((QObject*)view.engine(), SIGNAL(quit()), &amp;app, SLOT(quit()));\n\n    qRegisterMetaType&lt;SerTransClient::BaudRate&gt;(\"SerTransClient::BaudRate\");\n    qRegisterMetaType&lt;SerTransClient::DataBits&gt;(\"SerTransClient::DataBits\");\n    qRegisterMetaType&lt;SerTransClient::Parity&gt;(\"SerTransClient::Parity\");\n    qRegisterMetaType&lt;SerTransClient::StopBits&gt;(\"SerTransClient::StopBits\");\n    qRegisterMetaType&lt;SerTransClient::FlowControl&gt;(\"SerTransClient::FlowControl\");\n    qmlRegisterType&lt;SerTransClient&gt;(\"sertransclient\", 1, 0, \"SerTransClient\");\n    qmlRegisterType&lt;FileIo&gt;(\"fileIo\", 1, 0, \"FileIo\");\n    view.setResizeMode(QQuickView::SizeRootObjectToView);\n    view.setSource(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n    view.show();\n    object = view.rootObject();\n    //\n\n\n\n    return app.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "parsing", "yaml", "yaml-cpp"], "comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1472051867, "post_id": 39126258, "comment_id": 65599904, "body": "There is no need to put quotes around <code>thingX.yaml</code> in your YAML file"}, {"owner": {"reputation": 47, "user_id": 2452959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WUfrQ.jpg?s=128&g=1", "display_name": "CompSciGuy139", "link": "https://stackoverflow.com/users/2452959/compsciguy139"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1472053927, "post_id": 39126258, "comment_id": 65601240, "body": "@Anthon Thanks for the info... I am used to json where it seems that quotes are needed for virtually everything."}], "answers": [{"tags": [], "owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "is_accepted": false, "score": 2, "last_activity_date": 1472050708, "creation_date": 1472050708, "answer_id": 39126826, "question_id": 39126258, "link": "https://stackoverflow.com/questions/39126258/confused-by-yamlnodetypeundefined-with-yaml-cpp/39126826#39126826", "title": "confused by YAML::NodeType::Undefined with yaml-cpp", "body": "<p>Well, your top-level YAML document does indeed not include a key named <code>includes</code>. It only contains a key named <code>testConfig</code>. You should access that first:</p>\n\n<pre><code>// ...\nYAML::Node configRoot = YAML::LoadFile(path.c_str())[\"testConfig\"];\n// ...\n</code></pre>\n\n<p>Or, if you want to explicitly check if <code>testConfig</code> exists:</p>\n\n<pre><code>// ...\nYAML::Node configRoot = YAML::LoadFile(path.c_str());\n// do check her as in your code\nYAML:Node testConfig = configRoot[\"testConfig\"];\n// check if testConfig is a mapping here\nYAML::Node includes = testConfig[\"includes\"];\n// ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 2452959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WUfrQ.jpg?s=128&g=1", "display_name": "CompSciGuy139", "link": "https://stackoverflow.com/users/2452959/compsciguy139"}, "edited": false, "score": 0, "creation_date": 1472052292, "post_id": 39126865, "comment_id": 65600206, "body": "I just found this and was about to comment!  Thanks for the quick response.  I just removed that superfluous top level testConfig."}], "tags": [], "owner": {"reputation": 29797, "user_id": 112, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8cff214f16c7c8e73244a8ed8dea7e0e?s=128&d=identicon&r=PG", "display_name": "Jesse Beder", "link": "https://stackoverflow.com/users/112/jesse-beder"}, "is_accepted": true, "score": 1, "last_activity_date": 1472050798, "creation_date": 1472050798, "answer_id": 39126865, "question_id": 39126258, "link": "https://stackoverflow.com/questions/39126258/confused-by-yamlnodetypeundefined-with-yaml-cpp/39126865#39126865", "title": "confused by YAML::NodeType::Undefined with yaml-cpp", "body": "<p>You're looking at <code>configRoot[\"includes\"]</code>, but the top level key in your map is <code>testConfig</code>. Use <code>configRoot[\"testConfig\"]</code> instead.</p>\n"}], "owner": {"reputation": 47, "user_id": 2452959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WUfrQ.jpg?s=128&g=1", "display_name": "CompSciGuy139", "link": "https://stackoverflow.com/users/2452959/compsciguy139"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 39126865, "answer_count": 2, "score": 3, "last_activity_date": 1472053846, "creation_date": 1472049306, "last_edit_date": 1472053846, "question_id": 39126258, "link": "https://stackoverflow.com/questions/39126258/confused-by-yamlnodetypeundefined-with-yaml-cpp", "title": "confused by YAML::NodeType::Undefined with yaml-cpp", "body": "<p>I have a test yaml file that I am trying to parse using yaml-cpp.</p>\n\n<p>test.yaml</p>\n\n<pre><code>testConfig:\n    # this points to additional config files to be parsed\n    includes:\n        required: \"thing1.yaml\"\n        optional: \"thing2.yaml\"\n    #some extraneous config information \n    foo: 42\n    bar: 394\n    baz: 8675309\n</code></pre>\n\n<p>I parse it I get <code>testConfig.Type()</code> returns <code>YAML::NodeType::Map</code>. And this is expected behavior.</p>\n\n<p>Then, I try to parse the includes to get the required or optional values I can't iterate because <code>includes.Type()</code> returns <code>YAML::NodeType::Undefined</code>.  I'm really new to yaml and to yaml-cpp so any help showing me where I am going wrong would be appreciated.</p>\n\n<p>parsing code:</p>\n\n<pre><code>{includes and other such nonsense} \n            .\n            .\n            .\nYAML::Node configRoot = YAML::LoadFile(path.c_str() );\nif( configRoot.IsNull() )\n{   \n    SYSTEM_LOG_ERROR(\"Failed to load the config file: %s.\",\n                    path.c_str());\n    return false;\n}   \n\nYAML::Node includes = configRoot[\"includes\"];\n/*  ^^^^^^^^^^^^^^^\n * I believe that here lies the issue as includes is undefined and\n * therefore I cannot iterate over it.\n */\nfor( auto it = include.begin(); it != include.end(); ++it )\n{   \n    // do some fantastically brilliant CS voodoo!\n}\n            .\n            .\n            .\n{ more C++ craziness to follow }\n</code></pre>\n\n<p><strong>SOLUTION:</strong>\nI removed the unnecessary top level <code>configTest</code> so that I could parse the includes as I needed.</p>\n"}, {"tags": ["c++", "output", "operators", "operator-precedence"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 9, "creation_date": 1472049063, "post_id": 39126127, "comment_id": 65597797, "body": "Precedence != evaluation order."}, {"owner": {"reputation": 1973, "user_id": 5468701, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ce488fdab747b16dacd84a9de537775?s=128&d=identicon&r=PG&f=1", "display_name": "shiva", "link": "https://stackoverflow.com/users/5468701/shiva"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472049284, "post_id": 39126127, "comment_id": 65597954, "body": "Then how can I determine evaluation order? Thanks for your input."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1472050027, "post_id": 39126127, "comment_id": 65598485, "body": "I see @molbdnilo thanks"}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472054311, "post_id": 39126127, "comment_id": 65601507, "body": "There&#39;s a great article by Eric Lippert that explains the <a href=\"https://blogs.msdn.microsoft.com/ericlippert/2008/05/23/precedence-vs-associativity-vs-order/\" rel=\"nofollow noreferrer\">difference between precedence, associativity, and order of evaluation</a>. It focuses more on C#, but it also deals with C++. Just one thing: he says in C++ the order of evaluation is free (unlike C#, where it&#39;s strictly left to right). Well, there are exceptions: the boolean operators AND and OR require left-to-right, so that short-circuiting can be applied, as in this case."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1534591448, "post_id": 39126127, "comment_id": 90766353, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3700352/why-does-x-y-z-calculate-x-first-even-though-operator-ha\">Why does &quot;++x || ++y &amp;&amp; ++z&quot; calculate &quot;++x&quot; first, even though operator &quot;&amp;&amp;&quot; has higher precedence than &quot;||&quot;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1472049189, "post_id": 39126166, "comment_id": 65597882, "body": "This doesn&#39;t really address the question - evaluation order is <b>not</b> determined by precedence."}, {"owner": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472049268, "post_id": 39126166, "comment_id": 65597941, "body": "@OliverCharlesworth: Yes I think you are correct. I&#39;ve amended this answer."}], "tags": [], "owner": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "is_accepted": false, "score": 7, "last_activity_date": 1472049240, "last_edit_date": 1472049240, "creation_date": 1472049071, "answer_id": 39126166, "question_id": 39126127, "link": "https://stackoverflow.com/questions/39126127/operator-precedence-and-evaluation-order/39126166#39126166", "title": "Operator precedence and evaluation order", "body": "<p>Let's put the excess parantheses in:</p>\n\n<p><code>( ++x || (++y &amp;&amp; ++z ))</code></p>\n\n<p>Then it's easy to see that <code>(++y &amp;&amp; ++z )</code> will <strong>only</strong> be evaluated if <code>++x</code> is 0. So you can see that irrespective of operator precedence, the short-circutting nature of <code>||</code> means that the right hand side is only evaluated if the left hand side is 0.</p>\n\n<p>(If the right hand side is evaluted, then note that <code>++z</code> will <strong>only</strong> be evaluated if <code>++y</code> is not 0.)</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1472049171, "creation_date": 1472049171, "answer_id": 39126207, "question_id": 39126127, "link": "https://stackoverflow.com/questions/39126127/operator-precedence-and-evaluation-order/39126207#39126207", "title": "Operator precedence and evaluation order", "body": "<p>This expression</p>\n\n<pre><code> ++x || ++y &amp;&amp; ++z\n</code></pre>\n\n<p>is equivalent to expression</p>\n\n<pre><code>++x || ( ++y &amp;&amp; ++z )\n</code></pre>\n\n<p>and not like this</p>\n\n<pre><code> ( ++x || ++y ) &amp;&amp; ++z\n</code></pre>\n\n<p>If the first operand of the logical OR expression is evaluated to true (as in your example) then the second operand that is <code>( ++y &amp;&amp; ++z )</code> is not evaluated.</p>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 8, "last_activity_date": 1472052516, "last_edit_date": 1472052516, "creation_date": 1472049213, "answer_id": 39126223, "question_id": 39126127, "link": "https://stackoverflow.com/questions/39126127/operator-precedence-and-evaluation-order/39126223#39126223", "title": "Operator precedence and evaluation order", "body": "<blockquote>\n  <p><code>&amp;&amp;</code> has a higher precedence than <code>||</code>, and thus it must be evaluated first.</p>\n</blockquote>\n\n<p>No. <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow\">Operator precedence</a> only determines that how the operators will be bound tighter (as if by parentheses) to its arguments when parsing an expression, it doesn't influence evaluation order. In this case, it just means <code>++x || ++y &amp;&amp; ++z</code> will be parsed as <code>(++x) || (++y &amp;&amp; ++z)</code>, rather than <code>(++x || ++y) &amp;&amp; (++z)</code>.</p>\n\n<p>Note that the associativity of <a href=\"http://en.cppreference.com/w/cpp/language/operator_logical\" rel=\"nofollow\"><code>operator||</code></a> is left-to-right, so <code>++x</code> will be evaluated at first, and <code>(++y &amp;&amp; ++z)</code> won't be evaluated because of short-circuit evaluation (other than overloaded <code>operator||</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6753198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7113658177bef4880805e0c6006abc03?s=128&d=identicon&r=PG&f=1", "display_name": "user6753198", "link": "https://stackoverflow.com/users/6753198/user6753198"}, "is_accepted": false, "score": 0, "last_activity_date": 1472051202, "creation_date": 1472051202, "answer_id": 39127005, "question_id": 39126127, "link": "https://stackoverflow.com/questions/39126127/operator-precedence-and-evaluation-order/39127005#39127005", "title": "Operator precedence and evaluation order", "body": "<p>( ++x || (++y &amp;&amp; ++z )) - can be seen as boolean values - only ++x is evaluated. Its int value is 2  and the boolean value is 1 (true).</p>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 4, "last_activity_date": 1472054288, "last_edit_date": 1472054288, "creation_date": 1472052206, "answer_id": 39127331, "question_id": 39126127, "link": "https://stackoverflow.com/questions/39126127/operator-precedence-and-evaluation-order/39127331#39127331", "title": "Operator precedence and evaluation order", "body": "<p>\"Precedence\" affects grouping, not order, and means that if there could be any ambiguity regarding which operator an operand \"belongs to\", the operator with the higher precedence gets first dibs on it.</p>\n\n<p>Since there are two binary operators involved, there are two ways you can read the expression.<br>\nAs trees, these would be:</p>\n\n<pre><code>    and\n    /\\\n   or ++z       [(++x || ++y) &amp;&amp; ++z]\n  / \\\n++x ++y \n\n\n   or\n   /\\\n++x  and       [++x || (++y &amp;&amp; ++z)]\n     / \\\n  ++y ++z\n</code></pre>\n\n<p>The precedence rules determine that the latter tree is chosen in C++, since the middle operand, <code>++y</code>, is grouped with <code>&amp;&amp;</code>, not with <code>||</code>.</p>\n\n<p>The \"short-circuiting\" of these operators means that evaluation must start at the leftmost leaf (each operator must first evaluate its left leg, then its right if it needs to).<br>\nThus, <code>++x</code> is evaluated first, and <code>||</code> only continues with its right leg if <code>++x</code> is zero, which it isn't.</p>\n\n<p>(As can be seen from the wonderful and artistic diagrams, <code>++x</code> must be evaluated first regardless of the relative precedence of <code>&amp;&amp;</code> and <code>||</code>.)</p>\n"}], "owner": {"reputation": 1973, "user_id": 5468701, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ce488fdab747b16dacd84a9de537775?s=128&d=identicon&r=PG&f=1", "display_name": "shiva", "link": "https://stackoverflow.com/users/5468701/shiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 4, "accepted_answer_id": 39127331, "answer_count": 5, "score": 7, "last_activity_date": 1472054288, "creation_date": 1472048965, "last_edit_date": 1472051196, "question_id": 39126127, "link": "https://stackoverflow.com/questions/39126127/operator-precedence-and-evaluation-order", "title": "Operator precedence and evaluation order", "body": "<p>I can't understand output of this program:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int x = 1 , y = 1, z = 1;\n    cout &lt;&lt; ( ++x || ++y &amp;&amp; ++z ) &lt;&lt; endl; //outputs 1;\n    cout &lt;&lt; x &lt;&lt; \" \" &lt;&lt; y &lt;&lt; \" \" &lt;&lt; z ;  //x = 2 , y = 1 , z = 1;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n2 1 1\n</code></pre>\n\n<p>If <code>||</code> is evaluated first then this output is fine, however <a href=\"https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence\" rel=\"nofollow\">this</a> article says that <code>&amp;&amp;</code> has a higher precedence than <code>||</code>, and thus it must be evaluated first. If this is the case then according to me output should be:</p>\n\n<pre><code>1\n1 2 2\n</code></pre>\n\n<p>as <code>++y &amp;&amp; ++z</code> would evaluate to <code>true</code> and thus <code>++x</code> won't be evaluated. </p>\n"}, {"tags": ["c++", "inheritance", "diamond-problem"], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1472049985, "creation_date": 1472049985, "answer_id": 39126534, "question_id": 39126081, "link": "https://stackoverflow.com/questions/39126081/c-virtual-inheritance-difference/39126534#39126534", "title": "c++ virtual inheritance difference", "body": "<p>They say the same thing. The only difference is that if you removed <code>public Derived1</code> and <code>public Derived2</code> from both definitions of <code>Derived3</code>, the first one would still inherit from <code>Base</code> and the second one would not.</p>\n\n<p>EDIT: I haven't thought carefully about whether there is some weird cross-cast situation where the two would also behave differently, although I don't think there is.</p>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 2, "last_activity_date": 1472050139, "creation_date": 1472050139, "answer_id": 39126596, "question_id": 39126081, "link": "https://stackoverflow.com/questions/39126081/c-virtual-inheritance-difference/39126596#39126596", "title": "c++ virtual inheritance difference", "body": "<p>There is no difference between those examples.</p>\n\n<p>But in a more complicated scenario, directly inheriting an otherwise inherited virtual base might change the order of construction / destruction of the base class subobjects.</p>\n"}, {"tags": [], "owner": {"reputation": 2017, "user_id": 4999494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e49247723efb14f33ad19a5ecdf1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Balabin", "link": "https://stackoverflow.com/users/4999494/alexander-balabin"}, "is_accepted": false, "score": 1, "last_activity_date": 1472050450, "creation_date": 1472050450, "answer_id": 39126729, "question_id": 39126081, "link": "https://stackoverflow.com/questions/39126081/c-virtual-inheritance-difference/39126729#39126729", "title": "c++ virtual inheritance difference", "body": "<p>I do not think there is any difference in object layout because the intention of virtual inheritance is to avoid having two copies of <code>Base</code> (or three copies in case 1).</p>\n\n<p>So all the difference is in your intentions and really readability of the code.</p>\n"}], "owner": {"reputation": 313, "user_id": 6752889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d737e2971e6d7a1182253cdea21c6c06?s=128&d=identicon&r=PG&f=1", "display_name": "quazeeee", "link": "https://stackoverflow.com/users/6752889/quazeeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 39126534, "answer_count": 3, "score": 5, "last_activity_date": 1472061396, "creation_date": 1472048861, "last_edit_date": 1472061396, "question_id": 39126081, "link": "https://stackoverflow.com/questions/39126081/c-virtual-inheritance-difference", "title": "c++ virtual inheritance difference", "body": "<p>Given two classes with a common virtual base class:</p>\n\n<pre><code>class Base {};\n\nclass Derived1 : public virtual Base {};\n\nclass Derived2 : public virtual Base {};\n</code></pre>\n\n<p>Is there any difference between these two further derived classes?:</p>\n\n<ul>\n<li><pre><code>class Derived3 : public virtual  Base, public Derived1, public Derived2 {};\n</code></pre></li>\n<li><pre><code>class Derived3 : public Derived1, public Derived2 {};\n</code></pre></li>\n</ul>\n\n<p>The first also derives directly from the virtual base class, but I think that has no effect, because it's shared with <code>Derived1</code> and <code>Derived2</code>.</p>\n"}, {"tags": ["c++", "visual-studio", "unit-testing", "visual-studio-2015", "vs-unit-testing-framework"], "comments": [{"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "edited": false, "score": 3, "creation_date": 1472052758, "post_id": 39126013, "comment_id": 65600504, "body": "The name of this framework is <b><a href=\"https://msdn.microsoft.com/en-us/library/hh598953.aspx\" rel=\"nofollow noreferrer\">Microsoft Unit Testing Framework for C++</a></b>. Under the link you will find some basic information about it."}], "owner": {"reputation": 1832, "user_id": 1995714, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a31af2d7cce2d77e5d6c67b0415c6a2e?s=128&d=identicon&r=PG", "display_name": "cp.engr", "link": "https://stackoverflow.com/users/1995714/cp-engr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2702, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1472048672, "creation_date": 1472048672, "question_id": 39126013, "link": "https://stackoverflow.com/questions/39126013/visual-studio-c-unit-testing-unmanaged", "title": "Visual Studio C++ unit testing (unmanaged)", "body": "<p>I'm setting up a unit test suite for some unmanaged C++ code, and I've got some questions.</p>\n\n<h1>Setup</h1>\n\n<p>I added the project to my solution with <code>Visual C++</code> &rarr; <code>Test</code> &rarr; <code>Native Unit Test Project</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ApEKM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ApEKM.png\" alt=\"Native Unit Test Project creation\"></a></p>\n\n<h1>Code</h1>\n\n<p>In order to figure out how things are grouped in this test framework, and what initialization runs when, I replaced the content of the source file (<code>unittest1.cpp</code>) with a modified version of the <code>USAGE EXAMPLE</code> from the top of CppUnitTest.h:</p>\n\n<pre><code>#include &lt;CppUnitTest.h&gt;\n#include &lt;string&gt;\n\nusing namespace Microsoft::VisualStudio::CppUnitTestFramework;\nusing std::string;\n\nBEGIN_TEST_MODULE_ATTRIBUTE()\nTEST_MODULE_ATTRIBUTE(L\"Date\", L\"2010/6/12\")\nEND_TEST_MODULE_ATTRIBUTE()\n\n\nstatic string Indent(\"\");\n\nvoid openBlock()\n{\n    Logger::WriteMessage((Indent + \"{\").c_str());\n    Indent += \"  \";\n}\n\nvoid closeBlock()\n{\n    Indent.resize(Indent.size() &gt;= 2 ? (Indent.size() - 2) : 0);\n    Logger::WriteMessage((Indent + \"}\").c_str());\n}\n\n\nTEST_MODULE_INITIALIZE(ModuleInitialize)\n{\n    Logger::WriteMessage((Indent + \"In Module Initialize\").c_str());\n    openBlock();\n}\n\nTEST_MODULE_CLEANUP(ModuleCleanup)\n{\n    closeBlock();\n    Logger::WriteMessage((Indent + \"In Module Cleanup\").c_str());\n}\n\n\n\nTEST_CLASS(Class1)\n{\npublic:\n    Class1()\n    {\n        Logger::WriteMessage((Indent + \"In Class1\").c_str());\n        openBlock();\n    }\n    ~Class1()\n    {\n        closeBlock();\n        Logger::WriteMessage((Indent + \"In ~Class1\").c_str());\n    }\n\n\n\n    TEST_CLASS_INITIALIZE(ClassInitialize)\n    {\n        Logger::WriteMessage((Indent + \"In Class Initialize\").c_str());\n        openBlock();\n    }\n    TEST_CLASS_CLEANUP(ClassCleanup)\n    {\n        closeBlock();\n        Logger::WriteMessage((Indent + \"In Class Cleanup\").c_str());\n    }\n\n\n    BEGIN_TEST_METHOD_ATTRIBUTE(Method1)\n        TEST_OWNER(L\"OwnerName\")\n        TEST_PRIORITY(1)\n        END_TEST_METHOD_ATTRIBUTE()\n\n    TEST_METHOD(Method1)\n    {\n        Logger::WriteMessage((Indent + \"In Method1\").c_str());\n        Assert::AreEqual(0, 0);\n    }\n\n    TEST_METHOD(Method2)\n    {\n        Logger::WriteMessage((Indent + \"In Method2\").c_str());\n        Assert::Fail(L\"Fail\");\n        Logger::WriteMessage(\"This won't print due to failure above.\");\n    }\n};\n</code></pre>\n\n<h1>Output</h1>\n\n<p>It generated the output below. (I added some linebreaks for clarity.)</p>\n\n<pre><code>In Module Initialize\n{\n\n  In Class Initialize\n  {\n\n    In Class1\n    {\n      In Method1\n    }\n    In ~Class1\n\n    In Class1\n    {\n      In Method2\n    }\n    In ~Class1\n\n  }\n  In Class Cleanup\n\n}\nIn Module Cleanup\n</code></pre>\n\n<h1>Inferences</h1>\n\n<p>From this I infer:</p>\n\n<ul>\n<li>Each <code>TEST_MODULE</code> contains zero or more <code>TEST_CLASS</code>es.</li>\n<li>Each <code>TEST_CLASS</code> contains zero or more <code>TEST_METHOD</code>s.</li>\n<li><code>TEST_MODULE_INITIALIZE()</code> and  <code>TEST_MODULE_CLEANUP()</code> are run once for each <code>TEST_MODULE</code>, before/after its series of <code>TEST_CLASS</code>es are executed.</li>\n<li><code>TEST_CLASS_INITIALIZE()</code> and <code>TEST_CLASS_CLEANUP()</code> are run once for each <code>TEST_CLASS</code>, before/after its series of <code>TEST_METHOD</code>s are executed.</li>\n<li>Each <code>TEST_METHOD</code> is an instance of a <code>TEST_CLASS</code>. The class constructor is executed immediately before the <code>TEST_METHOD()</code>, and the class destructor is executed immediately after the <code>TEST_METHOD()</code>.</li>\n</ul>\n\n<h1>Questions</h1>\n\n<ol>\n<li>Are my inferences above all correct? Have I missed anything important?</li>\n<li>Should/must I always have one and only one <code>TEST_MODULE</code> per source file? Can a <code>TEST_MODULE</code> be split among multiple source files? What is best practice?</li>\n<li>May I have more than one <code>TEST_CLASS</code> per file or <code>TEST_MODULE</code>? Are there best practices in this regard?</li>\n<li>What is the purpose of <code>ATTRIBUTE</code>s? How are they used?</li>\n<li>What is the name of this unit test framework? What search terms can I use to learn more?</li>\n</ol>\n"}, {"tags": ["c++", "runtime-error", "iar"], "comments": [{"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472493315, "post_id": 39125787, "comment_id": 65763330, "body": "Your program appears to be crashing. What do your three calls from <code>main()</code> do? There is probably an <code>exit()</code> or failing <code>assert()</code> somewhere (though, the assert should give you a pop up when debugging). It could also be stack corruption causing a function to return the wrong location and exiting <code>main()</code>. There&#39;s a lot that can be wrong."}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472595474, "post_id": 39125787, "comment_id": 65812990, "body": "Firstly thanks for response. I am using special framework on my board which Quantum leaps. these 3 functions are calling framwork functions and SYS_vRUN is calling endless loop"}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472596635, "post_id": 39125787, "comment_id": 65813366, "body": "@rjp I could not added my comment here that&#39;s why I post a new answer below thanks for help."}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472662128, "post_id": 39125787, "comment_id": 65845723, "body": "Since that is indeed an infinite loop, and the other possibilities have been ruled out, I would suspect that something is smashing the stack and causing a return from a call to an improper location."}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472678357, "post_id": 39125787, "comment_id": 65854356, "body": "@rjp I have found a problematic module via assertion ID implementation and I made it disable but still compiling not initiliaze during booting up system. After that config after 4 min later program exit is reached appeared in the console again. But at this time code has not been entered to assertion function handling. So now should I focus to Stack size ? or do you have any suggestion for debugging that issue ? Also this problem can occure because of linker ?"}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472697749, "post_id": 39125787, "comment_id": 65859568, "body": "I would suspect not a stack size issue, but perhaps a buffer overflowing somewhere, or, if you are using dynamic memory allocation, a malloc failure that isn&#39;t being caught."}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472725585, "post_id": 39125787, "comment_id": 65872449, "body": "@rjp Yes I am using dynamic memory allocation as new and delete functions in C++ in other modules for keep spaces for other modules. Should I switch to static memory instead of dynamic memory ? Is there any way to catch buffer overflowing issue ?. and I did not use any security function for MCU (illegal memory acces detection , Ram guard etc.)"}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472734305, "post_id": 39125787, "comment_id": 65878568, "body": "C++ is out of my wheelhouse, so I&#39;m not sure how you check your heap allocations there. As for buffer overflows, I don&#39;t have a good method other than to just check the likely places (anywhere where you&#39;re moving data into a buffer)."}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472735207, "post_id": 39125787, "comment_id": 65879224, "body": "@rjp thanks for the support. But the end of status can we say problem is about the stack or heap problem ?"}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472735523, "post_id": 39125787, "comment_id": 65879475, "body": "I can&#39;t say that definitively without debugging myself, but that&#39;s where I would look."}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472736605, "post_id": 39125787, "comment_id": 65880338, "body": "@rjp after your idea I have added the most dynamic memory allocation proccesess class to first question. Should I remove facroty pattern class from my code for increase memoey allocation issue  ?"}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472736656, "post_id": 39125787, "comment_id": 65880371, "body": "@rjp I can share my code either it is not a problem by the way."}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472736880, "post_id": 39125787, "comment_id": 65880540, "body": "Unfortunately, I already have a job."}, {"owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472760028, "post_id": 39125787, "comment_id": 65894326, "body": "@rjp Thanks a alot \u0131 will focus which we are discussed about till now. And I will report status."}], "answers": [{"comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1478529995, "post_id": 40467512, "comment_id": 68180010, "body": "This answer is not helping anyone else with a similar problem. If you don&#39;t provide more Information then this answer is quite useless for others and it would be better to delete the complete question."}], "tags": [], "owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "is_accepted": true, "score": -1, "last_activity_date": 1478528649, "creation_date": 1478528649, "answer_id": 40467512, "question_id": 39125787, "link": "https://stackoverflow.com/questions/39125787/program-exit-is-reached-in-iar-rl78-v2-20/40467512#40467512", "title": "Program exit is reached in IAR RL78 V2.20", "body": "<p>Problem has been solved. Main reason was the dynamic memory allocation processes which is used at the factory class.</p>\n"}], "owner": {"reputation": 11, "user_id": 4340641, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o-5Ya6nFaQY/AAAAAAAAAAI/AAAAAAAAAUM/gTzkXyzB9RM/photo.jpg?sz=128", "display_name": "Kaan Kandemir", "link": "https://stackoverflow.com/users/4340641/kaan-kandemir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 40467512, "answer_count": 1, "score": 0, "last_activity_date": 1478528649, "creation_date": 1472048038, "last_edit_date": 1472736490, "question_id": 39125787, "link": "https://stackoverflow.com/questions/39125787/program-exit-is-reached-in-iar-rl78-v2-20", "title": "Program exit is reached in IAR RL78 V2.20", "body": "<p>I am working with YRDKRL78 G13 board. I am using IAR v.2.20 for compiler and \u0131 have created a C++ project on it. And I am using one framework. Anyway I have implemented all my codes and which is working correctly but after 2 minutes IAR is giving information as \"The Application is aborted\" and \"Program exit is reached.\" I am really confuse about it I used very large stack as 512 and near is 1024 far is the 4096. </p>\n\n<p>Here is my main.cpp</p>\n\n<pre><code>#include \"System.h\"\nextern \"C\"\n\n{\n#include \"r_cg_macrodriver.h\"\n}\n\n#pragma location = \"OPTBYTE\"\n__root const uint8_t opbyte0 = 0x7EU;\n#pragma location = \"OPTBYTE\"\n__root const uint8_t opbyte1 = 0xFFU;\n#pragma location = \"OPTBYTE\"\n__root const uint8_t opbyte2 = 0xE8U;\n#pragma location = \"OPTBYTE\"\n__root const uint8_t opbyte3 = 0x85U;\n\n/* Set security ID */\n#pragma location = \"SECUID\"\n__root const uint8_t secuid[10] =\n{0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U};\n\nvoid main(void)\n{\n\nSystem::SystemInstance().SYS_vInit();\nSystem::SystemInstance().SYS_vStart();\nSystem::SystemInstance().SYS_vRun();\n\nwhile(1)\n{\n;\n}\n\n\n}\n</code></pre>\n\n<p>And here is the iar output. <a href=\"http://i.stack.imgur.com/W1epi.png\" rel=\"nofollow\">IAR Output Console</a></p>\n\n<p>If somebody faced like this problem or if somebody has got any solution or idea could you please share with me here </p>\n\n<p>Thanks for the help :)</p>\n\n<p>EDIT:\n@rjp Firstly thanks for response. I am using special framework on my board which Quantum leaps. these 3 functions are calling framwork functions and SYS_vRUN is calling endless loop</p>\n\n<pre><code>int_t QF::run(void) {\nonStartup(); // startup callback\n\n// the combined event-loop and background-loop of the QV kernel\nfor (;;) {\n    R_WDT_Restart();\n    RepaintLCD();\n    delay_ms(50); /* Leave some room for the system to respond */\n    QF_INT_DISABLE();\n    if (QV_readySet_.notEmpty()) {\n        uint_fast8_t p = QV_readySet_.findMax();\n        QMActive *a = active_[p];\n        QF_INT_ENABLE();\n\n        // perform the run-to-completion (RTS) step...\n        // 1. retrieve the event from the AO's event queue, which by this\n        //    time must be non-empty and The \"Vanialla\" kernel asserts it.\n        // 2. dispatch the event to the AO's state machine.\n        // 3. determine if event is garbage and collect it if so\n        //\n        QEvt const *e = a-&gt;get_();\n        a-&gt;dispatch(e);\n        gc(e);\n    }\n    else {\n        // QV::onIdle() must be called with interrupts DISABLED because\n        // the determination of the idle condition (no events in the\n        // queues) can change at any time by an interrupt posting events\n        // to a queue. QV::onIdle() MUST enable interrupts internally,\n        // perhaps at the same time as putting the CPU into a power-saving\n        // mode.\n        QP::QV::onIdle();\n    }\n}\n}\n</code></pre>\n\n<p>End I searched all code for exit() function there is no any. But you mentioned another issue about assertion. here you can see assertion macro and custome implemented assertion function.</p>\n\n<pre><code>    #define Q_ASSERT_ID(id_, test_) ((test_) \\\n    ? (void)0 : Q_onAssert(&amp;Q_this_module_[0], (int_t)(id_)))\n</code></pre>\n\n<p>Function; </p>\n\n<pre><code>    void Q_onAssert(char const Q_ROM * const file, int line) {\n// implement the error-handling policy for your application!!!\nQF_INT_DISABLE(); // disable all interrupts\n\n// cause the reset of the CPU...\n//WDTCTL = WDTPW | WDTHOLD;\n//__asm(\"    push &amp;0xFFFE\");\n// return from function does the reset\n} \n</code></pre>\n\n<p>EDIT2:\nMost dynamic memory processes are done in the LedFactory Class.\nHeader</p>\n\n<pre><code>/*\n * LedFactory.h\n *\n *  Created on: Aug 3, 2016\n *      Author: Dev\n */\n\n #ifndef APPLICATION_LED_LEDFACTORY_H_\n #define APPLICATION_LED_LEDFACTORY_H_\n\n #include \"LedController.h\"\n class LedFactory {\n public:\n   typedef enum{\n    LED1,\n    LED2,\n    LED3,\n    LED4,\n    LED5,\n    LED6,\n}LedTypes;\npublic:\nLedFactory();\nvirtual ~LedFactory();\nLedController * FirstLedFactory(LedTypes ledtype);\nLedController * SecondLedFactory(LedTypes ledtype);\nLedController * ThirdLedFactory(LedTypes ledtype);\nLedController * FourthLedFactory(LedTypes ledtype);\nLedController * FifthLedFactory(LedTypes ledtype);\nLedController * SixthLedFactory(LedTypes ledtype);\npublic:\nstatic LedFactory&amp; instance();\n};\n\n#endif /* APPLICATION_LED_LEDFACTORY_H_ */\n</code></pre>\n\n<p>Source file.</p>\n\n<pre><code>/*\n * LedFactory.cpp\n *\n *  Created on: Aug 3, 2016\n *      Author: Dev\n */\n\n #include &lt;LedFactory.h&gt;\n #include \"FirstLed.h\"\n #include \"SecondLed.h\"\n #include \"ThirdLed.h\"\n #include \"FourthLed.h\"\n #include \"FifthLed.h\"\n #include \"SixthLed.h\"\n\n LedFactory::LedFactory() {\n    // TODO Auto-generated constructor stub\n\n }\n\n LedFactory::~LedFactory() {\n    // TODO Auto-generated destructor stub\n }\n\n LedFactory&amp; LedFactory::instance()\n {\n    static LedFactory instance;\n\n    return instance;\n }\n LedController * LedFactory::FirstLedFactory(LedTypes ledtype)\n {\n    if(ledtype == (LedTypes)LED1)\n    {\n       return new FirstLed;\n    }\n    return NULL;\n }\n LedController * LedFactory::SecondLedFactory(LedTypes ledtype)\n {\n    if(ledtype == (LedTypes)LED2)\n       return new SecondLed;\n    return NULL;\n }\n\n LedController * LedFactory::ThirdLedFactory(LedTypes ledtype)\n {\n    if(ledtype == (LedTypes)LED3)\n    {\n       return new ThirdLed;\n    }\n    return NULL;\n }\n\n LedController * LedFactory::FourthLedFactory(LedTypes ledtype)\n {\n    if(ledtype == (LedTypes)LED4)\n    {\n       return new FourthLed;\n    }\n    return NULL;\n }\n\n\n LedController * LedFactory::FifthLedFactory(LedTypes ledtype)\n {\n    if(ledtype == (LedTypes)LED5)\n    {\n       return new FifthLed;\n    }\n    return NULL;\n }\n\n LedController * LedFactory::SixthLedFactory(LedTypes ledtype)\n {\n    if(ledtype ==(LedTypes)LED6)\n    {\n       return new SixthLed;\n    }\n    return NULL;\n }\n</code></pre>\n\n<p>Should I remove that class for increase the dynamic allocation memory issue ? \nOr how can I fix this class ?</p>\n"}, {"tags": ["c++", "templates", "if-statement", "constexpr", "c++17"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1472049007, "post_id": 39125709, "comment_id": 65597752, "body": "yes, all the code inside a template must be valid. So no there is no way to have an <code>if</code> that has a branch that is not valid for a template and still be able to instantiate for that template."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1472049049, "post_id": 39125709, "comment_id": 65597784, "body": "What <code>if constexpr</code> are you talking about? There is no such thing in C++11..."}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1472049125, "post_id": 39125709, "comment_id": 65597842, "body": "@rubenvb if constexpr is going to be in C++17"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 1, "creation_date": 1472049473, "post_id": 39125709, "comment_id": 65598087, "body": "@Eugene The question was at the time of that comment still tagged c++11."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1472049679, "post_id": 39125709, "comment_id": 65598251, "body": "Specialize, don&#39;t use <code>if</code>."}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1472058889, "post_id": 39126442, "comment_id": 65604120, "body": "Note that Boost.Hana has such a feature: <a href=\"https://boostorg.github.io/hana/#tutorial-integral-branching\" rel=\"nofollow noreferrer\"><code>hana::if_</code></a>. As far as instantiation goes, it does not instantiate untaken branches if they are generic lambdas. Based on Richard&#39;s comment, there&#39;s probably some more code behind that."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 3, "last_activity_date": 1472049750, "creation_date": 1472049750, "answer_id": 39126442, "question_id": 39125709, "link": "https://stackoverflow.com/questions/39125709/mimic-if-constexpr-behavior-impossible/39126442#39126442", "title": "mimic &quot;if constexpr&quot; behavior, impossible?", "body": "<p>Read this: <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0128r1.html\" rel=\"nofollow\">http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0128r1.html</a></p>\n\n<blockquote>\n  <p>Can't we do this with existing language features?</p>\n  \n  <p>John Spicer suggested in c++std-ext-17099 that polymorphic lambdas\n  combined with a decision-making template would provide an adequate\n  facility without a need to add new language features. The invocation\n  of that decision-making template looks roughly like this:</p>\n\n<pre><code>template &lt;int arg, typename ... Args&gt; int do_something(Args... args) {\n    return static_if&lt;sizeof...(args)&gt;::get(\n        [](auto x, auto y) { return x+y; },\n        [](auto x) { return *x; })(args...);\n}\n</code></pre>\n  \n  <p>Now, in comparison, with the proposed language facility, we do</p>\n\n<pre><code>template &lt;int arg, typename ... Args&gt; int do_something(Args... args) {\n    constexpr if (sizeof...(args)) {\n        return (args + ...);\n    } constexpr_else {\n        return *args...;\n    }\n}\n</code></pre>\n</blockquote>\n\n<p>Now this is sort of a an alternative. It gets more complicated if the different branches return different types.</p>\n\n<p>Moreover,</p>\n\n<blockquote>\n  <p>I must point out some things here:</p>\n  \n  <ul>\n  <li><p>I can return, break, continue and goto from within a constexpr if\n  block. I can not do that from within the lambda.</p></li>\n  <li><p>While I am a big\n  proponent of using lambdas to create new control facilities, I find\n  the constexpr if solution infinitely more readable.</p></li>\n  </ul>\n</blockquote>\n\n<p>Further,</p>\n\n<blockquote>\n  <p>Richard Smith explained the following:</p>\n  \n  <blockquote>\n    <p>Right, when a function template is instantiated, all of the\n    declarations/statements/expressions within it are instantiated, and\n    that includes pieces inside local classes, generic lambdas, and so on.</p>\n    \n    <p>This instantiation of generic lambda bodies is in fact necessary for\n    our language semantics -- computing the captures of a generic lambda\n    within a function template specialization relies on us having already\n    instantiated the complete closure type and its call operator template\n    to the point that we know where the odr-uses are within the\n    non-dependent full-expressions within the body.</p>\n  </blockquote>\n  \n  <p>In contrast, the intent of constexpr if is that the branch not taken\n  is not instantiated.</p>\n</blockquote>\n"}], "owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 1, "accepted_answer_id": 39126442, "answer_count": 1, "score": 3, "last_activity_date": 1472049750, "creation_date": 1472047864, "last_edit_date": 1472049130, "question_id": 39125709, "link": "https://stackoverflow.com/questions/39125709/mimic-if-constexpr-behavior-impossible", "title": "mimic &quot;if constexpr&quot; behavior, impossible?", "body": "<p>My compiler doesn't support <code>if constexpr</code>,        but I am captivated by its benefit.<br>\nI must have it - even it might be a fake one.</p>\n\n<p>This code is my attempt to mimic <code>if constexpr</code> behavior.<br>\nThe objective is to make the lines (###) appear in only 1 function :-</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate&lt;bool Flag,typename F&gt; constexpr typename std::enable_if&lt;!Flag, void&gt;::type iter_(F f,int i1){\n    f(i1); //No!  The compiler still tried to compile even Flag=true\n}\ntemplate&lt;bool Flag,typename F&gt; constexpr typename std::enable_if&lt;Flag, void&gt;::type iter_(F f,int i1){   }\ntemplate&lt;bool Flag,typename F&gt; constexpr typename std::enable_if&lt;Flag, void&gt;::type iter_(F f,int i1,int i2){\n    f(i1,i2); //No!  The compiler still tried to compile even Flag=false\n}\ntemplate&lt;bool Flag,typename F&gt; constexpr typename std::enable_if&lt;!Flag, void&gt;::type iter_(F f,int i1,int i2){}\n\ntemplate&lt;bool Flag,typename F&gt; constexpr void fff(  F f  ){\n    for(int n=0;n&lt;5;n++){//fake loop, the real situation is very complex\n        //### some horror code appeared here, but omitted\n        if(Flag){//attempt to mimic \"if constexpr\"\n            iter_&lt;true&gt;(f,1,2);\n        }else{\n            iter_&lt;false&gt;(f,3);\n        }\n    }\n}\n</code></pre>\n\n<p>This is its usage:-</p>\n\n<pre><code>template&lt;typename F&gt; constexpr void fff1(  F f  ){fff&lt;false&gt;(f);} //usage\ntemplate&lt;typename F&gt; constexpr void fff2(  F f  ){fff&lt;true&gt;(f);} //usage\n\nint main() {\n    // your code goes here\n    auto f1=[&amp;](int a){\n        cout&lt;&lt;a&lt;&lt;\" \";   \n    };\n    auto f2=[&amp;](int a,int b){\n        cout&lt;&lt;a&lt;&lt;\" \"&lt;&lt;b&lt;&lt;endl;  \n    };\n    fff1(f1);\n    fff2(f2);\n    return 0;\n}\n</code></pre>\n\n<p><strong>I got compile error :</strong> </p>\n\n<pre><code>prog.cpp: In instantiation of 'constexpr typename std::enable_if&lt;Flag, void&gt;::type iter_(F, int, int) [with bool Flag = true; F = main()::&lt;lambda(int)&gt;; typename std::enable_if&lt;Flag, void&gt;::type = void]':\nprog.cpp:16:18:   required from 'constexpr void fff(F) [with bool Flag = false; F = main()::&lt;lambda(int)&gt;]'\nprog.cpp:22:61:   required from 'constexpr void fff1(F) [with F = main()::&lt;lambda(int)&gt;]'\nprog.cpp:33:9:   required from here\nprog.cpp:9:3: error: no match for call to '(main()::&lt;lambda(int)&gt;) (int&amp;, int&amp;)'\n  f(i1,i2);\n   ^\nprog.cpp:9:3: note: candidate: void (*)(int) &lt;conversion&gt;\nprog.cpp:9:3: note:   candidate expects 2 arguments, 3 provided\n</code></pre>\n\n<p>From the error, it is clear to me that even when a function has <strong>std::enable_if[ <em>effective</em> FALSE]</strong>,<br>\n the compiler still compiled code that inside the function.\n - That is bad.     </p>\n\n<p>Which parts do I have to edit?<br>\n...  or are there any alternatives?<br>\n... or is it not possible to mimic <code>if constexpr</code> at all (that is the reason why it is introduced finally)?</p>\n"}, {"tags": ["c++", "unix", "gperftools", "heap-profiling"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 706749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad79288563ad0d55baba41432adc6d2?s=128&d=identicon&r=PG", "display_name": "Aliaksei Kandratsenka", "link": "https://stackoverflow.com/users/706749/aliaksei-kandratsenka"}, "is_accepted": true, "score": 1, "last_activity_date": 1472143172, "creation_date": 1472143172, "answer_id": 39150596, "question_id": 39125691, "link": "https://stackoverflow.com/questions/39125691/using-gperftools-heaptrack-without-installation/39150596#39150596", "title": "Using gperftools/Heaptrack without installation", "body": "<p>You can always install things by specifying something like --prefix=$HOME/mygperftools to configure. Then it will install within your home directory.</p>\n"}], "owner": {"reputation": 1922, "user_id": 3074082, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CoytW.jpg?s=128&g=1", "display_name": "HadeS", "link": "https://stackoverflow.com/users/3074082/hades"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 39150596, "answer_count": 1, "score": 0, "last_activity_date": 1472143172, "creation_date": 1472047828, "question_id": 39125691, "link": "https://stackoverflow.com/questions/39125691/using-gperftools-heaptrack-without-installation", "title": "Using gperftools/Heaptrack without installation", "body": "<p>I am trying to do heap profiling of C++ application on unix platform. I have tried valgrind's massif but it makes application very slow and affects behavior of the application.</p>\n\n<p>I was searching for other options and came across <a href=\"http://htmlpreview.github.io/?https://github.com/gperftools/gperftools/blob/master/doc/heapprofile.html\" rel=\"nofollow\">gperftools</a> and <a href=\"http://milianw.de/blog/heaptrack-a-heap-memory-profiler-for-linux\" rel=\"nofollow\">heaptrack</a>. Though these can be viable solution for my problem here. But I have limitation here I don't enough privileges to install these tools.</p>\n\n<p>Is there any way I can setup gperftools or heaptrack without installing them in unix?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "boost", "openssl", "boost-asio"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1472056787, "post_id": 39125635, "comment_id": 65602998, "body": "The cipher is available on the <code>SSL*</code>, not the <code>SSL_CTX*</code>. See <a href=\"http://www.openssl.org/docs/manmaster/ssl/SSL_CIPHER_get_name.html\" rel=\"nofollow noreferrer\"><code>SSL_CIPHER_get_name</code></a> and friends."}, {"owner": {"reputation": 31, "user_id": 6752888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521daa1009782dff881a2f1b463b634b?s=128&d=identicon&r=PG&f=1", "display_name": "Gert Corthout", "link": "https://stackoverflow.com/users/6752888/gert-corthout"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472106115, "post_id": 39125635, "comment_id": 65620391, "body": "Yes, that seems to work, thank you. Now I just need to find out the TLS/SSL version used."}], "owner": {"reputation": 31, "user_id": 6752888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521daa1009782dff881a2f1b463b634b?s=128&d=identicon&r=PG&f=1", "display_name": "Gert Corthout", "link": "https://stackoverflow.com/users/6752888/gert-corthout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 660, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1550143142, "creation_date": 1472047688, "last_edit_date": 1472059770, "question_id": 39125635, "link": "https://stackoverflow.com/questions/39125635/c-boost-asio-openssl-get-cipher-and-tls-ssl-version-of-active-connection", "title": "C++ Boost asio (OpenSSL) get cipher and TLS/SSL version of active connection", "body": "<p>We have some SSL communication using <a href=\"http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29\" rel=\"nofollow\">Boost</a> asio. Connecting and communication works fine, but now we'd like to show the actual <a href=\"http://en.wikipedia.org/wiki/Transport_Layer_Security\" rel=\"nofollow\">TLS</a> version and cipher used by the connection.</p>\n\n<p>The Boost asio objects we use for the <a href=\"http://en.wikipedia.org/wiki/Transport_Layer_Security\" rel=\"nofollow\">SSL</a> connection are defined like this:</p>\n\n<pre><code>typedef boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&gt; ssl_socket;\nboost::shared_ptr&lt;ssl_socket&gt;   m_psslsocket;\nboost::asio::ssl::context* m_pcontext;\n</code></pre>\n\n<p>It looks like Boost asio doesn't really have an interface to query the connection for the cipher once it's set up.</p>\n\n<p>I can get the OpenSSL SSL_CTX* pointer by calling this:</p>\n\n<pre><code>SSL_CTX* ctx = pContext-&gt;impl(); \n</code></pre>\n\n<p>Or the OpenSSL SSL* by calling this:</p>\n\n<pre><code>m_psslsocket-&gt;native_handle()\n</code></pre>\n\n<p>But from the OpenSSL documentation I can't figure out how to get the used cipher and TLS version from this. </p>\n"}, {"tags": ["c++", "windows", "clr"], "comments": [{"owner": {"reputation": 11220, "user_id": 2609288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3634e5c231c72e362f00ae39b637734f?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/2609288/baldrick"}, "edited": false, "score": 0, "creation_date": 1472048030, "post_id": 39125310, "comment_id": 65597051, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17339928/c-sharp-how-to-convert-object-to-intptr-and-back\">C# - How To Convert Object To IntPtr And Back?</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472048190, "post_id": 39125310, "comment_id": 65597157, "body": "It is <i>very</i> unlikely that using the Declare keyword is correct.  Since you are writing C++/CLI code anyway, you might as well add a reference to the project so you can use managed declarations and pass a PictureBox^ reference directly.  Nevertheless, the oracle you asks for <a href=\"https://msdn.microsoft.com/en-us/library/system.windows.forms.control.fromhandle%28v=vs.110%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">does exist</a>.  Don&#39;t use it."}, {"owner": {"reputation": 115, "user_id": 3358125, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/738f34e86ab430523e6e94144bb3c3d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3358125", "link": "https://stackoverflow.com/users/3358125/user3358125"}, "edited": false, "score": 0, "creation_date": 1472053875, "post_id": 39125310, "comment_id": 65601211, "body": "Hans, What do you mean by the Declare (statement) is not correct? Can you please explain?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472058430, "post_id": 39125310, "comment_id": 65603880, "body": "You are making an unmanaged call into managed code.  Not only is it unnecessary and makes you ask this question, it also makes exceptions hard to diagnose."}, {"owner": {"reputation": 115, "user_id": 3358125, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/738f34e86ab430523e6e94144bb3c3d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3358125", "link": "https://stackoverflow.com/users/3358125/user3358125"}, "edited": false, "score": 0, "creation_date": 1472092469, "post_id": 39125310, "comment_id": 65616619, "body": "If I new this approach was unnecessary I wouldn&#39;t ask"}], "owner": {"reputation": 115, "user_id": 3358125, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/738f34e86ab430523e6e94144bb3c3d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3358125", "link": "https://stackoverflow.com/users/3358125/user3358125"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472052261, "creation_date": 1472046931, "last_edit_date": 1472052261, "question_id": 39125310, "link": "https://stackoverflow.com/questions/39125310/visual-c-clr-how-to-convert-a-picture-boxs-handle-to-a-managed-pointer-pictu", "title": "Visual C++ CLR How to convert a picture box&#39;s handle to a managed pointer (PictureBox ^_pbPic )", "body": "<p>I am writing a dll which receives a picture box'handle in a call like:</p>\n\n<pre><code>**Declare Sub ERPInitialize Lib \"C:\\Desenv\\EBioNet\\EBioNet\\Debug\\ERPDll.dll\" (ByVal PicHandle As Long)**\n</code></pre>\n\n<p>and it is called in this way:</p>\n\n<pre><code>**Call ERPInitialize(PictureBox1.Handle)**\n</code></pre>\n\n<p>I would like to store this handle and get back the PictureBox1's managed pointer back from the stored handle so that I can draw an image on it.</p>\n\n<p>Any clue?\nThanks in advance</p>\n\n<p>If I pass PictureBox^ in the the call ERPInitialize I cannot stored it, for later use as a global, because managed pointers are not allowed in CLR.</p>\n\n<p>I tried </p>\n\n<pre><code>PictureBox ^_pbPic;\nIntPtr Ptr_Picturebox = (IntPtr)PictureHWD;\nGCHandle handle2 = (GCHandle)Ptr_Picturebox;\n_pbPic = (PictureBox ^ )(handle2.Target);\n</code></pre>\n\n<p>but it causes an exception  0xc0000005.</p>\n"}, {"tags": ["c++", "windows", "colors", "terminal", "pdcurses"], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 6751061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LvbsH.jpg?s=128&g=1", "display_name": "Nadav", "link": "https://stackoverflow.com/users/6751061/nadav"}, "edited": false, "score": 0, "creation_date": 1472389090, "post_id": 39146028, "comment_id": 65723606, "body": "Fantastic! Thanks! It seems however to only word on CMD.EXE and not on other terminals, unfortunately. Is that known behaviour? If so, I suppose then this clarifies my original question, I should maybe make a new one regarding on how to set which palette to use when launching one of the other terminals."}, {"owner": {"reputation": 1706, "user_id": 2906189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f346585e5c2b436ad98d6317256bc38?s=128&d=identicon&r=PG", "display_name": "William McBrine", "link": "https://stackoverflow.com/users/2906189/william-mcbrine"}, "reply_to_user": {"reputation": 48, "user_id": 6751061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LvbsH.jpg?s=128&g=1", "display_name": "Nadav", "link": "https://stackoverflow.com/users/6751061/nadav"}, "edited": false, "score": 0, "creation_date": 1472680479, "post_id": 39146028, "comment_id": 65855185, "body": "I&#39;m not familiar with ConEmu or Console2, but I&#39;ll take a look."}], "tags": [], "owner": {"reputation": 1706, "user_id": 2906189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f346585e5c2b436ad98d6317256bc38?s=128&d=identicon&r=PG", "display_name": "William McBrine", "link": "https://stackoverflow.com/users/2906189/william-mcbrine"}, "is_accepted": true, "score": 1, "last_activity_date": 1472129916, "creation_date": 1472129916, "answer_id": 39146028, "question_id": 39125240, "link": "https://stackoverflow.com/questions/39125240/can-any-windows-terminals-color-palettes-be-edited-with-pdcurses/39146028#39146028", "title": "Can any Windows terminal&#39;s color palettes be edited with pdcurses?", "body": "<p>The code to do it in PDCurses 3.4 used to work in some versions of Windows, but later Windows (XP Service Pack 3+) broke it. However, it's been updated to work with current Windows if you grab the latest PDCurses code from git.</p>\n\n<p>BTW, you should only call <code>init_color()</code> after <code>initscr()</code>.</p>\n"}], "owner": {"reputation": 48, "user_id": 6751061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LvbsH.jpg?s=128&g=1", "display_name": "Nadav", "link": "https://stackoverflow.com/users/6751061/nadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 39146028, "answer_count": 1, "score": 1, "last_activity_date": 1472129916, "creation_date": 1472046749, "question_id": 39125240, "link": "https://stackoverflow.com/questions/39125240/can-any-windows-terminals-color-palettes-be-edited-with-pdcurses", "title": "Can any Windows terminal&#39;s color palettes be edited with pdcurses?", "body": "<p>I'm a big fan of ASCII aesthetics, and the idea of creating graphics from a terminal appeals to me.</p>\n\n<p>I'm playing around with pdcurses on a Windows environment, and I found a very interesting property: init_color. However, it does not seem to work at all! Not only is the color range of every terminal I've tried (CMD.exe, ConEmu and Console2) limited to 16 colors, I cannot seem to be able to edit the palette. </p>\n\n<p>I couldn't find anything about this topic online. </p>\n\n<p>So- Is it at all possible? And if not, are there alternatives? For example, I know ConEmu has palettes, but I do not know how to tell it what palette to use from a c++ program.</p>\n\n<p>Here's a sample of code I tried:</p>\n\n<pre><code>#include &lt;curses.h&gt;\nint main()\n{\n    init_color(1, 700, 600, 111);\n    initscr();\n    noecho();\n    if(has_colors() == FALSE)\n    {\n        endwin();\n        printf(\"Your terminal doesn't support color..!\\n\");\n        return 1;\n    }\n    init_color(2, 555, 555, 222);\n    start_color();\n    init_pair(1, 1, 0);\n    init_pair(2, 2, 0);\n    attron(COLOR_PAIR(1));\n    printw(\"aaaa \");\n    attron(COLOR_PAIR(2));\n    init_color(12, 700, 600, 111);\n    printw(\"bbbb\\n\");\n    getch();\n    endwin();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "stdthread"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 6, "creation_date": 1472045875, "post_id": 39124849, "comment_id": 65595300, "body": "What happens after you make the thread? Do you <code>join</code> it?"}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 3, "creation_date": 1472046359, "post_id": 39124849, "comment_id": 65595665, "body": "What @doctorlove probably is hinting at is that this looks like a lifetime issue where where the thread outlives the Klass instance and thus has a dangling this-pointer.  By joining at the right place, you can prevent this.  However we can&#39;t be sure based on the presented contex."}, {"owner": {"reputation": 727, "user_id": 1632336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/36c3da5db491a299163393cecdfeed16?s=128&d=identicon&r=PG", "display_name": "Wizmann", "link": "https://stackoverflow.com/users/1632336/wizmann"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1472053178, "post_id": 39124849, "comment_id": 65600772, "body": "@doctorlove stefaanv hi both, thanks for your reply. Actually the debugger and log shows that the program is down right after the ctor of std::thread is called, and the &quot;join&quot; are several lines after. I think the problem is not about &quot;join&quot;. And I also mentioned in the question that if I call &quot;myfunc&quot; without arguments, everything goes well."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472070638, "post_id": 39124849, "comment_id": 65610336, "body": "Please edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "is_accepted": false, "score": 0, "last_activity_date": 1472046848, "creation_date": 1472046848, "answer_id": 39125276, "question_id": 39124849, "link": "https://stackoverflow.com/questions/39124849/stdthread-throws-access-violation-exception-when-created-with-arguments/39125276#39125276", "title": "std::thread throws Access violation exception when created with arguments?", "body": "<p>You should always make sure you join (or possibly detach) a <code>thread</code>, otherwise leaving <code>main</code> especially with a thread using objects (in this case <code>this</code>) will (sometimes) cause problems.</p>\n\n<pre><code>//... details omitted...\n\nint main()\n{\n  auto t = std::thread(&amp;Klass::myfunc, this);\n  t.join();  //&lt;----- NOTE THIS\n}\n</code></pre>\n\n<p>Anthony William's threading <a href=\"https://www.justsoftwaresolutions.co.uk/threading/multithreading-in-c++0x-part-1-starting-threads.html\" rel=\"nofollow\">blog</a> goes through this in detail. With an example very similar to your second one:</p>\n\n<pre><code>void my_thread_func()\n{\n    std::cout&lt;&lt;\"hello\"&lt;&lt;std::endl;\n}\n\nint main()\n{\n    std::thread t(my_thread_func);\n}\n</code></pre>\n\n<p>He says</p>\n\n<blockquote>\n  <p>If you compile and run this little application, what happens? Does it\n  print hello like we wanted? Well, actually there's no telling. It\n  might do or it might not. I ran this simple application several times\n  on my machine, and the output was unreliable: sometimes it output\n  \"hello\", with a newline; sometimes it output \"hello\" without a\n  newline, and sometimes it didn't output anything. What's up with that?\n  Surely a simple app like this ought to behave predictably?</p>\n</blockquote>\n\n<p>He then introduces the idea of using <code>join</code> as I did above, and says,</p>\n\n<blockquote>\n  <p>The problem is we're not waiting for our thread to finish. When the\n  execution reaches the end of main() the program is terminated,\n  whatever the other threads are doing.</p>\n</blockquote>\n"}], "owner": {"reputation": 57, "user_id": 3859218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67455897e2f502b0b67540f783bc2cfd?s=128&d=identicon&r=PG&f=1", "display_name": "user3859218", "link": "https://stackoverflow.com/users/3859218/user3859218"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1418, "favorite_count": 0, "closed_date": 1472070722, "answer_count": 1, "score": 4, "last_activity_date": 1472070508, "creation_date": 1472045686, "last_edit_date": 1472070508, "question_id": 39124849, "link": "https://stackoverflow.com/questions/39124849/stdthread-throws-access-violation-exception-when-created-with-arguments", "closed_reason": "Not suitable for this site", "title": "std::thread throws Access violation exception when created with arguments?", "body": "<p>I'm using VS2015 and encounter a extremely strange problem when using std::thread.</p>\n\n<pre><code>void Klass::myfunc(int a, int b) { std::cout &lt;&lt; a &lt;&lt; ' ' &lt;&lt; b &lt;&lt; std::endl; }\n// ...\nauto t = std::thread(&amp;Klass::myfunc, this, 100, 200); &lt;- runtime error after called\n// ...\nt.join();\n</code></pre>\n\n<p>It works well on Debug mode, but throws an \"Access violation exception\" when I turn to Release mode.</p>\n\n<p>What's more, if I try to modify \"myfunc\" to this:</p>\n\n<pre><code>void Klass::myfunc() { std::cout &lt;&lt; \"foo\" &lt;&lt; std::endl; }\n// ...\nauto t = std::thread(&amp;Klass::myfunc, this); // everything goes well\n// ...\nt.join();\n</code></pre>\n\n<p>it works well again.</p>\n\n<p>I'm guarantee that \"&amp;Klass::myfunc\" and \"this\" pointers are not NULL. And there is a \"join\" after several lines when the ctor is called.</p>\n\n<p>I guess it might be some kind of \"undefined behavior\" but I have no idea what is it exactly.</p>\n\n<p>The call stack is something like this:</p>\n\n<pre><code>    000000c83a4ffd40()  Unknown\n&gt;   distributed_word_embedding.exe!std::_LaunchPad&lt;std::unique_ptr&lt;std::tuple&lt;void (__cdecl multiverso::Communicator::*)(void) __ptr64,multiverso::Communicator * __ptr64&gt;,std::default_delete&lt;std::tuple&lt;void (__cdecl multiverso::Communicator::*)(void) __ptr64,multiverso::Communicator * __ptr64&gt; &gt; &gt; &gt;::_Run(std::_LaunchPad&lt;std::unique_ptr&lt;std::tuple&lt;void (__cdecl multiverso::Communicator::*)(void),multiverso::Communicator *&gt;,std::default_delete&lt;std::tuple&lt;void (__cdecl multiverso::Communicator::*)(void),multiverso::Communicator *&gt; &gt; &gt; &gt; * _Ln) Line 247    C++\n    distributed_word_embedding.exe!std::_Pad::_Call_func(void * _Data) Line 210 C++\n    ucrtbase.dll!00007ffabdc7be1d() Unknown\n    kernel32.dll!00007ffabfae8102() Unknown\n    ntdll.dll!00007ffac26bc5b4()    Unknown\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2012", "cuda", "nsight"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1472045732, "post_id": 39124755, "comment_id": 65595186, "body": "What is <code>threadIdx</code>  you a referring to? Do you mean the built-in CUDA variable (ie <code>threadIdx.{xyz}</code>? What is the block size you are running?"}, {"owner": {"reputation": 53, "user_id": 6639734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5083172dec71af50e0fe71b65ac12ddf?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteFlowers", "link": "https://stackoverflow.com/users/6639734/whiteflowers"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1472284070, "post_id": 39124755, "comment_id": 65699117, "body": "I was referring to Cuda built-in threadIdx.x variable."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1472284228, "post_id": 39124755, "comment_id": 65699156, "body": "Well then your question makes no sense. ThreadIdx is a block scope variable. It has the same range of values in every block. There are no &quot;threads with higher index, meaning that blocks other than the first block&quot;"}, {"owner": {"reputation": 53, "user_id": 6639734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5083172dec71af50e0fe71b65ac12ddf?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteFlowers", "link": "https://stackoverflow.com/users/6639734/whiteflowers"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1472284460, "post_id": 39124755, "comment_id": 65699202, "body": "Yes, of course you&#39;re right, I should ask the question in a more elegant way. In fact, I was wondering if I can see blocks with (blockIdx.x != 0). But, anyway I have found a way and posted my method below."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6639734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5083172dec71af50e0fe71b65ac12ddf?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteFlowers", "link": "https://stackoverflow.com/users/6639734/whiteflowers"}, "edited": false, "score": 0, "creation_date": 1472112796, "post_id": 39135560, "comment_id": 65624323, "body": "Thanks for your answer, I have tried what you said above and see that there is only single line meaning that only the first block is seen and others are gone or missing. Is there any method that I do not know yet that enables Visual Studio to launch other blocks as well?"}], "tags": [], "owner": {"reputation": 42, "user_id": 6080756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c71129fd7d646a89edb2576850c7e80?s=128&d=identicon&r=PG&f=1", "display_name": "harryz", "link": "https://stackoverflow.com/users/6080756/harryz"}, "is_accepted": false, "score": 0, "last_activity_date": 1472090177, "creation_date": 1472090177, "answer_id": 39135560, "question_id": 39124755, "link": "https://stackoverflow.com/questions/39124755/cuda-nsight-debug-focus-visual-studio-2012-edition/39135560#39135560", "title": "CUDA Nsight Debug Focus, Visual Studio 2012 Edition", "body": "<p>Hi switching blocks is a common operation in Nisght, please follow these steps</p>\n\n<ol>\n<li>Launch your cuda app and wait until one bp is hit.</li>\n<li>Open the \"CUDA Info\" windows via \"Visual studio -> Nsight -> Windows -> Cuda Info\"</li>\n<li>Switch the page to block, you can see all the launched blocks in current app.</li>\n<li>Double click each line and you can switch to another block.</li>\n<li>You can do the same operation for warp and thread</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1472165763, "post_id": 39143503, "comment_id": 65655342, "body": "Thats correct.  conditional breakpoints are the way to go.  When stopped at a breakpoint, you can only switch focus to a thread/block that is currently resident/executing on the GPU.  For a kernel with a large complement of blocks, many will not be accessible at any given time via focus-switching.  You need to use conditional breakpoints so the block in question is actually resident.  Depending on the specifics of your code and the conditional breakpoint, it can be much slower than an ordinary breakpoint."}, {"owner": {"reputation": 53, "user_id": 6639734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5083172dec71af50e0fe71b65ac12ddf?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteFlowers", "link": "https://stackoverflow.com/users/6639734/whiteflowers"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1472282908, "post_id": 39143503, "comment_id": 65698862, "body": "Considering that even non-conditional breakpoints are slow, no one would dare to resort to conditional breakpoints. There should be a smarter way Nvidia should focus on for its later CUDA versions. Thanks Robert."}], "tags": [], "owner": {"reputation": 53, "user_id": 6639734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5083172dec71af50e0fe71b65ac12ddf?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteFlowers", "link": "https://stackoverflow.com/users/6639734/whiteflowers"}, "is_accepted": false, "score": 1, "last_activity_date": 1472122871, "creation_date": 1472122871, "answer_id": 39143503, "question_id": 39124755, "link": "https://stackoverflow.com/questions/39124755/cuda-nsight-debug-focus-visual-studio-2012-edition/39143503#39143503", "title": "CUDA Nsight Debug Focus, Visual Studio 2012 Edition", "body": "<p>I have found a way to see blocks with index higher than zero, what you just need to do is to set all the breakpoints in the cuda program as conditional and then start the Nsight debugging environment. It then shows other blocks as well. However, I think that is also related to the number of streaming multiprocessors residing on the GPU. According to my knowledge, number of streaming multiprocessors is equal to the number of blocks that can run simultaneously at the same time. I have been using for some time GeForce GT630 and that have only single streaming multiprocessor which is why I'm seeing only the first block running but not the others. However, debugging is still so slow.</p>\n"}], "owner": {"reputation": 53, "user_id": 6639734, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5083172dec71af50e0fe71b65ac12ddf?s=128&d=identicon&r=PG&f=1", "display_name": "WhiteFlowers", "link": "https://stackoverflow.com/users/6639734/whiteflowers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472122871, "creation_date": 1472045441, "question_id": 39124755, "link": "https://stackoverflow.com/questions/39124755/cuda-nsight-debug-focus-visual-studio-2012-edition", "title": "CUDA Nsight Debug Focus, Visual Studio 2012 Edition", "body": "<p>I'm working on a project that includes working with Visual Studio 2012 and CUDA Development and integrated is the Nsight Debugging environment to it. I can very easily see threads on GPU up to threadIdx == 128, however, when I try to see threads with higher index, meaning that blocks other than the first block, using debugging focus dialog box reached through CUDA Debug focus, I am having difficulty, switching to other blocks. Is this normal operation of Nsight or not, any answers would be appreciated. Thanks all.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472045528, "post_id": 39124737, "comment_id": 65595035, "body": "You want to lookup stack unwinding. And also define <i>crash</i> more exactly. If the program aborts all memory will be to the OS anyways."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1472045631, "post_id": 39124737, "comment_id": 65595112, "body": "It depends on the &quot;crash&quot; - terminate will not unwind the stack, so destructors won&#39;t get called. There are some genral musing (about RAII) here: <a href=\"http://stackoverflow.com/questions/76796/general-guidelines-to-avoid-memory-leaks-in-c/77893#77893\" title=\"general guidelines to avoid memory leaks in c\">stackoverflow.com/questions/76796/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1365, "user_id": 4134826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edf0bf885137dbfc2018bf8a22c69442?s=128&d=identicon&r=PG&f=1", "display_name": "Lying Dog", "link": "https://stackoverflow.com/users/4134826/lying-dog"}, "is_accepted": false, "score": 1, "last_activity_date": 1472045615, "creation_date": 1472045615, "answer_id": 39124823, "question_id": 39124737, "link": "https://stackoverflow.com/questions/39124737/how-do-smart-pointers-know-when-to-free-the-resources-on-program-crash/39124823#39124823", "title": "How do smart pointers know when to free the resources on program crash?", "body": "<p>When a C++ program crashes, it exits. The operating system cleans up any OS resources it may have asked for, which includes memory, but also other resources (file handles for example).</p>\n\n<p>Thus, C++ does not clean up - the operating system does. What once was the C++ heap is returned to the operating system as free memory. </p>\n"}, {"tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": true, "score": 8, "last_activity_date": 1472046449, "last_edit_date": 1472046449, "creation_date": 1472045625, "answer_id": 39124829, "question_id": 39124737, "link": "https://stackoverflow.com/questions/39124737/how-do-smart-pointers-know-when-to-free-the-resources-on-program-crash/39124829#39124829", "title": "How do smart pointers know when to free the resources on program crash?", "body": "<p>If the program crashes \"gracefully\" due to a handled exception, the stack unwinding will call the destructors on any smart pointers and free the memory. </p>\n\n<p>For complete crashes (e.g. segmentation fault, call to <code>std::terminate()</code>), it is the operating system that will free any memory and resources held by the program.</p>\n"}], "owner": {"reputation": 9876, "user_id": 1667868, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01faa51ea5dddd44aeeb572d4b45c835?s=128&d=identicon&r=PG&f=1", "display_name": "Sven van den Boogaart", "link": "https://stackoverflow.com/users/1667868/sven-van-den-boogaart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 39124829, "answer_count": 2, "score": 1, "last_activity_date": 1472046449, "creation_date": 1472045401, "question_id": 39124737, "link": "https://stackoverflow.com/questions/39124737/how-do-smart-pointers-know-when-to-free-the-resources-on-program-crash", "title": "How do smart pointers know when to free the resources on program crash?", "body": "<p>How does a c++ project using smart pointers like unique_ptr's know to free the resources when the program crashes?</p>\n"}, {"tags": ["c++", "pointers", "new-operator", "delete-operator"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472046222, "post_id": 39124732, "comment_id": 65595557, "body": "To everyone answering: You realize that the code was an example right? This isn&#39;t actual code, but an example that(well I thought) would generate the same answers. It isn&#39;t about the code, but really the deletion."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1472046313, "post_id": 39124732, "comment_id": 65595629, "body": "I think the answers stand regardless of the example. Generally there&#39;s no way to tell the lifetime of an object just from a raw pointer."}], "answers": [{"comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472046203, "post_id": 39124945, "comment_id": 65595540, "body": "You realize that the code was an example right? This isn&#39;t actual code, but an example that(well I thought) would generate the same answers. It isn&#39;t about the code, but really the deletion."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 2, "creation_date": 1472046347, "post_id": 39124945, "comment_id": 65595655, "body": "I understand that this is an example and answer is the same - do not delete pointer inside the function. Either use smart pointers and transfer ownership or let caller manage object. Ugly hacks that you keep in mind (try to detect if memory allocate on stack or heap) create big problems, do not do that."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1472045986, "creation_date": 1472045986, "answer_id": 39124945, "question_id": 39124732, "link": "https://stackoverflow.com/questions/39124732/should-i-delete-pointer-passed-to-a-function-as-argument/39124945#39124945", "title": "Should I delete pointer passed to a function as argument?", "body": "<blockquote>\n  <p>basically meaning I need a way to differentiate between both. </p>\n</blockquote>\n\n<p>No you do not. In this case function should not call delete on the pointer at all. Caller of the function has this information and it should call delete on the pointer if necessery, not function itself.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1472046047, "post_id": 39124948, "comment_id": 65595419, "body": "This does not change anything as pointer may have address of non dynamically allocated object."}], "tags": [], "owner": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "is_accepted": false, "score": 0, "last_activity_date": 1472045992, "creation_date": 1472045992, "answer_id": 39124948, "question_id": 39124732, "link": "https://stackoverflow.com/questions/39124732/should-i-delete-pointer-passed-to-a-function-as-argument/39124948#39124948", "title": "Should I delete pointer passed to a function as argument?", "body": "<p>simply function should expect reference to pointer:</p>\n\n<pre><code>void draw(Shape *&amp;p);\n</code></pre>\n\n<p>if prevents from:</p>\n\n<pre><code>Shape shape; // not pointer\ndraw(&amp;shape);\n</code></pre>\n\n<p>and from:</p>\n\n<pre><code>draw(new Shape());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 5, "last_activity_date": 1472046046, "creation_date": 1472046046, "answer_id": 39124964, "question_id": 39124732, "link": "https://stackoverflow.com/questions/39124732/should-i-delete-pointer-passed-to-a-function-as-argument/39124964#39124964", "title": "Should I delete pointer passed to a function as argument?", "body": "<p>You might use</p>\n\n<pre><code>void draw(std::observer_ptr&lt;Shape&gt; shape)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void draw(Shape&amp; shape)\n</code></pre>\n\n<p>over</p>\n\n<pre><code>void draw(Shape * shape)\n</code></pre>\n\n<p>To be explicit that <code>draw</code> doesn't reclaim ownership.</p>\n\n<p>and use smart pointer in signature when you reclaim it.</p>\n\n<pre><code>void Take(std::unique_ptr&lt;Shape&gt; shape);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void Take(std::shared_ptr&lt;Shape&gt; shape);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "is_accepted": false, "score": 1, "last_activity_date": 1472046058, "creation_date": 1472046058, "answer_id": 39124970, "question_id": 39124732, "link": "https://stackoverflow.com/questions/39124732/should-i-delete-pointer-passed-to-a-function-as-argument/39124970#39124970", "title": "Should I delete pointer passed to a function as argument?", "body": "<p>Ignoring the possibility of smart pointers or other RAII solution: It must be documented, as part of the function contract, whether the function takes the ownership of the given pointer or not.</p>\n\n<p>If it takes the ownership, the function is responsible of deleting it. The caller must not use it later.</p>\n\n<p>Your example function is called <code>draw</code>. In that case I would assume it shouldn't take the ownership. Just draw the shape and leave it be.</p>\n"}, {"tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": false, "score": 4, "last_activity_date": 1472046101, "creation_date": 1472046101, "answer_id": 39124989, "question_id": 39124732, "link": "https://stackoverflow.com/questions/39124732/should-i-delete-pointer-passed-to-a-function-as-argument/39124989#39124989", "title": "Should I delete pointer passed to a function as argument?", "body": "<p>There is nothing to say that you <em>can't</em> delete a pointer passed as a function parameter, but generally it is preferred to delete heap objects in the same context that they were created.</p>\n\n<p>For example, I would consider this:</p>\n\n<pre><code>Shape * pShape = new Shape(...);\n\ndraw(pShape);\n\ndelete pShape;\n</code></pre>\n\n<p>to be better than this:</p>\n\n<pre><code>draw(new Shape(...));  // Did the shape get deleted? Who knows...\n</code></pre>\n\n<p>The latter example also prevents you from handling the case where draw() cannot call <code>delete</code> for any reason, potentially creating a memory leak.</p>\n\n<p>I would highly recommend the use of smart pointers (e.g. <code>unique_ptr&lt;&gt;</code>, <code>shared_ptr&lt;&gt;</code>) to handle the lifetime of your pointer. But if you absolutely can't, make sure that you document your function and state that you are passing ownership of the pointer to your function, and that the caller should not expect to be able to use <code>pShape</code> after calling <code>draw()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 8, "last_activity_date": 1472047912, "creation_date": 1472047912, "answer_id": 39125733, "question_id": 39124732, "link": "https://stackoverflow.com/questions/39124732/should-i-delete-pointer-passed-to-a-function-as-argument/39125733#39125733", "title": "Should I delete pointer passed to a function as argument?", "body": "<blockquote>\n  <p>Now what I am confused about here is deletion.</p>\n</blockquote>\n\n<p>This is precisely why we never pass raw pointers as arguments.</p>\n\n<p>Here are some rules of thumb you may want to consider:</p>\n\n<ol>\n<li><p>You may not alter the shape I am passing you:</p>\n\n<p><code>void draw(const Shape&amp; shape);</code></p></li>\n<li><p>You may alter the shape, but I am retaining ownership of it:</p>\n\n<p><code>void draw(Shape&amp; shape);</code></p></li>\n<li><p>Please use a copy of my shape:</p>\n\n<p><code>void draw(Shape shape);</code></p></li>\n<li><p>Please take ownership of this shape away from me:</p>\n\n<p><code>void draw(std::unique_ptr&lt;Shape&gt; shape);</code></p></li>\n<li><p>Let's share this shape:</p>\n\n<p><code>void draw(std::shared_ptr&lt;const Shape&gt; shape);</code></p></li>\n</ol>\n"}], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1895, "favorite_count": 1, "accepted_answer_id": 39124964, "answer_count": 6, "score": 5, "last_activity_date": 1472257512, "creation_date": 1472045384, "last_edit_date": 1495541349, "question_id": 39124732, "link": "https://stackoverflow.com/questions/39124732/should-i-delete-pointer-passed-to-a-function-as-argument", "title": "Should I delete pointer passed to a function as argument?", "body": "<p>So I was reading some Stack Overflow answers about deleting pointer arguments particularly these ones(<a href=\"https://stackoverflow.com/questions/10502442/new-operator-in-function-call\">1</a>,<a href=\"https://stackoverflow.com/questions/11854529/new-operator-in-function-parameter\">2</a>), because I am building a function, that requires a pointer as an argument.</p>\n\n<p>A simplified version of the function is below:</p>\n\n<pre><code>void draw(Shape * b)\n{\n    //Draws code....\n}\n</code></pre>\n\n<p>No what I am confused about here is deletion. For example, if the function is called like this:</p>\n\n<pre><code>Shape * c;\ndraw(&amp;c);\n</code></pre>\n\n<p>Then I don't have to delete anything. But if it is like this:</p>\n\n<pre><code>draw(new Shape{});\n</code></pre>\n\n<p>then I have to. So basically, my question is, how should I go about deleting if the <code>new</code> keyword is used in the parameter. There are no possible exceptions that could be thrown in the functions, so no need for RAII. Any ideas? Please don't suggest anything involving smart pointers, because that is what I already will do, this question is curiosity. Also, please answer knowing that the function can take both the new operator, or an existing pointer, basically meaning I need a way to differentiate between both. Also, for my links: These don't really answer my question, because most of them just depend on smart pointers, or one call or the other.</p>\n"}, {"tags": ["c++", "opencv", "syntax", "aruco"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1472045282, "post_id": 39124655, "comment_id": 65594854, "body": "That is simply a vector constructor accepting 1 argument, i.e. it&#39;s size. You are crating a <code>std::vector&lt;cv::Mat&gt;</code> called <code>thres_images</code> with size <code>n_param1</code>. Then you access the middle element of this vector"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472045288, "post_id": 39124655, "comment_id": 65594858, "body": "Looks like a variable definition for me, nothing special."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1472045297, "post_id": 39124655, "comment_id": 65594864, "body": "I think you need <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good beginners book</a>. That&#39;s a standard variable declaration calling a specific constructor of the <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">standard <code>vector</code> class</a>."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1472045405, "post_id": 39124655, "comment_id": 65594943, "body": "Have you come across <code>std::vector</code> before?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1472045499, "post_id": 39124655, "comment_id": 65595016, "body": "nothing weird about this."}, {"owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "edited": false, "score": 0, "creation_date": 1472048474, "post_id": 39124655, "comment_id": 65597363, "body": "Ah, now I see. I&#39;ve never used vector constructor before so this misleads me. Isn&#39;t there something like this <a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a> for C++ constructions?"}], "answers": [{"tags": [], "owner": {"reputation": 2017, "user_id": 4999494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e49247723efb14f33ad19a5ecdf1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Balabin", "link": "https://stackoverflow.com/users/4999494/alexander-balabin"}, "is_accepted": true, "score": 2, "last_activity_date": 1472045434, "creation_date": 1472045434, "answer_id": 39124750, "question_id": 39124655, "link": "https://stackoverflow.com/questions/39124655/c-weird-syntax-spotted-in-aruco-codes/39124750#39124750", "title": "C++ weird syntax spotted in Aruco codes", "body": "<p><code>thres_images</code> is a vector and its ctor is passed <code>n_param1</code> as initial container size. This ctor is referred to as a fill ctor.</p>\n"}], "owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 39124750, "answer_count": 1, "score": -3, "last_activity_date": 1472045434, "creation_date": 1472045157, "question_id": 39124655, "link": "https://stackoverflow.com/questions/39124655/c-weird-syntax-spotted-in-aruco-codes", "title": "C++ weird syntax spotted in Aruco codes", "body": "<p>I have found strange syntax in some of Aruco files:</p>\n\n<pre><code>vector&lt; cv::Mat &gt; thres_images(n_param1);\n</code></pre>\n\n<p>Seems like <code>thres_images</code> is function, but if yes then what is <code>vector&lt; cv::Mat &gt;</code> in front of it? It is not declaration nor definition. Later it is used as array:</p>\n\n<pre><code>thres = thres_images[n_param1 / 2];\n</code></pre>\n\n<p>PS: full code can be found <a href=\"https://www.arkeon.be/trunk/dependencies/aruco/src/markerdetector.cpp\" rel=\"nofollow\">here</a></p>\n"}, {"tags": ["c++", "double"], "comments": [{"owner": {"reputation": 423, "user_id": 6403908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c417abbf02cc56b054e2b2404e6358a4?s=128&d=identicon&r=PG&f=1", "display_name": "Jovasa", "link": "https://stackoverflow.com/users/6403908/jovasa"}, "edited": false, "score": 3, "creation_date": 1472045127, "post_id": 39124564, "comment_id": 65594716, "body": "Well only the first 16 digits are correct"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1472045456, "post_id": 39124564, "comment_id": 65594974, "body": "The algorithm that takes the parameter passed to <code>precision()</code> doesn&#39;t work based on theory. It&#39;ll loop that many times and produce that result, I imagine, regardless of how many bits of real information is in the floating point number..."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1472045550, "post_id": 39124564, "comment_id": 65595047, "body": "If my value is <code>1.0</code>, I can write as many 0s as I want, it won&#39;t mean that I increased the initial precision. It&#39;s just that adding binary 0s doesn&#39;t translate to 0s in decimal."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1472045932, "post_id": 39124564, "comment_id": 65595341, "body": "As an intuitive (?) explanation: with two bits of floating-point precision, you can represent for instance 0.75 exactly - two decimals. With three, 0.125 - three decimals. With four bits, 0.56125 - five decimals. And so on..."}], "answers": [{"comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472045093, "post_id": 39124603, "comment_id": 65594691, "body": "Lol at the downvotes. EJP you could maybe please tell us the story of &quot;After the decimal point&quot;? I will go get my popcorn."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472046115, "post_id": 39124603, "comment_id": 65595481, "body": "@OliverCharlesworth Just consider 1 and 0.1. The first takes one bit. The second takes more than 53. Because it&#39;s a fraction."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472046289, "post_id": 39124603, "comment_id": 65595613, "body": "Not because it&#39;s a fraction.  The same is true for non-fractional numbers: 1024 takes one bit, 1023 takes 9."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472068860, "post_id": 39124603, "comment_id": 65609489, "body": "@OliverCharlesworth And how many bits does 0.1024 take? and why?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472069030, "post_id": 39124603, "comment_id": 65609574, "body": "@EJP - Several, I imagine?  But again, that&#39;s not because it&#39;s a fraction, it&#39;s because it&#39;s not a neat multiple of a power of two."}, {"owner": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472107668, "post_id": 39124603, "comment_id": 65621096, "body": "@OliverCharlesworth What do you mean with 1024 takes one bit? Just because only one bit is 1 it doesn&#39;t mean it takes only bit. The less significant bits are very important."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1472108666, "post_id": 39124603, "comment_id": 65621727, "body": "@exilit: as in, a floating point representation with a 1-bit mantissa (actually, zero-bit on practice) would be able to exactly represent it."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": -5, "last_activity_date": 1472045038, "creation_date": 1472045038, "answer_id": 39124603, "question_id": 39124564, "link": "https://stackoverflow.com/questions/39124564/if-double-digit-precision-is-%e2%89%8815-955-16-why-can-i-print-50-digits/39124603#39124603", "title": "If double digit precision is \u224815.955 (16), why can I print 50 digits?", "body": "<p>53 binary digits only equals 15.9xx decimal digits before the decimal point. After the decimal point it is another story.</p>\n"}, {"tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": false, "score": 4, "last_activity_date": 1472045789, "last_edit_date": 1495542170, "creation_date": 1472045043, "answer_id": 39124608, "question_id": 39124564, "link": "https://stackoverflow.com/questions/39124564/if-double-digit-precision-is-%e2%89%8815-955-16-why-can-i-print-50-digits/39124608#39124608", "title": "If double digit precision is \u224815.955 (16), why can I print 50 digits?", "body": "<p>Precision is related to two similar notions:</p>\n\n<ul>\n<li>The difference between the actual value and the target value (i.e. the mathematical result of 1/7).</li>\n<li>The minimum difference between neighbouring values.</li>\n</ul>\n\n<p>In both cases, that 15.9x relates to how many of those decimal digits are useful/meaningful in differentiating values.</p>\n\n<p>That says nothing about the number of decimal places required to accurately represent those values.  As <a href=\"https://stackoverflow.com/a/39124825/129570\">@dasblinkenlight says</a>, that number is potentially large in the case of double-precision floats.</p>\n"}, {"comments": [{"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 3, "creation_date": 1472046611, "post_id": 39124825, "comment_id": 65595880, "body": "To see this from other side, take the value <code>0.3</code>. It&#39;s single significant digit in decimal format (&quot;3&quot;) representing the value completely and exactly, yet the binary encoding will yield infinite <code>0.0100110011001100110011001100110011001100110011001100110011&zwnj;&#8203;0011...</code>, so taking only 53bits of that is just an approximation of <code>0.3</code>, not the exact original value. The error is smaller than the 1e-16 (that&#39;s the &quot;16 digits precision&quot;). From binary to decimal you can always calculate the <i>exact</i> decimal representation as 1/2^n values have always some exact finite decimal form."}, {"owner": {"reputation": 239210, "user_id": 2711488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1", "display_name": "Holger", "link": "https://stackoverflow.com/users/2711488/holger"}, "edited": false, "score": 1, "creation_date": 1590758364, "post_id": 39124825, "comment_id": 109809770, "body": "~750 digits for a 64 bit <code>double</code>, if my estimates are correct."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1472045619, "creation_date": 1472045619, "answer_id": 39124825, "question_id": 39124564, "link": "https://stackoverflow.com/questions/39124564/if-double-digit-precision-is-%e2%89%8815-955-16-why-can-i-print-50-digits/39124825#39124825", "title": "If double digit precision is \u224815.955 (16), why can I print 50 digits?", "body": "<p>This is because <code>double</code>s are composed of \"building blocks\" that translate to multiple digits when converted to decimal.</p>\n\n<p>A <code>double</code> has binary representation as a combination of positive and negative powers of two. With 11-bit exponent, a <code>double</code> is capable of representing numbers as small as 2<sup>-1024</sup>.</p>\n\n<p>When you convert a negative power of two to decimal representation, the number of decimal digits is equal to the absolute value of the power (see <a href=\"http://www.exploringbinary.com/a-table-of-negative-powers-of-two/\" rel=\"nofollow\">this table</a> for a list of negative powers of two up to -64). All these decimal digits are perfectly valid, so a double can represent a number that has a thousand digits when converted to decimal.</p>\n"}, {"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1472046710, "creation_date": 1472046710, "answer_id": 39125222, "question_id": 39124564, "link": "https://stackoverflow.com/questions/39124564/if-double-digit-precision-is-%e2%89%8815-955-16-why-can-i-print-50-digits/39125222#39125222", "title": "If double digit precision is \u224815.955 (16), why can I print 50 digits?", "body": "<p>What you see is the result of the conversion from the internal <em>binary</em> representation of the number 1/7 (which is as close to that number as a <code>double</code> can be) to a decimal representation of it.</p>\n\n<p>Now, 1/7 can't be represented by a finite sequence of bits in base 2, but any value stored in a <code>double</code> can be transformed in base 10 with a finite number of digits, just more then 50.</p>\n\n<p>Consider this snippet, where I set the precision of the output to 100:</p>\n\n<pre><code>cout.precision(100);\nfor ( int i = 2; i &lt;= 10; ++i) {\n    cout &lt;&lt; \"1 / \" &lt;&lt; i &lt;&lt; \" = \" &lt;&lt; 1.0 / i &lt;&lt; endl;\n}\n</code></pre>\n\n<p>You can see in the result how many figures are need:</p>\n\n<pre><code>1 / 2 = 0.5\n1 / 3 = 0.333333333333333314829616256247390992939472198486328125\n1 / 4 = 0.25\n1 / 5 = 0.200000000000000011102230246251565404236316680908203125\n1 / 6 = 0.1666666666666666574148081281236954964697360992431640625\n1 / 7 = 0.142857142857142849212692681248881854116916656494140625\n1 / 8 = 0.125\n1 / 9 = 0.111111111111111104943205418749130330979824066162109375\n1 / 10 = 0.1000000000000000055511151231257827021181583404541015625\n</code></pre>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 2, "answer_count": 4, "score": 3, "last_activity_date": 1472046710, "creation_date": 1472044937, "question_id": 39124564, "link": "https://stackoverflow.com/questions/39124564/if-double-digit-precision-is-%e2%89%8815-955-16-why-can-i-print-50-digits", "title": "If double digit precision is \u224815.955 (16), why can I print 50 digits?", "body": "<p>Of course <a href=\"http://coliru.stacked-crooked.com/a/20f3dbaaf60d573e\" rel=\"nofollow\">that's</a> not magic:</p>\n\n<pre><code>double in = 1.0 / 7.0;\n\ncout.precision(50);\ncout &lt;&lt; in &lt;&lt; endl;\n</code></pre>\n\n<p>but why can I see <code>0.14285714285714284921269268124888185411691665649414</code> (i.e. 51 digits)? </p>\n\n<p>Double precision has 53 bits for precision (thus should be 15.955=16 slots).</p>\n\n<p><code>cout</code> invent numbers? :P </p>\n"}, {"tags": ["c++", "crtp"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472044550, "post_id": 39124374, "comment_id": 65594312, "body": "To make use of the CRTP, you need to derive from <code>IDisplayDevice</code>."}, {"owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 2, "creation_date": 1472044580, "post_id": 39124374, "comment_id": 65594332, "body": "How much <i>do</i> they matter (pointer calls through vtables)? Do you have a concrete limitation or requirement?"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472044592, "post_id": 39124374, "comment_id": 65594345, "body": "oops; sorry; i wrote that code just now (wasn&#39;t copy pasted) :)"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "reply_to_user": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 0, "creation_date": 1472044626, "post_id": 39124374, "comment_id": 65594373, "body": "@utnapistim yes; virtuals matter; we&#39;re talking about a realtime graphics app here"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1472045214, "post_id": 39124374, "comment_id": 65594790, "body": "It doesn&#39;t look like you need IDisplayDevice at all. It is not used anywhere (it is inherited from but then the base class is unused). Why do you think you need CRTP?"}, {"owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 1, "creation_date": 1472045229, "post_id": 39124374, "comment_id": 65594805, "body": "@coder32, can you simply make a traits-like class for the system-specific primitives? (no CRTP involved)"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "reply_to_user": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 0, "creation_date": 1472045273, "post_id": 39124374, "comment_id": 65594848, "body": "@utnapistim could you give and example pls ? Maybe as an answer, so I could accept it :)"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472045377, "post_id": 39124374, "comment_id": 65594925, "body": "@ n.m. Could be used for parameter checking (invalid string, etc...) in other functions"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 2, "creation_date": 1472047118, "post_id": 39124374, "comment_id": 65596328, "body": "@Coder32 do you plan (ever) to allow for example Windows users to freely choose DirectX or OpenGL engine? even at runtime?"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "reply_to_user": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1472047308, "post_id": 39124374, "comment_id": 65596501, "body": "@mrtnj there are two executables packaged in the app: for dx11 and ogl; if i want to compile with ogl, I just define CBN_RENDERAPI_OPENGL; but opengl is terrible on windows anyway; you can rely on it %50 of the time;"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472045549, "post_id": 39124730, "comment_id": 65595044, "body": "btw by different implementations you mean one .h and multiple .cpp-s ?"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472045625, "post_id": 39124730, "comment_id": 65595108, "body": "and about the build system; do you think it could be done in cmake ?"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472052096, "post_id": 39124730, "comment_id": 65600058, "body": "ok; so it goes like I have my class deceleration in DisplayDevice.h and then I implement everything in Win32/DisplayTraits.cpp, Linux/DisplayTraits.cpp, etc... and the build system chooses the appropriate cpp at buildtime, right ?"}, {"owner": {"reputation": 770, "user_id": 140049, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45138431f0e21247991ba58deb8da748?s=128&d=identicon&r=PG", "display_name": "Spacen Jasset", "link": "https://stackoverflow.com/users/140049/spacen-jasset"}, "reply_to_user": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472164272, "post_id": 39124730, "comment_id": 65654864, "body": "You have the right idea. CRTP isn&#39;t going to help you here becuase you won&#39;t have all the platform specific headers or libraries on each platform, so you must use your build system to select the correct platform specific files, and you have to implement this yourself, i.e set your include path, and the specific .cpp files to build for each platform. You can build up a skeleton directory structure of this to see how it might work.  I have used Scons in the past, but you should make your own decision on the build tool or tool(s) and you might decide to use different ones on each platform."}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472217289, "post_id": 39124730, "comment_id": 65676694, "body": "thx I switched to waf recently from cmake, which isn&#39;t c++ or c specific; it allows to defined macros though, and is not as obscure as cmake; i think it would be the right tool for the job, wouldn&#39;t it ? PS: why don&#39;t you use waf instead of scons ?"}], "tags": [], "owner": {"reputation": 770, "user_id": 140049, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45138431f0e21247991ba58deb8da748?s=128&d=identicon&r=PG", "display_name": "Spacen Jasset", "link": "https://stackoverflow.com/users/140049/spacen-jasset"}, "is_accepted": false, "score": 2, "last_activity_date": 1472046183, "last_edit_date": 1472046183, "creation_date": 1472045369, "answer_id": 39124730, "question_id": 39124374, "link": "https://stackoverflow.com/questions/39124374/using-crtp-to-separate-platform-specific-code/39124730#39124730", "title": "Using CRTP to separate platform specific code", "body": "<p>I don't really see the benefit of CRTP here, you still have platform specific (as opposed to feature specific) ifdefs within the code, and this tends to make things harder to read and maintain. I usually prefer having different implementations in different source files - and in fact, generally having seperate directories for each platform.</p>\n\n<p>such as:</p>\n\n<ul>\n<li>platform/win64</li>\n<li>platform/win32</li>\n<li>platform/gnu-linux</li>\n<li>platform/freebsd</li>\n</ul>\n\n<p>In this way you can largely avoid the ifdef clutter, and you generally know where to find the platform specific things. You also know what you need to write in order to port things to another platform. The build system can then be made to select the correct source rather than the preprocessor.</p>\n"}, {"comments": [{"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472045829, "post_id": 39124810, "comment_id": 65595260, "body": "I really like the traits way of doing it though; really elegant;"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1472048244, "post_id": 39124810, "comment_id": 65597205, "body": "sry for the stupid question; but platform is decided at compile time; would you typedef DisplayDevice ?"}, {"owner": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "edited": false, "score": 0, "creation_date": 1472288520, "post_id": 39124810, "comment_id": 65700171, "body": "What is the purpose of <code>using graphic_traits = T</code>? Couldn&#39;t you just call the template parameter <code>graphic_traits</code> directly, without the <code>using</code>?"}, {"owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 0, "creation_date": 1472400817, "post_id": 39124810, "comment_id": 65726989, "body": "Yes, I could have. I usually add <code>using</code> statements and abstract my types based on what roles they play within the class API. Some reasons: in the code I write, template parameters are CamelCase but types are snake_case (this makes a <code>Device::graphics_traits</code> type available to client code, not a <code>Device::GraphicsTraits</code>; It allows for abstracting away the type while thinking of your API, and to change it in a single place during implementation (e.g. &quot;I think I should expose a <code>graphics_traits&amp;</code>, not a <code>const graphics_traits&amp;</code> to the client;&quot; which translates to changing a single line of code)."}], "tags": [], "owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "is_accepted": true, "score": 4, "last_activity_date": 1472049484, "last_edit_date": 1472049484, "creation_date": 1472045574, "answer_id": 39124810, "question_id": 39124374, "link": "https://stackoverflow.com/questions/39124374/using-crtp-to-separate-platform-specific-code/39124810#39124810", "title": "Using CRTP to separate platform specific code", "body": "<p>Consider this code:</p>\n\n<pre><code>struct OpenGLTraits // keep this in it's own files (.h and .cpp)\n{\n    bool run_frame() { /* open gl specific stuff here */ }\n};\n\n\nstruct VulkanTraits // keep this in it's own files (.h and .cpp)\n{\n    bool run_frame() { /* vulkan specific stuff here */ }\n};\n\ntemplate&lt;typename T&gt;\nclass DisplayDevice\n{\n    using graphic_traits = T;\n    graphic_traits graphics; // maybe inject this in constructor?\n\n    void do_your_operation()\n    {\n        if(!graphics.run_frame()) // subsystem-specific call\n        { ... }\n    }\n};\n</code></pre>\n\n<p>This will use subsystem-specific calls, and abstract them away between a common API, without a virtual call involved. You can even inline the <code>run_frame()</code> implementations.</p>\n\n<p><strong>Edit</strong> (address comment question):</p>\n\n<p>consider this:</p>\n\n<pre><code>#ifdef FLAG_SPECIFYING_OPEN_GL\nusing Device = DisplayDevice&lt;OpenGLTraits&gt;;\n#elif FLAG_SPECIFYING_VULKAN\nusing Device = DisplayDevice&lt;VulkanTraits&gt;;\n...\n#endif\n</code></pre>\n\n<p>client code:</p>\n\n<pre><code>Device device;\ndevice.do_your_operation();\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 2, "accepted_answer_id": 39124810, "answer_count": 2, "score": 4, "last_activity_date": 1483012571, "creation_date": 1472044444, "last_edit_date": 1483012571, "question_id": 39124374, "link": "https://stackoverflow.com/questions/39124374/using-crtp-to-separate-platform-specific-code", "title": "Using CRTP to separate platform specific code", "body": "<p>I recently got this idea to separate different platform specific implementations (could be Win32/X, opengl/dx/vulkan, etc...) using CRTP (curiously recurring template pattern): I thought of something like this:</p>\n\n<p><strong>IDisplayDevice.h</strong></p>\n\n<pre><code>#pragma once\n#include \"OSConfig.h\"\n\nnamespace cbn\n{\n\n    template &lt;class TDerived&gt; // Win32 type here\n    struct IDisplayDevice\n    {\n        bool run_frame(void) {\n            return\n                static_cast&lt;const TDerived*&gt;(this)-&gt;run_frame();\n        }\n        // a lot of other methods ...       \n    };\n}\n</code></pre>\n\n<p><strong>Win32DisplayDevice.h</strong>:</p>\n\n<pre><code>#pragma once\n#include \"OSConfig.h\"\n // make sure it only gets compiled on win32/64\n#if defined(CBN_OS_WINDOWS)\n\nnamespace cbn\n{\n    class CWin32DisplayDevice \n      : public IDisplayDevice&lt;CWin32DisplayDevice&gt; {\n    public:\n        bool run_frame(void) {  \n            call_hInstance();\n            call_hWnd();\n            #ifdef CBN_RENDERAPI_DX11\n            call_dx11_bufferswap();\n            #endif\n            return some_state; \n        }\n    private:\n    };\n}\n#endif\n</code></pre>\n\n<p>I would then provide an other implementation the same way in <strong>XDisplayDevice.h</strong>.\nFinally, I would make a common interface in <strong>DisplayDevice.h</strong>:</p>\n\n<pre><code>#include \"Win32DisplayDevice.h\"\n#include \"XDisplayDevice.h\"\n\nnamespace cbn\n{\n    class CDisplayDevice\n    {\n    public:\n        CBN_INLINE \n        bool run_frame(void) { return device_-&gt;run_frame(); }\n    private:\n#if defined(CBN_OS_WINDOWS)\n        CWin32DisplayDevice device_;\n#elif defined(CBN_OS_LINUX)\n        CXDisplayDevice device_;\n#elif // and so on\n#else\n        // does nothing ...\n        CNillDisplayDevice device_;\n#endif\n    }\n}\n</code></pre>\n\n<p>So I could call it in <strong>main.cpp</strong> like:</p>\n\n<pre><code>int main()\n{\n    CDisplayDevice my_device;\n    while(my_device-&gt;run_frame())\n    {\n        do_some_magic();\n    }\n}\n</code></pre>\n\n<p>Do you think this would be a good way to deal with platform specific code ?</p>\n\n<p>PS: I avoid victuals and polymorphism because of platform restraints (android, ps4, etc...) where pointer calls matter.</p>\n"}, {"tags": ["c++", "makefile", "compilation", "cryptography", "aes"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472057526, "post_id": 39124316, "comment_id": 65603393, "body": "Attempted to improve the language a bit."}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 1440186, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f0805d983b8c0d1026be6adef819905?s=128&d=identicon&r=PG", "display_name": "antonio", "link": "https://stackoverflow.com/users/1440186/antonio"}, "is_accepted": false, "score": 0, "last_activity_date": 1473206396, "creation_date": 1473206396, "answer_id": 39359452, "question_id": 39124316, "link": "https://stackoverflow.com/questions/39124316/compile-openaes-for-64bit-architecture-for-both-windows-and-mac/39359452#39359452", "title": "compile OpenAES for 64bit architecture for both windows and mac", "body": "<p>I completed the process to create a oaes_lib.lib</p>\n\n<p>Steps:\n1. Download: OpenAES-master.zip,  from  <a href=\"http://code.google.com/p/openaes\" rel=\"nofollow\">http://code.google.com/p/openaes</a> \n2. Install CMake.\n3. Unzip OpenAES-master.zip at C:\\Devs\\OpenAES (at my case)\n4. Create a library folder: C:\\Devs\\OpenAES\\libs\n5. With CMake gui tool opened. Choose: \"Where is the source code:\" \"C:\\Devs\\OpenAES\"   and \"Where to build the binaries\": \"C:\\Devs\\OpenAES\\libs\"\n6. It will ask you for your compiler. \n7. Then look for the oaes.sln file and open it with visual studio\n8. Build the projects, after all, look at C:\\Devs\\OpenAES\\libs\\Debug\\oaes_lib.lib file.</p>\n\n<p>I'm not sure if the .lib file works, I am on it.</p>\n"}, {"tags": [], "owner": {"reputation": 423, "user_id": 1440186, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f0805d983b8c0d1026be6adef819905?s=128&d=identicon&r=PG", "display_name": "antonio", "link": "https://stackoverflow.com/users/1440186/antonio"}, "is_accepted": false, "score": 0, "last_activity_date": 1475863851, "creation_date": 1475863851, "answer_id": 39923460, "question_id": 39124316, "link": "https://stackoverflow.com/questions/39124316/compile-openaes-for-64bit-architecture-for-both-windows-and-mac/39923460#39923460", "title": "compile OpenAES for 64bit architecture for both windows and mac", "body": "<p>I found another library por AES:  QPolarSSL  <a href=\"https://github.com/azadkuh/qpolarssl\" rel=\"nofollow\">https://github.com/azadkuh/qpolarssl</a></p>\n\n<p>which is based on mbedtls. Very easy to implement.</p>\n"}], "owner": {"reputation": 69, "user_id": 6752709, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-WdnBIcGUtGc/AAAAAAAAAAI/AAAAAAAAAK0/INcNHauYFRQ/photo.jpg?sz=128", "display_name": "Manish Gautam", "link": "https://stackoverflow.com/users/6752709/manish-gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475863851, "creation_date": 1472044299, "last_edit_date": 1472323259, "question_id": 39124316, "link": "https://stackoverflow.com/questions/39124316/compile-openaes-for-64bit-architecture-for-both-windows-and-mac", "title": "compile OpenAES for 64bit architecture for both windows and mac", "body": "<p>I want to compile the OpenAES library so that I can use it in my project.\nAccording to the <code>README</code> file, it has descriptions of how to compile for Windows and MacOS but it doesn't have any mention of how to build it for 64-bit architectures.</p>\n\n<p>Is it possible to compile this library for 64-bit archs or does it not have support for such?</p>\n"}, {"tags": ["c++", "constructor", "initialization", "constants"], "comments": [{"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1472044815, "post_id": 39124246, "comment_id": 65594502, "body": "Note that passing <code>mymy</code> to <code>Base</code> is undefined behaviour as it is uninitialized."}], "answers": [{"comments": [{"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "edited": false, "score": 0, "creation_date": 1472044277, "post_id": 39124299, "comment_id": 65594095, "body": "Can you please link me to this, in the standard?"}, {"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "edited": false, "score": 0, "creation_date": 1472044382, "post_id": 39124299, "comment_id": 65594180, "body": "But what about the <code>const</code> ? Shouldn&#39;t the compiler complain?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "edited": false, "score": 0, "creation_date": 1472044512, "post_id": 39124299, "comment_id": 65594280, "body": "@fritzone Unfortunately I have no access to the Standard now. As for the const qualifier then the ctor also initializes constant data members (except static data members)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "edited": false, "score": 0, "creation_date": 1472044984, "post_id": 39124299, "comment_id": 65594615, "body": "@fritzone In the <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/n4594.pdf\" rel=\"nofollow noreferrer\">last draft of the C++17 standard</a> &#167;12.6.2/10: &quot;If a given non-static data member has both a default member initializer and a mem-initializer , the initialization specified by the mem-initializer is performed, and <b>the non-static data member\u2019s default member initializer is ignored</b>.&quot;"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1472044388, "last_edit_date": 1472044388, "creation_date": 1472044240, "answer_id": 39124299, "question_id": 39124246, "link": "https://stackoverflow.com/questions/39124246/in-class-initialization-of-constant-member/39124299#39124299", "title": "In class initialization of constant member", "body": "<p>If you use ctor initializer then in class initialization is ignored.</p>\n\n<p>Take into account that the call of the base constructor with the argument <code>mymy</code></p>\n\n<pre><code>Derived() : Base(mymy), mymy(23) {std::cout &lt;&lt; \"Derived:\" &lt;&lt; mymy &lt;&lt; std::endl;}\n</code></pre>\n\n<p>is incorrect because the data members of the derived class were not yet initialized.</p>\n"}, {"tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 4, "last_activity_date": 1472046206, "last_edit_date": 1472046206, "creation_date": 1472044487, "answer_id": 39124394, "question_id": 39124246, "link": "https://stackoverflow.com/questions/39124246/in-class-initialization-of-constant-member/39124394#39124394", "title": "In class initialization of constant member", "body": "<p>The standard says that (&sect;12.6.2/10<sup>1</sup>, emphasis is mine):</p>\n\n<blockquote>\n  <p>If a given non-static data member has both a default member initializer and a <em>mem-initializer</em>, the initialization\n  specified by the <em>mem-initializer</em> is performed, and <strong>the non-static data member\u2019s default member initializer is ignored</strong>. [ <em>Example:</em> Given</p>\n\n<pre><code>struct A {\n      int i = /* some integer expression with side effects */ ;\n      A(int arg) : i(arg) { }\n      // ...\n};\n</code></pre>\n  \n  <p>the <code>A(int)</code> constructor will simply initialize <code>i</code> to the value of <code>arg</code>, and the side effects in <code>i</code>\u2019s default member initializer will not take place. <em>\u2014end example</em>]</p>\n</blockquote>\n\n<p><a href=\"http://coliru.stacked-crooked.com/\" rel=\"nofollow\">http://coliru.stacked-crooked.com/</a> use g++ which do not produce a warning but the result is the same: <code>Base</code> is not initialized with <code>50</code> or <code>23</code> but with <code>0</code>. You can get weirder behavior by adding another attribute before <code>mymy</code>:</p>\n\n<pre><code>class Derived: public Base {\n  public:\n  Derived() : Base(mymy), mymymy(mymy), mymy(23) {\n      std::cout &lt;&lt; \"Derived:\" &lt;&lt; mymy &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Derived:\" &lt;&lt; mymymy &lt;&lt; std::endl;\n\n  }\n  int mymymy;\n  const int mymy = 50;\n};\n</code></pre>\n\n<p>Output from <a href=\"http://coliru.stacked-crooked.com/a/22a53c09cf16a8cb\" rel=\"nofollow\">coliru</a>:</p>\n\n<pre><code>Base:4197208\nDerived:23\nDerived:4197208\nMain:23\n</code></pre>\n\n<p>But if you add an attribute after <code>mymy</code>:</p>\n\n<pre><code>class Derived : public Base {\n  public:\n  Derived() : Base(mymy), mymy(23) {\n      std::cout &lt;&lt; \"Derived:\" &lt;&lt; mymy &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Derived:\" &lt;&lt; mymymy &lt;&lt; std::endl;\n\n  }\n  const int mymy = 50;\n  int mymymy= mymy;\n\n};\n</code></pre>\n\n<p>The value you provide in the member-initializer-list of the constructor will be used:</p>\n\n<pre><code>Base:0\nDerived:23\nDerived:23\nMain:23\n</code></pre>\n\n<hr>\n\n<p>Regarding the <code>const</code> qualification: You can always initialize <code>const</code> member in the member-list-initializer of your constructor (this is the only place where you can initialize them along with default member initializers). </p>\n\n<p>I don't know if there is a more explicit quote from the standard, but &sect;12.6.2/7<sup>1</sup> (the example is quite explicit though):</p>\n\n<blockquote>\n  <p>The <em>expression-list</em> or <em>braced-init-list</em> in a <em>mem-initializer</em> is used to initialize the designated subobject (or, in the case of a delegating constructor, the complete class object) according to the initialization rules of 8.5 for direct-initialization.\n  [ <em>Example:</em></p>\n\n<pre><code>struct B1 { B1(int); /* ... */ };\nstruct B2 { B2(int); /* ... */ };\nstruct D : B1, B2 {\n    D(int);\n    B1 b;\n    const int c;\n};\nD::D(int a) : B2(a+1), B1(a+2), c(a+3), b(a+4)\n    { /* ... */ }\nD d(10);\n</code></pre>\n  \n  <p><em>\u2014end example</em> ]</p>\n</blockquote>\n\n<hr>\n\n<p><sub><sup>1</sup> Latest C++17 standard draft (N4594).</sub></p>\n"}], "owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 39124394, "answer_count": 2, "score": 0, "last_activity_date": 1472046206, "creation_date": 1472044118, "last_edit_date": 1472044704, "question_id": 39124246, "link": "https://stackoverflow.com/questions/39124246/in-class-initialization-of-constant-member", "title": "In class initialization of constant member", "body": "<p>Why does the compiler (clang) complain that the <code>mymy</code> is uninitialized, when I specifically have told it to be a constant value, holding 50. And why does it allow me to change it to be 23 ... when I still have told him to be constant?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Base\n{\npublic:\n\n    Base(int y) : my(y) {std::cout &lt;&lt; \"Base:\" &lt;&lt; my &lt;&lt; std::endl;}\nprivate:\n    int my;\n};\n\nclass Derived : public Base\n{\npublic:\n    Derived() : Base(mymy), mymy(23) {std::cout &lt;&lt; \"Derived:\" &lt;&lt; mymy &lt;&lt; std::endl;}\n\n\nprivate:\n\n    const int mymy = 50;\n};\n\nint main()\n{\n    Derived a;\n}\n</code></pre>\n\n<p>Strangely, coliru compiles without a hick. <a href=\"http://coliru.stacked-crooked.com/a/63629c2d99bf6f43\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/63629c2d99bf6f43</a> (Yes, I know changing it to <code>static</code> will fix this problem)</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "vector", "unique-ptr"], "comments": [{"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 4, "creation_date": 1472044860, "post_id": 39124238, "comment_id": 65594531, "body": "&quot;I want to have a <code>std::vector</code> that can contain either <code>C</code> or <code>D</code> objects so I make it as <code>std::vector&lt;C&gt;</code>&quot; This might appear to work at first glance, but I don&#39;t think it will work in the way you expect."}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 1696619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a78bad0d453940f56e021a79aa3e1d?s=128&d=identicon&r=PG", "display_name": "Dimitris Dakopoulos", "link": "https://stackoverflow.com/users/1696619/dimitris-dakopoulos"}, "edited": false, "score": 0, "creation_date": 1472045016, "post_id": 39124514, "comment_id": 65594636, "body": "Thanks @dkg. Do I need to declare it to all classes? It seems to be working only if I do it for <code>C</code> and <code>D</code>. But why this is not a problem when I don&#39;t use <code>unique_ptr</code>?"}, {"owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "reply_to_user": {"reputation": 563, "user_id": 1696619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a78bad0d453940f56e021a79aa3e1d?s=128&d=identicon&r=PG", "display_name": "Dimitris Dakopoulos", "link": "https://stackoverflow.com/users/1696619/dimitris-dakopoulos"}, "edited": false, "score": 0, "creation_date": 1472045371, "post_id": 39124514, "comment_id": 65594921, "body": "It is fine because you are doing a copy when you call the <code>push_back</code> method hence your vector will result in only C classes and your s1 of type D will destructed at the end of your little stack."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1472045628, "post_id": 39124514, "comment_id": 65595109, "body": "If you make <code>~C()</code> virtual, then <code>~D()</code> will also be virtual (but I find it helps to say so explicitly).  Then destructing through a pointer to <code>C</code> will call the virtual destructor.  If you delete a pointer to <code>A</code>, then <code>A</code>&#39;s (non-virtual) destructor will be called.  Does that help?"}, {"owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "reply_to_user": {"reputation": 563, "user_id": 1696619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a78bad0d453940f56e021a79aa3e1d?s=128&d=identicon&r=PG", "display_name": "Dimitris Dakopoulos", "link": "https://stackoverflow.com/users/1696619/dimitris-dakopoulos"}, "edited": false, "score": 0, "creation_date": 1472045715, "post_id": 39124514, "comment_id": 65595176, "body": "@DimitrisDakopoulos see my update for your second part. You think it is fine, but you can add a method printing the name of the class and call it on your vector to see the behaviour of the object slicing, all will print what is defind in your C class, information in D class will be lost."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 563, "user_id": 1696619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a78bad0d453940f56e021a79aa3e1d?s=128&d=identicon&r=PG", "display_name": "Dimitris Dakopoulos", "link": "https://stackoverflow.com/users/1696619/dimitris-dakopoulos"}, "edited": false, "score": 0, "creation_date": 1472045734, "post_id": 39124514, "comment_id": 65595191, "body": "@DimitrisDakopoulos: you can only mark <code>~A()</code> as <code>virtual</code>, all inherited class would thus also have <code>virtual</code> destructor."}, {"owner": {"reputation": 563, "user_id": 1696619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a78bad0d453940f56e021a79aa3e1d?s=128&d=identicon&r=PG", "display_name": "Dimitris Dakopoulos", "link": "https://stackoverflow.com/users/1696619/dimitris-dakopoulos"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1472046657, "post_id": 39124514, "comment_id": 65595931, "body": "Summing up: use virtual destructors everywhere (@dkg). It is probably not the best practice (@TobySpeight) but it would work by just declaring the parent class dtor virtual (@Jarod42)"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1472048238, "post_id": 39124514, "comment_id": 65597200, "body": "Standard advice is &quot;declare a virtual destructor in any class intended to be used as a polymorphic base class&quot;.  A good rule of thumb (implemented by <code>gcc -Weffc++</code>) is that any class with virtual methods should have a virtual destructor."}], "tags": [], "owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "is_accepted": true, "score": 14, "last_activity_date": 1472048116, "last_edit_date": 1592644375, "creation_date": 1472044788, "answer_id": 39124514, "question_id": 39124238, "link": "https://stackoverflow.com/questions/39124238/multiple-inheritance-and-unique-ptr-destruction/39124514#39124514", "title": "Multiple inheritance and unique_ptr destruction", "body": "<p>You should declare your destructors as virtual. Otherwise, if your class <code>D</code> is deleted using a pointer to <code>C</code>, then the <code>~C()</code> destructor will be called and essential parts of the cleanup will be missed.</p>\n<p>Also note that in your second part (not using the <code>unique_ptr</code>) you do some object slicing. It means you are creating a copy of <code>s1</code> of type <code>D</code> into a new object of class <code>C</code>, hence you can lose the extra information specific to <code>D</code>.</p>\n<p>Here is the corrected code :</p>\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nclass A\n{\npublic:\n    A() = default;\n    virtual ~A() {};\n};\n\nclass B : public virtual A\n{\npublic:\n    B() = default;\n    virtual ~B() {};\n};\n\nclass C : public virtual A\n{\npublic:\n    C() = default;\n    virtual ~C() {};\n};\n\nclass D : public B, public C\n{\npublic:\n    D() = default;\n    virtual ~D() {};\n};\n\n\nint main()\n{\n    { // this does not crashe anymore\n        std::vector&lt;std::unique_ptr&lt;C&gt;&gt; v;\n        std::unique_ptr&lt;D&gt; s1(new D());\n        v.push_back(std::move(s1));\n        std::unique_ptr&lt;C&gt; s2(new C());\n        v.push_back(std::move(s2));\n    }\n\n    { // this is fine because you slice D into C, still that fine ?\n        std::vector&lt;C&gt; v;\n        D s1;\n        v.push_back(s1);\n        C s2;\n        v.push_back(s2);\n    }\n\n    return 0;\n}\n</code></pre>\n<hr />\n<h2>See also</h2>\n<ul>\n<li><a href=\"/q/461203\">When to use virtual destructors?</a></li>\n<li><a href=\"/q/274626\">What is object slicing?</a></li>\n</ul>\n<hr />\n<h2>Note</h2>\n<p>As stated in the comments, if you mark A destructor's as virtual, every derived class will also have a virtual destructor.\nWriting it everywhere can make it more explicit. It is a matter of style.</p>\n"}, {"tags": [], "owner": {"reputation": 2017, "user_id": 4999494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e49247723efb14f33ad19a5ecdf1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Balabin", "link": "https://stackoverflow.com/users/4999494/alexander-balabin"}, "is_accepted": false, "score": 5, "last_activity_date": 1472045072, "creation_date": 1472045072, "answer_id": 39124619, "question_id": 39124238, "link": "https://stackoverflow.com/questions/39124238/multiple-inheritance-and-unique-ptr-destruction/39124619#39124619", "title": "Multiple inheritance and unique_ptr destruction", "body": "<p>Your \"this is fine\" example does slicing, the vector only contains instances of <code>C</code>, that's why it 'works' but does not do what you expected. The solution is as dkg points out is to use virtual dtors.</p>\n"}], "owner": {"reputation": 563, "user_id": 1696619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a78bad0d453940f56e021a79aa3e1d?s=128&d=identicon&r=PG", "display_name": "Dimitris Dakopoulos", "link": "https://stackoverflow.com/users/1696619/dimitris-dakopoulos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 1, "accepted_answer_id": 39124514, "answer_count": 2, "score": 6, "last_activity_date": 1472048116, "creation_date": 1472044096, "last_edit_date": 1472044433, "question_id": 39124238, "link": "https://stackoverflow.com/questions/39124238/multiple-inheritance-and-unique-ptr-destruction", "title": "Multiple inheritance and unique_ptr destruction", "body": "<p>I have the classic (possible problematic) multiple inheritance diamond scheme.</p>\n\n<ul>\n<li>B inherits A</li>\n<li>C inherits A</li>\n<li>D inherits C and B</li>\n</ul>\n\n<p>I want to have a <code>std::vector</code> that can contain either <code>C</code> or <code>D</code>\nobjects so I make it as <code>std::vector&lt;C&gt;</code> which is <code>D</code>'s dad and it\nworks fine.</p>\n\n<p><strong>BUT</strong> when I use: <code>std::vector&lt;std::unique_ptr&lt;C&gt;&gt;</code> then I have segmentation fault upon the destruction of the vector.</p>\n\n<pre><code>** glibc detected *** ./a.out: free(): invalid pointer: 0x0000000009948018***\n</code></pre>\n\n<p>Why is there a difference? To me, even the first implementation is problematic.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nclass A\n{\npublic:\n    A() = default;\n};\n\nclass B : public virtual A\n{\npublic:\n    B() = default;\n};\n\nclass C : public virtual A\n{\npublic:\n    C() = default;\n};\n\nclass D : public B, public C\n{\npublic:\n    D() = default;\n};\n\n\nint main()\n{\n    { // this crashes\n    std::vector&lt;std::unique_ptr&lt;C&gt;&gt; v;\n    std::unique_ptr&lt;D&gt; s1(new D());\n    v.push_back(std::move(s1));\n    std::unique_ptr&lt;C&gt; s2(new C());\n    v.push_back(std::move(s2));\n    }\n\n    { // this is fine\n    std::vector&lt;C&gt; v;\n    D s1;\n    v.push_back(s1);\n    C s2;\n    v.push_back(s2);\n    }\n\n    return 0;\n};\n</code></pre>\n"}, {"tags": ["c++", "omnet++", "event-simulation"], "answers": [{"tags": [], "owner": {"reputation": 5342, "user_id": 4653172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c894c1021e3092a98cdd62d88e69819?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy D.", "link": "https://stackoverflow.com/users/4653172/jerzy-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1472734399, "creation_date": 1472734399, "answer_id": 39272101, "question_id": 39124099, "link": "https://stackoverflow.com/questions/39124099/adding-hosts-periodically-in-omnet/39272101#39272101", "title": "Adding hosts periodically in OMNeT++", "body": "<p>No, it is not possible to count received number of <code>IPv6NeighbourDiscovery</code> messages without modifying C++ files. </p>\n"}], "owner": {"reputation": 43, "user_id": 6696675, "user_type": "registered", "profile_image": "https://graph.facebook.com/1123879444317297/picture?type=large", "display_name": "Drago\u015f Neagoe", "link": "https://stackoverflow.com/users/6696675/drago%c5%9f-neagoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1472734399, "creation_date": 1472043721, "question_id": 39124099, "link": "https://stackoverflow.com/questions/39124099/adding-hosts-periodically-in-omnet", "title": "Adding hosts periodically in OMNeT++", "body": "<p>I have a network setup of 100 hosts, which have to enter the network one by one, until all have joined for a 24 hours simulation time (one option is to have one joining every 864 seconds). </p>\n\n<p>I am interested in counting the multicast messages exchanged between the machines, through the Neighbour Discovery Protocol. Is it possible to do this, without changing anything in the source file of the IPv6NeighbourDiscovery.cc?</p>\n\n<p>This is my NED File:</p>\n\n<pre><code>package inet.examples.wireless.wiredandwirelesshostswithap;\n\nimport inet.networklayer.configurator.ipv6.FlatNetworkConfigurator6;\nimport inet.networklayer.icmpv6.IPv6NeighbourDiscovery;\nimport inet.node.ethernet.Eth100M;\nimport inet.node.ipv6.Router6;\nimport inet.node.xmipv6.WirelessHost6;\nimport inet.node.wireless.AccessPoint;\nimport inet.physicallayer.ieee80211.packetlevel.Ieee80211ScalarRadioMedium;\n\n\nnetwork WiredAndWirelessHostsWithAP\n{\n    parameters:\n        int n;\n        @display(\"bgb=503,434\");\n    submodules:\n        wirelessHost[n]: WirelessHost6 {\n            @display(\"p=58,88\");\n        }\n        router6: Router6 {\n            @display(\"p=412,88\");\n        }\n        accessPoint: AccessPoint {\n            @display(\"p=323,87\");\n        }\n        configurator: FlatNetworkConfigurator6 {\n            @display(\"p=323,165\");\n        }\n        radioMedium: Ieee80211ScalarRadioMedium {\n            @display(\"p=98,392\");\n        }\n    connections:\n        accessPoint.ethg++ &lt;--&gt; Eth100M &lt;--&gt; router6.ethg++;\n\n}\n</code></pre>\n\n<p>And the ini file:</p>\n\n<pre><code>[General]\nnetwork = WiredAndWirelessHostsWithAP\nsim-time-limit = 24h\ntkenv-plugin-path = ../../../etc/plugins\n\n# number of client computers\n*.n = 100\n\n**.*Host*.numUdpApps = 3\n\n**.*Host*.udpApp[0].typename = \"UDPEchoApp\"\n**.*Host*.udpApp[0].localPort = 1000\n\n**.*Host*.udpApp[*].typename = \"UDPBasicApp\"\n**.*Host*.udpApp[1..].destPort = 1000\n**.*Host*.udpApp[1..].messageLength = 100B\n**.*Host*.udpApp[1..].sendInterval = 1s\n**.*Host*.udpApp[1..].stopTime = 300s\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c++", "qt", "dynamic-memory-allocation"], "answers": [{"comments": [{"owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "edited": false, "score": 0, "creation_date": 1472044424, "post_id": 39124279, "comment_id": 65594211, "body": "Thanks, I will accept your answer soon. I have actually followed what you said about manually deleting them even before you wrote the answer. So, on that we agree. :)"}, {"owner": {"reputation": 1277, "user_id": 6367468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvquX.png?s=128&g=1", "display_name": "Kirill Chernikov", "link": "https://stackoverflow.com/users/6367468/kirill-chernikov"}, "edited": false, "score": 1, "creation_date": 1472044671, "post_id": 39124279, "comment_id": 65594407, "body": "But there is no memory leak in presented code. AppointmentSchedule objects has parent, that&#39;s why this objects will be deleted when parent object will be destroyed."}, {"owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "reply_to_user": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "edited": false, "score": 1, "creation_date": 1472044792, "post_id": 39124279, "comment_id": 65594487, "body": "@the_naive Also pay attention at Kirill&#39;s answer. You set non-nullptr parents for your objects, so parent&#39;s destructor will delete them and you will not need to delete them manually. It&#39;s a feature of Qt&#39;s object hierarchy and is a common way to delete nested widgets."}, {"owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "reply_to_user": {"reputation": 1277, "user_id": 6367468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvquX.png?s=128&g=1", "display_name": "Kirill Chernikov", "link": "https://stackoverflow.com/users/6367468/kirill-chernikov"}, "edited": false, "score": 0, "creation_date": 1472044988, "post_id": 39124279, "comment_id": 65594617, "body": "@KirillChernikov Okay, I will not delete them manually. Thanks for both of your answers."}], "tags": [], "owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1472044981, "last_edit_date": 1472044981, "creation_date": 1472044185, "answer_id": 39124279, "question_id": 39124051, "link": "https://stackoverflow.com/questions/39124051/does-qlist-clear-function-call-clears-the-memories-of-dynamically-allocated-obje/39124279#39124279", "title": "Does QList clear function call clears the memories of dynamically allocated objects that are stored in the QList?", "body": "<blockquote>\n  <p>Will it deallocate all the memory I have allocated?</p>\n</blockquote>\n\n<p>No. You declared a list of <em>pointers</em> to <code>AppointmentSchedule</code> objects. When you call <code>clear</code>, those pointers will be deleted, but the memory they pointed to will remain untouched, so you'll get memory leak.</p>\n\n<p>To deallocate the objects themselves, use either smart pointers (like <code>std::unique_ptr</code> and <code>std::shared_ptr</code>) or delete them manually in any kind of <code>foreach</code> loop before calling <code>clear()</code>.</p>\n\n<p>Edit:</p>\n\n<p>In this case there will be no memory leak as Qt object hierarchy will take care of proper object destruction. See @Kirill's answer.</p>\n"}, {"tags": [], "owner": {"reputation": 1277, "user_id": 6367468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvquX.png?s=128&g=1", "display_name": "Kirill Chernikov", "link": "https://stackoverflow.com/users/6367468/kirill-chernikov"}, "is_accepted": true, "score": 2, "last_activity_date": 1472045151, "last_edit_date": 1472045151, "creation_date": 1472044193, "answer_id": 39124285, "question_id": 39124051, "link": "https://stackoverflow.com/questions/39124051/does-qlist-clear-function-call-clears-the-memories-of-dynamically-allocated-obje/39124285#39124285", "title": "Does QList clear function call clears the memories of dynamically allocated objects that are stored in the QList?", "body": "<blockquote>\n  <p>Will it deallocate all the memory I have allocated?</p>\n</blockquote>\n\n<p>No, <code>clear()</code> only remove all items from the list. In your case this items are pointers on <code>AppointmentSchedule</code> objects.</p>\n\n<p>As you set parent for <code>AppointmentSchedule</code> objects, this objects wiil be deleted when their parent will be destroyed. That's why there is no memory leak in your case.</p>\n"}, {"comments": [{"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1472114262, "post_id": 39140103, "comment_id": 65625297, "body": "<a href=\"http://doc.qt.io/qt-5/qtalgorithms.html#qDeleteAll-1\" rel=\"nofollow noreferrer\"><code>qDeleteAll</code></a> is a convenience method for deleting all objects in a container"}, {"owner": {"reputation": 11, "user_id": 2208021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e591dfeefa232da977e9ed0eb8470a9?s=128&d=identicon&r=PG", "display_name": "Veenkar", "link": "https://stackoverflow.com/users/2208021/veenkar"}, "reply_to_user": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1472115107, "post_id": 39140103, "comment_id": 65625848, "body": "@king_nak +1 for that idiom"}], "tags": [], "owner": {"reputation": 11, "user_id": 2208021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e591dfeefa232da977e9ed0eb8470a9?s=128&d=identicon&r=PG", "display_name": "Veenkar", "link": "https://stackoverflow.com/users/2208021/veenkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1472114016, "last_edit_date": 1472114016, "creation_date": 1472113196, "answer_id": 39140103, "question_id": 39124051, "link": "https://stackoverflow.com/questions/39124051/does-qlist-clear-function-call-clears-the-memories-of-dynamically-allocated-obje/39140103#39140103", "title": "Does QList clear function call clears the memories of dynamically allocated objects that are stored in the QList?", "body": "<p><strong>Since you use pointers:</strong>\nTo avoid memory leaks, you need to delete every pointer for example with:</p>\n\n<pre><code>foreach(auto element, scheduleList)\n{\n    delete element;\n}\n</code></pre>\n\n<p>Also if you use parent property in your AppointmentSchedule elements, they are automatically deleted upon parent deletion.</p>\n\n<p><strong>Concerning the list itself:</strong>\nIf you'd like to store large objects (not pointers) in the list, calling <code>.clear()</code> only removes accessible items, but it doesn't necessarily resize the container. If it did that every time you call it, it would be inefficient.</p>\n\n<p>However you can call <code>.squeeze()</code> to free the unused memory.\nIt still does only remove the space allocated for pointers, not objects on the heap you allocated with <code>new</code> operator.</p>\n"}], "owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 39124285, "answer_count": 3, "score": 3, "last_activity_date": 1472114016, "creation_date": 1472043622, "question_id": 39124051, "link": "https://stackoverflow.com/questions/39124051/does-qlist-clear-function-call-clears-the-memories-of-dynamically-allocated-obje", "title": "Does QList clear function call clears the memories of dynamically allocated objects that are stored in the QList?", "body": "<p>So I have class called <code>AppointmentSchedule</code> which is of the following type:</p>\n\n<pre><code>namespace Ui {\nclass AppointmentSchedule;\n}\n\nclass AppointmentSchedule : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    explicit AppointmentSchedule(QWidget *parent = 0);\n    ~AppointmentSchedule();\n    Ui::AppointmentSchedule *ui;\n};\n</code></pre>\n\n<p>The <code>ui</code> of this class consists of two objects of type <code>QLabel</code> and two objects of type <code>QDateTimeEdit</code>. In an external class, I need to have a <code>QList</code> of dynamically allocated objects of type <code>AppointmentSchedule</code>. I will append the dynamically allocated objects in the <code>QList</code> similar to the following way.</p>\n\n<pre><code>QList&lt;AppointmentSchedule*&gt; scheduleList;\n\nforeach (QDate date, dates)\n{\n     AppointmentSchedule * newSchedule = new AppointmentSchedule(this);//Allocation of memory\n     QDateTime sDateTime(date, QTime(8, 0, 0));\n     newSchedule-&gt;ui-&gt;appointmentStartDateTimeEdit-&gt;setDateTime(sDateTime);\n     QDateTime eDateTime(date, QTime(8, 15, 0));\n     newSchedule-&gt;ui-&gt;appointmentEndDateTimeEdit-&gt;setDateTime(eDateTime);\n     scheduleList.append(newSchedule);\n}\n</code></pre>\n\n<p>If I call the <code>clear()</code> function of the <code>QList</code> like this:</p>\n\n<pre><code>scheduleList.clear();\n</code></pre>\n\n<p>Will it deallocate all the memory I have allocated?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "arrays", "polymorphism", "multiple-inheritance"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 2, "creation_date": 1472042898, "post_id": 39123772, "comment_id": 65593002, "body": "Is not that the <a href=\"http://www.cprogramming.com/tutorial/virtual_inheritance.html\" rel=\"nofollow noreferrer\">Diamond-Problem</a>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 5, "creation_date": 1472043061, "post_id": 39123772, "comment_id": 65593123, "body": "@FirstStep Resolved by <code>virtual</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1472043079, "post_id": 39123772, "comment_id": 65593147, "body": "In the array example the type of <code>d</code> is <code>D*[10]</code>. This will decay to a <code>D**</code>. Unfortunately this is <i>not</i> the same as <code>A**</code>. Instead you have to create another array, <code>A* a[10]</code> and copy the pointer from <code>d</code> into <code>a</code> (which will be much easier if you used <code>std::vector</code> instead). Now you can use <code>a</code> the way you expect."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 1, "creation_date": 1472043090, "post_id": 39123772, "comment_id": 65593157, "body": "<code>A *a = (A*) d;</code> is trivial (no need of cast) &amp; <code>A **a = (A**) d;</code> is dangerous!"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472043244, "post_id": 39123772, "comment_id": 65593282, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I still don&#39;t see the solution to his problem though. He is using <code>virtual</code> everywhere"}, {"owner": {"reputation": 508, "user_id": 632078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/79efd713dd9bbcdc82e2b11521bdfbe1?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/632078/matthias"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472043422, "post_id": 39123772, "comment_id": 65593420, "body": "@JoachimPileborg: could you please expand on that? <code>C **c = (C**) d; D *d_down = dynamic_cast&lt;D*&gt;(c[0]); assert(d_down != NULL);</code> (i.e. upcasting to <code>C</code> instead of <code>A</code> before downcasting to <code>D</code> again) works just fine, i.e. without the intermediate step of needing to create another array."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472043556, "post_id": 39123772, "comment_id": 65593517, "body": "@JoachimPileborg, ahhhhh, it took me quite long to realize what you are hinting at, but I am finally at home! Thanks for the hint!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1472043621, "post_id": 39123772, "comment_id": 65593578, "body": "@Matthias If you simply did not do the <code>(A**)</code> C-style cast, what compiler error did you get?  Didn&#39;t that give a clue as to what may / did happen at runtime?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472043772, "post_id": 39123772, "comment_id": 65593696, "body": "It&#39;s the extra level of indirection (i.e. that pointer to pointer thing) that is the problem. <code>D**</code> is a pointer to a <i>pointer to <code>D</code></i>, while <code>A**</code> is a pointer to a <i>pointer to <code>A</code></i>. There&#39;s no way to convert between those two types."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472043808, "post_id": 39123772, "comment_id": 65593720, "body": "@FirstStep I only meant that <code>virtual</code> does solve the <i>diamond problem</i>. So that&#39;s not the cuplrit."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472043872, "post_id": 39123772, "comment_id": 65593758, "body": "@JoachimPileborg object slicing in disguise?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1472044141, "post_id": 39123772, "comment_id": 65593982, "body": "That&#39;s a very dangerous cast. Consider <code>a[0] = new C;</code>. Now your array of <code>D*</code> contains something that&#39;s not a <code>D*</code>."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1472044357, "post_id": 39123772, "comment_id": 65594154, "body": "@molbdnilo, yes, it is. That is a good reason why pointers to compatible types are not considered compatible (applies not just to arrays, but also functions and other things)."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1472105731, "post_id": 39123772, "comment_id": 65620216, "body": "I&#39;ve updated the diagram in the answer to match what g++ actually generates in this case. The virtual base is at <i>negative</i> offset. Which is fully expected, as the virtual base can&#39;t be made part of the layout of either B1 and B2. The principle applies either way \u2013 the pointers are not numerically equal."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472107503, "post_id": 39123772, "comment_id": 65620993, "body": "Don&#39;t use C-style casts. If you get an error with C++-style casts, then that&#39;s telling you that the operation is not right, and suppressing the error message won&#39;t fix it."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472107636, "post_id": 39124207, "comment_id": 65621066, "body": "This is a great answer. However, since you bolded the thing about C-style casts: there is actually one valid use case for them, <a href=\"http://stackoverflow.com/questions/17925124/can-i-cast-a-derived-class-to-a-private-base-class-using-c-style-cast\">see here</a>"}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472108197, "post_id": 39124207, "comment_id": 65621408, "body": "@M.M, I am not sure the case should be called <i>valid</i>. It is something that is permitted with C-style casts, but not the other kinds, but it is still breaking the rules, though only rules given by library author, not language standard."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472108362, "post_id": 39124207, "comment_id": 65621505, "body": "what library author?"}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472109262, "post_id": 39124207, "comment_id": 65622107, "body": "@M.M, any whose private you are busting."}], "tags": [], "owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "is_accepted": true, "score": 13, "last_activity_date": 1472106583, "last_edit_date": 1472106583, "creation_date": 1472044015, "answer_id": 39124207, "question_id": 39123772, "link": "https://stackoverflow.com/questions/39123772/convert-array-of-pointers-of-derived-class-to-array-of-base-class-pointers/39124207#39124207", "title": "Convert array of pointers of derived class to array of base class pointers", "body": "<p>The problem is, that <code>(A*)d</code> is <strong>not numerically equal</strong> to <code>d</code>!</p>\n\n<p>See, you have an object like</p>\n\n<pre><code>+---------------------+\n| A: vtable ptr A     | &lt;----- (A*)d points here!\n|    double a         |\n+---------------------+\n+---------------------+\n| D:                  | &lt;----- d points here (and so do (C*)d and (B1*)d)!\n|+-------------------+|\n|| C:                ||\n||+-----------------+||\n||| B1: vptr B1,C,D |||\n|||     double b1   |||\n||+-----------------+||\n||+-----------------+|| &lt;----- (B2*)d points here!\n||| B2: vptr B2     |||\n|||     double b2   |||\n||+-----------------+||\n||    double c       ||\n|+-------------------+|\n|    double d         |\n+---------------------+\n</code></pre>\n\n<p>When you cast a <code>D*</code> to <code>A*</code>, via <code>static_cast</code> or <code>dynamic_cast</code>, the compiler will inject the necessary arithmetic for you.</p>\n\n<p>But when you cast it via <code>reinterpret_cast</code>, or cast a <code>D**</code> to <code>A**</code>, which is the same thing, the pointer will keep its numeric value, because the cast does not give the compiler the right to dereference the first layer to adjust the second layer.</p>\n\n<p>But then the pointer will still point at D's vtable, not A's vtable, and therefore won't be recognized as A.</p>\n\n<hr>\n\n<p>Update: I checked the layout in compiler (g++) and the picture should now reflect the actual layout generated in the case in question. It shows that virtual bases live at <em>negative</em> offsets. This is because a virtual base is at different offset depending on the actual type, so it can't be part of the object itself.</p>\n\n<p>The address of object does coincide with address of the first non-virtual base. However, the specification does not guarantee it for objects with virtual methods or bases, so don't rely on it either.</p>\n\n<hr>\n\n<p>This shows the <strong>importance of using appropriate casts</strong>. Conversions that can be done implicitly, via <code>static_cast</code>, <code>dynamic_cast</code> or function-style cast are reliable and compiler will inject appropriate adjustments.</p>\n\n<p>However using <code>reinterpret_cast</code> clearly indicates the compiler will <em>not</em> adjust and you are on your own.</p>\n\n<pre><code>A *a = static_cast&lt;A *&gt;(d);\n</code></pre>\n\n<p>is ok, but</p>\n\n<pre><code>A **aa = static_cast&lt;A **&gt;(&amp;d);\n</code></pre>\n\n<p>is a compilation error.</p>\n\n<p>The problem with C-style cast is that it does a <code>static_cast</code> <em>when possible</em> and <code>reinterpret_cast</code> otherwise, so you can cross the border to the undefined behavior land without noticing. That's why you <strong>shouldn't use C-style cast in C++. Ever.</strong></p>\n\n<p>Note that due to aliasing rules, writing <code>reinterpret_cast</code> essentially always implies Undefined Behavior. And at least GCC <strong>does</strong> optimize based on aliasing rules. The only exception is cv-(<code>signed</code>/<code>unsigned</code>) <code>char *</code>, which is exempt from strict aliasing. But it only ever makes sense to cast to and from pointers to <a href=\"http://en.cppreference.com/w/cpp/concept/StandardLayoutType\" rel=\"nofollow\">standard layout types</a>, because you can't rely on layout of objects with bases (any, not just virtual) and/or virtual members.</p>\n"}], "owner": {"reputation": 508, "user_id": 632078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/79efd713dd9bbcdc82e2b11521bdfbe1?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/632078/matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 39124207, "answer_count": 1, "score": 4, "last_activity_date": 1472106583, "creation_date": 1472042829, "last_edit_date": 1472044037, "question_id": 39123772, "link": "https://stackoverflow.com/questions/39123772/convert-array-of-pointers-of-derived-class-to-array-of-base-class-pointers", "title": "Convert array of pointers of derived class to array of base class pointers", "body": "<p>Consider an inheritance hierarchy like this:\n<code>\n     A\n   /  \\\n  B1   B2\n   \\   /\n     C\n     |\n     D\n</code>\nRealized in C++ like so:</p>\n\n<pre><code>class A {\npublic:\n    A() {};\n    virtual ~A() = 0;\n    double a;\n};\n\nA::~A() {};\n\nclass B1 : virtual public A {\npublic:\n    B1() {}\n    virtual ~B1() {}\n    double b1;\n};\n\nclass B2 : virtual public A {\npublic:\n    B2() {}\n    virtual ~B2() {}\n    double b2;\n};\n\nclass C : public B1, public B2 {\npublic:\n    C() {}\n    virtual ~C() {}\n    double c;\n};\n\nclass D : public C {\npublic:\n    D() {}\n    virtual ~D() {}\n    double d;\n};\n</code></pre>\n\n<p>Now, obviously I can do something like this:</p>\n\n<pre><code>D *d = new D();\nA *a = (A*) d;\nD *d_down = dynamic_cast&lt;D*&gt;(a);\nassert(d_down != NULL); //holds\n</code></pre>\n\n<p>However, I can't seem to figure out how to get same behavior using arrays. Please consider the following code sample to see what I mean by that:</p>\n\n<pre><code>D *d[10];\nfor (unsigned int i = 0; i &lt; 10; i++) {\n    d[i] = new D();\n}\n\nA **a = (A**) d;\nD *d_down = dynamic_cast&lt;D*&gt;(a[0]);\nassert(d_down != NULL); //fails!\n</code></pre>\n\n<p>So my questions would be:</p>\n\n<ul>\n<li>Why does to above assertion fail?</li>\n<li>How can I achieve the desired behavior?</li>\n<li>I noticed, by chance, that the dynamic_cast above works if I remove the double fields from classes A through D. Why is that?</li>\n</ul>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1472056336, "post_id": 39123718, "comment_id": 65602744, "body": "Sounds like you can&#39;t open a file -- not sure what XML has to do with any of this?"}, {"owner": {"reputation": 35314, "user_id": 344347, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1d83837bce9d9a2656c4f5704d40c430?s=128&d=identicon&r=PG", "display_name": "Pavel Strakhov", "link": "https://stackoverflow.com/users/344347/pavel-strakhov"}, "edited": false, "score": 1, "creation_date": 1472091373, "post_id": 39123718, "comment_id": 65616400, "body": "Check return value of <code>file.open()</code> and value of <code>file.errorString()</code>."}], "owner": {"reputation": 183, "user_id": 5086669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d822c001f0ebf6bc19c84a99f850d9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mastarius", "link": "https://stackoverflow.com/users/5086669/mastarius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472042675, "creation_date": 1472042675, "question_id": 39123718, "link": "https://stackoverflow.com/questions/39123718/qiodeviceread-error-while-opening-xml", "title": "QIODevice::read error while opening XML", "body": "<p>I'm having problems using a basic dialog to open an XML file for parsing.\nMy compile output is always giving me the error <strong>QIODevice::read: device not open</strong> even if the path and the file actually exists and i'm selecting it through the dialog window.</p>\n\n<pre><code>void eltechdb::carica() \n{\n\n    QXmlStreamReader filecarica;\n    QString nomefile = QFileDialog::getOpenFileName(this,tr(\"Carica database\"), \".\",tr(\"File XML (*.xml)\"));\n\n    QFile file(nomefile);\n    file.open(QFile::ReadOnly);\n\n    filecarica.setDevice(&amp;file);\n    filecarica.readNext();\n\n    while(!filecarica.atEnd())\n    {\n        ....\n    }\n\n    file.close();\n\n}\n</code></pre>\n\n<p>What could be the problem? I'm getting no errors from the compilers but it seems like it cannot read the file. </p>\n\n<p>I already tried it to place it on the root folder without any results. In addition, you should know that the files are generated (correctly) through the QXmlStreamWrite library using the same kind of dialog successfully.</p>\n\n<p>Thanks, any help would be appreciated</p>\n"}, {"tags": ["c++", "boost-asio"], "comments": [{"owner": {"reputation": 904, "user_id": 6717168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b475396cbf62745254210e11d7b3846?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/6717168/user"}, "edited": false, "score": 0, "creation_date": 1472042507, "post_id": 39123589, "comment_id": 65592708, "body": "You can write to your socket with the client, server seems left alone, did you tell your router to redirect traffic of port xxx to your server ?"}, {"owner": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "reply_to_user": {"reputation": 904, "user_id": 6717168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b475396cbf62745254210e11d7b3846?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/6717168/user"}, "edited": false, "score": 0, "creation_date": 1472042720, "post_id": 39123589, "comment_id": 65592869, "body": "It is a sporadic error which normally does not occur. Also, there are many tests running starting the server and doing some communication and sometimes some of them fail because of this error. It looks to me like the server could not be started for some reason - but then I wonder, why establishing the connection does not fail already, but only the read."}, {"owner": {"reputation": 904, "user_id": 6717168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b475396cbf62745254210e11d7b3846?s=128&d=identicon&r=PG", "display_name": "user", "link": "https://stackoverflow.com/users/6717168/user"}, "edited": false, "score": 0, "creation_date": 1472043753, "post_id": 39123589, "comment_id": 65593678, "body": "Wireshark might be usefull in your case. An error on read can happen for various reasons such as a RST packet which IMO is what happens in your case : &quot;An existing connection was forcibly closed by the remote host&quot;."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1472056513, "post_id": 39123589, "comment_id": 65602853, "body": "Why don&#39;t you just trace the value of the <code>error_code</code>? If you want platform independence, translate to the corresponding <code>error_condition</code> and detect on that instead."}], "answers": [{"comments": [{"owner": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "edited": false, "score": 0, "creation_date": 1472219307, "post_id": 39162187, "comment_id": 65678068, "body": "The problem with using wireshark is that the disconnect happens only very rarely and I would have to somehow filter out all the successful connections to analyze the error case."}, {"owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "reply_to_user": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "edited": false, "score": 0, "creation_date": 1472219930, "post_id": 39162187, "comment_id": 65678463, "body": "Wireshark has filters that should enable you to find the error case to analyse."}], "tags": [], "owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "is_accepted": true, "score": 3, "last_activity_date": 1472201431, "last_edit_date": 1495540297, "creation_date": 1472201431, "answer_id": 39162187, "question_id": 39123589, "link": "https://stackoverflow.com/questions/39123589/boost-asio-error-code-for-an-existing-connection-was-forcibly-closed-by-the-rem/39162187#39162187", "title": "Boost.Asio error code for &quot;An existing connection was forcibly closed by the remote host&quot;", "body": "<p>In answer to your questions:</p>\n\n<p>1) The <code>boost</code> error code is <code>boost::asio::error::connection_reset</code>; see <code>boost/system/error_code.hpp</code>.  </p>\n\n<p>2) The analogue on linux systems is <code>ECONNRESET</code>; see <code>errno.h</code>.  </p>\n\n<p>3) <code>connection_reset</code> is one of number of ways that a TCP socket can disconnect, see: <a href=\"https://stackoverflow.com/questions/19887537/how-to-detect-when-a-boost-tcp-socket-disconnects/19891985#19891985\">How to detect when a boost TCP socket disconnects</a>.  </p>\n\n<p>To determine precisely what is going on, I agree with <code>@user</code> and recommend that you install and use <a href=\"https://www.wireshark.org/\" rel=\"nofollow noreferrer\">Wireshark</a> to observe the TCP messages between your client and server.</p>\n"}], "owner": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1810, "favorite_count": 0, "accepted_answer_id": 39162187, "answer_count": 1, "score": 2, "last_activity_date": 1472201431, "creation_date": 1472042365, "last_edit_date": 1472042781, "question_id": 39123589, "link": "https://stackoverflow.com/questions/39123589/boost-asio-error-code-for-an-existing-connection-was-forcibly-closed-by-the-rem", "title": "Boost.Asio error code for &quot;An existing connection was forcibly closed by the remote host&quot;", "body": "<p>In my tests my client gets occasionally, when trying to read from a boost socket, the error</p>\n\n<blockquote>\n  <p>An existing connection was forcibly closed by the remote host</p>\n</blockquote>\n\n<p>I have several questions:</p>\n\n<p>1) What is the Boost error code I have to check for which is associated with this message?</p>\n\n<p>2) What is the analogue on Linux systems? Can I catch the same error code?</p>\n\n<p>3) In the server's logs I do not see a successful connection. But the client returns successfully from its connection attempt. Also <code>boost::asio::write()</code> succeeds, but also here the server does not receive anything. But when trying to read from the socket (after the send), I get above error message. </p>\n\n<p>What is going on?</p>\n"}, {"tags": ["c++", "c++-standard-library"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1472045139, "post_id": 39123310, "comment_id": 65594731, "body": "I&#39;m surprised they didn&#39;t just write <code>void _Assign_n(size_type _Count, _Ty val)</code>, but of course VS2010 predates C++11. Nowadays you really shouldn&#39;t be taking a <code>const&amp;</code> when you need a copy. It prevents moves."}], "answers": [{"comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472042299, "post_id": 39123489, "comment_id": 65592536, "body": "That was well-known. The question is whether the standard says something or not about this behavior"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1472042084, "creation_date": 1472042084, "answer_id": 39123489, "question_id": 39123310, "link": "https://stackoverflow.com/questions/39123310/vector-assign-with-value-in-sequence/39123489#39123489", "title": "vector.assign() with value in sequence", "body": "<p><code>at()</code> returns a reference to the existing value in the container. As such, this is undefined behavior.</p>\n\n<p>You can make this well defined behavior simply by making a copy of it:</p>\n\n<pre><code>v.assign(1, (std::string)v.at(0));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "is_accepted": true, "score": 9, "last_activity_date": 1472042447, "last_edit_date": 1472042447, "creation_date": 1472042170, "answer_id": 39123526, "question_id": 39123310, "link": "https://stackoverflow.com/questions/39123310/vector-assign-with-value-in-sequence/39123526#39123526", "title": "vector.assign() with value in sequence", "body": "<p>This is undefined behaviour, the copied element cannot come from the container itself.</p>\n\n<p>[sequence.reqmts] table 84 (draft n4606)</p>\n\n<p><a href=\"https://i.stack.imgur.com/x9EgN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x9EgN.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2827, "user_id": 1825094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6Mk2.png?s=128&g=1", "display_name": "Max Truxa", "link": "https://stackoverflow.com/users/1825094/max-truxa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 1, "accepted_answer_id": 39123526, "answer_count": 2, "score": 11, "last_activity_date": 1472042937, "creation_date": 1472041616, "last_edit_date": 1472042937, "question_id": 39123310, "link": "https://stackoverflow.com/questions/39123310/vector-assign-with-value-in-sequence", "title": "vector.assign() with value in sequence", "body": "<p>Is the following well-defined?</p>\n\n<pre><code>std::vector&lt;std::string&gt; v{\"test\"};\nv.assign(1, v.at(0));\n</code></pre>\n\n<p>If the old sequence was destroyed before the new one is constructed\nthe reference passed to <code>assign</code> would be invalidated and hence the\nprogram would be ill-formed.</p>\n\n<p>Does the standard mention this case (the\nvalue being part of the old sequence) or something similar anywhere,\nmaking this construct well-formed? I couldn't find anything.</p>\n\n<p>From the copy of Dinkumware's standard library implementation shipped\nwith VS2010 (<code>_Assign_n</code> is what's called internally by <code>assign</code>):</p>\n\n<pre><code>void _Assign_n(size_type _Count, const _Ty&amp; _Val)\n{ // assign _Count * _Val\n    _Ty _Tmp = _Val; // in case _Val is in sequence\n    erase(begin(), end());\n    insert(begin(), _Count, _Tmp);\n}\n</code></pre>\n\n<p>The comment</p>\n\n<blockquote>\n  <p>in case _Val is in sequence</p>\n</blockquote>\n\n<p>suggests that either the\nstandard explicitly states that assigning an element that is part of\nthe current sequence is well-formed, or that Dinkumware's implementation\njust tries to be smart ;) </p>\n\n<p>Which one is it?</p>\n"}, {"tags": ["c++", "optimization", "scope", "destructor"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1472041414, "post_id": 39123212, "comment_id": 65591941, "body": "what do you mean with &quot;liveness range&quot; ? Are you maybe looking for smart pointers?"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 12, "creation_date": 1472041459, "post_id": 39123212, "comment_id": 65591964, "body": "Very much sounds like your functions are way too long."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1472041462, "post_id": 39123212, "comment_id": 65591968, "body": "How about using a <code>clear</code> method, which can be called manually but will also be called by the destructor?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1472041462, "post_id": 39123212, "comment_id": 65591970, "body": "How about smart pointers, more specifically <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a>? Then you can <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/release\" rel=\"nofollow noreferrer\">release</a> the contained object at any time. Or as a commenter above hinted, use shorter functions?"}, {"owner": {"reputation": 2903, "user_id": 2999490, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b7f26ca67a6c76bc65e02045892c6a0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2999490/alex"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472041488, "post_id": 39123212, "comment_id": 65591984, "body": "@tobi303, but inside smart pointers it uses dynamic allocation."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 22, "creation_date": 1472041510, "post_id": 39123212, "comment_id": 65591994, "body": "&quot;Equally unsatisfactory is the use of extra braces to limit the scope explicitly&quot;. Learn to love that technique."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1472041515, "post_id": 39123212, "comment_id": 65592002, "body": "also I dont understand the last part of using new/delete vs use of extra braces. Thats not alternatives, because either the object is allocated on the heap, then you have to use new/delete and adding braces wont help at all. Or it is on the stack then it is the other way around..."}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1472041526, "post_id": 39123212, "comment_id": 65592013, "body": "@dhke Functions being too long is one assumption.. but short functions can also be pretty long-<i>running</i> without being very much code."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472041577, "post_id": 39123212, "comment_id": 65592043, "body": "@tobi303 - I suspect the OP means something like <code>vector&lt;int&gt; x(100000000000000000);</code>."}, {"owner": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "edited": false, "score": 0, "creation_date": 1472041581, "post_id": 39123212, "comment_id": 65592048, "body": "RAII will help you. or you can make a global manager, which would clean objects that are not used for a long time."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472041680, "post_id": 39123212, "comment_id": 65592101, "body": "@OliverCharlesworth I suspect the OP is giving too little information :P"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "edited": false, "score": 2, "creation_date": 1472041725, "post_id": 39123212, "comment_id": 65592134, "body": "@fgrdn RAII won&#39;t help and a &quot;global manager, which would clean objects that are not used for a long time&quot; sounds like a pretty bad idea in general."}, {"owner": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1472041818, "post_id": 39123212, "comment_id": 65592194, "body": "@SimonKraemer tell A so tell B"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1472041824, "post_id": 39123212, "comment_id": 65592195, "body": "Have you thought about extracting parts of the functions into smaller functions that will delete the objects when leaving the scope?"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1472041834, "post_id": 39123212, "comment_id": 65592204, "body": "@nhgrif The part about nested blocks already lets 200 line function bodies with lots of intermediate variable declarations scroll past my internal screen."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "edited": false, "score": 1, "creation_date": 1472041859, "post_id": 39123212, "comment_id": 65592223, "body": "@fgrdn What are you trying to say?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1472041984, "post_id": 39123212, "comment_id": 65592310, "body": "Destructors are already as &quot;eager&quot; as they can be. Sounds like you&#39;re just writing bad code. Why not post it on Code Review?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1472042002, "post_id": 39123212, "comment_id": 65592326, "body": "I don&#39;t know what is your use case, but maybe you can <a href=\"https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Clear-and-minimize\" rel=\"nofollow noreferrer\">clear &amp; minimize</a> you objects?"}, {"owner": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1472042048, "post_id": 39123212, "comment_id": 65592360, "body": "@SimonKraemer you just told &quot;no&quot;, but not specify why not. RAII obvious helps with such problems. global manager (let&#39;s say - some sort of classic resources manager which manages cahced objects) also can be used. of course it depends."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "edited": false, "score": 1, "creation_date": 1472042163, "post_id": 39123212, "comment_id": 65592432, "body": "@fgrdn: RAII requires the &quot;extra braces&quot; (that the OP wishes to avoid) to be useful."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "edited": false, "score": 0, "creation_date": 1472042440, "post_id": 39123212, "comment_id": 65592653, "body": "@fgrdn: 1) OP already uses objects that are destroyed when leaving the scope. RAII does exactly this for non-object ressources - so it doesn&#39;t make sense to reapply RAII on the OPs code."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 91, "user_id": 1502277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEC5q.jpg?s=128&g=1", "display_name": "fgrdn", "link": "https://stackoverflow.com/users/1502277/fgrdn"}, "edited": false, "score": 0, "creation_date": 1472042784, "post_id": 39123212, "comment_id": 65592918, "body": "@fgrdn: 2) A manager as you &quot;described&quot; it makes sense when you plan to keep the data in memory for a longer and not for a shorter period. Plus it can introduce additional errors and the data is moved from stack to heap and ...."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472050781, "post_id": 39123212, "comment_id": 65599055, "body": "@tobi303 Liveness analysis is a compilation pass which determines at which point a variable is no longer needed. It&#39;s an important part of register allocation, to know when a register can be used by another variable even before it goes out of scope. See <a href=\"https://en.wikipedia.org/wiki/Live_variable_analysis\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Live_variable_analysis</a>  Since the compiler already has liveness information, it could use this to eagerly call the destructor."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1472051363, "post_id": 39123212, "comment_id": 65599530, "body": "@dhke The functions are not necessarily very long. This is for an EDSL to construct data processing pipelines, similar to Halide: <a href=\"http://halide-lang.org/\" rel=\"nofollow noreferrer\">halide-lang.org</a>. There can be large temporary objects that are only used for a couple of stages in the pipeline. It would be inconvenient, bug prone and ugly to have to manually release them or limit their scope."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1472051796, "post_id": 39123212, "comment_id": 65599859, "body": "@NicolasCapens &quot;length&quot; is quite relative. But if you have a subsequence of operations that is creating a data object that is no longer needed after the subsequence completes, you have also found a natural location for introducing an abstraction, hence a subfunction."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1472052220, "post_id": 39123212, "comment_id": 65600144, "body": "@SimonKraemer This is for the EDSL of a framework library, so I don&#39;t have direct control over how people use it. Splitting things into separate functions where reasonable is suggested, but there are undoubtedly cases where that leads to less readable code. I don&#39;t want the users of my library to have to worry about implementation details and require manual deleting of temporary buffers. It&#39;s starting to sound like C++ doesn&#39;t offer the desired functionality though. :("}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1472053443, "post_id": 39123212, "comment_id": 65600937, "body": "@dhke Compilers perform liveness analysis precisely because it is extremely common for variables to no longer be live before the end of their scope, including for functions that are not excessively long. It would be a big burden to require programmers to split each scope into a subfunction. But while the compiler solved this problem for us for the case of register allocation, it does not seem to help us out for resources allocated by objects, by calling the destructor early. I was just hoping there was another language feature or trick that could accomplish the same thing."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1472053921, "post_id": 39123212, "comment_id": 65601237, "body": "@NicolasCapens You are probably forgetting that C++ only <i>seems</i> to be a high level language ;-). Variables are valid within their scope, there is no &quot;magic&quot; way to invalidate them halfway down the line. If the compiler produced code that did so, it would violate the standard. Liveness analysis for register allocation is quite a different beast, however. Every good C++ compiler will do that, but it cannot change the language&#39;s data model. Your big variable might not have an assigned register at the end of your function, but he memory is still there, because it has to be."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1472058954, "post_id": 39123212, "comment_id": 65604167, "body": "@dhke Why? What&#39;s the point of not destructing an object after its last use? And before you answer that, I do know of two practical use cases: scoped mutex locks, and tracing the entry and exit of functions. But that doesn&#39;t seem like it would have been used as an argument when the spec was written. My suspicion is that destruction was decided to be based on scope because it made compiler implementation easier in the early days. That&#39;s hardly a concern now, and releasing resources sooner would be a valuable feature."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1472060196, "post_id": 39123212, "comment_id": 65604850, "body": "@NicolasCapens you idea will also violate another rule - objects destroyed in reverse order of creation. There can be many situations this is harmful. First of all because behavior is not predictable."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1472061764, "post_id": 39123212, "comment_id": 65605691, "body": "Without some sample code, this question is not specific enough for Stack Overflow.  I&#39;m voting to close as <i>too broad</i>."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472065793, "post_id": 39123212, "comment_id": 65607906, "body": "@Slava In situations where you rely on the destruction order to be the reverse of the creation order, you just wouldn&#39;t use this feature. I don&#39;t think this is any worse than the risks involved in manual destruction. C++ already demands you to be aware of the lifetime paradigm that&#39;s in use for each situation. A well designed framework would make it intuitive or even foolproof. I don&#39;t see why you think its behavior would not be predictable."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1472066378, "post_id": 39123212, "comment_id": 65608181, "body": "@NicolasCapens unfortunately C++ is already way too overcomplicated, creating this will make it even worse (if that is possible). I doubt benefit would worse the effort. You can create proper scope already (what you should do to produce good quality code anyway) or release resources manually."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1472066585, "post_id": 39123212, "comment_id": 65608292, "body": "@TobySpeight &quot;too broad&quot; means there are too many valid answers: <a href=\"http://meta.stackexchange.com/help/closed-questions\">meta.stackexchange.com/help/closed-questions</a> That&#39;s clearly not the case here, as it looks like this isn&#39;t currently supported by C++. Sample code wouldn&#39;t clarify the question (for anyone proficient in C++), and probably detract from the real issue."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1472067035, "post_id": 39123212, "comment_id": 65608545, "body": "@Nicolas, I disagree.  If you have a non-const <code>std::string</code>, it&#39;s quite easy to assign an empty string to it.  That said, I don&#39;t understand the opposition to using the scope mechanism we&#39;re given (using braces) which is clear, unambiguous and well-understood."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472068087, "post_id": 39123212, "comment_id": 65609077, "body": "@Slava I beg to differ. This would make C++ easier to use by eliminating the need to manually release the resources or place distracting braces. Also note that C++ is a multi-paradigm language where you just use what you need. Nobody&#39;s forcing you to use it, and if it&#39;s used by a framework you have a use for, it&#39;s probably going to make things easier for you than complicate things."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472068483, "post_id": 39123212, "comment_id": 65609293, "body": "@NicolasCapens I doubt it would make it easier to use. First - situation when you have an object which holds so much resources is very seldom. Second and more important - you should keep variables in smallest possible scopes. So that will make writing bad code easier, I doubt it is a good reason."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1472069223, "post_id": 39123212, "comment_id": 65609659, "body": "@TobySpeight Adding braces is not desired for the same reason nobody would want to use them to indicate live ranges of scalar variables. Sure, doing it for one object or explicitly releasing its resources would be easy, but it becomes unmanageable to do it for all of them. That&#39;s why we rely on the compiler to do liveness analysis. But it doesn&#39;t work for resources released in the destructor. I think that&#39;s a real optimization concern, and could be solved with a new language feature."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1473165041, "post_id": 39123212, "comment_id": 66027843, "body": "<i>&quot;I&#39;ll suggest it for the next standard.&quot;</i> - How do you propose that a compiler deduce, that you are done with an object? What if an object lives for the sole reason of having its <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040520-00/?p=39243/\" rel=\"nofollow noreferrer\">d&#39;tor invoked, at a deterministic time</a>? This feature isn&#39;t going to make it into the standard. And why should it? We already have the tool you are asking for: Scoping manages the livetime of objects with automatic storage duration. Use it!"}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1472041722, "post_id": 39123323, "comment_id": 65592132, "body": "&quot;Equally unsatisfactory is the use of extra braces to limit the scope explicitly.&quot; OP doesn&#39;t wan&#39;t braces (but they&#39;ll likely have to deal with them :-) )"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 5, "creation_date": 1472042032, "post_id": 39123323, "comment_id": 65592347, "body": "@AndyG: Even more equally unsatisfactory are pointless constraints made up by the OP for no reason."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472042830, "post_id": 39123323, "comment_id": 65592955, "body": "@KerreSB agree, but &quot;more equally&quot; just sounds too funny ;)"}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1472054966, "post_id": 39123323, "comment_id": 65601939, "body": "@KerrekSB It&#39;s not a pointless constraint. Compilers perform liveness analysis for register allocation purposes because programmers clearly don&#39;t want the constraint of having to indicate variable liveness manually via scope. So why would it be unreasonable to extend that from registers (and stack memory), to heap memory, by automatically calling the destructor at the end of a local object&#39;s live range?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "edited": false, "score": 2, "creation_date": 1472055505, "post_id": 39123323, "comment_id": 65602264, "body": "@NicolasCapens: Think about <code>lock_guard</code> variable which is .. not used explicitly after its definition, but should remain until end of scope."}, {"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "edited": false, "score": 0, "creation_date": 1472137250, "post_id": 39123323, "comment_id": 65640870, "body": "@Jarod42 Yes, cases like that can continue to use the current behavior of destruction at end of scope. I was just looking for a way to optionally instruct the compiler to call the destructor sooner."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 5, "last_activity_date": 1472041664, "creation_date": 1472041664, "answer_id": 39123323, "question_id": 39123212, "link": "https://stackoverflow.com/questions/39123212/is-there-a-way-to-get-c-destructors-called-eagerly/39123323#39123323", "title": "Is there a way to get C++ destructors called eagerly?", "body": "<p>You may use inner scope, but it is generally sign that you might use sub function</p>\n\n<pre><code>void foo()\n{\n\n    // some stuff\n    {\n        BigData bigData;\n\n        // some other stuff\n    } // bigData is released now.\n\n    // some other stuff\n}\n</code></pre>\n\n<p>That doesn't handle interleaving variables.</p>\n"}, {"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1472041717, "creation_date": 1472041717, "answer_id": 39123344, "question_id": 39123212, "link": "https://stackoverflow.com/questions/39123212/is-there-a-way-to-get-c-destructors-called-eagerly/39123344#39123344", "title": "Is there a way to get C++ destructors called eagerly?", "body": "<p>No, a destructor, by definition, gets invoked only as part of the object's destruction sequence.</p>\n\n<p>However, nothing stops you from releasing and deallocating any resources your class has without waiting for a destructor.</p>\n\n<p>For example, if your class has a large <code>std::list</code> class member, there's no law that prohibits you from invoking <code>clear()</code>, to remove its contents, without waiting for that to happen naturally in the destructor.</p>\n\n<p>Or, if your class destructor is \"safe\", and does what needs to be done, simply factor it out into a private class method, leaving the destructor to contain nothing but the private method call, and do the same whenever you want to free the same resources.</p>\n"}, {"comments": [{"owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "edited": false, "score": 0, "creation_date": 1472074720, "post_id": 39129542, "comment_id": 65612223, "body": "How would it automatically destruct the object on last use?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "edited": false, "score": 0, "creation_date": 1472105199, "post_id": 39129542, "comment_id": 65619987, "body": "@NicolasCapens: There is no way to automatically destroy it on last use, especially as the objects existence might be the important thing (consider locking or signalling program state for example). It&#39;s just the closest thing possible, in allowing you to create/destroy earlier and making sure the lifetime is still managed properly."}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 1, "last_activity_date": 1472059556, "creation_date": 1472059556, "answer_id": 39129542, "question_id": 39123212, "link": "https://stackoverflow.com/questions/39123212/is-there-a-way-to-get-c-destructors-called-eagerly/39129542#39129542", "title": "Is there a way to get C++ destructors called eagerly?", "body": "<p>If the effort is really worth it (measure at least twice!), you could use <a href=\"http://en.cppreference.com/w/cpp/utility/optional\" rel=\"nofollow\"><code>std::optional</code></a> to enable you to destruct selected class-types sooner.</p>\n\n<p>Be sure you cannot achieve your aim using scoping though.</p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 766807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rjpP5.png?s=128&g=1", "display_name": "ChetS", "link": "https://stackoverflow.com/users/766807/chets"}, "is_accepted": false, "score": 0, "last_activity_date": 1472233350, "creation_date": 1472233350, "answer_id": 39171942, "question_id": 39123212, "link": "https://stackoverflow.com/questions/39123212/is-there-a-way-to-get-c-destructors-called-eagerly/39171942#39171942", "title": "Is there a way to get C++ destructors called eagerly?", "body": "<p>One way to control the lifetime of an object is to use <code>std::optional</code>. This will allow for the object to end its lifetime early, but the process is not automatic. It will require manually setting the variable to <code>nullopt</code></p>\n\n<p>To get the automatic behaviour you would like you could define a type alias for <code>std::optional</code></p>\n\n<pre><code>template &lt;typename T&gt;\nusing eagerly_destroy = optional&lt;T&gt;;\n</code></pre>\n\n<p>Next you will need to create a program that process your source code to find all variables declared with this eagery_destroy template and find the last use of those variables and add the <code>= nullopt</code> to the right places. </p>\n\n<p>Or you could find an open source compiler implementation and use that as a starting point to implement the feature you are suggesting.</p>\n"}], "owner": {"reputation": 652, "user_id": 1377354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fxi8N.png?s=128&g=1", "display_name": "Nicolas Capens", "link": "https://stackoverflow.com/users/1377354/nicolas-capens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1472233350, "creation_date": 1472041336, "last_edit_date": 1472059199, "question_id": 39123212, "link": "https://stackoverflow.com/questions/39123212/is-there-a-way-to-get-c-destructors-called-eagerly", "title": "Is there a way to get C++ destructors called eagerly?", "body": "<p>Some of the functions in my C++ code have temporary local objects that use a lot of heap memory. So I'd like them to be destructed and release their memory as soon as I'm done with them. But C++ only calls the destructor when the variable name goes out of scope. Is there a way to let the compiler automatically call the destructor or another cleanup method at the end of the variable's liveness range instead?</p>\n\n<p>Of course I could just new/delete the objects manually, but that's inconvenient and bug prone. Equally unsatisfactory is the use of extra braces to limit the scope explicitly.</p>\n\n<p>EDIT: Judging by the responses it seems like this can't be done with current C++ features. I'll suggest it for the next standard.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++"], "comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1472040907, "post_id": 39123025, "comment_id": 65591578, "body": "<a href=\"http://www.cplusplus.com/doc/tutorial/introduction/visualstudio/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/introduction/visualstudio</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1472043888, "post_id": 39123025, "comment_id": 65593773, "body": "Microsoft&#39;s <code>Visual Studio 2015 Fundamentals.hlp</code> is a 190 MB file. The text doesn&#39;t fit in the answer box below."}, {"owner": {"reputation": 10385, "user_id": 4032703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8imMA.png?s=128&g=1", "display_name": "EJoshuaS - Reinstate Monica", "link": "https://stackoverflow.com/users/4032703/ejoshuas-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472060414, "post_id": 39123025, "comment_id": 65604967, "body": "What compile errors do you get? Can you be more specific about what errors you&#39;re receiving?"}], "answers": [{"tags": [], "owner": {"reputation": 527, "user_id": 6752348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qplu9.jpg?s=128&g=1", "display_name": "lorenzo_campanile", "link": "https://stackoverflow.com/users/6752348/lorenzo-campanile"}, "is_accepted": true, "score": 0, "last_activity_date": 1472041803, "creation_date": 1472041803, "answer_id": 39123378, "question_id": 39123025, "link": "https://stackoverflow.com/questions/39123025/how-to-compile-c-source-code-using-visual-studio-that-i-have-downloaded/39123378#39123378", "title": "How to compile c++ source code using visual studio that I have downloaded", "body": "<p>if in the project folder there is a .sln (solution) file, open it in Visual Studio and run the project to see if it works. Then you can modify it.\nIf you don't find the .sln file you have to look for a README file, or something like this. :)</p>\n"}], "owner": {"reputation": 3, "user_id": 5362675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a310c3c17ff7644f2ac79edb5f7ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Douglas Kingori", "link": "https://stackoverflow.com/users/5362675/douglas-kingori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1537, "favorite_count": 0, "closed_date": 1472043597, "accepted_answer_id": 39123378, "answer_count": 1, "score": -5, "last_activity_date": 1472067864, "creation_date": 1472040831, "last_edit_date": 1472067864, "question_id": 39123025, "link": "https://stackoverflow.com/questions/39123025/how-to-compile-c-source-code-using-visual-studio-that-i-have-downloaded", "closed_reason": "Needs more focus", "title": "How to compile c++ source code using visual studio that I have downloaded", "body": "<p>I have downloaded some source code <a href=\"http://www.codeproject.com/Articles/23111/Making-a-Class-Schedule-Using-a-Genetic-Algorithm#Configurationfile16\" rel=\"nofollow\">here</a> (unfortunately it's too big to post here) and I wish to change a few things then run/compile it using visual studio 2015. Can you point me in the right direction as to how to go about this? I am new to both c++ and Visual Studio.</p>\n"}, {"tags": ["c++", "linux", "shell", "boost", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 1891043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ac9303a9c48c77a15fe359f20d26dee1?s=128&d=identicon&r=PG", "display_name": "apotropaic", "link": "https://stackoverflow.com/users/1891043/apotropaic"}, "edited": false, "score": 0, "creation_date": 1472042642, "post_id": 39123116, "comment_id": 65592801, "body": "It is not portable solution, here i need some sort of no manual intervention and no code change at run time"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 21, "user_id": 1891043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ac9303a9c48c77a15fe359f20d26dee1?s=128&d=identicon&r=PG", "display_name": "apotropaic", "link": "https://stackoverflow.com/users/1891043/apotropaic"}, "edited": false, "score": 0, "creation_date": 1472042750, "post_id": 39123116, "comment_id": 65592889, "body": "Since you explicitly tagged the question &quot;linux&quot; I didn&#39;t think portability mattered."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1472041052, "creation_date": 1472041052, "answer_id": 39123116, "question_id": 39122997, "link": "https://stackoverflow.com/questions/39122997/how-to-run-a-program-with-gdb-which-is-invoked-from-a-shell-script-which-in-tur/39123116#39123116", "title": "how to run a program with gdb which is invoked from a shell script, which in turn invoked from c++ via boost::process", "body": "<p>Two easy options:</p>\n\n<ol>\n<li><p>Attach gdb after the program has started with <code>gdb -p &lt;pid of process&gt;</code> if it doesn't matter to stop it at a specific point.</p></li>\n<li><p>Insert a <code>raise(SIGSTOP);</code> in the C program where you want it to stop. Once the process is stopped, attach gdb as in <code>1</code>, set any breakpoints you need and then send the process a <code>SIGCONT</code> signal (<code>kill -CONT &lt;pid of process&gt;</code>) to cause it to continue.</p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 1891043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ac9303a9c48c77a15fe359f20d26dee1?s=128&d=identicon&r=PG", "display_name": "apotropaic", "link": "https://stackoverflow.com/users/1891043/apotropaic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472041052, "creation_date": 1472040738, "question_id": 39122997, "link": "https://stackoverflow.com/questions/39122997/how-to-run-a-program-with-gdb-which-is-invoked-from-a-shell-script-which-in-tur", "title": "how to run a program with gdb which is invoked from a shell script, which in turn invoked from c++ via boost::process", "body": "<p>I want to debug a c program with gdb which is invoked by shell script. In this shell script , there are lot of things done and many environment variables are set.</p>\n\n<p>This shell script is invoked by boost::process::launch from a c++ program.</p>\n\n<p>I can change c++ program, shell script, and the c program itself, but can't change the architecture of this flow.</p>\n\n<p>Is there any way , so that i can use gdb to debug the program.</p>\n\n<p>If there is no solution, is there a way to dump all environment settings before launching shell script, so that i can launch same script with these settings to debug it later. I will prefer a portable and long term solution.</p>\n"}, {"tags": ["c++", "json", "qt", "serialization", "reflection"], "comments": [{"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 3, "creation_date": 1472040479, "post_id": 39122858, "comment_id": 65591273, "body": "Why not to use <a href=\"http://doc.qt.io/qt-5/qjsonobject.html\" rel=\"nofollow noreferrer\">QJsonObject</a> provided by Qt framework?"}, {"owner": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1472040915, "post_id": 39122858, "comment_id": 65591584, "body": "@mvidelgauz I have generated datatypes for manipulating. I don&#39;t know about QJsonObject, but I need directly handling to the object&#39;s fields: <code>Obj-&gt;more-&gt;gps</code>  In other words QJsonObject is <i>implicit</i> object, I need the <i>explicit</i>."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1472041249, "post_id": 39122858, "comment_id": 65591822, "body": "So could you for example parse your json and add <a href=\"http://doc.qt.io/qt-5/qobject.html#dynamic-properties\" rel=\"nofollow noreferrer\">Dynamic Properties</a> to object? If you need thing like <i>generated</i> member like <code>gps</code> than I don&#39;t think there is other way other than generating your QObject source code"}, {"owner": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1472041704, "post_id": 39122858, "comment_id": 65592114, "body": "@mvidelgauz in Unreal Engine 4 I can use <code>TFieldIterator</code> for iterating by structure\\class properties and change them (by using type casting, if property can be casted to specified, then I can change them). Qt object has no any similar methods?"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1472042194, "post_id": 39122858, "comment_id": 65592456, "body": "Sorry I am not familiar with Unreal Engine but to me it sounds like you can achieve your goal using Dynamic Properties"}], "answers": [{"tags": [], "owner": {"reputation": 2150, "user_id": 1620542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9lRsr.jpg?s=128&g=1", "display_name": "Eluvatar", "link": "https://stackoverflow.com/users/1620542/eluvatar"}, "is_accepted": true, "score": 6, "last_activity_date": 1474411366, "creation_date": 1474411366, "answer_id": 39604837, "question_id": 39122858, "link": "https://stackoverflow.com/questions/39122858/how-to-convert-json-object-to-qobject/39604837#39604837", "title": "How to convert json object to QObject?", "body": "<p>I've been working on this problem myself, so far I've got a very rough implementation, it unfortunately does not support lists at all, there's no generic way to determine the type of the list and then add things to it, you could hard code support for specific list types you need if that will work for you.</p>\n\n<pre><code>QObject* Utils::fromJson(const QMetaObject&amp; meta, QString&amp; json)\n{\n    auto jsonObject = QJsonDocument::fromJson(json.toLatin1()).object();\n    return fromJson(&amp;meta, jsonObject);\n}\n\nQObject* Utils::fromJson(const QMetaObject* meta, QJsonObject&amp; jsonObject)\n{\n    QObject* object = meta-&gt;newInstance();\n\n    int propertyStart = QObject::staticMetaObject.propertyCount();\n    for (int i = propertyStart; i &lt; meta-&gt;propertyCount(); ++i) {\n        QMetaProperty property = meta-&gt;property(i);\n        if (!property.isWritable())\n            continue;\n        if (!jsonObject.contains(property.name()))\n            continue;\n\n        auto value = jsonValueToProperty(object, property, jsonObject.value(property.name()));\n        property.write(object, value);\n    }\n    return object;\n}\n\nQVariant Utils::jsonValueToProperty(QObject* object, QMetaProperty&amp; property, QJsonValue value)\n{\n    auto type = property.userType();\n    auto typeName = QString(property.typeName());\n    if (value.isArray()) {\n        //todo array\n    } else if (value.isObject()) {\n        switch (type) {\n        default:\n            auto jsonObject = value.toObject();\n            return QVariant::fromValue(fromJson(QMetaType::metaObjectForType(type), jsonObject));\n            break;\n        }\n        //todo other meta object types\n    } else {\n        //primitive types\n        return value.toVariant();\n    }\n}\n</code></pre>\n\n<p>Something to keep in mind is that each QObject type you want to convert must have a default constructor marked with <code>Q_INVOKABLE</code>, to use the it for your case might look something like this (assuming you put those methods into a class called <code>Utils</code></p>\n\n<pre><code>QString json = QString(); //load json from somewhere\nFPersonInfo*  person = (FPersonInfo*) Utils::fromJson(FPersonInfo::staticMetaObject, json);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "edited": false, "score": 0, "creation_date": 1606543963, "post_id": 64901510, "comment_id": 114996971, "body": "Is there a way to avoid using extra code in property definition?  If reflection info exists for each qproperty, why I can&#39;t just enumerate these properties in loop? Although it seems impossible to determine inner container type (such as QMap, QList) during runtime in qt framework... Or am I wrong?"}, {"owner": {"reputation": 8621, "user_id": 427544, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aXnV3.jpg?s=128&g=1", "display_name": "Luca Carlon", "link": "https://stackoverflow.com/users/427544/luca-carlon"}, "reply_to_user": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "edited": false, "score": 0, "creation_date": 1606563396, "post_id": 64901510, "comment_id": 115000660, "body": "What &quot;extra code&quot; are you referring to?"}, {"owner": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "edited": false, "score": 0, "creation_date": 1606628850, "post_id": 64901510, "comment_id": 115015519, "body": "I mean L_RW_PROP macro. Just code style: want to see the classic QObject class definition with Q_PROPERTY without additional Q_INVOKABLE functions (like in example in question)"}, {"owner": {"reputation": 8621, "user_id": 427544, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aXnV3.jpg?s=128&g=1", "display_name": "Luca Carlon", "link": "https://stackoverflow.com/users/427544/luca-carlon"}, "reply_to_user": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "edited": false, "score": 0, "creation_date": 1606647620, "post_id": 64901510, "comment_id": 115018568, "body": "You want to change the name? Redefine it. I do not see any Q_INVOKABLE function in my example."}], "tags": [], "owner": {"reputation": 8621, "user_id": 427544, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aXnV3.jpg?s=128&g=1", "display_name": "Luca Carlon", "link": "https://stackoverflow.com/users/427544/luca-carlon"}, "is_accepted": false, "score": 0, "last_activity_date": 1605915344, "last_edit_date": 1605915344, "creation_date": 1605734134, "answer_id": 64901510, "question_id": 39122858, "link": "https://stackoverflow.com/questions/39122858/how-to-convert-json-object-to-qobject/64901510#64901510", "title": "How to convert json object to QObject?", "body": "<p>I implemented this as an open library: <a href=\"https://github.com/carlonluca/lqobjectserializer\" rel=\"nofollow noreferrer\">https://github.com/carlonluca/lqobjectserializer</a>.</p>\n<p>Define structures:</p>\n<pre><code>L_BEGIN_CLASS(FMoreInfo)\nL_RW_PROP(QString, gps, setGps)\nL_RW_PROP(bool, valid, setValid)\nL_END_CLASS\n\nL_BEGIN_CLASS(FPersonInfo)\nL_RW_PROP(QString, name, setName)\nL_RW_PROP(int, age, setAge)\nL_RW_PROP(QList&lt;int&gt;, identifiers, setIdentifiers)\nL_RW_PROP(FMoreInfo*, more, setMore)\nL_END_CLASS\n</code></pre>\n<p>Done:</p>\n<pre><code>LDeserializer&lt;FPersonInfo&gt; deserializer(factory);\nQScopedPointer&lt;FPersonInfo&gt; g(deserializer.deserialize(jsonString));\n</code></pre>\n<p>You also need to register the types in the meta object system as usual.</p>\n"}], "owner": {"reputation": 1452, "user_id": 4467714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/u5h1h.jpg?s=128&g=1", "display_name": "Artem Selivanov", "link": "https://stackoverflow.com/users/4467714/artem-selivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2551, "favorite_count": 2, "accepted_answer_id": 39604837, "answer_count": 2, "score": 4, "last_activity_date": 1605915344, "creation_date": 1472040358, "question_id": 39122858, "link": "https://stackoverflow.com/questions/39122858/how-to-convert-json-object-to-qobject", "title": "How to convert json object to QObject?", "body": "<p>Json structure is C++ struct-like (struct or array of sturcts, arrays and basic types).\nI need to convert JSON object to specified QObject with specified properties (by QObject fields).</p>\n\n<p>For example, the json:</p>\n\n<pre><code>{\n  \"name\": \"Andrew\",\n  \"age\" 33,\n  \"identifiers\": [32, 45, 67, 78],\n  \"more\": {\n     \"gps\": \"44.9064', W073\u00b0 59.0735'\",\n     \"valid\": true\n  }\n}\n</code></pre>\n\n<p>QObjects:</p>\n\n<pre><code>class FMoreInfo : public QObject {\n   Q_OBJECT\n\n   Q_PROPERTY( QString gps );\n   Q_PROPERTY( bool valid );\n}\n\nclass FPersonInfo : public QObject {\n   Q_OBJECT\n\n   Q_PROPERTY( QString name );\n   Q_PROPERTY( int32 age );\n   Q_PROPERTY( QVector&lt;int32&gt; identifiers );\n   Q_PROPERTY( FMoreInfo more );\n\n}\n</code></pre>\n\n<p>JSON is a string and I need convert it by one template function to FPersonInfo.\nIs there known algorithms?</p>\n"}, {"tags": ["c++", "opengl", "opengl-4"], "owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1472043062, "creation_date": 1472039791, "last_edit_date": 1472043062, "question_id": 39122670, "link": "https://stackoverflow.com/questions/39122670/opengl-staging-buffer-to-improve-uniform-buffer-performance", "title": "OpenGL staging buffer to improve Uniform Buffer performance", "body": "<p><a href=\"https://www.opengl.org/discussion_boards/showthread.php/198752-Poor-glMultiDrawElementsIndirect-Performance?p=1283496&amp;viewfull=1#post1283496\" rel=\"nofollow\">I read</a> that driver seems to put buffers on client side memory, so it comes to me a different idea to manage my uniform buffers.</p>\n\n<p>My uniform buffers work with matrix, materials etc, so they are updated more than once by frame.</p>\n\n<p>The old way was this one :</p>\n\n<ol>\n<li>Create uniform buffer using glBufferStorage, and map it with flush_bit. </li>\n<li>Update a part of this buffer, flush it and drawcall.</li>\n</ol>\n\n<p>My new way could be like that :</p>\n\n<ol>\n<li>Create uniform buffer using glBufferData and dynamic (??) hint.</li>\n<li>Create a little transfer buffer with bl buffer storage and client side hint(thanks to that, I must not flush it?)</li>\n<li>Update the transfer buffer</li>\n<li>Copy the transfer buffer to the uniform one.</li>\n</ol>\n\n<p>Do you think it could improve performance?</p>\n"}]