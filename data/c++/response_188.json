[{"tags": ["c++", "concurrency", "x86", "atomic", "undefined-behavior"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1534383734, "post_id": 51867844, "comment_id": 90688892, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/178104/discussion-on-question-by-curious-behavior-of-x86-with-concurrent-atomic-and-non\">moved to chat</a>."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1534383810, "post_id": 51867844, "comment_id": 90688903, "body": "@BhargavRao it is however relevant to understanding why the question has a downvote. And also has my response to the downvote. Why move it to chat?"}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1534383955, "post_id": 51867844, "comment_id": 90688924, "body": "Comments are meant to be used to request clarifications or suggest improvements to the post, and the poster of the question needs to update their post in accordance with the comments. They are not for extended conversations. As the conversation continued for a long period, it has been moved to chat, where you can continue the discussion."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1534451343, "post_id": 51867844, "comment_id": 90721274, "body": "This would be undefined behavior, if it even compiled, which it won&#39;t because you are using <code>.</code> on a pointer."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1534455170, "post_id": 51867844, "comment_id": 90722736, "body": "The TL:DR here is that there&#39;s no problem in asm: pure loads/stores are naturally atomic.  The main problem is reliably / portably getting a C++ compiler to emit asm that accesses the same memory location with two different widths, with at least the bottom 32 bits of the store being atomic.  Using a union with a lockless <code>atomic&lt;uint64_t&gt;</code> isn&#39;t good on 32-bit ARM because we don&#39;t need the whole 64 bits to be atomic, only as wide as we load.  (Not to mention that union type-punning is a GNU extension in C++, unlike C99). A union with <code>volatile</code> might work for gcc.  <a href=\"https://godbolt.org/g/heE6UE\" rel=\"nofollow noreferrer\">godbolt.org/g/heE6UE</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1534455266, "post_id": 51867844, "comment_id": 90722769, "body": "But that would be using pre-C++11 lockless programming techniques that depend on compiler-specific behaviour that ISO C++ doesn&#39;t define.  (e.g. that you can use <code>volatile</code> or other tricks to get the asm you want for multi-threaded programming, if you know which store widths are atomic on your target platforms.  e.g. <a href=\"https://stackoverflow.com/q/36624881\">Why is integer assignment on a naturally aligned variable atomic on x86?</a>.  I have a half-written answer I can post if this gets reopened.  (For now, your <code>atomic</code> pointer should be <code>static const</code> so it can optimize away.)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1534463650, "post_id": 51867844, "comment_id": 90724856, "body": "@PeterCordes Thanks for the comment.  One followup - is there any sequence of operations here in pure asm (atomic RMW&#39;s are candidates here too) that can make this code behave badly?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1534463877, "post_id": 51867844, "comment_id": 90724891, "body": "@Curious: your C++ source is already badly behaved.  But answering what I think you mean; yes, the compiler is free to compile <code>integer = a | (b&lt;&lt;16) | (c&lt;&lt;32)</code> into 3 separate 16-bit stores (if a, b, and c are 16-bit integers), so the result asm will not atomically store <code>a | (b&lt;&lt;16)</code> into the low half.  <code>volatile</code> should probably help with that in compilers like gcc, probably making the compiler implement the assignment with a single access."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1534561402, "post_id": 51867844, "comment_id": 90760470, "body": "@PeterCordes The question seems to have reopened, want to formalize your comments as a proper answer?"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534483966, "creation_date": 1534376627, "last_edit_date": 1534450565, "question_id": 51867844, "link": "https://stackoverflow.com/questions/51867844/behavior-of-x86-with-concurrent-atomic-and-non-atomic-read-and-writes", "title": "Behavior of x86 with concurrent atomic and non-atomic read and writes", "body": "<p>What is the behavior of x86 for something like this?</p>\n\n<pre><code>template &lt;typename Integer&gt;\nvoid write(Integer&amp;);\n\nauto integer = std::uint64_t{0};\nauto atomic = reinterpret_cast&lt;std::atomic&lt;std::uint32_t&gt;*&gt;(&amp;integer);\n\nauto one = std::thread{[&amp;]() {\n    write(integer);\n}};\nauto two = std::thread{[&amp;]() {\n    read(atomic.load());\n}};\n</code></pre>\n\n<p>A 32 bit atomic load in x86 gets compiled to this (somehow the generated assembly does not include the lock prefix)</p>\n\n<pre><code>mov     edi, DWORD PTR [rdi]\n</code></pre>\n\n<p>(Assume little-endianness, which puts the atomic integer at the right place to observe the least significant 32 bits of the 64 bit integer)</p>\n\n<p>Two related questions - </p>\n\n<ul>\n<li>What does x86 describe as the behavior of such a scenario?  </li>\n<li>What would the <code>write()</code> function need to do in this case to break the above code?  The width of the read/write in <code>write()</code> can be anything, not necessarily confined to 64 bits, assuming however, that there is enough padding to make it take up 64 bits.  <code>write()</code> can also execute an atomic operation. </li>\n</ul>\n\n<hr>\n\n<p><strong>Context</strong>: The place I work at has code that does this, and nothing seems to be breaking at the moment, I am pretty confident that this is bad code and can break in some situation.  However, I do not know much about x86 and hardware in general.  I would like to get to the bottom of this behavior, figure out if this is a problem and potentially fix the problem.  A strong reference from x86 (ARM would do too) would be great. </p>\n"}, {"tags": ["c++", "dllexport"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1534377242, "post_id": 51867842, "comment_id": 90687611, "body": "It is technically possible.  You need to create a .def file that tells the linker, &quot;I didn&#39;t actually implement this function, it lives over there&quot;.  <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20121116-00/?p=6073\" rel=\"nofollow noreferrer\">This blog post</a> talks about it, but it is actually about a complication doing this.  It tends to be easier to just export a Baz() function whose function body isn&#39;t anything more then <code>return Foobar();</code>, avoids the joy of maintaining .def files."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1534380780, "post_id": 51867842, "comment_id": 90688338, "body": "@Hans Passant:  That won&#39;t work. He&#39;s implementing the dll and the other guy is calling it by that name"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5065272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92e76280daee7c824330b3c41972876e?s=128&d=identicon&r=PG&f=1", "display_name": "Billie", "link": "https://stackoverflow.com/users/5065272/billie"}, "edited": false, "score": 0, "creation_date": 1534429693, "post_id": 51868274, "comment_id": 90710329, "body": "I know that this is working, but I don&#39;t like the idea of copying a header which already contains all information. And I&#39;m aware that a .def file would work as well."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 1, "last_activity_date": 1534380938, "creation_date": 1534380938, "answer_id": 51868274, "question_id": 51867842, "link": "https://stackoverflow.com/questions/51867842/dll-can-i-use-declspecdllexport-when-sdk-header-file-doesnt-use-it/51868274#51868274", "title": "DLL: Can I use __declspec(dllexport) when SDK header file doesn&#39;t use it", "body": "<p>The simplest, stupidest, obvious method is to copy the header file into your project and add dllexport to it.</p>\n\n<p>The next method is to not include the header file in the file implementing that method.</p>\n\n<p>Then there's the .def file for which I want somebody else to answer.</p>\n"}, {"tags": [], "owner": {"reputation": 1712, "user_id": 3781728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qta2K.png?s=128&g=1", "display_name": "Ed Dore", "link": "https://stackoverflow.com/users/3781728/ed-dore"}, "is_accepted": true, "score": 1, "last_activity_date": 1534383196, "creation_date": 1534383196, "answer_id": 51868465, "question_id": 51867842, "link": "https://stackoverflow.com/questions/51867842/dll-can-i-use-declspecdllexport-when-sdk-header-file-doesnt-use-it/51868465#51868465", "title": "DLL: Can I use __declspec(dllexport) when SDK header file doesn&#39;t use it", "body": "<p>Or you could try adding /EXPORT:Foobar to your link.exe command line.\nSee <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/export-exports-a-function\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/reference/export-exports-a-function</a> for details.</p>\n"}], "owner": {"reputation": 99, "user_id": 5065272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92e76280daee7c824330b3c41972876e?s=128&d=identicon&r=PG&f=1", "display_name": "Billie", "link": "https://stackoverflow.com/users/5065272/billie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 51868465, "answer_count": 2, "score": 0, "last_activity_date": 1534383196, "creation_date": 1534376619, "question_id": 51867842, "link": "https://stackoverflow.com/questions/51867842/dll-can-i-use-declspecdllexport-when-sdk-header-file-doesnt-use-it", "title": "DLL: Can I use __declspec(dllexport) when SDK header file doesn&#39;t use it", "body": "<p>I'm working with a SDK which expects my DLL to export some functions. The SDK provides a header file like this of the functions to export:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n    HRESULT extern WINAPI Foobar();\n\n#pragma pack(pop)\n\n#ifdef __cplusplus\n}    /*extern \"C\"*/\n#endif\n</code></pre>\n\n<p><a href=\"https://github.com/sergiofst/wosa-xfs-spi-base-framework/blob/master/depends/INCLUDE/XFSSPI.H\" rel=\"nofollow noreferrer\">https://github.com/sergiofst/wosa-xfs-spi-base-framework/blob/master/depends/INCLUDE/XFSSPI.H</a></p>\n\n<p>My problem is, I didn't find out how I can use this header on the provider (dllexport) side, since everytime I try to add <code>__declspec(dllexport)</code>:</p>\n\n<pre><code>__declspec(dllexport) HRESULT WINAPI Foobar() {\n...\n}\n</code></pre>\n\n<p>I get <code>error C2375: 'Foobar': redefinition; different linkage</code>.</p>\n\n<p>So is there a way how I can use the header file provided by the SDK or am I forced to use a def file or copy/edit function definitions?</p>\n\n<p>Best regards.</p>\n"}, {"tags": ["c++", "unicode", "string-literals"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1534376352, "post_id": 51867800, "comment_id": 90687429, "body": "Unicode is Unicode, Encoding is Encoding."}, {"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1534376931, "post_id": 51867800, "comment_id": 90687548, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 : what does that mean? Why does the encoding differ between compilers?"}, {"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1534376949, "post_id": 51867800, "comment_id": 90687556, "body": "xaxxon: updated."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534378539, "post_id": 51867800, "comment_id": 90687870, "body": "live code: <a href=\"https://godbolt.org/g/e3QkUf\" rel=\"nofollow noreferrer\">godbolt.org/g/e3QkUf</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1534379360, "post_id": 51868056, "comment_id": 90688045, "body": "That makes perfect sense. It means the debugger is wrong. What I don&#39;t now understand is why the equivalence held on gcc. (gcc 7.3.0 on Cygwin.)"}, {"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1534379431, "post_id": 51868056, "comment_id": 90688058, "body": "And NB I just reran the test to confirm gcc behaviour."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 1, "creation_date": 1534379530, "post_id": 51868056, "comment_id": 90688088, "body": "@Mohan that means the debugger is displaying the <b>raw bytes</b> of the <code>u16string</code> (which makes sense, if the debugger does not support displaying <code>char16_t</code> data as normal characters), and doing so in octal (odd, why not hex?), but I would not expect it to include the <code>u</code> prefix on such a raw string. But there is no way that <code>u16string{u&quot;\u4e07\u4e0d\u5f97\u5df2&quot;} == u16string{u&quot;\\007\\116\\015\\116\\227\\137\\362\\135&quot;}</code> should ever be true on any compiler.  If it is, that is a bug that should be reported to the compiler vendor."}, {"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1534379658, "post_id": 51868056, "comment_id": 90688124, "body": "It does include the u prefix. Now you&#39;ve pointed it out it&#39;s clear that&#39;s a bug."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1534379898, "post_id": 51868056, "comment_id": 90688178, "body": "@Mohan The debugger is likely displaying the <code>u</code> prefix because the data is <code>char16_t</code>, but then it is displaying the raw 8bit bytes instead of the native 16bit values because <code>char16_t</code> can go up to 0xFFFF (decimal 65535) so most values are simply too large to handle in octal, which has a max value of 0x1FF (decimal 511)."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 7, "last_activity_date": 1534379371, "last_edit_date": 1534379371, "creation_date": 1534378801, "answer_id": 51868056, "question_id": 51867800, "link": "https://stackoverflow.com/questions/51867800/c-portability-of-unicode-string-literals/51868056#51868056", "title": "C++: portability of Unicode string literals", "body": "<blockquote>\n  <p>I found that the Unicode literal <code>u\"\u4e07\u4e0d\u5f97\u5df2\"</code> was represented as <code>u\"\\007\\116\\015\\116\\227\\137\\362\\135\"</code></p>\n</blockquote>\n\n<p>No, actually it is not.  And here's why...</p>\n\n<p><code>u\"...\"</code> string literals are encoded as a <code>char16_t</code>-based UTF-16 encoded string on all platforms (that is what the <code>u</code> prefix is specifically meant for).  </p>\n\n<p><code>u\"\u4e07\u4e0d\u5f97\u5df2\"</code> is represented by this UTF-16 codeunit sequence:</p>\n\n<pre><code>4E07 4E0D 5F97 5DF2\n</code></pre>\n\n<p>On a little-endian system, that UTF-16 sequence is represented by this raw byte sequence:</p>\n\n<pre><code>07 4E 0D 4E 97 5F F2 5D\n</code></pre>\n\n<p>In octal, that would be represented by <code>\"\\007\\116\\015\\116\\227\\137\\362\\135\"</code> ONLY WHEN using a <strong><code>char</code>-based</strong> string (note the lack of a string prefix, or <code>u8</code> would also work for this example).</p>\n\n<p><code>u\"\\007\\116\\015\\116\\227\\137\\362\\135\"</code> is NOT a <code>char</code>-based string!  It is a <strong><code>char16_t</code>-based</strong> string, where each octal number represents a separate UTF-16 codeunit.  Thus, this string actually represents this UTF-16 codeunit sequence:</p>\n\n<pre><code>0007 004E 000D 004E 0097 005F 00F2 005D\n</code></pre>\n\n<p>That is why your two <code>u16string</code> objects are not comparing as the same string value.  Because they are really not equal.</p>\n\n<p>You can see this in action here: <a href=\"https://ideone.com/ZEabz7\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 51868056, "answer_count": 1, "score": -2, "last_activity_date": 1534379371, "creation_date": 1534376215, "last_edit_date": 1534377071, "question_id": 51867800, "link": "https://stackoverflow.com/questions/51867800/c-portability-of-unicode-string-literals", "title": "C++: portability of Unicode string literals", "body": "<p>While debugging on gcc, I found that the Unicode literal <code>u\"\u4e07\u4e0d\u5f97\u5df2\"</code> was represented as <code>u\"\\007\\116\\015\\116\\227\\137\\362\\135\"</code>. Which makes sense -- <code>\u4e07</code> is 0x4E07, and 0x4E in octal is 116. </p>\n\n<p>Now on Apple LLVM 9.1.0 on an Intel-powered Macbook, I find that that same literal is not handled as the same string, ie:</p>\n\n<pre><code>u16string{u\"\u4e07\u4e0d\u5f97\u5df2\"} == u16string{u\"\\007\\116\\015\\116\\227\\137\\362\\135\"}\n</code></pre>\n\n<p>goes from <code>true</code> to <code>false</code>. I'm still on a little-endian system, so I don't understand what's happening.</p>\n\n<p>NB. I'm not trying to use the correspondence <code>u\"\u4e07\u4e0d\u5f97\u5df2\"</code> == <code>u\"\\007\\116\\015\\116\\227\\137\\362\\135\"</code>. I just want to understand what's happening.</p>\n"}, {"tags": ["c++", "valgrind"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1534375662, "post_id": 51867713, "comment_id": 90687283, "body": "<code>printf</code> allocated some memory?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534375946, "post_id": 51867713, "comment_id": 90687345, "body": "does an empty program allocate memory?"}], "owner": {"reputation": 14, "user_id": 10231624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0900e773ed160ceb8bafb5d112788c68?s=128&d=identicon&r=PG&f=1", "display_name": "AI-developer", "link": "https://stackoverflow.com/users/10231624/ai-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1534380682, "answer_count": 0, "score": 0, "last_activity_date": 1534375414, "creation_date": 1534375414, "question_id": 51867713, "link": "https://stackoverflow.com/questions/51867713/valgrind-shows-heap-allocation-for-the-code-which-doesnt-have-any-heap-allocati", "closed_reason": "Duplicate", "title": "valgrind shows heap allocation for the code which doesn&#39;t have any heap allocation", "body": "<p>Valgrind shows heap memory allocation for the following sample code,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n  int a = 7;\n  printf(\"%d\", a);\n  return 0;\n}\n</code></pre>\n\n<p>and the summary report is,</p>\n\n<pre><code>==1825== HEAP SUMMARY:\n==1825==     in use at exit: 0 bytes in 0 blocks\n==1825==   total heap usage: 1 allocs, 1 frees, 1,024 bytes allocated\n==1825==\n==1825== All heap blocks were freed -- no leaks are possible\n==1825==\n==1825== For counts of detected and suppressed errors, rerun with: -v\n==1825== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p><strong>Sample code doesn't have any heap memory allocations.</strong></p>\n\n<p>Can anyone please explain why it happens here?\nThanks in advance.....</p>\n"}, {"tags": ["python", "c++", "ctypes"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534374986, "post_id": 51867653, "comment_id": 90687129, "body": "It&#39;s <code>restype</code>, not <code>restypes</code>, and also you&#39;re returning a dangling pointer."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534375066, "post_id": 51867653, "comment_id": 90687148, "body": "Why is that dangling? I never deleted <code>vec</code>"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534375706, "post_id": 51867653, "comment_id": 90687295, "body": "@tryingtosolve vector goes away when it&#39;s scope goes away - i.e. the end of the function - and with it, all the data it was holding.  Also, your code doesn&#39;t compile, so it&#39;s hard to make sense of what you&#39;re saying.  Are <code>v</code> and <code>vec</code> the same thing?"}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1534375784, "post_id": 51867653, "comment_id": 90687309, "body": "@xaxxon What can I do then? Store that in a native c++ array?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534375843, "post_id": 51867653, "comment_id": 90687321, "body": "@tryingtosolve no, that would go away too.   Lexical scoping is pretty fundamental in all languages.. so it seems like you&#39;re pretty far over your head here.  Whatever you do, the vector (or array or whatever) you&#39;re returning a pointer into has to live past the end of the function."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534375930, "post_id": 51867653, "comment_id": 90687342, "body": "@xaxxon Why did the post that I&#39;m linking to work? It was returning an array as well?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534376079, "post_id": 51867653, "comment_id": 90687375, "body": "@tryingtosolve because it &quot;leaks&quot; the memory from the call to new.  Heap allocations persist until they are programmatically cleaned up - they are not lexically scoped.  &quot;leaks&quot; in quotes because I&#39;m not sure if it&#39;s somehow managed elsewhere.. but it&#39;s considered to be poor form to return un-managed heap memory that is allocated in a function."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534378865, "post_id": 51867653, "comment_id": 90687933, "body": "@xaxxon just fixed my code such that it compiles. What&#39;s a viable solution? Thank you."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1534379081, "post_id": 51867653, "comment_id": 90687981, "body": "@tryingtosolve the correct way to write the code is situational and there&#39;s not enough context in your question for me to provide a suggestion."}, {"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1534379158, "post_id": 51867653, "comment_id": 90687991, "body": "@xaxxon I cannot, since the entire code is too long. I wrapped a class <code>car</code> written in C++ via ctypes. This class <code>car</code> contains an <code>std::vector</code> and I have a function that modifies this vector. In Python, after creating an instance of this class, I will call the function to modify the vector. Afterwards, I want to access the vector."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1534435747, "post_id": 51867653, "comment_id": 90714004, "body": "Just forget about Python (temporarily). Pretend your own C++ code needs to use v.data(). But you cannot place v in the same function that needs it. How would you do this?"}], "answers": [{"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 2, "last_activity_date": 1534435212, "creation_date": 1534435212, "answer_id": 51881136, "question_id": 51867653, "link": "https://stackoverflow.com/questions/51867653/passing-stdvector-from-c-to-python-via-ctypes-getting-nonsensical-values/51881136#51881136", "title": "Passing std:vector from C++ to Python via Ctypes: getting nonsensical values", "body": "<p>As mentioned in comments, your vector is a local variable and destroyed after return from the function.  One way that works is to let Python manage the memory and copy the data into it.</p>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cstring&gt;\n\n#define API __declspec(dllexport) // Windows-specific export\n\n// Must pass double[4] array...\nextern \"C\" API void returnQ(double* data) {\n    std::vector&lt;double&gt; v = {7.5, 5.5, 16.5, 8.5};\n    // Of course, you could write directly to \"data\" without the vector...\n    std::memcpy(data,v.data(),v.size() * sizeof v[0]);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>&gt;&gt;&gt; from ctypes import *\n&gt;&gt;&gt; dll = CDLL('test')\n&gt;&gt;&gt; dll.returnQ.argtypes = POINTER(c_double),\n&gt;&gt;&gt; dll.returnQ.restype = None\n&gt;&gt;&gt; data = (c_double * 4)()  # equivalent to C++ double[4]\n&gt;&gt;&gt; dll.returnQ(data)\n&gt;&gt;&gt; list(data)\n[7.5, 5.5, 16.5, 8.5]\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 1, "accepted_answer_id": 51881136, "answer_count": 1, "score": 1, "last_activity_date": 1534435212, "creation_date": 1534374812, "last_edit_date": 1534378839, "question_id": 51867653, "link": "https://stackoverflow.com/questions/51867653/passing-stdvector-from-c-to-python-via-ctypes-getting-nonsensical-values", "title": "Passing std:vector from C++ to Python via Ctypes: getting nonsensical values", "body": "<p>I was trying to follow the <a href=\"https://stackoverflow.com/a/14887649/8408902\">procedure</a> here but I'm stuck. I'm trying to pass an <code>std:vector</code> from my C++ code (wrapped in <code>extern C</code>) to Python. This is what I have:</p>\n\n<pre><code>extern 'C' {\n    double* returnQ() {\n        std::vector&lt;double&gt; v = {7.5, 5.5, 16.5, 8.5};\n        std::cout&lt;&lt;\"Print first element:\"&lt;&lt;vec[0]&lt;&lt;std::endl;\n        return v.data(); }\n}\n</code></pre>\n\n<p>This is my python code. After loading the library via <code>ctypes</code> as <code>lib</code>, I have:</p>\n\n<pre><code>def q():\n    lib.returnQ.restype = ndpointer(dtype=ctypes.c_double, shape=(4,))\n    return lib.returnQ()\n</code></pre>\n\n<p>However, when I call <code>q()</code> in Python, I get an array of random numbers. I'm not sure why?</p>\n"}, {"tags": ["c++", "c++14", "language-lawyer"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1534374857, "creation_date": 1534374857, "answer_id": 51867658, "question_id": 51867524, "link": "https://stackoverflow.com/questions/51867524/interaction-of-function-local-enum-declaration-and-adl/51867658#51867658", "title": "Interaction of function-local enum declaration and ADL", "body": "<p>This is a clang bug. From <a href=\"http://eel.is/c++draft/basic.lookup.argdep#2.3\" rel=\"nofollow noreferrer\">[basic.lookup.argdep]/2</a>:</p>\n\n<blockquote>\n  <p>The sets of namespaces and classes are determined in the following way: [...] If T is an enumeration type, its associated namespace is the innermost enclosing namespace of its declaration. If it is a class member, its associated class is the member's class; else it has no associated class.</p>\n</blockquote>\n\n<p>The local enumeration <code>Bar</code> has as its associated namespace the innermost enclosing namespace... which is <code>X</code>. Unqualified lookup on <code>getA</code> finds nothing, so we go ahead and look in all the associated namespaces of all of the arguments - the set of associated namespaces is <code>{X}</code>. Lookup there should find <code>X::getA</code>.</p>\n"}], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 51867658, "answer_count": 1, "score": 3, "last_activity_date": 1534379880, "creation_date": 1534373666, "last_edit_date": 1534379880, "question_id": 51867524, "link": "https://stackoverflow.com/questions/51867524/interaction-of-function-local-enum-declaration-and-adl", "title": "Interaction of function-local enum declaration and ADL", "body": "<p>The function in namespace X returns an enumerator from a locally defined enum class, via an auto deduced return type.  That return value is then passed to an unqualified function, and on g++ (7.3, 8.2, trunk) it finds the function in namespace X.  On clang, it gives an error for not finding the function.</p>\n\n<p>I assume it has to do with ADL and the question of whether a function-local declared enum is in the function's containing namespace.</p>\n\n<p>Which compiler is right, and why?  (Standard citation appreciated.)</p>\n\n<pre><code>namespace X {\n\n      template &lt;typename EnumT&gt;\n      EnumT getA(EnumT) {\n          return EnumT::A;\n      }\n\n      enum class Foo { B, A, C };\n\n      auto getLocalEnumerator() {\n          enum class Bar { A, B, C };\n          return Bar::C;\n      }\n}\n\nint main() {\n   auto e1 = X::Foo::C;               // unambiguously in namespace X\n   auto e2 = X::getLocalEnumerator(); // unsure what namespace this is\n\n   auto a1 = getA(e1);                // obvious use of ADL\n   auto a2 = getA(e2);                // clang: error, g++: ADL ok\n}\n</code></pre>\n\n<p>live on godbolt: <a href=\"https://godbolt.org/g/w2DhDm\" rel=\"nofollow noreferrer\">https://godbolt.org/g/w2DhDm</a></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "string", "chars"], "comments": [{"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 6, "creation_date": 1534372796, "post_id": 51867340, "comment_id": 90686654, "body": "How do you expect to put two characters into a space for one character?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1534372929, "post_id": 51867340, "comment_id": 90686690, "body": "<a href=\"https://en.cppreference.com/w/cpp/string/basic_string/insert\" rel=\"nofollow noreferrer\"><code>std::string::insert</code> should be of assistance.</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1534373154, "post_id": 51867340, "comment_id": 90686741, "body": "<a href=\"https://en.cppreference.com/w/cpp/string/basic_string/find\" rel=\"nofollow noreferrer\"><code>std::string::find</code> should be of some use</a>."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1534373345, "post_id": 51867340, "comment_id": 90686794, "body": "Did your compiler not complain about <code>&#39;1Y&#39;</code>?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1534373785, "post_id": 51867340, "comment_id": 90686891, "body": "@Borgleader: <code>&#39;1Y&#39;</code> is a valid multibyte character, though if you crank the warnings up to max, it&#39;ll complain about implicit narrowing conversion."}], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "edited": false, "score": 0, "creation_date": 1534375443, "post_id": 51867461, "comment_id": 90687236, "body": "The solution pointed to in the link suffer from the same problem as the OP&#39;s solution.  The replace family in algorithm replace character for character. A custom solution creating a modified version of the original string could be in order."}], "tags": [], "owner": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "is_accepted": false, "score": 3, "last_activity_date": 1534373240, "creation_date": 1534373240, "answer_id": 51867461, "question_id": 51867340, "link": "https://stackoverflow.com/questions/51867340/i-am-trying-to-encode-a-string-by-breaking-it-down-to-characters-c/51867461#51867461", "title": "I am trying to encode a string by breaking it down to characters c++", "body": "<p>The implementation of <code>std::string</code> is <code>std::basic_string&lt;char&gt;</code>, which means you can only use single-characters in it.</p>\n\n<p>You are making use of an illegal multi-character constant <code>'1Y'</code>. I guess your compiler warned you about that. Because he cannot insert a multi-character, the compiler chose one for you, i.e. <code>'Y'</code> in your case.</p>\n\n<p>If you want to replace chars with something else than another single-character, you should take a look at solutions such as <a href=\"https://stackoverflow.com/questions/2896600/how-to-replace-all-occurrences-of-a-character-in-string\">How to replace all occurrences of a character in string?</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1534382069, "creation_date": 1534382069, "answer_id": 51868364, "question_id": 51867340, "link": "https://stackoverflow.com/questions/51867340/i-am-trying-to-encode-a-string-by-breaking-it-down-to-characters-c/51868364#51868364", "title": "I am trying to encode a string by breaking it down to characters c++", "body": "<p>You can't replace a single-byte <code>char</code> with a multi-byte character using <code>operator[]</code>.  You need to do something more like this instead:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string str(\"Hello this is The friend\");\n    string::size_type i = 0;\n    while (i &lt; str.size())\n    {\n        if ((str[i] == 'T') || (str[i] == 't'))\n        {\n            str[i] = '1';\n            str.insert(i+1, 'Y');\n\n            // or:\n            // str.replace(i, 1, \"1Y\");\n\n            i += 2;\n        }\n        else\n            ++i;\n    }\n    cout &lt;&lt; str;\n}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string str(\"Hello this is The friend\");\n    string::size_type i = 0;\n    while ((i = str.find_first_of(\"Tt\", i)) != string::npos)\n    {\n        str[i] = '1';\n        str.insert(i+1, 'Y');\n\n        // or:\n        // str.replace(i, 1, \"1Y\");\n\n        i += 2;\n    }\n    cout &lt;&lt; str;\n}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main()\n{\n    string str(\"Hello this is The friend\");\n    ostringstream oss;\n    for (string::size_type i = 0; i &lt; s.size(); ++i)\n    {\n        if ((s[i] == 'T') || (s[i] == 't'))\n            oss &lt;&lt; \"1Y\";\n        else\n            oss &lt;&lt; s[i];\n    }\n    cout &lt;&lt; oss.rdbuf();\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8722111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95831bc01d44344a8211e0bbdf85fdea?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeWaterController", "link": "https://stackoverflow.com/users/8722111/coffeewatercontroller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1534411426, "answer_count": 2, "score": -2, "last_activity_date": 1534382069, "creation_date": 1534372335, "last_edit_date": 1534375333, "question_id": 51867340, "link": "https://stackoverflow.com/questions/51867340/i-am-trying-to-encode-a-string-by-breaking-it-down-to-characters-c", "closed_reason": "Not suitable for this site", "title": "I am trying to encode a string by breaking it down to characters c++", "body": "<p>I am trying to change \"Hello this is The friend\" to \"Hello 1Yhis is 1Yhe friend\"</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    string str(\"Hello this is The friend\");\n    for ( int i = 0 ; i &lt; str.size(); i++)\n    {\n        if (str[i] == 'T')\n        {\n            str[i] = '1Y';\n        }else if (str[i] == 't')\n        {\n            str[i] = '1Y';\n        }\n    }\n    cout&lt;&lt;str;\n}\n</code></pre>\n\n<p>The output is \"Hello Yhis is Yhe friend\".</p>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 3, "creation_date": 1534372094, "post_id": 51867254, "comment_id": 90686501, "body": "<code>delete</code>ing automatically allocated memory invokes undefined behaviour. One <code>delete</code> for every <code>new</code>, no more; no less."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534372126, "post_id": 51867254, "comment_id": 90686508, "body": "All news should match up with deletes. You cannot have one without the other."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1534372717, "post_id": 51867254, "comment_id": 90686637, "body": "Closely related/duplicate <a href=\"https://stackoverflow.com/questions/4355468/is-it-possible-to-delete-a-non-new-object\">Is it possible to delete a non-new object?</a>. TL;DR: you can delete a pointer to an Automatic allocation, but the program will not survive the experience unscathed."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1534373546, "post_id": 51867254, "comment_id": 90686837, "body": "You can only <code>delete</code> objects that were created with <code>new</code>."}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 7830114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a359a1bb741e3bc2bfa56ea059da84?s=128&d=identicon&r=PG&f=1", "display_name": "not an alien", "link": "https://stackoverflow.com/users/7830114/not-an-alien"}, "edited": false, "score": 0, "creation_date": 1534373609, "post_id": 51867291, "comment_id": 90686848, "body": "Thanks. Am I correct in assuming <code>p_base</code> would also be deleted at the same time, so I need not worry about a dangling pointer?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534373903, "post_id": 51867291, "comment_id": 90686915, "body": "<code>p_base</code> will not be deleted and it should not be deleted. When the scope ends <code>p_base</code> no longer exists. This is different than freeing dynamic memory."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 567, "user_id": 7830114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a359a1bb741e3bc2bfa56ea059da84?s=128&d=identicon&r=PG&f=1", "display_name": "not an alien", "link": "https://stackoverflow.com/users/7830114/not-an-alien"}, "edited": false, "score": 1, "creation_date": 1534374021, "post_id": 51867291, "comment_id": 90686945, "body": "@Jake you may have your terminology mixed up. A dangling pointer is what happens when what&#39;s being pointed at vanishes out from underneath a pointer, leaving the pointer pointing at invalid memory. Sometimes because this is because a pointer was assigned an Automatic variable that subsequently went out of scope. You seem to be concerned with a memory leak. Automatic storage cannot be leaked. The compiler ensures that."}], "tags": [], "owner": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "is_accepted": true, "score": 2, "last_activity_date": 1534372068, "creation_date": 1534372068, "answer_id": 51867291, "question_id": 51867254, "link": "https://stackoverflow.com/questions/51867254/assertion-error-attempting-to-delete-base-pointer-to-derived-object/51867291#51867291", "title": "Assertion error attempting to delete base pointer to derived object", "body": "<p>The problem is that your locally constructed object <code>d</code> will be deleted automatically at the end of its scope, in your case when <code>return 0</code> is called. But at that time, you already deleted <code>p_base</code> which points to the same object. Hence the object is deleted twice.</p>\n\n<p>Your problem has nothing to do with inheritance. It should arise even with objects of the same class.</p>\n"}], "owner": {"reputation": 567, "user_id": 7830114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a359a1bb741e3bc2bfa56ea059da84?s=128&d=identicon&r=PG&f=1", "display_name": "not an alien", "link": "https://stackoverflow.com/users/7830114/not-an-alien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 51867291, "answer_count": 1, "score": 0, "last_activity_date": 1534372068, "creation_date": 1534371765, "question_id": 51867254, "link": "https://stackoverflow.com/questions/51867254/assertion-error-attempting-to-delete-base-pointer-to-derived-object", "title": "Assertion error attempting to delete base pointer to derived object", "body": "<p>Whilst studying inheritance in C++, I have learned that a base class intended for polymorphic behavior should implement it's destructor as <code>virtual</code></p>\n\n<p>I thought I understood how to apply this well, but I have encountered a small problem which I do not understand. </p>\n\n<p>Given the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Base\n{\n    Base() { std::cout &lt;&lt; \"Base ctor called\\n\"; };\n    virtual ~Base() { std::cout &lt;&lt; \"Base dtor called\\n\"; };\n};\n\nstruct Derived : Base\n{\n    Derived() : Base() { std::cout &lt;&lt; \"Derived ctor called\\n\"; }\n    ~Derived() { std::cout &lt;&lt; \"Derived dtor called\\n\"; };\n};\n\nint main()\n{\n    Derived d;\n    Base *p_base = &amp;d;\n\n    delete p_base; //Problem here?\n\n    return 0;\n}\n</code></pre>\n\n<p>Output is as expected:</p>\n\n<pre><code>Base ctor called\nDerived ctor called\nDerived dtor called\nBase dtor called\n</code></pre>\n\n<p>However, a <code>_CrtisValidHeapPointer(block)</code> assertion error occurs.</p>\n\n<p>Everything works fine if <code>p_base</code> points directly to a new <code>Derived</code> object i.e. <code>Base *p_base = new Derived();</code></p>\n\n<p>What is different here? </p>\n\n<p>Kind regards</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 2, "creation_date": 1534371925, "post_id": 51867246, "comment_id": 90686457, "body": "Depending on how much work you actually do when building your string, I would <i>guess</i> that calling <code>std::ios_base::sync_with_stdio(false)</code> has a bigger effect."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1534371953, "post_id": 51867246, "comment_id": 90686465, "body": "For starters, use <code>\\n</code> instead of <code>endl</code> and try untying <code>cout</code> from <code>cin</code>. If that helps, the problem wasn&#39;t multi threading."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1534372204, "post_id": 51867246, "comment_id": 90686525, "body": "@BaummitAugen: the <code>tie()</code> <i>from</i> <code>std::cin</code> to <code>std::cout</code> only matter when <i>reading</i>: prior to reading <code>std::cin</code> flushes the <code>tie()</code>d stream. If only output is used the <code>tie()</code> shouldn&#39;t matter. Not using <code>std::endl</code> is reasonable, though (actually: <a href=\"https://kuhllib.com/2012/01/14/stop-excessive-use-of-stdendl/\" rel=\"nofollow noreferrer\">it is never reasonable to use <code>std::endl</code></a>)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1534372431, "post_id": 51867246, "comment_id": 90686575, "body": "@DietmarK&#252;hl Ah right, my bad. Thanks."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534372637, "post_id": 51867246, "comment_id": 90686615, "body": "It has been the subject of many arguments in my career whether one should use the C sprintf and its ilk for logging as opposed to sticking with streams. My own opinion through profiling and experience is that sprintf is indeed much faster, although it has some error handling and maintainablity concerns that one should familiarize one&#39;s self with, particularly when creating one&#39;s own wrapper using variadic arguments. If you were on my team, I would attempt to persuade you to not use streams and instead use C constructs for logging where perfomance matters."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534372853, "post_id": 51867246, "comment_id": 90686667, "body": "@ChristopherPisz I would strongly recommend you don&#39;t do that. The C APIs are really not nice (easy to cause UB, for example). Use one of the much faster formatting and/or logging libraries already out there, such as <a href=\"https://github.com/fmtlib/fmt\" rel=\"nofollow noreferrer\">fmt</a>"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1534372954, "post_id": 51867246, "comment_id": 90686699, "body": "@ChristopherPisz: ... and I would do the opposite! I&#39;m aware that streams are easy to use badly but on the positive side the misuses only cause the program to go slower than possible rather than resulting in memory corruption."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1534373070, "post_id": 51867246, "comment_id": 90686722, "body": "@justin I was not aware there was a text formatting proposal in the works. I can only hope they give us a more performant standard option in the future. I shall profile this library you proposed. Thanks!"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1534373474, "post_id": 51867246, "comment_id": 90686821, "body": "@Dietmar I haven&#39;t had a case that I investigated were I could say there was any &quot;misuse&quot;, where streams could compete with the C APIs. I argued for streams for 10 years, but had to conform given the evidence. I accepted the error prone-ed-ness as a trade off. If you could provide something to profile, where they are used &quot;correctly&quot; and give equal or better results while formatting primitive types, I&#39;d be very interested. I hate variadic arguments and the fact that you can pass an Elephant when an integer is expected."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534375901, "post_id": 51867246, "comment_id": 90687336, "body": "@ChristopherPisz: I haven&#39;t run things since quite a while and it seems things slightly changed. At <a href=\"https://github.com/dietmarkuehl/cputube\" rel=\"nofollow noreferrer\">cputube</a> I got a rather naive approach for writing an array of <code>int</code>s using different approaches. With gcc/libstdc++ I don&#39;t see substantial difference between the basic IOStreams and stdio approaches. clang/libc++ is known to have a <i>bad</i> implementation of IOStreams as is Visual Studio with its default library. I haven&#39;t tried my <a href=\"http://dietmar-kuehl.de/cxxrt/\" rel=\"nofollow noreferrer\">own implementation</a> and I guess it doesn&#39;t even compile but I&#39;d expect it to be fastest."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534376028, "post_id": 51867246, "comment_id": 90687364, "body": "@ChristopherPisz: I tried the run just now on a Macbook and a Raspberry PI (neither ideal platforms) but the results are consistent with what I remember from a few years back where I tried it on more reasonable systems, too. I may be doing something really silly to make IOStreams not look entirely bad but I&#39;m happy to learn."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1534432932, "post_id": 51867246, "comment_id": 90712428, "body": "@DietmarK&#252;hl I&#39;d like to discuss these comparisons some, but I don&#39;t see an option on S.O. to message you. Where can we have some dialog back and forth, since comp.lang.C++ is gone?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1534448141, "post_id": 51867246, "comment_id": 90720034, "body": "@ChristopherPisz: obviously I would like to discuss on comp.lang.c++**.moderated** (as I am/was a moderator of this bewsgroup) but it doesn\u2019t exist anymore. On SO we could discuss on the chats which can work reasonably well: either C++Longe - an open chat where other also could be involved (but we\u2019d interfere with their conversation) or a custom chat. I don\u2019t know whether these are open. We\u2019d need to pick some time, though (for me some time this Friday to Monday would be good  as I\u2019ll not be at work). ... and I get asked to move the discussion to a chat already! :-)"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534448283, "post_id": 51867246, "comment_id": 90720083, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/178162/discussion-between-dietmar-kuhl-and-christopher-pisz\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 9069780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bf2ad1391fadfaac120f3bb4e625ef?s=128&d=identicon&r=PG&f=1", "display_name": "Desperado17", "link": "https://stackoverflow.com/users/9069780/desperado17"}, "edited": false, "score": 0, "creation_date": 1534451594, "post_id": 51867332, "comment_id": 90721388, "body": "Thank you, I shall take both suggestions."}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 4, "last_activity_date": 1534375131, "last_edit_date": 1534375131, "creation_date": 1534372259, "answer_id": 51867332, "question_id": 51867246, "link": "https://stackoverflow.com/questions/51867246/speed-up-stdcout-logging-with-stringstreams/51867332#51867332", "title": "Speed up std::cout logging with stringstreams", "body": "<blockquote>\n  <p>Can I in theory reduce lock contention by assembling the string into a std::stringstream before entering the mutex, then send the already assembled string to std::cout?</p>\n</blockquote>\n\n<p>Absolutely. <code>operator&lt;&lt;</code> has to do some work to format the types passed in. Assembling the string into a <code>std::stringstream</code> means that you do all that work up front and just have to write out the assembled string to <code>std::cout</code>, meaning you spend less time under the lock.</p>\n\n<p>However, note that <code>ss.str()</code> returns a <code>std::string</code> by value. This means that you are copying the string inside the critical region. It would be better to write <code>std::cout &lt;&lt; ss.rdbuf()</code> and write the underlying string inside the <code>std::stringstream</code> directly.</p>\n\n<p>Beyond that, you'll want to reduce the time spent outputting to <code>std::cout</code> as much as possible. If you never call any C stdio functions, you should probably call <code>std::ios_base::sync_with_stdio(false)</code></p>\n\n<p>Bringing this together:</p>\n\n<pre><code>// Near the beginning of your program:\nstd::ios_base::sync_with_stdio(false);\n\n// ...\n\n{\n    // Prefer using ostringstream if you never need to read from it\n    std::ostringstream ss;\n    // std::endl is never needed. Use '\\n' instead. If you want to flush,\n    // explicitly write `ss &lt;&lt; '\\n' &lt;&lt; std::flush`. For stringstreams, I believe\n    // it doesn't matter, but it's good to get into the habit of doing this\n    ss &lt;&lt; stringA &lt;&lt; \" 1 \" &lt;&lt; 5  &lt;&lt; 'C' &lt;&lt; '\\n';\n    std::lock_guard&lt;std::mutex&gt; lock(mutex);\n    std::cout &lt;&lt; ss.rdbuf();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1534372652, "post_id": 51867345, "comment_id": 90686621, "body": "This often doesn&#39;t work, though. Sometimes you need formatted output, and even the example in the OP outputs the integer <code>5</code>, which requires some sort of formatted output."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1534373022, "post_id": 51867345, "comment_id": 90686711, "body": "@Justin: <code>str.append(std::to_string(5));</code>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1534374266, "post_id": 51867345, "comment_id": 90686991, "body": "@DietmarK&#252;hl Yes, but note that does require creating a <code>std::string</code> just for that (doesn&#39;t allocate due to SSO, but with large enough ints, it could). It also doesn&#39;t work in general for arbitrary types."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1534378591, "post_id": 51867345, "comment_id": 90687882, "body": "It&#39;s a mistake from the Q not yours, but you don&#39;t need a to lock a mutex; all major C++ library implementations have <code>std::cout</code> lock internally. Solid point about using strings being potentially faster though: as well as locales there&#39;s heavy use of virtual dispatch.  Justin&#39;s right about formatted output though - setting precisions, widths and other iomanip stuff in particular."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1534380381, "post_id": 51867345, "comment_id": 90688271, "body": "@TonyDelroy I removed the mutex. it was actually needed in the first snippet of the OP as he wanted to prevent from several threads to print into the same line."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1534380541, "post_id": 51867345, "comment_id": 90688301, "body": "@DavidHaim: oh true - I didn&#39;t look back that far in the Q.  Cheers"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1534381259, "post_id": 51867345, "comment_id": 90688429, "body": "@DavidHaim I&#39;m not convinced that removing the mutex is valid. It appears to me that you might get interleaved characters if you do so: <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio</a>"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 1, "last_activity_date": 1534380290, "last_edit_date": 1534380290, "creation_date": 1534372379, "answer_id": 51867345, "question_id": 51867246, "link": "https://stackoverflow.com/questions/51867246/speed-up-stdcout-logging-with-stringstreams/51867345#51867345", "title": "Speed up std::cout logging with stringstreams", "body": "<p>I would drop string streams altogether in favor of <code>std::string::append</code> and <code>std::to_string</code>. streams tend to drag a lot of locale-oriented stuff and make the implementation heavier than the raw string operations. I would go with  this:</p>\n\n<pre><code> std::string str;\n str.append(stringA).append(\" 1 \").append('C').append('\\n');\n std::cout &lt;&lt; str;\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 9069780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bf2ad1391fadfaac120f3bb4e625ef?s=128&d=identicon&r=PG&f=1", "display_name": "Desperado17", "link": "https://stackoverflow.com/users/9069780/desperado17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 51867332, "answer_count": 2, "score": 3, "last_activity_date": 1534393480, "creation_date": 1534371729, "last_edit_date": 1534393480, "question_id": 51867246, "link": "https://stackoverflow.com/questions/51867246/speed-up-stdcout-logging-with-stringstreams", "title": "Speed up std::cout logging with stringstreams", "body": "<p>I'm trying to speed up a multithreaded program that prints a lot to <code>std::cout</code>. Most of the stuff that is printed are strings puzzled together from several variables (strings, numbers etc). Access to <code>std::cout</code> is protected by a mutex to prevent printouts from several threads from getting intermingled in the manner of:</p>\n\n<pre><code>{\n    std::lock_guard&lt;std::mutex&gt; lock(mutex);\n    std::cout &lt;&lt; stringA &lt;&lt; \" 1 \" &lt;&lt; 5  &lt;&lt; 'C' &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Measurements showed that several threads spend a lot of time waiting for the mutex as <code>std::cout</code> seems to take some time for large and complex strings.</p>\n\n<p>My question now is:</p>\n\n<p>Can I in theory reduce lock contention by assembling the string into a <code>std::stringstream</code> before entering the mutex, then send the already assembled string to <code>std::cout</code>? As in: </p>\n\n<pre><code>{\n    std::stringstream ss;\n    ss &lt;&lt; stringA &lt;&lt; \" 1 \" &lt;&lt; 5  &lt;&lt; 'C' &lt;&lt; std::endl;\n    std::lock_guard&lt;std::mutex&gt; lock(mutex);\n    std::cout &lt;&lt; ss.str();\n}\n</code></pre>\n\n<p>If yes, can this be improved further?</p>\n"}, {"tags": ["c++", "qt", "mailto"], "answers": [{"tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 4, "last_activity_date": 1534372652, "last_edit_date": 1534372652, "creation_date": 1534372134, "answer_id": 51867303, "question_id": 51866978, "link": "https://stackoverflow.com/questions/51866978/qt-use-mailto-to-open-users-email-client-fails-for-gmail/51867303#51867303", "title": "Qt: Use &#39;mailto:&#39; to open user&#39;s email client fails for gmail", "body": "<p>This is actually not a <em>Qt</em> related issue. The problem is in the <em>HTML</em> code.</p>\n\n<p>According to <a href=\"https://stackoverflow.com/a/21046049/5366641\">this answer</a>, you should change <code>&amp;subject</code> to <code>?subject</code> in order to make it work.</p>\n\n<p>So your code should be:</p>\n\n<pre><code>QDesktopServices::openUrl(QUrl(\"mailto:\" + to + \"?subject=\" + subject + \"&amp;body=\" + body, QUrl::TolerantMode));\n</code></pre>\n\n<p>I've just tested it with <em>Qt 5.10.0</em> and <em>Chrome 68.0.3440.106</em> and it works.</p>\n"}], "owner": {"reputation": 3171, "user_id": 843315, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/jdgM0.png?s=128&g=1", "display_name": "Vern Jensen", "link": "https://stackoverflow.com/users/843315/vern-jensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 51867303, "answer_count": 1, "score": 3, "last_activity_date": 1540716185, "creation_date": 1534370046, "last_edit_date": 1540716185, "question_id": 51866978, "link": "https://stackoverflow.com/questions/51866978/qt-use-mailto-to-open-users-email-client-fails-for-gmail", "title": "Qt: Use &#39;mailto:&#39; to open user&#39;s email client fails for gmail", "body": "<p>I use Qt's openUrl() with a 'mailto' link to open the user's email client, as the top answer <a href=\"https://stackoverflow.com/questions/28674805/open-default-mail-app-from-within-qt-with-some-html\">here</a> demonstrates. This works fine for Outlook, but if the user's email client is Chrome configured to open gmail when it receives a mailto: link, the entire to, subject, and body all end up in the 'to' field of the email.</p>\n\n<pre><code>QDesktopServices::openUrl(QUrl(\"mailto:\" + to + \"&amp;subject=\" + subject + \"&amp;body=\" + body, QUrl::TolerantMode));\n</code></pre>\n\n<p>I have tried first encoding the subject and body, but this has not helped. Any ideas how to either fix this, or for an alternate method? (Using Qt 5.9.5, but this affected former versions such as 5.7.1 as well.)</p>\n"}, {"tags": ["c++", "qt", "valgrind"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1534395429, "post_id": 51866961, "comment_id": 90691152, "body": "Can you run valgrind for, say, /bin/ls, from beaglebone command line?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1534395676, "post_id": 51866961, "comment_id": 90691214, "body": "As for assert, check the source, ideally add github (or what ever) link to the line in the question. Why does fd need to be 2? It might be related to the other errors."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1534396043, "post_id": 51866961, "comment_id": 90691320, "body": "Oh, and I presume that 10.0.2.15 is your PC? Are you sure there&#39;s no firewall or something? You could test with netcat/telnet."}, {"owner": {"reputation": 798, "user_id": 7926069, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/676fa367a40645d604de75ea6a7c3681?s=128&d=identicon&r=PG&f=1", "display_name": "Cobalt", "link": "https://stackoverflow.com/users/7926069/cobalt"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1534435311, "post_id": 51866961, "comment_id": 90713755, "body": "@hyde valgrind works properly from the beaglebone via ssh, but when I use it on the beaglebone I don&#39;t attempt to redirect the logging output. I have a sneaking suspicion that it fails in Qt because of the way its trying to log, but I don&#39;t see where to change it. And yes 10.0.2.15 is my PC, which is an ubuntu virtual box"}, {"owner": {"reputation": 798, "user_id": 7926069, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/676fa367a40645d604de75ea6a7c3681?s=128&d=identicon&r=PG&f=1", "display_name": "Cobalt", "link": "https://stackoverflow.com/users/7926069/cobalt"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1534435604, "post_id": 51866961, "comment_id": 90713918, "body": "@hyde as for the assert, my best guess that after failing to log to the network socket it tries to log to a file descriptor is if I had specified --log-fd=2 in the valgrind call, but I really don&#39;t know. I have no idea why it needs to be 2, I guess I&#39;ll look through the valgrind source"}, {"owner": {"reputation": 103, "user_id": 2023530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buY49.jpg?s=128&g=1", "display_name": "Hoseyn Heydari", "link": "https://stackoverflow.com/users/2023530/hoseyn-heydari"}, "edited": false, "score": 0, "creation_date": 1543674906, "post_id": 51866961, "comment_id": 94008046, "body": "<a href=\"https://stackoverflow.com/questions/45531851/valgrind-in-qt-creator\">This</a> question have an appropriate answer."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 2023530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buY49.jpg?s=128&g=1", "display_name": "Hoseyn Heydari", "link": "https://stackoverflow.com/users/2023530/hoseyn-heydari"}, "edited": false, "score": 0, "creation_date": 1543599603, "post_id": 53042862, "comment_id": 93990357, "body": "How did you remove these options for QtCreator?"}, {"owner": {"reputation": 2541, "user_id": 937223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a73c1c55edb8d12f9deafede413e1369?s=128&d=identicon&r=PG", "display_name": "Marc Van Daele", "link": "https://stackoverflow.com/users/937223/marc-van-daele"}, "reply_to_user": {"reputation": 103, "user_id": 2023530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buY49.jpg?s=128&g=1", "display_name": "Hoseyn Heydari", "link": "https://stackoverflow.com/users/2023530/hoseyn-heydari"}, "edited": false, "score": 0, "creation_date": 1543655491, "post_id": 53042862, "comment_id": 94003563, "body": "I guess I ran valgrind from the command line, not from within QtCreator."}], "tags": [], "owner": {"reputation": 2541, "user_id": 937223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a73c1c55edb8d12f9deafede413e1369?s=128&d=identicon&r=PG", "display_name": "Marc Van Daele", "link": "https://stackoverflow.com/users/937223/marc-van-daele"}, "is_accepted": false, "score": 0, "last_activity_date": 1540806889, "creation_date": 1540806889, "answer_id": 53042862, "question_id": 51866961, "link": "https://stackoverflow.com/questions/51866961/how-to-use-valgrind-with-qt-creator-to-debug-a-remote-application/53042862#53042862", "title": "How to use Valgrind with Qt Creator to debug a remote application?", "body": "<p>Removing the options <code>xml-socket</code>, <code>log-socket</code> and <code>xml=yes</code> worked for me.  It removed the warnings and resolved the assertion.</p>\n"}], "owner": {"reputation": 798, "user_id": 7926069, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/676fa367a40645d604de75ea6a7c3681?s=128&d=identicon&r=PG&f=1", "display_name": "Cobalt", "link": "https://stackoverflow.com/users/7926069/cobalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1024, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540806889, "creation_date": 1534369943, "last_edit_date": 1592644375, "question_id": 51866961, "link": "https://stackoverflow.com/questions/51866961/how-to-use-valgrind-with-qt-creator-to-debug-a-remote-application", "title": "How to use Valgrind with Qt Creator to debug a remote application?", "body": "<p>I have a c++ app that I am developing in Qt Creator (Qt Creator 4.7.0, Qt version 5.2.1). The app runs on a beaglebone (debian). I am debugging the app using Qt Creator's remote debugging.</p>\n<p>The app has some memory issues, so I am trying to use Valgrind to diagnose them. Whenever I start a Memcheck analysis from Qt Creator, all it outputs is:</p>\n<blockquote>\n<p>16:22:58: /usr/local/bin/valgrind --child-silent-after-fork=yes --xml-socket=10.0.2.15:38409 --log-socket=10.0.2.15:43999 --xml=yes --smc-check=all --tool=memcheck --gen-suppressions=all --track-origins=yes --leak-check=full --num-callers=25 --vgdb=yes --vgdb-error=0 /home/debian/MyApp</p>\n<p>==28159== Failed to connect to logging server '10.0.2.15:37567'.</p>\n<p>==28159== Logging messages will be sent to stderr instead.</p>\n<p>==28159== Failed to connect to XML logging server '10.0.2.15:39405'.</p>\n<p>==28159== XML output will be sent to stderr instead.</p>\n<p>valgrind: m_libcprint.c:384 (prepare_sink_socket): Assertion 'sink-&gt;fd\n== 2' failed.</p>\n<p>16:27:13: Analyzing finished.</p>\n</blockquote>\n<p>To address the first two errors, I would like to change the call to valgrind to make the logging write to a file instead. However, I cannot find where to change the call that Qt Creator makes to valgrind. Tools-&gt;Options-&gt;Analyzer-&gt;Valgrind doesn't seem to allow me to change the logging behavior.</p>\n<p>I have no idea what is causing the last error. Qt documentation makes it seem like all I should have to do is press go and it should work.</p>\n<p>Any help is appreciated!</p>\n"}, {"tags": ["c++", "arrays", "vector"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1534368722, "post_id": 51866708, "comment_id": 90685539, "body": "<i>this function just deletes t but I want to delete t completely so that if there are strings in t that are in s the strings in s will also be deleted</i> What?  Can you give some sample input and output so we can better follow along with what you are trying to accomplish?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1534368966, "post_id": 51866708, "comment_id": 90685611, "body": "A string doesn&#39;t contain strings; it normally contains characters. Do you mean you want the characters in one that are not present in the other? Or do you want to parse each string into sub-strings (e.g., words) then generate a list of the sub-strings in one that aren&#39;t present in the other?"}, {"owner": {"reputation": 1, "user_id": 10226412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sZwTYbD2chg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qR-81lPo2GbTLz_zZBNFOUD8P17A/mo/photo.jpg?sz=128", "display_name": "Kwaku Dabanka", "link": "https://stackoverflow.com/users/10226412/kwaku-dabanka"}, "edited": false, "score": 0, "creation_date": 1534369249, "post_id": 51866708, "comment_id": 90685695, "body": "for example is s is I love Houston and Texas and T is I texas. I would like to completely delete t from the array to print love Houston"}, {"owner": {"reputation": 1, "user_id": 10226412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sZwTYbD2chg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qR-81lPo2GbTLz_zZBNFOUD8P17A/mo/photo.jpg?sz=128", "display_name": "Kwaku Dabanka", "link": "https://stackoverflow.com/users/10226412/kwaku-dabanka"}, "edited": false, "score": 0, "creation_date": 1534369298, "post_id": 51866708, "comment_id": 90685717, "body": "I am not trying to do it by character. I want to do it by string in the array"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1534369435, "post_id": 51866708, "comment_id": 90685762, "body": "@KwakuDabanka <code>for(auto i=0; i &lt;= arr.size(); i++)</code> -- Using <code>&lt;=</code> in a loop is almost always wrong.  In this case, you access an out-of-bounds entry."}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 2, "creation_date": 1534369494, "post_id": 51866708, "comment_id": 90685787, "body": "C++ strings and vectors have no concept of English words.  As far as the compiler is concerned <code>s</code> and <code>t</code> are nothing more than ordered collections of characters.  If you want to treat them as a collection of words, you will have to write the necessary code to take a sentence such as &quot;I love Houston and Texas&quot; and break it into separate words yourself."}, {"owner": {"reputation": 1, "user_id": 10226412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sZwTYbD2chg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qR-81lPo2GbTLz_zZBNFOUD8P17A/mo/photo.jpg?sz=128", "display_name": "Kwaku Dabanka", "link": "https://stackoverflow.com/users/10226412/kwaku-dabanka"}, "edited": false, "score": 0, "creation_date": 1534369705, "post_id": 51866708, "comment_id": 90685865, "body": "s and t are input strings i pushed into a vector. I would like for my vector to output the array with all the strings except for those in t. so if t has elements in s those strings/elements are also deleted"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1534369862, "post_id": 51866708, "comment_id": 90685917, "body": "@KwakuDabanka <i>This function just deletes t, but I want to delete t completely so that if there are strings in t that are in s the strings in s will also be deleted.</i> -- Right, and doing such requires much more sophistication than your attempt.  That&#39;s the point that others are trying to make -- you can&#39;t merely take your code and give it a tweak here or there."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1534370255, "post_id": 51866708, "comment_id": 90686035, "body": "Given your title, this can be done by breaking up the sentence into individual words, storing those words in a container.  Then use <code>std::set_difference</code> on the two containers of words to get the words that are in one but not the other.  There is no need to <code>erase()</code> or delete words."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1534370336, "creation_date": 1534370336, "answer_id": 51867026, "question_id": 51866708, "link": "https://stackoverflow.com/questions/51866708/i-have-a-function-returning-a-vector-of-strings-it-takes-two-strings-and-is-to/51867026#51867026", "title": "I have a function returning a vector of strings. It takes two strings and is to return the strings in one that are missing in the other", "body": "<p>Based on the name <code>missingWords</code>, I'm going to guess that you want to take each input string, and tokenize it into words. Then you want to create an output that contains all the words present in one that aren't present in the other.</p>\n\n<p>If that's correct, we might consider something like this:</p>\n\n<pre><code>std::vector&lt;std::string&gt; missingWords(std::string const &amp;a, std::string const &amp;b)\n{\n    std::istringstream parse_a(a);\n    std::vector&lt;std::string&gt; words_a(std::istream_iterator&lt;std::string&gt;(parse_a), {});\n\n    std::istringstream parse_b(b);\n    std::vector&lt;std::string&gt; words_b(std::istream_iterator&lt;std::string&gt;(parse_b), {});\n\n    std::sort(words_a.begin(), words_a.end());\n    std::sort(words_b.begin(), words_b.end());\n\n    std::vector&lt;std::string&gt; ret;\n    std::set_difference(words_a.begin(), words_a.end(), \n                        words_b.begin(), words_b.end(),\n                        std::back_inserter(ret));\n    return ret;\n}\n</code></pre>\n\n<p>So, we start by breaking each string up into words. Then we sort the words in each vector. Then we find the difference between the two.</p>\n\n<p>Note that as it stands right now, if one string contains two copies of a word, and the other contains only one copy of that word, this will show that word in the list of differences.</p>\n\n<p>One easy way to eliminate that would be to use an <code>std::set</code> instead of an <code>std::vector</code> (and this lets us eliminate the sort as well):</p>\n\n<pre><code>std::vector&lt;std::string&gt; missingWords(std::string const &amp;a, std::string const &amp;b)\n{\n    std::istringstream parse_a(a);\n    std::set&lt;std::string&gt; words_a(std::istream_iterator&lt;std::string&gt;(parse_a), {});\n\n    std::istringstream parse_b(b);\n    std::set&lt;std::string&gt; words_b(std::istream_iterator&lt;std::string&gt;(parse_b), {});\n\n    std::vector&lt;std::string&gt; ret;\n    std::set_difference(words_a.begin(), words_a.end(), \n                        words_b.begin(), words_b.end(),\n                        std::back_inserter(ret));\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10226412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sZwTYbD2chg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qR-81lPo2GbTLz_zZBNFOUD8P17A/mo/photo.jpg?sz=128", "display_name": "Kwaku Dabanka", "link": "https://stackoverflow.com/users/10226412/kwaku-dabanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 51867026, "answer_count": 1, "score": -3, "last_activity_date": 1534370336, "creation_date": 1534368549, "last_edit_date": 1534368959, "question_id": 51866708, "link": "https://stackoverflow.com/questions/51866708/i-have-a-function-returning-a-vector-of-strings-it-takes-two-strings-and-is-to", "title": "I have a function returning a vector of strings. It takes two strings and is to return the strings in one that are missing in the other", "body": "<pre><code>vector&lt;string&gt; missingWords(string s, string t) {\n    //new array to hold s and t\n    vector&lt;string&gt; arr;\n    arr.push_back(s);\n    arr.push_back(t);\n    //loop through vector\n    for(auto i=0; i &lt;= arr.size(); i++)\n        //erase t\n        arr.erase(remove(arr.begin(), arr.end(), t), arr.end());\n    return arr;\n}\n</code></pre>\n\n<p>This function just deletes <code>t</code>, but I want to delete <code>t</code> completely so that if there are strings in <code>t</code> that are in <code>s</code> the strings in <code>s</code> will also be deleted.</p>\n"}, {"tags": ["c++", "struct", "constructor", "initialization", "parameter-passing"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1534366828, "post_id": 51866316, "comment_id": 90684869, "body": "Unfortunately you have picked a bad example for your question.  In general the answer to your question is yes but in your specific example it is no as  the length of a array must be a compile time constant.  Also, I&#39;m not sure what you expect <code>std::string (&amp;strings)[N]</code> to be but if it is an array of references then that is also illegal."}, {"owner": {"reputation": 133, "user_id": 6539923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589520181347438/picture?type=large", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/6539923/jonathan-lee"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1534367059, "post_id": 51866316, "comment_id": 90684966, "body": "@NathanOliver Array of strings? I need to be able to use that specific struct member through a pointer like <code>((struct myStruct *) structptr-&gt;strings)[15]</code> or something similar. I&#39;m not too familiar."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1534367137, "post_id": 51866316, "comment_id": 90684997, "body": "If you want to have array of strings, you should use <code>std::array&lt;std::string, SIZE&gt;</code> - note there is no references here."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1534367209, "post_id": 51866316, "comment_id": 90685026, "body": "Oh, you want a reference to an array of strings, got it.  I was thinking you were trying to make an array of references to strings."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1534367275, "post_id": 51866316, "comment_id": 90685045, "body": "And, if you want a reference to array of strings, keep in mind that having a reference as a class member, while allowed, is not necessarily the greatest idea. You might be better of with a (non-owning) pointer"}, {"owner": {"reputation": 133, "user_id": 6539923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589520181347438/picture?type=large", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/6539923/jonathan-lee"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1534367701, "post_id": 51866316, "comment_id": 90685213, "body": "@SergeyA Well, I just put the reference there because I mean that&#39;s how people usually grab a string (not a copy, as used with something like <code>std::string strings[N]</code>). I personally don&#39;t need to change anything in it, so I could even do a <code>const</code> keyword; I just need to be able to read from it like regular arrays from a pointer to the structure."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6539923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589520181347438/picture?type=large", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/6539923/jonathan-lee"}, "edited": false, "score": 0, "creation_date": 1534366855, "post_id": 51866364, "comment_id": 90684882, "body": "Yeah, I figured. Are templates the best way?"}, {"owner": {"reputation": 161, "user_id": 9260020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f709479154c250e6f3a7f0314eeb608?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/9260020/karl"}, "edited": false, "score": 0, "creation_date": 1534367317, "post_id": 51866364, "comment_id": 90685059, "body": "Assuming you wanted the reference to an array of strings, a size template parameter is the only way."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 133, "user_id": 6539923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589520181347438/picture?type=large", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/6539923/jonathan-lee"}, "edited": false, "score": 1, "creation_date": 1534367706, "post_id": 51866364, "comment_id": 90685219, "body": "@JonathanLee, I don&#39;t know what would work best for your needs, an array (whose size must be known at compile time) or a <code>std::vector</code> (whose size is can be decided at run time). If an array, then yes, using a template is the best way."}, {"owner": {"reputation": 133, "user_id": 6539923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589520181347438/picture?type=large", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/6539923/jonathan-lee"}, "edited": false, "score": 0, "creation_date": 1534368287, "post_id": 51866364, "comment_id": 90685419, "body": "I think <code>std::array</code> might be the way to go. I just ran a test program and it works fine. I&#39;ll accept your answer if you add that small footnote."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 133, "user_id": 6539923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589520181347438/picture?type=large", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/6539923/jonathan-lee"}, "edited": false, "score": 0, "creation_date": 1534368913, "post_id": 51866364, "comment_id": 90685593, "body": "@JonathanLee, you got it."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1534368800, "last_edit_date": 1534368800, "creation_date": 1534366813, "answer_id": 51866364, "question_id": 51866316, "link": "https://stackoverflow.com/questions/51866316/initializing-members-of-a-struct-using-other-members/51866364#51866364", "title": "Initializing members of a struct using other members?", "body": "<p>You may not use </p>\n\n<pre><code>struct myStruct {\n    size_t length;\n    std::string (&amp;strings)[length];\n};\n</code></pre>\n\n<p>since <code>length</code> is not a compile time constant.</p>\n\n<p>Your best option is probably to use <code>std::vector&lt;std::string&gt;&amp;</code>.</p>\n\n<pre><code>struct myStruct {\n    // Assuming you were using a reference on purpose.\n    std::vector&lt;std::string&gt;&amp; strings;\n};\n</code></pre>\n\n<p>and initialize it in the constructor.</p>\n\n<pre><code>struct myStruct {\n    myStruct(std::vector&lt;std::string&gt;&amp; in) : strings(in) {}\n    std::vector&lt;std::string&gt;&amp; strings;\n};\n</code></pre>\n\n<p>If the size of the array is known at compile time, there are couple of choices.</p>\n\n<ol>\n<li><p>Use a regular array of <code>std::string</code>s.</p>\n\n<pre><code>template &lt;size_t N&gt;\nstruct myStruct {\n    int length;\n    std::string (&amp;strings)[N];\n};\n</code></pre></li>\n<li><p>Use a <code>std::array</code> of <code>std::string</code>s.</p>\n\n<pre><code>template &lt;size_t N&gt;\nstruct myStruct {\n    int length;\n    std::array&lt;std::string, N&gt;&amp; strings;\n};\n</code></pre></li>\n</ol>\n\n<p>The second option is better since <code>std::array</code>s have everything that a regular array has plus more.</p>\n"}], "owner": {"reputation": 133, "user_id": 6539923, "user_type": "registered", "profile_image": "https://graph.facebook.com/1589520181347438/picture?type=large", "display_name": "Jonathan Lee", "link": "https://stackoverflow.com/users/6539923/jonathan-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 51866364, "answer_count": 1, "score": 2, "last_activity_date": 1534368800, "creation_date": 1534366597, "last_edit_date": 1534367940, "question_id": 51866316, "link": "https://stackoverflow.com/questions/51866316/initializing-members-of-a-struct-using-other-members", "title": "Initializing members of a struct using other members?", "body": "<p>I am wondering whether one can create a structure and, using the members/variables initialized in the structure as parameters, build other members. For example, I would like to make a structure:</p>\n\n<pre><code>struct myStruct {\n    size_t length;\n    std::string (&amp;strings)[length]; // from the above variable\n};\n</code></pre>\n\n<p>Something like this. And I understand that there are some subtleties regarding  initialization order, but I'm sure that something could be worked out (constructors maybe?) to overcome that problem. Currently, the only way I've found that works is templates:</p>\n\n<pre><code>template &lt;size_t N&gt;\nstruct myStruct {\n    int length;\n    std::string (&amp;strings)[N]; // from the template parameter\n};\n</code></pre>\n\n<p>Keep in mind that I actually pass my <code>length</code> value as a member variable in the struct, so ideally I won't need a template.</p>\n\n<p><strong>Edit</strong>:<br>\nClarification: I need only to access the string of arrays and be able to read from them (no need to overwrite them, so <code>const</code> could and should be used) as one would do with a regular array: []-based notation. I could also tolerate a change to <code>std::array</code>. Anyways, I just need the strings easily accessible in a way not starkly different from regular usage. Also, it must be from a <strong>struct pointer</strong> (a.k.a. arrow operator).</p>\n\n<p>Thanks much!</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1534390273, "post_id": 51866309, "comment_id": 90690078, "body": "With the edit, I&#39;m not even sure what the question is anymore. What&#39;s the question?"}, {"owner": {"reputation": 1668, "user_id": 2307646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21a6192fca73a31505d1a36baabb976?s=128&d=identicon&r=PG", "display_name": "FrankHB", "link": "https://stackoverflow.com/users/2307646/frankhb"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1534494127, "post_id": 51866309, "comment_id": 90733347, "body": "@Barry The question is not changed: I want a <i>perfectly</i> portable way. I admit this is somewhat subjective and not clear enough without some example. Your answer is portable on criteria of conformance, but this does have problems making it apparently &quot;imperfect&quot;. The edit shows the problems and one of the direction to get it better, but it is not a complete solution I still wonder."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1534514467, "post_id": 51866309, "comment_id": 90744945, "body": "Well like... you have two choices. You can <i>require</i> <code>__cpp_lib_raw_memory_algorithms</code>. Or you can implement everything yourself."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1534516640, "post_id": 51866309, "comment_id": 90746329, "body": "... where &quot;implement everything yourself&quot; also includes &quot;find a 3rd party implementation and use that&quot;"}, {"owner": {"reputation": 1668, "user_id": 2307646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21a6192fca73a31505d1a36baabb976?s=128&d=identicon&r=PG", "display_name": "FrankHB", "link": "https://stackoverflow.com/users/2307646/frankhb"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1534562231, "post_id": 51866309, "comment_id": 90760548, "body": "@Barry OK... I&#39;d choose former. Seems no better choice yet."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1534367540, "creation_date": 1534367540, "answer_id": 51866510, "question_id": 51866309, "link": "https://stackoverflow.com/questions/51866309/how-to-detect-availability-of-c17s-extended-memory-management-algorithms-with/51866510#51866510", "title": "How to detect availability of C++17&#39;s extended memory management algorithms with execution policies in source code?", "body": "<p>The initial version of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0941r0.html\" rel=\"nofollow noreferrer\">P0941</a> contained a table which made it clear that P0040R3 has the corresponding feature-test macro <code>__cpp_lib_raw_memory_algorithms</code>. This implies that the correct, portable way to write code to conditionally use this feature is:</p>\n\n<pre><code>#if __cpp_lib_raw_memory_algorithms\nstd::uninitialized_move_n(std::execution::par, iter, size, d_iter);\n#else\n// ???\n#endif\n</code></pre>\n\n<p>The imposed requirement is that if that macro is defined, then that function exists and does what the standard prescribes. But that macro not being defined does not really say anything. As you point out, there are parts of P0040R3 that are implemented in libstdc++ - parts, but not all, which is why the feature-test macro is not defined. </p>\n\n<p>There is currently a concerted effort to implement the parallel algorithms in libstdc++. </p>\n\n<p>As to what to do in the <code>#else</code> branch there, well... you're kind of on your own.</p>\n"}], "owner": {"reputation": 1668, "user_id": 2307646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21a6192fca73a31505d1a36baabb976?s=128&d=identicon&r=PG", "display_name": "FrankHB", "link": "https://stackoverflow.com/users/2307646/frankhb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 51866510, "answer_count": 1, "score": 6, "last_activity_date": 1534496983, "creation_date": 1534366585, "last_edit_date": 1534496983, "question_id": 51866309, "link": "https://stackoverflow.com/questions/51866309/how-to-detect-availability-of-c17s-extended-memory-management-algorithms-with", "title": "How to detect availability of C++17&#39;s extended memory management algorithms with execution policies in source code?", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0040r3.html\" rel=\"nofollow noreferrer\">P0040R3</a> (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/\" rel=\"nofollow noreferrer\">adopted 2016-06</a>, see also <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/n4603.html\" rel=\"nofollow noreferrer\">N4603</a>) introduced some extended memory management algorithms like <code>std::uninitialized_move_n</code> into the draft, and finally it became parts of ISO C++17. Some of them had an extra overload with a <code>ExecutionPolicy</code> parameter for potential support of parallelism.</p>\n\n<p>However, as of now (Aug 2018), I don't find any standard library implementation shipped with the implementations of these overloads. And the documentation of implementations I've checked does not clarify it well. Specifically, (currently) they are:</p>\n\n<ul>\n<li><a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2017\" rel=\"nofollow noreferrer\">libstdc++</a> shows it does not support P0040R3 in trunk, but actually at least <code>std::destroy_at</code> and <code>std::uninitialized_move_n</code> without <code>ExecutionPolicy</code> are in GCC 8.2.</li>\n<li><a href=\"http://libcxx.llvm.org/cxx1z_status.html\" rel=\"nofollow noreferrer\">libc++</a> has \"Complete\" support of P0040R3 since 4.0, but the overloads with <code>ExecutionPolicy</code> are actually missing.</li>\n<li><a href=\"https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance\" rel=\"nofollow noreferrer\">Microsoft VC++</a> has support of P0040R3 since VS 2017 15.3 with <code>/std:c++17</code> or <code>/std:c++latest</code>, but the overloads with <code>ExecutionPolicy</code> are actually missing.</li>\n</ul>\n\n<p>The only implementation with <code>ExecutionPolicy</code> overloads I know is in <a href=\"https://github.com/STEllAR-GROUP/hpx\" rel=\"nofollow noreferrer\">HPX</a>, but this is not a full implementation of the standard library. If I want to use the features portably, I have to adapt to custom implementation likewise, rather than direct use of <code>std</code> names. But I still want to use <code>std</code> implementation in future as preference (unless they have known bugs). (The reason is that implementation-defined execution policies are tightly coupled with concrete implementations, so external implementations as well as their client code would likely have less opportunity to utilize various execution policies in general; although this is not necessarily true for client code which is not guaranteed portable in the sense of conforming to standard.) Thus, I want something available for conditional inclusion in my potable adaptive layer for implementations - to get the specified features with <code>using std::...</code> when they are provided by the standard library, and complement it with my implementations as the fallback of missing parts from the standard library implementation only when necessary.</p>\n\n<p>As I have known, the <a href=\"https://isocpp.org/std/standing-documents/sd-6-sg10-feature-test-recommendations\" rel=\"nofollow noreferrer\">SD-6 feature testing macros</a> as well as <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0941r2.html\" rel=\"nofollow noreferrer\">P0941R2</a> shows <code>__cpp_lib_raw_memory_algorithms</code> is sufficient for the features in P0040R3. On the other hand, <code>__cpp_lib_parallel_algorithm</code> seems not related to <code>&lt;memory&gt;</code> at all. So there is no way to express the state like current libc++ and MSVC implementations - with <code>std</code> names from P0040R3 but lack of <code>ExecutionPolicy</code> overloads. And I'm not sure <code>__has_include&lt;execution&gt;</code> would ever work. The reality may be quirkier, e.g. <a href=\"https://wg21.link/p0336r1\" rel=\"nofollow noreferrer\">P0336R1</a> is even <a href=\"http://libcxx.llvm.org/cxx1z_status.html\" rel=\"nofollow noreferrer\">not supported by libc++</a>.</p>\n\n<p>So, how to get it perfectly portable in my code when the features become (hopefully) available in some newer version of the standard library implementations, except inspecting the source of <em>each version</em> of them, or <em>totally</em> reinventing my wheels of the whole P0040R3?</p>\n\n<p>Edited:</p>\n\n<p>I know the intended use of feature testing macros and I think libstdc++ has done the right thing. However, there is room to improve. More specifically, my code of the portable layer would play the role of the implementation (like HPX), but more \"lightweight\" in the sense of not reinventing wheels when they are already provided by the standard library implementation:</p>\n\n<pre><code>namespace my\n{\n#if ???\n//#if __cpp_lib_raw_memory_algorithms\nusing std::uninitialized_move_n;\n// XXX: Is this sufficient???\n#else\n// ... wheels here ... not expected to be more efficient to std counterparts in general\n#endif\n}\n</code></pre>\n\n<p>so my client code can be:</p>\n\n<pre><code>my::uninitialized_move_n(???::par, iter, size, d_iter);\n</code></pre>\n\n<p>rather than (copied from Barry's answer):</p>\n\n<pre><code>#if __cpp_lib_raw_memory_algorithms\nstd::uninitialized_move_n(std::execution::par, iter, size, d_iter);\n#else\n// ???\n#endif\n</code></pre>\n\n<p>Both pieces of the code can work, but obviously checking <code>__cpp_lib_raw_memory_algorithms</code> directly everywhere in client code is more costly.</p>\n\n<p>Ideally I should have some complete up-to-date standard library implementation, but that is not always the case I can guarantee (particularly working with environments where the standard library is installed as parts of system libraries). I need the adaption to ease the clients' work anyway.</p>\n\n<p>The fallback is obvious: avoiding the <code>using std::uninitialized_move_n;</code> path totally. I'm afraid this would be a pessimistic implementation so I want to avoid this approach when possible.</p>\n\n<p>Second update:</p>\n\n<p>Because \"<em>perfectly</em> portable\" sounds unclear, I have illustrated some code in the edit above. Although the question is not changed and still covered by the title, I will make it more concrete here.</p>\n\n<p>The \"perfectly portable\" way I want in the question is restricted as, given the code like the edit above, filling up any parts marked in <code>???</code>, without relying on any particular versions of language implementations (e.g., nothing like macro names depended on implementations should be used for the purpose).</p>\n\n<p>See <a href=\"https://github.com/FrankHB/YSLib/blob/7a44433ed8de5301c602974b36e365ea6760432f/YBase/include/ystdex/placement.hpp#L318\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/FrankHB/YSLib/blob/7a44433ed8de5301c602974b36e365ea6760432f/YBase/include/ystdex/placement.hpp#L440\" rel=\"nofollow noreferrer\">here</a> for the code examples <em>fail</em> to meet the criteria. (Well, these versions are figured out via inspection of commit logs... certainly imperfect, and, still <em>buggy</em> in some cases.) Note this is not related to the overloads with <code>ExecutionPolicy</code> yet, because they are missing in the mentioned standard library implementations, and my next action is depending on the solution of this question. (But the future of the names in <code>std</code> should be clear.)</p>\n\n<p>A perfect (enough) solution can be, for example, adding a new feature testing macro to make the overloads independent from <code>__cpp_lib_raw_memory_algorithms</code> so in future I can just add my implementation of the overloads with <code>ExecutionPolicy</code> when they are not detected by the stand-alone new feature testing macro, without messing up the condition of <code>#if</code> again. But certainly I can't guarantee this way would be feasible; it ultimately depends on the decision of the committee and vendors.</p>\n\n<p>I'm not sure whether there can be other directions.</p>\n"}, {"tags": ["python", "c++", "mpi", "distributed-computing", "vtk"], "owner": {"reputation": 12701, "user_id": 572616, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iUVL5.png?s=128&g=1", "display_name": "Woltan", "link": "https://stackoverflow.com/users/572616/woltan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1534416449, "creation_date": 1534366072, "last_edit_date": 1534416449, "question_id": 51866202, "link": "https://stackoverflow.com/questions/51866202/using-vtkdistributeddatafilter-on-unstructured-grids-with-polyhedron-cells", "title": "Using vtkDistributedDataFilter on unstructured grids with polyhedron cells", "body": "<p>I am using the <a href=\"https://www.vtk.org/doc/nightly/html/classvtkDistributedDataFilter.html\" rel=\"nofollow noreferrer\">vtkDistributedDataFilter</a> to distribute my data on several processes. Everything is working just fine except when an <a href=\"https://www.vtk.org/doc/nightly/html/classvtkUnstructuredGrid.html\" rel=\"nofollow noreferrer\">vtkUnstructuredGrid</a> has polyhedron cells in it. Then the filter throws a segmentation fault.\nCan anyone help me with</p>\n\n<ol>\n<li>confirm, that the filter does not work for unstructured grids that have polyhedron cells or</li>\n<li>tell me how I can make this filter work with polyhedral.</li>\n</ol>\n\n<p>Currently I am </p>\n\n<ol>\n<li>instantiating the filter, </li>\n<li>setting the controller with SetController,</li>\n<li>setting the input data with SetInputData and</li>\n<li>finally making the computation with Update.</li>\n</ol>\n\n<p>The following program produces the segmentation fault:</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include \"vtkMPIController.h\"\n\n#include &lt;vtkActor.h&gt;\n#include &lt;vtkCamera.h&gt;\n#include &lt;vtkCellArray.h&gt;\n#include &lt;vtkCellData.h&gt;\n#include &lt;vtkDataArray.h&gt;\n#include &lt;vtkDataSetMapper.h&gt;\n#include &lt;vtkDistributedDataFilter.h&gt;\n#include &lt;vtkIdList.h&gt;\n#include &lt;vtkNamedColors.h&gt;\n#include &lt;vtkPointData.h&gt;\n#include &lt;vtkPoints.h&gt;\n#include &lt;vtkPolyhedron.h&gt;\n#include &lt;vtkProperty.h&gt;\n#include &lt;vtkRenderer.h&gt;\n#include &lt;vtkRenderWindow.h&gt;\n#include &lt;vtkRenderWindowInteractor.h&gt;\n#include &lt;vtkSmartPointer.h&gt;\n#include &lt;vtkUnstructuredGrid.h&gt;\n#include &lt;vtkVersion.h&gt;\n#include &lt;vtkXMLUnstructuredGridWriter.h&gt;\n\nint main(int argc, char** argv)\n{\n  MPI_Init(&amp;argc, &amp;argv);\n  vtkMPIController *contr = vtkMPIController::New();\n  contr-&gt;Initialize(&amp;argc, &amp;argv, 1);\n\n  int world_size;\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n\n  int world_rank;\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n\n  printf(\"%d, %d\\n\", world_size, world_rank);\n\n  vtkSmartPointer&lt;vtkUnstructuredGrid&gt; ugrid =\n    vtkSmartPointer&lt;vtkUnstructuredGrid&gt;::New();\n\n  if(world_rank == 0)\n  {\n    vtkIdType pointIds[8] = {0, 1, 2, 3, 4, 5, 6, 7};\n\n    vtkSmartPointer&lt;vtkPoints&gt; points =\n      vtkSmartPointer&lt;vtkPoints&gt;::New();\n    points-&gt;InsertNextPoint(-1.0,-1.0,-1.0);//0\n    points-&gt;InsertNextPoint( 1.0,-1.0,-1.0);//1\n    points-&gt;InsertNextPoint( 1.0, 1.0,-1.0);//2\n    points-&gt;InsertNextPoint(-1.0, 1.0,-1.0);//3\n    points-&gt;InsertNextPoint(-1.0,-1.0, 1.0);//4\n    points-&gt;InsertNextPoint( 1.0,-1.0, 1.0);//5\n    points-&gt;InsertNextPoint( 1.0, 1.0, 1.0);//6\n    points-&gt;InsertNextPoint(-1.0, 1.0, 1.0);//7\n\n    points-&gt;InsertNextPoint( 2.0,-1.0,-1.0);//8\n    points-&gt;InsertNextPoint( 2.0, 1.0,-1.0);//9\n    points-&gt;InsertNextPoint( 2.0,-1.0, 1.0);//10\n    points-&gt;InsertNextPoint( 2.0, 1.0, 1.0);//11\n\n    vtkSmartPointer&lt;vtkCellArray&gt; faces =\n      vtkSmartPointer&lt;vtkCellArray&gt;::New();\n    vtkIdType face0[4] = {0, 3, 2, 1};\n    vtkIdType face1[4] = {0, 4, 7, 3};\n    vtkIdType face2[4] = {4, 5, 6, 7};\n    vtkIdType face3[4] = {5, 1, 2, 6};\n    vtkIdType face4[4] = {0, 1, 5, 4};\n    vtkIdType face5[4] = {2, 3, 7, 6};\n\n    faces-&gt;InsertNextCell(4, face0);\n    faces-&gt;InsertNextCell(4, face1);\n    faces-&gt;InsertNextCell(4, face2);\n    faces-&gt;InsertNextCell(4, face3);\n    faces-&gt;InsertNextCell(4, face4);\n    faces-&gt;InsertNextCell(4, face5);\n\n    vtkIdType pointIds2[8] = {1, 2, 5, 6, 8, 9, 10, 11};\n\n    vtkSmartPointer&lt;vtkCellArray&gt; faces2 =\n      vtkSmartPointer&lt;vtkCellArray&gt;::New();\n    vtkIdType face6[4] = {5, 1, 2, 6};\n    vtkIdType face7[4] = {1, 2, 9, 8};\n    vtkIdType face8[4] = {2, 6, 11, 9};\n    vtkIdType face9[4] = {6, 5, 10, 11};\n    vtkIdType face10[4] = {5, 1, 8, 10};\n    vtkIdType face11[4] = {11, 10, 8, 9};\n\n    faces2-&gt;InsertNextCell(4, face6);\n    faces2-&gt;InsertNextCell(4, face7);\n    faces2-&gt;InsertNextCell(4, face8);\n    faces2-&gt;InsertNextCell(4, face9);\n    faces2-&gt;InsertNextCell(4, face10);\n    faces2-&gt;InsertNextCell(4, face11);\n\n    ugrid-&gt;SetPoints(points);\n    ugrid-&gt;InsertNextCell(VTK_POLYHEDRON, 8, pointIds, 6, faces-&gt;GetPointer());\n    ugrid-&gt;InsertNextCell(VTK_POLYHEDRON, 8, pointIds2, 6, faces2-&gt;GetPointer());\n  }\n\n  vtkSmartPointer&lt;vtkDistributedDataFilter&gt; distFilter =\n    vtkSmartPointer&lt;vtkDistributedDataFilter&gt;::New();\n\n  distFilter-&gt;SetInputData(ugrid);\n  distFilter-&gt;SetController(contr);\n  distFilter-&gt;Update();\n\n  MPI_Finalize();\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Compiled with this CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nPROJECT(Polyhedron)\n\nfind_package(VTK REQUIRED)\ninclude(${VTK_USE_FILE})\n\nadd_executable(Polyhedron MACOSX_BUNDLE Polyhedron.cxx )\n\ntarget_link_libraries(Polyhedron ${VTK_LIBRARIES})\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1534365944, "post_id": 51866166, "comment_id": 90684529, "body": "Whoever told you that &#39;everything in CPP can be a object/class&#39; was lying through their teeth. I suggest that instead of listening to this rubbish, you pick up a good book: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1534365977, "post_id": 51866166, "comment_id": 90684536, "body": "In a template parameter declaration, <code>class</code> and <code>typename</code> are identical and interchangeable, so <code>&lt;class T&gt;</code> and <code>&lt;typename T&gt;</code> mean the same thing, it is up to programmer preference which one to use when writing your own templates."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1534366022, "post_id": 51866166, "comment_id": 90684559, "body": "An instance of any thing, including classes, is an object in C++."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1534366023, "post_id": 51866166, "comment_id": 90684561, "body": "@SergeyA Well, mostly they are correct.  Piratically everything in C++ is an object."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1534366053, "post_id": 51866166, "comment_id": 90684573, "body": "@NathanOliver but not everything in C++ is a class! Also, not everything is an object even if you play devils advocate - references are not, for instance. Functions are not objects."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1534366176, "post_id": 51866166, "comment_id": 90684630, "body": "<code>template &lt;class T&gt;</code> is the same a <code>template &lt;typename T&gt;</code> with the latter being less misleading/confusing IMHO."}, {"owner": {"reputation": 397, "user_id": 8011353, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-z9DYEo91z-o/AAAAAAAAAAI/AAAAAAAABAo/jCCiD3JOmjs/photo.jpg?sz=128", "display_name": "Psyduck", "link": "https://stackoverflow.com/users/8011353/psyduck"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1534366406, "post_id": 51866166, "comment_id": 90684715, "body": "@RemyLebeau thx. But <code>typename</code> and <code>class</code> are interchangeable only in template declaration, aren&#39;t they?"}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 1, "creation_date": 1534366492, "post_id": 51866166, "comment_id": 90684746, "body": "Yes, only in templates, and only in that data-type context. You cannot write <code>typename MyClass { public: void DoFoo(); }</code>. For this, you have to use <code>class</code> or <code>struct</code>."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534366581, "post_id": 51866166, "comment_id": 90684780, "body": "Yet, I still cannot understand what you are trying to say by <code>what&#39;s the implementation of the data type in cpp</code>."}, {"owner": {"reputation": 397, "user_id": 8011353, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-z9DYEo91z-o/AAAAAAAAAAI/AAAAAAAABAo/jCCiD3JOmjs/photo.jpg?sz=128", "display_name": "Psyduck", "link": "https://stackoverflow.com/users/8011353/psyduck"}, "reply_to_user": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534366630, "post_id": 51866166, "comment_id": 90684800, "body": "@quetzalcoatl my understanding between <code>class</code> and <code>struct</code> is that <code>struct </code> make all components public. Is there any other reasons why using <code>class</code> over <code>struct?</code>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1534367110, "post_id": 51866166, "comment_id": 90684981, "body": "@Noob. It&#39;s not revelant in this case. Since <code>class</code> in <code>template &lt;class T&gt;</code> doesn&#39;t make <code>T</code> a class."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534367220, "post_id": 51866166, "comment_id": 90685031, "body": "Nope, struct and class are the same, the difference is only in &#39;make it public by default&#39; vs &#39;make it private by default&#39;. There&#39;s also a programming style that <code>struct</code> should be a POCO and for other thing <code>class</code> should be used, but that&#39;s just one of the styles not enforced/used by the language itself. And like HolyBlackCat said, it&#39;s not relevant in current context. You can use class/struct (but not typename) when defining a class, but you can use class/typename (but not struct) when defining a template. It&#39;s pretty confusing that the same words mean different things.."}, {"owner": {"reputation": 397, "user_id": 8011353, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-z9DYEo91z-o/AAAAAAAAAAI/AAAAAAAABAo/jCCiD3JOmjs/photo.jpg?sz=128", "display_name": "Psyduck", "link": "https://stackoverflow.com/users/8011353/psyduck"}, "reply_to_user": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534367642, "post_id": 51866166, "comment_id": 90685196, "body": "@quetzalcoatl I get it. And I edited my question, trying to make it clearer."}], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 8011353, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-z9DYEo91z-o/AAAAAAAAAAI/AAAAAAAABAo/jCCiD3JOmjs/photo.jpg?sz=128", "display_name": "Psyduck", "link": "https://stackoverflow.com/users/8011353/psyduck"}, "edited": false, "score": 0, "creation_date": 1534367798, "post_id": 51866253, "comment_id": 90685255, "body": "thanks. Just another question in the template declaration <code>template &lt;class T&gt; struct Foo {};</code>. The book I am reading says the complete template declaration would have a () before the template name, should it be <code>template &lt;class T&gt; struct Foo(params) {};</code>? Also, the <code>struct</code> here means the return type of the template would be a struct?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 397, "user_id": 8011353, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-z9DYEo91z-o/AAAAAAAAAAI/AAAAAAAABAo/jCCiD3JOmjs/photo.jpg?sz=128", "display_name": "Psyduck", "link": "https://stackoverflow.com/users/8011353/psyduck"}, "edited": false, "score": 0, "creation_date": 1534367904, "post_id": 51866253, "comment_id": 90685287, "body": "@Noob., that&#39;s the case for template specializations. See <a href=\"https://en.cppreference.com/w/cpp/language/template_specialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/template_specialization</a>. The syntax that you have shown is not correct though."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1534367482, "last_edit_date": 1534367482, "creation_date": 1534366303, "answer_id": 51866253, "question_id": 51866166, "link": "https://stackoverflow.com/questions/51866166/cppis-generic-data-type-t-a-class-when-defining-template/51866253#51866253", "title": "CPP:Is generic data type T a class when defining template", "body": "<blockquote>\n  <p>inside <code>&lt;class T&gt;</code>, <code>T</code> should be a name of data type, and it's preceded by \"class\". Is this means the data types in CPP are also classes?</p>\n</blockquote>\n\n<p>The answer is \"no\".</p>\n\n<p>When defining a template, be it a class template or a function template, one can use <code>typename</code> as well as <code>class</code>. <code>typename</code> is the more accurate description but <code>class</code> is also supported, most likely for historical reasons.</p>\n\n<p>Hence,</p>\n\n<pre><code>template &lt;typename T&gt; struct Foo {};\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>template &lt;class T&gt; struct Foo {};\n</code></pre>\n\n<p>You can create objects by using any type as template parameter. It could be one of the fundamental types or one of the user defined types (aka <code>class</code>es/<code>struct</code>s).</p>\n\n<p>Give the above class template, one can use:</p>\n\n<pre><code>struct Bar {}; // User defined type\n\nFoo&lt;Bar&gt; f1;   // Using user defined type to create the object f1\nFoo&lt;int&gt; f2;   // Using a fundamental type to create the object f2\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 8011353, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-z9DYEo91z-o/AAAAAAAAAAI/AAAAAAAABAo/jCCiD3JOmjs/photo.jpg?sz=128", "display_name": "Psyduck", "link": "https://stackoverflow.com/users/8011353/psyduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1534366580, "accepted_answer_id": 51866253, "answer_count": 1, "score": -1, "last_activity_date": 1534368192, "creation_date": 1534365902, "last_edit_date": 1534368192, "question_id": 51866166, "link": "https://stackoverflow.com/questions/51866166/cppis-generic-data-type-t-a-class-when-defining-template", "closed_reason": "Needs details or clarity", "title": "CPP:Is generic data type T a class when defining template", "body": "<p>When defining a template, the format is:</p>\n\n<p><code>template &lt;class T&gt; returnType templateName{...};</code></p>\n\n<p>My question is: will the <code>class</code> keyword inside the above template declaration makes data type T a class?  The question is explained below:</p>\n\n<p>inside <code>&lt;class T&gt;</code>, T should be a name of data type, and it's preceded by \"class\". When learning class in cpp, I know that a class is defined:<code>class ClassName{...};</code>. So my understanding is that everything followed by a class keyword would be the name of a class. In the case of the template declaration, there is also a <code>class</code> keyword before <code>T</code>. Is this means the data types in CPP are also classes?</p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1534365900, "post_id": 51866106, "comment_id": 90684500, "body": "The code works exactly as you coded it, why are you saying it is incorrect? You have a specialization for character arrays, and when you call your template with character array, this specialization is chosen. This is exactly what you asked for."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1534367520, "post_id": 51866106, "comment_id": 90685136, "body": "Your code appears to work for me, resolving to the right specialization with both versions of <code>someFunction</code>: <a href=\"https://www.ideone.com/dbbn04\" rel=\"nofollow noreferrer\">ideone.com/dbbn04</a> -- what compiler are you using?"}, {"owner": {"reputation": 151, "user_id": 3569287, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e216c3d7cb57515c015319ed97eec5f?s=128&d=identicon&r=PG&f=1", "display_name": "miles.sherman", "link": "https://stackoverflow.com/users/3569287/miles-sherman"}, "edited": false, "score": 0, "creation_date": 1534370084, "post_id": 51866106, "comment_id": 90685973, "body": "i&#39;m consistently failing to compile, gcc 8.1.1; will post the exact gcc output soon..."}, {"owner": {"reputation": 151, "user_id": 3569287, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e216c3d7cb57515c015319ed97eec5f?s=128&d=identicon&r=PG&f=1", "display_name": "miles.sherman", "link": "https://stackoverflow.com/users/3569287/miles-sherman"}, "edited": false, "score": 0, "creation_date": 1534371763, "post_id": 51866106, "comment_id": 90686418, "body": "ok, so the only way to catch this issue at compile time is with a static_assert, which I added to the &quot;typename T&quot; specialization to check if the argument is integral. I do hit the assertion with my char ptr case:  /home/miles/development/trader/src/logging/text_logger.h:94:&zwnj;&#8203;19: error: static assertion failed: TextLogger: caught non-integral type      static_assert(std::is_integral&lt;T&gt;::value, &quot;TextLogger: caught non-integral type&quot;);                    ^~~  However, creating a stack pointer and assigning it to the fcn argument like my original example compiles fine."}, {"owner": {"reputation": 874, "user_id": 6858550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbd1aac23957d00bfb620319ddd38a13?s=128&d=identicon&r=PG&f=1", "display_name": "Han XIAO", "link": "https://stackoverflow.com/users/6858550/han-xiao"}, "edited": false, "score": 0, "creation_date": 1534382318, "post_id": 51866106, "comment_id": 90688639, "body": "This code works for me too. They select the same overload. Try the build command <code>g++ -std=c++1z main.cpp -o main</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1534383178, "post_id": 51866106, "comment_id": 90688797, "body": "<a href=\"https://www.ideone.com/AmukzU\" rel=\"nofollow noreferrer\">Demo</a> which uses the char array overload."}], "owner": {"reputation": 151, "user_id": 3569287, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e216c3d7cb57515c015319ed97eec5f?s=128&d=identicon&r=PG&f=1", "display_name": "miles.sherman", "link": "https://stackoverflow.com/users/3569287/miles-sherman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1534367483, "creation_date": 1534365642, "last_edit_date": 1534367483, "question_id": 51866106, "link": "https://stackoverflow.com/questions/51866106/c-template-specialization-doesnt-resolve-in-some-cases", "title": "C++ Template Specialization Doesn&#39;t Resolve in Some Cases", "body": "<p>I am attempting to write a template specialization which serializes fields into a buffer. The below code MOSTLY works, although I am running into a weird problem when passing char pointer types to the code.</p>\n\n<pre><code>template &lt;typename... Args&gt;\nstruct ArgHandler;\n\n// literal types\ntemplate &lt;typename T, typename... Args&gt;\nstruct ArgHandler&lt;T, Args...&gt;\n{\n    static uint8_t* insert(uint8_t* buff, const T arg, const Args&amp;... args)\n    {   \n        auto data = reinterpret_cast&lt;T*&gt;(buff); \n        *data = static_cast&lt;T&gt;(arg);\n        return ArgHandler&lt;Args...&gt;::insert(buff + sizeof(T), args...);\n    }   \n};\n\n// char ptr\ntemplate &lt;typename... Args&gt;\nstruct ArgHandler&lt;const char*, Args...&gt;\n{\n    // strings\n    static uint8_t* insert(uint8_t* buff, const char* arg, const Args&amp;... args)\n    {   \n        auto* pos = reinterpret_cast&lt;uint8_t*&gt;(stpcpy(reinterpret_cast&lt;char*&gt;(buff), arg)) + 1;\n        return ArgHandler&lt;Args...&gt;::insert(pos, args...);\n    }   \n};\n\n// char array\ntemplate &lt;size_t N, typename... Args&gt;\nstruct ArgHandler&lt;char[N], Args...&gt;\n{\n    // strings\n    static uint8_t* insert(uint8_t* buff, const char (&amp;arg)[N], const Args&amp;... args)\n    {   \n        auto* pos = reinterpret_cast&lt;uint8_t*&gt;(stpcpy(reinterpret_cast&lt;char*&gt;(buff), &amp;arg[0])) + 1;\n        return ArgHandler&lt;Args...&gt;::insert(pos, args...);\n    }   \n};\n\n// after last arg, end recursion\ntemplate &lt;&gt;\nstruct ArgHandler&lt;&gt;\n{\n    static uint8_t* insert(uint8_t* buff)\n    {   \n        return buff;\n    }   \n};\n\ntemplate &lt;typename... Args&gt;\nvoid insertArgs(uint8_t* buff, const Args&amp;... args)\n{\n    ArgHandler&lt;Args...&gt;::insert(buff, args...);\n}\n</code></pre>\n\n<p>If I create a char ptr on the stack of a function and then pass it to my buffer-insertion code, everything works. However, in the same code if I pass the argument of the calling function directly into the buffer-insertion function, the compiler resolves to the wrong specialization (specifically the \"literal types\" specialization).</p>\n\n<pre><code>// works\nvoid someFunction(const char* str)\n{\n    uint8_t buff[1024];\n    const char* local_str = str;\n    insertArgs(buff, local_str);\n}\n\n// resolves to incorrect specialization\nvoid someFunction(const char* str)\n{\n    uint8_t buff[1024];\n    insertArgs(buff, str);\n}\n</code></pre>\n\n<p>I suspect this has to do with my lack of understanding of lvalue, rvalue, etc. Any help is appreciated!</p>\n"}, {"tags": ["c++", "macos", "cmake", "frameworks"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534365188, "post_id": 51865990, "comment_id": 90684222, "body": "You can add path to framework libs to LD_LIBRARY_PATH env variable"}], "owner": {"reputation": 1211, "user_id": 920545, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f5406e58c35a73af9dfdbd64d435f6b?s=128&d=identicon&r=PG", "display_name": "Paul Molodowitch", "link": "https://stackoverflow.com/users/920545/paul-molodowitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1534365057, "creation_date": 1534365057, "question_id": 51865990, "link": "https://stackoverflow.com/questions/51865990/linking-to-a-custom-framework-using-cmake-correct-location-at-build-wrong-loc", "title": "Linking to a custom framework using cmake - correct location at build, wrong location at runtime", "body": "<p>So, I have a custom built framework, which is located at:</p>\n\n<pre><code>/usr/local/Frameworks/QGLViewer.framework\n</code></pre>\n\n<p>I then have these lines in my CMakeLists.txt to use it:</p>\n\n<pre><code>list(APPEND CMAKE_FRAMEWORK_PATH \"/usr/local/Frameworks\")\nfind_library(QGLViewer_LIBRARY QGLViewer)\nif(NOT QGLViewer_LIBRARY)\n  message(FATAL_ERROR \"QGLViewer library not found\")\nendif()\n\n...\n\nadd_executable(OpenGLTest ${MY_SOURCES} ${MY_HEADERS} ${MY_UI_HDRS} ${MY_MOC_SRCS})\ntarget_link_libraries(OpenGLTest\n    ${OpenGL_LIBS} \n    ${QT_LIBRARIES} \n    ${QGLViewer_LIBRARY}\n    )\n</code></pre>\n\n<p>When I build this, it builds fine - it finds the framework at <code>/usr/local/Frameworks/QGLViewer.framework</code>.  However, when linking at runtime, it fails - tries to find the framework at <code>/Library/Frameworks/QGLViewer.framework</code>, which doesn't exist.</p>\n\n<p>If I do:</p>\n\n<pre><code>otool -l OpenGLTest\n</code></pre>\n\n<p>then I see this line:</p>\n\n<pre><code>Load command 19\n          cmd LC_LOAD_DYLIB\n      cmdsize 88\n         name /Library/Frameworks/QGLViewer.framework/Versions/A/QGLViewer (offset 24)\n   time stamp 2 Wed Dec 31 16:00:02 1969\n      current version 0.0.0\ncompatibility version 0.0.0\n</code></pre>\n\n<p>...which I think means that the incorrect location has somehow gotten baked into the build at runtime.</p>\n\n<p>Possibly related - at some point, I had the library located at <code>/Library/Frameworks/QGLViewer.framework</code>, and built my executable using it at that location.  I could go back to that layout, and it works, but wanted to move the framework to <code>/usr/local/Frameworks</code>, since that makes more sense to me for \"my frameworks\", and it's where all the (brew-built) Qt frameworks live.  I thought maybe some dyld caching was the culprit, but I tried running <code>update_dyld_shared_cache -force</code>, and it didn't help...</p>\n"}, {"tags": ["c++", "parallel-processing", "mpi"], "comments": [{"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534366018, "post_id": 51865750, "comment_id": 90684557, "body": "As a side note, do you find anything in MPI to be &#39;wieldy&#39;? MPI is well defined, it works, but most libraries are based on C-style api, so &#39;unwieldiness&#39; is a common thing and the first thing I usually do is to wrap and hide as much MPI settings and calls as I can.. (not that I did it many times.. ten maybe.. and that was a time ago). Since that&#39;s a common thing, I&#39;d search for some C++ wrappers. After all these years and after lambdas/etc were finally introduced, making a type-safe lambda-based set of wrappers should be quite simple and I&#39;d expect that someone already did it."}, {"owner": {"reputation": 33, "user_id": 9812780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff78df35ad1eb1dac83a40727d9f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "SMartens", "link": "https://stackoverflow.com/users/9812780/smartens"}, "reply_to_user": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534366791, "post_id": 51865750, "comment_id": 90684860, "body": "I&#39;ve seen a number of examples of MPI used (mostly with bcast and reduce rather than scatter and gather) that, on the surface, look pretty simple. I&#39;m brand new to MPI though so I admittedly don&#39;t have much experience with what to expect."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534367644, "post_id": 51865750, "comment_id": 90685200, "body": "Just FYI: it seems people are actually working on something <a href=\"https://github.com/patflick/mxx\" rel=\"nofollow noreferrer\">github.com/patflick/mxx</a> or <a href=\"https://blogs.cisco.com/performance/new-life-for-cxx-in-mpi\" rel=\"nofollow noreferrer\">blogs.cisco.com/performance/new-life-for-cxx-in-mpi</a> - but consider it a side note, not answer. I actually doubt you could use them if your assignement/task was &quot;use MPI&quot;. And also the former looks actually a bit more complex than what you have now so, d&#39;oh."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1534377674, "post_id": 51865750, "comment_id": 90687702, "body": "I am not sure you can <code>MPI_Scatterv(&amp;paralleli, ..., &amp;rec_buf, ...)</code>. <code>MPI_Scatterv(&amp;paralleli[0], ..., &amp;rec_buf[0], ...)</code> will definitely work. I am not fluent in C++, but based on previous answers, <code>MPI_Scatterv(paralleli,data(), ..., rec_buf.data(), ...)</code> might do the trick too."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1534377759, "post_id": 51865750, "comment_id": 90687724, "body": "as a side note, you can allocate a smaller <code>rec_buf</code>. Max size is <code>rem + 1</code> (<code>L</code> is needlessly larger here)"}, {"owner": {"reputation": 33, "user_id": 9812780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff78df35ad1eb1dac83a40727d9f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "SMartens", "link": "https://stackoverflow.com/users/9812780/smartens"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1534457388, "post_id": 51865750, "comment_id": 90723434, "body": "Thank you @GillesGouaillardet. My problem with Scatterv seems to be fixed."}], "owner": {"reputation": 33, "user_id": 9812780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff78df35ad1eb1dac83a40727d9f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "SMartens", "link": "https://stackoverflow.com/users/9812780/smartens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1534366872, "creation_date": 1534363898, "last_edit_date": 1534366872, "question_id": 51865750, "link": "https://stackoverflow.com/questions/51865750/scatterv-gatherv-with-mpi-to-return-a-large-vector", "title": "Scatterv/Gatherv with MPI to return a large vector", "body": "<p>I'm new to MPI, and I've been tasked to use it to calculate a very large matrix of size L*M as part of a larger body of code. We iterate from 0 to L, perform some calculations, and save M values to the result matrix. The results from each iteration over L are independent of one another and its the largest time bottleneck in my code, so parellelizing it seems like a reasonable choice. </p>\n\n<p>The code I am trying to parallelize is, boiled down:</p>\n\n<pre><code>//preceding code\n\nint M = 12;\nfor (int i = 0; i &lt; L; i++) //START OF PARALLEL CHUNK\n{\n    funkystuffresults = dosomefunkystuff(i);\n\n    for (int j = 0; j &lt; M; j++)\n    {\n        resultmatrix[i*M + j] = funkystuffresults\n    }\n}//END OF PARALLEL CHUNK\n</code></pre>\n\n<p>Due to the nature of the code that precedes this chunk, I can't be certain of the value of L before runtime and it almost certainly can't be cleanly divided by the number of processes. From my research, it appears to me like MPI_Scatterv is the ideal function to use here.</p>\n\n<p>My initial attempt at using this code:</p>\n\n<pre><code>    MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n    int sendcounts[world_size];\n    int displs[world_size];\n    vector&lt;int&gt; rec_buf(L);\n    int rem = L%world_size;\n    int counttester = 0;\n    for (int i = 0; i &lt; world_size; i++)\n    {\n        sendcounts[i] = L/world_size;\n        if (rem &gt; 0)\n        {\n            sendcounts[i]++;\n            rem--;\n        }\n        displs[i] = counttester;\n        counttester += sendcounts[i];\n    }\n    vector&lt;int&gt; paralleli(L);\n    for (int i = 0; i &lt; L; i++)\n    {\n        paralleli[i] = i;\n    }\n    MPI_Scatterv(&amp;paralleli, sendcounts, displs, MPI_INT, &amp;rec_buf, L, MPI_INT, 0, MPI_COMM_WORLD);\n    for (int i = 0; i &lt; sendcounts[world_rank]; i++) //START OF PARALLEL CHUNK\n    {\n         //previously mentioned code\n    }\n</code></pre>\n\n<p>This seems very unwieldy to me for what I would imagine is a pretty common type of problem. To use this code will require a significant amount of modifying the \"funky stuff\" in my code, so I'm hoping there is a better way to do this. Is it ideal to be using scatterv (and presumably gatherv afterwards)? I'm hoping to use an implementation that also works even if parallelization is not used. </p>\n"}, {"tags": ["c++", "windows", "qt", "uac"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1534367078, "post_id": 51865622, "comment_id": 90684972, "body": "Use <a href=\"https://en.wikipedia.org/wiki/Runas\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Runas</a> ?"}, {"owner": {"reputation": 41, "user_id": 4493426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eos4b.jpg?s=128&g=1", "display_name": "Justin McBride", "link": "https://stackoverflow.com/users/4493426/justin-mcbride"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1534440520, "post_id": 51865622, "comment_id": 90716480, "body": "Thanks for the suggestion, but it does not work. Running with the <code>&quot;runas &#47;trustlevel:0x20000 \\&quot;myprogram.exe &#47;myflag\\&quot;&quot;</code> even from an Administrator command prompt still runs the program with administrator privileges. Same as launching it with the `QProcess::startDetached&quot;."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1534851805, "post_id": 51865622, "comment_id": 90845254, "body": "Maybe ask at superuser.com or similar place, if you can reproduce the problem from command prompt without programming."}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1535136335, "post_id": 51865622, "comment_id": 90971048, "body": "This sounds backwards. Normally the program should run as standard user, and elevate a process only when elevation is required. If you require some process to run as administrator, one solution is to create a service."}, {"owner": {"reputation": 41, "user_id": 4493426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eos4b.jpg?s=128&g=1", "display_name": "Justin McBride", "link": "https://stackoverflow.com/users/4493426/justin-mcbride"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1535387498, "post_id": 51865622, "comment_id": 91037812, "body": "@Bill_Stewart -- it&#39;s a fair point, but I feel that this is appropriate. Most of the application&#39;s functions actually do require administrator privileges to perform their tasks properly. It&#39;s simply that another aspect of the same application is to spawn a detached child process, and this child does not (and should not to function properly) have those same permissions. One suggestion that I&#39;ve seen for installer binaries is to spawn two instances of the program: the first as normal privileges with no window, and a higher process with the GUI. Then, you can delegate back the launching."}], "owner": {"reputation": 41, "user_id": 4493426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eos4b.jpg?s=128&g=1", "display_name": "Justin McBride", "link": "https://stackoverflow.com/users/4493426/justin-mcbride"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1534363233, "creation_date": 1534363233, "question_id": 51865622, "link": "https://stackoverflow.com/questions/51865622/start-windows-qt-child-process-at-a-lower-trust-level", "title": "Start Windows Qt Child Process at a lower trust level", "body": "<p>I have a Qt 5.11 application that's being compiled for Windows and includes an application manifest that instructs Windows to run the application with Administrator privileges. </p>\n\n<pre><code>...\n&lt;requestedPrivileges&gt;\n  &lt;requestedExecutionLevel level=\"requireAdministrator\" uiAccess=\"false\"/&gt;\n&lt;/requestedPrivileges&gt;\n...\n</code></pre>\n\n<p>This run level is necessary for normal functioning of the program, as it's mostly a utility application to manage the installations of other programs (ie, the Program Files directory). </p>\n\n<p>However, I am starting a detached process from within this application. I would like to start this application as a normal user-level application, not with Administrator permissions (for a couple reasons, including the fact that the child application does not handle running with Administrator permissions well).</p>\n\n<p>Some things that I've tried:</p>\n\n<ul>\n<li>Running the main application as user-level.\n\n<ul>\n<li>Executing some of the processes as user-level is not a problem</li>\n<li>Other processes need to be executed as Administrator level. Trying to open an application that requires those higher-level privileges simply causes the QProcess:startDetached() to fail.</li>\n</ul></li>\n<li>Running the main application as Administrator-level\n\n<ul>\n<li>Executing some of the processes as user-level is what I'm trying to accomplish</li>\n<li>Running the other processes as Administrator is not an issue.</li>\n</ul></li>\n</ul>\n\n<p>Related question (without an answer):\n<a href=\"https://stackoverflow.com/q/23338959/4493426\">QT Start program as regular user</a></p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 2, "creation_date": 1534363420, "post_id": 51865617, "comment_id": 90683456, "body": "I&#39;d wager it has something to do with the fact that it has a non trivial constructor, so it doesn&#39;t conform to all the rules."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534363532, "post_id": 51865617, "comment_id": 90683500, "body": "In which mode you compile?"}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1534363563, "post_id": 51865617, "comment_id": 90683508, "body": "Citing <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2342.htm#std::pair-example\" rel=\"nofollow noreferrer\">open-std: N2342: POD&#39;s Revisited; Resolving Core Issue 568 (Revision 5) - <code>std::pair</code> example</a>: <i>&quot;<code>std::pair&lt;T,U&gt;</code> isn&#39;t a class aggregate, since it has a user-defined constructor, and that means it also isn&#39;t a POD.&quot;</i>."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534363628, "post_id": 51865617, "comment_id": 90683531, "body": "std::pair is a template and a special case of tuple, with constructors, specializations, and chocolate taffy, no? Hardly trivial."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1534363658, "post_id": 51865617, "comment_id": 90683545, "body": "Better use std::array&lt;int,2&gt; it is POD"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534363668, "post_id": 51865617, "comment_id": 90683549, "body": "@ChristopherPisz: <code>std::pair</code> is not a specialization of <code>std::tuple</code>.  The concepts may be related, but the templated types aren&#39;t."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1534363731, "post_id": 51865617, "comment_id": 90683577, "body": "@Ben I didn&#39;t say it was a specialization. I said it was a special case of. See <a href=\"https://en.cppreference.com/w/cpp/utility/pair\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/pair</a> and see the description."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1534363816, "post_id": 51865617, "comment_id": 90683617, "body": "@ChristopherPisz: cppreference is just wrong about that."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1534364145, "post_id": 51865617, "comment_id": 90683769, "body": "@ben No,it really isn&#39;t. You are confusing a human description with words describing its source. Two different things. A Tuple: &quot;An n-tuple is a sequence (or ordered list) of n elements, where n is a non-negative integer.&quot; A pair is that."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1534364361, "post_id": 51865617, "comment_id": 90683860, "body": "@ChristopherPisz: The concept &quot;a pair&quot; is a specific case of the concept &quot;a tuple&quot;.  But that was not your claim.  Your claim, and the erroneous sentence on cppreference, involve C++ types not English language concepts.  <code>std::pair</code> is the name of a C++ type template; it is not a &quot;human description&quot; of a concept."}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 1, "creation_date": 1534364509, "post_id": 51865617, "comment_id": 90683934, "body": "The standard describes a <code>std::tuple</code> with arity 2 as <i>&quot;similar&quot;</i> to <code>std::pair</code>. Quoting <a href=\"https://timsong-cpp.github.io/cppwp/tuple.general\" rel=\"nofollow noreferrer\">&#91;tuple.general/1&#93;</a> [<b>emphasis</b> mine]: <i>&quot;An instantiation of <code>tuple</code> with two arguments <b>is similar</b> to an instantiation of <code>pair</code> with the same two arguments&quot;</i>. As for cppreference&#39;s &quot;special case&quot; description, this is arguably quite a leap from &quot;similar&quot;."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1534366485, "post_id": 51865617, "comment_id": 90684742, "body": "@Ben  A &quot;tuple&quot; is a computer science concept. I&#39;d love to argue about how you interpret the phrase in question all day, but we aren&#39;t helping the OP at all and I&#39;ve got better things to do that pay me much better. Private message me if you&#39;d like to continue this pointless debate."}, {"owner": {"reputation": 21, "user_id": 6687230, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Oe24MwapbHE/AAAAAAAAAAI/AAAAAAAAAEQ/pC1isf9c8FM/photo.jpg?sz=128", "display_name": "Lei Theo Leu", "link": "https://stackoverflow.com/users/6687230/lei-theo-leu"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1534371208, "post_id": 51865617, "comment_id": 90686287, "body": "@dfri thanks for the answer!"}, {"owner": {"reputation": 21, "user_id": 6687230, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Oe24MwapbHE/AAAAAAAAAAI/AAAAAAAAAEQ/pC1isf9c8FM/photo.jpg?sz=128", "display_name": "Lei Theo Leu", "link": "https://stackoverflow.com/users/6687230/lei-theo-leu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534371524, "post_id": 51865617, "comment_id": 90686368, "body": "@Slava default for g++ 8.2, which is c++14"}], "owner": {"reputation": 21, "user_id": 6687230, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Oe24MwapbHE/AAAAAAAAAAI/AAAAAAAAAEQ/pC1isf9c8FM/photo.jpg?sz=128", "display_name": "Lei Theo Leu", "link": "https://stackoverflow.com/users/6687230/lei-theo-leu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "closed_date": 1534363474, "answer_count": 0, "score": 2, "last_activity_date": 1534363561, "creation_date": 1534363198, "question_id": 51865617, "link": "https://stackoverflow.com/questions/51865617/why-isnt-pairint-int-podplain-old-data", "closed_reason": "Duplicate", "title": "Why isn&#39;t pair&lt;int, int&gt; POD(Plain Old Data)", "body": "<p>POD's definition: <a href=\"https://en.cppreference.com/w/cpp/named_req/PODType\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/named_req/PODType</a></p>\n\n<p><code>pair&lt;int,int&gt;</code> seems to conform to all the rules above.</p>\n\n<p>However compile &amp; run </p>\n\n<pre><code>cout &lt;&lt; is_pod&lt;pair&lt;int, int&gt;&gt;::value &lt;&lt; endl;\n</code></pre>\n\n<p>gives me 0.</p>\n\n<p>I'm using g++ 8.2.0</p>\n"}, {"tags": ["c++", "directx", "direct3d", "game-development"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7296990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e9ae9afbdf78db93c213a0020f8937?s=128&d=identicon&r=PG&f=1", "display_name": "\u0421\u0435\u0440\u0433\u0435\u0439 \u0425\u0430\u0440\u0447\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/7296990/%d0%a1%d0%b5%d1%80%d0%b3%d0%b5%d0%b9-%d0%a5%d0%b0%d1%80%d1%87%d0%b5%d0%bd%d0%ba%d0%be"}, "is_accepted": false, "score": 1, "last_activity_date": 1534509439, "last_edit_date": 1534509439, "creation_date": 1534493244, "answer_id": 51890954, "question_id": 51865096, "link": "https://stackoverflow.com/questions/51865096/cant-get-antialiased-picture-from-direct3d/51890954#51890954", "title": "Can&#39;t get antialiased picture from Direct3D", "body": "<p>Okay, I've just figured out the reason of this stairs effect:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ksFW1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ksFW1.png\" alt=\"enter image description here\"></a></p>\n\n<p>The reason is that I passed the same width and height values for CreateWindow WinApi function, and for DXGI_SWAP_CHAIN_DESC::BufferDesc. Meanwhile, these should be different because CreateWindow takes <em>outer</em> width and height of a window to create (window rectangle), while BufferDesc should receive <em>inner</em> values (window client area rectangle). Because of that actual area on screen was <em>smaller</em> than swap chain buffer and the result of rendering was presumably resampled to fit the rectangle, which was introducing the aliasing after MSAA was already applied.</p>\n\n<p>Fixing the issue gave a much cleaner result (4x MSAA is applied here):</p>\n\n<p><a href=\"https://i.stack.imgur.com/bmFlA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bmFlA.png\" alt=\"enter image description here\"></a></p>\n\n<p>But the question with texture aliasing is still open:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TGGV4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TGGV4.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 41, "user_id": 7296990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e9ae9afbdf78db93c213a0020f8937?s=128&d=identicon&r=PG&f=1", "display_name": "\u0421\u0435\u0440\u0433\u0435\u0439 \u0425\u0430\u0440\u0447\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/7296990/%d0%a1%d0%b5%d1%80%d0%b3%d0%b5%d0%b9-%d0%a5%d0%b0%d1%80%d1%87%d0%b5%d0%bd%d0%ba%d0%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534509439, "creation_date": 1534360904, "last_edit_date": 1534433311, "question_id": 51865096, "link": "https://stackoverflow.com/questions/51865096/cant-get-antialiased-picture-from-direct3d", "title": "Can&#39;t get antialiased picture from Direct3D", "body": "<p>I'm taking my first steps in programming with Direct3D. I have a very basic pipeline setup, and all I want to get from it is an antialiased smooth image. But I get this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FPGI6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FPGI6.png\" alt=\"screenshot\"></a>\nFirst, I can't get rid of stair effect though I have 4x MSAA enabled already in my pipeline (DXGI_SAMPLE_DESC::Count is 4 and Quality is 0):\n<a href=\"https://i.stack.imgur.com/uI1cm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uI1cm.png\" alt=\"stairs\"></a></p>\n\n<p>And second, I get this noisy texturing though I have mipmaps generated and LINEAR filtering set in the sampler state.\n<a href=\"https://i.stack.imgur.com/9TzAq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9TzAq.png\" alt=\"noisy texturing\"></a></p>\n\n<p>Am I missing something or doing wrong? </p>\n\n<p>Here is my code:</p>\n\n<p>1) Renderer class:</p>\n\n<pre><code>#include \"Scene.h\" // Custom class that contains vertex and index buffer contents for every rendered mesh.\n#include \"Camera.h\" // Custom class that contains camera position and fov.\n\n#include &lt;wrl/client.h&gt;\nusing Microsoft::WRL::ComPtr;\n\n#include &lt;DirectXMath.h&gt;\nusing namespace DirectX;\n\n#include &lt;map&gt;\n\n#include \"generated\\VertexShader.h\"\n#include \"generated\\PixelShader.h\"\n\nclass Renderer\n{\npublic:\n    Renderer(HWND hWnd, int wndWidth, int wndHeight, const Scene&amp; scene, const Camera&amp; camera);\n\n    void Render();\n\n    void SwitchToWireframe();\n    void SwitchToSolid();\n\nprotected:\n    void CreateDeviceAndSwapChain();\n    void CreateDepthStencil();\n    void CreateInputLayout();\n    void CreateVertexShader();\n    void CreatePixelShader();\n    void CreateRasterizerStates();\n    void CreateBlendState();\n    void CreateSamplerState();\n    void CreateBuffer(ID3D11Buffer** buffer, \n        D3D11_USAGE usage, D3D11_BIND_FLAG bindFlags,\n        UINT cpuAccessFlags, UINT miscFlags,\n        UINT sizeOfBuffer, UINT sizeOfBufferElement, const void* initialData);\n    void CreateTexture2DAndSRV(const Scene::Texture&amp; texture, ID3D11ShaderResourceView** view);\n    void CreateTexturesAndViews();\n    void GenerateMips();\n\nprotected:\n    const Scene&amp; m_scene;\n\n    const Camera&amp; m_camera;\n    DWORD m_cameraLastUpdateTickCount;\n\n    HWND m_windowHandle;\n    int m_windowWidth; \n    int m_windowHeight;\n\n    DXGI_SAMPLE_DESC m_sampleDesc;\n\n    ComPtr&lt;IDXGISwapChain&gt; m_swapChain;\n    ComPtr&lt;ID3D11Texture2D&gt; m_swapChainBuffer;\n    ComPtr&lt;ID3D11RenderTargetView&gt; m_swapChainBufferRTV;\n    ComPtr&lt;ID3D11Device&gt; m_device;\n    ComPtr&lt;ID3D11DeviceContext&gt; m_deviceContext;\n    ComPtr&lt;ID3D11Debug&gt; m_debugger;\n    ComPtr&lt;ID3D11Texture2D&gt; m_depthStencilTexture;\n    ComPtr&lt;ID3D11DepthStencilState&gt; m_depthStencilState;\n    ComPtr&lt;ID3D11DepthStencilView&gt; m_depthStencilView;\n    ComPtr&lt;ID3D11InputLayout&gt; m_inputLayout;\n    ComPtr&lt;ID3D11VertexShader&gt; m_vertexShader;\n    ComPtr&lt;ID3D11PixelShader&gt; m_pixelShader;\n    ComPtr&lt;ID3D11RasterizerState&gt; m_solidRasterizerState;\n    ComPtr&lt;ID3D11RasterizerState&gt; m_wireframeRasterizerState;\n    ComPtr&lt;ID3D11BlendState&gt; m_blendState;\n    ComPtr&lt;ID3D11SamplerState&gt; m_linearSamplerState;\n\n    std::map&lt;std::string, ComPtr&lt;ID3D11ShaderResourceView&gt;&gt; m_diffuseMapViews;\n    std::map&lt;std::string, ComPtr&lt;ID3D11ShaderResourceView&gt;&gt; m_normalMapViews;\n\n    XMMATRIX m_worldViewMatrix;\n\n    ID3D11RasterizerState* m_currentRasterizerState;\n};\n\nvoid Renderer::CreateDeviceAndSwapChain()\n{\n    HRESULT hr;\n\n    DXGI_SWAP_CHAIN_DESC swapChainDesc = {};\n    swapChainDesc.BufferDesc.Width = m_windowWidth;\n    swapChainDesc.BufferDesc.Height = m_windowHeight;\n    swapChainDesc.BufferDesc.RefreshRate.Numerator = 1;\n    swapChainDesc.BufferDesc.RefreshRate.Denominator = 60;\n    swapChainDesc.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM_SRGB;\n    swapChainDesc.BufferDesc.ScanlineOrdering = DXGI_MODE_SCANLINE_ORDER_PROGRESSIVE;\n    swapChainDesc.BufferDesc.Scaling = DXGI_MODE_SCALING_CENTERED;\n    swapChainDesc.SampleDesc = m_sampleDesc;\n    swapChainDesc.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;\n    swapChainDesc.BufferCount = 1;\n    swapChainDesc.OutputWindow = m_windowHandle;\n    swapChainDesc.Windowed = TRUE;\n    swapChainDesc.SwapEffect = DXGI_SWAP_EFFECT_DISCARD;\n    swapChainDesc.Flags = DXGI_SWAP_CHAIN_FLAG_ALLOW_MODE_SWITCH;\n\n    D3D_FEATURE_LEVEL desiredFeatureLevels[] = { D3D_FEATURE_LEVEL_10_1 };\n    D3D_FEATURE_LEVEL featureLevel;\n\n    hr = D3D11CreateDeviceAndSwapChain(NULL, D3D_DRIVER_TYPE_HARDWARE, NULL,\n        D3D11_CREATE_DEVICE_DEBUG | D3D11_CREATE_DEVICE_PREVENT_INTERNAL_THREADING_OPTIMIZATIONS,\n        desiredFeatureLevels, 1, D3D11_SDK_VERSION, &amp;swapChainDesc,\n        m_swapChain.GetAddressOf(), m_device.GetAddressOf(), &amp;featureLevel, \n        m_deviceContext.GetAddressOf());\n\n    if (FAILED(hr))\n    {\n        hr = D3D11CreateDeviceAndSwapChain(NULL, D3D_DRIVER_TYPE_WARP, NULL,\n            D3D11_CREATE_DEVICE_DEBUG | D3D11_CREATE_DEVICE_PREVENT_INTERNAL_THREADING_OPTIMIZATIONS,\n            desiredFeatureLevels, 1, D3D11_SDK_VERSION, &amp;swapChainDesc,\n            m_swapChain.GetAddressOf(), m_device.GetAddressOf(), &amp;featureLevel,\n            m_deviceContext.GetAddressOf());\n    }\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create device or swap chain\");\n\n    hr = m_device-&gt;QueryInterface(m_debugger.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to get debugger interface\");\n\n    hr = m_swapChain-&gt;GetBuffer(0, __uuidof(m_swapChainBuffer),\n        (void**)m_swapChainBuffer.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to get swap chain buffer\");\n\n    hr = m_device-&gt;CreateRenderTargetView(m_swapChainBuffer.Get(), NULL, \n        m_swapChainBufferRTV.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create RTV for swap chain buffer\");\n}\n\nvoid Renderer::CreateDepthStencil()\n{\n    HRESULT hr;\n\n    D3D11_TEXTURE2D_DESC tdesc;\n    tdesc.Width = m_windowWidth;\n    tdesc.Height = m_windowHeight;\n    tdesc.MipLevels = 1;\n    tdesc.ArraySize = 1;\n    tdesc.Format = DXGI_FORMAT_D16_UNORM;\n    tdesc.SampleDesc = m_sampleDesc;\n    tdesc.Usage = D3D11_USAGE_DEFAULT;\n    tdesc.BindFlags = D3D11_BIND_DEPTH_STENCIL;\n    tdesc.CPUAccessFlags = 0;\n    tdesc.MiscFlags = 0;\n\n    hr = m_device-&gt;CreateTexture2D(&amp;tdesc, NULL, m_depthStencilTexture.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create depth stencil texture\");\n\n    D3D11_DEPTH_STENCIL_VIEW_DESC dsvdesc;\n    dsvdesc.Format = DXGI_FORMAT_D16_UNORM;\n    dsvdesc.ViewDimension = m_sampleDesc.Count &gt; 1 \n        ? D3D11_DSV_DIMENSION_TEXTURE2DMS \n        : D3D11_DSV_DIMENSION_TEXTURE2D;\n    dsvdesc.Flags = 0;\n    dsvdesc.Texture2D.MipSlice = 0;\n\n    hr = m_device-&gt;CreateDepthStencilView(m_depthStencilTexture.Get(), &amp;dsvdesc, \n        m_depthStencilView.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create depth stencil view\");\n\n    D3D11_DEPTH_STENCIL_DESC dsdesc;\n    dsdesc.DepthEnable = TRUE;\n    dsdesc.DepthWriteMask = D3D11_DEPTH_WRITE_MASK_ALL;\n    dsdesc.DepthFunc = D3D11_COMPARISON_LESS;\n    dsdesc.StencilEnable = FALSE;\n    dsdesc.StencilReadMask = 0;\n    dsdesc.StencilWriteMask = 0;\n    dsdesc.FrontFace = {};\n    dsdesc.BackFace = {};\n\n    hr = m_device-&gt;CreateDepthStencilState(&amp;dsdesc, m_depthStencilState.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create depth stencil state\");\n}\n\nvoid Renderer::CreateInputLayout()\n{\n    HRESULT hr;\n\n    D3D11_INPUT_ELEMENT_DESC iedescs[] = {\n        { \"POSITION\", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },\n    { \"NORMAL\", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },\n    { \"TEXCOORD\", 0, DXGI_FORMAT_R32G32_FLOAT, 0, D3D11_APPEND_ALIGNED_ELEMENT, D3D11_INPUT_PER_VERTEX_DATA, 0 },\n    };\n\n    hr = m_device-&gt;CreateInputLayout(iedescs, 3,\n        g_vertexShader, sizeof(g_vertexShader),\n        m_inputLayout.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create input layout\");\n}\n\nvoid Renderer::CreateVertexShader()\n{\n    HRESULT hr;\n\n    hr = m_device-&gt;CreateVertexShader(g_vertexShader, sizeof(g_vertexShader), \n        NULL, m_vertexShader.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create vertex shader\");\n}\n\nvoid Renderer::CreatePixelShader()\n{\n    HRESULT hr;\n\n    hr = m_device-&gt;CreatePixelShader(g_pixelShader, sizeof(g_pixelShader), \n        NULL, m_pixelShader.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create pixel shader\");\n}\n\nvoid Renderer::CreateRasterizerStates()\n{\n    HRESULT hr;\n\n    D3D11_RASTERIZER_DESC rdesc;\n    rdesc.FillMode = D3D11_FILL_SOLID;\n    rdesc.CullMode = D3D11_CULL_FRONT;\n    rdesc.FrontCounterClockwise = FALSE;\n    rdesc.DepthBias = 0;\n    rdesc.DepthBiasClamp = 0.0f;\n    rdesc.SlopeScaledDepthBias = 0.0f;\n    rdesc.DepthClipEnable = TRUE;\n    rdesc.ScissorEnable = FALSE;\n    rdesc.MultisampleEnable = m_sampleDesc.Count &gt; 1 ? TRUE : FALSE;\n    rdesc.AntialiasedLineEnable = m_sampleDesc.Count &gt; 1 ? TRUE : FALSE;\n\n    hr = m_device-&gt;CreateRasterizerState(&amp;rdesc, m_solidRasterizerState.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create rasterizer state\");\n\n    rdesc.FillMode = D3D11_FILL_WIREFRAME;\n\n    hr = m_device-&gt;CreateRasterizerState(&amp;rdesc, m_wireframeRasterizerState.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create rasterizer state\");\n\n    m_currentRasterizerState = m_solidRasterizerState.Get();\n}\n\nvoid Renderer::CreateSamplerState()\n{\n    HRESULT hr;\n\n    D3D11_SAMPLER_DESC smdesc;\n    smdesc.Filter = D3D11_FILTER_MIN_MAG_MIP_LINEAR;\n    smdesc.AddressU = D3D11_TEXTURE_ADDRESS_WRAP;\n    smdesc.AddressV = D3D11_TEXTURE_ADDRESS_WRAP;\n    smdesc.AddressW = D3D11_TEXTURE_ADDRESS_WRAP;\n    smdesc.MipLODBias = 0.0f;\n    smdesc.MaxAnisotropy = 0;\n    smdesc.ComparisonFunc = D3D11_COMPARISON_ALWAYS;\n    smdesc.BorderColor[4] = {};\n    FLOAT MinLOD = 0.0;\n    FLOAT MaxLOD = 0.0;\n\n    hr = m_device-&gt;CreateSamplerState(&amp;smdesc, m_linearSamplerState.GetAddressOf());\n\n    if (FAILED(hr))\n        throw new std::exception(\"Failed to create sampler state\");\n}\n\nvoid Renderer::CreateBlendState()\n{\n    HRESULT hr;\n\n    D3D11_BLEND_DESC bdesc;\n    bdesc.AlphaToCoverageEnable = FALSE;\n    bdesc.IndependentBlendEnable = FALSE;\n    bdesc.RenderTarget[0].BlendEnable = FALSE;\n    bdesc.RenderTarget[0].SrcBlend = D3D11_BLEND_ONE;\n    bdesc.RenderTarget[0].DestBlend = D3D11_BLEND_ZERO;\n    bdesc.RenderTarget[0].BlendOp = D3D11_BLEND_OP_ADD;\n    bdesc.RenderTarget[0].SrcBlendAlpha = D3D11_BLEND_ONE;\n    bdesc.RenderTarget[0].DestBlendAlpha = D3D11_BLEND_ZERO;\n    bdesc.RenderTarget[0].BlendOpAlpha = D3D11_BLEND_OP_ADD;\n    bdesc.RenderTarget[0].RenderTargetWriteMask = D3D11_COLOR_WRITE_ENABLE_ALL;\n\n    hr = m_device-&gt;CreateBlendState(&amp;bdesc, m_blendState.GetAddressOf());\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create blend state\");\n}\n\n void Renderer::CreateBuffer(ID3D11Buffer** buffer, \n     D3D11_USAGE usage, D3D11_BIND_FLAG bindFlags,\n    UINT cpuAccessFlags, UINT miscFlags, \n    UINT sizeOfBuffer, UINT sizeOfBufferElement, const void* initialData)\n{\n    HRESULT hr;\n\n    D3D11_BUFFER_DESC bdesc;\n    bdesc.ByteWidth = sizeOfBuffer;\n    bdesc.Usage = usage;\n    bdesc.BindFlags = bindFlags;\n    bdesc.CPUAccessFlags = cpuAccessFlags;\n    bdesc.MiscFlags = miscFlags;\n    bdesc.StructureByteStride = sizeOfBufferElement;\n\n    D3D11_SUBRESOURCE_DATA bdata;\n    bdata.pSysMem = initialData;\n    bdata.SysMemPitch = 0;\n    bdata.SysMemSlicePitch = 0;\n\n    hr = m_device-&gt;CreateBuffer(&amp;bdesc, &amp;bdata, buffer);\n\n    if (FAILED(hr))\n        throw std::exception(\"Failed to create buffer\");\n}\n\n void Renderer::CreateTexture2DAndSRV(const Scene::Texture&amp; sceneTexture, ID3D11ShaderResourceView** view)\n {\n     HRESULT hr;\n\n     constexpr DXGI_FORMAT texformat = DXGI_FORMAT_R32G32B32A32_FLOAT;\n\n     D3D11_TEXTURE2D_DESC tdesc;\n     tdesc.Width = sceneTexture.width;\n     tdesc.Height = sceneTexture.height;\n     tdesc.MipLevels = 0;\n     tdesc.ArraySize = 1;\n     tdesc.Format = texformat;\n     tdesc.SampleDesc.Count = 1;\n     tdesc.SampleDesc.Quality = 0;\n     tdesc.Usage = D3D11_USAGE_DEFAULT;\n     tdesc.BindFlags = D3D11_BIND_SHADER_RESOURCE | D3D11_BIND_RENDER_TARGET;\n     tdesc.CPUAccessFlags = 0;\n     tdesc.MiscFlags = D3D11_RESOURCE_MISC_GENERATE_MIPS;\n\n     ComPtr&lt;ID3D11Texture2D&gt; texture2d;\n\n     hr = m_device-&gt;CreateTexture2D(&amp;tdesc, NULL, texture2d.GetAddressOf());\n\n     if (FAILED(hr))\n         throw std::exception(\"Failed to create texture\");\n\n\n     D3D11_SUBRESOURCE_DATA srdata;\n     srdata.pSysMem = sceneTexture.data;\n     srdata.SysMemPitch = sceneTexture.width * sizeof(float) * 4;\n     srdata.SysMemSlicePitch = 0;\n\n     m_deviceContext-&gt;UpdateSubresource(texture2d.Get(), 0, NULL, \n         srdata.pSysMem, srdata.SysMemPitch, srdata.SysMemSlicePitch);\n\n\n     D3D11_SHADER_RESOURCE_VIEW_DESC srvdesc;\n     srvdesc.Format = texformat;\n     srvdesc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE2D;\n     srvdesc.Texture2D.MostDetailedMip = 0;\n     srvdesc.Texture2D.MipLevels = -1;\n\n     ComPtr&lt;ID3D11ShaderResourceView&gt; shaderResourceView;\n\n     hr = m_device-&gt;CreateShaderResourceView(texture2d.Get(), &amp;srvdesc, view);\n\n     if (FAILED(hr))\n         throw std::exception(\"Failed to create shader resource view\");\n }\n\n void Renderer::CreateTexturesAndViews()\n {\n     for (auto it = m_scene.materials.cbegin(); it != m_scene.materials.cend(); it++)\n     {\n         //don't know what's the problem but if I don't place initialized ComPtr&lt;...&gt; instance into a map\n         //then further .GetAddessOf() fails.\n         m_diffuseMapViews.emplace(it-&gt;first, ComPtr&lt;ID3D11ShaderResourceView&gt;());\n         m_normalMapViews.emplace(it-&gt;first, ComPtr&lt;ID3D11ShaderResourceView&gt;()); \n\n         CreateTexture2DAndSRV(it-&gt;second.diffuseMap, m_diffuseMapViews[it-&gt;first].GetAddressOf());\n         CreateTexture2DAndSRV(it-&gt;second.normalMap, m_normalMapViews[it-&gt;first].GetAddressOf());\n     }\n }\n\n void Renderer::GenerateMips()\n {\n     for (auto it = m_diffuseMapViews.begin(); it != m_diffuseMapViews.end(); it++)\n         m_deviceContext-&gt;GenerateMips(it-&gt;second.Get());\n     for (auto it = m_normalMapViews.begin(); it != m_normalMapViews.end(); it++)\n         m_deviceContext-&gt;GenerateMips(it-&gt;second.Get());\n }\n\nRenderer::Renderer(HWND hWnd, int windowWidth, int windowHeight, \n    const Scene&amp; scene, const Camera&amp; camera)\n    : m_scene(scene)\n    , m_camera(camera)\n    , m_cameraLastUpdateTickCount(0)\n    , m_windowHandle(hWnd)\n    , m_windowWidth(windowWidth)\n    , m_windowHeight(windowHeight)\n{\n    m_sampleDesc.Count = 4;\n    m_sampleDesc.Quality = 0;\n\n    CreateDeviceAndSwapChain();\n    CreateDepthStencil();\n    CreateInputLayout();\n    CreateVertexShader();\n    CreatePixelShader();\n    CreateRasterizerStates();\n    CreateBlendState();\n    CreateSamplerState();\n    CreateTexturesAndViews();\n    GenerateMips();\n\n    // Setting up IA stage\n\n    m_deviceContext-&gt;IASetPrimitiveTopology(\n        D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);\n\n    m_deviceContext-&gt;IASetInputLayout(m_inputLayout.Get());\n\n    // Setting up VS stage\n\n    m_deviceContext-&gt;VSSetShader(m_vertexShader.Get(), 0, 0);\n\n    // Setting up RS stage\n\n    D3D11_VIEWPORT viewport;\n    viewport.TopLeftX = 0.0f;\n    viewport.TopLeftY = 0.0f;\n    viewport.Width = static_cast&lt;FLOAT&gt;(m_windowWidth);\n    viewport.Height = static_cast&lt;FLOAT&gt;(m_windowHeight);\n    viewport.MinDepth = 0.0f;\n    viewport.MaxDepth = 1.0f;\n\n    m_deviceContext-&gt;RSSetViewports(1, &amp;viewport);\n\n    // Setting up PS stage\n\n    m_deviceContext-&gt;PSSetSamplers(0, 1, m_linearSamplerState.GetAddressOf());\n    m_deviceContext-&gt;PSSetShader(m_pixelShader.Get(), 0, 0);\n\n    // Setting up OM stage\n\n    m_deviceContext-&gt;OMSetBlendState(m_blendState.Get(), NULL, 0xffffffff);\n    m_deviceContext-&gt;OMSetDepthStencilState(m_depthStencilState.Get(), 0);\n    m_deviceContext-&gt;OMSetRenderTargets(1, m_swapChainBufferRTV.GetAddressOf(), m_depthStencilView.Get());\n}\n\nvoid Renderer::Render()\n{\n    constexpr float background[4] = { 0.047f, 0.0487f, 0.066f, 1.0f };\n\n    // Setting up view matix\n\n    if (m_cameraLastUpdateTickCount\n        != m_camera.GetLastUpdateTickCount())\n    {\n        const Float3&amp; camFrom = m_camera.GetFrom();\n        const Float3&amp; camAt = m_camera.GetAt();\n        const Float3&amp; camUp = m_camera.GetUp();\n\n        m_cameraLastUpdateTickCount = m_camera.GetLastUpdateTickCount();\n\n        FXMVECTOR from = XMVectorSet(camFrom.x, camFrom.y, camFrom.z, 1.0f);\n        FXMVECTOR at = XMVectorSet(camAt.x, camAt.y, camAt.z, 1.0f);\n        FXMVECTOR up = XMVectorSet(camUp.x, camUp.y, camUp.z, 0.0f);\n\n        FXMVECTOR dir = XMVectorSubtract(at, from);\n\n        FXMVECTOR x = XMVector3Cross(dir, up);\n        FXMVECTOR up2 = XMVector3Cross(x, dir);\n\n        XMMATRIX lookTo = XMMatrixLookToRH(from, dir, up2);\n\n        float scalef = 1.0f / XMVectorGetByIndex(XMVector3Length(dir), 0);\n\n        XMMATRIX scale = XMMatrixScaling(scalef, scalef, scalef);\n\n        float aspect = float(m_windowWidth) / m_windowHeight;\n        float fov = m_camera.GetFov() / 180.0f * 3.14f;\n\n        XMMATRIX persp = XMMatrixPerspectiveFovRH(fov, aspect, 0.1f, 1000.0f);\n\n        m_worldViewMatrix = XMMatrixMultiply(XMMatrixMultiply(lookTo, scale), persp);\n    }\n    else\n    {\n        return;\n    }\n\n    m_deviceContext-&gt;ClearDepthStencilView(m_depthStencilView.Get(), D3D11_CLEAR_DEPTH, 1.0f, 0);\n    m_deviceContext-&gt;ClearRenderTargetView(m_swapChainBufferRTV.Get(), background);\n\n    for (auto imesh = m_scene.meshes.cbegin(); imesh != m_scene.meshes.cend(); imesh++)\n    {\n        // Creating vertex buffer\n\n        ComPtr&lt;ID3D11Buffer&gt; vertexBuffer;\n\n        CreateBuffer(vertexBuffer.GetAddressOf(), \n            D3D11_USAGE_DEFAULT, D3D11_BIND_VERTEX_BUFFER, 0, 0,\n            sizeof(Scene::Vertex) * imesh-&gt;vertices.size(), sizeof(Scene::Vertex),\n            imesh-&gt;vertices.data());\n\n        // Creating index buffer\n\n        ComPtr&lt;ID3D11Buffer&gt; indexBuffer;\n\n        CreateBuffer(indexBuffer.GetAddressOf(),\n            D3D11_USAGE_DEFAULT, D3D11_BIND_INDEX_BUFFER, 0, 0,\n            sizeof(unsigned int) * imesh-&gt;indices.size(), sizeof(unsigned int),\n            imesh-&gt;indices.data());\n\n        // Creating constant buffer\n\n        ComPtr&lt;ID3D11Buffer&gt; constantBuffer;\n\n        CreateBuffer(constantBuffer.GetAddressOf(),\n            D3D11_USAGE_IMMUTABLE, D3D11_BIND_CONSTANT_BUFFER, 0, 0,\n            sizeof(XMMATRIX), sizeof(XMMATRIX),\n            &amp;m_worldViewMatrix);\n\n        // Setting up IA stage\n\n        ID3D11Buffer* vertexBuffers[8] = { vertexBuffer.Get() };\n        unsigned int vertexBufferStrides[8] = { sizeof(Scene::Vertex) };\n        unsigned int vertexBufferOffsets[8] = { 0 };\n\n        m_deviceContext-&gt;IASetVertexBuffers(0, 8,\n            vertexBuffers, vertexBufferStrides, vertexBufferOffsets);\n\n        m_deviceContext-&gt;IASetIndexBuffer(indexBuffer.Get(), DXGI_FORMAT_R32_UINT, 0);\n\n        // Setting up VS stage\n\n        m_deviceContext-&gt;VSSetConstantBuffers(0, 1, constantBuffer.GetAddressOf());\n\n        // Setting up RS stage\n\n        m_deviceContext-&gt;RSSetState(m_currentRasterizerState);\n\n        // Setting up PS stage\n\n        ID3D11ShaderResourceView* srvs[2] = { };\n        srvs[0] = m_diffuseMapViews.at(imesh-&gt;material).Get();\n        srvs[1] = m_normalMapViews.at(imesh-&gt;material).Get();\n\n        m_deviceContext-&gt;PSSetShaderResources(0, 2, srvs);\n\n        // Drawing\n\n        m_deviceContext-&gt;DrawIndexed(imesh-&gt;indices.size(), 0, 0);\n    }\n\n    m_swapChain-&gt;Present(0, 0);\n}\n\nvoid Renderer::SwitchToWireframe()\n{\n    m_currentRasterizerState = m_wireframeRasterizerState.Get();\n    m_camera.UpdateLastUpdateTickCount();\n}\n\nvoid Renderer::SwitchToSolid()\n{\n    m_currentRasterizerState = m_solidRasterizerState.Get();\n    m_camera.UpdateLastUpdateTickCount();\n}\n</code></pre>\n\n<p>2) Vertex shader</p>\n\n<pre><code>struct VS_INPUT\n{\n    float3 position : POSITION;\n    float3 normal : NORMAL;\n    float2 texcoord : TEXCOORD;\n};\n\nstruct VS_OUTPUT\n{\n    float4 position : SV_POSITION;\n    float3 normal : NORMAL;\n    float2 texcoord : TEXCOORD;\n};\n\ncbuffer Matrices\n{\n    matrix worldViewMatrix;\n}\n\nVS_OUTPUT main(VS_INPUT input)\n{\n    VS_OUTPUT output;\n\n    output.position = mul(worldViewMatrix, float4(input.position.xyz, 1.0));\n    output.normal = input.normal;\n    output.texcoord = input.texcoord;\n\n    return output;\n}\n</code></pre>\n\n<p>3) Pixel shader</p>\n\n<pre><code>Texture2D DiffuseMap : register(t0);\nTexture2D NormalMap: register(t1);\n\nSamplerState LinearSampler : register(s0);\n\nfloat4 main(VS_OUTPUT input) : SV_TARGET\n{\n    float3 light = normalize(float3(2.87, -0.36, 1.68));\n\n    float3 diffuseColor = DiffuseMap.Sample(LinearSampler, input.texcoord);\n    float3 normalDisplace = float3(0.0, 0.0, 1.0) - NormalMap.Sample(LinearSampler, input.texcoord);\n\n    float illumination = clamp(dot(light, input.normal + normalDisplace), 0.2, 1.0);\n\n    return float4(mul(diffuseColor, illumination), 1.0);\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "cpu", "cpu-usage"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534359172, "post_id": 51864638, "comment_id": 90681611, "body": "The first setting is about projects. The second setting is about individual translation units."}, {"owner": {"reputation": 973, "user_id": 6540193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592f74822b1858f77a3c2fb5c4955b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra K", "link": "https://stackoverflow.com/users/6540193/sandra-k"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534359271, "post_id": 51864638, "comment_id": 90681663, "body": "@drescherjm So if I set 12 projects, and 4 compilations, will it build 12 projects at the same time, 4 files per project? Total of 4x12 files"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534359272, "post_id": 51864638, "comment_id": 90681665, "body": "BTW, things have improved over the years however I still have long periods of building that has the CPU no where near 100%. However I believe a lot of this is related to moc (buinding c++ Qt projects)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534359336, "post_id": 51864638, "comment_id": 90681697, "body": "<b><i>So I set 12 projects, and 4 compilations, will it build 4 files per project and 12 projects at the same time, total of 4x12 files simultaneously?</i></b> I don&#39;t think you want to change the second setting. I believe 0 means unlimited."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1534359455, "post_id": 51864638, "comment_id": 90681752, "body": "To increase parallelism in your build, step one is to try to reduce dependencies between your modules. There&#39;s no &quot;magic&quot; setting that can do that for you, just hard work/refactoring."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534359502, "post_id": 51864638, "comment_id": 90681770, "body": "I fully agree with that. Dependencies between projects cause the first setting to not be used to its maximum."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534359825, "post_id": 51864638, "comment_id": 90681921, "body": "@drescherjm &quot;I believe a lot of this is related to moc &quot; - with a sufficiently recent Qt (using 5.11.1 here) and a sufficiently recent cmake (3.11.2+) and a sufficiently recent ninja, you can get moc to run in parallel with the rest of your build quite nicely (modulo hard dependencies on the output of course)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534359959, "post_id": 51864638, "comment_id": 90681978, "body": "I am using CMake but have not tried ninja yet."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1534360029, "post_id": 51864638, "comment_id": 90682010, "body": "@drescherjm You should. It blows both msbuild and make out of the water. Especially versions from within the last 6-8 months."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534360886, "post_id": 51864638, "comment_id": 90682398, "body": "@drescherjm : be sure to use <a href=\"https://cmake.org/cmake/help/v3.0/prop_tgt/AUTOMOC.html\" rel=\"nofollow noreferrer\">AUTOMOC</a> in your CMakeLists.text files with cmake 3.11.2 and newer (they made some very nice parallelism improvements in 3.11 and 3.11.2 fixed some annoying bugs in that regard)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534362028, "post_id": 51864638, "comment_id": 90682871, "body": "Thanks. I don&#39;t think we should further the discussion on this point since we may be drifting off topic of the question. @SandraK did not mention Qt."}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1535409486, "post_id": 51864638, "comment_id": 91046470, "body": "@SandraK for code to solve problem posed in your ( deleted ) question <a href=\"https://stackoverflow.com/q/52046650/16582\">stackoverflow.com/q/52046650/16582</a> please see <a href=\"https://ideone.com/hst1zw\" rel=\"nofollow noreferrer\">ideone.com/hst1zw</a>"}, {"owner": {"reputation": 973, "user_id": 6540193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592f74822b1858f77a3c2fb5c4955b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra K", "link": "https://stackoverflow.com/users/6540193/sandra-k"}, "reply_to_user": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1535418246, "post_id": 51864638, "comment_id": 91048246, "body": "@ravenspoint Guardian angel ! Got it, would you like me to reopen the question and post the answer? I am fine both ways"}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1535419647, "post_id": 51864638, "comment_id": 91048511, "body": "@SandraK I don&#39;t know why you closed it, just as as I was finishing the code.  So, your call."}, {"owner": {"reputation": 973, "user_id": 6540193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592f74822b1858f77a3c2fb5c4955b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra K", "link": "https://stackoverflow.com/users/6540193/sandra-k"}, "reply_to_user": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1535420347, "post_id": 51864638, "comment_id": 91048618, "body": "@ravenspoint It seems like I have not tried anything and will get closed/down voted. I reopened now. Thanks again !"}], "answers": [{"comments": [{"owner": {"reputation": 973, "user_id": 6540193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592f74822b1858f77a3c2fb5c4955b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra K", "link": "https://stackoverflow.com/users/6540193/sandra-k"}, "edited": false, "score": 0, "creation_date": 1534432585, "post_id": 51872699, "comment_id": 90712235, "body": "I never thought of that! Thank you"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 1, "last_activity_date": 1534407921, "creation_date": 1534407921, "answer_id": 51872699, "question_id": 51864638, "link": "https://stackoverflow.com/questions/51864638/maximum-concurrent-c-compilations-vs-maximum-number-of-parallel-project-builds/51872699#51872699", "title": "Maximum Concurrent C++ Compilations VS Maximum Number Of Parallel Project Builds", "body": "<p>It can often be insightful to see all the files considered in a build. It's not uncommon to access 10.000 files, especially when using bigger libraries.</p>\n\n<p>The fastest way to access these files would be if they're in RAM already, i.e. the OS file cache. Otherwise, an SSD is a reasonable alternative. But if they have to come from a mechanical HDD, the CPU will spend a large amount of time just sleeping while it waits for files to be read.</p>\n\n<p>Hence, the way to improve CPU utilization is to make sure it's not waiting for I/O. Hardware is much cheaper than C++ programmers; get a fast SSD and sufficient RAM.</p>\n"}], "owner": {"reputation": 973, "user_id": 6540193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592f74822b1858f77a3c2fb5c4955b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Sandra K", "link": "https://stackoverflow.com/users/6540193/sandra-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 51872699, "answer_count": 1, "score": 0, "last_activity_date": 1534407921, "creation_date": 1534358771, "question_id": 51864638, "link": "https://stackoverflow.com/questions/51864638/maximum-concurrent-c-compilations-vs-maximum-number-of-parallel-project-builds", "title": "Maximum Concurrent C++ Compilations VS Maximum Number Of Parallel Project Builds", "body": "<p>I noticed earlier that when my VS is building my big c++ solution, my CPU usage was less than 25%. Wondering if I can set VS to always use 100% CPU, I did some <a href=\"https://stackoverflow.com/questions/35974304/c-how-to-limit-visual-studios-multi-processor-compilation\"><strong>research</strong></a>:</p>\n\n<p>Found two options that can be configured for this purpose:</p>\n\n<ul>\n<li>Maximum Number Of Parallel Project Builds</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/y1k1R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y1k1R.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Maximum Concurrent C++ Compilations</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/hmiBl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hmiBl.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is the difference? </p>\n\n<p>And to achieve my goal, bonus question is how can I set VS to use more CPU when it builds?</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "wrl"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534358365, "post_id": 51864528, "comment_id": 90681222, "body": "&quot;Starting with stdafx&quot; - maybe get rid of that one already, for a build with fewer surprises."}, {"owner": {"reputation": 81, "user_id": 8335473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86005fd871fae755a3ba0e152b600076?s=128&d=identicon&r=PG&f=1", "display_name": "Tbone281", "link": "https://stackoverflow.com/users/8335473/tbone281"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534358841, "post_id": 51864528, "comment_id": 90681473, "body": "Going down the list.  Checking them off as I go."}, {"owner": {"reputation": 81, "user_id": 8335473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86005fd871fae755a3ba0e152b600076?s=128&d=identicon&r=PG&f=1", "display_name": "Tbone281", "link": "https://stackoverflow.com/users/8335473/tbone281"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534359334, "post_id": 51864528, "comment_id": 90681694, "body": "It looks like the error is coming from a subproject, DirectXTK12 after the update.  This might be an error in the tool kit source code rather than the sdk."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1534408094, "post_id": 51864528, "comment_id": 90696834, "body": "@JesperJuhl: That won&#39;t really help. It&#39;s not major magic. Besides, the problem is in an SDK header, and if you need that, you need it. How you get the header included (via stdafx.h or directly) doesn&#39;t really matter."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1536689839, "post_id": 51864528, "comment_id": 91511904, "body": "This <a href=\"https://github.com/Microsoft/DirectXTK/issues/142\" rel=\"nofollow noreferrer\">issue</a> has been acknowledged by the author of the DirectXTK library."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 8335473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86005fd871fae755a3ba0e152b600076?s=128&d=identicon&r=PG&f=1", "display_name": "Tbone281", "link": "https://stackoverflow.com/users/8335473/tbone281"}, "edited": false, "score": 0, "creation_date": 1534360868, "post_id": 51865069, "comment_id": 90682392, "body": "This is the solution.  Just have to find where the error originates...lol."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 81, "user_id": 8335473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86005fd871fae755a3ba0e152b600076?s=128&d=identicon&r=PG&f=1", "display_name": "Tbone281", "link": "https://stackoverflow.com/users/8335473/tbone281"}, "edited": false, "score": 0, "creation_date": 1534361114, "post_id": 51865069, "comment_id": 90682494, "body": "It shows you the line number. Check what&#39;s there. Probably you should either update these headers or play with compiler switches to temporarily restore old parsing mode."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 9, "last_activity_date": 1534360771, "creation_date": 1534360771, "answer_id": 51865069, "question_id": 51864528, "link": "https://stackoverflow.com/questions/51864528/update-visual-studio-2017-now-getting-compile-error-c7510-callback-use-of-d/51865069#51865069", "title": "Update visual studio 2017, now getting compile error C7510: &#39;Callback&#39;: use of dependent template name must be prefixed with &#39;template&#39;", "body": "<p>When you use a dependent template name, you <a href=\"https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords\">have to use a <code>template</code> keyword</a>, for example:</p>\n\n<pre><code>foo.template bar&lt;T&gt;();\n</code></pre>\n\n<p>Till some moment MSVC was not strict about using <code>typename</code> and <code>template</code> disambiguators, but after an update the rules have changed.</p>\n"}, {"comments": [{"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 4, "creation_date": 1537152658, "post_id": 52124156, "comment_id": 91664716, "body": "I personally prefer the suggestion from @IInspectable that it&#39;s actually just the /Zc:twoPhase- compiler option that you want to use to get the compiler to agree with the WRL source."}], "tags": [], "owner": {"reputation": 136, "user_id": 10301941, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iwvHsvaQzM8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOxVdqkjD9glRRDi-A6fnBh66qgxw/mo/photo.jpg?sz=128", "display_name": "Peng DU", "link": "https://stackoverflow.com/users/10301941/peng-du"}, "is_accepted": true, "score": 12, "last_activity_date": 1535806622, "last_edit_date": 1535806622, "creation_date": 1535765326, "answer_id": 52124156, "question_id": 51864528, "link": "https://stackoverflow.com/questions/51864528/update-visual-studio-2017-now-getting-compile-error-c7510-callback-use-of-d/52124156#52124156", "title": "Update visual studio 2017, now getting compile error C7510: &#39;Callback&#39;: use of dependent template name must be prefixed with &#39;template&#39;", "body": "<p>I have legacy projects and I compared the project settings side by side, finally I successfully built the new project by setting: <code>Configuration Properties</code> > <code>C/C++</code> > <code>Language</code> > <strong><code>Conformance mode = No</code></strong></p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1536397270, "post_id": 52130930, "comment_id": 91416258, "body": "There is neither a bug in the SDK nor in the compiler. What changed in the compiler is, that 15.8.0 introduced two-phase name lookup. You can disable two-phase name lookup using the <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/zc-twophase\" rel=\"nofollow noreferrer\">/Zc:twoPhase-</a> compiler option. <code>&#47;permissive-</code> automatically opts into two-phase name lookup. You can combine both flags to get the compiler to agree with the WRL source. <code>&#47;permissive-</code> does <b>not</b> have anything to do with guarding against Spectre."}, {"owner": {"reputation": 53, "user_id": 10304503, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216927668134759/picture?type=large", "display_name": "Aaron Stackpole", "link": "https://stackoverflow.com/users/10304503/aaron-stackpole"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1536465982, "post_id": 52130930, "comment_id": 91431061, "body": "Good additional info. Also, check this blog about the permissive changes made to mitigate spectre. <a href=\"https://blogs.msdn.microsoft.com/vcblog/2018/04/09/spectre-mitigation-changes-in-visual-studio-2017-version-15-7-preview-3/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2018/04/09/&hellip;</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1536471155, "post_id": 52130930, "comment_id": 91431781, "body": "The <code>&#47;permissive-</code> compiler option controls, what C++ source code the compiler accepts as valid input. This is strictly confined to the compiler frontend. The <code>&#47;Qspectre</code> compiler option, on the other hand, affects code generation, i.e. the compiler backend. It is unclear to me, what effect the <code>&#47;permissive-</code> option were to have on Spectre mitigation, or any other security enhancement really. The blog post doesn&#39;t suggest any relationship anyway. What am I missing?"}], "tags": [], "owner": {"reputation": 53, "user_id": 10304503, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216927668134759/picture?type=large", "display_name": "Aaron Stackpole", "link": "https://stackoverflow.com/users/10304503/aaron-stackpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1535826153, "last_edit_date": 1535826153, "creation_date": 1535825585, "answer_id": 52130930, "question_id": 51864528, "link": "https://stackoverflow.com/questions/51864528/update-visual-studio-2017-now-getting-compile-error-c7510-callback-use-of-d/52130930#52130930", "title": "Update visual studio 2017, now getting compile error C7510: &#39;Callback&#39;: use of dependent template name must be prefixed with &#39;template&#39;", "body": "<p>The problem is in the Windows Runtime Library and some change to Visual Studio broke it. I have the same issue on this laptop which is updated to 15.8.2, my machine at home running an earlier version does not do this, since the exact same code compiles on my other machine, it's got to be a bug in VS, or a change required in WRL/event class.</p>\n\n<p>EDIT: Fix to the return values above worked, bug is in the SDK, you should NOT disable /permissive- as this enables protection against Spectre and other security enhancements.</p>\n"}], "owner": {"reputation": 81, "user_id": 8335473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86005fd871fae755a3ba0e152b600076?s=128&d=identicon&r=PG&f=1", "display_name": "Tbone281", "link": "https://stackoverflow.com/users/8335473/tbone281"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6666, "favorite_count": 1, "accepted_answer_id": 52124156, "answer_count": 3, "score": 4, "last_activity_date": 1536689272, "creation_date": 1534358183, "last_edit_date": 1536689272, "question_id": 51864528, "link": "https://stackoverflow.com/questions/51864528/update-visual-studio-2017-now-getting-compile-error-c7510-callback-use-of-d", "title": "Update visual studio 2017, now getting compile error C7510: &#39;Callback&#39;: use of dependent template name must be prefixed with &#39;template&#39;", "body": "<p>I tried compiling my project as usual after the update (15.8.0).  I set showincludes to yes to figure out where the error originates, but it's all system code.  Starting with stdafx.cpp, it goes through all the includes and errors out:</p>\n\n<blockquote>\n<pre><code> 1&gt;Note: including file:     C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\pshpack8.h\n 1&gt;Note: including file:     C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\poppack.h\n 1&gt;Note: including file:    C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\pshpack8.h\n 1&gt;Note: including file:    C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\poppack.h\n 1&gt;Note: including file:   C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\winrt\\wrl\\event.h\n 1&gt;Note: including file:    C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\winrt\\eventtoken.h\n 1&gt;Note: including file:    C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\pshpack8.h\n 1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\winrt\\wrl\\event.h(316): error C7510: 'Callback': use of dependent template name must be prefixed with 'template'\n 1&gt;c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\winrt\\wrl\\event.h(324): error C7510: 'Callback': use of dependent template name must be prefixed with 'template'\n</code></pre>\n</blockquote>\n\n<p>Has anyone seen this before?  I googled up and down to find an answer to no avail.  Short of modifying the windows sdk, not sure what to do.</p>\n\n<p>Edit:\nIn my installed windows SDK, the error was in the file-</p>\n\n<p>C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\winrt\\wrl\\event.h</p>\n\n<p>Changed line 316: return DelegateHelper::Traits::Callback(Details::Forward(callback)); </p>\n\n<p>to: return DelegateHelper::Traits::template Callback(Details::Forward(callback));</p>\n\n<p>and line 324: return DelegateHelper::Traits::Callback( </p>\n\n<p>to return DelegateHelper::Traits::template Callback(Details::Forward(callback));</p>\n\n<p>Since modifying an sdk is not really a solution, Peng Du's solution by selecting non conformance in the configuration window is the way to go.</p>\n"}, {"tags": ["c++", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1534357965, "post_id": 51864444, "comment_id": 90681041, "body": "do the remapping as the vector is loaded."}, {"owner": {"reputation": 65, "user_id": 1166239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde451dddf025127f1c90792c319c5b1?s=128&d=identicon&r=PG", "display_name": "drucifer", "link": "https://stackoverflow.com/users/1166239/drucifer"}, "reply_to_user": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1534358119, "post_id": 51864444, "comment_id": 90681114, "body": "I&#39;m an eigen novice.  How would you go about doing this?"}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 1, "creation_date": 1534363226, "post_id": 51864444, "comment_id": 90683370, "body": "Are you OK with working with the compressed form of the matrix once you\u2019ve removed negative none-zero entries? If so, maybe <code>prune()</code> can help you out."}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1534364023, "post_id": 51864444, "comment_id": 90683717, "body": "As dfri wrote, the method <code>prune()</code> is what you&#39;re looking, it&#39;s easy to find in the <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1SparseVector.html#af094e30271da69f865b5d97f338f81d1\" rel=\"nofollow noreferrer\">doc</a>."}, {"owner": {"reputation": 65, "user_id": 1166239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde451dddf025127f1c90792c319c5b1?s=128&d=identicon&r=PG", "display_name": "drucifer", "link": "https://stackoverflow.com/users/1166239/drucifer"}, "edited": false, "score": 0, "creation_date": 1534365500, "post_id": 51864444, "comment_id": 90684340, "body": "Prune didn&#39;t work for me.  I tried both prune and pruned w/ various values.  It seems prune only eliminates near zero values.  I figured it out by just using inner iterator.  Posting the solution below.  Thank you everyone."}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 1, "creation_date": 1534368146, "post_id": 51864444, "comment_id": 90685366, "body": "ah right only <code>SparseMatrix::prune</code> supports custom predicate: <code>mat.prune([](double x) { return r&lt;0; });</code>"}, {"owner": {"reputation": 65, "user_id": 1166239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde451dddf025127f1c90792c319c5b1?s=128&d=identicon&r=PG", "display_name": "drucifer", "link": "https://stackoverflow.com/users/1166239/drucifer"}, "edited": false, "score": 0, "creation_date": 1534370175, "post_id": 51864444, "comment_id": 90686001, "body": "Oh cool.  I will try that out.  Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1534368224, "post_id": 51866111, "comment_id": 90685393, "body": "You can then call <code>fullScan.prune(0.0);</code> to remove them, otherwise <code>fullScan</code> will still contains explicit zeros."}, {"owner": {"reputation": 65, "user_id": 1166239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde451dddf025127f1c90792c319c5b1?s=128&d=identicon&r=PG", "display_name": "drucifer", "link": "https://stackoverflow.com/users/1166239/drucifer"}, "reply_to_user": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1534385294, "post_id": 51866111, "comment_id": 90689173, "body": "That is exactly what I did.  I just didn&#39;t include it in the code snippet here."}], "tags": [], "owner": {"reputation": 65, "user_id": 1166239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde451dddf025127f1c90792c319c5b1?s=128&d=identicon&r=PG", "display_name": "drucifer", "link": "https://stackoverflow.com/users/1166239/drucifer"}, "is_accepted": false, "score": 0, "last_activity_date": 1534374505, "last_edit_date": 1534374505, "creation_date": 1534365676, "answer_id": 51866111, "question_id": 51864444, "link": "https://stackoverflow.com/questions/51864444/setting-negative-elements-eigen-sparsevector-c/51866111#51866111", "title": "Setting negative elements Eigen SparseVector C++", "body": "<pre><code>for (Eigen::SparseVector&lt;double, Eigen::RowMajor&gt;::InnerIterator it(fullScan); it; ++it) {\n    if (it.value() &lt; 0) {\n        fullScan.coeffRef(it.index()) = 0;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": false, "score": 0, "last_activity_date": 1534773913, "creation_date": 1534773913, "answer_id": 51932520, "question_id": 51864444, "link": "https://stackoverflow.com/questions/51864444/setting-negative-elements-eigen-sparsevector-c/51932520#51932520", "title": "Setting negative elements Eigen SparseVector C++", "body": "<p>For <code>SparseMatrix</code> you could actually use <code>prune</code> with a custom functor (which must return true for values which shall be kept):</p>\n\n<pre><code>mat.prune([](int, int, const double&amp; val) { return val &gt;= 0.0; });\n</code></pre>\n\n<p>Not sure why this is not available for SparseVector, though.</p>\n"}], "owner": {"reputation": 65, "user_id": 1166239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde451dddf025127f1c90792c319c5b1?s=128&d=identicon&r=PG", "display_name": "drucifer", "link": "https://stackoverflow.com/users/1166239/drucifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534773913, "creation_date": 1534357821, "question_id": 51864444, "link": "https://stackoverflow.com/questions/51864444/setting-negative-elements-eigen-sparsevector-c", "title": "Setting negative elements Eigen SparseVector C++", "body": "<p>What is the most efficient way to set all negative values in an Eigen SparseVector to zero?</p>\n\n<p>I have a SparseVector w/ ~1000000 elements w/ very few nonzero entries.  I need to set ones that are negative to zero.  Iterating over the whole vector takes way too much time.  Is there a more efficient way to do this?</p>\n"}, {"tags": ["c++", "c", "visual-studio"], "comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 1, "creation_date": 1534357669, "post_id": 51864328, "comment_id": 90680915, "body": "You cannot run dlls directly, normally they get dynamically loaded into an exe."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534357694, "post_id": 51864328, "comment_id": 90680926, "body": "Windows is correct. You can&#39;t run a dll directly. You probably meant to set the application (you call driver code) as the startup project instead of the dll."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1534357790, "post_id": 51864328, "comment_id": 90680963, "body": "Thank you.  I&#39;m not running the .dll directly.  I use the driver code, which is an .exe to call the .dll."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534357833, "post_id": 51864328, "comment_id": 90680977, "body": "Your error message seems to conflict with that. Which one of these projects is the startup project?"}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1534357934, "post_id": 51864328, "comment_id": 90681029, "body": "I&#39;m exceeding stupid today.  The startup program was the .dll, not the .exe.  Thanks so much, as that took care of the problem."}], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 6693304, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/YarwI.png?s=128&g=1", "display_name": "KulaGGin", "link": "https://stackoverflow.com/users/6693304/kulaggin"}, "edited": false, "score": 0, "creation_date": 1594881792, "post_id": 51865587, "comment_id": 111282943, "body": "You can debug dlls in Visual Studio, though. Open properties of your dll project <code>Project &gt; Properties</code>, go to <code>Configuration Properties &gt; Debugging</code> tab, set <code>Attach</code> field to <code>Yes</code>. In the <code>Command</code> field set executable to which you will attach your .dll. Press <code>Apply</code> and <code>Ok</code> buttons. Open <code>Build &gt; Configuration Manager</code> menu. Set <code>Active Solution Configuration</code> to <code>Debug</code>. Now you can start your target executable and start debugging your .dll. When you will press <code>Debug &gt; Start Debugging</code>, Visual Studio will attach itself to the target process and look for your dll."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 578, "user_id": 6693304, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/YarwI.png?s=128&g=1", "display_name": "KulaGGin", "link": "https://stackoverflow.com/users/6693304/kulaggin"}, "edited": false, "score": 0, "creation_date": 1594919164, "post_id": 51865587, "comment_id": 111302716, "body": "@KulaGGin Do you think the OP did all of that, ran into the error he described, then came here and asked the question he asked? I don&#39;t. However, if you are asking for an edit for better clarity, let me know what you are suggesting. If your comment is just a FYI, that&#39;s cool too."}, {"owner": {"reputation": 578, "user_id": 6693304, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/YarwI.png?s=128&g=1", "display_name": "KulaGGin", "link": "https://stackoverflow.com/users/6693304/kulaggin"}, "edited": false, "score": 0, "creation_date": 1594933012, "post_id": 51865587, "comment_id": 111308728, "body": "Yep, it&#39;s just a FYI for people who will get this error trying to debug a dll. I was trying to debug a dll today and started getting this error. In my case it was because I switched to Release build configuration, and I fixed it by switching back to Debug build configuration."}], "tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 9, "last_activity_date": 1534363068, "creation_date": 1534363068, "answer_id": 51865587, "question_id": 51864328, "link": "https://stackoverflow.com/questions/51864328/unable-to-create-dlls-getting-dll-is-not-a-valid-win32-application/51865587#51865587", "title": "Unable to create DLLs: Getting DLL &quot;is not a valid Win32 application&quot;", "body": "<p>Right click the project in your solution explorer that is the project for the executable and click \"Set as startup project.\" </p>\n\n<p>Note that \"is not a valid Win32 application\" is not a compile error or a link error, it is the message you get when you tried to debug something that is not executable.</p>\n\n<p>You can only start executables. Executables consume dlls. These should be two seperate projects with two sets of corresponding project settings.</p>\n"}], "owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14272, "favorite_count": 2, "answer_count": 1, "score": 9, "last_activity_date": 1534363068, "creation_date": 1534357394, "last_edit_date": 1534357856, "question_id": 51864328, "link": "https://stackoverflow.com/questions/51864328/unable-to-create-dlls-getting-dll-is-not-a-valid-win32-application", "title": "Unable to create DLLs: Getting DLL &quot;is not a valid Win32 application&quot;", "body": "<p>As the title says, I can't create a simple DLL.  I'm using VS 2017 Community Edition Version 15.8.0.  Here is the .dll code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"InvWin32App.h\"\n\n#include \"$StdHdr.h\"\n\nvoid Prc1()\n{\n    printf(\"ran procedure 1\\n\");\n}\n</code></pre>\n\n<p>Here is the code for the header, per the MS way to do things:</p>\n\n<pre><code>#ifdef INVWIN32APP_EXPORTS\n#define INVWIN32APP_API __declspec(dllexport)\n#else\n#define INVWIN32APP_API __declspec(dllimport)\n#endif\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n        INVWIN32APP_API  void Prc1();\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Here is the driver code:  (Update:  The driver program is an .exe program.)</p>\n\n<pre><code>#include \"pch.h\"\n#include \"InvWin32App.h\"\n\nint main()\n{\n    Prc1();\n}\n</code></pre>\n\n<p>It can't get any simpler than this.  I get the following error message box when I try to run the code:</p>\n\n<pre><code>Unable to start program\nprogram name.dll\nprogram name.dll is not\na valid Win32 application\n</code></pre>\n\n<p>I can create .exe programs okay.  I also got the error earlier this morning when I was running VS 2017 Version 15.7.5.  Upgrading VS didn't do any good.  I also tried to compile these as .c programs, but it didn't make any difference.</p>\n\n<p>I had this problem on a couple occasions creating .exe programs using VS 2015.  I don't recall what I did, but the problem disappeared.  Any help would be appreciated.</p>\n\n<p>TIA.</p>\n"}, {"tags": ["c++", "operators"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1534357374, "post_id": 51864277, "comment_id": 90680768, "body": "@Stargateur no it is not UB"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1534357417, "post_id": 51864277, "comment_id": 90680792, "body": "There is not UB in this code."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1534357548, "post_id": 51864277, "comment_id": 90680859, "body": "Your title says this is a C question, yet you tag &quot;c++&quot; (and the code uses <code>cout</code>). Maybe you should update your question to say C++ or change the tag if you really are looking for a C solution. C and C++ are <i>very different</i> languages - don&#39;t mix them up or think they are interchangeable."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1534357584, "post_id": 51864277, "comment_id": 90680879, "body": "Thanks for the save, @haccks Instantly regretted kneejerk close."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534358590, "post_id": 51864277, "comment_id": 90681339, "body": "@Slava actually I didn&#39;t even read the question"}], "answers": [{"comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1534357431, "post_id": 51864329, "comment_id": 90680798, "body": "This does not explain why <code>z==0</code>  I would expect <code>0 -1 -1 -1</code>"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1534357504, "post_id": 51864329, "comment_id": 90680839, "body": "@RichardCritten z is -1 w is 0"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1534357612, "post_id": 51864329, "comment_id": 90680889, "body": "Thanks am blind sorry about that."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 3, "last_activity_date": 1534357634, "last_edit_date": 1534357634, "creation_date": 1534357396, "answer_id": 51864329, "question_id": 51864277, "link": "https://stackoverflow.com/questions/51864277/why-c-program-with-logical-and-operator-and-increment-operator-gives-different/51864329#51864329", "title": "Why c++ program with logical and operator and increment operator gives different output than expected?", "body": "<p>This is because of the short-circuit behaviour of the <code>&amp;&amp;</code> operator. <code>++x</code> evaluated to <code>0</code> which will be considered as <code>false</code>. So, only <code>++x</code> will be evaluated and rest expressions will not be evaluated and final value of the expression <code>++x &amp;&amp; ++y &amp;&amp; ++z</code> will be <code>0</code> and it will be assigned to <code>w</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 5375318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17be990403969641446292bac8f59e2?s=128&d=identicon&r=PG&f=1", "display_name": "krishna", "link": "https://stackoverflow.com/users/5375318/krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1534357458, "accepted_answer_id": 51864329, "answer_count": 1, "score": 0, "last_activity_date": 1534357861, "creation_date": 1534357154, "last_edit_date": 1534357861, "question_id": 51864277, "link": "https://stackoverflow.com/questions/51864277/why-c-program-with-logical-and-operator-and-increment-operator-gives-different", "closed_reason": "Duplicate", "title": "Why c++ program with logical and operator and increment operator gives different output than expected?", "body": "<p>I am trying following C code. I my opinion output of this code should be 0 0 0 0. But after executing it output comes as 0 -1 -1 0. Can anybody explain how output comes.</p>\n\n<pre><code>    #include&lt;iostream&gt;\n    using namespace std;\n    int main()\n    {\n        int x=-1, y=-1, z=-1;\n        int w= ++x &amp;&amp; ++y &amp;&amp; ++z;\n        cout&lt;&lt;x&lt;&lt;\" \"&lt;&lt;y&lt;&lt;\" \"&lt;&lt;z&lt;&lt;\" \"&lt;&lt;w&lt;&lt;endl;\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1534397607, "post_id": 51864157, "comment_id": 90691794, "body": "On Linux, you can <code>echo -e &quot;Hello,\\nWorld&quot; | .&#47;testprogram</code> to convert the escape character to a newline rather than the literal tokens <code>` and </code>n`, before passing it to the program."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1534498377, "post_id": 51864157, "comment_id": 90735684, "body": "<a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">c++ - Why is &quot;using namespace std&quot; considered bad practice? - Stack Overflow</a> ..."}], "answers": [{"comments": [{"owner": {"reputation": 31019, "user_id": 2230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a905a92a336eaea1b936c100ec49e229?s=128&d=identicon&r=PG", "display_name": "Euro Micelli", "link": "https://stackoverflow.com/users/2230/euro-micelli"}, "edited": false, "score": 8, "creation_date": 1534374125, "post_id": 51864254, "comment_id": 90686964, "body": "Exactly right. The escape codes are a feature of the <b>source code parser</b>, not a feature of the C++ string data."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1534385741, "post_id": 51864254, "comment_id": 90689232, "body": "The language definition does not require any particular value for <code>\u2019\\n\u2019</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1534424545, "post_id": 51864254, "comment_id": 90706693, "body": "@PeteBecker: The answer says the value it gives is for ASCII, which covers almost all modern SBCS systems.  People working with other character sets will have to find the applicable value themselves."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1534424874, "post_id": 51864254, "comment_id": 90706918, "body": "@PeteBecker I did not mean that language requires, I just assumed that OP uses PC with ASCII encoding, edited answer to clarify."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1534425771, "post_id": 51864254, "comment_id": 90707516, "body": "@BenVoigt -- there is no inherent connection between character encoding and the value of <code>&#39;\\n&#39;</code>. <code>0x0A</code> is convenient, because that&#39;s a value that isn&#39;t otherwise used. On Windows, <code>&#39;\\n&#39;</code> is turned into two ASCII values on output to a terminal that uses ASCII. Internally the value of <code>&#39;\\n&#39;</code> could be -2 and it would work just as well. Granted, back in the olden days, <code>&#39;\\n&#39;</code> and <code>&#39;\\r&#39;</code> mapped directly into ASCII codes, but that&#39;s an implementation detail, not a requirement."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1534426566, "post_id": 51864254, "comment_id": 90708094, "body": "@PeteBecker: On Windows, <code>&quot;\\n&quot;</code> is <code>{ 0x0A, 0x00 }</code> as well.  It&#39;s the file (or console) I/O that translates it to 0D 0A... for the purposes of the C++ program it is just one.  You could have a system where <code>&#39;\\n&#39;</code> is -2, sure, but that would not be an ASCII system.  The standard guarantees that character escapes are converted to the corresponding values from the execution character set.  If the execution character set is ASCII, <code>&#39;\\n&#39; == 10</code>, guaranteed."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1534430876, "post_id": 51864254, "comment_id": 90711125, "body": "@BenVoigt -- &quot;On Windows, <code>&quot;\\n&quot;</code> is <code>{ 0x0A, 0x00 }</code>&quot; that&#39;s the <b>behavior</b> of the compiler you used. The runtime library that comes with the compiler gets linked into your program. It translates whatever character the compiler uses to represent <code>&#39;\\n&#39;</code> into <code>0x0D 0x0A</code> and sends it to standard out, because that&#39;s what Windows requires to start a new line. <code>0x0D 0x0A</code> are, indeed, the ASCII codes for CR and LF. If you look at the requirements in the C++ standard, you&#39;ll see &quot;new-line NL(LF) \\n&quot; in the table of character escape sequences. &quot;NL(LF)&quot; is not the name of a character code."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1534434128, "post_id": 51864254, "comment_id": 90713066, "body": "@PeteBecker: LF is the name of a character code.  The parentheses aren&#39;t part of the code name, they indicate additional information.  But my main point is this: <code>&#39;\\n&#39;</code> is always exactly one character.  The compiler must not convert it to a CR-LF pair.  If the execution character set is ASCII, then the one character <code>\\n</code> has to be 0A.  If the execution character set is EBCDIC, then obviously it will be different.  But newline translations have absolutely nothing to do with string literals."}, {"owner": {"reputation": 1213, "user_id": 59122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sl0OX.jpg?s=128&g=1", "display_name": "Roel Schroeven", "link": "https://stackoverflow.com/users/59122/roel-schroeven"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1534491182, "post_id": 51864254, "comment_id": 90731816, "body": "@PeteBecker: newline translations only happen on input/output, and only on files opened in text mode. They have nothing to do with internal string represantations."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 58, "last_activity_date": 1534424810, "last_edit_date": 1534424810, "creation_date": 1534357044, "answer_id": 51864254, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin/51864254#51864254", "title": "Why are escape characters not working when I read from cin?", "body": "<p>The C++ compiler has certain rules when control characters are provided -\n <a href=\"https://en.cppreference.com/w/cpp/language/escape\" rel=\"noreferrer\">documentation</a>. As you can see, when you specify <code>\\n</code> in a string literal it is replaced by the <strong>compiler</strong> with a line feed (value 0xa for ASCII). So instead of 2 symbols, <code>\\</code> and <code>n</code>, you get one symbol with binary code 0xa (I assume you use ASCII encoding), which makes the console move output to a new line when printed. When you read a string the compiler is not involved and your string has the actual symbols <code>\\</code> and <code>n</code> in it.</p>\n"}, {"comments": [{"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 1, "creation_date": 1534364419, "post_id": 51864255, "comment_id": 90683895, "body": "While implementation of <code>echo</code> varies from computer to computer, <code>echo -e &quot;hello\\nworld&quot;</code> is a pretty reliable way to get <code>\\n</code> to be interpreted as a newline. If not, then <code>printf &quot;hello\\nworld\\n&quot;</code> is guaranteed to work if you have <code>printf</code> on your machine."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 2, "creation_date": 1534374867, "post_id": 51864255, "comment_id": 90687098, "body": "Not the ASCII code, the &quot;execution charset&quot; (character encoding)\u2014almost certainly not ASCII (even if, for this character, the code might be the same)."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534416865, "post_id": 51864255, "comment_id": 90701947, "body": "In particular, there are still computers running where the execution charset is EBCDIC, and &#39;\\n&#39; is nothing like 0x0a."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1534453273, "post_id": 51864255, "comment_id": 90722072, "body": "It might be good to know how to enter a literal newline from a terminal: in most terminals, press Ctrl+V followed by Ctrl+J."}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "reply_to_user": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 0, "creation_date": 1534463545, "post_id": 51864255, "comment_id": 90724834, "body": "@BallpointBen, <code>printf</code> (the command-line utility) is standard, so you&#39;re very likely to have it (probably built-in to the shell). <code>echo -e</code> is quite common, but notably Dash (Debian&#39;s/Ubuntu&#39;s <code>&#47;bin&#47;sh</code>) doesn&#39;t treat that kindly. Then there&#39;s the <code>$&#39;..&#39;</code> quoting that does process C-style escapes. It&#39;s not standard and so dash doesn&#39;t support it either, but almost all other shells do support it."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1534498755, "post_id": 51864255, "comment_id": 90735888, "body": "In the latter case, note that <code>std::cin &gt;&gt; str</code> where <code>str</code> is a <code>std::string</code> only reads 1 word (space-delimited token) from standard input."}], "tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": false, "score": 14, "last_activity_date": 1534357245, "last_edit_date": 1534357245, "creation_date": 1534357046, "answer_id": 51864255, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin/51864255#51864255", "title": "Why are escape characters not working when I read from cin?", "body": "<p>When specified in a string literal, \"\\n\" will be translated to the matching ascii code (<code>0x0a</code> on linux), and stored as-is. It will not be stored as a backslash, followed by a literal <code>n</code>. <a href=\"https://en.cppreference.com/w/cpp/language/escape\" rel=\"noreferrer\">Escape sequences</a> are for you convenience only, to allow string literals with embedded newlines.</p>\n\n<p>On the other hand, your shell, running in the terminal, does not do such substitution: it submits a literal backslash and <code>n</code>, which will be printed as such.</p>\n\n<p>To have a newline printed, enter a newline:</p>\n\n<pre><code>$ echo \"Hello\n World\" | ./your-program \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 6, "last_activity_date": 1534357068, "creation_date": 1534357068, "answer_id": 51864260, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin/51864260#51864260", "title": "Why are escape characters not working when I read from cin?", "body": "<p><code>cin</code> does not include a C++ compiler. Escape sequences in string literals are a feature of C++'s lexer, which is part of the C++ compiler. Streams more or less give you what came from the OS (they may do some CRLF -> CR translation or similar based on the OS, but that's it).</p>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 3, "last_activity_date": 1534357104, "creation_date": 1534357104, "answer_id": 51864269, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin/51864269#51864269", "title": "Why are escape characters not working when I read from cin?", "body": "<p>Escape characters in a string are interpreted by the compiler. The sequence <code>\\n</code> consists of two actual characters, which the compiler converts to a single newline character during compilation. The same sequence is not interpreted in any way when you enter it on the command line, so results in the exact two characters that you entered.</p>\n\n<p>If you want to process your string to interpret escape sequences, you will have to do it yourself (or use an appropriate library).</p>\n"}, {"tags": [], "owner": {"reputation": 575, "user_id": 8201028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TnyCg05wg5Q/AAAAAAAAAAI/AAAAAAAAAaI/Y-lQ7fuBVfI/photo.jpg?sz=128", "display_name": "Krishna Choudhary", "link": "https://stackoverflow.com/users/8201028/krishna-choudhary"}, "is_accepted": false, "score": 10, "last_activity_date": 1534357135, "creation_date": 1534357135, "answer_id": 51864274, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin/51864274#51864274", "title": "Why are escape characters not working when I read from cin?", "body": "<p>The string on cout&lt;&lt;\"Hello\\nworld\" it's <strong>converted by the compiler</strong> to a compiled string where escape codes are converted to characters, so the cout function when executed does not see a two char \"\\n\" string but the equivalent code for next line character. </p>\n\n<p>But the cin gets the string of every typed character <strong>at runtime</strong> and does not convert escape codes. So if you want to convert those escape codes you have to make a replace function.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1534357383, "creation_date": 1534357383, "answer_id": 51864325, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin/51864325#51864325", "title": "Why are escape characters not working when I read from cin?", "body": "<blockquote>\n  <p>Why escape characters are not working when I read from cin?</p>\n</blockquote>\n\n<p>Because stream readers are defined to be that way. At the core, each character is read separately. Only higher level functions provided additional meaning to the characters.</p>\n\n<p>When a compiler processes the string literal <code>\"Hello\\nWorld\"</code>, its file reader passes it two characters too. Only the C++ compiler/parser translates them into one character based on the rules of the language.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 4, "last_activity_date": 1534385554, "creation_date": 1534385554, "answer_id": 51868704, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin/51868704#51868704", "title": "Why are escape characters not working when I read from cin?", "body": "<p>In compiled code the <strong>character literal</strong> <code>\u2019\\n\u2019</code> is replaced by an implementation-specific value that the runtime system treats as a newline character. The language definition does not require any particular value.</p>\n\n<p>When reading input from the console or a file the incoming text is not being compiled, and the character sequence \u201c\\n\u201d does not have any special meaning. It is simply two characters.</p>\n"}], "owner": {"reputation": 516, "user_id": 5518690, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8ynBxWOJX1s/AAAAAAAAAAI/AAAAAAAADuE/tU0M9zH3544/photo.jpg?sz=128", "display_name": "kranti sairam", "link": "https://stackoverflow.com/users/5518690/kranti-sairam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4166, "favorite_count": 2, "accepted_answer_id": 51864254, "answer_count": 7, "score": 39, "last_activity_date": 1534424810, "creation_date": 1534356597, "last_edit_date": 1534361531, "question_id": 51864157, "link": "https://stackoverflow.com/questions/51864157/why-are-escape-characters-not-working-when-i-read-from-cin", "title": "Why are escape characters not working when I read from cin?", "body": "<p>(a) </p>\n\n<pre><code>string str = \"Hello\\nWorld\";\n</code></pre>\n\n<p>When I print <code>str</code>, the output is:</p>\n\n<pre><code>Hello\nWorld\n</code></pre>\n\n<p>(b) </p>\n\n<pre><code>string str;\ncin &gt;&gt; str;      //given input as Hello\\nWorld\n</code></pre>\n\n<p>When I print <code>str</code>, the output is:</p>\n\n<pre><code>Hello\\nWorld\n</code></pre>\n\n<p>What is the difference between (a) and (b)?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 126174, "user_id": 23501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f65a2f291636c0bd19920b2b6d525b?s=128&d=identicon&r=PG", "display_name": "Ates Goral", "link": "https://stackoverflow.com/users/23501/ates-goral"}, "edited": false, "score": 1, "creation_date": 1534355587, "post_id": 51863899, "comment_id": 90679920, "body": "What do you get when you do: <code>cout &lt;&lt; &#39;(&#39; &lt;&lt; x1 &lt;&lt; &#39;)&#39;;</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1534355617, "post_id": 51863899, "comment_id": 90679940, "body": "What would you expect should be printed? Take a look <a href=\"https://stackoverflow.com/questions/19562103/uint8-t-cant-be-printed-with-cout/19562163#19562163\">here</a> please."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534355994, "post_id": 51863899, "comment_id": 90680139, "body": "You have cast at wrong place. It should be <code>cout&lt;&lt;static_cast&lt;int&gt;(x1);</code> instead."}, {"owner": {"reputation": 141, "user_id": 7187965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9HNRD1vFFi0/AAAAAAAAAAI/AAAAAAAAABA/kJ8g7S-I524/photo.jpg?sz=128", "display_name": "Prashant Pathak", "link": "https://stackoverflow.com/users/7187965/prashant-pathak"}, "reply_to_user": {"reputation": 126174, "user_id": 23501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f65a2f291636c0bd19920b2b6d525b?s=128&d=identicon&r=PG", "display_name": "Ates Goral", "link": "https://stackoverflow.com/users/23501/ates-goral"}, "edited": false, "score": 0, "creation_date": 1534359640, "post_id": 51863899, "comment_id": 90681834, "body": "@AtesGoral I am getting a ? with background, when I used parenthesis but invisible symbol without parenthesis why?"}], "answers": [{"comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1534355826, "post_id": 51863965, "comment_id": 90680047, "body": "The C++ standard does not guarantee that it will use ASCII. It could be ASCII (and very often is) but it is not guaranteed."}, {"owner": {"reputation": 141, "user_id": 7187965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9HNRD1vFFi0/AAAAAAAAAAI/AAAAAAAAABA/kJ8g7S-I524/photo.jpg?sz=128", "display_name": "Prashant Pathak", "link": "https://stackoverflow.com/users/7187965/prashant-pathak"}, "edited": false, "score": 0, "creation_date": 1534359866, "post_id": 51863965, "comment_id": 90681940, "body": "@mrks What is the magic behind + as a prefix, please explain."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 141, "user_id": 7187965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9HNRD1vFFi0/AAAAAAAAAAI/AAAAAAAAABA/kJ8g7S-I524/photo.jpg?sz=128", "display_name": "Prashant Pathak", "link": "https://stackoverflow.com/users/7187965/prashant-pathak"}, "edited": false, "score": 1, "creation_date": 1534361691, "post_id": 51863965, "comment_id": 90682734, "body": "@PrashantPathak I&#39;d go doe something more explicit and obvious like a cast, but <code>char</code> is an integer type with some special handling when displayed . When you perform arithmetic on a <code>char</code> it is promoted to an <code>int</code> and is printed out as an <code>int</code>. Some examples: <a href=\"https://ideone.com/RBInD8\" rel=\"nofollow noreferrer\">ideone.com/RBInD8</a>"}], "tags": [], "owner": {"reputation": 6891, "user_id": 2204581, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e49d077f4d914cfc9d81299a453fcd2?s=128&d=identicon&r=PG", "display_name": "mrks", "link": "https://stackoverflow.com/users/2204581/mrks"}, "is_accepted": true, "score": 0, "last_activity_date": 1534355677, "creation_date": 1534355677, "answer_id": 51863965, "question_id": 51863899, "link": "https://stackoverflow.com/questions/51863899/assigning-a-static-castint-15-to-a-static-const-char-type-variable/51863965#51863965", "title": "Assigning a static_cast&lt;int&gt;(-15) to a static const char type variable", "body": "<p>If you are printing a <code>char</code>, it is taken as an ASCII value. I.e., <code>std::cout &lt;&lt; char{66};</code> would print <code>B</code>.</p>\n\n<p>If you want to print your char as a number, simply prepend <code>+</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 7187965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9HNRD1vFFi0/AAAAAAAAAAI/AAAAAAAAABA/kJ8g7S-I524/photo.jpg?sz=128", "display_name": "Prashant Pathak", "link": "https://stackoverflow.com/users/7187965/prashant-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1534355735, "accepted_answer_id": 51863965, "answer_count": 1, "score": -2, "last_activity_date": 1534355726, "creation_date": 1534355424, "question_id": 51863899, "link": "https://stackoverflow.com/questions/51863899/assigning-a-static-castint-15-to-a-static-const-char-type-variable", "closed_reason": "Duplicate", "title": "Assigning a static_cast&lt;int&gt;(-15) to a static const char type variable", "body": "<p>Hello it may be some silly question, but this is bugging me since few days. </p>\n\n<p>I have bellow line of code:</p>\n\n<pre><code>static const char x1 = static_cast&lt;int&gt;(-15);\ncout&lt;&lt;x1;\n\nstatic const char x2= 16;\ncout&lt;&lt; \"hello \"&lt;&lt; x2&lt;&lt;'\\n';\n</code></pre>\n\n<p>The output is None I mean nothing is getting printed in console. But when I did the comparison like <code>if(kill == -15)</code> its evaluated as True. So may I know why I can not see any output in console when I am printing.</p>\n"}, {"tags": ["c++", "mysql", "mysql-connector"], "comments": [{"owner": {"reputation": 2688, "user_id": 1911652, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a013447678c2adcff7adbc4af467c4e4?s=128&d=identicon&r=PG", "display_name": "Atul", "link": "https://stackoverflow.com/users/1911652/atul"}, "edited": false, "score": 0, "creation_date": 1534355275, "post_id": 51863804, "comment_id": 90679767, "body": "Why to close and downvotes? This is genuine issue. DOwn voters please explain."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1534356613, "post_id": 51863804, "comment_id": 90680454, "body": "Looking at the source code ( <a href=\"https://github.com/anhstudios/mysql-connector-cpp/blob/master/driver/mysql_driver.cpp\" rel=\"nofollow noreferrer\">github.com/anhstudios/mysql-connector-cpp/blob/master/driver&zwnj;&#8203;/&hellip;</a> ) it&#39;s probably an instance of <i>\u201cstatic initialization order \u2018fiasco\u2019 (problem)\u201d</i> <a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/ctors#static-init-order</a>.  That is <code>someclass_instance</code> gets initialised before the statics in the MySQL library."}], "answers": [{"comments": [{"owner": {"reputation": 2688, "user_id": 1911652, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a013447678c2adcff7adbc4af467c4e4?s=128&d=identicon&r=PG", "display_name": "Atul", "link": "https://stackoverflow.com/users/1911652/atul"}, "edited": false, "score": 0, "creation_date": 1534377656, "post_id": 51865886, "comment_id": 90687700, "body": "That was indeed great especially <code>MySQL driver has various static initialisers</code>. It didn&#39;t came to my mind :) Many thanks for looking into it and giving careful consideration."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 1, "last_activity_date": 1534364557, "creation_date": 1534364557, "answer_id": 51865886, "question_id": 51863804, "link": "https://stackoverflow.com/questions/51863804/mysql-connector-c-get-driver-instance-crashes-when-called-from-global-const/51865886#51865886", "title": "MySQL Connector/C++: get_driver_instance() crashes when called from global construct", "body": "<p>You can't rely on the order that different classes are statically initialised (for example in your situation the order is different between debug and release builds).</p>\n\n<p>This is known as the <a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow noreferrer\">static initialization order \u2018fiasco\u2019</a>.</p>\n\n<p>You must avoid calling any code in a static initialiser which itself relies on static initialisation.</p>\n\n<p>The MySQL driver has various static initialisers, presumably the one causing you a problem is the <a href=\"https://github.com/anhstudios/mysql-connector-cpp/blob/3ff636efb815742657c2de90c71883389945d5fe/driver/mysql_driver.cpp#L67\" rel=\"nofollow noreferrer\">map of names to drivers</a>.</p>\n\n<p>One way to avoid this is to use a lazily constructed singleton using a function level static which is initialised the first time the function is called:</p>\n\n<pre><code>struct someclass\n{\n    sql::Driver *m_pDriver;\n\n    someclass()\n    {\n        /* Create a connection */\n        m_pDriver= get_driver_instance(); // It crashes here\n        cout &lt;&lt; \"print something\";\n    }\n\n    void foo() {}\n};\n\nsomeclass&amp; someclass_instance()\n{\n    static someclass instance;\n    return instance;\n}\n\nint main(int argc, char** argv) \n{\n    someclass_instance().foo();\n    return 0;\n}\n</code></pre>\n\n<p>Note that <code>someclass_instance()</code> might not be thread safe if you aren't using a recent compiler (e.g. visual studio 2013 or earlier), if that is the case you need to make sure to call your function once from a single thread before starting other threads that use the function.</p>\n\n<p>You could also fix the MySQL code by moving the driver map inside <code>get_driver_instance_by_name</code> (or submit a bug report asking them to do it for you).</p>\n"}], "owner": {"reputation": 2688, "user_id": 1911652, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a013447678c2adcff7adbc4af467c4e4?s=128&d=identicon&r=PG", "display_name": "Atul", "link": "https://stackoverflow.com/users/1911652/atul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 51865886, "answer_count": 1, "score": 1, "last_activity_date": 1534393968, "creation_date": 1534355045, "last_edit_date": 1534393968, "question_id": 51863804, "link": "https://stackoverflow.com/questions/51863804/mysql-connector-c-get-driver-instance-crashes-when-called-from-global-const", "title": "MySQL Connector/C++: get_driver_instance() crashes when called from global construct", "body": "<p>I'm using MySQL Connector/C++ on Windows 10. I observed that when I call <code>get_driver_instance</code> from c'tor of global object, it simply crashes throwing exception: Access violation reading location.</p>\n\n<p>Sample code:</p>\n\n<pre><code>#define CPPCONN_LIB_BUILD // Need to include this as we are linking mysql connector in static library\n#include \"MySQL\\Src\\mysql-connector-c++-1.1.5\\cppconn\\driver.h\"\n\n#pragma comment(lib,\"MySQL\\\\Src\\\\mysql-connector-c++-1.1.5\\\\BLD\\\\driver\\\\Debug\\\\mysqlcppconn-static.lib\")\n#pragma comment(lib,\"MySQL\\\\Src\\\\mysql-5.6.24\\\\BLD\\\\libmysql\\\\Debug\\\\mysqlclient.lib\")\n\nstruct someclass\n{\n    sql::Driver *m_pDriver;\n\n    someclass()\n    {\n        /* Create a connection */\n        m_pDriver= get_driver_instance(); // It crashes here\n        cout &lt;&lt; \"print something\";\n    }\n} someclass_instance;\n\nint main(int argc, char** argv) \n{\n    // We don't need to do anything here. The problem occurs in the global class constructor which executes before main as we've defined its global instance.\n\n    return 0;\n}\n</code></pre>\n\n<p>Exception thrown is something similar to this:</p>\n\n<blockquote>\n  <p>Unhandled exception at 0x000007F6BE17485D in Sample.exe: 0xC0000005:\n  Access violation reading location 0x0000000000000008.</p>\n</blockquote>\n\n<p>Stacktrace at the time of crash:</p>\n\n<pre><code>Sample.exe!std::_Tree&lt;class std::_Tmap_traits&lt;class sql::SQLString,class boost::shared_ptr&lt;class sql::mysql::MySQL_Driver&gt;,struct std::less&lt;class sql::SQLString&gt;,class std::allocator&lt;struct std::pair&lt;class sql::SQLString const ,class boost::shared_ptr&lt;class sql::mysql::MySQL_Driver&gt; &gt; &gt;,0&gt; &gt;::_Lbound(class sql::SQLString const &amp;) Unknown\nSample.exe!std::_Tree&lt;class std::_Tmap_traits&lt;class sql::SQLString,class boost::shared_ptr&lt;class sql::mysql::MySQL_Driver&gt;,struct std::less&lt;class sql::SQLString&gt;,class std::allocator&lt;struct std::pair&lt;class sql::SQLString const ,class boost::shared_ptr&lt;class sql::mysql::MySQL_Driver&gt; &gt; &gt;,0&gt; &gt;::lower_bound(class sql::SQLString const &amp;) Unknown\nSample.exe!std::_Tree&lt;class std::_Tmap_traits&lt;class sql::SQLString,class boost::shared_ptr&lt;class sql::mysql::MySQL_Driver&gt;,struct std::less&lt;class sql::SQLString&gt;,class std::allocator&lt;struct std::pair&lt;class sql::SQLString const ,class boost::shared_ptr&lt;class sql::mysql::MySQL_Driver&gt; &gt; &gt;,0&gt; &gt;::find(class sql::SQLString const &amp;)    Unknown\nSample.exe!sql::mysql::get_driver_instance_by_name(char const * const)  Unknown\nSample.exe!sql::mysql::get_driver_instance(void)    Unknown\nSample.exe!get_driver_instance()    Unknown\nSample.exe!someclass::someclass() Line 72   C++\nSample.exe!`dynamic initializer for 'obj''() Line 76    C++\nSample.exe!_initterm(void (void) * * pfbegin, void (void) * * pfend) Line 894   C\nSample.exe!_cinit(int initFloatingPrecision) Line 303   C\nSample.exe!__tmainCRTStartup() Line 227 C\nSample.exe!mainCRTStartup() Line 164    C\n</code></pre>\n\n<p>Surprisingly this happens only in Debug build. However it is not same case as asked in <a href=\"https://stackoverflow.com/questions/3249738/get-driver-instance-crashes-with-qt\">this</a> question. <strong>I've made sure I am linking Debug built connector library. Also if I instantiate same object <code>someclass_instance</code> but inside main function it doesn't crash there.</strong> This is really weird. I suspect something related with CRT initialisation but not sure through.</p>\n\n<p>Note: I've spend hours figuring this out. This is genuine issue. Before down-voting appreciate to try the code at least once.</p>\n\n<p>Would be great if anyone can throw light.</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1534355327, "post_id": 51863798, "comment_id": 90679783, "body": "Welcome to StackOverflow. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Questions that just post a block of code and ask us to debug it for you are off-topic here."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 1, "creation_date": 1534355792, "post_id": 51863798, "comment_id": 90680031, "body": "What attempts have you made to debug?  Have you tried putting print statements in the code to verify your assumptions at various points?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 1, "creation_date": 1534356091, "post_id": 51863798, "comment_id": 90680204, "body": "Stack Overflow isn&#39;t a free debugging service, and you should show your attempts at debugging the code with a debugger or other simpler methods such as debug print statements. You can also test each part of the code separately to figure out exactly which part of the code is causing the problem, and make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This won&#39;t be the only time you end up with a bug in your code, and learning to debug your programs will help you much more than having someone find the bug for you. Debugging your own code is an important skill in programming. See <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/nodebugging</a>."}, {"owner": {"reputation": 23, "user_id": 10230594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WygRreLAvtE/AAAAAAAAAAI/AAAAAAAAA4o/Zwln0OIjsUs/photo.jpg?sz=128", "display_name": "Mohd Imran", "link": "https://stackoverflow.com/users/10230594/mohd-imran"}, "edited": false, "score": 0, "creation_date": 1534438867, "post_id": 51863798, "comment_id": 90715691, "body": "Sorry for the off-topic but I am new to programming, I just wanted some help that&#39;s why I posted the question... Hope you all will understand this"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10230594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WygRreLAvtE/AAAAAAAAAAI/AAAAAAAAA4o/Zwln0OIjsUs/photo.jpg?sz=128", "display_name": "Mohd Imran", "link": "https://stackoverflow.com/users/10230594/mohd-imran"}, "edited": false, "score": 0, "creation_date": 1534440071, "post_id": 51865586, "comment_id": 90716258, "body": "Thanks for helping me."}], "tags": [], "owner": {"reputation": 921, "user_id": 6356432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbeccf6de3d8a300b1ba4c49891e0634?s=128&d=identicon&r=PG&f=1", "display_name": "sim", "link": "https://stackoverflow.com/users/6356432/sim"}, "is_accepted": true, "score": 0, "last_activity_date": 1534363066, "creation_date": 1534363066, "answer_id": 51865586, "question_id": 51863798, "link": "https://stackoverflow.com/questions/51863798/n-queens-algorithm-using-c/51865586#51865586", "title": "N-Queens Algorithm using c++", "body": "<p>The part in is_attaced in which you check the diagonals is not working. It has two basic problems, first you dont check all diagonals all rows - you just check the previous row. And, second, you are doing out of bound accesses, when you are in the first or last column.</p>\n\n<p>An implementation that is not realy efficient but easy to understand check the both diagonals seperately </p>\n\n<pre><code>for( int i=min(col, row); i&gt;0;i-- )\n{\n   if( board[row-i][col-i]==1 )\n      return true;\n}\nfor( int i=MAX_COL; i&gt;row;i-- )\n{\n   if( board[row-i][col+i]==1 )\n      return true;\n}\n</code></pre>\n\n<p>A better way would be doing both in one loop. </p>\n"}], "owner": {"reputation": 23, "user_id": 10230594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WygRreLAvtE/AAAAAAAAAAI/AAAAAAAAA4o/Zwln0OIjsUs/photo.jpg?sz=128", "display_name": "Mohd Imran", "link": "https://stackoverflow.com/users/10230594/mohd-imran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 51865586, "answer_count": 1, "score": -4, "last_activity_date": 1534363066, "creation_date": 1534355020, "last_edit_date": 1534355332, "question_id": 51863798, "link": "https://stackoverflow.com/questions/51863798/n-queens-algorithm-using-c", "title": "N-Queens Algorithm using c++", "body": "<p>I am trying to solve the N-Queens Problem using C++ but I am not getting the proper output, maybe my <strong>is_attacked()</strong> function have some problems. Please help me in improving my code.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint N;\nint board[10][10] = {0};\n\n//to check attacking position\nbool is_attacked(int row, int col) {\nfor(int i=0;i&lt;N;++i)\n{\n    if(board[row][i] == 1 || board[i][col] == 1)\n        return true;\n}\nif(row &gt;= 1)\n    if(board[row-1][col-1] == 1 || board[row-1][col+1] == 1)\n        return true;\n\nreturn false;\n}\n//to print the values\nvoid print()\n{\n  for(int i=0;i&lt;N;++i)\n  {\n    for(int j=0;j&lt;N;++j)\n    {\n        cout &lt;&lt; board[i][j] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; \"\\n\";\n  }\n}\n//to solve the problem\nbool solve(int n) \n{\n   if(n == 0)\n     return true;\n   //main logic, i =&gt; row, j =&gt; columns\n   for(int i=0; i &lt; n; ++i)\n   {\n     for(int j=0; j&lt;n; ++j)\n     {\n\n        if(is_attacked(i, j))\n            continue;\n        board[i][j] = 1;\n        if(solve(n-1))\n            return true;\n        board[i][j] = 0;\n\n      }\n    }\n  return false;\n}\n\nint main() {\n cin &gt;&gt; N;\n //let's add some basic_cases\n  if(N == 2 || N == 3)\n  {    cout &lt;&lt; \"Not possible\";\n       exit(0);\n  }\n  if(solve(N))\n     print();\n  else \n     cout &lt;&lt; \"Not Possible\";\n  return 0;\n}\n</code></pre>\n\n<p>Its should display </p>\n\n<pre>0 1 0 0 \n0 0 0 1 \n1 0 0 0 \n0 0 1 0</pre>\n\n<p>but I am getting</p>\n\n<pre>1 0 0 0 \n0 1 0 0 \n0 0 1 0 \n0 0 0 1</pre>\n\n<p>Please help me... Thanks in advance...</p>\n"}, {"tags": ["c++", "boost", "compiler-errors", "visual-c++"], "comments": [{"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534355212, "post_id": 51863797, "comment_id": 90679731, "body": "I get about 113 errors, couldn&#39;t paste them all, but they are all the same. Why does Microsoft accepts some syntax enforcing in its update when it has not even been tested on such a standard library like boost I just don&#39;t understand !"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534355820, "post_id": 51863797, "comment_id": 90680045, "body": "TIP: It&#39;s better / cleaner to copy the errors from the Output Tab of Visual Studio."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534355908, "post_id": 51863797, "comment_id": 90680092, "body": "Also thanks for the info. I will hold off updating VS."}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534357197, "post_id": 51864240, "comment_id": 90680708, "body": "&quot;A new warning C4643&quot; ? I often ignore warnings that are flagged on Boost source code. They spit out C4643 errors !"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534357466, "post_id": 51864240, "comment_id": 90680822, "body": "So the cause of this is <code>using namespace std;</code>??"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534361131, "post_id": 51864240, "comment_id": 90682505, "body": "@Syed Alam Abbas I&#39;ve added some tips to help get you back to compiling error free. Let me know where it stands."}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534365139, "post_id": 51864240, "comment_id": 90684207, "body": "@SkepticalEmpiricist I wish things were this easy to set some flags and I could see if I can build it. But I am using Unreal Engine 4 and in it I have a c++ project which in turn has the boost libraries as plugin. So any such compiler level flag change would mean I have to rebuild the whole engine to see if this works(build tool level chain automatically triggers whole rebuild). I will try that thing overnight or so. But thank you so much for providing right pointers in the direction where its likely to succeed."}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534426706, "post_id": 51864240, "comment_id": 90708191, "body": "@SkepticalEmpiricist I tried the configurable option for unreal engine to use the /permissive flag, it does not compile. I get another set of issue when using this setting since other project DX12 related that were compiling no longer works.  See here : <a href=\"https://docs.unrealengine.com/en-us/Programming/UnrealBuildSystem/Configuration\" rel=\"nofollow noreferrer\">docs.unrealengine.com/en-us/Programming/UnrealBuildSystem/&hellip;</a>                                                            WindowsPlatform bStrictConformanceMode Enables strict standard conformance mode (/permissive-) in VS2017+."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534426973, "post_id": 51864240, "comment_id": 90708355, "body": "@SyedAlamAbbas You&#39;ve turned this flag ON?"}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534427072, "post_id": 51864240, "comment_id": 90708425, "body": "I have tried on and off both by now without any success :) I have now even asked this on the Microsoft forum : <a href=\"https://developercommunity.visualstudio.com/content/problem/312706/new-vs-c-update-is-making-boost-forward-declared-c.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/312706/&hellip;</a>"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534427225, "post_id": 51864240, "comment_id": 90708528, "body": "@SyedAlamAbbas OK obviously I meant trying with such conformance flags OFF, not on, to get error-free compilation. But just a quick recap so we could get to solving this ASAP -- The error ridden compilation output from above (in the question), was given to you when trying to compile from within Unreal Engine 4?"}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "reply_to_user": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "edited": false, "score": 0, "creation_date": 1534427471, "post_id": 51864240, "comment_id": 90708720, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/178144/discussion-between-syed-alam-abbas-and-skepticalempiricist\">continue this discussion in chat</a>."}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "edited": false, "score": 0, "creation_date": 1534439141, "post_id": 51864240, "comment_id": 90715814, "body": "Thank you SkepticalEmp for all the help, a very fine fix that was badly needed, when it comes to persistence you Sir are a honey badger !"}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": true, "score": 1, "last_activity_date": 1534438689, "last_edit_date": 1592644375, "creation_date": 1534356970, "answer_id": 51864240, "question_id": 51863797, "link": "https://stackoverflow.com/questions/51863797/new-vs-c-update-is-making-boost-forward-declared-code-un-compilable-what-can/51864240#51864240", "title": "New VS C++ update is making boost forward declared code un-compilable ! What can you do?", "body": "<p>A shame indeed... For now check out this:</p>\n<blockquote>\n<p><strong>Bug fixes and behavior changes in Visual Studio 2017 version 15.8</strong></p>\n<p>...</p>\n<p><strong>forward declarations and definitions in namespace std</strong></p>\n<p>The C++ standard doesn't allow a user to add forward declarations or definitions into namespace\u00a0std. Adding declarations or definitions to namespace\u00a0std\u00a0or to a namespace within namespace std now results in undefined behavior.</p>\n<p>At some time in the future, Microsoft will move the location where\nsome STL types are defined. When this happens, it will break existing\ncode that adds forward declarations to namespace\u00a0std. A new warning,\nC4643, helps identify such source issues. The warning is enabled\nin\u00a0<strong>/default</strong>\u00a0mode and is off by default. It will impact programs that\nare compiled with\u00a0<strong>/Wall</strong>\u00a0or\u00a0<strong>/WX</strong></p>\n</blockquote>\n<p>From <a href=\"https://github.com/MicrosoftDocs/cpp-docs/blob/master/docs/cpp-conformance-improvements-2017.md\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>To avoid this error until further changes to conform are made inside the relevant headers, add this before including them:</p>\n<pre><code>#pragma warning( disable : 4643 ) \n</code></pre>\n<p>This will solve it for now even for code being built from within Unreal Engine 4.</p>\n<p>For regular MSVC compiling, either manual or from within VS, make sure you're not compiling with <code>/WX</code> as <strong>it will make the warnings into errors.</strong></p>\n<p>Also, not that I recommend this as a long term solution, but if you just want to see that you can get it back to build successfully, you can disable the <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/permissive-standards-conformance\" rel=\"nofollow noreferrer\"><code>/permissive</code></a> compiler flag that was introduced in 15.3 to aid enforcing standard conformance.</p>\n"}], "owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 51864240, "answer_count": 1, "score": 2, "last_activity_date": 1534438689, "creation_date": 1534355018, "last_edit_date": 1534355769, "question_id": 51863797, "link": "https://stackoverflow.com/questions/51863797/new-vs-c-update-is-making-boost-forward-declared-code-un-compilable-what-can", "title": "New VS C++ update is making boost forward declared code un-compilable ! What can you do?", "body": "<p>These are the new errors I get when I try to use a project that I am building that uses Boost as statically linked libraries. But the very includes alone cry in compilation. Please advice.</p>\n\n<p>Boost Version : 1.68</p>\n\n<p>Visual Studio version (Community) : 15.8.0 , Last updated Aug 14, 2018.</p>\n\n<pre><code>   Severity Code    Description Project File    Line    Suppression State\n    Error   C4643   Forward declaring 'allocator' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   119 \n    Error   C4643   Forward declaring 'allocator' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   119 \n    Error   C4643   Forward declaring 'allocator' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   119 \n    Error   C4643   Forward declaring 'allocator' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp   30  \n    Error   C4643   Forward declaring 'allocator' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   119 \n    Error   C4643   Forward declaring 'allocator' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp   30  \n    Error   C4643   Forward declaring 'allocator_arg_t' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp 49  \n    Error   C4643   Forward declaring 'allocator_arg_t' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp 49  \n    Error   C4643   Forward declaring 'basic_istream' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp    47  \n    Error   C4643   Forward declaring 'basic_istream' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp    47  \n    Error   C4643   Forward declaring 'basic_ostream' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp    44  \n    Error   C4643   Forward declaring 'basic_ostream' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp    44  \n    Error   C4643   Forward declaring 'basic_string' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp    120 \n    Error   C4643   Forward declaring 'basic_string' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp    120 \n    Error   C4643   Forward declaring 'basic_string' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp    120 \n    Error   C4643   Forward declaring 'basic_string' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp    120 \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\move\\detail\\iterator_traits.hpp   33  \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\move\\detail\\iterator_traits.hpp   33  \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp  43  \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp   30  \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\move\\detail\\iterator_traits.hpp   33  \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\move\\detail\\iterator_traits.hpp   33  \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp  43  \n    Error   C4643   Forward declaring 'bidirectional_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp   30  \n    Error   C4643   Forward declaring 'bitset' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp  143 \n    Error   C4643   Forward declaring 'bitset' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp  143 \n    Error   C4643   Forward declaring 'bitset' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp  143 \n    Error   C4643   Forward declaring 'bitset' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp  143 \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 122 \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 122 \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 122 \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp 39  \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp  34  \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 122 \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\container\\detail\\std_fwd.hpp 39  \n    Error   C4643   Forward declaring 'char_traits' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\interprocess\\detail\\std_fwd.hpp  34  \n    Error   C4643   Forward declaring 'complex' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 127 \n    Error   C4643   Forward declaring 'complex' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 127 \n    Error   C4643   Forward declaring 'complex' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 127 \n    Error   C4643   Forward declaring 'complex' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp 127 \n    Error   C4643   Forward declaring 'deque' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   131 \n    Error   C4643   Forward declaring 'deque' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   131 \n    Error   C4643   Forward declaring 'deque' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   131 \n    Error   C4643   Forward declaring 'deque' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\detail\\container_fwd.hpp   131 \n    Error   C4643   Forward declaring 'forward_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\move\\detail\\iterator_traits.hpp 32  \n    Error   C4643   Forward declaring 'forward_iterator_tag' in namespace std is not permitted by the C++ Standard.boost-root\\boost\\move\\detail\\iterator_traits.hpp 32  \n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "clang++"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1534354286, "post_id": 51863588, "comment_id": 90679321, "body": "It doesn&#39;t say the copy constructor won&#39;t be generated, it&#39;s saying that implicit generation behavior is deprecated. It has been since C++11. You can add <code>MyError(MyError const&amp;) = default;</code> to suppress the warning. You can also get rid of the destructor definition because it will be implicitly virtual due to the base class&#39; destructor being virtual"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1534354345, "post_id": 51863588, "comment_id": 90679346, "body": "You do not have to manually create override for destructor in derived class. Virtual one in base is enough."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1534354861, "post_id": 51863588, "comment_id": 90679565, "body": "Can&#39;t reproduce with regular clang or gcc. Must be a clang-cl quirk. Try not defining a destructor."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1534357704, "post_id": 51863588, "comment_id": 90680933, "body": "had to add switch <code>-Wdeprecated</code> to <a href=\"https://wandbox.org/permlink/tYRUWqV3wMkh53AF\" rel=\"nofollow noreferrer\">reproduce it</a>. Looks like problem is a configuration of compiler. Do you use some custom compiler options?"}, {"owner": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1534362123, "post_id": 51863588, "comment_id": 90682911, "body": "@n.m You need to compile using clang++ -Weverything to see the warning."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1534363184, "post_id": 51863588, "comment_id": 90683352, "body": "@Linoliumz still no such warning with clang++-6.0 and -Weverything (there&#39;s a different warning about no out-of-line virtual method definitions)."}, {"owner": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1534364289, "post_id": 51863588, "comment_id": 90683829, "body": "@n.m I cannot reproduce the warning using clang++-6.0 either. But on Windows x64 with clang-cl /Wall (version 6.0) I get the warning."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1534372660, "post_id": 51863588, "comment_id": 90686624, "body": "@Linoliumz Take a look on link I&#39;ve provided, it is a clang."}], "answers": [{"comments": [{"owner": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "edited": false, "score": 0, "creation_date": 1534361321, "post_id": 51863693, "comment_id": 90682572, "body": "OK, thanks. As I am looking for a simple design and don&#39;t need a custom destructor I will simply remove the destructor."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 7, "last_activity_date": 1534354861, "last_edit_date": 1534354861, "creation_date": 1534354559, "answer_id": 51863693, "question_id": 51863588, "link": "https://stackoverflow.com/questions/51863588/warning-definition-of-implicit-copy-constructor-is-deprecated/51863693#51863693", "title": "Warning: definition of implicit copy constructor is deprecated", "body": "<blockquote>\n  <p>Now I could get rid of that warning by simply removing the virtual destructor but I always thought that derived classes should have virtual destructors if the base class (in this case std::runtime_error) has a virtual destructor.</p>\n</blockquote>\n\n<p>You thought wrong. Derived classes will always have virtual destructor if you define one in base, no matter if you create it explicitly or not. So removing destructor would be simplest solution. As you can see in <a href=\"https://en.cppreference.com/w/cpp/error/runtime_error\" rel=\"noreferrer\">documentation</a> for <code>std::runtime_exception</code> it does not provide it's own destructor either and it is compiler generated because base class <code>std::exception</code> does have virtual dtor.</p>\n\n<p>But in case you do need destructor you can explicitly add compiler generated copy ctor:</p>\n\n<pre><code>MyError( const MyError &amp; ) = default;\n</code></pre>\n\n<p>or prohibit it making class not copyable:</p>\n\n<pre><code>MyError( const MyError &amp; ) = delete;\n</code></pre>\n\n<p>the same for assignment operator.</p>\n"}, {"comments": [{"owner": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "edited": false, "score": 0, "creation_date": 1534361411, "post_id": 51864979, "comment_id": 90682613, "body": "Thanks for your detailed explanation. I will simply remove my destructor as it is not needed."}, {"owner": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "edited": false, "score": 0, "creation_date": 1534361866, "post_id": 51864979, "comment_id": 90682803, "body": "The reason why I was cautious about removing the virtual destructor is that I remember C++ compilers warning about base classes with virtual methods but without virtual destructor. But I guess this is a different issue."}, {"owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "reply_to_user": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "edited": false, "score": 1, "creation_date": 1534362128, "post_id": 51864979, "comment_id": 90682915, "body": "Please do note, that a virtual destructor is still required if you&#39;re ever going to be deleting objects through a pointer to base.   In your particular case, std::exception has a constructor declared virtual, so you do not need to concern yourself with it.  If you are creating a user class, for which you own the base class, you should most certainly declare a virtual destructor inside the base.  As the linked article about the rule of zero is saying, in such cases you should explicitly default all 5 special member functions."}, {"owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "reply_to_user": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "edited": false, "score": 0, "creation_date": 1534395028, "post_id": 51864979, "comment_id": 90691054, "body": "My previous comment should state &quot;std::exception has a <b>destructor</b> declared virtual&quot;. There is no such thing as a virtual constructor, and saying constructor there was a typo."}, {"owner": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "edited": false, "score": 0, "creation_date": 1534402008, "post_id": 51864979, "comment_id": 90693497, "body": "While reading your &quot;constructor declared virtual&quot; I figured out you actually meant &quot;destructor declared virtual&quot; ;-)"}], "tags": [], "owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "is_accepted": false, "score": 28, "last_activity_date": 1534360925, "last_edit_date": 1534360925, "creation_date": 1534360276, "answer_id": 51864979, "question_id": 51863588, "link": "https://stackoverflow.com/questions/51863588/warning-definition-of-implicit-copy-constructor-is-deprecated/51864979#51864979", "title": "Warning: definition of implicit copy constructor is deprecated", "body": "<p>You do not need to explicitly declare the destructor in a derived class:</p>\n\n<p><em>\u00a7 15.4 Destructors [class.dtor]</em> <strong>(emphasis mine)</strong></p>\n\n<blockquote>\n  <p>A destructor can be declared virtual (13.3) or pure virtual (13.4); if\n  any objects of that class or any derived class are created in the\n  program, the destructor shall be defined. If a class has a base class\n  with a virtual destructor, <strong>its destructor (whether user- or\n  implicitly-declared) is virtual</strong>.</p>\n</blockquote>\n\n<p>In fact, it might even be detrimental to performance in some cases, as explicitly declaring a destructor will prevent the implicit generation of a move constructor and move assignment operator.</p>\n\n<p>Unless you need to do something in your destructor, the best course of action would be to just omit an explicit declaration of a destructor. </p>\n\n<p>If you do need a custom destructor, and are certain that the default copy ctor, copy assignment operator, move ctor and move assignment operator would do the correct thing for you, it is best to explicitly default them like so:</p>\n\n<pre><code>MyError(const MyError&amp;) = default;\nMyError(MyError&amp;&amp;) = default;\nMyError&amp; operator=(const MyError&amp;) = default;\nMyError&amp; operator=(MyError&amp;&amp;) = default;\n</code></pre>\n\n<p>Some reasoning on why you're seeing the error, because this used to be perfeclty valid code in C++98:</p>\n\n<p>As of C++11, implicit generation of the copy constructor is declared as deprecated.</p>\n\n<p><em>\u00a7 D.2 Implicit declaration of copy functions [depr.impldec]</em></p>\n\n<blockquote>\n  <p>The implicit definition of a copy constructor as defaulted is\n  deprecated if the class has a user-declared copy assignment operator\n  or a user-declared destructor. The implicit definition of a copy\n  assignment operator as defaulted is deprecated if the class has a\n  user-declared copy constructor or a user-declared destructor (15.4,\n  15.8). In a future revision of this International Standard, these implicit definitions could become deleted (11.4).</p>\n</blockquote>\n\n<p>The rationale behind this text is the well-known Rule of three. </p>\n\n<p>All quotes below are sourced from cppreference.com: <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/language/rule_of_three</a></p>\n\n<h2>Rule of Three</h2>\n\n<blockquote>\n  <p>If a class requires a user-defined destructor, a user-defined copy\n  constructor, or a user-defined copy assignment operator, it almost\n  certainly requires all three.</p>\n</blockquote>\n\n<p>The reason why this rule of thumb exists is because the default generated dtor, copy ctor and assignment operator for handling different types of resources (most notably pointers to memory, but also others, like file descriptors and network sockets to name just a couple) rarely do the correct behaviour. If the programmer thought that he needed special handling for the closing of a file handle in the class destructor, he most surely wants to define how this class should be copied or moved.</p>\n\n<p>For completeness, below are the often related Rule of 5, and the somewhat disputed Rule of Zero</p>\n\n<h2>Rule of Five</h2>\n\n<blockquote>\n  <p>Because the presence of a user-defined destructor, copy-constructor,\n  or copy-assignment operator prevents implicit definition of the move\n  constructor and the move assignment operator, any class for which move\n  semantics are desirable, has to declare all five special member\n  functions:</p>\n</blockquote>\n\n<h2>Rule of Zero</h2>\n\n<blockquote>\n  <p>Classes that have custom destructors, copy/move constructors or\n  copy/move assignment operators should deal exclusively with ownership\n  (which follows from the Single Responsibility Principle). Other\n  classes should not have custom destructors, copy/move constructors or\n  copy/move assignment operators.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 4818802, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1", "display_name": "Xeverous", "link": "https://stackoverflow.com/users/4818802/xeverous"}, "is_accepted": false, "score": 4, "last_activity_date": 1609991297, "last_edit_date": 1609991297, "creation_date": 1571352733, "answer_id": 58441689, "question_id": 51863588, "link": "https://stackoverflow.com/questions/51863588/warning-definition-of-implicit-copy-constructor-is-deprecated/58441689#58441689", "title": "Warning: definition of implicit copy constructor is deprecated", "body": "<p>Note: the same happens for much different code but I'm writing it here in case someone gets the same warning.</p>\n<p>There was a bug in GCC versions 6.4 - 9.0 where <em>using declarations for base_type's operator= and base_type's ctor in types inherited from base_type which was a class template did not actually create copy/move ctor/operators</em> (ending in very unexpected compiler errors that an object can not be copied/moved).</p>\n<p>Since GCC 9.0, the bug is fixed but it creates this warning instead. The warning is wrong and should not appear (the using explicitly declares constructors/operators).</p>\n<ul>\n<li>Example code with workarounds and GCC version comparison: <a href=\"https://godbolt.org/z/WgIH4c\" rel=\"nofollow noreferrer\">https://godbolt.org/z/WgIH4c</a></li>\n<li>GCC bug report: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=89381\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=89381</a></li>\n<li>another GCC bug report: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=92145\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=92145</a></li>\n<li>Origin of this discovery: <a href=\"https://github.com/boostorg/spirit/issues/465\" rel=\"nofollow noreferrer\">https://github.com/boostorg/spirit/issues/465</a></li>\n</ul>\n"}], "owner": {"reputation": 1978, "user_id": 363778, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0066c9b8214ff2db6c99e8216746408d?s=128&d=identicon&r=PG", "display_name": "Linoliumz", "link": "https://stackoverflow.com/users/363778/linoliumz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17522, "favorite_count": 9, "answer_count": 3, "score": 24, "last_activity_date": 1609991297, "creation_date": 1534354135, "question_id": 51863588, "link": "https://stackoverflow.com/questions/51863588/warning-definition-of-implicit-copy-constructor-is-deprecated", "title": "Warning: definition of implicit copy constructor is deprecated", "body": "<p>I have a warning in my C++11 code that I would like to fix correctly but I don't really know how. I have created my own exception class that is derived from <code>std::runtime_error</code>:</p>\n\n<pre><code>class MyError : public std::runtime_error\n{\npublic:\n    MyError(const std::string&amp; str, const std::string&amp; message)\n      : std::runtime_error(message),\n        str_(str)\n    { }\n\n    virtual ~MyError()\n    { }\n\n    std::string getStr() const\n    {\n        return str_;\n    }\n\n  private:\n      std::string str_;\n};\n</code></pre>\n\n<p>When I compile that code with clang-cl using <code>/Wall</code> I get the following warning:</p>\n\n<pre><code>warning: definition of implicit copy constructor for 'MyError' is deprecated \n         because it has a user-declared destructor [-Wdeprecated]\n</code></pre>\n\n<p>So because I have defined a destructor in <code>MyError</code> no copy constructor will be generated for <code>MyError</code>. I don't fully understand if this will cause any issues...</p>\n\n<p>Now I could get rid of that warning by simply removing the virtual destructor but I always thought that derived classes should have virtual destructors if the base class (in this case <code>std::runtime_error</code>) has a virtual destructor.</p>\n\n<p>Hence I guess it is better not to remove the virtual destructor but to define the copy constructor. But if I need to define the copy constructor maybe I should also define the copy assignment operator and the move constructor and the move assignment operator. But this seems overkill for my simple exception class!?</p>\n\n<p>Any ideas how to best fix this issue?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1534354200, "post_id": 51863576, "comment_id": 90679286, "body": "Templates are instantiated at compile time, so no. Unless you embed c++ compiler or interpreter into your app."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1534356368, "post_id": 51863576, "comment_id": 90680344, "body": "Are templates the right approach? Perhaps just a class with a subtype member variable set to the enumeration value?  Enforce any needed type safety with type checks in member functions?"}, {"owner": {"reputation": 307, "user_id": 9540586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d970a23cb61a7876521fcfe76683a50?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita", "link": "https://stackoverflow.com/users/9540586/nikita"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1534356548, "post_id": 51863576, "comment_id": 90680424, "body": "@DaveS do you mean to create a subtype member and add its checking with <code>switch</code> into <code>getIterator</code> function?"}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1534356967, "post_id": 51863576, "comment_id": 90680615, "body": "I mean to re-think why you need separate member functions for every enumeration type instead of shared functions that look at the type (stored or passed to the function) only when they need it.  Generic shared code specialized only as needed.  Your approach might be necessary based on the code we aren&#39;t shown, but in many cases it&#39;s overkill."}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1534363971, "post_id": 51863576, "comment_id": 90683690, "body": "As previously stated templates are resolved by the compiler at compile time. However, you can implement reflection in c++ to give you runtime flexiblity over class structure."}, {"owner": {"reputation": 307, "user_id": 9540586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d970a23cb61a7876521fcfe76683a50?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita", "link": "https://stackoverflow.com/users/9540586/nikita"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1534392984, "post_id": 51863576, "comment_id": 90690569, "body": "@DaveS all functions of <code>iterator</code> depends on the enumeration value so it&#39;s requires a lot of checks with <code>switch</code> into each function. Templates look good because we can use kind of different implementation of one class."}], "owner": {"reputation": 307, "user_id": 9540586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d970a23cb61a7876521fcfe76683a50?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita", "link": "https://stackoverflow.com/users/9540586/nikita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534354109, "creation_date": 1534354109, "question_id": 51863576, "link": "https://stackoverflow.com/questions/51863576/is-it-possible-to-use-runtime-defined-template-parameter", "title": "Is it possible to use runtime-defined template parameter?", "body": "<p>I have a class that consists of an inner template class (<code>iterator</code>) with enumeration (<code>RVSignalInfo::DataType</code>) parameter and template function (<code>getIterator</code>) related to this inner class:</p>\n\n<pre><code>class ProviderSignalPlotCurve : public QObject\n{\n    // ...\n\n    template &lt;RVSignalInfo::DataType DT&gt;\n    class iterator\n    {\n        iterator(ProviderSignalPlotCurve* curve, quint64 begin, quint64 end) throw(WrongReadonlyPointerTypeException) {\n            throw WrongReadonlyPointerTypeException();\n        }\n    };\n\n    template&lt;RVSignalInfo::DataType DT&gt;\n    inline iterator&lt;DT&gt; getIterator(quint64 begin, quint64 end) {\n        return iterator&lt;DT&gt;(this, begin, end);\n    }\n};\n\n\ntemplate&lt;&gt;\nclass ProviderSignalPlotCurve::iterator &lt; RVSignalInfo::DataType::Float &gt;\n{\npublic:\n\n    iterator operator++() { ... }\n    iterator operator++(int)  { ... }\n    // ...\n\nprivate:\n    iterator(ProviderSignalPlotCurve* curve, quint64 begin, quint64 end)\n        : m_curve(curve), m_index(begin)\n    {\n        // ...\n    }\n    // ...\n};\n\ntemplate&lt;&gt;\nclass ProviderSignalPlotCurve::iterator &lt; RVSignalInfo::DataType::Double &gt;\n{\npublic:\n\n    iterator operator++() { ... }\n    iterator operator++(int)  { ... }\n    // ...\n\nprivate:\n    iterator(ProviderSignalPlotCurve* curve, quint64 begin, quint64 end)\n        : m_curve(curve), m_index(begin)\n    {\n        // ...\n    }\n    // ...\n};\n\n// ...\n</code></pre>\n\n<p>Each enumeration member has its own specialization of template class.</p>\n\n<p>If I try to create an instance of <code>iterator</code>, the compiler provides an <code>the value of 'dataType' is not usable in a constant expression</code> error. I guess it's because the template parameter has to be defined in runtime. Is there a way to deal with this problem?</p>\n\n<pre><code>RVSignalInfo::DataType dataType = curve-&gt;signalInfo()-&gt;dataType();\nauto iterator = curve-&gt;getIterator&lt;dataType&gt;(visiblePartBegin, visiblePartEnd);\n</code></pre>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/38381226/int-p-is-not-a-constant-expression-in-lpnormp\">this</a> workaround with <code>switch</code> statement, but it doesn't look convenient because it'll have to change the <code>switch</code> statement every time I add or remove an enumeration member. Is there more generalized way to deal with it?</p>\n"}, {"tags": ["c++", "memory-leaks", "valgrind", "memcheck"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 5, "creation_date": 1534353809, "post_id": 51863409, "comment_id": 90679131, "body": "(in general) Don&#39;t do manual memory management in modern C++. It&#39;s no longer the 90&#39;s - we have better ways. Research containers and smart pointers (and make sure you are using a up-to-date version of C++ like C++17 (or <i>at least</i> C++14)). Ohh and <code>using namespace std;</code> is going to bite you eventually - just ditch that bad habit now."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1534354084, "post_id": 51863409, "comment_id": 90679248, "body": "In <code>Stack::AddNode(int data)</code> what happens to <code>n</code> if <code>stackptr</code> is not null?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1534354371, "post_id": 51863409, "comment_id": 90679358, "body": "<code>Stack::Stack() {   stackptr = nullptr; }</code> at least use the constructors initialization list (or in-class initialization) - the constructor body is a last resort that comes with performance implications (object first default constructed, then assigned to, rather than just initialized once). Doesn&#39;t matter much for a simple pointer, but for complex objects it can be a killer and may not even be <i>possible</i> (and it&#39;s just a bad habit in general, with no up sides)."}, {"owner": {"reputation": 33, "user_id": 7135088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b55495f358b1b9ae0c7eccd01501241b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7135088/john"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1534354603, "post_id": 51863409, "comment_id": 90679467, "body": "@Jesper Juhl I won&#39;t be able to use smart pointers in my class, so I figured it would be best to practice using them the way I am. I agree that smart pointers are much better to use though. Thank you for the info! I will have to look more into constructor initialization lists."}, {"owner": {"reputation": 33, "user_id": 7135088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b55495f358b1b9ae0c7eccd01501241b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7135088/john"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1534354841, "post_id": 51863409, "comment_id": 90679554, "body": "@user4581301 and drescherjm, as of right now, nothing happens. I&#39;m only adding one thing to the stack to test it, and then trying to deallocate it. After I figure that out I will add more to AddNode."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534355171, "post_id": 51863409, "comment_id": 90679711, "body": "The reason I asked is this is a memory leak. <code>n</code> is not added to the stack and is leaked if <code>stackptr  != nullptr</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1534355218, "post_id": 51863409, "comment_id": 90679733, "body": "In that case I don&#39;t see a problem. Can we trouble you for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can recreate exactly what you are doing?  Off topic: Here&#39;s what I wrote to make sure your destructor was  sane: <a href=\"https://ideone.com/KQyTd1\" rel=\"nofollow noreferrer\">ideone.com/KQyTd1</a> . You may find the <code>AddNode</code> method useful."}, {"owner": {"reputation": 33, "user_id": 7135088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b55495f358b1b9ae0c7eccd01501241b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7135088/john"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1534362091, "post_id": 51863409, "comment_id": 90682896, "body": "@user4581301 I have updated my original post with my minimal, complete example. I did my AddNode function a bit different than you did, but it looks like it is doing the same thing. Thank you for your help by the way."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1534365393, "post_id": 51863409, "comment_id": 90684302, "body": "Not a problem.  I&#39;m not able to reproduce with or without valgrind. The leaks you have are tagged as still reachable. Could be that they are simply not being freed before the report is being generated. Make sure the program output announcing the deletes is before the valgrind output announcing the leaks, not after."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1534366448, "post_id": 51863409, "comment_id": 90684730, "body": "Because I forgot that you are making a stack, my addnode routine wouldn&#39;t be that useful to you. I wrote it to add nodes to the end. Since all you want to do is push and pop from the same spot, you might as well make it the beginning and you can&#39;t write it much better than what you&#39;ve got unless you add a constructor to <code>node</code>."}, {"owner": {"reputation": 33, "user_id": 7135088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b55495f358b1b9ae0c7eccd01501241b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7135088/john"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1534366757, "post_id": 51863409, "comment_id": 90684847, "body": "@user4581301 I found out what it was! It&#39;s kind of odd, but when I removed &quot;#include &lt;iostream&gt;&quot; and all &quot;cout&quot; statements, I had no more still reachable memory. It must be something with including the library."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1534369101, "post_id": 51863409, "comment_id": 90685648, "body": "Interesting. If you can dig up the version of the compiler you are using and add it to the question someone might see it and go, &quot;Oh. THAT bug.&quot; and let you in on a part of the mystery"}, {"owner": {"reputation": 33, "user_id": 7135088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b55495f358b1b9ae0c7eccd01501241b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7135088/john"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1534381601, "post_id": 51863409, "comment_id": 90688496, "body": "@user4581301 That&#39;s a good idea! I have added the version of c++ and valgrind that I&#39;m using."}], "owner": {"reputation": 33, "user_id": 7135088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b55495f358b1b9ae0c7eccd01501241b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7135088/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534801062, "creation_date": 1534353389, "last_edit_date": 1534801062, "question_id": 51863409, "link": "https://stackoverflow.com/questions/51863409/still-reachable-allocated-memory-using-valgrind", "title": "Still Reachable allocated memory using valgrind", "body": "<p>I'm getting ready for an object oriented class starting in a few weeks, but I'm having trouble with the concept of deallocating memory. RIght now I'm just allocating memory to the first node of the stack, and then trying to deallocate it. If anyone could help me find what I am doing wrong with my destructor, it would be greatly appreciated. Thanks in advance!</p>\n\n<p>The output I am getting from valgrind memcheck is:</p>\n\n<pre><code>==13653== 8 bytes in 1 blocks are still reachable in loss record 1 of 1\n==13653==    at 0x4847DA4: operator new(unsigned int) (vg_replace_malloc.c:328)\n==13653==    by 0x10A2B: Stack::AddNode(int) (Stack.C:25)\n==13653==    by 0x10923: main (Main.C:5)\n==13653==\n==13653== LEAK SUMMARY:\n==13653==    definitely lost: 0 bytes in 0 blocks\n==13653==    indirectly lost: 0 bytes in 0 blocks\n==13653==      possibly lost: 0 bytes in 0 blocks\n==13653==    still reachable: 8 bytes in 1 blocks\n==13653==         suppressed: 0 bytes in 0 blocks\n</code></pre>\n\n<p><strong><em>Code:</em></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Stack {\n  private:\n\n    struct node{\n      int data;\n      node * prev;\n    };\n\n    node * stackptr;\n\n  public:\n\n   Stack() {\n     stackptr = nullptr;\n   }\n\n   ~Stack() {\n      cout &lt;&lt; \"Calling destructor\" &lt;&lt; endl;\n      node * p1 = stackptr;\n      node * delptr = nullptr;\n\n      while(p1 != nullptr) {\n        delptr = p1;\n        p1 = p1-&gt;prev;\n        delptr-&gt;prev = nullptr;\n        cout &lt;&lt; \"Deleteing \" &lt;&lt; delptr-&gt;data &lt;&lt; \" from the stack\" &lt;&lt; endl;\n        delete delptr;\n      }\n   }\n\n   void AddNode(int data) {\n      node * n = new node;\n      n-&gt;data = data;\n\n      if(stackptr == nullptr) {\n        stackptr = n;\n        stackptr-&gt;prev = nullptr;\n      }\n      else {\n         n-&gt;prev = stackptr;\n         stackptr = n;\n      }\n   }\n};\n\nint main() {\n  Stack s;\n  s.AddNode(1);\n  s.AddNode(2);\n  return 0;\n}\n</code></pre>\n\n<p>EDIT: I have finished my AddNode class. I am still having a similar issue, but with two memory leaks now (The two calls to AddNode in main).</p>\n\n<p>EDIT: Using C++ version 6.3.0 and valgrind version 3.13.0</p>\n"}, {"tags": ["c++", "filesystems", "c++17"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534353396, "post_id": 51863283, "comment_id": 90678953, "body": "Next time please add the code to the question. Remember that a question on StackOverflow is supposed to help readers years from now. Links will rot making the question pointless. I just selected the code from the link and used the {} button to add it as a code block."}, {"owner": {"reputation": 114, "user_id": 3935666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec845168cad9a9473b9ee1b363e9b640?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny Castro", "link": "https://stackoverflow.com/users/3935666/kenny-castro"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1534353477, "post_id": 51863283, "comment_id": 90678989, "body": "I&#39;ll keep that in mind, I just don&#39;t know a good way to actually make it into a block of code like that. I&#39;m still pretty knew on this site"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534353560, "post_id": 51863283, "comment_id": 90679024, "body": "Its probably one reason why your question has a negative rating."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1534354347, "post_id": 51863283, "comment_id": 90679347, "body": "I&#39;m slightly confused but... aren&#39;t you trying to overwrite a directory with a regular file?  Sorry if I&#39;ve missed something."}, {"owner": {"reputation": 114, "user_id": 3935666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec845168cad9a9473b9ee1b363e9b640?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny Castro", "link": "https://stackoverflow.com/users/3935666/kenny-castro"}, "edited": false, "score": 0, "creation_date": 1534355640, "post_id": 51863283, "comment_id": 90679947, "body": "G.M you&#39;re entirely right, I was under the assumption that it would copy the file into the directory but now I&#39;ve realized that you have to specify the name of the new file as it will be created and then the file will be copied into the new one. edit: Feel free to post it as the answer"}], "answers": [{"tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1534362079, "last_edit_date": 1534362079, "creation_date": 1534358141, "answer_id": 51864518, "question_id": 51863283, "link": "https://stackoverflow.com/questions/51863283/c-17-filesystem-copy-file-access-denied/51864518#51864518", "title": "c++ 17 filesystem copy_file access denied", "body": "<p>As per the comments.  You were trying to overwrite a directory with a regular file.  From the <a href=\"https://en.cppreference.com/w/cpp/filesystem/copy_file\" rel=\"nofollow noreferrer\">documentation</a> [trimmed]</p>\n\n<pre><code>o Otherwise, if the destination file already exists...\n  o Report an error if any of the following is true:\n    o to and from are the same as determined by equivalent(from, to);\n    o to is not a regular file as determined by !is_regular_file(to)\n</code></pre>\n\n<p>So you need to append the filename to the destination directory path using the <a href=\"https://en.cppreference.com/w/cpp/filesystem/path/operator_slash\" rel=\"nofollow noreferrer\">`std::filesystem::operator/</a> overload (untested)...</p>\n\n<pre><code>if (!fs::copy_file(p.path(), tempDir / p.filename(), fs::copy_options::overwrite_existing, errCode))\n</code></pre>\n"}], "owner": {"reputation": 114, "user_id": 3935666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec845168cad9a9473b9ee1b363e9b640?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny Castro", "link": "https://stackoverflow.com/users/3935666/kenny-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 0, "accepted_answer_id": 51864518, "answer_count": 1, "score": -1, "last_activity_date": 1534362079, "creation_date": 1534352860, "last_edit_date": 1534353322, "question_id": 51863283, "link": "https://stackoverflow.com/questions/51863283/c-17-filesystem-copy-file-access-denied", "title": "c++ 17 filesystem copy_file access denied", "body": "<p>I'm using visual studio 2017, running with the c++17 ISO Standard(not boost) set to be able to use <code>&lt;filesystem&gt;</code>. I'm running into a wall though because everytime I run, whether in debug or release, <code>file_copy()</code> gives me the error access denied. I've checked the other bits of my code and the only thing that isn't working is <code>file_copy()</code>. Does anyone know why I'm getting this error and how to fix it? I'm the administrative account on my PC.</p>\n\n<pre><code>std::vector&lt;std::string&gt; findAndCopyFiles()\n{\n    std::vector&lt;std::string&gt; fileNames;\n    std::error_code errCode;\n    errCode.clear();\n\n    fs::current_path(\"C:\\\\Users\\\\kenny\\\\Desktop\\\\Engine\", errCode);\n    std::cout &lt;&lt; errCode.message() &lt;&lt; std::endl; errCode.clear();\n\n    fs::path pa = fs::current_path();\n    pa += \"\\\\TEMP\";\n    std::cout &lt;&lt; pa.string() &lt;&lt; std::endl;\n\n    if (fs::create_directory(pa, errCode))//Create directory for copying all files)\n    {\n        std::cout &lt;&lt; \"Directory created successfully\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; errCode.message() &lt;&lt; std::endl; errCode.clear();\n    }\n    fs::path tempDir(pa);\n    fs::path currentDirectory = fs::current_path();\n    fs::recursive_directory_iterator dirIter(currentDirectory);\n    for (auto &amp;p : dirIter)\n    {\n        if (p.path().extension() == \".cpp\" || p.path().extension() == \".h\")\n        {\n            //std::string fileContents = getFileContents(p.path().string());\n\n            std::string fileName = p.path().stem().string();\n            if (!fs::copy_file(p.path(), tempDir, fs::copy_options::overwrite_existing, errCode))\n            {\n                std::cout &lt;&lt; \"failed to copy file: \" &lt;&lt; fileName &lt;&lt; \" from \" &lt;&lt; p.path().string() &lt;&lt; \" to \" &lt;&lt; tempDir.string() &lt;&lt;std::endl;\n            }\n            std::cout &lt;&lt; errCode.message() &lt;&lt; std::endl; errCode.clear();\n\n            //ensures file is a cpp file before adding it to list of fileNames\n            if (p.path().extension().string() == \".cpp\")\n            {\n                auto it = std::find(fileNames.begin(), fileNames.end(), fileName); //seaches TEMP folder for file\n                if (it == fileNames.end())\n                {//if file was not found in vector of registered file names, add it\n                    fileNames.push_back(fileName);\n                }\n            }\n        }\n    }\n    std::cout &lt;&lt; \"All files found. \" &lt;&lt; fileNames.size() &lt;&lt; \" files were found\" &lt;&lt; std::endl;\n    return fileNames;\n}\n</code></pre>\n"}, {"tags": ["c++", "sfml"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9648774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fd15530b0a1f596f75c08e3752f633?s=128&d=identicon&r=PG&f=1", "display_name": "Zayyan", "link": "https://stackoverflow.com/users/9648774/zayyan"}, "edited": false, "score": 0, "creation_date": 1534434128, "post_id": 51870900, "comment_id": 90713067, "body": "The second solution works! I dunno why the first one didn&#39;t, but it&#39;s fine since what I&#39;m doing is fairly small. I&#39;m still learning, so I&#39;m just working on some beginner projects.."}], "tags": [], "owner": {"reputation": 199, "user_id": 8572843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jf3W8.png?s=128&g=1", "display_name": "gotocoffee", "link": "https://stackoverflow.com/users/8572843/gotocoffee"}, "is_accepted": true, "score": 1, "last_activity_date": 1534401188, "creation_date": 1534401188, "answer_id": 51870900, "question_id": 51863169, "link": "https://stackoverflow.com/questions/51863169/how-do-i-assign-a-value-in-an-array-when-a-mouse-is-pressed-sfml-c/51870900#51870900", "title": "How do I assign a value in an array when a mouse is pressed SFML C++", "body": "<p>Your source-code is a bit incomplete (what is <code>onCanvas</code> and <code>mousepointer</code>). But I guess the problem is that this snippet is called multiple times while your mouse is clicked. To avoid that you can do two thing.</p>\n\n<p>In the first solution you use <a href=\"https://www.sfml-dev.org/tutorials/2.5/window-events.php\" rel=\"nofollow noreferrer\">events</a>, so you only add shapes when the state of the mousebutton changes (you can additionally listen to the <code>MouseButtonReleased</code> to simulate a full click):</p>\n\n<pre><code>if (event.type == sf::Event::MouseButtonPressed)\n{\n    if (event.mouseButton.button == sf::Mouse::Left)\n    {\n        // Hit Detection\n    }\n}\n</code></pre>\n\n<p>or second solution you remember the last state of the button (probably do the mouse check once outside of the for loop):</p>\n\n<pre><code>bool mouse_was_up = true;\nif (mouse_was_up  &amp;&amp; Mouse::isButtonPressed(Mouse::Left)) {\n    mouse_was_up = false;\n    for (auto&amp; it : onCanvas) {\n        // Hit Detection\n    }\n}\nelse if (!Mouse::isButtonPressed(Mouse::Left))\n    mouse_was_up = true;\n</code></pre>\n\n<p>I would rather stick to the first solution because when your click is too short and your gameloop is in another part of the game logic, you can miss the click. </p>\n"}], "owner": {"reputation": 13, "user_id": 9648774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fd15530b0a1f596f75c08e3752f633?s=128&d=identicon&r=PG&f=1", "display_name": "Zayyan", "link": "https://stackoverflow.com/users/9648774/zayyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 51870900, "answer_count": 1, "score": 0, "last_activity_date": 1534401188, "creation_date": 1534352340, "question_id": 51863169, "link": "https://stackoverflow.com/questions/51863169/how-do-i-assign-a-value-in-an-array-when-a-mouse-is-pressed-sfml-c", "title": "How do I assign a value in an array when a mouse is pressed SFML C++", "body": "<p>I am trying to make a program where you are allowed to select between an option of shapes, and then drawing it. To allow for multiple shapes I created a vector of a class which creates shapes (Shapes are set up with the chosen function). My problem is the mouse click is too long, so it assigns it to everything in the vector, so you can't create a new shape. Is there a problem in my logic, or is there a problem in the code?</p>\n\n<p>Here is my attempt:</p>\n\n<pre><code>for (auto&amp; it : onCanvas) {\n        if (Mouse::isButtonPressed(Mouse::Left)) {\n            if (mousepointer.getGlobalBounds().intersects(circleOption.getGlobalBounds())) {\n                it.chosen(circles);\n            }\n            if (mousepointer.getGlobalBounds().intersects(rectOption.getGlobalBounds())) {\n                it.chosen(rectangle);\n            }\n            if (mousepointer.getGlobalBounds().intersects(triOption.getGlobalBounds())) {\n                it.chosen(triangles);\n            }\n            if (mousepointer.getGlobalBounds().intersects(it.shape.getGlobalBounds()) || it.dragging) {\n                it.shape.setPosition(mousepointer.getPosition());\n                it.dragging = true;\n            }\n        }\n        if (!Mouse::isButtonPressed) {\n            it.dragging = false;\n        }\n        win.draw(it.shape);\n    }\n</code></pre>\n"}, {"tags": ["c++", "design-patterns", "microcontroller"], "comments": [{"owner": {"reputation": 1844, "user_id": 4844024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9de342e1ce408f4874eac3f019efb33?s=128&d=identicon&r=PG&f=1", "display_name": "mad.meesh", "link": "https://stackoverflow.com/users/4844024/mad-meesh"}, "edited": false, "score": 0, "creation_date": 1534352398, "post_id": 51863118, "comment_id": 90678499, "body": "can you just create a separate class for the shared connection and then simply inject it to those that need it? all classes needing it should implement an method like \u2018set connection\u2019 etc... or the flavored classes could register with the class that manages the shared conn"}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1534355184, "post_id": 51863118, "comment_id": 90679720, "body": "One could create a static connection instance in the base class.  That makes it auto shared between each derived class.  The parameter base class could have have a a reference to the connection set at object construction time."}, {"owner": {"reputation": 643, "user_id": 10215177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feb889d40c3e7f3a28865dc1e0b9598?s=128&d=identicon&r=PG&f=1", "display_name": "PluginPenguin", "link": "https://stackoverflow.com/users/10215177/pluginpenguin"}, "edited": false, "score": 0, "creation_date": 1534360052, "post_id": 51863118, "comment_id": 90682020, "body": "A single static connection instance wouldn&#39;t suit here, as there might be multiple devices each with their own connection as well as multiple devices sharing one connection. With each parameterSet class from the example above having it own reference to the connection I see the difficulty of <code>sizeof (SpecificDeviceType11)</code> (2 references) being different to <code>sizeof (SpecificDeviceType12)</code> (3 references) so on a microcontroller without the ability to dynamically allocate memory this would lead to the problem of not knowing how much space on the stack to pre-allocate for putting the objects there."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534402394, "post_id": 51863118, "comment_id": 90693702, "body": "&quot; this should be able run on a microcontroller with a small memory footprint&quot; Then don&#39;t use intricate inheritance schemes or multiple inheritance. You need to simplify the OOP design and dependences. Don&#39;t write a single line of code until the design is simple and sensible. Then from there pick which language that would do the job best. In case on microcontrollers it is almost certainly C, even though implementing an OOP design in C is more painful than in C++."}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 10215177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feb889d40c3e7f3a28865dc1e0b9598?s=128&d=identicon&r=PG&f=1", "display_name": "PluginPenguin", "link": "https://stackoverflow.com/users/10215177/pluginpenguin"}, "edited": false, "score": 0, "creation_date": 1534364392, "post_id": 51865242, "comment_id": 90683883, "body": "Thank you, didn&#39;t know about virtual inheritance until now! Would this also work with DeviceBase having a virtual member function that is overridden by the GenericDeviceType classes (--&gt; non-virtual inheritance of DeviceBase) but not by the ParameterSet classes (--&gt; virtual inheritance of DeviceBase)?"}, {"owner": {"reputation": 643, "user_id": 10215177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feb889d40c3e7f3a28865dc1e0b9598?s=128&d=identicon&r=PG&f=1", "display_name": "PluginPenguin", "link": "https://stackoverflow.com/users/10215177/pluginpenguin"}, "edited": false, "score": 0, "creation_date": 1534366155, "post_id": 51865242, "comment_id": 90684619, "body": "Just played around a bit with this pattern. While it really helps to achieve the clean interface I&#39;m looking for it still results in Objects with multiple virtual inheritances having a bigger memory footprint than the base class, according to some simple <code>sizeof</code> calls. Anyway, I could find a way around this if neccesarry"}, {"owner": {"reputation": 643, "user_id": 10215177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feb889d40c3e7f3a28865dc1e0b9598?s=128&d=identicon&r=PG&f=1", "display_name": "PluginPenguin", "link": "https://stackoverflow.com/users/10215177/pluginpenguin"}, "edited": false, "score": 0, "creation_date": 1534367825, "post_id": 51865242, "comment_id": 90685263, "body": "Did some more tests and found out that every additional virtual inheritance seems to increase the size of the Object by 8 Bytes. So this is not really suitable for my use case, even if your answer looked really promising in the first place"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 643, "user_id": 10215177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feb889d40c3e7f3a28865dc1e0b9598?s=128&d=identicon&r=PG&f=1", "display_name": "PluginPenguin", "link": "https://stackoverflow.com/users/10215177/pluginpenguin"}, "edited": false, "score": 0, "creation_date": 1534371460, "post_id": 51865242, "comment_id": 90686353, "body": "@PluginPenguin: Sounds like a broken compiler -- maybe find a better one?  virtual inheritance should only increase the size of the vtable, never the size of the objects."}, {"owner": {"reputation": 643, "user_id": 10215177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feb889d40c3e7f3a28865dc1e0b9598?s=128&d=identicon&r=PG&f=1", "display_name": "PluginPenguin", "link": "https://stackoverflow.com/users/10215177/pluginpenguin"}, "edited": false, "score": 0, "creation_date": 1534413699, "post_id": 51865242, "comment_id": 90700172, "body": "I don&#39;t think my compiler is broken. Just tested <a href=\"https://gist.github.com/JanosGit/f3e4ddd493e9bdd3fcaa27fe65a6c3c4\" rel=\"nofollow noreferrer\">this</a> little gist I set up for testing this with an up-to-date Xcode release (Apple LLVM version 9.0.0 (clang-900.0.38)) - wouldn&#39;t expect this setup to be broken as a first explanation for my observations."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 1, "last_activity_date": 1534361644, "creation_date": 1534361644, "answer_id": 51865242, "question_id": 51863118, "link": "https://stackoverflow.com/questions/51863118/object-with-multiple-inheritance-sharing-one-resource-looking-for-good-design/51865242#51865242", "title": "Object with multiple inheritance sharing one resource - looking for good design pattern", "body": "<p>The usual way of doing this is to make the DeviceBase base class <code>public virtual</code> and including it as a <code>public virtual</code> base class of all various ParameterSet classes that need to know about it.  Then any of them can access the connection if they need to.</p>\n\n<p>When you use virtual inheritance like this, you need to explicit initialize the <code>DeviceBase</code> base class in every non-abstract class's constructors, but that is not too difficult.</p>\n"}, {"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": false, "score": 0, "last_activity_date": 1549057356, "last_edit_date": 1549057356, "creation_date": 1549045883, "answer_id": 54485272, "question_id": 51863118, "link": "https://stackoverflow.com/questions/51863118/object-with-multiple-inheritance-sharing-one-resource-looking-for-good-design/54485272#54485272", "title": "Object with multiple inheritance sharing one resource - looking for good design pattern", "body": "<p>My first attempt is actually sub-optimal (see the edit history if you are interested in that). It is in fact not possible to do multiple inheritance and keep the size of the derived class the same as the \"real\" Base class, since each parent class must have a distinct address (even if all but one \nparent class is empty).</p>\n\n<p>You can instead use tailed inheritance like this:</p>\n\n<pre><code>struct Connection {\n    template&lt;class T&gt;\n    void sendParameter(int,T); // implemented somewhere\n    template&lt;class T&gt;\n    T requestParameter(int);   // implemented somewhere\n};\n\nclass DeviceBase {\npublic:\n    void setOnOffState(bool onOff) { connection.sendParameter(0, onOff); }\n    bool getOnOffState()           { return connection.requestParameter&lt;bool&gt;(0); }\nprotected:\n    DeviceBase(Connection&amp; c) : connection(c) {}\n    template&lt;class T&gt;\n    void sendParameter(int i,T t) { connection.sendParameter(i,t); }\n    template&lt;class T&gt;\n    T requestParameter(int i) { return connection.requestParameter&lt;T&gt;(i); }\nprivate:\n    Connection&amp; connection;\n};\n\ntemplate&lt;class Base&gt;\nclass DeviceType1ParameterSetX : public Base // a device with parameters A and B\n{\npublic:\n    void setParameterA (float parameterA) { this-&gt;sendParameter(0xA, parameterA);}\n    float getParameterA()                 { return  this-&gt;template requestParameter&lt;float&gt;(0xA);}\n    void setParameterB (int parameterB)   { this-&gt;sendParameter(0xB, parameterB);}\n    int getParameterB()                   { return  this-&gt;template requestParameter&lt;int&gt;(0xB);}\n\n    DeviceType1ParameterSetX(Connection&amp; c) : Base(c) {}\n\n};\n\ntemplate&lt;class Base&gt;\nclass DeviceType1ParameterSetY : public Base // a device with parameters C and D\n{\npublic:\n    void setParameterC (float parameterC) { this-&gt;sendParameter(0xC, parameterC);}\n    float getParameterC()                 { return  this-&gt;template requestParameter&lt;float&gt;(0xC);}\n    void setParameterD (int parameterD)   { this-&gt;sendParameter(0xD, parameterD);}\n    int getParameterD()                   { return  this-&gt;template requestParameter&lt;int&gt;(0xD);}\n    DeviceType1ParameterSetY(Connection&amp; c) : Base(c) {}\n};\n\ntemplate&lt;class Base&gt;\nclass DeviceType1ParameterSetZ : public Base // a device with parameters E and F\n{\npublic:\n    void setParameterE (float parameterE) { this-&gt;sendParameter(0xE, parameterE);}\n    float getParameterE()                 { return  this-&gt;template requestParameter&lt;float&gt;(0xE);}\n    void setParameterF (int parameterF)   { this-&gt;sendParameter(0xF, parameterF);}\n    int getParameterF()                   { return  this-&gt;template requestParameter&lt;int&gt;(0xF);}\n    DeviceType1ParameterSetZ(Connection&amp; c) : Base(c) {}\n\n};\n\nclass SpecificDeviceTypeXZ : public \n        DeviceType1ParameterSetX&lt;\n        DeviceType1ParameterSetZ&lt;\n            DeviceBase&gt; &gt;\n{\npublic:\n    SpecificDeviceTypeXZ (Connection &amp;c) : DeviceType1ParameterSetX(c) {}\n    //...\n};\n\n\nclass SpecificDeviceTypeXY : public \n        DeviceType1ParameterSetX&lt;\n        DeviceType1ParameterSetY&lt;\n            DeviceBase&gt; &gt;\n{\npublic:\n    SpecificDeviceTypeXY (Connection &amp;c) : DeviceType1ParameterSetX(c) {}\n    //...\n};\n\nvoid foo(Connection&amp; c)\n{\n    SpecificDeviceTypeXY xy(c);\n    SpecificDeviceTypeXZ xz(c);\n    static_assert(sizeof(xy)==sizeof(void*), \"xy must just contain a reference\");\n    static_assert(sizeof(xz)==sizeof(void*), \"xz must just contain a reference\");\n    xy.setOnOffState(true);\n    xy.setParameterC(1.0f);\n    xz.setParameterF(xy.getParameterB());\n}\n</code></pre>\n\n<p>I somewhat simplified your example to save some typing (e.g., I left out <code>GenericDeviceType1</code> which would essentially be a <code>DeviceType1ParameterSetX&lt;DeviceBase&gt;</code> in my example), and the names/numbers don't match your example.</p>\n\n<p>To play around here is a godbolt-Link (confirming that the size does not grow): <a href=\"https://godbolt.org/z/BtNOe_\" rel=\"nofollow noreferrer\">https://godbolt.org/z/BtNOe_</a>\nHere, <code>rdi</code> will hold the first pointer parameter (which most of the time is the implicit <code>this</code> parameter), or the pointer implied by the <code>Connection&amp; c</code> parameter of <code>foo</code>. <code>esi</code> will always hold the parameter number <code>i</code> (since it is the first integer parameter to the methods of <code>Connection</code>, and depending on the type, the next parameter (of the <code>sendParameter</code> calls) will be passed via <code>xmm0</code> or <code>edx</code>. The return value will be in <code>eax</code> for integers and in <code>xmm0</code> for floats (that is all assuming x86_64bit ABI).</p>\n\n<p>To understand what happens I also recommend to insert some debug-outputs (like <code>cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; ' ' &lt;&lt; this &lt;&lt; '\\n';</code>) at several places.</p>\n\n<p>Adding data members (or methods) at any stage should be save (of course it will increase the size).</p>\n"}], "owner": {"reputation": 643, "user_id": 10215177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feb889d40c3e7f3a28865dc1e0b9598?s=128&d=identicon&r=PG&f=1", "display_name": "PluginPenguin", "link": "https://stackoverflow.com/users/10215177/pluginpenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1549057356, "creation_date": 1534352144, "last_edit_date": 1534410971, "question_id": 51863118, "link": "https://stackoverflow.com/questions/51863118/object-with-multiple-inheritance-sharing-one-resource-looking-for-good-design", "title": "Object with multiple inheritance sharing one resource - looking for good design pattern", "body": "<p>Hope this has not been answered before, I found it very hard to find a snappy description of my problem.</p>\n\n<p>I'm about to write a C++ API that should compile on microcontroller as well as on PC targets which abstracts communication with some hardware device. The operation modes of the device and with that the parameters to control might change at runtime while the connection stays the same. The connection is managed by a separate class, to which my base class instance has a protected reference. A basic device looks like that (simplified example):</p>\n\n<pre><code>class DeviceBase\n{\npublic:\n    void setOnOffState (bool onOff);\n    bool getOnOffState();\nprotected:\n    DeviceBase (Connection&amp; c);\n    Connection&amp; connection;\n}\n\nDeviceBase::DeciveBase (Connection&amp; c) : connection (c) {};\nvoid DeviceBase::setOnOffState (bool onOff) {connection.sendParameter (/* Parameter number for onOff */, onOff); };\nbool DeviceBase::getOnPffState() {return connection.requestParameter (/* Parameter number for onOff */); };\n</code></pre>\n\n<p>Now there are some generic device types which all share a basic parameter set. Let's say there is generic type 1 which always has parameterA and parameterB and generic type 2 which always has parameterC and parameterD. So their implementation could look like this:</p>\n\n<pre><code>class GenericDeviceType1 : public DeviceBase\n{\npublic:\n    void setParameterA (int parameterA);\n    int getParameterA();\n    void setParameterB (char parameterB);\n    char getParameterB();\nprotected:\n    GenericDeviceType1 (Connection&amp; c);\n}\n\nGenericDeviceType1::GenericDeviceType1 (Connection&amp; c) : DeviceBase (c) {};\nvoid GenericDeviceType1::setParameterA (int parameterA) {connection.sendParameter (/* Parameter number for parameterA */, parameterA); };\nint  GenericDeviceType1::getParameterA() {return connection.requestParameter (/* Parameter number for parameterA */); };\n//... and so on - I think you got the principle\n</code></pre>\n\n<p>But it gets even more complicated. There are specific flavors of each type. But some share some groups of parameters. Now what I'd ideally like to do is to build them up with multiple inheritance like this:</p>\n\n<pre><code>class DeviceType1ParameterSetX // a device with parameters E and F\n{\npublic:\n    void setParameterE (float parameterE);\n    float getParameterE();\n    void setParameterF (int parameterF);\n    int getParameterF();\n}\n\nclass DeviceType1ParameterSetY // a device with parameters G and H\n{\npublic:\n    void setParameterG (bool parameterG);\n    bool getParameterG();\n    void setParameterH (char parameterH);\n    char getParameterH();\n}\n\nclass DeviceType1ParameterSetZ // a device with parameters I and J\n{\npublic:\n    void setParameterI (int parameterI);\n    int getParameterI();\n    void setParameterJ (int parameterJ);\n    int getParameterJ();\n}\n\nclass SpecificDeviceType11 : public GenericDeviceType1,\n                             public DeviceType1ParameterSetX,\n                             public DeviceType1ParameterSetZ\n{\npublic:\n    SpecificDeviceType11 (Connection &amp;c);\n    //...\n}\n\nclass SpecificDeviceType12 : public GenericDeviceType1,\n                             public DeviceType1ParameterSetX,\n                             public DeviceType1ParameterSetY,\n                             public DeviceType1ParameterSetZ\n{\npublic:\n    SpecificDeviceType12 (Connection &amp;c);\n    //...\n}\n</code></pre>\n\n<p>Problem with this approach: The classes <code>DeviceTypeNParameterSetM</code> don't know anything about the connection, so implementing their setter and getter functions invoking the connection instance is not directly possible. However, I really would like to avoid making the connection member of the base class public to keep the api clean. I know that I could store a reference to the connection in each parameter set class, but that seems like a waste of memory to me, regarding the fact that this should be able run on a microcontroller with a small memory footprint and without the possibility of dynamic memory management. So ideally the memory footprint of each specific instance should be the same.</p>\n\n<p>Now my question is: How could a solution resulting in a clean public API look like? I'm looking forward to some inspiration! As a side information: There will be some 150 different specific device flavors in the end, so I'd really like to keep it as organized and user-friendly as possible!</p>\n"}, {"tags": ["c++", "stl", "shared-libraries"], "comments": [{"owner": {"reputation": 1327, "user_id": 2990896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hSkaq.jpg?s=128&g=1", "display_name": "cplusplusrat", "link": "https://stackoverflow.com/users/2990896/cplusplusrat"}, "edited": false, "score": 0, "creation_date": 1534352604, "post_id": 51863100, "comment_id": 90678587, "body": "Bad idea to derive from stl containers. Is there any particular reason you don&#39;t want to make <code>ObjVector</code> a template itself? With a simple definition <code>template &lt;typename T&gt; class ObjVector { std::vector&lt;T&gt; data;}</code> ? If you really want to use templates without any specialization, I am unaware of any way your code can reside in the cpp files as the entire class definition needs to be available at compile time. Must reside in a header."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1534359699, "post_id": 51863100, "comment_id": 90681864, "body": "It is fundamentally impossible to export templates from a shared library, or any kind of binary file. Such a file contains machine code - but templates don&#39;t get compiled to machine code. Only when a template is actually instantiated, with a particular set of arguments, that instantiation compiles to machine code, and can be exported from a library. Templates themselves must be available to the user in source code form."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1534469448, "post_id": 51863100, "comment_id": 90725875, "body": "Igor Tandetnik&#39;s comment is the correct answer."}], "owner": {"reputation": 333, "user_id": 1542694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc1860b9624032d9506fa80dfb4e27d0?s=128&d=identicon&r=PG", "display_name": "zodiac", "link": "https://stackoverflow.com/users/1542694/zodiac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534352088, "creation_date": 1534352088, "question_id": 51863100, "link": "https://stackoverflow.com/questions/51863100/return-templated-containers-from-so-library-in-c", "title": "Return templated containers from SO library in C++", "body": "<p>I want to return templated containers (such as <code>Vector&lt;T&gt;</code> or <code>List&lt;T&gt;</code>) from exported functions in <code>.so</code> library. That library uses its own version of STL and I can't just use <code>std::vector</code>.</p>\n\n<p>I can create a new class for type <code>Obj</code>:</p>\n\n<pre><code>class ObjVector {\npublic:\n    &lt;...&gt;\n    Obj&amp; operator[](size_t pos);\n    void push_back(const Obj&amp; obj);\nprivate:\n    class Impl;\n    Impl *d_ptr;\n};\n</code></pre>\n\n<p>And then define class <code>ObjVector::Impl</code> as <code>class ObjContainer::Impl: public std::vector&lt;Obj&gt;</code> and methods in libary source.</p>\n\n<p>But how I can use templates for it? Because I need vectors for different types of objects.</p>\n"}, {"tags": ["c++", "boost", "boost-spirit", "boost-spirit-x3"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 2, "creation_date": 1534360689, "post_id": 51863074, "comment_id": 90682317, "body": "<a href=\"https://stackoverflow.com/questions/33624149/boost-spirit-x3-cannot-compile-repeat-directive-with-variable-factor\" title=\"boost spirit x3 cannot compile repeat directive with variable factor\">stackoverflow.com/questions/33624149/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 1, "last_activity_date": 1534355768, "creation_date": 1534355768, "answer_id": 51863983, "question_id": 51863074, "link": "https://stackoverflow.com/questions/51863074/x3-rule-for-parsing-int-then-repeated-doubles-equal-to-that-int/51863983#51863983", "title": "X3 rule for parsing `int_` then repeated doubles equal to that `int_`", "body": "<p>It's easier to validate this after parsing. That is, just parse without restricting the count, then verify afterwards:</p>\n\n<pre><code>auto const p = x3::int_ &gt;&gt; *x3::double_;\n\n// ...\nstd::pair&lt;int, std::vector&lt;double&gt;&gt; result;\n\nif (x3::phrase_parse(begin, end, p, x3::space, result)) {\n    if (result.first != result.second.size()) {\n        // invalid\n    }\n}\n</code></pre>\n\n<p>If you really want to validate this while parsing, it's possible with semantic actions:</p>\n\n<pre><code>int size;\nauto const store_size = [&amp;size](auto&amp; ctx) { size = _attr(ctx); };\nauto const validate_size = [&amp;size](auto&amp; ctx) {\n    if (size &gt;= 0 &amp;&amp; static_cast&lt;std::size_t&gt;(size) != _attr(ctx).size()) {\n        _pass(ctx) = false;\n    }\n};\nauto const p = x3::int_[store_size] &gt;&gt; (*x3::double_)[validate_size];\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6118914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3774e8460b37791cff0b9a8b6b1c0ab?s=128&d=identicon&r=PG&f=1", "display_name": "ExBigBoss", "link": "https://stackoverflow.com/users/6118914/exbigboss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1534509670, "answer_count": 1, "score": 2, "last_activity_date": 1534355768, "creation_date": 1534351994, "last_edit_date": 1534353099, "question_id": 51863074, "link": "https://stackoverflow.com/questions/51863074/x3-rule-for-parsing-int-then-repeated-doubles-equal-to-that-int", "closed_reason": "Duplicate", "title": "X3 rule for parsing `int_` then repeated doubles equal to that `int_`", "body": "<p>Kind of a hard-to-word title but I wanna parse something like this:</p>\n\n<pre><code>int_ &gt;&gt; repeat(N)[double_]\n</code></pre>\n\n<p><em>But</em> I'd like N to be equal to whatever <code>int_</code> parses out to</p>\n\n<p>How does one do this using Boost.Spirit.X3?</p>\n"}, {"tags": ["c++", "qt", "qml", "qtquick2"], "comments": [{"owner": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "edited": false, "score": 0, "creation_date": 1534354590, "post_id": 51862975, "comment_id": 90679457, "body": "<code>m_strings()</code>?  in the constructor."}, {"owner": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "edited": false, "score": 0, "creation_date": 1534354924, "post_id": 51862975, "comment_id": 90679594, "body": "<code>m_string()</code> override your <code>m_strings &lt;&lt; &quot;String one&quot; &lt;&lt; &quot;String two&quot;;</code> so your are using empty list"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "edited": false, "score": 0, "creation_date": 1534355241, "post_id": 51862975, "comment_id": 90679751, "body": "@Phiber <code>m_strings &lt;&lt; &quot;String one&quot; &lt;&lt; &quot;String two&quot;;</code> it runs after <code>m_string()</code>, although <code>m_string()</code> is unnecessary because a list is empty by default"}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1534364138, "post_id": 51863733, "comment_id": 90683764, "body": "Is the no qstringlistmodel comaptibility with qml?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1534364206, "post_id": 51863733, "comment_id": 90683787, "body": "@Mike QStringList and QStringListModel are both supported."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1534354720, "creation_date": 1534354720, "answer_id": 51863733, "question_id": 51862975, "link": "https://stackoverflow.com/questions/51862975/qlistqstring-not-being-used-as-model-by-qml-listview/51863733#51863733", "title": "QList&lt;QString&gt; not being used as model by QML ListView", "body": "<p>First use <code>QStringList</code> instead of <code>QList&lt;QString&gt;</code>:</p>\n\n<pre><code>class FooView : public QQuickItem\n{\n    Q_OBJECT\n    Q_PROPERTY(QStringList myStrings READ myStrings NOTIFY myStringsChanged)\n    QStringList m_strings;\npublic:\n    FooView(QQuickItem * parent=nullptr) :\n        QQuickItem(parent)\n    {\n        m_strings &lt;&lt; \"String one\" &lt;&lt; \"String two\";\n    }\n    QStringList myStrings() const {\n        return m_strings;\n    }\nsignals:\n    void myStringsChanged();\n};\n</code></pre>\n\n<p>And going to the problem, you must use <code>modelData</code> when the model is a list as indicated by the <a href=\"http://doc-snapshots.qt.io/qt5-5.11/qtquick-modelviewsdata-modelview.html#models\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Models that do not have named roles (such as the ListModel shown\n  below) will have the data provided via the modelData role. The\n  modelData role is also provided for models that have only one role. In\n  this case the modelData role contains the same data as the named role.</p>\n</blockquote>\n\n<hr>\n\n<pre><code>FooView {\n    id: foo\n    anchors.fill: parent\n    ListView {\n        anchors.fill: parent\n        model: foo.myStrings\n        delegate: Text {\n            text: modelData\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1799, "user_id": 1137713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iuRcY.jpg?s=128&g=1", "display_name": "iHowell", "link": "https://stackoverflow.com/users/1137713/ihowell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 1, "accepted_answer_id": 51863733, "answer_count": 1, "score": 1, "last_activity_date": 1534354720, "creation_date": 1534351617, "question_id": 51862975, "link": "https://stackoverflow.com/questions/51862975/qlistqstring-not-being-used-as-model-by-qml-listview", "title": "QList&lt;QString&gt; not being used as model by QML ListView", "body": "<p>I have a <code>Q_PROPERTY</code> of type <code>QList&lt;QString&gt;</code> in a <code>c++</code> class that is not being shown in QML. The class looks like this:</p>\n\n<pre><code>class FooView : public QQuickItem\n{\n    Q_OBJECT;\n    Q_PROPERTY(QList&lt;QString&gt; myStrings READ myStrings NOTIFY myStringsChanged);\n\nprivate:\n    QList&lt;QString&gt; m_strings;\n\npublic:\n    FooView(QQuickItem * parent) : QQuickItem(parent), m_strings() {\n        m_strings &lt;&lt; \"String one\" &lt;&lt; \"String two\";\n    }\n\n    QList&lt;QString&gt; myStrings() const {\n        return m_strings;\n    }\n\nsignals:\n    void myStringsChanged();\n};\n</code></pre>\n\n<p>The above class is registered as a QML type using <code>qmlRegisterType</code>. I try to use the property as a model to a <code>ListView</code> like so:</p>\n\n<pre><code>FooView {\n    id: 'foo'\n    ListView {\n        anchors.fill: parent\n        model: foo.myStrings\n        delegate: Text {\n            text: \"Hi\" // to be replaced with foo.myStrings[index]\n        }\n    }\n}\n</code></pre>\n\n<p>Can you not use <code>QList&lt;QString&gt;</code>'s as models? I thought you could since it was listed as a simple list type.</p>\n"}, {"tags": ["c++", "struct", "mpi", "packing"], "answers": [{"tags": [], "owner": {"reputation": 1464, "user_id": 6155350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d103f3a98e0e4e220200c8d81e755835?s=128&d=identicon&r=PG&f=1", "display_name": "David Henty", "link": "https://stackoverflow.com/users/6155350/david-henty"}, "is_accepted": true, "score": 2, "last_activity_date": 1534884182, "creation_date": 1534884182, "answer_id": 51956431, "question_id": 51862937, "link": "https://stackoverflow.com/questions/51862937/mpi-double-int-and-c-struct/51956431#51956431", "title": "MPI_DOUBLE_INT and C++ struct", "body": "<p>Perhaps you can do this using <em>union</em>?</p>\n\n<p>If you compile the following with g++ and run</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n  typedef struct {double x; int i;} Tmp;\n  typedef union {char pad[16]; Tmp dint;} Doubleint;\n\n  Doubleint value;\n\n  value.dint.x = 3.14;\n  value.dint.i = 6;\n\n  cout &lt;&lt; \"sizeof(Tmp)       = \" &lt;&lt; sizeof(Tmp)       &lt;&lt; endl;\n  cout &lt;&lt; \"sizeof(Doubleint) = \" &lt;&lt; sizeof(Doubleint) &lt;&lt; endl;\n\n  typedef struct {double x; int i;} __attribute__((packed)) Packtmp;\n  typedef union {char pad[16]; Packtmp dint;} Packdoubleint;\n\n  Packdoubleint packvalue;\n\n  packvalue.dint.x = 6.12;\n  packvalue.dint.i = 9;\n\n  cout &lt;&lt; \"sizeof(Packtmp)       = \" &lt;&lt; sizeof(Packtmp)       &lt;&lt; endl;\n  cout &lt;&lt; \"sizeof(Packdoubleint) = \" &lt;&lt; sizeof(Packdoubleint) &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>you get</p>\n\n<pre><code>sizeof(Tmp)       = 16\nsizeof(Doubleint) = 16\nsizeof(Packtmp)       = 12\nsizeof(Packdoubleint) = 16\n</code></pre>\n\n<p>i.e. the union variables (Doubleint and Packdoubleint) are always 16 bytes long even if the structures have different sizes - I've forced Packtmp to be unpadded using an attribute specific to g++.</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 6490710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd4346926a7787a595c91954fff9cad?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/6490710/jakob"}, "is_accepted": false, "score": 0, "last_activity_date": 1577441596, "creation_date": 1577441596, "answer_id": 59499151, "question_id": 51862937, "link": "https://stackoverflow.com/questions/51862937/mpi-double-int-and-c-struct/59499151#59499151", "title": "MPI_DOUBLE_INT and C++ struct", "body": "<p>You might use <a href=\"https://en.cppreference.com/w/cpp/language/alignas\" rel=\"nofollow noreferrer\">C++11's alignas keyword</a> to fix alignment (<a href=\"https://gcc.godbolt.org/z/_ZopRg\" rel=\"nofollow noreferrer\">gcc 9.2</a>,<a href=\"https://gcc.godbolt.org/z/WUhDTq\" rel=\"nofollow noreferrer\">clang 9.0.0</a>,<a href=\"https://gcc.godbolt.org/z/3-N-xG\" rel=\"nofollow noreferrer\">icc 19.0.1</a>):</p>\n\n<pre><code> int main() {\n    #pragma pack(push, 1)\n    struct alignas(alignof(double)) pair {\n        double d;\n        int i;\n    };\n    #pragma pack(pop)\n\n    static_assert(sizeof(double) == 8, \"\");\n    static_assert(sizeof(int) == 4, \"\");\n    static_assert(sizeof(double)+sizeof(int) == 12, \"\");\n    static_assert(sizeof(pair) == 16, \"\");\n    static_assert(alignof(double) == 8, \"\");\n    static_assert(alignof(pair) == 8, \"\");\n\n    return 0;\n}\n</code></pre>\n\n<p>Without <code>alignas</code> the packed struct has alignment issues on x86-64 linux with <a href=\"https://gcc.godbolt.org/z/239vBP\" rel=\"nofollow noreferrer\">gcc 9.2</a>, <a href=\"https://gcc.godbolt.org/z/m4guVL\" rel=\"nofollow noreferrer\">clang 9.0.0</a> and <a href=\"https://gcc.godbolt.org/z/5PzG55\" rel=\"nofollow noreferrer\">icc 19.0.1</a>:</p>\n\n<pre><code> int main() {\n     #pragma pack(push, 1)\n     struct pair {\n         double d;\n         int i;\n     };\n     #pragma pack(pop)\n\n     static_assert(sizeof(double) == 8, \"\");\n     static_assert(sizeof(int) == 4, \"\");\n     static_assert(sizeof(double)+sizeof(int) == 12, \"\");\n     static_assert(sizeof(pair) == 12, \"\");\n     static_assert(alignof(double) == 8, \"\");\n     static_assert(alignof(pair) == 1, \"\"); // !!!\n\n     return 0;\n }\n</code></pre>\n\n<p>BTW: Not sure, but OpenMPI might be able to handle non-packed structs during datatype definition in <a href=\"https://github.com/open-mpi/ompi/blob/master/ompi/datatype/ompi_datatype_module.c\" rel=\"nofollow noreferrer\">ompi/datatype/ompi_datatype_module.c</a>:</p>\n\n<pre><code> #define DECLARE_MPI2_COMPOSED_STRUCT_DDT( PDATA, MPIDDT, MPIDDTNAME, type1, type2, MPIType1, MPIType2, FLAGS) \\\n     do {                                                                             \\\n         struct { type1 v1; type2 v2; } s[2];                                         \\\n         ompi_datatype_t *types[2], *ptype;                                           \\\n         int bLength[2] = {1, 1};                                                     \\\n         ptrdiff_t base, displ[2];                                                    \\\n                                                                                      \\\n         types[0] = (ompi_datatype_t*)ompi_datatype_basicDatatypes[MPIType1];         \\\n         types[1] = (ompi_datatype_t*)ompi_datatype_basicDatatypes[MPIType2];         \\\n         base = (ptrdiff_t)(&amp;(s[0]));                                                 \\\n         displ[0] = (ptrdiff_t)(&amp;(s[0].v1));                                          \\\n         displ[0] -= base;                                                            \\\n         displ[1] = (ptrdiff_t)(&amp;(s[0].v2));                                          \\\n         displ[1] -= base;                                                            \\\n                                                                                      \\\n         ompi_datatype_create_struct( 2, bLength, displ, types, &amp;ptype );             \\\n         displ[0] = (ptrdiff_t)(&amp;(s[1]));                                             \\\n         displ[0] -= base;                                                            \\\n         if( displ[0] != (displ[1] + (ptrdiff_t)sizeof(type2)) )                      \\\n             ptype-&gt;super.ub = displ[0];                                              \\\n         ...\n</code></pre>\n"}], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 51956431, "answer_count": 2, "score": 1, "last_activity_date": 1577441596, "creation_date": 1534351490, "last_edit_date": 1534361871, "question_id": 51862937, "link": "https://stackoverflow.com/questions/51862937/mpi-double-int-and-c-struct", "title": "MPI_DOUBLE_INT and C++ struct", "body": "<p>The <a href=\"https://www.mpi-forum.org/docs/mpi-3.1/mpi31-report.pdf\" rel=\"nofollow noreferrer\">MPI standard</a> defines a family of data types <code>MPI_X_INT</code> with <code>X = FLOAT, DOUBLE, ...</code>. Let's stick with <code>MPI_DOUBLE_INT</code> for definiteness. Its formal definition is:</p>\n\n<blockquote>\n  <p><em>(p. 180)</em> The datatype MPI_DOUBLE_INT is as if defined by the following sequence of instructions:</p>\n\n<pre><code>block[0] = 1;\nblock[1] = 1;\ndisp[0] = 0;\ndisp[1] = sizeof(double);\ntype[0] = MPI_DOUBLE;\ntype[1] = MPI_INT;\nMPI_TYPE_CREATE_STRUCT(2, block, disp, type, MPI_DOUBLE_INT);\n</code></pre>\n</blockquote>\n\n<p>The definition implies no padding between <code>double</code> and <code>int</code>. The standard also asserts that the total size of this type should be 16, the example reads (for <code>char</code> instead of <code>int</code>): </p>\n\n<blockquote>\n  <p><em>(p.85)</em> <strong>Example 4.1</strong> Assume that <code>Type = {(double, 0), (char, 8)}</code> (a <code>double</code> at displacement zero, followed by a <code>char</code> at displacement eight). Assume, furthermore, that <code>double</code>s have to be strictly aligned at addresses that are multiples of eight. Then, the extent of this datatype is 16 (9 rounded to the next multiple of 8).</p>\n</blockquote>\n\n<p>The corresponding C++ structure is <code>struct DI { double d; int i; };</code>. <a href=\"https://stackoverflow.com/a/44508948/1625187\">This answer</a> asserts that the <code>struct</code> should be packed to avoid padding between <code>double</code> and <code>int</code>. But the size of a packed structure is 12 (assuming <code>sizeof(int) = 4</code>), and it is impossible to use an array of them:</p>\n\n<pre><code>constexpr auto count = 2;  // &gt;1\nDI_packed di[count] = {...};\nMPI_Send(di, count, MPI_DOUBLE_INT, ...);  // wrong!\n</code></pre>\n\n<p>Is there a C++ <code>struct</code> that corresponds exactly to the MPI definition and that can be safely and portably used in an MPI code? It seems that the only <em>guaranteed</em> way to use <code>struct</code> is to define a packed structure with manually added tail padding <code>char</code>s. Is this correct?</p>\n\n<p>As a side note, on my machine both MSVC and GCC generate the \"MPI-compatible\" layout for unpacked <code>struct DI</code>, so this question might be irrelevant from a practical point of view, but I'm not sure.</p>\n"}, {"tags": ["c++", "file", "binary", "hex"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1534351353, "post_id": 51862862, "comment_id": 90678021, "body": "What is the purpose of this &quot;conversion&quot;? Why do you need it? What is the <i>real</i> and <i>actual</i> problem you need to solve?"}, {"owner": {"reputation": 1, "user_id": 8909136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def391d32bae60597bba138df376ac85?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Poon", "link": "https://stackoverflow.com/users/8909136/casey-poon"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534351723, "post_id": 51862862, "comment_id": 90678210, "body": "I have a large txt file with XYZ coordinates. My goal is to take this data and process it and turn it into a BMP24 image. I have it working so far but it is way too slow. As of now i have a ifstream that reads each line one at a time and processes it. I was thinking I could use multithreading to speed up the process by converting it into an array of bytes and split it up into different domains and allocate a different section of the array of bytes to different threads."}, {"owner": {"reputation": 1645, "user_id": 3860767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5c892bd7f367b8f2d01800dc1e6d98?s=128&d=identicon&r=PG", "display_name": "Massimo Costa", "link": "https://stackoverflow.com/users/3860767/massimo-costa"}, "edited": false, "score": 0, "creation_date": 1534351912, "post_id": 51862862, "comment_id": 90678283, "body": "well, start to NOT read line by line but read the document in chunks. I don&#39;t think multiple threads will help you because my guess is you have I/O bottleneck"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1534352106, "post_id": 51862862, "comment_id": 90678367, "body": "@CaseyPoon, if your program works correctly but takes too long, it might be better to ask a question at <a href=\"https://codereview.stackexchange.com\">the code review site</a>. Make sure to read through their <a href=\"https://codereview.stackexchange.com/help/asking\">how to ask page</a> before you post though."}, {"owner": {"reputation": 1, "user_id": 8909136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def391d32bae60597bba138df376ac85?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Poon", "link": "https://stackoverflow.com/users/8909136/casey-poon"}, "edited": false, "score": 0, "creation_date": 1534352197, "post_id": 51862862, "comment_id": 90678411, "body": "I apologize in in advance since I&#39;m pretty new to programming. How should I resolve the I/O bottleneck? I thought about using a FILE* and converting that to an array of bytes but then the bytes will be encoded in ascii form. If i do that then i might have to parse through the entire file to convert it into floating point representation. Thanks for the input so far!"}, {"owner": {"reputation": 1, "user_id": 8909136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def391d32bae60597bba138df376ac85?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Poon", "link": "https://stackoverflow.com/users/8909136/casey-poon"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1534352287, "post_id": 51862862, "comment_id": 90678455, "body": "@RSahu I will look into that. Thanks!"}, {"owner": {"reputation": 6208, "user_id": 4042267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b869ca5adc52b16ef56ab1fb6ed5fe97?s=128&d=identicon&r=PG", "display_name": "Graipher", "link": "https://stackoverflow.com/users/4042267/graipher"}, "edited": false, "score": 1, "creation_date": 1534352463, "post_id": 51862862, "comment_id": 90678531, "body": "If you do want to post about this on Code Review, make sure to include your actual code, otherwise it would be off-topic there."}, {"owner": {"reputation": 1, "user_id": 8909136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def391d32bae60597bba138df376ac85?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Poon", "link": "https://stackoverflow.com/users/8909136/casey-poon"}, "edited": false, "score": 0, "creation_date": 1534355067, "post_id": 51862862, "comment_id": 90679662, "body": "I posted my code to codereview! Any criticism will be greatly appreciated <a href=\"https://codereview.stackexchange.com/questions/201743/processing-xyz-data-from-large-txt-file-c\" title=\"processing xyz data from large txt file c\">codereview.stackexchange.com/questions/201743/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1534361021, "post_id": 51862862, "comment_id": 90682453, "body": "Unless you plan on reading the binary data file many times, the whole concept may be a waste of time (development and execution). For example, you read in a number, converting it to internal format, then write the number as internal format to another file, then read the internal format.    You may save some steps and read the text numbers into internal format and perform your numeric processing.  No need to write them to a binary file."}], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 10230295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98912449c2ed73411cb7271a6f856f6d?s=128&d=identicon&r=PG", "display_name": "0xD", "link": "https://stackoverflow.com/users/10230295/0xd"}, "is_accepted": false, "score": 1, "last_activity_date": 1534354392, "creation_date": 1534354392, "answer_id": 51863638, "question_id": 51862862, "link": "https://stackoverflow.com/questions/51862862/ascii-txt-file-to-array-of-bytes-c/51863638#51863638", "title": "Ascii .txt file to array of bytes - C++", "body": "<p>Maybe this:</p>\n\n<pre><code>struct xyz{\n    float x;\n    float y;\n    float z;\n};\n\nistream&amp; operator &gt;&gt;(istream &amp; is, xyz &amp; v) {\n    return is &gt;&gt; v.x &gt;&gt; v.y &gt;&gt; v.z;\n}\n\nstd::ifstream f{\"floats.txt\"};\n\nvector&lt;xyz&gt; floats;\ncopy(istream_iterator&lt;xyz&gt;{f}, {}, inserter(floats, end(floats)));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8909136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def391d32bae60597bba138df376ac85?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Poon", "link": "https://stackoverflow.com/users/8909136/casey-poon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1534354392, "creation_date": 1534351143, "last_edit_date": 1534351849, "question_id": 51862862, "link": "https://stackoverflow.com/questions/51862862/ascii-txt-file-to-array-of-bytes-c", "title": "Ascii .txt file to array of bytes - C++", "body": "<p>How can I convert an ascii .txt file into an array of bytes in c++?\nFor example given this .txt file of XYZ Coordinates convert it to an array of bytes in floating point representation:</p>\n\n<pre><code>253.9999929 58.0428367 -21.3930063253\n.9999929 59.0435773 -21.2499391255\n...\n</code></pre>\n\n<p>converts to </p>\n\n<pre><code>bytes array[] = {\n01000011,01111110,00000000,00000000,\n01000010,01101000,00101011,11011101,\n11000001,10101011,00100100,11100001,\n00111111,01111111,11111111,10001001... etc\n\n}\n</code></pre>\n\n<p>I thought of converting each number in the string to a floating point number and then extracting the binary representation; but, im not sure if that's efficient. I need to do this on a large scale with a .txt file with 200000-1400000 lines of XYZ data.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1534351147, "post_id": 51862822, "comment_id": 90677933, "body": "Use <a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find</code></a>? Or just a plain loop comparing each vector to <code>a</code>?"}, {"owner": {"reputation": 1123, "user_id": 6250527, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33ee24677f6e95dadfa3220634449197?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen.W", "link": "https://stackoverflow.com/users/6250527/stephen-w"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534351243, "post_id": 51862822, "comment_id": 90677972, "body": "But it seems vector doesn\u2019t overwrite the operator ==,"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 5, "creation_date": 1534351356, "post_id": 51862822, "comment_id": 90678022, "body": "@Stephen.W <a href=\"https://en.cppreference.com/w/cpp/container/vector/operator_cmp\" rel=\"nofollow noreferrer\">yes, it does</a>"}], "answers": [{"tags": [], "owner": {"reputation": 903, "user_id": 5339398, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/dd9da7f9c11bf0f13cc812c55b37bf96?s=128&d=identicon&r=PG&f=1", "display_name": "Madden", "link": "https://stackoverflow.com/users/5339398/madden"}, "is_accepted": false, "score": 3, "last_activity_date": 1534359582, "last_edit_date": 1534359582, "creation_date": 1534351237, "answer_id": 51862879, "question_id": 51862822, "link": "https://stackoverflow.com/questions/51862822/c-how-can-i-find-vectorint-in-vectorvectorint-with-stl-algorithm-funct/51862879#51862879", "title": "C++ - How can I find vector&lt;int&gt; in vector&lt;vector&lt;int&gt;&gt; with STL algorithm function?", "body": "<pre><code>std::find(std::begin(to_search), std::end(to_search), to_find);\n</code></pre>\n\n<p>Returns an iterator to the position of <code>to_find</code> in <code>to_search</code>, or <code>to_search::end()</code> if not contained.</p>\n"}], "owner": {"reputation": 1123, "user_id": 6250527, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33ee24677f6e95dadfa3220634449197?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen.W", "link": "https://stackoverflow.com/users/6250527/stephen-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1534359582, "creation_date": 1534351003, "question_id": 51862822, "link": "https://stackoverflow.com/questions/51862822/c-how-can-i-find-vectorint-in-vectorvectorint-with-stl-algorithm-funct", "title": "C++ - How can I find vector&lt;int&gt; in vector&lt;vector&lt;int&gt;&gt; with STL algorithm function?", "body": "<p>I have a vector of vector of int that contains some data, say </p>\n\n<pre><code>[ [1,2,3],  [7,9] ]\n</code></pre>\n\n<p>And there is a vector, say <code>a</code>.\nI want to find out if vector <code>a</code> is in that vector of vector.  How can I do that?</p>\n"}, {"tags": ["c++", "vector", "stl"], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "is_accepted": false, "score": 1, "last_activity_date": 1534350926, "creation_date": 1534350926, "answer_id": 51862794, "question_id": 51862691, "link": "https://stackoverflow.com/questions/51862691/unable-to-traverse-vector/51862794#51862794", "title": "Unable to traverse vector", "body": "<p>A.begin() returns an iterator pointing to the begin of the vector, so you can access to the element using *A.begin().</p>\n\n<p>So A[it+1] makes no sense in this context.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1534351901, "creation_date": 1534351901, "answer_id": 51863049, "question_id": 51862691, "link": "https://stackoverflow.com/questions/51862691/unable-to-traverse-vector/51863049#51863049", "title": "Unable to traverse vector", "body": "<p>When accessing elements of a vector you either use iterators:</p>\n\n<pre><code>for( auto it = v.begin(); it != v.end(); ++it )\n    std::cout &lt;&lt; *it;\n</code></pre>\n\n<p>or index:</p>\n\n<pre><code>for( size_t i = 0; i != v.size(); ++i )\n    std::cout &lt;&lt; v[i];\n</code></pre>\n\n<p>choose one, do not mix them.</p>\n\n<p>Note: there is <a href=\"https://en.cppreference.com/w/cpp/algorithm/swap\" rel=\"nofollow noreferrer\"><code>std::swap()</code></a> function, you do not need to do it manually</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1534353133, "last_edit_date": 1534353133, "creation_date": 1534352144, "answer_id": 51863119, "question_id": 51862691, "link": "https://stackoverflow.com/questions/51862691/unable-to-traverse-vector/51863119#51863119", "title": "Unable to traverse vector", "body": "<p>An iterator in C++ is a wrapper for some sort of reference to a location in a container. <code>it</code> is not an integer, but in this case , <code>vector&lt;int&gt;</code>, <code>it</code> refers to an integer. </p>\n\n<p>So <code>it</code> cannot be used as a subscript index, but <code>*it</code> can.</p>\n\n<p>In </p>\n\n<pre><code>if(A[it+1]&gt;A[it])\n</code></pre>\n\n<p><code>it+1</code> does not resolve to the number at <code>it</code> plus 1, it resolves to an iterator to the vector element after <code>it</code>. Likely you mean to write </p>\n\n<pre><code>if(A[*(it+1)]&gt;A[*it])\n</code></pre>\n\n<p>Breaking that down, </p>\n\n<ol>\n<li><code>it+1</code>: reference element after <code>it</code>. Lets call this element 1</li>\n<li><code>*(it+1)</code>: get value at element after <code>it</code>. Following through from\nabove, this is the same as <code>A[1]</code> and let's say the value at <code>A[1]</code>\nis 42.</li>\n<li><code>A[*(it+1)]</code>: is <code>A[A[1]]</code> or <code>A[42]</code></li>\n</ol>\n\n<p>This will compile, but it won't do what it seems you are trying to do.  </p>\n\n<p>Instead you likely want to directly compare the integers. </p>\n\n<pre><code>if(*(it+1)&gt;*it)\n</code></pre>\n\n<p>and similar for all subsequent variants of <code>A[it]</code> in the code.</p>\n\n<p>This will allow you to debug the other problems in your algorithm, something I'm not going to address because this looks like an assignment or challenge of some sort.</p>\n\n<p>Except for this:</p>\n\n<pre><code>for (auto it = A.begin(); it != A.end(); it++)\n</code></pre>\n\n<p>allows <code>it</code> to range from the beginning of the <code>vector</code> to the end and needs extra guards so that <code>*(it+1)</code> cannot reach past the end of the <code>vector</code> when you reach the end of the <code>vector</code>. You can  </p>\n\n<pre><code>for (auto it = A.begin(); it != A.end() - 1; it++)\n</code></pre>\n\n<p>but if you poke around you might find a better option.</p>\n"}, {"tags": [], "owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "is_accepted": false, "score": 1, "last_activity_date": 1534352764, "creation_date": 1534352764, "answer_id": 51863260, "question_id": 51862691, "link": "https://stackoverflow.com/questions/51862691/unable-to-traverse-vector/51863260#51863260", "title": "Unable to traverse vector", "body": "<p>There are a few problems with your loop.  </p>\n\n<p>it is an iterator.  To get the value of it is *it and the contents of it+1 is *(it+1).</p>\n\n<p>Your loop should only go to size-1, otherwise you'll be comparing the last value to an invalid value.</p>\n\n<p>std::swap() will be more efficient than a hand coded swap as it will use moves rather than copies.</p>\n\n<p>You probably meant to increment the the loop by 2 so it+=2 in your for loop.</p>\n\n<p>You should check for an odd length and take appropriate action.</p>\n\n<p>Mike</p>\n"}], "owner": {"reputation": 77, "user_id": 8340098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2bddc7ca030b1cdfcdc6ab6c3a58354c?s=128&d=identicon&r=PG&f=1", "display_name": "MasterKas", "link": "https://stackoverflow.com/users/8340098/masterkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 51863049, "answer_count": 4, "score": 2, "last_activity_date": 1534353133, "creation_date": 1534350547, "question_id": 51862691, "link": "https://stackoverflow.com/questions/51862691/unable-to-traverse-vector", "title": "Unable to traverse vector", "body": "<p>Hey I am trying to sort given input into a wave array.</p>\n\n<p>Given an array of integers, sort the array into a wave like array and return it,\nIn other words, arrange the elements into a sequence such that a1 >= a2 &lt;= a3 >= a4 &lt;= a5.....</p>\n\n<p>Given [1, 2, 3, 4]</p>\n\n<p>One possible answer : [2, 1, 4, 3]</p>\n\n<p>Another possible answer : [4, 1, 3, 2]</p>\n\n<pre><code>vector&lt;int&gt; Solution::wave(vector&lt;int&gt; &amp;A) {\n    int size = A.size();\n    for (int i=0; i &lt; size ; i++)\n    {\n        int min =0;\n       sort(A.begin(),A.end());\n        for (auto it = A.begin(); it != A.end(); it++) {\n        if(A[it+1]&gt;A[it])\n        {\n            int temp=0;\n            temp = A[it+1];\n            A[it+1]=A[it];\n            A[it]=temp;\n        }\n\n       }\n    }\n    }\n}\n</code></pre>\n\n<p>Error :-</p>\n\n<pre><code>solution.cpp: In member function 'std::vector&lt;int&gt; Solution::wave(std::vector&lt;int&gt;&amp;)':\nsolution.cpp:8:13: error: no match for 'operator[]' (operand types are 'std::vector&lt;int&gt;' and '__gnu_cxx::__normal_iterator&lt;int*, std::vector&lt;int&gt; &gt;')\n         if(A[it+1]&gt;A[it])\n             ^\nsolution.cpp:8:13: note: candidates are:\nIn file included from /usr/include/c++/4.8/vector:64:0,\n                 from solution.h:13,\n                 from solution.cpp:-3:\n/usr/include/c++/4.8/bits/stl_vector.h:770:7: note: std::vector&lt;_Tp, _Alloc&gt;::reference std::vector&lt;_Tp, _Alloc&gt;::operator[](std::vector&lt;_Tp, _Alloc&gt;::size_type) [with _Tp = int; _Alloc = std::allocator&lt;int&gt;; std::vector&lt;_Tp, _Alloc&gt;::reference = int&amp;; std::vector&lt;_Tp, _Alloc&gt;::size_type = long unsigned int]\n       operator[](size_type __n)\n       ^\n/usr/include/c++/4.8/bits/stl_vector.h:770:7: note:   no known conversion for argument 1 from '__gnu_cxx::__normal_iterator&lt;int*, std::vector&lt;int&gt; &gt;' to 'std::vector&lt;int&gt;::size_type {aka long unsigned int}'\n/usr/include/c++/4.8/bits/stl_vector.h:785:7: note: std::vector&lt;_Tp, _Alloc&gt;::const_reference std::vector&lt;_Tp, _Alloc&gt;::operator[](std::vector&lt;_Tp, _Alloc&gt;::size_type) const [with _Tp = int; _Alloc = std::allocator&lt;int&gt;; std::vector&lt;_Tp, _Alloc&gt;::const_reference = const int&amp;; std::vector&lt;_Tp, _Alloc&gt;::size_type = long unsigned int]\n       operator[](size_type __n) const\n   ^\n</code></pre>\n\n<p>Source :- <a href=\"https://www.interviewbit.com/problems/wave-array/\" rel=\"nofollow noreferrer\">https://www.interviewbit.com/problems/wave-array/</a></p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1534360460, "post_id": 51862465, "comment_id": 90682217, "body": "Notice that you can inherit from <code>std::true_type</code>/<code>std::false_type</code> to shorten code."}], "answers": [{"comments": [{"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1534350709, "post_id": 51862514, "comment_id": 90677738, "body": "The alternative with std::is_same is not a good idea, because it can be true for std::vector&lt;char&gt;, for example."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1534350753, "post_id": 51862514, "comment_id": 90677760, "body": "your first solution is the simple and elegant one. Your last solution spoils an otherwise good answer.  <code>is_string&lt;int, std::vector&lt;int&gt;&gt;</code> would be true"}, {"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1534351453, "post_id": 51862514, "comment_id": 90678082, "body": "I used your first solution. I think it is the best one."}], "tags": [], "owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "is_accepted": true, "score": 5, "last_activity_date": 1534351185, "last_edit_date": 1534351185, "creation_date": 1534349824, "answer_id": 51862514, "question_id": 51862465, "link": "https://stackoverflow.com/questions/51862465/check-if-a-type-is-stdbasic-stringt-in-compile-time-in-c/51862514#51862514", "title": "Check if a type is std::basic_string&lt;T&gt; in compile time in C++", "body": "<p>Try this:</p>\n\n<pre><code>template &lt;typename T, typename S&gt;\nstruct is_string\n{\n  static const bool value = false;\n};\n\ntemplate &lt;class T, class Traits, class Alloc&gt;\nstruct is_string&lt;T, std::basic_string&lt;T, Traits, Alloc&gt;&gt;\n{\n  static const bool value = true;\n};\n</code></pre>\n\n<p>In this specific case, a simpler solution would be:</p>\n\n<pre><code>template&lt;class T, class S&gt;\nusing is_string = std::is_same&lt;T, typename S::value_type&gt;;\n</code></pre>\n\n<p>(However, it doesn't check that the second type is actually a string, if that is fine with you - this solution checks if the second type is <strong>any</strong> container that holds elements of the first type)</p>\n"}, {"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1534350493, "post_id": 51862614, "comment_id": 90677608, "body": "Of the three pieces of code, you only need the last one, right?"}, {"owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534350572, "post_id": 51862614, "comment_id": 90677655, "body": "You need the first one to avoid compile errors when you were to get <code>false</code>, but the second is only needed if you want the base version with one argument. However, this will not accept strings with non-default traits or allocator."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1534350623, "post_id": 51862614, "comment_id": 90677683, "body": "@anatolyg I want to reserve the usage like <code>is_string&lt;std::string&gt;::value</code>."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534350712, "post_id": 51862614, "comment_id": 90677740, "body": "@riv It depends on OP&#39;s intent; if necessary we can use parameter pack to make it applicable for non-default traits or allocator."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 2, "last_activity_date": 1534350244, "creation_date": 1534350244, "answer_id": 51862614, "question_id": 51862465, "link": "https://stackoverflow.com/questions/51862465/check-if-a-type-is-stdbasic-stringt-in-compile-time-in-c/51862614#51862614", "title": "Check if a type is std::basic_string&lt;T&gt; in compile time in C++", "body": "<p>Firstly, you need to make <code>is_string</code> taking two template parameters.</p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct is_string\n{\n    static const bool value = false;\n};\n\ntemplate &lt;class T, class Traits, class Alloc&gt;\nstruct is_string&lt;std::basic_string&lt;T, Traits, Alloc&gt;, void&gt;\n{\n    static const bool value = true;\n};\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>template &lt;class T, template &lt;typename, typename, typename&gt; class STRING&gt;\nstruct is_string&lt;T, STRING&lt;T, std::char_traits&lt;T&gt;, std::allocator&lt;T&gt;&gt;&gt;\n{\n    static const bool value = true;\n};\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/3oA6UsgBRNeVyrEN\" rel=\"nofollow noreferrer\">LIVE</a></p>\n"}, {"comments": [{"owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1534350405, "post_id": 51862622, "comment_id": 90677549, "body": "::std::is_same_v&lt;::std::string, x_String&gt; - compares with a string that has the default allocator. What if the allocator is not default?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1534350580, "post_id": 51862622, "comment_id": 90677660, "body": "@AlexeyStarinsky From the question it looks like you don&#39;t care about allocators and only char type is relevant."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "edited": false, "score": 0, "creation_date": 1534350935, "post_id": 51862622, "comment_id": 90677837, "body": "@AlexeyStarinsky Updated my answer to include case that will deal with allocators as well."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1534350891, "last_edit_date": 1534350891, "creation_date": 1534350258, "answer_id": 51862622, "question_id": 51862465, "link": "https://stackoverflow.com/questions/51862465/check-if-a-type-is-stdbasic-stringt-in-compile-time-in-c/51862622#51862622", "title": "Check if a type is std::basic_string&lt;T&gt; in compile time in C++", "body": "<p>Maybe like this:</p>\n\n<pre><code>template&lt;typename x_Char, typename x_String&gt;\nstruct is_string\n{\n    static constexpr bool const value\n    {\n        (\n            ::std::is_same_v&lt;::std::string, x_String&gt;\n            or\n            ::std::is_same_v&lt;::std::wstring, x_String&gt;\n        )\n        and\n        ::std::is_same_v&lt;typename x_String::value_type, x_Char&gt;\n    };\n};\n\nstatic_assert(true == is_string&lt;char, std::string&gt;::value); //to be true\nstatic_assert(false == is_string&lt;char, std::wstring&gt;::value); //to be false\nstatic_assert(false == is_string&lt;wchar_t, std::string&gt;::value); //to be false\nstatic_assert(true == is_string&lt;wchar_t, std::wstring&gt;::value); //to be true\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/rBk92HtK6Wwx88PF\" rel=\"nofollow noreferrer\">online compiler</a></p>\n\n<p>To deal with allocators:</p>\n\n<pre><code>template&lt;typename x_Char, typename x_String&gt;\nstruct is_string\n: ::std::false_type {};\n\ntemplate&lt;typename x_Char, typename x_CharTrait, typename x_Allocator&gt;\nstruct is_string&lt;x_Char, ::std::basic_string&lt;x_Char, x_CharTrait, x_Allocator&gt;&gt;\n: ::std::true_type {};\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/7esVYQFYMsAKtV87\" rel=\"nofollow noreferrer\">online compiler</a></p>\n"}], "owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1957, "favorite_count": 0, "accepted_answer_id": 51862514, "answer_count": 3, "score": 6, "last_activity_date": 1534561299, "creation_date": 1534349638, "last_edit_date": 1534561299, "question_id": 51862465, "link": "https://stackoverflow.com/questions/51862465/check-if-a-type-is-stdbasic-stringt-in-compile-time-in-c", "title": "Check if a type is std::basic_string&lt;T&gt; in compile time in C++", "body": "<p>I have is_string defined as follows in my C++ code:</p>\n\n<pre><code>#include &lt;string&gt;\n\ntemplate &lt;typename T&gt;\nstruct is_string\n{\n    static const bool value = false;\n};\n\ntemplate &lt;class T, class Traits, class Alloc&gt;\nstruct is_string&lt;std::basic_string&lt;T, Traits, Alloc&gt;&gt;\n{\n    static const bool value = true;\n};\n\nint main()\n{\n    std::cout &lt;&lt; is_string&lt;std::string&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; is_string&lt;std::wstring&gt;::value &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>it is true for both std::string and std::wstring. </p>\n\n<p>But I need a predicate like this:</p>\n\n<pre><code>is_string&lt;char, std::string&gt;::value //to be true\nis_string&lt;char, std::wstring&gt;::value //to be false\nis_string&lt;wchar_t, std::string&gt;::value //to be false\nis_string&lt;wchar_t, std::wstring&gt;::value //to be true\n</code></pre>\n\n<p>Is it possible to implement it?</p>\n"}, {"tags": ["c++", "string", "operators", "relational"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1534349459, "post_id": 51862375, "comment_id": 90677076, "body": "Start <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_cmp\" rel=\"nofollow noreferrer\">here</a> and follow down the rabbit hole ..."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1534349577, "post_id": 51862375, "comment_id": 90677142, "body": "Specifically, once you know how <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/compare\" rel=\"nofollow noreferrer\"><code>compare</code></a> is called, you need to read the middle row of that comparison table"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534349582, "post_id": 51862375, "comment_id": 90677144, "body": "The quotes are not part of the comparison."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1534349595, "post_id": 51862375, "comment_id": 90677148, "body": "&quot;Single quotation at the end of name1&quot; - I don&#39;t see a single quote."}, {"owner": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534349638, "post_id": 51862375, "comment_id": 90677169, "body": "It is a double quote but I meant the single (double quote)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1534349650, "post_id": 51862375, "comment_id": 90677174, "body": "@drescherjm - because they are not part of the string."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1534349684, "post_id": 51862375, "comment_id": 90677194, "body": "yeah, no, that&#39;s not part of the string. It&#39;s the syntax introducing the string literal you initialized the string with, but the <code>&quot;</code> are not part of the string itself"}, {"owner": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534349841, "post_id": 51862375, "comment_id": 90677266, "body": "Thanks, this is what I thought but I wanted to be sure."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1534349604, "creation_date": 1534349604, "answer_id": 51862454, "question_id": 51862375, "link": "https://stackoverflow.com/questions/51862375/c-comparing-strings-using-relational-operator/51862454#51862454", "title": "C++ Comparing Strings Using Relational Operator", "body": "<p>Overloaded <code>&lt;</code> operator do not compare <code>\"</code> in the string. <code>\"\"</code> is used to denote strings so that compiler will parse it as an string. They are not the part of the string.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534350023, "post_id": 51862479, "comment_id": 90677371, "body": "Yes because the shorter character can be padded out with null characters all of which would be smaller than the longer characters values."}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534352063, "post_id": 51862479, "comment_id": 90678347, "body": "With C++ strings that\u2019s not actually necessarily true. C++ <code>std::string</code> objects can contain null characters, so the padding argument might incorrectly cause you to conclude that two different strings would compare equal. For example, a <code>std::string</code> made of 5 null characters will compare less than a <code>std::string</code> made of 137 null characters, though if you padded them with nulls they\u2019d be the same string."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 0, "last_activity_date": 1534349708, "creation_date": 1534349708, "answer_id": 51862479, "question_id": 51862375, "link": "https://stackoverflow.com/questions/51862375/c-comparing-strings-using-relational-operator/51862479#51862479", "title": "C++ Comparing Strings Using Relational Operator", "body": "<p>Although we write string literals in C++ surrounded by quotes, those quotes aren\u2019t actually a part of the string. That means that the strings that you\u2019re actually comparing here are <code>Mary</code> and <code>Mary Jane</code>, without quotes.</p>\n\n<p>C++ compares strings lexicographically, which means that it goes one character at a time until a mismatch is found or one of the strings ends. If no mismatch is found before one of the strings ends, the shorter string compares smaller, hence the result you\u2019re seeing here.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534358258, "post_id": 51862694, "comment_id": 90681170, "body": "How do I learn to read the information you provided of the C++ reference.  I am currently reading C++ From Control Structures through Objects 8th Edition and I have no clue how to make sense of the source you&#39;ve given."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534359132, "post_id": 51862694, "comment_id": 90681590, "body": "Which <i>specific</i> bits don&#39;t you understand? I don&#39;t have that book, don&#39;t know where you&#39;re up to in it or what it covers, and sadly can&#39;t read your mind. If you quote something you can&#39;t make sense of, I can at least try."}, {"owner": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534359444, "post_id": 51862694, "comment_id": 90681745, "body": "I can not read the information you provided in this website:  <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/basic_string</a>  How do I learn to read those lines?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "edited": false, "score": 0, "creation_date": 1534361943, "post_id": 51862694, "comment_id": 90682835, "body": "It&#39;s a bit noisy because <code>basic_string</code> is a template: eg. you can simplify <code>basic_string(const CharT*...)</code> to <code>string(const char* ...)</code> for most purposes. The top of the page is just a list of constructor overloads, which should be familiar if your book deals with Objects. You can ignore the Allocator params till later, because the default is fine."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1534369852, "post_id": 51862694, "comment_id": 90685913, "body": "&quot;I have no clue how to make sense ...&quot;.  Some clue&#39;s are usually provided in the examples at the bottom of the cppreference pages."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 5, "last_activity_date": 1534410248, "last_edit_date": 1534410248, "creation_date": 1534350556, "answer_id": 51862694, "question_id": 51862375, "link": "https://stackoverflow.com/questions/51862375/c-comparing-strings-using-relational-operator/51862694#51862694", "title": "C++ Comparing Strings Using Relational Operator", "body": "<pre><code>string name1 = \"Mary\";\n</code></pre>\n\n<p>Let's unpick this, there are several things going on.</p>\n\n<p>The token</p>\n\n<pre><code>\"Mary\"\n</code></pre>\n\n<p>taken alone is a <a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\"><em>string literal</em></a> which roughly evaluates to the array</p>\n\n<pre><code>const char literal_array[5] = { 'M', 'a', 'r', 'y', 0 };\n</code></pre>\n\n<p>You can see why it's worth having some syntactic sugar - writing that out for every string would be awful.</p>\n\n<p>Anyway, there are no <code>\"</code> characters in there - they're used to tell the compiler to emit that string literal, but they're not part of the string itself.</p>\n\n<p>Then, once we know what the right-hand side of the expression is, we can look at the left:</p>\n\n<pre><code>string name1 = \"Mary\"\n</code></pre>\n\n<p>is really</p>\n\n<pre><code>string name1(literal_array);\n</code></pre>\n\n<p>using the constructor</p>\n\n<pre><code>basic_string&lt;char&gt;::basic_string&lt;char&gt;(const char *)\n</code></pre>\n\n<p>I'm paraphrasing slightly, but it's item 5 <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<hr>\n\n<pre><code>name1 &lt; \"Mary Jane\"\n</code></pre>\n\n<p>Now we finally know what the left hand side is, we can look at this expression, which expands to</p>\n\n<pre><code>const char literal_array2[10] = { 'M', 'a', 'r', 'y', ' ', 'J', 'a', 'n', 'e', 0 };\noperator&lt; (name1, literal_array2)\n</code></pre>\n\n<p>which is the 9th overload <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_cmp\" rel=\"nofollow noreferrer\">here</a> (at the time of writing), and which calls <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/compare\" rel=\"nofollow noreferrer\"><code>compare</code></a> as</p>\n\n<pre><code>name1.compare(literal_array2)\n</code></pre>\n\n<p>which is described as doing the following:</p>\n\n<blockquote>\n  <p>4) Compares this string to the null-terminated character sequence beginning at the character pointed to by s, as if by <code>compare(basic_string(s))</code></p>\n</blockquote>\n\n<p>which takes us back to the first overload: </p>\n\n<blockquote>\n  <p>1) First, calculates the number of characters to compare, as if by</p>\n\n<pre><code>size_type rlen = std::min(size(), str.size()).\n</code></pre>\n  \n  <p>Then compares by calling</p>\n\n<pre><code>Traits::compare(data(), str.data(), rlen).\n</code></pre>\n  \n  <p>For standard strings this function performs character-by-character lexicographical comparison.</p>\n  \n  <p>If the result is zero (the strings are equal so far),</p>\n</blockquote>\n\n<p><em>note that this is the case when we've just compared \"Mary\" with \"Mary\" so far</em></p>\n\n<blockquote>\n  <p>then their sizes are compared as follows:</p>\n\n<pre><code>size(data) &lt; size(arg)    =&gt; data is less than arg    =&gt; result &lt;0\n</code></pre>\n</blockquote>\n\n<p>where \"result &lt;0\" means <code>operator&lt;</code> will return true.</p>\n"}], "owner": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1534410248, "creation_date": 1534349340, "last_edit_date": 1534356032, "question_id": 51862375, "link": "https://stackoverflow.com/questions/51862375/c-comparing-strings-using-relational-operator", "title": "C++ Comparing Strings Using Relational Operator", "body": "<p>Can someone clarify what is actually happening during this comparison.</p>\n\n<p>In a C++ program if I have:</p>\n\n<pre><code>string name1 = \"Mary\";\n</code></pre>\n\n<p>and I do:</p>\n\n<pre><code>name1 &lt; \"Mary Jane\" // true\n</code></pre>\n\n<p>Why is this true?  If C++ compares each character to each character and the first mismatched character is the single double quote mark at the end of name1 = \"Mary\" versus the space value in \"Mary Jane\" then by the ASCII value a space value is smaller than a single quote mark...</p>\n"}, {"tags": ["c++", "parsing", "tree", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1534348770, "post_id": 51862159, "comment_id": 90676730, "body": "<code>LeftChild = &amp;NewNode;</code> -- pointer to local variable that outlives local scope"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1534349169, "post_id": 51862159, "comment_id": 90676922, "body": "If you look at the error others have pointed out, take a look at the bigger picture to understand how what you are doing couldn&#39;t work.  How would you have implemented a destructor for your tree?  If you implemented it by calling <code>delete</code> on each node, you do realize that some of your nodes were not created with <code>new</code>, so you would have been stuck."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1534349469, "post_id": 51862159, "comment_id": 90677085, "body": "Supplemental viewing: (Warning: over an hour long) <a href=\"https://www.youtube.com/watch?v=JfmTagWcqoE\" rel=\"nofollow noreferrer\">Herb Sutter&#39;s Leak Freedom by Default presentation</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1534350235, "post_id": 51862159, "comment_id": 90677472, "body": "Note that your error really has nothing to do with AST and trees, but fundamental C++ knowledge.  You should first learn about proper memory management in C++ and variable scope (maybe implement a simple binary tree with proper construction <i>and</i> destruction).  It isn&#39;t like Python or similar languages, where garbage collection removes this aspect of programming from you."}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 3, "last_activity_date": 1534348752, "creation_date": 1534348752, "answer_id": 51862226, "question_id": 51862159, "link": "https://stackoverflow.com/questions/51862159/binary-tree-implementation-for-language-analyse-child-as-node-does-not-work/51862226#51862226", "title": "Binary tree implementation for language analyse - child as node: does not work", "body": "<p>This</p>\n\n<pre><code>    Node NewNode = Node(value, type);\n    NewNode.LeftChild = LeftChild;\n    LeftChild = &amp;NewNode;\n</code></pre>\n\n<p>is wrong because you are storing a pointer to an object that is about to be destroyed (when you exit the <code>if ... else</code> statement).</p>\n\n<p>You probably want something like this</p>\n\n<pre><code>    Node* NewNode = new Node(value, type);\n    NewNode-&gt;LeftChild = LeftChild;\n    LeftChild = NewNode;\n</code></pre>\n\n<p>You're transcribing from Python which has garbage collection to C++ which doesn't. Therefore you have to add memory management yourself.</p>\n"}], "owner": {"reputation": 792, "user_id": 9382127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMHsr.png?s=128&g=1", "display_name": "Foxy", "link": "https://stackoverflow.com/users/9382127/foxy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 51862226, "answer_count": 1, "score": 2, "last_activity_date": 1534348752, "creation_date": 1534348433, "question_id": 51862159, "link": "https://stackoverflow.com/questions/51862159/binary-tree-implementation-for-language-analyse-child-as-node-does-not-work", "title": "Binary tree implementation for language analyse - child as node: does not work", "body": "<p>I have been trying for some time to implement an AST in C++ to store data that has been derived from an ML language, here is an instruction that my AST manages to record:</p>\n\n<pre><code>var foo = 8;\n</code></pre>\n\n<p>The lexer isolates the tokens, and the parser infers that it is a variable declaration, so it isolates the whole:</p>\n\n<pre><code>foo = 8\n</code></pre>\n\n<p>From this it was easy to build a temporary AST:</p>\n\n<pre><code>    =  \n  /   \\\nfoo    8\n</code></pre>\n\n<p>But I still can't handle the child-nodes:</p>\n\n<pre><code>foo = 2 + 4\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>foo : integer = 2 + 4\n</code></pre>\n\n<p>So who should give this:</p>\n\n<pre><code>         =      \n       /   \\    \n      /     \\   \n     :       +  \n    / \\     / \\ \n   /   \\   2   4\n foo integer     \n</code></pre>\n\n<p>Here is my implementation attempt:</p>\n\n<p>*.hpp</p>\n\n<pre><code>enum NodeTypes { /* ... */ };\n\nstruct Node {\n    token_t NodeValue;\n    NodeTypes NodeType;\n    Node *LeftChild = NULL;\n    Node *RightChild = NULL;\n    Node(token_t value, NodeTypes type);\n    void InsertLeft(token_t NodeValue, NodeTypes NodeType = NOTHING);\n    void InsertRight(token_t NodeValue, NodeTypes NodeType = NOTHING);\n    void BrowseUp();\n};\n</code></pre>\n\n<p>*.cpp</p>\n\n<pre><code>Node(token_t value, NodeTypes type) {\n    NodeValue = value;\n    NodeType = type;\n}\nvoid InsertLeft(token_t value, NodeTypes type) {\n    if (LeftChild == NULL)\n        LeftChild = new Node(value, type);\n    else {\n        Node NewNode = Node(value, type);\n        NewNode.LeftChild = LeftChild;\n        LeftChild = &amp;NewNode;\n    }\n}\nvoid InsertRight(token_t value, NodeTypes type) {\n    if (RightChild == NULL)\n        RightChild = new Node(value, type);\n    else {\n        Node NewNode = Node(value, type);\n        NewNode.RightChild = RightChild;\n        RightChild = &amp;NewNode;\n    }\n}\nvoid BrowseUp() {\n    std::cout &lt;&lt; NodeValue.value &lt;&lt; \" \";\n    if (LeftChild) LeftChild-&gt;BrowseUp();\n    if (RightChild) RightChild-&gt;BrowseUp();\n}\n</code></pre>\n\n<p>Using it:</p>\n\n<pre><code>Node main = Node(NodePosition, NodeType);\nSetMainAst(main, expr);\nmain.BrowseUp();\n</code></pre>\n\n<p>SetMainAst:</p>\n\n<pre><code>void SetMainAst(Node &amp;node, Expr expr, NodeTypes type = NodeTypes::NOTHING) {\n    std::array&lt;Expr, 3&gt; exp = CutExpr(expr, GetNodePosition(expr));\n    Expr left = exp[0], right = exp[2];\n    token_t value = exp[1][0];\n\n    if (type == NOTHING) node.NodeValue = value;\n\n    if (!ContainNodes(left)) node.InsertLeft(left[0]);\n    else SetMainAst(node, left, DetermineFirstNode(expr));\n    if (!ContainNodes(right)) node.InsertRight(right[0]);\n    else SetMainAst(node, right, DetermineFirstNode(expr));\n}\n</code></pre>\n\n<p>CutExpr() allows to cut an expression in 3:</p>\n\n<ul>\n<li>lvalue ;</li>\n<li>node ;</li>\n<li>rvalue.</li>\n</ul>\n\n<p>I helped myself with <a href=\"https://medium.freecodecamp.org/all-you-need-to-know-about-tree-data-structures-bceacb85490c\" rel=\"nofollow noreferrer\">this</a> (it's in python, but I transcribed it in C++).</p>\n\n<p>With a single node expression, it works wonders. But, when there is more than one node, it no longer works: BrowseUp() stops the program after displaying the main node (i.e. the equal sign in this case).</p>\n\n<p>I really don't understand, but I well followed the tutorial well and think I transcribed well in C++... Maybe it's a pointer/reference problem?</p>\n\n<p>I would be very grateful if you would help me solve this problem (which has been bothering me for 3 days).</p>\n"}, {"tags": ["c++", "dictionary", "stl", "encapsulation"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1534348474, "post_id": 51862149, "comment_id": 90676577, "body": "Wrap the iterator?"}, {"owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348486, "post_id": 51862149, "comment_id": 90676586, "body": "You can make your own iterator that wraps over the actual map iterator, but dereferences to only the value. Boost has transforming iterators for this, but it is trivial to write your own."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1534348556, "post_id": 51862149, "comment_id": 90676619, "body": "If you are manipulating the key on insertion, how will the user of the map know they have got a particular element if the key (on iteration) is not the value they expect?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1534349231, "post_id": 51862149, "comment_id": 90676954, "body": "What&#39;s the problem with exposing transformed keys?"}], "answers": [{"comments": [{"owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348524, "post_id": 51862173, "comment_id": 90676603, "body": "Sounds highly inefficient and less flexible. Unless the compiler can optimize away lambda expressions somehow."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348599, "post_id": 51862173, "comment_id": 90676646, "body": "@riv I see no reason for the inefficiency - the compiler can inline. Try compiling your code with optimisations enabled."}, {"owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348759, "post_id": 51862173, "comment_id": 90676726, "body": "Lambdas aren&#39;t free, especially when wrapped in <code>std::function</code>, and are a nightmare to debug (though newer VS versions can skip over STL code). Iterator is much better, and lets you use range-based for."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348875, "post_id": 51862173, "comment_id": 90676783, "body": "@riv <i>Lambdas aren&#39;t free</i> - it depends. Quit making baseless claims."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 1, "creation_date": 1534349346, "post_id": 51862173, "comment_id": 90677021, "body": "@riv You are conflating two things together. Yes, when <code>std::function</code> wraps a lambda, there is a cost of indirect call. However, it was not suggested in the answer to do this. And when lambdas are passed as templated callbacks, they are, in fact, highly inlineable and come as close to &#39;free&#39; as it gets. On the other hand, obviously, sometimes explicit loop is more expressive, than for_each call."}, {"owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 1, "creation_date": 1534349690, "post_id": 51862173, "comment_id": 90677198, "body": "You&#39;re right, they do seem to have the same performance as iterator version, but the expressiveness point still stands."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1534348547, "last_edit_date": 1534348547, "creation_date": 1534348486, "answer_id": 51862173, "question_id": 51862149, "link": "https://stackoverflow.com/questions/51862149/encapsulate-stdmap-to-allow-iterating-but-no-direct-key-access/51862173#51862173", "title": "Encapsulate std::map to allow iterating, but no direct key access?", "body": "<p>Do not expose iterators. Expose a <code>for_each</code> function that passes each element to the user-provided (lambda) function.</p>\n\n<p>Alternatively, use a <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/iterator/doc/html/iterator/specialized/transform.html\" rel=\"nofollow noreferrer\">transform iterator</a>.</p>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 2, "closed_date": 1534646311, "answer_count": 1, "score": 0, "last_activity_date": 1534348547, "creation_date": 1534348390, "question_id": 51862149, "link": "https://stackoverflow.com/questions/51862149/encapsulate-stdmap-to-allow-iterating-but-no-direct-key-access", "closed_reason": "Duplicate", "title": "Encapsulate std::map to allow iterating, but no direct key access?", "body": "<p>Is there a way to encapsulate <code>std::map</code> within a user-defined class, allowing iteration, but not allowing direct access to the key?</p>\n\n<p>I would like to manipulate the key upon insertion and I want to force all access to elements through a user-defined method (as the key will need to be modified).</p>\n\n<p>I think the problem is allowing iterating over the map, whilst preventing the user from accessing the key via the iterator.</p>\n"}, {"tags": ["c++", "c++11", "constructor", "initialization", "explicit"], "answers": [{"comments": [{"owner": {"reputation": 1668, "user_id": 5411664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1078554955548726/picture?type=large", "display_name": "Gusev Slava", "link": "https://stackoverflow.com/users/5411664/gusev-slava"}, "edited": false, "score": 1, "creation_date": 1534349895, "post_id": 51862160, "comment_id": 90677297, "body": "Oh, thanks. Too simple question ;) So can you help with one more? What happens when we assign to already initialized variable <code>b_one = {}</code>"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 1668, "user_id": 5411664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1078554955548726/picture?type=large", "display_name": "Gusev Slava", "link": "https://stackoverflow.com/users/5411664/gusev-slava"}, "edited": false, "score": 4, "creation_date": 1534351063, "post_id": 51862160, "comment_id": 90677892, "body": "@GusevSlava <code>operator=</code> will be tried to called. If the default constructor of <code>Base</code> is not <code>explicit</code>, then <code>{}</code> is implicitly converted to <code>Base</code>, then copy assignment operator (<code>Base::operator=(const Base&amp;)</code>) is called. If the default constructor is <code>explict</code>, then it&#39;ll fail because implicit conversion fails."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 10, "last_activity_date": 1534348870, "last_edit_date": 1534348870, "creation_date": 1534348445, "answer_id": 51862160, "question_id": 51862128, "link": "https://stackoverflow.com/questions/51862128/initialization-with-empty-curly-braces/51862160#51862160", "title": "Initialization with empty curly braces", "body": "<blockquote>\n  <p>I have read on cppreference that in both cases default initialization would be used and no diffences.</p>\n</blockquote>\n\n<p>No they're not the same. To be precise, <code>Base b{};</code> is <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization#direct-list-initialization\" rel=\"noreferrer\">direct-list-initialization</a>, while <code>Base b_one = {};</code> is <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization#copy-list-initialization\" rel=\"noreferrer\">copy-list-initialization</a>; for copy-list-initialization, only non-<code>explicit</code> constructor may be called.</p>\n\n<p>(emphasis mine)</p>\n\n<blockquote>\n  <ul>\n  <li><p>direct-list-initialization (<strong>both explicit and non-explicit\n  constructors are considered</strong>)</p></li>\n  <li><p>copy-list-initialization (both explicit and non-explicit constructors\n  are considered, but <strong>only non-explicit constructors may be called</strong>)</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 1668, "user_id": 5411664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1078554955548726/picture?type=large", "display_name": "Gusev Slava", "link": "https://stackoverflow.com/users/5411664/gusev-slava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3052, "favorite_count": 3, "accepted_answer_id": 51862160, "answer_count": 1, "score": 7, "last_activity_date": 1558752302, "creation_date": 1534348314, "last_edit_date": 1558752302, "question_id": 51862128, "link": "https://stackoverflow.com/questions/51862128/initialization-with-empty-curly-braces", "title": "Initialization with empty curly braces", "body": "<p>First attempt and everything works fine:</p>\n\n<pre><code>class Base {\n public:\n    Base() {std::cout &lt;&lt; \"default ctor!\\n\"; }\n};\n...\nBase b{};\nBase b_one = {};\n</code></pre>\n\n<p>Another way of implementation(add <code>explicit</code>):</p>\n\n<pre><code>class Base {\n public:\n    explicit Base() {std::cout &lt;&lt; \"default ctor!\\n\"; }\n};\n...\nBase b{};\nBase b_one = {};  // error! Why?\n</code></pre>\n\n<p>I have read on cppreference that in both cases default initialization would be used and no diffences.</p>\n\n<p>From list initialization:</p>\n\n<blockquote>\n  <p>Otherwise, If the braced-init-list is empty and T is a class type with a default constructor, value-initialization is performed.</p>\n</blockquote>\n\n<p>From value initialization:</p>\n\n<blockquote>\n  <p>if T is a class type with no default constructor or with a user-provided or deleted default constructor, the object is default-initialized;</p>\n</blockquote>\n"}, {"tags": ["c++", "armadillo"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1534348376, "post_id": 51862119, "comment_id": 90676530, "body": "You must add <code>#define NOMINMAX</code> before including and Windows hear, like Windows.h. If you include those in multiple places you need to either define it in all of those places or add it as a global define to your project."}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1534348406, "post_id": 51862119, "comment_id": 90676542, "body": "You should also added the lean_and_mean  see <a href=\"https://stackoverflow.com/questions/1394910/how-to-tame-the-windows-headers-useful-defines\" title=\"how to tame the windows headers useful defines\">stackoverflow.com/questions/1394910/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 7948439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6effc84a9a23ca59fd0dece4cafbe47a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7948439/alex"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1534352180, "post_id": 51862119, "comment_id": 90678405, "body": "@RetiredNinja : just to clarify  1) which of the headers in the example code is a windows header?  2) as I explained I have tried adding #define NOMINMAX both in .h files and in .cpp files, but it has not helped. i&#39;ll double check that i did it everywhere, as I may have missed a file. but if i missed a single file, would i still be getting the warning for every file that uses the armadillo library?  Thanks again for your help."}, {"owner": {"reputation": 43, "user_id": 7948439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6effc84a9a23ca59fd0dece4cafbe47a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7948439/alex"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1534367237, "post_id": 51862119, "comment_id": 90685038, "body": "@RetiredNinja turns out I had missed a couple files where I hadn&#39;t added #define NOMINMAX, and that caused warnings in ALL the files, meaning that I couldn&#39;t pinpoint which files were the issue. Thanks for your help, I wouldn&#39;t have looked through all the files again if you hadn&#39;t commented."}], "owner": {"reputation": 43, "user_id": 7948439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6effc84a9a23ca59fd0dece4cafbe47a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7948439/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534348269, "creation_date": 1534348269, "question_id": 51862119, "link": "https://stackoverflow.com/questions/51862119/visual-c-min-max-warning-when-including-armadillo-library", "title": "visual c++ min max warning when including armadillo library", "body": "<p>I use the armadillo library in visual C++ to take care of some matrix and vector operations. Here's what one of my cpp files looks like:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cmath&gt;\n#include &lt;armadillo&gt;\n#include \"buildRotMatrix.h\"\n\nusing namespace std;\nusing namespace arma;\n\n//code\n</code></pre>\n\n<p>When I compile I get the following warning:</p>\n\n<pre><code>1&gt;CL : warning : detected 'min' and/or 'max' macros and undefined them;\n1&gt;CL : warning : you may wish to define NOMINMAX before including any windows header\n</code></pre>\n\n<p>I don't actually use min and max functions in the code but i'd like to get rid of the warnings. adding #define NOMINMAX hasn't worked and I haven't found other solutions. It's not clear to me where the conflict comes from since my understanding from google searches is people get it from including windows.h.</p>\n"}, {"tags": ["c++", "batch-file"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1534350737, "post_id": 51862091, "comment_id": 90677754, "body": "<i>How do I get the cnt value returned with exit /b %cnt% as a variable in my cpp file?</i> is answered on MSDN: <a href=\"https://msdn.microsoft.com/en-us/library/277bwbdz.aspx\" rel=\"nofollow noreferrer\"><code>system()</code></a>: <i>If command is not NULL, system returns the value that is returned by the command interpreter.</i> I believe this is the value returned by <code>exit</code> of your batch script (according to this link <a href=\"https://ss64.com/nt/exit.html\" rel=\"nofollow noreferrer\"><code>EXIT</code></a>)."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1534352174, "post_id": 51862091, "comment_id": 90678400, "body": "Concerning the bonus: You could write the output of batch into a file which is read afterwards. Piping batch standard output into the standard input of caller might be another option."}, {"owner": {"reputation": 486, "user_id": 8377287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yT4Zr.png?s=128&g=1", "display_name": "LoukMouk", "link": "https://stackoverflow.com/users/8377287/loukmouk"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1534352219, "post_id": 51862091, "comment_id": 90678419, "body": "<code>int i = system(&quot;.....&quot;)</code> returns 0 every time ): Thanks for your help!"}, {"owner": {"reputation": 486, "user_id": 8377287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yT4Zr.png?s=128&g=1", "display_name": "LoukMouk", "link": "https://stackoverflow.com/users/8377287/loukmouk"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1534352255, "post_id": 51862091, "comment_id": 90678437, "body": "Thanks for the idea!"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1534352411, "post_id": 51862091, "comment_id": 90678504, "body": "<i>returns 0 every time</i> I don&#39;t understand - the output in my answer isn&#39;t fake. Did you check whether the batch file could be found? May be, it is even not started. When I tested in VS I set working directory to the folder with bat file (in debug settings) to be sure that it is found."}, {"owner": {"reputation": 486, "user_id": 8377287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yT4Zr.png?s=128&g=1", "display_name": "LoukMouk", "link": "https://stackoverflow.com/users/8377287/loukmouk"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1534352675, "post_id": 51862091, "comment_id": 90678621, "body": "nevermind! I forgot to double my backslashes in the paths passed in params %1 and %2! Thank you very much for your help!"}], "answers": [{"tags": [], "owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "is_accepted": false, "score": 0, "last_activity_date": 1534350576, "creation_date": 1534350576, "answer_id": 51862697, "question_id": 51862091, "link": "https://stackoverflow.com/questions/51862091/how-to-pass-parameters-and-get-returned-exit-value-to-from-a-batch-file-in-c-w/51862697#51862697", "title": "How to pass parameters and get returned exit value to/from a batch file in c++ windows", "body": "<p>Both g++ and vs have the filesystem header under experimental, which may be a better solution.  If you prefer the environmental variable solution then std::getenv will do that.</p>\n\n<p>It's been a long time since I've done any batch file programming, but I seem to remember that you can set environmental variables in there.</p>\n"}, {"tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": true, "score": 2, "last_activity_date": 1582036096, "last_edit_date": 1582036096, "creation_date": 1534351978, "answer_id": 51863071, "question_id": 51862091, "link": "https://stackoverflow.com/questions/51862091/how-to-pass-parameters-and-get-returned-exit-value-to-from-a-batch-file-in-c-w/51863071#51863071", "title": "How to pass parameters and get returned exit value to/from a batch file in c++ windows", "body": "<p>MSDN describes the usage of <a href=\"https://msdn.microsoft.com/en-us/library/277bwbdz.aspx\" rel=\"nofollow noreferrer\"><code>system()</code></a>. I cite the part about return value:</p>\n\n<blockquote>\n  <p>If <code>command</code> is <code>NULL</code> and the command interpreter is found, returns a nonzero value. If the command interpreter is not found, returns <code>0</code> and sets <code>errno</code> to <code>ENOENT</code>. If <code>command</code> is not <code>NULL</code>, system returns the value that is returned by the command interpreter. It returns the value <code>0</code> only if the command interpreter returns the value <code>0</code>.</p>\n</blockquote>\n\n<p>Somehow, I assumed that return code of batch file is the return code of command interpreter but I was not fully sure nor I found an appropriate doc. concerning this.</p>\n\n<p>Thus, I made a little sample and tried it locally.</p>\n\n<p><code>testExitBat.cc</code>:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n  int ret = system(\"testExitBat.bat Hello\");\n  std::cout &lt;&lt; \"testExitBat.bat returned \" &lt;&lt; ret &lt;&lt; '\\n';\n  return 0;\n}\n</code></pre>\n\n<p><code>testExitBat.bat</code>:</p>\n\n<pre class=\"lang-bat prettyprint-override\"><code>::%1 an argument\necho \"$1: '\"%1%\"'\"\nexit /b 123\n</code></pre>\n\n<p>I compiled and ran it on VS2013 (Windows 10):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Users\\Scheff&gt;echo \"$1: '\"Hello\"'\"\n\"$1: '\"Hello\"'\"\n\nC:\\Users\\Scheff&gt;exit /b 123\ntestExitBat.bat returned 123\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 8377287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yT4Zr.png?s=128&g=1", "display_name": "LoukMouk", "link": "https://stackoverflow.com/users/8377287/loukmouk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 51863071, "answer_count": 2, "score": 2, "last_activity_date": 1582036096, "creation_date": 1534348133, "question_id": 51862091, "link": "https://stackoverflow.com/questions/51862091/how-to-pass-parameters-and-get-returned-exit-value-to-from-a-batch-file-in-c-w", "title": "How to pass parameters and get returned exit value to/from a batch file in c++ windows", "body": "<p><strong>CONTEXT :</strong></p>\n\n<p>-Windows 10</p>\n\n<p>-C++</p>\n\n<p>-Batch file</p>\n\n<p>-I want to call a <code>.bat</code> file in a <code>.cpp</code> file and get an <code>int</code> as return value</p>\n\n<p>-The batch file counts and renames <code>.jpg</code> files in a given folder passed as parameter</p>\n\n<p>-Batch file code:</p>\n\n<pre><code>::%1 is the path to the base folder\n::%2 is the name of the folder of the images\nsetlocal enabledelayedexpansion\n@echo off\n\nCD /D %1\nset cnt=0\nfor %%f in (%2\\*) do (\n    set newName=000!cnt!\n    set newName=!newname:~-4!\n    ren %%f !newName!.jpg\n    set /a cnt+=1\n)\n\n@echo %cnt% files renamed in order\nexit /b %cnt%\n</code></pre>\n\n<p><strong>QUESTION :</strong></p>\n\n<p>I think I already know how to pass parameters... You need put spaces after the .bat file you call and enter the wanted parameters.</p>\n\n<p>ex:</p>\n\n<p>To run my script in the <code>L:/baseFolder/water</code> folder, I would use :</p>\n\n<p><code>system(file.bat L:\\\\baseFolder water)</code></p>\n\n<p>How do I get the <code>cnt</code> value returned with <code>exit /b %cnt%</code> as a variable in my cpp file?</p>\n\n<p>Am I supposed to use <code>exit</code> to get this integer?</p>\n\n<p><strong>Bonus:</strong> What if I want to return multiple values?</p>\n"}, {"tags": ["c++", "unordered-map"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1534347902, "post_id": 51861973, "comment_id": 90676246, "body": "<code>int i_want_132_here = um.emplace(&quot;hi&quot;, 132).first-&gt;second;</code>"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1534347933, "post_id": 51861973, "comment_id": 90676258, "body": "@Borgleader na the .second shows up as &quot;true&quot; in debugger and is supposed to indicate the success of emplacement according to documentation, of course I have no clue how to access the &quot;true&quot; as a boolean value either"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1534348017, "post_id": 51861973, "comment_id": 90676315, "body": "@RetiredNinja correct!"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1534348039, "post_id": 51861973, "comment_id": 90676328, "body": "@user81993 Yeah I missed that, which is why I deleted the comment, was about to post <a href=\"http://coliru.stacked-crooked.com/a/d19cd609bf5fc27d\" rel=\"nofollow noreferrer\">this</a> but a Ninja beat me to it."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1534348129, "post_id": 51861973, "comment_id": 90676385, "body": "You would access the bool the same way. <code>bool inserted = um.emplace(&quot;hi&quot;, 132).second;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1645, "user_id": 3860767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5c892bd7f367b8f2d01800dc1e6d98?s=128&d=identicon&r=PG", "display_name": "Massimo Costa", "link": "https://stackoverflow.com/users/3860767/massimo-costa"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1534348097, "post_id": 51862055, "comment_id": 90676365, "body": "sorry, I fixed my answer"}, {"owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348176, "post_id": 51862055, "comment_id": 90676419, "body": "Why not <code>-&gt;</code> then."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "reply_to_user": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 1, "creation_date": 1534348280, "post_id": 51862055, "comment_id": 90676475, "body": "@riv Iterators have syntax similar to pointers. <code>it-&gt;value</code> and <code>(*it).value</code> are the same thing."}, {"owner": {"reputation": 1645, "user_id": 3860767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5c892bd7f367b8f2d01800dc1e6d98?s=128&d=identicon&r=PG", "display_name": "Massimo Costa", "link": "https://stackoverflow.com/users/3860767/massimo-costa"}, "reply_to_user": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348299, "post_id": 51862055, "comment_id": 90676483, "body": "@riv I know the arrow operator <code>-&gt;</code> is also usable but in general I prefer the <code>(*it)</code> form"}], "tags": [], "owner": {"reputation": 1645, "user_id": 3860767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5c892bd7f367b8f2d01800dc1e6d98?s=128&d=identicon&r=PG", "display_name": "Massimo Costa", "link": "https://stackoverflow.com/users/3860767/massimo-costa"}, "is_accepted": true, "score": 2, "last_activity_date": 1534348463, "last_edit_date": 1534348463, "creation_date": 1534347972, "answer_id": 51862055, "question_id": 51861973, "link": "https://stackoverflow.com/questions/51861973/how-to-extract-the-value-of-the-pair-retuned-by-unordered-mapemplace/51862055#51862055", "title": "How to extract the value of the pair retuned by unordered_map::emplace?", "body": "<p><code>emplace</code> returns a <code>pair&lt;iterator, bool&gt;</code>.</p>\n\n<p>So you should do:</p>\n\n<pre><code>int i_want_132_here = (*um.emplace(\"hi\", 132).first).second;\n</code></pre>\n\n<p>alternative syntax:</p>\n\n<pre><code>int i_want_132_here = um.emplace(\"hi\", 132).first-&gt;second;\n</code></pre>\n\n<p>In general I prefer <code>(*it)</code> form instead of <code>it-&gt;</code>.</p>\n"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 51862055, "answer_count": 1, "score": 0, "last_activity_date": 1534348463, "creation_date": 1534347683, "question_id": 51861973, "link": "https://stackoverflow.com/questions/51861973/how-to-extract-the-value-of-the-pair-retuned-by-unordered-mapemplace", "title": "How to extract the value of the pair retuned by unordered_map::emplace?", "body": "<p>I'm trying to make my code 1 line shorter, a noble cause. I have this unordered map</p>\n\n<pre><code>std::unordered_map&lt;std::string, int&gt; um;\n</code></pre>\n\n<p>and I want to assign the integer to a variable on the same line where I emplace a pair into the unordered map like so</p>\n\n<pre><code>int i_want_132_here = um.emplace(\"hi\", 132).first.???;\n</code></pre>\n\n<p>problem is, I have no idea what to do with [return value of unordered_map::emplace].first</p>\n\n<p>In the debugger I can see that \"first\" contains (\"hi\", 132) but how do I access those values?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534348712, "post_id": 51861932, "comment_id": 90676705, "body": "A <code>char</code> may be either signed or unsigned - implementation defined. If it is signed then <code>199</code> won&#39;t fit. Seems your implementation uses signed chars."}], "answers": [{"comments": [{"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 1, "creation_date": 1534348357, "post_id": 51862004, "comment_id": 90676514, "body": "Looks like he&#39;s just trying to compile some dependency that was written in an old version of the language. Depending on the size of it, editing the source may not be a viable strategy."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1534357013, "post_id": 51862004, "comment_id": 90680631, "body": "The lowest effort edits are to either change <code>128</code> to <code>-128</code> - the generated bitwise pattern will be as intended, and the value will fit in signed char; or change char to unsigned char, which may have other consequences."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 2, "last_activity_date": 1534353605, "last_edit_date": 1534353605, "creation_date": 1534347777, "answer_id": 51862004, "question_id": 51861932, "link": "https://stackoverflow.com/questions/51861932/error-narrowing-conversion-of-199-from-int-to-char-inside-wnarrowin/51862004#51862004", "title": "error: narrowing conversion of \u2018199\u2019 from \u2018int\u2019 to \u2018char\u2019 inside { } [-Wnarrowing]", "body": "<p>Well, apparently in your implementation values like <code>210</code> and <code>199</code> do not fit into the range of type <code>char</code>. So, the conversion is narrowing. <code>{}</code> initializers do not allow narrowing conversions. </p>\n\n<p>This suggests that your implementation apparently uses signed <code>char</code> type.</p>\n\n<p>You can forcefully convert the values to <code>char</code> by using explicit casts inside the <code>{}</code>. You can stop using <code>{}</code> initializers. You can force your implementation to use unsigned <code>char</code>. There are many \"solutions\" for this problem, but there's no way to chose one without more context.</p>\n\n<p>If the code was originally written for the same \"family\" of implementations you are compiling it on now, then most likely it was simply written for an older version of the language, which performed that narrowing conversion implicitly. In that case to reproduce the old behavior you'll need explicit casts</p>\n\n<pre><code>char signature[] = \n  {'%', '%', (char) ('G' + 128), (char) ('R' + 128), (char) ('A' + 128), '\\n', 0};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1534348901, "post_id": 51862194, "comment_id": 90676797, "body": "I wouldn&#39;t recomment to just disable the error and keep using C++11(or C++14). There are subtle changes in the meaning of some constructs that were introduced in those versions of the language, and those may cause silent bugs."}, {"owner": {"reputation": 97, "user_id": 3502565, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rIv9m.jpg?s=128&g=1", "display_name": "Lester", "link": "https://stackoverflow.com/users/3502565/lester"}, "edited": false, "score": 0, "creation_date": 1612315144, "post_id": 51862194, "comment_id": 116726792, "body": "I got pretty much same waring/error while making wxGTK-2.8.12. Based on the Ben&#39;s answer from <a href=\"https://stackoverflow.com/questions/20302595/how-to-disable-narrowing-conversion-warnings\" title=\"how to disable narrowing conversion warnings\">stackoverflow.com/questions/20302595/&hellip;</a> , I successfully built the file by adding &quot; -Wno-c++11-narrowing&quot; to CFLAGES var in MakeFile"}], "tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": true, "score": 0, "last_activity_date": 1534348611, "creation_date": 1534348611, "answer_id": 51862194, "question_id": 51861932, "link": "https://stackoverflow.com/questions/51861932/error-narrowing-conversion-of-199-from-int-to-char-inside-wnarrowin/51862194#51862194", "title": "error: narrowing conversion of \u2018199\u2019 from \u2018int\u2019 to \u2018char\u2019 inside { } [-Wnarrowing]", "body": "<p>The lowest-effort way to get your thing to build is probably to add <code>-Wno-narrowing</code> to your compiler invocation. If you're using <code>make</code>, you can probably start it with something like <code>CFLAGS=-Wno-narrowing make</code> (assuming you're using bash) to get the desired effect.</p>\n"}, {"tags": [], "owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534348693, "creation_date": 1534348693, "answer_id": 51862210, "question_id": 51861932, "link": "https://stackoverflow.com/questions/51861932/error-narrowing-conversion-of-199-from-int-to-char-inside-wnarrowin/51862210#51862210", "title": "error: narrowing conversion of \u2018199\u2019 from \u2018int\u2019 to \u2018char\u2019 inside { } [-Wnarrowing]", "body": "<p>Current compilers use by default newer versions of C++. Your compiler may be trying to compile the source in C++11 or C++14 mode.</p>\n\n<p>Try adding <code>-std=c++03</code> to your compiler flags.</p>\n"}], "owner": {"reputation": 5, "user_id": 10230085, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3c7hhUWAxR4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ryzekclbFFOIteMZrNUKHkke_hkA/mo/photo.jpg?sz=128", "display_name": "Esteban Lopera", "link": "https://stackoverflow.com/users/10230085/esteban-lopera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5357, "favorite_count": 0, "accepted_answer_id": 51862194, "answer_count": 3, "score": 0, "last_activity_date": 1534353605, "creation_date": 1534347557, "question_id": 51861932, "link": "https://stackoverflow.com/questions/51861932/error-narrowing-conversion-of-199-from-int-to-char-inside-wnarrowin", "title": "error: narrowing conversion of \u2018199\u2019 from \u2018int\u2019 to \u2018char\u2019 inside { } [-Wnarrowing]", "body": "<p>I am trying to compile a really old software in linux debian 9.5, i keep getting this error:</p>\n\n<pre><code>janpdf/PDF.cpp: In member function \u2018void PDF::OpenFile(const char*)\u2019:\njanpdf/PDF.cpp:41:74: error: narrowing conversion of \u2018199\u2019 from \u2018int\u2019 to \n\u2018char\u2019 inside { } [-Wnarrowing]\nchar signature[] = {'%', '%', 'G' + 128, 'R' + 128, 'A' + 128, '\\n', 0};\n                                                                      ^\njanpdf/PDF.cpp:41:74: error: narrowing conversion of \u2018210\u2019 from \u2018int\u2019 to \n\u2018char\u2019 inside { } [-Wnarrowing]\njanpdf/PDF.cpp:41:74: error: narrowing conversion of \u2018193\u2019 from \u2018int\u2019 to \n\u2018char\u2019 inside { } [-Wnarrowing]\nMakefile:153: recipe for target 'janpdf/PDF.o' failed\nmake: *** [janpdf/PDF.o] Error 1\n</code></pre>\n\n<p>I have already tried teh signed / unsigned 'char'approach. Although I know almos nothing about coding this is the only answer I found. Any other solution is welcome.\nthanks</p>\n"}, {"tags": ["c++", "vector", "stack", "std-pair", "push-back"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9864055, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ii70zEBvPnE/AAAAAAAAAAI/AAAAAAAALWA/HCvipSVjGzc/photo.jpg?sz=128", "display_name": "Jyotiraditya", "link": "https://stackoverflow.com/users/9864055/jyotiraditya"}, "is_accepted": false, "score": 0, "last_activity_date": 1534348911, "creation_date": 1534348911, "answer_id": 51862262, "question_id": 51861796, "link": "https://stackoverflow.com/questions/51861796/vector-stack-pair-longest-path-in-a-tree-using-dfs/51862262#51862262", "title": "Vector Stack Pair | Longest path in a tree using dfs", "body": "<p>Solved:\nvector  adj(10001);\nto\nvector  adj[10001];\nas it was a 2d vector</p>\n"}], "owner": {"reputation": 1, "user_id": 9864055, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ii70zEBvPnE/AAAAAAAAAAI/AAAAAAAALWA/HCvipSVjGzc/photo.jpg?sz=128", "display_name": "Jyotiraditya", "link": "https://stackoverflow.com/users/9864055/jyotiraditya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551902037, "creation_date": 1534347020, "last_edit_date": 1551902037, "question_id": 51861796, "link": "https://stackoverflow.com/questions/51861796/vector-stack-pair-longest-path-in-a-tree-using-dfs", "title": "Vector Stack Pair | Longest path in a tree using dfs", "body": "<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\nvector &lt;int&gt; adj(10001);\nbool vis[10001];\n\nvoid initialize ()\n{\n    for (int i = 0; i&lt;10001; i++)\n        vis[i] = false;\n}\n\npair &lt;int,int&gt; dfs ( int x )\n{\n    stack &lt; pair&lt;int,int&gt; &gt; s;\n    s.push( make_pair (x,0) );\n    int maxnode = x, maxlevel = 0;\n\n    while (!s.empty())\n    {\n        int t = s.top().first;\n        int level = s.top().second;\n        if (level&gt;maxlevel)\n        {\n            maxnode = t;\n            maxlevel = level;\n        }\n\n        s.pop();\n        vis[t] = true;\n\n        for ( int i = 0; i&lt;adj[t].size(); i++)\n        {\n            if ( vis[adj[t][i]]==false)\n            {\n                s.push( make_pair (adj[t][i], level+1 ));\n            } \n        }\n\n    }\n\n    return make_pair (maxnode,maxlevel);\n}\n\nint main() {\n    // your code goes here\n    int n, x;\n    cin&gt;&gt;n;\n\n    if (n==1 || n==2)\n    {\n        cout&lt;&lt;n-1;\n        exit(0);\n    }\n\n    initialize();\n\n    for (int i = 0; i&lt;n-1; i++)\n    {\n        int a, b;\n        cin&gt;&gt;a&gt;&gt;b;\n\n        if (i==0)\n            x = a;\n\n        adj[a].push_back(b);\n        adj[b].push_back(a);\n    }\n\n    pair &lt;int,int&gt; far1 = dfs (x);\n    initialize();\n    pair &lt;int,int&gt; far2 = dfs (far1.first);\n\n    cout&lt;&lt;far2.second;\n\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ide.geeksforgeeks.org/bsuLBaB2yQ\" rel=\"nofollow noreferrer\">Or the code is here.</a></p>\n\n<p>Error related to vector, stack, pair:</p>\n\n<blockquote>\n  <p>prog.cpp: In function 'std::pair dfs(int)': prog.cpp:32:29:\n  error: request for member 'size' in 'adj.std::vector&lt;_Tp,\n  _Alloc>::operator[] >(((std::vector::size_type)t))', which is of non-class type '__gnu_cxx::__alloc_traits >::value_type {aka\n  int}'    for ( int i = 0; i\n                               ^ prog.cpp:34:21: error: invalid types '__gnu_cxx::__alloc_traits >::value_type {aka\n  int}[int]' for array subscript\n      if ( vis[adj[t][i]]==false)<br>\n                       ^ prog.cpp: In function 'int main()': prog.cpp:66:10: error: request for member 'push_back' in\n  'adj.std::vector&lt;_Tp, _Alloc>::operator[]>(((std::vector::size_type)a))', which is of non-class type '__gnu_cxx::__alloc_traits >::value_type {aka\n  int}'    adj[a].push_back(b);<br>\n            ^ prog.cpp:67:10: error: request for member 'push_back' in 'adj.std::vector&lt;_Tp, _Alloc>::operator[]>(((std::vector::size_type)b))', which is of non-class type '__gnu_cxx::__alloc_traits >::value_type {aka\n  int}'    adj[b].push_back(a);<br>\n            ^</p>\n</blockquote>\n\n<p>Please help me rectify these.</p>\n"}, {"tags": ["c++", "openscenegraph"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1534347295, "post_id": 51861628, "comment_id": 90675937, "body": "Could you show the code for the definition of <code>applyAttributeList</code>? The issue probably occurs inside that method, but we&#39;re unable to see what it actually does/observe where your bug might be."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1534348032, "post_id": 51861628, "comment_id": 90676324, "body": "Unrelated: That&#39;s not an exception, not in the C++ sense. That&#39;s a runtime assert. Generalizing a bit, assert is a macro that performs a test and terminates the program if the test fails. A C++ exception you can catch, handle, and keep the program running. You can&#39;t catch the assert. Typically when you release the code to the user, the assert is compiled differently to do nothing, not even the test so there is no performance impact. it only exists for debugging to catch mistakes and force you to fix them before users get their hands on it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1534348356, "post_id": 51861628, "comment_id": 90676513, "body": "The error message suggests that you have an iterator that has been rendered invalid. If you get an iterator for a container and then modify the container, odds are good (<a href=\"https://stackoverflow.com/questions/6438086/iterator-invalidation-rules\">See here for details</a>) that the container&#39;s moved stuff around and your iterator no longer references what it should."}, {"owner": {"reputation": 429, "user_id": 7647979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/752Gt.jpg?s=128&g=1", "display_name": "S.Frank Richarrd", "link": "https://stackoverflow.com/users/7647979/s-frank-richarrd"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1534349835, "post_id": 51861628, "comment_id": 90677264, "body": "@Xirema it is an API method from Openscenegraph graphics library"}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 7647979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/752Gt.jpg?s=128&g=1", "display_name": "S.Frank Richarrd", "link": "https://stackoverflow.com/users/7647979/s-frank-richarrd"}, "edited": false, "score": 0, "creation_date": 1534791361, "post_id": 51912433, "comment_id": 90823862, "body": "Thanks for the answer. It helped a lot. I checked with the SingleThreaded scheme, it is working fine. So I switched back to automaticthreading model and tried changing stateset&#39;s data variance. It is still crashing. But it is fixed after setting setDataVariance(osg::Object::DYNAMIC); to osg::Geometry node."}], "tags": [], "owner": {"reputation": 801, "user_id": 878711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b439ae8956c87b26564542b75ad426?s=128&d=identicon&r=PG", "display_name": "rickyviking", "link": "https://stackoverflow.com/users/878711/rickyviking"}, "is_accepted": true, "score": 1, "last_activity_date": 1534625384, "creation_date": 1534625384, "answer_id": 51912433, "question_id": 51861628, "link": "https://stackoverflow.com/questions/51861628/how-to-disable-state-attribute-in-openscenegraph-geometry-node/51912433#51912433", "title": "How to disable State attribute in Openscenegraph geometry node?", "body": "<p>This is most likely due to the fact that you're updating the stateset while the rendering thread(s) is still using it to finish the dispatch of the previous frame. \nTo make sure this is the cause of the crash, you can try to run the application with OSG <code>SingleThreaded</code> scheme (either set it via code on the viewer or set the OSG_THREADING env var).<br>\nIf that is the cause and you want to use the one of the other threading schemes, you can set the stateset's data variance to <code>DYNAMIC</code> - this will ensure that the rendering thread is done with your stateset before the next update callback is called for the new frame.<br>\nThis topic has been discussed many times in the osg-users mailing list, you may check the archives for further info.</p>\n"}], "owner": {"reputation": 429, "user_id": 7647979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/752Gt.jpg?s=128&g=1", "display_name": "S.Frank Richarrd", "link": "https://stackoverflow.com/users/7647979/s-frank-richarrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 51912433, "answer_count": 1, "score": 1, "last_activity_date": 1534701110, "creation_date": 1534346389, "last_edit_date": 1534701110, "question_id": 51861628, "link": "https://stackoverflow.com/questions/51861628/how-to-disable-state-attribute-in-openscenegraph-geometry-node", "title": "How to disable State attribute in Openscenegraph geometry node?", "body": "<p>I tried adding a fragment shader program to <code>OSG::Geometry</code> node as below.</p>\n\n<pre><code>    osg::ref_ptr&lt;osg::Geometry&gt; node = new osg::Geometry();\n    osg::ref_ptr&lt;osg::Program&gt; m_program= new osg::Program;\n    osg::ref_ptr&lt;osg::Shader&gt; fragShader = new osg::Shader(osg::Shader::FRAGMENT);\n    //TODO Add LOG if shader failed to load\n    if (!fragShader-&gt;loadShaderSourceFromFile(\"Shaders/Sel.frag\"))\n        return;\n    m_program-&gt;addShader(fragShader);\n    osg::StateSet* state = node-&gt;getOrCreateStateSet();\n    state-&gt;setAttributeAndModes(m_program, osg::StateAttribute::ON);\n</code></pre>\n\n<p>At some point, I removed the program using the below method</p>\n\n<pre><code>state-&gt;removeAttribute(m_program);\n</code></pre>\n\n<p>After removing the attribute, the next immediate render frame loop <code>frame()</code> throws an exception as below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tr6cX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tr6cX.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried to debug the openscenegraph and found the map which is causing the issue.</p>\n\n<p>Header file: State</p>\n\n<p>Method name :  </p>\n\n<pre><code>inline void State::applyAttributeList(AttributeMap&amp; attributeMap,const StateSet::AttributeList&amp; attributeList)\n</code></pre>\n\n<p>The variable which caused the exception.</p>\n\n<pre><code>attributeMap\n</code></pre>\n\n<p>if I am not removing the program state attribute, it is working fine. Only removing the attribute, causing the issue.</p>\n"}, {"tags": ["c++", "function", "function-declaration"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1534346423, "post_id": 51861617, "comment_id": 90675397, "body": "This is largely about what people might consider good programming style, which is very opinionated. (The approach you mention is a common one though)."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1534346451, "post_id": 51861617, "comment_id": 90675412, "body": "Why is this also tagged C?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534347756, "post_id": 51861617, "comment_id": 90676166, "body": "I second the opinionated. &quot;better&quot; in terms of what?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534357125, "post_id": 51861617, "comment_id": 90680678, "body": "@user463035818 In terms of less likely to get the arguments the wrong way round?"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534347606, "post_id": 51861875, "comment_id": 90676102, "body": "this is fine until someone considers it too tedious to set each field seperately and writes a constructor for <code>Options</code> that lets you pass all parameters ;)"}, {"owner": {"reputation": 5894, "user_id": 1537403, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/30fe49e683fcbcd8ce33182356dc9929?s=128&d=identicon&r=PG", "display_name": "riv", "link": "https://stackoverflow.com/users/1537403/riv"}, "edited": false, "score": 0, "creation_date": 1534348376, "post_id": 51861875, "comment_id": 90676531, "body": "Unfortunately, people would be inclined to write it as <code>FooService({ip::address::any(), 1337, ...})</code>. C99 style initializers would be helpful here, but they&#39;re not in C++ yet: <code>FooService({.port = 1337})</code>."}, {"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 0, "creation_date": 1534349869, "post_id": 51861875, "comment_id": 90677283, "body": "oh that&#39;s right! Apparently designated initializers are coming in C++20, so that can be an almost transparent solution for named parameters at that point!"}], "tags": [], "owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1534347340, "creation_date": 1534347340, "answer_id": 51861875, "question_id": 51861617, "link": "https://stackoverflow.com/questions/51861617/how-to-avoid-mistakes-in-functions-with-same-type-arguments/51861875#51861875", "title": "How to avoid mistakes in functions with same type arguments", "body": "<p>Another thing that you can do is to pass parameters in a structure. This also allows you to set sensible defaults for the values. This is especially useful when a constructor takes a large number of arguments. For example: </p>\n\n<pre><code>class FooService\n{\npublic:\n    // parameters struct.\n    struct Options\n    {\n        ip::address listen_address = ip::address::any();\n        uint16_t port = 1337;\n        bool allow_insecure_requests = false;\n        std::string base_directory  = \"/var/foo/\"\n    };\n    //constructor takes the options struct to pass values. \n    explicit FooService(FooServiceOptions options);\n    // ...\n};\n</code></pre>\n\n<p>Which is then used like: </p>\n\n<pre><code>FooService::Options o;\no.port = 1338;\n//all other values keep their defaults. \n\nauto service = make_unique&lt;FooService&gt;(o);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "is_accepted": false, "score": 1, "last_activity_date": 1534362691, "creation_date": 1534362691, "answer_id": 51865501, "question_id": 51861617, "link": "https://stackoverflow.com/questions/51861617/how-to-avoid-mistakes-in-functions-with-same-type-arguments/51865501#51865501", "title": "How to avoid mistakes in functions with same type arguments", "body": "<p>There are two approaches I can think of.</p>\n\n<h2>Tagged Types</h2>\n\n<p>This is essentially what you are suggesting in your question, but I would implement it generically.</p>\n\n<pre><code>template &lt;typename Tag, typename T&gt;\nstruct Tagged\n{\n  explicit Tagged(const T&amp; value) : value{value} { }\n  T value;\n};\n\ntemplate &lt;typename Tag, typename T&gt;\nTagged&lt;Tag, T&gt; tag(const T&amp; value)\n{\n  return Tagged&lt;Tag, T&gt;{value};\n}\n\nstruct OffsetTag\n{ };\nstruct AmountTag\n{ };\n\nusing Offset = Tagged&lt;OffsetTag, std::size_t&gt;;\nusing Amount = Tagged&lt;AmountTag, std::size_t&gt;;\n\nstd::vector&lt;uint8_t&gt; read(Offset offset, Amount amount);\n</code></pre>\n\n<p>This allows you to expand the same concept to other underlying data types.</p>\n\n<h2>Named Parameter Idiom</h2>\n\n<p>The <a href=\"http://www.cs.technion.ac.il/users/yechiel/c++-faq/named-parameter-idiom.html\" rel=\"nofollow noreferrer\">Named Parameter Idiom</a> is somewhat similar to the <code>Options</code> approach in @PaulBelanger's answer, but it can be used in place and doesn't allow the user to take the the curly-brace shortcut that brings you back to the same problem you had before.  However, it will default-initialize all your parameters, so while you are protected from mixing up parameters, it can't force you to provide explicit values for all of them. For your example:</p>\n\n<pre><code>class ReadParams\n{\npublic:\n  ReadParams() : m_offset{0}, m_amount{128}\n  { }\n\n  ReadParams&amp; offset(std::size_t offset)\n  {\n    m_offset = offset;\n    return *this;\n  }\n\n  // Could get rid of this getter if you can make the users\n  // of this class friends.\n  std::size_t offset() const { return m_offset; }\n\n  ReadParams&amp; amount(std::size_t amount)\n  {\n    m_amount = amount;\n    return *this;\n  }\n\n  // Could get rid of this getter if you can make the users\n  // of this class friends.\n  std::size_t amount() const { return m_amount; }\n\nprivate:\n  std::size_t m_offset;\n  std::size_t m_amount;\n};\n\nstd::vector&lt;uint8_t&gt; read(const ReadParams&amp; params);\n\nint main()\n{\n  read(ReadParams{}.offset(42).amount(2048)); // clear parameter names\n  // read(ReadParams{42, 2048});              // won't compile\n  read(ReadParams{}.offset(42));              // also possible, amount uses default value\n}\n</code></pre>\n\n<p>You could implement the members of <code>ReadParams</code> as <code>std::optional</code>s and throw a runtime error if an uninitialized member is access; but you can no longer enforce <em>at compile time</em> that the user actually provides all parameters.</p>\n"}], "owner": {"reputation": 325, "user_id": 8478036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae78581bd48e45afa4f0eb7a96a82997?s=128&d=identicon&r=PG&f=1", "display_name": "MamCieNaHita", "link": "https://stackoverflow.com/users/8478036/mamcienahita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534362691, "creation_date": 1534346369, "last_edit_date": 1534346649, "question_id": 51861617, "link": "https://stackoverflow.com/questions/51861617/how-to-avoid-mistakes-in-functions-with-same-type-arguments", "title": "How to avoid mistakes in functions with same type arguments", "body": "<p>How can I avoid mistakes with passing parameters of same type to function?</p>\n\n<p>Let's consider function reading some binary data:</p>\n\n<pre><code>std::vector&lt;uint8_t&gt; read(size_t offset, size_t amount);\n</code></pre>\n\n<p>It's so easy to mistake offset with amount(I did similar it many times).</p>\n\n<p>I see solution to this:</p>\n\n<pre><code>struct Offset\n{\n    explicit Offset(size_t value) : value{value}{}\n    size_t value;\n};\nstruct Amount\n{\n    explicit Amount(size_t value) : value{value}{}\n    size_t value;\n};\nstd::vector&lt;uint8_t&gt; read(Offset offset, Amount amount);\n</code></pre>\n\n<p>Is there a better solution to avoid mistakes like that?</p>\n"}, {"tags": ["c++", "comparison", "c++17"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1534346361, "post_id": 51861467, "comment_id": 90675368, "body": "C++20 will get the &quot;spaceship operator&quot; (<code>&lt;=&gt;</code>) - I think that may be what you are looking for."}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534346494, "post_id": 51861467, "comment_id": 90675436, "body": "@JesperJuhl It is, but unfortunately there is no C++20 yet, so I&#39;m looking for a C++17 solution"}], "answers": [{"comments": [{"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "edited": false, "score": 0, "creation_date": 1534357550, "post_id": 51861767, "comment_id": 90680861, "body": "this is about what I was expecting, thanks for the confirmation. Also, the sample 3 way comparison you provided is great, good note about how the first example is potentially two comparisons each"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1566878953, "post_id": 51861767, "comment_id": 101783327, "body": "It&#39;s <code>compare_three_way</code> now, though cppreference ain&#39;t update yet"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 8, "last_activity_date": 1534346914, "creation_date": 1534346914, "answer_id": 51861767, "question_id": 51861467, "link": "https://stackoverflow.com/questions/51861467/is-there-a-three-way-comparison-for-stl-containers-in-c17/51861767#51861767", "title": "Is there a three way comparison for stl containers in c++17", "body": "<blockquote>\n  <p>Is there a standard function that allows three way comparison of stl containers</p>\n</blockquote>\n\n<p>No. C++20 will add <a href=\"https://en.cppreference.com/w/cpp/algorithm/lexicographical_compare_3way\" rel=\"noreferrer\"><code>std::lexicographical_compare_3way</code></a> which has a dependency on <code>operator&lt;=&gt;</code> and all of the other things it brought with it.</p>\n\n<p>Until then, it's fairly straightforward to implement an algorithm that does this, by just slightly modifying what <a href=\"https://en.cppreference.com/w/cpp/algorithm/lexicographical_compare\" rel=\"noreferrer\"><code>std::lexicographical_compare</code></a> does:</p>\n\n<pre><code>template&lt;class InputIt1, class InputIt2&gt;\nint compare_3way(InputIt1 first1, InputIt1 last1,\n                 InputIt2 first2, InputIt2 last2)\n{\n    for ( ; (first1 != last1) &amp;&amp; (first2 != last2); ++first1, (void) ++first2 ) {\n        if (*first1 &lt; *first2) return -1;\n        if (*first2 &lt; *first1) return 1;\n    }\n\n    if (first1 == last1) {\n        return (first2 == last2) ? 0 : -1;\n    } else {\n        return 1;\n    }\n}\n</code></pre>\n\n<p>This still potentially does two comparisons per element. So an alternative to this simplistic implementation would be to pass another template parameter that is itself a 3-way comparison function that returns an <code>int</code>, so that the body of the loop would be:</p>\n\n<pre><code>int c = compare3way(*first1, *first2);\nif (c != 0) {\n    return c;\n}\n</code></pre>\n\n<p>Where a default implementation could fallback to just:</p>\n\n<pre><code>struct Compare3way {\n    template &lt;typename T, typename U&gt;\n    int operator()(T const&amp; lhs, U const&amp; rhs) const {\n        if (lhs &lt; rhs) return -1;\n        if (rhs &lt; lhs) return 1;\n        return 0;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 51861767, "answer_count": 1, "score": 2, "last_activity_date": 1534354618, "creation_date": 1534345879, "question_id": 51861467, "link": "https://stackoverflow.com/questions/51861467/is-there-a-three-way-comparison-for-stl-containers-in-c17", "title": "Is there a three way comparison for stl containers in c++17", "body": "<p>Is there a standard function that allows three way comparison of stl containers</p>\n\n<p>eg</p>\n\n<pre><code>cmp({1,2},{1,3}) &lt; 0\ncmp({1,2},{1,2}) == 0\n</code></pre>\n\n<p>I would like to avoid doing two comparisons on some potentially large containers when one will do, and I'd rather use a standard function than roll my own if there's something standard. I didn't see any on the cppreference page for stl containers, but I'm hoping there's something.</p>\n"}, {"tags": ["c++", "constants"], "comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 3, "creation_date": 1534346017, "post_id": 51861450, "comment_id": 90675185, "body": "It is essentially a compiler rule, nevertheless for static storage duration and other corner case, const variables can be stored in memory region write protected by the os."}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 1, "creation_date": 1534346357, "post_id": 51861450, "comment_id": 90675366, "body": "I would think that this isn&#39;t implemented at the OS level- in that case how would <a href=\"https://en.cppreference.com/w/cpp/language/const_cast\" rel=\"nofollow noreferrer\">const_cast</a> work?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 3, "creation_date": 1534346419, "post_id": 51861450, "comment_id": 90675395, "body": "@BenJones const_cast is undefined behaviour if you use it to modify const data. So it&#39;s perfectly possible for a compiler to place some const data in a read only location"}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1534346658, "post_id": 51861450, "comment_id": 90675547, "body": "Ah okay that makes sense @john"}, {"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1534346812, "post_id": 51861450, "comment_id": 90675634, "body": "The <code>const</code> does not prevent a variable from being changed (consider the <code>const_cast</code> or other cast operator). It only means that such a change is undefined behavior."}, {"owner": {"reputation": 494, "user_id": 10101628, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qY_xz-qOEH8/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pmjMTRcTRhL3Ul50BTwymaStfIkA/mo/photo.jpg?sz=128", "display_name": "Ely Fialkoff", "link": "https://stackoverflow.com/users/10101628/ely-fialkoff"}, "edited": false, "score": 0, "creation_date": 1534347267, "post_id": 51861450, "comment_id": 90675912, "body": "If you are facing similar questions &quot;what does this keyword do?&quot; you may benefit from <a href=\"https://www.youtube.com/user/TheChernoProject\" rel=\"nofollow noreferrer\">The Cherno Project</a> on Youtube, he provides high quality videos with great examples and he explains everything really well."}], "answers": [{"tags": [], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "is_accepted": false, "score": 4, "last_activity_date": 1534347291, "last_edit_date": 1534347291, "creation_date": 1534346477, "answer_id": 51861647, "question_id": 51861450, "link": "https://stackoverflow.com/questions/51861450/how-does-the-const-keyword-work/51861647#51861647", "title": "How does the &#39;const&#39; keyword work?", "body": "<p>The compiler will check the semantics of your code and will not compile if a <code>const</code> violation has been detected. No runtime analysis will be done. </p>\n\n<p>The compiler has some freedom about what has to be done in this case. Please refer to <a href=\"https://stackoverflow.com/questions/27466642/what-kind-of-optimization-does-const-offer-in-c-c-if-any\">this</a> post. The compiler may optimise the variable completely away. <a href=\"https://godbolt.org/g/GDJ6AM\" rel=\"nofollow noreferrer\">https://godbolt.org/g/GDJ6AM</a></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534347915, "post_id": 51861721, "comment_id": 90676249, "body": "&quot;const int DoThing(); returns a constant integer&quot; - this <code>const</code> is quite useless though, since the caller can always store the return value into a non-const and change that."}, {"owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534348002, "post_id": 51861721, "comment_id": 90676303, "body": "Correct, you can also const_cast too. Const&#39;s are just programmer notices more than hard language rules. pointers to how you should/shouldn&#39;t be using data and functions that you don&#39;t understand the intricacies of"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1534348467, "post_id": 51861721, "comment_id": 90676571, "body": "<code>const_cast</code> has strict rules about when it is valid and when it is undefined behaviour though. Adding <code>const</code> to a return value like this is just silly."}], "tags": [], "owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "is_accepted": false, "score": 2, "last_activity_date": 1534346742, "creation_date": 1534346742, "answer_id": 51861721, "question_id": 51861450, "link": "https://stackoverflow.com/questions/51861450/how-does-the-const-keyword-work/51861721#51861721", "title": "How does the &#39;const&#39; keyword work?", "body": "<p>It's purely compiler based. There are a few types of consts I can recall</p>\n\n<p><code>const int x = 5</code> creates an integer that cannot be changed</p>\n\n<p><code>const int DoThing();</code> returns a constant integer</p>\n\n<p><code>void MyClass::GetSomething() const;</code> guarantees that the function GetSomething will not change any member data of it's class</p>\n\n<p><code>int const *</code> creates a pointer to a regular int. The int's value can change but the pointer can not.</p>\n\n<p>And if you want to stare into the eyes of the devil</p>\n\n<p><code>const int const * MyClass:DoThing(const char * const) const;</code></p>\n"}, {"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 4, "last_activity_date": 1534351175, "last_edit_date": 1534351175, "creation_date": 1534347239, "answer_id": 51861850, "question_id": 51861450, "link": "https://stackoverflow.com/questions/51861450/how-does-the-const-keyword-work/51861850#51861850", "title": "How does the &#39;const&#39; keyword work?", "body": "<blockquote>\n  <p>But how is this actually being implemented?</p>\n</blockquote>\n\n<p>The language specification leaves this to the discretion of the implementation, as long as the compiler ensures, that the immutability semantics enforces by this are not violated by the program source code (i.e. assignment to a const object gives a compilation error and discarding a const specifier yields implementation defined behavior).</p>\n\n<p>The standard does not require runtime checks. However if an implementation can do/enforce runtime checks, it's perfectly legal to have them.</p>\n\n<p>For example global/static scope const values may be placed in a read-only memory region, like say, ROM in a microcontroller, or pages mapped read-only in an OS with virtual memory. Most executable formats specify a special section for read-only data (like e.g. <code>.rodata</code> in ELF), which will mapped read-only, and attempting to modify the contents inside that memory region will be caught by the operating system and result in a program exception.</p>\n"}], "owner": {"reputation": 605, "user_id": 7128840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdNYI.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/7128840/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 1, "accepted_answer_id": 51861850, "answer_count": 3, "score": 4, "last_activity_date": 1534414388, "creation_date": 1534345805, "last_edit_date": 1534352091, "question_id": 51861450, "link": "https://stackoverflow.com/questions/51861450/how-does-the-const-keyword-work", "title": "How does the &#39;const&#39; keyword work?", "body": "<p>Using <code>const</code> prevents a variable from being changed. Easy enough. </p>\n\n<pre><code>const int x = 5;\n\nx = 6; //not allowed!\n</code></pre>\n\n<p>But how is this actually being implemented? </p>\n\n<p>Is it just a compiler rule? Or is there something happening at the machine code level that distinguishes between const and non-const variables?</p>\n\n<p>edit: my question is distinct from <a href=\"https://stackoverflow.com/questions/7893220/how-is-const-implemented\">this</a> since that question was only asking about how the compiler keeps track of what is <code>const</code> and what isn't. My question is not this. My question is about the actual machine-code-level meaning of const, if there is one (seems like it might just be a compiler hint). At any rate, just take a look at how the answers to my question and the answers to the linked question are <strong>different.</strong> That should give you a hint that this isn't a duplicate.</p>\n\n<p>edit: The 'duplicate' question about accessing members in a derived class is not duplicate. Different question, different answer. </p>\n"}, {"tags": ["c++", "qt", "spi", "imx6"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1534345532, "post_id": 51861274, "comment_id": 90674875, "body": "&quot;It shows message error.&quot; What error, exactly?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534345912, "post_id": 51861274, "comment_id": 90675114, "body": "Possibly the evil casts <code>(unsigned long)data</code> could be the culprit. It is non-portable code. <code>__u64</code> is expected and a pointer is not necessarily representable as <code>unsigned long</code>.  Use <code>__u64</code> or <code>uint64_t</code> instead. In addition, I suppose the compiler may not realize that the contents of those buffers have been updated unless you voltatile-qualify them."}, {"owner": {"reputation": 11, "user_id": 6046702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GEzmfmHQspk/AAAAAAAAAAI/AAAAAAAAAFM/ISp5qjR7XpY/photo.jpg?sz=128", "display_name": "Emmanuel ", "link": "https://stackoverflow.com/users/6046702/emmanuel"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534347293, "post_id": 51861274, "comment_id": 90675934, "body": "Thank you for your help. The error message is: &quot;can&#39;t send SPI message: Invalid argument&quot;. I&#39;ve changed (unsigned long) by __u64 as you said, but I&#39;ve got the same error. When youy said that I need to volatile-qualify, what do you mean exactly? I understand that I need to put (volatile __u64) Is that correct? Thank you very much in advance!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1534400692, "post_id": 51861274, "comment_id": 90692902, "body": "That&#39;s sounds like an application output. Simply place a breakpoint at the line and examine all variables involved?"}, {"owner": {"reputation": 11, "user_id": 6046702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GEzmfmHQspk/AAAAAAAAAAI/AAAAAAAAAFM/ISp5qjR7XpY/photo.jpg?sz=128", "display_name": "Emmanuel ", "link": "https://stackoverflow.com/users/6046702/emmanuel"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536591161, "post_id": 51861274, "comment_id": 91468426, "body": "I could resolve It adding memset(&amp;tr, 0, sizeof(tr)); after spi_ioc_transfer tr;"}], "owner": {"reputation": 11, "user_id": 6046702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GEzmfmHQspk/AAAAAAAAAAI/AAAAAAAAAFM/ISp5qjR7XpY/photo.jpg?sz=128", "display_name": "Emmanuel ", "link": "https://stackoverflow.com/users/6046702/emmanuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534345477, "creation_date": 1534345298, "last_edit_date": 1534345477, "question_id": 51861274, "link": "https://stackoverflow.com/questions/51861274/cant-send-spi-message-in-imx6-with-qt", "title": "Can&#39;t send spi message in imx6 with qt", "body": "<p>Hello I am devolping a Qt app for a imx6 freescale microprocessor. I am using qtcreator 4.2.1. \nI need to use the SPI module of imx6. At firs I build a 3.14 kernel version and I made a program bassed of spidev_test example. My program is:</p>\n\n<p>First SPI configuration:</p>\n\n<pre><code>int ret = 0;\ndevice = \"/dev/spidev0.0\";\nbits = 8;\nspeed = 4500000;\nmode = 0;\ndelay = 0;\n\nfd = open(device, O_RDWR);\nif (fd &lt; 0){\n    pabort(\"can't open device\");\n}\nelse{\n    qDebug(\"Open device\");\n}\n\n/*\n * spi mode\n */\nret = ioctl(fd, SPI_IOC_WR_MODE, &amp;mode);\nif (ret == -1){\n    pabort(\"can't set spi mode\");\n}\n\nret = ioctl(fd, SPI_IOC_RD_MODE, &amp;mode);\nif (ret == -1){\n    pabort(\"can't get spi mode\");\n}\n/*\n * bits per word\n */\nret = ioctl(fd, SPI_IOC_WR_BITS_PER_WORD, &amp;bits);\nif (ret == -1){\n    pabort(\"can't set bits per word\");\n}\n\nret = ioctl(fd, SPI_IOC_RD_BITS_PER_WORD, &amp;bits);\nif (ret == -1){\n    pabort(\"can't get bits per word\");\n}\n/*\n * max speed hz\n */\nret = ioctl(fd, SPI_IOC_WR_MAX_SPEED_HZ, &amp;speed);\nif (ret == -1){\n    pabort(\"can't set max speed hz\");\n}\nret = ioctl(fd, SPI_IOC_RD_MAX_SPEED_HZ, &amp;speed);\nif (ret == -1){\n    pabort(\"can't get max speed hz\");\n}\nqDebug(\"spi mode: %d\\n\", mode);\nqDebug(\"bits per word: %d\\n\", bits);\nqDebug(\"max speed: %d Hz (%d KHz)\\n\", speed, speed/1000);\n</code></pre>\n\n<p>Then the transfer function:</p>\n\n<p>void SpiCom::transfer(int fd, unsigned char word){</p>\n\n<pre><code>int ret;\nuint8_t rx[] = {0, };\n\nspi_ioc_transfer tr;\nunsigned char data[] = {word};\ntr.tx_buf = (unsigned long)data;\ntr.rx_buf = (unsigned long)rx;\ntr.len = 1;\ntr.delay_usecs = delay;\ntr.speed_hz = speed;\ntr.bits_per_word = bits;\n\nret = ioctl(fd, SPI_IOC_MESSAGE(1), &amp;tr);\nif (ret &lt; 1)\n    pabort(\"can't send spi message\");\n\ndataReaded = (unsigned char)rx[0];\n</code></pre>\n\n<p>}</p>\n\n<p>With 3.14 version kernel my program works well but I had to update to a 4.9 kernel version and then my program doesn't work. When I want to transfer data always show \"can't send spi message\" message error. \nIf I compile this part of program with gcc compiler works but when I use qt compiler and execute the app It shows message error.\nI am searching for everywhere but I couldn't find nothing. \nIf someone can help me.</p>\n"}, {"tags": ["c++", "macos", "opencv", "homebrew"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1534343743, "post_id": 51860697, "comment_id": 90673819, "body": "You need to add the dependent libraries into your application package."}, {"owner": {"reputation": 11, "user_id": 5118094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4423e26386beb88a5983fa571da72839?s=128&d=identicon&r=PG&f=1", "display_name": "ET3D", "link": "https://stackoverflow.com/users/5118094/et3d"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1534343750, "post_id": 51860697, "comment_id": 90673826, "body": "(It&#39;s probably a dynamic vs. static linking issue, so questions are: can I get static versions of the libs through homebrew, and if not, can I just put the dylibs from OpenCV alongside the executable, and how do I know which ones I need?)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1534343846, "post_id": 51860697, "comment_id": 90673891, "body": "You can certainly build static versions of OpenCV. I use CMake and Hunter to do this as it takes a lot of the pain away: <a href=\"https://github.com/ruslo/hunter\" rel=\"nofollow noreferrer\">github.com/ruslo/hunter</a>"}, {"owner": {"reputation": 11, "user_id": 5118094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4423e26386beb88a5983fa571da72839?s=128&d=identicon&r=PG&f=1", "display_name": "ET3D", "link": "https://stackoverflow.com/users/5118094/et3d"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1534344362, "post_id": 51860697, "comment_id": 90674198, "body": "Thanks, Richard. Hunter sounds interesting, though it also sounds like something that&#39;d take a bit of reading to get working. Any quick tips (or code) to get and make static OpenCV with it?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1534346342, "post_id": 51860697, "comment_id": 90675360, "body": "here&#39;s a sandbox I was playing in with my son - it shows basic use of hunter and polly (toolchains).  You can browse available packages here: <a href=\"https://github.com/hunter-packages\" rel=\"nofollow noreferrer\">github.com/hunter-packages</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11536746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wSelArTQ3DE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOyrFpug5bdYlwAjubKSUstasrJQ/mo/photo.jpg?sz=128", "display_name": "Jae Man Park", "link": "https://stackoverflow.com/users/11536746/jae-man-park"}, "is_accepted": false, "score": 0, "last_activity_date": 1558489101, "creation_date": 1558489101, "answer_id": 56248236, "question_id": 51860697, "link": "https://stackoverflow.com/questions/51860697/homebrew-os-x-opencv-looking-for-dylib-when-running-on-another-mac/56248236#56248236", "title": "Homebrew OS X OpenCV - looking for dylib when running on another Mac", "body": "<p>I faced same issue, but I solved it. homebrew installed latest opencv and dependencies. openexr and ilmbase also installed latest version. but opencv.jar refered specific version of library.(ex libIex-2_2.23.dylib)\nSo, you'd install ilmbase version 2.2.X. and than solve library issue.</p>\n\n<p><a href=\"https://github.com/Homebrew/homebrew-core/blob/master/Formula/ilmbase.rb\" rel=\"nofollow noreferrer\">https://github.com/Homebrew/homebrew-core/blob/master/Formula/ilmbase.rb</a></p>\n\n<p>This link is ilmbase install Formula. You can ckeckout v.2.2 Formula commit.\nAnd than uninstall &amp; re-install ilmbase v.2.2.</p>\n"}], "owner": {"reputation": 11, "user_id": 5118094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4423e26386beb88a5983fa571da72839?s=128&d=identicon&r=PG&f=1", "display_name": "ET3D", "link": "https://stackoverflow.com/users/5118094/et3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 540, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558489101, "creation_date": 1534343404, "question_id": 51860697, "link": "https://stackoverflow.com/questions/51860697/homebrew-os-x-opencv-looking-for-dylib-when-running-on-another-mac", "title": "Homebrew OS X OpenCV - looking for dylib when running on another Mac", "body": "<p>I have a cross platform (Windows + Mac) application, built with QT and C++ libraries, which uses OpenCV. I had previously used an OpenCV version downloaded and compiled on the Mac, but decided to try to use the homebrew version to simplify installation on dev machines.</p>\n\n<p>I did <code>brew install opencv --with-contrib</code> and <code>brew link opencv</code>, and managed to get the program to link and run with the libraries from /usr/local/lib.</p>\n\n<p>Problem is, when I install it on another Mac, the program crashes when I try to run it, saying: <code>Library not loaded: /usr/local/Cellar/ilmbase/2.2.1/lib/libIex-2_2.23.dylib</code>.</p>\n\n<p>I'm not sure what to do. I'm not a Mac expert, and certainly no Homebrew expert. Should I go back to compiling OpenCV myself, or can this be solved?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "unit-testing", "googletest"], "comments": [{"owner": {"reputation": 1250, "user_id": 5190087, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/lMreJ.jpg?s=128&g=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5190087/swapnil"}, "edited": false, "score": 1, "creation_date": 1534347305, "post_id": 51860690, "comment_id": 90675943, "body": "What you mean by &quot;I can&#39;t runt it correctly&quot;? add your <code>SetScale</code> method."}, {"owner": {"reputation": 1, "user_id": 9360228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224481f7bcc51409f337870ab16b972c?s=128&d=identicon&r=PG&f=1", "display_name": "agatte", "link": "https://stackoverflow.com/users/9360228/agatte"}, "reply_to_user": {"reputation": 1250, "user_id": 5190087, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/lMreJ.jpg?s=128&g=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5190087/swapnil"}, "edited": false, "score": 0, "creation_date": 1534348271, "post_id": 51860690, "comment_id": 90676470, "body": "Ah I can run it but it didnt call"}, {"owner": {"reputation": 1250, "user_id": 5190087, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/lMreJ.jpg?s=128&g=1", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5190087/swapnil"}, "edited": false, "score": 0, "creation_date": 1534349550, "post_id": 51860690, "comment_id": 90677134, "body": "With the information provided, it looks like your expect call is wrong. You are calling SetScale method from your test and expecting that call to RunSetExposureGain. Which is not happening it seems."}], "owner": {"reputation": 1, "user_id": 9360228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/224481f7bcc51409f337870ab16b972c?s=128&d=identicon&r=PG&f=1", "display_name": "agatte", "link": "https://stackoverflow.com/users/9360228/agatte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534348335, "creation_date": 1534343382, "last_edit_date": 1534348335, "question_id": 51860690, "link": "https://stackoverflow.com/questions/51860690/google-unit-test-expects-call-of-the-method-from-exposer", "title": "Google unit test expects call of the method from exposer", "body": "<p>I am trying to call <code>EXPECT_CALL</code> of the protected method of the current call. I have created an exposer of this method. Then I have added a method from the exposer to the mock.</p>\n\n<pre><code>TEST_F(ExposureGainController_Test, SetScale_call_SetExposureGain)\n{\n    TEST_DESCRIPTION(\"Check logic behind SetScale and auto call of SetExposureGain. \");\n    ExposureGainControllerExposer c(camMock, scaleFunctionMock,\n        std::unique_ptr&lt;IMicroscopeOpticsParameters_ImageBrightness_Model&gt;(new ImageBrightness_Model_Mock(0.5)));\n    EXPECT_CALL(*camMock, RunSetExposureGain()).Times(1);\n    c.SetScale(5.0);\n}\n</code></pre>\n\n<p>In Exposer </p>\n\n<pre><code>void RunSetExposureGain()\n{ \n       SetExposureGain();\n}\n</code></pre>\n\n<p>// SetScale Function looks like this :</p>\n\n<pre><code>void ExposureGainController::SetScale(double scale)\n{\n    if (m_scale != scale)\n    {\n        m_scale = scale;\n        m_gainInDb = ScaleToGainInDb(m_scale);\n        UpdateResidualScale();\n\n        SetExposureGain();\n    }   \n}\n</code></pre>\n\n<p>I am trying to execute <code>EXPECT_CALL</code>, but I can`t run it correctly.</p>\n\n<p>What I am doing wrong?</p>\n"}, {"tags": ["c++", "dll", "visual-studio-2013"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1534343078, "post_id": 51860525, "comment_id": 90673413, "body": "Where is &quot;CalculateGlassModel.h&quot; ? Look at the include path for release and compare it to the debug settings?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 6, "creation_date": 1534343087, "post_id": 51860525, "comment_id": 90673422, "body": "A standard mistake is making project setting changes in the Debug configuration but forgetting to make them as well in the Release configuration.  Like the C/C++ &gt; General &gt; Additional Include Directories setting.  Maybe some more, just use the combobox at the upper left to switch back-and-forth."}, {"owner": {"reputation": 165, "user_id": 7371561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G5PCH.jpg?s=128&g=1", "display_name": "Connor Mote", "link": "https://stackoverflow.com/users/7371561/connor-mote"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1534343564, "post_id": 51860525, "comment_id": 90673708, "body": "@HansPassant That was it, thanks!"}], "owner": {"reputation": 165, "user_id": 7371561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G5PCH.jpg?s=128&g=1", "display_name": "Connor Mote", "link": "https://stackoverflow.com/users/7371561/connor-mote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534342827, "creation_date": 1534342827, "question_id": 51860525, "link": "https://stackoverflow.com/questions/51860525/program-cant-find-dll-header-files-after-switching-to-release", "title": "Program can&#39;t find DLL header files after switching to release", "body": "<p>After switching to release mode from debug mode (where everything works fine) I'm getting these errors:</p>\n\n<pre><code>Error   50  error C1083: Cannot open include file: 'CalculateGlassModel.h': No such file or directory   C:\\Users\\h6565169\\Documents\\anotherTPS2\\G2GsiBridge\\Development\\Gsi\\Gsi.cpp 10  1   Gsi\n51  IntelliSense: cannot open source file \"CalculateGlassModel.h\"   c:\\Users\\h6565169\\Documents\\anotherTPS2\\G2GsiBridge\\Development\\Gsi\\Gsi.cpp 10  1   Gsi\n52  IntelliSense: cannot open source file \"nlopt.h\" c:\\Users\\h6565169\\Documents\\anotherTPS2\\G2GsiBridge\\Development\\Gsi\\Gsi.cpp 11  1   Gsi\n53  IntelliSense: name followed by '::' must be a class or namespace name   c:\\Users\\h6565169\\Documents\\anotherTPS2\\G2GsiBridge\\Development\\Gsi\\Gsi.cpp 88  2   Gsi\n54  IntelliSense: expected a ';'    c:\\Users\\h6565169\\Documents\\anotherTPS2\\G2GsiBridge\\Development\\Gsi\\Gsi.cpp 88  27  Gsi\n55  IntelliSense: identifier \"gsi\" is undefined c:\\Users\\h6565169\\Documents\\anotherTPS2\\G2GsiBridge\\Development\\Gsi\\Gsi.cpp 89  17  Gsi\n</code></pre>\n\n<p>I am working in VS 2013. The code generation is set to /MD for all my dll's. The platform toolset is Visual Studio 2013 (v120). </p>\n\n<p>Any ideas on what might be causing this? </p>\n"}, {"tags": ["c++", "qt", "qtcpsocket"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10229594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a3c5c35502c3607d301ed97af8610e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Parker", "link": "https://stackoverflow.com/users/10229594/m-parker"}, "edited": false, "score": 0, "creation_date": 1534344594, "post_id": 51860348, "comment_id": 90674325, "body": "I&#39;m trying to mimic something that is client-server inside of the test, and parsing data into and out of the socket is the real point of it. The eventual destination is two separate processes, but I was hoping I could test the parsing inside of one."}, {"owner": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "edited": false, "score": 1, "creation_date": 1534345815, "post_id": 51860348, "comment_id": 90675065, "body": "+1 for mentioning signal/slots, something like this <code>connect(qserv, SIGNAL(newConnection()), this, SLOT(acceptConnection()));</code> then in the <code>acceptConnection() { qtcpsocket2 = qserv-&gt;nextPendingConnection()</code>"}, {"owner": {"reputation": 3, "user_id": 10229594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a3c5c35502c3607d301ed97af8610e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Parker", "link": "https://stackoverflow.com/users/10229594/m-parker"}, "edited": false, "score": 0, "creation_date": 1535031610, "post_id": 51860348, "comment_id": 90923863, "body": "Thank you guys for helping me increase my understanding here. I eventually had to take a different route and remove the whole socketing thing entirely."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1534342164, "creation_date": 1534342164, "answer_id": 51860348, "question_id": 51860258, "link": "https://stackoverflow.com/questions/51860258/qtcpsocket-to-qtcpsocket-in-same-object/51860348#51860348", "title": "QTcpSocket to QTcpSocket in same object", "body": "<p>The problem with this is that the event polling loop of the application will not run, so no events will be handled and your function calls will simply not work without it.</p>\n\n<p>In short, the <code>waitForConnected()</code> call will wait for an event that never happens.</p>\n\n<p>The natural solution with Qt is of course to use signals and slots, and let the normal application event loop run.</p>\n\n<hr>\n\n<p>On a slightly related note: If you want internal communication within the same process consider something other than (heavy and complex) TCP sockets. Simple message queues? Anonymous pipes? Plain strings or arrays?</p>\n"}], "owner": {"reputation": 3, "user_id": 10229594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a3c5c35502c3607d301ed97af8610e?s=128&d=identicon&r=PG&f=1", "display_name": "M. Parker", "link": "https://stackoverflow.com/users/10229594/m-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 51860348, "answer_count": 1, "score": 0, "last_activity_date": 1534342164, "creation_date": 1534341843, "question_id": 51860258, "link": "https://stackoverflow.com/questions/51860258/qtcpsocket-to-qtcpsocket-in-same-object", "title": "QTcpSocket to QTcpSocket in same object", "body": "<p>I am attempting to fake a transfer between two QTcpSockets that happen to be in the same class (which is a googletest fixture). The focus of this is to see if I can send multiple messages between the two and properly extract them again. However, it seems that the two sockets won't connect. Most of the posts I've seen that relate to this don't come up with a working answer, and being as this is definitely not the intended means of use, I'm not sure that there is a simple one.</p>\n\n<p>What I have for setting up the connection:</p>\n\n<pre><code>class TTest : public ::testing::Test, public QObject\n{\n    //Q_OBJECT\nprotected:\n    QTcpServer qserv;\n    QTcpSocket qtcpsock1; //send\n    QTcpSocket *qtcpsock2; //rcv\n\n    TTest() : qserv(this), qtcpsock1(this)\n    {\n\n        while (!qserv.isListening()) \n        {\n            qserv.listen();\n        }\n        qtcpsock1.connectToHost(QHostAddress::LocalHost, qserv.serverPort());\n        qtcpsock2 = qserv.nextPendingConnection();\n        qtcpsock1.waitForConnected();\n        if (!qtcpsock2) std::cout &lt;&lt; \"socket 2 not initialized\\n\";\n        qserv.close();\n    }\n}\n</code></pre>\n\n<p>Signals/slots currently not in use.</p>\n"}, {"tags": ["c++", "c++11", "casting", "variadic-templates", "void"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534340795, "post_id": 51859898, "comment_id": 90672078, "body": "Which C++ standard version do you use? If the latest (C++17) consider <a href=\"https://en.cppreference.com/w/cpp/language/attributes/maybe_unused\" rel=\"nofollow noreferrer\">the <code>maybe_unused</code> attribute</a>, or some compiler-specific equivalent."}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534340857, "post_id": 51859898, "comment_id": 90672119, "body": "Sorry forgot to mention c++11 @Someprogrammerdude"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1534341105, "post_id": 51859898, "comment_id": 90672255, "body": "<code>...rest</code> should be <code>rest...</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1534341239, "post_id": 51859898, "comment_id": 90672334, "body": "@NathanOliver my technique is: move the <code>...</code> around until the errors go away"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1534343186, "post_id": 51859898, "comment_id": 90673481, "body": "@eneski Also fix the errors ;)"}], "answers": [{"tags": [], "owner": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "is_accepted": true, "score": 8, "last_activity_date": 1534341279, "last_edit_date": 1534341279, "creation_date": 1534341033, "answer_id": 51860034, "question_id": 51859898, "link": "https://stackoverflow.com/questions/51859898/cast-variadic-template-type-to-void-expected-before/51860034#51860034", "title": "Cast variadic template type to void, expected &#39;)&#39; before", "body": "<p>You can have a <code>LOG_CHAT</code> for release with no parameter names, that will inhibit the warning.</p>\n\n<pre><code>void LOG_CHAT(Rest &amp;&amp; ...)\n</code></pre>\n"}], "owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 51860034, "answer_count": 1, "score": 5, "last_activity_date": 1534349316, "creation_date": 1534340555, "last_edit_date": 1592644375, "question_id": 51859898, "link": "https://stackoverflow.com/questions/51859898/cast-variadic-template-type-to-void-expected-before", "title": "Cast variadic template type to void, expected &#39;)&#39; before", "body": "<p>In my code, I use <em><strong>variadic template functions</strong></em> for the logging mechanism. If <code>DEBUG</code> macro is defined, a message is printed; if <code>DEBUG</code> is <strong>not</strong> defined, then it should print nothing.</p>\n<p>My code:</p>\n<pre><code>#ifdef DEBUG\n    inline void LOG_CHAT(){ }\n    \n    template&lt;typename First, typename ...Rest&gt;\n    void LOG_CHAT(First &amp;&amp; first, Rest &amp;&amp; ...rest){\n        std::cout &lt;&lt; std::forward&lt;First&gt;(first);\n        LOG_CHAT(std::forward&lt;Rest&gt;(rest)...);\n    }\n\n#else\n    \n    template&lt;typename ...Rest&gt;\n    void LOG_CHAT(Rest &amp;&amp; ...rest){ \n        (void)(rest...);\n    }\n\n#endif\n</code></pre>\n<p>I would leave the function definition empty, but I do not want to get <em>&quot;unused parameter&quot;</em> compiler warning. Therefore, parameter(s) are cast to void to get rid of the compiler warning. However, casting is causing another error that is reproduced below.</p>\n<blockquote>\n<p>error: expected ')' before 'rest' UNUSED(...rest);</p>\n<p>note: in definition of macro 'UNUSED' #define UNUSED(x) (void)(x)</p>\n</blockquote>\n<p>So, my main goal is getting rid of compiler warning, either by casting to <code>void</code> or using any other method. But I would be happier if I'd be able to cast it to <code>void</code>.</p>\n"}, {"tags": ["c++", "thread-safety", "boost-asio", "atomic"], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 6927447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3uOAJZ9sEhc/AAAAAAAAAAI/AAAAAAAAAAk/9I6e-0Bpa3s/photo.jpg?sz=128", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6927447/oliver"}, "edited": false, "score": 0, "creation_date": 1534354819, "post_id": 51862417, "comment_id": 90679543, "body": "Great.  Also, thanks for catching the bug in my code."}], "tags": [], "owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "is_accepted": true, "score": 2, "last_activity_date": 1534349470, "creation_date": 1534349470, "answer_id": 51862417, "question_id": 51859895, "link": "https://stackoverflow.com/questions/51859895/is-boostasioio-servicepost-atomic/51862417#51862417", "title": "Is boost::asio::io_service::post atomic?", "body": "<p><code>io_service::post</code> is thread_safe, and posting from different threads is just fine (one often needs to do it in a multithreaded asio environment).</p>\n\n<p>However your example has a bit of a race condition:</p>\n\n<p><code>io.run()</code> might complete, before the child threads have started running, and therefore before anything gets posted.\nIf you want to avoid that it needs to run() until a specific stop condition (e.g. signaled from a posted handler) is met. <code>io_service::work</code> can help with that too.</p>\n"}], "owner": {"reputation": 78, "user_id": 6927447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3uOAJZ9sEhc/AAAAAAAAAAI/AAAAAAAAAAk/9I6e-0Bpa3s/photo.jpg?sz=128", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6927447/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 51862417, "answer_count": 1, "score": 1, "last_activity_date": 1534418318, "creation_date": 1534340544, "last_edit_date": 1534418318, "question_id": 51859895, "link": "https://stackoverflow.com/questions/51859895/is-boostasioio-servicepost-atomic", "title": "Is boost::asio::io_service::post atomic?", "body": "<p>Given a <code>boost::asio::io_service io</code> is it safe to call <code>io.post(...)</code> on threads other than the thread that started <code>io.run()</code>?</p>\n\n<p>For example:</p>\n\n<pre><code>boost::asio::io_service io;\n\nvoid f()\n{\n    /* do something */\n    io.post(&amp;f);\n}\n\nvoid g()\n{\n    /* do something else */\n    io.post(&amp;g)\n }\n\nint main()\n{\n    std::thread t1(&amp;f);\n    std::thread t2(&amp;g);\n\n    io.run();\n\n    t1.join();\n    t2.join();\n\n    return 0;\n}\n</code></pre>\n\n<p>I assume that <code>io_service</code> uses some kind of internal data structure (e.g. a queue) and posting alters this data structure (e.g. pushing onto the queue).  My concern is that the data structure may or may not be thread-safe.</p>\n\n<p>I've searched around and haven't been able to find a straight answer to this question, although everything I've seen seems to indicate that <code>post()</code> is thread-safe (i.e. atomic).  Can someone please verify?</p>\n"}, {"tags": ["c++", "c++11", "recursion", "stdstring", "octal"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 5, "creation_date": 1534340542, "post_id": 51859782, "comment_id": 90671944, "body": "Just in case you didn&#39;t know this existed: <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string</code></a>. <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Don&#39;t abuse <code>using namespace std</code>. (i.e. just don&#39;t do it at all).</a>"}, {"owner": {"reputation": 2332, "user_id": 6370128, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bab55197dff82f919cd8e4ddbdd81d79?s=128&d=identicon&r=PG&f=1", "display_name": "sandthorn", "link": "https://stackoverflow.com/users/6370128/sandthorn"}, "edited": false, "score": 2, "creation_date": 1534340716, "post_id": 51859782, "comment_id": 90672040, "body": "Because you import all in <code>std</code> namespace and there is also <code>std::to_string(long)</code> so <code>to_string(dec % 8)</code> ambiguous here. Change into <code>::to_string(dec % 8)</code>, otherwise even better stop using so-yesterday idiom <code>using namespace std;</code> and call functions with <code>std::</code> prefix instead."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1534341003, "post_id": 51859782, "comment_id": 90672206, "body": "And why not just use <a href=\"https://en.cppreference.com/w/cpp/io/manip/hex\" rel=\"nofollow noreferrer\"><code>std::cout &lt;&lt; std::oct &lt;&lt; dec &lt;&lt; &#39;\\n&#39;;</code></a> ?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1534341487, "post_id": 51859782, "comment_id": 90672486, "body": "If you need the octal into a string:  <code>std::ostringstream s; s &lt;&lt; std::oct &lt;&lt; dec &lt;&lt; variable; std::string result (s.str());</code>"}, {"owner": {"reputation": 13, "user_id": 7303597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534a95bc60a9ba35e40817501c4a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Vasu Malhotra", "link": "https://stackoverflow.com/users/7303597/vasu-malhotra"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1534353174, "post_id": 51859782, "comment_id": 90678843, "body": "@WhozCraig My aim was to learn recursion by application. Though your method is definitely better."}, {"owner": {"reputation": 13, "user_id": 7303597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534a95bc60a9ba35e40817501c4a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Vasu Malhotra", "link": "https://stackoverflow.com/users/7303597/vasu-malhotra"}, "edited": false, "score": 0, "creation_date": 1534353363, "post_id": 51859782, "comment_id": 90678937, "body": "And yes I will avoid &#39;using namespace std;&#39; from now on! Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7303597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534a95bc60a9ba35e40817501c4a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Vasu Malhotra", "link": "https://stackoverflow.com/users/7303597/vasu-malhotra"}, "edited": false, "score": 0, "creation_date": 1534353413, "post_id": 51860984, "comment_id": 90678966, "body": "I was using std namespace to save some time in competitive programming. Will avoid it from now on!"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1534362263, "post_id": 51860984, "comment_id": 90682965, "body": "Instead, declare a macro <code>S</code> resolving to <code>std::</code> if it offends you that much?"}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 0, "last_activity_date": 1534351514, "last_edit_date": 1534351514, "creation_date": 1534344322, "answer_id": 51860984, "question_id": 51859782, "link": "https://stackoverflow.com/questions/51859782/decimal-to-octal-recursively-in-c-output-in-stdstring-format/51860984#51860984", "title": "Decimal to Octal recursively in C++. Output in std::string format", "body": "<p>Try to understand the error:  </p>\n\n<pre><code>Compiling failed with exitcode 1, compiler output:\nprog.cpp: In function 'std::__cxx11::string dec_2_oct(long int)':\nprog.cpp:21:50: error: call of overloaded 'to_string(long int)' is ambiguous\n     return dec_2_oct(dec / 8) + to_string(dec % 8);\n</code></pre>\n\n<p>The keywords in the error are <code>overloaded</code>, <code>ambiguous</code> and of course the function itself.\nWhen you understand the meanings of these words in C++ context, you will understand the reason for the error.</p>\n\n<p>Then you can take one of the following approaches:</p>\n\n<ol>\n<li>Change the name of your function from <code>to_string</code> to something like\n<code>my_to_string</code>. This is the naive approach. </li>\n<li>Avoid importing all the <code>std</code> namespace at global scope or even\nfunction scope and follow the usage of <code>std::function</code> from now on.</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 7303597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534a95bc60a9ba35e40817501c4a6739?s=128&d=identicon&r=PG&f=1", "display_name": "Vasu Malhotra", "link": "https://stackoverflow.com/users/7303597/vasu-malhotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 51860984, "answer_count": 1, "score": 1, "last_activity_date": 1534351514, "creation_date": 1534340098, "question_id": 51859782, "link": "https://stackoverflow.com/questions/51859782/decimal-to-octal-recursively-in-c-output-in-stdstring-format", "title": "Decimal to Octal recursively in C++. Output in std::string format", "body": "<p>I'm trying to decimal integers into Octal Strings recursively in C++. I have tried the following code with no success. The helper function to_string works good by itself. The problem seems to be in the recursive function call.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring to_string(long num)\n{\n    ostringstream os;\n    os &lt;&lt; num;\n    return os.str();\n\n}\n\nstring dec_2_oct(long dec)\n{\n    if (dec == 0)\n    {\n        string s = \"\";\n        return s;\n    }\n    return dec_2_oct(dec / 8) + to_string(dec % 8);\n}\n\nint main() {\n    long dec;\n    cin &gt;&gt; dec;\n    string s;\n    s = dec_2_oct(dec);\n    cout &lt;&lt; s;\n}\n</code></pre>\n\n<p>I'm getting pretty nasty looking errors.</p>\n\n<pre><code>Compiling failed with exitcode 1, compiler output:\nprog.cpp: In function 'std::__cxx11::string dec_2_oct(long int)':\nprog.cpp:21:50: error: call of overloaded 'to_string(long int)' is ambiguous\n     return dec_2_oct(dec / 8) + to_string(dec % 8);\n                                                  ^\nprog.cpp:6:8: note: candidate: std::__cxx11::string to_string(long int)\n string to_string(long num)\n        ^~~~~~~~~\nIn file included from /usr/include/c++/7/string:52:0,\n                 from /usr/include/c++/7/bits/locale_classes.h:40,\n                 from /usr/include/c++/7/bits/ios_base.h:41,\n                 from /usr/include/c++/7/ios:42,\n                 from /usr/include/c++/7/ostream:38,\n                 from /usr/include/c++/7/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/7/bits/basic_string.h:6264:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(long double)\n   to_string(long double __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6255:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(double)\n   to_string(double __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6246:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(float)\n   to_string(float __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6240:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(long long unsigned int)\n   to_string(unsigned long long __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6234:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(long long int)\n   to_string(long long __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6228:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(long unsigned int)\n   to_string(unsigned long __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6223:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(long int)\n   to_string(long __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6217:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(unsigned int)\n   to_string(unsigned __val)\n   ^~~~~~~~~\n/usr/include/c++/7/bits/basic_string.h:6212:3: note: candidate: std::__cxx11::string std::__cxx11::to_string(int)\n   to_string(int __val)\n   ^~~~~~~~~\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["c++", "opencv", "parallel-processing", "gpu", "matrix-multiplication"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1534340197, "post_id": 51859767, "comment_id": 90671738, "body": "You need to use a CUDA <a href=\"https://stackoverflow.com/questions/17842827/how-to-use-gpustream-in-opencv\">stream</a> for async operations, currently all your calls are blocking"}, {"owner": {"reputation": 11, "user_id": 10229175, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HJYAUjuTVB4/AAAAAAAAAAI/AAAAAAAAAA0/Q_NDNxkSh9w/photo.jpg?sz=128", "display_name": "\u5218\u5b9a\u5764", "link": "https://stackoverflow.com/users/10229175/%e5%88%98%e5%ae%9a%e5%9d%a4"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1534342119, "post_id": 51859767, "comment_id": 90672844, "body": "@EdChum Actually I have used CUDA stream for async operations as the code shown above. Is that right? Or I&#39;m using it wrong? Thank you for your guidance!"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1534342992, "post_id": 51859767, "comment_id": 90673358, "body": "You&#39;re supposed to <code>enque</code> on the stream, and then call <code>waitforcompletion</code> see related: <a href=\"https://stackoverflow.com/questions/17842827/how-to-use-gpustream-in-opencv\" title=\"how to use gpustream in opencv\">stackoverflow.com/questions/17842827/&hellip;</a>"}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1534742551, "post_id": 51859767, "comment_id": 90798487, "body": "@EdChum the SO thread is no longer valid. You dont have to enque the tasks to stream anymore in newer versions of OCV"}], "owner": {"reputation": 11, "user_id": 10229175, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HJYAUjuTVB4/AAAAAAAAAAI/AAAAAAAAAA0/Q_NDNxkSh9w/photo.jpg?sz=128", "display_name": "\u5218\u5b9a\u5764", "link": "https://stackoverflow.com/users/10229175/%e5%88%98%e5%ae%9a%e5%9d%a4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534734909, "creation_date": 1534340060, "question_id": 51859767, "link": "https://stackoverflow.com/questions/51859767/opencv-utilizes-multiple-matrix-multiply-on-gpu", "title": "OpenCV utilizes multiple matrix multiply on GPU", "body": "<p>I'm using OpenCV for an application in image processing. I'd like to accelerate a lot of (a great many times) matrix operations (matrices are fairly large) on GPU and want to avoid coding directly in CUDA C, if possible. OpenCV 3.4.2 has a number of GPU accelerated functions such as <code>cuda::multiply</code>. But it accelerates 'only one' matrix operation. So when I have lots of matrix operations, it will be time-consuming. </p>\n\n<p>My code is described below. With CPU parallel utilizing the GPU functions, the GPU usage is lower than 5%. So I wonder if there is any way to improve? Is there any method for calling GPU functions in GPU parallel? </p>\n\n<pre><code>cuda::Stream stream;\nconst int size        = 3427680;\nconst int iteration   =  649319;\n\ncv::Mat cpu_mat1 = cv::Mat(1, size, CV_32FC4, Scalar(1));\ncv::Mat cpu_mat2 = cv::Mat(1, size, CV_32FC4, Scalar(1));\ncv::Mat cpu_mat3 = cv::Mat::zeros(1, size, CV_32FC4);\n\ncv::cuda::GpuMat gpu_mat1;\ngpu_mat1.upload(cpu_mat1);\ncv::cuda::GpuMat gpu_mat2;\ngpu_mat2.upload(cpu_mat2);\ncv::cuda::GpuMat gpu_mat3;\ngpu_mat3.upload(cpu_mat3);\n\n#pragma omp parallel for\nfor(i=0;i&lt;iteration;i++)\n{\ncuda::multiply(gpu_mat1, gpu_mat2, gpu_mat3, 1.0, -1, stream);\ncuda::sum(gpu_mat3);\n}\n</code></pre>\n"}, {"tags": ["c++", "binary-search-tree", "std", "c++17", "stdmap"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1534339987, "post_id": 51859576, "comment_id": 90671606, "body": "The method was introduced as a wrapper for mass-splicing, not to take advantage of sorted nature of two containers. It makes no assumptions about comparators being in-sync with each other."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1534340121, "post_id": 51859576, "comment_id": 90671682, "body": "@AnT Yeah, but it could be easily solved by a promise that the comparators are in sync using tag dispatching for example."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534340176, "post_id": 51859576, "comment_id": 90671722, "body": "maybe there is a specialisation for the case both maps use the same comparater, but that wont change the fact that in general the complexity is worse"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534340395, "post_id": 51859576, "comment_id": 90671847, "body": "@user463035818 Comparators are generally considered stateful objects. Two comparators of the same type don&#39;t have to produce the same ordering."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1534340503, "post_id": 51859576, "comment_id": 90671921, "body": "@AnT yes didnt consider this. Can imagine it is difficult for stateful comparators to ensure a strict weak ordering"}], "answers": [{"comments": [{"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1534340265, "post_id": 51859783, "comment_id": 90671782, "body": "They could provide an overload for the case when the comparator types are the same. Anyway, that would be still possible that stateful comparators are in different state, regardless that their type is the same. Still, it could be easily solved by a promise that the comparators are in sync using tag dispatching for example, like <code>std::map::merge(map, comp_sync_tag)</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 1, "creation_date": 1534340380, "post_id": 51859783, "comment_id": 90671840, "body": "@plasmacel actually not sure anymore what your question is.... Can two maps be merged in linear time? Yes. Is <code>std::map::merge</code> linear? No."}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1534340947, "post_id": 51859783, "comment_id": 90672180, "body": "You answered the question. I&#39;m just saying that this function smells from weak design. It lacks some very useful features, just like <code>std::vector</code> lacks a <code>resize</code> function which doesn&#39;t initialize. Sometimes the incompleteness of <code>std</code> does really surprise me."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1534341083, "post_id": 51859783, "comment_id": 90672242, "body": "@plasmacel i could imagine that the reasoning was that if you have two maps of same type then merging them is almost trivial and there is no urgent need for introducing a method into the standard"}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1534341512, "post_id": 51859783, "comment_id": 90672502, "body": "Yeah, using <code>std::map::insert(hint, value)</code>, where <code>hint</code> is the <code>end()</code> iterator of the other map performs in-order insertion in constant time - using this fact one can perform a merge (by inserting the items of the other map one by one) in linear time."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 2, "last_activity_date": 1534342014, "last_edit_date": 1534342014, "creation_date": 1534340100, "answer_id": 51859783, "question_id": 51859576, "link": "https://stackoverflow.com/questions/51859576/computational-time-complexity-of-stdmapmerge/51859783#51859783", "title": "Computational time complexity of std::map::merge", "body": "<blockquote>\n  <p>I would expect that std::map::merge takes advantage of the fact that\n  the elements of both std::maps are already sorted, so there is no need\n  to search the place of insertion for every single element [...]</p>\n</blockquote>\n\n<p>You are missing the fact that the map to be merged may be of a different type, ie it might use a different sorting:</p>\n\n<pre><code>template &lt;class C2&gt;\nvoid merge(std::map&lt;Key, T, C2, Allocator&gt;&amp; source); \n                            ^--- this is not necessarily the same as for the map you \n                                 are merging into\n</code></pre>\n\n<p>So actually the map to be merged has to be considered not sorted to get the worst case complexity.</p>\n"}, {"tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": false, "score": 1, "last_activity_date": 1534340730, "creation_date": 1534340730, "answer_id": 51859950, "question_id": 51859576, "link": "https://stackoverflow.com/questions/51859576/computational-time-complexity-of-stdmapmerge/51859950#51859950", "title": "Computational time complexity of std::map::merge", "body": "<p>Imagine a possible implementation of this method:</p>\n\n<pre><code>for (auto const&amp; iter : source)\n{\n   dest. insert( iter);\n}\n</code></pre>\n\n<p>So you iterate over the source map (complexity N), and insert each element into the destination map which has complexity log(dest.size()+N).<br>\nAs the other answer by user463035818 already pointed out, the order of the two maps is not necessarily the same, so you have to insert each element separately.<br>\nAnd finally, must tree sorting algorithms are built in a way that you traverse the tree from the root node down and do the balancing on the way down or when going back up again. It would be difficult to write an algorithm that traverses the tree in order, adds elements <strong>and</strong> balances the tree.</p>\n"}], "owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 51859783, "answer_count": 2, "score": 0, "last_activity_date": 1534342014, "creation_date": 1534339420, "last_edit_date": 1534339995, "question_id": 51859576, "link": "https://stackoverflow.com/questions/51859576/computational-time-complexity-of-stdmapmerge", "title": "Computational time complexity of std::map::merge", "body": "<p>C++17 introduces an <code>std::map::merge</code> function for merging an <code>std::map</code> into an another.</p>\n\n<p>Since <code>std::map</code> is an ordered associative container, more explicitly a <em>self-balancing binary search tree</em> (most frequently implemented as a Red-Black Tree or AVL Tree), I would expect that <code>std::map::merge</code> takes advantage of the fact that the elements of both <code>std::map</code>s are already sorted, so there is no need to search the place of insertion for every single element, i.e. the time complexity should be amortized linear <code>O(N)</code>.</p>\n\n<p>Interestingly,  <a href=\"https://en.cppreference.com/w/cpp/container/map/merge\" rel=\"nofollow noreferrer\">cppreference says</a> that the computational time complexity of <code>std::map::merge</code> is logarithmic <code>O(N*log(N))</code>:</p>\n\n<blockquote>\n  <p><strong>Complexity</strong> N*log(size()+N)), where N is source.size()</p>\n</blockquote>\n\n<p>Is that correct?</p>\n\n<p>In this case <code>std::map::merge</code> seems to be equivalent to <code>std::map::insert(iterator begin, iterator end)</code>, making <code>std::map::merge</code> completely superfluous.</p>\n\n<p>What is the actual truth about the time complexity of <code>std::map::merge</code>?</p>\n"}, {"tags": ["c++", "makefile", "compiler-errors"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534339426, "post_id": 51859537, "comment_id": 90671277, "body": "You build your C++ sources with C flags."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534339475, "post_id": 51859537, "comment_id": 90671311, "body": "And totally unrelated to your problem, but still relevant: <a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">What are the rules about using an underscore in a C++ identifier?</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1534339575, "post_id": 51859537, "comment_id": 90671373, "body": "And please copy-paste the full output of your run with <code>make</code>. Delete all object, executable and other temporary files, and run a clean <code>make</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1534339597, "post_id": 51859537, "comment_id": 90671385, "body": "Use <code>$(CXX)</code> to build and link C++ sources, <code>$(CC)</code> is for C."}, {"owner": {"reputation": 12335, "user_id": 999676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d79b593c2c65eba8f545e3f8cefcb0ba?s=128&d=identicon&r=PG", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/999676/jasmine"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1534339926, "post_id": 51859537, "comment_id": 90671571, "body": "@MaximEgorushkin I switched to <code>$(CXX)</code> and the errors persist."}, {"owner": {"reputation": 12335, "user_id": 999676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d79b593c2c65eba8f545e3f8cefcb0ba?s=128&d=identicon&r=PG", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/999676/jasmine"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534339942, "post_id": 51859537, "comment_id": 90671578, "body": "@Someprogrammerdude Thanks for the links, I&#39;ll read."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1534340411, "post_id": 51859537, "comment_id": 90671860, "body": "@Jason It will be a lot easier to see where the error is if you show us all the commands being run (that is, delete all object and exe files, run make and copy paste the output)"}, {"owner": {"reputation": 12335, "user_id": 999676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d79b593c2c65eba8f545e3f8cefcb0ba?s=128&d=identicon&r=PG", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/999676/jasmine"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1534341602, "post_id": 51859537, "comment_id": 90672553, "body": "@nos post updated with full output. Some classes referenced I omitted from this post."}], "answers": [{"comments": [{"owner": {"reputation": 12335, "user_id": 999676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d79b593c2c65eba8f545e3f8cefcb0ba?s=128&d=identicon&r=PG", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/999676/jasmine"}, "edited": false, "score": 0, "creation_date": 1534361738, "post_id": 51860260, "comment_id": 90682751, "body": "I fixed those and still the same errors. I updated the Makefile above to reflect"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 12335, "user_id": 999676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d79b593c2c65eba8f545e3f8cefcb0ba?s=128&d=identicon&r=PG", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/999676/jasmine"}, "edited": false, "score": 0, "creation_date": 1534363362, "post_id": 51860260, "comment_id": 90683419, "body": "@Jason But you forgot to update the output you get from building. And if you get the exact same output, then you&#39;re not editing with the <code>Makefile</code> you&#39;re using to build."}, {"owner": {"reputation": 12335, "user_id": 999676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d79b593c2c65eba8f545e3f8cefcb0ba?s=128&d=identicon&r=PG", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/999676/jasmine"}, "edited": false, "score": 0, "creation_date": 1534368570, "post_id": 51860260, "comment_id": 90685494, "body": "hmm, I am editing the makefile I am using (doing so from a command-line). I am getting the same output, but I&#39;ll update to show it is now using <code>clang++</code> and <code>-c</code>."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1534341853, "creation_date": 1534341853, "answer_id": 51860260, "question_id": 51859537, "link": "https://stackoverflow.com/questions/51859537/makefile-undefined-symbols-for-architecture-x86-64/51860260#51860260", "title": "Makefile: Undefined symbols for architecture x86_64", "body": "<p>To begin with, <code>clang</code> is the <strong><em>C</em></strong> frontend. While it can be used to compile C++ code, it will not add all header paths or linker libraries needed for C++. Use <code>clang++</code>.</p>\n\n<p>Secondly, the output you show is without any flags at all.</p>\n\n<p>Thirdly, and the reason for your linker error, is that you don't use the <code>-c</code> flag which is needed to create object files. Without the <code>-c</code> flag, you tell the <code>clang</code> frontend program to build and link an <strong>executable</strong> file named <code>scraper/main.o</code>.</p>\n"}], "owner": {"reputation": 12335, "user_id": 999676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d79b593c2c65eba8f545e3f8cefcb0ba?s=128&d=identicon&r=PG", "display_name": "Jasmine", "link": "https://stackoverflow.com/users/999676/jasmine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534368704, "creation_date": 1534339284, "last_edit_date": 1534368704, "question_id": 51859537, "link": "https://stackoverflow.com/questions/51859537/makefile-undefined-symbols-for-architecture-x86-64", "title": "Makefile: Undefined symbols for architecture x86_64", "body": "<p>I'm making my app more portable to run on other OS's. Works in XCode and Visual Studio. However, switching to Makefiles is causing me some problems.</p>\n\n<p>Error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:                                     \n\"AppObject::Instance()\", referenced from:                        \n  _main in main-329f6c.o                                                                                          \nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"AppObject.hpp\"\n\nAppObject* _appObject;\n\nint main()\n{\n    _appObject = AppObject::Instance();\n\n    return 0;\n}\n</code></pre>\n\n<p>AppObject.hpp</p>\n\n<pre><code>#ifndef  _APPOBJECT_HPP_\n#define  _APPOBJECT_HPP_\n\n#include &lt;iostream&gt;\n\nclass AppObject\n{\n    public:\n        static AppObject* Instance();\n        virtual ~AppObject() {}\n\n        void initInstance();\n\n    private:\n        AppObject();\n        AppObject(const AppObject&amp;);\n        AppObject&amp; operator= (const AppObject&amp;);\n        static AppObject* pinstance; \n};\n\n#endif // _APPOBJECT_HPP_\n</code></pre>\n\n<p>AppObject.cpp</p>\n\n<pre><code>#include \"AppObject.hpp\"\n\nAppObject* AppObject::pinstance = 0;\n\nAppObject::AppObject() {}\n\nAppObject* AppObject::Instance()\n{\n    if (pinstance == 0)\n    {\n        pinstance = new AppObject;\n        pinstance-&gt;initInstance();\n    }\n\n    return pinstance;\n}\n\nvoid AppObject::initInstance()\n{\n   .....\n}\n</code></pre>\n\n<p>This is paired down a bit but I am seeing some other warnings also of:</p>\n\n<pre><code>warning: in-class initialization of non-static data member is a C++11 extension\n</code></pre>\n\n<p>Can anyone help me understand my mistake and my this works in XCode and VS but not using make?</p>\n\n<p>Makefile</p>\n\n<pre><code>CXX=clang++\nCXXFLAGS=-g -std=c++11 -Wall -pedantic -c\n\nLDFLAGS=-L/usr/local/opt/sqlite/lib\nCPPFLAGS=-I/usr/local/opt/sqlite/include\n\nSOURCES=scraper/main.cpp scraper/AppObject.cpp scraper/SQLManager.cpp\n\nOBJECTS=$(SOURCES:.cpp=.o)\n\nEXECUTABLE=scraper\n\nall: $(SOURCES) $(EXECUTABLE)\n\n$(EXECUTABLE): $(OBJECTS) \n    $(CXX) $(LDFLAGS) $(OBJECTS) -o $@\n\n.cpp.o:\n    $(CXX) $(CXXFLAGS) $&lt; -o $@\n</code></pre>\n\n<p>Full make output:</p>\n\n<pre><code>$ make\nclang  scraper/main.cpp -o scraper/main.o\nIn file included from scraper/main.cpp:3:\nIn file included from scraper/AppObject.hpp:6:\nscraper/SQLManager.hpp:44:30: warning: in-class initialization of non-    static data member is a C++11 extension\n  [-Wc++11-extensions]\n        bool _bDatabaseReady = false;\n                         ^\nscraper/SQLManager.hpp:46:29: warning: in-class initialization of non-    static data member is a C++11 extension\n  [-Wc++11-extensions]\n        std::string _dbFile = \"popcorn.db3\";\n                        ^\nscraper/SQLManager.hpp:47:29: warning: in-class initialization of non-    static data member is a C++11 extension\n  [-Wc++11-extensions]\n        std::string _dbName = \"popcorn\";\n                        ^\nscraper/SQLManager.hpp:49:24: warning: in-class initialization of non-    static data member is a C++11 extension\n      [-Wc++11-extensions]\n        int _dbVersion = 1; // increment this when database structure changes\n                   ^\nscraper/SQLManager.hpp:51:28: warning: in-class initialization of non-static data member is a C++11 extension\n      [-Wc++11-extensions]\n        int _dbVersionType = 0; // 0 = normal, 1 = free, 2 = lite\n                       ^\n5 warnings generated.\nUndefined symbols for architecture x86_64:\n  \"AppObject::Instance()\", referenced from:\n      _main in main-4a5276.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see     invocation)\nmake: *** [scraper/main.o] Error 1\n</code></pre>\n\n<p>Updated <code>make</code> output after taking advice from replies:</p>\n\n<pre><code>$ make\nclang++  scraper/main.cpp -o scraper/main.o\nIn file included from scraper/main.cpp:3:\nIn file included from scraper/AppObject.hpp:6:\nscraper/SQLManager.hpp:44:30: warning: in-class initialization of non-    static data member is a C++11 extension [-Wc++11-extensions]\n        bool _bDatabaseReady = false;\n                         ^\nscraper/SQLManager.hpp:46:29: warning: in-class initialization of non-    static data member is a C++11 extension [-Wc++11-extensions]\n        std::string _dbFile = \"popcorn.db3\";\n                        ^\nscraper/SQLManager.hpp:47:29: warning: in-class initialization of non-    static data member is a C++11 extension [-Wc++11-extensions]\n        std::string _dbName = \"popcorn\";\n                        ^\nscraper/SQLManager.hpp:49:24: warning: in-class initialization of non-    static data member is a C++11 extension [-Wc++11-extensions]\n        int _dbVersion = 1; // increment this when database structure changes\n                   ^\nscraper/SQLManager.hpp:51:28: warning: in-class initialization of non-    static data member is a C++11 extension [-Wc++11-extensions]\n        int _dbVersionType = 0; // 0 = normal, 1 = free, 2 = lite\n                       ^\n5 warnings generated.\nUndefined symbols for architecture x86_64:\n  \"AppObject::Instance()\", referenced from:\n      _main in main-0e97bb.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see     invocation)\nmake: *** [scraper/main.o] Error 1\n</code></pre>\n"}, {"tags": ["c++", "new-operator"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1534339074, "post_id": 51859412, "comment_id": 90671081, "body": "<a href=\"https://stackoverflow.com/q/620137/1171191\">stackoverflow.com/q/620137/1171191</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1534339433, "post_id": 51859412, "comment_id": 90671280, "body": "It should be <code>b* obj_Ptr =  new (buffer_allo) b();</code> not that ugly cast"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1534339582, "post_id": 51859412, "comment_id": 90671377, "body": "&quot; is it really an initialization issue?&quot; no it is issue of you invoking UB"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1534340449, "post_id": 51859412, "comment_id": 90671884, "body": "If the <code>buffer_allo</code> is not correctly aligned for <code>b</code> then there is also UB"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1534341562, "post_id": 51859412, "comment_id": 90672525, "body": "You can&#39;t &quot;reuse&quot; the original string, if that is what you are looking for."}, {"owner": {"reputation": 1, "user_id": 9339085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a4ac9869bbadc68dde157bd0e48244d?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Ronen", "link": "https://stackoverflow.com/users/9339085/tom-ronen"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534343100, "post_id": 51859412, "comment_id": 90673430, "body": "Point taken @Slava, it is an ugly cast, but how is it UB? if you too are referring to the size mismatch between the buffers, it was just an example, to see if such a thing is possible."}, {"owner": {"reputation": 1, "user_id": 9339085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a4ac9869bbadc68dde157bd0e48244d?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Ronen", "link": "https://stackoverflow.com/users/9339085/tom-ronen"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1534343203, "post_id": 51859412, "comment_id": 90673496, "body": "@PasserBy are you sure? because removing the parentheses and using the new seems to work, as referenced by the similar question"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1534344355, "post_id": 51859412, "comment_id": 90674192, "body": "@TomRonen Different context, same deal: <a href=\"https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534345193, "post_id": 51859412, "comment_id": 90674684, "body": "@TomRonen you are reading from unintialized member - that is UB"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1534347814, "post_id": 51859412, "comment_id": 90676195, "body": "@TomRonen There is nothing in your code that legitimately initialises <code>strBuff</code>. I guess you&#39;re expecting it to have the content of <code>buffer_allo</code> but nothing in C++ says that will be the case."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10199570"}, "is_accepted": false, "score": 0, "last_activity_date": 1534346540, "creation_date": 1534346540, "answer_id": 51861665, "question_id": 51859412, "link": "https://stackoverflow.com/questions/51859412/placement-new-on-existing-buffer/51861665#51861665", "title": "Placement new on existing buffer", "body": "<p>Well, it is that dark area of C++ initialization rules. They are quite intricate and you can read them in cppreference.</p>\n\n<p>Basically, when you call placement new - <code>new (obj_Ptr) b();</code> (with an empty pair of parentheses) value initialization takes place. According to the standard:</p>\n\n<blockquote>\n  <p>1) if T is a class type with no default constructor or with a user-provided or deleted default constructor, the object is default-initialized;</p>\n  \n  <p>2) if T is a class type with a default constructor that is neither user-provided nor deleted <strong>(that is, it may be a class with an implicitly-defined or defaulted default constructor), the object is zero-initialized</strong> and then it is default-initialized if it has a non-trivial default constructor;</p>\n  \n  <p>3) if T is an array type, each element of the array is value-initialized;</p>\n  \n  <p>4) otherwise, the object is zero-initialized.</p>\n</blockquote>\n\n<p>Since it is zero-initialized this is what you see when you call <code>obj_Ptr-&gt;boo();</code>. When you define you own constructor the object is default-initialized, and hence your buffer contains garbage. This is basically it.\nMore detailed explanation: <a href=\"https://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">value initialization in cppreference</a></p>\n\n<p>Also, not related to the question, but I would like to mention a couple of things.</p>\n\n<p>1) As Slava pointed out, it is better to use return from placement new directly, without any casts, like this: <code>auto obj_Ptr = new(buffer_allo) b();</code></p>\n\n<p>2) Try to avoid keyword <code>virtual</code> for the method of derived class. It is better to use <code>override</code>, since it is clearer and can catch mistakes when you accidentally create new function in the derived class instead of overriding the one in the base. Like this: <code>void boo() override{...}</code></p>\n"}], "owner": {"reputation": 1, "user_id": 9339085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a4ac9869bbadc68dde157bd0e48244d?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Ronen", "link": "https://stackoverflow.com/users/9339085/tom-ronen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534346540, "creation_date": 1534338722, "question_id": 51859412, "link": "https://stackoverflow.com/questions/51859412/placement-new-on-existing-buffer", "title": "Placement new on existing buffer", "body": "<p>First question, hope i managed to phrase it right.</p>\n\n<p>While checking to see if i can \"force\" a buffer to behave as a class (with inheritance and vptr) , i tried the following code:</p>\n\n<p>I defined the following classes:</p>\n\n<pre><code>class a\n{\n    public:\n\n    char strBuff[50];\n    virtual void boo() = 0;\n\n};\n\nclass b : public a\n{\n    public:\n    virtual void boo()\n    {\n        printf(\"%s\\n\", strBuff);\n    }\n};\n</code></pre>\n\n<p>And used them like this:</p>\n\n<pre><code>int main()\n{\n    char buffer_allo[100] = \"123456789abcdefghijklmnopqrstuvwxyz123456789abcdefghijklmnopqrstuvwxyz\";\n\n    b* obj_Ptr = (b*)(buffer_allo);\n\n    // Placement new\n    new (obj_Ptr) b();\n\n    // Calling virtual function\n    obj_Ptr-&gt;boo();\n\n    return 0;\n}\n</code></pre>\n\n<p>The output of the program is empty, as in a <code>\\0</code> buffer, and i couldn't exactly figure out why.</p>\n\n<p>I thought it was some thing of a default-initialization\\ value-initialization problem, and indeed changing the placement new from <code>new (obj_Ptr) b();</code> to\n<code>new (obj_Ptr) b;</code>\n didn't give a blank output, but a buffer where just the first 8 characters were overwritten (Probably by the vptr),</p>\n\n<p>But then, i tried adding a constructor to either class, and discovered that adding an empty constructor to class b, will also prevent the buffer from being initialized with <code>\\0</code>, but adding a constructor to class a seems to have no effect.</p>\n\n<p>Why is this happening? is it really an initialization issue? and if so, why does adding an empty constructor solve it? or is it a compiler\\c++ standard issue?</p>\n"}, {"tags": ["c++", "solid-state-drive", "stxxl"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1534338852, "post_id": 51859362, "comment_id": 90670962, "body": "How does CPU use look like? 100% or less?"}, {"owner": {"reputation": 23, "user_id": 4879131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd0f679295e595dc517ce56ab136e7?s=128&d=identicon&r=PG&f=1", "display_name": "Kasastran", "link": "https://stackoverflow.com/users/4879131/kasastran"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1534339018, "post_id": 51859362, "comment_id": 90671053, "body": "Since I have a 7700k, it&#39;s 50% but changing the respective variable to 8 would only push it to 70% and 450MB/s from the SSD."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1534340313, "post_id": 51859362, "comment_id": 90671807, "body": "TBH with all those <code>new</code> expressions, I expect a bad locality of reference. I&#39;d fix those before starting to look at the STXXL implementation."}, {"owner": {"reputation": 23, "user_id": 4879131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd0f679295e595dc517ce56ab136e7?s=128&d=identicon&r=PG&f=1", "display_name": "Kasastran", "link": "https://stackoverflow.com/users/4879131/kasastran"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1534454459, "post_id": 51859362, "comment_id": 90722493, "body": "@rustyx I added a table and made a fair comparison. The other version added a vector for every thread, now it is a constant amount of them."}, {"owner": {"reputation": 23, "user_id": 4879131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd0f679295e595dc517ce56ab136e7?s=128&d=identicon&r=PG&f=1", "display_name": "Kasastran", "link": "https://stackoverflow.com/users/4879131/kasastran"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534454585, "post_id": 51859362, "comment_id": 90722546, "body": "@MSalters in the updated version, only the calls to new that are necessary were included."}], "owner": {"reputation": 23, "user_id": 4879131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd0f679295e595dc517ce56ab136e7?s=128&d=identicon&r=PG&f=1", "display_name": "Kasastran", "link": "https://stackoverflow.com/users/4879131/kasastran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1534454347, "creation_date": 1534338525, "last_edit_date": 1534454347, "question_id": 51859362, "link": "https://stackoverflow.com/questions/51859362/stxxl-underperforms-when-using-very-fast-ssds", "title": "STXXL underperforms when using very fast SSDs", "body": "<p>I'm currently writing a tool which uses the STXXL to find similarities between a large file on the hard drive and vectors residing in RAM. I wrote an example(for Windows) below to show what I mean. The referenced file is about 38GB large and was created with said tool.</p>\n\n<p>On normal HDDs and SATA-SSDs it's performing quite well but on M.2 or faster SSDs it's only using at most a third of the bandwith, even though it could get more.</p>\n\n<p>The VS2017 Profiler indicates, that the </p>\n\n<pre><code>const_reference const_element(const blocked_index_type&amp; offset) const\n</code></pre>\n\n<p>function of the STXXL which indirectly calls </p>\n\n<p><a href=\"https://stxxl.org/tags/1.4.1/group__reqlayer.html#ga016f4e02b691aa4818ad3305de3f47bd\" rel=\"nofollow noreferrer\">https://stxxl.org/tags/1.4.1/group__reqlayer.html#ga016f4e02b691aa4818ad3305de3f47bd</a></p>\n\n<p>seems to be the slowest part.  Does anyone have an idea as to why it underperforms and what needs to be changed?</p>\n\n<p>Thank you in advance. </p>\n\n<p>EDIT: Performance table for the new code:</p>\n\n<pre><code>Threads  CPU%   SSD MB/s   Time in s\n8        72     450        265\n6        64     560        286\n4        52     720        329\n2        29     790        600\n1        17     900        1051\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;ctime&gt;\n#include &lt;limits&gt;\n#include &lt;algorithm&gt;\n#include &lt;tuple&gt;\n#include &lt;chrono&gt;\n\n#include &lt;stxxl/vector&gt;\n#include &lt;stxxl/bits/io/wincall_file.h&gt;\n\n#include &lt;omp.h&gt;\n\nusing namespace std;\n\ntypedef stxxl::VECTOR_GENERATOR&lt;tuple&lt;uint32_t, uint32_t&gt;, 16U, 16U, 4096 * 8, stxxl::RC&gt;::result contentVecType;\n\nint main() {\n    auto start = std::chrono::high_resolution_clock::now();\n    const string&amp; sLibFile = \"I:/DA/merged_s_80_h\";\n    const int32_t&amp; iNumOfThreads = 1, iNumOfVecs = 24;\n    const int32_t&amp; iDiv = iNumOfVecs / iNumOfThreads;\n    omp_set_num_threads(iNumOfThreads);\n\n    ifstream fLibInfo(sLibFile + \"_info.txt\");\n    uint64_t iSizeOfLib = 0;\n    fLibInfo &gt;&gt; iSizeOfLib;\n\n    stxxl::wincall_file* stxxlLibFile = new stxxl::wincall_file(sLibFile, stxxl::file::RDONLY);\n    const contentVecType** vLib = new const contentVecType*[iNumOfThreads];\n    for (int32_t i = 0; i &lt; iNumOfThreads; ++i) {\n        vLib[i] = new const contentVecType(stxxlLibFile, iSizeOfLib);\n    }\n\n    mt19937_64 rng(time(0));\n    uniform_int_distribution&lt;uint32_t&gt; unii(1, numeric_limits&lt;uint32_t&gt;::max());\n    vector&lt;tuple&lt;uint32_t,uint32_t&gt;&gt; vInput[24];\n    for (int32_t i = 0; i &lt; iNumOfVecs; ++i) {\n        for (int32_t j = 0; j &lt; 100000; ++j) {\n            vInput[i].push_back(make_tuple(unii(rng),0));\n        }\n    }\n\n    #pragma omp parallel for\n    for (int32_t i = 0; i &lt; iNumOfVecs; ++i) {\n        sort(vInput[i].begin(), vInput[i].end());\n    }\n\n    #pragma omp parallel for\n    for (int32_t i = 0; i &lt; iNumOfThreads; ++i) {\n        for (int32_t j = i* iDiv; j &lt; (i+1)*iDiv; ++j) {\n            vector&lt;tuple&lt;uint32_t, uint32_t&gt;&gt; vDummy(vInput[j].size());\n            set_intersection(vInput[j].cbegin(), vInput[j].cend(), vLib[i]-&gt;cbegin(), vLib[i]-&gt;cend(), vDummy.begin(), [](const tuple&lt;uint32_t, uint32_t&gt;&amp; a, const tuple&lt;uint32_t, uint32_t&gt;&amp; b) { return get&lt;0&gt;(a) &lt; get&lt;0&gt;(b); });\n        }\n    }\n\n\n    for (int32_t i = 0; i &lt; iNumOfThreads; ++i) {\n        delete vLib[i];\n    }\n    delete[] vLib;\n    delete stxxlLibFile;\n\n    auto end = std::chrono::high_resolution_clock::now();\n    cout &lt;&lt; \"Time: \" &lt;&lt; chrono::duration_cast&lt;std::chrono::seconds&gt;(end - start).count() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "compression", "dna-sequence", "lossless-compression"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1534338366, "post_id": 51859259, "comment_id": 90670673, "body": "just a thought... you can use 7 bits to encode sequences of 3 letters in order to waste less bits"}, {"owner": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 0, "creation_date": 1534338379, "post_id": 51859259, "comment_id": 90670683, "body": "Potential candidate for Run length encoding: <a href=\"https://en.wikipedia.org/wiki/Run-length_encoding\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Run-length_encoding</a>"}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "edited": false, "score": 3, "creation_date": 1534338449, "post_id": 51859259, "comment_id": 90670721, "body": "Why not use off the shelf compression solutions?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "edited": false, "score": 0, "creation_date": 1534339030, "post_id": 51859259, "comment_id": 90671058, "body": "@Sorin Because, depending on what you mean by \u201coff the shelf\u201d, they work fairly badly on DNA. Algorithms that know specifics about DNA can do much better."}, {"owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534339851, "post_id": 51859259, "comment_id": 90671527, "body": "@user463035818 idea is very good, that will give you 2.3333 bits in average per symbol."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "edited": false, "score": 2, "creation_date": 1534339958, "post_id": 51859259, "comment_id": 90671590, "body": "@RoeeGavirel I just tried for what sequence length <code>log2( 5^n)</code> is closest to the next bigger integer and <code>n=3</code> seems to be a good choice"}, {"owner": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "edited": false, "score": 1, "creation_date": 1534339979, "post_id": 51859259, "comment_id": 90671601, "body": "Does this need to be specific and efficient? Tools like 7zip and gzip will compress it to a size that will be hard to improve, but they will take much more time than a specialized solution"}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1534340104, "post_id": 51859259, "comment_id": 90671674, "body": "@KonradRudolph I agree with your point. It&#39;s my impression that the setup right now has no compression (other than custom alphabet encoding). So even something suboptimal should compress better than no compression."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "edited": false, "score": 0, "creation_date": 1534340344, "post_id": 51859259, "comment_id": 90671819, "body": "@Sorin Not necessarily: by definition, a compression algorithm cannot compress all data, and random data may even result in bigger files than the original. This isn\u2019t theoretical, I\u2019ve seen DNA sequence files that were bigger after gzip compression than uncompressed, repeatedly."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534340680, "post_id": 51859259, "comment_id": 90672022, "body": "@user463035818: In case you chose 3 &quot;by accident&quot;, it happens to make a lot of sense biologically. ATGC represent nucleotides. 3 nucleotides form a codon, and each codon codifies a specific amino acid. N is a wildcard."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534340879, "post_id": 51859259, "comment_id": 90672138, "body": "@MSalters maybe you missed my second comment, I choose 3 because it appeared most efficient to me (at least for anything up to length 5) and maybe nature just followed the same reasoning when forming the codons :P"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 27690, "user_id": 362589, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/125a471032cdef6e8de28ff6d54c7324?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/362589/dani"}, "edited": false, "score": 0, "creation_date": 1534340913, "post_id": 51859259, "comment_id": 90672157, "body": "@Dani See my comments further up. These tools aren\u2019t necessarily terribly good at DNA, which often has pretty high (first-order) entropy."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534341018, "post_id": 51859259, "comment_id": 90672215, "body": "@user463035818 Nature kinda does, but slightly differently: there\u2019s no \u201cN\u201d in nature, and codons need to encode 20 (&#177; a bit) different amino acids. Now what\u2019s the minimal number of symbols from an alphabet of size 4 needed to encode 20 words?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1534341183, "post_id": 51859259, "comment_id": 90672300, "body": "It hardly depends on what you are doing with that compressed strings. If you just pack/unpack to store them is one thing, if you work with them in memory then completely another."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1534341188, "post_id": 51859259, "comment_id": 90672306, "body": "@KonradRudolph awesome, in the end it all boils down to number theory, we just need a couple of centuries more to understand ;)"}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 1, "creation_date": 1534575049, "post_id": 51859259, "comment_id": 90762607, "body": "<code>retrieve efficiently</code> - &quot;random access&quot; or &quot;sequential from the start&quot; (see <code>(b)</code> from <a href=\"https://stackoverflow.com/a/51859381/3789665\">Roee Gavirel&#39;s answer</a>)? For random access, 5&#179; is just below 2\u2077: encode the bases (what does <code>N</code> stand for?) three at a time (see <a href=\"https://stackoverflow.com/questions/51859259/how-can-we-compress-dna-string-efficiently#comment90671590_51859259\">user463035818&#39;s commnt</a>) using 7 bits."}], "answers": [{"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1534339048, "post_id": 51859381, "comment_id": 90671070, "body": "I like this. Theoretically, log\u2082(5) \u2248 2.32 bits are needed per symbol. This uses an average of 12 / 5 = 2.4 bits per symbol. Reminds me of UTF encoding."}, {"owner": {"reputation": 109, "user_id": 8349475, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CobDK07B0sc/AAAAAAAAAAI/AAAAAAAAG78/LSr124OZKMA/photo.jpg?sz=128", "display_name": "E141", "link": "https://stackoverflow.com/users/8349475/e141"}, "edited": false, "score": 2, "creation_date": 1534339543, "post_id": 51859381, "comment_id": 90671357, "body": "Also because of Huffman Coding Algorithm you can set smallest sequence(like 11 10 or 01) to most used one. So total bit is need even smaller."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1534339580, "post_id": 51859381, "comment_id": 90671376, "body": "When you write digits, do you mean bits?"}, {"owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1534339664, "post_id": 51859381, "comment_id": 90671420, "body": "@wally - true, fixed (;"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1534339676, "post_id": 51859381, "comment_id": 90671429, "body": "The probability of the symbols is indeed <i>anything but</i> equal. For starters, most sequences will probably have fewer Ns than any other letter but this depends on the process that generated the sequence. Next, although the individual frequencies of A, C, G and T are somewhat even, there\u2019s furthermore a rough equilibrium between the sum of A + T and C + G. Consequently I would make the words such that the lengths of A=C and G=T (or A=G and C=T), to balance things as much as possible. Unfortunately this doesn\u2019t work if we assign N the longest word."}, {"owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1534340077, "post_id": 51859381, "comment_id": 90671665, "body": "@KonradRudolph - There is no actual need <code>to balance things as much as possible</code>. Even if p(A)=p(C) they can have different length code. Giving N, the symbol with the lowest probability, the longest word will create the shortest output."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1534340188, "post_id": 51859381, "comment_id": 90671732, "body": "@RoeeGavirel Right, <i>if</i> they have the same frequency. My point is that we generally don\u2019t know this, but conversely we know that p(C) + p(G) \u2248 p(A) + p(T)."}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 1, "creation_date": 1534340210, "post_id": 51859381, "comment_id": 90671744, "body": "You could also just count each symbol and then prefix the final stream with the encoding for each of them. The prefix could have only 9-10 bits, and it would save a lot more of them."}], "tags": [], "owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "is_accepted": false, "score": 7, "last_activity_date": 1534340600, "last_edit_date": 1534340600, "creation_date": 1534338593, "answer_id": 51859381, "question_id": 51859259, "link": "https://stackoverflow.com/questions/51859259/how-can-we-compress-dna-string-efficiently/51859381#51859381", "title": "How can we compress DNA string efficiently", "body": "<p>you can if you willing to (a) have different bits size for each char and (b) you are always reading from the start and never from the middle. then, you can have a code something like:</p>\n\n<ul>\n<li>A - 00</li>\n<li>T - 01</li>\n<li>G - 10</li>\n<li>C - 110</li>\n<li>N - 111</li>\n</ul>\n\n<p>Reading from left to right you can only split a stream of bits to chars in one way. You read 2 bits at a time and if they are \"11\" you need to read one more bit to know what char it is.</p>\n\n<p><a href=\"https://www.geeksforgeeks.org/greedy-algorithms-set-3-huffman-coding/\" rel=\"nofollow noreferrer\">This is based on Huffman Coding Algorithm</a></p>\n\n<p>Note:<br>\nI don't know much about DNA, but if the probability of the chars is not equal (meaning 20% each). you should assign the shortest codes to those with the higher probability.</p>\n"}, {"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1534341285, "post_id": 51860012, "comment_id": 90672365, "body": "Your code works as long as the result fits into 64 bits. That\u2019s rarely the case ;-)"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1534341423, "post_id": 51860012, "comment_id": 90672448, "body": "@KonradRudolph just split the input up into chunks of 27 values and repeat, outputting 64 bits after each iteration."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1534341539, "post_id": 51860012, "comment_id": 90672518, "body": "That wastes bits at the boundary."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1534341749, "post_id": 51860012, "comment_id": 90672631, "body": "It wastes &lt;1/2 bit per 64 bits. We&#39;ve found that it beats the huffman coding in many cases, especially if the probability of input characters isn&#39;t well-balanced. With a good bigint library (e.g. GMP) one can extend the chunk size to 512 bits or more to further reduce the waste."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1534347765, "post_id": 51860012, "comment_id": 90676170, "body": "I think it wastes a bit more, about 64 - log\u2082(5) * 27 \u2248 1.3 bits per 64 bits. Or you might say it wastes 64 / log\u2082(5) - 27 \u2248 .56 symbols per 64 bits. Still pretty good though."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 3, "last_activity_date": 1534340965, "creation_date": 1534340965, "answer_id": 51860012, "question_id": 51859259, "link": "https://stackoverflow.com/questions/51859259/how-can-we-compress-dna-string-efficiently/51860012#51860012", "title": "How can we compress DNA string efficiently", "body": "<p>You have 5 unique values, so you need a base-5 encoding (e.g. A=0, T=1, G=2, C=3, N=4).</p>\n\n<p>In 32 bits you can fit log<sub>5</sub>(2<sup>32</sup>) = <strong>13</strong> base-5 values.</p>\n\n<p>In 64 bits you can fit log<sub>5</sub>(2<sup>64</sup>) = <strong>27</strong> base-5 values.</p>\n\n<p>The encoding process would be:</p>\n\n<pre><code>uint8_t *input = /* base-5 encoded DNA letters */;\nuint64_t packed = 0;\nfor (int i = 0; i &lt; 27; ++i) {\n    packed = packed * 5 + *input++;\n}\n</code></pre>\n\n<p>And decoding:</p>\n\n<pre><code>uint8_t *output = /* allocate buffer */;\nuint64_t packed = /* next encoded chunk */;\nfor (int i = 0; i &lt; 27; ++i) {\n    *output++ = packed % 5;\n    packed /= 5;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "is_accepted": false, "score": 0, "last_activity_date": 1534762124, "last_edit_date": 1534762124, "creation_date": 1534503919, "answer_id": 51894006, "question_id": 51859259, "link": "https://stackoverflow.com/questions/51859259/how-can-we-compress-dna-string-efficiently/51894006#51894006", "title": "How can we compress DNA string efficiently", "body": "<p>We can use a combination of Roee Gavirel's idea and the following for an even tighter result. Since Roee's idea still stipulates that two out of our five characters be mapped to a 3-bit word, sections of the sequence where at least one of the five characters does not appear but one of the 3-bit words does could be mapped to 2-bit words, reducing our final result.</p>\n\n<p>The condition to switch mapping is if there exists a section where at least one of the five characters does not appear and one of the 3-bit words appears just one time more than two times our section-prefix length in bits. If we order our possible characters (for example, alphabetically), given three bits indicating a specific missing character (if there's more than one missing, we choose the first in order) or none missing, we can immediately assign a consistent 2-bit mapping for the other four characters.</p>\n\n<p>Two ideas for our prefixes:</p>\n\n<p>(1)</p>\n\n<ul>\n<li><p>3 bits: the missing character (if none, we use Roee's encoding for the section);</p></li>\n<li><p>x bits: a constant number of bits representing section length. For maximal length sections of 65000, we could assign x = 16.</p></li>\n</ul>\n\n<p>To justify the prefix use, we'd need a section where one of the five characters does not appear and one of the 3-bit words appears 39 times or more.</p>\n\n<p>(2) </p>\n\n<ul>\n<li><p>3 bits: the missing character (if none, we use Roee's encoding for the section);</p></li>\n<li><p>x bits: the number of bits in the next section of the prefix - depends on how many characters the longest section could be. x = 6 would imply the maximal section length could be 2^(2^6)! Unlikely. For maximal length sections of 65000, we could assign x = 4;</p></li>\n<li><p>the number of bits indicated in the previous part of the prefix, indicating the current section length.</p></li>\n</ul>\n\n<p>In the example just above, our prefix length could vary between say 11 and 23 bits, which means to justify its use, we'd need a section where one of the five characters does not appear and one of the 3-bit words appears between 23 to 47 times or more.</p>\n"}, {"comments": [{"owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1534759256, "post_id": 51923062, "comment_id": 90806168, "body": "If the data does not have significant repetitive patterns, will this type of compression reduce the footprint per character as well?"}, {"owner": {"reputation": 22952, "user_id": 210211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8721ff8fa4b5c658058f4a2803231f44?s=128&d=identicon&r=PG", "display_name": "comingstorm", "link": "https://stackoverflow.com/users/210211/comingstorm"}, "reply_to_user": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 0, "creation_date": 1534827381, "post_id": 51923062, "comment_id": 90833134, "body": "It likely depends on the details of the compression method, but I&#39;d expect it might do roughly as well as a first-order Huffman encoder if the file is reasonably long."}, {"owner": {"reputation": 22952, "user_id": 210211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8721ff8fa4b5c658058f4a2803231f44?s=128&d=identicon&r=PG", "display_name": "comingstorm", "link": "https://stackoverflow.com/users/210211/comingstorm"}, "reply_to_user": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "edited": false, "score": 1, "creation_date": 1534827915, "post_id": 51923062, "comment_id": 90833291, "body": "Note that, if the data really does not have any significant repetitive patterns, then by definition all you&#39;ve got to compress on is first-order statistics (i.e., individual symbol frequency).  In that case, you wouldn&#39;t be able to do much better than a first-order Huffman encoder anyway..."}], "tags": [], "owner": {"reputation": 22952, "user_id": 210211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8721ff8fa4b5c658058f4a2803231f44?s=128&d=identicon&r=PG", "display_name": "comingstorm", "link": "https://stackoverflow.com/users/210211/comingstorm"}, "is_accepted": false, "score": 0, "last_activity_date": 1534728981, "last_edit_date": 1534728981, "creation_date": 1534727561, "answer_id": 51923062, "question_id": 51859259, "link": "https://stackoverflow.com/questions/51859259/how-can-we-compress-dna-string-efficiently/51923062#51923062", "title": "How can we compress DNA string efficiently", "body": "<p>Frankly, I would start with some version of Lempel-Ziv compression (a class of compression algorithms that includes the general-purpose <code>gzip</code> compression format).  I note that some of the comments say that general-purpose compression algorithms don't work well on raw genome data, but their effectiveness depends on how the data is presented to them.</p>\n\n<p>Note that most general-purpose compression programs (like <code>gzip</code>) examine their input on a per-byte basis.  This means that \"pre-compressing\" the genome data at 3 bits/base is <em>counterproductive</em>; instead, you should format the uncompressed genome data at one byte per base before running it through a general-purpose compressor.  Ascii \"AGTCN\" coding should be fine, as long as you don't add noise by including spaces, newlines, or variations in capitalization.</p>\n\n<p>Lempel-Ziv compression methods work by recognizing repetitive substrings in their input, then encoding them by reference to the preceding data; I'd expect this class of methods should do a reasonably good job on appropriately presented genome data.  A more genome-specific compression method may improve on this, but unless there's some strong, non-local constraint on genome encoding that I'm unaware of, I would not expect a major improvement.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10294702, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/ff54bc3b29b59d1e11f599a049e7a5df?s=128&d=identicon&r=PG", "display_name": "dim", "link": "https://stackoverflow.com/users/10294702/dim"}, "is_accepted": false, "score": 1, "last_activity_date": 1535629834, "last_edit_date": 1535629834, "creation_date": 1535626567, "answer_id": 52095315, "question_id": 51859259, "link": "https://stackoverflow.com/questions/51859259/how-can-we-compress-dna-string-efficiently/52095315#52095315", "title": "How can we compress DNA string efficiently", "body": "<p>There are plenty of methods to compress, but the main question is what data you want to compress?\n 1. Raw unaligned sequenced data from the sequencing machine (fastq)\n 2. Aligned data (sam/bam/cram)\n 3. Reference genomes</p>\n\n<ol>\n<li>You should reorder your reads putting reads from the close genome positions close to each other. For instance, this would allow usual gzip compress 3 times better. There are many ways to do this. You can for instance align fastq to bam and than export back to fastq. Use Suffix Tree/Array to find similar reads, the way most aligners work (needs a lot of memory). Use minimizers - very fast, low memory solution, but not good for long reads with many errors. Good results are from debruijn graph construction, which is used for the purpose (aka de-novo alignment).\nStatistical coding like huffman / arithmetic would compress to 1/3 (one can pass huffman stream to binary arithmetic coder to gain another 20%).</li>\n<li>The best results are from reference-based compressions here - just store differences between a reference and the aligned read.</li>\n<li>Little can be done here. Using statistical coding you can get 2-3 bits per nucleotide.</li>\n</ol>\n"}], "owner": {"reputation": 105, "user_id": 4966579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f25f97c38a0006d095e51b1832193e6?s=128&d=identicon&r=PG&f=1", "display_name": "ksn", "link": "https://stackoverflow.com/users/4966579/ksn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 1, "answer_count": 5, "score": 5, "last_activity_date": 1535629834, "creation_date": 1534338139, "last_edit_date": 1534372133, "question_id": 51859259, "link": "https://stackoverflow.com/questions/51859259/how-can-we-compress-dna-string-efficiently", "title": "How can we compress DNA string efficiently", "body": "<p>DNA strings can be of any length comprising any combination of the 5 alphabets (A, T, G, C, N).<br>\nWhat could be the efficient way of compressing DNA string of alphabet comprising 5 alphabets (A, T, G, C, N). Instead of considering 3 bits per alphabet, can we compress and retrieve efficiently using less number of bits? Can anybody suggest a pseudo code for efficient compression and retrieval? </p>\n"}, {"tags": ["c++", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1534338396, "creation_date": 1534338396, "answer_id": 51859333, "question_id": 51859172, "link": "https://stackoverflow.com/questions/51859172/recognize-that-a-value-is-bool-in-a-template/51859333#51859333", "title": "Recognize that a value is bool in a template", "body": "<pre><code>namespace fmt {\n  namespace adl {\n    template&lt;class T&gt;\n    void output( std::ostream&amp; os, T const&amp; t ) {\n      os &lt;&lt; t;\n    }\n    void output( std::ostream&amp; os, bool const&amp; b ) {\n      auto old = os.flags();\n      os &lt;&lt; std::boolalpha &lt;&lt; b;\n      if (!( old &amp; std::ios_base::boolalpha) )\n        os &lt;&lt; std::noboolalpha; // restore state\n    }\n    template&lt;class T&gt;\n    void output_helper( std::ostream&amp; os, T const&amp; t ) {\n      output(os, t); // ADL\n    }\n  }\n  template&lt;class T&gt;\n  std::ostream&amp; output( std::ostream&amp; os, T const&amp; t ) {\n    adl::output_helper( os, t );\n    return os;\n  }\n}\n</code></pre>\n\n<p>now <code>fmt::output( std::cout, true )</code> prints <code>true</code>, while <code>fmt::output( std::cout, 7 )</code> prints <code>7</code>.</p>\n\n<p>You can extend <code>fmt::output</code> by creating a function in either <code>fmt::adl</code> or in the type <code>T</code>'s namespace called <code>output</code> that takes a <code>std::ostream&amp;</code> and a <code>T const&amp;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534338575, "post_id": 51859347, "comment_id": 90670818, "body": "maybe change the output to <code>&quot;is integral but not bool&quot;</code> / <code>&quot;is bool or not integral&quot;</code>"}], "tags": [], "owner": {"reputation": 5911, "user_id": 1688785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07b2da937aa23792045dff6ff19556eb?s=128&d=identicon&r=PG", "display_name": "Caramiriel", "link": "https://stackoverflow.com/users/1688785/caramiriel"}, "is_accepted": true, "score": 17, "last_activity_date": 1534341541, "last_edit_date": 1534341541, "creation_date": 1534338462, "answer_id": 51859347, "question_id": 51859172, "link": "https://stackoverflow.com/questions/51859172/recognize-that-a-value-is-bool-in-a-template/51859347#51859347", "title": "Recognize that a value is bool in a template", "body": "<p><code>std::is_integral</code> checks if a type is one of the following types: <code>bool</code>, <code>char</code>, <code>char16_t</code>, <code>char32_t</code>, <code>wchar_t</code>, <code>short</code>, <code>int</code>, <code>long</code>, <code>long long</code> (<a href=\"https://en.cppreference.com/w/cpp/types/is_integral\" rel=\"noreferrer\">source</a>). If you want to check if a type is the same as another type, <code>std::is_same</code> can be used. Both can be combined to get the wanted result:</p>\n\n<pre><code>template &lt;typename T&gt; void output(T x)\n{\n    if constexpr (std::is_integral&lt;decltype(x)&gt;::value &amp;&amp; !std::is_same&lt;decltype(x), bool&gt;::value) {\n        std::cout &lt;&lt; static_cast&lt;int&gt;(x) &lt;&lt; \" is integral but not a boolean\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; x &lt;&lt; \" is not integral\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>or, since we already know the type of <code>decltype(x)</code>, which is <code>T</code>:</p>\n\n<pre><code>template &lt;typename T&gt; void output(T x)\n{\n    if constexpr (std::is_integral&lt;T&gt;::value &amp;&amp; !std::is_same&lt;T, bool&gt;::value) {\n        std::cout &lt;&lt; static_cast&lt;int&gt;(x) &lt;&lt; \" is integral but not a boolean\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; x &lt;&lt; \" is not integral\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Another way can be to use a template specialization. This makes sure the other overload is being used to handle the boolean value. </p>\n\n<pre><code>template &lt;typename T&gt; void output(T x)\n{\n    if constexpr (std::is_integral&lt;T&gt;::value) {\n        std::cout &lt;&lt; static_cast&lt;int&gt;(x) &lt;&lt; \" is integral but not a boolean\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; x &lt;&lt; \" is not integral\" &lt;&lt; std::endl;\n    }\n}\n\ntemplate &lt;&gt; void output(bool x)\n{\n    std::cout &lt;&lt; x &lt;&lt; \" is a boolean\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 7792, "user_id": 131264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67c4f2aed4839e9325dd58097aaa8eca?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/131264/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3121, "favorite_count": 0, "accepted_answer_id": 51859347, "answer_count": 2, "score": 11, "last_activity_date": 1534341541, "creation_date": 1534337867, "question_id": 51859172, "link": "https://stackoverflow.com/questions/51859172/recognize-that-a-value-is-bool-in-a-template", "title": "Recognize that a value is bool in a template", "body": "<p>This short C++17 program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt; void output(T x)\n{\n    if constexpr (std::is_integral&lt;decltype(x)&gt;::value) {\n        std::cout &lt;&lt; static_cast&lt;int&gt;(x) &lt;&lt; \" is integral\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; x &lt;&lt; \" is not integral\" &lt;&lt; std::endl;\n    }\n}\n\nint main()\n{\n    char x = 65;\n    output(x);\n\n    bool t = true;\n    output(t);\n\n    return 0;\n}\n</code></pre>\n\n<p>Has this output:</p>\n\n<pre><code>65 is integral\n1 is integral\n</code></pre>\n\n<p>In the template function named <code>output</code>, how can one detect that the argument <code>x</code> is boolean and not a number?</p>\n\n<p>The plan is to output the value with <code>std::cout &lt;&lt; std::boolalpha &lt;&lt;</code>, but only if the type is <code>bool</code>.</p>\n"}, {"tags": ["c++", "qt", "qtreeview"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534337773, "post_id": 51859077, "comment_id": 90670324, "body": "in the case of QFileSystemModel it is a special case because it not only modifies virtual data but also real data as the position of a file or directory within the file tree that the OS handles. So you will have to make some special modifications, for example if you drag a file to a folder it is normal that the file is placed inside the folder, what happens if it is dragged from one folder to another folder? and from a folder to a file?"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534338161, "post_id": 51859077, "comment_id": 90670561, "body": "So what you have described (moving file in filesystem), should be implemented in overrided <code>dropMimeData</code> right ?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534338294, "post_id": 51859077, "comment_id": 90670634, "body": "I do not know if in dropMimeData (I&#39;m just going to find the right method when you answer the previous question) but your task is to implement the movement of files or directories."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534338517, "post_id": 51859077, "comment_id": 90670770, "body": "If some folder A is dragged to another folder B, it should be copied in file system like that -- folder B should contain folder A. Folder dragged to a file should do nothing."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534338625, "post_id": 51859077, "comment_id": 90670837, "body": "Qt4 or Qt5 ?, since you point to a Qt4 documentation"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1534339728, "post_id": 51859077, "comment_id": 90671459, "body": "I just reviewed QFileSystemModel and I see that if I support certain functionality but for this you should use: <code>m_model-&gt;setReadOnly(false);</code>, Tell me if the behavior is what you want."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534397051, "post_id": 51859077, "comment_id": 90691615, "body": "It works. It is so obvious, i cant believe i&#39;ve overlooked it :/ Could you please post it as an answer, so i may accept it and close this thread ?"}], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 596, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534337514, "creation_date": 1534337514, "question_id": 51859077, "link": "https://stackoverflow.com/questions/51859077/drag-and-drop-for-qtreeview-doesnt-work", "title": "Drag and drop for QTreeView doesnt work", "body": "<p>I have been following <a href=\"http://doc.qt.io/archives/qt-4.8/model-view-programming.html#using-drag-and-drop-with-item-views\" rel=\"nofollow noreferrer\">this tutorial</a> to be able to drag &amp; drop items of <code>QTreeView</code>.</p>\n\n<p>I have done all described steps -- overrided methods of model:</p>\n\n<pre><code>class DragAndDropModel : public QFileSystemModel\n{\npublic:\n    DragAndDropModel(QWidget *parent = Q_NULLPTR) : QFileSystemModel(parent) {}\n\n    Qt::DropActions supportedDropActions() const override\n    {\n        return Qt::CopyAction | Qt::MoveAction;\n    }\n\n    Qt::ItemFlags flags(const QModelIndex &amp;index) const override\n    {\n        if (!index.isValid())\n            return 0;\n\n        return Qt::ItemIsDragEnabled | Qt::ItemIsDropEnabled | QAbstractItemModel::flags(index);\n    }\n};\n</code></pre>\n\n<p>Then set this model to <code>QTreeView</code> instance and enabled drag &amp; drop</p>\n\n<pre><code>m_model-&gt;setRootPath(path);\nm_treeView-&gt;setModel(m_model);\nm_treeView-&gt;setRootIndex(m_model-&gt;index(path));\n\nm_treeView-&gt;setDragDropMode(QAbstractItemView::InternalMove);\nm_treeView-&gt;setSelectionMode(QAbstractItemView::ExtendedSelection);\nm_treeView-&gt;setDragEnabled(true);\nm_treeView-&gt;setAcceptDrops(true);\nm_treeView-&gt;setDropIndicatorShown(true);\n</code></pre>\n\n<p>animations works just well, but after item is dropped, nothing happens. May somebody point me to right direction ?</p>\n"}, {"tags": ["c++", "locking", "mutex", "chrono", "condition-variable"], "comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 1, "creation_date": 1534338342, "post_id": 51859031, "comment_id": 90670658, "body": "Can&#39;t reproduce on <a href=\"https://wandbox.org/permlink/zIzoS6cRG00zWlVd\" rel=\"nofollow noreferrer\">Wandbox</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1534338386, "post_id": 51859031, "comment_id": 90670689, "body": "<a href=\"https://wandbox.org/permlink/HsF804u6PQempCTz\" rel=\"nofollow noreferrer\">I cannot reproduce on wandbox</a>.  I get <code>2</code> for every version of clang and gcc I&#39;ve tried for <code>x.wait_for(lock, 5s, increment);   std::cout &lt;&lt; i &lt;&lt; std::endl;</code>.  I also get <code>3</code> on my local machine with MSVS."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1534338450, "post_id": 51859031, "comment_id": 90670722, "body": "I get 50K on 2.6.32 redhat kernel"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 3, "creation_date": 1534338841, "post_id": 51859031, "comment_id": 90670957, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=75402\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=75402</a>, <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=58929\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=58929</a> could be relevant?"}, {"owner": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1534339125, "post_id": 51859031, "comment_id": 90671107, "body": "@AlanBirtles indeed, adding -pthread fixed the &quot;bug&quot;(?) Thanks a lot. Let&#39;s see whether it is confirmed at some point.."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1534342841, "post_id": 51859031, "comment_id": 90673262, "body": "FWIW, I think for Linux pthreads, spurious wakeup can only happen by signal interruption (and the return code will be <code>EINTR</code> which could be handled transparently, but is deliberately not, in order to allow the program to deal with signals more easily), and a scenario where a thread starts to wait just as another thread is currently being woken up (i.e. requiring at least two waiters). In the latter case, it is or was possible that both threads continue as the result of just one call to <code>pthread_cond_signal</code>. I don&#39;t even know if this still applies to the current implementation, though."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1534339115, "creation_date": 1534339115, "answer_id": 51859502, "question_id": 51859031, "link": "https://stackoverflow.com/questions/51859031/stdcondition-variablewait-for-calls-the-predicate-very-often/51859502#51859502", "title": "`std::condition_variable::wait_for` calls the predicate very often", "body": "<p>You need to add <code>-pthread</code> flag to gcc when compiling, for example on gcc 5.1.0 on RE:</p>\n\n<pre><code>without pthread: 49752692\nwith pthread: 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1534339312, "post_id": 51859515, "comment_id": 90671217, "body": "It might be worth pointing out that the <code>-pthread</code> flag does more than just link libpthread - it may also introduce other necessary flags, defines in code, etc. I&#39;ve seen people do <code>-lpthread</code>, which is veeeeery similar, but wrong."}, {"owner": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1534339777, "post_id": 51859515, "comment_id": 90671487, "body": "@BoBTFish what else does -pthread do? since the assembly seems to be similar with and without <code>-pthread</code> (objdump &amp; compiler explorer)"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "reply_to_user": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "edited": false, "score": 0, "creation_date": 1534340784, "post_id": 51859515, "comment_id": 90672072, "body": "@kawillzocken It may set flags for compilation stages other than linking. Depends on the platform, but typically on Linux it also defines <code>_REENTRANT</code>: <a href=\"https://stackoverflow.com/a/2127819/1171191\">stackoverflow.com/a/2127819/1171191</a>"}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": false, "score": 1, "last_activity_date": 1534339191, "creation_date": 1534339191, "answer_id": 51859515, "question_id": 51859031, "link": "https://stackoverflow.com/questions/51859031/stdcondition-variablewait-for-calls-the-predicate-very-often/51859515#51859515", "title": "`std::condition_variable::wait_for` calls the predicate very often", "body": "<p>You need to link to the pthread library using the <code>-pthread</code> flag to g++:</p>\n\n<pre><code>g++ cond_test.cpp -pthread\n</code></pre>\n\n<p>Most linux systems require you to link to the <code>pthread</code> library to use threading features. However programs using standard C++ threading seems to link successfully without explicitly linking to <code>pthread</code>, and instead produce undefined behavior at runtime (It often crashes, but with this code it seems not to, but instead produce unexpected behavior).</p>\n\n<p>Example for this code:</p>\n\n<pre><code>$ g++ t.cpp  &amp;&amp; ./a.out\n5817437\n18860410\n$ g++ t.cpp  -pthread &amp;&amp; ./a.out\n2\n19718764\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 6, "last_activity_date": 1534339707, "creation_date": 1534339707, "answer_id": 51859655, "question_id": 51859031, "link": "https://stackoverflow.com/questions/51859031/stdcondition-variablewait-for-calls-the-predicate-very-often/51859655#51859655", "title": "`std::condition_variable::wait_for` calls the predicate very often", "body": "<p>libstdc++ has an unfortunate ability to compile and seemingly work without pthread however it wont function correctly. </p>\n\n<p>See this libstdc++ bug: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=58929\" rel=\"noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=58929</a></p>\n\n<p>You need to add <code>\"-pthread\"</code> to your compile command.</p>\n"}], "owner": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 51859655, "answer_count": 3, "score": 6, "last_activity_date": 1534339707, "creation_date": 1534337341, "last_edit_date": 1534338005, "question_id": 51859031, "link": "https://stackoverflow.com/questions/51859031/stdcondition-variablewait-for-calls-the-predicate-very-often", "title": "`std::condition_variable::wait_for` calls the predicate very often", "body": "<p>Consider the following codesnippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;condition_variable&gt;\n#include &lt;chrono&gt;\n#include &lt;mutex&gt;\n\nint main () {\n  std::mutex y;\n  std::condition_variable x;\n  std::unique_lock&lt;std::mutex&gt;lock{y};\n  int i = 0;\n  auto increment = [&amp;] {++i; return false;};\n  using namespace std::chrono_literals;\n\n  //lock 5s if increment returns false\n  //let's see how often was increment called?\n  x.wait_for(lock, 5s, increment);\n  std::cout &lt;&lt; i &lt;&lt; std::endl;\n\n  //compare this with a simple loop:\n  //how often can my system call increment in 5s?\n  auto const end = std::chrono::system_clock::now() + 5s;\n  i = 0;\n  while (std::chrono::system_clock::now() &lt; end) {\n    increment();\n  }\n  std::cout &lt;&lt; i;\n}\n</code></pre>\n\n<p>As I understand wait_for, <code>i</code> should be O(1) after <code>wait_for</code> (let's assume spurious unlocks are rare).</p>\n\n<p>However, I get<br>\n<code>i ~= 3e8</code> for <code>kernel 4.17.14, Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz</code>,<br>\n<code>i ~= 8e6</code> for <code>kernel 3.10.0, Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz</code>.</p>\n\n<p>This sounds funny, so i check by comparing with a simple loop that runs 5 seconds. Roughly same results for <code>i</code>, only a 5-10% difference.</p>\n\n<p>Question:<br>\nwhat is <code>wait_for</code> doing? Does it work as expected and I just understood cppreference wrong, or did I mess up?</p>\n\n<p>Second, (optional) question: Where does this enormous difference in <code>i</code> come from?</p>\n\n<p>Additional info:\n(<code>gcc7.3</code>, <code>gcc8.2</code>, <code>clang6.0</code>), flags: <code>-O3 --std=c++17</code> all yield comparable results.</p>\n"}, {"tags": ["c++", "class", "inheritance", "variadic-templates"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534337217, "post_id": 51858941, "comment_id": 90670034, "body": "Did you actually check to see if this was caused by inheritance? Because to me <code>A</code>   appears completely irrelevant. The problem exists solely in the signature of <code>B::B</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1534337311, "post_id": 51858941, "comment_id": 90670083, "body": "You have <code>B(float, int, possibly_more_stuff)</code>.  <code>B(3.14, &quot;abc&quot;);</code> does not match that"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1534337333, "post_id": 51858941, "comment_id": 90670091, "body": "What did you expect from your <code>B(3.14, &quot;abc&quot;)</code> ?"}, {"owner": {"reputation": 11, "user_id": 10229300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f6472de7b169e5ceedc54bd4cb9fab?s=128&d=identicon&r=PG&f=1", "display_name": "Zsolt Tomis", "link": "https://stackoverflow.com/users/10229300/zsolt-tomis"}, "edited": false, "score": 0, "creation_date": 1534337621, "post_id": 51858941, "comment_id": 90670251, "body": "I expected that insert the default value for v, and call the base classs with a=2 and b=&quot;abc&quot;"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534338249, "post_id": 51858941, "comment_id": 90670610, "body": "That&#39;s pushing SFINAE a bit further than it&#39;s designed to do. SFINAE: Substitution Failure Is Not An Error - You&#39;re probably not familiar with the term, but C++ has limited support for the concept you&#39;re assuming here. When trying to instantiate a function template, the C++ compiler will ignore instantiations that lead to errors in the <i>declaration</i>. Your example fails in the <i>definition</i>, however. The instantiation succeeds with <code>B::B(float, int)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534337447, "post_id": 51858986, "comment_id": 90670154, "body": "As a rule of thumb, your statement makes sense,  but function parameter packs (like these) are a <a href=\"https://en.cppreference.com/w/cpp/language/default_arguments\" rel=\"nofollow noreferrer\">specific exception</a>. But since this question is exactly about this case, you can&#39;t ignore that exception."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534338462, "post_id": 51858986, "comment_id": 90670732, "body": "@MSalters - you&#39;re right my initial aswer was very wrong expressed; I&#39;ve tried to correct it."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534339097, "post_id": 51858986, "comment_id": 90671092, "body": "I think it would be clearer to state it like this: &quot;Default arguments allow you to call a function with <b>less</b> arguments than there are formal parameters. Function parameter packs allow you to call a function with <b>more</b> arguments than there are formal parameters. Since <code>B::B</code> has 2 arguments and 2 formal parameters, exactly equal, neither the default nor the parameter pack is used&quot;"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1534338112, "last_edit_date": 1534338112, "creation_date": 1534337164, "answer_id": 51858986, "question_id": 51858941, "link": "https://stackoverflow.com/questions/51858941/variadic-template-and-default-value-with-inheritance/51858986#51858986", "title": "Variadic template and default value with inheritance", "body": "<p>The problem is if a function/method parameter has a default value, all following parameters must have a default value.</p>\n\n<p>So</p>\n\n<pre><code>template&lt;typename ... ARGS&gt;\nB(float c_, int v=VERSION, ARGS&amp;&amp;... args) \n   : A(v, std::forward&lt;ARGS&gt;(args)...), c(c_)\n { std::cout &lt;&lt; c &lt;&lt; std::endl; }\n</code></pre>\n\n<p>is wrong because there aren't default values for <code>args</code>.</p>\n\n<p>Or better: you can write the following signature</p>\n\n<pre><code>B(float c_, int v=VERSION, ARGS&amp;&amp;... args)\n</code></pre>\n\n<p>but the default value for <code>v</code> is used only if you pass to the constructor only a value (<code>c_</code>) because <code>args...</code> is empty so <code>v</code> is the last parameter.</p>\n\n<p>But if you want a some <code>args...</code>, the default value for <code>v</code> is ignored because, otherwise, the compiler can't know if a second integer parameter is the not-default value for <code>v</code> or the first <code>args...</code></p>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1534337993, "post_id": 51859135, "comment_id": 90670452, "body": "Amplifying this <i>specific</i> case, and a <i>specific</i> workaround, <a href=\"https://ideone.com/igfLft\" rel=\"nofollow noreferrer\">something like <b>this</b></a> would work. That, assuming I guessed the same intent you did, and we&#39;re both soothsayers. =)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1534338874, "post_id": 51859135, "comment_id": 90670969, "body": "@WhozCraig - works but, IMHO, isn&#39;t a good idea: when I see the call <code>B(3.14f, 3, &quot;xyz&quot;);</code> I have the doubt: the <code>3</code> is the version or the first <code>args...</code>? IMHO is better, from the point of view of the reader of the code, write the first constructor with version in first position: <code>B(int v, float c_, ARGS&amp;&amp;... args)</code>. So it&#39;s more clear that the <code>float</code> argument is ever the last before the variadic arguments."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1534339160, "post_id": 51859135, "comment_id": 90671132, "body": "@max66 Lest you have doubt, given those two template members, <code>B(3.14, 3, &quot;xyz&quot;)</code> will <i>always</i> be a better match to the specified second <code>int</code> argument. That&#39;s simply (or not so simply) how the language works. That said, if someone wanted a second argument that was (a) <code>int</code>, and (b) <i>not</i> the version, they&#39;re screwed and there&#39;s not getting around that with just those two template members."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1534339665, "post_id": 51859135, "comment_id": 90671422, "body": "@max66: The reliable solution there is <code>B(3.14f, B::version{3}, &quot;xyz&quot;)</code>. This require s a nested class <code>B::version</code>, but it very effectively solves ambiguities."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1534339831, "post_id": 51859135, "comment_id": 90671518, "body": "@WhozCraig - I know... I know... with &quot;I have the doubt&quot; I mean &quot;I have to think a little about which constructor is used&quot;; and I suppose it&#39;s the same form many C++ programmers. I just think that placing the version value in first position (in first constructor) make the calls simpler to read."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1534337717, "creation_date": 1534337717, "answer_id": 51859135, "question_id": 51858941, "link": "https://stackoverflow.com/questions/51858941/variadic-template-and-default-value-with-inheritance/51859135#51859135", "title": "Variadic template and default value with inheritance", "body": "<p>The problem here is that your constructor can be called with one, two or more arguments. </p>\n\n<p>If you call it with one argument, the second argument is defaulted. </p>\n\n<p>If you provide two or more arguments, the provided default argument is not used. Your second argument is used, and it has to match the type of the second parameter.</p>\n\n<p>Note that in general, you can achieve similar results by overloading a function instead of providing default arguments. In this case, I suspect that would give you the results you intend, but that's me guessing at your intents. </p>\n"}], "owner": {"reputation": 11, "user_id": 10229300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f6472de7b169e5ceedc54bd4cb9fab?s=128&d=identicon&r=PG&f=1", "display_name": "Zsolt Tomis", "link": "https://stackoverflow.com/users/10229300/zsolt-tomis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534338112, "creation_date": 1534337001, "question_id": 51858941, "link": "https://stackoverflow.com/questions/51858941/variadic-template-and-default-value-with-inheritance", "title": "Variadic template and default value with inheritance", "body": "<pre><code>#include &lt;iostream&gt;\n\nstruct A {\n    int a;\n    std::string b;\n    A(int a_, std::string b_) : a(a_), b(b_) { std::cout &lt;&lt; a &lt;&lt; b &lt;&lt; std::endl; }\n};\n\nstruct B : public A {\n    static const int VERSION=2;\n    float c;\n\n    template&lt;typename ... ARGS&gt;\n    B(float c_, int v=VERSION, ARGS&amp;&amp;... args) : A(v, std::forward&lt;ARGS&gt;(args)...), c(c_) { std::cout &lt;&lt; c &lt;&lt; std::endl; }\n};\n\nint main() {    \n    B(3.14, \"abc\");\n}\n</code></pre>\n\n<p>Hi all, the compiler gives gives me template argument deduction/substitution failed error. How can I use a default value with a variadic template?</p>\n\n<pre><code>variadic.cpp: In function \u2018int main()\u2019:\nvariadic.cpp:18:15: error: no matching function for call to \u2018B::B(double, const char [4])\u2019\n  B(3.14, \"abc\");\n               ^\nvariadic.cpp:14:2: note: candidate: template&lt;class ... ARGS&gt; B::B(float, int, ARGS&amp;&amp; ...)\n  B(float c_, int v=VERSION, ARGS&amp;&amp;... args) : A(v, std::forward&lt;ARGS&gt;(args)...), c(c_) { std::cout &lt;&lt; c &lt;&lt; std::endl; }\n  ^\nvariadic.cpp:14:2: note:   template argument deduction/substitution failed:\nvariadic.cpp:18:15: note:   cannot convert \u2018\"abc\"\u2019 (type \u2018const char [4]\u2019) to type \u2018int\u2019\n  B(3.14, \"abc\");\n               ^\nvariadic.cpp:9:8: note: candidate: B::B(const B&amp;)\n struct B : public A {\n        ^\nvariadic.cpp:9:8: note:   candidate expects 1 argument, 2 provided\nvariadic.cpp:9:8: note: candidate: B::B(B&amp;&amp;)\nvariadic.cpp:9:8: note:   candidate expects 1 argument, 2 provided\n</code></pre>\n"}, {"tags": ["c++", "c++11", "llvm", "llvm-ir"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534337186, "post_id": 51858867, "comment_id": 90670020, "body": "How confident are you that the code is <i>expected</i> to build? The code hasn&#39;t been touched for years - the only update is the addition of a note to the readme (just a few hours ago) saying that the project is unmaintained and suggesting alternatives."}, {"owner": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534338739, "post_id": 51858867, "comment_id": 90670897, "body": "@molbdnilo, I am just taking refernce of that project,could you help me to resolve that error."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534338896, "post_id": 51858867, "comment_id": 90670979, "body": "I think you should start with investigating the author&#39;s suggested alternatives."}, {"owner": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534339894, "post_id": 51858867, "comment_id": 90671549, "body": "@molbdnilo, I do not found any such author suggested alternative."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534340029, "post_id": 51858867, "comment_id": 90671638, "body": "Read the end of the first paragraph of the readme."}, {"owner": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534340426, "post_id": 51858867, "comment_id": 90671869, "body": "@molbdnilo, I read it , I know flowchart is first convert llvm ir to jasmin then back to java bytecode. But I do not know how to initiate it ? So, thought better to follow his work and remove the compilation error to meet latest llvm versio 6.0.1. Please suggest me , am I doing correct?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534340640, "post_id": 51858867, "comment_id": 90672002, "body": "Do you have a local version that you&#39;re looking at, which you haven&#39;t pulled for the last four hours or so? Update it, or read <a href=\"https://github.com/davidar/lljvm\" rel=\"nofollow noreferrer\">this version</a>. The paragraph reads &quot;This project is currently unmaintained. You may be interested in:...&quot;"}, {"owner": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1534341182, "post_id": 51858867, "comment_id": 90672297, "body": "@molbdnilo, Yes, they have given alternative way of this project i.e. LLJVM translator which is maropu project, but problem is it is totally written in Java. I am looking for project in c++"}], "owner": {"reputation": 1115, "user_id": 10220825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349f836787fac77e95f6b0a5b0c8d1e4?s=128&d=identicon&r=PG&f=1", "display_name": "Ratnesh", "link": "https://stackoverflow.com/users/10220825/ratnesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534336734, "creation_date": 1534336734, "question_id": 51858867, "link": "https://stackoverflow.com/questions/51858867/unable-to-conversion-in-expectedunique-ptrmodule-to-module", "title": "Unable to conversion in Expected&lt;unique_ptr&lt;Module&gt;&gt; to Module", "body": "<p>I am new to llvm , writing the program \"main.cpp\" of <a href=\"https://github.com/davidar/lljvm/blob/master/backend/main.cpp\" rel=\"nofollow noreferrer\">https://github.com/davidar/lljvm/blob/master/backend/main.cpp</a>.</p>\n\n<p>I stuck at the error while executing the command : \"pm.run(m)\"</p>\n\n<pre><code>error: no matching function for call to \u2018llvm::legacy::PassManager::run(llvm::Expected&lt;std::unique_ptr&lt;llvm::Module&gt; &gt;&amp;)\n</code></pre>\n\n<p>Here is my source code: </p>\n\n<pre><code>#include \"backened.h\"\n#include &lt;iostream&gt;\n#include \"llvm/Bitcode/BitcodeReader.h\"\n#include \"llvm/IR/Function.h\"\n#include \"llvm/IR/LLVMContext.h\"\n#include \"llvm/IR/Module.h\"\n#include \"llvm/Support/CommandLine.h\"\n#include \"llvm/Support/ErrorOr.h\"\n#include \"llvm/Support/MemoryBuffer.h\"\n#include \"llvm/Support/raw_ostream.h\"\n#include \"llvm/IR/PassManager.h\"\n#include \"llvm/CodeGen/Passes.h\"\n#include \"llvm/IR/DataLayout.h\"\n#include &lt;llvm/Transforms/Scalar.h&gt;\n#include \"llvm/IR/LegacyPassManager.h\"\n\nusing namespace llvm;\nusing namespace std;\n\nstatic cl::opt&lt;string&gt; input(cl::Positional, cl::desc(\"Bitcode File..\"),cl::Required);\nstatic cl::opt&lt;string&gt; classname(\"classname\",cl::desc(\"Binary name of the generated class...\"));\n\nint main(int argc, char** argv)\n{\n        cl::ParseCommandLineOptions(argc, argv, \"Hi..\");\n        LLVMContext context;\n\n        ErrorOr&lt;unique_ptr&lt;MemoryBuffer&gt;&gt;  mb = MemoryBuffer::getFile(input);\n        if(error_code ec = mb.getError()) {\n                errs() &lt;&lt; ec.message();\n                return 1;\n        }    \n        Expected&lt;unique_ptr&lt;Module&gt;&gt; m = parseBitcodeFile(mb-&gt;get()-&gt;getMemBufferRef(),context);\n        if(error_code ec= errorToErrorCode(m.takeError()) )\n        {\n           errs() &lt;&lt;\"Unable to read bitcode file..\" &lt;&lt;ec.message() ;\n        }\n        PassManager&lt;Module&gt; pm; \n\n    pm.add(createVerifierPass());    \n    pm.add(createGCLoweringPass());    \n    pm.add(createLowerSwitchPass());\n    pm.add(createCFGSimplificationPass());\n    pm.add(new JVMWriter(fouts(), classname, debugLevel));    \n    pm.add(createGCInfoDeleter());    \n    pm.run(*m);    \n    return 0;\n}\n</code></pre>\n\n<p>Please help me.</p>\n"}, {"tags": ["c++", "gcc", "boost", "clang", "travis-ci"], "answers": [{"tags": [], "owner": {"reputation": 1415, "user_id": 4288486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceeebcdab5325a9b458c1af8c51111d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Neto", "link": "https://stackoverflow.com/users/4288486/jo%c3%a3o-neto"}, "is_accepted": true, "score": 3, "last_activity_date": 1534436215, "last_edit_date": 1592644375, "creation_date": 1534423046, "answer_id": 51877284, "question_id": 51858747, "link": "https://stackoverflow.com/questions/51858747/compilation-tidbits-on-g-clang-using-libboost-g8-compilation-fails-wh/51877284#51877284", "title": "Compilation tidbits on g++, clang++, using libboost -- g++8 compilation fails when g++7 succeeds;", "body": "<h1>1. <code>clang++</code> requires <code>g++</code> installed?</h1>\n<p>No -- but will use whatever standard library is available in the system.</p>\n<p>In this case it's because it's an old library version. Installing <code>libstdc++-8-dev</code> solves the issue.</p>\n<h1>2. Does my code require GNU extensions?</h1>\n<p>Yes. As explained to me <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86977\" rel=\"nofollow noreferrer\">here</a> by @jonathan-wakely</p>\n<blockquote>\n<p>the allocator's value type is not the same as the container's value type (which is exactly what the error tells you!)</p>\n<p>GCC will accept it as an extension in <code>-std=gnu++17</code> mode, but you compiled with <code>-std=c++17</code> which disables the non-standard extension.</p>\n<blockquote>\n<p>Shouldn't it be also flagged as an error in <code>gcc-6</code> and <code>gcc-7</code> with <code>-std=c++17</code>?</p>\n</blockquote>\n<p>No because the static assertion was only added in <code>gcc 8</code>.</p>\n</blockquote>\n<p>The standard way is <code>using HashMap = std::unordered_map&lt;K, V, KH, KEq, Alloc&lt;std::pair&lt;const K, V&gt;&gt;&gt;; </code></p>\n<ul>\n<li><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86977\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86977</a></li>\n<li><a href=\"https://stackoverflow.com/questions/49736817/stdunordered-map-with-boostinterprocess-allocator-in-shared-memory-drawbac/49738871#49738871\">std::unordered_map with boost::interprocess allocator in shared memory - drawbacks?</a></li>\n</ul>\n<p>(Thanks to @jonathan-wakely for dealing with my noobish questions!)</p>\n"}], "owner": {"reputation": 1415, "user_id": 4288486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceeebcdab5325a9b458c1af8c51111d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Neto", "link": "https://stackoverflow.com/users/4288486/jo%c3%a3o-neto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 51877284, "answer_count": 1, "score": 1, "last_activity_date": 1534436215, "creation_date": 1534336280, "last_edit_date": 1534337770, "question_id": 51858747, "link": "https://stackoverflow.com/questions/51858747/compilation-tidbits-on-g-clang-using-libboost-g8-compilation-fails-wh", "title": "Compilation tidbits on g++, clang++, using libboost -- g++8 compilation fails when g++7 succeeds;", "body": "<p>I have the code sample on a <a href=\"https://github.com/joaomlneto/clang-tidbit\" rel=\"nofollow noreferrer\">github repository</a> and created a build on <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit\" rel=\"nofollow noreferrer\">travis-ci</a> for easy reproduction.</p>\n\n<h1>Minimal, Complete and Verifiable Example</h1>\n\n<p><em>probably not minimal, but I believe it's small enough</em></p>\n\n<p>It creates a shared memory region using the <code>boost.interprocess</code> library (<code>boost::interprocess::managed_shared_memory</code>) and then creates a regular STL <code>unordered_map</code> using this regions' allocator from boost library.</p>\n\n<p>The code is a stripped down version from my currently-closed-source library, inspired by the answer in the question <a href=\"https://stackoverflow.com/a/49738871/4288486\"><em>std::unordered_map with boost::interprocess allocator in shared memory - drawbacks?</em></a> by <a href=\"https://stackoverflow.com/users/85371/sehe\">sehe</a></p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n#include &lt;sys/syscall.h&gt;\n#include &lt;functional&gt;\n#include &lt;memory&gt;\n#include &lt;unordered_map&gt;\n#include &lt;string&gt;\n#include &lt;boost/interprocess/allocators/allocator.hpp&gt;\n#include &lt;boost/interprocess/managed_shared_memory.hpp&gt;\n#include &lt;boost/interprocess/shared_memory_object.hpp&gt;\n\nclass Thing {\n public:\n  volatile Thing *_parent;\n  explicit Thing(Thing *parent) : _parent(parent) {}\n};\n\nnamespace ipc = boost::interprocess;\nusing Segment = ipc::managed_shared_memory;\nusing Manager = Segment::segment_manager;\ntemplate &lt;typename T&gt; using Alloc = ipc::allocator&lt;T, Manager&gt;;\ntemplate &lt;typename K, typename V, typename KH = std::hash&lt;K&gt;, typename KEq = std::equal_to&lt;K&gt;&gt;\nusing HashMap = std::unordered_map&lt;K, V, KH, KEq, Alloc&lt;void&gt;&gt;;\ntypedef HashMap&lt;pid_t, Thing&gt; ThingMap;\n\nint main() {\n        boost::interprocess::shared_memory_object::remove(\"test\");\n        Segment my_segment{ipc::create_only, \"test\", 1ul&lt;&lt;40};\n        Manager *my_manager = my_segment.get_segment_manager();\n        ThingMap *my_map = my_segment.find_or_construct&lt;ThingMap&gt;(\"my_map\")(my_manager);\n        my_map-&gt;emplace(123, nullptr);\n        printf(\"Hello world\\n\");\n        return 0;\n}\n</code></pre>\n\n<h1>Questions</h1>\n\n<h2>1. <code>clang++</code> requires <code>g++</code> installed?</h2>\n\n<p>Using Ubuntu 14.04, if I install <code>clang++-6.0</code> or <code>clang++-5.0</code> without updating <code>g++</code> (default is version 4.9), I end up with compilation errors.</p>\n\n<ul>\n<li><a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140063081\" rel=\"nofollow noreferrer\">clang 6 without g++</a></li>\n<li><a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140063083\" rel=\"nofollow noreferrer\">clang 6 with g++</a></li>\n</ul>\n\n<p>This is related to not having <code>libc++</code> installed and <code>clang</code> not installing a c++ library by default and resorting to using what's in the system -- the one bundled with <code>g++-4.9</code>?</p>\n\n<h2>2. Does my code require GNU extensions?</h2>\n\n<p>Apparently if I specify <code>-std=c++17</code>, it will fail with <code>g++-8</code>. However, it will succeed with <code>g++-7</code> and <code>g++-6</code>.</p>\n\n<ul>\n<li>g++-8 <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140063078\" rel=\"nofollow noreferrer\">with extensions succeeds</a> VS <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140061463\" rel=\"nofollow noreferrer\">without extensions fails</a></li>\n<li>g++-7 <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140063079\" rel=\"nofollow noreferrer\">with extensions succeeds</a> VS <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140061464\" rel=\"nofollow noreferrer\">without extensions succeeds</a></li>\n<li>g++-6 <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140063080\" rel=\"nofollow noreferrer\">with extensions succeeds</a> VS <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/jobs/140061465\" rel=\"nofollow noreferrer\">without extensions succeeds</a></li>\n</ul>\n\n<p>Since I was installing <code>g++-8</code> in the clang builds, they also fail. My guess is that if I used <code>g++-7</code>, they would have succeeded. <a href=\"https://travis-ci.com/joaomlneto/clang-tidbit/builds/81896897\" rel=\"nofollow noreferrer\">Build details with <code>-std=c++17</code></a></p>\n\n<hr>\n\n<p>Any best-practices advice is greatly appreciated. This is one of my few first attempts in using <code>clang</code> in <code>travis-ci</code>, or <code>clang</code> in general.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1534336230, "post_id": 51858657, "comment_id": 90669477, "body": "Needs <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> . I suspect that some nasty macro is interfering."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1534336290, "post_id": 51858657, "comment_id": 90669509, "body": "Do your existing files have &quot;.c&quot; or &quot;.cpp&quot; extension?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1534337217, "post_id": 51858657, "comment_id": 90670033, "body": "C language doesn&#39;t have the above headers. You are probably compiling a C program because your source files end with a <i>.c</i> extension."}], "answers": [{"tags": [], "owner": {"reputation": 3527, "user_id": 485539, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/d10de06616c8f4661387c74a4a40ec22?s=128&d=identicon&r=PG", "display_name": "codeLover", "link": "https://stackoverflow.com/users/485539/codelover"}, "is_accepted": false, "score": 0, "last_activity_date": 1534337812, "creation_date": 1534337812, "answer_id": 51859159, "question_id": 51858657, "link": "https://stackoverflow.com/questions/51858657/adding-c-headers-is-breaking-visual-studio-project-compilation/51859159#51859159", "title": "Adding C++ headers is breaking Visual studio project compilation", "body": "<p>I could get this issue fixed by:\nAdding the macro _XKEYCHECK_H to preprocessor definition.</p>\n"}], "owner": {"reputation": 3527, "user_id": 485539, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/d10de06616c8f4661387c74a4a40ec22?s=128&d=identicon&r=PG", "display_name": "codeLover", "link": "https://stackoverflow.com/users/485539/codelover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 933, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534337812, "creation_date": 1534335915, "question_id": 51858657, "link": "https://stackoverflow.com/questions/51858657/adding-c-headers-is-breaking-visual-studio-project-compilation", "title": "Adding C++ headers is breaking Visual studio project compilation", "body": "<p>I've an existing  VS2017 project (Not sure if it's pure C or a C/C++ project) which compiles perfectly fine till i add the below C++ header files. </p>\n\n<pre><code>&lt;string&gt;\n&lt;vector&gt;\n&lt;iostream&gt;\n</code></pre>\n\n<p>The moment i add any of the below C++ header files, it starts throwing the errors as below:</p>\n\n<pre><code>1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdint(17): error C2061: syntax error: identifier 'std'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdint(17): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdint(17): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdint(57): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(19): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(19): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(20): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(22): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(29): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(29): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(30): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cstdlib(32): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(16): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(16): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(17): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(22): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(29): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(29): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(30): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(32): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(39): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(39): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(40): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(42): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(49): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(49): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(50): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(52): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(59): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(59): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(60): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(62): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(70): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(70): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(71): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(73): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(80): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(80): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(81): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(83): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(90): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(90): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(91): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(93): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(100): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(100): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(101): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(103): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(110): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(110): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(111): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(113): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(120): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(120): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(121): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(123): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(131): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(131): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(132): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(134): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(141): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(141): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(142): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(144): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(151): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(151): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(152): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(154): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(161): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(161): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(162): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(164): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(171): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(171): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(172): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(174): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(181): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(181): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(182): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(184): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(191): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(191): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(192): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(194): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(201): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(201): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(202): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(204): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(211): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(211): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(212): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(214): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(221): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(221): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(222): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(224): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(232): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(232): error C2059: syntax error: ';'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(233): error C2449: found '{' at file scope (missing function header?)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(235): error C2059: syntax error: '}'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(243): error C2061: syntax error: identifier 'noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.14.26428\\include\\cmath(243): fatal error C1003: error count exceeds 100; stopping compilation\n</code></pre>\n\n<blockquote>\n  <p>Not sure how do I fix this. How can i make my VS2017 project consume\n  C++ headers also ?</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1534335155, "post_id": 51858417, "comment_id": 90668986, "body": "It is not the 4th Item. It&#39;s the first. You can try with an array of all different values. The problem is, you are incrementing the pointer at some point, so it will skip some values!"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1534335759, "post_id": 51858417, "comment_id": 90669255, "body": "I honestly don&#39;t see the point of <code>px</code> in this code whatsoever. And your abuse of pre and post increment operators on <code>py</code> with each iteration is a logistical nightmare.<a href=\"https://stackoverflow.com/questions/3986361/behavior-of-post-increment-in-cout\">You may find this question and answer informative</a>"}, {"owner": {"reputation": 191, "user_id": 2804967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DhmT.jpg?s=128&g=1", "display_name": "Jose Enrique Calderon", "link": "https://stackoverflow.com/users/2804967/jose-enrique-calderon"}, "reply_to_user": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1534335871, "post_id": 51858417, "comment_id": 90669308, "body": "@PhoenixBlue I change the array sample. Continues to read from the 4th item. I don&#39;t see the increment anywhere.  py=number+x.  But x is 0 when starting the loop."}, {"owner": {"reputation": 82, "user_id": 7496473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ab8d801d910107a792516a39683192d?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Areeb", "link": "https://stackoverflow.com/users/7496473/muhammad-areeb"}, "edited": false, "score": 1, "creation_date": 1534335881, "post_id": 51858417, "comment_id": 90669312, "body": "<code>py</code> has its own memory allocated, <code>number</code> has its own memory allocated, and from your output, you have printed memory allocations of variable <code>py</code>, so it can not state the memory location of any of the item of <code>number</code>, therfore you cannot say if your output in anyway pointing any location of the list."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1534335961, "post_id": 51858417, "comment_id": 90669351, "body": "@JoseECalderon &#39;I don&#39;t see the increment anywhere&#39; what do you think <code>py++</code> and <code>++py</code> are?"}, {"owner": {"reputation": 191, "user_id": 2804967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DhmT.jpg?s=128&g=1", "display_name": "Jose Enrique Calderon", "link": "https://stackoverflow.com/users/2804967/jose-enrique-calderon"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1534336288, "post_id": 51858417, "comment_id": 90669506, "body": "@john .. yes..you are correct. But the instruction is AFTER the actual first cout of py.. Therefore .. why the increment is occurring in the 4th column of the first line?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1534336343, "post_id": 51858417, "comment_id": 90669540, "body": "@JoseECalderon No it isn&#39;t. You are misunderstanding how C++ occurs. In an expression the pieces can be evaluated in any order (with some exceptions). There is no guarantee that it will be evaluated left to right. Some compilers will go right to left, and some will do something else."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1534336496, "post_id": 51858417, "comment_id": 90669616, "body": "@JoseECalderon You should read the link that Whozcraig posted, it will explain your misunderstanding."}, {"owner": {"reputation": 191, "user_id": 2804967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DhmT.jpg?s=128&g=1", "display_name": "Jose Enrique Calderon", "link": "https://stackoverflow.com/users/2804967/jose-enrique-calderon"}, "edited": false, "score": 0, "creation_date": 1534336925, "post_id": 51858417, "comment_id": 90669857, "body": "@Jabberwocky  edited post to show my expected result.  I want to forth column to list each item of the array."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1534337044, "post_id": 51858417, "comment_id": 90669923, "body": "OK, john&#39;s answer is correct. Your problems comes from the abuse of the <code>++</code> operator. Also read WhozCraig&#39;s comment."}, {"owner": {"reputation": 191, "user_id": 2804967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DhmT.jpg?s=128&g=1", "display_name": "Jose Enrique Calderon", "link": "https://stackoverflow.com/users/2804967/jose-enrique-calderon"}, "edited": false, "score": 0, "creation_date": 1534337789, "post_id": 51858417, "comment_id": 90670336, "body": "@ WhozCraig  px is a pointer .  &amp;x is filling the variable with an address."}], "answers": [{"comments": [{"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1534336294, "post_id": 51858618, "comment_id": 90669513, "body": "Would be nice if you could provide an explanation for your statement. Does this lead to undefined behaviour?"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1534336535, "post_id": 51858618, "comment_id": 90669638, "body": "Pretty sure it doesn&#39;t, due to the associativity. I.e. <code>cout &lt;&lt; x++ &lt;&lt; x++;</code> is no different than <code>cout &lt;&lt; x++; cout &lt;&lt; x++;</code>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 1, "creation_date": 1534336566, "post_id": 51858618, "comment_id": 90669658, "body": "@datell To be honest I&#39;m not sure. I think the totally correct answer depends on the version of C++ in any case. I think &#39;don&#39;t do this&#39; is enough."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1534336627, "post_id": 51858618, "comment_id": 90669699, "body": "@DanM. But this is defintely wrong. Your second code is fine, your first is undefined behaviour or unspecified behaviour (I&#39;m not sure which)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1534336813, "post_id": 51858618, "comment_id": 90669790, "body": "@DanM.: Associativity determines how the code is parsed, not how it&#39;s executed. And your two examples are certainly different. <i>Statements</i> in C++ are sequenced in program order, but <i>subexpressions</i> are not."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1534336873, "post_id": 51858618, "comment_id": 90669826, "body": "@DanM. &quot;...is not different than...&quot;, you&#39;re mistaken. An equivalent expression is considerably more complicated than that. it looks like this: <code>operator &lt;&lt;(operator &lt;&lt;(cout,x++), x++)</code> In fact, that is literally what the compiler sees as it compounds <code>cout &lt;&lt; x++ &lt;&lt; x++;</code>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1534336930, "post_id": 51858618, "comment_id": 90669862, "body": "@john: It would normally be only unspecified behavior. In this case, <code>py</code> also overflows <code>number[ ]</code>, which turns the unspecified behavior into undefined behavior."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1534337836, "post_id": 51858618, "comment_id": 90670361, "body": "@WhozCraig yes. And it has exact same meaning as <code>x++; cout &lt;&lt; x++;</code> which I said. I&#39;m not stating that every <code>x op y op z</code> is equivalent to <code>x op y; x op z;</code> that&#39;d be ridiculous. it was undefined before, but pretty sure it became well-defined in C++17. Or at very least unspecified (<code>cout &lt;&lt; x &lt;&lt; x++;</code> is 100% defined though)."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 2, "creation_date": 1534338031, "post_id": 51858618, "comment_id": 90670477, "body": "More precisely, pretty sure that the expected behavior is guaranteed by these two clauses: More precisely: <code>Every overloaded operator obeys the sequencing rules of the built-in operator it overloads when called using operator notation.</code> and <code>In a shift operator expression E1&lt;&lt;E2 and E1&gt;&gt;E2, every value computation and side-effect of E1 is sequenced before every value computation and side effect of E2</code>. So it looks like since C++17  <code>cout &lt;&lt; x++ &lt;&lt; x++;</code> indeed has different semantics than <code>operator &lt;&lt;(operator &lt;&lt;(cout,x++), x++)</code>"}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 5, "last_activity_date": 1534337354, "last_edit_date": 1534337354, "creation_date": 1534335745, "answer_id": 51858618, "question_id": 51858417, "link": "https://stackoverflow.com/questions/51858417/trouble-debugging-c-code-pointer-in-visual-studio/51858618#51858618", "title": "trouble debugging c++ code pointer in Visual studio", "body": "<p>This code is a problem <code>py++ &lt;&lt; \", \" &lt;&lt; *(py++) &lt;&lt; \", \" &lt;&lt; *(++py)</code>.</p>\n\n<p>In C++ you should not use multiple increments of the same variable in the same expression.</p>\n\n<p>Rewrite your code like this</p>\n\n<pre><code>cout &lt;&lt; x+1 &lt;&lt; \", \" &lt;&lt; px &lt;&lt; \", \" &lt;&lt; *px &lt;&lt; \", \" &lt;&lt; py &lt;&lt; \", \" &lt;&lt;  *py &lt;&lt; \", \";\ncout &lt;&lt; py++ &lt;&lt; \", \";\ncout &lt;&lt; *(py++) &lt;&lt; \", \";\ncout &lt;&lt; *(++py) &lt;&lt; \"  \\n\";\n</code></pre>\n\n<p>That should fix some of the problems although as Msalters says you have other problems as well.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 4, "last_activity_date": 1534336279, "creation_date": 1534336279, "answer_id": 51858746, "question_id": 51858417, "link": "https://stackoverflow.com/questions/51858417/trouble-debugging-c-code-pointer-in-visual-studio/51858746#51858746", "title": "trouble debugging c++ code pointer in Visual studio", "body": "<p><code>py</code> overflows, when <code>x==13</code>, and so <code>py=&amp;number[13]</code> before you increment it twice. That is Undefined Behavior, which may result in any outcome. </p>\n\n<p>You probably will have more issues once you've fixed this, but Undefined Behavior is so severe that you cannot reason about minor bugs in the presence of UB. UB is so bad, it can appear to \"travel back in time\". You can't say \"Foo happened before the UB, so it should be unaffected by it\". Since UB can do anything, it can also change the past. </p>\n"}], "owner": {"reputation": 191, "user_id": 2804967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DhmT.jpg?s=128&g=1", "display_name": "Jose Enrique Calderon", "link": "https://stackoverflow.com/users/2804967/jose-enrique-calderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 51858618, "answer_count": 2, "score": 0, "last_activity_date": 1534337354, "creation_date": 1534334856, "last_edit_date": 1534336850, "question_id": 51858417, "link": "https://stackoverflow.com/questions/51858417/trouble-debugging-c-code-pointer-in-visual-studio", "title": "trouble debugging c++ code pointer in Visual studio", "body": "<p>I will like to list each member of an array listed with its corresponding register address location. Here is my code</p>\n\n<pre><code>    // PointerDeferenceTest.cpp : Defines the entry point for the console application.\n    //\n    #include \"stdafx.h\"\n    #include &lt;iostream&gt;\n    using namespace std;\n    int main()\n    {\n        int x=0, y=0;\n        int *px, *py;\n\n        int number[15] = {-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9};\n        while (x&lt;14)\n        {\n            px = &amp;x;\n            py = number+x;\n            cout &lt;&lt; x+1 &lt;&lt; \", \" &lt;&lt; px &lt;&lt; \", \" &lt;&lt; *px &lt;&lt; \", \" &lt;&lt; py &lt;&lt; \", \" &lt;&lt;  *py &lt;&lt; \", \" &lt;&lt; py++ &lt;&lt; \", \" &lt;&lt; *(py++) &lt;&lt; \", \" &lt;&lt; *(++py) &lt;&lt; \"  \\n\";\n            ++x;\n        }\n        return 0;\n\n}\n</code></pre>\n\n<p>Running at 64 bits getting the following unexpected result</p>\n\n<pre><code>1, 000000D7532FF874, 0, 000000D7532FF904, -1, 000000D7532FF900, -3, -1\n2, 000000D7532FF874, 1, 000000D7532FF908, 0, 000000D7532FF904, -2, 0\n3, 000000D7532FF874, 2, 000000D7532FF90C, 1, 000000D7532FF908, -1, 1\n4, 000000D7532FF874, 3, 000000D7532FF910, 2, 000000D7532FF90C, 0, 2\n5, 000000D7532FF874, 4, 000000D7532FF914, 3, 000000D7532FF910, 1, 3\n6, 000000D7532FF874, 5, 000000D7532FF918, 4, 000000D7532FF914, 2, 4\n7, 000000D7532FF874, 6, 000000D7532FF91C, 5, 000000D7532FF918, 3, 5\n8, 000000D7532FF874, 7, 000000D7532FF920, 6, 000000D7532FF91C, 4, 6\n9, 000000D7532FF874, 8, 000000D7532FF924, 7, 000000D7532FF920, 5, 7\n10, 000000D7532FF874, 9, 000000D7532FF928, 8, 000000D7532FF924, 6, 8\n11, 000000D7532FF874, 10, 000000D7532FF92C, 9, 000000D7532FF928, 7, 9\n12, 000000D7532FF874, 11, 000000D7532FF930, 0, 000000D7532FF92C, 8, 0\n13, 000000D7532FF874, 12, 000000D7532FF934, -858993460, 000000D7532FF930, 9, -858993460\n14, 000000D7532FF874, 13, 000000D7532FF938, -858993460, 000000D7532FF934, 0, -858993460\n</code></pre>\n\n<p>I cannot figure out what I am doing wrong. The 4th column (py) is starting to list the 4th item in the array. But the code is set to read the first (number[0]).\nI amusing W10 Visual studio community 2017 compile 64 bit</p>\n\n<p><strong>UPDATE 1:</strong> In response to  PhoenixBlue comment. Amended the array sample to use different numbers.</p>\n\n<p><strong>UPDATE 2:</strong>  This is my expected result</p>\n\n<pre><code>   1, 000000D7532FF874, 0, 000000D7532FF904, -4, 000000D7532FF900, -3, -1\n    2, 000000D7532FF874, 1, 000000D7532FF908, -3, 000000D7532FF904, -2, 0\n    3, 000000D7532FF874, 2, 000000D7532FF90C, -2, 000000D7532FF908, -1, 1\n    4, 000000D7532FF874, 3, 000000D7532FF910, -1, 000000D7532FF90C, 0, 2\n    5, 000000D7532FF874, 4, 000000D7532FF914, 0, 000000D7532FF910, 1, 3\n    6, 000000D7532FF874, 5, 000000D7532FF918, 1, 000000D7532FF914, 2, 4\n    7, 000000D7532FF874, 6, 000000D7532FF91C, 2, 000000D7532FF918, 3, 5\n    8, 000000D7532FF874, 7, 000000D7532FF920, 3, 000000D7532FF91C, 4, 6\n    9, 000000D7532FF874, 8, 000000D7532FF924,4, 000000D7532FF920, 5, 7\n    10, 000000D7532FF874, 9, 000000D7532FF928, 5, 000000D7532FF924, 6, 8\n    11, 000000D7532FF874, 10, 000000D7532FF92C, 6, 000000D7532FF928, 7, 9\n    12, 000000D7532FF874, 11, 000000D7532FF930, 7, 000000D7532FF92C, 8, 0\n    13, 000000D7532FF874, 12, 000000D7532FF934, 8, 000000D7532FF930, 9, -858993460\n    14, 000000D7532FF874, 13, 000000D7532FF938, 9, 000000D7532FF934, 0, -858993460\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 1101, "user_id": 5549140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655070fb9cf51581b0a5017bc9464c23?s=128&d=identicon&r=PG&f=1", "display_name": "John Park", "link": "https://stackoverflow.com/users/5549140/john-park"}, "is_accepted": false, "score": 0, "last_activity_date": 1534334910, "creation_date": 1534334910, "answer_id": 51858431, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array/51858431#51858431", "title": "Returning the pointer address of a value within an array", "body": "<p>Your function find() requires the 'addresses' of the start/end of the array, but you're assigning the 'value' of the start/end of the array.</p>\n"}, {"tags": [], "owner": {"reputation": 568, "user_id": 3523471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ebad2262d496c7850b9324d97116a5?s=128&d=identicon&r=PG&f=1", "display_name": "BluesSolo", "link": "https://stackoverflow.com/users/3523471/bluessolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1534334944, "creation_date": 1534334944, "answer_id": 51858438, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array/51858438#51858438", "title": "Returning the pointer address of a value within an array", "body": "<p>Your <code>start</code> and <code>stop</code> variables need to be pointers. For example:</p>\n\n<pre><code>int *start = &amp;someArray[0];\nint *stop = &amp;someArray[9];\n</code></pre>\n\n<p>And be careful by using the line</p>\n\n<pre><code>cout &lt;&lt; *find(19, start, stop);\n</code></pre>\n\n<p>with another value that is not in the array. This results in an access violation because you try to derefence a <code>nullptr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "is_accepted": false, "score": 0, "last_activity_date": 1534334974, "creation_date": 1534334974, "answer_id": 51858451, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array/51858451#51858451", "title": "Returning the pointer address of a value within an array", "body": "<p>An asterisk (*) dereferences a pointer. That is, it gives you the value at the address. An ampersand (&amp;) gets the pointer to a value. The start and stop pointers should be the addresses of the first and last values.</p>\n\n<p>If you turn on more warnings, the compiler might tell you that you are dereferencing something that is not a pointer and you are passing <code>int</code> values to the function where pointers are expected.</p>\n\n<pre><code>int *start = &amp;someArray[0];\nint *stop = &amp;someArray[9];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1534335446, "creation_date": 1534335446, "answer_id": 51858552, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array/51858552#51858552", "title": "Returning the pointer address of a value within an array", "body": "<p>The start and stop pointers should be initialized appropriately:  </p>\n\n<pre><code>int* start = &amp;someArray[0];\nint* stop = &amp;someArray[9];\n</code></pre>\n\n<p>You also want to know the <code>index</code> of the array where the <code>target</code> is at (and not the <code>target</code> itself), so you have to change the line: </p>\n\n<pre><code>cout &lt;&lt; *find(19, start, stop);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>cout &lt;&lt; find(19, start, stop) - someArray ;\n</code></pre>\n\n<p>In this way, you will not be in the danger of accessing the <code>nullptr</code>.\nIf a negative value is printed, it would mean that the <code>target</code> is not in <code>someArray</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1534337096, "post_id": 51858577, "comment_id": 90669960, "body": "Why switch to a vector?  <code>std::find</code> works just fine with a regular array."}], "tags": [], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "is_accepted": false, "score": 1, "last_activity_date": 1534337271, "last_edit_date": 1534337271, "creation_date": 1534335544, "answer_id": 51858577, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array/51858577#51858577", "title": "Returning the pointer address of a value within an array", "body": "<p>I would use <code>std::find</code> and <code>std::distance</code>, to get the index of the value.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nint main() {\n    const int someArray [] = {3,10,19,7,3,45,123,4,9,89};\n    const int len = sizeof(someArray) / sizeof(int);\n\n    const auto it = std::find(&amp;someArray[0], &amp;someArray[len], 19);\n\n    std::cout &lt;&lt; std::distance(&amp;someArray[0], it);\n    return 0;\n}\n</code></pre>\n\n<p>or if you use <code>std::array</code> or another std container you can use <code>.begin()</code> and <code>.end()</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nint main() {\n    const std::array&lt;int,10&gt; someArray = {3,10,19,7,3,45,123,4,9,89};     \n\n    const auto it = std::find(someArray.begin(), someArray.end(), 19);\n\n    std::cout &lt;&lt; std::distance(someArray.begin(),it);\n    return 0;\n}\n</code></pre>\n\n<p>You can use </p>\n\n<pre><code>const auto start = someArray.begin() + value;\n</code></pre>\n\n<p>and likewise <code>stop</code> to norrow the search area of <code>someArray</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 0, "last_activity_date": 1534348590, "creation_date": 1534348590, "answer_id": 51862191, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array/51862191#51862191", "title": "Returning the pointer address of a value within an array", "body": "<p>If you have C++11 (which you should), then <code>std::end</code> is specialized for arrays.</p>\n\n<p>You can avoid either having to hard-code the array size as the magic number <code>9</code>, or writing out the <code>sizeof(someArray)/sizeof(someArray[0])</code> incantation (which is itself at least better than hardcoding the type in your sizeof expression).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nint main() {\n    const int someArray [] = {3,10,19,7,3,45,123,4,9,89};\n\n    const auto it = std::find(std::begin(someArray), std::end(someArray), 19);\n\n    std::cout &lt;&lt; std::distance(std::begin(someArray), it);\n    return 0;\n}\n</code></pre>\n\n<p>If you <em>do</em> want to use your custom <code>find</code> function, note that <code>begin</code> and <code>end</code> just return pointers in this case anyway, and <code>it</code> will also be a pointer in the code above.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1534354401, "last_edit_date": 1534354401, "creation_date": 1534354040, "answer_id": 51863561, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array/51863561#51863561", "title": "Returning the pointer address of a value within an array", "body": "<p>As other answers have stated, your <code>start</code> and <code>stop</code> variables need to be <code>int*</code> pointers, and you need to use the <code>&amp;</code> address operator instead of the <code>*</code> dereference operator to obtain those pointers:</p>\n\n<pre><code>int *start = &amp;someArray[0];\nint *stop = &amp;someArray[9];\n</code></pre>\n\n<p>However, there is another, more subtle, bug in your code.  As the documented requirement states:  </p>\n\n<blockquote>\n  <p>The search should begin by examining the element at <code>start</code> and <strong>end at <code>stop</code> without examining that value</strong>.</p>\n</blockquote>\n\n<p>But your code is examining the value at <code>stop</code>.  This is because you are using the <code>&lt;=</code> operator, when you should be using the <code>&lt;</code> operator instead:</p>\n\n<pre><code>//while (start &lt;= stop)\nwhile (start &lt; stop)\n</code></pre>\n\n<p>Making this change then creates a new bug in your <code>main()</code> code.  <code>someArray[9]</code> is the last element in the array (89).  After making the above change, this element will no longer be compared when using <code>someArray[9]</code> for the <code>stop</code> pointer.  So, if you were to call <code>find(89, start, stop)</code>, it would return <code>nullptr</code> instead of the address of <code>someArray[9]</code>.  As such, you need to set <code>stop</code> to the address of <code>someArray[10]</code> instead:</p>\n\n<pre><code>int *stop = &amp;someArray[10];\n</code></pre>\n\n<p>This is on par with how STL algorithms works with iterator ranges (and raw pointers are also iterators).  The ending iterator always represents \"1-past-the-end\" and is never dereferenced, only used for comparing when the starting iterator reaches the ending iterator.  The C++ standard also explicitly allows obtaining a pointer to \"1-past-the-end\" of an array, for similar reasons.</p>\n\n<p>With that said, try something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\n\nint* find(int target, int* start, int* stop)\n{    \n    while (start &lt; stop)\n    {\n        if (*start == target)\n        {\n            return start;\n        }    \n        ++start;\n    }\n\n    return nullptr;\n}\n\nint main()\n{\n    int someArray[] = {3,10,19,7,3,45,123,4,9,89};\n\n    int *start = &amp;someArray[0];\n    int *stop = &amp;someArray[10];\n\n    std::cout &lt;&lt; \"Enter a number to find: \";\n\n    int num;\n    std::cin &gt;&gt; num;\n\n    int *found = find(num, start, stop);\n    if (found)\n        std::cout &lt;&lt; \"Found at index \" &lt;&lt; static_cast&lt;ptrdiff_t&gt;(found - start);\n    else\n        std::cout &lt;&lt; \"Not found\";\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/uHogQF\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10229099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 7, "score": -1, "last_activity_date": 1534354401, "creation_date": 1534334472, "last_edit_date": 1534352188, "question_id": 51858306, "link": "https://stackoverflow.com/questions/51858306/returning-the-pointer-address-of-a-value-within-an-array", "title": "Returning the pointer address of a value within an array", "body": "<p>I am required to find the address of a matching value in an array, as stated in the following question:</p>\n\n<blockquote>\n  <p>This function searches length elements of array list for the value target. It returns the index where target was found, or -1 if the value is not present.</p>\n\n<pre><code>int find(int target, int list[], int length) {\n  for (int i = 0; i &lt; length; ++i) {\n      if (list[i] == target) return i;\n  }\n  return -1;\n}\n</code></pre>\n  \n  <p>Rewrite the function using pointers to indicate the search range. The search should begin by examining the element at start and end at stop without examining that value. The return value should be a pointer to the location of the target value or a null pointer if the values is not present. </p>\n</blockquote>\n\n<p>The code I have is here, but I can't seem to get it to work:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint* find(int target, int* start, int* stop)\n{    \n    while(start &lt;= stop)\n    {\n        if (*start == target)\n        {\n            return start;\n        }    \n        start++;\n    }\n\n    return nullptr;\n}\n\nint main()\n{\n    int someArray[] = {3,10,19,7,3,45,123,4,9,89};\n\n    int start = *someArray[0];\n    int stop = *someArray[9];\n\n    cout &lt;&lt; *find(19, start, stop);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 3, "creation_date": 1534334011, "post_id": 51858153, "comment_id": 90668453, "body": "<code>MainWindow w;</code> is a local variable so it will be destroyed and consequently nobody will receive the message, change it to <code>MainWindow *w = new MainWindow;</code>"}, {"owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534334931, "post_id": 51858153, "comment_id": 90668874, "body": "It works.Thanks."}, {"owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534335126, "post_id": 51858153, "comment_id": 90668969, "body": "I edited the Question why label not change ?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1534335259, "post_id": 51858153, "comment_id": 90669030, "body": "I was afraid of that, but the problem is different: it is your lack of knowledge of OOP, in OOP the classes are abstractions, so you have 2 objects: one that creates in MyTime and another one that creates in main.cpp, in In this case the changed signal will notify the object that points to it instead of the window that is displayed. Please review the basic OOP concepts."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534335354, "post_id": 51858153, "comment_id": 90669079, "body": "in yout main.cpp: <code>... MainWindow w; MyTime mytyme; QObject::connect(&amp;mytime, &amp;MyTime::changed, &amp;w, &amp;MainWindow::onChanged); w.show(); ...</code>"}, {"owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534335703, "post_id": 51858153, "comment_id": 90669227, "body": "It did the magic my friend thanks."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1534335879, "post_id": 51858153, "comment_id": 90669310, "body": "I did not do any magic, I only use the basic concepts of OOP, you should take it into account and this saves us our time."}], "owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534335071, "creation_date": 1534333863, "last_edit_date": 1534335071, "question_id": 51858153, "link": "https://stackoverflow.com/questions/51858153/emit-signal-not-working", "title": "Emit signal not working", "body": "<p>when i call <code>emit changed(\"From Timer\");</code>It doen't send a signal and slot won't be called.</p>\n\n<pre><code>MyTime::MyTime(QObject *parent) : QTimer(parent)\n{\ntimer = new QTimer(this);\nMainWindow w;\nconnect(timer,SIGNAL(timeout()),this,SLOT(printMe()));\nconnect(this,SIGNAL(changed(QString)),&amp;w,SLOT(onChanged(QString)));\n}\n\nvoid MyTime::printMe()\n{\n\nemit changed(\"From Timer\");\nqDebug() &lt;&lt; \"i\";\n}\n</code></pre>\n\n<p>Here is Slot but not change in label:</p>\n\n<pre><code>void MainWindow::onChanged(QString name)\n{\n    qDebug() &lt;&lt; \"j\";\n    ui-&gt;label-&gt;setText(name);\n}\n</code></pre>\n\n<p>It prints the \"j\" but the label no changes.</p>\n"}, {"tags": ["c++", "function", "directx"], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1534334083, "creation_date": 1534334083, "answer_id": 51858212, "question_id": 51858139, "link": "https://stackoverflow.com/questions/51858139/c-d3d11-weird-behavior-function-is-called-2-times/51858212#51858212", "title": "C++ [D3D11] - Weird behavior, function is called 2 times", "body": "<p>Lets look at the <code>HR</code> macro:</p>\n\n<pre><code>#define HR(hr) \\\nif(FAILED(hr)) { \\\n    std::ostringstream ss; \\\n    ss &lt;&lt; \"FILE: \" &lt;&lt; __FILE__ &lt;&lt; std::endl &lt;&lt; std::endl; \\\n    ss &lt;&lt; \"LINE: \" &lt;&lt; __LINE__ &lt;&lt; std::endl &lt;&lt; std::endl; \\\n    ss &lt;&lt; \"HRESULT = \" &lt;&lt; (hr) &lt;&lt; std::endl; \\\n    throw std::exception(ss.str().c_str()); \\\n}\n</code></pre>\n\n<p>You use the \"argument\" <code>hr</code> <em>twice</em> in the function, once in <code>FAILED(hr)</code> and once when you print the result. That means <code>hr</code> will be evaluated twice. If you use a function call as the macro argument then the function will be called twice.</p>\n\n<p>The reason for this is because macros are not \"called\" at run-time, instead they <em>replace</em> the code before the C++ parser gets to the code.</p>\n\n<p>This is <em>one</em> major reason macros are often frowned upon, especially in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 9846962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mantresh", "link": "https://stackoverflow.com/users/9846962/mantresh"}, "edited": false, "score": 0, "creation_date": 1534470112, "post_id": 51858501, "comment_id": 90725995, "body": "Hey,man I think the HR_check() function should be like &quot;HR_check(HRESULT hr, const char* file, int line)&quot;. Since <b>LINE</b> macro is interpreted as an integer."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 27, "user_id": 9846962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mantresh", "link": "https://stackoverflow.com/users/9846962/mantresh"}, "edited": false, "score": 0, "creation_date": 1534479058, "post_id": 51858501, "comment_id": 90727558, "body": "@Mantresh Thanks. (I get that wrong <i>every time</i>. It&#39;s amazing.)"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 2, "last_activity_date": 1534478929, "last_edit_date": 1534478929, "creation_date": 1534335176, "answer_id": 51858501, "question_id": 51858139, "link": "https://stackoverflow.com/questions/51858139/c-d3d11-weird-behavior-function-is-called-2-times/51858501#51858501", "title": "C++ [D3D11] - Weird behavior, function is called 2 times", "body": "<p>Expand <code>HR(CompileShader(L\"simple.lsl\", \"VSMain\", \"vs_5_0\", shaderBytecode.GetAddressOf()));</code>:</p>\n\n<pre><code>if(FAILED(CompileShader(L\"simple.lsl\", \"VSMain\", \"vs_5_0\", shaderBytecode.GetAddressOf())))) { \\\n    std::ostringstream ss; \\\n    ss &lt;&lt; \"FILE: \" &lt;&lt; __FILE__ &lt;&lt; std::endl &lt;&lt; std::endl; \\\n    ss &lt;&lt; \"LINE: \" &lt;&lt; __LINE__ &lt;&lt; std::endl &lt;&lt; std::endl; \\\n    ss &lt;&lt; \"HRESULT = \" &lt;&lt; (CompileShader(L\"simple.lsl\", \"VSMain\", \"vs_5_0\", shaderBytecode.GetAddressOf()))) &lt;&lt; std::endl; \\\n    throw std::exception(ss.str().c_str()); \\\n};\n</code></pre>\n\n<p>You can see the problem now.</p>\n\n<p>Since you want <code>__FILE__</code> and <code>__LINE__</code>, you can use a function that takes the file and line as parameters</p>\n\n<pre><code>void HR_check(HRESULT hr, const char* file, int line)\n{\n    if (FAILED(hr)) {\n        std::ostringstream ss;\n        ss &lt;&lt; \"FILE: \" &lt;&lt; file &lt;&lt; std::endl &lt;&lt; std::endl;\n        ss &lt;&lt; \"LINE: \" &lt;&lt; line &lt;&lt; std::endl &lt;&lt; std::endl;\n        ss &lt;&lt; \"HRESULT = \" &lt;&lt; hr &lt;&lt; std::endl;\n        throw std::exception(ss.str().c_str());\n    }\n}\n</code></pre>\n\n<p>and combine it with a macro:</p>\n\n<pre><code>#define HR(fn) HR_check(fn, __FILE__, __LINE__)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9846962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mantresh", "link": "https://stackoverflow.com/users/9846962/mantresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 51858501, "answer_count": 2, "score": 2, "last_activity_date": 1534478929, "creation_date": 1534333807, "last_edit_date": 1534473057, "question_id": 51858139, "link": "https://stackoverflow.com/questions/51858139/c-d3d11-weird-behavior-function-is-called-2-times", "title": "C++ [D3D11] - Weird behavior, function is called 2 times", "body": "<p><em>THE SCENE:</em><br>\nSo, I have been learning D3D11 programming for the last 15 days now using \"3d game programming with DirectX11\" book by Frank Luna. I had done pretty well upto now. But because the book uses a deprecated D3DX11 library, I had to devise my own functions as replacement. <br><br>\nOne of it is a function to compile shaders. It is like this-\n<br><strong>Helpers.cpp</strong></p>\n\n<pre><code>#include \"Helpers.h\"\n\n\nHRESULT CompileShader(LPCWSTR srcFile, LPCSTR entryPoint, LPCSTR profile, ID3DBlob** blob)\n{\n    if(!srcFile || !entryPoint || !profile || !blob)\n        return E_INVALIDARG;\n\n    *blob = nullptr;\n\n    UINT flags = D3DCOMPILE_ENABLE_STRICTNESS;\n#if defined(DEBUG) || defined(_DEBUG)\n    flags |= D3DCOMPILE_DEBUG;\n#endif\n\n    ComPtr&lt;ID3DBlob&gt; errorBlob;\n\n    HRESULT hr = D3DCompileFromFile(\n        srcFile, nullptr, D3D_COMPILE_STANDARD_FILE_INCLUDE, \n        entryPoint, profile, flags, 0, &amp;blob, errorBlob.GetAddressOf());\n\n    if(errorBlob.Get())\n    {\n        MessageBoxA(0, (char*)errorBlob-&gt;GetBufferPointer(), \"Shader ERROR/WARNING\", MB_ICONINFORMATION);\n        errorBlob.Reset();\n    }\n\n    if(FAILED(hr))\n    {\n        (*blob)-&gt;Release();\n\n        std::wostringstream ss;\n        ss &lt;&lt; L\"Error in compiling shader: \" &lt;&lt; srcFile;\n        MessageBox(0, ss.str().c_str(), L\"ERROR\", MB_ICONERROR);\n\n        return hr;\n    }\n\n    return hr;\n}\n</code></pre>\n\n<p><em>NOTE: The file Helpers.h includes nothing but this function declaration and some includes.</em></p>\n\n<p><br><br>\nSome other helper functions/defines are:-<br></p>\n\n<ol>\n<li><p>Framework for D3D11 base code :-<br>\nIn <strong>D3DApp.h</strong><br></p>\n\n<pre><code>class D3DApp\n{\nprotected:\n     //Win32 related\n     HWND hWnd;\n     HINSTANCE hInst;\n     LPWSTR appName;\n     LPWSTR const className;\n\n     int wndWidth;\n     int wndHeight;\n\n     //Direct3D 11 related\n     ComPtr&lt;ID3D11Device&gt; pDevice;\n     ComPtr&lt;ID3D11DeviceContext&gt; pContext;\n     ComPtr&lt;IDXGISwapChain&gt; pSwapChain;\n     ComPtr&lt;ID3D11RenderTargetView&gt; pRenderTargetView;\n     ComPtr&lt;ID3D11DepthStencilView&gt; pDepthStencilView;\n     ComPtr&lt;ID3D11Texture2D&gt; pDepthStencilBuffer;\n     D3D11_VIEWPORT viewport;\n\n     //Can be used to tweak d3d11 settings\n     bool enable4xMSAA;\n     bool enableFullscreen;\n\n     //App states\n     bool isAppPaused;\n     bool isResizing;\n\n     //Others\n     Timer timer;\n     FrameStats stats;\n\n     bool isDestroyed;\n\n public:\n     D3DApp();\n     ~D3DApp();\n\n     virtual bool init();\n     virtual bool onResize();\n     virtual void update(float dt) = 0;\n     virtual void render() = 0;\n     virtual void destroy();\n     virtual void run();\n\n     virtual LRESULT msgProc(HWND, UINT, WPARAM, LPARAM);\n\n     virtual void onMouseDown(WPARAM btnState, int x, int y) {}\n     virtual void onMouseUp(WPARAM btnState, int x, int y) {}\n     virtual void onMouseMove(WPARAM btnState, int x, int y) {}\n\n     virtual void onKeyDown(WPARAM keyState) {};\n     virtual void onKeyUp(WPARAM keyState) {};\n\n private:\n     //Implementation meant to be hidden\n     //Not needed to be changed often\n     bool _initWindow();\n     bool _initD3D();\n };\n\n extern D3DApp* gD3DApp;\n LRESULT CALLBACK gMsgProc(HWND, UINT, WPARAM, LPARAM);\n</code></pre></li>\n<li><p>define to declare main() :-<br>\nIn <strong>D3DApp.h</strong><br></p>\n\n<pre><code>#ifndef IMPLEMENT_D3DAPP_MAIN\n#define IMPLEMENT_D3DAPP_MAIN(childClass) \\\nINT CALLBACK WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, INT nShowCmd) \\\n{ \\\n    childClass app; \\\n    try { \\\n        if(!app.init()) \\\n        { \\\n            app.destroy(); \\\n            return 1; \\\n        } \\\n        app.run(); \\\n    } \\\n    catch(std::exception&amp; e) \\\n    { \\\n        OutputDebugStringA(e.what()); \\\n        MessageBoxA(0, e.what(), \"ERROR\", MB_ICONERROR); \\\n        app.destroy(); \\\n        return 1; \\\n    } \\\n    app.destroy(); \\\n    return 0; \\\n}\n#endif //IMPLEMENT_D3DAPP_MAIN\n</code></pre></li>\n<li><p>And define for quick error checking :-<br>\nIn <strong>D3DApp.h</strong><br></p>\n\n<p><code>#define HR(hr) \\\nif(FAILED(hr)) { \\\n    std::ostringstream ss; \\\n    ss &lt;&lt; \"FILE: \" &lt;&lt; __FILE__ &lt;&lt; std::endl &lt;&lt; std::endl; \\\n    ss &lt;&lt; \"LINE: \" &lt;&lt; __LINE__ &lt;&lt; std::endl &lt;&lt; std::endl; \\\n    ss &lt;&lt; \"HRESULT = \" &lt;&lt; (hr) &lt;&lt; std::endl; \\\n    throw std::exception(ss.str().c_str()); \\\n}</code></p></li>\n</ol>\n\n<p>It works like when a function call fails. It is detected by HR() and it throws an std::exception, which is then caught in WinMain() try-catch block. Then the user can see the error in a MessageBox. <br>\n<br>It should work nicely.<br><br></p>\n\n<p>But in my app :-<br>\nIn <strong>main.cpp</strong><br></p>\n\n<pre><code>#include \"../Common/D3DApp.h\"\n#include \"../Common/Helpers.h\"\n#include &lt;sstream&gt;\n#include &lt;DirectXMath.h&gt;\n#include &lt;DirectXColors.h&gt;\n\n\nusing namespace DirectX;\n\n\nclass Drawing : public D3DApp\n{\npublic:\n    ComPtr&lt;ID3D11PixelShader&gt; PS;\n    ComPtr&lt;ID3D11VertexShader&gt; VS;\n\npublic:\n    bool init() override\n    {\n        appName = L\"Drawing in D3D11\";\n        if(!D3DApp::init())\n            return false;\n\n        //////////////////////////////////////////\n        //////////////SHADERS////////////////////\n        ComPtr&lt;ID3DBlob&gt; shaderBytecode;\n\n        HR(CompileShader(L\"simple.lsl\", \"VSMain\", \"vs_5_0\", shaderBytecode.GetAddressOf()));\n        HR(pDevice-&gt;CreateVertexShader(shaderBytecode-&gt;GetBufferPointer(), shaderBytecode-&gt;GetBufferSize(), nullptr, VS.GetAddressOf()));\n        shaderBytecode.Reset();\n\n        HR(CompileShader(L\"simple.hlsl\", \"PSMain\", \"ps_5_0\", shaderBytecode.GetAddressOf()));\n        HR(pDevice-&gt;CreatePixelShader(shaderBytecode-&gt;GetBufferPointer(), shaderBytecode-&gt;GetBufferSize(), nullptr, PS.GetAddressOf()));\n        shaderBytecode.Reset();\n        //////////////SHADERS////////////////////\n\n        //////////////SET STATES////////////////\n        pContext-&gt;PSSetShader(PS.Get(), nullptr, 0);\n        pContext-&gt;VSSetShader(VS.Get(), nullptr, 0);\n\n        pContext-&gt;IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);\n        //////////////SET STATES////////////////\n\n        /////////////////////////////////////////\n\n        return true;\n    }\n\n    void update(float deltaTime) override\n    {\n    }\n\n    void render() override\n    {\n        const float clearColour[4] = {0.f, 0.f, 1.f, 1.f};\n        pContext-&gt;ClearRenderTargetView(pRenderTargetView.Get(), clearColour);\n        pContext-&gt;ClearDepthStencilView(pDepthStencilView.Get(), D3D11_CLEAR_DEPTH|D3D11_CLEAR_STENCIL, 1.f, 1);\n\n        pContext-&gt;Draw(3, 0);\n\n        HR_PRESENT(pSwapChain-&gt;Present(0, 0));\n    }\n\n    void destroy() override\n    {\n        VS.Reset();\n        PS.Reset();\n\n        D3DApp::destroy();\n    }\n};\n\nIMPLEMENT_D3DAPP_MAIN(Drawing);\n</code></pre>\n\n<p>To test the HR() define, I <strong>purposely</strong> invalidated a function argument from <em>\"simple.hlsl\"</em> to <em>\"simple.lsl\"</em>, as you can see when compiling the vertex shader.</p>\n\n<p><em>THE RESULT:</em><br>\n1. The window is created. [OK]<br>\n2. A popup says, \"Error in compiling shader: simple.lsl\" [OK]<br>\n3. [Clicked ok]<br>\n4. Again the same popup shows with same message [WTH?]<br>\n5. [Clicked ok]<br>\n6. Last popup of try-catch block, describing the file, line and HRESULT of the error [OK]<br><br></p>\n\n<p>Sorry, if my English is bland.<br>\nThis may seem like a small problem. Yes, I can live with this. But it is very very annoying. Thanks for reading till here ;) <br>\nThanks in advance. </p>\n"}, {"tags": ["c++", "switch-statement", "do-while"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1534333587, "post_id": 51858069, "comment_id": 90668240, "body": "Why don&#39;t you just enter numbers, which is what your <code>switch</code> statement implies?"}, {"owner": {"reputation": 49, "user_id": 9751865, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0WaCHtLcIWI/AAAAAAAAAAI/AAAAAAAAABA/2UBQp7kfBmE/photo.jpg?sz=128", "display_name": "Lelouch Yagami", "link": "https://stackoverflow.com/users/9751865/lelouch-yagami"}, "edited": false, "score": 0, "creation_date": 1534334089, "post_id": 51858069, "comment_id": 90668494, "body": "What is the reason default statement is executed infinitely when i give a character input accidentally. Why &#39;cin&#39; is not blocking when it comes to next iteration?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1534334209, "post_id": 51858069, "comment_id": 90668548, "body": "You may want to do <code>if (cin&gt;&gt;choice) { switch... } else break;</code>.  Where the switch is the entire current switch block."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1534334401, "post_id": 51858069, "comment_id": 90668627, "body": "<b>Alwyas</b> check that input was successful. It just repeatedly fails. Has nothing to do with the <code>switch</code> statement at all. There are lots of questions/answers of that problem."}], "answers": [{"comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1534335023, "post_id": 51858137, "comment_id": 90668929, "body": "I didn\u2019t downvote but <i>this</i> is not the problem: formatted input skips leading whitespace."}], "tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": false, "score": -1, "last_activity_date": 1534333789, "creation_date": 1534333789, "answer_id": 51858137, "question_id": 51858069, "link": "https://stackoverflow.com/questions/51858069/cin-inside-loop-read-error/51858137#51858137", "title": "&#39;cin&#39; inside loop: read error", "body": "<p>The cout statement shouldnt be blocking, that would be the cin you are referring to.</p>\n\n<p>In this case, cin reading in the value, but NOT the newline after it, so the next time you read a value, you are reading the newline.</p>\n\n<p>So you need to read in the new line values before reading the next value.</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 4083102, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0oir7N7uG-E/AAAAAAAAAAI/AAAAAAAAAEc/WAYcQfFvg-E/photo.jpg?sz=128", "display_name": "Shweta Valunj", "link": "https://stackoverflow.com/users/4083102/shweta-valunj"}, "is_accepted": false, "score": -2, "last_activity_date": 1534336390, "last_edit_date": 1534336390, "creation_date": 1534334281, "answer_id": 51858259, "question_id": 51858069, "link": "https://stackoverflow.com/questions/51858069/cin-inside-loop-read-error/51858259#51858259", "title": "&#39;cin&#39; inside loop: read error", "body": "<p>Try the following code by giving end limit to choice variable.</p>\n\n<pre><code>main(){\nint choice;\n\n\n\ndo{\n        cout&lt;&lt;\"Enter your choice: \";\n        cin&gt;&gt;choice; //I'm giving character i/p even though 'choice' is int\n    switch(choice)\n    {\n        case 1:cout&lt;&lt;\"\\n 1 --\\n\";\n               break;\n\n        case 2:cout&lt;&lt;\"\\n 2 \\n\";\n               break;\n\n        case 3:cout&lt;&lt;\"\\n 3 \\n\";\n               break;\n\n        case 4:cout&lt;&lt;\"\\n 4 \\n\";\n               return 0;\n\n       default:cout&lt;&lt;\"An Invalid choice.\"&lt;&lt;endl;\n\n    }\n\n}while(choice&gt;4);\n\n    cout&lt;&lt;\"\\n Hello\";\n</code></pre>\n\n<p>}</p>\n\n<p>The <strong>break</strong> always breaks the innermost loop.</p>\n\n<p>A break statement terminates execution of the smallest enclosing <strong>switch</strong> or iteration statement.</p>\n\n<p>If you want to break out of both loops, use a label and jump with goto.\nSo basically its going into infinite loop since your break is only getting out from switch case.</p>\n"}], "owner": {"reputation": 49, "user_id": 9751865, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0WaCHtLcIWI/AAAAAAAAAAI/AAAAAAAAABA/2UBQp7kfBmE/photo.jpg?sz=128", "display_name": "Lelouch Yagami", "link": "https://stackoverflow.com/users/9751865/lelouch-yagami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1534334845, "answer_count": 2, "score": -1, "last_activity_date": 1534336390, "creation_date": 1534333446, "last_edit_date": 1534335418, "question_id": 51858069, "link": "https://stackoverflow.com/questions/51858069/cin-inside-loop-read-error", "closed_reason": "Duplicate", "title": "&#39;cin&#39; inside loop: read error", "body": "<p>When I give a character input to 'choice', default statement is executed repeatedly. 'cin' instruction is not blocking the execution.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nmain()\n{\n    int choice;\n\n\n\n    do{\n            cout&lt;&lt;\"Enter your choice: \";\n            cin&gt;&gt;choice; //I'm giving character i/p even though 'choice' is int\n        switch(choice)\n        {\n            case 1:cout&lt;&lt;\"\\n 1 \\n\";\n                   break;\n\n            case 2:cout&lt;&lt;\"\\n 2 \\n\";\n                   break;\n\n            case 3:cout&lt;&lt;\"\\n 3 \\n\";\n                   break;\n\n            case 4:cout&lt;&lt;\"\\n 4 \\n\";\n                   return 0;\n\n           default:cout&lt;&lt;\"An Invalid choice.\"&lt;&lt;endl;\n\n        }\n\n    }while(1);\n\n        cout&lt;&lt;\"\\n Hello\";\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "qt", "visual-studio-2015", "code-reuse"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534333937, "post_id": 51858062, "comment_id": 90668425, "body": "<a href=\"https://stackoverflow.com/a/24355288/5366641\">stackoverflow.com/a/24355288/5366641</a>"}, {"owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534337536, "post_id": 51858062, "comment_id": 90670196, "body": "Thank you. As far as I can see, that is not what I am looking for since I do want automatic connection instead of preventing it (the latter seems to be explained in the link). I cannot find any individual calls of &quot;connect&quot; in the source code of the original project, hence it must have been done automatically."}, {"owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534338715, "post_id": 51858062, "comment_id": 90670886, "body": "I have pasted all of the necessary ui-forms in the project directory. Moc&#39;ing, and such is done succesfully.  I doubt that ui-forms have a direct influence on how signal-slot-connections will be set up.  Correct me if I am wrong."}, {"owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534341940, "post_id": 51858062, "comment_id": 90672743, "body": "You&#39;re right about *.ui&#39;s creating connections. Btw, I am not experiencing these problems when setting up a new project. ConnectSlotsByName and connect work both, in this case. It must have something to do with wrong information in project files of Visual Studio."}, {"owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 1, "creation_date": 1534344941, "post_id": 51858062, "comment_id": 90674533, "body": "I added some of the code, I hope that it is helpful."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534345791, "post_id": 51858062, "comment_id": 90675051, "body": "Could it be that <code>on_pushButton_clicked</code> is declared in <i>navigation_gui.h</i>, but not implemented in <i>navigation_gui.cpp</i>?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534346309, "post_id": 51858062, "comment_id": 90675346, "body": "Apart from that, <code>QMetaObject::connectSlotsByName(Navigation_GuiClass);</code> should connect <code>pushButton</code> to the corresponding slot automatically, so there is no need to do that manually."}, {"owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534346857, "post_id": 51858062, "comment_id": 90675659, "body": "Yes, the slot is implemented. I thought failure of manual connection could be interesting since it should work in this case regardless, so there is definitely something wrong on a higher level. I will add the vs project file."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 1, "creation_date": 1534347103, "post_id": 51858062, "comment_id": 90675817, "body": "You know, because <code>No such slot Navigation_Gui::this-&gt;on_pushButton_clicked()</code> means - <i>no such slot</i>. So somehow it is not found. It is hard to tell without seeing the whole picture. Also there are some other things, which bother me, as for example the unnecessary use of <code>this</code> and the fact, that <code>ui</code> is not a pointer."}, {"owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534347227, "post_id": 51858062, "comment_id": 90675889, "body": "Since pushbutton is a pointer it shouldn&#39;t matter, correct?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534347385, "post_id": 51858062, "comment_id": 90675986, "body": "I agree about that. As for the missing slot, why don&#39;t you try to use the Qt5 way of connecting signals to slots. You will get a compile time error if something is wrong."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534347466, "post_id": 51858062, "comment_id": 90676029, "body": "instead of <code>connect(this-&gt;ui.pushButton, SIGNAL(clicked()), this, SLOT(on_pushButton_clicked()));</code> try <code>connect(this-&gt;ui.pushButton, &amp;PushButton::clicked, this, Navigation_Gui::on_pushButton_clicked);</code>."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534359422, "post_id": 51858062, "comment_id": 90681737, "body": "Did you try it? What is the result?"}, {"owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534409210, "post_id": 51858062, "comment_id": 90697492, "body": "That does not work. Wrong arguments. Appreciate your help very much, by the way."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534439996, "post_id": 51858062, "comment_id": 90716224, "body": "That was not intened to work, but to give you a compile-time error, which is easier to analyse, than the run-time error, caused by the old way of connecting signals and slots. Please, show the exact error message."}], "owner": {"reputation": 21, "user_id": 10212332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b07caf3ddaacd261a29d7cdd7100dc?s=128&d=identicon&r=PG&f=1", "display_name": "maxh92", "link": "https://stackoverflow.com/users/10212332/maxh92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534402083, "creation_date": 1534333433, "last_edit_date": 1534402083, "question_id": 51858062, "link": "https://stackoverflow.com/questions/51858062/reusing-a-cmake-built-qt-project-in-visual-studio-2015-connectslotsbyname-no", "title": "Reusing a cmake-built QT project in Visual Studio 2015: &quot;connectSlotsByName: No matching signal&quot;", "body": "<p>As mentioned above my task is to change the code of an existing visual studio project that uses QT 5.7. \nThe student who has worked on it before me built his project with cmake with which I am completely unfamiliar, while absolutely having no time to get into, unfortunately.</p>\n\n<p>My first attempt is to set up a new VS-project into which I paste all source files and QT-files necessary.\nThis has resulted in several problems, one of which was that I had to delete, save and rewrite <code>Q_OBJECT</code> in all Q-Classes.</p>\n\n<p>This tells me that the actual workflow is corrupting the project right from the beginning.</p>\n\n<p>With regards to this, my predecessor used <code>QMetaObject::connectSlotsByName</code> to connect signals and slots of Gui-Objects like Buttons. When debugging I get </p>\n\n<pre><code>QMetaObject::connectSlotsByName: No matching signal for on_[some Gui Obejct]_clicked()\n</code></pre>\n\n<p>for all of the existing QWidget-Childs in the GUI.</p>\n\n<p>This seems strange, because the signals of such buttons and so on, have to exist in moc-code (the corresponding slots exist of course), correct?</p>\n\n<p>There are a decent amount of Gui-elements existing in the project, so I prefer to not use connect for every single one of them.</p>\n\n<p>Questions:</p>\n\n<p>1.) Is there a recommended workflow, that will enable one to shoot oneself in the foot less often?\n2.) In order to enable Qt's Meta-Object-Compiler to create <code>ui_*.h</code>'s and <code>moc_*.cpp</code>'s it needs <code>*.ui</code>'s, <code>*.qrc</code>'s, and potential resource files, correct?\n3.) To what extent is it possible that the fact that the project was originally built with cmake affects Qt-meta compiling?</p>\n\n<p>Thank you very much in advance</p>\n\n<p>Edit: \nAdditional information and code sample of the QMainWindow-Class <code>Navigation_Gui</code>.\nI added the <code>connect</code> line, that produces an excess violation, which I think should not be produced.</p>\n\n<pre><code>Navigation_Gui::Navigation_Gui(QWidget *parent)\n: QWidget(parent){\n\nthis-&gt;Storage = new ThreadStorage();                            \nthis-&gt;CamPtr = new CamBar(this-&gt;Storage);   \nthis-&gt;NavPtr = new Navigation(this-&gt;CamPtr, this-&gt;Storage);\n\nui.setupUi(this);\n\nthis-&gt;getRegPoints = false;\nthis-&gt;Storage-&gt;Log &lt;&lt; \"Main Gui initialized\" &lt;&lt; endl;\n\nconnect(this-&gt;ui.pushButton, SIGNAL(clicked()), this, SLOT(on_pushButton_clicked())); }\n</code></pre>\n\n<p>The header</p>\n\n<pre><code>#ifndef NAVIGATION_GUI_H\n#define NAVIGATION_GUI_H\n\n\n#include &lt;QWidget&gt;\n#include \"ui_navigation_gui.h\"\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"vtkMatrix4x4.h\"\n#include &lt;vector&gt;\n#include \"ThreadStorage.h\"\n\nclass CamBar;       //forward deklaration  \nclass Navigation;   //forward declaration \nclass ThreadStorage;    //forward declaration\n\n\nclass Navigation_Gui : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    Navigation_Gui(QWidget *parent = 0);\n    ~Navigation_Gui();\n\n    //! true if Button GetRegPoints is pressed.\n    bool getRegPoints;\n\n    public slots:\n    void on_pushButton_clicked();\n\nprivate:\n    Ui::Navigation_GuiClass ui;\n    //! initial CameraPointer\n    CamBar* CamPtr;\n    //! initial NavigationPointer\n    Navigation* NavPtr;\n    //! initial LogPointer\n    ThreadStorage* Storage;\n\n\n    private slots:\n    // private slots for Gui events\n    void on_ConnectButton_clicked();\n    void on_RegPointButton_clicked();\n    //void on_TrackingButton_clicked();\n    void on_QuitButton_clicked();\n    void on_NewTrackingButton_clicked();\n    void on_getLocatorButton_clicked();\n    void on_MHHAbout_clicked();\n\n};\n#endif // NAVIGATION_GUI_H\n</code></pre>\n\n<p>And this is the generated Ui-header</p>\n\n<pre><code>#ifndef UI_NAVIGATION_GUI_H\n#define UI_NAVIGATION_GUI_H\n\n#include &lt;QtCore/QVariant&gt;\n#include &lt;QtWidgets/QAction&gt;\n#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QtWidgets/QButtonGroup&gt;\n#include &lt;QtWidgets/QGridLayout&gt;\n#include &lt;QtWidgets/QHeaderView&gt;\n#include &lt;QtWidgets/QPushButton&gt;\n#include &lt;QtWidgets/QSpacerItem&gt;\n#include &lt;QtWidgets/QVBoxLayout&gt;\n#include &lt;QtWidgets/QWidget&gt;\n\nQT_BEGIN_NAMESPACE\n\nclass Ui_Navigation_GuiClass\n{\npublic:\n    QGridLayout *gridLayout;\n    QVBoxLayout *verticalLayout;\n    QSpacerItem *verticalSpacer;\n    QPushButton *ConnectButton;\n    QSpacerItem *verticalSpacer_2;\n    QPushButton *getLocatorButton;\n    QSpacerItem *verticalSpacer_7;\n    QPushButton *RegPointButton;\n    QSpacerItem *verticalSpacer_3;\n    QPushButton *NewTrackingButton;\n    QSpacerItem *verticalSpacer_4;\n    QSpacerItem *verticalSpacer_5;\n    QPushButton *QuitButton;\n    QSpacerItem *verticalSpacer_6;\n    QPushButton *pushButton;\n    QPushButton *MHHAbout;\n\n    void setupUi(QWidget *Navigation_GuiClass)\n    {\n        if (Navigation_GuiClass-&gt;objectName().isEmpty())\n            Navigation_GuiClass-&gt;setObjectName(QStringLiteral(\"Navigation_GuiClass\"));\n        Navigation_GuiClass-&gt;setWindowModality(Qt::WindowModal);\n        Navigation_GuiClass-&gt;resize(358, 500);\n        QSizePolicy sizePolicy(QSizePolicy::Preferred, QSizePolicy::Preferred);\n        sizePolicy.setHorizontalStretch(0);\n        sizePolicy.setVerticalStretch(0);\n        sizePolicy.setHeightForWidth(Navigation_GuiClass-&gt;sizePolicy().hasHeightForWidth());\n        Navigation_GuiClass-&gt;setSizePolicy(sizePolicy);\n        Navigation_GuiClass-&gt;setMinimumSize(QSize(358, 458));\n        Navigation_GuiClass-&gt;setMaximumSize(QSize(358, 500));\n        gridLayout = new QGridLayout(Navigation_GuiClass);\n        gridLayout-&gt;setSpacing(6);\n        gridLayout-&gt;setContentsMargins(11, 11, 11, 11);\n        gridLayout-&gt;setObjectName(QStringLiteral(\"gridLayout\"));\n        verticalLayout = new QVBoxLayout();\n        verticalLayout-&gt;setSpacing(6);\n        verticalLayout-&gt;setObjectName(QStringLiteral(\"verticalLayout\"));\n        verticalSpacer = new QSpacerItem(20, 20, QSizePolicy::Minimum, QSizePolicy::Expanding);\n\n        verticalLayout-&gt;addItem(verticalSpacer);\n\n        ConnectButton = new QPushButton(Navigation_GuiClass);\n        ConnectButton-&gt;setObjectName(QStringLiteral(\"ConnectButton\"));\n        QSizePolicy sizePolicy1(QSizePolicy::Minimum, QSizePolicy::Minimum);\n        sizePolicy1.setHorizontalStretch(0);\n        sizePolicy1.setVerticalStretch(1);\n        sizePolicy1.setHeightForWidth(ConnectButton-&gt;sizePolicy().hasHeightForWidth());\n        ConnectButton-&gt;setSizePolicy(sizePolicy1);\n        ConnectButton-&gt;setMinimumSize(QSize(0, 68));\n        QFont font;\n        font.setPointSize(14);\n        ConnectButton-&gt;setFont(font);\n\n        verticalLayout-&gt;addWidget(ConnectButton);\n\n        verticalSpacer_2 = new QSpacerItem(20, 20, QSizePolicy::Minimum, QSizePolicy::Expanding);\n\n        verticalLayout-&gt;addItem(verticalSpacer_2);\n\n        getLocatorButton = new QPushButton(Navigation_GuiClass);\n        getLocatorButton-&gt;setObjectName(QStringLiteral(\"getLocatorButton\"));\n        sizePolicy1.setHeightForWidth(getLocatorButton-&gt;sizePolicy().hasHeightForWidth());\n        getLocatorButton-&gt;setSizePolicy(sizePolicy1);\n        getLocatorButton-&gt;setMinimumSize(QSize(0, 68));\n        getLocatorButton-&gt;setFont(font);\n\n        verticalLayout-&gt;addWidget(getLocatorButton);\n\n        verticalSpacer_7 = new QSpacerItem(20, 20, QSizePolicy::Minimum, QSizePolicy::Expanding);\n\n        verticalLayout-&gt;addItem(verticalSpacer_7);\n\n        RegPointButton = new QPushButton(Navigation_GuiClass);\n        RegPointButton-&gt;setObjectName(QStringLiteral(\"RegPointButton\"));\n        RegPointButton-&gt;setEnabled(false);\n        sizePolicy1.setHeightForWidth(RegPointButton-&gt;sizePolicy().hasHeightForWidth());\n        RegPointButton-&gt;setSizePolicy(sizePolicy1);\n        RegPointButton-&gt;setMinimumSize(QSize(0, 68));\n        RegPointButton-&gt;setFont(font);\n\n        verticalLayout-&gt;addWidget(RegPointButton);\n\n        verticalSpacer_3 = new QSpacerItem(20, 20, QSizePolicy::Minimum, QSizePolicy::Expanding);\n\n        verticalLayout-&gt;addItem(verticalSpacer_3);\n\n        NewTrackingButton = new QPushButton(Navigation_GuiClass);\n        NewTrackingButton-&gt;setObjectName(QStringLiteral(\"NewTrackingButton\"));\n        NewTrackingButton-&gt;setEnabled(false);\n        sizePolicy1.setHeightForWidth(NewTrackingButton-&gt;sizePolicy().hasHeightForWidth());\n        NewTrackingButton-&gt;setSizePolicy(sizePolicy1);\n        NewTrackingButton-&gt;setMinimumSize(QSize(0, 68));\n        NewTrackingButton-&gt;setFont(font);\n\n        verticalLayout-&gt;addWidget(NewTrackingButton);\n\n        verticalSpacer_4 = new QSpacerItem(20, 20, QSizePolicy::Minimum, QSizePolicy::Expanding);\n\n        verticalLayout-&gt;addItem(verticalSpacer_4);\n\n        verticalSpacer_5 = new QSpacerItem(20, 20, QSizePolicy::Minimum, QSizePolicy::Expanding);\n\n        verticalLayout-&gt;addItem(verticalSpacer_5);\n\n        QuitButton = new QPushButton(Navigation_GuiClass);\n        QuitButton-&gt;setObjectName(QStringLiteral(\"QuitButton\"));\n        sizePolicy1.setHeightForWidth(QuitButton-&gt;sizePolicy().hasHeightForWidth());\n        QuitButton-&gt;setSizePolicy(sizePolicy1);\n        QuitButton-&gt;setMinimumSize(QSize(0, 68));\n        QuitButton-&gt;setFont(font);\n\n        verticalLayout-&gt;addWidget(QuitButton);\n\n        verticalSpacer_6 = new QSpacerItem(20, 20, QSizePolicy::Minimum, QSizePolicy::Expanding);\n\n        verticalLayout-&gt;addItem(verticalSpacer_6);\n\n        pushButton = new QPushButton(Navigation_GuiClass);\n        pushButton-&gt;setObjectName(QStringLiteral(\"pushButton\"));\n\n        verticalLayout-&gt;addWidget(pushButton);\n\n        MHHAbout = new QPushButton(Navigation_GuiClass);\n        MHHAbout-&gt;setObjectName(QStringLiteral(\"MHHAbout\"));\n        QIcon icon;\n        icon.addFile(QStringLiteral(\":/MainWindow/Resources/60px.png\"), QSize(), QIcon::Normal, QIcon::Off);\n        MHHAbout-&gt;setIcon(icon);\n        MHHAbout-&gt;setIconSize(QSize(174, 60));\n\n        verticalLayout-&gt;addWidget(MHHAbout);\n\n\n        gridLayout-&gt;addLayout(verticalLayout, 0, 0, 1, 1);\n\n\n        retranslateUi(Navigation_GuiClass);\n\n        QMetaObject::connectSlotsByName(Navigation_GuiClass);\n    } // setupUi\n\n    void retranslateUi(QWidget *Navigation_GuiClass)\n    {\n        Navigation_GuiClass-&gt;setWindowTitle(QApplication::translate(\"Navigation_GuiClass\", \"Main Menu - Navigation (CamBar)\", 0));\n        ConnectButton-&gt;setText(QApplication::translate(\"Navigation_GuiClass\", \"Connect\", 0));\n        getLocatorButton-&gt;setText(QApplication::translate(\"Navigation_GuiClass\", \"Locator Editor\", 0));\n        RegPointButton-&gt;setText(QApplication::translate(\"Navigation_GuiClass\", \"Get Registration Points\", 0));\n        NewTrackingButton-&gt;setText(QApplication::translate(\"Navigation_GuiClass\", \"Tracking\", 0));\n        QuitButton-&gt;setText(QApplication::translate(\"Navigation_GuiClass\", \"Quit\", 0));\n        pushButton-&gt;setText(QApplication::translate(\"Navigation_GuiClass\", \"PushButton\", 0));\n        MHHAbout-&gt;setText(QString());\n    } // retranslateUi\n\n};\n\nnamespace Ui {\n    class Navigation_GuiClass: public Ui_Navigation_GuiClass {};\n} // namespace Ui\n\nQT_END_NAMESPACE\n\n#endif\n</code></pre>\n\n<p>When I change the <code>connect</code> line in the constructor above to</p>\n\n<pre><code>connect(this-&gt;ui.pushButton, SIGNAL(clicked()), this, SLOT(on_pushButton_clicked()));\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>QObject::connect: No such slot Navigation_Gui::this-&gt;on_pushButton_clicked() in navigation_gui.cpp:26\nQObject::connect:  (sender name:   'pushButton')\nQObject::connect:  (receiver name: 'Navigation_GuiClass')\n</code></pre>\n\n<p>Which is also odd.</p>\n"}, {"tags": ["c++", "opencv", "libtiff"], "comments": [{"owner": {"reputation": 39, "user_id": 7231952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SpQ6i6wlwyI/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ghXA2SPJ6CQ3TC6bmwNGm55ZWOKA/mo/photo.jpg?sz=128", "display_name": "Davide57", "link": "https://stackoverflow.com/users/7231952/davide57"}, "reply_to_user": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1534334311, "post_id": 51858028, "comment_id": 90668589, "body": "I don&#39;t understand what should I do... I tried to add &quot;using namespace cv&quot; or to use &quot;cv::Mat&quot; but nothing happen."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1534339157, "post_id": 51858028, "comment_id": 90671129, "body": "Can you post the full error message when using <code>cv::Mat</code>?"}, {"owner": {"reputation": 1699, "user_id": 11255447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df72cdbb62b1cf94eff00f4ae6c99e3?s=128&d=identicon&r=PG", "display_name": "aparpara", "link": "https://stackoverflow.com/users/11255447/aparpara"}, "edited": false, "score": 0, "creation_date": 1584365535, "post_id": 51858028, "comment_id": 107406972, "body": "Try to compile <code>#include &lt;opencv2&#47;core&#47;core.hpp&gt; int main(){   cv::Mat image;   return 0; }</code> Do you get the same error?"}], "answers": [{"comments": [{"owner": {"reputation": 677, "user_id": 1418351, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a7dba2123954dce6d12c48c0c74d785?s=128&d=identicon&r=PG", "display_name": "John_Sharp1318", "link": "https://stackoverflow.com/users/1418351/john-sharp1318"}, "edited": false, "score": 0, "creation_date": 1534398593, "post_id": 51858316, "comment_id": 90692077, "body": "Using the command <code>ldd name_of_your_executable</code> (e.g. ldd ssim) you will get a list of all the library it depend on and the expected path the compiler taught the library was as well as an indication of the missing libraries. It will help you to identify the library path to add using the compiler option -L  (e.g. if the compiler expect to find <code>libopencv_core.so.3.4</code> in <code>&#47;lib&#47;opencv</code> so you compilation command should be: <code>g++ ssim.cpp -o ssim -ltiff -L&#47;lib&#47;opencv&#47; -lopencv_core -lopencv_highgui -lopencv_imgproc -lopencv_imgcodecs</code> )"}], "tags": [], "owner": {"reputation": 39, "user_id": 7231952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SpQ6i6wlwyI/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ghXA2SPJ6CQ3TC6bmwNGm55ZWOKA/mo/photo.jpg?sz=128", "display_name": "Davide57", "link": "https://stackoverflow.com/users/7231952/davide57"}, "is_accepted": false, "score": 0, "last_activity_date": 1534334507, "creation_date": 1534334507, "answer_id": 51858316, "question_id": 51858028, "link": "https://stackoverflow.com/questions/51858028/mat-was-not-declared-in-this-scope-opencv/51858316#51858316", "title": "\u2018Mat\u2019 was not declared in this scope opencv", "body": "<p>Using the command:</p>\n\n<blockquote>\n  <p>g++ ssim.cpp -o ssim -ltiff -lopencv_core -lopencv_highgui -lopencv_imgproc -lopencv_imgcodecs</p>\n</blockquote>\n\n<p>I don't get compiler errors but when I try to execute the command ./ssim I get:</p>\n\n<blockquote>\n  <p>./ssim: error while loading shared libraries: libopencv_core.so.3.4: cannot open shared object file: No such file or directory</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 168, "user_id": 10176823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7fbfa015d490700c81cf7c48427b750?s=128&d=identicon&r=PG", "display_name": "Mathis Witte", "link": "https://stackoverflow.com/users/10176823/mathis-witte"}, "is_accepted": false, "score": 1, "last_activity_date": 1534338742, "last_edit_date": 1534338742, "creation_date": 1534338128, "answer_id": 51859255, "question_id": 51858028, "link": "https://stackoverflow.com/questions/51858028/mat-was-not-declared-in-this-scope-opencv/51859255#51859255", "title": "\u2018Mat\u2019 was not declared in this scope opencv", "body": "<p>It's not really necessary to build openCV from source. Try installing it with</p>\n\n<pre><code>sudo apt-get install libopencv-dev\n</code></pre>\n\n<p>and try to compile it again.</p>\n\n<p>Also like you said in your comment, make sure you either use namespace cv or cv::Mat.</p>\n"}], "owner": {"reputation": 39, "user_id": 7231952, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SpQ6i6wlwyI/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ghXA2SPJ6CQ3TC6bmwNGm55ZWOKA/mo/photo.jpg?sz=128", "display_name": "Davide57", "link": "https://stackoverflow.com/users/7231952/davide57"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2549, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1584363447, "creation_date": 1534333304, "question_id": 51858028, "link": "https://stackoverflow.com/questions/51858028/mat-was-not-declared-in-this-scope-opencv", "title": "\u2018Mat\u2019 was not declared in this scope opencv", "body": "<p>I followed this guide to install openCV on Ubuntu:\n<a href=\"https://docs.opencv.org/master/d7/d9f/tutorial_linux_install.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/master/d7/d9f/tutorial_linux_install.html</a></p>\n\n<p>When I try to execute the following program:</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/imgcodecs.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;iostream&gt; \n#include &lt;math.h&gt;\n#include &lt;tiffio.h&gt;\n\nusing namespace std;\n\nint main(){\n  string imageName(\"images/400nm.tif\");\n  TIFF* tif = TIFFOpen(imageName.c_str(), \"r\");\n  Mat image;\n\n\n  return 0;\n}\n</code></pre>\n\n<p>I get the following error executing the command \"g++ ssim.cpp -o ssim -ltiff\":</p>\n\n<blockquote>\n  <p>ssim.cpp: In function \u2018int main()\u2019: ssim.cpp:19:3: error: \u2018Mat\u2019 was\n  not declared in this scope    Mat image;    ^~~ ssim.cpp:19:3: note:\n  suggested alternative: In file included from\n  /usr/local/include/opencv2/core.hpp:59:0,\n                   from /usr/local/include/opencv2/core/core.hpp:48,\n                   from ssim.cpp:2: /usr/local/include/opencv2/core/mat.hpp:771:18: note:   \u2018cv::Mat\u2019 \n  class CV_EXPORTS Mat</p>\n</blockquote>\n\n<p>Does somebody know why I get this and how to solve it? \nI'm new at using opencv and libtiff so I have no idea about what to do to solve...</p>\n"}, {"tags": ["c++", "qt", "qjson", "qjsonobject"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1534335939, "post_id": 51857820, "comment_id": 90669341, "body": "Why did I modify the json?  It is not right to do it without justification."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9988902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27ee56bd1e8fe38f24e9e5acf2d77e00?s=128&d=identicon&r=PG&f=1", "display_name": "Lauri", "link": "https://stackoverflow.com/users/9988902/lauri"}, "edited": false, "score": 0, "creation_date": 1534336008, "post_id": 51858089, "comment_id": 90669373, "body": "I bet your answer was correct but my question was not that great. I tried to give shorter example of json that I am actually working with at the moment. I edited longer version of json to my original post. I tried to solve that but I still have problem. Does it make problems when there are resource many times in json? So there are all the resource are children of entry. How to choose what resource to edit?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 77, "user_id": 9988902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27ee56bd1e8fe38f24e9e5acf2d77e00?s=128&d=identicon&r=PG&f=1", "display_name": "Lauri", "link": "https://stackoverflow.com/users/9988902/lauri"}, "edited": false, "score": 0, "creation_date": 1534336324, "post_id": 51858089, "comment_id": 90669531, "body": "@Lauri You should not delete the above, what you should do is add as an update to your question because for example my answer would not make sense if you delete the above."}, {"owner": {"reputation": 77, "user_id": 9988902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27ee56bd1e8fe38f24e9e5acf2d77e00?s=128&d=identicon&r=PG&f=1", "display_name": "Lauri", "link": "https://stackoverflow.com/users/9988902/lauri"}, "edited": false, "score": 0, "creation_date": 1534336992, "post_id": 51858089, "comment_id": 90669890, "body": "Got it! I&#39;m sorry for that. Started to edit it back but You fixed that for me as well. Thanks!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1534337551, "last_edit_date": 1534337551, "creation_date": 1534333523, "answer_id": 51858089, "question_id": 51857820, "link": "https://stackoverflow.com/questions/51857820/how-to-modify-qjsonobject/51858089#51858089", "title": "How to modify QJsonObject", "body": "<p>json is not a linear structure, so you have to look for it through the arbor of keys, in this case there is a <code>gender</code> is the children of <code>resource</code>, so first you will access <code>resource</code> and then <code>gender</code> as I show below:</p>\n\n<pre><code>if(file.open(QIODevice::ReadOnly)){\n    QJsonDocument doc = QJsonDocument::fromJson(file.readAll());\n    QJsonObject root = doc.object();\n    QJsonObject res = root[\"resource\"].toObject();\n    res[\"gender\"] = \"female\";\n    root[\"resource\"] = res;\n    doc.setObject(root);\n    //another code\n    manager.put(request, doc.toJson());\n}\n</code></pre>\n\n<p>Update:</p>\n\n<p>The idea is the same, you can not access directly but you have to know the structure of the json. Although I have an observation, for example the items children of entry that is an array, the normal thing is that those children have the same structure but in your case the last one is different which is unusual.</p>\n\n<pre><code>if(file.open(QIODevice::ReadOnly)){\n    QJsonDocument doc = QJsonDocument::fromJson(file.readAll());\n    QJsonObject root = doc.object();\n    QJsonArray entries = root[\"entry\"].toArray();\n    for(int i=0; i &lt; entries.count(); i++){\n        QJsonObject obj = entries[i].toObject();\n        QJsonObject objs = obj[\"resource\"].toObject();\n        if(objs.contains(\"gender\")){\n            objs[\"gender\"]= \"female\";\n            obj[\"resource\"] = objs;\n            entries[i] = obj;\n        }\n    }\n    root[\"entry\"] = entries;\n    doc.setObject(root);\n    // another process\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9988902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27ee56bd1e8fe38f24e9e5acf2d77e00?s=128&d=identicon&r=PG&f=1", "display_name": "Lauri", "link": "https://stackoverflow.com/users/9988902/lauri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1516, "favorite_count": 0, "accepted_answer_id": 51858089, "answer_count": 1, "score": 0, "last_activity_date": 1534337551, "creation_date": 1534332463, "last_edit_date": 1534336268, "question_id": 51857820, "link": "https://stackoverflow.com/questions/51857820/how-to-modify-qjsonobject", "title": "How to modify QJsonObject", "body": "<p>I can set values to objects this way in the simple json-file.</p>\n\n<p>Qt code: </p>\n\n<pre><code>if(file.open(QIODevice::ReadOnly)){\n    QJsonDocument doc = QJsonDocument::fromJson(file.readAll());\n    QJsonObject obj = doc.object();\n    obj[\"gender\"] = \"female\";\n    doc.setObject(obj);\n    manager.put(request, doc.toJson());\n}\n</code></pre>\n\n<p>Simple json file:</p>\n\n<pre><code>{\n    \"resourceType\": \"Patient\",\n    \"gender\": \"male\",\n    \"birthDate\": \"2018-08-21\"\n}\n</code></pre>\n\n<p>So this code changes the value of gender to female.</p>\n\n<p>But when I use bigger json where there are \"objects under objects\"</p>\n\n<pre><code>{\n    \"resource\": {\n        \"resourceType\": \"Patient\",\n        \"id\": \"530f8eb0-1f0b-41b0-b94\",\n        \"text\": {\n            \"status\": \"generated\",\n            \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;Teppo Testman\\n            &lt;a name=\\\"mm\\\"&gt;&lt;/a&gt;\\n          &lt;/div&gt;\"\n        },\n        \"name\": [{\n            \"family\": \"Testman\",\n            \"given\": [\n                \"Teppo\"\n            ]\n        }],\n        \"gender\": \"male\",\n        \"birthDate\": \"1993-02-12\"\n    }\n}\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>{\n    \"resourceType\": \"Bundle\",\n    \"id\": \"17772d63-3b14-494f-8182-06b67c970550\",\n    \"meta\": {\n        \"versionId\": \"1\",\n        \"lastUpdated\": \"2018-08-15T12:08:48.036+00:00\"\n    },\n    \"type\": \"collection\",\n    \"entry\": [{\n            \"resource\": {\n                \"resourceType\": \"Observation\",\n                \"text\": {\n                    \"status\": \"generated\",\n                    \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;Height\\n            &lt;a name=\\\"mm\\\"&gt;&lt;/a&gt;\\n          &lt;/div&gt;\"\n                },\n                \"status\": \"final\",\n                \"code\": {\n                    \"coding\": [{\n                        \"system\": \"http://loinc.org\",\n                        \"code\": \"8302-2\",\n                        \"display\": \"Body height\"\n                    }]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/530f8eb0-1f0b-41b0-b94b-c25a14656645\"\n                },\n                \"valueQuantity\": {\n                    \"value\": 166,\n                    \"unit\": \"cm\"\n                }\n            }\n        },\n        {\n            \"resource\": {\n                \"resourceType\": \"Observation\",\n                \"text\": {\n                    \"status\": \"generated\",\n                    \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;BMI\\n            &lt;a name=\\\"mm\\\"&gt;&lt;/a&gt;\\n          &lt;/div&gt;\"\n                },\n                \"status\": \"final\",\n                \"code\": {\n                    \"coding\": [{\n                        \"system\": \"http://loinc.org\",\n                        \"code\": \"39156-5\",\n                        \"display\": \"Body mass index (BMI) [Ratio]\"\n                    }]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/530f8eb0-1f0b-41b0-b94b-c25a14656645\"\n                },\n                \"valueString\": \"23\"\n            }\n        },\n        {\n            \"resource\": {\n                \"resourceType\": \"Observation\",\n                \"text\": {\n                    \"status\": \"generated\",\n                    \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;FEV1 [l]\\n            &lt;a name=\\\"mm\\\"&gt;&lt;/a&gt;\\n          &lt;/div&gt;\"\n                },\n                \"status\": \"final\",\n                \"code\": {\n                    \"coding\": [{\n                        \"system\": \"http://loinc.org\",\n                        \"code\": \"18759-1\",\n                        \"display\": \"Spirometry study\"\n                    }]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/530f8eb0-1f0b-41b0-b94b-c25a14656645\"\n                },\n                \"valueQuantity\": {\n                    \"value\": 2,\n                    \"unit\": \"l\"\n                }\n            }\n        },\n        {\n            \"resource\": {\n                \"resourceType\": \"Observation\",\n                \"text\": {\n                    \"status\": \"generated\",\n                    \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;FEV6 [l]\\n            &lt;a name=\\\"mm\\\"&gt;&lt;/a&gt;\\n          &lt;/div&gt;\"\n                },\n                \"status\": \"final\",\n                \"code\": {\n                    \"coding\": [{\n                        \"system\": \"http://loinc.org\",\n                        \"code\": \"18759-1\",\n                        \"display\": \"Spirometry study\"\n                    }]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/530f8eb0-1f0b-41b0-b94b-c25a14656645\"\n                },\n                \"valueQuantity\": {\n                    \"value\": 2.9,\n                    \"unit\": \"l\"\n                }\n            }\n        },\n        {\n            \"resource\": {\n                \"resourceType\": \"Observation\",\n                \"text\": {\n                    \"status\": \"generated\",\n                    \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;PEF [l/s]\\n            &lt;a name=\\\"mm\\\"&gt;&lt;/a&gt;\\n          &lt;/div&gt;\"\n                },\n                \"status\": \"final\",\n                \"code\": {\n                    \"coding\": [{\n                        \"system\": \"http://loinc.org\",\n                        \"code\": \"18759-1\",\n                        \"display\": \"Spirometry study\"\n                    }]\n                },\n                \"subject\": {\n                    \"reference\": \"Patient/530f8eb0-1f0b-41b0-b94b-c25a14656645\"\n                },\n                \"valueQuantity\": {\n                    \"value\": 6.5,\n                    \"unit\": \"l/s\"\n                }\n            }\n        },\n        {\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"530f8eb0-1f0b-41b0-b94b-c25a14656645\",\n                \"text\": {\n                    \"status\": \"generated\",\n                    \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;Teppo Testman\\n            &lt;a name=\\\"mm\\\"&gt;&lt;/a&gt;\\n          &lt;/div&gt;\"\n                },\n                \"name\": [{\n                    \"family\": \"Testman\",\n                    \"given\": [\n                        \"Teppo\"\n                    ]\n                }],\n                \"gender\": \"male\",\n                \"birthDate\": \"1993-02-12\"\n            }\n        }\n    ]\n}\n</code></pre>\n\n<p>I'm not able to modify the value. Is there some simple way to do that? I have been trying to find the solution with no success! </p>\n"}, {"tags": ["c++", "event-log", "event-viewer"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 0, "creation_date": 1534349509, "post_id": 51858433, "comment_id": 90677103, "body": "Thank you @BENZ for the reply. I&#39;ve tried the program and is perfectly working. I can get the correct number of my application logs. But as mentioned in the link below: <a href=\"https://stackoverflow.com/questions/31628955/getnumberofeventlogrecords-returns-incorrect-number-of-event-logs\">link</a> I can&#39;t find the event source of the Security log file. Can you help me find that. Where is this description given? I found that this is the source structure : Computer\\HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Service&zwnj;&#8203;s\\EventLog\\Security. But it must not be mentioned with a &quot;\\&quot;; Please help."}, {"owner": {"reputation": 177, "user_id": 5155337, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vg-mCx-fdCE/AAAAAAAAAAI/AAAAAAAAAYw/0UuAnixv6I0/photo.jpg?sz=128", "display_name": "BENS", "link": "https://stackoverflow.com/users/5155337/bens"}, "reply_to_user": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 1, "creation_date": 1534350952, "post_id": 51858433, "comment_id": 90677846, "body": "Make sure to execute your app with adminstration previlege to work with the security log file,  otherwise OpenEventLog will return null as if the file doesn&#39;t exist."}, {"owner": {"reputation": 177, "user_id": 5155337, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vg-mCx-fdCE/AAAAAAAAAAI/AAAAAAAAAYw/0UuAnixv6I0/photo.jpg?sz=128", "display_name": "BENS", "link": "https://stackoverflow.com/users/5155337/bens"}, "reply_to_user": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 1, "creation_date": 1534352004, "post_id": 51858433, "comment_id": 90678321, "body": "Like it&#39;s mentioned on the link you have provided <code>OpenEventLog </code> does not accept paths , instead you can call it with source name of the event log as Security  like this <code>OpenEventLog(NULL,L&quot;Security&quot;);</code> and don&#39;t forget to run it with admin privilege ."}, {"owner": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 0, "creation_date": 1534353719, "post_id": 51858433, "comment_id": 90679100, "body": "Thanks a lot. It works perfectly. But why is it that it doesn&#39;t work with certain logs like Setup, Forwarded Events etc. It works perfectly with Security, Application, System logs etc.?"}, {"owner": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 0, "creation_date": 1534613337, "post_id": 51858433, "comment_id": 90772199, "body": "@BENZ  I managed to get the log file size from my local machine. Do you have any idea of how to find the same from a remote machine? I don&#39;t think we can do it using the GetFileSizeEx() function. I don&#39;t know if it is possible. Please help."}, {"owner": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 0, "creation_date": 1534614373, "post_id": 51858433, "comment_id": 90772442, "body": "I saw that the GetFileSize() function has a handle parameter in it. Can this be used to get the information from a remote system?"}, {"owner": {"reputation": 177, "user_id": 5155337, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vg-mCx-fdCE/AAAAAAAAAAI/AAAAAAAAAYw/0UuAnixv6I0/photo.jpg?sz=128", "display_name": "BENS", "link": "https://stackoverflow.com/users/5155337/bens"}, "reply_to_user": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 1, "creation_date": 1534620278, "post_id": 51858433, "comment_id": 90773793, "body": "You could specifie the network path for the file you want,  like this &quot;\\\\computer\\\\c$\\\\yourfilename&quot; when getting the handle . i assume you are using the CreateFile function to get the the file handle ."}, {"owner": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 0, "creation_date": 1534666403, "post_id": 51858433, "comment_id": 90781435, "body": "Yes, I&#39;ll be using CreateFile function to get the handle. And is there a similar function that i can use in order to get the number of logs in the file? I was going through the Eventlog Remoting protocol. Will that help? Or is there an easier way? Thank you for the help"}, {"owner": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "edited": false, "score": 0, "creation_date": 1535147056, "post_id": 51858433, "comment_id": 90975121, "body": "@BENZ Isn&#39;t it necessary to be a shared file in order to use GetFileSizeEx() function to get the file size?"}], "tags": [], "owner": {"reputation": 177, "user_id": 5155337, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vg-mCx-fdCE/AAAAAAAAAAI/AAAAAAAAAYw/0UuAnixv6I0/photo.jpg?sz=128", "display_name": "BENS", "link": "https://stackoverflow.com/users/5155337/bens"}, "is_accepted": true, "score": 1, "last_activity_date": 1534334922, "creation_date": 1534334922, "answer_id": 51858433, "question_id": 51857513, "link": "https://stackoverflow.com/questions/51857513/how-to-find-the-size-of-log-files-using-evtquery-function/51858433#51858433", "title": "How to find the size of log files using EvtQuery function?", "body": "<p>You Could use a combination of <a href=\"https://docs.microsoft.com/fr-fr/windows/desktop/api/fileapi/nf-fileapi-getfilesizeex\" rel=\"nofollow noreferrer\">GetFileSizeEx</a> to get the file size of the log and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-getnumberofeventlogrecords\" rel=\"nofollow noreferrer\">GetNumberOfEventLogRecords</a> to retrieve the number of records in the specified event log.</p>\n"}], "owner": {"reputation": 59, "user_id": 9928642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da04b7a4a9da9d3945180170b3726aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/9928642/anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 51858433, "answer_count": 1, "score": 0, "last_activity_date": 1534334922, "creation_date": 1534331064, "question_id": 51857513, "link": "https://stackoverflow.com/questions/51857513/how-to-find-the-size-of-log-files-using-evtquery-function", "title": "How to find the size of log files using EvtQuery function?", "body": "<p>I've been working on windows log collection for a while. Can somebody please help me how to find the size of windows logs (Security, Application, System, etc) and also how to get the number of events that has been inserted into it. I need to access them using C++. There's a windows function EvtQuery to execute the query in C++.</p>\n\n<p>I'm able to fetch the contents written in the log file. But how do I get the file size and the number of events which are not fields inside it?</p>\n\n<p>Please refer the link to find details on the EvtQuery function: \n<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winevt/nf-winevt-evtquery\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/winevt/nf-winevt-evtquery</a></p>\n\n<p>Please help</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "visual-studio-2017", "editor"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1534331627, "post_id": 51857504, "comment_id": 90667356, "body": "workaround: use for range: <code>for (auto&amp; e : my_vector)</code> :-)"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1534331683, "post_id": 51857504, "comment_id": 90667386, "body": "@Ron oh, guess I should update more often :p"}], "answers": [{"tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": true, "score": 0, "last_activity_date": 1534331979, "creation_date": 1534331979, "answer_id": 51857710, "question_id": 51857504, "link": "https://stackoverflow.com/questions/51857504/how-to-stop-visual-studio-2017-c-from-autocompleting-while-in-the-middle-of/51857710#51857710", "title": "How to stop visual studio 2017 c++ from autocompleting ) while in the middle of FOR statement?", "body": "<p>Update the Visual Studio. That particular (VS 2017) bug is <a href=\"https://developercommunity.visualstudio.com/content/problem/27757/auto-complete-adds-parentheses-at-the-wrong-place.html\" rel=\"nofollow noreferrer\">now fixed</a> starting with the <em>VS 2017 15.4 Preview 2</em> update.</p>\n"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 51857710, "answer_count": 1, "score": 1, "last_activity_date": 1534331979, "creation_date": 1534331031, "question_id": 51857504, "link": "https://stackoverflow.com/questions/51857504/how-to-stop-visual-studio-2017-c-from-autocompleting-while-in-the-middle-of", "title": "How to stop visual studio 2017 c++ from autocompleting ) while in the middle of FOR statement?", "body": "<p>So every time I write something like</p>\n\n<pre><code>for (auto i = 0; i &lt; my_vector.size();\n</code></pre>\n\n<p>the moment I add the semicolon after a function call in a for statement, it turns into</p>\n\n<pre><code>for (auto i = 0; i &lt; my_vector.size());\n</code></pre>\n\n<p>and then I have to manually delete the automatic bracket close because I havent finished the for statement, super annoying.</p>\n\n<p>I don't remember earlier VS versions doing this.</p>\n\n<p>Anyway I tried going in options -> text editor -> c/c++ -> formatting -> general, I tried switching off \"Automatically format statement when I type a ;\" and also \"Automatically format braces when they are automatically completed\". Both had some minor effect but the problem I described was still happening.</p>\n\n<p>I like autocomplete most of the time, I find it useful so I don't want to turn it off completely but how can I make it stop doing that one thing?</p>\n"}, {"tags": ["c++", "class", "templates", "stdmap"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1534331260, "post_id": 51857503, "comment_id": 90667172, "body": "I would normally be all over you to post the error message as text in the post, but yeah... in this case ... I don&#39;t know...it&#39;s really long and it&#39;s not even obviously clear which part of it is the important one. Can&#39;t wait for concepts to be implemented in the standard library and get rid of these unreadable template errors."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1534332793, "post_id": 51857503, "comment_id": 90667869, "body": "The linked program doesn&#39;t give any compile errors. Was it modified? Similarly, please don&#39;t &quot;fix&quot; code in a question in a way that makes it no longer a question or makes existing answers incorrect or not applicable. If you then run into a different issue and need help, you can create another question about that."}, {"owner": {"reputation": 9, "user_id": 10228858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711241402f56d8367aa8c38806fefb03?s=128&d=identicon&r=PG&f=1", "display_name": "pointerdk", "link": "https://stackoverflow.com/users/10228858/pointerdk"}, "edited": false, "score": 0, "creation_date": 1534333626, "post_id": 51857503, "comment_id": 90668258, "body": "I still have the problem, that it can&#39;t compile. I saw that I have to try and run it, before &quot;get url&quot;..."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1534333647, "post_id": 51857503, "comment_id": 90668266, "body": "So now your question is mostly discussing a problem that no longer exists (and isn&#39;t exhibited in your code), but you have a new and different problem which you haven&#39;t described at all. This isn&#39;t a good way to use a Q&amp;A site, because the questions and answers aren&#39;t usefully related any more. Just ask a new question <i>that describes your actual problem and shows any errors</i>."}], "answers": [{"comments": [{"owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "edited": false, "score": 0, "creation_date": 1534331482, "post_id": 51857566, "comment_id": 90667283, "body": "Just FYI, <code>m.insert(p)</code> wouldn&#39;t work either since the <code>value_type</code> is expecting an <code>std::unique_ptr&lt;A&lt;int&gt;&gt;</code>, not a simple instance of <code>A&lt;int&gt;</code>."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "edited": false, "score": 1, "creation_date": 1534331884, "post_id": 51857566, "comment_id": 90667469, "body": "@KarlNicoll I was referring to the linked code, since @pointerdk have only added <code>unique_ptr</code> in his SO questions (looks like out of frustration since it was applied inconsistently)."}, {"owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "edited": false, "score": 0, "creation_date": 1534331960, "post_id": 51857566, "comment_id": 90667506, "body": "Ah I see! Yeah looking at the cpp.sh link, an <code>m.insert(p)</code> solution would work."}], "tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1534332887, "last_edit_date": 1534332887, "creation_date": 1534331316, "answer_id": 51857566, "question_id": 51857503, "link": "https://stackoverflow.com/questions/51857503/insert-custom-class-with-template-into-stdmap/51857566#51857566", "title": "Insert custom class with template into std::map", "body": "<p>You are trying to insert/emplace pair (pair&lt;...>, A) into your map, while you've specified it's key as an int. You most-likely want <code>m.emplace(9,std::make_unique&lt;A&lt;int&gt;&gt;(1));</code> (see <code>9</code> instead of <code>p</code>) or just <code>m.insert(p);</code> (would work fine in your cpp.sh).</p>\n\n<p>Furthermore, your use of <code>unique_ptr</code> here is most-likely wrong/unwarranted and only complicates things. See fixed up example here: <a href=\"http://cpp.sh/3d2hw\" rel=\"nofollow noreferrer\">http://cpp.sh/3d2hw</a></p>\n\n<p>Also, you may study STL collections/see some basic examples over at <a href=\"https://en.cppreference.com\" rel=\"nofollow noreferrer\">https://en.cppreference.com</a> (<a href=\"https://en.cppreference.com/w/cpp/container/map/map\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/container/map/map</a> for some map construction examples).</p>\n"}, {"tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": false, "score": 1, "last_activity_date": 1534331399, "creation_date": 1534331399, "answer_id": 51857575, "question_id": 51857503, "link": "https://stackoverflow.com/questions/51857503/insert-custom-class-with-template-into-stdmap/51857575#51857575", "title": "Insert custom class with template into std::map", "body": "<p>Your map is defined as:</p>\n\n<pre><code>std::map&lt;int, std::unique_ptr&lt;A&lt;int&gt;&gt;&gt;\n</code></pre>\n\n<p>But in the next line you're trying to pass an <code>std::pair&lt;int, A&lt;int&gt;&gt;</code> to <code>m.emplace()</code> as the key.</p>\n\n<p>I think you just want to do:</p>\n\n<pre><code>m.emplace(9, std::make_unique&lt;A&lt;int&gt;&gt;(1));\n//        ^\n//        Not `p`\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10228858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711241402f56d8367aa8c38806fefb03?s=128&d=identicon&r=PG&f=1", "display_name": "pointerdk", "link": "https://stackoverflow.com/users/10228858/pointerdk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1534333498, "creation_date": 1534331029, "last_edit_date": 1534333498, "question_id": 51857503, "link": "https://stackoverflow.com/questions/51857503/insert-custom-class-with-template-into-stdmap", "title": "Insert custom class with template into std::map", "body": "<p>I have written my own class and I want to insert it into a map. See the example below: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;memory&gt;\n#include &lt;mutex&gt;\n\ntemplate &lt;class T&gt;\nclass A {\npublic:\n    T a;\n    A() = default;\n    ~A() = default;\n    A(T i) { a = i; }\n};\n\nint main()\n{\n  std::pair&lt;int,A&lt;int&gt;&gt; p;\n  p = std::make_pair&lt;int,A&lt;int&gt;&gt;(9,A&lt;int&gt;(1));\n\n  std::map&lt;int, A&lt;int&gt;&gt; m;\n  m.emplace(1,A&lt;int&gt;(1));\n}\n</code></pre>\n\n<p>When I try to compile this, I get an enormous error. Please help interpret it. :) </p>\n\n<p>See error here:\n<a href=\"http://cpp.sh/9nc35\" rel=\"nofollow noreferrer\">http://cpp.sh/9nc35</a></p>\n\n<p><strong>EDIT:</strong> \nI had the typo, thanks! Though, the other problem I was struggling with first arose now. Seems like it is because of the mutex? Why? </p>\n"}, {"tags": ["c++", "json", "boost"], "comments": [{"owner": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "edited": false, "score": 0, "creation_date": 1534330854, "post_id": 51857285, "comment_id": 90667031, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2855741/why-boost-property-tree-write-json-saves-everything-as-string-is-it-possible-to\">Why boost property tree write_json saves everything as string? Is it possible to change that?</a>"}, {"owner": {"reputation": 47, "user_id": 10019963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f679ef9ed6d0d258bb1bff8e36c305a?s=128&d=identicon&r=PG&f=1", "display_name": "Griyn", "link": "https://stackoverflow.com/users/10019963/griyn"}, "reply_to_user": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "edited": false, "score": 0, "creation_date": 1534332728, "post_id": 51857285, "comment_id": 90667847, "body": "@ dewaffled Thanks. It is a way to solve the problem. But it is not graceful..."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10019963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f679ef9ed6d0d258bb1bff8e36c305a?s=128&d=identicon&r=PG&f=1", "display_name": "Griyn", "link": "https://stackoverflow.com/users/10019963/griyn"}, "edited": false, "score": 0, "creation_date": 1534332660, "post_id": 51857459, "comment_id": 90667807, "body": "Thanks for your answer! It seems I need to find another way."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 47, "user_id": 10019963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f679ef9ed6d0d258bb1bff8e36c305a?s=128&d=identicon&r=PG&f=1", "display_name": "Griyn", "link": "https://stackoverflow.com/users/10019963/griyn"}, "edited": false, "score": 0, "creation_date": 1534510191, "post_id": 51857459, "comment_id": 90742236, "body": "@Griyn Find a JSON library. Boost Property Tree is a property-tree library"}], "tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": true, "score": 2, "last_activity_date": 1534330840, "creation_date": 1534330840, "answer_id": 51857459, "question_id": 51857285, "link": "https://stackoverflow.com/questions/51857285/why-boostproperty-treewrite-json-convert-integer-value-to-string-it-is-in/51857459#51857459", "title": "Why boost::property_tree::write_json() convert integer value to string? It is incorrect.", "body": "<p>From the Boost.PropertyTree documentation <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/property_tree/parsers.html#property_tree.parsers.json_parser\" rel=\"nofollow noreferrer\">here</a>, it looks like all type information is lost. Relevant quote:</p>\n\n<blockquote>\n  <p>JSON values are mapped to nodes containing the value. However, <strong>all type information is lost; numbers, as well as the literals \"null\", \"true\" and \"false\" are simply mapped to their string form.</strong></p>\n</blockquote>\n\n<p>Emphasis mine. Looks like you might need to use a different JSON parser if you want to retain type information, unfortunately.</p>\n"}], "owner": {"reputation": 47, "user_id": 10019963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f679ef9ed6d0d258bb1bff8e36c305a?s=128&d=identicon&r=PG&f=1", "display_name": "Griyn", "link": "https://stackoverflow.com/users/10019963/griyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 0, "accepted_answer_id": 51857459, "answer_count": 1, "score": 1, "last_activity_date": 1571405603, "creation_date": 1534330027, "question_id": 51857285, "link": "https://stackoverflow.com/questions/51857285/why-boostproperty-treewrite-json-convert-integer-value-to-string-it-is-in", "title": "Why boost::property_tree::write_json() convert integer value to string? It is incorrect.", "body": "<p>My input: data.txt</p>\n\n<pre><code>{\n        \"target_url\":\"www.19lou.com/forum-1637-thread-10031471311655793-1-1.html\",\n        \"trespassing_field\":{\n            \"ratetype\":5,\n            \"spider\":{\n                \"prod_name\":\"name\",\n                \"link_src\":1 \n            }\n        }\n}\n</code></pre>\n\n<p>use code:</p>\n\n<pre><code>boost::property_tree::ptree json_tree;\nboost::property_tree::read_json(\"data.txt\", json_tree);\nstd::stringstream json_main_pack;\nboost::property_tree::write_json(json_main_pack, json_tree);\nLOG(NOTICE) &lt;&lt; \"json: \" &lt;&lt; json_main_pack.str();\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>{\n    \"target_url\": \"www.19lou.com\\/forum-1637-thread-10031471311655793-1-1.html\",\n    \"trespassing_field\": {\n        \"ratetype\": \"5\",\n        \"spider\": {\n            \"prod_name\": \"name\",\n            \"link_src\": \"1\"\n        }\n    }\n}\n</code></pre>\n\n<p>write_json() convert integer value to string.It convert <code>\"ratetype\":5</code> to <code>\"ratetype\": \"5\"</code>.It is incorrect.\nHow to convert accurately\uff1fInput integer value, then output integer value.</p>\n"}, {"tags": ["c++", "qt5", "qchart", "qchartview"], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 2421995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ad37035668a1cbe041e65c4e77e3293d?s=128&d=identicon&r=PG", "display_name": "chatzich", "link": "https://stackoverflow.com/users/2421995/chatzich"}, "edited": false, "score": 1, "creation_date": 1534411262, "post_id": 51869527, "comment_id": 90698733, "body": "Thank you for your post I have investigate QXYSeriesPrivate::drawSeriesPointLabels already. Is there any option to implement a draw layer above the existing one (without the labels) and render whatever I want to render as text?"}, {"owner": {"reputation": 941, "user_id": 2421995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ad37035668a1cbe041e65c4e77e3293d?s=128&d=identicon&r=PG", "display_name": "chatzich", "link": "https://stackoverflow.com/users/2421995/chatzich"}, "edited": false, "score": 1, "creation_date": 1534491506, "post_id": 51869527, "comment_id": 90731963, "body": "You  are inside my mind that was what I am thinking of... I shall give it a try..."}, {"owner": {"reputation": 941, "user_id": 2421995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ad37035668a1cbe041e65c4e77e3293d?s=128&d=identicon&r=PG", "display_name": "chatzich", "link": "https://stackoverflow.com/users/2421995/chatzich"}, "edited": false, "score": 1, "creation_date": 1534624818, "post_id": 51869527, "comment_id": 90774820, "body": "Unfortunately I didn&#39;t manage to map right the coordinates of my points with those of the chartview so I implemented with hovered signal the user have to hover to see the label of the point"}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 4, "last_activity_date": 1534506203, "last_edit_date": 1534506203, "creation_date": 1534393008, "answer_id": 51869527, "question_id": 51857201, "link": "https://stackoverflow.com/questions/51857201/qchartview-and-qscatterseries-overrdide-the-label-of-a-qpointf/51869527#51869527", "title": "QChartView and QScatterSeries overrdide the label of a QPointF", "body": "<p><strong>Why this could be difficult to achieve without changing the Qt source code</strong></p>\n\n<ol>\n<li><p><a href=\"https://doc.qt.io/qt-5.11/qxyseries.html#pointLabelsFormat-prop\" rel=\"nofollow noreferrer\">QXYSeries::setPointLabelsFormat</a> wouldn't be of much help to you. It does indeed allow you to change the format of the labels, but the only variable part of it are the coordinates of the points.</p></li>\n<li><p>All the drawing is done in the private part of the Qt classes. Here is the whole story:</p></li>\n</ol>\n\n<p>The labels are drawn in the <a href=\"https://code.woboq.org/qt5/qtcharts/src/charts/xychart/qxyseries.cpp.html#_ZN8QtCharts16QXYSeriesPrivate21drawSeriesPointLabelsEP8QPainterRK7QVectorI7QPointFEi\" rel=\"nofollow noreferrer\">private part</a> of <em>QXYSeries</em> (<code>painter-&gt;drawText(position, pointLabel);</code>):</p>\n\n<pre><code>void QXYSeriesPrivate::drawSeriesPointLabels(QPainter *painter, const QVector&lt;QPointF&gt; &amp;points,\n                                             const int offset)\n{\n    if (points.size() == 0)\n        return;\n    static const QString xPointTag(QLatin1String(\"@xPoint\"));\n    static const QString yPointTag(QLatin1String(\"@yPoint\"));\n    const int labelOffset = offset + 2;\n    painter-&gt;setFont(m_pointLabelsFont);\n    painter-&gt;setPen(QPen(m_pointLabelsColor));\n    QFontMetrics fm(painter-&gt;font());\n    // m_points is used for the label here as it has the series point information\n    // points variable passed is used for positioning because it has the coordinates\n    const int pointCount = qMin(points.size(), m_points.size());\n    for (int i(0); i &lt; pointCount; i++) {\n        QString pointLabel = m_pointLabelsFormat;\n        pointLabel.replace(xPointTag, presenter()-&gt;numberToString(m_points.at(i).x()));\n        pointLabel.replace(yPointTag, presenter()-&gt;numberToString(m_points.at(i).y()));\n        // Position text in relation to the point\n        int pointLabelWidth = fm.width(pointLabel);\n        QPointF position(points.at(i));\n        position.setX(position.x() - pointLabelWidth / 2);\n        position.setY(position.y() - labelOffset);\n        painter-&gt;drawText(position, pointLabel);\n    }\n}\n</code></pre>\n\n<p><em>drawSeriesPointLabels</em> is called from the <a href=\"https://code.woboq.org/qt5/qtcharts/src/charts/scatterchart/scatterchartitem.cpp.html#_ZN8QtCharts16ScatterChartItem5paintEP8QPainterPK24QStyleOptionGraphicsItemP7QWidget\" rel=\"nofollow noreferrer\">paint method</a> of <em>ScatterChartItem</em> (this class is not included in the official documentation):</p>\n\n<pre><code>void ScatterChartItem::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)\n{\n    Q_UNUSED(option)\n    Q_UNUSED(widget)\n    if (m_series-&gt;useOpenGL())\n        return;\n    QRectF clipRect = QRectF(QPointF(0, 0), domain()-&gt;size());\n    painter-&gt;save();\n    painter-&gt;setClipRect(clipRect);\n    if (m_pointLabelsVisible) {\n        if (m_pointLabelsClipping)\n            painter-&gt;setClipping(true);\n        else\n            painter-&gt;setClipping(false);\n        m_series-&gt;d_func()-&gt;drawSeriesPointLabels(painter, m_points,\n                                                  m_series-&gt;markerSize() / 2\n                                                  + m_series-&gt;pen().width());\n    }\n    painter-&gt;restore();\n}\n</code></pre>\n\n<p>The <em>ScatterChartItem</em> in turn is created in the <a href=\"https://code.woboq.org/qt5/qtcharts/src/charts/scatterchart/qscatterseries.cpp.html#_ZN8QtCharts21QScatterSeriesPrivate18initializeGraphicsEP13QGraphicsItem\" rel=\"nofollow noreferrer\">private part</a> of <em>QScatterSeries</em> and can't be substituted with a custom class:</p>\n\n<pre><code>void QScatterSeriesPrivate::initializeGraphics(QGraphicsItem* parent)\n{\n    Q_Q(QScatterSeries);\n    ScatterChartItem *scatter = new ScatterChartItem(q,parent);\n    m_item.reset(scatter);\n    QAbstractSeriesPrivate::initializeGraphics(parent);\n}\n</code></pre>\n\n<p><strong>What you might wanna try</strong></p>\n\n<ol>\n<li><p>Hide the original labels with <code>setPointLabelsVisible(false);</code> The labels will be drawn separately afterwards.</p></li>\n<li><p>Subclass <em>QChartView</em> and reimplement the <code>paintEvent</code>, invoking first <code>QChartView::paintEvent</code> and then calling a custom function (lets say <code>drawCustomLabels</code>), which is a modified version of <code>QXYSeriesPrivate::drawSeriesPointLabels</code>. By calling <code>drawCustomLabels</code> pass:</p>\n\n<ul>\n<li>a local painter drawing on the vieport of <em>MyChartView</em>,</li>\n<li>the points as returned by <code>QXYSeries::points</code>,</li>\n<li>the desired offset.</li>\n</ul></li>\n</ol>\n\n<p>Here is an example of how the <code>drawCustomLabels</code> might look like:</p>\n\n<pre><code>void MyChartView::drawCustomLabels(QPainter *painter, const QVector&lt;QPointF&gt; &amp;points, const int offset)\n{\n    if (points.count() == 0)\n        return;\n\n    QFontMetrics fm(painter-&gt;font());\n    const int labelOffset = offset + 2;\n\n    painter-&gt;setFont(m_pointLabelsFont); // Use QXYSeries::pointLabelsFont() to access m_pointLabelsFont\n    painter-&gt;setPen(QPen(m_pointLabelsColor)); // Use QXYSeries::pointLabelsColor() to access m_pointLabelsColor\n\n    for (int n(0); n &lt; points.count(); n++) {\n        QString pointLabel = \"...\"; // Set the desired label for the n-th point of the series\n        // Position text in relation to the point\n        int pointLabelWidth = fm.width(pointLabel);\n        QPointF position(points.at(n));\n        position.setX(position.x() - pointLabelWidth / 2);\n        position.setY(position.y() - labelOffset);\n        painter-&gt;drawText(position, pointLabel);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 2421995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ad37035668a1cbe041e65c4e77e3293d?s=128&d=identicon&r=PG", "display_name": "chatzich", "link": "https://stackoverflow.com/users/2421995/chatzich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 1, "accepted_answer_id": 51869527, "answer_count": 1, "score": 2, "last_activity_date": 1540716159, "creation_date": 1534329655, "last_edit_date": 1540716159, "question_id": 51857201, "link": "https://stackoverflow.com/questions/51857201/qchartview-and-qscatterseries-overrdide-the-label-of-a-qpointf", "title": "QChartView and QScatterSeries overrdide the label of a QPointF", "body": "<p>I have a QChartView which displays some 2D points which are representing each one a specific project I want to label each point with the project name AND NOT with it's x,y coordinates as the default behaviour\n<a href=\"https://i.stack.imgur.com/otqr0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/otqr0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there any way to achieve override the function that creates or render the labels?</p>\n"}, {"tags": ["c#", "c++", "dlib"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1534329559, "post_id": 51857061, "comment_id": 90666528, "body": "You may want to use uint instead of int.  The files may be very large.  LPStr is bytes terminated with a &#39;\\0&#39;.  Yet you are using it with jpg file which doesn&#39;t make a lot of sense.  It should be marshall as a byte[].  Since it is bytes you need a count also passed from the c++ to the c#."}, {"owner": {"reputation": 53, "user_id": 10226133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b5a7ffe2275efac53b536affa44549?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Sellers", "link": "https://stackoverflow.com/users/10226133/calvin-sellers"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1534330195, "post_id": 51857061, "comment_id": 90666749, "body": "The function only takes the path to the image, and in C++ it loads the image like so (matrix&lt;rgb_pixel&gt; image; string imagePathStr(imagePath); load_image(image, imagePathStr);)...but I may be misreading your comment but it sounds like you want me to send the bytes of the image to the function. Not sure that will solve my problem but willing to give it a try."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1534331460, "post_id": 51857061, "comment_id": 90667273, "body": "It looks like you are only passing the filename. The marshal UnmanagedType.LPStr converts the c# string (two byte characters) object to a byte[] terminated with a &#39;\\0&#39;.  The c language code [char* imagePath] properly accept the string. I suspect the issue is with imagePathStr().  The compile for following with terminate with &#39;\\0&#39;: string str = &quot;C:\\\\images\\\\Me.jpg&quot;; imagePathStr() should do the same."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10226133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b5a7ffe2275efac53b536affa44549?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Sellers", "link": "https://stackoverflow.com/users/10226133/calvin-sellers"}, "edited": false, "score": 0, "creation_date": 1534345283, "post_id": 51858364, "comment_id": 90674726, "body": "I tried this earlier today and it wasn&#39;t working, then dummy me takes a closer look and I wasn&#39;t passing in a real image location anymore because I modified my code to post on here.  Well once I fixed that and applied your changes everything worked! Thank You!"}], "tags": [], "owner": {"reputation": 397, "user_id": 3208616, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002111201644/picture?type=large", "display_name": "Ahmed Bahtity", "link": "https://stackoverflow.com/users/3208616/ahmed-bahtity"}, "is_accepted": true, "score": 0, "last_activity_date": 1534334666, "creation_date": 1534334666, "answer_id": 51858364, "question_id": 51857061, "link": "https://stackoverflow.com/questions/51857061/calling-c-dlib-from-c-results-in-bad-allocation-exception/51858364#51858364", "title": "Calling C++ DLib from C# results in bad allocation exception", "body": "<p>You need to adapt your code as following </p>\n\n<p>in the DLL </p>\n\n<p><code>extern \"C\" __declspec(dllexport) int AddImageToCollection(LPCWSTR imagePath)\n{\n....\n// you may need to convert from Unicode string to ANSI if you are calling function that accept ANSI strings\n}\n</code></p>\n\n<p>and in the c# application </p>\n\n<pre><code>[DllImport(\"FacialRecognition.dll\", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)] public static extern int AddImageToCollection(string imagePath);\n</code></pre>\n\n<p>and call your function like </p>\n\n<pre><code>int whatIsMyIdx = AddImageToCollection(@\"C:\\\\images\\\\Me.jpg\");\n</code></pre>\n\n<p>For the above to work correctly,  Do not forget to compile both application and Dll as Unicode. if they are differ you should adapt the correct export and import declarations.</p>\n"}], "owner": {"reputation": 53, "user_id": 10226133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b5a7ffe2275efac53b536affa44549?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Sellers", "link": "https://stackoverflow.com/users/10226133/calvin-sellers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 51858364, "answer_count": 1, "score": 1, "last_activity_date": 1534334666, "creation_date": 1534328927, "question_id": 51857061, "link": "https://stackoverflow.com/questions/51857061/calling-c-dlib-from-c-results-in-bad-allocation-exception", "title": "Calling C++ DLib from C# results in bad allocation exception", "body": "<p>If I run my code directly in C++ it runs just fine. However when I invoke it from C# I get a bad allocation message. My C++ experience is really low but I feel based on everything I have read and modified, that this should work.</p>\n\n<p><strong>My Situation</strong></p>\n\n<p>Pass image path through facial recognition, it will then save/serialize the results to disk and return back the image's index in the array (function: int AddImageToCollection)</p>\n\n<p>If I run my code with the main function I get perfect results (<strong>Figure 1</strong>) but if I run it through C# (<strong>Figure 2</strong>) I get the following:</p>\n\n<p>I'm getting log 4-1 but not log 4-2, and the only error in e.what() is \"bad allocation\". I created a parameterless test function that is hard coded to return 5 and that works so it is isolated to this more complex function, and I believe it has to be related to passing in data to a const char*.</p>\n\n<p><strong>Figure 1</strong></p>\n\n<pre><code>frontal_face_detector detector = get_frontal_face_detector();\nshape_predictor sp;\nanet_type net;\n\nbool fileExists(const std::string&amp; name) {\nifstream f(name.c_str());\nreturn f.good();\n}\n\nvoid log(std::string name) {\n\n}\n\nint main(int argc, char** argv) try\n{\nstring str = \"C:\\\\images\\\\Me.jpg\";\nconst char* c = str.c_str();\n\nint whatIsMyIdx = AddImageToCollection(c);\n\ncout &lt;&lt; whatIsMyIdx &lt;&lt; endl;\n\ncin.get();\n}\ncatch (std::exception&amp; e)\n{\n    cout &lt;&lt; e.what() &lt;&lt; endl;\n}\n\nint AddImageToCollection(const char* imagePath)\n{\n    deserialize(\"shape_predictor_5_face_landmarks.dat\") &gt;&gt; sp;\n    deserialize(\"dlib_face_recognition_resnet_model_v1.dat\") &gt;&gt; net;\n\n    matrix&lt;rgb_pixel&gt; image;\n    string imagePathStr(imagePath);\n\n    load_image(image, imagePathStr);\n\n    std::vector&lt;matrix&lt;rgb_pixel&gt;&gt; faces;\n\n    if (fileExists(\"faces_in_collection.dat\")) {\n        deserialize(\"faces_in_collection.dat\") &gt;&gt; faces;\n    }\n\n    auto facesDetected = detector(image);\n\n    if (facesDetected.size() == 0) { return -1; }\n    if (facesDetected.size() &gt; 1) { return -2; }\n\n    auto shape = sp(image, facesDetected[0]);\n\n    log(\"4-1\");\n\n    matrix&lt;rgb_pixel&gt; face_chip;\n    extract_image_chip(image, get_face_chip_details(shape, 150, 0.25), face_chip);\n\n    log(\"4-2\");\n\n    faces.push_back(move(face_chip));\n    serialize(\"faces_in_collection.dat\") &lt;&lt; faces;\n\n    std::vector&lt;matrix&lt;float, 0, 1&gt;&gt; face_descriptors;\n\n    if (fileExists(\"face_descriptors_in_collection.dat\")) {\n        deserialize(\"face_descriptors_in_collection.dat\") &gt;&gt; face_descriptors;\n    }\n\n    face_descriptors.push_back(net(faces[faces.size() - 1]));\n\n    serialize(\"face_descriptors_in_collection.dat\") &lt;&lt; face_descriptors;\n\n    return faces.size() - 1; //Return Image's Index in Array\n}\n</code></pre>\n\n<p><strong>Figure 2</strong></p>\n\n<pre><code>    [DllImport(\"FacialRecognition.dll\", CallingConvention = CallingConvention.Cdecl)]\n    public static extern int TestImageToCollection();\n\n    [DllImport(\"FacialRecognition.dll\", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]\n    public static extern int AddImageToCollection([MarshalAs(UnmanagedType.LPStr)]string imagePath);\n\n    private void Form1_Load(object sender, EventArgs e)\n    {\n        int whatIsMyTestIdx = TestImageToCollection();\n\n        int whatIsMyIdx = AddImageToCollection(@\"C:\\images\\Me.jpg\");\n\n        MessageBox.Show(whatIsMyIdx.ToString());\n    }\n</code></pre>\n"}, {"tags": ["c++", "memory", "optimization"], "comments": [{"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 2, "creation_date": 1534328222, "post_id": 51856880, "comment_id": 90665973, "body": "Just use <code>std::copy</code>..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 1, "creation_date": 1534330606, "post_id": 51856880, "comment_id": 90666930, "body": "@You: <code>std::copy</code> would require conversion from <code>CameraSpacePoint</code> to <code>PointXYZ</code> not currently provided..."}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 0, "creation_date": 1534330659, "post_id": 51856880, "comment_id": 90666955, "body": "@You it&#39;s causes types mismatch"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1534330756, "post_id": 51856880, "comment_id": 90666993, "body": "If these points are aligned for SIMD purposes, this is still a somewhat unfortunate layout"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1534330966, "post_id": 51856880, "comment_id": 90667064, "body": "@harold: I am creating an adapter between two APIs (Kinect SDK 2.0 and PCL) and clamped in such conditions"}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 0, "creation_date": 1534331589, "post_id": 51856880, "comment_id": 90667340, "body": "Right, don&#39;t know what I was thinking..."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1534335173, "post_id": 51856880, "comment_id": 90668995, "body": "Is it OK to give the <code>camera_space_points</code> some padding (like <code>camera_space_points[BIG_VAL + 1]</code>), and use SSE for the copy?"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1534335316, "post_id": 51856880, "comment_id": 90669058, "body": "@harold: I can&#39;t."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1534335355, "post_id": 51856880, "comment_id": 90669080, "body": "The padding or the SSE? Without padding there are still tricks, but the last item becomes annoying"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1534336589, "post_id": 51856880, "comment_id": 90669679, "body": "@harold: I can&#39;t do anything with that structures one is from Kinect SDK 2.0 and anouther one is from PCL."}, {"owner": {"reputation": 240, "user_id": 9720723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c697e80e81a423d96624378d2b8386c?s=128&d=identicon&r=PG&f=1", "display_name": "rmm19433", "link": "https://stackoverflow.com/users/9720723/rmm19433"}, "edited": false, "score": 0, "creation_date": 1534337883, "post_id": 51856880, "comment_id": 90670386, "body": "@DmitryZhivaev why not create a union with both types? I updated my answer to reflect this additional information. According to [class.union#1] using the union for this case should be perfectly fine."}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 240, "user_id": 9720723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c697e80e81a423d96624378d2b8386c?s=128&d=identicon&r=PG&f=1", "display_name": "rmm19433", "link": "https://stackoverflow.com/users/9720723/rmm19433"}, "edited": false, "score": 0, "creation_date": 1534338447, "post_id": 51856880, "comment_id": 90670719, "body": "@rmm19433 : I can&#39;t do anything with that structures one is from Kinect SDK 2.0 and another one is from PCL."}, {"owner": {"reputation": 240, "user_id": 9720723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c697e80e81a423d96624378d2b8386c?s=128&d=identicon&r=PG&f=1", "display_name": "rmm19433", "link": "https://stackoverflow.com/users/9720723/rmm19433"}, "edited": false, "score": 0, "creation_date": 1534339127, "post_id": 51856880, "comment_id": 90671110, "body": "@DmitryZhivaev the idea was to reuse the memory. To further elaborate could you add the function signature you are working with?"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 240, "user_id": 9720723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c697e80e81a423d96624378d2b8386c?s=128&d=identicon&r=PG&f=1", "display_name": "rmm19433", "link": "https://stackoverflow.com/users/9720723/rmm19433"}, "edited": false, "score": 0, "creation_date": 1534339454, "post_id": 51856880, "comment_id": 90671296, "body": "@rmm19433 :Unfortunately, in my context it is impossible to use such a union."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534339992, "post_id": 51856880, "comment_id": 90671608, "body": "I have the feeling that your approach is already the fastest possible. The inner loop should consist of no more than three memory loads and stores, so six instructions touching 28 bytes of memory. I&#39;d be surprised if this didn&#39;t saturate the memory bus of the CPU."}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534340797, "post_id": 51856880, "comment_id": 90672079, "body": "@cmaster: Maybe i can optimise for loop, to reduce variable i check? I&#39;ve heard about templates, that can expand such a simple for into sequence of executions at the cost of compiling time and source files size."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534342415, "post_id": 51856880, "comment_id": 90672997, "body": "@DmitryZhivaev: harold&#39;s answer is the best currently performance-wise. But as cmaster says, it may not matter, as you&#39;re like already memory bound. How much time does it take currently to do that loop?"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534343488, "post_id": 51856880, "comment_id": 90673659, "body": "@geza: I run it sequently in loop 100 times and get equal results with memcpy 12 and 16 bytes, about 390ms for each."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1534343647, "post_id": 51856880, "comment_id": 90673761, "body": "Your loop control is standard counted loop; your compiler knows how to optimize that. You won&#39;t be able to do anything for it because the loop control won&#39;t take any time at all in your case. And I literally mean &quot;won&#39;t take any time&quot;: Your CPU will be executing the loop control instructions in parallel to the memory loads and stores which take much longer. So the loop control&#39;s latency is hidden behind the memory accesses."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534344019, "post_id": 51856880, "comment_id": 90674000, "body": "That&#39;s ~6GiB/sec read, and ~8GiB/sec write speed. What machine do you have?"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534344977, "post_id": 51856880, "comment_id": 90674558, "body": "@geza: <a href=\"https://drive.google.com/open?id=18EwqDiigKR-Uga7epCgJ3nOXgNgjm1RH\" rel=\"nofollow noreferrer\">sysinfo img</a>"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534349235, "post_id": 51856880, "comment_id": 90676958, "body": "Hmm, maybe you can improve on these numbers with prefetching, and using <code>MOVNT</code> instructions for writing data. This way you can utilize the cache best. I&#39;m sure that that machine can do better, I expect a 1.5x-2x speedup with proper cache usage."}], "answers": [{"comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1534334181, "post_id": 51858076, "comment_id": 90668539, "body": "Doesn&#39;t look so great to me, two loads and two stores per struct while it could be done with one each"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "edited": false, "score": 0, "creation_date": 1534334961, "post_id": 51858076, "comment_id": 90668891, "body": "Thats awesome! Your solution is 66% faster than mine! 20 ms vs 12 ms! Thank you very much :)"}, {"owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "edited": false, "score": 0, "creation_date": 1534336395, "post_id": 51858076, "comment_id": 90669571, "body": "@Passer By: I hurried. If i make one time copy then the result is above (20 ms vs 12 ms). If i make 10 times copy sequently it will be 57ms vs 115ms. And if i make 100 times copy sequently it will be 400ms vs 1140ms. And in my case memcpy is faster and better suited."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1534337963, "post_id": 51858076, "comment_id": 90670434, "body": "I think it is highly subjective, which version is more readable. For me, OP&#39;s version is more readable than the solution you&#39;ve presented (I&#39;m not saying that your version is bad/not readable, just OP&#39;s version is more readable <b>for me</b>). So I disagree that &quot;This is what you should always write as default&quot;. Plus, OP seeks for the &quot;most efficient&quot; way. In this case, readability/maintainability is not the most important thing. Sure, if it can be readable/maintainable, then we should go for it, but if readability/maintainability hurts performance, then we shouldn&#39;t use such a solution."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534340376, "post_id": 51858076, "comment_id": 90671836, "body": "@geza Readability might be subjective, but in this particular case I argue it is <i>objectively</i> more readable and maintainable. Imperative vs declarative aside, this version frees you from thinking about trivially copyable types, off-by-one errors and misaligned reads, all of which are excruciatingly error prone. On the topic of performance, since we don&#39;t have the exact situation where this is being used, I can hardly argue much in either way."}, {"owner": {"reputation": 453, "user_id": 2986286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f447e2c717fa3423629550a2d7b743?s=128&d=identicon&r=PG&f=1", "display_name": "0kcats", "link": "https://stackoverflow.com/users/2986286/0kcats"}, "edited": false, "score": 0, "creation_date": 1534360408, "post_id": 51858076, "comment_id": 90682188, "body": "This answer is not in the spirit of the question. Also, the std::transform is a poor choice to use in a maintainable c++ code because it is an unsafe API."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 453, "user_id": 2986286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f447e2c717fa3423629550a2d7b743?s=128&d=identicon&r=PG&f=1", "display_name": "0kcats", "link": "https://stackoverflow.com/users/2986286/0kcats"}, "edited": false, "score": 0, "creation_date": 1534402120, "post_id": 51858076, "comment_id": 90693560, "body": "@0kcats Unsafe... how? Bounds checking is <i>your</i> responsibility, and no this isn&#39;t analogous to <code>sprintf</code>."}, {"owner": {"reputation": 453, "user_id": 2986286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22f447e2c717fa3423629550a2d7b743?s=128&d=identicon&r=PG&f=1", "display_name": "0kcats", "link": "https://stackoverflow.com/users/2986286/0kcats"}, "edited": false, "score": 0, "creation_date": 1534446807, "post_id": 51858076, "comment_id": 90719475, "body": "@PasserBy Sorry, it is only unsafe for those who may forget to check the  bounds. Could you add the check?"}], "tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": false, "score": 3, "last_activity_date": 1534333804, "last_edit_date": 1534333804, "creation_date": 1534333476, "answer_id": 51858076, "question_id": 51856880, "link": "https://stackoverflow.com/questions/51856880/move-data-from-array-of-not-aligned-structs-to-array-of-aligned-in-c/51858076#51858076", "title": "Move data from array of not aligned structs to array of aligned in c++", "body": "<p>As always, readability and maintainability trumps other concerns. Write what you mean, and don't fix what isn't a problem: measure before you optimize.</p>\n\n<pre><code>std::transform(camera_space_points, std::end(camera_space_points), points_xyz,\n    [](auto c){\n        return PointXYZ{c.X, c.Y, c.Z};\n    });\n</code></pre>\n\n<p>This is what you should always write as default. By their <a href=\"https://godbolt.org/z/M2E1OW\" rel=\"nofollow noreferrer\">assembly output</a> and a <a href=\"http://quick-bench.com/e-OWndHguf9SSb08JL0Q6ddMAsI\" rel=\"nofollow noreferrer\">quick benchmark</a>, this is pretty much equivalent to the <code>memcpy</code> version.</p>\n\n<p>On a more hand-wavy note, optimizers are really good at micro-optimizing simple code such as copying a large chunk of memory, manual optimizations are rarely better.</p>\n"}, {"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534338497, "post_id": 51858859, "comment_id": 90670756, "body": "Doesn&#39;t unrolling the loop help a little bit? I see that clang unrolled it, but MSVC didn&#39;t, an OP likely uses MSVC."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534338633, "post_id": 51858859, "comment_id": 90670845, "body": "@geza it should help since MSVC is being a bit silly there"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1534339925, "post_id": 51858859, "comment_id": 90671569, "body": "Btw, does the exact implementation matter in this case? Input data is ~24MB, the whole process is likely memory bandwidth bound, isn&#39;t it?"}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": false, "score": 2, "last_activity_date": 1534337225, "last_edit_date": 1534337225, "creation_date": 1534336716, "answer_id": 51858859, "question_id": 51856880, "link": "https://stackoverflow.com/questions/51856880/move-data-from-array-of-not-aligned-structs-to-array-of-aligned-in-c/51858859#51858859", "title": "Move data from array of not aligned structs to array of aligned in c++", "body": "<p>An alternative is making sure you copy chunks of 16 bytes. That way the copy can be optimized better in terms of instructions that copy 16 bytes at once (without any surrounding shuffles or other unnecessary complications), if they exist (they exist on x64 so on eg Xbox One and PC this can help). The <code>PointXYZ</code>s will be 16 bytes, so writing 16 bytes to them is fine. The source has elements of 12 bytes, so every time one of them is copied this way there is also 4 bytes from the next element in it, they end up in the padding of the target <code>PointXYZ</code> and will be ignored. The <em>last</em> <code>CameraSpacePoint</code> does not necessarily have 4 readable bytes after it, it might end just before an unmapped/unreadable memory region, so there we need to be careful to not read further - unless that array can be extended a little to guarantee that the memory exists. </p>\n\n<p>For example:</p>\n\n<pre><code>auto dst = ::dst;\nauto src = ::src;\nfor (int i = 0; i + 1 &lt; BIG_VAL; ++i)\n    std::memcpy(dst++, src++, 16);\n// last point is special, since the src may not have 16 bytes left to read\nstd::memcpy(dst, src, sizeof(CameraSpacePoint));\n</code></pre>\n\n<p>(on <a href=\"https://godbolt.org/g/3bk5wz\" rel=\"nofollow noreferrer\">godbolt</a>)</p>\n"}], "owner": {"reputation": 89, "user_id": 4563885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61a8dd1385f6fb13e2c7d045d5e1a121?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Zhivaev", "link": "https://stackoverflow.com/users/4563885/dmitry-zhivaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1534339015, "creation_date": 1534328181, "last_edit_date": 1534330317, "question_id": 51856880, "link": "https://stackoverflow.com/questions/51856880/move-data-from-array-of-not-aligned-structs-to-array-of-aligned-in-c", "title": "Move data from array of not aligned structs to array of aligned in c++", "body": "<p>What is the best way to move data from array of CameraSpacePoint to array of PointXYZ?</p>\n\n<pre><code>struct CameraSpacePoint\n{\n    float X;\n    float Y;\n    float Z;\n};\n\n __declspec(align(16))\n struct PointXYZ\n {\n      float x;\n      float y;\n      float z;\n };\n\n constexpr int BIG_VAL = 1920 * 1080;\n\n CameraSpacePoint  camera_space_points[BIG_VAL];\n PointXYZ          points_xyz[BIG_VAL];\n</code></pre>\n\n<p>My solution:</p>\n\n<pre><code>CameraSpacePoint* camera_space_points_ptr = &amp;camera_space_points[0];\nPointXYZ*         points_xyz_ptr          = &amp;points_xyz[0];\n\nfor (int i = 0; i &lt; BIG_VAL; ++i)\n{\n    memcpy(points_xyz_ptr++, camera_space_points_ptr++, sizeof(CameraSpacePoint));\n}\n</code></pre>\n\n<p>Is this the most efficient way?</p>\n"}, {"tags": ["c++", "c++11", "default-constructor", "default-arguments", "list-initialization"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1534326766, "post_id": 51856503, "comment_id": 90665236, "body": "why so verbose? Do i miss something or is the question basically about the difference between <code>T t = {};</code> and <code>T t = T();</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 7, "last_activity_date": 1534326787, "creation_date": 1534326787, "answer_id": 51856552, "question_id": 51856503, "link": "https://stackoverflow.com/questions/51856503/default-argument-and-empty-list-initialization/51856552#51856552", "title": "Default argument and empty list initialization", "body": "<p>No, they are not equivalent. Second variant relies on implicitness of T's default constructor:</p>\n\n<pre><code>class foo\n{\n   public: explicit foo() {}\n};\n\nobject1&lt;foo&gt; of{}; // ok\nobject2&lt;foo&gt; of{}; // error\n</code></pre>\n\n<p>Also I think it is not a good idea to call a copy constructor from a temporary instead of calling a default constructor without a temporary. That is it would be better to implement separate constructors:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct object1 {\n    using type = T;\n    constexpr object1(void): value{} {}\n\n    constexpr object1(const type&amp; val): value{val} {}\n\n    type value;\n};\n</code></pre>\n"}], "owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "accepted_answer_id": 51856552, "answer_count": 1, "score": 5, "last_activity_date": 1534326787, "creation_date": 1534326569, "question_id": 51856503, "link": "https://stackoverflow.com/questions/51856503/default-argument-and-empty-list-initialization", "title": "Default argument and empty list initialization", "body": "<p>Consider the following code, of a simple class with a constructor taking an argument with a default value.</p>\n\n<pre><code>// Version 1\ntemplate &lt;class T&gt;\nstruct object1 {\n    using type = T;\n    constexpr object1(const type&amp; val = type()): value(val) {}\n    type value;\n};\n\n// Version 2\ntemplate &lt;class T&gt;\nstruct object2 {\n    using type = T;\n    constexpr object2(const type&amp; val = {}): value(val) {}\n    type value;\n};\n\n// Main\nint main(int argc, char* argv[]) {\n    using type = /* Something */;\n    object1&lt;type&gt; x1;\n    object2&lt;type&gt; x2;\n    auto value1 = x1.value;\n    auto value2 = x2.value;\n    // Is there certain types for which value1 and value2 will be different?\n    return 0;\n}\n</code></pre>\n\n<p>Are the two versions of the constructor equivalent (will always produce the same result for any <code>T</code>), or they are different? </p>\n\n<p>If they are different, could you provide an example of <code>T</code> for which the two would lead to different results?</p>\n"}, {"tags": ["python", "c++", "opencv", "tensorflow", "object-detection"], "answers": [{"tags": [], "owner": {"reputation": 408, "user_id": 10126125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52a81f1c9f5e4179ffeae2314500c8fb?s=128&d=identicon&r=PG&f=1", "display_name": "Akalanka Weerasooriya", "link": "https://stackoverflow.com/users/10126125/akalanka-weerasooriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1534341577, "creation_date": 1534341577, "answer_id": 51860179, "question_id": 51856485, "link": "https://stackoverflow.com/questions/51856485/finetuning-a-tensorflow-object-detection-pretrained-model/51860179#51860179", "title": "Finetuning a tensorflow object detection pretrained model", "body": "<p>In case of variations in the background lighting, it might be possible to use Background Subtraction</p>\n\n<p><a href=\"https://docs.opencv.org/3.4.1/d1/dc5/tutorial_background_subtraction.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/3.4.1/d1/dc5/tutorial_background_subtraction.html</a> \n,while dynmically updating it as shown here:</p>\n\n<p><a href=\"https://www.pyimagesearch.com/2015/06/01/home-surveillance-and-motion-detection-with-the-raspberry-pi-python-and-opencv/\" rel=\"nofollow noreferrer\">https://www.pyimagesearch.com/2015/06/01/home-surveillance-and-motion-detection-with-the-raspberry-pi-python-and-opencv/</a></p>\n\n<p>Thank you.</p>\n"}], "owner": {"reputation": 81, "user_id": 9860738, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "simonEE", "link": "https://stackoverflow.com/users/9860738/simonee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534341577, "creation_date": 1534326516, "question_id": 51856485, "link": "https://stackoverflow.com/questions/51856485/finetuning-a-tensorflow-object-detection-pretrained-model", "title": "Finetuning a tensorflow object detection pretrained model", "body": "<p>I'm working on a real-time object detector with tensorflow and opencv.</p>\n\n<p>I've used different SSD and Faster-RCNN based frozen inference graphs and they almost never fail. </p>\n\n<p>The video stream comes from a IR camera fixed to a wall that has a background that almost never changes. There are some misdetections at particular hours of the day (e.g. when the light changes in the afternoon) that occur in the background area or on small objects too close to the camera.</p>\n\n<p>So to fix this little mistakes i wanted to finetune the model with images from the same background.</p>\n\n<p>Being the background always the same, how do i approach the retraining of the model having 1000 misdetections pics that are all almost the same?</p>\n"}, {"tags": ["c++", "macros", "variadic-macros"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1534327002, "post_id": 51856415, "comment_id": 90665366, "body": "btw if you use gcc its the <code>-E</code> flag to get the output after the preprocessor, helps a lot when writing macros."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1534330784, "post_id": 51856415, "comment_id": 90667005, "body": "Do you need format, or is it just space separated values ?"}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "edited": false, "score": 0, "creation_date": 1534331243, "post_id": 51856415, "comment_id": 90667161, "body": "I actually need just space separated values, and currently I am trying to implement it based on the answer but I&#39;m getting a linker error"}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534331472, "post_id": 51856504, "comment_id": 90667280, "body": "Alternatively, use Boost Format. It does support <code>std::string</code> and many other user-defined types."}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": false, "score": 5, "last_activity_date": 1534326571, "creation_date": 1534326571, "answer_id": 51856504, "question_id": 51856415, "link": "https://stackoverflow.com/questions/51856415/variadic-macro-cannot-pass-objects-of-non-trivially-copyable-type-through/51856504#51856504", "title": "Variadic Macro: cannot pass objects of non-trivially-copyable type through &#39;...&#39;", "body": "<p>The issue here is not the variadic macro, but the call to <code>printf</code>. Have a look at the <a href=\"https://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"noreferrer\">documentation</a>: the format specifier <code>\"%s\"</code> corresponds to <code>char*</code>, not <code>std::string</code>. <code>printf</code> can only handle primitive builtin types. You can change you invocation to</p>\n\n<pre><code>LOG_NOTE(\"%s %d %s\", \"Hello World\", bar, foo.c_str());\n</code></pre>\n\n<p>to fix this.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534331354, "post_id": 51856545, "comment_id": 90667218, "body": "In all fairness, logging macro&#39;s are a well-known exemption from the &quot;no macro&#39;s&quot; rule, for three reasons: <code>__FILE__</code>, <code>__LINE__</code> and the ability to turn them into do-nothing statements in release builds. You can&#39;t eliminate side effects from function call arguments."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1534344107, "post_id": 51856545, "comment_id": 90674060, "body": "@MSalters as long as the c++ committee behave themselves, we&#39;ll soon have std::source_location, which along with <code>if constexpr</code>, will eliminate the need for macros altogether. Note that the argument side-effects are not an issue as long as you pass the arguments by universal reference. Obviously passing LOG(&quot;%s%&quot;, mything.to_string().c_str()); does invoke side-effects and should obviously be avoided. Better to provide an ADL overload for <code>convert_for_log_note(MyThing const&amp;)</code> type."}, {"owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 0, "creation_date": 1584289436, "post_id": 51856545, "comment_id": 107384868, "body": "This is exactly what I&#39;m looking for, but it does not seem to work in C++11 at least not with GNU GCC v7.1.1 using <code>g++ -std=c++11</code>. It does work however in C++14. Anyone know how to modify this to make it work in C++11?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 1, "creation_date": 1584386389, "post_id": 51856545, "comment_id": 107416396, "body": "@Oliver I&#39;ve added an update which will compile for c++11. <a href=\"https://godbolt.org/z/M5GmyD\" rel=\"nofollow noreferrer\">godbolt.org/z/M5GmyD</a>"}, {"owner": {"reputation": 1252, "user_id": 430067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a98cac3273806fc6524386fc1e44299?s=128&d=identicon&r=PG", "display_name": "Shibumi", "link": "https://stackoverflow.com/users/430067/shibumi"}, "edited": false, "score": 0, "creation_date": 1588877727, "post_id": 51856545, "comment_id": 109077626, "body": "This is super cool. One thing I ran into was that the ability to use <code>decltype(auto)</code> as the return type of the <code>std::string</code> specialization of the <code>convert_for_log_note</code> template depends on how it is first used in the code. (Something along the lines of <a href=\"https://stackoverflow.com/a/43514762/430067.\">stackoverflow.com/a/43514762/430067.</a>) I just changed it to <code>const char*</code> because I did not see any reason for the generic return type."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 4, "last_activity_date": 1584386343, "last_edit_date": 1584386343, "creation_date": 1534326728, "answer_id": 51856545, "question_id": 51856415, "link": "https://stackoverflow.com/questions/51856415/variadic-macro-cannot-pass-objects-of-non-trivially-copyable-type-through/51856545#51856545", "title": "Variadic Macro: cannot pass objects of non-trivially-copyable type through &#39;...&#39;", "body": "<blockquote>\n  <p>I wrote a variadic macro</p>\n</blockquote>\n\n<p>Don't. Use a variadic template function.</p>\n\n<p>The actual problem you have is that you're trying to pass a C++ object (<code>std::string</code>) through a C API (<code>printf</code>). This is not possible.</p>\n\n<p>You'd need some mechanism for conversion, for example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n\ntemplate&lt;class T&gt;\ndecltype(auto) convert_for_log_note(T const&amp; x)\n{\n    return x;\n}\n\ndecltype(auto) convert_for_log_note(std::string const&amp; x)\n{\n    return x.c_str();\n}\n\n\ntemplate&lt;class...Args&gt; \nvoid LOG_NOTE(const char* format, Args&amp;&amp;...args)\n{\n    printf(format, convert_for_log_note(args)...);\n}\n\nint main()\n{\n    std::string foo = \"random string\";\n    int bar = 5;\n    LOG_NOTE(\"%s %d %s\\n\", \"Hello World\", bar, foo);\n\n    return 0;\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>Hello World 5 random string\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/beb3431114833860\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/beb3431114833860</a></p>\n\n<p>Update:</p>\n\n<p>For C++11 you'll need to spell out the return types by hand:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n\ntemplate&lt;class T&gt;\nT const&amp; convert_for_log_note(T const&amp; x)\n{\n    return x;\n}\n\nconst char* convert_for_log_note(std::string const&amp; x)\n{\n    return x.c_str();\n}\n\n\ntemplate&lt;class...Args&gt; \nvoid LOG_NOTE(const char* format, Args&amp;&amp;...args)\n{\n    printf(format, convert_for_log_note(args)...);\n}\n\nint main()\n{\n    std::string foo = \"random string\";\n    int bar = 5;\n    LOG_NOTE(\"%s %d %s\\n\", \"Hello World\", bar, foo);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "edited": false, "score": 0, "creation_date": 1534331792, "post_id": 51857589, "comment_id": 90667428, "body": "Thanks for your input @Jarod42 but I already found similar answer for C++17. However, I am looking for C++11 example with header and source files separated."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "edited": false, "score": 1, "creation_date": 1534331914, "post_id": 51857589, "comment_id": 90667481, "body": "<code>template</code> are not good candidate to split between header and cpp files."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "edited": false, "score": 0, "creation_date": 1534332139, "post_id": 51857589, "comment_id": 90667603, "body": "C++11 version added."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1534332093, "last_edit_date": 1534332093, "creation_date": 1534331452, "answer_id": 51857589, "question_id": 51856415, "link": "https://stackoverflow.com/questions/51856415/variadic-macro-cannot-pass-objects-of-non-trivially-copyable-type-through/51857589#51857589", "title": "Variadic Macro: cannot pass objects of non-trivially-copyable type through &#39;...&#39;", "body": "<p>You cannot pass object to <code>printf</code>, so you have currently to use</p>\n\n<pre><code>LOG_NOTE(\"%s %d %s\", \"Hello World\", bar, foo.c_str());\n</code></pre>\n\n<p>If you don't need formatting, and just write every argument separated with space, you might simply use variadic template instead of MACRO:</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nvoid LOG_NOTE(const Ts&amp;...args)\n{\n    const char* sep = \"\";\n    (((std::cout &lt;&lt; sep &lt;&lt; args), sep = \" \"), ...); // C++17 folding expression\n    // C++11/C++14 version are more verbose:\n    // int dummy[] = {0, ((std::cout &lt;&lt; sep &lt;&lt; args), (sep = \" \"), 0)...};\n    // static_cast&lt;void&gt;(dummy); // avoid warning for unused variable\n}\n\nint main()\n{\n    std::string foo = \"random string\";\n    int bar = 5;\n    LOG_NOTE(\"Hello World\", bar, foo);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/01b4f532cf98da7a\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1584291549, "last_edit_date": 1584291549, "creation_date": 1584290263, "answer_id": 60695181, "question_id": 51856415, "link": "https://stackoverflow.com/questions/51856415/variadic-macro-cannot-pass-objects-of-non-trivially-copyable-type-through/60695181#60695181", "title": "Variadic Macro: cannot pass objects of non-trivially-copyable type through &#39;...&#39;", "body": "<p>I could not get @richardhodges nice solution to work in any of the C++11 compilers I tried. However, the following works with <code>gcc -std=c++11</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n\ntemplate&lt;class T&gt;\nT convert_for_log_note(T const&amp; x)\n{\n    return x;\n}\n\ninline const char* convert_for_log_note(std::string const&amp; x)\n{\n    return x.c_str();\n}\n\n\ntemplate&lt;class...Args&gt; \nvoid LOG_NOTE(const char* format, Args&amp;&amp;...args)\n{\n    printf(format, convert_for_log_note(args)...);\n}\n\nint main()\n{\n    std::string foo = \"random string\";\n    int bar = 5;\n    LOG_NOTE(\"%s %d %s\\n\", \"Hello World\", bar, foo);\n\n    return 0;\n}\n</code></pre>\n\n<p>The <code>inline</code> keyword is necessary with the above solution for the Arduino C++ compiler, whereas other g++ compilers do not require it (the ones I have tried, anyways). Without this keyword, the Arduino code compiles, but the linker complains about multiple definitions. </p>\n"}], "owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4364, "favorite_count": 1, "accepted_answer_id": 51856545, "answer_count": 4, "score": 2, "last_activity_date": 1584386343, "creation_date": 1534326289, "last_edit_date": 1534326857, "question_id": 51856415, "link": "https://stackoverflow.com/questions/51856415/variadic-macro-cannot-pass-objects-of-non-trivially-copyable-type-through", "title": "Variadic Macro: cannot pass objects of non-trivially-copyable type through &#39;...&#39;", "body": "<p>I am trying to write a macro for logging mechanism. I wrote a variadic macro but it does not work with <code>std::string</code>. The code looks like the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n\n\n#define LOG_NOTE(m, ...) printf(m, ##__VA_ARGS__)\n\nint main()\n{\n    std::string foo = \"random string\";\n    int bar = 5;\n    LOG_NOTE(\"%s %d %s\", \"Hello World\", bar, foo);\n\n    return 0;\n}\n</code></pre>\n\n<p>If I would call the macro like following, I would not get any error.</p>\n\n<pre><code>LOG_NOTE(\"%s %d %s\", \"Hello World\", bar, \"random string\");\n</code></pre>\n\n<p><strong>Compiler Output:</strong></p>\n\n<blockquote>\n  <p>In function 'int main()': 5:49: error: cannot pass objects of\n  non-trivially-copyable type 'std::string {aka class\n  std::basic_string}' through '...' 11:5: note: in expansion of\n  macro 'LOG_NOTE'</p>\n</blockquote>\n"}, {"tags": ["c++", "sqlite", "unicode", "char", "stringstream"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534326386, "post_id": 51856384, "comment_id": 90665035, "body": "You need to copy-paste the <i>full</i> and <i>complete</i> error output and show us. Also please point out on which line in the code you show the error is (by adding a comment on the line)."}, {"owner": {"reputation": 55, "user_id": 2511730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyzu9.jpg?s=128&g=1", "display_name": "zokia", "link": "https://stackoverflow.com/users/2511730/zokia"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1534326630, "post_id": 51856384, "comment_id": 90665169, "body": "error C2440: &#39;initializing&#39; : cannot convert from &#39;std::basic_string&lt;_Elem,_Traits,_Ax&gt;&#39; to &#39;std::basic_string&lt;_Elem,_Traits,_Ax&gt;&#39; 1&gt;        with 1&gt;        [ 1&gt;            _Elem=wchar_t, 1&gt;            _Traits=std::char_traits&lt;wchar_t&gt;, 1&gt;            _Ax=std::allocator&lt;wchar_t&gt; 1&gt;        ] 1&gt;        and 1&gt;        [ 1&gt;            _Elem=char, 1&gt;            _Traits=std::char_traits&lt;char&gt;, 1&gt;            _Ax=std::allocator&lt;char&gt; 1&gt;        ] 1&gt;        No constructor could take the source type, or constructor overload resolution was ambiguous"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1534326777, "post_id": 51856384, "comment_id": 90665245, "body": "If you are using Unicode <b>don&#39;t</b> use string or char, always use tstring and TCHAR. Also define UNICODE. Also use _T(&quot;&quot;) instead of &quot;&quot; <b>everywhere</b>. All you need to do is be consistent."}, {"owner": {"reputation": 55, "user_id": 2511730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyzu9.jpg?s=128&g=1", "display_name": "zokia", "link": "https://stackoverflow.com/users/2511730/zokia"}, "edited": false, "score": 0, "creation_date": 1534326914, "post_id": 51856384, "comment_id": 90665317, "body": "Thank You for quick help."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1534327401, "post_id": 51856384, "comment_id": 90665585, "body": "Do you really mean Unicode? Or do you mean wide C-strings? You are probably using Windows and confusing &quot;Unicode&quot; with &quot;UTF-16&quot;, then confusing encodings with types."}, {"owner": {"reputation": 55, "user_id": 2511730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyzu9.jpg?s=128&g=1", "display_name": "zokia", "link": "https://stackoverflow.com/users/2511730/zokia"}, "edited": false, "score": 0, "creation_date": 1534327811, "post_id": 51856384, "comment_id": 90665794, "body": "I&#39;ve set tstrsSQL.imbue(std::locale(&quot;C&quot;));"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1534328162, "post_id": 51856384, "comment_id": 90665951, "body": "just change <code>tstringstream</code> to <code>stringstream</code>."}, {"owner": {"reputation": 55, "user_id": 2511730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyzu9.jpg?s=128&g=1", "display_name": "zokia", "link": "https://stackoverflow.com/users/2511730/zokia"}, "edited": false, "score": 0, "creation_date": 1534328476, "post_id": 51856384, "comment_id": 90666096, "body": "Nope, still same problem. Also this is defined typedef std::wstringstream\ttstringstream; I&#39;ve changed everything from tstringstream to stringstream and still the same error."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1534359352, "post_id": 51856384, "comment_id": 90681702, "body": "@john - I agree &quot;be consistent&quot;, but I strongly disagree &quot;use tstring and TCHAR&quot;, They only make sense <i>if</i> (like Windows itself) you need to support both Unicode and Ansi builds.  The rest of us should <i>only</i> use Unicode builds, and write <code>wstring</code> and <code>wchar_t</code> (and prefix string literals with <code>L</code> of course)."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1534359436, "post_id": 51856384, "comment_id": 90681741, "body": "@LightnessRacesinOrbit You&#39;ve lost that battle.  On Window &quot;Unicode&quot; means something slightly different, there&#39;s no point arguing &quot;it shouldn&#39;t&quot; - it does."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534406419, "post_id": 51856384, "comment_id": 90695909, "body": "@MartinBonner I agree and almost no-one these days needs to support unicode and ansi, but the OP has already started down the TCHAR path, and is likely reading something online which uses TCHAR. Anyone starting afresh should use wchar_t and wstring, or char16_t and u16string."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1534406589, "post_id": 51856384, "comment_id": 90695999, "body": "Hmm, I see from the answer below that I&#39;m wrong."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1534406834, "post_id": 51856384, "comment_id": 90696121, "body": "@john All the MS documentation is in terms of TCHAR et al - the community should push the point that this is a documentation convenience, and should be read as wchar_t et al. (Or equivalent.)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1534416814, "post_id": 51856384, "comment_id": 90701921, "body": "@MartinBonner Nah honestly I&#39;m with you on that - I don&#39;t and won&#39;t try to fight it. <i>But</i> I do try to ensure that affected individuals are at least aware of what the terms mean elsewhere because it can be important"}], "answers": [{"tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": true, "score": 2, "last_activity_date": 1534355063, "last_edit_date": 1534355063, "creation_date": 1534328626, "answer_id": 51856986, "question_id": 51856384, "link": "https://stackoverflow.com/questions/51856384/error-c2440-initializing-cannot-convert-from/51856986#51856986", "title": "error C2440: &#39;initializing&#39; : cannot convert from", "body": "<p>You are using <code>tstringstream</code>, which I guess uses <code>std::wstringstream</code> if <code>UNICODE</code> is defined, so its <code>str()</code> gives a <code>std::basic_string&lt;wchar_t&gt;</code>.</p>\n\n<p>But you get the result into a <code>std::string</code>, which is <code>std::basic_string&lt;char&gt;</code>. So the assignment fails.</p>\n\n<p>Anyway, you take the result and use it in <code>sqlite3_exec()</code>, which takes a <code>const char*</code> as input.</p>\n\n<p>That's why you shouldn't use <code>tstringstream</code>, you should use <code>std::stringstream</code>, and remove the <code>_T</code> from all of the string literals.</p>\n\n<h3>Minimal, complete, working code:</h3>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main()\n{\n    stringstream strstream;\n    strstream &lt;&lt; \"Hello World\";\n    string str = strstream.str();\n    cout &lt;&lt; str &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2511730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyzu9.jpg?s=128&g=1", "display_name": "zokia", "link": "https://stackoverflow.com/users/2511730/zokia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 0, "accepted_answer_id": 51856986, "answer_count": 1, "score": 3, "last_activity_date": 1534355063, "creation_date": 1534326150, "last_edit_date": 1534354943, "question_id": 51856384, "link": "https://stackoverflow.com/questions/51856384/error-c2440-initializing-cannot-convert-from", "title": "error C2440: &#39;initializing&#39; : cannot convert from", "body": "<p>While using SQLite in C++98, how to convert <code>stringstream</code> to Unicode and pass it to <code>sqlite3_exec()</code>? I constantly have this error:</p>\n\n<pre><code>error C2440: 'initializing' : cannot convert from 'std::basic_string&lt;_Elem,_Traits,_Ax&gt;' to 'std::basic_string&lt;_Elem,_Traits,_Ax&gt;'\n1&gt;        with\"\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n    sqlite3 *db;\n    char *zErrMsg = 0;\n    int rc;\n    char *sql;\n    const char* data = \"Callback function called\";\n    tstringstream tstrsSQL;\n    tstrsSQL.imbue(std::locale(\"C\"));\n\n    std::string s = tstrsSQL.str(); // converting stringstream to char?\n    const char* p = s.c_str();\n\n    /* Open database */\n    rc = sqlite3_open(\"db.db3\", &amp;db);\n\n    if( rc ) {\n        fprintf(stderr, \"Can't open database: %s\\n\", sqlite3_errmsg(db));\n        return(0);\n    } else {\n        fprintf(stderr, \"Opened database successfully\\n\");\n    }\n\n    /* Create SQL statement */\n    tstrsSQL &lt;&lt; _T(\"SELECT\") something (\"FROM\") &lt;&lt; table;\n\n    /* Execute SQL statement */\n    rc = sqlite3_exec(db, p, callback, (void*)data, &amp;zErrMsg); // p needs to be unicode\n</code></pre>\n"}, {"tags": ["c++", "qt", "callback", "signals", "slot"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1534336768, "post_id": 51856336, "comment_id": 90669772, "body": "I think, that this could be solved in some other way. Could you please explain what should happen step by step - from sending the message and receiving the answer from the devices, to the processing of the answer and the undertaking of a particullar action."}, {"owner": {"reputation": 119, "user_id": 5784505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a356a2953467f44f9949e2abc43b5bad?s=128&d=identicon&r=PG&f=1", "display_name": "kain", "link": "https://stackoverflow.com/users/5784505/kain"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1535706657, "post_id": 51856336, "comment_id": 91174735, "body": "I used BlockingQueuedConnection now for that purpose since I would wait for the return anyway"}], "owner": {"reputation": 119, "user_id": 5784505, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a356a2953467f44f9949e2abc43b5bad?s=128&d=identicon&r=PG&f=1", "display_name": "kain", "link": "https://stackoverflow.com/users/5784505/kain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534325953, "creation_date": 1534325953, "question_id": 51856336, "link": "https://stackoverflow.com/questions/51856336/qt-pass-a-slot-as-parameter-as-callback", "title": "QT Pass a slot as parameter as callback", "body": "<p>I am quite new to C++/Qt and experiencing some problems while writing an application that uses a SerialBus-connection connected to multiple other devices.</p>\n\n<p>For communication I wrote a class that wraps QtSerialBus and does some encoding/checksum calculation, etc. This class should be usable by different other classes/threads/modules in my program.</p>\n\n<p>This wrapper class looks simplified like this:</p>\n\n<p>Header:</p>\n\n<pre><code>class PeripherieCommunicator : public QObject\n{\nQ_OBJECT\n\npublic:\nexplicit PeripherieCommunicator(std::shared_ptr&lt;MultiMasterCommunicator&gt; mmcom, QObject *parent = nullptr);\n~PeripherieCommunicator();\nprivate:\nstd::shared_ptr&lt;MultiMasterCommunicator&gt; mmcom;\n\ntemplate&lt;typename T1&gt; void send(unsigned char command, unsigned char destAddress, T1 sendItem = nullptr) {\n    auto sendBuffer = QByteArray::fromRawData(reinterpret_cast&lt;const char*&gt;(&amp;sendItem), sizeof(T1));\n    emit sendCommand(command, destAddress, sendBuffer);\n}\n\nsignals:\n    void sendCommand(unsigned char command, unsigned char destAddress, QByteArray sendBuffer = nullptr);\n    void openPort();\n\npublic slots:\n  void CardTypeAGetFullDeviceInfo(unsigned char ucAddress);\n  void CardTypeBStartPositioning(unsigned char ucMotorNbr, signed long slPosition, signed long slSpeed, signed long slAcceleration, unsigned char ucAddress);\nsignals:\n    void CardTypeAFullDeviceInfoReceived(CARDA_FULL_DEVICE_INFO strFullDeviceInfo);\n    void CardTypeBStartPositioningReceived(unsigned short usCMDAnswer);\n    };\n</code></pre>\n\n<p>Example Definition of slot:</p>\n\n<pre><code>void PeripherieCommunicator::PR112StartPositioning(unsigned char ucMotorNbr, \nsigned long slPosition, signed long slSpeed, signed long slAcceleration, \nunsigned char ucAddress)\n{\n    CARDTYPEA_START_POSITIONING data;\n    data.usMotorNumber = ucMotorNbr;\n    data.slDestinationPosition = slPosition;\n    data.slSpeed = slSpeed;\n    data.slAcceleration = slAcceleration;\n    send(COMMAND_START_POSITIONING , ucAddress, data);\n}\n</code></pre>\n\n<p>This works fine so far meaning that the commands are being sent via SerialBus and executed. However most of the devices on the bus will send Replies that I need to handle. \nWhat I tried so far is that I connected a lamba-function in before sending the command that will handle the reply and emitting the corresponding signal. But that would be lead to the situation that every slot that is being connected to that signal is being called. \nWhat I instead want to achieve is some kind of callback-functionality. Meaning that for example the slot \"CardTypeAGetFullDeviceInfo\" gets an additional parameter which is the callback slot.\nIs there any recommended way to do this?</p>\n\n<p>Thanks</p>\n"}]