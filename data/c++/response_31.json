[{"tags": ["c++", "mysql", "qt"], "owner": {"reputation": 2285, "user_id": 2910144, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfd46a7fdd37fbecff245eacdcfacbba?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Miguel Colanta", "link": "https://stackoverflow.com/users/2910144/carlos-miguel-colanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439446810, "creation_date": 1439423446, "last_edit_date": 1439446810, "question_id": 31977292, "link": "https://stackoverflow.com/questions/31977292/dynamically-update-qsqltableview-if-the-database-is-changed", "title": "Dynamically update QSqlTableView if the database is changed", "body": "<p>Here is my code :</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n   db = QSqlDatabase::addDatabase(\"QMYSQL\");\n   db.setHostName(\"localhost\");\n   db.setDatabaseName(\"carl\");\n   db.setUserName(\"root\");\n   db.setPassword(\"123456ca\");\n\n\n   tmb = new Manifest(this);\n   tmb-&gt;setTable(\"carl_table\");\n   tmb-&gt;select();\n\n   ui-&gt;treeView-&gt;setModel(tmb);\n\n\n\n}\n</code></pre>\n\n<p>My application has a single <code>QTableView</code> with a <code>Manifest</code> as a model.\n<code>Manifest</code> is my custom <code>QSqlTableModel</code> class. Reason for it is because I plan on disabling some columns by overriding flags and it works as intended.</p>\n\n<p>My <code>SQL database</code> has two columns, namely the <code>id</code> which will be the primary key and <code>name</code> which is any string. <code>Manifest</code> will be set to that table and it will fetch all the data inside.</p>\n\n<p>Now my problem is that, how do I make my application dynamic? Meaning, if my database table is changed, then I want my application to update itself.</p>\n\n<p>This is the approach that I have thought of:\nMake a thread that will run <code>tmb-&gt;select();</code> in a fixed time. But the problem that I see is that it will mess up my current UI index selections so it will only be editable for a few seconds. </p>\n\n<p>If this is a good approach, then how do I make it work?\nAny other methods or solutions will also be greatly appreciated.</p>\n\n<p>I checked and researched SO and found a similar case as mine, but I somehow don't get the explanation.</p>\n\n<p><strong>edit:</strong> I am thinking of getting the primary key, store it, then re-select it again after refreshing. The thing that concerns me is the performance, since I will have to re-iterate to find the matching PK. Plus, it will be run per second. I am trying to implement this at the moment.</p>\n\n<p><strong>edit #2:</strong> </p>\n\n<p>I was successful on implementing my own version but i am not sure if this is optimized. My process goes like this :</p>\n\n<ol>\n<li><code>select</code> will be run every 1 seconds.</li>\n<li>before the actual line of <code>select()</code>, the clicked <code>index</code> will be recorded.</li>\n<li>after calling <code>select()</code>, the index will be restored.</li>\n<li>scrolling will temporarily stop the timer and it will be resumed if the user clicks on anything.</li>\n<li>the time will also be temporarily stopped if the user double clicked any attributes.</li>\n</ol>\n"}, {"tags": ["java", "android", "c++", "eclipse"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1439422122, "post_id": 31977071, "comment_id": 51860423, "body": "Google is dropping Eclipse support at the end of the year. You are better served examining IntelliJ IDEA or Android Studio, both of which are supported by Google, at least for the Android portion of your project."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1439428226, "post_id": 31977071, "comment_id": 51861818, "body": "Recommend downloading the Java version and then installing the CDT into it. See here: <a href=\"http://www.eclipse.org/cdt/downloads.php\" rel=\"nofollow noreferrer\">eclipse.org/cdt/downloads.php</a>"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2875390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374dad300a5a7c705856d13cf8c1a05a?s=128&d=identicon&r=PG&f=1", "display_name": "Babatunde Hassan", "link": "https://stackoverflow.com/users/2875390/babatunde-hassan"}, "is_accepted": false, "score": 0, "last_activity_date": 1439422554, "creation_date": 1439422554, "answer_id": 31977161, "question_id": 31977071, "link": "https://stackoverflow.com/questions/31977071/which-eclipse-version-for-android-that-runs-on-embedded/31977161#31977161", "title": "Which Eclipse Version for Android that Runs on Embedded", "body": "<p>You only need one version of Eclispe IDE, you can install CDT plugins to allow you code in other languages with the same IDE. </p>\n\n<p>CDT: <a href=\"http://www.eclipse.org/cdt/\" rel=\"nofollow\" title=\"CDT Downloads page\">CDT Downloads page</a></p>\n\n<p>Detailed Instructions: <a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/howto/EclipseCpp_HowTo.html\" rel=\"nofollow\" title=\"How to\">How To</a></p>\n"}], "owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439437023, "creation_date": 1439421963, "last_edit_date": 1439437023, "question_id": 31977071, "link": "https://stackoverflow.com/questions/31977071/which-eclipse-version-for-android-that-runs-on-embedded", "title": "Which Eclipse Version for Android that Runs on Embedded", "body": "<p>I am basically an Embedded guy, worked mostly on C/C++ languages. One of my projects requires an Android application that runs on any Android based Mobile phones and controls my embedded system hardware which is basically a Raspberry Pi 2 through WiFi. </p>\n\n<p>I am new to Android development and I need inputs from experts on how to proceed with the basic tools installation and development. </p>\n\n<p>I found lots of Eclipse versions available, which made me bit confused. \nDo I need to download Eclipse IDE for Java Developers or Eclipse IDE for C/C++ Developer. Which version and which category do I need to use for Android application development?</p>\n\n<p>I followed <a href=\"https://www.youtube.com/watch?v=boj0f_O3i88\" rel=\"nofollow\">this video</a> for reference.</p>\n"}, {"tags": ["c++", "class", "initialization"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1439421710, "post_id": 31976996, "comment_id": 51860317, "body": "Initialize <b>which</b> member variable?"}, {"owner": {"reputation": 371, "user_id": 2677095, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d1797ab9747ee584f846071edd3fcdc2?s=128&d=identicon&r=PG&f=1", "display_name": "user2677095", "link": "https://stackoverflow.com/users/2677095/user2677095"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1439421840, "post_id": 31976996, "comment_id": 51860351, "body": "In this case, setting IPAddress. There is no way I could set a member variable without hard coding it in right? For example, if key, the parameter, was isLocal, is there a way I could have the program set isLocal to &quot;found&quot;?"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1439421905, "post_id": 31976996, "comment_id": 51860367, "body": "Er, why don&#39;t you just use an if block?"}, {"owner": {"reputation": 371, "user_id": 2677095, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d1797ab9747ee584f846071edd3fcdc2?s=128&d=identicon&r=PG&f=1", "display_name": "user2677095", "link": "https://stackoverflow.com/users/2677095/user2677095"}, "edited": false, "score": 0, "creation_date": 1439422435, "post_id": 31976996, "comment_id": 51860503, "body": "...Can&#39;t believe I didn&#39;t think of that. I do have 20 member variables in my actual file, so it would be a bit of a nuisance, but for now, it&#39;s all I got. Thanks!"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1439422789, "post_id": 31976996, "comment_id": 51860613, "body": "You should probably revisit your design then.  I don&#39;t know exactly what  you&#39;re doing, but setting one of 20 variables and ignoring the rest based on a string feels off."}, {"owner": {"reputation": 371, "user_id": 2677095, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d1797ab9747ee584f846071edd3fcdc2?s=128&d=identicon&r=PG&f=1", "display_name": "user2677095", "link": "https://stackoverflow.com/users/2677095/user2677095"}, "reply_to_user": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1439424776, "post_id": 31976996, "comment_id": 51861090, "body": "There is no way I could loop through the member variables, is there? Was thinking I could just store them all in one array, but I&#39;ve read that its not possible in C++. Is that true? @Donnie"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1440051349, "post_id": 31976996, "comment_id": 52115102, "body": "Loop through the variables?  No.  You could make a map of strings to values if you really needed to do something like that."}], "answers": [{"tags": [], "owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "is_accepted": true, "score": 0, "last_activity_date": 1439421960, "creation_date": 1439421960, "answer_id": 31977070, "question_id": 31976996, "link": "https://stackoverflow.com/questions/31976996/define-member-variables-of-class-inside-function/31977070#31977070", "title": "Define member variables of class inside function", "body": "<p>You probably want this right?\nLook closely at that endl right after the cout. That will flush \"things out\". So it will print on the screen the output. Try running it without that endl. Hope this helps</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Something\n{\n   public:\n    string location;\n    string isLocal;\n    string IPAddress;\n    string setString(string key)\n    {\n        if (key == \"location\") \n        {\n            location = \"found\";\n            return location;\n        }\n        else if (key == \"isLocal\") \n        {\n            isLocal = \"found\";\n            return isLocal;\n        }\n        else if (key == \"IPAddress\") \n        {\n            IPAddress = \"found\";\n            return IPAddress;\n        }\n\n        return \"not found\";\n    }\n\n};\n\nint main(int argc, char* argv[])\n{\n  Something local;\n  string answer = local.setString(\"IPAddress\");\n  cout &lt;&lt; local.IPAddress &lt;&lt; endl; // should return \"found\"\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 2677095, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d1797ab9747ee584f846071edd3fcdc2?s=128&d=identicon&r=PG&f=1", "display_name": "user2677095", "link": "https://stackoverflow.com/users/2677095/user2677095"}, "edited": false, "score": 0, "creation_date": 1439422508, "post_id": 31977081, "comment_id": 51860529, "body": "Thanks! The other user answered a bit earlier so I awarded him the answer, but your code also works!"}], "tags": [], "owner": {"reputation": 1659, "user_id": 3893615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6747082a887efbb8cc4785b7c4279cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Kvothe", "link": "https://stackoverflow.com/users/3893615/kvothe"}, "is_accepted": false, "score": 0, "last_activity_date": 1439422044, "creation_date": 1439422044, "answer_id": 31977081, "question_id": 31976996, "link": "https://stackoverflow.com/questions/31976996/define-member-variables-of-class-inside-function/31977081#31977081", "title": "Define member variables of class inside function", "body": "<p>See <a href=\"http://www.cplusplus.com/forum/beginner/11252/\" rel=\"nofollow\">here</a> for a discussion about exactly the problem of getting the name of a variable as a string. In short - <strong>no you can't do it</strong>, although there are ways to emulate it they make your code hard to understand and you should do things differently.</p>\n\n<p>In your situation you could have something like this for the <code>setString</code> member function</p>\n\n<pre><code>string setString(string key)\n{\n    if (key == \"location\") {\n        location = \"found\";\n    } elseif (key == \"isLocal\") {\n    if (key == \"isLocal\") {\n        isLocal = \"found\";\n    } elseif (key == \"IPAddress\") {\n        IPAddress = \"found\";\n    } else {\n        // handle unmatched case somehow (error message)\n    }\n    return \"found\";\n}\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 2677095, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d1797ab9747ee584f846071edd3fcdc2?s=128&d=identicon&r=PG&f=1", "display_name": "user2677095", "link": "https://stackoverflow.com/users/2677095/user2677095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 31977070, "answer_count": 2, "score": 1, "last_activity_date": 1439422044, "creation_date": 1439421449, "question_id": 31976996, "link": "https://stackoverflow.com/questions/31976996/define-member-variables-of-class-inside-function", "title": "Define member variables of class inside function", "body": "<p>I know there have been multiple posts regarding this topic, but I feel like my situation is a bit different. I don't know if what I am trying to do is possible, and if it is not, please let me know! Right now, I have code that looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Something\n{\n   public:\n    string location;\n    string isLocal;\n    string IPAddress;\n    string setString(string key)\n    {\n          //key will be either location, isLocal, or IPAddress  \n          //set that value to \"found\" so when I call the member variable later, it will output found\n    }\n\n};\n\nint main(int argc, char* argv[])\n{\n  DLNA local;\n  string answer = local.setString(\"IPAddress\");\n  cout &lt;&lt; local.IPAddress; // should return \"found\"\n  return 0;\n}\n</code></pre>\n\n<p>Basically, inside the function setString, I am trying to initialize the member variable to a default value based on what string is passed in. However, I don't seem to know how to do this. Just declaring a local DLNA and setting its value inside the setString function doesn't seem to have any impact when I call the member variables inside the main function. Does anyone know how I can solve my problem, or if this is even possible? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 168, "user_id": 706577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b98e2be38a737a24a6ee45b915f37cc?s=128&d=identicon&r=PG", "display_name": "Matthew Dutton", "link": "https://stackoverflow.com/users/706577/matthew-dutton"}, "edited": false, "score": 0, "creation_date": 1452715904, "post_id": 31976983, "comment_id": 57297442, "body": "This SO question goes into much more detail regarding various forms of UUIDs: <a href=\"http://stackoverflow.com/questions/246930/is-there-any-difference-between-a-guid-and-a-uuid\" title=\"is there any difference between a guid and a uuid\">stackoverflow.com/questions/246930/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 93509, "user_id": 4086, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e4a1b4bf6865eddd0edfe8cb90361c84?s=128&d=identicon&r=PG", "display_name": "Ferruccio", "link": "https://stackoverflow.com/users/4086/ferruccio"}, "is_accepted": true, "score": 2, "last_activity_date": 1566912868, "last_edit_date": 1566912868, "creation_date": 1439422098, "answer_id": 31977086, "question_id": 31976983, "link": "https://stackoverflow.com/questions/31976983/boost-uuid-boost-endian/31977086#31977086", "title": "Boost uuid + boost endian", "body": "<p>You don't need to worry about endianness with UUIDs. They are not treated as numeric values. They are simply opaque blocks of 16 bytes. The only meaningful operation you can perform on UUIDs is comparison for equality.</p>\n\n<p><strong>Update:</strong> In some cases endianness may matter. e.g. if you are converting the UUID to a string representation on multiple platforms and you need all those string representations to match.</p>\n"}, {"tags": [], "owner": {"reputation": 168, "user_id": 706577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b98e2be38a737a24a6ee45b915f37cc?s=128&d=identicon&r=PG", "display_name": "Matthew Dutton", "link": "https://stackoverflow.com/users/706577/matthew-dutton"}, "is_accepted": false, "score": 8, "last_activity_date": 1452717551, "last_edit_date": 1452717551, "creation_date": 1452716844, "answer_id": 34776415, "question_id": 31976983, "link": "https://stackoverflow.com/questions/31976983/boost-uuid-boost-endian/34776415#34776415", "title": "Boost uuid + boost endian", "body": "<p>The endianness of a UUID does matter (contrary to @Ferruccio). The endianness of a UUID can vary by implementation and platform. As discussed <a href=\"http://howtowriteaprogram.blogspot.com/2009/03/uuid-and-byte-order.html\" rel=\"noreferrer\">here</a>, UUIDs are governed by RFC 4122 which only <em>recommends</em> that UUIDs be stored in big-endian format.</p>\n\n<p>Within a particular implementation or protocol, then yes, you can just do a byte-comparison. <em>(That is one of the benefits of UUIDs.)</em></p>\n\n<p>For example:</p>\n\n<ul>\n<li>RFC4122 recommends big-endian,</li>\n<li>boost::uuid uses big-endian.</li>\n<li>Microsoft APIs (e.g. CoCreateGUID) use little-endian.</li>\n<li>libuuid/uuidgen uses the native endianness.</li>\n<li><a href=\"https://docs.python.org/2/library/uuid.html\" rel=\"noreferrer\">Python uuid</a> can do big or little but you must specify</li>\n</ul>\n\n<p>So yes, to be portable you should specify what endianness you are using to store them and byte-swap as needed to be consistent.</p>\n"}], "owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 31977086, "answer_count": 2, "score": 1, "last_activity_date": 1566912868, "creation_date": 1439421371, "question_id": 31976983, "link": "https://stackoverflow.com/questions/31976983/boost-uuid-boost-endian", "title": "Boost uuid + boost endian", "body": "<p>I need to place uuids at locations in memory that I don't control (a pointer is passed to me (to shm backed by file)), but I have to make sure that what I store at the given pointers will be portable, i.e. I would like to use boost::endian to settle on little endian for the uuids. Is it possible to combine boost::endian and boost:uuid for that? </p>\n"}, {"tags": ["java", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1439443172, "post_id": 31976830, "comment_id": 51865639, "body": "Have you considered adding the same kind of tracing to the JNI method that you have in the first bit of C code?"}, {"owner": {"reputation": 1908, "user_id": 2543253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a87e0065d4c5036eb7adabe2edfd187?s=128&d=identicon&r=PG", "display_name": "user2543253", "link": "https://stackoverflow.com/users/2543253/user2543253"}, "edited": false, "score": 0, "creation_date": 1439466624, "post_id": 31976830, "comment_id": 51879287, "body": "try calling getChildWindows() in a separate thread"}], "answers": [{"tags": [], "owner": {"reputation": 3447, "user_id": 5244653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9412ec207649931753eb77f7afca2599?s=128&d=identicon&r=PG&f=1", "display_name": "Brick", "link": "https://stackoverflow.com/users/5244653/brick"}, "is_accepted": false, "score": 1, "last_activity_date": 1440106097, "creation_date": 1440106097, "answer_id": 32128693, "question_id": 31976830, "link": "https://stackoverflow.com/questions/31976830/returning-jintarray-from-jni/32128693#32128693", "title": "Returning jintArray from JNI", "body": "<p>You're not checking for errors after your JNI calls.  This can lead to a situation where you code crashes not at the spot where you had the error but at the next spot where you call into the JVM.  You won't get \"errors\" in any friendly sense when this happens - Your chance to get those was by checking return values and querying the JVM for pending exceptions. (See below.)</p>\n\n<p>In your case, for example, if</p>\n\n<pre><code>jintArray childeren = env-&gt;NewIntArray(len)\n</code></pre>\n\n<p>generates an exception (in Java in the JVM), your code will continue past that line in the native code, but the JVM will still be holding that exception.  The next time that you call into the JVM, which happens to be the line that you identified where you set the array values, the code will crash.  You need to clear the exception explicitly.</p>\n\n<p>In any case, you should be checking return values and checking for exceptions. (See the JNI docs for ExceptionOccurred and ExceptionClear.)  I'd bet that for some reason you failed to get an array allocated.  Exactly why that would happen isn't clear to me from your code, but this will give you a concrete place to start, i.e. if you have an exception or you have a null reference that will give you information about what went wrong.  It will also potentially shift your search to the spot where the problem occurs.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 217, "user_id": 5011657, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8c3fa349d2494451e87b5889f6889a74?s=128&d=identicon&r=PG&f=1", "display_name": "MicroHat11", "link": "https://stackoverflow.com/users/5011657/microhat11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3308, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1440106097, "creation_date": 1439420463, "last_edit_date": 1439436701, "question_id": 31976830, "link": "https://stackoverflow.com/questions/31976830/returning-jintarray-from-jni", "title": "Returning jintArray from JNI", "body": "<p>I'm trying to return a jintArray from C++ to Java, but the application seems to hang in the JNI call. I have stripped the problem down to the creation and population of the jintArray, although I'm not receiving any errors. Any help is appreciated.</p>\n\n<p>Test project to make sure everything works:</p>\n\n<pre><code>include \"stdafx.h\"\ninclude \"windows.h\"\ninclude &lt;vector&gt;\ninclude &lt;iostream&gt;\ninclude &lt;jni.h&gt;\n\nusing namespace std;\n\nstd::vector&lt;jint&gt; childWindows;\n\nBOOL CALLBACK EnumChildProc(HWND hwnd, LPARAM lParam) {\n    childWindows.push_back((jint) hwnd);\n    return TRUE;\n}\n\njint* getChildWindows(HWND hWnd) {\n    childWindows.clear();\n    ::EnumChildWindows(hWnd, EnumChildProc, NULL);\n\n    int len = static_cast&lt;int&gt;(childWindows.size());\n\n    jint values[100];\n    std::copy(childWindows.begin(), childWindows.end(), values);\n\n\n    for (std::vector&lt;jint&gt;::const_iterator i = childWindows.begin(); i != childWindows.end(); ++i) {\n        std::cout &lt;&lt; (HWND)*i &lt;&lt; ' ';\n    }\n    //env-&gt;SetIntArrayRegion(childeren, 0, len, values);\n    return values;\n}\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    getChildWindows((HWND)1377258);\n\n    std::cout &lt;&lt; \" | Windows count: \" &lt;&lt; childWindows.size() &lt;&lt; \" \";\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>000D0550 000B04F2 001C047A 0002055E 00020558 00010564 0007054E\n  00050570 00060512  000C04E0  | Windows count: 10</p>\n</blockquote>\n\n<p>Java code:</p>\n\n<pre><code>    System.out.println(\"Get child windows\");\n    System.out.println(\"Main handle: \" + getHandle());\n    final int[] handles = getChildWindows();\n    System.out.println(\"Done getting childs\");\n</code></pre>\n\n<p>Java output:</p>\n\n<blockquote>\n  <p>Starting test child windows</p>\n  \n  <p>Get child windows</p>\n  \n  <p>Main handle: 525978</p>\n</blockquote>\n\n<p>JNI code:</p>\n\n<pre><code>JNIEXPORT jintArray JNICALL Java_main_getChildWindows(JNIEnv *env, jclass c) {\n    childWindows.clear();\n    ::EnumChildWindows(hWnd, EnumChildProc, NULL);\n\n    int len = static_cast&lt;int&gt;(childWindows.size());\n    jintArray childeren = env-&gt;NewIntArray(len);\n\n    jint values[100];\n    std::copy(childWindows.begin(), childWindows.end(), values);\n\n    env-&gt;SetIntArrayRegion(childeren, (jsize)0, (jsize)len, values);\n    //env-&gt;ReleaseIntArrayElements(childeren, values, 0);\n    return childeren;\n}\n</code></pre>\n"}, {"tags": ["c++", "cin", "spacing"], "comments": [{"owner": {"reputation": 12023, "user_id": 1462604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2152f0665d54a5cfe8bde11b18f91547?s=128&d=identicon&r=PG", "display_name": "Wug", "link": "https://stackoverflow.com/users/1462604/wug"}, "edited": false, "score": 0, "creation_date": 1439425088, "post_id": 31976776, "comment_id": 51861147, "body": "The <code>&#39;e&#39;</code> character is confusing the parser into thinking you&#39;re trying to pass a value in scientific notation.  Under most circumstances the parser will give up as soon as it reaches a non-numeric character, and return the value it has parsed so far. In this case though, it&#39;s reading the <code>&#39;e&#39;</code> as part of the number, switching to scientific mode, and then deciding the number is malformatted, and failing (you can check <code>cin.good()</code> to check for this and other parse errors)."}], "answers": [{"comments": [{"owner": {"reputation": 12023, "user_id": 1462604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2152f0665d54a5cfe8bde11b18f91547?s=128&d=identicon&r=PG", "display_name": "Wug", "link": "https://stackoverflow.com/users/1462604/wug"}, "edited": false, "score": 0, "creation_date": 1439425400, "post_id": 31976817, "comment_id": 51861214, "body": "The reason it&#39;s looping forever is that &#39;12e&#39; is a malformatted float in scientific notation, and it&#39;s setting the failbit. After that, every attempt to read input from the stream aborts because the failbit is never unset and the values that it attempts to read into are never changed."}], "tags": [], "owner": {"reputation": 1007, "user_id": 3470632, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/765982866/picture?type=large", "display_name": "Kevin Wheeler", "link": "https://stackoverflow.com/users/3470632/kevin-wheeler"}, "is_accepted": false, "score": 0, "last_activity_date": 1439448023, "last_edit_date": 1439448023, "creation_date": 1439420377, "answer_id": 31976817, "question_id": 31976776, "link": "https://stackoverflow.com/questions/31976776/standard-input-stream-cin-failing-to-prompt-for-input/31976817#31976817", "title": "standard input stream cin failing to prompt for input", "body": "<p>Replace <code>cin &gt;&gt; x &gt;&gt;currency;</code>\nwith </p>\n\n<pre><code>    try{\n      std::string myLine;\n      std::getline (std::cin, myLine); // store line into myLine.\n      currency = myLine.back(); // get last character from line.\n      myLine.pop_back(); // remove last character from myLine.\n      x = std::stod(myLine); // try to conver the rest of the string to a double.\n    }\n    catch (...) {\n      //The user typed in something invalid.\n      currency= 'i';\n    }\n</code></pre>\n\n<p>Also, make sure to <code>#include &lt;string&gt;</code></p>\n\n<p>Note this solution assumes you are using C11.</p>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1439422000, "last_edit_date": 1439422000, "creation_date": 1439420420, "answer_id": 31976818, "question_id": 31976776, "link": "https://stackoverflow.com/questions/31976776/standard-input-stream-cin-failing-to-prompt-for-input/31976818#31976818", "title": "standard input stream cin failing to prompt for input", "body": "<p>12e is interpreted as the begin of a floating point number like 12e03.  But the end is missing,  so your stream is put on error (failbit).  This state causes all subsequent input to fail until the failstate is cleared. </p>\n\n<p>You could have an inner loop that checks such formatting errors: </p>\n\n<pre><code>while (...) {\n     ...\n     while ( (cin &gt;&gt; x &gt;&gt; currency).fail() &amp;&amp; !cin.eof()) { // loops as long as there's input and it's invalid\n         cout &lt;&lt; \"invalid format\";\n         cin.clear(); \n     }\n     if (cin.eof())  // if there's no longer input stop looping\n         break; \n     ...\n }\n</code></pre>\n\n<p><a href=\"https://ideone.com/otH8st\" rel=\"nofollow\">live demo</a></p>\n\n<p>Note that you should initialize <code>currency</code> to something different than 'q' if you want to make sure that your loop is executed in every circumstance. </p>\n\n<p>By the way, if you enter 12 e  (with a space),  12 will be interpreted as the number and put to x and e to currency, as you expect. </p>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 933307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a21d95af84722ec57116889eabcf087?s=128&d=identicon&r=PG", "display_name": "rs_", "link": "https://stackoverflow.com/users/933307/rs"}, "is_accepted": false, "score": 0, "last_activity_date": 1439421369, "last_edit_date": 1439421369, "creation_date": 1439420946, "answer_id": 31976917, "question_id": 31976776, "link": "https://stackoverflow.com/questions/31976776/standard-input-stream-cin-failing-to-prompt-for-input/31976917#31976917", "title": "standard input stream cin failing to prompt for input", "body": "<p>As explained by other answers 12e refers to the scientific notation of floating point numbers and hence <code>currency</code> does not store 'e'. </p>\n\n<p>To get the input in a single line without space, you should use <code>std::getline</code> and then parse the input string. </p>\n\n<p>Since you know that the last character is always indicative of currency, the front characters can be converted to a number using <code>std::stoi</code>. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5221234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 31976818, "answer_count": 3, "score": 0, "last_activity_date": 1439448023, "creation_date": 1439420190, "question_id": 31976776, "link": "https://stackoverflow.com/questions/31976776/standard-input-stream-cin-failing-to-prompt-for-input", "title": "standard input stream cin failing to prompt for input", "body": "<pre><code>1 #include&lt;iostream&gt;\n  2 using namespace std;\n  3 \n  4 int main()\n  5 {\n  6     const double yen_to_euro=0.007215;\n  7     const double euro_to_dollar=1.12;\n  8     char currency;\n  9     double x;\n 10 \n 11     while(currency!='q')\n 12     {\n 13         cout &lt;&lt; \"enter currency and unit(y , e, or d)\";\n 14         cin &gt;&gt; x &gt;&gt;currency;\n 15 \n 16         switch(currency){\n 17 \n 18             case 'y':\n 19                 cout &lt;&lt;\"euro:\"&lt;&lt; x*yen_to_euro&lt;&lt;\" dollar:\"&lt;&lt;x*yen_to_euro*euro_to_dollar&lt;&lt;'\\n';\n 20                 break;\n 21             case 'e':\n 22                 cout &lt;&lt;\"yen:\"&lt;&lt; (x*(1.0/yen_to_euro))&lt;&lt;\" dollar:\"&lt;&lt;(x*euro_to_dollar)&lt;&lt;'\\n';\n 23                 break;\n 24             case 'd':\n 25                 cout &lt;&lt;\" yen:\"&lt;&lt; x*(1.0/yen_to_euro)*(1.0/euro_to_dollar)&lt;&lt;\" euro:\"&lt;&lt;x*(1.0/euro_to_dollar)&lt;&lt;'\\n';\n 26                 break;\n 27             case 'q':\n 28                 currency='q';\n 29                 break;\n 30             default:\n 31                 cout &lt;&lt; \"invalid\";\n 32                 break;\n 33 \n 34         }\n 35 \n 36     }\n 37 \n 38 \n 39 }\n~             \n</code></pre>\n\n<p>The intended function of the code above is to convert a selected currency( y for Japanese Yen, e for Euro , and d for US dollar) into the other currencies. </p>\n\n<p>For instance, if I want to convert to 12 Japenese Yen, I would enter:</p>\n\n<blockquote>\n  <p>12y</p>\n</blockquote>\n\n<p>which then the program would output </p>\n\n<blockquote>\n  <p>euro:0.08658 dollar:0.0969696</p>\n</blockquote>\n\n<p>However, if I were to input 12e, I would receive an infinite loop. Double checking the code, there doesn't seem to be any logical errors. \nNevertheless, I sense the source of the trouble has to do with the cin at line 14 because if I take the amount x and the currency type separately like this:</p>\n\n<pre><code>cin&gt;&gt; x;\ncin&gt;&gt; currency;\n</code></pre>\n\n<p>The code works fine, but I need to input the amount , followed by pressing enter, and then pressing the character that represents the currency-type. Is there a way to just enter all in one line, no spaces?</p>\n\n<p>Furthermore, why is it behaving this way? This unusual behavior of going through infinite loop  only happens when I enter e for Euro and q for quit.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1439420235, "post_id": 31976733, "comment_id": 51859908, "body": "Show us your code for reading the file or relax and let us enter your brain with our psychic powers ...."}, {"owner": {"reputation": 12023, "user_id": 1462604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2152f0665d54a5cfe8bde11b18f91547?s=128&d=identicon&r=PG", "display_name": "Wug", "link": "https://stackoverflow.com/users/1462604/wug"}, "edited": false, "score": 0, "creation_date": 1439424297, "post_id": 31976733, "comment_id": 51860989, "body": "Did you look at the answers for that question, or just use the code from the question?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1439425342, "post_id": 31976733, "comment_id": 51861204, "body": "I added my solution to the answers of the question you linked: <a href=\"http://stackoverflow.com/a/31977550/3807729\">stackoverflow.com/a/31977550/3807729</a>"}, {"owner": {"reputation": 197, "user_id": 3658306, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/7de74f6c88604021ac45b868b398e293?s=128&d=identicon&r=PG&f=1", "display_name": "user3658306", "link": "https://stackoverflow.com/users/3658306/user3658306"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1439496363, "post_id": 31976733, "comment_id": 51898666, "body": "@Galik Thank you so much, this is a better version with &#39;seekg&#39; and &#39;tellg&#39;.  It works as the same behavior as what hmjd provided, after the growing file stop growing, your code hangs."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 4237342, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b588c268f1f47463650d29759fd1d5ed?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Tyrrell", "link": "https://stackoverflow.com/users/4237342/tony-tyrrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1439426475, "creation_date": 1439426475, "answer_id": 31977717, "question_id": 31976733, "link": "https://stackoverflow.com/questions/31976733/reading-from-a-growing-file-c-still-has-problems/31977717#31977717", "title": "Reading from a growing file c++ still has problems", "body": "<p>This might be overly simplified, but couldn't you just close your handle to the file after it's grown and reopen a new file descriptor? </p>\n"}], "owner": {"reputation": 197, "user_id": 3658306, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/7de74f6c88604021ac45b868b398e293?s=128&d=identicon&r=PG&f=1", "display_name": "user3658306", "link": "https://stackoverflow.com/users/3658306/user3658306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439426475, "creation_date": 1439419979, "last_edit_date": 1495541172, "question_id": 31976733, "link": "https://stackoverflow.com/questions/31976733/reading-from-a-growing-file-c-still-has-problems", "title": "Reading from a growing file c++ still has problems", "body": "<p>I need to read from a growing file in C++, and found this page - <a href=\"https://stackoverflow.com/questions/11757304/how-to-read-a-growing-text-file-in-c\">How to read a growing text file in C++?</a>.  I tested the Answer from there posted by @hmjd.  For testing purpose, I wrote a simple c++ code to read a large file and then write it to file every 0.3 seconds so that the file will be growing.  In the meantime, while the growing file was generating, I used hmjd's code to test reading it.  The first answer staring with if(ifs.seekg(p)) does not work at all, and the second answer starting with 'if(ifs.is_open())' works, but the loop will never end.</p>\n"}, {"tags": ["c++", "arrays", "while-loop", "cin"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1439420580, "post_id": 31976690, "comment_id": 51859996, "body": "Works as expected here. Try running it in a debugger."}, {"owner": {"reputation": 129, "user_id": 3126077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/531199b84d3a54dfdcf48c32bd170013?s=128&d=identicon&r=PG", "display_name": "Bryan Horna", "link": "https://stackoverflow.com/users/3126077/bryan-horna"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1439420664, "post_id": 31976690, "comment_id": 51860016, "body": "I ran it at: <a href=\"https://www.codechef.com/ide\" rel=\"nofollow noreferrer\">codechef.com/ide</a> and with input:      2 (newline)     X++ (newline)     --X"}, {"owner": {"reputation": 1526, "user_id": 969373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11067682315ef971f4866914789c3b7c?s=128&d=identicon&r=PG", "display_name": "Bartosz Przybylski", "link": "https://stackoverflow.com/users/969373/bartosz-przybylski"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1439420678, "post_id": 31976690, "comment_id": 51860025, "body": "@n.m. It <i>might</i> not run as expected, depending on input of <i>s</i>. It looks like classic buffer overflow, since s is only [3]."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 1526, "user_id": 969373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11067682315ef971f4866914789c3b7c?s=128&d=identicon&r=PG", "display_name": "Bartosz Przybylski", "link": "https://stackoverflow.com/users/969373/bartosz-przybylski"}, "edited": false, "score": 0, "creation_date": 1439421125, "post_id": 31976690, "comment_id": 51860146, "body": "@bartek <code>looks like classic buffer overflow</code> <i>this</i> is expected too of course."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1439421185, "post_id": 31976690, "comment_id": 51860163, "body": "How many characters do you think are in the string <code>&quot;X++&quot;</code>? Hint: not three."}, {"owner": {"reputation": 1526, "user_id": 969373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11067682315ef971f4866914789c3b7c?s=128&d=identicon&r=PG", "display_name": "Bartosz Przybylski", "link": "https://stackoverflow.com/users/969373/bartosz-przybylski"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1439421334, "post_id": 31976690, "comment_id": 51860202, "body": "@n.m. exactly, adding +1 to buffer to include \\0 makes this works, at least for 3 letters case"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3126077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/531199b84d3a54dfdcf48c32bd170013?s=128&d=identicon&r=PG", "display_name": "Bryan Horna", "link": "https://stackoverflow.com/users/3126077/bryan-horna"}, "edited": false, "score": 0, "creation_date": 1439420997, "post_id": 31976900, "comment_id": 51860115, "body": "Yeah, the <code>x = 0</code> is for later use, so no problem with that. The thing appears to be, as mentioned before, a buffer overflow in the input; still trying to debug it."}, {"owner": {"reputation": 26, "user_id": 949102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef9fedba3fd1e667a87e3bf499e0d7c?s=128&d=identicon&r=PG", "display_name": "mad MIckO", "link": "https://stackoverflow.com/users/949102/mad-micko"}, "reply_to_user": {"reputation": 129, "user_id": 3126077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/531199b84d3a54dfdcf48c32bd170013?s=128&d=identicon&r=PG", "display_name": "Bryan Horna", "link": "https://stackoverflow.com/users/3126077/bryan-horna"}, "edited": false, "score": 0, "creation_date": 1439421285, "post_id": 31976900, "comment_id": 51860193, "body": "Yes, I agree about the buffer overflow, can&#39;t believe I missed that :("}, {"owner": {"reputation": 129, "user_id": 3126077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/531199b84d3a54dfdcf48c32bd170013?s=128&d=identicon&r=PG", "display_name": "Bryan Horna", "link": "https://stackoverflow.com/users/3126077/bryan-horna"}, "edited": false, "score": 0, "creation_date": 1439421393, "post_id": 31976900, "comment_id": 51860224, "body": "There was a problem with my input (or the way the IDE I was using passed this), because a <code>freopen</code> did the trick."}, {"owner": {"reputation": 26, "user_id": 949102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef9fedba3fd1e667a87e3bf499e0d7c?s=128&d=identicon&r=PG", "display_name": "mad MIckO", "link": "https://stackoverflow.com/users/949102/mad-micko"}, "reply_to_user": {"reputation": 129, "user_id": 3126077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/531199b84d3a54dfdcf48c32bd170013?s=128&d=identicon&r=PG", "display_name": "Bryan Horna", "link": "https://stackoverflow.com/users/3126077/bryan-horna"}, "edited": false, "score": 0, "creation_date": 1439421467, "post_id": 31976900, "comment_id": 51860248, "body": "If you need the input to be always integer, you can use it like in the answer on this post : <a href=\"http://stackoverflow.com/questions/3826281/how-do-i-make-a-c-program-that-filter-out-non-integers\" title=\"how do i make a c program that filter out non integers\">stackoverflow.com/questions/3826281/&hellip;</a>"}, {"owner": {"reputation": 129, "user_id": 3126077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/531199b84d3a54dfdcf48c32bd170013?s=128&d=identicon&r=PG", "display_name": "Bryan Horna", "link": "https://stackoverflow.com/users/3126077/bryan-horna"}, "edited": false, "score": 0, "creation_date": 1439513901, "post_id": 31976900, "comment_id": 51904746, "body": "Ok, in order to solve the problem I had to do <code>char s[4]</code>, so it accepts inputs like <code>X++</code> :)"}], "tags": [], "owner": {"reputation": 26, "user_id": 949102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef9fedba3fd1e667a87e3bf499e0d7c?s=128&d=identicon&r=PG", "display_name": "mad MIckO", "link": "https://stackoverflow.com/users/949102/mad-micko"}, "is_accepted": true, "score": 0, "last_activity_date": 1439420847, "creation_date": 1439420847, "answer_id": 31976900, "question_id": 31976690, "link": "https://stackoverflow.com/questions/31976690/while-loop-and-cin-char-int/31976900#31976900", "title": "While loop and cin char, int", "body": "<p>Aside from the useless declaration of variable <strong>x</strong>, I think there's nothing wrong with your code. </p>\n\n<p>If n is filled with 2 the result is always 1 and 0 get printed, regardless the cin >> s; is uncommented or not.</p>\n"}], "owner": {"reputation": 129, "user_id": 3126077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/531199b84d3a54dfdcf48c32bd170013?s=128&d=identicon&r=PG", "display_name": "Bryan Horna", "link": "https://stackoverflow.com/users/3126077/bryan-horna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 31976900, "answer_count": 1, "score": 0, "last_activity_date": 1439420847, "creation_date": 1439419705, "question_id": 31976690, "link": "https://stackoverflow.com/questions/31976690/while-loop-and-cin-char-int", "title": "While loop and cin char, int", "body": "<p>I'm just trying to figure out this:</p>\n\n<p>I have following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n  int n, x = 0;\n  cin &gt;&gt; n;\n  char s[3];\n\n  while (n-- &gt; 0) {\n    cout &lt;&lt; n &lt;&lt; endl;\n    // cin &gt;&gt; s;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>If I fill n with 2, everything works fine (<code>1</code> and <code>0</code> get printed), but if I uncomment the <code>cin &gt;&gt; s;</code> line, only first iteration (<code>1</code>) will be performed (and the input gets saved into <code>s</code>).</p>\n\n<p>Now my question: why is working like that? And how can I fix it?\nThanks in advance.</p>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1439423985, "post_id": 31976583, "comment_id": 51860915, "body": "It&#39;s not clear what you have tried. There&#39;s a set of options specifically for this under <code>Formatting -&gt; New Lines</code>. Have you tried them and found them not to work as advertised?"}, {"owner": {"reputation": 218, "user_id": 4879506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qnnhr.png?s=128&g=1", "display_name": "MisterEman22", "link": "https://stackoverflow.com/users/4879506/mistereman22"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1439426963, "post_id": 31976583, "comment_id": 51861530, "body": "@bogdan the only options under that setting are for the location of opening braces. I tried to convey this with my initial statement about finding the options for the opening bracket which are located in <code>Formatting -&gt; New Lines</code>. I&#39;ll edit and make this explicit"}], "answers": [{"comments": [{"owner": {"reputation": 218, "user_id": 4879506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qnnhr.png?s=128&g=1", "display_name": "MisterEman22", "link": "https://stackoverflow.com/users/4879506/mistereman22"}, "edited": false, "score": 0, "creation_date": 1439441283, "post_id": 31977455, "comment_id": 51865022, "body": "Wow I must just be blind. I read through those options like ten times and somehow missed those. Thank you very much"}, {"owner": {"reputation": 1096, "user_id": 2062574, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/2947f668b91c9dededb54422b66a1900?s=128&d=identicon&r=PG", "display_name": "Martini Bianco", "link": "https://stackoverflow.com/users/2062574/martini-bianco"}, "edited": false, "score": 0, "creation_date": 1488377803, "post_id": 31977455, "comment_id": 72203741, "body": "I imported this setting from 2013 and in general it works, means if I let reformat the whole document everything is fine. But if I type &#187;} else {&#171; and then enter, 2013 put the else in a new line and then the opening curly brace in a new line. But 2015 only put the opening brace in a new line and leaves the &#187;else&#171; in the same line as the closing brace. So the setting is correct. Has anyone a clue, why it don&#39;t work. Does everyone has this problem or only me?"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 14, "last_activity_date": 1439424556, "creation_date": 1439424556, "answer_id": 31977455, "question_id": 31976583, "link": "https://stackoverflow.com/questions/31976583/keep-else-catch-on-same-line-as-closing-bracket-in-visual-studio-2015/31977455#31977455", "title": "Keep else, catch, on same line as closing bracket in Visual Studio 2015?", "body": "<p>Go to <code>Tool</code>-><code>Option</code> then <code>General</code>-><code>Text editor</code>-><code>C++</code> -> <code>Formatting</code> -> <code>New lines</code>.  </p>\n\n<p>Choose the following settings:   </p>\n\n<ul>\n<li>Position of opening brace for control block: radio button for <em>same line</em> </li>\n<li>Position of keyword:  uncheck the <em>else on new line</em>.  </li>\n</ul>\n\n<p>The preview for this last setting will display </p>\n\n<pre><code>if (a &lt; b)\n{\n} else\n{\n}\n</code></pre>\n\n<p>but this doesn't take into account the first option.  </p>\n\n<p>If you type an if/else statement, select the region, and ask the editor to reformat.  The statement will appear as: </p>\n\n<pre><code>if (test) {\n} else {\n}\n</code></pre>\n\n<p>I could try this successfully on Visual Studio 2015.  I tested it with a foreign language, so the english wording of above mentioned options might be slightly different, but close enough for being found.  </p>\n"}], "owner": {"reputation": 218, "user_id": 4879506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qnnhr.png?s=128&g=1", "display_name": "MisterEman22", "link": "https://stackoverflow.com/users/4879506/mistereman22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2633, "favorite_count": 0, "accepted_answer_id": 31977455, "answer_count": 1, "score": 8, "last_activity_date": 1439427096, "creation_date": 1439419029, "last_edit_date": 1439427096, "question_id": 31976583, "link": "https://stackoverflow.com/questions/31976583/keep-else-catch-on-same-line-as-closing-bracket-in-visual-studio-2015", "title": "Keep else, catch, on same line as closing bracket in Visual Studio 2015?", "body": "<p>I've managed to get Visual Studio to keep the opening bracket on the same line like this (the settings for this are under <code>Formatting -&gt; New Lines</code>; the settings I am looking for, if they exist, are not in this area of options):</p>\n\n<pre><code>void foo() {\n  bar();\n}\n</code></pre>\n\n<p>but I can't figure out how to keep <strong>else</strong> and <strong>catch</strong> blocks on the same line as the ending bracket of the previous statement.</p>\n\n<p>To clarify, this is what Visual Studio auto-formats to:</p>\n\n<pre><code>if (foo) {\n  return 1;\n}\nelse {\n  return 2;\n}\n</code></pre>\n\n<p>and this is what I want:</p>\n\n<pre><code>if (foo) {\n  return 1;\n} else {\n  return 2;\n}\n</code></pre>\n"}, {"tags": ["c++", "curl", "libcurl"], "comments": [{"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1439418273, "post_id": 31976323, "comment_id": 51859298, "body": "do you really asking why there is a <code>getline</code> in youre <code>content</code> function?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1439418346, "post_id": 31976323, "comment_id": 51859330, "body": "I&#180;m asking myself why there are infinite loops and a recursion over two functions that you don&#180;t want in the first place. ... The problem is not Curl, but only your code."}, {"owner": {"reputation": 357, "user_id": 3674496, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6d61f9c29a208c5c294b785e9e8209ca?s=128&d=identicon&r=PG&f=1", "display_name": "n4zg", "link": "https://stackoverflow.com/users/3674496/n4zg"}, "edited": false, "score": 0, "creation_date": 1439418492, "post_id": 31976323, "comment_id": 51859377, "body": "It needs to be in a loop because I want to be able to continue scanning , after a code is scanned it should be ready to scan another one.  That&#39;s all this app does ."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1439418621, "post_id": 31976323, "comment_id": 51859427, "body": "@n4zg What you described would make sense, but your code is something different... In content(), you&#180;re scanning <i>one</i> time and then an infinite number of requests are made (or 0, if the input was &quot;exit&quot;) with this one input. And sendurl() shouldn&#180;t call content(), this makes absolutely no sense and begs for a stack overflow (error, not this site)"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 3674496, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6d61f9c29a208c5c294b785e9e8209ca?s=128&d=identicon&r=PG&f=1", "display_name": "n4zg", "link": "https://stackoverflow.com/users/3674496/n4zg"}, "edited": false, "score": 0, "creation_date": 1439418977, "post_id": 31976511, "comment_id": 51859559, "body": "Thank you very much for the answer I will have to test that in the morning, i didn&#39;t have the getline in the loop . I will leave you a comment to let you know how I get on . Thank you \ud83d\ude00"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 357, "user_id": 3674496, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6d61f9c29a208c5c294b785e9e8209ca?s=128&d=identicon&r=PG&f=1", "display_name": "n4zg", "link": "https://stackoverflow.com/users/3674496/n4zg"}, "edited": false, "score": 0, "creation_date": 1439419514, "post_id": 31976511, "comment_id": 51859732, "body": "@n4zg Did you notice that there are more changes (content and sendurl)...?"}, {"owner": {"reputation": 357, "user_id": 3674496, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6d61f9c29a208c5c294b785e9e8209ca?s=128&d=identicon&r=PG&f=1", "display_name": "n4zg", "link": "https://stackoverflow.com/users/3674496/n4zg"}, "edited": false, "score": 0, "creation_date": 1439419860, "post_id": 31976511, "comment_id": 51859822, "body": "Yes I just noticed it doesn&#39;t run the content function from sendurl function. It makes sense. I look forward to testing it in the morning."}, {"owner": {"reputation": 357, "user_id": 3674496, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6d61f9c29a208c5c294b785e9e8209ca?s=128&d=identicon&r=PG&f=1", "display_name": "n4zg", "link": "https://stackoverflow.com/users/3674496/n4zg"}, "edited": false, "score": 0, "creation_date": 1439456663, "post_id": 31976511, "comment_id": 51872875, "body": "@SHR Just tested the code, still the same outcome, first qr code scans properly and curl processes the request, next scan it reads the code but doesnt process the request until the enter key is manually pressed. any suggestions please."}, {"owner": {"reputation": 357, "user_id": 3674496, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6d61f9c29a208c5c294b785e9e8209ca?s=128&d=identicon&r=PG&f=1", "display_name": "n4zg", "link": "https://stackoverflow.com/users/3674496/n4zg"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1439461202, "post_id": 31976511, "comment_id": 51875758, "body": "@deviantfan thanks for the comment, i noticed it works when you type with the keyboard, the input is from a qr scanner, therefore im guessing the problem must be scanner side not sending the enter key after the initial send as it works properly the first time round."}], "tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": true, "score": 1, "last_activity_date": 1439418715, "last_edit_date": 1439418715, "creation_date": 1439418655, "answer_id": 31976511, "question_id": 31976323, "link": "https://stackoverflow.com/questions/31976323/curl-not-handling-second-request-c-until-enter-is-pressed/31976511#31976511", "title": "Curl not handling second request c++ until enter is pressed", "body": "<p>I think this is what you wanted</p>\n\n<p>check the differences between your code and this. </p>\n\n<pre><code>void sendurl(string s){\n   curl_global_init( CURL_GLOBAL_ALL );\n   CURL * myHandle;\n   CURLcode result;\n   myHandle = curl_easy_init ( ) ;\n   curl_easy_setopt(myHandle, CURLOPT_URL, s.c_str());\n   result = curl_easy_perform( myHandle );\n   curl_easy_cleanup( myHandle );\n}\n\n\nvoid content() {\n   string mystr;\n   while (mystr != \"exit\"){\n     cout &lt;&lt; \"Please Enter QR Code\";\n     getline (cin,mystr);\n     sendurl(mystr);\n  }\n}\n\n\nint main () {\n   content();\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 3674496, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6d61f9c29a208c5c294b785e9e8209ca?s=128&d=identicon&r=PG&f=1", "display_name": "n4zg", "link": "https://stackoverflow.com/users/3674496/n4zg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 31976511, "answer_count": 1, "score": -2, "last_activity_date": 1439418715, "creation_date": 1439417713, "question_id": 31976323, "link": "https://stackoverflow.com/questions/31976323/curl-not-handling-second-request-c-until-enter-is-pressed", "title": "Curl not handling second request c++ until enter is pressed", "body": "<p>I have a simple c++ app where a qr scanner reads a code from the scanner, that is used with curl to process a url, it works great on the first scan but when attempting to scan the second time, curl doesnt process the url. until the enter key is pressed on the keyboard, which is not workable.  Any suggestions would be gratefully appreciated. </p>\n\n<pre><code>void sendurl(string s){\n   curl_global_init( CURL_GLOBAL_ALL );\n   CURL * myHandle;\n   CURLcode result;\n   myHandle = curl_easy_init ( ) ;\n   curl_easy_setopt(myHandle, CURLOPT_URL, s.c_str());\n   result = curl_easy_perform( myHandle );\n   curl_easy_cleanup( myHandle );\n   content();\n\n}\n\n\nvoid content() {\n   cout &lt;&lt; \"Please Enter QR Code\";\n   string mystr;\n   getline (cin,mystr);\n   while (mystr != \"exit\"){\n       sendurl(mystr);\n}\n   }\n\n\nint main () {\n   content();\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "edited": false, "score": 0, "creation_date": 1439482082, "post_id": 31983195, "comment_id": 51890934, "body": "I see, so am I wrong in thinking that all libraries <code>.cpp</code> and <code>.c</code> are not to be appended to the <code>target_link_variables</code> directive? Moreover, I thought only the main project files were supposed to be added to <code>add_executables</code>? I am still new to cmake."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "edited": false, "score": 1, "creation_date": 1439485734, "post_id": 31983195, "comment_id": 51893011, "body": "<code>.cpp</code> and <code>.c</code> are not <i>libraries</i>. They are <i>source files</i>. You can make library from these files using <code>add_library(&lt;library-name&gt; &lt;sources..&gt;)</code> command. After that, you may link executable with this library: <code>target_link_libraries(HelloTest &lt;library-name&gt;)</code>."}, {"owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "edited": false, "score": 0, "creation_date": 1439493411, "post_id": 31983195, "comment_id": 51897222, "body": "Oh I see, so in actuality since I do not have <code>add_library</code> the above stood no chance of working anyway. Hence, I must add my sources to a library, but not the headers (?), and then I link them to my target."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "edited": false, "score": 0, "creation_date": 1439496467, "post_id": 31983195, "comment_id": 51898710, "body": "Actually, library is an alternative for making executable from all sources. But you are right about headers - no needs to enumerate them for building library/executable."}, {"owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "edited": false, "score": 0, "creation_date": 1439499899, "post_id": 31983195, "comment_id": 51900358, "body": "Right, I think that solved this issue, it raised a few other ones, but I&#39;ll create another question for that. Thanks."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1439454694, "creation_date": 1439454694, "answer_id": 31983195, "question_id": 31976279, "link": "https://stackoverflow.com/questions/31976279/cmake-make2-no-rule-to-make-target-path-to-uthash-utarray-h-needed-by/31983195#31983195", "title": "CMake make[2]: *** No rule to make target `/path/to/uthash/utarray.h&#39;, needed by `HelloTest&#39;. Stop", "body": "<p>You set <code>C_SOURCE</code> variable to list of sources and headers, but use it in commands <code>link_directories</code> and <code>target_link_libraries</code>, related to <em>linking</em>, not a <em>compiling</em>.</p>\n\n<p>Probably, you need to append content of this variable to <code>SOURCE_FILES</code> instead.</p>\n"}], "owner": {"reputation": 1564, "user_id": 3126402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c2502d74600c9f320495ae855f98134?s=128&d=identicon&r=PG&f=1", "display_name": "Astrid", "link": "https://stackoverflow.com/users/3126402/astrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4186, "favorite_count": 0, "accepted_answer_id": 31983195, "answer_count": 1, "score": 0, "last_activity_date": 1439454694, "creation_date": 1439417447, "last_edit_date": 1439417866, "question_id": 31976279, "link": "https://stackoverflow.com/questions/31976279/cmake-make2-no-rule-to-make-target-path-to-uthash-utarray-h-needed-by", "title": "CMake make[2]: *** No rule to make target `/path/to/uthash/utarray.h&#39;, needed by `HelloTest&#39;. Stop", "body": "<p>I am trying to build some mixed C/C++ code to run some simple test code (HelloTest) as such:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"cpp_header.h\"\nextern \"C\"\n{\n    #include \"c_header.h\"\n}\n\nusing namespace std;\n\nint main(int argc, char **argv) {\n    cout &lt;&lt; \"Hello, World!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>but I get this very strange error:</p>\n\n<pre><code>/Applications/CLion.app/Contents/bin/cmake/bin/cmake --build /Users/user/Library/Caches/clion10/cmake/generated/c1d0f54d/c1d0f54d/Debug --target all -- -j 2\nmake[2]: *** No rule to make target `/path/to/uthash/utarray.h', needed by `HelloTest'.  Stop.\nmake[1]: *** [CMakeFiles/HelloTest.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>Now, utarray.h is part of uthash (<a href=\"http://troydhanson.github.io/uthash/\" rel=\"nofollow\">http://troydhanson.github.io/uthash/</a>), and savvy readers will know that this is not a question of the <code>.c/cpp</code> missing - <code>utarray.h</code> doesn't have one.</p>\n\n<p>The CMake file -ish looks like this </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2)\nproject(HelloTest)\n\n# CPP stuff\nfind_package(CPP_PACKAGE REQUIRED)\ninclude_directories(${CPP_PACKAGE_INCLUDE_DIR})\nlink_directories(${CPP_PACKGE_LIB_DIR})\n\n# C Headers\nset(C_ROOT_DIR \"/path/to/c/library\")\nset(C_INCLUDE_DIR ${C_ROOT_DIR}/src\n                      ${C_ROOT_DIR}/ext/mtrand\n                      ${C_ROOT_DIR}/ext/uthash/src)\ninclude_directories(${C_INCLUDE_DIR})\n\n# C Headers &amp; Source [we want to avoid globbing]\nset(C_SOURCE   ${C_ROOT_DIR}/src/bnp.c\n                    ${C_ROOT_DIR}/src/bnp.h\n.\n.\n.\n                    ${C_ROOT_DIR}/ext/uthash/utarray.h\n                    ${C_ROOT_DIR}/ext/uthash/uthash.h\n                    ${C_ROOT_DIR}/ext/uthash/utlist.h\n                    ${C_ROOT_DIR}/ext/uthash/utstring.h)\nlink_directories(${C_SOURCE})\n\nset(SOURCE_FILES main.cpp)\nadd_executable(HelloTest ${SOURCE_FILES})\ntarget_link_libraries(HelloTest ${CPP_LIBRARIES} ${C_SOURCE})\n</code></pre>\n"}, {"tags": ["c++", "opengl", "sdl", "resolution", "stretch"], "comments": [{"owner": {"reputation": 2046, "user_id": 3829741, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d134a7bfba2d86b9777d674344758d?s=128&d=identicon&r=PG&f=1", "display_name": "dari", "link": "https://stackoverflow.com/users/3829741/dari"}, "edited": false, "score": 0, "creation_date": 1439417082, "post_id": 31976140, "comment_id": 51858924, "body": "Checkout <code>glViewport</code> <a href=\"https://www.opengl.org/sdk/docs/man/docbook4/xhtml/glViewport.xml\" rel=\"nofollow noreferrer\">opengl.org/sdk/docs/man/docbook4/xhtml/glViewport.xml</a>"}, {"owner": {"reputation": 5497, "user_id": 680982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3616a9a573b69533327b3dfe159481bf?s=128&d=identicon&r=PG", "display_name": "Csq", "link": "https://stackoverflow.com/users/680982/csq"}, "edited": false, "score": 0, "creation_date": 1439417519, "post_id": 31976140, "comment_id": 51859058, "body": "Just curious: why 256x224?"}, {"owner": {"reputation": 783, "user_id": 3995239, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LLKKq.png?s=128&g=1", "display_name": "Accumulator", "link": "https://stackoverflow.com/users/3995239/accumulator"}, "edited": false, "score": 0, "creation_date": 1439417645, "post_id": 31976140, "comment_id": 51859104, "body": "Making a game based on an SNES game."}], "owner": {"reputation": 783, "user_id": 3995239, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LLKKq.png?s=128&g=1", "display_name": "Accumulator", "link": "https://stackoverflow.com/users/3995239/accumulator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439416811, "creation_date": 1439416811, "question_id": 31976140, "link": "https://stackoverflow.com/questions/31976140/opengl-sdl-use-black-bars-instead-of-stretching", "title": "OpenGL/SDL - Use Black Bars Instead of Stretching", "body": "<p>I'm making a game and it runs at 256x224. I set the actual screen resolution to the user's screen resolution and set the matrix resolution to 256x224. It 'works', but instead of having black bars, it's stretched. How do I make it use black bars instead of stretching?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1439417006, "creation_date": 1439417006, "answer_id": 31976184, "question_id": 31976131, "link": "https://stackoverflow.com/questions/31976131/unresolved-external-symbol-vector-c-when-sharing-a-vector-between-classes/31976184#31976184", "title": "unresolved external symbol vector c++ when sharing a vector between classes", "body": "<p>You have to define the static class variable too.  Add this line after the class definition:</p>\n\n<pre><code> vector&lt;string&gt; base::v1;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4988249, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/feba0d543a6cfb5987b93b457f98b123?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav", "link": "https://stackoverflow.com/users/4988249/vaibhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "closed_date": 1439418888, "answer_count": 1, "score": -2, "last_activity_date": 1439426212, "creation_date": 1439416770, "last_edit_date": 1439426212, "question_id": 31976131, "link": "https://stackoverflow.com/questions/31976131/unresolved-external-symbol-vector-c-when-sharing-a-vector-between-classes", "closed_reason": "Duplicate", "title": "unresolved external symbol vector c++ when sharing a vector between classes", "body": "<p>I want to share the same vector between derived classes and access the string as individuals. I get an error with unresolved externals. What is going wrong. Is there any other way of sharing a vector between classes without static methods.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\nclass base\n{\npublic:\n  static vector&lt;string&gt; v1;\n\n  void set(string val);\n\n  vector&lt;string&gt; getval();\n};\n\nvoid base::set(string val)\n{\n   v1.push_back(val);\n}\n\nvector&lt;string&gt; base::getval()\n{\n  return v1;\n}\n\n\nclass derived :public base\n{\npublic:\n  void vec();\n};\n\nvoid derived::vec()\n{\n  string b = \"sfd\";\n  derived d;\n  d.set(b);\n}\n\nclass derive2:public base\n{\npublic:\n  void vec2();\n};\n\nvoid derive2::vec2()\n{\n  derive2 f;\n  vector&lt;string&gt; a(100);\n  a = f.getval();\n}\n\nint main()\n{\n  derived a;\n  a.vec();\n  derive2 b;\n  b.vec2();\n  a.vec();\n  b.vec2();\n  return 0;\n}\n</code></pre>\n\n<p>How to get the vector in a derived class</p>\n"}, {"tags": ["c++", "loops"], "comments": [{"owner": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "edited": false, "score": 0, "creation_date": 1439416600, "post_id": 31976048, "comment_id": 51858744, "body": "What is the user supposed to do when they don&#39;t want to add anymore?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1439416645, "post_id": 31976048, "comment_id": 51858758, "body": "<a href=\"https://en.wikipedia.org/wiki/Sentinel_value\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Sentinel_value</a>"}, {"owner": {"reputation": 21, "user_id": 5132506, "user_type": "registered", "profile_image": "https://graph.facebook.com/1603656169908515/picture?type=large", "display_name": "noob", "link": "https://stackoverflow.com/users/5132506/noob"}, "reply_to_user": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "edited": false, "score": 0, "creation_date": 1439416829, "post_id": 31976048, "comment_id": 51858820, "body": "@DJ McMayhem : Thats the question"}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439420734, "post_id": 31976048, "comment_id": 51860044, "body": "@PrabhatSingh You can&#39;t do that with that code. Suppose you could, then pressing enter would put some integer <code>A0</code> in <code>a</code>, which means that manually entering this integer would stop the loop, I can&#39;t see how it is desirable (besides, <code>cin &gt;&gt; a;</code> doesn&#39;t even return when you only press enter on my machine... how do you want to test <code>a</code> for a line end if the function blocks until you&#39;ve entered something relevant?). I suggest you use Kay&#39;s answer (or RyanP&#39;s answer which is fine too) which has the intended behaviour (and even checks for invalid values). I don&#39;t get why they were downvoted."}], "answers": [{"tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": false, "score": 0, "last_activity_date": 1439417508, "creation_date": 1439417508, "answer_id": 31976291, "question_id": 31976048, "link": "https://stackoverflow.com/questions/31976048/how-to-break-loop-by-enter-c/31976291#31976291", "title": "How to break loop by Enter (c++)?", "body": "<p>It is easier to use a sentinel value that you can check against, something like this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    int sum = 0;\n    string userInput;\n\n    while(true)\n    {\n        cout&lt;&lt;\"Enter number to be added ('q' to quit): \";\n        cin &gt;&gt; userInput;\n\n        if( (userInput == \"q\") || (userInput == \"Q\") )\n        {\n            break;\n        }\n\n        try\n        {\n            sum += stoi( userInput );\n        }\n        catch( const std::invalid_argument&amp; e )\n        {\n            cerr &lt;&lt; \"Invalid input \\\"\" &lt;&lt; userInput &lt;&lt; \"\\\" received!\" &lt;&lt; endl;\n            return EXIT_FAILURE;\n        }\n    }\n\n    cout &lt;&lt; \"Sum: \" &lt;&lt; sum &lt;&lt; endl;\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 1, "creation_date": 1439419920, "post_id": 31976589, "comment_id": 51859838, "body": "@PrabhatSingh (might be the downvoter) I didn&#39;t see this answer (deleted my duplicate answer), why is this downvoted? It&#39;s perfectly fine. Can we have an explanation from the downvoter please?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439423146, "post_id": 31976589, "comment_id": 51860714, "body": "@Caninonos Not the downvoter, but the OP wishes to exit on an empty line, ergo not a solution. The use of exceptions is a good improvement. I couldn&#39;t get std::invalid_argument to catch all I wanted, but I didn&#39;t see out of range getting thrown when I tried it."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1439423558, "post_id": 31976589, "comment_id": 51860816, "body": "@user4581301 Unless I&#39;m mistaken, he does exit the loop on an empty line here: <code>if (buf.empty()) { std::cerr &lt;&lt; &quot;You entered a blank line&quot; &lt;&lt; std::endl; break; }</code> hence my incomprehension. (btw checking whether multiple numbers are entered in your answer is nice, I haven&#39;t thought of that case)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439424233, "post_id": 31976589, "comment_id": 51860980, "body": "@Caninonos He does indeed. My apologies for missing that. I am at a loss, then. I&#39;ll have to poke a bit deeper when I&#39;ve the time."}], "tags": [], "owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "is_accepted": false, "score": 0, "last_activity_date": 1439419055, "creation_date": 1439419055, "answer_id": 31976589, "question_id": 31976048, "link": "https://stackoverflow.com/questions/31976048/how-to-break-loop-by-enter-c/31976589#31976589", "title": "How to break loop by Enter (c++)?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow\"><code>std::getline(std::istream&amp;, std::string&amp;)</code></a> happily gives all lines including empty lines:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() {\n    long long accumulator = 0;\n    while (true) {\n        // read a (possibly empty) line:\n        std::string buf;\n        if (!std::getline(std::cin, buf)) {\n            std::cerr &lt;&lt; \"The input stream is broken.\" &lt;&lt; std::endl;\n            break;\n        }\n\n        // was the entered line empty?\n        if (buf.empty()) {\n            std::cerr &lt;&lt; \"You entered a blank line\" &lt;&lt; std::endl;\n            break;\n        }\n\n        // convert string to integer\n        std::size_t pos;\n        long long summand;\n        try {\n            summand = std::stoll(buf, &amp;pos, 10);\n        } catch (std::invalid_argument &amp;) {\n            std::cerr &lt;&lt; \"Not an integer: \" &lt;&lt; buf &lt;&lt; std::endl;\n            continue;\n        } catch (std::out_of_range &amp;) {\n            std::cerr &lt;&lt; \"Out of range: \" &lt;&lt; buf &lt;&lt; std::endl;\n            continue;\n        }\n        if (pos != buf.size()) {\n            std::cerr &lt;&lt; \"Not an integer on its own: \" &lt;&lt; buf &lt;&lt; std::endl;\n            continue;\n        }\n\n        // do something with the data:\n        accumulator += summand;\n    }\n    std::cout &lt;&lt; \"accumulator = \" &lt;&lt; accumulator &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1439421773, "creation_date": 1439421773, "answer_id": 31977039, "question_id": 31976048, "link": "https://stackoverflow.com/questions/31976048/how-to-break-loop-by-enter-c/31977039#31977039", "title": "How to break loop by Enter (c++)?", "body": "<p>Use std::getline to read an input line and exit the loop when the line is empty.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;sstream&gt;\n\nint main() {\n    int a = 0, h = 0;\n    std::cout &lt;&lt; \"Enter numbers to be added:\\n \";\n    std::string line;\n\n    std::cout &lt;&lt; \"\\n\" &lt;&lt; h &lt;&lt; \" + \";\n    while (std::getline(std::cin, line) &amp;&amp; // input is good\n           line.length() &gt; 0) // line not empty\n    {\n        std::stringstream linestr(line);\n        while (linestr &gt;&gt; a)// recommend better checking here. Look up std::strtol\n        {\n            h = h+a;\n            std::cout &lt;&lt; \"\\n\" &lt;&lt; h &lt;&lt; \" + \";\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And output:</p>\n\n<pre><code>Enter numbers to be added:\n\n0 + 1 2 3 4 5 6 7 8 9 \n\n1 + \n3 + \n6 + \n10 + \n15 + \n21 + \n28 + \n36 + \n45 + \n</code></pre>\n\n<p>Note that this allows multiple entries per line and looks pretty ugly, so OP is probably more interested in:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nint main() {\n    long a = 0, h = 0;\n    std::cout &lt;&lt; \"Enter numbers to be added:\\n \";\n    std::string line;\n\n    std::cout &lt;&lt; \"\\n\" &lt;&lt; h &lt;&lt; \" + \";\n\n    while (std::getline(std::cin, line) &amp;&amp; // input is good\n           line.length() &gt; 0) // line not empty\n    {\n        char * endp; // will be updated with the character in line that wasn't a digit\n        a = std::strtol(line.c_str(), &amp;endp, 10);\n        if (*endp == '\\0') // if last character inspected was the end of the string\n                           // warning: Does not catch ridiculously large numbers\n        {\n            h = h+a;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Very funny, wise guy. Try again.\" &lt;&lt; std::endl;\n        }\n        std::cout &lt;&lt; \"\\n\" &lt;&lt; h &lt;&lt; \" + \";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Enter numbers to be added:\n\n0 + 1\n\n1 + 1 2 3 4\nVery funny, wise guy. Try again.\n\n1 + 2\n\n3 + 44444\n\n44447 + jsdf;jasdklfjasdklf\nVery funny, wise guy. Try again.\n\n44447 + 9999999999999999999999\n\n-2147439202 + \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5132506, "user_type": "registered", "profile_image": "https://graph.facebook.com/1603656169908515/picture?type=large", "display_name": "noob", "link": "https://stackoverflow.com/users/5132506/noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7941, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1439421773, "creation_date": 1439416399, "last_edit_date": 1439416728, "question_id": 31976048, "link": "https://stackoverflow.com/questions/31976048/how-to-break-loop-by-enter-c", "title": "How to break loop by Enter (c++)?", "body": "<p>I wanted to break the loop when the user doesn't want to add anymore: </p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n    int i = 0, a = 0, h = 0;\n    cout &lt;&lt; \"Enter numbers to be added:\\n \";\n    for(i=0; ??; i++) {\n        cout &lt;&lt; \"\\n\" &lt;&lt; h &lt;&lt; \" + \";\n        cin &gt;&gt; a;\n        h = h+a;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "opencv", "java-native-interface", "convex-hull"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1439463195, "post_id": 31976016, "comment_id": 51877015, "body": "This works for me. But try with <code>convexHull(contours[i], hull[i], false, true);</code>"}, {"owner": {"reputation": 9, "user_id": 5187304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1612fc8749ba5fd73dcb99b5e9b5cd6?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Luiz", "link": "https://stackoverflow.com/users/5187304/jo%c3%a3o-luiz"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1439485851, "post_id": 31976016, "comment_id": 51893073, "body": "Thanks for listening, but still displays the same error. The error disappears when step  <code>convexHull(Mat(contours[i]),Mat( hull[i]), false, true);</code> but will give an error at runtime. What I do not understand is that if I close the project and open it again, the error only appears when I open the .cpp file that contains the call. But if you do not open it, I can build the application and generate the .apk and yet still performs the convexHull normally."}, {"owner": {"reputation": 9, "user_id": 5187304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1612fc8749ba5fd73dcb99b5e9b5cd6?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Luiz", "link": "https://stackoverflow.com/users/5187304/jo%c3%a3o-luiz"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1439486986, "post_id": 31976016, "comment_id": 51893721, "body": "really, because so does some calls as: <code>to_string (number)</code> <code>circle (...);</code> <code>putText (...);</code>                                                                                                I am looking for some solution to this problem. Thank you!"}], "owner": {"reputation": 9, "user_id": 5187304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1612fc8749ba5fd73dcb99b5e9b5cd6?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Luiz", "link": "https://stackoverflow.com/users/5187304/jo%c3%a3o-luiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439416279, "creation_date": 1439416279, "question_id": 31976016, "link": "https://stackoverflow.com/questions/31976016/convexhull-invalid-arguments-opencv-2-4-9", "title": "convexHull - &quot;Invalid arguments&quot; - OpenCV 2.4.9", "body": "<p>I have this C ++ OpenCV code ...</p>\n\n<pre><code>vector&lt;Vec4i&gt; hierarchy;\nvector&lt;vector&lt;Point&gt; &gt; contours;\nfindContours(bin.clone(), contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));\n\n// Find the convex hull object of the external contour\nvector&lt;vector&lt;Point&gt; &gt;hull( contours.size() );\nfor (int i = 0; i &lt; contours.size(); i++)\n{\nError here --&gt;   convexHull(Mat(contours[i]), hull[i], false);\n}\n</code></pre>\n\n<p>... and am using the jni to use it on an Android project, but is having a conflict in function arguments \"convexHull\":</p>\n\n<p>\"Invalid arguments '\nCandidates are:\nvoid convexHull(const cv::_InputArray &amp;, const cv::_OutputArray &amp;, bool, bool)\n'\"\nI wonder how to get around this error ... I am using OpenCV version 2.4.9</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "qt", "sorting", "qsortfilterproxymodel"], "answers": [{"tags": [], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "is_accepted": true, "score": 1, "last_activity_date": 1439999796, "creation_date": 1439999796, "answer_id": 32100400, "question_id": 31975894, "link": "https://stackoverflow.com/questions/31975894/is-there-any-way-to-use-a-user-defined-operator-for-a-struct-to-sort-qvariants/32100400#32100400", "title": "Is there any way to use a user-defined operator&lt; for a struct to sort QVariants of that struct in a QSortFilterProxyModel?", "body": "<p>I believe what I have to do is subclass the <code>QSortFilterProxyModel</code> and overload <code>lessThan</code> to do something like <code>return sourceModel()-&gt;data(left).value&lt;foo&gt;() &lt; sourceModel()-&gt;data(right).value&lt;foo&gt;();</code></p>\n"}], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 32100400, "answer_count": 1, "score": 1, "last_activity_date": 1439999796, "creation_date": 1439415676, "last_edit_date": 1592644375, "question_id": 31975894, "link": "https://stackoverflow.com/questions/31975894/is-there-any-way-to-use-a-user-defined-operator-for-a-struct-to-sort-qvariants", "title": "Is there any way to use a user-defined operator&lt; for a struct to sort QVariants of that struct in a QSortFilterProxyModel?", "body": "<p>According to the Qt docs for <a href=\"http://doc.qt.io/qt-4.8/qsortfilterproxymodel.html#lessThan\" rel=\"nofollow noreferrer\">QSortFilterProxyModel::lessThan</a>():</p>\n<blockquote>\n<p><strong>bool</strong> QSortFilterProxyModel::<strong>lessThan</strong>(const <a href=\"http://doc.qt.io/qt-4.8/qmodelindex.html\" rel=\"nofollow noreferrer\">QModelIndex</a> &amp; <em>left</em>, const <a href=\"http://doc.qt.io/qt-4.8/qmodelindex.html\" rel=\"nofollow noreferrer\">QModelIndex</a> &amp; <em>right</em>) const <code>[virtual protected]</code></p>\n<p>Returns true if the value of the item referred to by the given index <em>left</em> is less than the value of the item referred to by the given index <em>right</em>, otherwise returns false.</p>\n<p>This function is used as the &lt; operator when sorting, and handles the following <a href=\"http://doc.qt.io/qt-4.8/porting4.html#qvariant\" rel=\"nofollow noreferrer\">QVariant</a> types:</p>\n<p>[... snip built-in types ...]</p>\n<p>Any other type will be converted to a <a href=\"http://doc.qt.io/qt-4.8/porting4.html#qstring\" rel=\"nofollow noreferrer\">QString</a> using <a href=\"http://doc.qt.io/qt-4.8/qvariant.html#toString\" rel=\"nofollow noreferrer\">QVariant::toString</a>().</p>\n</blockquote>\n<p>And the docs for <a href=\"http://doc.qt.io/qt-4.8/qvariant.html#toString\" rel=\"nofollow noreferrer\">QVariant::toString</a>() say:</p>\n<blockquote>\n<p><a href=\"http://doc.qt.io/qt-4.8/qstring.html\" rel=\"nofollow noreferrer\">QString</a> QVariant::<strong>toString</strong>() const</p>\n<p>Returns the variant as a <a href=\"http://doc.qt.io/qt-4.8/qstring.html\" rel=\"nofollow noreferrer\">QString</a> if the variant has <a href=\"http://doc.qt.io/qt-4.8/qvariant.html#type\" rel=\"nofollow noreferrer\">type</a>() String, Bool, ByteArray, Char, Date, DateTime, Double, Int, LongLong, StringList, Time, UInt, or ULongLong; otherwise returns an empty string.</p>\n</blockquote>\n<p>I have a user-defined struct:</p>\n<pre><code>struct foo {\n    ...\n};\n\ninline bool operator &lt;(const foo&amp; a, const foo&amp; b) { \n    ...\n};\n\nQ_DECLARE_METATYPE(foo)\n</code></pre>\n<p>I can make <code>QVariant</code>s from this:</p>\n<pre><code>QVariant r; \nr.setValue(foo());\nreturn r;\n</code></pre>\n<p>However, if I return such a <code>QVariant</code> for the sorting role then, based on the docs above it won't work - it'll just end up sorting on empty strings.</p>\n<p>It seems like what I have to do, to preserve the same order as the <code>operator &lt;</code> I defined for <code>foo</code>, is come up with a string representation for <code>foo</code> which ends up having the exact same sort order.</p>\n<p>This is really unappealing. It's clunky and involves code duplication. Is there any other way?</p>\n"}, {"tags": ["c++", "inheritance", "virtual-functions", "method-hiding"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1439415806, "post_id": 31975861, "comment_id": 51858469, "body": "&quot;Changing the code base by hand to add &quot;override&quot; or &quot;final&quot; or so is not an option as this check should only be done once.&quot; Can you not take your functions that you want to check, make them virtual if they aren&#39;t virtual currently, and add a <code>final</code> specifier to them and compile it just to see where it get overridden and then change it back after you&#39;re done?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1439415891, "post_id": 31975861, "comment_id": 51858497, "body": "@RyanP Sounds like a big codebase, and OP not wanting to do it by hand."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439416340, "post_id": 31975861, "comment_id": 51858644, "body": "Isn&#39;t <code>&#47;W4</code> enough? <a href=\"https://msdn.microsoft.com/en-us/library/ay4h0tc9%28v=vs.110%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ay4h0tc9%28v=vs.110%29.aspx</a>"}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439456251, "post_id": 31975861, "comment_id": 51872619, "body": "@ RyanP yep. Big codebase and I want to check ALL of them... @dyp W4 outputs way to much and I haven&#39;t found a warning for that particular case (if there is I can manually enable it which would be great)"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439456662, "post_id": 31975861, "comment_id": 51872874, "body": "I have linked C4263 above, which specifically is about functions hiding, but not overriding, functions of base classes."}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439465494, "post_id": 31975861, "comment_id": 51878499, "body": "@dyp Although this warning is useful, it is not what I need. My base class&#39; method is non-virtual but C4263 warns for hiding virtual functions only and even not that but only for hiding by different signature. I need a warning for a missing virtual in the base class."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1439467845, "post_id": 31975861, "comment_id": 51880154, "body": "@Flamefire Well if the base class function is virtual, and the derived class function has the same name and signature, it is overriding the base class function. This is usually not an error. But I agree, this is probably not what you&#39;re looking for. I couldn&#39;t find any warnings in gcc nor msvc that specifically addressed this kind of name hiding. IIRC, PCLint can diagnose that; you could also try writing your own checker for the clang static analyser."}], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1439415529, "creation_date": 1439415529, "last_edit_date": 1495540806, "question_id": 31975861, "link": "https://stackoverflow.com/questions/31975861/warning-on-hiding-base-functions", "title": "Warning on hiding base functions", "body": "<p>I have a C++ code base where some non-virtual methods in a base class or overriden/hidden by virtual or non-virtual methods in derived classes. Mostly this is an error in the code.</p>\n\n<p>Is there anything I can do to automaticly check for such cases like a compiler warning or a tool?</p>\n\n<p>This is similar to <a href=\"https://stackoverflow.com/questions/14997210/prevent-derived-classes-from-hiding-non-virtual-functions-from-base\">Prevent derived classes from hiding non virtual functions from base</a> or <a href=\"https://stackoverflow.com/questions/8213847/no-warning-for-hiding-non-virtual-methods-with-similar-prototype-g-4-4\">No warning for hiding non-virtual methods with similar prototype (G++ 4.4)</a> but I'm looking for an actual solution to detect these issues in an existing codebase. Maybe just a warning for hidden functions is enough (I think that list will be small enough to go through one by one)</p>\n\n<p>Changing the code base by hand to add \"override\" or \"final\" or so is not an option as this check should only be done once. A global solution like a define to \"final\" all non-virtual functions preventing them from beeing hidden would be ok.</p>\n\n<p>I'm using Visual Studio 2012 but also have access to ubuntu and gcc.</p>\n"}, {"tags": ["c++", "boost", "mpi"], "answers": [{"comments": [{"owner": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "reply_to_user": {"reputation": 1490, "user_id": 3707564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60104882193f0b67e860f3aa5332f399?s=128&d=identicon&r=PG&f=1", "display_name": "user40780", "link": "https://stackoverflow.com/users/3707564/user40780"}, "edited": false, "score": 0, "creation_date": 1439567327, "post_id": 31982157, "comment_id": 51930358, "body": "What exactly is your problem? How do you attempt to compile and what is the error?"}], "tags": [], "owner": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "is_accepted": true, "score": 1, "last_activity_date": 1439451145, "creation_date": 1439451145, "answer_id": 31982157, "question_id": 31975780, "link": "https://stackoverflow.com/questions/31975780/how-could-we-use-mpic-as-compiler-for-xcode/31982157#31982157", "title": "How could we use mpic++ as compiler for Xcode?", "body": "<p>mpic++ is basically just a wrapper that automatically includes the MPI libraries when you compile and link your C++ program. In other words, you can compile your C++ code with mpic++ in exactly the same way as you'd do with say g++ or clang++ (assuming that you have installed MPI correctly). </p>\n"}], "owner": {"reputation": 1490, "user_id": 3707564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60104882193f0b67e860f3aa5332f399?s=128&d=identicon&r=PG&f=1", "display_name": "user40780", "link": "https://stackoverflow.com/users/3707564/user40780"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 31982157, "answer_count": 1, "score": 1, "last_activity_date": 1439451145, "creation_date": 1439415120, "question_id": 31975780, "link": "https://stackoverflow.com/questions/31975780/how-could-we-use-mpic-as-compiler-for-xcode", "title": "How could we use mpic++ as compiler for Xcode?", "body": "<p>As I need to use mpic++ as a compiler of my c++ program (because I need to use BOOST_MOI), is there a way to achieve that? Thank you.</p>\n"}, {"tags": ["python", "c++", "heroku", "pyicu"], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 1438510, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/489083971c94b6702d6a61b1639bc51e?s=128&d=identicon&r=PG", "display_name": "Costas Kirgoussios", "link": "https://stackoverflow.com/users/1438510/costas-kirgoussios"}, "is_accepted": false, "score": 1, "last_activity_date": 1439627070, "creation_date": 1439627070, "answer_id": 32022933, "question_id": 31975668, "link": "https://stackoverflow.com/questions/31975668/installation-of-pyicu-on-heroku/32022933#32022933", "title": "Installation of PyICU on Heroku", "body": "<p>This is a working workaround until a proper answer to the question.</p>\n\n<ol>\n<li><p>Create the application as shown above (use the heroku-buildpack-apt to install libicu52 and libicu-dev).</p></li>\n<li><p>Upload and enter heroku run bash</p>\n\n<p>CPATH=$CPATH/app/.apt/usr/include/x86_64-linux-gnu</p>\n\n<p>pip install wheel</p>\n\n<p>pip wheel PyICU</p></li>\n</ol>\n\n<p>This will create a wheel (.whl file) in /app/wheelhouse.</p>\n\n<p>Download the file, save it somewhere in your project and install it by putting its name in your requirements.txt</p>\n"}], "owner": {"reputation": 99, "user_id": 1438510, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/489083971c94b6702d6a61b1639bc51e?s=128&d=identicon&r=PG", "display_name": "Costas Kirgoussios", "link": "https://stackoverflow.com/users/1438510/costas-kirgoussios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439627070, "creation_date": 1439414613, "last_edit_date": 1439516536, "question_id": 31975668, "link": "https://stackoverflow.com/questions/31975668/installation-of-pyicu-on-heroku", "title": "Installation of PyICU on Heroku", "body": "<p>Anyone know how to install PyICU on Heroku?</p>\n\n<p>Here is what I tried so far:</p>\n\n<ol>\n<li>Created a heroku-buildpack-multi application.</li>\n</ol>\n\n<p>In .buildpacks</p>\n\n<pre><code>https://github.com/ddollar/heroku-buildpack-apt\nhttps://github.com/heroku/heroku-buildpack-python.git\n</code></pre>\n\n<p>In Aptfile</p>\n\n<pre><code>libicu52\nlibicu-dev\n</code></pre>\n\n<p>Then heroku run bash</p>\n\n<pre><code>CPATH=$CPATH/app/.apt/usr/include/x86_64-linux-gnu\npip install PyICU\n</code></pre>\n\n<p>And it installs fine.</p>\n\n<p>I need one way to do that during the application's upload phase (push).</p>\n\n<p>I tried:</p>\n\n<pre><code>pip install --global-option=build_ext --global-option=\"-I/app/.apt/usr/lib/x86_64-linux-gnu\" PyICU\n</code></pre>\n\n<p>and to create a .pydistutils.cfg file in my home directory as</p>\n\n<pre><code>[build_ext]\ninclude_dirs=/app/.apt/usr/include/x86_64-linux-gnu\n</code></pre>\n\n<p>In both cases GCC fails to find the header files, but I can see the</p>\n\n<pre><code>-I/app/.apt/usr/lib/x86_64-linux-gnu\n</code></pre>\n\n<p>flag on the command line.</p>\n\n<p>Used</p>\n\n<pre><code>`gcc -print-prog-name=cc1plus` -v\n</code></pre>\n\n<p>to find the differences in search paths before and after CPATH=$CPATH/app/.apt/usr/include/x86_64-linux-gnu</p>\n\n<p>Before:</p>\n\n<pre><code>#include &lt;...&gt; search starts here:\n/app/.apt/usr/include\n.\n/usr/include/c++/4.8\n/usr/include/x86_64-linux-gnu/c++/4.8\n/usr/include/c++/4.8/backward\n/usr/lib/gcc/x86_64-linux-gnu/4.8/include\n/usr/local/include\n/usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed\n/usr/include\nEnd of search list.\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>#include &lt;...&gt; search starts here:\n/app/.apt/usr/include\n/app/.apt/usr/include/x86_64-linux-gnu\n/usr/include/c++/4.8\n/usr/include/x86_64-linux-gnu/c++/4.8\n/usr/include/c++/4.8/backward\n/usr/lib/gcc/x86_64-linux-gnu/4.8/include\n/usr/local/include\n/usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed\n/usr/include\nEnd of search list.\n</code></pre>\n\n<p>But I'm not a C++ programmer and cannot find what is wrong. Any ideas?</p>\n"}, {"tags": ["c++", "pointers", "c++11"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1439414341, "post_id": 31975501, "comment_id": 51857830, "body": "In general, the underlying issue is that you&#39;re attempting to do a line-by-line translation from C to C++.  That is not the best way to turn a non-OO, <code>C</code> based API into a C++ interface.  You have to look at the overall design, and apply the appropriate pattern(s) to it.  For an example, look at how <code>boost</code> implements the filesystem API."}, {"owner": {"reputation": 16519, "user_id": 19100, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d85c685bac51d4cc044f3bc15f09316f?s=128&d=identicon&r=PG", "display_name": "dalle", "link": "https://stackoverflow.com/users/19100/dalle"}, "edited": false, "score": 5, "creation_date": 1439414492, "post_id": 31975501, "comment_id": 51857902, "body": "Have a look at Boost.FileSystem (<a href=\"http://www.boost.org/doc/libs/release/libs/filesystem/\" rel=\"nofollow noreferrer\">boost.org/doc/libs/release/libs/filesystem</a>) which has been accepted into Technical Report 2."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1439414916, "post_id": 31975501, "comment_id": 51858104, "body": "If you have access to Koenig&#39;s <a href=\"https://rads.stackoverflow.com/amzn/click/com/0201423391\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Ruminations on C++</a>, he has an example of this in one of his chapters.  However, that might not count as Modern C++ since it pre-dates the standard by a year or so, so it doesn&#39;t have all the experience since then to build on."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1439419649, "post_id": 31975501, "comment_id": 51859764, "body": "@JonathanLeffler: I wasn&#39;t aware that Koenig had something on directories in there. Do you recall how it was exposed? In particular, did Koenig expose the directory as an iterator?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1439420505, "post_id": 31975501, "comment_id": 51859978, "body": "@DietmarK&#252;hl: I&#39;ll need to look at the code again.  IIRC, there was discussion about making it an iterator, but not code that actually did so."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1439414746, "last_edit_date": 1439414746, "creation_date": 1439414349, "answer_id": 31975604, "question_id": 31975501, "link": "https://stackoverflow.com/questions/31975501/modern-c-wrapper-around-c-dirent-h/31975604#31975604", "title": "Modern C++ wrapper around C Dirent.h", "body": "<p>Comma operator to the rescue !</p>\n\n<pre><code>while(entry.reset(readdir(m_dir.get())), entry)\n    puts(entry-&gt;d_name);\n</code></pre>\n\n<p>Although, as the comments say, this is not a fantastic API for a filesystem. Iterators that transparently adapt an underlying directory would be cool, for example.</p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 2, "last_activity_date": 1439419220, "creation_date": 1439419220, "answer_id": 31976619, "question_id": 31975501, "link": "https://stackoverflow.com/questions/31975501/modern-c-wrapper-around-c-dirent-h/31976619#31976619", "title": "Modern C++ wrapper around C Dirent.h", "body": "<p>I'm not sure if this count's as <em>modern</em> as I posted something like this in UseNet in the previous millennium (<a href=\"http://free-cad.sourceforge.net/SrcDocu/d9/d0f/directory_8h_source.html\" rel=\"nofollow\">here</a> is a refined version). It evolved slightly to become one of the first components which were used to seed <a href=\"http://boost.org\" rel=\"nofollow\">Boost</a> in 1998. Thanks to the work of others it got further developed at Boost and eventually turned into the <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/filesystem/doc/index.htm\" rel=\"nofollow\">file system library</a> which formed the basis of the <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2014/n3940.html\" rel=\"nofollow\">File System TS</a>.</p>\n\n<p>However, it all started with a simple idea: how to expose <code>opendir()</code>, <code>readdir()</code>, and <code>closedir()</code> nicely? The somewhat obvious answer is: using an iterator! Here is a simple version and demo:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;stdexcept&gt;\n#include &lt;memory&gt;\n#include &lt;dirent.h&gt;\n\nclass dir_it\n    : public std::iterator&lt;std::input_iterator_tag, std::string&gt;\n{\n    std::shared_ptr&lt;DIR&gt; dir;\n    std::string          current;\n    void advance() {\n        dirent  entry;\n        dirent* result;\n        if (!readdir_r(dir.get(), &amp;entry, &amp;result) &amp;&amp; result) {\n            this-&gt;current = result-&gt;d_name;\n        }\n        else {\n            this-&gt;dir.reset();\n        }\n    }\npublic:\n    dir_it(std::string const&amp; path)\n        : dir(opendir(path.c_str()), [](DIR* dir){ dir &amp;&amp; closedir(dir); }) {\n        if (!dir) {\n            throw std::runtime_error(\"failed to open directory '\" + path + \"'\");\n        }\n        this-&gt;advance();\n    }\n    dir_it(): dir() {}\n\n    std::string const&amp; operator*() const { return this-&gt;current; }\n    dir_it&amp;            operator++() { this-&gt;advance(); return *this; }\n    dir_it             operator++(int) {\n        dir_it rc(*this);\n        this-&gt;operator++();\n        return rc;\n    }\n    bool operator==(dir_it const&amp; other) const {\n        return bool(this-&gt;dir) == bool(other.dir);\n    }\n    bool operator!=(dir_it const&amp; other) const {\n        return !(*this == other);\n    }\n};\n\nint main() {\n    std::copy(dir_it(\".\"), dir_it(), std::ostream_iterator&lt;std::string&gt;(std::cout, \"\\n\"));\n}\n</code></pre>\n\n<p>Of course, the file system library in Boost and in the File System TS are <strong>much</strong> more capable than this somewhat naive implementation. If your implementation ships with an implementation of the TS I'd use that. If it doesn't you might want to consider Boost's implementation.</p>\n"}], "owner": {"reputation": 939, "user_id": 4987662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce13879abfd99e45f7ab44188ae1a353?s=128&d=identicon&r=PG&f=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/4987662/acorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1109, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1439419220, "creation_date": 1439413924, "question_id": 31975501, "link": "https://stackoverflow.com/questions/31975501/modern-c-wrapper-around-c-dirent-h", "title": "Modern C++ wrapper around C Dirent.h", "body": "<p>I am trying to write a modern c++ wrapper around the c header, dirent.h. </p>\n\n<p>To read the contents of a directory in C, something like the following is written:</p>\n\n<pre><code>int listdir(const char *path) {\n  struct dirent *entry;\n  DIR *dp;\n\n  dp = opendir(path);\n  if (dp == NULL) {\n    perror(\"opendir\");\n    return -1;\n  }\n\n  while((entry = readdir(dp)))\n    puts(entry-&gt;d_name);\n\n  closedir(dp);\n  return 0;\n}\n</code></pre>\n\n<p>Converting this to modern c++, I have the following (where m_dir and m_dirent are <code>std::unique_ptr</code>'s, and m_files is a <code>std::vector&lt;string&gt;</code>)</p>\n\n<pre><code>filesystem::Directory::Directory(std::string dir) : m_dir(opendir(dir.c_str()), closedir),\n                                                  m_dirent(new struct dirent())\n{\n    //If the directory can not be read, throw an error.\n    if (!m_dir) {\n        sdl2::SDLFileSystemRead_Failure ex;\n        throw ex;\n    }\n\n    while (&amp;(*m_dirent = *readdir(&amp;*m_dir)))\n    {\n\n        m_files.emplace_back(std::string(m_dirent-&gt;d_name));\n\n    }\n\n}\n</code></pre>\n\n<p>This only half works. When I wrote it, I was oblivious that I was just checking to see if the address of the expression <code>*m_dirent = *readdir(&amp;*m_dir)</code> existed(which, of course it does!). \nAccording to <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/readdir.html\" rel=\"noreferrer\">The Single UNIX \u00ae Specification, Version 2</a>, readdir(DIR*) returns a null pointer if it has read the last file and there are no more files to be read. However, I am uncertain on how to keep setting the dirent pointer to whatever the dir pointer is reading without calling <code>.reset()</code> on <code>m_dirent</code>. Doing this just results in garbage data being read, though, since I assume the file pointer is lost when <code>dirent</code> is destroyed. </p>\n\n<p>How can I convert this</p>\n\n<pre><code>  while((entry = readdir(dp)))\n    puts(entry-&gt;d_name);\n</code></pre>\n\n<p>into modern C++? </p>\n"}, {"tags": ["c++", "macos", "opencv", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 933307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a21d95af84722ec57116889eabcf087?s=128&d=identicon&r=PG", "display_name": "rs_", "link": "https://stackoverflow.com/users/933307/rs"}, "is_accepted": false, "score": 1, "last_activity_date": 1439414808, "creation_date": 1439414808, "answer_id": 31975714, "question_id": 31975479, "link": "https://stackoverflow.com/questions/31975479/how-to-set-path-to-opencv-on-mac-os/31975714#31975714", "title": "How to set path to opencv on Mac OS?", "body": "<p>You probably don't have <code>pkg-config</code> installed. \nPlease do,</p>\n\n<p><code>brew install pkg-config</code> </p>\n\n<p>This should remove the <code>pkg-config: command not found</code> errors.</p>\n\n<p>After installing this, add the path of <code>opencv.pc</code> file into the <code>.profile</code> or <code>.bash_profile</code> file. </p>\n"}, {"tags": [], "owner": {"reputation": 523, "user_id": 6543500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vi23K.jpg?s=128&g=1", "display_name": "tamtam", "link": "https://stackoverflow.com/users/6543500/tamtam"}, "is_accepted": false, "score": 1, "last_activity_date": 1540769820, "creation_date": 1540769820, "answer_id": 53037018, "question_id": 31975479, "link": "https://stackoverflow.com/questions/31975479/how-to-set-path-to-opencv-on-mac-os/53037018#53037018", "title": "How to set path to opencv on Mac OS?", "body": "<p>Something that might be helpful after you have installed <code>pkg-config</code>...</p>\n\n<p>brew most likely installed your opencv to <code>/usr/local/Cellar/opencv/3.4.3</code>. </p>\n\n<p>You might also have multiple opencv's installed (either through brew or source code, etc). If you run</p>\n\n<p><code>pkg-config --cflags --libs opencv</code></p>\n\n<p>it might say\n<code>-I/usr/local/include/opencv -I/usr/local/include -L/usr/local/lib -lopencv_shape</code>\nwhich indicates that the opencv that is being pointed to is not the one you installed with brew.</p>\n\n<p>Therefore, replace the above with</p>\n\n<p><code>pkg-config --cflags --libs /usr/local/Cellar/opencv/3.4.3/lib/pkgconfig/opencv.pc</code></p>\n\n<p>Adjust your brew directory and opencv version as necessary. This matters because packages could be different across opencv installations.</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 6927069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fF4Ae.jpg?s=128&g=1", "display_name": "Pooya Panahandeh", "link": "https://stackoverflow.com/users/6927069/pooya-panahandeh"}, "is_accepted": false, "score": 4, "last_activity_date": 1569839925, "creation_date": 1569839925, "answer_id": 58166186, "question_id": 31975479, "link": "https://stackoverflow.com/questions/31975479/how-to-set-path-to-opencv-on-mac-os/58166186#58166186", "title": "How to set path to opencv on Mac OS?", "body": "<p>I had a same problem and I solved it with the following steps.\nFirst Update Homebrew.</p>\n\n<pre><code>brew update\n</code></pre>\n\n<p>Second Step: Install package config:</p>\n\n<pre><code>brew install pkg-config\n</code></pre>\n\n<p>Third Step: install OpenCV if you didn't</p>\n\n<pre><code>brew install opencv@2\n</code></pre>\n\n<p>Fourth Step: Now you need to add OpenCV to your pkg-config</p>\n\n<pre><code>export PKG_CONFIG_PATH=\"/usr/local/opt/opencv@2/lib/pkgconfig\"\n</code></pre>\n"}], "owner": {"reputation": 14942, "user_id": 1179925, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5403975c3b25b9407b19a26b65d1ce72?s=128&d=identicon&r=PG", "display_name": "mrgloom", "link": "https://stackoverflow.com/users/1179925/mrgloom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5859, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1569839925, "creation_date": 1439413822, "question_id": 31975479, "link": "https://stackoverflow.com/questions/31975479/how-to-set-path-to-opencv-on-mac-os", "title": "How to set path to opencv on Mac OS?", "body": "<p>I'm using mac os 10.10 and I need to build some code via make, but it give me an error </p>\n\n<pre><code>make\ngcc `pkg-config --cflags opencv` -O3 `pkg-config --libs opencv` -o congealReal congealReal.cpp\n/bin/sh: pkg-config: command not found\n/bin/sh: pkg-config: command not found\ncongealReal.cpp:87:10: fatal error: 'cv.h' file not found\n#include &lt;cv.h&gt;\n</code></pre>\n\n<p>but I have already installed opencv via brew</p>\n\n<pre><code>brew install opencv\nWarning: homebrew/science/opencv-2.4.11_2 already installed\n</code></pre>\n\n<p>so how can I set up environment to opencv in mac os?</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 5, "creation_date": 1439413469, "post_id": 31975361, "comment_id": 51857400, "body": "Inheritance. ABC inherits from XYZ"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439413493, "post_id": 31975361, "comment_id": 51857412, "body": "Do not add C tag for C++-only questions. That is no valid C construct, but C++ class inheritance."}, {"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439413525, "post_id": 31975361, "comment_id": 51857435, "body": "@Olaf: The OP obviously thought that this was a C question. The first line even says, &quot;In C programming, [...]&quot;. So the real problem is the accidentally-correctly tagging it with C++."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439413559, "post_id": 31975361, "comment_id": 51857453, "body": "Ok, so he confuses C++ with C. Ok, it&#39;ll take back the harsh sound off my comment, but leave the rest as a friendly hint. (OTOH: if he thought that was C, why adding C++ tags?)"}, {"owner": {"reputation": 3, "user_id": 2014033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65c47b51941a688f3d2318a79e4d846?s=128&d=identicon&r=PG", "display_name": "user2014033", "link": "https://stackoverflow.com/users/2014033/user2014033"}, "edited": false, "score": 0, "creation_date": 1439414752, "post_id": 31975361, "comment_id": 51858028, "body": "thanks everyone! right, I thought it was C. And even in C++, I did not know struct can inherit from another struct. It&#39;s good to know."}, {"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1439508875, "post_id": 31975361, "comment_id": 51903518, "body": "@user2014033: It&#39;s because in C++, there isn&#39;t really such a thing as a struct; <code>struct</code> is just a synonym for <code>class</code>, except with an implicit <code>public:</code> instead of an implicit <code>private:</code>."}], "answers": [{"tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1439413856, "creation_date": 1439413856, "answer_id": 31975487, "question_id": 31975361, "link": "https://stackoverflow.com/questions/31975361/what-does-this-colon-do-in-struct-it-is-not-a-bitfield/31975487#31975487", "title": "What does this colon do in struct? it is not a bitfield", "body": "<p>The code:</p>\n\n<pre><code>struct ABC:XYZ {int num;}\n</code></pre>\n\n<p>means \"define a struct <code>ABC</code> which inherits from <code>XYZ</code> and has a <code>num</code> member of type <code>int</code>. Specifically the <code>:</code> means \"inherits from\".</p>\n\n<p>That code is equivalent to:</p>\n\n<pre><code>struct ABC : public XYZ {int num;}\n</code></pre>\n\n<p>For <code>struct</code>s the default inheritance visibility is <code>public</code>, for <code>class</code>es it's <code>private</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1439413862, "creation_date": 1439413862, "answer_id": 31975488, "question_id": 31975361, "link": "https://stackoverflow.com/questions/31975361/what-does-this-colon-do-in-struct-it-is-not-a-bitfield/31975488#31975488", "title": "What does this colon do in struct? it is not a bitfield", "body": "<p>When inherit you usually write:</p>\n\n<pre><code>class Child : public Parent { ... };\n</code></pre>\n\n<p>you can also write</p>\n\n<pre><code>class Child : Parent { ... };\n</code></pre>\n\n<p>but for class that would be private inheritance, so you usually see keyword <code>public</code> there. Same for <code>struct</code> except if not specified explicitly it would be already <code>public</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 2014033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65c47b51941a688f3d2318a79e4d846?s=128&d=identicon&r=PG", "display_name": "user2014033", "link": "https://stackoverflow.com/users/2014033/user2014033"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "closed_date": 1439413877, "accepted_answer_id": 31975487, "answer_count": 2, "score": -1, "last_activity_date": 1439413862, "creation_date": 1439413414, "last_edit_date": 1439413459, "question_id": 31975361, "link": "https://stackoverflow.com/questions/31975361/what-does-this-colon-do-in-struct-it-is-not-a-bitfield", "closed_reason": "Duplicate", "title": "What does this colon do in struct? it is not a bitfield", "body": "<p>In C programming, What does this colon do in struct? </p>\n\n<pre><code>struct ABC:XYZ {int num;}\n</code></pre>\n\n<p>where XYZ is also a struct. This does not seem to be a bitfield. What does ':' mean here?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1439413433, "post_id": 31975336, "comment_id": 51857380, "body": "Please read some documentation. (And get a book)"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1439413517, "post_id": 31975336, "comment_id": 51857430, "body": "you are right. I&#39;ve read and asked the question. I couldn&#39;t find information enough and answers of the questions. @DieterL&#252;cking"}], "answers": [{"comments": [{"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439413847, "post_id": 31975424, "comment_id": 51857588, "body": "I&#39;d add that <code>resize</code> might be more efficient than several <code>push_back</code> (unless you call <code>reserve</code> beforehand) as it allows to make sure you won&#39;t reallocate the whole vector several times (itsnotmyrealname doesn&#39;t seem to be really sure of why resize/reserve are here). Otherwise nice answer."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1439413893, "post_id": 31975424, "comment_id": 51857610, "body": "do I need <code>reserve()</code> for using <code>push_back()</code> ? I think no but you are experienced."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1439413989, "post_id": 31975424, "comment_id": 51857647, "body": "@itsnotmyrealname No, you don&#39;t."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1439413997, "post_id": 31975424, "comment_id": 51857650, "body": "@itsnotmyrealname : no you don&#39;t, however, if the memory isn&#39;t reserved already, a call to <code>push_back</code> will allocate a new larger block of memory, copy the vector contents and your new element inside, then release the old memory block (and you don&#39;t want to do that very often for efficiency reasons)"}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439414024, "post_id": 31975424, "comment_id": 51857660, "body": "@Caninonos &quot;no you don&#39;t, however, if the memory isn&#39;t reserved already, a call to push_back will allocate a new larger block a memory&quot; not always true in most implementations."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439414167, "post_id": 31975424, "comment_id": 51857727, "body": "@\u028e\u01dd\u0279\u025f\u025f\u025f\u01dd\u017f I don&#39;t think so, but my sentence might be confusing: <code>push_back</code> may reserve more memory than it really needs (a common practice is to double the reserved memory each time you have to reallocate). Still <code>reserve</code> is useful to manually reserve the good amount of memory if you know it in advance and may either save reallocations, save memory usage, or both."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439414592, "post_id": 31975424, "comment_id": 51857952, "body": "I really can&#39;t understand so why do we need <code>reserve()</code> while there is <code>push_back()</code> and for loop ? @Caninonos @\u028e\u01dd\u0279\u025f\u025f\u025f\u01dd\u017f"}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1439414639, "post_id": 31975424, "comment_id": 51857972, "body": "@itsnotmyrealname That helps you to ensure you will avoid any unnecessary reallocations. The size of the array (i.e. the number of meaningfull objects inside) and the size of the memory block allocated by the array are two different things. Changing the array&#39;s size is quite cheap... unless you request a bigger size than the memory block&#39;s size. If that&#39;s the case, you usually have to reallocate a bigger memory block and perform a costly copy. <code>reserve</code> allows you to tell how much memory you will need beforehand so that calls to <code>push_back</code> or <code>resize</code> never cause a reallocation and copy."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1439415149, "post_id": 31975424, "comment_id": 51858198, "body": "Aha if we <code>reserve()</code> a vector before using <code>push_back()</code> or <code>resize()</code> there will be no copy of the vector ? Did I get right ? @Caninonos"}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1439415228, "post_id": 31975424, "comment_id": 51858242, "body": "@itsnotmyrealname That&#39;s the idea (although it&#39;s more the copy of the contents of the vector, and not the <code>std::vector</code> itself) and only if the size doesn&#39;t grow past the size of the reserved memory (or capacity) of the vector, obviously. (Edit: however, if you&#39;re not really sure whether it&#39;s useful or not, follow jeffrey&#39;s advice and don&#39;t use it)"}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1439415228, "post_id": 31975424, "comment_id": 51858243, "body": "@itsnotmyrealname Something like that. Don&#39;t worry about <code>reserve</code> really."}], "tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1439413660, "creation_date": 1439413660, "answer_id": 31975424, "question_id": 31975336, "link": "https://stackoverflow.com/questions/31975336/vectors-resize-push-back-reserve-methods/31975424#31975424", "title": "vectors resize(), push.back(), reserve() methods", "body": "<blockquote>\n<pre><code>vector&lt;int&gt; a_vector( 10 );\n// equal vector&lt;int&gt; a_vector( 10,0 ); ?\n</code></pre>\n</blockquote>\n\n<p>Yes, it's implicitly <code>vector&lt;int&gt; a_vector(10, int());</code>.</p>\n\n<blockquote>\n<pre><code>cout &lt;&lt; \"value of vector first \" &lt;&lt; a_vector.at(0) &lt;&lt; endl; //LEGAL\n// cout &lt;&lt; a_vector.at(10); // ILLEGAL\n</code></pre>\n</blockquote>\n\n<p>Not illegal, it will just throw an exception.</p>\n\n<blockquote>\n<pre><code>a_vector.resize( 12 );\n// also does it mean a_vector[10] = 0; and a_vector[11] = 0;?\n</code></pre>\n</blockquote>\n\n<p>Yes. The new elements are default constructed.</p>\n\n<blockquote>\n<pre><code>for (int i = 0; i &lt; 2; i++)\n{\n    //doesn't it same as a_vector.resize( 12 ); now ?\n    //so why do we need resize(); ?\n    //also do I need reserve() for using push_back() like this ?\n    a_vector.push_back(0);\n}\n</code></pre>\n</blockquote>\n\n<p>Yes, in this case it's the same. Calling <code>resize</code> is shorter.</p>\n\n<hr>\n\n<p>In conclusion:</p>\n\n<ul>\n<li><code>resize</code> either removes or adds default constructed values in order to make the size of the container that one</li>\n<li><code>reserve</code> has more to do with the <em>capacity</em> of the container, which is the internal size of the dynamically allocated array</li>\n</ul>\n"}], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 1, "closed_date": 1439413986, "accepted_answer_id": 31975424, "answer_count": 1, "score": 0, "last_activity_date": 1439413673, "creation_date": 1439413327, "last_edit_date": 1439413673, "question_id": 31975336, "link": "https://stackoverflow.com/questions/31975336/vectors-resize-push-back-reserve-methods", "closed_reason": "Duplicate", "title": "vectors resize(), push.back(), reserve() methods", "body": "<p>I'm new to using vectors and am a little bit confused using them. I've written some code and I added some question in the comments. In addition to the questions in my comments, why do we need allocation by using <code>reserve()</code>? If we allocate, we will use won't we? If we need to allocate, is <code>resize()</code> more useful than <code>reserve()</code>? I'm really stuck.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n\n    vector&lt;int&gt; a_vector( 10 );\n    // equal vector&lt;int&gt; a_vector( 10,0 ); ?\n    cout &lt;&lt; \"value of vector first \" &lt;&lt; a_vector.at(0) &lt;&lt; endl; //LEGAL\n    // cout &lt;&lt; a_vector.at(10); // ILLEGAL\n    cout &lt;&lt; \"vector size \" &lt;&lt; a_vector.size() &lt;&lt; endl;\n    a_vector.push_back( 100 );\n    cout &lt;&lt; \"value of vector at ten \" &lt;&lt; a_vector.at(10) &lt;&lt; endl; //LEGAL\n    cout &lt;&lt; \"vector size \" &lt;&lt; a_vector.size() &lt;&lt; endl;\n    a_vector.pop_back();\n    cout &lt;&lt; \"vector size \" &lt;&lt; a_vector.size() &lt;&lt; endl;\n\n    a_vector.resize( 12 );\n    // also does it mean a_vector[10] = 0; and a_vector[11] = 0;?\n    cout &lt;&lt; \"vector size \" &lt;&lt; a_vector.size() &lt;&lt; endl;\n    cout &lt;&lt; \"value of vector at ten \" &lt;&lt; a_vector.at(10) &lt;&lt; endl; //LEGAL\n    cout &lt;&lt; \"value eleventh \" &lt;&lt; a_vector.at(11) &lt;&lt; endl; //LEGAL\n    a_vector.pop_back();\n    a_vector.pop_back();\n    cout &lt;&lt; \"vector size \" &lt;&lt; a_vector.size() &lt;&lt; endl;\n    for (int i = 0; i &lt; 2; i++)\n    {\n        //doesn't it same as a_vector.resize( 12 ); now ?\n        //so why do we need resize(); ?\n        //also do I need reserve() for using push_back() like this ?\n        a_vector.push_back(0);\n    }\n    cout &lt;&lt; \"vector size \" &lt;&lt; a_vector.size() &lt;&lt; endl;\n    a_vector.pop_back();\n    a_vector.pop_back();\n    cout &lt;&lt; \"vector size \" &lt;&lt; a_vector.size() &lt;&lt; endl;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "gcc", "parallel-processing", "compiler-optimization"], "comments": [{"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1439413068, "post_id": 31975249, "comment_id": 51857183, "body": "When anything takes 0s you should get suspicious. Your benchmark is invalid."}, {"owner": {"reputation": 135, "user_id": 5220774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b9452a9c7a04a797eecf910d896087?s=128&d=identicon&r=PG&f=1", "display_name": "Erich", "link": "https://stackoverflow.com/users/5220774/erich"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1439413276, "post_id": 31975249, "comment_id": 51857294, "body": "Well, that 0s means something like 10^-5. (I could modify the program to generate it explicitly, but it&#39;s not the point)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1439413451, "post_id": 31975249, "comment_id": 51857388, "body": "In the <code>fS()</code> function you compute a sum that is never used. The optimizer is smart enough to not compute values that are not used."}, {"owner": {"reputation": 135, "user_id": 5220774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b9452a9c7a04a797eecf910d896087?s=128&d=identicon&r=PG&f=1", "display_name": "Erich", "link": "https://stackoverflow.com/users/5220774/erich"}, "edited": false, "score": 0, "creation_date": 1439414244, "post_id": 31975249, "comment_id": 51857768, "body": "rs, well, in the end the 0s was exactly the point."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1439413445, "creation_date": 1439413445, "answer_id": 31975371, "question_id": 31975249, "link": "https://stackoverflow.com/questions/31975249/is-thread-parallel-computing-in-c-incompatible-with-optimization-levels-gcc/31975371#31975371", "title": "Is thread (parallel computing in c++) incompatible with optimization levels (gcc)?", "body": "<p>Your \"no parallel\" function <code>fS()</code> calculates values into local variable which does not go anywhere, where  <code>fs_N()</code> do calculation on it's arguments. So when optimization enabled compiler eliminates all code for <code>fS()</code> as it does not affect anything. You need to store that result somewhere (probably return for that function and maybe print it out later):</p>\n\n<pre><code>double fS(void){\n    double sum;\n    int i;\n    for(i=0;i&lt;N;i++){\n        sum += sin(i*0.1);\n    }\n//  cout &lt;&lt; endl &lt;&lt; sum &lt;&lt; endl;    \n    return sum;\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5220774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b9452a9c7a04a797eecf910d896087?s=128&d=identicon&r=PG&f=1", "display_name": "Erich", "link": "https://stackoverflow.com/users/5220774/erich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 31975371, "answer_count": 1, "score": 3, "last_activity_date": 1439413445, "creation_date": 1439412968, "last_edit_date": 1439413111, "question_id": 31975249, "link": "https://stackoverflow.com/questions/31975249/is-thread-parallel-computing-in-c-incompatible-with-optimization-levels-gcc", "title": "Is thread (parallel computing in c++) incompatible with optimization levels (gcc)?", "body": "<p>I'm trying to learn how to use multithreading and then I made a code (see below). As expected the <strong>parallel</strong> function takes <strong>2.6s</strong> while the <strong>non-parallel</strong> takes <strong>6.4s</strong>.</p>\n\n<p>Then I tried to modify the compilation by use of the optimization -O3 available at gcc. With that the <strong>non-parallel</strong> function took <strong>0s</strong> and the <strong>parallel</strong> one took <strong>2s</strong>! Showing that -O3 didn't act on the parallel function.</p>\n\n<p>Why didn't the optimization level worked with the thread?? Is there some fundamental problem? Did I just make something wrong?</p>\n\n<p>Follows the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;thread&gt;\nusing namespace std;\n\n#define N 1E8\n#define num_sum std::thread::hardware_concurrency()\n\nvoid fS(void){\n    double sum;\n    int i;\n    for(i=0;i&lt;N;i++){\n        sum += sin(i*0.1);\n    }\n//  cout &lt;&lt; endl &lt;&lt; sum &lt;&lt; endl;    \n    return;\n}\n\nvoid fS_N(vector&lt;double&gt;&amp; sum,int j){\n    int i;\n\n    int imin,imax,intervalo;\n        intervalo = N/num_sum;\n        imin = j*intervalo;\n        imax = (j+1)*intervalo;\n\n    for(i=imin;i&lt;imax;i++){\n        sum[j] += sin(i*0.1);\n    }   \n    return;\n}\n\nint main(){\n    clock_t t;\n\n    cout &lt;&lt; \"# disponiveis de nos/cpu: \" &lt;&lt; num_sum &lt;&lt; endl;\n\n    //no parallel\n    t = clock();\n    fS();\n    t = clock()-t;\n    cout &lt;&lt; \"\\n Time (no parallel):\";\n    cout &lt;&lt; ((double)t)/CLOCKS_PER_SEC &lt;&lt; endl;     \n\n    //parallel\n    t = clock();    \n    vector&lt;thread&gt; allsum;\n    vector&lt;double&gt; Svalue(num_sum,0.);\n    int j;\n\n    for(j = 0; j&lt;num_sum; j++){\n        allsum.push_back(thread (fS_N, ref(Svalue),j) );\n    }\n\n    for(auto &amp;t : allsum){\n        t.join();\n    }\n\n    double Soma=0.;\n    for (j=0;j&lt;num_sum;j++){\n        Soma += Svalue[j];\n    }\n//  cout &lt;&lt; Soma &lt;&lt; endl;\n    t = clock()-t;\n    cout &lt;&lt; \"\\n Time (parallel):\";\n    cout &lt;&lt; ((double)t)/CLOCKS_PER_SEC &lt;&lt; endl;     \n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "lua"], "comments": [{"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 1, "creation_date": 1439413562, "post_id": 31975206, "comment_id": 51857456, "body": "How is it the C++ program sees the stack with the &#39;loadString&#39; or indeed any other function that your lua script has called?  Those stack entries should be popped before control returns to C++."}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 4622917, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0c16db7e8178c30e9237415048b35223?s=128&d=identicon&r=PG&f=1", "display_name": "bboy3577", "link": "https://stackoverflow.com/users/4622917/bboy3577"}, "is_accepted": true, "score": 2, "last_activity_date": 1439415939, "last_edit_date": 1439415939, "creation_date": 1439414888, "answer_id": 31975730, "question_id": 31975206, "link": "https://stackoverflow.com/questions/31975206/how-to-access-lua-stack-from-lua/31975730#31975730", "title": "How to access lua stack, from lua", "body": "<p>Apparently the problem was me being silly all along. I changed my code so that it detects the error then prints it, instead of using <code>assert</code></p>\n\n<p>Examples for script.lua:</p>\n\n<p>This doesn't work correctly:</p>\n\n<pre><code>local input = io.read()\n\nassert(loadstring(input))()\n</code></pre>\n\n<p>This does work correctly:</p>\n\n<pre><code>local input = io.read()\n\noutput, error = loadstring(input)\nif (output == nil) then\n    print (error)\nelse\n    output()\nend\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 4622917, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0c16db7e8178c30e9237415048b35223?s=128&d=identicon&r=PG&f=1", "display_name": "bboy3577", "link": "https://stackoverflow.com/users/4622917/bboy3577"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 31975730, "answer_count": 1, "score": 2, "last_activity_date": 1439415939, "creation_date": 1439412831, "question_id": 31975206, "link": "https://stackoverflow.com/questions/31975206/how-to-access-lua-stack-from-lua", "title": "How to access lua stack, from lua", "body": "<p>I have a simple program which runs <code>luaL_dofile</code> on a lua file (lets call it 'script.lua', then checks for errors, then runs the file again, and so on and so forth. If at any point the program finds an error, it writes it in a log then terminates. The problem is, script.lua gets a user's input, then runs that string with <code>loadstring</code>. What I don't want to happen (and what does happen) is for <code>loadstring</code> to create an error (because the user inputted incorrect code), then the C++ program finds this error and terminates the program. In my mind, the best way to prevent the C++ program finding the error is by removing it from the stack, but I don't know how to access the lua stack from script.lua.</p>\n"}, {"tags": ["c++", "class", "pointers", "member-function-pointers"], "comments": [{"owner": {"reputation": 399, "user_id": 4889312, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a3fee35905597f15f58493d5c22d6ba?s=128&d=identicon&r=PG", "display_name": "Matt Olson", "link": "https://stackoverflow.com/users/4889312/matt-olson"}, "edited": false, "score": 0, "creation_date": 1439412798, "post_id": 31975186, "comment_id": 51857020, "body": "Why are you declaring <code>itsAge</code> and <code>itsWeight</code> as pointers?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1439412869, "post_id": 31975186, "comment_id": 51857068, "body": "I suggest dropping the classes and member functions and learn how pointers work first."}], "answers": [{"comments": [{"owner": {"reputation": 1857, "user_id": 4272816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a95225fd974d2eb471fa95fadd73902e?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4272816/jason"}, "edited": false, "score": 0, "creation_date": 1439414168, "post_id": 31975242, "comment_id": 51857729, "body": "Oh okay. Ya I know in general pointers as member variables aren&#39;t necessary. I was just curious as to why my program was crashing. Thanks for the insight !"}, {"owner": {"reputation": 1857, "user_id": 4272816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a95225fd974d2eb471fa95fadd73902e?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4272816/jason"}, "edited": false, "score": 0, "creation_date": 1439414429, "post_id": 31975242, "comment_id": 51857874, "body": "Oh and quick question. Is it leading to undefined behavior because the compiler reads *itsAge first, before assigning the value of age to it? Just curious as to the oder of operations the compiler goes through in order to accomplish an assignment operation."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 1857, "user_id": 4272816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a95225fd974d2eb471fa95fadd73902e?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4272816/jason"}, "edited": false, "score": 1, "creation_date": 1439415201, "post_id": 31975242, "comment_id": 51858228, "body": "@Jason In <code>int *itsAge = 0;</code> you are initializing a <i>pointer</i> to the address <code>0</code>, which is usually reserved. Which means that when you do <code>*itsAge</code> you are telling your program to go look at the memory block at address <code>0</code> which triggers to OS error."}, {"owner": {"reputation": 1857, "user_id": 4272816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a95225fd974d2eb471fa95fadd73902e?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4272816/jason"}, "edited": false, "score": 0, "creation_date": 1439424177, "post_id": 31975242, "comment_id": 51860963, "body": "Ooooh okay, Never realized 0 was representing an address. Thank you very much!"}], "tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": true, "score": 4, "last_activity_date": 1439412932, "creation_date": 1439412932, "answer_id": 31975242, "question_id": 31975186, "link": "https://stackoverflow.com/questions/31975186/passing-a-number-into-member-function-causes-program-crash/31975242#31975242", "title": "Passing a number into member function causes program crash", "body": "<p>Rewrite your program as:</p>\n\n<pre><code>struct Animal {\n    int age = 0;\n    int weight = 0;\n};\n\nint main() {\n    Animal lion;\n    lion.age = 3;\n    std::cout &lt;&lt; lion.age;\n    return 0;\n};\n</code></pre>\n\n<p>No need for pointers. FYI your program is crashing because you are initializing those pointers to <code>0</code> and then derefencing them with <code>*</code>, which is Undefined Bevahiour.</p>\n"}], "owner": {"reputation": 1857, "user_id": 4272816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a95225fd974d2eb471fa95fadd73902e?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4272816/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 31975242, "answer_count": 1, "score": 0, "last_activity_date": 1439412932, "creation_date": 1439412759, "question_id": 31975186, "link": "https://stackoverflow.com/questions/31975186/passing-a-number-into-member-function-causes-program-crash", "title": "Passing a number into member function causes program crash", "body": "<p>I just started learning about pointers and how they can work as member functions. I started playing around a bit and eventually wrote this small bit of code: </p>\n\n<pre><code>class Animal\n{\nprivate:\n    int *itsAge = 0;\n    int *itsWeight = 0;\n\npublic:\n    void SetAge(int age) { *itsAge = age; };\n    int GetAge() { return *itsAge; };\n};\n\n\n\nint main() {\n\n    Animal Lion;\n    Lion.SetAge(3);\n    cout &lt;&lt; Lion.GetAge();\n\n    return 0;\n\n};\n</code></pre>\n\n<p>my question is why is my program crashing when I run it? In my mind I'm passing in the number 3 by value to the SetAge() function. Then, the copy of value 3 is stored in age which is then assigned to the value of the pointer itsAge. Is it because itsAge was never assigned an address? If so, does that mean initializing itsAge to 0, doesn't really prepare the pointer to be used? </p>\n"}, {"tags": ["c++", "arrays", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1439412189, "post_id": 31974978, "comment_id": 51856679, "body": "That&#39;s not a 2D array.  It&#39;s a single pointer to a single pointer to a single string.  Your crashing code is invoking undefined behavior, and your working code is invoking undefined behavior."}, {"owner": {"reputation": 955, "user_id": 2709069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c599e15309886c15a6f5531780e9428b?s=128&d=identicon&r=PG&f=1", "display_name": "Verim", "link": "https://stackoverflow.com/users/2709069/verim"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1439413914, "post_id": 31974978, "comment_id": 51857620, "body": "An array is the same as an pointer, isn&#39;t it? How should the line correct look?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1439414298, "post_id": 31974978, "comment_id": 51857797, "body": "An array is <b>a collection of things</b>.  A pointer is <b>the location of a thing</b>.  Whoever told you they were the same was trying to fool you.  Try <code>std::string bar[3][3];</code>"}], "owner": {"reputation": 955, "user_id": 2709069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c599e15309886c15a6f5531780e9428b?s=128&d=identicon&r=PG&f=1", "display_name": "Verim", "link": "https://stackoverflow.com/users/2709069/verim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1439429926, "answer_count": 0, "score": 0, "last_activity_date": 1439412780, "creation_date": 1439412049, "last_edit_date": 1439412780, "question_id": 31974978, "link": "https://stackoverflow.com/questions/31974978/shared-ptr-2d-array-crashes-when-accessing-dynamically", "closed_reason": "Duplicate", "title": "Shared_ptr 2d array crashes when accessing dynamically", "body": "<p>I try to use a 2D array of shared_ptr. If I fill it manually all works as expected. But if I use two for loops instead it crashes with an SIGSEV on position 0/0.</p>\n\n<p>I tried boost and std shared_ptr, without any difference.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\nint main(){\n    int x = 3;\n    int y = 3;\n\n    shared_ptr&lt;shared_ptr&lt;string&gt;&gt; bar = shared_ptr&lt;shared_ptr&lt;string&gt;&gt;(new shared_ptr&lt;string&gt;[x]);\n    for(int i=0; i&lt;x; i++)\n        bar.get()[i] = shared_ptr&lt;string&gt;(new string[y]);\n\n    //Crashes: SIGSEGV on 0/0\n//  for(int i=0; i&lt;x; i++)\n//      for(int j=0; j&lt;y; j++)\n//              bar.get()[i].get()[j] = \"x\";\n\n\n    //works\n//  for(int i=0; i&lt;x; i++){\n//      bar.get()[i].get()[i] = \"0\";\n//      bar.get()[i].get()[i] = \"1\";\n//      bar.get()[i].get()[i] = \"2\";\n//  }\n\n    //works\n//  for(int i=0; i&lt;x; i++){\n//      bar.get()[i].get()[0] = \"0\";\n//      bar.get()[i].get()[1] = \"1\";\n//      bar.get()[i].get()[2] = \"2\";\n//  }\n\n    //works\n//  for(int i=0; i&lt;x; i++){\n//      bar.get()[0].get()[i] = \"0\";\n//      bar.get()[1].get()[i] = \"1\";\n//      bar.get()[2].get()[i] = \"2\";\n//  }\n\n    //works\n    bar.get()[0].get()[0] = \"00\";\n    bar.get()[0].get()[1] = \"01\";\n    bar.get()[0].get()[2] = \"02\";\n    bar.get()[1].get()[0] = \"10\";\n    bar.get()[1].get()[1] = \"11\";\n    bar.get()[1].get()[2] = \"12\";\n    bar.get()[2].get()[0] = \"20\";\n    bar.get()[2].get()[1] = \"21\";\n    bar.get()[2].get()[2] = \"22\";\n\n    for(int i=0; i&lt;3; i++){\n        for(int j=0; j&lt;3; j++)\n            printf(\"%s \", bar.get()[i].get()[j].c_str());\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "equality", "equivalence"], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1530790518, "post_id": 31974995, "comment_id": 89362210, "body": "More generally, for each <code>Compare comp</code> you can synthesise an equivalence <code>!comp(a, b) &amp;&amp; !comp(b, a)</code>. There is only one &quot;equality&quot;, but there can be any number of &quot;equivalences&quot;"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 19, "last_activity_date": 1446418605, "last_edit_date": 1446418605, "creation_date": 1439412102, "answer_id": 31974995, "question_id": 31974941, "link": "https://stackoverflow.com/questions/31974941/what-is-the-difference-between-equivalence-and-equality/31974995#31974995", "title": "What is the difference between equivalence and equality?", "body": "<p>On <a href=\"http://en.cppreference.com/w/cpp/language/operator_comparison\" rel=\"noreferrer\">cppreference.com</a> i found the following quote:</p>\n\n<blockquote>\n  <p>For the types that are both EqualityComparable and LessThanComparable, the C++ standard library makes a distinction between equality, which is the value of the expression a == b and equivalence, which is the value of the expression !(a &lt; b) &amp;&amp; !(b &lt; a). </p>\n</blockquote>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3147, "favorite_count": 5, "accepted_answer_id": 31974995, "answer_count": 1, "score": 21, "last_activity_date": 1530785293, "creation_date": 1439411936, "last_edit_date": 1495541846, "question_id": 31974941, "link": "https://stackoverflow.com/questions/31974941/what-is-the-difference-between-equivalence-and-equality", "title": "What is the difference between equivalence and equality?", "body": "<p>What is the difference between equivalence and equality in C++?</p>\n\n<p>There is a very similar question <a href=\"https://stackoverflow.com/questions/311936/what-is-the-difference-between-equality-and-equivalence\">here</a>. However, this question is tagged with <a href=\"/questions/tagged/math\" class=\"post-tag\" title=\"show questions tagged &#39;math&#39;\" rel=\"tag\">math</a>, while I am interested in the meaning in C++ context.</p>\n\n<p>To see the terms in context: Scott Meyers uses them in an example in this <a href=\"https://www.youtube.com/watch?v=5tg1ONG18H8\" rel=\"noreferrer\">video</a>.</p>\n"}, {"tags": ["c++", "linker", "mingw"], "comments": [{"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 1, "creation_date": 1439411742, "post_id": 31974865, "comment_id": 51856425, "body": "What errors are you getting?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1439411846, "post_id": 31974865, "comment_id": 51856491, "body": "Can you show the actual command line being used? Perhaps a partial listing of the directories involved.  Also the <code>-Wl,--verbose</code> option might be helpful - that&#39;ll tell the linker to dump information about how it&#39;s searching for libraries."}, {"owner": {"reputation": 144, "user_id": 2523220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63c633ed31e3e9da4189a244bd2ec10?s=128&d=identicon&r=PG", "display_name": "Horv", "link": "https://stackoverflow.com/users/2523220/horv"}, "edited": false, "score": 0, "creation_date": 1439412710, "post_id": 31974865, "comment_id": 51856966, "body": "I got this: <a href=\"http://pastebin.com/9K4yWAdx\" rel=\"nofollow noreferrer\">on pastebin</a>&#237;"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5221099, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1aab72614277bddb906cd0cf44b20e34?s=128&d=identicon&r=PG", "display_name": "user1234", "link": "https://stackoverflow.com/users/5221099/user1234"}, "is_accepted": true, "score": 2, "last_activity_date": 1439661417, "last_edit_date": 1439661417, "creation_date": 1439414872, "answer_id": 31975726, "question_id": 31974865, "link": "https://stackoverflow.com/questions/31974865/linker-cant-find-static-lib/31975726#31975726", "title": "Linker can&#39;t find static lib", "body": "<p>It would appear that the library is incompatible with the compiler? The message says:</p>\n\n<pre><code>skipping incompatible (library path)\n</code></pre>\n\n<p>This could possibly mean that the library archive is incompatible with the compiler or may be corrupted. I would recommend that you re-download the library/re-install it before taking other actions. Also check to see that the library directory is correct. In some cases, mingw-ld along with other linkers may sometimes fail if the order is incorrect (not alphabetically ordered).</p>\n"}], "owner": {"reputation": 144, "user_id": 2523220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63c633ed31e3e9da4189a244bd2ec10?s=128&d=identicon&r=PG", "display_name": "Horv", "link": "https://stackoverflow.com/users/2523220/horv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 31975726, "answer_count": 1, "score": -2, "last_activity_date": 1439661417, "creation_date": 1439411646, "last_edit_date": 1439413003, "question_id": 31974865, "link": "https://stackoverflow.com/questions/31974865/linker-cant-find-static-lib", "title": "Linker can&#39;t find static lib", "body": "<p>I want to use OpenSSL in my project, but the building fails. The linker can't find the static libs (ssl and crypto). </p>\n\n<p>I'm trying to build with 64-bit version of mingw.</p>\n\n<p>I set the searching directories, and added the -lssl -lcrypto flags too. The path, and the names are correct, but I got the same error with the linker.</p>\n\n<p><a href=\"http://pastebin.com/9K4yWAdx\" rel=\"nofollow\">Build log</a></p>\n\n<p>I'm confused. Can anybody help?</p>\n"}, {"tags": ["c++", "makefile", "cflags"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1439411013, "post_id": 31974621, "comment_id": 51856041, "body": "Please provide a <a href=\"http://www.stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 933307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a21d95af84722ec57116889eabcf087?s=128&d=identicon&r=PG", "display_name": "rs_", "link": "https://stackoverflow.com/users/933307/rs"}, "is_accepted": false, "score": 0, "last_activity_date": 1439414249, "creation_date": 1439414249, "answer_id": 31975581, "question_id": 31974621, "link": "https://stackoverflow.com/questions/31974621/reusing-slightly-altered-makefile-for-slightly-altered-program-gives-error/31975581#31975581", "title": "Reusing Slightly Altered Makefile for Slightly Altered Program Gives Error", "body": "<p>You could try linking against <code>libdl</code> with <code>-ldl</code> added to your second <code>LDLIBS+=</code> line. You may also need to add the path of <code>libdl.so</code> typically <code>/usr/lib/</code> to the first <code>LDLIBS+=</code> line.</p>\n\n<p>I cannot answer why program A compiles with the 'same' makefile while program B fails without looking at the programs or the makefiles though.</p>\n"}], "owner": {"reputation": 467, "user_id": 4789356, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/bzHKV.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4789356/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439414249, "creation_date": 1439410748, "last_edit_date": 1439411452, "question_id": 31974621, "link": "https://stackoverflow.com/questions/31974621/reusing-slightly-altered-makefile-for-slightly-altered-program-gives-error", "title": "Reusing Slightly Altered Makefile for Slightly Altered Program Gives Error", "body": "<p>I made a copy of a makefile that worked for program A for a new program called program B. To keep things simple program B has all of the same include directives as program A. The only changes made to the new makefile are the obvious changes to the list of object files and the name of the created executable. I can also be sure that the compilation error is not caused by anything in main() or any of the functions of program B. Yet somehow I have an error when I use the make command that goes:</p>\n\n<pre><code>/usr/local/triclops/lib/libtriclops.a(triclops.o): In function `triclopsGetDynamicLibPath':\ntriclops.cpp:(.text+0x198): undefined reference to `dladdr'\n</code></pre>\n\n<p>In my makeflie I have the following relevant lines:</p>\n\n<pre><code>CPPFLAGS+=-I/usr/local/triclops/include\n\nLDLIBS+=-L/usr/local/triclops/lib\n\nLDLIBS+=-lpgrlibdcstereo -ltriclops -lpnmutils\n</code></pre>\n\n<p>I appreciate you help, so thanks in advance. I do not know a lot about makeflies, so I am just trying to reuse the code effectively.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Both program A and program B have the same include directives</p>\n\n<pre><code>#include \"stereoCamera.h\"\n#include \"Aria.h\"\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;cv.h&gt;\n#include &lt;highgui.h&gt;\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n</code></pre>\n\n<p>Program B can be thought of essentially as this plus an empty int main(){ return0;} while program A does contain much code and has been working for quite some time now.</p>\n"}, {"tags": ["c++", "xcode", "macos", "opencv", "installation"], "answers": [{"tags": [], "owner": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": true, "score": 1, "last_activity_date": 1439412227, "creation_date": 1439412227, "answer_id": 31975030, "question_id": 31974355, "link": "https://stackoverflow.com/questions/31974355/where-are-my-dylib-files-on-mac-os-x/31975030#31975030", "title": "Where are my .dylib files on Mac OS X?", "body": "<p>If you're following <a href=\"http://tilomitra.com/opencv-on-mac-osx/\" rel=\"nofollow\">this</a> then you're building the dylibs yourself, and they should be wherever the earlier <code>make install</code> step puts them. Copies of them should also be somewhere in the directory where you built OpenCV, so you could just link to them there.</p>\n"}], "owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4348, "favorite_count": 0, "accepted_answer_id": 31975030, "answer_count": 1, "score": 0, "last_activity_date": 1439412227, "creation_date": 1439409795, "last_edit_date": 1439411872, "question_id": 31974355, "link": "https://stackoverflow.com/questions/31974355/where-are-my-dylib-files-on-mac-os-x", "title": "Where are my .dylib files on Mac OS X?", "body": "<p>I'm walking through this tutorial on setting up OpenCV on a Mac OS X. I came to step(5), where I had to add the <code>.dylib</code> files. The author mentioned to look in <code>/usr/local/lib</code>, but couldn't find such files. </p>\n\n<p>Where can I find them on the Mac machine?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "vector", "c++-standard-library", "libc++", "std-bitset"], "answers": [{"comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1439446077, "post_id": 31974238, "comment_id": 51866783, "body": "Question: could/would the recent <a href=\"https://ericniebler.github.io/std/wg21/D0022.html\" rel=\"nofollow noreferrer\">draft proposal</a> on proxy iterators by @EricNiebler somehow legitimize the libc++ extensions and put <code>vector&lt;bool&gt;</code> on a more first-class footing?"}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1439446445, "post_id": 31974238, "comment_id": 51866935, "body": "Remark: I&#39;d prefer to have a <code>vector_bool&lt;Alloc&gt;</code> and an <code>array_bool&lt;N&gt;</code> to represent packed versions (including random-access proxy iterators iterating all bits) of <code>vector&lt;bool, Alloc&gt;</code> and <code>array&lt;bool, N&gt;</code>. However, <code>bitset&lt;N&gt;</code> (and it&#39;s cousin <code>boost::dynamic_bitset&lt;Alloc&gt;</code>) represent a different abstraction: namely packed versions of <code>std::set&lt;int&gt;</code>. So I&#39;d like to have, say, <code>bit_array&lt;N&gt;</code> and <code>bit_vector&lt;Alloc&gt;</code> to be the successors to the bitset franchise, with appropriate <i>bidirectional</i> iterators (iterating over the 1-bits, rather than over all bits). What are your thoughts on this?"}, {"owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "edited": false, "score": 5, "creation_date": 1439492274, "post_id": 31974238, "comment_id": 51896572, "body": "My draft proposal on proxy iterators would make <code>vector&lt;bool&gt;</code> a std-conforming random-access container. It wouldn&#39;t make <code>vector&lt;bool&gt;</code> a good idea. :-) I agree with Howard. It should have been called something else."}, {"owner": {"reputation": 6527, "user_id": 1422197, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bcbddbd9c7b31aaff8cf25a356bc96c?s=128&d=identicon&r=PG", "display_name": "gnzlbg", "link": "https://stackoverflow.com/users/1422197/gnzlbg"}, "edited": false, "score": 1, "creation_date": 1439544789, "post_id": 31974238, "comment_id": 51916109, "body": "Why isn&#39;t there a way to opt out of libc++ extensions and get strictly conforming behavior? (I&#39;m not even asking for making conformance the default, just a way to disable libc++&#39;s extensions to be able to write portable code). As you know I was bitten by libc++ tuple extensions in the past, and recently bitten by the bitset::const_reference extension."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 6527, "user_id": 1422197, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bcbddbd9c7b31aaff8cf25a356bc96c?s=128&d=identicon&r=PG", "display_name": "gnzlbg", "link": "https://stackoverflow.com/users/1422197/gnzlbg"}, "edited": false, "score": 5, "creation_date": 1439559099, "post_id": 31974238, "comment_id": 51924926, "body": "@gnzlbg:  A finite amount of economic and temporal resources were available for the initial development of libc++.  Subsequently the implementation was doomed to not make every single user happy.  Given available resources, engineering tradeoffs were made in an attempt to maximize the number of happy users, maximize benefit to the overall C++ community.  Sorry about your experience.  I note that the tuple extensions that you ran afoul of are now in the current C++1z working paper.  On that issue, you unknowingly sacrificed so that many could benefit, and those many owe you a debt of gratitude."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 100, "last_activity_date": 1439432931, "last_edit_date": 1439432931, "creation_date": 1439409307, "answer_id": 31974238, "question_id": 31974237, "link": "https://stackoverflow.com/questions/31974237/why-is-libcs-vectorboolconst-reference-not-bool/31974238#31974238", "title": "Why is libc++&#39;s vector&lt;bool&gt;::const_reference not bool?", "body": "<p>The motivation for this extension, which is detectable by a conforming program, and thus non-conforming, is to make <code>vector&lt;bool&gt;</code> behave more like <code>vector&lt;char&gt;</code> with respect to references (const and otherwise).</p>\n\n<p><strong>Introduction</strong></p>\n\n<p>Since 1998, <code>vector&lt;bool&gt;</code> has been derided as \"not quite a container.\"  <a href=\"http://cplusplus.github.io/LWG/lwg-closed.html#96\" rel=\"noreferrer\">LWG 96</a>, one of the very first LWG issues, launched the debate.  Today, 17 years later, <code>vector&lt;bool&gt;</code> remains largely unchanged.</p>\n\n<p><a href=\"http://howardhinnant.github.io/onvectorbool.html\" rel=\"noreferrer\">This paper</a> goes into some specific examples on how the behavior of <code>vector&lt;bool&gt;</code> differs from every other instantiation of <code>vector</code>, thus hurting generic code.  However the same paper discusses at length the very nice performance properties <code>vector&lt;bool&gt;</code> can have if properly implemented.</p>\n\n<p><em>Summary</em>:  <code>vector&lt;bool&gt;</code> isn't a bad container. It is actually quite useful.  It just has a bad name.</p>\n\n<p><strong>Back to <code>const_reference</code></strong></p>\n\n<p>As introduced above, and <a href=\"http://howardhinnant.github.io/onvectorbool.html\" rel=\"noreferrer\">detailed here</a>, what is bad about <code>vector&lt;bool&gt;</code> is that it behaves differently in generic code than other <code>vector</code> instantiations.  Here is a concrete example:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;class T&gt;\nvoid\ntest(std::vector&lt;T&gt;&amp; v)\n{\n    using const_ref = typename std::vector&lt;T&gt;::const_reference;\n    const std::vector&lt;T&gt;&amp; cv = v;\n    const_ref cr = cv[0];\n    assert(cr == cv[0]);\n    v[0] = 1;\n    assert(true == cv[0]);\n    assert(cr == cv[0]);  // Fires!\n}\n\nint\nmain()\n{\n    std::vector&lt;char&gt; vc(1);\n    test(vc);\n    std::vector&lt;bool&gt; vb(1);\n    test(vb);\n}\n</code></pre>\n\n<p>The standard specification says that the assert marked <code>// Fires!</code> will trigger, but only when <code>test</code> is run with a <code>vector&lt;bool&gt;</code>.  When run with a <code>vector&lt;char&gt;</code> (or any <code>vector</code> besides <code>bool</code> when an appropriate non-default <code>T</code> is assigned), the test passes.</p>\n\n<p>The libc++ implementation sought to minimize the negative effects of having <code>vector&lt;bool&gt;</code> behave differently in generic code.  One thing it did to achieve this is to make  <code>vector&lt;T&gt;::const_reference</code> a <em>proxy-reference</em>, just like the specified <code>vector&lt;T&gt;::reference</code>, except that you can't assign through it.  That is, on libc++, <code>vector&lt;T&gt;::const_reference</code> is essentially a pointer to the bit inside the <code>vector</code>, instead of a copy of that bit.</p>\n\n<p>On libc++ the above <code>test</code> passes for both <code>vector&lt;char&gt;</code> and <code>vector&lt;bool&gt;</code>.</p>\n\n<p><strong>At what cost?</strong></p>\n\n<p>The downside is that this extension is detectible, as shown in the question.  However, very few programs actually care about the exact type of this alias, and more programs care about the behavior.</p>\n\n<blockquote>\n  <p>What is the motivation for this non-conformance?</p>\n</blockquote>\n\n<p>To give the libc++ client better behavior in generic code, and perhaps after sufficient field testing, propose this extension to a future C++ standard for the betterment of the entire C++ industry.</p>\n\n<p>Such a proposal might come in the form of a new container (e.g. <code>bit_vector</code>) that has much the same API as today's <code>vector&lt;bool&gt;</code>, but with a few upgrades such as the <code>const_reference</code> discussed here.  Followed by deprecation (and eventual removal) of the <code>vector&lt;bool&gt;</code> specialization.  <code>bitset</code> could also use a little upgrading in this department, e.g. add <code>const_reference</code>, and a set of iterators.</p>\n\n<p>That is, in hindsight <code>bitset</code> is to <code>vector&lt;bool&gt;</code> (which should be renamed to <code>bit_vector</code> -- or whatever), as <code>array</code> is to <code>vector</code>.  And the analogy ought to hold true whether or not we are talking about <code>bool</code> as the <code>value_type</code> of <code>vector</code> and <code>array</code>.</p>\n\n<p>There are multiple examples of C++11 and C++14 features that started out as extensions in libc++.  This is how standards evolve.  Actual <em>demonstrated</em> <strong>positive</strong> field experience carries strong influence.  The standards folk are a conservative bunch when it comes to changing existing specifications (as they should be).  Guessing, even when you are sure you are guessing correctly, is a risky strategy for evolving an internationally recognized standard.</p>\n"}], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4962, "favorite_count": 10, "accepted_answer_id": 31974238, "answer_count": 1, "score": 93, "last_activity_date": 1439559389, "creation_date": 1439409307, "last_edit_date": 1439559389, "question_id": 31974237, "link": "https://stackoverflow.com/questions/31974237/why-is-libcs-vectorboolconst-reference-not-bool", "title": "Why is libc++&#39;s vector&lt;bool&gt;::const_reference not bool?", "body": "<p>Section 23.3.7 Class <code>vector&lt;bool&gt;</code> [vector.bool], paragraph 1 states:</p>\n\n<pre><code>template &lt;class Allocator&gt; class vector&lt;bool, Allocator&gt; {\npublic:\n    // types:\n    typedef bool              const_reference;\n    ...\n</code></pre>\n\n<p>However this program fails to compile when using libc++:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;type_traits&gt;\n\nint\nmain()\n{\n    static_assert(std::is_same&lt;std::vector&lt;bool&gt;::const_reference, bool&gt;{}, \"?\");\n}\n</code></pre>\n\n<p>Furthermore I note that the C++ standard has been consistent in this specification all the way back to C++98.  And I further note that libc++ has consistently not followed this specification since the first introduction of libc++.</p>\n\n<p>What is the motivation for this non-conformance?</p>\n"}, {"tags": ["c++", "parent"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1439408716, "post_id": 31974008, "comment_id": 51854887, "body": "I have no idea what problem you are trying to solve.  Can you please edit your question to explain what you are doing and what difficulties you have?"}, {"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 0, "creation_date": 1439408824, "post_id": 31974008, "comment_id": 51854938, "body": "What is this <code>Child1,2,3,4</code> syntax? Can <code>,</code> be part of C++ identifiers now?"}, {"owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1439408898, "post_id": 31974008, "comment_id": 51854991, "body": "instead of writing the full thing, i&#39;m using shortcuts... No it&#39;s not part of C++"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1439409163, "post_id": 31974008, "comment_id": 51855140, "body": "If your parent class is aware of its children classes, you most likely have a design problem."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1439409564, "post_id": 31974008, "comment_id": 51855349, "body": "Did you hear about the Template Function pattern already?"}, {"owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "edited": false, "score": 0, "creation_date": 1439409579, "post_id": 31974008, "comment_id": 51855358, "body": "You clearly noticed that you can&#39;t call the member functions <code>Child1::start()</code> etc without applying them to an object. The fonctions are said <i>non-static</i>. Use the keyword <code>static</code> in their declaration if you don&#39;t want them to be bound to an object."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439409741, "post_id": 31974008, "comment_id": 51855431, "body": "Aw, closed on me. What you probably need is a Mixin, &#224; la <code>template &lt;class... Children&gt; struct Algorithm : Children... {};</code>"}, {"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 0, "creation_date": 1439409759, "post_id": 31974008, "comment_id": 51855440, "body": "Just don&#39;t do that. If you ask for help, the least you can do is to clearly write a Simple, Self-Contained Example that works, and not add your &quot;clever&quot; shortcuts to the mess that you need to solve."}, {"owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1439409998, "post_id": 31974008, "comment_id": 51855559, "body": "I figured it was easy to understand. I wrote it now."}], "answers": [{"comments": [{"owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1439409227, "post_id": 31974167, "comment_id": 51855173, "body": "You said &quot;generally&quot; but can it be done in some way?"}, {"owner": {"reputation": 7936, "user_id": 14092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/989d2ed50d09a5c071c52ea4423ccc70?s=128&d=identicon&r=PG", "display_name": "tloach", "link": "https://stackoverflow.com/users/14092/tloach"}, "reply_to_user": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1439409258, "post_id": 31974167, "comment_id": 51855188, "body": "A child class can not be smaller in memory size than a parent, since it must contain everything in the parent. If a child adds a member variable then the child will be larger. When you create the class as the parent it only reserves enough space for that type of class, and if the child tries to access something that isn&#39;t in the parent it would be reading past the end of the reserved memory space, which can cause a crash."}, {"owner": {"reputation": 7936, "user_id": 14092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/989d2ed50d09a5c071c52ea4423ccc70?s=128&d=identicon&r=PG", "display_name": "tloach", "link": "https://stackoverflow.com/users/14092/tloach"}, "reply_to_user": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1439409324, "post_id": 31974167, "comment_id": 51855225, "body": "You could use reinterpret_cast on the this pointer to call the member functions of a different class. I can pretty much 100% guarantee that you don&#39;t want to. You need more information in your question for people to know how it would be best to restructure your code to make this work."}, {"owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1439409875, "post_id": 31974167, "comment_id": 51855487, "body": "I&#39;m a newbie, that&#39;s just what I&#39;ve been told to do and I&#39;m trying to figure it out"}], "tags": [], "owner": {"reputation": 7936, "user_id": 14092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/989d2ed50d09a5c071c52ea4423ccc70?s=128&d=identicon&r=PG", "display_name": "tloach", "link": "https://stackoverflow.com/users/14092/tloach"}, "is_accepted": false, "score": 0, "last_activity_date": 1439409053, "creation_date": 1439409053, "answer_id": 31974167, "question_id": 31974008, "link": "https://stackoverflow.com/questions/31974008/use-child-method-from-the-parent-class-c/31974167#31974167", "title": "Use child method from the parent class c++", "body": "<p>A parent can not call child methods, generally. In this case you've created the class as the parent type, so it would be pretty dangerous to call something in a child since a child may assume member methods or variables exist that aren't in the parent.</p>\n"}, {"comments": [{"owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1439410850, "post_id": 31974623, "comment_id": 51855935, "body": "Thank you sir! This is great!"}], "tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": true, "score": 3, "last_activity_date": 1439411941, "last_edit_date": 1592644375, "creation_date": 1439410754, "answer_id": 31974623, "question_id": 31974008, "link": "https://stackoverflow.com/questions/31974008/use-child-method-from-the-parent-class-c/31974623#31974623", "title": "Use child method from the parent class c++", "body": "<h1>Take a look at the &quot;Gang of Four&quot; <em>composite</em> pattern:</h1>\n<p>The Child classes should not be derived from the Parent class.\nInstead, Child and Parent classes should implement the same Interface,\nlet's call it <code>IAlgorithm</code>.\nThis Interface should have a pure <code>virtual</code> method <code>start()</code>...</p>\n<p>Here is an example (using C++11 <code>auto</code> and Range-based for loop):</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n/* parents and children implement this interface*/\nclass IAlgorithm {\npublic:\n   virtual int start() = 0;\n};\n\nclass Parent : public IAlgorithm {\nprivate:\n    std::vector&lt;IAlgorithm*&gt; children;\n    \npublic:\n    void addChild(IAlgorithm* child) {\n        children.push_back(child);\n    }\n\n    int start() {\n        std::cout &lt;&lt; &quot;parent&quot; &lt;&lt; std::endl;\n        for (auto child: children)\n            child-&gt;start();\n        return 0;\n    }\n};\n\nclass Child1 : public IAlgorithm {\npublic:\n    int start() {\n        std::cout &lt;&lt; &quot;child 1&quot; &lt;&lt; std::endl;\n        return 1;\n    }\n};\n\nclass Child2 : public IAlgorithm {\npublic:\n    int start() {\n        std::cout &lt;&lt; &quot;child 2&quot; &lt;&lt; std::endl;\n        return 2;\n    }\n};\n\nclass Child3 : public IAlgorithm {\npublic:\n    int start() {\n        std::cout &lt;&lt; &quot;child 3&quot; &lt;&lt; std::endl;\n        return 3;\n    }\n};\n\nint main()\n{\n   Parent parent;\n   Child1 child_1;\n   Child2 child_2;\n   Child3 child_3;\n   \n   parent.addChild(&amp;child_1);\n   parent.addChild(&amp;child_2);\n   parent.addChild(&amp;child_3);\n   \n   parent.start();\n   \n   return 0;\n}\n</code></pre>\n<p>The output:</p>\n<pre><code>parent\nchild1\nchild2\nchild3\n</code></pre>\n"}], "owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "accepted_answer_id": 31974623, "answer_count": 2, "score": 2, "last_activity_date": 1439420853, "creation_date": 1439408504, "last_edit_date": 1439410297, "question_id": 31974008, "link": "https://stackoverflow.com/questions/31974008/use-child-method-from-the-parent-class-c", "title": "Use child method from the parent class c++", "body": "<p>Here's the deal. Imagine your as follows bellow.\nAfter loading the files to the algorithm layer I want to be \nable to apply the 4 different algorithms. So the Algorithm class  has 4 children and I want to do something like this: </p>\n\n<pre><code>int main(int argc, char* argv[]) {\n    Data *data = new Data();\n    Parent *alg = new Parent(data);\n\n    alg-&gt;start();\n\n    //and this will call the start methods defined in each child. \n}\n</code></pre>\n\n<p>The children are like this: </p>\n\n<pre><code>class Child1: public Parent {\npublic:\n   int start();\n}\n\nclass Child2: public Parent {\npublic:\n   int start();\n}\n//etc...\n</code></pre>\n\n<p>And what I do in the Parents start() method is this:</p>\n\n<pre><code>int Parent::start() {\n    Child1::start();\n    Child2::start();\n    //etc....\n    return 0;\n}\n</code></pre>\n\n<p>But I'm getting a 'cannot call member function 'Child1::start()', etc.. without object.'\nCan this thing be done somehow? Calling a child method from the parent class?</p>\n"}, {"tags": ["c++", "mfc", "gdi"], "answers": [{"comments": [{"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1439834387, "post_id": 31974278, "comment_id": 52012452, "body": "What is said on  <a href=\"https://books.google.pt/books?id=lt9660Apj8EC&amp;pg=PA180&amp;lpg=PA180&amp;dq=settextcolor+drawtext&amp;source=bl&amp;ots=F2IA8HYqms&amp;sig=f4fFx_ttk_ZFzZ6Y3f6QlkvKOdQ&amp;hl=en&amp;sa=X&amp;redir_esc=y#v=onepage&amp;q=settextcolor%20drawtext&amp;f=false\" rel=\"nofollow noreferrer\">books.google.pt/&hellip;</a>  confirms the answer."}], "tags": [], "owner": {"reputation": 160, "user_id": 5152532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pWvphkeWgvU/AAAAAAAAAAI/AAAAAAAAAKQ/tEBjADNCv7g/photo.jpg?sz=128", "display_name": "Montes", "link": "https://stackoverflow.com/users/5152532/montes"}, "is_accepted": false, "score": 1, "last_activity_date": 1439409513, "creation_date": 1439409513, "answer_id": 31974278, "question_id": 31973993, "link": "https://stackoverflow.com/questions/31973993/onpaint-font-color/31974278#31974278", "title": "OnPaint font color", "body": "<p>I used the </p>\n\n<pre><code>SetTextColor(dc,RGB(100,0,0)); \n</code></pre>\n\n<p>before the </p>\n\n<pre><code>dc.DrawText(...);\n</code></pre>\n\n<p>and works fine</p>\n"}], "owner": {"reputation": 160, "user_id": 5152532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pWvphkeWgvU/AAAAAAAAAAI/AAAAAAAAAKQ/tEBjADNCv7g/photo.jpg?sz=128", "display_name": "Montes", "link": "https://stackoverflow.com/users/5152532/montes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1439470784, "creation_date": 1439408425, "last_edit_date": 1439470784, "question_id": 31973993, "link": "https://stackoverflow.com/questions/31973993/onpaint-font-color", "title": "OnPaint font color", "body": "<p>I'm using the OnPaint method for some drawing issues. At this point, I added to the OnPaint method the following code:</p>\n\n<pre><code>CPaintDC dc(this); // device context for painting\ndc.SetDCBrushColor(RGB(100,0,0));\ndc.SetDCPenColor(RGB(100,0,0));\ndc.DrawText(\"My text\", CRect(0,0,200,200), DT_SINGLELINE | DT_TOP | DT_CENTER);\nCDialogEx::OnPaint();\n</code></pre>\n\n<p>But what I have is a black \"My text\" instead of a red one. </p>\n\n<p>How can I effective change the color of that text ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "variables", "integer", "output", "text-based"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1439408631, "post_id": 31973978, "comment_id": 51854845, "body": "The <code>universal</code> variable in that function gets destroyed after this function runs. Since you&#39;re not showing how you&#39;re getting it out of there, we can&#39;t guess exactly what you&#39;re doing wrong - possibly just manipulating a completely unrelated variable in the code &quot;outside&quot;."}, {"owner": {"reputation": 4032, "user_id": 975741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e07f41c11cd1d02830ccade93b35145c?s=128&d=identicon&r=PG&f=1", "display_name": "trooper", "link": "https://stackoverflow.com/users/975741/trooper"}, "edited": false, "score": 0, "creation_date": 1439408896, "post_id": 31973978, "comment_id": 51854988, "body": "It sounds like you are trying to use <code>universal</code> after it has gone out of scope (which is why you are seeing values like -858993460). You are creating it on the stack and so its scope is local to that function."}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 0, "creation_date": 1439410227, "post_id": 31974155, "comment_id": 51855653, "body": "I just took it out, probably a little more in-depth than he needs! Also since it&#39;s a text based program I&#39;d be willing to guess it&#39;s probably not <i>that</i> heavy."}], "tags": [], "owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "is_accepted": false, "score": 1, "last_activity_date": 1439410050, "last_edit_date": 1439410050, "creation_date": 1439408996, "answer_id": 31974155, "question_id": 31973978, "link": "https://stackoverflow.com/questions/31973978/why-are-my-variables-giving-a-different-value-when-they-are-printed-outside-of-t/31974155#31974155", "title": "Why are my variables giving a different value when they are printed outside of the class I set them in?", "body": "<p>Short answer: you're declaring a <code>Universal</code> object in your <code>CharacterCreation()</code> method. When this function exits since the <strong>scope</strong> of the <code>universal</code> variable was local so the entire object is destroyed. </p>\n\n<p>Whatever you are outputting is just uninitialized <strong>garbage</strong>. It could really be any number depending on what system is compiling / running the program. To test this right after you input the gender, while still inside the function, try running </p>\n\n<p><code>std::cout &lt;&lt; universal.gender &lt;&lt; std::endl;</code></p>\n\n<p>This should output just fine.</p>\n\n<p>There are a lot of ways you can go about fixing this. Since you didn't post where you call this method or your <code>Universal</code> class I can't say for sure. But I can speculate one such solution which is to declare the <code>Universal</code> object outside the method and then pass it in as a parameter:</p>\n\n<pre><code>Universal universal = Universal();\nIntroduction::CharacterCreation(universal);\nstd::cout &lt;&lt; universal.gender &lt;&lt; std::endl;\n</code></pre>\n\n<p>And just declare your function header to accept a <code>Universal</code> object:</p>\n\n<pre><code>void Introduction::CharacterCreation(Universal &amp; universal)\n{\n//code here\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4674340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J78xXFuctnY/AAAAAAAAAAI/AAAAAAAAAWY/c-HBxfo12TY/photo.jpg?sz=128", "display_name": "Richard Horton", "link": "https://stackoverflow.com/users/4674340/richard-horton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439410050, "creation_date": 1439408371, "question_id": 31973978, "link": "https://stackoverflow.com/questions/31973978/why-are-my-variables-giving-a-different-value-when-they-are-printed-outside-of-t", "title": "Why are my variables giving a different value when they are printed outside of the class I set them in?", "body": "<p>I am making fairly new to C++ and I am using it to make a text based game for a school project. However during the first section of the game the player answers questions by entering the number shown beside the answer they choose. However when I tested the variables the input going to using <strong>std::cout</strong> they return different values depending on where they are outputted. If I outputted them in the class I am using to set them (<strong>Introduction</strong>) the they return the correct value such as 1 or 3 etc. However when I output them in any file other than <strong>Introduction.cpp</strong>, the value displayed is -858993460 for all of the values. I get the same result from <strong>Main.cpp</strong> when I call them in my <strong>main</strong> function and if I call them from another function in a different class to <strong>Introduction</strong>.</p>\n\n<p>This is an example of some of the code used to get input from the user:</p>\n\n<pre><code>void Introduction::CharacterCreation()\n{\n    Universal universal;\n\n    std::fstream creation(\"Introduction_CharacterCreation.txt\");\n    universal.line = 5;\n\n    for (int i = 0; i &lt; universal.line; i++)\n    {\n        if (i &gt; 0)\n        {\n            std::getline(creation, universal.displayText);\n            std::cout &lt;&lt; universal.displayText &lt;&lt; std::endl;\n        }\n        if (i == 4)\n        {\n            std::cout &lt;&lt; std::endl;\n            std::cin &gt;&gt; universal.gender;\n\n            while (universal.gender &lt;= 0 || universal.gender &gt;= 3)\n            {\n                std::cout &lt;&lt; \"Please make a valid choice\" &lt;&lt; std::endl;\n                std::cin &gt;&gt; universal.gender;\n            }\n        }\n    }\n// Code cut out here\n}\n</code></pre>\n\n<p>The <strong>gender</strong> variable is an <strong>int</strong> declared in the <strong>Universal</strong> class, and the user is prompted to enter 1 for male or 2 for female by text pulled from a separate file. If the input is not 1 or 2 then a while loop forces the player to keep re-answering the question until they enter 1 or 2. The <strong>line</strong> variable is also an <strong>int</strong> however that is used for the <strong>for</strong> loops to ensure the right lines are read by the program.</p>\n\n<p>To output the <strong>gender</strong> variable this is the code I use:</p>\n\n<pre><code>std::cout &lt;&lt; gender &lt;&lt; std::endl;\n</code></pre>\n\n<p>There is no <strong>universal.</strong> as it is being called within the <strong>Universal</strong> class itself.</p>\n\n<p>This has confused me massively and I can't get my head around what is causing the problem. Any help or explanation would be great, thanks in advance.</p>\n"}, {"tags": ["c++", "constants"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1439407647, "post_id": 31973735, "comment_id": 51854353, "body": "Second one is ill-formed. Did you try compiling this? On what compiler?"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 8, "last_activity_date": 1439407689, "creation_date": 1439407689, "answer_id": 31973802, "question_id": 31973735, "link": "https://stackoverflow.com/questions/31973735/understanding-the-locations-of-const/31973802#31973802", "title": "understanding the locations of const", "body": "<pre><code>const T&amp; temp const( const T&amp; t) const{\n^^1^^         ^^2^^  ^^3^^       ^^4^^\n</code></pre>\n\n<p>In order from left to right:</p>\n\n<ol>\n<li>This function returns a reference to <code>const T</code>. So the return will not be modifiable. </li>\n<li>Invalid syntax. Remove.</li>\n<li>This function takes as its argument a nonmodifable reference to <code>T</code>. It <em>could</em> be a reference to an existing object. It could be called from a temporary that has its lifetime extended to the lifetime of <code>t</code>. You can't say much about what <code>temp</code> was called with - it could have been an lvalue, it could have been an rvalue (if <code>T</code> is either copy- or move-constructible). </li>\n<li>If <code>temp</code> is not a member function, syntax error. Otherwise, it is a <code>const</code>-qualification on the member function, indicating that it can be called on a <code>const</code> object and that the function may not modify any non-<code>mutable</code> members of <code>this</code> or call any other non-<code>const</code>-qualified member functions. </li>\n</ol>\n"}], "owner": {"reputation": 869, "user_id": 4525819, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GL2QX.jpg?s=128&g=1", "display_name": "conterio", "link": "https://stackoverflow.com/users/4525819/conterio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1439411450, "answer_count": 1, "score": 1, "last_activity_date": 1439407772, "creation_date": 1439407440, "question_id": 31973735, "link": "https://stackoverflow.com/questions/31973735/understanding-the-locations-of-const", "closed_reason": "Duplicate", "title": "understanding the locations of const", "body": "<p>If I have a member function that looks like this:</p>\n\n<pre><code>const T&amp; temp const( const T&amp; t) const{\n    //some code\n    return t;\n}\n</code></pre>\n\n<p>What do each of the const do, in the order left to right?\nIs this right or wrong? </p>\n\n<ol>\n<li>return const object</li>\n<li>can't change any of the member fields that are not mutable</li>\n<li>can only pass in const objects of type T</li>\n<li>this is a const member function, can only be called with a const object</li>\n</ol>\n"}, {"tags": ["c++", "multithreading", "locking", "lock-free", "memory-fences"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1439407060, "post_id": 31973551, "comment_id": 51854027, "body": "The acronym for Double Checked Locking is <i>DLC</i> ? Why the inversion? ;)"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1439407284, "post_id": 31973551, "comment_id": 51854159, "body": "I actually assumed you were a gamer and blamed muscle memory ;)"}, {"owner": {"reputation": 16736, "user_id": 2131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c24f48337a2b94fa2da84c01a7667f9?s=128&d=identicon&r=PG", "display_name": "DrPizza", "link": "https://stackoverflow.com/users/2131/drpizza"}, "edited": false, "score": 0, "creation_date": 1439407643, "post_id": 31973551, "comment_id": 51854350, "body": "If your locks are recursive, you blew the stack. If your locks are non-recursive you deadlocked. If your locks are non-recursive and trap recursive calls you threw an unhandled exception.  What on earth are you actually trying to do?"}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "reply_to_user": {"reputation": 16736, "user_id": 2131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c24f48337a2b94fa2da84c01a7667f9?s=128&d=identicon&r=PG", "display_name": "DrPizza", "link": "https://stackoverflow.com/users/2131/drpizza"}, "edited": false, "score": 0, "creation_date": 1439408224, "post_id": 31973551, "comment_id": 51854643, "body": "@DrPizza You had me really confused until I realized not everyone might assume <code>lock()</code> implies a scoped lock that is released on destruction."}, {"owner": {"reputation": 16736, "user_id": 2131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c24f48337a2b94fa2da84c01a7667f9?s=128&d=identicon&r=PG", "display_name": "DrPizza", "link": "https://stackoverflow.com/users/2131/drpizza"}, "edited": false, "score": 0, "creation_date": 1439408273, "post_id": 31973551, "comment_id": 51854667, "body": "That doesn&#39;t help. You have a recursive call to wait() that&#39;ll still call scoped_lock() on each pass."}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "reply_to_user": {"reputation": 16736, "user_id": 2131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c24f48337a2b94fa2da84c01a7667f9?s=128&d=identicon&r=PG", "display_name": "DrPizza", "link": "https://stackoverflow.com/users/2131/drpizza"}, "edited": false, "score": 0, "creation_date": 1439408383, "post_id": 31973551, "comment_id": 51854731, "body": "@DrPizza SOB!...I didn&#39;t notice that when I gave things &quot;simpler&quot; names. I&#39;ll rename the function def."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1439408536, "post_id": 31973551, "comment_id": 51854802, "body": "<code>scoped_lock();</code> locks and unlocks immediately, which is fairly useless. You need a variable for the lifetime to extend to the end of the function."}, {"owner": {"reputation": 16736, "user_id": 2131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c24f48337a2b94fa2da84c01a7667f9?s=128&d=identicon&r=PG", "display_name": "DrPizza", "link": "https://stackoverflow.com/users/2131/drpizza"}, "edited": false, "score": 1, "creation_date": 1439408559, "post_id": 31973551, "comment_id": 51854814, "body": "Well, OK, it no longer blows up, I just no longer understand what it is you&#39;re trying to do. Can you show real code with a real question?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1439408594, "post_id": 31973551, "comment_id": 51854825, "body": "The semantics of <code>mybool_smart_ptr</code>, <code>scoped_lock()</code>, and <code>wait()</code> affect the answer too, of course."}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1439409221, "post_id": 31973551, "comment_id": 51855171, "body": "Compile-able code added"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1439409661, "post_id": 31973551, "comment_id": 51855397, "body": "You need to guard against spurious wakeups: <code>while (!*mybool_smart_ptr) { cond-&gt;wait(); }</code> (see <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/wait\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/condition_variable/wait</a>)"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1439409806, "post_id": 31973551, "comment_id": 51855462, "body": "Does <code>*mybool_smart_ptr</code> ever get set back to false after it becomes true?"}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1439409919, "post_id": 31973551, "comment_id": 51855507, "body": "@AlanStokes I never noticed that in the standard; how does a thread &quot;spuriously&quot; wakeup?"}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1439409948, "post_id": 31973551, "comment_id": 51855525, "body": "No, setting <code>*mybool_smart_ptr</code> is disallowed by the documentation."}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1439410338, "post_id": 31973551, "comment_id": 51855701, "body": "*setting back to false."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1439410610, "post_id": 31973551, "comment_id": 51855808, "body": "<a href=\"https://en.wikipedia.org/wiki/Spurious_wakeup\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Spurious_wakeup</a>"}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1439410831, "post_id": 31973551, "comment_id": 51855920, "body": "That doesn&#39;t touch on <i>how/why</i> that happens"}], "owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439430769, "creation_date": 1439406739, "last_edit_date": 1439430769, "question_id": 31973551, "link": "https://stackoverflow.com/questions/31973551/double-checked-locking-besides-singletons", "title": "Double Checked Locking *besides* Singletons", "body": "<p>I've been searching the interweb for a while now to find a discussion about DCL that doesn't involve the singleton pattern. So instead, I'm just going to ask exactly what I want to know.</p>\n\n<p>Is DCL appropriate here?</p>\n\n<pre><code>std::shared_ptr&lt;bool&gt; mybool_smart_ptr(new bool); // initialized to false in main thread\nstd::shared_ptr&lt;std::mutex&gt; mtx(new std::mutex);\nstd::shared_ptr&lt;std::condition_variable_any&gt; cond(new std::condition_variable_any);\n\n\nvoid proceed_to_work() {\n    if(*mybool_smart_ptr)\n         return;\n\n    std::unique_lock&lt;std::mutex&gt; lock(*mtx);\n    // if DCL is broken, would a fence here help?\n    if(*mybool_smart_ptr)\n         return;\n    cond-&gt;wait(lock);\n}\n</code></pre>\n\n<p>Any writers to <code>*mybool_smart_ptr</code> do so lock-free. The work which the spawned threads do is all or nothing, that's what they wait for.</p>\n"}, {"tags": ["c++", "memory", "vector", "memory-corruption"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1439406363, "post_id": 31973422, "comment_id": 51853670, "body": "iterators/pointers and references pointing to the data <i>in</i> the container are invalidated. The container itself isn&#39;t moving around. If the reference to the container itself got invalidated, it would be pretty much worthless."}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 0, "creation_date": 1439407853, "post_id": 31973422, "comment_id": 51854468, "body": "Regarding your <b>Edit</b>: That piece of code is wrong then, or you misinterpreted the result. The answers given are correct."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1439406406, "creation_date": 1439406406, "answer_id": 31973449, "question_id": 31973422, "link": "https://stackoverflow.com/questions/31973422/modifying-a-vector-reference-what-gets-invalidated/31973449#31973449", "title": "Modifying a vector reference. What gets invalidated?", "body": "<p>I think you are confused on what is going on.  <code>push_back()</code> can invalidate iterators and references that point to objects in the vector, not the vector itself.  In you situation there will be no invalidation and your code is correct.</p>\n"}, {"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 0, "last_activity_date": 1439406445, "creation_date": 1439406445, "answer_id": 31973458, "question_id": 31973422, "link": "https://stackoverflow.com/questions/31973422/modifying-a-vector-reference-what-gets-invalidated/31973458#31973458", "title": "Modifying a vector reference. What gets invalidated?", "body": "<p>The reference <code>vector&lt;double&gt; &amp;result</code> will be fine, the problem would be if you had something referencing the <em>underlying memory</em> such as</p>\n\n<pre><code>double&amp; some_value = result[74];\nresult.push_back();   // assume this caused a reallocation\n</code></pre>\n\n<p>Now <code>some_value</code> is referencing bad memory, the same would occur with accessing the underlying array using <a href=\"http://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow\"><code>data</code></a></p>\n\n<pre><code>double* values = result.data();\nresult.push_back();  // again assume caused reallocation\n</code></pre>\n\n<p>Now <code>values</code> is pointing at garbage.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1439406466, "creation_date": 1439406466, "answer_id": 31973466, "question_id": 31973422, "link": "https://stackoverflow.com/questions/31973422/modifying-a-vector-reference-what-gets-invalidated/31973466#31973466", "title": "Modifying a vector reference. What gets invalidated?", "body": "<p>I think you're confused about what gets invalidated. Everything in your example is perfectly behaving code. The issue is when you keep references to data that the vector itself owns. For instance:</p>\n\n<pre><code>vector&lt;double&gt; v;\nv.push_back(x);\ndouble&amp; first = v[0];\nv.push_back(y);\nv.push_back(z);\nv.push_back(w);\ncout &lt;&lt; first;\n</code></pre>\n\n<p>Here, <code>first</code> is a reference to <code>v</code>'s internal data - which <em>could</em> get invalidated by one of the <code>push_back()</code>s and unless you specifically accounted for the additional size, you should assume that it <em>was</em> invalidated so the <code>cout</code> is undefined behavior because <code>first</code> is a dangling reference. That's the sort of thing you should be worried about - not situations where you pass the whole <code>vector</code> itself by reference. </p>\n"}], "owner": {"reputation": 346, "user_id": 494085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d4746eb0f3ad770d4aea08a7d3b4def3?s=128&d=identicon&r=PG", "display_name": "user494085", "link": "https://stackoverflow.com/users/494085/user494085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1439406955, "creation_date": 1439406290, "last_edit_date": 1439406955, "question_id": 31973422, "link": "https://stackoverflow.com/questions/31973422/modifying-a-vector-reference-what-gets-invalidated", "title": "Modifying a vector reference. What gets invalidated?", "body": "<p>Assume I have the following code:</p>\n\n<pre><code>void appendRandomNumbers(vector&lt;double&gt; &amp;result) {\n    for (int i = 0; i &lt; 10000; i++) {\n        result.push_back(rand());\n    }\n}\n\nvector&lt;double&gt; randomlist;\nappendRandomNumbers(randomlist);\nfor (double i : randomlist) cout &lt;&lt; i &lt;&lt; endl;\n</code></pre>\n\n<p>The repeated push_back() operations will eventually cause a reallocation and I suspect a memory corruption.\nIndeed, the <a href=\"http://www.cplusplus.com/reference/vector/vector/push_back/\" rel=\"nofollow\">vector.push_back() documentation</a> says that </p>\n\n<blockquote>\n  <p>If a reallocation happens, all iterators, pointers and references related to the container are invalidated.</p>\n</blockquote>\n\n<p>After the reallocation happens, which of the scopes will have a correct vector? Will the reference used by appendRandomNumbers be invalid so it pushes numbers into places it shouldn't, or will the \"correct\" location be known by appendRandomNumbers only and the vector is deleted as soon as it gets out of scope?</p>\n\n<p>Will the printing loop iterate over an actual vector or over a stale area of memory where the vector formerly resided?</p>\n\n<p><strong>Edit:</strong> Most answers right now say that the vector reference itself should be fine. I have a piece of code similar to the one above which caused memory corruption when I modified a vector received by reference and stopped having memory corruption when I changed the approach. Still, I cannot exclude that I incidentally fixed the real reason during the change. Will experiment on this.</p>\n"}, {"tags": ["c++", "c++11", "stl", "stdset"], "comments": [{"owner": {"reputation": 541, "user_id": 4930545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64fdfa69ba90335d66181d66f15c3242?s=128&d=identicon&r=PG&f=1", "display_name": "Dami&#225;n Montenegro", "link": "https://stackoverflow.com/users/4930545/dami%c3%a1n-montenegro"}, "edited": false, "score": 0, "creation_date": 1439405781, "post_id": 31973201, "comment_id": 51853360, "body": "Sets doesn&#39;t allow equal elements, so you don&#39;t need &lt;= operator, just &lt; operator."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1439405784, "last_edit_date": 1439405784, "creation_date": 1439405615, "answer_id": 31973240, "question_id": 31973201, "link": "https://stackoverflow.com/questions/31973201/finding-elements-in-stdset/31973240#31973240", "title": "Finding elements in std::set", "body": "<p>A <code>set</code> orders its elements by <code>operator&lt;</code> (by default). The comparator itself can be retrieved via <a href=\"http://en.cppreference.com/w/cpp/container/set/key_comp\" rel=\"noreferrer\"><code>key_comp</code></a> or <a href=\"http://en.cppreference.com/w/cpp/container/set/value_comp\" rel=\"noreferrer\"><code>value_comp</code></a>. So if both elements are in the set, the order is defined by the elements themselves - you don't need the iterators:</p>\n\n<pre><code>return s.key_comp()(first, second);\n</code></pre>\n\n<p>If one or neither are in the set, then it depends on what you want to do in those cases:</p>\n\n<pre><code>if (s.count(first)) {\n    if (s.count(second)) {\n        return s.key_comp()(first, second);\n    }\n    else {\n        /* no second */\n    }\n}\nelse {\n    /* no first, possibly second */\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1439406932, "post_id": 31973521, "comment_id": 51853960, "body": "this is an O(n) check... Since I am using a std::set, I would like to do it in less than that. Otherwise why not use a std::vector"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1439406642, "creation_date": 1439406642, "answer_id": 31973521, "question_id": 31973201, "link": "https://stackoverflow.com/questions/31973201/finding-elements-in-stdset/31973521#31973521", "title": "Finding elements in std::set", "body": "<p>If you would look more generic solution than only for <code>std::set</code> this method would work for any container with <code>forward</code> iterator:</p>\n\n<pre><code>template &lt;class T&gt;\nbool before( const T &amp;cont, typename T::const_iterator first, typename T::const_iterator second )\n{\n    for( auto it = cont.begin(); true; ++it ) {\n        if( it == first ) return true;\n        if( it == second ) return false;\n    }\n }\n</code></pre>\n\n<p>assuming <code>first</code> and <code>second</code> are valid iterators. Now you can have more optimal specialization for <code>std::set</code> and <code>std::map</code>:</p>\n\n<pre><code>return cont.key_comp()( *first, *second );\n</code></pre>\n\n<p>and for container with random access iterator:</p>\n\n<pre><code>return first &lt; second;\n</code></pre>\n"}], "owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 31973240, "answer_count": 2, "score": 1, "last_activity_date": 1439406642, "creation_date": 1439405470, "question_id": 31973201, "link": "https://stackoverflow.com/questions/31973201/finding-elements-in-stdset", "title": "Finding elements in std::set", "body": "<p>Given that I have a <code>std::set</code>, how do I find out if one element of the set is before the other. For example, something like this -</p>\n\n<pre><code>bool before(const std::set &amp;s, const int first, const int second) const {\n  auto it_first = s.find(first);\n  auto it_second = s.find(second);\n  return it_first &lt;= it_second;\n}\n</code></pre>\n\n<p>The above code does not work since <code>&lt;=</code> is not defined for the bidirectional iterators, but how would one go about doing something like this?</p>\n"}, {"tags": ["c++", "gcc", "floating-point", "valgrind"], "comments": [{"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1439405388, "post_id": 31973139, "comment_id": 51853145, "body": "A guess: it might be using SSE/SSE2 for scalar floating-point in 64-bit mode (because x86_64 support implies support for up to SSE2), and using regular x87 floating-point in 32-bit mode."}, {"owner": {"reputation": 33733, "user_id": 1031417, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xlhE1.jpg?s=128&g=1", "display_name": "0x90", "link": "https://stackoverflow.com/users/1031417/0x90"}, "edited": false, "score": 0, "creation_date": 1439405406, "post_id": 31973139, "comment_id": 51853151, "body": "Please upload the disassembly of the functions ... and try to compile with <code>-O0</code>, I guess it&#39;s optimization issue rather a target architecture related stuff."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1439411966, "post_id": 31973139, "comment_id": 51856556, "body": "With <code>-m32</code>, try: <code>-msse2 -mfpmath=sse</code>"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1439415325, "post_id": 31973139, "comment_id": 51858290, "body": "@BrettHale: Good suggestion.  Doing this does cause the generated assembly (and the results) to match that of <code>-m64</code>."}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 3, "last_activity_date": 1439409523, "last_edit_date": 1439409523, "creation_date": 1439408331, "answer_id": 31973969, "question_id": 31973139, "link": "https://stackoverflow.com/questions/31973139/gcc-m32-option-changes-floating-point-rounding-when-not-running-valgrind/31973969#31973969", "title": "gcc &#39;-m32&#39; option changes floating-point rounding when not running valgrind", "body": "<p><strong>Edit:</strong> It would seem that, at least a long time back, valgrind's floating point calculations wheren't quite as accurate as the \"real\" calculations. In other words, this MAY explain why you get different results. See <a href=\"http://valgrind-developers.narkive.com/uao2Y1Fh/valgrind-and-subtle-floating-point-problem\" rel=\"nofollow\">this</a> question and answer on the valgrind mailing list.</p>\n\n<p><strong>Edit2:</strong> And the current valgrind.org documentation has it in it's \"core limitations\" section <a href=\"http://www.valgrind.org/docs/manual/manual-core.html#manual-core.limits\" rel=\"nofollow\">here</a> - so I would expect that it is indeed \"still valid\". In other words the documentation for valgrind says to expect differences between valgrind and x87 FPU calculations. \"You have been warned!\" (And as we can see, using sse instructions to do the same math produces the same result as valgrind, confirming that it's a \"rounding from 80 bits to 64 bits\" difference)</p>\n\n<p>Floating point calculations WILL differ slightly depending on exactly how the calculation is performed. I'm not sure exactly what you want to have an answer to, so here's a long rambling \"answer of a sort\".</p>\n\n<p>Valgrind DOES indeed change the exact behaviour of your program in various ways (it emulates certain instructions, rather than actually executing the real instructions - which may include saving the intermediate results of calculations). Also, floating point calculations are well known to \"not be precise\" - it's just a matter of luck/bad luck if the calculation comes out precise or not. 0.98 is one of many, many numbers that can't be described precisely in floating point format [at least not the common IEEE formats]. </p>\n\n<p>By adding:</p>\n\n<pre><code>cerr&lt;&lt;\"c=\"&lt;&lt;std::setprecision(30)&lt;&lt;c &lt;&lt;\"\\n\";\n</code></pre>\n\n<p>we see that the output is <code>c=0.979999999999999982236431605997</code> (yes, the actual value is 0.979999...99982 or some such, remaining digits is just the residual value, since it's not an \"even\" binary number, there's always going to be something left.</p>\n\n<p>This is the <code>n = 2550;</code>, <code>c = 0.98</code> and <code>q = n * c</code> part of the code as generated by gcc:</p>\n\n<pre><code>movl    $2550, -28(%ebp)       ; n\nfldl    .LC0\nfstpl   -40(%ebp)              ; c\nfildl   -28(%ebp)\nfmull   -40(%ebp)\nfstpl   -48(%ebp)              ; q - note that this is stored as a rouned 64-bit value.\n</code></pre>\n\n<p>This is the <code>int(q)</code> and <code>int(n*c)</code> part of the code:</p>\n\n<pre><code>fildl   -28(%ebp)             ; n\nfmull   -40(%ebp)             ; c \nfnstcw  -58(%ebp)             ; Save control word\nmovzwl  -58(%ebp), %eax\nmovb    $12, %ah\nmovw    %ax, -60(%ebp)        ; Save float control word.\nfldcw   -60(%ebp)\nfistpl  -64(%ebp)             ; Store as integer (directly from 80-bit result)\nfldcw   -58(%ebp)             ; restore float control word.\nmovl    -64(%ebp), %ebx       ; result of int(n * c)\n\n\nfldl    -48(%ebp)             ; q\nfldcw   -60(%ebp)             ; Load float control word as saved above.\nfistpl  -64(%ebp)             ; Store as integer.\nfldcw   -58(%ebp)             ; Restore control word.\nmovl    -64(%ebp), %esi       ; result of int(q)\n</code></pre>\n\n<p>Now, if the intermediate result is stored (and thus rounded) from the internal 80-bit precision in the middle of one of those calculations, the result may be subtly different from the result if the calculation happens without saving intermediate values.</p>\n\n<p>I get identical results from both g++ 4.9.2 and clang++ -mno-sse - but if I enable sse in the clang case, it gives the same result as 64-bit build. Using <code>gcc -msse2 -m32</code> gives the 2499 answer everywhere. This indicates that the error is caused by \"storing intermediate results\" in some way or another.</p>\n\n<p>Likewise, optimising in gcc to -O1 will give the 2499 in all places - but this is a coincidence, not a result of some \"clever thinking\". If you want correctly rounded integer values of your calculations, you're much better off rounding yourself, because sooner or later <code>int(someDoubleValue)</code> will come up \"one short\". </p>\n\n<p><strong>Edit3:</strong> And finally, using <code>g++ -mno-sse -m64</code> will also produce the same <code>2498</code> answer, where using <code>valgrind</code> on the same binary produces the <code>2499</code> answer.</p>\n"}, {"tags": [], "owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "is_accepted": false, "score": 1, "last_activity_date": 1439411062, "creation_date": 1439411062, "answer_id": 31974715, "question_id": 31973139, "link": "https://stackoverflow.com/questions/31973139/gcc-m32-option-changes-floating-point-rounding-when-not-running-valgrind/31974715#31974715", "title": "gcc &#39;-m32&#39; option changes floating-point rounding when not running valgrind", "body": "<p>The 32-bit version uses <a href=\"https://en.wikipedia.org/wiki/X87\" rel=\"nofollow\">X87 floating point instructions</a>. X87 internally uses 80-bit floating point numbers, which will cause trouble when numbers are converted to and from other precisions. In your case the 64-bit precision approximation for 0.98 is slightly less than the true value. When the CPU converts it to an 80-bit value you get the exact same numerical value, which is an equally bad approximation - having more bits doesn't get you a better approximation. The FPU then multiplies that number by 2550, and gets a figure that's slightly less than 2499. If the CPU used 64-bit numbers all the way it should compute exactly 2499, like it does in the 64-bit version.</p>\n"}], "owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 31973969, "answer_count": 2, "score": 2, "last_activity_date": 1439411062, "creation_date": 1439405294, "last_edit_date": 1439407027, "question_id": 31973139, "link": "https://stackoverflow.com/questions/31973139/gcc-m32-option-changes-floating-point-rounding-when-not-running-valgrind", "title": "gcc &#39;-m32&#39; option changes floating-point rounding when not running valgrind", "body": "<p>I am getting different floating-point rounding under different build/execute scenarios.  Notice the <code>2498</code> in the second run below...</p>\n\n<pre><code>   #include &lt;iostream&gt;\n   #include &lt;cassert&gt;\n   #include &lt;typeinfo&gt;\n   using std::cerr;\n\nvoid domath( int n, double c, double &amp; q1, double &amp; q2 )\n   {\n   q1=n*c;\n   q2=int(n*c);\n   }\n\nint main()\n   {\n   int n=2550;\n   double c=0.98, q1, q2;\n   domath( n, c, q1, q2 );\n   cerr&lt;&lt;\"sizeof(int)=\"&lt;&lt;sizeof(int)&lt;&lt;\", sizeof(double)=\"&lt;&lt;sizeof(double)&lt;&lt;\", sizeof(n*c)=\"&lt;&lt;sizeof(n*c)&lt;&lt;\"\\n\";\n   cerr&lt;&lt;\"n=\"&lt;&lt;n&lt;&lt;\", int(q1)=\"&lt;&lt;int(q1)&lt;&lt;\", int(q2)=\"&lt;&lt;int(q2)&lt;&lt;\"\\n\";\n   assert( typeid(q1) == typeid(n*c) );\n   }\n</code></pre>\n\n<p>Running as a 64-bit executable...</p>\n\n<pre><code>$ g++ -m64 -Wall rounding_test.cpp -o rounding_test &amp;&amp; ./rounding_test\nsizeof(int)=4, sizeof(double)=8, sizeof(n*c)=8\nn=2550, int(q1)=2499, int(q2)=2499\n</code></pre>\n\n<p>Running as a 32-bit executable...</p>\n\n<pre><code>$ g++ -m32 -Wall rounding_test.cpp -o rounding_test &amp;&amp; ./rounding_test\nsizeof(int)=4, sizeof(double)=8, sizeof(n*c)=8\nn=2550, int(q1)=2499, int(q2)=2498\n</code></pre>\n\n<p>Running as a 32-bit executable under valgrind...</p>\n\n<pre><code>$ g++ -m32 -Wall rounding_test.cpp -o rounding_test &amp;&amp; valgrind --quiet ./rounding_test\nsizeof(int)=4, sizeof(double)=8, sizeof(n*c)=8\nn=2550, int(q1)=2499, int(q2)=2499\n</code></pre>\n\n<p>Why am I seeing different results when compiling with <code>-m32</code>, and why are the results different again when running valgrind?</p>\n\n<p>My system is Ubuntu 14.04.1 LTS x86_64, and my gcc is version 4.8.2.</p>\n\n<hr>\n\n<p>EDIT: </p>\n\n<p>In response to the request for disassembly, I have refactored the code a bit so that I could isolate the relevant portion.  The approach taken between <code>-m64</code> and <code>-m32</code> is clearly much different.  I'm not too concerned about why these give a different rounding result since I can fix that by applying the <code>round()</code> function.  The most interesting question is: why does valgrind change the result?</p>\n\n<pre><code>rounding_test:     file format elf64-x86-64 \n                                  &lt;\n000000000040090d &lt;_Z6domathidRdS_&gt;:               &lt;\n  40090d:   55                      push   %rbp       &lt;\n  40090e:   48 89 e5                mov    %rsp,%rbp      &lt;\n  400911:   89 7d fc                mov    %edi,-0x4(%rbp &lt;\n  400914:   f2 0f 11 45 f0          movsd  %xmm0,-0x10(%r &lt;\n  400919:   48 89 75 e8             mov    %rsi,-0x18(%rb &lt;\n  40091d:   48 89 55 e0             mov    %rdx,-0x20(%rb &lt;\n  400921:   f2 0f 2a 45 fc          cvtsi2sdl -0x4(%rbp), &lt;\n  400926:   f2 0f 59 45 f0          mulsd  -0x10(%rbp),%x &lt;\n  40092b:   48 8b 45 e8             mov    -0x18(%rbp),%r &lt;\n  40092f:   f2 0f 11 00             movsd  %xmm0,(%rax)   &lt;\n  400933:   f2 0f 2a 45 fc          cvtsi2sdl -0x4(%rbp), &lt;\n  400938:   f2 0f 59 45 f0          mulsd  -0x10(%rbp),%x &lt;\n  40093d:   f2 0f 2c c0             cvttsd2si %xmm0,%eax  &lt;\n  400941:   f2 0f 2a c0             cvtsi2sd %eax,%xmm0   &lt;\n  400945:   48 8b 45 e0             mov    -0x20(%rbp),%r &lt;\n  400949:   f2 0f 11 00             movsd  %xmm0,(%rax)   &lt;\n  40094d:   5d                      pop    %rbp       &lt;\n  40094e:   c3                      retq              &lt;\n\n      | rounding_test:     file format elf32-i386\n\n                                  &gt; 0804871d &lt;_Z6domathidRdS_&gt;:\n                                  &gt;  804871d:   55                      push   %ebp\n                                  &gt;  804871e:   89 e5                   mov    %esp,%ebp\n                                  &gt;  8048720:   83 ec 10                sub    $0x10,%esp\n                                  &gt;  8048723:   8b 45 0c                mov    0xc(%ebp),%eax\n                                  &gt;  8048726:   89 45 f8                mov    %eax,-0x8(%ebp\n                                  &gt;  8048729:   8b 45 10                mov    0x10(%ebp),%ea\n                                  &gt;  804872c:   89 45 fc                mov    %eax,-0x4(%ebp\n                                  &gt;  804872f:   db 45 08                fildl  0x8(%ebp)\n                                  &gt;  8048732:   dc 4d f8                fmull  -0x8(%ebp)\n                                  &gt;  8048735:   8b 45 14                mov    0x14(%ebp),%ea\n                                  &gt;  8048738:   dd 18                   fstpl  (%eax)\n                                  &gt;  804873a:   db 45 08                fildl  0x8(%ebp)\n                                  &gt;  804873d:   dc 4d f8                fmull  -0x8(%ebp)\n                                  &gt;  8048740:   d9 7d f6                fnstcw -0xa(%ebp)\n                                  &gt;  8048743:   0f b7 45 f6             movzwl -0xa(%ebp),%ea\n                                  &gt;  8048747:   b4 0c                   mov    $0xc,%ah\n                                  &gt;  8048749:   66 89 45 f4             mov    %ax,-0xc(%ebp)\n                                  &gt;  804874d:   d9 6d f4                fldcw  -0xc(%ebp)\n                                  &gt;  8048750:   db 5d f0                fistpl -0x10(%ebp)\n                                  &gt;  8048753:   d9 6d f6                fldcw  -0xa(%ebp)\n                                  &gt;  8048756:   8b 45 f0                mov    -0x10(%ebp),%e\n                                  &gt;  8048759:   89 45 f0                mov    %eax,-0x10(%eb\n                                  &gt;  804875c:   db 45 f0                fildl  -0x10(%ebp)\n                                  &gt;  804875f:   8b 45 18                mov    0x18(%ebp),%ea\n                                  &gt;  8048762:   dd 18                   fstpl  (%eax)\n                                  &gt;  8048764:   c9                      leave  \n                                  &gt;  8048765:   c3                      ret    \n</code></pre>\n"}, {"tags": ["c++", "audio", "video", "ffmpeg"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 1, "creation_date": 1439414500, "post_id": 31973107, "comment_id": 51857908, "body": "AFAIK Audio should generally not have a dts, just a pts. Video should only have a dts if the source frame has a dts too. (If it is used as a reference by a B-Frame)."}, {"owner": {"reputation": 28825, "user_id": 75658, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/236fc5ebe1d97f54547dee16ff2ec70c?s=128&d=identicon&r=PG", "display_name": "sipsorcery", "link": "https://stackoverflow.com/users/75658/sipsorcery"}, "edited": false, "score": 0, "creation_date": 1439418625, "post_id": 31973107, "comment_id": 51859428, "body": "Your timebase for the audio and video should correspond to your sampling frequency. For instance if you are sampling your video at 25 frames per second then the rescale is from 1/25 to 1/90000. I&#39;m not sure why you are using 100000 anywhere."}, {"owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "reply_to_user": {"reputation": 28825, "user_id": 75658, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/236fc5ebe1d97f54547dee16ff2ec70c?s=128&d=identicon&r=PG", "display_name": "sipsorcery", "link": "https://stackoverflow.com/users/75658/sipsorcery"}, "edited": false, "score": 0, "creation_date": 1439456509, "post_id": 31973107, "comment_id": 51872783, "body": "@sipwiz Can you please check the EDIT 2.0?"}], "answers": [{"comments": [{"owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "edited": false, "score": 0, "creation_date": 1439413763, "post_id": 31974912, "comment_id": 51857551, "body": "Sir, thanks for your answer! I have edited my question and wrote down at bottom what I understood from your answer so far. Please correct me. And if that doesn&#39;t make any sense, can you please give me some precise working code? I am really struggling 2-3 days with this issue, I am really so dumb to get the intuition."}, {"owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "edited": false, "score": 0, "creation_date": 1439456483, "post_id": 31974912, "comment_id": 51872764, "body": "Can you please check the EDIT 2.0?"}, {"owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "edited": false, "score": 0, "creation_date": 1439492961, "post_id": 31974912, "comment_id": 51896960, "body": "Thanks again for suggesting audio gap solution. Can you please tell me IF MY CURRENT IMPLEMENTATION IS CORRECT OR NOT? what changes I need to make in <code>writeAudio(..)</code> if I want to set the audio stream time base as <code>{1, sampleRate}</code>?"}, {"owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "edited": false, "score": 0, "creation_date": 1439493899, "post_id": 31974912, "comment_id": 51897484, "body": "Also by <code>zeroed audio sample data</code> you mean <code>AVPacket pkt = {0}</code> ?"}, {"owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "reply_to_user": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "edited": false, "score": 1, "creation_date": 1439499675, "post_id": 31974912, "comment_id": 51900267, "body": "no, I mean an AVFrame with memset(data[0], 0, size)."}, {"owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "edited": false, "score": 0, "creation_date": 1439530286, "post_id": 31974912, "comment_id": 51908649, "body": "Can you please check EDIT 3.0?"}, {"owner": {"reputation": 653, "user_id": 2807286, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/672c6809e7980980488c74f36d73564a?s=128&d=identicon&r=PG&f=1", "display_name": "PR Singh", "link": "https://stackoverflow.com/users/2807286/pr-singh"}, "reply_to_user": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "edited": false, "score": 0, "creation_date": 1518775739, "post_id": 31974912, "comment_id": 84652173, "body": "@KaidulIslam Hi, I am also facing this issue,is it resolved?"}], "tags": [], "owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "is_accepted": true, "score": 2, "last_activity_date": 1439466658, "last_edit_date": 1439466658, "creation_date": 1439411792, "answer_id": 31974912, "question_id": 31973107, "link": "https://stackoverflow.com/questions/31973107/compute-pts-and-dts-correctly-to-sync-audio-and-video-ffmpeg-c/31974912#31974912", "title": "Compute PTS and DTS correctly to sync audio and video ffmpeg C++", "body": "<p>Timestamps (such as <a href=\"https://www.ffmpeg.org/doxygen/trunk/structAVPacket.html#a85dbbd306b44b02390cd91c45e6a0f76\" rel=\"nofollow\">dts</a>) should be in AVStream.time_base units. You're requesting a video timebase of 1/90000 and a default audio timebase (1/9000), but you're using a timebase of 1/100000 to write dts values. I'm also not sure if it's guaranteed that requested timebases are maintained during header writing, your muxer might change the values and expect you to deal with the new values.</p>\n\n<p>So code like this:</p>\n\n<blockquote>\n<pre><code>int64_t dts = av_gettime();\ndts = av_rescale_q(dts, (AVRational){1, 1000000}, (AVRational){1, 90000});\nint duration = AUDIO_STREAM_DURATION; // 20\nif(m_prevAudioDts &gt; 0LL) {\n    duration = dts - m_prevAudioDts;\n}\n</code></pre>\n</blockquote>\n\n<p>Won't work. Change that to something that uses the audiostream's timebase, and don't set the duration unless you know what you're doing. (Same for video.)</p>\n\n<blockquote>\n<pre><code>m_prevAudioDts = dts;\npkt.pts = AV_NOPTS_VALUE;\npkt.dts = m_currAudioDts;\nm_currAudioDts += duration;\npkt.duration = duration;\n</code></pre>\n</blockquote>\n\n<p>This looks creepy, especially combined with the video alike code. The problem here is that the first packet for both will have a timestamp of zero, regardless of inter-packet delay between the streams. You need one parent currDts shared between all streams, otherwise your streams will be perpetually out of sync.</p>\n\n<p>[edit]</p>\n\n<p>So, regarding your edit, if you have audio gaps, I think you need to insert silence (zeroed audio sample data) for the duration of the gap.</p>\n"}], "owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15291, "favorite_count": 4, "accepted_answer_id": 31974912, "answer_count": 1, "score": 4, "last_activity_date": 1439555146, "creation_date": 1439405195, "last_edit_date": 1495541343, "question_id": 31973107, "link": "https://stackoverflow.com/questions/31973107/compute-pts-and-dts-correctly-to-sync-audio-and-video-ffmpeg-c", "title": "Compute PTS and DTS correctly to sync audio and video ffmpeg C++", "body": "<p>I am trying to mux H264 encoded data and G711 PCM data into <code>mov</code> multimedia container. I am creating <code>AVPacket</code> from encoded data and initially the PTS and DTS value of video/audio frames is equivalent to <code>AV_NOPTS_VALUE</code>. So I calculated the DTS using current time information. My code - </p>\n\n<pre><code>bool AudioVideoRecorder::WriteVideo(const unsigned char *pData, size_t iDataSize, bool const bIFrame) {\n    .....................................\n    .....................................\n    .....................................\n    AVPacket pkt = {0};\n    av_init_packet(&amp;pkt);\n    int64_t dts = av_gettime();\n    dts = av_rescale_q(dts, (AVRational){1, 1000000}, m_pVideoStream-&gt;time_base);\n    int duration = 90000 / VIDEO_FRAME_RATE;\n    if(m_prevVideoDts &gt; 0LL) {\n        duration = dts - m_prevVideoDts;\n    }\n    m_prevVideoDts = dts;\n\n    pkt.pts = AV_NOPTS_VALUE;\n    pkt.dts = m_currVideoDts;\n    m_currVideoDts += duration;\n    pkt.duration = duration;\n    if(bIFrame) {\n        pkt.flags |= AV_PKT_FLAG_KEY;\n    }\n    pkt.stream_index = m_pVideoStream-&gt;index;\n    pkt.data = (uint8_t*) pData;\n    pkt.size = iDataSize;\n\n    int ret = av_interleaved_write_frame(m_pFormatCtx, &amp;pkt);\n\n    if(ret &lt; 0) {\n        LogErr(\"Writing video frame failed.\");\n        return false;\n    }\n\n    Log(\"Writing video frame done.\");\n\n    av_free_packet(&amp;pkt);\n    return true;\n}\n\nbool AudioVideoRecorder::WriteAudio(const unsigned char *pEncodedData, size_t iDataSize) {\n    .................................\n    .................................\n    .................................\n    AVPacket pkt = {0};\n    av_init_packet(&amp;pkt);\n\n    int64_t dts = av_gettime();\n    dts = av_rescale_q(dts, (AVRational){1, 1000000}, (AVRational){1, 90000});\n    int duration = AUDIO_STREAM_DURATION; // 20\n    if(m_prevAudioDts &gt; 0LL) {\n        duration = dts - m_prevAudioDts;\n    }\n    m_prevAudioDts = dts;\n    pkt.pts = AV_NOPTS_VALUE;\n    pkt.dts = m_currAudioDts;\n    m_currAudioDts += duration;\n    pkt.duration = duration;\n\n    pkt.stream_index = m_pAudioStream-&gt;index;\n    pkt.flags |= AV_PKT_FLAG_KEY;\n    pkt.data = (uint8_t*) pEncodedData;\n    pkt.size = iDataSize;\n\n    int ret = av_interleaved_write_frame(m_pFormatCtx, &amp;pkt);\n    if(ret &lt; 0) {\n        LogErr(\"Writing audio frame failed: %d\", ret);\n        return false;\n    }\n\n    Log(\"Writing audio frame done.\");\n\n    av_free_packet(&amp;pkt);\n    return true;\n}\n</code></pre>\n\n<p>And I added stream like this -</p>\n\n<pre><code>AVStream* AudioVideoRecorder::AddMediaStream(enum AVCodecID codecID) {\n    ................................\n    .................................   \n    pStream = avformat_new_stream(m_pFormatCtx, codec);\n    if (!pStream) {\n        LogErr(\"Could not allocate stream.\");\n        return NULL;\n    }\n    pStream-&gt;id = m_pFormatCtx-&gt;nb_streams - 1;\n    pCodecCtx = pStream-&gt;codec;\n    pCodecCtx-&gt;codec_id = codecID;\n\n    switch(codec-&gt;type) {\n    case AVMEDIA_TYPE_VIDEO:\n        pCodecCtx-&gt;bit_rate = VIDEO_BIT_RATE;\n        pCodecCtx-&gt;width = PICTURE_WIDTH;\n        pCodecCtx-&gt;height = PICTURE_HEIGHT;\n        pStream-&gt;time_base = (AVRational){1, 90000};\n        pStream-&gt;avg_frame_rate = (AVRational){90000, 1};\n        pStream-&gt;r_frame_rate = (AVRational){90000, 1}; // though the frame rate is variable and around 15 fps\n        pCodecCtx-&gt;pix_fmt = STREAM_PIX_FMT;\n        m_pVideoStream = pStream;\n        break;\n\n    case AVMEDIA_TYPE_AUDIO:\n        pCodecCtx-&gt;sample_fmt = AV_SAMPLE_FMT_S16;\n        pCodecCtx-&gt;bit_rate = AUDIO_BIT_RATE;\n        pCodecCtx-&gt;sample_rate = AUDIO_SAMPLE_RATE;\n        pCodecCtx-&gt;channels = 1;\n        m_pAudioStream = pStream;\n        break;\n\n    default:\n        break;\n    }\n\n    /* Some formats want stream headers to be separate. */\n    if (m_pOutputFmt-&gt;flags &amp; AVFMT_GLOBALHEADER)\n        m_pFormatCtx-&gt;flags |= CODEC_FLAG_GLOBAL_HEADER;\n\n    return pStream;\n}\n</code></pre>\n\n<p>There are several problems with this calculation:</p>\n\n<ol>\n<li><p>The video is laggy and lags behind than audio increasingly with time.</p></li>\n<li><p>Suppose, an audio frame is received (<code>WriteAudio(..)</code>) little lately like 3 seconds, then the late frame should be started playing with 3 second delay, but it's not. The delayed frame is played consecutively with previous frame.</p></li>\n<li><p>Sometimes I recorded for ~40 seconds but the file duration is much like 2 minutes, but audio/video is played only few moments like 40 seconds and rest of the file contains nothing and seekbar jumps at en immediately after 40 seconds (tested in VLC).</p></li>\n</ol>\n\n<p>EDIT:</p>\n\n<p>According to Ronald S. Bultje's suggestion, what I've understand:</p>\n\n<pre><code>m_pAudioStream-&gt;time_base = (AVRational){1, 9000}; // actually no need to set as 9000 is already default value for audio as you said\nm_pVideoStream-&gt;time_base = (AVRational){1, 9000};\n</code></pre>\n\n<p>should be set as now both audio and video streams are now in same time base units.</p>\n\n<p>And for video:</p>\n\n<pre><code>...................\n...................\n\nint64_t dts = av_gettime(); // get current time in microseconds\ndts *= 9000; \ndts /= 1000000; // 1 second = 10^6 microseconds\npkt.pts = AV_NOPTS_VALUE; // is it okay?\npkt.dts = dts;\n// and no need to set pkt.duration, right?\n</code></pre>\n\n<p>And for audio: (exactly same as video, right?)</p>\n\n<pre><code>...................\n...................\n\nint64_t dts = av_gettime(); // get current time in microseconds\ndts *= 9000; \ndts /= 1000000; // 1 second = 10^6 microseconds\npkt.pts = AV_NOPTS_VALUE; // is it okay?\npkt.dts = dts;\n// and no need to set pkt.duration, right?\n</code></pre>\n\n<p>And I think they are now like sharing same <code>currDts</code>, right? Please correct me if I am wrong anywhere or missing anything.</p>\n\n<p>Also, if I want to use video stream time base as <code>(AVRational){1, frameRate}</code> and audio stream time base as <code>(AVRational){1, sampleRate}</code>, how the correct code should look like?</p>\n\n<p>EDIT 2.0:</p>\n\n<pre><code>m_pAudioStream-&gt;time_base = (AVRational){1, VIDEO_FRAME_RATE};\nm_pVideoStream-&gt;time_base = (AVRational){1, VIDEO_FRAME_RATE};\n</code></pre>\n\n<p>And </p>\n\n<pre><code>bool AudioVideoRecorder::WriteAudio(const unsigned char *pEncodedData, size_t iDataSize) {\n    ...........................\n    ......................\n    AVPacket pkt = {0};\n    av_init_packet(&amp;pkt);\n\n    int64_t dts = av_gettime() / 1000; // convert into millisecond\n    dts = dts * VIDEO_FRAME_RATE;\n    if(m_dtsOffset &lt; 0) {\n        m_dtsOffset = dts;\n    }\n\n    pkt.pts = AV_NOPTS_VALUE;\n    pkt.dts = (dts - m_dtsOffset);\n\n    pkt.stream_index = m_pAudioStream-&gt;index;\n    pkt.flags |= AV_PKT_FLAG_KEY;\n    pkt.data = (uint8_t*) pEncodedData;\n    pkt.size = iDataSize;\n\n    int ret = av_interleaved_write_frame(m_pFormatCtx, &amp;pkt);\n    if(ret &lt; 0) {\n        LogErr(\"Writing audio frame failed: %d\", ret);\n        return false;\n    }\n\n    Log(\"Writing audio frame done.\");\n\n    av_free_packet(&amp;pkt);\n    return true;\n}\n\nbool AudioVideoRecorder::WriteVideo(const unsigned char *pData, size_t iDataSize, bool const bIFrame) {\n    ........................................\n    .................................\n    AVPacket pkt = {0};\n    av_init_packet(&amp;pkt);\n    int64_t dts = av_gettime() / 1000;\n    dts = dts * VIDEO_FRAME_RATE;\n    if(m_dtsOffset &lt; 0) {\n        m_dtsOffset = dts;\n    }\n    pkt.pts = AV_NOPTS_VALUE;\n    pkt.dts = (dts - m_dtsOffset);\n\n    if(bIFrame) {\n        pkt.flags |= AV_PKT_FLAG_KEY;\n    }\n    pkt.stream_index = m_pVideoStream-&gt;index;\n    pkt.data = (uint8_t*) pData;\n    pkt.size = iDataSize;\n\n    int ret = av_interleaved_write_frame(m_pFormatCtx, &amp;pkt);\n\n    if(ret &lt; 0) {\n        LogErr(\"Writing video frame failed.\");\n        return false;\n    }\n\n    Log(\"Writing video frame done.\");\n\n    av_free_packet(&amp;pkt);\n    return true;\n}\n</code></pre>\n\n<p>Is the last change okay? The video and audio seems synced. Only problem is - the audio is played without the delay regardless the packet arrived in delay.\nLike - </p>\n\n<p>packet arrival: 1 2 3 4... (then next frame arrived after 3 sec) .. 5</p>\n\n<p>audio played: 1 2 3 4 (no delay) 5</p>\n\n<p>EDIT 3.0:</p>\n\n<p>zeroed audio sample data:</p>\n\n<pre><code>AVFrame* pSilentData;\npSilentData = av_frame_alloc();\nmemset(&amp;pSilentData-&gt;data[0], 0, iDataSize);\n\npkt.data = (uint8_t*) pSilentData;\npkt.size = iDataSize;\n\nav_freep(&amp;pSilentData-&gt;data[0]);\nav_frame_free(&amp;pSilentData);\n</code></pre>\n\n<p>Is this okay? But after writing this into file container, there are <strong><em>dot dot</em></strong> noise during playing the media. Whats the problem?</p>\n\n<p>EDIT 4.0:</p>\n\n<p>Well, <a href=\"https://stackoverflow.com/a/32007095/1162233\">For \u00b5-Law audio the zero value is represented as <code>0xff</code></a>. So -</p>\n\n<pre><code>memset(&amp;pSilentData-&gt;data[0], 0xff, iDataSize);\n</code></pre>\n\n<p>solve my problem.</p>\n"}, {"tags": ["c++", "winapi", "visual-studio-2015"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1439415300, "post_id": 31973092, "comment_id": 51858277, "body": "The content of that dialog is a WebBrowser, the text is rendered by Javascript.  You&#39;ll need to get your machine fixed and disable or repair whatever prevents JS from running."}], "answers": [{"comments": [{"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1497295612, "post_id": 44507248, "comment_id": 76007837, "body": "You are answering some different question, not what OP has asked."}], "tags": [], "owner": {"reputation": 2743, "user_id": 1592639, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/61c0I.png?s=128&g=1", "display_name": "Michael Haephrati", "link": "https://stackoverflow.com/users/1592639/michael-haephrati"}, "is_accepted": false, "score": -1, "last_activity_date": 1497295432, "creation_date": 1497295432, "answer_id": 44507248, "question_id": 31973092, "link": "https://stackoverflow.com/questions/31973092/new-win32-application-wizard-is-blank/44507248#44507248", "title": "New Win32 Application Wizard is blank", "body": "<p>The reason for that is that Console application doesn't have most of the options available for Win32 / MFC projects. There are no windows, dialogs or other elements to define. \nHowever, Console applications still have:\n- Precompiled header (yes / no)\n- Security Development Lifecycle (SDL) checks  (yes / no)\nYou can still build a Console application with ATL and MFC common headers.\n<a href=\"https://i.stack.imgur.com/SUZGz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SUZGz.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8668589, "user_type": "registered", "profile_image": "https://graph.facebook.com/746997638825835/picture?type=large", "display_name": "Viktor  Perepyolkin", "link": "https://stackoverflow.com/users/8668589/viktor-perepyolkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1506327952, "creation_date": 1506327952, "answer_id": 46400660, "question_id": 31973092, "link": "https://stackoverflow.com/questions/31973092/new-win32-application-wizard-is-blank/46400660#46400660", "title": "New Win32 Application Wizard is blank", "body": "<p>I had the same problem. In my case it appeared in an old Visual Studio version after installing VS Community 2015 on the same 64-bit Windows machine. The installer of VS Community 2015 creates a bunch of new and alters existing registry hacks that mshtml.dll uses to deal with executables with specific names, in our case with devenv.exe. These hacks are (in 64-bit Windows) located at </p>\n\n<pre><code>HKLM\\SOFTWARE\\Wow6432Node\\Microsoft\\Internet Explorer\\MAIN\\FeatureControl\n</code></pre>\n\n<p>So inside this FeatureControl branch I just had to change the value of DWORD parameter </p>\n\n<pre><code>FEATURE_LOCALMACHINE_LOCKDOWN\\devenv.exe\n</code></pre>\n\n<p>from 1 to 0, and then I could immediately create new projects in Visual Studio. This FEATURE_LOCALMACHINE_LOCKDOWN hack changes the Internet Explorer's \"security zone\", in which devenv.exe operates, while from the revelations of some of Visual Studio authors we know that \"wizards\" in old Visual Studios always ran in their special \"security zone\" with a unique identifier \"1000\", which let them enjoy very lax security settings. So VS Community 2015 effectively prevented JavaScript from running in an old Visual Studio's internal web browser (vsbrowse.dll, I believe?). Please note that the suppression of JavaScript may have a completely different cause in your case, and sorry for my poor English.     </p>\n"}], "owner": {"reputation": 21, "user_id": 5220617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb76b77693ebdfdb229b69fc30198beb?s=128&d=identicon&r=PG&f=1", "display_name": "Randy Thai", "link": "https://stackoverflow.com/users/5220617/randy-thai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1506327952, "creation_date": 1439405139, "last_edit_date": 1497295578, "question_id": 31973092, "link": "https://stackoverflow.com/questions/31973092/new-win32-application-wizard-is-blank", "title": "New Win32 Application Wizard is blank", "body": "<p>Whenever I try to create a new Win32 Console Application or Win32 Project, the Win32 Application Wizard pops up with the project setting bullet points empty and the \"Application Settings,\" \"Finish,\" and \"Cancel\" buttons unable to be clicked.</p>\n\n<p>When I searched for answered questions similar to mine, the solution that meant reinstalling after using CCleaner, didn't work.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439405707, "post_id": 31973071, "comment_id": 51853315, "body": "You can store pointers to the buttons in a two dimensional vector/list as well and access them like your <code>buildings</code> vector/list"}, {"owner": {"reputation": 1, "user_id": 4379293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5c90c3f0fdf2691311a7d12435cb17?s=128&d=identicon&r=PG&f=1", "display_name": "DaDuck", "link": "https://stackoverflow.com/users/4379293/daduck"}, "reply_to_user": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439407024, "post_id": 31973071, "comment_id": 51854002, "body": "Thanks! i shall try this."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1439407760, "post_id": 31973071, "comment_id": 51854417, "body": "You might also use a macro, as it can perform the <code>i</code> and <code>j</code> substitutions from your pseudocode. However, macros are sometimes frowned upon and using the C++ language to accomplish your goal is the preferred solution."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1439413277, "post_id": 31973071, "comment_id": 51857295, "body": "Every one of these objects has a name, and you can look them up <b>programmatically</b> by name using <code>findChildren</code>. The object name is the variable name, they are one and the same."}], "owner": {"reputation": 1, "user_id": 4379293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5c90c3f0fdf2691311a7d12435cb17?s=128&d=identicon&r=PG&f=1", "display_name": "DaDuck", "link": "https://stackoverflow.com/users/4379293/daduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1439411419, "answer_count": 0, "score": 0, "last_activity_date": 1439405108, "creation_date": 1439405108, "question_id": 31973071, "link": "https://stackoverflow.com/questions/31973071/c-qt-easy-way-of-making-incremental-pushbuttons", "closed_reason": "Duplicate", "title": "C++ Qt easy way of making Incremental PushButtons?", "body": "<p>I've been using Qt to make somewhat of Civ5 style game. I've just started using Qt and i am probably writing my code very inefficiently so sorry about my code. </p>\n\n<pre><code>if(buildings[0][0][0])\nui-&gt;r_1_n_1-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_camp_inactive+\";} QPushButton:hover { border-image: url\"+url_camp_active+\";} QPushButton:focus {border-image: url\"+url_camp_pressed+\";}\");\nelse if(buildings[0][0][1])\nui-&gt;r_1_n_1-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_fort_inactive+\";} QPushButton:hover { border-image: url\"+url_fort_active+\";} QPushButton:focus {border-image: url\"+url_fort_pressed+\";}\");\nelse\nui-&gt;r_1_n_1-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_inactive+\";} QPushButton:hover { border-image: url\"+url_active+\";} QPushButton:focus {border-image: url\"+url_pressed+\";}\");\n\nif(buildings[0][1][0])\nui-&gt;r_1_n_2-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_camp_inactive+\";} QPushButton:hover { border-image: url\"+url_camp_active+\";} QPushButton:focus {border-image: url\"+url_camp_pressed+\";}\");\nelse if(buildings[0][1][1])\nui-&gt;r_1_n_2-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_fort_inactive+\";} QPushButton:hover { border-image: url\"+url_fort_active+\";} QPushButton:focus {border-image: url\"+url_fort_pressed+\";}\");\nelse\nui-&gt;r_1_n_2-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_inactive+\";} QPushButton:hover { border-image: url\"+url_active+\";} QPushButton:focus {border-image: url\"+url_pressed+\";}\");\n\nif(buildings[0][2][0])\nui-&gt;r_1_n_3-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_camp_inactive+\";} QPushButton:hover { border-image: url\"+url_camp_active+\";} QPushButton:focus {border-image: url\"+url_camp_pressed+\";}\");\nelse if(buildings[0][2][1])\nui-&gt;r_1_n_3-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_fort_inactive+\";} QPushButton:hover { border-image: url\"+url_fort_active+\";} QPushButton:focus {border-image: url\"+url_fort_pressed+\";}\");\nelse\nui-&gt;r_1_n_3-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_inactive+\";} QPushButton:hover { border-image: url\"+url_active+\";} QPushButton:focus {border-image: url\"+url_pressed+\";}\");\n\nif(buildings[0][3][0])\nui-&gt;r_1_n_4-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_camp_inactive+\";} QPushButton:hover { border-image: url\"+url_camp_active+\";} QPushButton:focus {border-image: url\"+url_camp_pressed+\";}\");\nelse if(buildings[0][3][1])\nui-&gt;r_1_n_4-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_fort_inactive+\";} QPushButton:hover { border-image: url\"+url_fort_active+\";} QPushButton:focus {border-image: url\"+url_fort_pressed+\";}\");\nelse\nui-&gt;r_1_n_4-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_inactive+\";} QPushButton:hover { border-image: url\"+url_active+\";} QPushButton:focus {border-image: url\"+url_pressed+\";}\");\n\nif(buildings[0][4][0])\nui-&gt;r_1_n_5-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_camp_inactive+\";} QPushButton:hover { border-image: url\"+url_camp_active+\";} QPushButton:focus {border-image: url\"+url_camp_pressed+\";}\");\nelse if(buildings[0][4][1])\nui-&gt;r_1_n_5-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_fort_inactive+\";} QPushButton:hover { border-image: url\"+url_fort_active+\";} QPushButton:focus {border-image: url\"+url_fort_pressed+\";}\");\nelse\nui-&gt;r_1_n_5-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_inactive+\";} QPushButton:hover { border-image: url\"+url_active+\";} QPushButton:focus {border-image: url\"+url_pressed+\";}\");\n</code></pre>\n\n<p>i would like to know because i have about 50 other PushButtons name , r_1_n_(i), because all of the statements are similar is their any way to implement some time of for loop which decreases the amount of code needed. so im thinking of something like</p>\n\n<pre><code>    for(int j = 0; j &lt; number; i++)\n{\n    for(int i = 0; i &lt; number; i++)\n    {\n        if(buildings[j][i][0])\n            ui-&gt;r_(j)_n_(i)-&gt;setStyleSheet(\"QPushButton {border-image: url\"+url_camp_inactive+\";} QPushButton:hover { border-image: url\"+url_camp_active+\";} QPushButton:focus {border-image: url\"+url_camp_pressed+\";}\");     \n    }\n}    \n</code></pre>\n\n<p>now obviously doing r_(j)<em>n</em>(i) doesn't work but i was wondering if there was a way to make it work. Thanks.</p>\n"}, {"tags": ["c++", "memory-leaks"], "comments": [{"owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "edited": false, "score": 1, "creation_date": 1439405290, "post_id": 31973049, "comment_id": 51853073, "body": "You should get into the habit of using a tool to determine if there is a memory leak like <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\"><code>valgrind</code></a>."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1439406072, "post_id": 31973049, "comment_id": 51853510, "body": "In addition to the answers, read up about RAII to deal with memory management"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1439406364, "post_id": 31973049, "comment_id": 51853671, "body": "Short answer: Yes of course!"}], "answers": [{"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 3, "last_activity_date": 1439409244, "last_edit_date": 1439409244, "creation_date": 1439405324, "answer_id": 31973150, "question_id": 31973049, "link": "https://stackoverflow.com/questions/31973049/c-will-this-cause-a-memory-leak/31973150#31973150", "title": "C++ Will this cause a memory leak?", "body": "<ol>\n<li>You have a memory leak if you dont call a <code>delete</code> for every <code>new</code> (or <code>new[]</code> and <code>delete[]</code>).</li>\n<li>You need to keep a track of your allocated memory, this loop:</li>\n</ol>\n\n<hr>\n\n<pre><code> for ( int i = 0; i &lt; 10; i++ ) // main loop\n    array = getArray();\n</code></pre>\n\n<p>will create memory that you cannot recover the address of (for the first 9 arrays) as you have said. There is no way to get the address back so you can properly handle this memory. You need to do something like this:</p>\n\n<pre><code>int *array[10]\n...\n  for ( int i = 0; i &lt; 10; i++ ) // main loop\n    array[i] = getArray();\n</code></pre>\n\n<p>so that you can then delete all of your arrays correctly:</p>\n\n<pre><code>   for ( int i = 0; i &lt; 10; i++ )\n        delete[] array[i];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 6, "last_activity_date": 1439406290, "last_edit_date": 1495535200, "creation_date": 1439405496, "answer_id": 31973211, "question_id": 31973049, "link": "https://stackoverflow.com/questions/31973049/c-will-this-cause-a-memory-leak/31973211#31973211", "title": "C++ Will this cause a memory leak?", "body": "<p>Each call to <code>new</code> must be paired with a call to <code>delete</code> to avoid a memory leak (or <code>new[]</code> and <code>delete[]</code>).</p>\n\n<p><em>How to delete the memory</em> depends on what you're doing but since you don't keep access beyond the for-loop then you could easily delete it within the body of the for-loop.</p>\n\n<pre><code>for (int i = 0; i &lt; 10; ++i)\n{\n    array = getArray();\n    /* do  something with 'array' */\n    delete[] array;\n}\n</code></pre>\n\n<p>Better yet, why not use <code>std::vector&lt;int&gt;</code> and avoid directly performing any memory allocation?</p>\n\n<p><strong>Edit:</strong>\nAs <a href=\"https://stackoverflow.com/users/3747990/niall\">@Niall</a> mentions in the comments you should also familiarize yourself with <code>std::unique_ptr</code> (assuming you're compiler supports it). It uses RAII (<a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=3&amp;cad=rja&amp;uact=8&amp;ved=0CCcQFjACahUKEwiGzoDnnqTHAhVIbz4KHZ9xAK4&amp;url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FResource_Acquisition_Is_Initialization&amp;ei=XJnLVYawMMje-QGf44HwCg&amp;usg=AFQjCNE5aT779vmH9EEox1BZY0dDh-raPQ&amp;sig2=XX38AHVvjpExpGSxy-sPlA&amp;bvm=bv.99804247,d.cWw\" rel=\"nofollow noreferrer\">Wikipedia link</a>, <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=5&amp;cad=rja&amp;uact=8&amp;ved=0CDkQFjAEahUKEwiGzoDnnqTHAhVIbz4KHZ9xAK4&amp;url=http%3A%2F%2Fen.cppreference.com%2Fw%2Fcpp%2Flanguage%2Fraii&amp;ei=XJnLVYawMMje-QGf44HwCg&amp;usg=AFQjCNEYFl1PaiY3kTrbGYxPg9CNUH1JSw&amp;sig2=gb08HJfplfsh-QHokX2Y-g&amp;bvm=bv.99804247,d.cWw\" rel=\"nofollow noreferrer\">cppreference link</a>) to automatically handle the memory management. For example, <code>std::unique_ptr&lt;int[]&gt;</code> which will automatically call <code>delete[]</code> once the class goes out of scope.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1439407064, "last_edit_date": 1495540680, "creation_date": 1439405649, "answer_id": 31973252, "question_id": 31973049, "link": "https://stackoverflow.com/questions/31973049/c-will-this-cause-a-memory-leak/31973252#31973252", "title": "C++ Will this cause a memory leak?", "body": "<p>As other answers explained, you have a <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leak</a> (and using <code>const</code> won't help about them).</p>\n\n<p>Several systems (notably Linux) have <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> ported to them. If possible use it (to test at runtime). So compile your C++11 code with <code>g++ -std=c++11 -Wall -Wextra -g</code> into a <code>./myprog</code> executable, then run <code>valgrind ./myprog</code>; it will give you useful diagnostics at runtime.</p>\n\n<p>With recent <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> you could also pass <code>-fsanitize=address</code> to the compiler. Read more about the <a href=\"https://en.wikipedia.org/wiki/AddressSanitizer\" rel=\"nofollow noreferrer\">address sanitizer</a>.</p>\n\n<p>BTW, you should often use <a href=\"https://en.wikipedia.org/wiki/Smart_pointer\" rel=\"nofollow noreferrer\">smart pointers</a> in your C++ code, e.g. <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">std::shared_ptr</a> or <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">std::unique_ptr</a>. Read also about <a href=\"https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow noreferrer\">RAII</a>, <a href=\"https://en.wikipedia.org/wiki/Weak_reference\" rel=\"nofollow noreferrer\">weak references</a>, and the <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of five</a>.</p>\n\n<p>You might also learn more about <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\" rel=\"nofollow noreferrer\">garbage collection</a> techniques (<a href=\"https://en.wikipedia.org/wiki/Reference_counting\" rel=\"nofollow noreferrer\">reference counting</a> is a quite limited one, unfriendly for <a href=\"https://en.wikipedia.org/wiki/Cycle_graph\" rel=\"nofollow noreferrer\">cyclic</a> graphs, but good enough for <a href=\"https://en.wikipedia.org/wiki/Directed_acyclic_graph\" rel=\"nofollow noreferrer\">DAG</a>s). You could consider using <a href=\"http://www.hboehm.info/gc/\" rel=\"nofollow noreferrer\">Boehm's conservative garbage collector</a>. See also <a href=\"https://stackoverflow.com/a/8019003/841108\">this</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 4107209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NQunX.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4107209/andrew"}, "edited": false, "score": 0, "creation_date": 1439406904, "post_id": 31973261, "comment_id": 51853946, "body": "thanks, this is helpful. Sorry, on the second question I meant to write <code>const</code> rather than <code>static</code>."}], "tags": [], "owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "is_accepted": false, "score": 1, "last_activity_date": 1439405675, "creation_date": 1439405675, "answer_id": 31973261, "question_id": 31973049, "link": "https://stackoverflow.com/questions/31973049/c-will-this-cause-a-memory-leak/31973261#31973261", "title": "C++ Will this cause a memory leak?", "body": "<p>1 - You do have memory leaks. To solve it you can explicitly delete after you're done with each array.</p>\n\n<pre><code>for ( int i = 0; i &lt; 10; i++ ) {\n    int *array = getArray();\n    // ... Do stuff ...\n    delete[];\n}\n</code></pre>\n\n<p>Or return a <code>unique_ptr</code> for arrays. That way you don't have to delete anything.</p>\n\n<pre><code>std::unique_ptr&lt; int[] &gt; getArray( )\n{\n    std::unique_ptr&lt; int[] &gt; r{ new int[10] };\n    for (int i = 0; i &lt; 10; ++i) {\n        r[i] = i;\n    }\n    return std::move( r );\n}\n</code></pre>\n\n<p>In both cases you can't guess the size of the arrays. You just know you're getting an array of 10 elements.</p>\n\n<p>You could use an <code>std::array</code> to manage the memory for you and keep the length of the array visible.</p>\n\n<p>2 - If you use <code>static</code> you'll always return the same array and there's no need to delete.</p>\n"}], "owner": {"reputation": 83, "user_id": 4107209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NQunX.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4107209/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 31973211, "answer_count": 4, "score": -3, "last_activity_date": 1439409244, "creation_date": 1439405046, "last_edit_date": 1439406811, "question_id": 31973049, "link": "https://stackoverflow.com/questions/31973049/c-will-this-cause-a-memory-leak", "title": "C++ Will this cause a memory leak?", "body": "<p>I'm trying to understand the use of delete[]. Will the following code have a memory leak?</p>\n\n<pre><code>int * getArray( )\n{\n    int *r = new int[10];\n    for (int i = 0; i &lt; 10; ++i)\n        r[i] = i;\n    return r;\n}\n\nint main ()\n{\n    int *array;\n    for ( int i = 0; i &lt; 10; i++ ) // main loop\n        array = getArray();\n    return 0;\n}\n</code></pre>\n\n<p>The main loop seems to be allocating memory for 10 arrays, where only the last array has a valid pointer. If this is a memory leak, how do I free the memory storing the previous 9 arrays?</p>\n\n<p>I can also compile using <code>const int r[10];</code> in place of <code>int *r = new int[10];</code>. Can the use of <code>const</code> avoid a memory leak?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "unique-ptr"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 6, "creation_date": 1439405776, "post_id": 31972917, "comment_id": 51853357, "body": "You can&#39;t make a <code>unique_ptr</code> to something on the stack. That doesn&#39;t make any sense."}, {"owner": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1439406035, "post_id": 31972917, "comment_id": 51853487, "body": "What @T.C. said and consider <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\">std::make_unique</a> if your compiler supports C++14."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1439406423, "post_id": 31972917, "comment_id": 51853707, "body": "@T.C. You can, but it&#39;s rarely useful."}, {"owner": {"reputation": 55, "user_id": 4099088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ab3eabdaf8e3605449c96d66b30b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Maximal", "link": "https://stackoverflow.com/users/4099088/maximal"}, "edited": false, "score": 0, "creation_date": 1439406496, "post_id": 31972917, "comment_id": 51853742, "body": "Ouh man, I feel so stupid right now. Right everything works as expected when allocating the stringTest object on the heap... :/ Thank you"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1439406520, "post_id": 31972917, "comment_id": 51853755, "body": "@DanielJour ...with the default deleter. /sigh"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1439406563, "post_id": 31972917, "comment_id": 51853773, "body": "Your <code>changeText</code> looks fishy. Why do you assign to <code>newText</code>? If you change the previous assignment to use <code>std::forward</code> and thus possibly move semantics, then you get undefined behaviour."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1439406684, "post_id": 31972917, "comment_id": 51853835, "body": "@T.C. sorry, I&#39;m just a bit pedantic ;)"}, {"owner": {"reputation": 55, "user_id": 4099088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ab3eabdaf8e3605449c96d66b30b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Maximal", "link": "https://stackoverflow.com/users/4099088/maximal"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1439407764, "post_id": 31972917, "comment_id": 51854421, "body": "@DanielJour yes, I just put that there to be sure that std::ref really passes the arguments by reference and forgot to delete it, but of course you&#39;re absolutely right and I shouldn&#39;t use it like this in a real program."}], "owner": {"reputation": 55, "user_id": 4099088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ab3eabdaf8e3605449c96d66b30b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Maximal", "link": "https://stackoverflow.com/users/4099088/maximal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 820, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439404611, "creation_date": 1439404611, "question_id": 31972917, "link": "https://stackoverflow.com/questions/31972917/vc-2015-stdmove-on-unique-pointer-runtime-assertion-failure", "title": "VC++ 2015: std::move on unique pointer runtime assertion failure", "body": "<p>I  just started going through Anthony Williams' book \"C++ Concurrency in Action\" and so I tried out some stuff. </p>\n\n<p>I created a class that is basically just a container for a std::string:</p>\n\n<pre><code>class stringTest {\npublic:\n    stringTest(std::string&amp; text) : text{text} {}\n    void operator() () const { std::cout &lt;&lt; text &lt;&lt; std::endl; } \n    void changeText(std::string&amp;&amp; newText)\n    {\n        this-&gt;text = newText;\n        newText = std::string{ \"here we go\" };\n    }\nprivate:\n    std::string text;\n}; \nusing bigObjectPtr = std::unique_ptr&lt;stringTest&gt;;\n</code></pre>\n\n<p>Now I wanted to start a new Thread with the function processObject and use std::move to move the unique pointer to the new thread. </p>\n\n<pre><code>void processObject(bigObjectPtr object)\n{\n    object-&gt;changeText(std::string{\"bla\"});\n    object-&gt;operator() ();\n}\n\nint main()\n{\n    stringTest text{ std::string{\"this is a test\"} };\n\n    bigObjectPtr object{ &amp;text };\n    std::thread t{ processObject, std::move(object) };\n    t.join();\n\n    return 0;\n}\n</code></pre>\n\n<p>This code will compile just fine but I get a runtime error:</p>\n\n<pre><code>Debug Assertion Failed!\n...\nFile: minkernel\\crts\\ucrt\\src\\appcrt\\heap\\debug_heap.cpp\nLine: 892\n\nExpression: is_block_tpye_valid(header-&gt;block_use)\n...\n</code></pre>\n\n<p>I did some changes and found out that I get the same error if I just call processObject instead of starting a new thread and the error message only appears when calling operator(), changeText works just fine.</p>\n\n<p>Could you tell me why this error message is appearing here and where I did something wrong?</p>\n\n<p>Thank you,\nMax </p>\n"}, {"tags": ["c++", "allegro5", "cartesian-coordinates"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "edited": false, "score": 0, "creation_date": 1439412196, "post_id": 31973385, "comment_id": 51856686, "body": "Thank you so much. It seems that this is exactly what I needed."}, {"owner": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "edited": false, "score": 0, "creation_date": 1439435603, "post_id": 31973385, "comment_id": 51863540, "body": "Would you mind explaining how and why those transformations work? Or maybe a link to a page explaining it?"}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "reply_to_user": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "edited": false, "score": 0, "creation_date": 1439449492, "post_id": 31973385, "comment_id": 51868599, "body": "Both of them are equations of lines that pass through two points, and the two points are the known coordinates of the two corners in both screen and plot. So we know <code>(pll, qll)</code> is supposed to be converted to <code>(xll, yll)</code> and <code>(pur, qur)</code> to <code>(xur, yur)</code>. Now, any other value that we choose for <code>x</code> or <code>y</code> has a counter part in <code>p</code> and <code>q</code> that is on the line that passes through those two points."}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "reply_to_user": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "edited": false, "score": 0, "creation_date": 1439449596, "post_id": 31973385, "comment_id": 51868665, "body": "You even don&#39;t have to use the two corners that I mentioned. For example, you can even use one of the corners and the center, or center and the width and height of the window, but over all the transformations are just linear interpolations :-)"}], "tags": [], "owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1439406775, "last_edit_date": 1439406775, "creation_date": 1439406171, "answer_id": 31973385, "question_id": 31972897, "link": "https://stackoverflow.com/questions/31972897/translating-axes-while-changing-bounds/31973385#31973385", "title": "Translating axes while changing bounds", "body": "<p>Hopefully this answers your question:</p>\n\n<p>Let's assume the window that you are plotting at (in pixel coordinate) is such that the lower-left corner is <code>(p_ll, q_ll)</code> and the upper-right corner is <code>(p_ur, q_ur)</code>.</p>\n\n<p>In your Cartesian coordinate, however, the same locations are <code>(x_ll, y_ll)</code> and <code>(x_ur, y_ur)</code>. Then these are the transformations you need:</p>\n\n<pre><code>p(x) = p_ll + (p_ur - p_ll) * (x - x_ll) / (x_ur - x_ll)\nq(y) = q_ll + (q_ur - q_ll) * (y - y_ll) / (y_ur - y_ll)\n</code></pre>\n\n<p>So, for example, in case that the window is <code>x from 0 to 600 and y from 0 to 600</code>, and the plot bounds are <code>x from -2 to 2 and y from -1 to 1</code> then a point that has a coordinate of <code>(0.0, 0.0)</code> is going to be at <code>(p(0), q(0))</code> or</p>\n\n<pre><code>p(0.0) = 0 + (600 - 0) * (0 -(-2)) / (2 - (-2)) = 300\nq(0.0) = 600 + (0 - 600) * (0 - (-1)) / (1 - (-1)) = 300\n</code></pre>\n\n<p>same for any other point. You can try the equation and you should find that <code>p(-2) = 0</code>, <code>p(2) = 600</code>, <code>q(-1) = 600</code>, and <code>q(1) = 0</code>.</p>\n\n<p>Note that I'm here assuming pixel y coordinate is pointing down (as almost all monitor coordinates do) while the Cartesian coordinate y is pointing up.</p>\n\n<p>If you want to go from screen coordinate to plot coordinate (for example if you want to convert the position of a mouse click to its Cartesian counter-part) then use these inverse transformations:</p>\n\n<pre><code>x(p) = x_ll + (x_ur - x_ll) * (p - p_ll) / (p_ur - p_ll)\ny(q) = y_ll + (y_ur - y_ll) * (q - q_ll) / (q_ur - q_ll)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 31973385, "answer_count": 1, "score": 2, "last_activity_date": 1439418517, "creation_date": 1439404543, "last_edit_date": 1495541677, "question_id": 31972897, "link": "https://stackoverflow.com/questions/31972897/translating-axes-while-changing-bounds", "title": "Translating axes while changing bounds", "body": "<p>So I understand to translate:</p>\n\n<pre><code>x = x' + x0     or     x' = x - x0\ny = y' + y0     or     y' = y - y0\n</code></pre>\n\n<p>where (x,y) are old coordinates relative to xy system, (x',y') are new coordinates relative to x'y' system, and (x0,y0) are coordinates relative to old xy system.</p>\n\n<p>I'm looking to translate a system while also changing the bounds. I want to \"zoom in\" on a particular section of a graph within a fixed window, which would change the origin and the bounds. </p>\n\n<p>For reference, I asked a similar question <a href=\"https://stackoverflow.com/questions/31953674/translating-x-y-while-scaling?noredirect=1\">here</a>, but I think it was a little more confusing.</p>\n"}, {"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1439404522, "post_id": 31972824, "comment_id": 51852663, "body": "<code>static strVector    myVector;</code> is a declaration, and you still need to initialize it. Add <code>strVector Config::myVector;</code> to your cpp file. Also guessing this is a duplicate question."}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1439404572, "post_id": 31972824, "comment_id": 51852689, "body": "Also don&#39;t forget to <code>#include &lt;string&gt;</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1439404659, "post_id": 31972824, "comment_id": 51852735, "body": "Or have a look here:  <a href=\"http://stackoverflow.com/questions/23983916/cant-set-value-of-static-object-field-error-lnk2001-unresolved-external-symbo\" title=\"cant set value of static object field error lnk2001 unresolved external symbo\">stackoverflow.com/questions/23983916/&hellip;</a>"}], "owner": {"reputation": 17, "user_id": 3302655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QUNHt.jpg?s=128&g=1", "display_name": "AndiFaria", "link": "https://stackoverflow.com/users/3302655/andifaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1439404534, "answer_count": 0, "score": 0, "last_activity_date": 1439404475, "creation_date": 1439404301, "last_edit_date": 1439404475, "question_id": 31972824, "link": "https://stackoverflow.com/questions/31972824/c-beginner-set-value-to-a-class-vector-member-using-push-back", "closed_reason": "Duplicate", "title": "C++ beginner - Set value to a class vector member using push_back", "body": "<p>I started learning C++ recently, and when trying some code on my own I got stuck in this problem tha I cant find the solution. I'm sure it's a simple thing, followed some advices from other questions but cant put this simple code to work.</p>\n\n<p>I'm using visual studio 2013.</p>\n\n<p>When compiling, I get the following error:</p>\n\n<blockquote>\n  <p>Error  1   error LNK2001: unresolved external symbol \"public: static     class std::vector,class std::allocator >,class     std::allocator,class std::allocator > > > Config::myVector\" (?myVector@Config@@2V?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@A)   d:\\User\\andifar\\documents\\visual studio 2013\\Projects\\teste\\teste\\addItem.obj   teste</p>\n</blockquote>\n\n<p>Here's my header file:</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntypedef std::vector &lt;std::string&gt; strVector;\n\nclass Config\n{\npublic:\n    Config();\n    static void         addItem();\n    static strVector    myVector;\n};\n</code></pre>\n\n<p>and my cpp file:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include \"addItem.h\"\n\nConfig::Config(){};\n\nvoid Config::addItem(){\n    Config::myVector.push_back(\"Hi\");\n}\n</code></pre>\n\n<p>main:</p>\n\n<pre><code>#include \"addItem.h\"\n\nint main(int argc, char** argv)\n{   \n    Config c;\n    c.addItem();\n}\n</code></pre>\n"}, {"tags": ["c++", "clang", "compiler-bug", "c++17", "fold-expression"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439403722, "post_id": 31972608, "comment_id": 51852224, "body": "I cannot get this to compile in any compiler.  tried MSVC2015 and <a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a>"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1439404043, "post_id": 31972608, "comment_id": 51852406, "body": "<code>static_cast&lt;void&gt;((std::cout &lt;&lt; ... &lt;&lt; args));</code> seems to work (that is, double parens), and my guess is that clang is correct, since a fold expression requires its own pair of parentesis"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1439404082, "post_id": 31972608, "comment_id": 51852428, "body": "I had the same setup with cin. If I remember the problem is that somehow it tries to expand <code>(cin &lt;&lt; (1 &lt;&lt; 2))</code> instead of <code>((cin &gt;&gt; 1)&gt;&gt; 2)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1439404842, "post_id": 31972828, "comment_id": 51852829, "body": "I don&#39;t see why <code>(void)(std::cout &lt;&lt; ... &lt;&lt; args);</code> doesn&#39;t work, though. That part looks like a bug to me."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1439406365, "post_id": 31972828, "comment_id": 51853673, "body": "So the answer is &quot;all three&quot; then. Thank you very much, Praetorian for the answer and T.C. for the bug report :)"}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 11, "last_activity_date": 1439405506, "last_edit_date": 1439405506, "creation_date": 1439404309, "answer_id": 31972828, "question_id": 31972608, "link": "https://stackoverflow.com/questions/31972608/clang-and-the-binary-fold-expressions-the-curse-of-the-empty-parameter-pack/31972828#31972828", "title": "Clang and the binary fold expressions \u2014 The curse of the empty parameter pack", "body": "<p>You need an extra set of parentheses when casting to <code>void</code> using the functional notation cast, otherwise the parentheses are considered part of the cast expression instead of the fold expression. The <a href=\"http://en.cppreference.com/w/cpp/language/fold\" rel=\"noreferrer\">fold expression syntax</a> itself requires a set of parentheses.</p>\n\n<p>All of the following work without producing any warnings:</p>\n\n<pre><code>void((std::cout &lt;&lt; ... &lt;&lt; args));\n(void)((std::cout &lt;&lt; ... &lt;&lt; args));\n</code></pre>\n\n<p>Or just call some <code>ostream</code> member function to avoid the unused result warning</p>\n\n<pre><code>(std::cout &lt;&lt; ... &lt;&lt; args).flush();\n</code></pre>\n\n<hr>\n\n<p>As T.C. mentions in the comments below, the behavior with <code>(void)(std::cout &lt;&lt; ... &lt;&lt; args);</code> seems like a clang bug. The syntax for a cast notation is specified in <em>5.4 [expr.cast]</em></p>\n\n<blockquote>\n  <p><em>cast-expression</em>:<br/>\n  &nbsp;&nbsp;<em>unary-expression</em><br/>\n  &nbsp;&nbsp;<em>( type-id ) cast-expression</em></p>\n</blockquote>\n\n<p>Since parentheses are not required as part of the cast expression, that usage shouldn't be producing warnings, and more importantly, it should result in printing the arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1439404867, "creation_date": 1439404867, "answer_id": 31972993, "question_id": 31972608, "link": "https://stackoverflow.com/questions/31972608/clang-and-the-binary-fold-expressions-the-curse-of-the-empty-parameter-pack/31972993#31972993", "title": "Clang and the binary fold expressions \u2014 The curse of the empty parameter pack", "body": "<p>A fold expression, from [expr.prim.fold] is:</p>\n\n<blockquote>\n  <p>A fold expression performs a fold of a template parameter pack (14.5.3) over a binary operator.<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;<em>fold-expression</em>:<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <em>cast-expression</em> <em>fold-operator</em> ... )<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( ... <em>fold-operator</em> <em>cast-expression</em> )<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <em>cast-expression</em> <em>fold-operator</em> ... <em>fold-operator</em> <em>cast-expression</em> )</p>\n</blockquote>\n\n<p>Note that in all cases, the parentheses are part of the grammar. So your initial example is syntactically incorrect, and must be:</p>\n\n<pre><code>template &lt;class... Args&gt;\nvoid foo(Args... args) {\n    (std::cout &lt;&lt; ... &lt;&lt; args);\n}\n</code></pre>\n\n<p>That will then give you a warning in the case of an empty pack, since the binary fold reduces to just <code>std::cout;</code> To get rid of that warning, you can go the usual route of casting to <code>void</code> - just that the inner set of parentheses are part of the grammar so you need <em>two</em>:</p>\n\n<pre><code>void((std::cout &lt;&lt; ... &lt;&lt; args));\n</code></pre>\n\n<p>Or you could just throw in an extra <code>endl</code> or the like:</p>\n\n<pre><code>(std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;\n</code></pre>\n\n<p>Or return the result:</p>\n\n<pre><code>template &lt;class... Args&gt;\nstd::ostream&amp; foo(Args... args) {\n    return (std::cout &lt;&lt; ... &lt;&lt; args);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": false, "score": 3, "last_activity_date": 1479097790, "creation_date": 1479097790, "answer_id": 40581906, "question_id": 31972608, "link": "https://stackoverflow.com/questions/31972608/clang-and-the-binary-fold-expressions-the-curse-of-the-empty-parameter-pack/40581906#40581906", "title": "Clang and the binary fold expressions \u2014 The curse of the empty parameter pack", "body": "<p>I decided to take a better look at this bug in the Clang source. Here's the offending section of code. This case happens when it's just finished parsing <code>(&lt;type&gt;)</code> and is now parsing a following parenthesized expression:</p>\n\n<pre><code>} else if (isTypeCast) {\n  // Parse the expression-list.\n  InMessageExpressionRAIIObject InMessage(*this, false);\n\n  ExprVector ArgExprs;\n  CommaLocsTy CommaLocs;\n\n  if (!ParseSimpleExpressionList(ArgExprs, CommaLocs)) {\n    // FIXME: If we ever support comma expressions as operands to\n    // fold-expressions, we'll need to allow multiple ArgExprs here.\n    if (ArgExprs.size() == 1 &amp;&amp; isFoldOperator(Tok.getKind()) &amp;&amp;\n        NextToken().is(tok::ellipsis))\n    return ParseFoldExpression(Result, T);\n\n    ExprType = SimpleExpr;\n    Result = Actions.ActOnParenListExpr(OpenLoc, Tok.getLocation(),\n                                        ArgExprs);\n  }\n}\n\n// The beginning of ParseFoldExpression(LHS, T):\nif (LHS.isInvalid()) {\n  T.skipToEnd();\n  return true;\n}\n</code></pre>\n\n<p>The specific part of the code responsible for this bug is here:</p>\n\n<pre><code>return ParseFoldExpression(Result, T);\n</code></pre>\n\n<p>It turns out that <code>Result</code> is never set apart from its initial <code>true</code> value. I believe it should be set to <code>ArgExprs.front()</code>, which now holds <code>std::cout</code>. </p>\n\n<p>Now you'll notice the FIXME as well. While unrelated to this issue in particular, it might be worth fixing alongside this.</p>\n\n<p>Being my first Clang fix, I still have several things to do before submitting a change (for reference, Clang 4.0 is currently in development). I would be more than happy for this to be fixed at all, whether it's by me or someone else. At the very least, my findings are documented somewhere for now.</p>\n"}], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1286, "favorite_count": 2, "accepted_answer_id": 31972828, "answer_count": 3, "score": 14, "last_activity_date": 1479097790, "creation_date": 1439403518, "last_edit_date": 1439403846, "question_id": 31972608, "link": "https://stackoverflow.com/questions/31972608/clang-and-the-binary-fold-expressions-the-curse-of-the-empty-parameter-pack", "title": "Clang and the binary fold expressions \u2014 The curse of the empty parameter pack", "body": "<p>Specifically Clang 3.6.0, the one currently hosted by Coliru.</p>\n\n<p>All these snippets are called from :</p>\n\n<pre><code>int main() {\n    foo();\n    std::cout &lt;&lt; \"\\n----\\n\";\n    foo(1, 2, 3);\n}\n</code></pre>\n\n<p>The following code :</p>\n\n<pre><code>template &lt;class... Args&gt;\nvoid foo(Args... args) {\n    std::cout &lt;&lt; ... &lt;&lt; args;\n}\n</code></pre>\n\n<p>Triggers the following compilation error :</p>\n\n<pre><code>main.cpp:7:17: error: expected ';' after expression\n    std::cout &lt;&lt; ... &lt;&lt; args;\n                ^\n                ;\nmain.cpp:7:15: error: expected expression\n    std::cout &lt;&lt; ... &lt;&lt; args;\n              ^\n</code></pre>\n\n<p>So I tried putting parentheses around the expression :</p>\n\n<pre><code>(std::cout &lt;&lt; ... &lt;&lt; args);\n</code></pre>\n\n<p>It works, but triggers a warning :</p>\n\n<pre><code>main.cpp:7:6: warning: expression result unused [-Wunused-value]\n    (std::cout &lt;&lt; ... &lt;&lt; args);\n     ^~~~~~~~~\nmain.cpp:11:5: note: in instantiation of function template specialization 'foo&lt;&gt;' requested here\n    foo();\n    ^\n</code></pre>\n\n<p>So I tried to discard the value of the expression with a function-style cast to <code>void</code> :</p>\n\n<pre><code>void(std::cout &lt;&lt; ... &lt;&lt; args);\n</code></pre>\n\n<p>But :</p>\n\n<pre><code>main.cpp:7:20: error: expected ')'\n    void(std::cout &lt;&lt; ... &lt;&lt; args);\n                   ^\nmain.cpp:7:9: note: to match this '('\n    void(std::cout &lt;&lt; ... &lt;&lt; args);\n        ^\n</code></pre>\n\n<p>I tried a <code>static_cast</code> too, for the same result.</p>\n\n<p>So I tried with a C-cast instead  :</p>\n\n<pre><code>(void)(std::cout &lt;&lt; ... &lt;&lt; args);\n</code></pre>\n\n<p>But then :</p>\n\n<pre><code>main.cpp:6:18: warning: unused parameter 'args' [-Wunused-parameter]\nvoid foo(Args... args) {\n                 ^\n</code></pre>\n\n<p>... and my output is only <code>----</code> : <code>foo(1, 2, 3);</code> doesn't output anymore !</p>\n\n<p>Is Clang cursed by an evil force from future standards, does it have a bug, or is the problem sitting on my chair right now ?</p>\n"}, {"tags": ["android", "c++", "ios", "cocos2d-x", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5220530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb5545aefa2d6d7e51de1a0a067fa6df?s=128&d=identicon&r=PG&f=1", "display_name": "John Cooper", "link": "https://stackoverflow.com/users/5220530/john-cooper"}, "edited": false, "score": 1, "creation_date": 1439618174, "post_id": 32002975, "comment_id": 51945923, "body": "I currently have all the builds set up but I am constantly changing tools to build and debug. The new VS tools allow building Windows, Android, and iOS (Using a Mac build server) in one IDE. Getting the projects set up is where I&#39;m having trouble."}], "tags": [], "owner": {"reputation": 660, "user_id": 1621659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ecfb1be8455d6711ca9fd2f4970f787?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/1621659/chris-becke"}, "is_accepted": false, "score": -3, "last_activity_date": 1439530711, "creation_date": 1439530711, "answer_id": 32002975, "question_id": 31972499, "link": "https://stackoverflow.com/questions/31972499/cocos2d-x-with-visual-studio-2015-cross-platform-tools/32002975#32002975", "title": "Cocos2d-x with Visual Studio 2015 cross platform tools", "body": "<p>Do you not still need at least access to a Mac with XCode?</p>\n\n<p>Currently the entire project structure of Cocos2d-x is setup around having a Visual Studio solution for windows / windows phone builds, an xcode project for Mac and iOS builds and a NDK build script for Android builds.</p>\n\n<p>So I would recommend concentrating on getting the supported builds working, and once you understand them, you can convert to an all-MSVC build process.</p>\n"}, {"tags": [], "owner": {"reputation": 2090, "user_id": 390562, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/126acfbb1d40fec651032a9fddcf95dc?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/390562/timo"}, "is_accepted": false, "score": 1, "last_activity_date": 1446023200, "last_edit_date": 1446023200, "creation_date": 1445975341, "answer_id": 33377192, "question_id": 31972499, "link": "https://stackoverflow.com/questions/31972499/cocos2d-x-with-visual-studio-2015-cross-platform-tools/33377192#33377192", "title": "Cocos2d-x with Visual Studio 2015 cross platform tools", "body": "<p><a href=\"https://blogs.windows.com/buildingapps/2015/06/15/running-cocos2d-x-on-windows-10/\" rel=\"nofollow\">This link</a> seems to hold an explanation and some examples (i.e. links to other git repos). I've followed the instructions below and was able to run a x86 executable on my development system (64 bit did not work). I did not check the Android or iOS projects.</p>\n\n<p>I quoted the getting started part of the link, the rest of the page explains some details about the generated code.</p>\n\n<blockquote>\n  <p>Getting Started</p>\n  \n  <p>Ensure you have Windows 10 installed. If you cannot install this on your primary machine, you can set up a virtual machine on Windows\n  10 for Cocos2d-x development.</p>\n  \n  <p>Download and install Microsoft Visual Studio. Make sure that the \u201cUniversal Windows App Development Tools\u201d are selected from the\n  optional features list as these are needed for UWP development.Cocos\n  image 1</p>\n  \n  <p>Install Python 2.7.x</p>\n  \n  <p>Add c:\\Python27 to the Path Environment setting</p>\n</blockquote>\n\n<p>I think that I got a correct python installation with visual studio 2015 community edition, that is added to the path automatically.</p>\n\n<blockquote>\n  <p>Clone the Cocos2d-x repo [<a href=\"https://github.com/cocos2d/cocos2d-x]\" rel=\"nofollow\">https://github.com/cocos2d/cocos2d-x]</a> and follow the steps described within the related readme file\n  (download-deps.py and git submodule update \u2013init)</p>\n</blockquote>\n\n<p>Instead of cloning the git repo, I actually downloaded cocos2d-x-3.8.1.zip from the website, so far this seems to work. I used the following commands in the folder where I unzipped.</p>\n\n<pre><code>python download-deps.py\npython setup.py\n</code></pre>\n\n<p>As said I did not check the Android and/or iOS projects that were generated.</p>\n\n<blockquote>\n  <p>Open up command prompt and use the command:</p>\n\n<pre><code>cocos new myWin10Game -l cpp -d projects\n</code></pre>\n</blockquote>\n\n<p>NB: After this generation step, the output prompted me that I needed to change some things in the Android and iOS projects.</p>\n\n<blockquote>\n  <p>Enter the proj.win10 folder and open the solution. In this example, it will be myWin10Game.sln.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 279, "user_id": 4250906, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cacda40435fec7c6cce5b763544d2748?s=128&d=identicon&r=PG&f=1", "display_name": "Vinh.TV", "link": "https://stackoverflow.com/users/4250906/vinh-tv"}, "is_accepted": false, "score": 0, "last_activity_date": 1447179355, "last_edit_date": 1447179355, "creation_date": 1447178305, "answer_id": 33636507, "question_id": 31972499, "link": "https://stackoverflow.com/questions/31972499/cocos2d-x-with-visual-studio-2015-cross-platform-tools/33636507#33636507", "title": "Cocos2d-x with Visual Studio 2015 cross platform tools", "body": "<p>A Chinese guy made it. I have tried but has no idea how to add source code into VS 2015(Actually, he has mentioned \"proj.win10\" module???). Here the link:\n<a href=\"http://blog.csdn.net/emcodelin/article/details/47956919\" rel=\"nofollow noreferrer\">http://blog.csdn.net/emcodelin/article/details/47956919</a></p>\n\n<p>Here the section you may interesting (from google translate).</p>\n\n<p><a href=\"https://i.stack.imgur.com/eiggS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eiggS.png\" alt=\"Use Visual Studio 2015 debugger Android platform game Cocos2d-x C ++ code\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1439, "user_id": 2654002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sw2fD.jpg?s=128&g=1", "display_name": "Ian Huff", "link": "https://stackoverflow.com/users/2654002/ian-huff"}, "is_accepted": false, "score": 0, "last_activity_date": 1470171641, "creation_date": 1470171641, "answer_id": 38730362, "question_id": 31972499, "link": "https://stackoverflow.com/questions/31972499/cocos2d-x-with-visual-studio-2015-cross-platform-tools/38730362#38730362", "title": "Cocos2d-x with Visual Studio 2015 cross platform tools", "body": "<p>This question is a bit old old, but if anyone hits it in search results there is now a Visual Studio project to target Android devices with Cocos2d-x. It's not integrated with the cocos template system, so it currently needs to be updated per cocos version. Currently it's for VS 2015 Update 3 and Cocos 3.12.</p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/07/12/cocos2d-x-visual-studio-android-project/\" rel=\"nofollow\">https://blogs.msdn.microsoft.com/vcblog/2016/07/12/cocos2d-x-visual-studio-android-project/</a></p>\n\n<p>I developed it so feel free to ping any questions my way.</p>\n"}], "owner": {"reputation": 51, "user_id": 5220530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb5545aefa2d6d7e51de1a0a067fa6df?s=128&d=identicon&r=PG&f=1", "display_name": "John Cooper", "link": "https://stackoverflow.com/users/5220530/john-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3485, "favorite_count": 0, "answer_count": 4, "score": 5, "last_activity_date": 1470171641, "creation_date": 1439403164, "last_edit_date": 1439618354, "question_id": 31972499, "link": "https://stackoverflow.com/questions/31972499/cocos2d-x-with-visual-studio-2015-cross-platform-tools", "title": "Cocos2d-x with Visual Studio 2015 cross platform tools", "body": "<p>How do I set up Cocos2d-x (3.7) to work with Visual Studio 2015's new C++ cross platform tools for Android and iOS? This is relatively new, and there is not much documentation besides the simplest project. I have Cocos2d-x and a few SDKBOX plugins and I can't seem to get anything set up in Visual Studio.</p>\n\n<p>Go vote here for a sample.\n<a href=\"https://code.msdn.microsoft.com/site/requests/Cocos2d-x-e34be78c?ShowSubmitLinkForm=False\" rel=\"nofollow\">https://code.msdn.microsoft.com/site/requests/Cocos2d-x-e34be78c?ShowSubmitLinkForm=False</a></p>\n"}, {"tags": ["c++", "deep-learning", "caffe", "conv-neural-network"], "answers": [{"comments": [{"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439471062, "post_id": 31984228, "comment_id": 51882529, "body": "Thanks Shai, now I understood. In the original prototxt is               blobs_lr: 1   blobs_lr: 2,                                                                                        and you replaced with                                                                     param {     lr_mult: 1     decay_mult: 1   }   param {     lr_mult: 2     decay_mult: 0   } what is the difference?"}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "reply_to_user": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439471328, "post_id": 31984228, "comment_id": 51882762, "body": "@batuman there are several changes w.r.t. old prototxt. notice that &quot;<code>layers</code>&quot; is now just &quot;<code>layer</code>&quot;, the <code>&#39;type:&#39;</code> is a string and not an enumeration and <code>blobs_lr</code> and <code>deacy_mult</code> are now under <code>param</code> for each blob."}, {"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439472257, "post_id": 31984228, "comment_id": 51883482, "body": "Thanks Shai, should I change to all layers or only topmost layer is enough?"}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "reply_to_user": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439472395, "post_id": 31984228, "comment_id": 51883599, "body": "to move to new prototxt format you can use the utility <code>.&#47;build&#47;tools&#47;upgrade_net_proto_text</code>"}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "reply_to_user": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439472442, "post_id": 31984228, "comment_id": 51883631, "body": "@batuman As for structural changes in the net - only the top most FC layer should be changed to reflect the change from 10 classes classification to binary classification."}, {"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439473040, "post_id": 31984228, "comment_id": 51884067, "body": "Thanks Shai. currently I am using test_predict_imagenet.cpp to test the trained model for a single image. But real application will be on a video clip and running frame by frame, is there any more efficient program or algorithm or method to run through video clip in frame by frame?"}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "reply_to_user": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439473231, "post_id": 31984228, "comment_id": 51884225, "body": "@batuman - this is a new question you should ask it in a new post."}, {"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439473319, "post_id": 31984228, "comment_id": 51884290, "body": "Thanks Shai. Yeah I should."}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "reply_to_user": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439473382, "post_id": 31984228, "comment_id": 51884335, "body": "@batuman feel free to link the new question to this one if you feel it gives more context. Otherwise, a fresh new question is also Okay."}, {"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439479569, "post_id": 31984228, "comment_id": 51889189, "body": "Hi Shan, for both negative and positive images in testing, I always got label is 1 and values are 0.5 and 0.5. Whatever image I input, I got the same result. What does it mean?"}, {"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439514354, "post_id": 31984228, "comment_id": 51904837, "body": "Yes I did trained with two outputs."}, {"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 1, "creation_date": 1439545848, "post_id": 31984228, "comment_id": 51916799, "body": "Sorry it is working now. I forgot to change number of outputs is 2 at training :)"}, {"owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "edited": false, "score": 0, "creation_date": 1439560298, "post_id": 31984228, "comment_id": 51925756, "body": "Thanks Shai, I have another query at <a href=\"http://stackoverflow.com/questions/31992971/detecting-pedestrian-using-caffenet-model-at-moderate-framerate\" title=\"detecting pedestrian using caffenet model at moderate framerate\">stackoverflow.com/questions/31992971/&hellip;</a>  if you have idea. Thanks"}], "tags": [], "owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "is_accepted": true, "score": 2, "last_activity_date": 1439457607, "creation_date": 1439457607, "answer_id": 31984228, "question_id": 31972448, "link": "https://stackoverflow.com/questions/31972448/how-to-understand-the-cifar10-prediction-output/31984228#31984228", "title": "How to understand the Cifar10 prediction output?", "body": "<p>Why do you have <code>num_output: 10</code> for the last layer <code>ip2</code>? you only need 2-way classifier? Why are you using labels 1 and 2 instead of 0 and 1?</p>\n\n<p><strong>What you got</strong>: You have 11 outputs: one is the <code>\"label\"</code> output from the data layer, and the other 10 outputs are the 10-vector output of the softmax layer. It is unclear what the values of the 10-vector are since you only trained using two labels, thus 8 out of 10 entries were not supervised at all. Moreover, judging by the first output it seems both tests were samples with label <code>1</code> and not <code>2</code>.</p>\n\n<p><strong>What you should do:</strong><br>\n1. Change the topmost fully connected layer to have only two outputs (I also changed the format to match the new version protobuff)</p>\n\n<pre><code>layer {\n  name: \"ip2/pedestrains\"\n  type: \"InnerProduct\"\n  bottom: \"ip1\"\n  top: \"ip2\"\n  param {\n    lr_mult: 1\n    decay_mult: 1\n  }\n  param {\n    lr_mult: 2\n    decay_mult: 0\n  }\n  inner_product_param {\n    num_output: 2 # This is what you need changing\n  }\n}\n</code></pre>\n\n<p>2. Change the binary labels in your training data to 0/1 rather that 1/2.  </p>\n\n<p>Now you can train again and see what you get.</p>\n"}], "owner": {"reputation": 6008, "user_id": 2467772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19d111f9436ccf10d1391751e54a2699?s=128&d=identicon&r=PG", "display_name": "batuman", "link": "https://stackoverflow.com/users/2467772/batuman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 31984228, "answer_count": 1, "score": 0, "last_activity_date": 1462279684, "creation_date": 1439402997, "last_edit_date": 1592644375, "question_id": 31972448, "link": "https://stackoverflow.com/questions/31972448/how-to-understand-the-cifar10-prediction-output", "title": "How to understand the Cifar10 prediction output?", "body": "<p>I have trained <code>Cifar10</code>(<a href=\"http://caffe.berkeleyvision.org/\" rel=\"nofollow noreferrer\">caffe</a>) model for two classes classification. Pedestrian and non-pedestrian. Training looks fine, I have updated weights in a <code>caffemodel</code> file. I used two labels 1 for pedestrians and 2 for non-pedestrians, together with images for pedestrians (64 x 160) and background images (64 x 160).\nAfter training, I do testing with positive image(pedestrian image) and negative image (background image). My testing <code>prototxt</code> file is as shown below</p>\n<pre><code>name: &quot;CIFAR10_quick_test&quot;\nlayers \n{\n  name: &quot;data&quot;\n  type: MEMORY_DATA\n  top: &quot;data&quot;\n  top: &quot;label&quot;\n  memory_data_param \n  {\n    batch_size: 1\n    channels: 3\n    height: 160\n    width: 64\n  }\n  transform_param \n  {\n    crop_size: 64\n    mirror: false\n    mean_file: &quot;../../examples/cifar10/mean.binaryproto&quot;\n  }\n}\nlayers {\n  name: &quot;conv1&quot;\n  type: CONVOLUTION\n  bottom: &quot;data&quot;\n  top: &quot;conv1&quot;\n  blobs_lr: 1\n  blobs_lr: 2\n  convolution_param {\n    num_output: 32\n    pad: 2\n    kernel_size: 5\n    stride: 1\n  }\n}\nlayers {\n  name: &quot;pool1&quot;\n  type: POOLING\n  bottom: &quot;conv1&quot;\n  top: &quot;pool1&quot;\n  pooling_param {\n    pool: MAX\n    kernel_size: 3\n    stride: 2\n  }\n}\nlayers {\n  name: &quot;relu1&quot;\n  type: RELU\n  bottom: &quot;pool1&quot;\n  top: &quot;pool1&quot;\n}\nlayers {\n  name: &quot;conv2&quot;\n  type: CONVOLUTION\n  bottom: &quot;pool1&quot;\n  top: &quot;conv2&quot;\n  blobs_lr: 1\n  blobs_lr: 2\n  convolution_param {\n    num_output: 32\n    pad: 2\n    kernel_size: 5\n    stride: 1\n  }\n}\nlayers {\n  name: &quot;relu2&quot;\n  type: RELU\n  bottom: &quot;conv2&quot;\n  top: &quot;conv2&quot;\n}\nlayers {\n  name: &quot;pool2&quot;\n  type: POOLING\n  bottom: &quot;conv2&quot;\n  top: &quot;pool2&quot;\n  pooling_param {\n    pool: AVE\n    kernel_size: 3\n    stride: 2\n  }\n}\nlayers {\n  name: &quot;conv3&quot;\n  type: CONVOLUTION\n  bottom: &quot;pool2&quot;\n  top: &quot;conv3&quot;\n  blobs_lr: 1\n  blobs_lr: 2\n  convolution_param {\n    num_output: 64\n    pad: 2\n    kernel_size: 5\n    stride: 1\n  }\n}\nlayers {\n  name: &quot;relu3&quot;\n  type: RELU\n  bottom: &quot;conv3&quot;\n  top: &quot;conv3&quot;\n}\nlayers {\n  name: &quot;pool3&quot;\n  type: POOLING\n  bottom: &quot;conv3&quot;\n  top: &quot;pool3&quot;\n  pooling_param {\n    pool: AVE\n    kernel_size: 3\n    stride: 2\n  }\n}\nlayers {\n  name: &quot;ip1&quot;\n  type: INNER_PRODUCT\n  bottom: &quot;pool3&quot;\n  top: &quot;ip1&quot;\n  blobs_lr: 1\n  blobs_lr: 2\n  inner_product_param {\n    num_output: 64\n  }\n}\nlayers {\n  name: &quot;ip2&quot;\n  type: INNER_PRODUCT\n  bottom: &quot;ip1&quot;\n  top: &quot;ip2&quot;\n  blobs_lr: 1\n  blobs_lr: 2\n  inner_product_param {\n    num_output: 10\n  }\n}\nlayers {\n  name: &quot;prob&quot;\n  type: SOFTMAX\n  bottom: &quot;ip2&quot;\n  top: &quot;prob&quot;\n}\n</code></pre>\n<p>For testing, I used <code>test_predict_imagenet.cpp</code> and did some modifications especially for paths and image size.</p>\n<p>I can't figure out the test output. When I test with positive image, I got the output as</p>\n<pre><code>I0813 01:55:30.378114  7668 test_predict_cifarnet.cpp:72] 1\nI0813 01:55:30.379082  7668 test_predict_cifarnet.cpp:72] 3.90971e-007\nI0813 01:55:30.381088  7668 test_predict_cifarnet.cpp:72] 0.00406029\nI0813 01:55:30.383090  7668 test_predict_cifarnet.cpp:72] 0.995887\nI0813 01:55:30.384119  7668 test_predict_cifarnet.cpp:72] 1.96203e-006\nI0813 01:55:30.385095  7668 test_predict_cifarnet.cpp:72] 3.50333e-005\nI0813 01:55:30.386119  7668 test_predict_cifarnet.cpp:72] 1.2796e-008\nI0813 01:55:30.387097  7668 test_predict_cifarnet.cpp:72] 1.48836e-005\nI0813 01:55:30.389093  7668 test_predict_cifarnet.cpp:72] 1.12237e-007\nI0813 01:55:30.390100  7668 test_predict_cifarnet.cpp:72] 4.71238e-008\nI0813 01:55:30.391101  7668 test_predict_cifarnet.cpp:72] 9.04134e-008\n</code></pre>\n<p>When I test with a negative image, I got the output as</p>\n<pre><code>I0813 01:53:40.896139 10856 test_predict_cifarnet.cpp:72] 1\nI0813 01:53:40.897117 10856 test_predict_cifarnet.cpp:72] 6.20882e-006\nI0813 01:53:40.898115 10856 test_predict_cifarnet.cpp:72] 7.10468e-005\nI0813 01:53:40.900184 10856 test_predict_cifarnet.cpp:72] 0.999911\nI0813 01:53:40.901185 10856 test_predict_cifarnet.cpp:72] 3.4275e-006\nI0813 01:53:40.902189 10856 test_predict_cifarnet.cpp:72] 2.38526e-007\nI0813 01:53:40.903192 10856 test_predict_cifarnet.cpp:72] 2.29073e-007\nI0813 01:53:40.905187 10856 test_predict_cifarnet.cpp:72] 1.7243e-006\nI0813 01:53:40.906188 10856 test_predict_cifarnet.cpp:72] 5.40765e-007\nI0813 01:53:40.908195 10856 test_predict_cifarnet.cpp:72] 1.57534e-006\nI0813 01:53:40.909195 10856 test_predict_cifarnet.cpp:72] 3.72312e-006\n</code></pre>\n<p>How to understand the testing output?</p>\n<p>Is there any more effecient testing algorithm for testing the model from video feed (frame by frame from video clip)?</p>\n"}, {"tags": ["c++", "linux", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 2300, "user_id": 4174003, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-InNr_uDXeYs/AAAAAAAAAAI/AAAAAAAAAGs/orin92nUpE8/photo.jpg?sz=128", "display_name": "Vladislav Varslavans", "link": "https://stackoverflow.com/users/4174003/vladislav-varslavans"}, "edited": false, "score": 0, "creation_date": 1439410583, "post_id": 31972427, "comment_id": 51855797, "body": "Please see: <a href=\"http://stackoverflow.com/questions/3840582/still-reachable-leak-detected-by-valgrind\" title=\"still reachable leak detected by valgrind\">stackoverflow.com/questions/3840582/&hellip;</a>"}, {"owner": {"reputation": 52630, "user_id": 4596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1d983e092b649de25c520a40d325fc?s=128&d=identicon&r=PG", "display_name": "richq", "link": "https://stackoverflow.com/users/4596/richq"}, "edited": false, "score": 1, "creation_date": 1439448414, "post_id": 31972427, "comment_id": 51867971, "body": "Mint has gcc 4.x while arch has gcc 5.2 at the time of writing, so there&#39;s that difference. A simple <code>int main(void) { return 0; }</code> compiled with g++ and run with the same valgrind options on arch shows the same &quot;leak&quot;. Just add a suppression for this warning if you&#39;re worried about noise hiding real issues."}, {"owner": {"reputation": 685, "user_id": 138906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/944c3bb27124e415785f43bf83565d1f?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/138906/matthew"}, "reply_to_user": {"reputation": 52630, "user_id": 4596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1d983e092b649de25c520a40d325fc?s=128&d=identicon&r=PG", "display_name": "richq", "link": "https://stackoverflow.com/users/4596/richq"}, "edited": false, "score": 0, "creation_date": 1439473199, "post_id": 31972427, "comment_id": 51884194, "body": "@richq So perhaps the problem is in libgcc?  I think it must be in a library somewhere since the binary compiled on arch shows no problem on mint.  It looks like your results on that test code answer my question (I&#39;m not worried about which system library is at fault as long as I know my code is correctly freeing things).  You could convert your comment to an answer if you want and I can accept it."}], "answers": [{"tags": [], "owner": {"reputation": 52630, "user_id": 4596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1d983e092b649de25c520a40d325fc?s=128&d=identicon&r=PG", "display_name": "richq", "link": "https://stackoverflow.com/users/4596/richq"}, "is_accepted": true, "score": 1, "last_activity_date": 1439491189, "creation_date": 1439491189, "answer_id": 31996013, "question_id": 31972427, "link": "https://stackoverflow.com/questions/31972427/different-valgrind-output-on-different-machines/31996013#31996013", "title": "Different Valgrind output on different machines", "body": "<p>Mint has gcc 4.x while Arch has gcc 5.2 at the time of writing, so there's that difference. This simple program compiled with g++ 5.2 and run on Arch with the same valgrind options shows the same \"leak\".</p>\n\n<pre><code>int main(void)\n{\n    return 0;\n}\n</code></pre>\n\n<p>Just add a suppression for this warning if you're worried about noise hiding real issues.</p>\n"}], "owner": {"reputation": 685, "user_id": 138906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/944c3bb27124e415785f43bf83565d1f?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/138906/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 31996013, "answer_count": 1, "score": 3, "last_activity_date": 1439491189, "creation_date": 1439402952, "last_edit_date": 1439427130, "question_id": 31972427, "link": "https://stackoverflow.com/questions/31972427/different-valgrind-output-on-different-machines", "title": "Different Valgrind output on different machines", "body": "<p>I have a strange situation where the Valgrind output for the exact same executable is different on one machine than it is on another.</p>\n\n<p>I'm writing a windows registry reading/writing library in C++, and I've been trying to be very robust in writing the code. So I've been running Valgrind all along and fixing memory leaks as they're introduced by means of an executable that is generated from a bundle of unit tests.</p>\n\n<p>My main development PC is running Linux Mint Debian Edition x86_64.  One weekend, I cloned my repository to my laptop which is running Arch x86_64 and I started getting memory leaks (or rather, still-reachable blocks) showing up in Valgrind.  After much hair pulling, I realized that even the last commit that was clean on Mint DE was showing leaks on Arch.  I also noticed that the number of allocs is more than quadruple on the Arch box, though I don't know if that means anything.</p>\n\n<p>Here's what I have using the same exe's on both machines (compiled on 1 machine and copied to the other):</p>\n\n<p>Mint DE x86_64:</p>\n\n<pre><code>valgrind --leak-check=full --show-leak-kinds=all ./regnixtest\n==12248== Memcheck, a memory error detector\n==12248== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==12248== Using Valgrind-3.10.0 and LibVEX; rerun with -h for copyright info\n==12248== Command: ./regnixtest\n==12248== \nTesting Create Valid NK...passed\n[ normal command output snipped for brevity ]\n==12248== \n==12248== HEAP SUMMARY:\n==12248==     in use at exit: 0 bytes in 0 blocks\n==12248==   total heap usage: 603 allocs, 603 frees, 608,657,070 bytes allocated\n==12248== \n==12248== All heap blocks were freed -- no leaks are possible\n==12248== \n==12248== For counts of detected and suppressed errors, rerun with: -v\n==12248== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Arch x86_64:</p>\n\n<pre><code>valgrind --leak-check=full --show-leak-kinds=all ./regnixtest \n==5006== Memcheck, a memory error detector\n==5006== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==5006== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==5006== Command: ./regnixtest\n==5006== \nTesting Create Valid NK...passed\n[ normal command output snipped for brevity ]\n==5006== \n==5006== HEAP SUMMARY:\n==5006==     in use at exit: 72,704 bytes in 1 blocks\n==5006==   total heap usage: 2,927 allocs, 2,926 frees, 608,844,359 bytes allocated\n==5006== \n==5006== 72,704 bytes in 1 blocks are still reachable in loss record 1 of 1\n==5006==    at 0x4C29F90: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5006==    by 0x4EC01EF: pool (eh_alloc.cc:117)\n==5006==    by 0x4EC01EF: __static_initialization_and_destruction_0 (eh_alloc.cc:244)\n==5006==    by 0x4EC01EF: _GLOBAL__sub_I_eh_alloc.cc (eh_alloc.cc:307)\n==5006==    by 0x400F0E9: call_init.part.0 (in /usr/lib/ld-2.21.so)\n==5006==    by 0x400F1FA: _dl_init (in /usr/lib/ld-2.21.so)\n==5006==    by 0x4000DB9: ??? (in /usr/lib/ld-2.21.so)\n==5006== \n==5006== LEAK SUMMARY:\n==5006==    definitely lost: 0 bytes in 0 blocks\n==5006==    indirectly lost: 0 bytes in 0 blocks\n==5006==      possibly lost: 0 bytes in 0 blocks\n==5006==    still reachable: 72,704 bytes in 1 blocks\n==5006==         suppressed: 0 bytes in 0 blocks\n==5006== \n==5006== For counts of detected and suppressed errors, rerun with: -v\n==5006== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Is this a problem with one of the libraries on my Arch box?  Below is the output of ldd on each in case that sheds any light:</p>\n\n<p>Mint DE x86_64:</p>\n\n<pre><code>ldd ./regnixtest\nlinux-vdso.so.1 (0x00007ffc76ffc000)\nlibstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f080dcaa000)\nlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f080d9a9000)\nlibgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f080d792000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f080d3e9000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f080dfd2000)\n</code></pre>\n\n<p>Arch x86_64:</p>\n\n<pre><code>ldd ./regnixtest\nlinux-vdso.so.1 (0x00007ffd81bd5000)\nlibstdc++.so.6 =&gt; /usr/lib/libstdc++.so.6 (0x00007fcf9d788000)\nlibm.so.6 =&gt; /usr/lib/libm.so.6 (0x00007fcf9d484000)\nlibgcc_s.so.1 =&gt; /usr/lib/libgcc_s.so.1 (0x00007fcf9d26e000)\nlibc.so.6 =&gt; /usr/lib/libc.so.6 (0x00007fcf9cecc000)\n/lib64/ld-linux-x86-64.so.2 (0x00007fcf9db0a000)\n</code></pre>\n\n<p>This project will eventually be open source, but I wasn't quite ready to put the code out there yet.  If it will help, I can go ahead and put it on GitHub anyway.</p>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1439402834, "post_id": 31972364, "comment_id": 51851723, "body": "Did you compile with the <code>-fopenmp</code> flag?"}], "answers": [{"comments": [{"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 1, "creation_date": 1439404017, "post_id": 31972414, "comment_id": 51852392, "body": "It&#39;s also probably worth noting that <code>#pragma omp parallel for</code> is short for <code>#pragma omp parallel</code> followed by <code>#pragma omp for</code>."}], "tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": false, "score": 1, "last_activity_date": 1439402886, "creation_date": 1439402886, "answer_id": 31972414, "question_id": 31972364, "link": "https://stackoverflow.com/questions/31972364/using-openmp-in-c-class/31972414#31972414", "title": "Using OpenMP in c++ class", "body": "<p>Try</p>\n\n<pre><code>#pragma omp parallel for private(i)\nfor (i = 0; i &lt; num_tet_phys; i++)\n  tet_phys[i].cal_Mn(...);\n</code></pre>\n\n<p>Note the use of <code>parallel for</code>.</p>\n\n<p>and compile with the <code>-fopenmp</code> flag.</p>\n\n<p>The <code>#pragma omp parallel</code> creates a team of threads, all of which execute the next statement (in your case, the entire for loop). After the statement, the threads join back into one.</p>\n\n<p>The <code>#pragma omp parallel for</code> creates a team of threads, which divide the work of the for loop between them.</p>\n"}], "owner": {"reputation": 1, "user_id": 5220459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/583d7412600dc206d22e5364222ffcfb?s=128&d=identicon&r=PG&f=1", "display_name": "Juny", "link": "https://stackoverflow.com/users/5220459/juny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439402886, "creation_date": 1439402699, "question_id": 31972364, "link": "https://stackoverflow.com/questions/31972364/using-openmp-in-c-class", "title": "Using OpenMP in c++ class", "body": "<p>I'm new to OpenMP. I'm trying to use OpenMP in my c++ code. The code is too complicated so I simplify the question as follow:</p>\n\n<pre><code>class CTet\n{\n    ...\n    void cal_Mn(...);\n}\n\nint i, num_tet_phys;\nvector&lt;CTet&gt; tet_phys;\n\nnum_tet_phys = ...;\ntet_phys.resize(num_tet_phys);\n\n#pragma omp parallel private(i)\nfor (i = 0; i &lt; num_tet_phys; i++)\n    tet_phys[i].cal_Mn(...);\n</code></pre>\n\n<p>I hope that the for loop can run in parallel but it seems that all threads run the whole loop independently. The calculation is repeated by every threads. What's problem in my code? How to fix it?\nThank you!</p>\n\n<p>Jun</p>\n"}, {"tags": ["c++", "c", "xcode", "debugging", "lldb"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1439402922, "post_id": 31972345, "comment_id": 51851775, "body": "Are you using lldb from XCode or from the command-line?"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1439404360, "post_id": 31972345, "comment_id": 51852589, "body": "You should be able to set a breakpoint on the function and step through - it will show you all that."}, {"owner": {"reputation": 17, "user_id": 5146687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ac507ba5c04bce8050f5f550cae77?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5146687/daniel"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1439405019, "post_id": 31972345, "comment_id": 51852924, "body": "That works if I have the code of the inspected app. But, what if I&#39;m debugging an app that I don&#39;t have the source code for? (for instance, this is a test app from our teacher, it has symbols exported)."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1439405921, "post_id": 31972345, "comment_id": 51853439, "body": "It works the same way... In terminal (eg. lldb some.app), then set a breakpoint on the function or offset."}, {"owner": {"reputation": 17, "user_id": 5146687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ac507ba5c04bce8050f5f550cae77?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5146687/daniel"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1439407317, "post_id": 31972345, "comment_id": 51854186, "body": "Right. I see 3 groups (Exception State Registers, Floating point registers, general purpose registers). But still, no idea how to get the arguments value. (I updated my question to reflect what I really want). Thanks!"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1439414480, "post_id": 31972345, "comment_id": 51857898, "body": "Using <code>frame variable</code> should show you the args; sometimes it doesn&#39;t and you need to find the pointer, which you can generally get from register read --all."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5146687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ac507ba5c04bce8050f5f550cae77?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5146687/daniel"}, "edited": false, "score": 0, "creation_date": 1440183706, "post_id": 31977147, "comment_id": 52184562, "body": "Architecture: 32bits, calling convention: x86"}], "tags": [], "owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "is_accepted": true, "score": 1, "last_activity_date": 1439422461, "creation_date": 1439422461, "answer_id": 31977147, "question_id": 31972345, "link": "https://stackoverflow.com/questions/31972345/how-to-print-the-memory-address-and-the-value-of-the-arguments-of-a-c-c-functi/31977147#31977147", "title": "How to print the memory address and the value of the arguments of a C/C++ function that is being debugged with LLDB?", "body": "<p>The disassembly that you posted is x86. The arguments are on the stack. If you break before the function prolog, the arguments are relative to the stack pointer, <code>%esp</code> (which is accessed as <code>$esp</code> in <code>lldb</code>):</p>\n\n<pre><code># The return address:\nx/w $esp\n# The first argument:\nx/w $esp+4\n# The second argument:\nx/w $esp+8\n</code></pre>\n\n<p>If you break after the prolog (<code>0x9a7bfc3c</code> in your example), which is where symbolic breakpoints are usually placed, the arguments are found relative to the frame pointer (<code>%ebp</code> a.k.a. <code>$ebp</code>):</p>\n\n<pre><code># The saved frame pointer of the previous frame:\nx/w $ebp\n# The return address:\nx/w $ebp+4\n# The first argument:\nx/w $ebp+8\n# The second argument:\nx/w $ebp+12\n</code></pre>\n\n<p>For other architectures, the arguments will be stored differently, often in the registers. Also, the above assumes the \"cdecl\" calling convention. There are others. Have you been told which architecture(s) and calling convention(s) you're expected to be familiar with?</p>\n"}], "owner": {"reputation": 17, "user_id": 5146687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ac507ba5c04bce8050f5f550cae77?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5146687/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 31977147, "answer_count": 1, "score": 1, "last_activity_date": 1439422461, "creation_date": 1439402615, "last_edit_date": 1439414729, "question_id": 31972345, "link": "https://stackoverflow.com/questions/31972345/how-to-print-the-memory-address-and-the-value-of-the-arguments-of-a-c-c-functi", "title": "How to print the memory address and the value of the arguments of a C/C++ function that is being debugged with LLDB?", "body": "<p>I'm getting ready for my OS test. One of the tools we use is the debugger(LLDB) and my goal is to inspect the arguments of a C function or a C++ method.</p>\n\n<p>For instance: How may I see the memory address and the value of the arguments passed to _SMenuItemCommandID?? - I have tried different things, but died in the attempt.</p>\n\n<pre><code>HITestBox`_SMenuItemCommandID(MenuData*, unsigned short, unsigned long):\n0x9a7bfc35:  pushl  %ebp\n0x9a7bfc36:  movl   %esp, %ebp\n0x9a7bfc38:  pushl  %esi\n0x9a7bfc39:  subl   $52, %esp\n0x9a7bfc3c:  movl   8(%ebp), %esi\n0x9a7bfc3f:  movl   88(%esi), %eax\n0x9a7bfc42:  movl   %eax, -16(%ebp)\n0x9a7bfc45:  movzwl 12(%ebp), %ecx\n0x9a7bfc49:  movw   %cx, -12(%ebp)\n0x9a7bfc4d:  movl   $0, -8(%ebp)\n0x9a7bfc54:  leal   -8(%ebp), %edx\n0x9a7bfc57:  movl   %edx, 28(%esp)\n0x9a7bfc5b:  movl   %ecx, 4(%esp)\n0x9a7bfc5f:  movl   %eax, (%esp)\n0x9a7bfc62:  movl   $0, 24(%esp)\n0x9a7bfc6a:  movl   $4, 20(%esp)\n0x9a7bfc72:  movl   $0, 16(%esp)\n0x9a7bfc7a:  movl   $1835232612, 12(%esp)\n0x9a7bfc82:  movl   $12, 8(%esp)\n0x9a7bfc8a:  calll  0x9a5f7c9b                ; elementGetDataAtIndex\n0x9a7bfc8f:  movl   16(%ebp), %eax\n0x9a7bfc92:  cmpl   %eax, -8(%ebp)\n0x9a7bfc95:  je     0x9a7bfcae                ; _SMenuItemCommandID(MenuData*, unsigned short, unsigned long) + 121\n0x9a7bfc97:  movl   %eax, 4(%esp)\n0x9a7bfc9b:  leal   -16(%ebp), %eax\n0x9a7bfc9e:  movl   %eax, (%esp)\n0x9a7bfca1:  calll  0x9a7e2914                ; mID::SetCommandID(unsigned long)\n0x9a7bfca6:  movl   %esi, (%esp)\n0x9a7bfca9:  calll  0x9a5f7c65                ; invalidate(MenuData*)\n0x9a7bfcae:  xorl   %eax, %eax\n0x9a7bfcb0:  addl   $52, %esp\n0x9a7bfcb3:  popl   %esi\n0x9a7bfcb4:  popl   %ebp\n0x9a7bfcb5:  ret    \n</code></pre>\n\n<p>Edit:\nSay I'm debugging an app which I don't have the source code, but I have the symbols exported.\nSay, at some moment this code gets executed:</p>\n\n<pre><code>MenuData *myData = (MenuData *)0x28ff44;;\nSMenuItemCommandID(myData, 3, 4);\n</code></pre>\n\n<p>What do I need to do (with LLDB) to get:  </p>\n\n<pre><code>arg0 = 0x28ff44   \narg1 =3  \narg2 =4  \n</code></pre>\n"}, {"tags": ["c++", "memory-leaks", "signals", "valgrind"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1439402847, "post_id": 31972344, "comment_id": 51851729, "body": "I don&#39;t see you allocating anything, how can it then be a leak? Can you please show the Valgrind output (complete and unedited)?"}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1439402912, "post_id": 31972344, "comment_id": 51851766, "body": "@JoachimPileborg Edited the question added more code. please have a look."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1439403084, "post_id": 31972344, "comment_id": 51851863, "body": "Well there must be memory for the thread when the rest of the process exits, right? That might look like a lead from Valgrinds point of view."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1439403456, "post_id": 31972344, "comment_id": 51852062, "body": "Maybe a false positive ? Show the valgrind output so se don&#39;t have to guess."}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1439404279, "post_id": 31972344, "comment_id": 51852540, "body": "@MichaelWalz added valgrind output"}], "owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1440016494, "answer_count": 0, "score": 0, "last_activity_date": 1439405852, "creation_date": 1439402610, "last_edit_date": 1439405852, "question_id": 31972344, "link": "https://stackoverflow.com/questions/31972344/alternative-of-pause-to-avoid-mem-leak", "closed_reason": "Duplicate", "title": "Alternative of pause, to avoid mem leak", "body": "<p>Below is my program snippet. I haven't return full code but code is working fine.</p>\n\n<pre><code>class Sig \n{\n public:\n pthread_t tid;\n Sig()\n {\n  pthread_create(&amp;tid,NULL,signal_function,NULL);\n }\n\n ~Sig()\n {\n   int r = pthread_detach(tid);\n   if ( r !=0 ) {\n    assert(0);\n   }\n }\n\n}\n\nvoid signal_function(void *arg0)\n{\n  for (; ;) {\n  // Wait until signal handler called. \n  int ret = pause();\n  // Signal came do some work and return\n  }\n}\n\nint main()\n{ \n   Sig sig;\n   return 0;\n}\n</code></pre>\n\n<p>Valgrind is showing this as definite leak and I think the problem is whenever my program exit without sending signal pause is not releasing resource.</p>\n\n<p>Is there alternative to pause where it will return when the program exit ? or any other solution or you see any bug in the above program.</p>\n\n<p>Valgrind leak</p>\n\n<pre><code>==12599== 352 bytes in 1 blocks are definitely lost in loss record 169 of 315\n==12599==    at 0x4C27F94: calloc (vg_replace_malloc.c:279)\n==12599==    by 0x401128E: _dl_allocate_tls (in /lib64/ld-2.3.4.so)\n==12599==    by 0x76284ED: pthread_create@@GLIBC_2.2.5 (in /lib64/tls/libpthr\nead-2.3.4.so)\n==12599==    by 0xA69082: Sig::Sig() (sim_main.cc:18)\n==12599==    by 0xA6B1A5: main (sim_main.cc:34)\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "state-machine"], "answers": [{"comments": [{"owner": {"reputation": 5356, "user_id": 1574294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8840d835abdb209e6812c9bb02fa618d?s=128&d=identicon&r=PG", "display_name": "Kolyunya", "link": "https://stackoverflow.com/users/1574294/kolyunya"}, "edited": false, "score": 0, "creation_date": 1439403897, "post_id": 31972564, "comment_id": 51852328, "body": "Thank you for your answer. I probably did not describe what I wanted to achieve well. I do not want to always perform the transition from <code>A</code> to <code>B</code> on the machine startup. <code>machine-&gt;foo()</code> may or may not emit the signal depending on some conditions. I want the transition to be performed only after the signal."}, {"owner": {"reputation": 5356, "user_id": 1574294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8840d835abdb209e6812c9bb02fa618d?s=128&d=identicon&r=PG", "display_name": "Kolyunya", "link": "https://stackoverflow.com/users/1574294/kolyunya"}, "edited": false, "score": 0, "creation_date": 1439404334, "post_id": 31972564, "comment_id": 51852566, "body": "As far as I can see the only workaround is to wait until the machine enters the initial state (to wait for an <code>initialized</code> signal from it) and only after that to perform any operations on it."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 5356, "user_id": 1574294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8840d835abdb209e6812c9bb02fa618d?s=128&d=identicon&r=PG", "display_name": "Kolyunya", "link": "https://stackoverflow.com/users/1574294/kolyunya"}, "edited": false, "score": 0, "creation_date": 1439404670, "post_id": 31972564, "comment_id": 51852740, "body": "@Kolyunya It&#39;s not a workaround, it&#39;s what you should have been doing all along. Think asynchronously. Don&#39;t &quot;wait&quot; until the machine starts, merely run some code <i>when</i> it starts. This is done by connecting the <code>started</code> signal to a slot, or to a functor."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1439403400, "creation_date": 1439403400, "answer_id": 31972564, "question_id": 31972167, "link": "https://stackoverflow.com/questions/31972167/synchronization-issue-with-qstatemachine/31972564#31972564", "title": "Synchronization issue with QStateMachine", "body": "<p>State machines are asynchronous, and are driven by the event loop. There is no reason for you to use the signal to move the machine to another state on startup. As it stands, you want to transition from <code>stateA</code> to <code>stateB</code> on startup <em>and</em> whenever <code>foo</code> is emitted.</p>\n\n<ol>\n<li><p>Remember that the target of a connection can be either a signal or a slot. You can connect the state machine's <code>started</code> signal to the <code>foo</code> signal. This way, <code>foo</code> will be emitted when the machine has started and is in the initial state.</p></li>\n<li><p>If you don't care for the <code>foo</code> signal otherwise, you can set up the transition to trigger directly on the machine's <code>started</code> signal.</p></li>\n<li><p>If you <em>always</em> want to transition from <code>stateA</code> to <code>stateB</code>, even some time after the machine was started and <code>stateA</code> is somehow reentered, you can ad an unconditional transition from initial state to <code>stateB</code>. The machine, upon entering <code>stateA</code>, will leave it, then enter <code>stateB</code>, automatically.</p></li>\n</ol>\n\n<p>Examine the solutions starting from the last one, and move up if you need a less general solution.</p>\n"}, {"tags": [], "owner": {"reputation": 5356, "user_id": 1574294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8840d835abdb209e6812c9bb02fa618d?s=128&d=identicon&r=PG", "display_name": "Kolyunya", "link": "https://stackoverflow.com/users/1574294/kolyunya"}, "is_accepted": false, "score": 0, "last_activity_date": 1439406491, "creation_date": 1439406491, "answer_id": 31973475, "question_id": 31972167, "link": "https://stackoverflow.com/questions/31972167/synchronization-issue-with-qstatemachine/31973475#31973475", "title": "Synchronization issue with QStateMachine", "body": "<p>You can make sure that the machine is in it's initial state at the point of it's construction by creating an event loop in the constructor like this:</p>\n\n<pre><code>// ...\nthis-&gt;start();\nQEventLoop* eventLoop = new QEventLoop(this);\nQObject::connect(\n    this, &amp;Machine::started,\n    eventLoop, &amp;QEventLoop::quit\n);\neventLoop-&gt;exec();\n</code></pre>\n"}], "owner": {"reputation": 5356, "user_id": 1574294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8840d835abdb209e6812c9bb02fa618d?s=128&d=identicon&r=PG", "display_name": "Kolyunya", "link": "https://stackoverflow.com/users/1574294/kolyunya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1439427672, "creation_date": 1439401981, "last_edit_date": 1439427672, "question_id": 31972167, "link": "https://stackoverflow.com/questions/31972167/synchronization-issue-with-qstatemachine", "title": "Synchronization issue with QStateMachine", "body": "<p>I have an instance of a <code>QStateMachine</code> in my program. I configure it's states,  transitions, and initial state in it's constructor. And of course, I start it in the constructor.</p>\n\n<pre><code>this-&gt;stateA = new StateA(this);\nthis-&gt;stateB = new StateB(this);\nthis-&gt;stateA-&gt;addTransition(this, &amp;Machine::foo, this-&gt;stateB);\nthis-&gt;setInitialState(this-&gt;stateA);\nthis-&gt;start();\n// At this point the machine is still not in the stateA\n</code></pre>\n\n<p>The issue I faced, was that the machine does not move to an initial state before <code>start()</code> finishes execution. This results in a problem that a signal <code>foo</code>, which is supposed to move the machine from the initial state to another one, is emitted before the initial state was entered.</p>\n\n<pre><code>Machine* machine = new Machine(); \n// start() was already called here but the machine is still not in the initial state\nmachine-&gt;foo();\n// Signal is emitted here (It also may not be emitted. This is not an unconditional transition). But the machine is still not in the initial state and the transition does not happen.\n// ...\n// Here the machine enters the initial state...\n</code></pre>\n\n<p>How can I make sure the machine is in the initial state at the point of its construction?</p>\n"}, {"tags": ["c++", "multithreading", "qt"], "comments": [{"owner": {"reputation": 665, "user_id": 618768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4e5d1a711fbca7af32e0eb473d9e902?s=128&d=identicon&r=PG", "display_name": "pdel", "link": "https://stackoverflow.com/users/618768/pdel"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1439405100, "post_id": 31972037, "comment_id": 51852971, "body": "As with qt 5.1.1, I&#39;m also held under a different coding standard than most may be used to.  This is beyond the scope of my question however"}], "answers": [{"comments": [{"owner": {"reputation": 665, "user_id": 618768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4e5d1a711fbca7af32e0eb473d9e902?s=128&d=identicon&r=PG", "display_name": "pdel", "link": "https://stackoverflow.com/users/618768/pdel"}, "edited": false, "score": 0, "creation_date": 1439406386, "post_id": 31973332, "comment_id": 51853686, "body": "I&#39;d prefer not to subclass QThread if at all possible.  It&#39;s generally bad practice given how QThread works and in this case will cause things to break down the line where this is going to later be implemented."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 665, "user_id": 618768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4e5d1a711fbca7af32e0eb473d9e902?s=128&d=identicon&r=PG", "display_name": "pdel", "link": "https://stackoverflow.com/users/618768/pdel"}, "edited": false, "score": 0, "creation_date": 1439408776, "post_id": 31973332, "comment_id": 51854919, "body": "@pdel <code>QThread</code> is broken. Normal C++ objects can be destroyed at any time. QThread, by default, can&#39;t always be. So you have to fix it. That&#39;s how you properly implement the C++ RAII pattern. <code>QThread</code> doesn&#39;t implement it properly, and you have to work around it by explicitly invoking <code>quit()</code> and <code>wait()</code>, and that&#39;s a hidden bomb that will blow up as soon as you forget to do that in some code path."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 665, "user_id": 618768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4e5d1a711fbca7af32e0eb473d9e902?s=128&d=identicon&r=PG", "display_name": "pdel", "link": "https://stackoverflow.com/users/618768/pdel"}, "edited": false, "score": 0, "creation_date": 1439408847, "post_id": 31973332, "comment_id": 51854961, "body": "@pdel  The subclassing that I show is not only good practice, it is absolutely necessary and the <code>QThread</code> as-is simply has a long standing bug. You should not reimplement <code>run</code> - that&#39;s why it&#39;s made final. You can&#39;t override <code>Thread::run</code> even if you wanted to. What you see is a final idiom that you use if you wish to mark the inherited implementation as final."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1439409146, "last_edit_date": 1592644375, "creation_date": 1439405965, "answer_id": 31973332, "question_id": 31972037, "link": "https://stackoverflow.com/questions/31972037/qthread-will-not-exit/31973332#31973332", "title": "QThread will not exit", "body": "<p>The problem is rather simple: You block the event loop in the main thread when you <code>wait</code> for the thread to finish. Yet, at the same time, the event loop must receive the <code>workerThread-&gt;quit()</code> call. Thus you have a deadlock.</p>\n<p>The simple fix is to explicitly <code>quit()</code> the thread before <code>wait()</code>ing for it. You achieve this by fixing the inherent brokenness of <code>QThread</code>. See below for a safe implementation of the <code>Thread</code> class. You can then simply destruct the thread in <code>MainWindow</code>'s destructor.</p>\n<p>Alas, the code is has some antipatterns and voodoo.</p>\n<ol>\n<li><p>Neither <code>workerThread</code> nor <code>worker</code> should be pointers. This is premature pessimization since you add an extra heap allocation and an extra layer of indirection. It's pointless, and forces you to do manual memory management where none is called for.</p>\n</li>\n<li><p>The <code>threadStopSlot</code> is thread-safe and there's no reason to invoke it from the worker thread's event loop. You can call it directly. When you do so, you don't need to call <code>QCoreApplication::processEvents</code> in <code>runSlot</code>. When you do that, you re-enter the event loop, and suddenly all of your objects running in that thread are subject to reentrancy requirement and must be audited as such. Bad idea - don't do it.</p>\n</li>\n<li><p>Since you probably wish to let the event loop run in the worker's thread, you should invert the control: instead of keeping the control in <code>runSlot</code>, keep it in the event loop, and have the event loop call <code>runSlot</code> repeatedly. That's what zero-timeout timer idiom is for.</p>\n</li>\n<li><p>Initializer lists give rise to idiomatic C++. Use them.</p>\n</li>\n<li><p><code>emit</code> is meant as a prefix, not a function. You <code>emit fooSignal()</code>, not <code>emit(fooSignal())</code>. It's a matter of style, true, but <code>emit</code> is for documentation purposes. It is only meant for human consumption, and we humans read things easier when they are not wrapped in an extra layer of parentheses. If you don't care for the documentation aspect, don't use <code>emit</code> at all. Signals are regular methods with machine-generated implementation. You don't need to call them in any special way.</p>\n</li>\n<li><p>Since you use Qt 5, you should be using compile-time-checked <code>connect</code> syntax. This does not require a C++11 compiler - not unless you use lambdas too.</p>\n</li>\n<li><p>It's probably a bad idea to ask the threads to quit in the destructor of a window, since you might have other things to do in the main thread as the worker threads quit - things that necessitate the event loop to be running.</p>\n<p>The only way a window would be destructed is if it has <code>WA_DeleteOnClose</code> attribute, or if you've quit the main event loop and are destructing the window as you exit <code>main()</code>. You should catch the window's close event and set things in motion such that the window gets deleted only when everything that should be done, is done.</p>\n</li>\n<li><p>Instead of outputting the thread id to <code>qDebug()</code>, you can output the thread itself. You can leverage the fact that threads are objects and you can give them human readable names. You then don't need to compare thread ids or addresses manually, you simply read the thread's name.</p>\n</li>\n</ol>\n<p>Given all the above, if you asked me to write the code, I'd do it as follows.</p>\n<p>First, the worker functionality can be abstracted out into a worker base:</p>\n<pre><code>#include &lt;QtWidgets&gt;\n\nclass WorkerBase : public QObject {\n   Q_OBJECT\n   Q_PROPERTY(bool active READ isActive WRITE setActive)\n   QBasicTimer m_runTimer;\n   bool m_active;\nprotected:\n   void timerEvent(QTimerEvent * ev) {\n      if (ev-&gt;timerId() != m_runTimer.timerId()) return;\n      work();\n   }\n   virtual void workStarted() {}\n   virtual void work() = 0;\n   virtual void workEnded() {}\npublic:\n   WorkerBase(QObject * parent = 0) : QObject(parent), m_active(false) {\n      setActive(true);\n   }\n   /// This method is thread-safe.\n   bool isActive() const { return m_active; }\n   /// This method is thread-safe.\n   void setActive(bool active) {\n      QObject source;\n      QObject::connect(&amp;source, &amp;QObject::destroyed, this, [this,active]{\n         // The functor is executed in the thread context of this object\n         if (m_active == active) return;\n         if (active) {\n            m_runTimer.start(0, this);\n            workStarted();\n         } else {\n            m_runTimer.stop();\n            workEnded();\n         }\n         m_active = active;\n      }, thread() ? Qt::QueuedConnection : Qt::DirectConnection);\n   }\n   ~WorkerBase() {\n      Q_ASSERT(QThread::currentThread() == thread() || !thread());\n      setActive(false);\n   }\n};\n</code></pre>\n<p>Then, the worker becomes straightforward:</p>\n<pre><code>class Worker : public WorkerBase {\n   Q_OBJECT\n   int m_runCount;\nprotected:\n   void workStarted() Q_DECL_OVERRIDE {\n      qDebug() &lt;&lt; &quot;Starting&quot; &lt;&lt; QThread::currentThread();\n   }\n   void work() Q_DECL_OVERRIDE {\n      QThread::msleep(1000);\n      ++ m_runCount;\n      qDebug() &lt;&lt; m_runCount &lt;&lt; QThread::currentThread();\n   }\n   void workEnded() Q_DECL_OVERRIDE {\n      qDebug() &lt;&lt; &quot;Finishing&quot; &lt;&lt; QThread::currentThread();\n      emit finished();\n   }\npublic:\n   Worker(QObject * parent = 0) : WorkerBase(parent), m_runCount(0) {}\n   Q_SIGNAL void finished();\n};\n</code></pre>\n<p>Finally, we add the safe thread implementation, and a main window that keeps the locus of control in the event loop, and lets the loop run until everything is ready for the window to be destructed:</p>\n<pre><code>class Thread : public QThread {\n   using QThread::run; // final method\npublic:\n   Thread(QObject * parent = 0) : QThread(parent) {}\n   ~Thread() { quit(); wait(); }\n};\n\nclass MainWindow : public QMainWindow {\n   Q_OBJECT\n   Worker m_worker;\n   Thread m_workerThread;\n   QLabel m_label;\nprotected:\n   void closeEvent(QCloseEvent * ev) {\n      if (m_worker.isActive()) {\n         m_worker.setActive(false);\n         ev-&gt;ignore();\n      } else\n         ev-&gt;accept();\n   }\npublic:\n   MainWindow(QWidget * parent = 0) : QMainWindow(parent),\n      m_label(&quot;Hello :)\\nClose the window to quit.&quot;)\n   {\n      setCentralWidget(&amp;m_label);\n      m_workerThread.setObjectName(&quot;m_worker&quot;);\n      m_worker.moveToThread(&amp;m_workerThread);\n      connect(&amp;m_worker, &amp;Worker::finished, this, &amp;QWidget::close);\n      m_workerThread.start();\n      qDebug() &lt;&lt; &quot;Main thread:&quot; &lt;&lt; QThread::currentThread();\n   }\n   ~MainWindow() {\n      qDebug() &lt;&lt; __FUNCTION__ &lt;&lt; QThread::currentThread();\n   }\n};\n\nint main(int argc, char ** argv)\n{\n   QApplication a(argc, argv);\n   QThread::currentThread()-&gt;setObjectName(&quot;main&quot;);\n   MainWindow w;\n   w.show();\n   w.setAttribute(Qt::WA_QuitOnClose);\n   return a.exec();\n}\n\n#include &quot;main.moc&quot;\n</code></pre>\n<p>Note the notable absence of the plethora of signals/slots that your approach necessitated. All you care for is when the worker object has finished, you can then close the window and rip all objects to shreds.</p>\n<p>Note that the declaration order is important. C++'s semantics are not random in this respect: the order has meaning. The worker thread must be declared after the worker object, since they will be destructed in the reverse order. Thus, the thread is quit and destroyed first. At that point, <code>m_worker-&gt;thread() == nullptr</code> and you can destroy the worker from any thread, including the main thread. It'd be an error if the worker's thread had still existed - you'd then need to destroy the worker in its own thread.</p>\n<p>Output:</p>\n<pre><code>Main thread: QThread(0x7fa59b501180, name = &quot;main&quot;)\nStarting QThread(0x7fff5e053af8, name = &quot;m_worker&quot;)\n1 QThread(0x7fff5e053af8, name = &quot;m_worker&quot;)\n2 QThread(0x7fff5e053af8, name = &quot;m_worker&quot;)\n3 QThread(0x7fff5e053af8, name = &quot;m_worker&quot;)\nFinishing QThread(0x7fff5e053af8, name = &quot;m_worker&quot;)\n~MainWindow QThread(0x7fa59b501180, name = &quot;main&quot;)\n</code></pre>\n"}], "owner": {"reputation": 665, "user_id": 618768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4e5d1a711fbca7af32e0eb473d9e902?s=128&d=identicon&r=PG", "display_name": "pdel", "link": "https://stackoverflow.com/users/618768/pdel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 1, "accepted_answer_id": 31973332, "answer_count": 1, "score": 3, "last_activity_date": 1439430718, "creation_date": 1439401503, "last_edit_date": 1439430718, "question_id": 31972037, "link": "https://stackoverflow.com/questions/31972037/qthread-will-not-exit", "title": "QThread will not exit", "body": "<p>When I close my application, the thread is still running even though it should have ended.  The following code will simply hang on the <code>workerThread-&gt;wait();</code> line.</p>\n\n<p><strong>Main Thread</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    workerThread = new QThread();\n    worker = new Worker();\n\n    worker-&gt;moveToThread(workerThread);\n\n    connect(this, SIGNAL(ThreadStopSignal()), worker, SLOT(ThreadStopSlot()));\n    connect(this, SIGNAL(StartWorkerSignal()), worker, SLOT(RunSlot()));\n    connect(worker, SIGNAL(finished()), workerThread, SLOT(quit()));\n    connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));\n    connect(workerThread, SIGNAL(finished()), workerThread, SLOT(deleteLater()));\n\n    workerThread-&gt;start();\n    emit(StartWorkerSignal());\n    qDebug()&lt;&lt;\"Main thread: \" &lt;&lt; QThread::currentThreadId();\n}\n\nMainWindow::~MainWindow()\n{\n    qDebug() &lt;&lt; \"Asking threads to exit\" &lt;&lt; QThread::currentThreadId();\n    emit(ThreadStopSignal());\n\n    workerThread-&gt;wait();\n\n    qDebug() &lt;&lt; \"thread is dead\";\n    delete ui;\n}\n</code></pre>\n\n<p><strong>Worker implementation</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"worker.h\"\n\n#include &lt;QCoreApplication&gt;\n\nWorker::Worker()\n{\n    allowRun = true;\n}\n\nvoid Worker::RunSlot()\n{\n    qDebug() &lt;&lt; \"Starting\";\n    int i = 0;\n    while(allowRun)\n    {\n        QThread::msleep(1000);\n        QCoreApplication::processEvents();\n        qDebug() &lt;&lt; i++ &lt;&lt; QThread::currentThreadId();\n    }\n    emit finished();\n    qDebug() &lt;&lt; \"Done counting\";\n}\n\nvoid Worker::ThreadStopSlot()\n{\n    allowRun = false;\n    qDebug() &lt;&lt; \"Ending HID WORKER\" &lt;&lt; QThread::currentThreadId();\n}\n</code></pre>\n\n<p><strong>A typical run will produce the following output</strong> (Qt 5.1.1 clang x86_64)*:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Main thread:  0x7fff743b2300 \nStarting \n0 0x10b6e1000 \n1 0x10b6e1000 \n2 0x10b6e1000 \n3 0x10b6e1000 \n4 0x10b6e1000 \n5 0x10b6e1000 \n6 0x10b6e1000 \n7 0x10b6e1000 \n8 0x10b6e1000 \n9 0x10b6e1000 \n10 0x10b6e1000 \n11 0x10b6e1000 \nAsking threads to exit 0x7fff743b2300 \nEnding HID WORKER 0x10b6e1000 \n12 0x10b6e1000 \nDone counting \n</code></pre>\n\n<p>However, the application will still be running, just with no UI; it will occasionally crash, causing an Apple send-crash-report dialog to open.</p>\n\n<p>*Yes, I'm currently stuck with a slightly older Qt version. However, I have tested this on newer builds and have achieved similar results.</p>\n"}, {"tags": ["c++", "arrays", "enums", "header", "global"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1439401093, "post_id": 31971887, "comment_id": 51850775, "body": "You have the following line in two different places <code>defineItemArray(item);</code> I&#39;m assuming it should be <code>defineItemArray(items);</code>"}, {"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1439401729, "post_id": 31971887, "comment_id": 51851126, "body": "It is, but I changed it and it still throws an undefined error for items, this time just for the one in the argument."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439401734, "post_id": 31971887, "comment_id": 51851130, "body": "You cannot do assignments in the global scope"}, {"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439401878, "post_id": 31971887, "comment_id": 51851214, "body": "@NathanOliver, I can work around that, I really just need to know why its showing items as undefined, after i fix that i think i can work the rest out."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1439402697, "post_id": 31971887, "comment_id": 51851659, "body": "@SawyerAdlaiVierra-Hatch 1st of all: Don&#39;t use global variables, but function parameters or class member variables instead!"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1439403398, "post_id": 31971887, "comment_id": 51852034, "body": "Maybe you should show the exact error message. BTW - you have put <code>item</code> in bold but shouldn&#39;t it be <code>items</code> ? And... exactly how does your header file look after moving the initialization into a function? Does the header file still contain the line <code>bool items[MAX_ITEMS];</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439403535, "post_id": 31972108, "comment_id": 51852127, "body": "I tried method 1 and got this error:                                           1&gt;itemsArray.obj : error LNK2005: &quot;bool * items&quot; (?items@@3PA_NA) already defined in inventoryTest.obj 1&gt;C:\\Users\\Sawyer\\documents\\visual studio 2015\\Projects\\inventoryTest\\Debug\\inventoryTest.exe : fatal error LNK1169: one or more multiply defined symbols found  but i don&#39;t define it anywhere else in the code."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1439404481, "post_id": 31972108, "comment_id": 51852639, "body": "@StillLearning Thanks, I forgot to mention that."}, {"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439404831, "post_id": 31972108, "comment_id": 51852823, "body": "Thank you both for your help. On an off note, do you know why this post got downvoted. Was it because i was asking about global arrays or because i made a formatting mistake in the post? I have the feeling this won&#39;t be the last time I need to ask for help and I want to make sure I&#39;m doing it properly."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1439407182, "post_id": 31972108, "comment_id": 51854099, "body": "Don&#39;t worry about the down-votes. Some persons at this site down-votes all questions that they think are &quot;simple&quot;. They seem to forget that some are newbees and consequently have problems with things that experts find simple. So don&#39;t worry, we all get down-voted by the &quot;experts&quot;. However - you should have included the exact error message from the start and also just called it for a &quot;compile error&quot; instead of &quot;items throws an undefined error&quot;. The words &quot;throws ... error&quot; makes us think about exceptions - not compile errors. But anyway - don&#39;t worry about the down-votes. :-)"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439407898, "post_id": 31972108, "comment_id": 51854489, "body": "@SawyerAdlaiVierra-Hatch have you managed to fix the link error?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1439408358, "post_id": 31972108, "comment_id": 51854719, "body": "@sergej - option 2 doesn&#39;t really reach the goal as it isn&#39;t the same items variable in all the code. The items array shall instead be in main() and then be passed to all functions, i.e. playerInventory, playerGet and defineItemArray. And all other functions in the program needing it."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1439408624, "post_id": 31972108, "comment_id": 51854842, "body": "@StillLearning You are right, option 2 just shows the basic concept."}, {"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439411955, "post_id": 31972108, "comment_id": 51856549, "body": "@sergej, I did resolve the error using option one however, option 2 seems more suited to what i need, because it allows me to change initialization, but it gives the same error. I had to go pick up my sister so I haven&#39;t gotten to tinker with it, but in the given state it still produces an error."}, {"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1439412138, "post_id": 31972108, "comment_id": 51856643, "body": "@StillLearning, so I would put the array in main, then call defineItemArray(), then playerInventory(), the playerGet()?"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439412163, "post_id": 31972108, "comment_id": 51856659, "body": "@SawyerAdlaiVierra-Hatch If you are using option 2, make sure you delete the globally defined variable."}, {"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439412787, "post_id": 31972108, "comment_id": 51857013, "body": "@sergej ok that makes sense. I think its close to what i had, probably a syntax error throwing a wrench in the works. So to make the defineItemArray() global i can just plop it in the itemsArray.h, or put in in another program and forward declare right?"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439413014, "post_id": 31972108, "comment_id": 51857150, "body": "@SawyerAdlaiVierra-Hatch put the defineItemArray() prototype into itemsArray.h and the defineItemArray() implementation into itemsArray.c. Include itemsArray.h in main.c."}, {"owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "edited": false, "score": 0, "creation_date": 1439413021, "post_id": 31972108, "comment_id": 51857158, "body": "@sergej, yah that works. Thanks again for your help. I feel I may have jumped in a bit to quickly, I started on the learncpp website a week ago, and just rushed down to arrays. May have missed a couple of core concepts. Thanks again."}], "tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": true, "score": 1, "last_activity_date": 1439404602, "last_edit_date": 1439404602, "creation_date": 1439401749, "answer_id": 31972108, "question_id": 31971887, "link": "https://stackoverflow.com/questions/31971887/declaring-global-enumerated-arrays-c/31972108#31972108", "title": "Declaring global enumerated arrays c++", "body": "<p><strong>Option 1:</strong></p>\n\n<p>You can globally define the <code>items</code> array in itemsArray.c like this:</p>\n\n<pre><code>// itemsArray.c \nbool items[MAX_ITEMS] = {true, false, false, true};\n</code></pre>\n\n<p>To make the array accessible from other files add the following to itemsArray.h:</p>\n\n<pre><code>// itemsArray.h\nextern bool items[MAX_ITEMS];\n</code></pre>\n\n<p>Include itemsArray.h in the file where you have to access the items array.</p>\n\n<p>The function<code>defineItemArray()</code> is not needed.</p>\n\n<p><em>Note:</em></p>\n\n<ul>\n<li>using global variables is considered as <strong>\"bad\" design</strong></li>\n<li>using <code>extern</code> is considered as <strong>\"bad\" design</strong></li>\n</ul>\n\n<p><strong>Option 2:</strong></p>\n\n<p>Refactor the <code>defineItemArray()</code> function so that it initializes an previously defined array:</p>\n\n<pre><code>void defineItemArray(bool items[])\n{\n    items[LASER_RIFLE] = true;\n    items[LASER_SWORD] = false;\n    items[LASER_PISTOL] = false;\n    items[PLASMA_LAUNCHER] = true;\n} \n</code></pre>\n\n<p>Then you can use it like this:</p>\n\n<pre><code>void playerInventory()\n{\n    bool items[MAX_ITEMS];    // define the items array\n    defineItemArray(items);   // initialize the items array\n\n    for (int item = 0; item &lt; MAX_ITEMS; ++item)\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1439402537, "last_edit_date": 1439402537, "creation_date": 1439402082, "answer_id": 31972192, "question_id": 31971887, "link": "https://stackoverflow.com/questions/31971887/declaring-global-enumerated-arrays-c/31972192#31972192", "title": "Declaring global enumerated arrays c++", "body": "<p>These lines:</p>\n\n<pre><code>items[LASER_RIFLE] = true;\nitems[LASER_SWORD] = false;\nitems[LASER_PISTOL] = false;\nitems[PLASMA_LAUNCHER] = true;\n</code></pre>\n\n<p>are invalid in a header file which is included in global scope.</p>\n\n<p>Instead Place this code in a c-file:</p>\n\n<pre><code>bool items[MAX_ITEMS] = {true, false, false, true};\n</code></pre>\n\n<p>In the header file you shall only have this line:</p>\n\n<pre><code>extern bool items[MAX_ITEMS];\n</code></pre>\n\n<p>Then you can use the variable items in all c-files which includes the header file. And you don't need to pass the variable items to any functions as it is a global variable. BTW - global variables are in general bad but if you really want a global variable it can be done like that.</p>\n"}], "owner": {"reputation": 27, "user_id": 5207354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10205158400864527/picture?type=large", "display_name": "Sawyer Adlai Vierra-Hatch", "link": "https://stackoverflow.com/users/5207354/sawyer-adlai-vierra-hatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 31972108, "answer_count": 2, "score": -1, "last_activity_date": 1439404602, "creation_date": 1439400934, "last_edit_date": 1439401747, "question_id": 31971887, "link": "https://stackoverflow.com/questions/31971887/declaring-global-enumerated-arrays-c", "title": "Declaring global enumerated arrays c++", "body": "<p>I'm working on a system of arrays to function as an inventory, I need the array to have global scope so that it can be modified throughout the program. I have it declared w/ its enumerators in a header file like so: </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#ifndef ITEMSARRAY_H\n#define ITEMSARRAY_H\n\nusing namespace std;\n\nenum Weapons\n{\n    LASER_RIFLE,\n    LASER_SWORD,\n    LASER_PISTOL,\n    PLASMA_LAUNCHER,\n    MAX_ITEMS\n};\n\nbool items[MAX_ITEMS];\n    items[LASER_RIFLE] = true;\n    items[LASER_SWORD] = false;\n    items[LASER_PISTOL] = false;\n    items[PLASMA_LAUNCHER] = true;\n\n\n#endif\n</code></pre>\n\n<p>however this throws me an error on the lower statements because its trying to declare it as its own array or because its trying to initialize the value to the enum.I can put it in a function and resolve this problem like so:</p>\n\n<pre><code>void defineItemArray(bool items[MAX_ITEMS])\n{\n    items[LASER_RIFLE] = true;\n    items[LASER_SWORD] = false;\n    items[LASER_PISTOL] = false;\n    items[PLASMA_LAUNCHER] = true;\n}\n</code></pre>\n\n<p>the problem with this is that is then when i try to use the function the argument items does not pull the array like so: </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"itemsArray.h\"\n\nusing namespace std;\n\nvoid playerInventory()\n{\n    defineItemArray(items);\n    for (int item = 0; item &lt; MAX_ITEMS; ++item)\n        if (items[item] == true)\n        {\n            switch (item)\n            {\n            case 0:\n                cout &lt;&lt; \"Laser Rifle\\n\";\n                break;\n            case 1:\n                cout &lt;&lt; \"Laser Sword\\n\";\n                break;\n            case 2:\n                cout &lt;&lt; \"Laser Pistol\\n\";\n                break;\n            case 3:\n                cout &lt;&lt; \"Plasma Launcher \\n\";\n                break;\n            default:\n                cout &lt;&lt; \"Error\";\n                break;\n            }\n        }\n        else\n            cout &lt;&lt; \"Not in Inventory\\n\";\n}\n\nvoid playerGet()\n{\n    defineItemArray(items);\n    cout &lt;&lt; \"You have found a Laser Sword.\\n\";\n    cout &lt;&lt; \"Laser Sword added to inventory.\\n\";\n    items[LASER_SWORD] = true;\n}\n\n\nint main()\n{\n    playerInventory();\n    playerGet();\n    playerInventory();\n    return 0;\n}\n</code></pre>\n\n<p>the <strong>item</strong> throws an undefined error, making the function useless. I'm not sure what I'm missing, but if I can get past this roadblock i can finally have this inventory system finished. </p>\n"}, {"tags": ["c++", "stream", "format", "output"], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1439414095, "last_edit_date": 1439414095, "creation_date": 1439401620, "answer_id": 31972063, "question_id": 31971803, "link": "https://stackoverflow.com/questions/31971803/non-persistent-formatting-of-streams/31972063#31972063", "title": "Non-persistent formatting of streams", "body": "<p>You can simply save and restore stream format flags (see <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/flags\" rel=\"nofollow\"><code>std::iosbase::flags()</code></a>):</p>\n\n<pre><code>fmtflags oldflags = oss.flags();\n\n// change current format flags\n\noss.flags(oldflags); // &lt;&lt;&lt; restore to former state\n</code></pre>\n\n<hr>\n\n<p>If you don't like it straight forward as mentioned above, you could also use a proxy:</p>\n\n<pre><code>class local_ostream {\npublic:\n    friend template&lt;typename T&gt; \n    local_ostream&amp; operator&lt;&lt;(local_ostream&amp; los, const&amp; T value) {\n        los.os_ &lt;&lt; value;\n        return los;\n    }\n\n    local_ostream(std::ostream&amp; os) : os_(os), oldflags_(os.flags()) {\n    }\n    ~local_ostream() {\n       os_.flags(oldflags_);\n    }      \n\nprivate:\n    std::ostream&amp; os_;\n    std::iosbase::fmtflags oldflags_;\n};\n</code></pre>\n\n<p>And use as follows:</p>\n\n<pre><code> { local_ostream los(oss);\n     los &lt;&lt; \"Point = (\" &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; pt.x &lt;&lt; \", \" &lt;&lt; pt.y &lt;&lt; \"); \";\n } // previous formatting state is restored here\n</code></pre>\n"}], "owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 31972063, "answer_count": 1, "score": 4, "last_activity_date": 1439414095, "creation_date": 1439400655, "last_edit_date": 1439412616, "question_id": 31971803, "link": "https://stackoverflow.com/questions/31971803/non-persistent-formatting-of-streams", "title": "Non-persistent formatting of streams", "body": "<p>What's the best way (if any) to format <code>std::*stream</code> output in localized manner, so that formatting changes in one location won't affect the use of that stream in other locations?</p>\n\n<p>That is, I'd like to set format of the stream for a single statement, not for the remaining lifetime of the stream.</p>\n\n<hr>\n\n<p>The following is just a rationale for asking the above question.</p>\n\n<p>Suppose you print intensity in default floating point format:</p>\n\n<pre><code>ostringstream oss;\noss &lt;&lt; \"Intensity = \" &lt;&lt; intensity &lt;&lt; \"; \";\n</code></pre>\n\n<p>Then print coordinates with fixed 2 digits precision:</p>\n\n<pre><code>oss &lt;&lt; \"Point = (\" &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; pt.x &lt;&lt; \", \" &lt;&lt; pt.y &lt;&lt; \"); \";\n</code></pre>\n\n<p>then, 20 lines later, print ray direction in the same fixed 2 digits format:</p>\n\n<pre><code>oss &lt;&lt; \"Direction = (\" &lt;&lt; dir.x &lt;&lt; \", \" &lt;&lt; dir.y &lt;&lt; \"); \";\n</code></pre>\n\n<p>A few months later add printing of luminosity in default floating point format somewhere <strong>between</strong> printing <code>pt</code> and printing <code>dir</code>:</p>\n\n<pre><code>oss &lt;&lt; \"Luminosity = \" &lt;&lt; lum &lt;&lt; \"; \";\n</code></pre>\n\n<p>Oops, <code>lum</code> will be printed in fixed 2 digits precision because you changed <code>oss</code> format 20 lines before, when printing <code>pt</code>. Now you have to recall what you've changed in <code>oss</code> and rewind it for printing <code>lum</code>. \nMoreover, after fixing format for <code>lum</code> you'd get another problem: <code>dir</code> won't be printed in fixed 2 digits anymore... </p>\n\n<p>Therefore I'd like to be able to format streams locally to avoid unnecessary dependencies. </p>\n"}, {"tags": ["c++", "linux", "unix", "redhat"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 1, "creation_date": 1439402344, "post_id": 31971737, "comment_id": 51851498, "body": "If you already have an established session to the target, it would seem to me that that is sufficient validation that the iqn is correct - if it weren&#39;t, you would not have been able to establish that session. Unless you&#39;re concerned that the target may no longer be responding - but that&#39;s a bit different question..."}, {"owner": {"reputation": 159, "user_id": 1339559, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bf8734c148b8be82342fb2f3894eff8?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1339559/rahul"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1439402582, "post_id": 31971737, "comment_id": 51851613, "body": "in my program I am running the iscsi adm command (iscsiadm -m session) and then parsing the output of that command. So the application actually does not know if the parsed string which is the iqn is correct or not."}], "owner": {"reputation": 159, "user_id": 1339559, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bf8734c148b8be82342fb2f3894eff8?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1339559/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439430787, "creation_date": 1439400430, "last_edit_date": 1439430787, "question_id": 31971737, "link": "https://stackoverflow.com/questions/31971737/validate-an-iscsi-target", "title": "Validate an iSCSI target", "body": "<p>Is there any way to validate an iSCSI target's iqn. For example, we use ping x.x.x.x to check if we can connect to a remote machine. </p>\n\n<p>I am parsing the output of 'iscsiadm -m session' command's output to get the remote machine's IP and the corresponding target LUN's iqn. I can check the correctness of the IP by trying to ping it. I am not sure how to validate an iqn. The command output may change depending on iscsiadm's version installed. Therefore, I want to validate if what I parsed was right before using the IP and iqn for other operations.</p>\n\n<p>Sample output of the command:\n iscsiadm -m session\ntcp: [1] 172.19.99.116:3260,1 iqn.2001-05.com.equallogic:0-8a0906-79728210b-913004cb4a755c4d-smagentlynx02-sk-5g-sk (non-flash)</p>\n"}, {"tags": ["c++", "stdvector"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1439400508, "post_id": 31971733, "comment_id": 51850433, "body": "What is going on in the <code>AudioFile</code> class? Is it copyable? Is it moveable? What are its members? Did you define any of the constructors yourself, etc?"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 1, "creation_date": 1439400755, "post_id": 31971733, "comment_id": 51850568, "body": "At minimum, post the code of the constructor of AudioFile, since that is central to the problem you are trying to understand."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439400892, "post_id": 31971733, "comment_id": 51850658, "body": "Welcome to Stack Overflow! Please <b><a href=\"https://stackoverflow.com/posts/31971733/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 9, "user_id": 5220408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28966aeeb75456db9c8bcfc17e895388?s=128&d=identicon&r=PG&f=1", "display_name": "MBV", "link": "https://stackoverflow.com/users/5220408/mbv"}, "edited": false, "score": 0, "creation_date": 1439401801, "post_id": 31971733, "comment_id": 51851172, "body": "I added my class....I honestly don&#39;t know what I&#39;m doing wrong, I tried changing from const char* to std::string but it&#39;s the same thing. Apparently a becomes corrupt after the call to vector.push_back(a);"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1439402534, "post_id": 31971733, "comment_id": 51851597, "body": "I never trust a code snippet that has completely bungled indenting in the code that matters most.  The simple explanation is that this code was compiled with the original declaration of AudioFile.  And thus doesn&#39;t allocate enough space for the object."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1439406027, "post_id": 31971733, "comment_id": 51853479, "body": "Is <code>srcFile</code> pointing to a valid C string?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3160514"}, "edited": false, "score": 1, "creation_date": 1439407066, "post_id": 31973442, "comment_id": 51854031, "body": "There is no need for <code>new</code> here ; it&#39;s C++, not Java."}], "tags": [], "owner": {"reputation": 1, "user_id": 4945722, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W4ns6mqtxZA/AAAAAAAAAAI/AAAAAAAAAJk/EiqJ4v4lFb4/photo.jpg?sz=128", "display_name": "Ben Levinsky", "link": "https://stackoverflow.com/users/4945722/ben-levinsky"}, "is_accepted": false, "score": -2, "last_activity_date": 1439406357, "creation_date": 1439406357, "answer_id": 31973442, "question_id": 31971733, "link": "https://stackoverflow.com/questions/31971733/stack-arround-variable-is-corrupted-adding-simple-class-to-stdvector/31973442#31973442", "title": "Stack arround variable is corrupted - adding simple class to std::vector", "body": "<p>There may be more going on, but to make a new object and save it, yuou should declare a variable and then initialize it. Use the <em>new</em> keyword. I.e.     AudioFile a = new AudioFile(...); in your add_audio() fuction. </p>\n\n<p>Also you could make your function slightly shorter ( but style could dictate how you want to write it) as: </p>\n\n<pre><code>audioList.push_back(new AudioFile(id, srcFile, startSecInSrc, fromSecInMovie, toSecInMovie));\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5220408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28966aeeb75456db9c8bcfc17e895388?s=128&d=identicon&r=PG&f=1", "display_name": "MBV", "link": "https://stackoverflow.com/users/5220408/mbv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487077782, "creation_date": 1439400426, "last_edit_date": 1487077782, "question_id": 31971733, "link": "https://stackoverflow.com/questions/31971733/stack-arround-variable-is-corrupted-adding-simple-class-to-stdvector", "title": "Stack arround variable is corrupted - adding simple class to std::vector", "body": "<p>I have a basic example of adding a class to a vector:</p>\n\n<pre><code>std::vector&lt;AudioFile&gt; audioList;\nDllExport void add_audio(const char* srcFile, double startSecInSrc, double fromSecInMovie, double toSecInMovie, long id)\n{\n    AudioFile a(id, srcFile, startSecInSrc, fromSecInMovie, toSecInMovie);\n    audioList.push_back(a);\n}\n</code></pre>\n\n<p>at the end of the function I get the stack corrupted around variable a</p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>    class AudioFile \n    {\n         long _id;\n         std::string _fileLocation;\n         double _startSecInSrc, _fromSecInMovie, _toSecInMovie;\n         double _duration;\n         public:\n         AudioFile(long _id, std::string _fileLocation, double _startSecInSrc,double _fromSecInMovie, double _toSecInMovie);\n         ~AudioFile();\n         static bool ComparePredicat(AudioFile first, AudioFile second);\n    };\n\n     bool AudioFile::ComparePredicat(AudioFile first, AudioFile second)\n     {\n          if (first._startSecInSrc &lt;= second._startSecInSrc)\n          return true;\n          return false;\n      }\n\n       AudioFile::AudioFile(long id, std::string fileLocation, double startSecInSrc, double fromSecInMovie, double toSecInMovie)\n      {\n        _id = id;\n        _fileLocation = fileLocation;\n    _startSecInSrc = startSecInSrc;\n    _fromSecInMovie = fromSecInMovie;\n    _toSecInMovie = toSecInMovie;\n\n             _duration = toSecInMovie - fromSecInMovie;\n   }   AudioFile::~AudioFile()\n   {\n   }\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "eclipse"], "comments": [{"owner": {"reputation": 155, "user_id": 5191125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d1d7e6ff9b8e50487778fb819e3993c?s=128&d=identicon&r=PG&f=1", "display_name": "jKIM", "link": "https://stackoverflow.com/users/5191125/jkim"}, "edited": false, "score": 0, "creation_date": 1439400546, "post_id": 31971695, "comment_id": 51850459, "body": "I&#39;m not quite getting what you&#39;re saying, So you have the git clone set up on your local drive, and you want to open that in eclipse . So when you make changes in eclipse it updated the github file and you justn end to git push it?"}], "answers": [{"tags": [], "owner": {"reputation": 164, "user_id": 2946984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HYJxq.jpg?s=128&g=1", "display_name": "YAS_Bangamuwage", "link": "https://stackoverflow.com/users/2946984/yas-bangamuwage"}, "is_accepted": false, "score": 0, "last_activity_date": 1439427677, "last_edit_date": 1439427677, "creation_date": 1439404335, "answer_id": 31972836, "question_id": 31971695, "link": "https://stackoverflow.com/questions/31971695/open-non-makefile-project-with-existing-code-in-eclipse/31972836#31972836", "title": "Open non-Makefile project with existing code in Eclipse", "body": "<p>You need to configure Eclipse for Git integration.</p>\n\n<p>Use this tutorial in order to configure EGit</p>\n\n<p><a href=\"http://www.vogella.com/tutorials/EclipseGit/article.html\" rel=\"nofollow\">EclipseGit</a></p>\n\n<p>If you have the C++ project (not the Git cloned one)</p>\n\n<p>File > Import> General > Existing projects into workspace</p>\n\n<p>Set the root directory to where your .project and .cproject files are located.</p>\n"}], "owner": {"reputation": 121, "user_id": 1738787, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3df1c44ee8c0357a3330cc3ceadd515?s=128&d=identicon&r=PG", "display_name": "lkreinitz", "link": "https://stackoverflow.com/users/1738787/lkreinitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439430760, "creation_date": 1439400298, "last_edit_date": 1439430760, "question_id": 31971695, "link": "https://stackoverflow.com/questions/31971695/open-non-makefile-project-with-existing-code-in-eclipse", "title": "Open non-Makefile project with existing code in Eclipse", "body": "<p>I have a C++ project that does not use make for building.  It is a Git clone.  I need to be able to open this project in Eclipse.  I could delete the directory and import from the Git repository.  I was wondering, is there a way to do this with the existing directory and files?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1439400294, "post_id": 31971641, "comment_id": 51850328, "body": "You should probably remove the <code>void*</code> madness, that&#39;s one of the selling points of templates after all."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1439400453, "post_id": 31971641, "comment_id": 51850409, "body": "Also why not simply using <code>operator&lt;&lt;</code> with a <code>std::ostringstream </code>?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439400600, "post_id": 31971641, "comment_id": 51850487, "body": "@Quentin I used it because only other solution I see is passing a bunch of references to <code>Append()</code> every time. And I thought that it can make it slightly more slow on a crappy compiler, but I&#39;m not sure."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1439401007, "post_id": 31971641, "comment_id": 51850723, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Do you mean using a stringstream manually every time I need to concat strings? Because code that uses this function is more compact."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1439401092, "post_id": 31971641, "comment_id": 51850773, "body": "@HolyBlackCat ... and less reliable obviously ;-)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439401191, "post_id": 31971641, "comment_id": 51850839, "body": "@HolyBlackCat see the edit to my answer for a solution without &quot;a bunch of references&quot; :)"}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1439400418, "post_id": 31971710, "comment_id": 51850395, "body": "OOOPS. And looks like I didn&#39;t noticed it because there is new instance of it for every combination of arg types!"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1439401604, "post_id": 31971710, "comment_id": 51851066, "body": "Before your edit I thought that I know <i>something</i> about template kung-fu. :) BTW, your solution <i>almost</i> works: <code>.clear()</code> clears error state, not content."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1439401963, "post_id": 31971710, "comment_id": 51851270, "body": "@HolyBlackCat curse that awful pre-standard interface ! It&#39;s fixed now :p"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439403591, "post_id": 31971710, "comment_id": 51852160, "body": "I personally find direct use of that trick less than useful.  <code>template&lt;class...Fs&gt; void run(Fs&amp;&amp;...fs) { using ex=int[]; (void)ex{0, (std::forward&lt;Fs&gt;(fs)(), void(), 0)...}; }</code> helper, then <code>run( [&amp;]{Jo_detail::stream &lt;&lt; std::forward&lt;Args&gt;(args);}...);</code> inside <code>Jo</code> is cleaner.  Sadly, it <a href=\"http://coliru.stacked-crooked.com/a/e0717d230cc2914b\" rel=\"nofollow noreferrer\">runs on fewer compilers</a>."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439403674, "post_id": 31971710, "comment_id": 51852201, "body": "@Yakk ouch. That may be one of the things where I&#39;d prefer a macro."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439404104, "post_id": 31971710, "comment_id": 51852437, "body": "@Quentin Really?  The expression <code>run( some_lambda... );</code> is pretty simple.  The strange part is that the body of your lambda is pack expanded, and gcc screws up and presumes that by the time a statement ends (or maybe a block), incomplete pack expansions are an error..."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439406125, "post_id": 31971710, "comment_id": 51853542, "body": "@Yakk well for a single-line pattern with one single changing subexpression, I think a little macro <code>EXPAND(thing &lt;&lt; foo(args));</code> beats it, but it&#39;s only a matter of preference of course (provided the compiler does not choke and die on an expanded lambda)."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1439401930, "last_edit_date": 1439401930, "creation_date": 1439400345, "answer_id": 31971710, "question_id": 31971641, "link": "https://stackoverflow.com/questions/31971641/why-my-string-joiner-emits-previous-string-instead-of-the-current-one-when-the-l/31971710#31971710", "title": "Why my string joiner emits previous string instead of the current one when the length of a current string is same as the length of a previous one", "body": "<pre><code>static std::string ret = Internal::stream.str();\n</code></pre>\n\n<p>... is executed only once because it's the initializer of a <code>static</code> variable. Just remove it and return an <code>std::string</code> from <code>Internal::stream.str()</code>.</p>\n\n<p>Here's a version of <code>Jo</code> in case you want to take inspiration. I've kept the static <code>stringstream</code>, but made it common to all instantiations of <code>Jo</code>, but i'm not sure if it makes sense to share it at all (thread-safety issues, etc). I'll leave the flag twiddling up to you ;)</p>\n\n<pre><code>namespace Jo_detail {\n    std::stringstream stream;\n}\n\ntemplate &lt;class... Args&gt;\nstd::string Jo(Args &amp;&amp;... args) {\n\n    Jo_detail::stream.str(\"\");\n\n    // Classic expander trick with dummy array\n    using ex = int[];\n    (void) ex { 0, (void(Jo_detail::stream &lt;&lt; std::forward&lt;Args&gt;(args)), 0)... };\n\n    // str() returns a copy anyway\n    return Jo_detail::stream.str();\n}\n</code></pre>\n"}], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 31971710, "answer_count": 1, "score": 1, "last_activity_date": 1439401930, "creation_date": 1439400076, "question_id": 31971641, "link": "https://stackoverflow.com/questions/31971641/why-my-string-joiner-emits-previous-string-instead-of-the-current-one-when-the-l", "title": "Why my string joiner emits previous string instead of the current one when the length of a current string is same as the length of a previous one", "body": "<p>So, I have following fancy string joiner:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nclass Internal final\n{\n    ~Internal() = delete;\n    static std::stringstream stream;\n    static const std::ios_base::fmtflags defflags;\n    template &lt;typename T, typename ...P&gt; struct Append\n    {\n        static void func(const void *const *p)\n        {\n            stream &lt;&lt; *(T *)*p;\n            Append&lt;P...&gt;::func(p + 1);\n        }\n    };\n    template &lt;typename T&gt; struct Append&lt;T&gt;\n    {\n        static void func(const void *const *p)\n        {\n            stream &lt;&lt; *(T *)*p;\n        }\n    };\n    template &lt;typename ...P&gt; friend const char *Jo(const P &amp;... p);\n};\n\nstd::stringstream Internal::stream;\nconst std::ios_base::fmtflags Internal::defflags = stream.flags();\n\ntemplate &lt;typename ...P&gt; const char *Jo(const P &amp;... p) // 'Join', returned pointer is valid until next call\n{\n    Internal::stream.clear();\n    Internal::stream.flags(Internal::defflags);\n    Internal::stream.str(\"\");\n    const void *const arr[sizeof...(P)] {&amp;p...};\n    Internal::Append&lt;P...&gt;::func(arr);\n    static std::string ret = Internal::stream.str();\n    return ret.c_str();\n}\n</code></pre>\n\n<p><br></p>\n\n<pre><code>int main()\n{\n    // Test case:\n    std::cout &lt;&lt; Jo(\"Hello\",',',' ',\"world!!\", 1); // Prints `Hello, world!!1`\n    return 0;\n}\n</code></pre>\n\n<p>As you see, <code>Jo(...)</code> concatenates all passed objects and returns pointer to resulting string. These objects can have every type that <code>stringstream</code> accepts. Also, this function accepts stream manipulators and resets internal stringsteram flags every time it's called.</p>\n\n<p>It works fine, but I have a single very strange problem with it.</p>\n\n<p>Consider following code:</p>\n\n<pre><code>std::cout &lt;&lt; Jo('1','2');\nstd::cout &lt;&lt; Jo('3','4');\n</code></pre>\n\n<p>I expect it to print <code>1234</code>, but it prints <code>1212</code>.</p>\n\n<p>Same happens always when I use my function multiple times in a row, when each resulting string would have same length. In these cases, it always prints first string in a sequence.</p>\n\n<p><a href=\"http://ideone.com/VRNaA0\" rel=\"nofollow\" title=\"IDEone\">See it live.</a></p>\n\n<p><strong>Does anyone know why it happens?</strong></p>\n\n<p>P.S. This issue is not related to <code>std::cout</code> optimizations, I tested it without <code>std::cout</code> too.</p>\n"}, {"tags": ["c++", "qt", "file-io"], "comments": [{"owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439400042, "post_id": 31971586, "comment_id": 51850180, "body": "You could looke at <a href=\"http://doc.qt.io/qt-5/qfile.html#details\" rel=\"nofollow noreferrer\">the detailed description of the QFile class</a> which has a lot of examples on opening, writing to and reading from files."}, {"owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "reply_to_user": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 2, "creation_date": 1439400053, "post_id": 31971586, "comment_id": 51850187, "body": "Hmmm... it appears I may need to use <a href=\"http://doc.qt.io/qt-5/qsettings.html\" rel=\"nofollow noreferrer\">QSettings API</a> as the best choice."}, {"owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 1, "creation_date": 1439400159, "post_id": 31971586, "comment_id": 51850250, "body": "For settings this may be the better option. But keep in mind how they are stored (user-account based, system wide etc.)"}], "answers": [{"comments": [{"owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439447760, "post_id": 31972646, "comment_id": 51867596, "body": "In your <code>readSettings()</code> I would do a <code>settings.contains(...)</code> first to see if the value is set or use the <code>defaultValue</code> parameter of the <code>settings.value()</code> function. Otherwise you don&#39;t know what is put in your widgets in case the settings value is missing for some reason."}, {"owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "reply_to_user": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439452415, "post_id": 31972646, "comment_id": 51870274, "body": "@Bowdzone I&#39;ll update that in a few hours (heading to bed). However, I ran into another odd situation. The docs say system scope on Mac is stored in directory &quot;/etc/xdg&quot;, but I cannot find this directory on my Mac. I&#39;m thinking the docs must not explain what happens on Yosemite (OSX 10.10). Do you know where the system scope settings are now stored?"}, {"owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439452880, "post_id": 31972646, "comment_id": 51870549, "body": "I never had a Mac in my life and I know nothing about it sorry."}, {"owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "reply_to_user": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439486511, "post_id": 31972646, "comment_id": 51893450, "body": "I&#39;ve now implemented the <code>defaultValue</code> part of the <code>value()</code> class method."}, {"owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "reply_to_user": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "edited": false, "score": 0, "creation_date": 1439486554, "post_id": 31972646, "comment_id": 51893470, "body": "I&#39;ve also put out a <a href=\"http://stackoverflow.com/q/31994646/105539\">query</a> on the /etc/xdg concern."}], "tags": [], "owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "is_accepted": false, "score": 0, "last_activity_date": 1439486460, "last_edit_date": 1439486460, "creation_date": 1439403643, "answer_id": 31972646, "question_id": 31971586, "link": "https://stackoverflow.com/questions/31971586/qt-c-write-read-key-value-pair-file/31972646#31972646", "title": "Qt/C++ Write/Read Key-Value Pair File", "body": "<p>The following is what I used on a Mac. However, if you modify the <code>setPath()</code> of your <code>settings</code> object, you can make it work on other platforms via <a href=\"http://doc.qt.io/qt-5/qsettings.html#QSettings\" rel=\"nofollow\">the documentation</a>.</p>\n\n<p>In <code>mainwindow.h</code>, I had to add these entries:</p>\n\n<pre><code>void readSettings();\nvoid writeSettings();\n</code></pre>\n\n<p>under Private Slots.</p>\n\n<p>Then, in <code>mainwindow.cpp</code>, I added these example functions:</p>\n\n<pre><code>void MainWindow::readSettings()\n{\n    QSettings settings;\n    settings.setPath(settings.IniFormat,settings.SystemScope,\"/etc/xdg\");\n    settings.beginGroup(\"General\");\n    ui-&gt;checkBox1-&gt;setChecked(settings.value(\"checkBox1\",false).toBool());\n    settings.endGroup();\n}\n\nvoid MainWindow::writeSettings()\n{\n    QSettings settings;\n    settings.setPath(settings.IniFormat,settings.SystemScope,\"/etc/xdg\");\n    settings.beginGroup(\"General\");\n    settings.setValue(\"checkBox1\",ui-&gt;checkBox1-&gt;isChecked());\n    settings.endGroup();\n}\n</code></pre>\n\n<p>You should read about \"scope\" and <code>setPath()</code> on the <a href=\"http://doc.qt.io/qt-5/qsettings.html#QSettings\" rel=\"nofollow\">QSettings page</a> for more information.</p>\n\n<p>Then, in <code>MainWindow::MainWindow()</code> function, I had it like so:</p>\n\n<pre><code>QCoreApplication::setOrganizationName(\"Example Company\");\nQCoreApplication::setOrganizationDomain(\"example.com\");\nQCoreApplication::setApplicationName(\"Example Product\");\n\nui-&gt;setupUi(this);\nthis-&gt;readSettings();\n</code></pre>\n\n<p>Note that you can only <code>readSettings()</code> after you have set the <code>ui</code> variable. And by using the <code>QCoreApplication</code> class like I did, I don't have to keep redeclaring what settings I'm using all the time.</p>\n\n<p>Then, I took the <code>MainWindow</code> and added a <code>checkBox1</code> and an <code>updateButton</code> on it, and set the updateButton <code>clicked()</code> slot code to this:</p>\n\n<pre><code>this-&gt;writeSettings();\n</code></pre>\n\n<p>Now when the window loads, after the UI is drawn, it reads the settings to set the checkbox value to whatever you set when you clicked the update button.</p>\n"}], "owner": {"reputation": 21188, "user_id": 105539, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c85c46cd17b738fbee94fcba1ade96a9?s=128&d=identicon&r=PG", "display_name": "Volomike", "link": "https://stackoverflow.com/users/105539/volomike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1076, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439525182, "creation_date": 1439399897, "last_edit_date": 1439525182, "question_id": 31971586, "link": "https://stackoverflow.com/questions/31971586/qt-c-write-read-key-value-pair-file", "title": "Qt/C++ Write/Read Key-Value Pair File", "body": "<p>I have a Qt/C++ widget based application for the Mac. I have a series of checkboxes, radio buttons, and text fields for storing settings. I want to save them to a key value pair file when I click an Update button, and then when the application loads, read this file to set those widgets back to the proper states.</p>\n\n<p>Is there an example for how this is done somewhere?</p>\n"}, {"tags": ["c++", "c++11", "move-semantics", "perfect-forwarding", "template-argument-deduction"], "comments": [{"owner": {"reputation": 1592, "user_id": 1938348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d57bc31c85d7fcf46229f41d9b1fcbe?s=128&d=identicon&r=PG", "display_name": "Yankes", "link": "https://stackoverflow.com/users/1938348/yankes"}, "edited": false, "score": 0, "creation_date": 1439415171, "post_id": 31971493, "comment_id": 51858209, "body": "what crash? <code>size</code> don&#39;t have preconditions therefore can be called on moved vectors."}], "answers": [{"comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1439400208, "post_id": 31971583, "comment_id": 51850282, "body": "Checking only if <code>T</code> is a reference fails with <code>f&lt;std::vector&lt;int&gt;&amp;&amp;&gt;(std::vector&lt;int&gt;{});</code>"}, {"owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1439401117, "post_id": 31971583, "comment_id": 51850794, "body": "That&#39;s surely working solution and also without sfinae. However I can point the following minor problems: if function in question will happen to be constructor or operator, naming wouldn&#39;t probably be that obvious as in this case. Also someone not that familiar with this pattern may add something to the first level function thinking that it works only with rvalues (not very likely I guess but still it may cause a bit of confusion). Also you need to fix small mistake mentioned by @PiotrSkotnicki."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1439401840, "post_id": 31971583, "comment_id": 51851187, "body": "@PiotrSkotnicki: Yes, you don&#39;t want to specify the template argument explicitly. If that&#39;s a use case, you need to adjust the code."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1439401937, "post_id": 31971583, "comment_id": 51851251, "body": "@Predelnik: If you want to support explicit template arguments, then yes, you&#39;ll need to modify the code to check only for lvalue references. (That&#39;s a weird usecase, though, and you should either let the arguments be deduced or forwarded.) Anyway, you know what to do..."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 4, "last_activity_date": 1439399882, "creation_date": 1439399882, "answer_id": 31971583, "question_id": 31971493, "link": "https://stackoverflow.com/questions/31971493/how-to-omit-perfect-forwarding-for-deduced-parameter-type/31971583#31971583", "title": "How to omit perfect forwarding for deduced parameter type?", "body": "<p>How about a second level of implementation:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;type_traits&gt;\n\n// For when f is called with an rvalue.\ntemplate &lt;typename T&gt;\nvoid f_impl(T &amp;&amp; t, std::false_type) { /* ... */ }\n\n// For when f is called with an lvalue.\ntemplate &lt;typename T&gt;\nvoid f_impl(T &amp; t, std::true_type) { /* ... */ }\n\ntemplate &lt;typename T&gt;\nvoid f(T &amp;&amp; t)\n{\n    f_impl(std::forward&lt;T&gt;(t), std::is_reference&lt;T&gt;());\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1697, "user_id": 4712648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txw7W.jpg?s=128&g=1", "display_name": "Elohim Meth", "link": "https://stackoverflow.com/users/4712648/elohim-meth"}, "edited": false, "score": 0, "creation_date": 1439401962, "post_id": 31971744, "comment_id": 51851269, "body": "Yes, you are right. Forgot about it. Corrected the answer."}], "tags": [], "owner": {"reputation": 1697, "user_id": 4712648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txw7W.jpg?s=128&g=1", "display_name": "Elohim Meth", "link": "https://stackoverflow.com/users/4712648/elohim-meth"}, "is_accepted": false, "score": 2, "last_activity_date": 1439401930, "last_edit_date": 1439401930, "creation_date": 1439400455, "answer_id": 31971744, "question_id": 31971493, "link": "https://stackoverflow.com/questions/31971493/how-to-omit-perfect-forwarding-for-deduced-parameter-type/31971744#31971744", "title": "How to omit perfect forwarding for deduced parameter type?", "body": "<p>I think SFINAE should help:</p>\n\n<pre><code>template&lt;typename T,\n         typename = typename std::enable_if&lt;!std::is_lvalue_reference&lt;T&gt;::value&gt;::type&gt;\nvoid f (T &amp;&amp;v) // thought to be rvalue version\n{\n   // some behavior based on the fact that v is rvalue\n   auto p = std::move (v);\n   (void) p;\n}\n\ntemplate &lt;typename T&gt;\nvoid f (const T &amp;v) // never called\n{  \n   auto p = v;\n   (void) p;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1439400606, "post_id": 31971753, "comment_id": 51850492, "body": "Actually that&#39;s pretty good because you have to write it only for rvalue version and no garbage needed for lvalue one. The only problem probably is that the people in general more familiar with move semantics than with what enable_if does and why it should be used in this case but anyway at least this solution is relatively short."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1439400867, "post_id": 31971753, "comment_id": 51850638, "body": "@Predelnik depending on what <i>behavior</i> you implement in your function, maybe you could get away with a single overload that calls <code>std::forward&lt;T&gt;(t)</code> once ?"}, {"owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "edited": false, "score": 0, "creation_date": 1439401535, "post_id": 31971753, "comment_id": 51851028, "body": "yeah I understand that in general using <code>forward</code> should be priority in cases such as this however I&#39;ve met with similar code at least   a couple of times, and that is the reason for asking a question."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 8, "last_activity_date": 1591526581, "last_edit_date": 1591526581, "creation_date": 1439400493, "answer_id": 31971753, "question_id": 31971493, "link": "https://stackoverflow.com/questions/31971493/how-to-omit-perfect-forwarding-for-deduced-parameter-type/31971753#31971753", "title": "How to omit perfect forwarding for deduced parameter type?", "body": "<p>SFINAE hidden in a template parameter list:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename T\n        , typename = typename std::enable_if&lt;!std::is_lvalue_reference&lt;T&gt;{}&gt;::type&gt;\nvoid f(T&amp;&amp; v);\n\ntemplate &lt;typename T&gt;\nvoid f(const T&amp; v);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a8e9ba20d5c1499e\" rel=\"nofollow noreferrer\"><strong>DEMO</strong></a></p>\n\n<hr>\n\n<p>SFINAE hidden in a return type:</p>\n\n<pre><code>template &lt;typename T&gt;\nauto f(T&amp;&amp; v)\n    -&gt; typename std::enable_if&lt;!std::is_lvalue_reference&lt;T&gt;{}&gt;::type;\n\ntemplate &lt;typename T&gt;\nvoid f(const T&amp; v);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/51ab6e5da3d7079c\" rel=\"nofollow noreferrer\"><strong>DEMO 2</strong></a></p>\n\n<hr>\n\n<p>In <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a> <code>typename std::enable_if&lt;!std::is_lvalue_reference&lt;T&gt;{}&gt;::type</code> can be shortened to:</p>\n\n<pre><code>std::enable_if_t&lt;!std::is_lvalue_reference&lt;T&gt;{}&gt; \n</code></pre>\n\n<p>Anyway, even in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> you can shorten the syntax with an alias template if you find it more concise:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing check_rvalue = typename std::enable_if&lt;!std::is_lvalue_reference&lt;T&gt;{}&gt;::type;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5648528bcddae264\" rel=\"nofollow noreferrer\"><strong>DEMO 3</strong></a></p>\n\n<hr>\n\n<p>With <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a> constexpr-if:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid f(T&amp;&amp; v)\n{\n    if constexpr (std::is_lvalue_reference_v&lt;T&gt;) {}\n    else {}\n}\n</code></pre>\n\n<hr>\n\n<p>With <a href=\"/questions/tagged/c%2b%2b20\" class=\"post-tag\" title=\"show questions tagged &#39;c++20&#39;\" rel=\"tag\">c++20</a> concepts:</p>\n\n<pre><code>template &lt;typename T&gt;\nconcept rvalue = !std::is_lvalue_reference_v&lt;T&gt;;\n\nvoid f(rvalue auto&amp;&amp; v);\n\nvoid f(const auto&amp; v);\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/XmOstvHoWfQBYYyM\" rel=\"nofollow noreferrer\"><strong>DEMO 4</strong></a></p>\n"}], "owner": {"reputation": 4556, "user_id": 1269661, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5f3a348bd307a1a2c6ecefb06519ab81?s=128&d=identicon&r=PG", "display_name": "Predelnik", "link": "https://stackoverflow.com/users/1269661/predelnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 31971753, "answer_count": 3, "score": 7, "last_activity_date": 1591526581, "creation_date": 1439399525, "question_id": 31971493, "link": "https://stackoverflow.com/questions/31971493/how-to-omit-perfect-forwarding-for-deduced-parameter-type", "title": "How to omit perfect forwarding for deduced parameter type?", "body": "<p>Let's say I have some function a parameter type (or several parameter types) of type which I want to be deduced. Also I want different behavior based on the fact is it rvalue or lvalue. Straightforwardly writing it leads to an obvious (for experienced people) trap because of perfect forwarding:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;typename T&gt;\nvoid f (T &amp;&amp;v) // thought to be rvalue version\n{\n   // some behavior based on the fact that v is rvalue\n   auto p = std::move (v);\n   (void) p;\n}\n\ntemplate &lt;typename T&gt;\nvoid f (const T &amp;v) // never called\n{  \n   auto p = v;\n   (void) p;\n}\n\nint main ()\n{\n    std::vector&lt;int&gt; x = {252, 135};\n    auto &amp;z = x;\n    f (z);\n    std::cout &lt;&lt; x.size () &lt;&lt; '\\n'; // woah, unexpected 0 or crash\n}\n</code></pre>\n\n<p>Even though sneaky nature of such behavior is already an interesting point but my question is actually different - what is good, concise, understandable workaround for such situation? </p>\n\n<p>If perfectly forwarded type is not deduced (e.g. it's already known template parameter of an outer class or something like this) there's well known workaround using <code>typename identity&lt;T&gt;::type&amp;&amp;</code> instead of <code>T&amp;&amp;</code> but since the same construction is a workaround for avoiding type deduction it doesn't help in this case. I could probably imagine some sfinae tricks to resolve it but code clarity would probably be destroyed and it will look completely different from the similar non-template functions.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 4, "creation_date": 1439399521, "post_id": 31971452, "comment_id": 51849866, "body": "Please show some code example. Your question is ambiguous (local to what: a block, a class instance, ...?)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1439399709, "post_id": 31971452, "comment_id": 51849986, "body": "<i>should I explicitly delete them in the reverse order in the destructor</i>. That didn&#39;t make sense. Posting some code elaborate the question will be good."}, {"owner": {"reputation": 3038, "user_id": 2725031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a052ac048fc2c1c0df69dd66100e9c06?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin \u0141o\u015b", "link": "https://stackoverflow.com/users/2725031/marcin-%c5%81o%c5%9b"}, "edited": false, "score": 0, "creation_date": 1439399834, "post_id": 31971452, "comment_id": 51850072, "body": "While it is possible to explicitly call the destructor of a local object, it will be called the second time when the object goes out of scope, which I believe leads to an undefined behavior (at least in most .circumstances - don&#39;t have time to search the details)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1439406033, "post_id": 31971452, "comment_id": 51853486, "body": "Relying on it is OK, but make sure to add a comment so that someone doesn&#39;t accidentally break it in the future."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1439399659, "post_id": 31971497, "comment_id": 51849949, "body": "@BasileStarynkevitch: <i>&quot;No, we don&#39;t want to think. We want to know.&quot;</i> Pulp Fiction aside, I think you&#39;re wrong."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1439400102, "post_id": 31971497, "comment_id": 51850213, "body": "@BasileStarynkevitch: How does that change anything? The question doesn&#39;t ask about <i>&quot;order of declaration&quot;</i>. It explicitly talks about <i>&quot;order of construction&quot;</i>. How can you get 97k reputation and fail on something as basic as this?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1439400973, "post_id": 31971497, "comment_id": 51850710, "body": "Unfortunately the question has  turned out not to ask about automatic variables."}], "tags": [], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "is_accepted": true, "score": 6, "last_activity_date": 1439401088, "last_edit_date": 1439401088, "creation_date": 1439399533, "answer_id": 31971497, "question_id": 31971452, "link": "https://stackoverflow.com/questions/31971452/is-it-a-bad-practice-to-rely-on-local-objects-get-destructed-in-the-reverse-orde/31971497#31971497", "title": "Is it a bad practice to rely on local objects get destructed in the reverse order of construction in c++", "body": "<p>Reverse order of destruction is guaranteed for automatic variables. Same guarantee is there for destruction order of class member variables. Use it to your advantage.</p>\n"}, {"comments": [{"owner": {"reputation": 21298, "user_id": 309425, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/75a67cd9a3d7367a6e594fcbe5e41400?s=128&d=identicon&r=PG", "display_name": "JWWalker", "link": "https://stackoverflow.com/users/309425/jwwalker"}, "edited": false, "score": 2, "creation_date": 1439399982, "post_id": 31971520, "comment_id": 51850144, "body": "In case anyone doesn&#39;t want to take your word for it, here is a quote from the 1998 C++ standard: &quot;On exit from a scope (however accomplished), destructors (12.4) are called for all constructed objects with automatic storage duration (3.7.2) (named objects or temporaries) that are declared in that scope, in the reverse order of their declaration.&quot;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 21298, "user_id": 309425, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/75a67cd9a3d7367a6e594fcbe5e41400?s=128&d=identicon&r=PG", "display_name": "JWWalker", "link": "https://stackoverflow.com/users/309425/jwwalker"}, "edited": false, "score": 0, "creation_date": 1439400164, "post_id": 31971520, "comment_id": 51850252, "body": "@JWWalker THX for the backing up. Feel free to edit my answer and put that reference in. It&#39;s bit hard for me ATM, since I&#39;m writing from my tablet."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1439400887, "last_edit_date": 1439400887, "creation_date": 1439399590, "answer_id": 31971520, "question_id": 31971452, "link": "https://stackoverflow.com/questions/31971452/is-it-a-bad-practice-to-rely-on-local-objects-get-destructed-in-the-reverse-orde/31971520#31971520", "title": "Is it a bad practice to rely on local objects get destructed in the reverse order of construction in c++", "body": "<p>You shouldn't call <code>delete</code> on objects allocated on the local stack, nor should you call destructors explicitly.<br>\nThese are called as soon the scope is left.</p>\n\n<p>And yes, you can rely on the destructors will be called in reverse order of construction in a local scope.</p>\n\n<hr>\n\n<p>As for your edits with the sample. The same statement about construction and destructor calls holds true for class member variables as well. You can rely on destructors will be called in reverse order of their declaration in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": false, "score": 2, "last_activity_date": 1439400004, "creation_date": 1439400004, "answer_id": 31971615, "question_id": 31971452, "link": "https://stackoverflow.com/questions/31971452/is-it-a-bad-practice-to-rely-on-local-objects-get-destructed-in-the-reverse-orde/31971615#31971615", "title": "Is it a bad practice to rely on local objects get destructed in the reverse order of construction in c++", "body": "<p>It is good practice to rely on the compiler to follow the rules of the language and destroy objects in the reverse order to the order they were constructed.</p>\n\n<p>It would be <em>extremely bad</em> practice to try and do this manually in the destructor yourself. For one, it is rarely correct to explicitly call a destructor unless you are writing an allocator of some kind or writing your own container class (and even then it often isn't necessary). </p>\n\n<p>Even if that was not the case, it would still be bad practice to manually write code that the compiler is guaranteed to generate for you anyway - not only is it bad practice in general to write unnecessary code but in this case manually written code is much more prone to mistakes, particularly under maintenance when members are added, removed or moved around.</p>\n"}, {"tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1439400453, "creation_date": 1439400453, "answer_id": 31971743, "question_id": 31971452, "link": "https://stackoverflow.com/questions/31971452/is-it-a-bad-practice-to-rely-on-local-objects-get-destructed-in-the-reverse-orde/31971743#31971743", "title": "Is it a bad practice to rely on local objects get destructed in the reverse order of construction in c++", "body": "<p>Reverse order is guaranteed for local variables and for class fields. It is a highly usefull feature of C++ and you definitely should use it when appropriate. There is a widespread idiom called <a href=\"https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Resource_Acquisition_Is_Initialization\" rel=\"nofollow\">RAII</a> that uses this feature.</p>\n\n<p>You should <strong>not</strong> explicitly delete them in the destructor, whatever it means.</p>\n\n<p>If you are talking about calling destructors manually (like <code>x.~T();</code>, it is almost always unnecessary: the compiler will generate destructor calls for object fields in the reverse order of their declarations. So, calling destructors manually will be needless, and may lead to errors if your objects are not ready to being deleted twice.</p>\n\n<p>If you meant calling <code>delete x;</code>, then it is also bad practice in modern C++. Unless you <em>really</em> need a raw pointer, either use smart pointers (<a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow\"><code>std::unique_ptr</code></a> or <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow\"><code>std::shared_ptr</code></a>) or store the object simply by value, without pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1439401505, "creation_date": 1439401505, "answer_id": 31972038, "question_id": 31971452, "link": "https://stackoverflow.com/questions/31971452/is-it-a-bad-practice-to-rely-on-local-objects-get-destructed-in-the-reverse-orde/31972038#31972038", "title": "Is it a bad practice to rely on local objects get destructed in the reverse order of construction in c++", "body": "<p>12.4.8 of the C++11 standard has</p>\n\n<blockquote>\n  <p>After executing the body of the destructor and destroying any automatic objects allocated within the body, a\n  destructor for class X calls the destructors for X\u2019s direct non-variant non-static data members, the destructors\n  for X\u2019s direct base classes and, if X is the type of the most derived class (12.6.2), its destructor calls the\n  destructors for X\u2019s virtual base classes. All destructors are called as if they were referenced with a qualified\n  name, that is, ignoring any possible virtual overriding destructors in more derived classes. <strong>Bases and\n  members are destroyed in the reverse order of the completion of their constructor</strong> (see 12.6.2).</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<p>Now since you do not have a constructor one is provided for you by the compiler.  The provided constructor will construct the class members in the order they are declared in the class.  So in</p>\n\n<pre><code>class A {\nprivate:\n    unique_ptr&lt;Something&gt; firstP;\n    unique_ptr&lt;Something&gt; secondP;\n  };\n</code></pre>\n\n<p><code>secondP</code> will be constructed last and destroyed first.</p>\n"}], "owner": {"reputation": 422, "user_id": 830828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5db4a4952326152c119e26a05c51d7a?s=128&d=identicon&r=PG", "display_name": "Yang Chi", "link": "https://stackoverflow.com/users/830828/yang-chi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 31971497, "answer_count": 5, "score": 2, "last_activity_date": 1439401505, "creation_date": 1439399388, "last_edit_date": 1439400453, "question_id": 31971452, "link": "https://stackoverflow.com/questions/31971452/is-it-a-bad-practice-to-rely-on-local-objects-get-destructed-in-the-reverse-orde", "title": "Is it a bad practice to rely on local objects get destructed in the reverse order of construction in c++", "body": "<p>Is it a bad practice to rely on local objects get destructed in the reverse order of construction in C++, or should I explicitly delete them in the reverse order in the destructor to make sure it follows that order?</p>\n\n<hr>\n\n<p>yup, you guys are right, the question itself is bad.</p>\n\n<p>So basically this is the scenario:</p>\n\n<pre><code>  class A {\n  private:\n    unique_ptr&lt;Something&gt; firstP;\n    unique_ptr&lt;Something&gt; secondP;\n  };\n</code></pre>\n\n<p>At certain point firstP and secondP will both get Something they need to own. And what I need is to make sure that when A gets destructed, firstP will be destructed later than second P, so the Something firstP owns lives longer than the Something secondP owns.</p>\n\n<p>Apparently if I can rely on the fact that secondP will be destrctued earlier than firstP, then I don't have to do anything here. But if I cannot rely on that, I would need to explicitly reset them in the order I want in the destructor of A.</p>\n\n<p>Ye, the design could have been better than this.. </p>\n"}, {"tags": ["c++", "math", "bit-manipulation"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1439399441, "post_id": 31971413, "comment_id": 51849836, "body": "Simple: don&#39;t shift by 64 if the sizeof the type is 8. Also, <code>std::numeric_limits&lt;unsigned long long&gt;::max()</code>."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1439399527, "post_id": 31971413, "comment_id": 51849873, "body": "see <a href=\"http://stackoverflow.com/q/18918256/1708801\">Is right shift undefined behavior if the count is larger than the width of the type?</a>"}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1439399622, "post_id": 31971413, "comment_id": 51849933, "body": "Posting here as a comment: <code>unsigned long long maxUnsignLongLong = ~0;</code>"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1439400529, "post_id": 31971413, "comment_id": 51850448, "body": "For a two&#39;s complement processor: Unsigned max = 0ull - 1ull . Signed max = ~((0ull - 1ull)&gt;&gt;1) ."}], "owner": {"reputation": 5041, "user_id": 1308589, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oHEEb.png?s=128&g=1", "display_name": "SridharKritha", "link": "https://stackoverflow.com/users/1308589/sridharkritha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "closed_date": 1439399603, "answer_count": 0, "score": 0, "last_activity_date": 1439399459, "creation_date": 1439399236, "last_edit_date": 1439399445, "question_id": 31971413, "link": "https://stackoverflow.com/questions/31971413/how-to-address-c4293-shift-count-negative-or-too-big-undefined-behavior", "closed_reason": "Duplicate", "title": "How to address C4293: &#39;&lt;&lt;&#39; : shift count negative or too big, undefined behavior", "body": "<p>Following code snippet will print the max range of unsigned 8 byte data type (unsigned long long). </p>\n\n<pre><code>int main()\n{\n    std::cout&lt;&lt;\"Unsigned long long Range - Max\"&lt;&lt;endl;\n    unsigned long long maxUnsignLongLong = ( 1ULL &lt;&lt; 64) - 1; \n    std::cout&lt;&lt; maxUnsignLongLong&lt;&lt;endl; // 18,446,744,073,709,551,615  \n    return 0; \n}\n</code></pre>\n\n<p>If you compile the above code then the compiler will give <strong>\"shift count negative or too big, undefined behavior\" (Warning)</strong>. My question is how to address this warning ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "function", "matrix", "vector", "return"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1439398905, "post_id": 31971212, "comment_id": 51849538, "body": "I can&#39;t spot anything is wrong with returning the vector like you did."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1439398944, "post_id": 31971212, "comment_id": 51849565, "body": "If you display inside function is your commented code, you don&#39;t display in same order."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1439399087, "post_id": 31971212, "comment_id": 51849635, "body": "But you should probably use <code>for(int j = 0; j &lt; T[i].size(); j++)</code> when printing the result. Otherwise you refer to the 1st row always."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1439399099, "post_id": 31971212, "comment_id": 51849642, "body": "And you overwrite your result as <code>i+l+1</code> when <code>i, j</code> is then <code>j, i</code>."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1439399249, "post_id": 31971212, "comment_id": 51849712, "body": "<code>n</code> and <code>m</code> are not necessary in <code>main</code>. <code>T</code> can simply be initialised as <code>vector&lt; vector&lt;double&gt; &gt; T  = kron(a,b);</code>. Even better, make it <code>const</code>, and in C++11, consider <code>auto</code>: <code>auto const T  = kron(a,b);</code>"}, {"owner": {"reputation": 163, "user_id": 3001121, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/48e9378a58c332697f36a59ceecf6057?s=128&d=identicon&r=PG&f=1", "display_name": "tarmizi", "link": "https://stackoverflow.com/users/3001121/tarmizi"}, "edited": false, "score": 0, "creation_date": 1439439295, "post_id": 31971212, "comment_id": 51864416, "body": "Thanks, but i have solved the problem. I will post it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1439443955, "post_id": 31971212, "comment_id": 51865906, "body": "In <code>main</code>, remove <code>m</code> and <code>n</code> and change to <code>vector&lt; vector&lt;double&gt; &gt; T;</code> . Or even better <code>auto T =  kron(a,b);</code> to enable copy elision.   The vector assignment also assigns the dimensions (and frees anything previously allocated) so you just waste time allocating and deallocating memory here."}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 3001121, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/48e9378a58c332697f36a59ceecf6057?s=128&d=identicon&r=PG&f=1", "display_name": "tarmizi", "link": "https://stackoverflow.com/users/3001121/tarmizi"}, "edited": false, "score": 0, "creation_date": 1439439415, "post_id": 31971366, "comment_id": 51864469, "body": "Thanks for your help. I understand the mistake now. regarding the SUM, A kronecker tensor product between two matrix say A with size m x n and B with size p x q would return a resulting larger matrix C with size m<i>p x n</i>q."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 163, "user_id": 3001121, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/48e9378a58c332697f36a59ceecf6057?s=128&d=identicon&r=PG&f=1", "display_name": "tarmizi", "link": "https://stackoverflow.com/users/3001121/tarmizi"}, "edited": false, "score": 0, "creation_date": 1439443647, "post_id": 31971366, "comment_id": 51865799, "body": "@tarmizi: Consider the limit case of <code>m=n=p=q=1</code>... do you expect the result to be <code>2&#215;2</code> or <code>1&#215;1</code>? <code>(mp&#215;nq)</code> is not the right formula. Note also that you&#39;re accessing the result matrix with <code>i+l</code> and <code>j+k</code> (adding the index or row/column) and this means the matrix number of rows and number of columns should be a sum..."}, {"owner": {"reputation": 163, "user_id": 3001121, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/48e9378a58c332697f36a59ceecf6057?s=128&d=identicon&r=PG&f=1", "display_name": "tarmizi", "link": "https://stackoverflow.com/users/3001121/tarmizi"}, "edited": false, "score": 0, "creation_date": 1439448557, "post_id": 31971366, "comment_id": 51868049, "body": "thanks, that one was a mistake. I believe I have solved the problem. I posted it below. =)"}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 2, "last_activity_date": 1439443620, "last_edit_date": 1439443620, "creation_date": 1439399064, "answer_id": 31971366, "question_id": 31971212, "link": "https://stackoverflow.com/questions/31971212/returning-a-2d-vector/31971366#31971366", "title": "Returning a 2D vector", "body": "<p>Your matrix is dimensioned with <code>rowA*rowB</code> rows and <code>colA*colB</code> cols. This is wrong. Given how you are accessing the elements (i.e. using <code>i+l'</code> and <code>j+k</code>) they should be <code>rowA+colB</code> and <code>colA+rowB</code>.</p>\n\n<p>Also you're accessing the elements at</p>\n\n<pre><code>krnProd[i+l+1][j+k+1]\n</code></pre>\n\n<p>and it's not clear why you're adding 1. I'd make the changes:</p>\n\n<pre><code>int krnProdRow = A.size() + B[0].size();\nint krnProdCol = A[0].size() + B.size();\n</code></pre>\n\n<p>and </p>\n\n<pre><code>krnProd[i+l][j+k] = ...\n</code></pre>\n\n<p>The debug print you're doing is not really about the matrix you're returning, but just all the computed values in the order you're computing them.</p>\n\n<p>Putting the debug print after the computation will show you the same results you're getting in <code>main</code>... returning a vector of vectors is perfectly supported by C++.</p>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 3001121, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/48e9378a58c332697f36a59ceecf6057?s=128&d=identicon&r=PG&f=1", "display_name": "tarmizi", "link": "https://stackoverflow.com/users/3001121/tarmizi"}, "is_accepted": false, "score": 0, "last_activity_date": 1439439764, "last_edit_date": 1495539834, "creation_date": 1439439764, "answer_id": 31979463, "question_id": 31971212, "link": "https://stackoverflow.com/questions/31971212/returning-a-2d-vector/31979463#31979463", "title": "Returning a 2D vector", "body": "<p>After cracking my head around in finding the index relation of the for loops to do the kronecker tensor product. I finally got the index relation of the for loops to do the calculation from <a href=\"https://stackoverflow.com/questions/13722543/efficient-way-to-compute-kronecker-product-of-matrices-with-gsl\">this</a> question. Thanks to that question, Here is the solution:</p>\n\n<pre><code>vector&lt; vector&lt;double&gt; &gt; kron(vector&lt; vector&lt;double&gt; &gt; &amp;A, vector&lt; vector&lt;double&gt; &gt; &amp;B)\n{\n    size_t krnProdRow = A.size()*B.size();\n    size_t krnProdCol = A[0].size()*B[0].size();\n    size_t nRowA = A.size();\n    size_t nColA = A[0].size();\n    size_t nRowB = B.size();\n    size_t nColB = B[0].size();\n\n    vector&lt; vector&lt;double&gt; &gt; krnProd(krnProdRow,vector&lt;double&gt;(krnProdCol,0.0));\n\n    size_t i,j,k,l;\n    double valA =0.0;\n    double valB = 0.0;\n\n    // Looping for kronecker tensor products of A and B\n    // Trace the index of the loops to understand the kronecker tensor product\n    for(i = 0; i &lt;nRowA ; i++)\n    {\n        for(j = 0; j &lt; nColA; j++)\n        {\n            valA = A[i][j];\n\n            for(k = 0; k &lt; nRowB; k++)\n            {\n                for(l = 0; l &lt; nColB; l++)\n                {\n                    valB = B[k][l];\n                    krnProd[nRowB*i+k][nColB*j+l] = valA * valB;\n                }\n            }\n        }\n    }\n\n    return krnProd;\n}\n</code></pre>\n\n<p>Thanks again everyone for your time.</p>\n"}], "owner": {"reputation": 163, "user_id": 3001121, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/48e9378a58c332697f36a59ceecf6057?s=128&d=identicon&r=PG&f=1", "display_name": "tarmizi", "link": "https://stackoverflow.com/users/3001121/tarmizi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1439443620, "creation_date": 1439398527, "question_id": 31971212, "link": "https://stackoverflow.com/questions/31971212/returning-a-2d-vector", "title": "Returning a 2D vector", "body": "<p>I am writing a simple C++ program to do a kronecker tensor product of two matrices like the matlab function <a href=\"http://www.mathworks.com/help/matlab/ref/kron.html\" rel=\"nofollow\">kron</a></p>\n\n<p>Here is the program:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\n\nvector&lt; vector&lt;double&gt; &gt; kron(vector&lt; vector&lt;double&gt; &gt; &amp;A, vector&lt; vector&lt;double&gt; &gt; &amp;B);\n\nint main()\n{\n\n\n    vector&lt; vector&lt;double&gt; &gt; a = {{1,-2},{-1,0}}; // matrices a and b\n    vector&lt; vector&lt;double&gt; &gt; b = {{4,-3},{2,3}};\n\n    int m = a.size()*b.size();\n    int n = a[0].size()*b[0].size();\n\n    vector&lt; vector&lt;double&gt; &gt; T(m,vector&lt;double&gt;(n,0.0));\n\n    T = kron(a,b);\n\n\n    // Display the resulting matrix T\n    for(int i  = 0; i &lt; T.size(); i++)\n    {\n        for(int j = 0; j &lt; T[0].size(); j++)\n        {\n            cout &lt;&lt; T[i][j] &lt;&lt; \",\";\n        }\n\n        cout &lt;&lt; endl;\n    }\n\n\n    return 0;\n}\n\nvector&lt; vector&lt;double&gt; &gt; kron(vector&lt; vector&lt;double&gt; &gt; &amp;A, vector&lt; vector&lt;double&gt; &gt; &amp;B)\n{\n    int krnProdRow = A.size()*B.size();\n    int krnProdCol = A[0].size()*B[0].size();\n    int nRowA = A.size();\n    int nColA = A[0].size();\n    int nRowB = B.size();\n    int nColB = B[0].size();\n\n    vector&lt; vector&lt;double&gt; &gt; krnProd(krnProdRow,vector&lt;double&gt;(krnProdCol,0.0));\n\n    int i,j,k,l;\n\n    for(i=0; i&lt;nRowA; i++)\n    {\n        for(k=0; k&lt;nRowB; k++)\n        {\n            for(j=0; j&lt;nColA ; j++)\n            {\n                for(l=0; l&lt;nColB; l++)\n                {\n                    krnProd[i+l+1][j+k+1] = A[i][j]*B[k][l];\n                                //cout &lt;&lt; krnProd[i+l+1][j+k+1] &lt;&lt; \",\";\n                }\n            }\n            //cout &lt;&lt; endl;;\n        }\n    }\n\n    return krnProd;\n}\n</code></pre>\n\n<p>When returning the matrix krnProd from the function and assigning it to the T matrix in my main function, I get the following matrix:</p>\n\n<pre><code>0, 0, 0, 0\n0, 4, 2, -4\n0, -4, -2, 0\n0, 3, -3, 0\n</code></pre>\n\n<p>which is totally wrong.</p>\n\n<p>However, if i print out the krnProd matrix inside the function itself, I get:</p>\n\n<pre><code>4, -3, -8, 6\n2, 3, -4, -6\n-4, 3, 0, 0\n-2, -3, 0, 0\n</code></pre>\n\n<p>which happens to be the true answer. I was wondering, why am I getting a different answer when returning the matrix from the function ? did i overlooked something here ? or the way I am returning the 2D vector is wrong ?</p>\n"}, {"tags": ["python", "c++", "python-2.7", "python-3.x", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 8175, "user_id": 376742, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/314c5e634c0b24fd63b70bf62a83f4cc?s=128&d=identicon&r=PG", "display_name": "ssk", "link": "https://stackoverflow.com/users/376742/ssk"}, "edited": false, "score": 0, "creation_date": 1453148064, "post_id": 31973355, "comment_id": 57465825, "body": "can you please share the definition of MYLIBRARY_ARRAY_API? Thanks."}, {"owner": {"reputation": 10167, "user_id": 558546, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/017645ede4e9307dffe51d902ee01a88?s=128&d=identicon&r=PG", "display_name": "helloworld922", "link": "https://stackoverflow.com/users/558546/helloworld922"}, "reply_to_user": {"reputation": 8175, "user_id": 376742, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/314c5e634c0b24fd63b70bf62a83f4cc?s=128&d=identicon&r=PG", "display_name": "ssk", "link": "https://stackoverflow.com/users/376742/ssk"}, "edited": false, "score": 0, "creation_date": 1453148681, "post_id": 31973355, "comment_id": 57466164, "body": "MYLIBRARY_ARRAY_API is just an example name used for storing NumPy internal buffers. It is not a macro, but it should be unique to your application/library to prevent clashing with other libraries."}], "tags": [], "owner": {"reputation": 10167, "user_id": 558546, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/017645ede4e9307dffe51d902ee01a88?s=128&d=identicon&r=PG", "display_name": "helloworld922", "link": "https://stackoverflow.com/users/558546/helloworld922"}, "is_accepted": true, "score": 7, "last_activity_date": 1439406040, "creation_date": 1439406040, "answer_id": 31973355, "question_id": 31971185, "link": "https://stackoverflow.com/questions/31971185/segfault-when-import-array-not-in-same-translation-unit/31973355#31973355", "title": "Segfault when import_array not in same translation unit", "body": "<p>After digging through the NumPy headers, I think I've found a solution:</p>\n\n<p>in <code>numpy/__multiarray_api.h</code>, there's a section dealing with where an internal API buffer should be. For conciseness, here's the relevant snippet:</p>\n\n<pre><code>#if defined(PY_ARRAY_UNIQUE_SYMBOL)\n#define PyArray_API PY_ARRAY_UNIQUE_SYMBOL\n#endif\n\n#if defined(NO_IMPORT) || defined(NO_IMPORT_ARRAY)\nextern void **PyArray_API;\n#else\n#if defined(PY_ARRAY_UNIQUE_SYMBOL)\nvoid **PyArray_API;\n#else\nstatic void **PyArray_API=NULL;\n#endif\n#endif\n</code></pre>\n\n<p>It looks like this is intended to allow multiple modules define their own internal API buffer, in which each module must call their own <code>import_array</code> define.</p>\n\n<p>A consistent way to get several translation units to use the same internal API buffer is in every module, define <code>PY_ARRAY_UNIQUE_SYMBOL</code> to some library unique name, then every translation unit <em>other than the one where the import_array wrapper is defined</em> defines <code>NO_IMPORT</code> or <code>NO_IMPORT_ARRAY</code>. Incidentally, there are similar macros for the ufunc features: <code>PY_UFUNC_UNIQUE_SYMBOL</code>, and <code>NO_IMPORT</code>/<code>NO_IMPORT_UFUNC</code>.</p>\n\n<p>The modified working example:</p>\n\n<p><strong>header1.hpp</strong></p>\n\n<pre><code>#ifndef HEADER1_HPP\n#define HEADER1_HPP\n\n#ifndef MYLIBRARY_USE_IMPORT\n#define NO_IMPORT\n#endif\n\n#define PY_ARRAY_UNIQUE_SYMBOL MYLIBRARY_ARRAY_API\n#define PY_UFUNC_UNIQUE_SYMBOL MYLIBRARY_UFUNC_API\n\n#include &lt;Python.h&gt;\n#include &lt;numpy/npy_3kcompat.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n\nvoid initialize();\n\n#endif\n</code></pre>\n\n<p><strong>file1.cpp</strong></p>\n\n<pre><code>#define MYLIBRARY_USE_IMPORT\n#include \"header1.hpp\"\n\nvoid* wrap_import_array()\n{\n  import_array();\n  return (void*) 1;\n}\n\nvoid initialize()\n{\n  wrap_import_array();\n}\n</code></pre>\n\n<p><strong>file2.cpp</strong></p>\n\n<pre><code>#include \"header1.hpp\"\n\n#include &lt;iostream&gt;\n\nint main()\n{\n  Py_Initialize();\n  initialize();\n  npy_intp dims[] = {5};\n  std::cout &lt;&lt; \"creating descr\" &lt;&lt; std::endl;\n  PyArray_Descr* dtype = PyArray_DescrFromType(NPY_FLOAT64);\n  std::cout &lt;&lt; \"zeros\" &lt;&lt; std::endl;\n  PyArray_Zeros(1, dims, dtype, 0);\n  std::cout &lt;&lt; \"cleanup\" &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>I don't know what pitfalls there are with this hack or if there are any better alternatives, but this appears to at least compile and run without any segfaults.</p>\n"}], "owner": {"reputation": 10167, "user_id": 558546, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/017645ede4e9307dffe51d902ee01a88?s=128&d=identicon&r=PG", "display_name": "helloworld922", "link": "https://stackoverflow.com/users/558546/helloworld922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 984, "favorite_count": 0, "accepted_answer_id": 31973355, "answer_count": 1, "score": 9, "last_activity_date": 1439416197, "creation_date": 1439398442, "last_edit_date": 1439416197, "question_id": 31971185, "link": "https://stackoverflow.com/questions/31971185/segfault-when-import-array-not-in-same-translation-unit", "title": "Segfault when import_array not in same translation unit", "body": "<p>I'm having problems getting the NumPy C API to properly initialize. I think I've isolated the problem to calling <code>import_array</code> from a different translation unit, but I don't know why this should matter.</p>\n\n<p>Minimal working example:</p>\n\n<p><strong>header1.hpp</strong></p>\n\n<pre><code>#ifndef HEADER1_HPP\n#define HEADER1_HPP\n#include &lt;Python.h&gt;\n#include &lt;numpy/npy_3kcompat.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n\nvoid initialize();\n\n#endif\n</code></pre>\n\n<p><strong>file1.cpp</strong></p>\n\n<pre><code>#include \"header1.hpp\"\n\nvoid* wrap_import_array()\n{\n  import_array();\n  return (void*) 1;\n}\n\nvoid initialize()\n{\n  wrap_import_array();\n}\n</code></pre>\n\n<p><strong>file2.cpp</strong></p>\n\n<pre><code>#include \"header1.hpp\"\n\n#include &lt;iostream&gt;\n\nvoid* loc_wrap_import_array()\n{\n  import_array();\n  return (void*) 1;\n}\n\nvoid loc_initialize()\n{\n  loc_wrap_import_array();\n}\n\nint main()\n{\n  Py_Initialize();\n#ifdef USE_LOC_INIT\n  loc_initialize();\n#else\n  initialize();\n#endif\n  npy_intp dims[] = {5};\n  std::cout &lt;&lt; \"creating descr\" &lt;&lt; std::endl;\n  PyArray_Descr* dtype = PyArray_DescrFromType(NPY_FLOAT64);\n  std::cout &lt;&lt; \"zeros\" &lt;&lt; std::endl;\n  PyArray_Zeros(1, dims, dtype, 0);\n  std::cout &lt;&lt; \"cleanup\" &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>Compiler commands:</p>\n\n<pre><code>g++ file1.cpp file2.cpp -o segissue -lpython3.4m -I/usr/include/python3.4m -DUSE_LOC_INIT\n./segissue\n# runs fine\n\ng++ file1.cpp file2.cpp -o segissue -lpython3.4m -I/usr/include/python3.4m\n./segissue\n# segfaults\n</code></pre>\n\n<p>I've tested this with Clang 3.6.0, GCC 4.9.2, Python 2.7, and Python 3.4 (with a suitably modified <code>wrap_import_array</code> because this is different between Python 2.x and 3.x). The various combinations all give the same result: if I don't call <code>loc_initialize</code>, the program will segfault in the <code>PyArray_DescrFromType</code> call. I have NumPy version 1.8.2. For reference, I'm running this in Ubuntu 15.04.</p>\n\n<p>What baffles me most of all is <a href=\"https://github.com/ndarray/Boost.NumPy\" rel=\"noreferrer\">this C++ NumPy wrapper</a> appears to get away with calling <code>import_array</code> in a different translation unit.</p>\n\n<p>What am I missing? Why must I call <code>import_array</code> from the same translation unit in order for it to actually take effect? More importantly, how do I get it to work when I call <code>import_array</code> from a different translation unit like the Boost.NumPy wrapper does?</p>\n"}, {"tags": ["c++", "c", "loops", "compiler-warnings", "loop-unrolling"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439398365, "post_id": 31971130, "comment_id": 51849261, "body": "Is there any side effects of <code>func</code>?"}, {"owner": {"reputation": 29, "user_id": 4954497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nAhIEUBNXkI/AAAAAAAAAAI/AAAAAAAAAKM/VVmGum5T3pQ/photo.jpg?sz=128", "display_name": "Sunwoo Lee", "link": "https://stackoverflow.com/users/4954497/sunwoo-lee"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439398917, "post_id": 31971130, "comment_id": 51849548, "body": "In side of the func is a very simple loop. Just a for loop with 1024 iteration again. What kinds of side effect would be possible?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439398960, "post_id": 31971130, "comment_id": 51849575, "body": "Please add it to the question body"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1439398981, "post_id": 31971130, "comment_id": 51849589, "body": "please post a minimum compilable example...."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1439399047, "post_id": 31971130, "comment_id": 51849615, "body": "the problem is centered on using the &#39;i&#39; index variable in a unrolled loop.  because the &#39;i&#39; variable is not being properly incremented when the loop is unrolled.   suggest: int pointer = values;  for(i=0; i&lt;num; i++){     *pointer = func(a, b, c); pointer++; }"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439399365, "post_id": 31971130, "comment_id": 51849779, "body": "Right. The <code>i</code> in the <code>func</code> is undeclared, so I presume it is the same <code>i</code> as outside (global). So the loops won&#39;t work as intended, and it is not the optimization problem."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1439401919, "post_id": 31971130, "comment_id": 51851235, "body": "I suspect the code you have posted is not representative of your problem. Are <code>a</code>,<code>b</code> and <code>c</code> constant during the loop?"}, {"owner": {"reputation": 29, "user_id": 4954497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nAhIEUBNXkI/AAAAAAAAAAI/AAAAAAAAAKM/VVmGum5T3pQ/photo.jpg?sz=128", "display_name": "Sunwoo Lee", "link": "https://stackoverflow.com/users/4954497/sunwoo-lee"}, "edited": false, "score": 0, "creation_date": 1439409807, "post_id": 31971130, "comment_id": 51855465, "body": "I modified the code to include all the local variables. It was just a simple mistake, sorry about that."}, {"owner": {"reputation": 29, "user_id": 4954497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nAhIEUBNXkI/AAAAAAAAAAI/AAAAAAAAAKM/VVmGum5T3pQ/photo.jpg?sz=128", "display_name": "Sunwoo Lee", "link": "https://stackoverflow.com/users/4954497/sunwoo-lee"}, "edited": false, "score": 0, "creation_date": 1439410786, "post_id": 31971130, "comment_id": 51855903, "body": "And also, replacing dists[i] with *dists and dists++ makes same slow result."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1439474643, "post_id": 31971130, "comment_id": 51885255, "body": "when asking a runtime question, always post code that cleanly compiles, is small, and displays the problem being ask about."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1439474758, "post_id": 31971130, "comment_id": 51885327, "body": "how are you compiling the code, such that you know the loops are being unrolled?"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1439474415, "post_id": 31990244, "comment_id": 51885083, "body": "note: this line: &#39;total = a<i>b+c;&#39;  does not accumulate the calculated value, so no worries about math overflow.   things would be more &#39;interesting&#39; if the line were: &#39;total += a</i>b+c;&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1439474551, "post_id": 31990244, "comment_id": 51885185, "body": "in the func() function, a good compiler can optimize the loop out of existence and/or move the constant expression total = a*b+c; to outside the loop."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1439474138, "creation_date": 1439474138, "answer_id": 31990244, "question_id": 31971130, "link": "https://stackoverflow.com/questions/31971130/effect-of-unroll-and-jam-on-a-large-loop/31990244#31990244", "title": "Effect of Unroll and Jam on a large loop", "body": "<p>I created a version of your code that actually compiles:</p>\n\n<p>overflow in the math may have occurred, but I did not check for that</p>\n\n<p>then ran it.</p>\n\n<p>It ran in the 'blink of an eye'</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define num (1024)\n\nint values[num];\nint value;\nint a=2;\nint b=3;\nint c=4;\n\nint func(int a, int b, int c)\n{\n    int i=0;\n    int total=0;\n    for(i=0; i&lt;num; i++){\n        total = a*b+c;\n    }\n    return total;\n}\n\nint main(void){\n    int i=0;\n    //int min=0;\n    for(i=0; i&lt;num; i++){\n        values[i] = func(a, b, c);\n    }\n\n    for(i=0; i&lt;num; i++){\n        value = values[i];\n    }\n    printf(\"value: %d\\n\", value);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4954497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nAhIEUBNXkI/AAAAAAAAAAI/AAAAAAAAAKM/VVmGum5T3pQ/photo.jpg?sz=128", "display_name": "Sunwoo Lee", "link": "https://stackoverflow.com/users/4954497/sunwoo-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1093, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1439474138, "creation_date": 1439398244, "last_edit_date": 1439410476, "question_id": 31971130, "link": "https://stackoverflow.com/questions/31971130/effect-of-unroll-and-jam-on-a-large-loop", "title": "Effect of Unroll and Jam on a large loop", "body": "<p>When I compiled my application, the performance was worse than I expected and I figured out the compiler was reporting a warning like the below.</p>\n\n<p>remark #25461: Imperfect Loop Unroll-Jammed by 2 (pre-vector)</p>\n\n<p>And this is my short code.</p>\n\n<pre><code>for(i=0; i&lt;num; i++){\n    values[i] = func(a, b, c);\n}\n</code></pre>\n\n<p>The index variable, num is alwasy 1024. Why is the loop unroll-jammmed imperfectly? Also, When I modify the code like the below, unroll-jamming doesn't occur! What is the condition of occuring unroll-jamming?</p>\n\n<pre><code>for(i=0; i&lt;num; i++){\n    value += func(a, b, c);\n}\n</code></pre>\n\n<p>Actually, the code is a part of large file, so I can't write the entire code here. But the below is the code including func().</p>\n\n<pre><code>int values[num];\n\nint func(int a, int b, int c)\n{\n    int i=0;\n    int total=0;\n    for(i=0; i&lt;num; i++){\n        total = a*b+c;\n    }\n    return total;\n}\n\nint main(void){\n    int i=0;\n    int min=0;\n    for(i=0; i&lt;num; i++){\n        values[i] = func(a, b, c);\n    }\n\n    for(i=0; i&lt;num; i++){\n        value = values[i];\n    }\n    printf(\"value: %d\\n\", value);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "c++14"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1439398216, "post_id": 31971035, "comment_id": 51849179, "body": "What is <code>E</code>? What is &quot;will be used with&quot;? Your question is unclear."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1439398248, "post_id": 31971035, "comment_id": 51849200, "body": "@JoachimPileborg: Except you may not (as the article states)."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 7, "last_activity_date": 1439398559, "last_edit_date": 1439398559, "creation_date": 1439398428, "answer_id": 31971181, "question_id": 31971035, "link": "https://stackoverflow.com/questions/31971035/c-typedef-using-for-function-template/31971181#31971181", "title": "C++ - typedef/using for function template", "body": "<p>Just define another template function:</p>\n\n<pre><code>template&lt;class A, class B&gt;\nA myDoFoo(const B &amp;val)\n{\n  return doFoo&lt;A,ParticularC,B&gt;( val );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 6, "last_activity_date": 1439398496, "creation_date": 1439398496, "answer_id": 31971202, "question_id": 31971035, "link": "https://stackoverflow.com/questions/31971035/c-typedef-using-for-function-template/31971202#31971202", "title": "C++ - typedef/using for function template", "body": "<p>You may write a function:</p>\n\n<pre><code>template&lt;class A, class B&gt;\nA myDoFoo(const B &amp;val)\n{\n    return doFoo&lt;A, ParticularC, B&gt;(val);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5222527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e192c809ac64d70153659e83fb7cb0b?s=128&d=identicon&r=PG&f=1", "display_name": "P t", "link": "https://stackoverflow.com/users/5222527/p-t"}, "edited": false, "score": 2, "creation_date": 1439454216, "post_id": 31982958, "comment_id": 51871333, "body": "However, this way, no template arguments are deduced. You must always call it as <code>myDoFoo&lt;int, char&gt;(x)</code>, even if <code>x</code> is already known to be <code>char</code>. This may or may not be acceptable."}], "tags": [], "owner": {"reputation": 21, "user_id": 5222527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e192c809ac64d70153659e83fb7cb0b?s=128&d=identicon&r=PG&f=1", "display_name": "P t", "link": "https://stackoverflow.com/users/5222527/p-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1439453756, "creation_date": 1439453756, "answer_id": 31982958, "question_id": 31971035, "link": "https://stackoverflow.com/questions/31971035/c-typedef-using-for-function-template/31982958#31982958", "title": "C++ - typedef/using for function template", "body": "<p>Using variable templates (available in GCC since version 5), you can define a reference to your function:</p>\n\n<pre><code>template&lt;class A, class B&gt; auto &amp;myDoFoo = doFoo&lt;A, ParticularC, B&gt;;\n</code></pre>\n\n<p>or more explicitly</p>\n\n<pre><code>template&lt;class A, class B&gt; A (&amp;myDoFoo)(const B &amp;) = doFoo&lt;A, ParticularC, B&gt;;\n</code></pre>\n"}], "owner": {"reputation": 3905, "user_id": 784345, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4585b1d04f798ebd7d091aa98d3b99aa?s=128&d=identicon&r=PG", "display_name": "Dejwi", "link": "https://stackoverflow.com/users/784345/dejwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1439453756, "creation_date": 1439397931, "last_edit_date": 1439403327, "question_id": 31971035, "link": "https://stackoverflow.com/questions/31971035/c-typedef-using-for-function-template", "title": "C++ - typedef/using for function template", "body": "<p>I've got a following function template:</p>\n\n<pre><code>template&lt;class A, class C, class B&gt;\nA doFoo(const B &amp;val)\n{\n  //do something with C\n}\n</code></pre>\n\n<p>Within my cpp file, all <em>doFoo</em> function will be used with one type for <code>C</code>. Is it possible to do such kind of typedef:</p>\n\n<pre><code>typedef myDoFoo&lt;A, B&gt; doFoo&lt;A, ParticularC, B&gt;\n</code></pre>\n\n<p>If it is - what is a correct syntax to do this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1439397750, "post_id": 31970943, "comment_id": 51848890, "body": "What? How can you inherit from something that isn&#39;t defined yet? This is some crazy recursive inheritance mess."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1439397935, "post_id": 31970943, "comment_id": 51849006, "body": "@CoryKramer I thought I can forward declare the nested enum class and use it. But it appears I cannot. There&#39;s no reason why the compiler cannot handle this apart from what the standard defines. The exact size of the enum class is already known before the definition of <code>A</code> is complete."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1439398036, "post_id": 31970943, "comment_id": 51849062, "body": "No you cannot get away with a forward declaration. For you to instantiate a template specialization, e.g. <code>std::vector&lt;T&gt;</code> the type <code>T</code> must be <i>fully defined</i> at that point, not an incomplete type."}, {"owner": {"reputation": 4259, "user_id": 2348315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IIlRD.jpg?s=128&g=1", "display_name": "PeterSW", "link": "https://stackoverflow.com/users/2348315/petersw"}, "edited": false, "score": 1, "creation_date": 1439398148, "post_id": 31970943, "comment_id": 51849133, "body": "Why is it so important for B to be an inner <code>enum class</code>? Maybe just put it in a namespace where both <code>A</code> and <code>B</code> live."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1439398150, "post_id": 31970943, "comment_id": 51849136, "body": "Why not make the vector a member variable?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1439398178, "post_id": 31970943, "comment_id": 51849158, "body": "<i>&quot;The exact size of the enum class is already known before the definition of <code>A</code> is complete&quot;</i> It&#39;s not even known that <code>A::B</code> is a type, let alone an <code>enum class</code>."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1439398283, "post_id": 31970943, "comment_id": 51849220, "body": "@ChristianHackl Yes, I&#39;m just about to do that. I wanted to inherit the vector because this class is somewhat container-like and I do need the <code>[]</code> operator preferably without redefining it."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1439398400, "post_id": 31970943, "comment_id": 51849277, "body": "@LightnessRacesinOrbit True. What I thought originally is that with some kind of forward delaration <code>enum class A::B</code> the compiler can deal with this because it&#39;s just an enum with no special members and the size of it should be the size of the underlying type."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1439398871, "post_id": 31970943, "comment_id": 51849518, "body": "@xiver77: But what&#39;s so bad about redefining it? It&#39;s just a one-liner (or two, for the <code>const</code> overload), delegating to the vector."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1439399296, "last_edit_date": 1439399296, "creation_date": 1439398113, "answer_id": 31971082, "question_id": 31970943, "link": "https://stackoverflow.com/questions/31970943/inheriting-template-instantiation-of-a-nested-type/31971082#31971082", "title": "Inheriting template instantiation of a nested type", "body": "<p>You cannot do that. There is no way to use <code>A::B</code> without defining <code>A</code>.</p>\n\n<p>From design point of view, deriving from the standard library containers is discouraged. If it's not too much trouble, I would recommend using:</p>\n\n<pre><code>class A\n{\n  public:\n    enum class B\n    {\n    };\n    std::vector&lt;B&gt; data;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1439398323, "creation_date": 1439398323, "answer_id": 31971149, "question_id": 31970943, "link": "https://stackoverflow.com/questions/31970943/inheriting-template-instantiation-of-a-nested-type/31971149#31971149", "title": "Inheriting template instantiation of a nested type", "body": "<p>You can pull <code>B</code> inside a base class :</p>\n\n<pre><code>struct P {\n    enum class B { /* ... */ };\n};\n\nstruct A : P, std::vector&lt;P::B&gt; {\n    using P::B;\n};\n</code></pre>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 31971149, "answer_count": 2, "score": 0, "last_activity_date": 1439399296, "creation_date": 1439397607, "question_id": 31970943, "link": "https://stackoverflow.com/questions/31970943/inheriting-template-instantiation-of-a-nested-type", "title": "Inheriting template instantiation of a nested type", "body": "<p>So I failed to find a way to get below compiled. Any possible workarounds?</p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass A : public std::vector&lt;A::B&gt;\n{\npublic:\n    enum class B\n    {\n    };\n};\n\nint main()\n{\n}\n</code></pre>\n"}, {"tags": ["c++", "file", "input", "output", "user-input"], "comments": [{"owner": {"reputation": 326, "user_id": 3891786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78bb8712b007f49c466ac5cd828a0f?s=128&d=identicon&r=PG&f=1", "display_name": "dbenson", "link": "https://stackoverflow.com/users/3891786/dbenson"}, "edited": false, "score": 0, "creation_date": 1439397635, "post_id": 31970807, "comment_id": 51848820, "body": "Why are you putting &amp; after each parameter?"}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "reply_to_user": {"reputation": 326, "user_id": 3891786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78bb8712b007f49c466ac5cd828a0f?s=128&d=identicon&r=PG&f=1", "display_name": "dbenson", "link": "https://stackoverflow.com/users/3891786/dbenson"}, "edited": false, "score": 0, "creation_date": 1439397766, "post_id": 31970807, "comment_id": 51848896, "body": "@dbenson he is passing by reference rather than by value. otherwise <code>getMinMax()</code> would not work."}, {"owner": {"reputation": 326, "user_id": 3891786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78bb8712b007f49c466ac5cd828a0f?s=128&d=identicon&r=PG&f=1", "display_name": "dbenson", "link": "https://stackoverflow.com/users/3891786/dbenson"}, "reply_to_user": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1439397818, "post_id": 31970807, "comment_id": 51848923, "body": "@dingalapadum derp haha it&#39;s been a couple months since I stopped writing in C every day"}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 1, "creation_date": 1439397820, "post_id": 31970807, "comment_id": 51848927, "body": "First I got a compile error because of rand(). But after including &lt;stdlib.h&gt; the programm actually worked for me. I.e. I had to enter min and max before the file was written."}, {"owner": {"reputation": 774, "user_id": 1536074, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NUoX4.jpg?s=128&g=1", "display_name": "James Pack", "link": "https://stackoverflow.com/users/1536074/james-pack"}, "edited": false, "score": 0, "creation_date": 1439397861, "post_id": 31970807, "comment_id": 51848960, "body": "I was just going to say looks like it should work"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1439397882, "post_id": 31970807, "comment_id": 51848971, "body": "Works for me. 1. include &lt;stdlib.h&gt; for rand. 2) Write a separator for the numbers. either &quot; &quot; or std::endl would do. 3) file should not be parameter since it is opened and closed in the same function."}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1439397955, "post_id": 31970807, "comment_id": 51849014, "body": "What is your OS environment?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 326, "user_id": 3891786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78bb8712b007f49c466ac5cd828a0f?s=128&d=identicon&r=PG&f=1", "display_name": "dbenson", "link": "https://stackoverflow.com/users/3891786/dbenson"}, "edited": false, "score": 0, "creation_date": 1439398227, "post_id": 31970807, "comment_id": 51849184, "body": "@dbenson: It&#39;s C++, not C."}, {"owner": {"reputation": 43, "user_id": 2803330, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/32b430077f63ddf556cd9e17446aa9fa?s=128&d=identicon&r=PG&f=1", "display_name": "SuperLucky", "link": "https://stackoverflow.com/users/2803330/superlucky"}, "reply_to_user": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1439398247, "post_id": 31970807, "comment_id": 51849198, "body": "@RobertJacobs It is Mac OS X"}, {"owner": {"reputation": 326, "user_id": 3891786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78bb8712b007f49c466ac5cd828a0f?s=128&d=identicon&r=PG&f=1", "display_name": "dbenson", "link": "https://stackoverflow.com/users/3891786/dbenson"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1439398461, "post_id": 31970807, "comment_id": 51849316, "body": "@ChristianHackl I never said this question was in C... All I said was that it&#39;s been a while since I stopped writing in C."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 326, "user_id": 3891786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78bb8712b007f49c466ac5cd828a0f?s=128&d=identicon&r=PG&f=1", "display_name": "dbenson", "link": "https://stackoverflow.com/users/3891786/dbenson"}, "edited": false, "score": 0, "creation_date": 1439398681, "post_id": 31970807, "comment_id": 51849423, "body": "@dbenson: But that&#39;s as relevant to this question as Fortran or Pascal. C does not have references. The <code>&amp;</code> notation for references is a C++ thing and has nothing to do with C. I think you are confusing C++ with C, and references with pointers."}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1439399666, "post_id": 31970807, "comment_id": 51849954, "body": "You are having a Mac OS X problem, not a c++ problem."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1439403048, "post_id": 31970807, "comment_id": 51851849, "body": "It kind of sounds as if whatever environment you are running it in is redirecting input from /dev/null.  Maybe try building the program and running it from a terminal by hand, if you are currently running it from inside XCode."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1439403881, "post_id": 31970807, "comment_id": 51852322, "body": "Add error checking after reading user input! You should do that always, user might not enter valid values, and then you are often left with undefined behaviour caused by uninitialized variables, or at least the program mysteriously working in funny ways."}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1439470004, "post_id": 31970807, "comment_id": 51881660, "body": "Are you opening a terminal window and running the program? If you are double clicking on an icon to run the program, standard input may not be connected."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1439470812, "post_id": 31970807, "comment_id": 51882321, "body": "To improve the quality of your question, I suggest you describe your environment (OS, IDE if any, compiler, how do you execute the program) in detail since that&#39;s probably the root of the problem.  And do not put it here in a comment but rather edit your question."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2803330, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/32b430077f63ddf556cd9e17446aa9fa?s=128&d=identicon&r=PG&f=1", "display_name": "SuperLucky", "link": "https://stackoverflow.com/users/2803330/superlucky"}, "edited": false, "score": 0, "creation_date": 1439399200, "post_id": 31971295, "comment_id": 51849697, "body": "It creates the file and with ten zeros in a row which makes sense because min and max have no values. The compiler is <code>g++</code> and on Mac OS X."}], "tags": [], "owner": {"reputation": 333, "user_id": 5113524, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7dde4d55abf11fb8077dfe825fc8ce76?s=128&d=identicon&r=PG&f=1", "display_name": "Navneeth", "link": "https://stackoverflow.com/users/5113524/navneeth"}, "is_accepted": false, "score": 1, "last_activity_date": 1439402842, "last_edit_date": 1439402842, "creation_date": 1439398811, "answer_id": 31971295, "question_id": 31970807, "link": "https://stackoverflow.com/questions/31970807/c-input-from-user-before-output-to-file/31971295#31971295", "title": "C++ Input from user before Output to file", "body": "<p>I don't see any problem with this program. It does what is expected, using Visual Studio 2015 Express. The only bug I see is this:</p>\n\n<pre><code>file &lt;&lt; min + (rand() % (int)(max - min + 1));\n</code></pre>\n\n<p>This appends numbers to the file one after the other, without any separating whitespace. The result for me was the text file containing:</p>\n\n<pre><code>208131917161201920\n</code></pre>\n\n<p>I'd replace that line with:</p>\n\n<pre><code>file &lt;&lt; min + (rand() % (max - min + 1)) &lt;&lt; ' ';\n</code></pre>\n\n<p>By itself, I cannot see how this code does not work on your machine. Try using a different compiler or state the explicit results of the program on your end (e.g. does \"numbers.txt\" ever get created, and if so, what is inside it if anything?). If this is merely a segment of a larger file, then <code>std::cin</code> is likely reading leftover garbage from the input buffer. Try adding this in the body of <code>getMinMax</code> before requesting user input:</p>\n\n<pre><code>std::cin.ignore(MAX_INT);\nstd::cin.clear();\n</code></pre>\n\n<p>And not that this is relevant, but it's not necessary to manually close a file at the end of a function in C++. When <code>std::fstream</code> goes out of scope, its destructor will the close the file automagically. Furthermore, pass ints by value instead of by reference if your function doesn't intend to change them. From the style of your code, I'm guessing you're used to programming in C and are trying to make a switch; it helps to start writing idiomatic C++ code early</p>\n\n<p>EDIT: Try rewriting the <code>getMinMax</code> method as:</p>\n\n<pre><code>#include &lt;sstream&gt;\nvoid getMinMax(int&amp; Min, int&amp; Max)\n{\n    using namespace std;\n    cin.ignore(MAX_INT);\n    cin.clear();\n    string temp;\n    cout &lt;&lt; \"Enter min: \"\n    getline(cin, temp);\n    stringstream(temp) &gt;&gt; Min;\n    cout &lt;&lt; \"Enter max: \"\n    getline(cin, temp);\n    stringstream(temp) &gt;&gt; Max;\n    //printf(\"(Min, Max) = (%i, %i)\\n\", Min, Max); //For debugging\n}\n</code></pre>\n\n<p>This is a verbose but somewhat safer version of what you posted. If this doesn't work, then I don't know what to tell you. If it does work, then my guess is that the input stream was polluted somehow.</p>\n"}, {"tags": [], "owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "is_accepted": false, "score": 0, "last_activity_date": 1439472267, "last_edit_date": 1439472267, "creation_date": 1439471699, "answer_id": 31989331, "question_id": 31970807, "link": "https://stackoverflow.com/questions/31970807/c-input-from-user-before-output-to-file/31989331#31989331", "title": "C++ Input from user before Output to file", "body": "<p>I suggest the following:</p>\n\n<ul>\n<li>Fix the missing include: i.e. add <code>include &lt;stdlib.h&gt;</code> to your file.</li>\n<li>Open a terminal and navigate to the directory where your randomNrs.cpp file (or whatever you named it) lives.</li>\n<li>Compile it: You said you are using g++, so you just run <code>g++ randomNrs.cpp -o randomNrs</code> in that directory - the <code>-o</code> flag will let you name your binary something else than the default <code>a.out</code>. In this example it would be named <code>randomNrs</code>.</li>\n<li>Run it: Then run your executable from within that directory by typing <code>./randomNrs</code></li>\n</ul>\n\n<p>These where the steps I went through in order to run your program. I'm on RHEL but it should be the same on OS X I think.</p>\n"}], "owner": {"reputation": 43, "user_id": 2803330, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/32b430077f63ddf556cd9e17446aa9fa?s=128&d=identicon&r=PG&f=1", "display_name": "SuperLucky", "link": "https://stackoverflow.com/users/2803330/superlucky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1439518912, "creation_date": 1439397090, "last_edit_date": 1439518912, "question_id": 31970807, "link": "https://stackoverflow.com/questions/31970807/c-input-from-user-before-output-to-file", "title": "C++ Input from user before Output to file", "body": "<p>I have this code that should get minimal value and maximal value from user before writing random numbers to a file but it writes to the file and skips the waiting for user input. How to wait and get the user input before writing to file and use the input from the user to write to the file.</p>\n\n<p>Solution: It works except that I have run the following command: <code>g++ randomNumbers.cpp</code> and expected the program to run right after but I forgot to run it manually by running the output file.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nconst bool CREATE_FILE = true;\n\nvoid getMinMax(int&amp;,int&amp;);\nvoid writeFile(std::ofstream&amp;, int&amp;, int&amp;);\n\nint main(){\n    if (CREATE_FILE){\n        int min;\n        int max;\n        std::ofstream outfile;\n        getMinMax(min, max);\n        writeFile(outfile, min, max);\n    }\n}\n\nvoid getMinMax(int&amp; min,int&amp; max){\n    std::cout &lt;&lt; \"Enter min: \";\n    std::cin &gt;&gt; min;\n    std::cout &lt;&lt; \"Enter max: \";\n    std::cin &gt;&gt; max;\n}\n\nvoid writeFile(std::ofstream&amp; file, int&amp; min, int&amp; max){\n    file.open(\"numbers.txt\", std::fstream::out);\n    for (int i = 1; i &lt;= 10; i++){\n        file &lt;&lt; min + (rand() % (int)(max - min + 1));\n    }\n    file.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "expression-templates", "boost-proto"], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 2632078, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a90b3ae6f5d94f7669e0ce49ea9e204?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2632078/aaron"}, "edited": false, "score": 0, "creation_date": 1439504608, "post_id": 31994820, "comment_id": 51902216, "body": "Thanks!  Seems obvious now, but was less so while I was lost in the meta-programming jungle :-)"}], "tags": [], "owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "is_accepted": true, "score": 3, "last_activity_date": 1439486964, "creation_date": 1439486964, "answer_id": 31994820, "question_id": 31970390, "link": "https://stackoverflow.com/questions/31970390/how-can-i-add-parent-references-to-boost-proto-expressions/31994820#31994820", "title": "How can I add parent references to Boost.Proto expressions?", "body": "<p>The technique you describe can't work. Expressions are built bottom-up. For the expression <code>a + (b * c)</code>, the parent node (<code>+</code>) doesn't exist at the time the child node (<code>b * c</code>) is constructed. The child can't store a pointer to an object that doesn't exist yet.</p>\n\n<p>You would have to post-process expressions to set the parent pointers using a transform or context.</p>\n"}], "owner": {"reputation": 573, "user_id": 2632078, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a90b3ae6f5d94f7669e0ce49ea9e204?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2632078/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 31994820, "answer_count": 1, "score": 3, "last_activity_date": 1439486964, "creation_date": 1439395768, "last_edit_date": 1439406158, "question_id": 31970390, "link": "https://stackoverflow.com/questions/31970390/how-can-i-add-parent-references-to-boost-proto-expressions", "title": "How can I add parent references to Boost.Proto expressions?", "body": "<p>I want to generate expression trees that have \"reverse\" references from child to parent.  Is there a way to customize the Proto generator or domain so that the expression wrapper class (using <code>proto::extends&lt;&gt;</code>) contains a reference to the parent expression?</p>\n\n<p>The goal behind this is to create expression trees that cache evaluated results, so that they can be re-evaluated efficiently.  My strategy is to update terminal values, and then walk up the tree marking parent nodes as \"dirty\" so that they will be re-evaluated when the root expression is evaluated.</p>\n"}, {"tags": ["c++", "winapi", "fonts"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1439396512, "post_id": 31970305, "comment_id": 51848172, "body": "When you say <i>&quot;typically&quot;</i>, you&#39;ll have to name the OS. Windows 7, 8, 8.1, and 10 do not display version information."}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1439407000, "post_id": 31970305, "comment_id": 51853992, "body": "@IInspectable - you can see the version in the font preview window."}], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 255718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b9aedb2f68cb782fe4c38d323377fb?s=128&d=identicon&r=PG&f=1", "display_name": "FruitBreak", "link": "https://stackoverflow.com/users/255718/fruitbreak"}, "edited": false, "score": 0, "creation_date": 1439914216, "post_id": 31974085, "comment_id": 52051342, "body": "Thank you for your great answer. Unfortunately, although I&#39;ve got some initial stuff building, I&#39;ve not managed to understand how I should be using &#39;openTypeTableTag&#39; parameter, and there seem to be minimal samples/documentation out there for this API!"}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "reply_to_user": {"reputation": 570, "user_id": 255718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b9aedb2f68cb782fe4c38d323377fb?s=128&d=identicon&r=PG&f=1", "display_name": "FruitBreak", "link": "https://stackoverflow.com/users/255718/fruitbreak"}, "edited": false, "score": 1, "creation_date": 1439916575, "post_id": 31974085, "comment_id": 52052634, "body": "you&#39;re trying to extract the &#39;name&#39; table, using (as per the documentation link) the following macro to form the tag argument for the table: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd368103%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>DWRITE_MAKE_OPENTYPE_TAG(&#39;n&#39;,&#39;a&#39;,&#39;m&#39;,&#39;e&#39;)</code></a>"}, {"owner": {"reputation": 570, "user_id": 255718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b9aedb2f68cb782fe4c38d323377fb?s=128&d=identicon&r=PG&f=1", "display_name": "FruitBreak", "link": "https://stackoverflow.com/users/255718/fruitbreak"}, "edited": false, "score": 0, "creation_date": 1439916740, "post_id": 31974085, "comment_id": 52052728, "body": "Thanks Mike! I did manage to get there in the end and the data even seems to be correct :) I found the &quot;wine&quot; code snippets that I found on google pointed in the right direction."}], "tags": [], "owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "is_accepted": true, "score": 3, "last_activity_date": 1503768011, "last_edit_date": 1503768011, "creation_date": 1439408754, "answer_id": 31974085, "question_id": 31970305, "link": "https://stackoverflow.com/questions/31970305/extracting-font-version-via-winapi/31974085#31974085", "title": "Extracting Font Version via WinAPI", "body": "<p>Note that if you're talking about the font preview program; that is not \"Windows\", that's actually just a small utility application that comes bundled with the OS. To show you that information, it consults information from the font's <code>name</code> table (<a href=\"https://www.microsoft.com/typography/otspec/name.htm\" rel=\"nofollow noreferrer\">spec here, for understanding its structure</a>, with the semantics of each <code>record id</code> explained in the \"Name IDs\" section).</p>\n\n<p>To access this data yourself, use DirectWrite's (not GDI, because it's ancient and obsolete) <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd371039%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">IDWriteFontFace::TryGetFontTable</a> method, and get a reference to the <code>name</code> table, which every valid OpenType font contains. Then extract the values you need as per the spec for the naming table.</p>\n\n<p>And to be clear: <strong>both</strong> <code>ttf</code> and <code>otf</code> fonts are OpenType fonts, the first is just \"OpenType with outlines encoded using the TrueType table layout\" and the second is \"OpenType with outlines encoded using a CFF data block\". If you don't know what the difference between those two is, that's because the difference doesn't matter: it's as if we decided to call PNG files <code>nil</code> and <code>ili</code> files depending on whether they used interlacing or not.</p>\n\n<p>(The <code>ttf</code> file extension simply predates the OpenType spec itself, and so when everyone switched to OpenType fonts, the extension was kept for backward compatibility. After several decades now, it turns out it's way easier to just keep doing that instead of deciding \"when to get rid of it\", so we're stuck with both extensions being used for the same kind of file. History!)</p>\n"}], "owner": {"reputation": 570, "user_id": 255718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b9aedb2f68cb782fe4c38d323377fb?s=128&d=identicon&r=PG&f=1", "display_name": "FruitBreak", "link": "https://stackoverflow.com/users/255718/fruitbreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 31974085, "answer_count": 1, "score": 1, "last_activity_date": 1503768011, "creation_date": 1439395490, "last_edit_date": 1439407558, "question_id": 31970305, "link": "https://stackoverflow.com/questions/31970305/extracting-font-version-via-winapi", "title": "Extracting Font Version via WinAPI", "body": "<p>The Windows Control Panel fonts window typically displays version information for the font. e.g. </p>\n\n<pre><code> Font Name: Fontawesome\n Version: Version 4.3.0 2015\n</code></pre>\n\n<p>I have searched in the Windows API and SO, but I have not managed to find how to extract this programmatically. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "unicode", "utf-8", "c++17"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 3, "creation_date": 1439395216, "post_id": 31970111, "comment_id": 51847399, "body": "Perhaps <a href=\"http://stackoverflow.com/a/30872695/1708801\">this is helpful</a>"}, {"owner": {"reputation": 774, "user_id": 1953158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38132eb8b7c38897f20a82f5274a79ba?s=128&d=identicon&r=PG", "display_name": "Muzer", "link": "https://stackoverflow.com/users/1953158/muzer"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1439395338, "post_id": 31970111, "comment_id": 51847474, "body": "Ah, thanks a lot for that link, I did find that question but clearly I didn&#39;t scroll down enough! That makes sense, so it&#39;s basically just to guarantee that a character is ASCII? It&#39;s a rather poor name, in that case, I must say! Seems like a feature by coincidence rather than by design..."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1439401086, "post_id": 31970111, "comment_id": 51850772, "body": "I frequently do not find the answer I am looking for in the accepted answer and often enough I have to go to the middle of the answers to find it. This can be for many reasons, often good answers come late or perhaps months or years later in some cases."}, {"owner": {"reputation": 17914, "user_id": 73656, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6e74327cd30703efbb90fc29f4fed03d?s=128&d=identicon&r=PG", "display_name": "Pavel Radzivilovsky", "link": "https://stackoverflow.com/users/73656/pavel-radzivilovsky"}, "edited": false, "score": 2, "creation_date": 1441604006, "post_id": 31970111, "comment_id": 52728208, "body": "I think they should stop doing this kind of things to the language. Someone forward them utf8everywhere.org"}], "answers": [{"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 3, "creation_date": 1439395876, "post_id": 31970297, "comment_id": 51847800, "body": "Maybe you should also mention that if the u8 requires several bytes it is ill formed (according to your link in the comment).  I think it&#39;s the biggest benefit, because nowadays writting something like <code>if (c==&#39;&#231;&#39;)</code>  seems to work but might in fact not give the expected result (either because wrong encoding of the source file, or because only the first byte is used, whereas u8&#39;&#231;&#39; would raise an error showing that there is a real problem here."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1439400939, "post_id": 31970297, "comment_id": 51850691, "body": "@Christophe good point, updated answer to include that part as well."}, {"owner": {"reputation": 774, "user_id": 1953158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38132eb8b7c38897f20a82f5274a79ba?s=128&d=identicon&r=PG", "display_name": "Muzer", "link": "https://stackoverflow.com/users/1953158/muzer"}, "edited": false, "score": 3, "creation_date": 1439468696, "post_id": 31970297, "comment_id": 51880706, "body": "Cheers, this is clearly the correct answer. I don&#39;t much care for it, as it seems very counter-intuitive to have a prefix that means &quot;UTF-8&quot; that actually accepts only ASCII, but I suppose it&#39;s better than the alternatives. Thanks!"}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 18, "last_activity_date": 1439474139, "last_edit_date": 1439474139, "creation_date": 1439395461, "answer_id": 31970297, "question_id": 31970111, "link": "https://stackoverflow.com/questions/31970111/what-is-the-point-of-the-utf-8-character-literals-proposed-for-c17/31970297#31970297", "title": "What is the point of the UTF-8 character literals proposed for C++17?", "body": "<p>The rationale is covered in by the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4540.html#119\" rel=\"noreferrer\">Evolution Working Group issue 119: N4197 Adding u8 character literals, [tiny] Why no u8 character literals? </a> which tracked the proposal and says:</p>\n\n<blockquote>\n  <p>We have five encoding-prefixes for string-literals (none, L, u8, u, U)\n  but only four for character literals -- the missing one is u8 for\n  character literals.</p>\n  \n  <p>This matters for implementations where the narrow execution character\n  set is not ASCII. In such a case, u8 character literals would provide\n  an ideal way to write character literals with guaranteed ASCII\n  encoding (the single-code-unit u8 encodings are exactly ASCII), but...\n  we don't provide them. Instead, the best one can do is something like this:</p>\n\n<pre><code>char x_ascii = { u'x' };\n</code></pre>\n  \n  <p>... where we'll get a narrowing error if the codepoint doesn't fit in\n  a 'char'. (Note that this is not quite the same as u8'x', which would\n  give us an error if the codepoint was not representable as a single\n  code unit in UTF-8.)</p>\n</blockquote>\n"}], "owner": {"reputation": 774, "user_id": 1953158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38132eb8b7c38897f20a82f5274a79ba?s=128&d=identicon&r=PG", "display_name": "Muzer", "link": "https://stackoverflow.com/users/1953158/muzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4271, "favorite_count": 1, "accepted_answer_id": 31970297, "answer_count": 1, "score": 22, "last_activity_date": 1439474139, "creation_date": 1439394882, "last_edit_date": 1439424084, "question_id": 31970111, "link": "https://stackoverflow.com/questions/31970111/what-is-the-point-of-the-utf-8-character-literals-proposed-for-c17", "title": "What is the point of the UTF-8 character literals proposed for C++17?", "body": "<p>What exactly is the point of these as proposed by <a href=\"https://isocpp.org/files/papers/n4267.html\">N4267</a> ?</p>\n\n<p>Their only function seems to be to prevent extended ASCII characters or partial UTF-8 code points from being specified. They still store in a fixed-width 8-bit char (which, as I understand it, is the correct and best way to handle UTF-8 anyway for almost all use cases), so they don't support non-ASCII characters at all. What is going on?</p>\n\n<p>(Actually I'm not entirely sure I understand the need for UTF-8 string literals either. I guess it's the worry of compilers doing weird/ambiguous things with Unicode strings coupled with validation of the Unicode?)</p>\n"}, {"tags": ["c++", "wpf", "visual-c++", "mfc", "ico"], "comments": [{"owner": {"reputation": 906, "user_id": 3906985, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6Qygd.jpg?s=128&g=1", "display_name": "Robson", "link": "https://stackoverflow.com/users/3906985/robson"}, "edited": false, "score": 0, "creation_date": 1439545824, "post_id": 31970096, "comment_id": 51916783, "body": "this might not solve the problem, but have you tried to have an image with the background as the alpha channel? I&#39;m asking this because all the other images shown look like just monocolored alphachannel images, except the &quot;blast kills at least 50 in china&quot; widget"}, {"owner": {"reputation": 400, "user_id": 1810848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd31bafec1b8395fd1a85ec280f24517?s=128&d=identicon&r=PG", "display_name": "spikeynick", "link": "https://stackoverflow.com/users/1810848/spikeynick"}, "reply_to_user": {"reputation": 906, "user_id": 3906985, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6Qygd.jpg?s=128&g=1", "display_name": "Robson", "link": "https://stackoverflow.com/users/3906985/robson"}, "edited": false, "score": 0, "creation_date": 1439591342, "post_id": 31970096, "comment_id": 51941486, "body": "Yeah, I&#39;ve tried using the alpha channel.  It is still just a small image on the tile."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4056989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ji1xMe-vLIg/AAAAAAAAAAI/AAAAAAAAADM/jl3Ny0QKf84/photo.jpg?sz=128", "display_name": "sudesh kumar", "link": "https://stackoverflow.com/users/4056989/sudesh-kumar"}, "reply_to_user": {"reputation": 400, "user_id": 1810848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd31bafec1b8395fd1a85ec280f24517?s=128&d=identicon&r=PG", "display_name": "spikeynick", "link": "https://stackoverflow.com/users/1810848/spikeynick"}, "edited": false, "score": 0, "creation_date": 1441088432, "post_id": 32248710, "comment_id": 52524061, "body": "You are right.I misread the question here. But I have another link, I think that is suitable solution for you.                                                                 <a href=\"http://www.ucancode.net/Visual_C_MFC_Samples/Bitmap-as-dialog-background.htm\" rel=\"nofollow noreferrer\">ucancode.net/Visual_C_MFC_Samples/&hellip;</a>"}, {"owner": {"reputation": 400, "user_id": 1810848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd31bafec1b8395fd1a85ec280f24517?s=128&d=identicon&r=PG", "display_name": "spikeynick", "link": "https://stackoverflow.com/users/1810848/spikeynick"}, "edited": false, "score": 0, "creation_date": 1441108919, "post_id": 32248710, "comment_id": 52536185, "body": "No that is not helpful.  That link is dealing with an image inside an application and has nothing to do with start menu tiles."}], "tags": [], "owner": {"reputation": 45, "user_id": 4056989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ji1xMe-vLIg/AAAAAAAAAAI/AAAAAAAAADM/jl3Ny0QKf84/photo.jpg?sz=128", "display_name": "sudesh kumar", "link": "https://stackoverflow.com/users/4056989/sudesh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1440676537, "creation_date": 1440676537, "answer_id": 32248710, "question_id": 31970096, "link": "https://stackoverflow.com/questions/31970096/adding-a-tile-to-an-mfc-application/32248710#32248710", "title": "Adding a tile to an MFC application", "body": "<p><strong>this->SetWindowText(\"SudeshMFCDemo\");</strong></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/yhczy8bz(v=vs.90).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/yhczy8bz(v=vs.90).aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 400, "user_id": 1810848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd31bafec1b8395fd1a85ec280f24517?s=128&d=identicon&r=PG", "display_name": "spikeynick", "link": "https://stackoverflow.com/users/1810848/spikeynick"}, "is_accepted": true, "score": 1, "last_activity_date": 1440691002, "creation_date": 1440691002, "answer_id": 32254248, "question_id": 31970096, "link": "https://stackoverflow.com/questions/31970096/adding-a-tile-to-an-mfc-application/32254248#32254248", "title": "Adding a tile to an MFC application", "body": "<p>After extensive research it is clear that this is not possible.  Not only is it not possible with MFC, but the only way to create a tile (live or static) is with a Windows Universal App.  So my solution here is to create a simple launcher program that starts up the MFC application and then exists.  However, one caveat here is that Windows Universal programs are not allowed to directly run other programs.  What they are allowed to do is open a file with it's default program.  So I created a new file extension and assigned the default application to be the MFC program.</p>\n"}], "owner": {"reputation": 400, "user_id": 1810848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd31bafec1b8395fd1a85ec280f24517?s=128&d=identicon&r=PG", "display_name": "spikeynick", "link": "https://stackoverflow.com/users/1810848/spikeynick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 2, "accepted_answer_id": 32254248, "answer_count": 2, "score": 5, "last_activity_date": 1440691002, "creation_date": 1439394828, "last_edit_date": 1439483424, "question_id": 31970096, "link": "https://stackoverflow.com/questions/31970096/adding-a-tile-to-an-mfc-application", "title": "Adding a tile to an MFC application", "body": "<p>I have a C++ MFC application that has a bunch of dialogs which are defined in an .rc file.  I need to add a tile to the application for pinning it to the start menu because the default \"tile\" that Windows creates from the icon doesn't look very good.  Rewriting the whole application to use XAML instead of the .rc file isn't an option right now.  The tile doesn't need to be interactive, just display a better looking picture than just slapping the small icon in.</p>\n\n<p>Is there a way to add a tile to an MFC application with an .rc file?</p>\n\n<p>If not, the other idea I had was to create a wrapper application which uses XAML to create a tile, and the only thing the wrapper application would do is launch the MFC application.  Does anybody have a better solution?</p>\n\n<p>I am using Visual Studio 2015.\nThe .ico file I'm using has 768x768, 512x512, 256x256, 150x150, 48x48, 32x32, and 16x16 versions of the image in it. </p>\n\n<p><strong>Edit</strong></p>\n\n<p>There was some confusion about what exactly I needed.  Here is an annotated screen shot which hopefully shows the issue clearly.\n<a href=\"https://i.stack.imgur.com/RQJbG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RQJbG.png\" alt=\"annotated screen shot showing, default tile with small icon\"></a></p>\n\n<p>One other clarification, I don't think this makes any difference, but I thought I'd add it just to be safe.  The program does not need to run on Windows 8/8.1, just Windows7 and Windows10</p>\n"}, {"tags": ["c++", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1439411102, "post_id": 31970018, "comment_id": 51856085, "body": "using more different mats might be better for testing new stuff and debugging and might give code that&#39;s easier to read. but second one might be a little bit more efficient."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1439411363, "post_id": 31970018, "comment_id": 51856221, "body": "but: be aware that for example methods like cvtColor(input, input, code) will be inefficient for multiple calls because they are no in-place operations and have to allocate temporary data."}], "answers": [{"tags": [], "owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "is_accepted": true, "score": 1, "last_activity_date": 1440102692, "last_edit_date": 1440102692, "creation_date": 1439395005, "answer_id": 31970150, "question_id": 31970018, "link": "https://stackoverflow.com/questions/31970018/opencv-why-create-multiple-mat-objects-to-transform-an-images-format/31970150#31970150", "title": "OpenCV: Why create multiple Mat objects to transform an image&#39;s format?", "body": "<p>The question comes down to, do you still need the unequalized image later on in the code? If you want to further process the gray image then the first option is better. If not, then use the second option. </p>\n\n<p>Some functions might not work in-place; specifically, ones that transform the matrix to a different format, either by changing its dimensions (such as <code>copyMakeBorder</code>) or number of channels (such as <code>cvtColor</code>). </p>\n\n<p>For your use case, the two blocks of code perform the same number of calculations, so the speed wouldn't change at all. The second option is obviously more memory efficient.</p>\n"}], "owner": {"reputation": 99, "user_id": 4941509, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f06bc2967649700b4fd107f0055e8085?s=128&d=identicon&r=PG&f=1", "display_name": "futureLookingGrimm", "link": "https://stackoverflow.com/users/4941509/futurelookinggrimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 31970150, "answer_count": 1, "score": 2, "last_activity_date": 1440102692, "creation_date": 1439394622, "question_id": 31970018, "link": "https://stackoverflow.com/questions/31970018/opencv-why-create-multiple-mat-objects-to-transform-an-images-format", "title": "OpenCV: Why create multiple Mat objects to transform an image&#39;s format?", "body": "<p>I have not worked with OpenCV for a while, so please bear with my beginner questions. I curiously thought of something as I was looking through OpenCV tutorials and sample code. </p>\n\n<p>Why do people create multiple Mat images when going through multiple transformations? Here is an example:</p>\n\n<pre><code>Mat mat, gray, thresh, equal;\nmat = imread(\"E:/photo.jpg\");\ncvtColor(mat, gray, CV_BGR2GRAY);\nequalizeHist(gray, equal);\nthreshold(equal, thresh, 50, 255, THRESH_BINARY);\n</code></pre>\n\n<p>Example of a code that uses only <em>two</em> Mat images:</p>\n\n<pre><code>Mat mat, process; \nmat = imread(\"E:/photo.jpg\");\ncvtColor(mat, process, CV_BGR2GRAY);\nequalizeHist(process, process);\nthreshold(process, process, 50, 255, THRESH_BINARY);\n</code></pre>\n\n<p>Is there anything different between the two examples? Also, another beginner question: will OpenCV run faster when it only creates two Mat images, or will it still be the same?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "c++11", "sigaction"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1439433556, "post_id": 31969623, "comment_id": 51863037, "body": "I haven&#39;t tried this but can&#39;t you put that cin clear line in the signal handler?"}, {"owner": {"reputation": 377, "user_id": 4464720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4bca52696528a2b24db979cc56ade25c?s=128&d=identicon&r=PG&f=1", "display_name": "kiigass", "link": "https://stackoverflow.com/users/4464720/kiigass"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1439466206, "post_id": 31969623, "comment_id": 51878977, "body": "No, I tried this, but unfortunately it does not work."}], "owner": {"reputation": 377, "user_id": 4464720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4bca52696528a2b24db979cc56ade25c?s=128&d=identicon&r=PG&f=1", "display_name": "kiigass", "link": "https://stackoverflow.com/users/4464720/kiigass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439408534, "creation_date": 1439393485, "last_edit_date": 1439408534, "question_id": 31969623, "link": "https://stackoverflow.com/questions/31969623/the-right-way-to-wait-for-input-after-sigaction-handling-ctrlc-aka-sigint", "title": "The right way to wait for input after sigaction handling ctrl+c aka SIGINT", "body": "<p>This program will print infinite \"Enter a:\" to the command line, after sending SIGINT via <kbd>Ctrl</kbd> + <kbd>C</kbd>. To exit this loop, I use <kbd>Ctrl</kbd> + <kbd>\\</kbd>. If I uncomment the line containing <code>std::cin.clear();</code>, everything works fine. My question is, is this the right way to do it? One would have to set <code>std::cin.clear();</code> in front of every cin/cout he wants the program to wait for. That's why it seems not to be the proper way to me.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;signal.h&gt;\n\nvoid sig_handler(int s)\n{\n  std::cout &lt;&lt; \"Cought: \" &lt;&lt; s &lt;&lt; std::endl;\n  // do something...\n}\n\n\nint main ()\n{\n  struct sigaction sigIntHandler;\n  sigIntHandler.sa_handler = sig_handler;\n  sigemptyset(&amp;sigIntHandler.sa_mask);\n  sigIntHandler.sa_flags = 0;\n  sigaction(SIGINT, &amp;sigIntHandler, NULL);\n  int a=1;\n  while(a)\n    {\n      std::cout &lt;&lt; \"Enter a:\" &lt;&lt; std::endl;\n      //std::cin.clear(); // Uncomment me!\n      std::cin &gt;&gt; a;\n    }\n}\n</code></pre>\n\n<p>PS: I know that cout in signal handlers are a bad idea. </p>\n\n<p>PPS: Everything works fine (without <code>std::cin.clear();</code>) when I use the old (deprecated) <code>signal()</code>.</p>\n\n<p>PPPS: Just to make it clear, I do not want to exit the program on <kbd>Ctrl</kbd> + <kbd>C</kbd>!</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1439393546, "post_id": 31969547, "comment_id": 51846202, "body": "Have you read the documentation for <a href=\"http://www.cmake.org/cmake/help/v3.2/command/include_directories.html\" rel=\"nofollow noreferrer\"><code>include_directories</code></a> and <a href=\"http://www.cmake.org/cmake/help/v3.2/command/target_include_directories.html\" rel=\"nofollow noreferrer\"><code>target_include_directories</code></a>? What is it you don&#39;t understand about the difference between them?"}, {"owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 108, "creation_date": 1439394335, "post_id": 31969547, "comment_id": 51846785, "body": "There is no clarity in the documentation. I read it and surmised what Angew has written in his answer, but there are no descriptions, no examples and for a system that is meant for project building, there are no project based examples in CMake documentation. Had there been a good and exhaustive documentation of CMake, I would not have been burdening the community with these questions."}, {"owner": {"reputation": 1415, "user_id": 4379130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ccFzr.png?s=128&g=1", "display_name": "John Greene", "link": "https://stackoverflow.com/users/4379130/john-greene"}, "edited": false, "score": 3, "creation_date": 1563533640, "post_id": 31969547, "comment_id": 100740956, "body": "Concepts of cmake is poorly documented. Particularly target and \u201cuntargeted\u201d."}, {"owner": {"reputation": 7926, "user_id": 108616, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/dRA03.jpg?s=128&g=1", "display_name": "Tien Do", "link": "https://stackoverflow.com/users/108616/tien-do"}, "edited": false, "score": 2, "creation_date": 1603333505, "post_id": 31969547, "comment_id": 114006341, "body": "Agree that CMake documentation is bad, how much effort do they save to not provide examples? When I was new to CMake I was often confused with old/new syntaxes."}, {"owner": {"reputation": 1602, "user_id": 195663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/p2mgO.jpg?s=128&g=1", "display_name": "Jonathan Neufeld", "link": "https://stackoverflow.com/users/195663/jonathan-neufeld"}, "edited": false, "score": 0, "creation_date": 1613615500, "post_id": 31969547, "comment_id": 117132134, "body": "30 years of coding experience has taught me that undocumented software is as good as non-existent software and poorly documented software is worse than code that doesn&#39;t even compile.  As such I think this question should be treated like a bug report."}], "answers": [{"comments": [{"owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "edited": false, "score": 38, "creation_date": 1439395909, "post_id": 31969632, "comment_id": 51847823, "body": "I think the latter one should generally be preferred (as long as one is using cmake 3). It has the added benefit of putting <code>x&#47;y</code> in the include path of any dependent targets that use <code>t</code> in their <code>target_link_libraries</code> commands. Of course there is a place for the former, but I believe the latter is generally better."}, {"owner": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "edited": false, "score": 2, "creation_date": 1439399250, "post_id": 31969632, "comment_id": 51849715, "body": "The original answer stated that only targets and subdirs added after <code>include_directories</code> will be affected. I&#39;m editing the answer: the documentation clearly states that <i>all</i> targets in the current CMakeLists are affected. The documentation does not mention but only subdirs after the call are affected (as was correctly stated in the original answer)"}, {"owner": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "reply_to_user": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "edited": false, "score": 0, "creation_date": 1439399484, "post_id": 31969632, "comment_id": 51849854, "body": "@Phil, <code>target_include_directories</code> has been introduced in CMake 2.8.11 (May 2013)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "edited": false, "score": 0, "creation_date": 1439479808, "post_id": 31969632, "comment_id": 51889353, "body": "@tamas.kenez Thanks for bringing this to my attention, fixed. I was quite convinced it was a &quot;from now on&quot; thing."}, {"owner": {"reputation": 1602, "user_id": 195663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/p2mgO.jpg?s=128&g=1", "display_name": "Jonathan Neufeld", "link": "https://stackoverflow.com/users/195663/jonathan-neufeld"}, "edited": false, "score": 1, "creation_date": 1613615678, "post_id": 31969632, "comment_id": 117132174, "body": "I should Greasemonkey your answer onto the official documentation for <code>include_directories</code>, concise and clear, thank you!  So then <code>target_include_directories</code> is a carpenter&#39;s hammer and <code>include_directories</code> is a sledge hammer."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 182, "last_activity_date": 1439479784, "last_edit_date": 1439479784, "creation_date": 1439393498, "answer_id": 31969632, "question_id": 31969547, "link": "https://stackoverflow.com/questions/31969547/what-is-the-difference-between-include-directories-and-target-include-directorie/31969632#31969632", "title": "What is the difference between include_directories and target_include_directories in CMake?", "body": "<p><code>include_directories(x/y)</code> affects directory scope. All targets in this CMakeList, as well as those in all subdirectories added after the point of its call, will have the path <code>x/y</code> added to their include path.</p>\n\n<p><code>target_include_directories(t x/y)</code> has target scope&mdash;it adds <code>x/y</code> to the include path for target <code>t</code>.</p>\n\n<p>You want the former one if all of your targets use the include directories in question. You want the latter one if the path is specific to a target, or if you want finer control of the path's visibility. The latter comes from the fact that <code>target_include_directories()</code> supports the <code>PRIVATE</code>, <code>PUBLIC</code>, and <code>INTERFACE</code> qualifiers.</p>\n"}, {"comments": [{"owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 2, "creation_date": 1584556035, "post_id": 40244458, "comment_id": 107475510, "body": "This is the first time I ever read an understandable explanation of the <code>PUBLIC</code> etc. properties! Thanks :D"}, {"owner": {"reputation": 142, "user_id": 2203249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3daf20c7e84d0a24808c38da9cde8ed2?s=128&d=identicon&r=PG", "display_name": "Thiago Navarro", "link": "https://stackoverflow.com/users/2203249/thiago-navarro"}, "edited": false, "score": 0, "creation_date": 1600096013, "post_id": 40244458, "comment_id": 112972948, "body": "Removing the ambiguity: when you use <code>PUBLIC</code> or <code>INTERFACE</code> with  <code>target_include_directories</code>, the property <code>INTERFACE_INCLUDE_DIRECTORIES</code>  is filled with the include directories required to compile against the headers for the target."}, {"owner": {"reputation": 142, "user_id": 2203249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3daf20c7e84d0a24808c38da9cde8ed2?s=128&d=identicon&r=PG", "display_name": "Thiago Navarro", "link": "https://stackoverflow.com/users/2203249/thiago-navarro"}, "edited": false, "score": 2, "creation_date": 1600098141, "post_id": 40244458, "comment_id": 112973949, "body": "Check <a href=\"https://stackoverflow.com/questions/26243169/cmake-target-include-directories-meaning-of-scope_\">here</a> if you want know more about the meaning of the keywords <code>PRIVATE</code>, <code>PUBLIC</code> and <code>INTERFACE</code> using <code>target_include_directories</code>"}], "tags": [], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "is_accepted": false, "score": 53, "last_activity_date": 1477410789, "last_edit_date": 1495541430, "creation_date": 1477410789, "answer_id": 40244458, "question_id": 31969547, "link": "https://stackoverflow.com/questions/31969547/what-is-the-difference-between-include-directories-and-target-include-directorie/40244458#40244458", "title": "What is the difference between include_directories and target_include_directories in CMake?", "body": "<p>Beside what <a href=\"https://stackoverflow.com/a/31969632/2436175\">Angew's answer</a> correctly says, another very important difference between <code>include_directories</code> and <code>target_include_directories</code> is that, when used with <code>PUBLIC</code> or <code>INTERFACE</code>, the latter populate the <code>INTERFACE_INCLUDE_DIRECTORIES</code> property of the target. This property is useful when another target uses <code>target_link_libraries</code> to link to the original target, as the linking target will have automatically those include directories added. See <a href=\"https://stackoverflow.com/a/40242257/2436175\">example</a>.</p>\n\n<p>This important feature is pretty well hidden in the documentation: <a href=\"https://cmake.org/cmake/help/latest/command/target_include_directories.html\" rel=\"noreferrer\">target_include_directories</a> mention populating <code>INTERFACE_INCLUDE_DIRECTORIES</code>, whose <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/INTERFACE_INCLUDE_DIRECTORIES.html\" rel=\"noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <p>When target dependencies are specified using <a href=\"https://cmake.org/cmake/help/latest/command/target_link_libraries.html\" rel=\"noreferrer\">target_link_libraries()</a>,\n  CMake will read this property from all target dependencies to\n  determine the build properties of the consumer.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 8117177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9949e204974d6dfa01c18a6dc82cd60e?s=128&d=identicon&r=PG&f=1", "display_name": "Nick.Rhan", "link": "https://stackoverflow.com/users/8117177/nick-rhan"}, "is_accepted": false, "score": 5, "last_activity_date": 1546077659, "creation_date": 1546077659, "answer_id": 53968518, "question_id": 31969547, "link": "https://stackoverflow.com/questions/31969547/what-is-the-difference-between-include-directories-and-target-include-directorie/53968518#53968518", "title": "What is the difference between include_directories and target_include_directories in CMake?", "body": "<p>As @Angew said, the very difference is :</p>\n\n<p>1, include_directories() is accessible for all the files in the source-tree\n2, target_include_directories() is-only accessible for a specific target when compile. </p>\n"}], "owner": {"reputation": 2937, "user_id": 2711403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e0e461d9bbecad550475b778b61b089c?s=128&d=identicon&r=PG", "display_name": "Ujjwal Aryan", "link": "https://stackoverflow.com/users/2711403/ujjwal-aryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89442, "favorite_count": 43, "accepted_answer_id": 31969632, "answer_count": 3, "score": 164, "last_activity_date": 1564590581, "creation_date": 1439393292, "last_edit_date": 1533836126, "question_id": 31969547, "link": "https://stackoverflow.com/questions/31969547/what-is-the-difference-between-include-directories-and-target-include-directorie", "title": "What is the difference between include_directories and target_include_directories in CMake?", "body": "<p>I have a directory structure for my C++ code which goes like this :</p>\n\n<pre><code>|\n|-&gt;include\n|-&gt;src\n</code></pre>\n\n<p>I am writing a CMakeLists.txt  file for my code. I want to understand the difference between <code>include_directories</code> and <code>target_include_directories</code> in <code>CMake</code>.</p>\n\n<p>What is the difference between their usage and in order to add my include file path which one should I be using?</p>\n"}, {"tags": ["c++", "yaml-cpp"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5210838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1db479704d33136286cd64a1b3e50cc?s=128&d=identicon&r=PG&f=1", "display_name": "abcd7", "link": "https://stackoverflow.com/users/5210838/abcd7"}, "edited": false, "score": 0, "creation_date": 1439543350, "post_id": 31970547, "comment_id": 51915099, "body": "i would like to convert <code>YAML::Node doc;</code>  <code>parser.GetNextDocument(doc);</code>  into new API,       error: no matching function for call to ` &#39;Load(const YAML::Node&amp;)&#39;`        <code>const YAML::Node doc = YAML::Load(doc);</code>"}, {"owner": {"reputation": 29797, "user_id": 112, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8cff214f16c7c8e73244a8ed8dea7e0e?s=128&d=identicon&r=PG", "display_name": "Jesse Beder", "link": "https://stackoverflow.com/users/112/jesse-beder"}, "reply_to_user": {"reputation": 41, "user_id": 5210838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1db479704d33136286cd64a1b3e50cc?s=128&d=identicon&r=PG&f=1", "display_name": "abcd7", "link": "https://stackoverflow.com/users/5210838/abcd7"}, "edited": false, "score": 0, "creation_date": 1439558599, "post_id": 31970547, "comment_id": 51924617, "body": "@abcd7, you pass your input data (or a file stream) to <code>YAML::Load</code>, or a filename to <code>YAML::LoadFile</code>."}], "tags": [], "owner": {"reputation": 29797, "user_id": 112, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8cff214f16c7c8e73244a8ed8dea7e0e?s=128&d=identicon&r=PG", "display_name": "Jesse Beder", "link": "https://stackoverflow.com/users/112/jesse-beder"}, "is_accepted": false, "score": 0, "last_activity_date": 1439396323, "creation_date": 1439396323, "answer_id": 31970547, "question_id": 31969485, "link": "https://stackoverflow.com/questions/31969485/conversion-of-getnextdocument-from-old-api-new-api-yamlcpp/31970547#31970547", "title": "conversion of GetNextDocument() from old API- new API YAMLcpp", "body": "<p><code>YAML::LoadAll</code> or <code>YAML::LoadAllFromFile</code></p>\n"}, {"tags": [], "owner": {"reputation": 3221, "user_id": 1484601, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47efacf4f9467b85d64477b9e0f0c31f?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/1484601/vince"}, "is_accepted": false, "score": 3, "last_activity_date": 1483377227, "creation_date": 1483377227, "answer_id": 41430777, "question_id": 31969485, "link": "https://stackoverflow.com/questions/31969485/conversion-of-getnextdocument-from-old-api-new-api-yamlcpp/41430777#41430777", "title": "conversion of GetNextDocument() from old API- new API YAMLcpp", "body": "<p>old API:</p>\n\n<pre><code>std::ifstream fin(config_file);\nYAML::Parser parser(fin);\nYAML::Node doc;\nparser.GetNextDocument(doc);      \n</code></pre>\n\n<p>new API:</p>\n\n<pre><code>  std::ifstream fin(config_file);\n  YAML::Node doc = YAML::Load(fin);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5210838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1db479704d33136286cd64a1b3e50cc?s=128&d=identicon&r=PG&f=1", "display_name": "abcd7", "link": "https://stackoverflow.com/users/5210838/abcd7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1483377227, "creation_date": 1439393107, "last_edit_date": 1439394163, "question_id": 31969485, "link": "https://stackoverflow.com/questions/31969485/conversion-of-getnextdocument-from-old-api-new-api-yamlcpp", "title": "conversion of GetNextDocument() from old API- new API YAMLcpp", "body": "<p>I could not find equivalent code for new YAMLcpp version  <code>p-&gt;GetNextDocument( n )</code>.</p>\n"}, {"tags": ["c++", "qt", "resize", "qsplitter"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5138708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/319b0411dc568411b75fa79f4bc53a88?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/5138708/john-smith"}, "edited": false, "score": 0, "creation_date": 1439406655, "post_id": 31971309, "comment_id": 51853817, "body": "Thank you so much. That&#39;s just what I need. I wasted about 2 days searching for the way by my own, but you helped me a lot. Thanks."}], "tags": [], "owner": {"reputation": 3641, "user_id": 3399252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GeTXQ.jpg?s=128&g=1", "display_name": "Bowdzone", "link": "https://stackoverflow.com/users/3399252/bowdzone"}, "is_accepted": true, "score": 12, "last_activity_date": 1439398870, "creation_date": 1439398870, "answer_id": 31971309, "question_id": 31969465, "link": "https://stackoverflow.com/questions/31969465/how-to-resize-splitter-widgets-programmatically-in-qt/31971309#31971309", "title": "How to resize splitter widgets programmatically in Qt?", "body": "<p><a href=\"http://doc.qt.io/qt-5/qsplitter.html\">QSplitter</a> hast its method <a href=\"http://doc.qt.io/qt-5/qsplitter.html#setSizes\"><code>QSplitter::setSizes(QList&lt;int&gt;)</code></a> where each entry in the list is the size of the widget in pixels, from left to right or top to bottom respectively. The method does not require you to know the exact width, it still works with guessed sizes.</p>\n\n<p>I use this functionality for instance to store the user defined sizes (obtained by <a href=\"http://doc.qt.io/qt-5/qsplitter.html#sizes\"><code>QSplitter::sizes()</code></a>) in a <code>QSettings</code> instance on the program shutdown and reapply them when the software is started again. If they are not set for some reason I just set the overall width divided by the number of widgets in the splitter and it works fine enough as an initial state.</p>\n"}], "owner": {"reputation": 109, "user_id": 5138708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/319b0411dc568411b75fa79f4bc53a88?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/5138708/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3025, "favorite_count": 1, "accepted_answer_id": 31971309, "answer_count": 1, "score": 8, "last_activity_date": 1579004221, "creation_date": 1439393053, "last_edit_date": 1439393363, "question_id": 31969465, "link": "https://stackoverflow.com/questions/31969465/how-to-resize-splitter-widgets-programmatically-in-qt", "title": "How to resize splitter widgets programmatically in Qt?", "body": "<p>I use QSplitter to place some widgets side by side.</p>\n\n<p>Being a user, I can resize those widgets just dragging a splitter.</p>\n\n<p>Being a programmer, I don't know how to specify exactly what width and what height do I want at the moment.</p>\n\n<p>That's my original state (adjusted by different stretches).\n<a href=\"https://i.stack.imgur.com/r2csR.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/r2csR.jpg\" alt=\"Original state\"></a></p>\n\n<p>I tried to use setFixedSize(), but after that call the user can't resize widgets by itself anymore (and that's definitely correct behavior, because the size gets 'fixed').\n<a href=\"https://i.stack.imgur.com/1Ubdn.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1Ubdn.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>If I use resize(), it has almost no effect. The widget is resized, but (!) incorrectly and (!) when I start dragging again the widget gets its initial state.\n<a href=\"https://i.stack.imgur.com/SANHO.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SANHO.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Is there any way to resize that left widget in code correctly? I don't want to have fixed size but resize() doesn't work properly, as you can see. So what should I do?</p>\n"}, {"tags": ["c#", "c++", ".net", "chm", "html-help"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439392998, "post_id": 31969356, "comment_id": 51845807, "body": "Why is this tagged as C++?"}, {"owner": {"reputation": 1362, "user_id": 220248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/682504ea77f2af226b8d17db4d9c80b6?s=128&d=identicon&r=PG", "display_name": "Zepee", "link": "https://stackoverflow.com/users/220248/zepee"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439393576, "post_id": 31969356, "comment_id": 51846221, "body": "Our code base is split between managed/unmanaged C++ and C#, we could use a library in either of the languages"}, {"owner": {"reputation": 5173, "user_id": 1981088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Iicg.png?s=128&g=1", "display_name": "help-info.de", "link": "https://stackoverflow.com/users/1981088/help-info-de"}, "edited": false, "score": 0, "creation_date": 1439395419, "post_id": 31969356, "comment_id": 51847530, "body": "@Zepee - you certainly know that you will lose all functionality of the HTMLHelp Viewer with table of contents, index, and search?"}, {"owner": {"reputation": 1362, "user_id": 220248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/682504ea77f2af226b8d17db4d9c80b6?s=128&d=identicon&r=PG", "display_name": "Zepee", "link": "https://stackoverflow.com/users/220248/zepee"}, "edited": false, "score": 0, "creation_date": 1439395645, "post_id": 31969356, "comment_id": 51847661, "body": "Yep :) This is more or less to open certain help pages in our own light WPF window, and we don&#39;t want the full blown help to show. Currently we have it working through hard coded URLs, but we want to make it work through topic IDs"}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1439546774, "post_id": 31969356, "comment_id": 51917403, "body": "You might have a look at the Free Pascal &quot;chmls&quot; command, specifically its extractalias command. chmls is a helper tool to examine CHM structures that was used to construct the CHM lib and compiler. Maybe you can port selected code."}], "answers": [{"comments": [{"owner": {"reputation": 1362, "user_id": 220248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/682504ea77f2af226b8d17db4d9c80b6?s=128&d=identicon&r=PG", "display_name": "Zepee", "link": "https://stackoverflow.com/users/220248/zepee"}, "edited": false, "score": 0, "creation_date": 1439817426, "post_id": 32028433, "comment_id": 52002040, "body": "Thanks for the reply. These seem to be the conclusions I arrived at during my own investigations. You can either have a windows HTMLHelp window (which can be customized to some degree) where you can open topics by ID, or you have your own HTLM window and open them by URL. As far as I could tell there is no easy way of manually reading the chm mappings and infer the URL form the topic IDs. It seemed possible to decode the ALink mappings, some custom libraries manipulate them, just not a simple solution to implement, and probabyl not worth the cost."}], "tags": [], "owner": {"reputation": 5173, "user_id": 1981088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Iicg.png?s=128&g=1", "display_name": "help-info.de", "link": "https://stackoverflow.com/users/1981088/help-info-de"}, "is_accepted": false, "score": 2, "last_activity_date": 1439666426, "creation_date": 1439666426, "answer_id": 32028433, "question_id": 31969356, "link": "https://stackoverflow.com/questions/31969356/microsoft-html-help-get-the-topic-page-url-from-the-topic-id/32028433#32028433", "title": "Microsoft HTML Help - Get the topic page URL from the topic ID", "body": "<p>AFAIK you need a valid URL with the topic filename e.g. \"Garden/garden.htm\" when using a web browser control. So other solutions are very difficult and I think not possible with a web browser control.</p>\n\n<p>You know you can do a hard coded call with e.g. following code:</p>\n\n<pre><code>    public static string GetChmUrl(string fileName, string page)\n{\n  StringBuilder url = new StringBuilder();\n  url.AppendFormat(\"mk:@MSITStore:{0}::\", fileName);\n  if (page.IndexOf('/') != 0) url.Append('/');\n  url.Append(page);\n  return url.ToString();\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>   webBrowser1.Navigate(new Uri(GetChmUrl(Application.StartupPath + sHTMLHelpFileName_ShowWithoutAutoSync, \"Garden/garden.htm\")));\n</code></pre>\n\n<p>For showing HTMLHelp topics by TopicId without the full blown help window you may create a special window type for the HTMLHelp Viewer window. OK \u2013 this is more a help authoring work preparing a call from your application. It\u2019s possible by compiling the CHM in a special way and reduce it to the content pane normally on the right side of the HTMLHelp Viewer.</p>\n\n<p>You can call the content by TopicId and the result is shown in the snapshot:</p>\n\n<pre><code>    private void btnTopicId_Click(object sender, EventArgs e)\n{\n    Help.ShowHelp(this.btnOpenHelpShowTopic, helpProvider1.HelpNamespace, HelpNavigator.TopicId, @\"10000\");\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Z4Rjl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z4Rjl.png\" alt=\"enter image description here\"></a></p>\n\n<p>Many years ago there was a so called \u201cembedded help\u201d for application as you can see in the snapshot. This was done by HTMLHelp API call. I have old Delphi code but not translated to .net. HTMLHelp is used for nearly 20 years now and today there is more use of web help. So you have to think about and decide.</p>\n\n<p><a href=\"https://i.stack.imgur.com/56VW2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/56VW2.png\" alt=\"enter image description here\"></a></p>\n\n<p>You need to use marshalling to call the unmanaged HTML Help API from a Visual C# application. Using HTMLHelp API in .net is not easy. To give this a try you may start with a download sample (at the end of the article) from: \n<a href=\"https://support.microsoft.com/en-us/kb/317406\" rel=\"nofollow noreferrer\">https://support.microsoft.com/en-us/kb/317406</a></p>\n\n<p>I attached a snapshot too:</p>\n\n<p><a href=\"https://i.stack.imgur.com/I67YA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I67YA.png\" alt=\"enter image description here\"></a></p>\n\n<p>HTH.</p>\n"}], "owner": {"reputation": 1362, "user_id": 220248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/682504ea77f2af226b8d17db4d9c80b6?s=128&d=identicon&r=PG", "display_name": "Zepee", "link": "https://stackoverflow.com/users/220248/zepee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439666426, "creation_date": 1439392802, "last_edit_date": 1439407109, "question_id": 31969356, "link": "https://stackoverflow.com/questions/31969356/microsoft-html-help-get-the-topic-page-url-from-the-topic-id", "title": "Microsoft HTML Help - Get the topic page URL from the topic ID", "body": "<p>We're currently using HTML Help to display CHM help files in our software. We'd like to change how we're opening the help however, to open it in our own custom window with an embedded browser.</p>\n\n<p>Achieving this by directly requesting topic pages to be opened with URLs is straightforward enough, however, we'd like to maintain the usage of Topic IDs such that the editorial team can freely re-structure and re-name the help as they see fit, only by manipulating the maps and aliases. </p>\n\n<p>I've been digging around for a bit and couldn't find any (reasonably cheap) way to get a URL to open from a Topic ID, such that I could request a URL to open in the custom window. Am I missing a trick, or are there any libraries out there that might facilitate this?</p>\n"}, {"tags": ["c++", "linux", "ubuntu", "gcc", "boost"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 1812047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b4281af3476a928c6713444bf65ae82?s=128&d=identicon&r=PG", "display_name": "cprlkleg", "link": "https://stackoverflow.com/users/1812047/cprlkleg"}, "edited": false, "score": 0, "creation_date": 1439545477, "post_id": 31998082, "comment_id": 51916542, "body": "Thank you! Yes, I moved past that yesterday, thank you. This did, however, lead to another issue whereby the compiler was complaining at several instances of an error like: &#39;undefined reference to std::some_function&#39;. This, it turns out, was owing to an issue in linking C and C++ code (the header) using the gcc command. Adding a -lstdc++ flag, or using the g++ compile command (<a href=\"http://stackoverflow.com/questions/10906275/undefined-reference-to-stdios-baseinitinit\">see the answer here</a> for a description of what&#39;s going on) solves this, too, and all compiles successfully."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1439498674, "creation_date": 1439498674, "answer_id": 31998082, "question_id": 31969232, "link": "https://stackoverflow.com/questions/31969232/c-boost-library-undefined-reference-on-shm-open-dso-missing-from-command-line/31998082#31998082", "title": "C++ Boost Library Undefined Reference On shm_open: DSO Missing From Command Line", "body": "<p>You should simply add the missing library exactly as the message suggests: <code>-lrt</code> at the end of the linker options should suffice</p>\n"}], "owner": {"reputation": 323, "user_id": 1812047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b4281af3476a928c6713444bf65ae82?s=128&d=identicon&r=PG", "display_name": "cprlkleg", "link": "https://stackoverflow.com/users/1812047/cprlkleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3636, "favorite_count": 0, "accepted_answer_id": 31998082, "answer_count": 1, "score": 3, "last_activity_date": 1439546538, "creation_date": 1439392495, "last_edit_date": 1495535200, "question_id": 31969232, "link": "https://stackoverflow.com/questions/31969232/c-boost-library-undefined-reference-on-shm-open-dso-missing-from-command-line", "title": "C++ Boost Library Undefined Reference On shm_open: DSO Missing From Command Line", "body": "<p>I am writing an application which is to play the role of a subscriber in a DDS system. This subscriber will, upon receipt of data, write the value(s) to a shared memory location so that they can be read by another GUI application.</p>\n\n<p>I have written a version of the application which compiles and runs A-OK on Windows, but I am now faced with creating a version to be run on Ubuntu. Being Windows native, this has proved to be troublesome for me.</p>\n\n<p>To create the Ubuntu version, I have ported my codebase to a Ubuntu VM, and am now trying to compile it there, which is where I'm running into issues.</p>\n\n<p>For the most part, everything compiles fine and the process is wonderfully similar to that on Windows. Unfortunately, the final statement to link all of my generated .o files is what fails. A bit of a description is below:</p>\n\n<p>I'm using the boost interprocess library to write a header file that will provide the shared memory read/write operations. The .cpp which achieves this is as below: <strong>MemWriterH.cpp</strong></p>\n\n<pre><code>#define BOOST_DATE_TIME_NO_LIB\n#define CPP\n\n#include &lt;boost/interprocess/shared_memory_object.hpp&gt;\n#include &lt;boost/interprocess/mapped_region.hpp&gt;\n#include &lt;stdio.h&gt;\n#include &lt;MemWriterH.h&gt;\n\nusing namespace boost::interprocess;\n\nextern \"C\" int writeToSharedMemory(char *data)\n{\n    //Remove shared memory on construction and destruction\n    struct shm_remove\n    {\n        shm_remove()\n        {\n            //shared_memory_object::remove(\"MySharedMemory\");\n        }\n        ~shm_remove()\n        {\n            //shared_memory_object::remove(\"MySharedMemory\");\n        }\n    }remover;\n\n    //Create a shared memory object.\n    shared_memory_object shm(open_or_create, \"MySharedMemory\", read_write);\n    //Set size\n    shm.truncate(1000);\n\n    //Map the whole shared memory in this process\n    mapped_region region(shm, read_write);\n\n    //Write given data to the mapped region\n    //std::memset(region.get_address(), 'h', region.get_size());\n    std::memcpy(region.get_address(), data, region.get_size());\n\n    return 0;\n}\n\nextern \"C\" void readFromSharedMemeory(char toWriteIn[])\n{\n    //Open already created shared memory object.\n    shared_memory_object shm(open_only, \"MySharedMemory\", read_only);\n\n    //Map the whole shared memory in this process\n    mapped_region region(shm, read_only);\n\n    //Read data from shared memory into parameter\n    //char *mem = static_cast&lt;char*&gt;(region.get_address());\n\n    std::memcpy(toWriteIn, region.get_address(), region.get_size());\n    printf(\"Read data OK\");\n    printf(\"\\n%s\", toWriteIn);\n}\n</code></pre>\n\n<p>And its accompanying header: <strong>MemWriterH.h</strong></p>\n\n<pre><code>#ifdef CPP\n    extern \"C\" int writeToSharedMemory(char *);\n    extern \"C\" void readFromSharedMemeory(char *);\n#else\n    int writeToSharedMemory( char *);\n    void readFromSharedMemeory(char* toWriteIn);\n#endif\n</code></pre>\n\n<p>These are then compiled to a .o file using:</p>\n\n<pre><code>g++ -c -I/$HOME/workspace_c/HID_LDM_DDS/HID_LDM_DDS_INCLUDES/MEM_MAPPING/ *.cpp\n</code></pre>\n\n<p>Inside the application's main file, I have a #include which allows the functions above to be used.</p>\n\n<p>While there are various other elements to this application (as seen below), these all seem to compile, build, and link fine.</p>\n\n<p>This resulting <strong>MemWriterH.o</strong> file is then used in a final GCC statement which \u2014 I believe \u2014 links all the .o files together to produce the application's executable. This final statement is:</p>\n\n<pre><code>gcc HID_LDM_DDS_SUB.o $HOME/workspace_c/HID_LDM_DDS/HID_LDM_DDS_HELPER/HID_LDM_DDS_HELPER.o $HOME/workspace_c/HID_LDM_DDS/HID_LDM_DDS_INCLUDES/CheckStatus.o $HOME/workspace_c/HID_LDM_DDS/HID_LDM_DDS_INCLUDES/MEM_MAPPING/MemWriterH.o $HOME/workspace_c/HID_LDM_DDS/HID_LDM_DDS_IDL/LDMSacDcps.o $HOME/workspace_c/HID_LDM_DDS/HID_LDM_DDS_IDL/LDMSplDcps.o $OSPL_HOME/lib/libddskernel.so $OSPL_HOME/lib/libdcpssac.so\n</code></pre>\n\n<p>which, unfortunately, gives me the error:</p>\n\n<blockquote>\n  <p>/usr/bin/ld: /home/bob/workspace_c/HID_LDM_DDS/HID_LDM_DDS_INCLUDES/MEM_MAPPING/MemWriterH.o:\n  undefined reference to symbol 'shm_open@@GLIBC_2.2'</p>\n  \n  <p>/lib/i386-linux-gnu/librt.so.1: error adding symbols: DSO missing from\n  command line collect2: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>At which point, I feel completely lost. The .cpp compiles to a .o without complaint, so I'm not quite sure where else to go from here. What is a DSO, and how do I add it to the command line?</p>\n\n<p>EDIT:</p>\n\n<p>An update now the problem's solved. As <a href=\"https://stackoverflow.com/users/85371/sehe\">Sehe</a> pointed out below, the library in which shm_open is defined was missing. This is included with the -lrt flag, which should be included <em>after</em> the .o files being linked (<a href=\"https://stackoverflow.com/questions/19901934/strange-linking-error-dso-missing-from-command-line\">see here for more explanation on that</a>). </p>\n\n<p>Solving this did, however, lead to another issue whereby the compiler was complaining at several occurrences of an error along the lines of: 'undefined reference to std::some_function'. This, it turns out, was owing to an issue in linking C and C++ code (the header) using the gcc command. Adding a -lstdc++ flag, or using the g++ compile command (<a href=\"https://stackoverflow.com/questions/10906275/undefined-reference-to-stdios-baseinitinit\">see the answer here for a description of what's going on</a>) solves this, too, and all compiles successfully.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 6, "creation_date": 1439392712, "post_id": 31969225, "comment_id": 51845593, "body": "Not possible. <code>InputMat</code> is called <code>InputMat</code>, no matter where its value came from."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1439392802, "post_id": 31969225, "comment_id": 51845658, "body": "<code>C&#47;C++</code> is undefined due to there being no sequencing point (unless you&#39;ve overloaded <code>++</code>),"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1439392821, "post_id": 31969225, "comment_id": 51845675, "body": "@Bathsheba ha ! good one :p"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1439392860, "post_id": 31969225, "comment_id": 51845706, "body": "@Bathsheba: (Good one!) Overloading would be C++ only, so the C tag can be removed?"}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 2, "creation_date": 1439392869, "post_id": 31969225, "comment_id": 51845716, "body": "The &quot;#&quot; stringizes the text to which you prefix it; it&#39;s a pre-processor feature and doesn&#39;t know about scope or data types, so you can&#39;t use it for what you described."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 10, "last_activity_date": 1439392751, "creation_date": 1439392751, "answer_id": 31969331, "question_id": 31969225, "link": "https://stackoverflow.com/questions/31969225/variable-name-to-string-in-function-call-c/31969331#31969331", "title": "Variable name to string in function call, C++", "body": "<p>You can't. Neither C nor C++ retain variable names at runtime.</p>\n\n<p>All your macros are doing is substituting text which happens at compile time.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1439394009, "last_edit_date": 1495541173, "creation_date": 1439392984, "answer_id": 31969434, "question_id": 31969225, "link": "https://stackoverflow.com/questions/31969225/variable-name-to-string-in-function-call-c/31969434#31969434", "title": "Variable name to string in function call, C++", "body": "<p>In general you cannot do that (getting the name of a variable at runtime, from e.g. its address or in C++ its reference).</p>\n\n<p><sup>I am focusing on Linux:</sup></p>\n\n<p>However, on Linux (and GNU <a href=\"http://www.gnu.org/software/libc/\" rel=\"nofollow noreferrer\">glibc</a> based systems), for <em>global</em> variables (and functions), you might use the GNU specific <a href=\"http://man7.org/linux/man-pages/man3/dladdr.3.html\" rel=\"nofollow noreferrer\">dladdr(3)</a> function.</p>\n\n<p>If all the relevant code was compiled with <code>-g</code> (to get debug info), you might parse the debug information in <a href=\"https://en.wikipedia.org/wiki/DWARF\" rel=\"nofollow noreferrer\">DWARF</a> format (perhaps also using <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html\" rel=\"nofollow noreferrer\"><code>__builtin_frame_address</code></a>, etc.). With some pain, you might be able to get the name of some local variables from its address on the <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">call stack</a>. This would be a significant effort (probably months of work). Ian Taylor's <a href=\"https://github.com/gcc-mirror/gcc/tree/master/libbacktrace\" rel=\"nofollow noreferrer\">libbacktrace</a> (inside GCC) might be useful as a starting point.</p>\n\n<p>You could also start (assuming everything is compiled with <code>-g</code>), with e.g. <a href=\"http://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow noreferrer\">popen(3)</a>, a <code>gdb -p</code> debugging process.</p>\n\n<p>Notice that recent <a href=\"http://www.gnu.org/software/gdb/\" rel=\"nofollow noreferrer\">GDB</a> debugger is scriptable in Python or Guile, so practically speaking developing Python or Guile functions for GDB would be quicker.</p>\n\n<p>You could also simply add debug output like <a href=\"https://stackoverflow.com/a/28737827/841108\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1439393215, "post_id": 31969505, "comment_id": 51845956, "body": "Plus one, if anything, for using <code>const char*</code>"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 1, "creation_date": 1439409155, "post_id": 31969505, "comment_id": 51855136, "body": "<code>And because you always know what your variables&#39; names are you don&#39;t need the VarToStr macro</code> ... the string may or may not be updated when refactoring with a tool."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 4, "last_activity_date": 1439393269, "last_edit_date": 1439393269, "creation_date": 1439393190, "answer_id": 31969505, "question_id": 31969225, "link": "https://stackoverflow.com/questions/31969225/variable-name-to-string-in-function-call-c/31969505#31969505", "title": "Variable name to string in function call, C++", "body": "<p>As mentioned by others, C++ doesn't support runtime reflection, so if you want to have a string whose contents will only be known at runtime (which is when the call to <code>PrintMatrix</code> will happen), you need to <strong>pass it as an argument</strong>.</p>\n\n<p>And because you always know what your variables' names are you don't need the <code>VarToStr</code> macro:</p>\n\n<pre><code>// DebugHelpers.h\nvoid PrintMatrix(const Matrix &amp;InputMat, const char* MatName)\n{\n    printf(\"%s\\n\", MatName);\n    ... // output InputMat contents\n}\n\n// DataAnalysis.cc\n#include DebugHelpers.h\n...\nvoid AnalysisSubProgram342()\n{\n    Matrix MatName;\n    ...\n    PrintMatrix(MatName, \"MatName\");\n}\n</code></pre>\n\n<p><strong>But there's another choice</strong>: make <code>PrintMatrix</code> a macro itself, since it's only a debug thing anyway:</p>\n\n<pre><code>// DebugHelpers.h\n#define PRINT_MATRIX(InputMat)\\\nprintf(#InputMat \"\\n\");\\\n... // output InputMat contents\n\n\n// DataAnalysis.cc\n#include DebugHelpers.h\n...\nvoid AnalysisSubProgram342()\n{\n    Matrix MatName;\n    ...\n    PRINT_MATRIX(MatName);\n}\n</code></pre>\n\n<p>Now after preprocessing, <code>AnalysisSubProgram342</code> will look  like this:</p>\n\n<pre><code>void AnalysisSubProgram342()\n{\n    Matrix MatName;\n    ...\n    printf(\"MatName\\n\");\n    ... // output InputMat contents\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5219676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21e179f42ec3509b0c82309c306d72b?s=128&d=identicon&r=PG&f=1", "display_name": "BR Fink", "link": "https://stackoverflow.com/users/5219676/br-fink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1439493505, "creation_date": 1439392479, "last_edit_date": 1495542117, "question_id": 31969225, "link": "https://stackoverflow.com/questions/31969225/variable-name-to-string-in-function-call-c", "title": "Variable name to string in function call, C++", "body": "<p>I'm expanding our internal debugging library, and I've run into an odd wall. I'd like to output a variable name as a string. From <a href=\"https://stackoverflow.com/questions/3386861/converting-a-variable-name-to-a-string-in-c\">elsewhere</a> on this site, I found that a macro can be used to do this within a file:</p>\n\n<pre><code>#define VarToStr(v) #v\n...\nprintf(\"%s\\n\", VarToStr(MatName));\n</code></pre>\n\n<p>This outputs <code>MatName</code>. But now let's try this through a function across files (Matrix is a defined type):</p>\n\n<pre><code>// DebugHelpers.h\n#define VarToStr(v) #v\n...\nvoid PrintMatrix(const Matrix &amp;InputMat)\n{\n    printf(\"%s\\n\", VarToStr(InputMat));\n    ... // output InputMat contents\n}\n\n// DataAnalysis.cc\n#include DebugHelpers.h\n...\nvoid AnalysisSubProgram342()\n{\n    Matrix MatName;\n    ...\n    PrintMatrix(MatName);\n}\n</code></pre>\n\n<p>This outputs <code>InputMat</code>, instead of <code>MatName</code>. How can a function in another file get the variable name from the calling file?</p>\n\n<p>While more complex solutions (wrapper classes, etc.) would be useful for the larger community, my implementation needs to minimize impact to preexisting code/classes.</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>Inspired by zenith's comments, I implemented both of his proposed solutions for comparison's sake and got both working quickly. The macro works well for simple outputs, while the function allows for more complex work (and type checking/overloading). I hadn't known that preprocessor macros could be so complex. I'll remember both for future use. Thanks !</p>\n"}, {"tags": ["c++", "visual-studio", "unit-testing", "visual-studio-debugging"], "owner": {"reputation": 2502, "user_id": 3367091, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z4TTT.jpg?s=128&g=1", "display_name": "jensa", "link": "https://stackoverflow.com/users/3367091/jensa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1439392400, "creation_date": 1439392400, "question_id": 31969195, "link": "https://stackoverflow.com/questions/31969195/visual-studio-2015-unit-testing-debugging-native-dll", "title": "Visual Studio 2015 - Unit testing debugging native DLL", "body": "<p>How do I step into code (unmanaged native C++ DLL) from running a Unit Test in Visual Studio 2015?\nI have two projects:</p>\n\n<pre><code>Project1\nUnitTests\n</code></pre>\n\n<p>Both are .dll libraries and the UnitTests project runs a test on a function in Project1. The project UnitTests has a reference to Project1 and links to the .lib file for Project1.</p>\n\n<p>I set a breakpoint in the code in Project1, but it has no effect.\nMoreover, even if I try to print to stdout from my Project1 function it can't see it anywhere, shouldn't I be able to see it in the Output window with \"Show output from\" = Debug?</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1439407616, "post_id": 31969149, "comment_id": 51854339, "body": "You don&#39;t seem to have pasted the right makefile here, because your makefile uses the variable <code>OBJS</code> all over but I can see nowhere that you&#39;ve defined it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1439409681, "post_id": 31969149, "comment_id": 51855409, "body": "I&#39;ve updated the OP with the OBJS, but to make it clearer, it&#39;s      OBJS=  $(CXX_OBJS) $(ASM_OBJS)"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1439409779, "post_id": 31969149, "comment_id": 51855448, "body": "the first thing you can change is to make all <code>*.mk</code> called <code>makefile</code> directly."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1439410137, "post_id": 31969149, "comment_id": 51855618, "body": "@HuStmpHrrr how do I do that?"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1439410336, "post_id": 31969149, "comment_id": 51855698, "body": "@JamieEdwards there is no need to name makefile differently in each folder. if they all called <code>makefile</code>, in the <code>makefile</code> in parent folder, a direct <code>cd $subfolder; make</code> will start to build the source in the subfolders. save some typing and make the structure clearer."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1439410512, "post_id": 31969149, "comment_id": 51855769, "body": "normally, a <code>makefile</code> only handle the current folder, and let the <code>makefile</code>s in subfolders handle themselves. it seems your <code>makefile</code> is not very conventional, therefore you have to deal with the directory structure all yourself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1439410517, "post_id": 31969149, "comment_id": 51855771, "body": "@HuStmpHrrr - I feel kinda stupid with these things so I don&#39;t quite understand, nor know what to do? :L"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "edited": false, "score": 0, "creation_date": 1439413741, "post_id": 31969149, "comment_id": 51857536, "body": "OK, so it turns out I made a slight typo in one of the commands in the top-level make file. Instead of having &quot;mkdir -p $(OBJ_DIR)/$$dir;&quot; I actually had &quot;mkdir -p $(OBJ_DIR)/%%dir;&quot;.  So instead of creating each of the directories in the obj/ directory, it was just creating a &quot;%%dir&quot; in the obj/ directory.  That being said, it&#39;s still not creating the *.o files... but it is trying to make vga.cpp, if that helps?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1439416222, "post_id": 31969149, "comment_id": 51858608, "body": "@HuStmpHrrr: Search for and read &quot;Recursive Make Considered Harmful&quot;.  Jamie is using a make strategy as recommended by that classic article, and probably does not want real makefiles in each directory."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1439419317, "post_id": 31969149, "comment_id": 51859663, "body": "@aschepler - Would you have any idea at all what I may have gotten wrong and how to fix it?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1439420384, "post_id": 31969149, "comment_id": 51859942, "body": "Nothing jumps out.  I would look at some of the debug output options of make."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1439421098, "post_id": 31969149, "comment_id": 51860139, "body": "@aschepler - So it seems to be completely skipping the *.cpp compilation :L"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "is_accepted": false, "score": 1, "last_activity_date": 1439426724, "creation_date": 1439426724, "answer_id": 31977751, "question_id": 31969149, "link": "https://stackoverflow.com/questions/31969149/cant-make-out-whats-wrong-with-my-makefile/31977751#31977751", "title": "Can&#39;t make out what&#39;s wrong with my Makefile?", "body": "<p>So after leaving my laptop to it's own devices for a little while, I came back to it and realised I did a few things wrong later on down the line.</p>\n\n<p>I needed to have the *.mk files have this instead:</p>\n\n<p>module.mk:</p>\n\n<pre><code>DIR_SRC := src\n\nSUBDIRS := cpp asm\n\ninclude $(DIR_SRC)/cpp/cpp_module.mk\ninclude $(DIR_SRC)/asm/asm_module.mk\n</code></pre>\n\n<p>cpp_module.mk:</p>\n\n<pre><code>DIR_CPP := cpp\n\nSUBDIRS := main graphics\n\ninclude $(SRC_DIR)/$(DIR_CPP)/main/main_module.mk\ninclude $(SRC_DIR)/$(DIR_CPP)/graphics/graphics_module.mk\n</code></pre>\n\n<p>main.module.mk: (NOTE: This is pretty much the same with graphics_module.mk)</p>\n\n<pre><code>DIR_MAIN := main\n\nMOD_SRCS := main.cpp\n\nCXX_SRCS    := $(addprefix $(DIR_CPP)/$(DIR_MAIN)/, $(MOD_SRCS))\n</code></pre>\n\n<p>And that fixed my issue.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1439426724, "creation_date": 1439392289, "last_edit_date": 1439414512, "question_id": 31969149, "link": "https://stackoverflow.com/questions/31969149/cant-make-out-whats-wrong-with-my-makefile", "title": "Can&#39;t make out what&#39;s wrong with my Makefile?", "body": "<p>So, first off, I'd like to make clear that I've next to no experience with Make and it's Makefiles. That being said, I've tried finding all over the internet about wildcards and recursive techniques to compile and link my project. That is until I found a thread on this site with a modular type system using make.</p>\n\n<p>I'd like to show you guys how my project is structured first:</p>\n\n<pre><code>.\n|---- Makefile\n|\n|---- build/\n|       |---- bin/\n|       |\n|       |____ obj/\n|\n|---- includes/\n|         |\n|         |____ graphics/\n|                   |____ vga.h\n|\n|---- libs/\n|       |____ linker.ld\n|\n|____ src/\n       |---- module.mk\n       |\n       |---- asm/\n       |      |---- asm_module.mk\n       |      |____ boot.s\n       |\n       |____ cpp/\n              |---- cpp_module.mk\n              |---- main/\n              |       |---- main_module.mk\n              |       |____ main.cpp\n              |\n              |____ graphics/\n                      |---- graphics_module.mk\n                      |____ vga.cpp\n</code></pre>\n\n<p>So now you know this. I made the following Makefile and module.mk's to attempt to make the project:</p>\n\n<p>Makefile:</p>\n\n<pre><code>PROJECT := GOODY\n\nCXX := i686-elf-g++\nLD  := i686-elf-ld\nAS  := nasm\n\nSRC_DIR := src\nBUILD_DIR := build\nOBJ_DIR := $(BUILD_DIR)/obj\nBIN_DIR := $(BUILD_DIR)/bin\n\nCXX_SRCS :=\nASM_SRCS :=\nSUBDIRS :=\nCXXFLAGS :=\nLDFLAGS :=\n\ninclude $(SRC_DIR)/module.mk\n\nCXX_OBJS := $(addprefix $(OBJ_DIR)/, $(CXX_SRCS:.cpp=.o))\nASM_OBJS := $(addprefix $(OBJ_DIR)/, $(ASM_SRCS:.s=.o))\n\nOBJS := $(CXX_OBJS) $(ASM_OBJS)\n\nDEPS := $(OBJS:.o=.d)\n\nTMPS := $(OBJS) $(OBJS:.o=.d)\n\nCXXFLAGS := -c -nostdlib -nostdinc -fno-builtin -fno-stack-protector \\\n    -fno-rtti -O2 -Wall -Werror -fno-exceptions -ffreestanding \\\n    -m32 -Iincludes\nLDFLAGS := -Tlibs/linker.ld -melf_i386 --oformat=elf32-i386\nASFLAGS := -felf\n\nall: $(BIN_DIR)/$(PROJECT)\n\n$(OBJ_DIR)/%.o, $(SRC_DIR)/%.cpp\n    @echo \"\\tCompiling [$@]\"\n    $(CXX) $(CXXFLAGS) $&lt; -o $@\n\n$(OBJ_DIR)/%.o, $(SRC_DIR)/%.s\n    @echo \"\\tCompiling [$@]\"\n    $(AS) $(ASFLAGS) $&lt; -o $@\n\n$(BIN_DIR)/$(PROJECT): $(OBJS)\n    @echo \"\\tLinking Kernel...\"\n    @$(LD) $(OBJS) -o $(PROJECT) $(LDFLAGS)\n\n$(OBJS): | $(OBJ_DIR)\n\n$(OBJ_DIR):\n    @mkdir -p $(OBJ_DIR)\n    @for dir in $(SUBDIRS); \\\n    do \\\n         mkdir -p $(OBJ_DIR)/$$dir; \\\n    done\n\nclean:\n    rm -rf $(TMPS)\n    rm -rf $(BIN_DIR)/$(PROJECT)\n    rm -rf $(OBJ_DIR)\n\n.PHONY: clean\n</code></pre>\n\n<p>module.mk:</p>\n\n<pre><code>SUBDIRS += asm cpp\n\ninclude $(SRC_DIR)/asm/asm_module.mk\ninclude $(SRC_DIR)/cpp/cpp_module.mk\n</code></pre>\n\n<p>asm_module.mk:</p>\n\n<pre><code>UP_DIR := asm\n\nMOD_SRCS := boot.s\n\nASM_SRCS := $(addprefix $(UP_DIR)/, $(MOD_SRCS))\n</code></pre>\n\n<p>cpp_module.mk:</p>\n\n<pre><code>SUBDIRS := main graphics\n\ninclude $(SRC_DIR)/cpp/main/main_module.mk\ninclude $(SRC_DIR)/cpp/graphics/graphics_module.mk\n</code></pre>\n\n<p>main_module.mk:</p>\n\n<pre><code>UP_DIR := main\n\nMOD_SRCS := main.cpp\n\nCXX_SRCS := $(addprefix $(UP_DIR)/, $(MOD_SRCS))\n</code></pre>\n\n<p>graphics_module.mk:</p>\n\n<pre><code>UP_DIR := graphics\n\nMOD_SRCS := vga.cpp\n\nCXX_SRCS := $(addprefix $(UP_DIR)/, $(MOD_SRCS))\n</code></pre>\n\n<p>Now to the error that I'm getting from make. It's as follows:</p>\n\n<pre><code>$ make\n    Linking Kernel...\ni686-elf-ld: cannot find build/obj/graphics/vga.o: No such file or directory\ni686-elf-ld: cannot find build/obj/asm/boot.o: No such file or directory\nMakefile:49: recipe for target 'build/bin/GOODY' failed\nmake: *** [build/bin/GOODY] Error 1\n</code></pre>\n\n<p>Now I can see from that, that the ld cannot find the .o files... and after looking in the build/obj directory, there's nothing in there.</p>\n\n<p>My question is, what am I doing wrong?</p>\n\n<p>EDIT:=\nSo it looks like it's not actually compiling the *.cpp or *.s files at all, it's just skipping straight to the linking stage and obviously not finding anything to link against.</p>\n\n<p>So at a guess it might also be something to do with:</p>\n\n<pre><code>$(OBJ_DIR)/%.o: $(SRC_DIR)/%.cpp\n    $(CXX) $(CXXFLAGS) $&lt; -o $@\n</code></pre>\n\n<p>I've also tried what the original thread suggested which was:</p>\n\n<pre><code>$(COMPILE.cpp) $(OUTPUT_OPTION) $&lt; # Also $(COMPILE.c) too.\n</code></pre>\n"}, {"tags": ["c++", "opencv", "hough-transform"], "answers": [{"comments": [{"owner": {"reputation": 3846, "user_id": 935686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd9ea858a71b9c979d889c8c38d37b6?s=128&d=identicon&r=PG", "display_name": "marol", "link": "https://stackoverflow.com/users/935686/marol"}, "reply_to_user": {"reputation": 1, "user_id": 5219881, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206563069506825/picture?type=large", "display_name": "Giulia Neri", "link": "https://stackoverflow.com/users/5219881/giulia-neri"}, "edited": false, "score": 0, "creation_date": 1439474362, "post_id": 31971922, "comment_id": 51885039, "body": "Added a draft on the algorithm."}], "tags": [], "owner": {"reputation": 3846, "user_id": 935686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd9ea858a71b9c979d889c8c38d37b6?s=128&d=identicon&r=PG", "display_name": "marol", "link": "https://stackoverflow.com/users/935686/marol"}, "is_accepted": false, "score": 1, "last_activity_date": 1439478140, "last_edit_date": 1439478140, "creation_date": 1439401077, "answer_id": 31971922, "question_id": 31969073, "link": "https://stackoverflow.com/questions/31969073/line-detect-with-houghlinesp/31971922#31971922", "title": "Line Detect with HoughLinesP", "body": "<p>The fourth argument to HoughLinesP is not an angle value that tell opencv to detect only lines which are oriented from the OX axis (ie in polar coordinates). Rather than, the angle value passed in tells opencv algorithm to iterate from 0 to PI (or 2*PI, depends how algorithm is implemented) having this angle as iteration step, e.g. iterating from 0 to PI by PI/180 will take 180 iterations in HoughLinesP trying to find a line for a given (r,alpha).</p>\n\n<p>The solution to find lines having polar coords with given angle range (not the most robust one) could be to detect all lines with HoughLinesP and then iterate over them, calculate angle coorinate and filter out those which are having polar angle coord in a given range. </p>\n\n<p>EDIT (a draft of the algorithm using C++11):</p>\n\n<pre><code>  vector&lt;Vec4i&gt; detectedLines;\n  HoughLinesP(dst, lines, 1, CV_PI/180, 50, 50, 10 );\n  vector&lt;Vec4i&gt; filteredLines(detectedLines.size());\n  const float downAngleRange = 30*CV_PI/180;\n  const float upAngleRange = 60*CV_PI/180;\n  auto it = copy_if(detectedLines.begin(), detectedLines.end(),\n    filteredLines.begin(),\n    [](const Vec4i &amp;v) {\n       float angle = calculateAnglePolarCord(v);\n       return angle &lt;= upAngleRange &amp;&amp; angle &gt;= downAngleRange;\n    });\n   filteredLInes.resize(std::distance(filteredLines.begin(),it));  \n</code></pre>\n\n<p>Where calculateAnglePolarCord is a method which on given line calculats its second (angle) polar coordinate.</p>\n\n<p>Remember to implement good float comparison technique.</p>\n"}], "owner": {"reputation": 1, "user_id": 5219881, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206563069506825/picture?type=large", "display_name": "Giulia Neri", "link": "https://stackoverflow.com/users/5219881/giulia-neri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439478140, "creation_date": 1439392134, "last_edit_date": 1439394558, "question_id": 31969073, "link": "https://stackoverflow.com/questions/31969073/line-detect-with-houghlinesp", "title": "Line Detect with HoughLinesP", "body": "<p>With OpenCV and C++ I'm trying to detect the lines of a street from an input video. I'm using <strong>HoughLinesP</strong> and I'd like to detect ONLY the lines that delimit the street, so not horizontal or vertical for example.<br>\nUsing \n<code>HoughLinesP(dst, lines, 1, CV_PI/180, 8, 80, 3)</code>, \nI detect all the lines so I changed double theta (<code>CV_PI/180</code>) to this \n<code>HoughLinesP(dst, lines, 10*CV_PI/180&lt;=theta&lt;=80*CV_PI/180 &amp; 110*CV_PI/180&lt;=theta&lt;=170*CV_PI/180, 8, 80, 3);</code> \nBut it doesn't work because the console display only the video without any type of lines.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 0, "last_activity_date": 1439392065, "creation_date": 1439392065, "answer_id": 31969052, "question_id": 31968990, "link": "https://stackoverflow.com/questions/31968990/the-c-template-with-inheritance-template-issue/31969052#31969052", "title": "The C++ template with inheritance/template issue", "body": "<p><code>a</code> is a dependent base class member in <code>B</code>, you need to access it with <code>this-&gt;a</code>.</p>\n"}], "owner": {"reputation": 643, "user_id": 1803426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7dad8e988cd1a64fac5934f041b1b029?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1803426/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1439391995, "accepted_answer_id": 31969052, "answer_count": 1, "score": 0, "last_activity_date": 1439392065, "creation_date": 1439391897, "question_id": 31968990, "link": "https://stackoverflow.com/questions/31968990/the-c-template-with-inheritance-template-issue", "closed_reason": "Duplicate", "title": "The C++ template with inheritance/template issue", "body": "<p>I have stuck with the following code in some project (it is simplification).</p>\n\n<pre><code>template &lt;class X &gt;\nclass A {\n  public:\n    int a;\n};\n\nclass Y;\nclass B : public A&lt;Y&gt; {\n  void foo() {a = 0;}\n};\n\ntemplate &lt; class D &gt;\nclass C : public A&lt;D&gt; {\n  void foo() {a = 0;}\n};\n</code></pre>\n\n<p>The compiler fails with:</p>\n\n<pre><code>test.cpp:14:14: error: \u2018a\u2019 was not declared in this scope\n</code></pre>\n\n<p>Why in the C::foo the compiler fails to recognize A::a and in B::foo does not? Thanks.</p>\n"}, {"tags": ["c++", "c++11", "boost", "wt"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1439391830, "post_id": 31968857, "comment_id": 51845000, "body": "what is the signature of <code>MDDB_Service::application_creator</code> ?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1439392085, "post_id": 31968857, "comment_id": 51845160, "body": "Sorry forgotten, I added it by editing. Thx!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1439392378, "post_id": 31968857, "comment_id": 51845359, "body": "What is <i>&quot;Visual Studio 2013 Essentials&quot;</i>?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1439393150, "post_id": 31968857, "comment_id": 51845913, "body": "I&#39;m sorry should be namend &quot;express&quot;"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1439394404, "post_id": 31968857, "comment_id": 51846835, "body": "is <code>application_creator</code> a member function?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1439394948, "post_id": 31968857, "comment_id": 51847221, "body": "No it&#39;s only a namespace."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1439396537, "post_id": 31968857, "comment_id": 51848189, "body": "Can you provide a minimized example? I suspect that this shouldn&#39;t need wt to reproduce the error."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1440507417, "post_id": 31968857, "comment_id": 52293207, "body": "Now I was able to minimize the problem"}], "answers": [{"comments": [{"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1440574828, "post_id": 32208234, "comment_id": 52324334, "body": "<i>Facepalm</i> I changed the line to <code>Wt::WEnvironment we;</code> but it didn&#39;t solve the problem, but it seems it reveals the real thing: The default constructor of Wt::WEnvironment is protected, so I guess that restricted construction scenario prevents any usefull binding, e.g. even if the function I bind to can access the constructor, because any conversion is made impossible?!"}, {"owner": {"reputation": 1050, "user_id": 483421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fb2ffc399dbb9bec5567d4a63dc0a4c?s=128&d=identicon&r=PG", "display_name": "iolo", "link": "https://stackoverflow.com/users/483421/iolo"}, "reply_to_user": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1440579942, "post_id": 32208234, "comment_id": 52327432, "body": "@Superlokkus According to what you say, it does indeed fix your problem, but does reveal another one. You can still do the binding, you just have to figure out a way to get a valid <code>Wt::WEnvironment</code> instance."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1440580412, "post_id": 32208234, "comment_id": 52327756, "body": "Indeed if you say that&#39;s the reason why the bind fails, it fixes that part of my problem and I use that as leverage towards the Wt library developers, since they encourage this use case."}], "tags": [], "owner": {"reputation": 1050, "user_id": 483421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fb2ffc399dbb9bec5567d4a63dc0a4c?s=128&d=identicon&r=PG", "display_name": "iolo", "link": "https://stackoverflow.com/users/483421/iolo"}, "is_accepted": false, "score": 2, "last_activity_date": 1440516915, "creation_date": 1440516915, "answer_id": 32208234, "question_id": 31968857, "link": "https://stackoverflow.com/questions/31968857/boost-std-bind-fails-only-on-msvc-with-too-few-arguments/32208234#32208234", "title": "(boost:: &amp;&amp; std::) bind fails only on MSVC with too few arguments", "body": "<p>The problem is actually not the fault of the compiler, but rather this line:</p>\n\n<pre><code>Wt::WEnvironment we();  \n</code></pre>\n\n<p>It declares a function called <code>we</code> taking no arguments and returning a <code>Wt::WEnvironment</code>. Your are being a victim of <a href=\"http://madebyevan.com/obscure-cpp-features/\" rel=\"nofollow\">the most vexing parse</a>.<br>\nReplacing the line with  </p>\n\n<pre><code>Wt::WEnvironment we;  \n</code></pre>\n\n<p>should fix your problem.    </p>\n"}], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441719454, "creation_date": 1439391577, "last_edit_date": 1592644375, "question_id": 31968857, "link": "https://stackoverflow.com/questions/31968857/boost-std-bind-fails-only-on-msvc-with-too-few-arguments", "title": "(boost:: &amp;&amp; std::) bind fails only on MSVC with too few arguments", "body": "<h2>Edit: Minimized Code Example</h2>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;boost/function.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;Wt/WServer&gt;\n\nWt::WApplication *createApplication(const Wt::WEnvironment&amp; env, int i) {\n    return new Wt::WApplication(env);\n}\n\nint main(int argc, char** argv)\n{\n    Wt::WRun(argc, argv,boost::bind(&amp;createApplication, _1, 1));\n}\n</code></pre>\n<blockquote>\n<p>Error 94  error C2198: 'Wt::WApplication *(__cdecl *)(const Wt::WEnvironment &amp;,int)' : too few arguments for call \\wt-3.3.4-msvs2013-windows-x86-sdk\\include\\boost\\function\\function_template.hpp 95  1</p>\n</blockquote>\n<p>Also fails with <code>Wt::WRun(argc, argv,std::bind(&amp;createApplication, std::placeholders::_1, 1));</code> with exact the same error.</p>\n<hr />\n<h2>Old example</h2>\n<p>I'm using the library <a href=\"http://www.webtoolkit.eu/\" rel=\"nofollow noreferrer\">Wt</a> which has the function <code>Wt::WRun()</code> that takes as the 3rd argument a function, in this case <code>application_creator</code>,  that returns a pointer to a Wt type and takes one argument. So far so good. This function is user supplied and likely to need more arguments, which I do and also a <a href=\"http://www.webtoolkit.eu/wt/src/wt-homepage\" rel=\"nofollow noreferrer\">example</a> of the lib shows (see main.c, <code>Wt::WSever::addEntryPoint</code> takes the same argument as <code>WRun</code>).</p>\n<p>So I want to bind my additional parameters like in the example. My solution compiles perfectly with gcc/mingw but with MSVC/Visual Studio 2013 Express, it fails with the error</p>\n<blockquote>\n<p>Error 94  error C2198: 'Wt::WApplication *(__cdecl *)(const Wt::WEnvironment &amp;,int)' : too few arguments for call ...include\\boost\\function\\function_template.h</p>\n</blockquote>\n<p>My call: <code>Wt::WRun(argc, argv,boost::bind(MDDB_Service::application_creator, _1, 5));</code></p>\n<p>Definition of the callback <code>Wt::WApplication* MDDB_Service::application_creator(const Wt::WEnvironment&amp; env, int foo);</code></p>\n<p>Definition of <code>WT::WRun</code>:</p>\n<pre><code>#define WTCONNECTOR_API __declspec(dllimport)\ntypedef boost::function&lt;WApplication* (const WEnvironment&amp;)&gt; ApplicationCreator;\nint WTCONNECTOR_API WRun(int argc, char** argv,\n            ApplicationCreator createApplication = 0);\n</code></pre>\n<p>Also the same with <code>Wt::WRun(argc, argv,std::bind(MDDB_Service::application_creator, std::placeholders::_1, 5));</code></p>\n<blockquote>\n<p>Error 94  error C2198: 'Wt::WApplication *(__cdecl *)(const Wt::WEnvironment &amp;,int)' : too few arguments for call ... include\\boost\\function\\function_template.hpp</p>\n</blockquote>\n"}, {"tags": ["c++", "lua", "metatable"], "answers": [{"tags": [], "owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "is_accepted": false, "score": 2, "last_activity_date": 1439408853, "last_edit_date": 1439408853, "creation_date": 1439395192, "answer_id": 31970207, "question_id": 31968524, "link": "https://stackoverflow.com/questions/31968524/lua-metatables-for-function-call-trapping/31970207#31970207", "title": "Lua Metatables for function call trapping", "body": "<p>With a small change, I've got something that works: Push a C <em>closure</em> instead of a C <em>function</em>.</p>\n\n<pre><code>  if (isMethod(p1,p2))\n  {\n    lua_pushvalue(l, 1); // re-push table\n    lua_pushvalue(l, 2); // re-push method\n    lua_pushcclosure(l, myExecClosure,2);\n    return 1;\n  }\n</code></pre>\n\n<p><code>myExecClosure</code> is like <code>myExec</code>, but it reads the first two parameters via upvalues (e.g. <code>luaupvaluindex(1)</code>) rather than from stack indexes 1 and 2.</p>\n"}], "owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1439408853, "creation_date": 1439390746, "last_edit_date": 1439408498, "question_id": 31968524, "link": "https://stackoverflow.com/questions/31968524/lua-metatables-for-function-call-trapping", "title": "Lua Metatables for function call trapping", "body": "<p>I'm trying to use Lua Metatables to make a <em>prettier</em> interface to some internal C++ functions.</p>\n\n<p>Here's my code that's working so far. (<code>my.get</code> and <code>my.set</code> are implemented in C++)</p>\n\n<pre><code>function setDefault(t)\n  local mt = {\n  __index = function(tab,k) return my.get(t,k) end,\n  __newindex = function(tab,k,v) return my.set(t,k,v) end\n  }\n  _G[t] = {}\n  setmetatable(_G[t],mt)\nend\n\nsetDefault(\"LABEL\")\n\nLABEL.Text = \"wibble\" -- evaluates as my.set(\"LABEL\",\"Text\",\"wibble\")\nfoo = LABEL.Text -- foo = my.get(\"LABEL\",\"Text\")\n</code></pre>\n\n<p>Fine so far. The next bit I want to make work is <em>function calls</em> on the table, like this:</p>\n\n<pre><code>LABEL.Flash(500) --must evaluate my.execute(\"LABEL\",\"Flash\", 500)\n</code></pre>\n\n<p>I know this invokes <code>my.get(\"LABEL\",\"Flash\")</code> \u2014 and I can make that return a C++ function (using <code>lua_pushcfunction</code>), but when the C++ function is called, it's missing the <em>LABEL</em> and <em>Flash</em> parameters. </p>\n\n<p>Here's the C++ snippet of <code>my.get</code>.</p>\n\n<pre><code>static int myGet(lua_State * l)\n{\n  std::string p1(luaGetString(l, 1)); // table\n  std::string p2(luaGetString(l, 2)); // 'method'\n\n  if (isMethod(p1,p2))\n  {\n    lua_pushcfunction(l, myExec);\n    lua_pushvalue(l, 1); // re-push table\n    lua_pushvalue(l, 2); // re-push method\n    return 3;\n  }\n  else\n  {\n  // do my.get stuff here.\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "mysql", "json", "raspberry-pi2"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1439392270, "post_id": 31968397, "comment_id": 51845290, "body": "You may need to escape your quotes like: <code>json_example = &quot;{\\\\\\&quot;array...</code> because the SQL uses quotes. You&#39;d need a triple escape <code>\\\\\\`, 2 for the backslash </code>\\` and one for the quote."}, {"owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1439393319, "post_id": 31968397, "comment_id": 51846017, "body": "@Galik you solution worked fine for me , thanks .... however i think that the method i use is not the correct way to use JSON with MySql do you ?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1439393789, "post_id": 31968397, "comment_id": 51846372, "body": "@user3530803: What&#39;s correct and what not depends on your requirements. Personally, I think it&#39;s a horrible idea to store JSON in a database, but then again, I am biased against JSON in general. I have never encountered a situation in which storing unstructured data was preferred over storing structured one, and SQL is an extremely powerful language to define structured data."}, {"owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1439395948, "post_id": 31968397, "comment_id": 51847846, "body": "@ChristianHackl yes i agree , so JSON could be used to store data and retreive them from a file for example not with databases"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1439399330, "post_id": 31968397, "comment_id": 51849754, "body": "@user3530803: The ability to use text files for storage is one of the reasons you might have chosen JSON in the first place. Storing the JSON in a database defeats this purpose."}], "answers": [{"comments": [{"owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "edited": false, "score": 0, "creation_date": 1439399337, "post_id": 31969322, "comment_id": 51849759, "body": "this magic wich i have never heard about is working :) thanks for adding the code , i have just copy &amp; paste it and compiled by <code>g++ -I&#47;usr&#47;include&#47;mysql -std=c++0x -o outf jsonToMySql.cpp `mysql_config --cflags --libs` </code>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "edited": false, "score": 1, "creation_date": 1439399394, "post_id": 31969322, "comment_id": 51849797, "body": "@user3530803: Once you get used to prepared statements, you will never again want to use string concatenation to build queries :) Note that prepared statements are also your first line of defense against SQL injections."}, {"owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "edited": false, "score": 0, "creation_date": 1439399670, "post_id": 31969322, "comment_id": 51849957, "body": "please why you have added &quot;?&quot; in the query .... i heard also about MySql connector ... wich one is better ?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "edited": false, "score": 0, "creation_date": 1439399897, "post_id": 31969322, "comment_id": 51850104, "body": "@user3530803: The <code>?</code> means <i>&quot;insert the parameter here&quot;</i>. I am not familiar with MySQL connector, sorry. Even if I was familiar with it, &quot;better&quot; is always relative. In any case, knowledge of prepared statements is a must for a professional database programmer."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "edited": false, "score": 1, "creation_date": 1439400045, "post_id": 31969322, "comment_id": 51850183, "body": "@user3530803: I&#39;d like to add that this is fundamentally different to using <code>+</code> to concatenate strings. Your original code sent a complete, fixed query to the database. With prepared statements, you supply more logic and let the database itself insert the parameter <b>after</b> the query has been parsed. So whatever is in your parameter does not affect parsing."}], "tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": true, "score": 4, "last_activity_date": 1439393406, "last_edit_date": 1439393406, "creation_date": 1439392730, "answer_id": 31969322, "question_id": 31968397, "link": "https://stackoverflow.com/questions/31968397/insert-json-format-in-mysql-query-using-c/31969322#31969322", "title": "Insert JSON format in Mysql query using C++", "body": "<p>Use a <a href=\"https://en.wikipedia.org/wiki/Prepared_statement\" rel=\"nofollow\">prepared statement</a>. See <a href=\"https://dev.mysql.com/doc/refman/5.7/en/c-api-prepared-statement-functions.html\" rel=\"nofollow\">prepared statements documentation in the MySQL reference manual</a>.</p>\n\n<p>Prepared statements are more correct, safer, possibly faster, and keep your code cleaner. You get all those benefits and don't need to escape anything. There is hardly a reason not to use them.</p>\n\n<hr>\n\n<p>Something like this might work. But take it with a grain of salt, because I have <strong>not tested or compiled</strong> it. It should just give you the general idea:</p>\n\n<pre><code>MYSQL_STMT* const statement = mysql_stmt_init(&amp;mysql);\nstd::string const query = \"INSERT INTO tab values(?)\";\nmysql_stmt_prepare(statement, query, query.size());\nMYSQL_BIND bind[1] = {};\nbind[0].buffer_type = MYSQL_TYPE_STRING;\nbind[0].buffer = json_example.c_str();\nbind[0].buffer_length = json_example.size();\nmysql_stmt_bind_param(statement, bind);\nmysql_stmt_execute(statement);\n</code></pre>\n"}], "owner": {"reputation": 1435, "user_id": 3530803, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aMzi0.jpg?s=128&g=1", "display_name": "The Beast", "link": "https://stackoverflow.com/users/3530803/the-beast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1611, "favorite_count": 0, "accepted_answer_id": 31969322, "answer_count": 1, "score": -1, "last_activity_date": 1439393406, "creation_date": 1439390406, "question_id": 31968397, "link": "https://stackoverflow.com/questions/31968397/insert-json-format-in-mysql-query-using-c", "title": "Insert JSON format in Mysql query using C++", "body": "<p>I am using JSON format to save data in my c++ program , i want to send it to MySql database (the table tab has one column with type : TEXT) but the query failed (tested also VARCHAR and CHAR )</p>\n\n<p>this is a part of the code since we are not interrested in the rest</p>\n\n<pre><code>     string json_example = \"{\\\"array\\\":[\\\"item1\\\",\\\"item2\\\"], \\\"not an array\\\": \\\"asdf\\\"}\";\n   mysql_init(&amp;mysql);  //initialize database connection\n   string player=\"INSERT INTO tab values (\\\"\";\n    player+= json_example; \n    player += \"\\\")\"; \n    connection = mysql_real_connect(&amp;mysql,HOST,USER,PASSWD,DB,0,NULL,0); \n// save data to database\n   query_state=mysql_query(connection, player.c_str());  // use player.c_str()\n</code></pre>\n\n<p>to show the final query that will be used : cout &lt;&lt; player gives  :</p>\n\n<blockquote>\n  <p>INSERT INTO tab values (\"{\"array\":[\"item1\",\"item2\"], \"not an\n  array\": \"asdf\"}\")</p>\n</blockquote>\n\n<p>using for example string json_example = \"some text\"; is working \nbut with the json format it is not working , maybe the problem came from the use of curly bracket {} or double quotes \"\" but i haven't find a way to solve it .</p>\n\n<p>i'm using :\nmysql  Ver 14.14 Distrib 5.5.44, for debian-linux-gnu (armv7l)  under raspberry pi 2</p>\n\n<p>Any help will be appreciated , thanks .</p>\n"}, {"tags": ["c++", "parameters"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 8, "last_activity_date": 1439390292, "creation_date": 1439390292, "answer_id": 31968352, "question_id": 31968307, "link": "https://stackoverflow.com/questions/31968307/set-default-parameter-value-from-another-paramaters-value/31968352#31968352", "title": "Set default parameter value from another paramater&#39;s value", "body": "<p>You have to provide overload:</p>\n\n<pre><code>class Health\n{\npublic:\n    Health(int max, int current) : max_(max), current_(current) { }\n\n    Health(int max) : max_(max), current_(max) {}\n    // or `Health(int max) : Health(max, max) {}` since C++11\n\n    int max_;\n    int current_;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1439390429, "post_id": 31968403, "comment_id": 51843940, "body": "What if 0 is a valid value for current?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1439390657, "post_id": 31968403, "comment_id": 51844118, "body": "or use <code>const int* current=nullptr</code> (or <code>optional&lt;int&gt;</code>), but it seems over complicated."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1439392251, "post_id": 31968403, "comment_id": 51845280, "body": "@Jarod42 The pointer would be super-ugly for the caller (&quot;what do you mean I cannot pass a literal?!&quot;), but <code>optional</code> is fair game, I&#39;d say."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1439390562, "last_edit_date": 1439390562, "creation_date": 1439390410, "answer_id": 31968403, "question_id": 31968307, "link": "https://stackoverflow.com/questions/31968307/set-default-parameter-value-from-another-paramaters-value/31968403#31968403", "title": "Set default parameter value from another paramater&#39;s value", "body": "<p>You can default the parameter to a value that should not be accepted and then you  and then check using the <code>?</code> operator in the initialization</p>\n\n<pre><code>class Health\n{\npublic:\n    // If current is not specified, its value defaults to max's value\n    Health(int max, int current = 0) : max_(max), current_(current == 0 ? max : current) { }\n    int max_;\n    int current_;\n};\n</code></pre>\n"}], "owner": {"reputation": 1859, "user_id": 4220311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/979c9c43e56339816357b614d623c0ba?s=128&d=identicon&r=PG", "display_name": "Laurynas Lazauskas", "link": "https://stackoverflow.com/users/4220311/laurynas-lazauskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1439392435, "accepted_answer_id": 31968352, "answer_count": 2, "score": 1, "last_activity_date": 1439390562, "creation_date": 1439390183, "question_id": 31968307, "link": "https://stackoverflow.com/questions/31968307/set-default-parameter-value-from-another-paramaters-value", "closed_reason": "Duplicate", "title": "Set default parameter value from another paramater&#39;s value", "body": "<p>Is it possible to achieve such functionality, that parameter's value would default to another parameter's value if not specified?</p>\n\n<p>Example:</p>\n\n<pre><code>class Health\n{\npublic:\n    // If current is not specified, its value defaults to max's value\n    Health(int max, int current = max) : max_(max), current_(current) { }\n    int max_;\n    int current_;\n};\n</code></pre>\n\n<p>As it is now, I am getting a compile error:</p>\n\n<pre><code>error: 'max' was not declared in this scope\nHealth(int max, int current = max) : max_(max), current_(current) { }\n                              ^\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "ssh", "libssh"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1439390178, "post_id": 31968193, "comment_id": 51843698, "body": "Unless all three run on the same host, you have to use three sessions. A session is a connection. A channel is a logical stream (or set of streams) of data sent over that session."}, {"owner": {"reputation": 2102, "user_id": 2828925, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/18abe23c6b1123371f171f55be659ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/2828925/jes"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1439393516, "post_id": 31968193, "comment_id": 51846175, "body": "OK I see! Thank you!"}], "owner": {"reputation": 2102, "user_id": 2828925, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/18abe23c6b1123371f171f55be659ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/2828925/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439390061, "creation_date": 1439389890, "last_edit_date": 1439390061, "question_id": 31968193, "link": "https://stackoverflow.com/questions/31968193/distributed-program-with-libssh", "title": "Distributed program with libssh", "body": "<p>I am designing a distributed program using C/C++ based socket communication. Basically, I have one server program <code>S</code> and three client programs <code>A</code>, <code>B</code>, and <code>C</code>, and client programs communicate with the server program <code>S</code> through customized socket port. Instead of manually starting the four programs (<code>S</code>, <code>A</code>, <code>B</code>, and <code>C</code>), I want to use libssh to create ssh session(s) and send <code>exec</code> method to run client programs. However, I am a bit confused by the definition between <code>ssh session</code> and <code>ssh channel</code>. In my case, I would like to run ssh API on server program <code>S</code> to invoke these three client programs on remote hosts. Should I use one ssh session with three channels or three ssh sessions with one channel each?</p>\n"}, {"tags": ["c++", "casting", "explicit-conversion"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1439389316, "post_id": 31967891, "comment_id": 51842995, "body": "Have you considered using a <code>union</code> ?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1439389324, "post_id": 31967891, "comment_id": 51843005, "body": "C/C++ has <code>union</code> to do this"}, {"owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1439389366, "post_id": 31967891, "comment_id": 51843043, "body": "In case, i do not want to union? what are the alternatives?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 6, "creation_date": 1439389421, "post_id": 31967891, "comment_id": 51843087, "body": "@AbhishekJain in case you do not want to do it properly you can shoot your leg by yourself."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1439389466, "post_id": 31967891, "comment_id": 51843129, "body": "@AbhishekJain Use <code>memcpy( &amp;num, &amp;a, sizeof( num ) );</code>.  It&#39;s still dangerous."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439389466, "post_id": 31967891, "comment_id": 51843128, "body": "Why do you need to do this?"}, {"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 7, "creation_date": 1439389468, "post_id": 31967891, "comment_id": 51843132, "body": "You can&#39;t assume that your class is actually 8 bytes.  It may have vtable or padding.  You can&#39;t do this."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1439389500, "post_id": 31967891, "comment_id": 51843159, "body": "@AndrewHenle That is undefined behavior"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439389587, "post_id": 31967891, "comment_id": 51843214, "body": "@NathanOliver, I know.  But if he <b>knows</b> his class is 8 bytes, it will work.  Admittedly it&#39;s playing with fire, which is why I just posted it as a comment."}, {"owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1439389646, "post_id": 31967891, "comment_id": 51843258, "body": "Yes, i am sure that my class is 8 bytes."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1439389705, "post_id": 31967891, "comment_id": 51843312, "body": "@AbhishekJain - On what hardware?  Some hardware has alignment restrictions that could force your class to be larger than 8 bytes even if it only has 8 bytes of actual data in it."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 5, "creation_date": 1439389711, "post_id": 31967891, "comment_id": 51843316, "body": "Have you tried: <code>num = ((uint64_t) x &lt;&lt; 32) | y;</code> ? You might be surprised at what the compiler generates, if it&#39;s satisfied with endianness, POD type layout, alignment issues, etc. Other approaches, like unions, risk violating strict aliasing rules, etc. (assume <code>x</code> is the high half in this example)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1439389716, "post_id": 31967891, "comment_id": 51843318, "body": "@AndrewHenle you posted as comment because you know you cannot be punished for improper answer? nice"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1439389799, "post_id": 31967891, "comment_id": 51843382, "body": "@BrettHale <code>union</code> would violate strict aliasing rule? what?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1439389878, "post_id": 31967891, "comment_id": 51843437, "body": "Union solutions are UB. See <a href=\"http://stackoverflow.com/questions/17273320/c-undefined-behaviour-with-unions\" title=\"c undefined behaviour with unions\">stackoverflow.com/questions/17273320/&hellip;</a> etc.etc.etc"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1439389897, "post_id": 31967891, "comment_id": 51843457, "body": "@Slava What?  Wow, you really think like that?  No, I posted it as a comment <b>because</b> it&#39;s undefined behavior but it does do what the questioner wanted given the constraints he placed in his question,"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1439389971, "post_id": 31967891, "comment_id": 51843524, "body": "@AndrewHenle it is either UB or does do whatever"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1439390251, "post_id": 31967891, "comment_id": 51843762, "body": "@AbhishekJain - of course, you&#39;d want to use C++ style casts in the example I provided."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1439390369, "post_id": 31967891, "comment_id": 51843881, "body": "@deviantfan: I was pretty sure a union solution was the correct way of doing things, in order to avoid e.g. strict aliasing optimizations breaking the intent of the programmer?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1439393183, "post_id": 31967891, "comment_id": 51845934, "body": "@ErikAlap&#228;&#228; union type-punning is a common compiler extension, there&#39;s even a note about it in the standard IIRC."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439468847, "post_id": 31967891, "comment_id": 51880829, "body": "@Quentin: Exactly, union type-punning will work, and any compiler writer breaking it would break a lot of well-written low-level code."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 3941935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c538ac627f3e153ee89f59122a644728?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Sodzawiczny", "link": "https://stackoverflow.com/users/3941935/tomasz-sodzawiczny"}, "edited": false, "score": 0, "creation_date": 1439390478, "post_id": 31968241, "comment_id": 51843972, "body": "is it UB provided that <code>sizeof(a) &lt;= sizeof(uint64_t)</code>?"}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "reply_to_user": {"reputation": 315, "user_id": 3941935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c538ac627f3e153ee89f59122a644728?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Sodzawiczny", "link": "https://stackoverflow.com/users/3941935/tomasz-sodzawiczny"}, "edited": false, "score": 0, "creation_date": 1439391107, "post_id": 31968241, "comment_id": 51844450, "body": "@Tomasz UB is UB, regardless.  That doesn&#39;t mean for your specific compiler/target that it doesn&#39;t consistently do what you desire.  See <a href=\"http://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\" title=\"undefined unspecified and implementation defined behavior\">stackoverflow.com/questions/2397984/&hellip;</a>"}, {"owner": {"reputation": 315, "user_id": 3941935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c538ac627f3e153ee89f59122a644728?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Sodzawiczny", "link": "https://stackoverflow.com/users/3941935/tomasz-sodzawiczny"}, "edited": false, "score": 0, "creation_date": 1439391522, "post_id": 31968241, "comment_id": 51844780, "body": "you&#39;re right, my bad; I &#39;m just trying to figure out which part of this line is the UB excatly"}], "tags": [], "owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "is_accepted": false, "score": -2, "last_activity_date": 1439390026, "creation_date": 1439390026, "answer_id": 31968241, "question_id": 31967891, "link": "https://stackoverflow.com/questions/31967891/cant-i-typecast-a-class-of-size-8-bytes-to-uint64-t/31968241#31968241", "title": "Can&#39;t i typecast a class of size 8 bytes to uint64_t?", "body": "<p>Definitely undefined behavior, but try</p>\n\n<pre><code>uint64_t num  = *reinterpret_cast&lt;uint64_t *&gt;(&amp;a);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 3, "last_activity_date": 1439390853, "creation_date": 1439390853, "answer_id": 31968560, "question_id": 31967891, "link": "https://stackoverflow.com/questions/31967891/cant-i-typecast-a-class-of-size-8-bytes-to-uint64-t/31968560#31968560", "title": "Can&#39;t i typecast a class of size 8 bytes to uint64_t?", "body": "<p>You need to explicitly copy the 32 bits of one value to the upper 32 bits of the 64-bit value, and the other 32 bits to the lower 32 bits of the 64-bit value.</p>\n\n<p>All other methods are technically undefined behavior (although if you <strong>know</strong> your implementation details well enough, they can work).</p>\n\n<pre><code>class A\n{\n    uint32_t X;\n    uint32_t Y;\n    uint64_t to64()\n    {\n        // convert X and Y to unsigned 64-bit ints\n        uint64_t x64 = X;\n        uint64_t y64 = Y;\n        // left-shift the 64-bit X 32 bits\n        x64 &lt;&lt;= 32;\n\n        // return the sum\n        return( x64 + y64 );\n    }\n};\n</code></pre>\n\n<p>You can do it with much less code, but this shows what you need to do in a step-by-step way.</p>\n"}, {"tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": false, "score": 0, "last_activity_date": 1439393718, "last_edit_date": 1495542125, "creation_date": 1439393017, "answer_id": 31969450, "question_id": 31967891, "link": "https://stackoverflow.com/questions/31967891/cant-i-typecast-a-class-of-size-8-bytes-to-uint64-t/31969450#31969450", "title": "Can&#39;t i typecast a class of size 8 bytes to uint64_t?", "body": "<p>You haven't specified the 'endianness' of your representation. If you want <code>x</code> to be the high word and <code>y</code> the low word, you could add a cast operator to your class:</p>\n\n<pre><code>explicit operator uint64_t () const noexcept\n{\n    return ((static_cast&lt;uint64_t&gt;(X) &lt;&lt; 32) | Y);\n}\n</code></pre>\n\n<p>A <code>'(uint64_t) obj'</code> or (ideally) <code>'static_cast&lt;uint64_t&gt;(obj)'</code> will call this method. <code>explicit</code> prevents it being called implicitly - which is probably the dumbest thing I've said all day - but it prevents <a href=\"https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-in-c-mean\">surprises</a>. Extra points if you use <code>&lt;cstdint&gt;</code> and <code>std::uint64_t</code>.</p>\n"}], "owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1440053453, "creation_date": 1439389146, "last_edit_date": 1440053453, "question_id": 31967891, "link": "https://stackoverflow.com/questions/31967891/cant-i-typecast-a-class-of-size-8-bytes-to-uint64-t", "title": "Can&#39;t i typecast a class of size 8 bytes to uint64_t?", "body": "<p>Suppose we have below code:</p>\n\n<pre><code>class A {\n        uint32_t X;\n        uint32_t Y;\n};\n\nint main ()\n{\n    A a;\n    uint64_t num  = (uint64_t)a;\n}\n</code></pre>\n\n<p>The compiler gives error: \"Cannot convert from A to uint64_t. No User define conversion operator defined.\"</p>\n\n<p>Is the error expected and if yes, why?</p>\n"}, {"tags": ["c++", "algorithm", "graph", "depth-first-search"], "comments": [{"owner": {"reputation": 752, "user_id": 1863086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0489e31fdf0e6d14e57bf00ca1e843ee?s=128&d=identicon&r=PG", "display_name": "bro", "link": "https://stackoverflow.com/users/1863086/bro"}, "edited": false, "score": 0, "creation_date": 1439389887, "post_id": 31967781, "comment_id": 51843443, "body": "a few questions: 1) is the graph acyclic? 2) why do you start the DFS twice <code>int maxn = DFS(0) + DFS(0) + 1;</code>? shouldn&#39;t this function return twice the same?"}, {"owner": {"reputation": 549, "user_id": 5171102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GCYt4.jpg?s=128&g=1", "display_name": "Rasul Kerimov", "link": "https://stackoverflow.com/users/5171102/rasul-kerimov"}, "reply_to_user": {"reputation": 752, "user_id": 1863086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0489e31fdf0e6d14e57bf00ca1e843ee?s=128&d=identicon&r=PG", "display_name": "bro", "link": "https://stackoverflow.com/users/1863086/bro"}, "edited": false, "score": 0, "creation_date": 1439390229, "post_id": 31967781, "comment_id": 51843741, "body": "@bro 1: It doesnt matter. 2: Like I said <code>1</code> node can be connected with <code>2</code> nodes. So initially I start from <code>0</code> node, find necessary neighbour. Then this neighbour can be connected with one node, because it&#39;s already connected with parent. 3: No, because the best necessary node will be marked as <code>used</code> So I have to use second best node."}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 1, "creation_date": 1439390408, "post_id": 31967781, "comment_id": 51843917, "body": "What you&#39;re looking for is a <a href=\"https://en.wikipedia.org/wiki/Hamiltonian_path\" rel=\"nofollow noreferrer\">Hamiltonian Path</a>. Sounds NP-Complete to me."}, {"owner": {"reputation": 549, "user_id": 5171102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GCYt4.jpg?s=128&g=1", "display_name": "Rasul Kerimov", "link": "https://stackoverflow.com/users/5171102/rasul-kerimov"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1439391036, "post_id": 31967781, "comment_id": 51844391, "body": "@beaker Hamiltonian Path has all nodes or not? There can be the situation that my last node is not connected with first node."}, {"owner": {"reputation": 549, "user_id": 5171102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GCYt4.jpg?s=128&g=1", "display_name": "Rasul Kerimov", "link": "https://stackoverflow.com/users/5171102/rasul-kerimov"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1439391441, "post_id": 31967781, "comment_id": 51844719, "body": "@beaker Also can you give some more information, please?"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1439391578, "post_id": 31967781, "comment_id": 51844817, "body": "A Hamiltonian Path on an unknown (maximum) subset of vertices is just as hard as a Hamiltonian Path on all vertices."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 1, "creation_date": 1439402536, "post_id": 31967781, "comment_id": 51851598, "body": "@James: bro&#39;s original question #1 <i>does</i> matter, because if the graph is acyclic you can solve the problem <i>exponentially</i> faster.  And as beaker points out, this problem is at least as hard as the NP-complete Hamiltonian Path problem, because any program that solves your problem automatically solves the HP problem too: a HP exists if and only if the longest path it returns contains every vertex."}, {"owner": {"reputation": 549, "user_id": 5171102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GCYt4.jpg?s=128&g=1", "display_name": "Rasul Kerimov", "link": "https://stackoverflow.com/users/5171102/rasul-kerimov"}, "reply_to_user": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1439405347, "post_id": 31967781, "comment_id": 51853119, "body": "@j_random_hacker No, I mean that I don&#39;t know if the graph acyclic or not. Because there can be acyclic or cyclic graph."}, {"owner": {"reputation": 1194, "user_id": 6800367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MJwj.jpg?s=128&g=1", "display_name": "Benson Lin", "link": "https://stackoverflow.com/users/6800367/benson-lin"}, "edited": false, "score": 0, "creation_date": 1473238917, "post_id": 31967781, "comment_id": 66059676, "body": "@RasulKerimov &quot;One node can be connected with only 2 nodes.&quot; Does this mean every node is connected to exactly 2 nodes?"}], "owner": {"reputation": 549, "user_id": 5171102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GCYt4.jpg?s=128&g=1", "display_name": "Rasul Kerimov", "link": "https://stackoverflow.com/users/5171102/rasul-kerimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1488210136, "creation_date": 1439388864, "last_edit_date": 1488210136, "question_id": 31967781, "link": "https://stackoverflow.com/questions/31967781/subgraph-with-max-nodes", "title": "Subgraph with max nodes", "body": "<p>I have the graph with N nodes. I have to create the longest subgraph (with max nodes). One node can be connected with <code>only 2</code> nodes. So which nodes should I take to create this <code>(max)</code> subgraph?</p>\n\n<p>What I'm doing is:\n1: From initial node. I start <code>2</code> DFS functions. (from anothers nodes only <code>1</code>).</p>\n\n<p>2: For some node in DFS I use <code>F()</code> function to check all neighbours and find maximum way that I have to go. Then I'm saving the index of the node in which I have to go in <code>index</code> variable and starting DFS from <code>index</code>.</p>\n\n<p>The problem is that this algorithm is too slow. How can I optimize it? Maybe there is <code>special</code> algorithm to find <code>maximum subgraph</code>?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cstring&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint used[20];\nint m[20][20];\nint c;\n\n\nint F(int v) {\n    used[v] = 1;\n\n    int maxn = 0, index = -1, t;\n\n    for(int i = 0; i &lt; c; ++i) {\n        if(!used[i] &amp;&amp; m[v][i] == 1) {\n            t = F(i);\n\n            if(t &gt; maxn) {\n                maxn = t;\n                index = i;\n            }\n        }\n    }\n\n    if(index != -1) {\n        used[v] = 0;\n        return maxn + 1;\n    }\n    else {\n        used[v] = 0;\n        return 1;\n    }\n\n}\n\nint DFS(int v) {\n    used[v] = 1;\n    int maxn = 0, index = -1, t;\n    for(int i = 0; i &lt; c; ++i) {\n        if(!used[i] &amp;&amp; m[v][i] == 1) {\n            t = F(i);\n            if(t &gt; maxn) {\n                maxn = t;\n                index = i;\n            }\n        }\n    }\n\n    if(index != -1) {\n        return DFS(index) + 1;\n    }\n    else {\n        return 0;\n    }\n}\n\nint main() {\n\n        cin &gt;&gt; c;\n\n        for(int i = 0; i &lt; c; ++i) {\n            for(int j = 0; j &lt; c; ++ j)\n                cin &gt;&gt; m[i][j];\n        }\n\n        int maxn = DFS(0) + DFS(0) + 1;\n        cout &lt;&lt; maxn &lt;&lt; endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 5497, "user_id": 680982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3616a9a573b69533327b3dfe159481bf?s=128&d=identicon&r=PG", "display_name": "Csq", "link": "https://stackoverflow.com/users/680982/csq"}, "edited": false, "score": 1, "creation_date": 1439388860, "post_id": 31967725, "comment_id": 51842605, "body": "The answer to the second part is here: <a href=\"https://stackoverflow.com/questions/13809359/how-to-detect-if-a-class-is-final-in-c11\" title=\"how to detect if a class is final in c11\">stackoverflow.com/questions/13809359/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 4, "last_activity_date": 1439388848, "creation_date": 1439388848, "answer_id": 31967776, "question_id": 31967725, "link": "https://stackoverflow.com/questions/31967725/does-final-specifier-add-any-overhead/31967776#31967776", "title": "Does &#39;final&#39; specifier add any overhead?", "body": "<ol>\n<li><p>No, it's only used at compile-time</p></li>\n<li><p>Magic  (<a href=\"https://stackoverflow.com/questions/13809359/how-to-detect-if-a-class-is-final-in-c11\">see here</a> for further info - thanks Csq for link)</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1439464764, "post_id": 31968537, "comment_id": 51878028, "body": "@TemplateRex EBO pessimization?  You cannot use empty base optimization on a final class, because you cannot inherit from it.  EBO uses inheritance to make empty classes (in certain circumstances) use zero space.  As you cannot inherit from a final class, it doesn&#39;t work if you are final."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1439467269, "post_id": 31968537, "comment_id": 51879766, "body": "I&#39;m thinking that a <code>template&lt;class T&gt; struct Finalized final : T {};</code> is a nice utility to get around it. Just inherit from <code>B</code> for EBO and typedef <code>Finalized&lt;B&gt;</code> for users."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1439470918, "post_id": 31968537, "comment_id": 51882406, "body": "@templaterex needs constructor inheritance."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1439470983, "post_id": 31968537, "comment_id": 51882463, "body": "ya, correct, and annoyingly also default constructor by hand. So perhaps not worth the bother."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 22, "last_activity_date": 1439392491, "last_edit_date": 1495540034, "creation_date": 1439390798, "answer_id": 31968537, "question_id": 31967725, "link": "https://stackoverflow.com/questions/31967725/does-final-specifier-add-any-overhead/31968537#31968537", "title": "Does &#39;final&#39; specifier add any overhead?", "body": "<p>It actually can reduce overhead.  And in rare cases, increase it.</p>\n\n<p>If you have a pointer to a <code>final</code> class <code>A</code>, any virtual method calls can be de-virtualized and called directly.  Similarly, a call to a virtual <code>final</code> method can be de-virtualized.  In addition, the inheritance tree of a <code>final</code> class is fixed, even if it contains <code>virtual</code> parent classes, so you can de-virtualize some parent access.</p>\n\n<p>Each of these de-virtualizations reduce or eliminate the requirement that a run-time structure (the vtable) be queried.</p>\n\n<p>There can be a slight downside.  Some coding techniques rely on vtable access to avoid direct access to a symbol, and then do not export the symbol.  Accessing a vtable can be done via convention (without symbols from a library, just the header file for the classes in question), while accessing a method directly involves linking against that symbol.</p>\n\n<p>This breaks one form of dynamic C++ library linking (where you avoid linking more than a dll loading symbol and/or C linkage functions that return pointers, and classes are exported via their vtables).</p>\n\n<p>It is also possible that if you link against a symbol in a dynamic library, the dynamic library symbol load could be more expensive than the vtable lookup.  I have not experienced or profiled this, but I have seen it claimed.  The benefits should, in general, outweigh such costs.  Any such cost is a quality of implementation issue, as the cost is not mandated to occur because the method is <code>final</code>.</p>\n\n<p>Finally, <code>final</code> inhibits the empty base optimization trick on classes, where someone knows your class has no state, and inherits from it to reduce the overhead of \"storing\" an instance of your class from 1 byte to 0 bytes.  If your class is empty and contains no virtual methods/inheritance, don't use <code>final</code> to avoid this being blocked.  There is no equivalent for <code>final</code> functions.</p>\n\n<p>Other than the EBO optimization issue (which only occurs with empty types), any overhead from <code>final</code> comes from how other code interacts with it, and will be rare.  Far more often it will make other code faster, as directly interacting with a method enables both a more direct call of the method, and can lead to knock-on optimizations (because the call can be more fully understood by the compiler).</p>\n\n<p>Marking anything except an empty type as <code>final</code> when it is final is almost certainly harmless at run time.  Doing so on classes with virtual functions and inheritance is likely to be beneficial at run time.</p>\n\n<hr>\n\n<p><code>std::is_final</code> and similar traits are almost all implemented via compiler built-in magic.  A good number of the traits in <code>std</code> require such magic.  See <a href=\"https://stackoverflow.com/q/13809359/1774667\">How to detect if a class is final in C++11?</a> (thanks to @Csq for finding that)</p>\n"}], "owner": {"reputation": 1859, "user_id": 4220311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/979c9c43e56339816357b614d623c0ba?s=128&d=identicon&r=PG", "display_name": "Laurynas Lazauskas", "link": "https://stackoverflow.com/users/4220311/laurynas-lazauskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 2, "accepted_answer_id": 31968537, "answer_count": 2, "score": 8, "last_activity_date": 1439392491, "creation_date": 1439388742, "question_id": 31967725, "link": "https://stackoverflow.com/questions/31967725/does-final-specifier-add-any-overhead", "title": "Does &#39;final&#39; specifier add any overhead?", "body": "<p>Does using specifier <code>final</code> on a <code>class</code> or on a <code>function</code> add any memory or cpu overhead, or is it used at compile time only?</p>\n\n<p>And how does <code>std::is_final</code> recognise what is final?</p>\n"}, {"tags": ["c++", "eclipse", "c++11", "cuda"], "answers": [{"comments": [{"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1519059192, "post_id": 48853266, "comment_id": 84745167, "body": "Yes the question is now obsolete since CUDA has now C++11 support in its nsight. The separate plugin is a very nice addition."}], "tags": [], "owner": {"reputation": 2163, "user_id": 5085250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/10k8D.jpg?s=128&g=1", "display_name": "havogt", "link": "https://stackoverflow.com/users/5085250/havogt"}, "is_accepted": true, "score": 2, "last_activity_date": 1518967378, "last_edit_date": 1592644375, "creation_date": 1518967378, "answer_id": 48853266, "question_id": 31967697, "link": "https://stackoverflow.com/questions/31967697/make-eclipse-parse-or-ignore-cuda-kernel-launch-parameters/48853266#48853266", "title": "Make eclipse parse or ignore CUDA kernel launch parameters", "body": "<p>For this particular problem (support for <code>constexpr</code>) you can now <strong>use the nsight which ships with CUDA 9</strong> (based on CDT 8.4).</p>\n<h1>Custom CDT with nsight plugin (requires CUDA 9)</h1>\n<p>In case you still want to use a more recent CDT version, there is a new option since CUDA 9: it ships with an installer <code>&lt;cuda-install-path&gt;/bin/nsight_ee_plugins_manage.sh</code> which allows adding the nsight plugin to an existing eclipse installation.</p>\n<h1>Before CUDA 9</h1>\n<p>A work-around could be to wrap your kernel launch in a macro:</p>\n<pre><code>#ifdef PARSED_BY_ECLIPSE\n#define CALL_CUDA_KERNEL(cmd) (void)0 /* do nothing */\n#else\n#define CALL_CUDA_KERNEL(cmd) cmd\n#endif\n</code></pre>\n<p>And add the symbol <code>PARSED_BY_ECLIPSE</code> to the configuration which is used for indexing.</p>\n"}], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 48853266, "answer_count": 1, "score": 3, "last_activity_date": 1518967378, "creation_date": 1439388662, "last_edit_date": 1512423165, "question_id": 31967697, "link": "https://stackoverflow.com/questions/31967697/make-eclipse-parse-or-ignore-cuda-kernel-launch-parameters", "title": "Make eclipse parse or ignore CUDA kernel launch parameters", "body": "<p>I'm working on a C++ project that uses C++11 and CUDA.</p>\n\n<p>I want to use the syntax highlighting and parsing capabilities of eclipse, especially go to symbol and the live error checking. However when I use \"pure\" eclipse, the CUDA kernel launch parameter notation via &lt;&lt;&lt;..>>> breaks the parsing and the whole call is marked invalid. When I use Eclipse Nsight 7 then it won't parse C++11 related stuff like constexpr and therefor is not able to resolve my templated types. (see <a href=\"https://devtalk.nvidia.com/default/topic/830892/nsight-editor-does-not-parse-c-11-shows-syntax-error/\" rel=\"nofollow\">https://devtalk.nvidia.com/default/topic/830892/nsight-editor-does-not-parse-c-11-shows-syntax-error/</a>)</p>\n\n<p>Is there any way (hack, plugin,...) to make regular eclipse handle those &lt;&lt;&lt;...>>>?</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates"], "answers": [{"tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 1, "last_activity_date": 1439389002, "creation_date": 1439389002, "answer_id": 31967837, "question_id": 31967666, "link": "https://stackoverflow.com/questions/31967666/is-it-possible-to-have-a-two-parameter-base-case-for-a-variadic-member-function/31967837#31967837", "title": "Is it possible to have a two parameter base case for a variadic member function template?", "body": "<p>A very simple option would be to add an additional template parameter to the recursive case so that it is only selected when there are at least three arguments:</p>\n\n<pre><code>class Foo {\npublic:\n    template&lt;typename X, typename T, typename U, typename ... Args&gt; static void f( );\n    template&lt;typename X, typename T&gt; static void f( );\n};\n\n\ntemplate&lt;typename X, typename T&gt; void Foo::f( ) {\n    cout &lt;&lt; \"Swallowed last two arguments.\" &lt;&lt; endl;\n}\n\ntemplate&lt;typename X, typename T, typename U, typename ... Args&gt; void Foo::f( ) {\n    cout &lt;&lt; sizeof (T ) &lt;&lt; endl;\n    Foo::f &lt;X, U, Args...&gt;( );\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/451c9c3740a14652\" rel=\"nofollow\"><kbd>Live demo</kbd></a></p>\n"}, {"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 2, "last_activity_date": 1439389347, "last_edit_date": 1439389347, "creation_date": 1439389016, "answer_id": 31967846, "question_id": 31967666, "link": "https://stackoverflow.com/questions/31967666/is-it-possible-to-have-a-two-parameter-base-case-for-a-variadic-member-function/31967846#31967846", "title": "Is it possible to have a two parameter base case for a variadic member function template?", "body": "<h3>Option #1</h3>\n\n<p>Let the variadic version take at least three fixed type template parameters:</p>\n\n<pre><code>template &lt;typename X, typename T, typename V, typename... Args&gt;\nstatic void f();\n\n// ...\n\ntemplate &lt;typename X, typename T, typename V, typename... Args&gt;\nvoid Foo::f()\n{\n    Foo::f&lt;X, V, Args...&gt;( );\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2c694cf4042e84bf\" rel=\"nofollow\"><strong>DEMO 1</strong></a></p>\n\n<h3>Option #2</h3>\n\n<p>Disable the variadic version with SFINAE if the size of a pack equals 0:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename X, typename T, typename... Args&gt;\nstatic auto f()\n    -&gt; typename std::enable_if&lt;(sizeof...(Args) &gt; 0)&gt;::type;\n\n//...\n\ntemplate &lt;typename X, typename T, typename... Args&gt;\nauto Foo::f()\n    -&gt; typename std::enable_if&lt;(sizeof...(Args) &gt; 0)&gt;::type\n{\n    Foo::f&lt;X, Args...&gt;( );\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/0029692e881ad22d\" rel=\"nofollow\"><strong>DEMO 2</strong></a></p>\n"}], "owner": {"reputation": 615, "user_id": 901826, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bc53e88722245709ec4cd7458cffa7b6?s=128&d=identicon&r=PG", "display_name": "Aelian", "link": "https://stackoverflow.com/users/901826/aelian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 31967846, "answer_count": 2, "score": 1, "last_activity_date": 1439389347, "creation_date": 1439388599, "question_id": 31967666, "link": "https://stackoverflow.com/questions/31967666/is-it-possible-to-have-a-two-parameter-base-case-for-a-variadic-member-function", "title": "Is it possible to have a two parameter base case for a variadic member function template?", "body": "<p>Consider following code:</p>\n\n<pre><code>class Foo {\npublic:\n    template&lt;typename X, typename T, typename ... Args&gt; static void f( );\n    //template&lt;typename X, typename T&gt; static void f( );\n    template&lt;typename X&gt; static void f( );\n};\n\ntemplate&lt;typename X&gt; void Foo::f( ) {\n    cout &lt;&lt; \"Swallowed the last argument.\" &lt;&lt; endl;\n}\n\n/*\ntemplate&lt;typename X, typename T&gt; void Foo::f( ) {\n    cout &lt;&lt; \"Swallowed last two arguments.\" &lt;&lt; endl;\n}\n */\n\ntemplate&lt;typename X, typename T, typename ... Args&gt; void Foo::f( ) {\n    cout &lt;&lt; sizeof (T ) &lt;&lt; endl;\n    Foo::f &lt;X, Args...&gt;( );\n}\n\n\n...\n    Foo::f&lt;void*, int, double, long&gt;( );\n...\n</code></pre>\n\n<p>This works fine and the output is:</p>\n\n<pre><code>4\n8\n8\nSwallowed the last argument.\n</code></pre>\n\n<p>However in the specific problem I am working on, I would like to stop the recursion one level before, as shown in the commented out code. When those lines are not commented out I get the error (gcc 4.8.3):</p>\n\n<pre><code>g++ -Wall -std=c++1y -march=native -fmessage-length=0 -Wno-multichar   -g  -c -o obj/OneOff/OneOff.o OneOff/OneOff.cpp\nOneOff/OneOff.cpp: In instantiation of \u2018static void Foo::f() [with X = void*; T = double; Args = {long int}]\u2019:\nOneOff/OneOff.cpp:132:23:   required from \u2018static void Foo::f() [with X = void*; T = int; Args = {double, long int}]\u2019\nOneOff/OneOff.cpp:137:36:   required from here\nOneOff/OneOff.cpp:132:23: error: call of overloaded \u2018f()\u2019 is ambiguous\n  Foo::f &lt;X, Args...&gt;( );\n                       ^\nOneOff/OneOff.cpp:132:23: note: candidates are:\nOneOff/OneOff.cpp:130:58: note: static void Foo::f() [with X = void*; T = long int; Args = {}]\n template&lt;typename X, typename T, typename ... Args&gt; void Foo::f( ) {\n                                                          ^\nOneOff/OneOff.cpp:125:39: note: static void Foo::f() [with X = void*; T = long int]\n template&lt;typename X, typename T&gt; void Foo::f( ) {\n                                       ^\ngmake: *** [obj/OneOff/OneOff.o] Error 1\n</code></pre>\n\n<p><strong>Is it possible to somehow tell the compiler that the two parameter version is a specialization / base case. E.g. use something like &lt; .. , typename Args = {}>?</strong></p>\n\n<p>One alternative I found was to change f() to:</p>\n\n<pre><code>template&lt;typename X, typename T, typename ... Args&gt; void Foo::f( ) {\n    cout &lt;&lt; sizeof (T ) &lt;&lt; endl;\n    if ( sizeof ...( Args ) &gt; 1 ) {\n        Foo::f &lt;X, Args...&gt;( );\n    } else {\n        cout &lt;&lt; \"Swallowed last two arguments.\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>This gives the desired result and probably once individual variations are generated the 'if ... elses' gets optimized away along with the base case. However it looks like a bit of a hack.</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1439389202, "post_id": 31967653, "comment_id": 51842888, "body": "Have you tried <code>auto</code>? And <code>auto Var = func()</code>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1439392306, "post_id": 31967653, "comment_id": 51845312, "body": "Why would the answer be anything else than <code>boost::posix_time::ptime</code> that is already written ?"}], "answers": [{"tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 0, "last_activity_date": 1439392329, "last_edit_date": 1439392329, "creation_date": 1439391994, "answer_id": 31969029, "question_id": 31967653, "link": "https://stackoverflow.com/questions/31967653/return-type-of-a-function-giving-out-timestamp-using-boost/31969029#31969029", "title": "Return Type of a function giving out timestamp using Boost", "body": "<p>Use <code>boost::posix_time::ptime</code>. Your original code has an error, <code>universal_time</code> is a function that you need to call. I changed it in the (untested) code below.</p>\n\n<pre><code>boost::posix_time::ptime func()\n{\n   boost::posix_time::ptime time_stamp = boost::posix_time::microsec_clock::universal_time(); \n   return time_stamp;\n}\n\nint main()\n{    \n   boost::posix_time::ptime Var = func();\n   return 0;\n}\n</code></pre>\n\n<p>Also, if you are using C++11, you except for the function signature of <code>func</code>, you can replace <code>boost::posix_time::ptime</code> with <code>auto</code>.</p>\n\n<pre><code>boost::posix_time::ptime func()\n{\n   return boost::posix_time::microsec_clock::universal_time(); \n}\n\nint main()\n{    \n   auto Var = func();\n}\n</code></pre>\n\n<p>(For convenience, I like to nickname the <code>boost::posix_time</code> namespace using <code>namespace pt = boost::posix_time</code>; this way it shortens to <code>pt::ptime</code>.)</p>\n\n<p>For a good overview of boost date/time functionality, see <a href=\"http://theboostcpplibraries.com/boost.datetime\" rel=\"nofollow\">Chapter 36. Boost.DateTime</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 3748641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dc9bfe75b806d7d958beb1f6b1a721?s=128&d=identicon&r=PG&f=1", "display_name": "user3748641", "link": "https://stackoverflow.com/users/3748641/user3748641"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439392329, "creation_date": 1439388568, "question_id": 31967653, "link": "https://stackoverflow.com/questions/31967653/return-type-of-a-function-giving-out-timestamp-using-boost", "title": "Return Type of a function giving out timestamp using Boost", "body": "<p>What should be the return type of the function and the variable in the below example using boost library?</p>\n\n<pre><code>? func (void);\n{\n   boost::posix_time::ptime time_stamp;\n   time_stamp = boost::posix_time::microsec_clock::universal_time; \n   return time_stamp;\n}\n\nint main()\n{\n\n   ? Var;\n   Var = func();\n}\n</code></pre>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 2, "creation_date": 1439388670, "post_id": 31967601, "comment_id": 51842439, "body": "Take a look at some C++ tutorials.  Focus on conditional logic operators."}, {"owner": {"reputation": 4114, "user_id": 2957232, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XicNR.jpg?s=128&g=1", "display_name": "Broots Waymb", "link": "https://stackoverflow.com/users/2957232/broots-waymb"}, "edited": false, "score": 2, "creation_date": 1439388682, "post_id": 31967601, "comment_id": 51842448, "body": "I think you&#39;re missing some basic programming knowledge based on this question.."}, {"owner": {"reputation": 96748, "user_id": 74757, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/10331bb0b4eb995500acc85fb0d16aea?s=128&d=identicon&r=PG", "display_name": "C\u1d0f\u0280\u028f", "link": "https://stackoverflow.com/users/74757/c%e1%b4%8f%ca%80%ca%8f"}, "reply_to_user": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 0, "creation_date": 1439388715, "post_id": 31967601, "comment_id": 51842481, "body": "@NightShadeQueen: Probably c++."}, {"owner": {"reputation": 386, "user_id": 3727816, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/603983223/picture?type=large", "display_name": "MadmanLee", "link": "https://stackoverflow.com/users/3727816/madmanlee"}, "edited": false, "score": 0, "creation_date": 1537938946, "post_id": 31967601, "comment_id": 91960720, "body": "Why was this question downvoted so much?  Very valid and useful question."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5219520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fea680f2c92248e36f0b2295cbd34c9?s=128&d=identicon&r=PG&f=1", "display_name": "In_Progress", "link": "https://stackoverflow.com/users/5219520/in-progress"}, "edited": false, "score": 0, "creation_date": 1439389242, "post_id": 31967727, "comment_id": 51842922, "body": "And what if the years are random?"}, {"owner": {"reputation": 4200, "user_id": 2288754, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CJP6m.png?s=128&g=1", "display_name": "bmacnaughton", "link": "https://stackoverflow.com/users/2288754/bmacnaughton"}, "reply_to_user": {"reputation": 31, "user_id": 5219520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fea680f2c92248e36f0b2295cbd34c9?s=128&d=identicon&r=PG&f=1", "display_name": "In_Progress", "link": "https://stackoverflow.com/users/5219520/in-progress"}, "edited": false, "score": 0, "creation_date": 1439389553, "post_id": 31967727, "comment_id": 51843196, "body": "That wasn&#39;t the question, but if they&#39;re random then there are a couple choices. My preferred answer would be to create an array of the random years then look through the array - something other than iterating 20,000 times and doing a set of compares each time to find the answer.      years_to_print = [300, 734, 888]; // or generate based on a rule  Then loop through the elements of the vector/array."}, {"owner": {"reputation": 4200, "user_id": 2288754, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CJP6m.png?s=128&g=1", "display_name": "bmacnaughton", "link": "https://stackoverflow.com/users/2288754/bmacnaughton"}, "reply_to_user": {"reputation": 31, "user_id": 5219520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fea680f2c92248e36f0b2295cbd34c9?s=128&d=identicon&r=PG&f=1", "display_name": "In_Progress", "link": "https://stackoverflow.com/users/5219520/in-progress"}, "edited": false, "score": 0, "creation_date": 1439389963, "post_id": 31967727, "comment_id": 51843511, "body": "If you provide the specific problem I can provide a better answer."}], "tags": [], "owner": {"reputation": 4200, "user_id": 2288754, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CJP6m.png?s=128&g=1", "display_name": "bmacnaughton", "link": "https://stackoverflow.com/users/2288754/bmacnaughton"}, "is_accepted": false, "score": 0, "last_activity_date": 1439389913, "last_edit_date": 1439389913, "creation_date": 1439388743, "answer_id": 31967727, "question_id": 31967601, "link": "https://stackoverflow.com/questions/31967601/output-every-x-iterations-in-a-for-loop/31967727#31967727", "title": "Output every x iterations in a for-loop", "body": "<p>I'm not much of a C++ programmer, but it seems like the most straightforward way to perform your task is:</p>\n\n<pre><code>for (int i = 500; i &lt; 2016; i += 500) {\n    cout &lt;&lt; \"The year is \" &lt;&lt; i &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 7, "last_activity_date": 1439389948, "last_edit_date": 1439389948, "creation_date": 1439389038, "answer_id": 31967853, "question_id": 31967601, "link": "https://stackoverflow.com/questions/31967601/output-every-x-iterations-in-a-for-loop/31967853#31967853", "title": "Output every x iterations in a for-loop", "body": "<p>If you want something to happen every 100 iterations, use the <a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"noreferrer\">modulo</a> operator <code>%</code>:</p>\n\n<pre><code> for (int i=500; i&lt;20000; i++) {\n   if (i % 100 == 0) cout &lt;&lt; i &lt;&lt; endl;\n</code></pre>\n\n<p>Your code is incorrect, because you are wrongly using (without wanting it) the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"noreferrer\">comma operator</a>, so your test is equivalent to <code>if (i==2000)</code></p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5219520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fea680f2c92248e36f0b2295cbd34c9?s=128&d=identicon&r=PG&f=1", "display_name": "In_Progress", "link": "https://stackoverflow.com/users/5219520/in-progress"}, "edited": false, "score": 0, "creation_date": 1439389670, "post_id": 31968007, "comment_id": 51843285, "body": "Yes, that worked) can you pls explaine why what i wrote didn&#39;t work?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1439389907, "post_id": 31968007, "comment_id": 51843469, "body": "Because you are using (wrongly) the comma operator, as I mentionned in my answer"}], "tags": [], "owner": {"reputation": 37, "user_id": 5029535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7404a9dd7d7b8bf21f81e6a072d950?s=128&d=identicon&r=PG&f=1", "display_name": "JITESH PANDEY", "link": "https://stackoverflow.com/users/5029535/jitesh-pandey"}, "is_accepted": false, "score": 2, "last_activity_date": 1439389783, "last_edit_date": 1439389783, "creation_date": 1439389422, "answer_id": 31968007, "question_id": 31967601, "link": "https://stackoverflow.com/questions/31967601/output-every-x-iterations-in-a-for-loop/31968007#31968007", "title": "Output every x iterations in a for-loop", "body": "<p>I think you are missing <code>||</code>(OR) between every if-condition. It would be something like </p>\n\n<pre><code>if ( i == 500 || i == 1000 || i == 1500 || i == 2000)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 1, "last_activity_date": 1439389684, "creation_date": 1439389684, "answer_id": 31968115, "question_id": 31967601, "link": "https://stackoverflow.com/questions/31967601/output-every-x-iterations-in-a-for-loop/31968115#31968115", "title": "Output every x iterations in a for-loop", "body": "<p>If you know the years in advance:</p>\n\n<pre><code>const auto Years[] = {500, 742, 1000, 1234, 2000, 2015};\n\nfor (auto year : Years)\n   std::cout &lt;&lt; \"The year is \" &lt;&lt; year &lt;&lt; '\\n';\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5219520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fea680f2c92248e36f0b2295cbd34c9?s=128&d=identicon&r=PG&f=1", "display_name": "In_Progress", "link": "https://stackoverflow.com/users/5219520/in-progress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5061, "favorite_count": 1, "answer_count": 4, "score": -2, "last_activity_date": 1439389948, "creation_date": 1439388441, "last_edit_date": 1439389310, "question_id": 31967601, "link": "https://stackoverflow.com/questions/31967601/output-every-x-iterations-in-a-for-loop", "title": "Output every x iterations in a for-loop", "body": "<p>So I have this code:</p>\n\n<pre><code>for (int i=1000; i&lt;2016; i++ )\n{\n    cout &lt;&lt; \"The year is \" &lt;&lt;  i &lt;&lt; endl;\n}\n</code></pre>\n\n<p>But let's say I don't want this code to print all of the years, but just a select few, let's say it's the years 500, 1000, 1500 and 2000.</p>\n\n<p>I tried to add this to the code:</p>\n\n<pre><code>for (int i=1000; i&lt;2016; i++ )\n\n          if ( i == 500 , i == 1000 , i == 1500 , i == 2000){\n    cout &lt;&lt; \"The year is \" &lt;&lt;  i &lt;&lt; endl;\n}\n</code></pre>\n\n<p>but that didn't work.</p>\n\n<p>How would I make the code write only the years I picked?</p>\n\n<p>p.s. The interval is random and not every 500.</p>\n"}]