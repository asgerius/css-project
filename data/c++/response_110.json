[{"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1487203636, "post_id": 42262381, "comment_id": 71682392, "body": "Include error message text in a question itself. We can&#39;t, possibly, remember all of the compiler / <b>linker</b> error codes and their meanings."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1487203898, "post_id": 42262381, "comment_id": 71682453, "body": "If you are compiling native C++ code, the correct option is &quot;No Common Language Runtime Support&quot;. The others are for &quot;managed&quot; code."}, {"owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1487204360, "post_id": 42262381, "comment_id": 71682599, "body": "@Bo Persson That was my original setting, and it didn&#39;t work. I&#39;ve updated my post."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1487205356, "post_id": 42262381, "comment_id": 71682894, "body": "Ok, then the next problem is that you should probably have selected &quot;Win32 Console Application&quot; as the project type."}], "owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1487205450, "answer_count": 0, "score": 0, "last_activity_date": 1487204324, "creation_date": 1487203180, "last_edit_date": 1487204324, "question_id": 42262381, "link": "https://stackoverflow.com/questions/42262381/errorlnk2019-and-errorlnk1120", "closed_reason": "Duplicate", "title": "errorLNK2019 and errorLNK1120", "body": "<p>New to c++. I created a new win32 Application project in Visual Studio\nI selected \"Windows application\" and \"Empty project.</p>\n\n<p>I added a \"write.cpp\" file under \"Source Files\" with following code, then I click Build->build solution and got error:</p>\n\n<p>errorLNK2019 and errorLNK1120.</p>\n\n<p>Error   1   error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup U:\\CreditFIModels\\Models\\Risk Premia\\SB\\IGUpdates\\PY\\src\\c++\\writeWin32\\writeWin32\\MSVCRTD.lib(crtexew.obj) writeWin32</p>\n\n<p>Error   2   error LNK1120: 1 unresolved externals   U:\\CreditFIModels\\Models\\Risk Premia\\SB\\IGUpdates\\PY\\src\\c++\\writeWin32\\Debug\\writeWin32.exe    1   1   writeWin32</p>\n\n<p>I've read threads in SO changed General->Common Language Runtime Support->to either /clr:pure or /clr, it doesn't help. My original setting \"No Common Language Runtime Support\" doesn't work as well.</p>\n\n<p>Hope anyone can help me figure out what is going on.</p>\n\n<pre><code>// basic file operations\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main () {\n  ofstream myfile;\n  myfile.open (\"example.txt\");\n  myfile &lt;&lt; \"Writing this to a file.\\n\";\n  myfile.close();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 1, "creation_date": 1487203310, "post_id": 42262363, "comment_id": 71682300, "body": "Hint: You can wrap one for loop inside of another."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1487205600, "post_id": 42262363, "comment_id": 71682971, "body": "inside the loop, the value of <code>i</code> is never equal to <code>any_number</code> because thats the break condition. Anyhow you dont need the <code>if</code> you you put the <code>cout &lt;&lt; endl;</code> after the loop"}], "owner": {"reputation": 15, "user_id": 7471737, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6koSoz8kkU8/AAAAAAAAAAI/AAAAAAAACd0/LBfqRNdUoc8/photo.jpg?sz=128", "display_name": "h20Pohlow", "link": "https://stackoverflow.com/users/7471737/h20pohlow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1487203425, "answer_count": 0, "score": 0, "last_activity_date": 1487206404, "creation_date": 1487203016, "last_edit_date": 1487206404, "question_id": 42262363, "link": "https://stackoverflow.com/questions/42262363/printing-a-square-of-zeros-based-off-of-squared-integers-different-from-asteris", "closed_reason": "Duplicate", "title": "Printing a square of zeros based off of squared integers--different from asterisks c++", "body": "<p>So I'm a beginner..obvi. And for my assignment I need to be able to take any integer input (ex. 3) and \"Square it\" and then print zeros in a square like :</p>\n\n<pre><code>000\n000\n000\n</code></pre>\n\n<p>or if the input were 2, then:</p>\n\n<pre><code>00\n00\n</code></pre>\n\n<p>Basically I have no idea what I'm doing, but it seems like so far I have the row situation figured out. Now I can't figure out how to do the column part.</p>\n\n<p>Help please?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n\n    int any_number;\n    string number_zeros = \"0\";\n    string number_columns;\n    //cout &lt;&lt; \"input an integer\" &lt;&lt; endl;\n    cin &gt;&gt; any_number;\n    number_columns = any_number;\n\n\n        for (int i = 0; i &lt; any_number; i++)\n        {\n            cout &lt;&lt; number_zeros;\n\n            if (i == any_number)\n            {\n                cout &lt;&lt; endl;\n\n            }\n\n        }\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "multithreading"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1487202853, "post_id": 42262301, "comment_id": 71682142, "body": "Use a <code>sem_t</code> located in shared memory?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1487205541, "post_id": 42262301, "comment_id": 71682949, "body": "Use a robust mutex in shared memory."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1487256499, "post_id": 42262301, "comment_id": 71710536, "body": "So... are you coding in C or C++?"}, {"owner": {"reputation": 105, "user_id": 3000600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51d15cc7ff169622ef22cfa44a78c9f2?s=128&d=identicon&r=PG", "display_name": "lordofire", "link": "https://stackoverflow.com/users/3000600/lordofire"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1487367778, "post_id": 42262301, "comment_id": 71770728, "body": "@EOF Yup, that&#39;s something I thought about as well, just wonder if this is the best practice to handle this kind of situation"}, {"owner": {"reputation": 105, "user_id": 3000600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51d15cc7ff169622ef22cfa44a78c9f2?s=128&d=identicon&r=PG", "display_name": "lordofire", "link": "https://stackoverflow.com/users/3000600/lordofire"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1487367907, "post_id": 42262301, "comment_id": 71770801, "body": "@RustyX I&#39;m comfortable in both. I believe C++ libs like boost is still wrapping some Linux C API to do the job, so essentially C would be better."}], "owner": {"reputation": 105, "user_id": 3000600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51d15cc7ff169622ef22cfa44a78c9f2?s=128&d=identicon&r=PG", "display_name": "lordofire", "link": "https://stackoverflow.com/users/3000600/lordofire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487202689, "creation_date": 1487202689, "question_id": 42262301, "link": "https://stackoverflow.com/questions/42262301/linux-c-synchronization-method-both-inter-and-intra-process", "title": "linux c++ synchronization method both inter and intra process", "body": "<p>The question is brought up when I developing a registry system (c/c++, 2.6.32-642.6.2.el6.x86_64 #1 SMP) used to bookmark information for each database, which requires locking for both inter and intra process. Normally, <a href=\"https://linux.die.net/man/3/lockf\" rel=\"nofollow noreferrer\">lockf()</a>, <a href=\"https://linux.die.net/man/2/flock\" rel=\"nofollow noreferrer\">flock()</a>, <a href=\"https://linux.die.net/man/2/fcntl\" rel=\"nofollow noreferrer\">fcntl()</a> are obvious candidates for the inter process locking, but then I find out that they do not work as expected for intra-process locking(multi threads in same process). </p>\n\n<p>I tested it using the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;fcntl.h&gt;    /* For O_RDWR */\n#include &lt;unistd.h&gt;   /* For open(), creat() */\n#include &lt;errno.h&gt;\n\nint counter = 0;\n\nvoid* counterThread(void* ptr)\n{\n    int lockfd = 0;\n    int tmpCounter = 0;\n\n    lockfd = open(\"/tmp/lockfile.txt\", O_CREAT|O_WRONLY, 0666);\n    if(lockfd == -1)\n    {\n        printf(\"lockfile could not be created, errno:%d\\n\", errno);\n        return NULL;\n    }\n\n    if(lockf(lockfd, F_LOCK, 0) == -1)\n    {\n        printf(\"lockfile could not be locked, errno:%d\\n\", errno);\n        return NULL;\n    }\n\n    counter++;\n    tmpCounter = counter;\n\n    if(lockf(lockfd, F_ULOCK, 0) == -1)\n    {\n        printf(\"lockfile could not be unlocked, errno:%d\\n\", errno);\n        return NULL;\n    }\n    close(lockfd);\n\n    printf(\"counter is %d, lockfile is %d\\n\", tmpCounter, lockfd);\n}\n\nint main()\n{\n    int threadNum = 30000;\n    pthread_t threads[30000];\n    int i = 0;\n    int rv = 0;\n    for(; i &lt; threadNum; i++)\n    {\n        rv = pthread_create( &amp;threads[i], NULL, &amp;counterThread, NULL);\n        if(rv != 0)\n        {\n            printf(\"failed to create pthread %d\\n\", i);\n            return -1;\n        }\n    }\n    for(i = 0; i &lt; threadNum; i++)\n        pthread_join(threads[i], NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output would be:</p>\n\n<pre><code>counter is 1, lockfile is 4\ncounter is 2, lockfile is 3\ncounter is 3, lockfile is 5\ncounter is 4, lockfile is 6\ncounter is 7, lockfile is 4\n...\ncounter is 29994, lockfile is 3\ncounter is 29995, lockfile is 3\ncounter is 29996, lockfile is 3\ncounter is 29997, lockfile is 3\ncounter is 29998, lockfile is 3\n</code></pre>\n\n<p>The output sequence is random and sometimes missing some numbers inside, meaning there is definitely a race condition happening. I think the reason is probably that fd opened for the same file in the same process is somehow optimized to be reused. Because all these locking mechanism is implemented in granularity of fd, the locking does not work in this case.</p>\n\n<p>Given the background, I would like to ask the following question:</p>\n\n<ol>\n<li>Is there any means I could force open to return different fd for different threads to same process to make the locking works?</li>\n<li><p>Is there any good practice or convenient API in Linux to do both inter and intra process locking? What I could think of is the following means to implement it(not verified yet), but I would like to know some easier ways:</p>\n\n<p>(1) Implement mutex and semaphore to serialize the access to all these lockfile APIs for the critical resources</p>\n\n<p>(2) shm_open a shared memory, mmap it in different processes and add semaphore/mutex inside to lock the critical resources</p></li>\n</ol>\n\n<p>Thanks in advance:)</p>\n"}, {"tags": ["c++", "socket.io"], "answers": [{"tags": [], "owner": {"reputation": 567, "user_id": 2466819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O9Le1.png?s=128&g=1", "display_name": "SaundersB", "link": "https://stackoverflow.com/users/2466819/saundersb"}, "is_accepted": true, "score": 1, "last_activity_date": 1487262568, "creation_date": 1487262568, "answer_id": 42279581, "question_id": 42262291, "link": "https://stackoverflow.com/questions/42262291/why-cant-i-import-header-files-to-a-library-in-one-of-my-header-files/42279581#42279581", "title": "Why can&#39;t I import header files to a library in one of my header files?", "body": "<p><strong>Solution:</strong></p>\n\n<p>I figured out what the problem happened to be. Both the Socket.io C++ library and Qt share namespace in regards to the word \"emit\". In the event that somebody else runs into this problem here is how I resolved it:</p>\n\n<ol>\n<li>git clone <a href=\"https://github.com/raksa/SocketIO-cpp-lib\" rel=\"nofollow noreferrer\">https://github.com/raksa/SocketIO-cpp-lib</a></li>\n<li>Edit all instances of the term \"emit\" in the source files. In my case I changed them all to \"emit_signal\".</li>\n<li>git checkout development within the websocketpp library. (Wouldn't compile on master or from the most recent tag as of 2/16/2017).</li>\n<li>Recompile the sioclient.lib file from the SocketIO-cpp-lib project for both debug and release.</li>\n<li>Go to your project and link against the lib file. Also, provide the lib file path. </li>\n<li>Include the sioclient.h, siosocket.h, and siomessage.h file's directory to your include path.</li>\n<li>Include both the boost libraries path and boost libraries *.lib files to your project.</li>\n<li>You shouldn't have errors when including any of the Socket.io C++ header files in your project.</li>\n</ol>\n\n<p>Hope this helps anybody else with the same issue.</p>\n\n<p>Note: I also ran into another problem when building the sioclient.lib file. You might need to make an \"optimized\" and \"debug\" folder in one of the project folders. The CMAKE script incorrectly references folders that don't exist in the project. That, or delete those lines from the CMAKE script.</p>\n"}], "owner": {"reputation": 567, "user_id": 2466819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O9Le1.png?s=128&g=1", "display_name": "SaundersB", "link": "https://stackoverflow.com/users/2466819/saundersb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 42279581, "answer_count": 1, "score": 1, "last_activity_date": 1487262568, "creation_date": 1487202632, "question_id": 42262291, "link": "https://stackoverflow.com/questions/42262291/why-cant-i-import-header-files-to-a-library-in-one-of-my-header-files", "title": "Why can&#39;t I import header files to a library in one of my header files?", "body": "<p>I'm using the <a href=\"https://github.com/socketio/socket.io-client-cpp\" rel=\"nofollow noreferrer\">C++ socket.io library</a> in my C++ project, and I'm unable to include the required header files in my projects header file. </p>\n\n<p>But when I include the required header files in my CPP file, I am successfully able to include the required header files.</p>\n\n<p><strong>Steps taken to utilize the library:</strong></p>\n\n<ol>\n<li>Compile the C++ websocketpp, openssl, boost library, and prepare the JSON library.</li>\n<li>Link against the *.lib files in my VS2015 project. </li>\n<li>Include the header files location in the C++ additional include dependencies folder.</li>\n<li>Include the *.lib files location in the Linker include dependencies folder.</li>\n<li>Include the three header files in my CPP file.</li>\n<li>Build. Yay! It works!</li>\n<li>Attempt to encapsulate the libraries functionality into my own class/object.</li>\n<li>Attempt to include the three libraries header files in my header file. Notice a plethora of compilation errors about initializing.</li>\n</ol>\n\n<p><strong>Header File Import</strong></p>\n\n<pre><code>#include &lt;sio_message.h&gt;\n#include &lt;sio_socket.h&gt;\n#include &lt;sio_client.h&gt;\n</code></pre>\n\n<p><strong>Error when including header files within header file:</strong></p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State\nError   C2440   'initializing': cannot convert from 'nullptr' to 'const int &amp;'  c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2838   'function&lt;void __cdecl(sio::message::list const &amp;)&gt;': illegal qualified name in member declaration  c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2838   'function&lt;void __cdecl(sio::message::list const &amp;)&gt;': illegal qualified name in member declaration  c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2440   'initializing': cannot convert from 'nullptr' to 'const int &amp;'  c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2838   'list': illegal qualified name in member declaration    c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2838   'list': illegal qualified name in member declaration    c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2439   'sio::socket::ack': member could not be initialized     c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2439   'sio::socket::ack': member could not be initialized     c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2439   'sio::socket::msglist': member could not be initialized     c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2439   'sio::socket::msglist': member could not be initialized     c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2530   'sio::socket::name': references must be initialized     c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 96  \nError   C2530   'sio::socket::name': references must be initialized     c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 96  \nError   C2838   'string': illegal qualified name in member declaration      c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2838   'string': illegal qualified name in member declaration      c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C4430   missing type specifier - int assumed. Note: C++ does not support default-int        c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C4430   missing type specifier - int assumed. Note: C++ does not support default-int        c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2059   syntax error: ')'       c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2059   syntax error: ')'       c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2143   syntax error: missing ')' before 'const'        c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2143   syntax error: missing ')' before 'const'        c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2143   syntax error: missing ';' before 'const'        c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \nError   C2143   syntax error: missing ';' before 'const'        c:\\root\\src\\socket.io-client-cpp\\build\\include\\sio_socket.h 75  \n</code></pre>\n\n<p><strong>Possible Problems:</strong></p>\n\n<ol>\n<li>Shared Namespace? Maybe I'm propagating an incorrect namespace?</li>\n<li>Circular Dependencies? Maybe I'm causing a circular dependency by including the header files in my class, and one of the other header files are including that same file.</li>\n</ol>\n"}, {"tags": ["c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 3, "creation_date": 1487202426, "post_id": 42262239, "comment_id": 71682016, "body": "<code>N = (n + b - 1) &#47; b;</code> maybe?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487202608, "post_id": 42262239, "comment_id": 71682071, "body": "See <a href=\"https://stackoverflow.com/questions/2422712/\">C rounding integer division (instead of truncating)</a>"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1487202683, "post_id": 42262239, "comment_id": 71682096, "body": "See Jonathan Leffler&#39;s rounding up answer in the linked question."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487234051, "post_id": 42262239, "comment_id": 71693635, "body": "Aha... hmmmm... I ams dealing with an embedded system design here. No floating point unit. Truncation is ok. That is why I was adding 1."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487234157, "post_id": 42262239, "comment_id": 71693691, "body": "All numbers are unsigned"}], "owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1487202657, "answer_count": 0, "score": 1, "last_activity_date": 1487202295, "creation_date": 1487202295, "question_id": 42262239, "link": "https://stackoverflow.com/questions/42262239/is-there-a-more-compact-way-of-calculating-the-number-of-transactions-required", "closed_reason": "Duplicate", "title": "Is there a more compact way of calculating the number of transactions required?", "body": "<p>I need to calculate how many transactions are required to transmit n bytes. I can only read b bytes from the external hardware in a single transaction. The number of transactions is N. This pseudo-code seems sufficient:</p>\n\n<pre><code>If n=0 then\n  N=0 // 0 transactions needed as no data has to be transferred IN or OUT\nelse\n  if n%b then\n    N=n/b+1 // n is not wholly divisible by b, thus the (last) Nth transaction shall transfer less than b bytes\n  else\n    N=n/b // all N transactions shall transfer exactly b bytes\n  end if\nend if\n</code></pre>\n\n<p>My question is simply, is there a more compact way to do this? I am checking using modulus operator that n%b is nonzero since if I have to transfer 3 bytes and the buffer is 8 bytes, then 3/8 shall be 0 in int but the +1 shall take care of it giving 1 transaction.</p>\n"}, {"tags": ["c++", "rcpp"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 2, "creation_date": 1487201021, "post_id": 42261822, "comment_id": 71681553, "body": "It&#39;s a bug in your understanding.  You can only return back to R what can be mapped to a <code>SEXP</code>.  And <code>std::pair&lt;&gt;</code> cannot.  You could turn it into integer vectors, say."}, {"owner": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1487228498, "post_id": 42261822, "comment_id": 71690555, "body": "@DirkEddelbuettel But I don&#39;t want to return it back to R at all, that&#39;s why I use only <code>Rcpp::interfaces(cpp)</code>. As per my understanding, this creates a pure C++ Interface. I simply want to use some C++ functions in another package. If it is not feasible with <code>Rcpp::interfaces</code>, how do you do it then?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1487248207, "post_id": 42261822, "comment_id": 71704018, "body": "The use of <code>[[Rcpp::export]]</code> trigger the <code>Rcpp::as&lt;&gt;</code> which fails as there is no converter for <code>std::pair</code>.  It does not work this way.  The interface feature may work <i>on top</i> of an interface to R, not instead of.  Check the &#39;Rcpp Attributes&#39; vignette."}, {"owner": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1487248463, "post_id": 42261822, "comment_id": 71704214, "body": "@DirkEddelbuettel So is there a way of simply exposing all the .hpp and .cpp files of one package such that another package can include them, compiling everything itself?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1487249143, "post_id": 42261822, "comment_id": 71704702, "body": "You still think you have a misunderstanding of how R packages talk to each other -- see &quot;Writing R Extensions&quot; about that --- and too much optimism about how we should be able to change that."}, {"owner": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1487250490, "post_id": 42261822, "comment_id": 71705718, "body": "@DirkEddelbuettel So the only possible way of calling C++ functions of another package from C++ is via the R_RegisterCCallable/R_GetCCallable mechanism as specified in 5.4.2 of &quot;Writing R Extensions&quot;?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1487250644, "post_id": 42261822, "comment_id": 71705843, "body": "That is the documented and supported and portable and official way.  Which, by the way, Rcpp has nothing to do with, so you started in the wrong corner.  I make no claims as to exlusivity and presence/absence of other ways.  But I continue to point out to you that you have basic premises wrong with your question here.  Good luck, I think I stop here now."}], "answers": [{"comments": [{"owner": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "edited": false, "score": 0, "creation_date": 1487373130, "post_id": 42287094, "comment_id": 71772840, "body": "Thank you so much, this was precisely what is was looking for! I decided to first try the &quot;Easy way&quot;, to which I have a couple of follow-up questions. i) Calling the function ` hinterface::bla()` from the &quot;client&quot; works, but how do I call it from the <code>hinterface</code> package? I tried to <code>#include &quot;hinterfaces.h</code> in some other .cpp file in the src directory, but ran into a multiple definition problem then."}, {"owner": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "edited": false, "score": 0, "creation_date": 1487373333, "post_id": 42287094, "comment_id": 71772883, "body": "(ii) I would like to export <code>bla()</code> to R in the <code>hinterface</code> package with <code>&#47;&#47; [[Rcpp::export]]</code>, but this works only for files in the src directory. Is there another option or do I need to write a wrapper and put it into src? This is where I originally got to problem (i). (iii) In my real application, I&#39;m using the boost library. As the &quot;Easy way&quot; is header only, I guess that there is no other way than also do <code>&#47;&#47; [[Rcpp::depends(BH)]]</code> and <code>LinkingTo: BH</code> at the side of the client package? I suppose the &quot;hard way&quot; would solve this &quot;problem&quot;."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "reply_to_user": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "edited": false, "score": 0, "creation_date": 1487374945, "post_id": 42287094, "comment_id": 71773332, "body": "Re: <b>(i)</b> and <b>(ii)</b>, exporting a function to R named <code>bla</code> can be done as in the second function <a href=\"https://gist.github.com/nathan-russell/8c7164504459318e01804261469d4f8e#file-hinterface-cpp\" rel=\"nofollow noreferrer\">here</a>; just give it a dummy name in the .cpp file (e.g. <code>bla_</code>), and tag it with <code>&#47;&#47; [[Rcpp::export(&quot;bla&quot;)]]</code> instead of <code>&#47;&#47; [[Rcpp::export]]</code>, which by default names the R function the same as the C++ function. For <b>(iii)</b>, it would depend on the specific library -- some Boost libraries are header only and some aren&#39;t. Which one are you using?"}, {"owner": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "edited": false, "score": 0, "creation_date": 1487421802, "post_id": 42287094, "comment_id": 71784205, "body": "Awesome, I had to lear the hard way that the <code>inline</code> keyword is mandatory for functions defined in header files, but now everything seems to work! To your question, the boost library is <code>#include &lt;boost&#47;math&#47;tools&#47;roots.hpp&gt; </code>."}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1501311512, "post_id": 42287094, "comment_id": 77733565, "body": "Is it okay to use <code>inline</code> for large functions?"}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1501319481, "post_id": 42287094, "comment_id": 77735728, "body": "It&#39;s just a hint. The compiler is free to ignore it."}], "tags": [], "owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "is_accepted": true, "score": 5, "last_activity_date": 1487291041, "last_edit_date": 1495542724, "creation_date": 1487290113, "answer_id": 42287094, "question_id": 42261822, "link": "https://stackoverflow.com/questions/42261822/c-interface-with-rcppinterfaces-not-working-for-a-function-returning-stdpa/42287094#42287094", "title": "C++ interface with Rcpp::interfaces not working for a function returning std::pair", "body": "<blockquote>\n  <p>However, the compiler throws a shitload of errors, starting with: </p>\n\n<pre><code>.../Rcpp/include/Rcpp/internal/Exporter.h:31:31: error: no matching\nfunction for call to \u2018std::pair&lt;int, int&gt;::pair(SEXPREC*&amp;)\u2019\n   Exporter( SEXP x ) : t(x){}\n</code></pre>\n</blockquote>\n\n<p>As pointed out by Dirk, this error (and generally any error citing <strong>Exporter.h</strong> or <strong>wrap.h</strong>) was triggered by the use of the <code>// [[Rcpp::export]]</code> attribute, which (attempts) to generate the appropriate boilerplate code needed to turn the <code>std::pair&lt;int, int&gt;</code> into something that R knows how to handle (i.e., some type of <code>SEXP</code>). </p>\n\n<p>Based on your comment </p>\n\n<blockquote>\n  <p>But I don't want to return it back to R at all [...]</p>\n</blockquote>\n\n<p>you are in a good situation because this means you won't have to go through the trouble of writing a converter function that handles <code>std::pair&lt;int, int&gt;</code> -- simply remove the <code>// [[Rcpp::export]]</code> declaration, and that will take care of the above error message. </p>\n\n<hr>\n\n<p>On to the meat of the problem, </p>\n\n<blockquote>\n  <p>I simply want to use some C++ functions in another package </p>\n</blockquote>\n\n<p>I can propose two approaches for you, and incidentally, <em>neither of them use the <code>// [[Rcpp::interfaces]]</code> attribute.</em> </p>\n\n<hr>\n\n<h3>The Easy Way</h3>\n\n<p>I assume the example you provided is a simplification of your actual use case, but if at all possible, <strong>do everything in your power to provide a header-only interface</strong>. While there are potential drawbacks to this  approach (e.g. discussed <a href=\"https://stackoverflow.com/questions/12671383/benefits-of-header-only-libraries\">in this question</a>), it will greatly simplify what you are trying to do, and IMO, this far outweighs the cost of an extra couple of minutes of compilation time. If you were planning on providing an interface of strictly template classes and / or functions then life is good, because this would be your only option anyways. </p>\n\n<p>To demonstrate, consider the following directory structure for the interface package: </p>\n\n<pre><code># nathan@nathan-deb:/tmp$ tree hinterface/\n# hinterface/\n# \u251c\u2500\u2500 DESCRIPTION\n# \u251c\u2500\u2500 inst\n# \u2502\u00a0\u00a0 \u2514\u2500\u2500 include\n# \u2502\u00a0\u00a0     \u251c\u2500\u2500 hinterface\n# \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 hinterface.hpp\n# \u2502\u00a0\u00a0     \u2514\u2500\u2500 hinterface.h\n# \u251c\u2500\u2500 NAMESPACE\n# \u251c\u2500\u2500 R\n# \u2514\u2500\u2500 src\n#     \u251c\u2500\u2500 hinterface.cpp\n#     \u251c\u2500\u2500 Makevars\n#     \u2514\u2500\u2500 Makevars.win\n</code></pre>\n\n<p>You begin by creating the directories <code>inst/</code> and <code>inst/include/</code>, as this will cause R to copy the header file <code>hinterface.h</code> into the <code>hinterface</code> library directory when the package is installed on a user's  machine. Additionally, I've created <code>inst/include/hinterface/</code>, and <code>hinterface.hpp</code>, which contains the implementation:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef hinterface__hinterface__hpp\n#define hinterface__hinterface__hpp\n\n#include &lt;Rcpp.h&gt;\n#include &lt;utility&gt;\n\nnamespace hinterface {\n\ninline std::pair&lt;int, int&gt; bla()\n{ return std::make_pair(1, 1); }\n\n} // hinterface\n\n#endif // hinterface__hinterface__hpp\n</code></pre>\n\n<p>This is not strictly necessary, but it is a reasonable convention to follow, especially if you have many header files. Moving back up one level, the <code>hinterface.h</code> file -- which clients will actually include in their source code -- contains this: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef hinterface__hinterface__h\n#define hinterface__hinterface__h\n\n#include \"hinterface/hinterface.hpp\"\n// possibly other\n// header files\n// to include\n\n#endif // hinterface__hinterface__h\n</code></pre>\n\n<p>In the <code>src/</code> directory, create a <code>Makevars</code> and <code>Makevars.win</code>, each containing </p>\n\n<pre><code>PKG_CPPFLAGS = -I../inst/include\n</code></pre>\n\n<p>and any other necessary compiler options you may need to set. Finally, I've added a dummy source file just to enable the package to build, but if you were actually exporting one or more C++ functions this would not be necessary: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"hinterface.h\"\n\nvoid noop() { return; }\n</code></pre>\n\n<hr>\n\n<p>In the package <code>hclient</code>, which will be calling <code>bla</code> from the <code>hinterface</code> package, things are even simpler: </p>\n\n<pre><code># nathan@nathan-deb:/tmp$ tree hclient/\n# hclient/\n# \u251c\u2500\u2500 DESCRIPTION\n# \u251c\u2500\u2500 NAMESPACE\n# \u251c\u2500\u2500 R\n# \u2514\u2500\u2500 src\n#     \u251c\u2500\u2500 hclient.cpp\n</code></pre>\n\n<p>All a user needs to do (assuming the packages was generated from R via <code>Rcpp::Rcpp.package.skeleton</code>) add <code>hinterface</code> to the <code>LinkingTo</code> field in the <code>DESCRIPTION</code> file, </p>\n\n<pre><code>LinkingTo: Rcpp,\n    hinterface\n</code></pre>\n\n<p>add a call to the <code>// [[Rcpp::depends(hinterface)]]</code> attribute in their source file, and include <code>hinterface.h</code>: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// hclient.cpp\n// [[Rcpp::depends(hinterface)]]\n#include &lt;Rcpp.h&gt;\n#include &lt;hinterface.h&gt;\n\n// [[Rcpp::export]]\nvoid call_bla()\n{\n    std::pair&lt;int, int&gt; x = hinterface::bla();\n    std::printf(\n        \"x.first = %d\\nx.second = %d\\n\",\n        x.first, x.second\n    );\n}\n</code></pre>\n\n<p>Building this package, we can see that it works as expected by calling it from R: </p>\n\n<pre><code>hclient::call_bla()\n# x.first = 1\n# x.second = 1\n</code></pre>\n\n<hr>\n\n<h3>The Hard Way</h3>\n\n<p>In this approach, since you will truly only be providing an interface in your header files (and thus code in client packages will need to <em>link</em> to the implementation), you will need to jump through hoops to appease the linker, which is never a fun time. Futhermore, it places more of a burden on the client package than before, although you can mitigate this to some degree as shown later.  </p>\n\n<p>Without further ado, <code>interface</code> is laid out like this: </p>\n\n<pre><code># nathan@nathan-deb:/tmp$ tree interface/\n# interface/\n# \u251c\u2500\u2500 DESCRIPTION\n# \u251c\u2500\u2500 inst\n# \u2502\u00a0\u00a0 \u2514\u2500\u2500 include\n# \u2502\u00a0\u00a0     \u2514\u2500\u2500 interface.h\n# \u251c\u2500\u2500 NAMESPACE\n# \u251c\u2500\u2500 R\n# \u2502\u00a0\u00a0 \u2514\u2500\u2500 libpath.R\n# \u2514\u2500\u2500 src\n#     \u251c\u2500\u2500 bla.cpp\n#     \u251c\u2500\u2500 Makevars\n#     \u2514\u2500\u2500 Makevars.win\n</code></pre>\n\n<p>Since we are no longer implementing <code>bla</code> in a <code>*.hpp</code> or <code>*.h</code> file, the interface header, <code>interface.h</code>, will only contain a function prototype: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef interface__interface__h\n#define interface__interface__h\n\n#include &lt;Rcpp.h&gt;\n#include &lt;utility&gt;\n\nnamespace interface {\n\nstd::pair&lt;int, int&gt; bla();\n\n} // interface\n\n#endif // interface__interface__h\n</code></pre>\n\n<p>As before, <code>Makevars</code> and <code>Makevars.win</code> simply contain <code>PKG_CPPFLAGS = -I../inst/include</code> (and other flags you may need to set). <code>bla.cpp</code> is pretty straight forward, and just contains the appropriate implementation: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"interface.h\"\n\nnamespace interface {\n\nstd::pair&lt;int, int&gt; bla()\n{ return std::make_pair(1, 1); }\n\n} // interface\n</code></pre>\n\n<p>As alluded to, client packages will need to link their code to <code>interface</code> in order to actually <em>use</em> <code>bla()</code> -- and by linking to I don't mean <em>just</em> adding <code>interface</code> to the <code>LinkingTo</code> field in the <code>DESCRIPTION</code> file, which ironically has nothing to do with the linking phase in compilation. Failure to do this -- e.g. <em>only</em> including the header <code>interface.h</code> -- will cause <code>R CMD INSTALL</code> to halt, as it will fail to find the appropriate symbols when it attempts to load the client package. This can be a very frustrating error for users to deal with. Fortunately, you can help make things easier by providing something like the following function, which generates the location of the <code>interface</code> shared library: </p>\n\n<pre class=\"lang-r prettyprint-override\"><code># libpath.R\n.libpath &lt;- function() {\n    cat(sprintf(\n        \"%s/interface/libs/interface%s\",\n        installed.packages()[\"interface\",\"LibPath\"][1],\n        .Platform$dynlib.ext\n    ))\n}\n</code></pre>\n\n<p>I named this beginning with a <code>.</code> so that it would not be exported (by default) and thus not require being documented. If you intended for people to uses your C++ interface in their own packages, you should export the function and document it appropriately so that they understand how to use it. The path it returns will depending entirely on the specific R installation it is called from (necessarily), but on my Linux machine it looks like this: </p>\n\n<pre><code>interface:::.libpath()\n# /home/nathan/R/x86_64-pc-linux-gnu-library/3.4/interface/libs/interface.so\n</code></pre>\n\n<p>Moving on to the aptly named <code>client</code> package, </p>\n\n<pre><code># nathan@nathan-deb:/tmp$ tree client/\n# client/\n# \u251c\u2500\u2500 DESCRIPTION\n# \u251c\u2500\u2500 NAMESPACE\n# \u251c\u2500\u2500 R\n# \u2514\u2500\u2500 src\n#     \u251c\u2500\u2500 client.cpp\n#     \u251c\u2500\u2500 Makevars\n#     \u251c\u2500\u2500 Makevars.win\n</code></pre>\n\n<p>The <code>DESCRIPTION</code> file again needs </p>\n\n<pre><code>LinkingTo: Rcpp,\n        interface\n</code></pre>\n\n<p>so that the header file is located correctly. The source file, <code>client.cpp</code>, looks like this: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// [[Rcpp::depends(interface)]]\n#include &lt;Rcpp.h&gt;\n#include &lt;interface.h&gt;\n\n// [[Rcpp::export]]\nvoid call_bla()\n{\n    std::pair&lt;int, int&gt; x = interface::bla();\n    std::printf(\n        \"x.first = %d\\nx.second = %d\\n\",\n        x.first, x.second\n    );\n}\n</code></pre>\n\n<p>This is no different than the source file in the <code>hclient</code> package. Where things get interesting is in <code>Makevars</code> and <code>Makevars.win</code>, which now contain </p>\n\n<pre><code>PKG_LIBS += `${R_HOME}/bin/Rscript -e \"cat(interface:::.libpath())\"`\n</code></pre>\n\n<p>Here we are using the helper function defined in the <code>interface</code> package to make sure the appropriate symbols are available to the linker. Building this and testing it out from R, </p>\n\n<pre><code>client::call_bla()\n# x.first = 1\n# x.second = 1\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 1934, "user_id": 4477223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b43bfabaa11289da8b265e98e90f460?s=128&d=identicon&r=PG&f=1", "display_name": "NoBackingDown", "link": "https://stackoverflow.com/users/4477223/nobackingdown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 2, "accepted_answer_id": 42287094, "answer_count": 1, "score": 1, "last_activity_date": 1487291092, "creation_date": 1487200080, "last_edit_date": 1487291092, "question_id": 42261822, "link": "https://stackoverflow.com/questions/42261822/c-interface-with-rcppinterfaces-not-working-for-a-function-returning-stdpa", "title": "C++ interface with Rcpp::interfaces not working for a function returning std::pair", "body": "<p>I would like to provide a C++ interface for a function within a package which return <code>std::pair</code> using <code>Rcpp::interface</code>. However, the compiler throws a shitload of errors, starting with:</p>\n\n<pre><code>.../Rcpp/include/Rcpp/internal/Exporter.h:31:31: error: no matching\nfunction for call to \u2018std::pair&lt;int, int&gt;::pair(SEXPREC*&amp;)\u2019\n   Exporter( SEXP x ) : t(x){}\n</code></pre>\n\n<p>Here is a simple example: </p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n#include &lt;utility&gt;\n\n// [[Rcpp::interfaces(cpp)]]\n\n// [[Rcpp::export]]\nstd::pair&lt;int, int&gt; bla()\n{\n  return std::make_pair(1,1);\n}\n</code></pre>\n\n<p>The generated code for this example function looks like:</p>\n\n<pre><code>inline std::pair&lt;int, int&gt; bla() {\n    typedef SEXP(*Ptr_bla)();\n    static Ptr_bla p_bla = NULL;\n    if (p_bla == NULL) {\n        validateSignature(\"std::pair&lt;int, int&gt;(*bla)()\");\n        p_bla = (Ptr_bla)R_GetCCallable(\"testinclude\", \"testinclude_bla\");\n    }\n    RObject rcpp_result_gen;\n    {\n        RNGScope RCPP_rngScope_gen;\n        rcpp_result_gen = p_bla();\n    }\n    if (rcpp_result_gen.inherits(\"interrupted-error\"))\n        throw Rcpp::internal::InterruptedException();\n    if (rcpp_result_gen.inherits(\"try-error\"))\n        throw Rcpp::exception(as&lt;std::string&gt;(rcpp_result_gen).c_str());\n    return Rcpp::as&lt;std::pair&lt;int, int&gt; &gt;(rcpp_result_gen);\n}\n</code></pre>\n\n<p>Is this a bug or what is going wrong here?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1487199264, "post_id": 42261619, "comment_id": 71680921, "body": "Same way you did in your constructor? Sorry, but I don&#39;t get the question."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1487199273, "post_id": 42261619, "comment_id": 71680930, "body": "How did you use it in the constructor?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1487199378, "post_id": 42261619, "comment_id": 71680974, "body": "isEmpty is a member function of the Fraction class and so all the member variables/functions are accessible."}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 3, "last_activity_date": 1487200804, "last_edit_date": 1487200804, "creation_date": 1487199356, "answer_id": 42261669, "question_id": 42261619, "link": "https://stackoverflow.com/questions/42261619/accessing-value-from-constructor/42261669#42261669", "title": "Accessing Value from constructor", "body": "<p>Just like this:</p>\n\n<pre><code>bool Fraction::isEmpty() const\n{\n    return denom == -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7218356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c3d378cb452c42288522f4990810?s=128&d=identicon&r=PG&f=1", "display_name": "user7218356", "link": "https://stackoverflow.com/users/7218356/user7218356"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1487199924, "answer_count": 1, "score": -8, "last_activity_date": 1487200804, "creation_date": 1487199136, "last_edit_date": 1487199707, "question_id": 42261619, "link": "https://stackoverflow.com/questions/42261619/accessing-value-from-constructor", "closed_reason": "Needs details or clarity", "title": "Accessing Value from constructor", "body": "<p>In my isEmpty function I want to check to see if the object is in the safe empty state and if so return true. The safe empty  occurs when denom = -1 which I declared in a constructor right above the function. How do I access this?\nEDIT: apologies, I misread the line error. I miss used denom on a different line and I fixed the error. Sorry for wasting your time :(</p>\n\n<pre><code> using namespace std;\n\nnamespace sict{\n\nclass Fraction{\nprivate:\n    int num;                // Numerator\n    int denom;            // Denominator\n    int gcd();            // returns the greatest common divisor of num and denom\n\n\n  int max();        // returns the maximum of num and denom\n  int min();        // returns the minimum of num and denom\n\npublic:\n    void reduce();     // simplifies a Fraction number by dividing the \n                      // numerator and denominator to their greatest common divisor \n    Fraction();                             // default constructor\n    Fraction(int n , int d=1);               // construct n/d as a Fraction number\n    void display() const;    \n    bool isEmpty() const;\n };\n};\n</code></pre>\n\n<p>**Implementation*</p>\n\n<pre><code>#include \"Fraction.h\"\n\nusing namespace std;\n\nnamespace sict\n{\n  Fraction::Fraction()\n  {  \n        denom =-1;              // safe empty state\n\n  }\n bool Fraction::isEmpty() const\n {\n\n //How do I access denom\n }\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 2, "last_activity_date": 1487265929, "last_edit_date": 1487265929, "creation_date": 1487204882, "answer_id": 42262658, "question_id": 42261596, "link": "https://stackoverflow.com/questions/42261596/how-to-create-a-group-of-ui-elements-that-you-are-able-to-iterate-through/42262658#42262658", "title": "How to create a group of UI elements that you are able to iterate through", "body": "<p>What you've done works, and assuming English, since the number of possible letters is likely fixed at 26 (unless you're allowing non alphabetical characters for some reason), there's really nothing wrong with it. It's only problematic if the number of labels is variable or huge, and neither situation seems to be the case here.</p>\n\n<p>What you can also do is use the <code>findChildren</code> method, and there are several variations on that. The easiest one is if all of your labels are parented to the same widget and there are no other <code>QLabel</code> instances under that same parent:</p>\n\n<pre><code>QList &lt;QLabel *&gt; parent-&gt;findChildren &lt;QLabel *&gt; ();\n</code></pre>\n\n<p>Otherwise, you'd probably need to use the variation that accepts a regular expression to match child names:</p>\n\n<pre><code>QList &lt;QLabel *&gt; parent-&gt;findChildren &lt;QLabel *&gt; (QRegExp (\"^label_\"));\n</code></pre>\n\n<p>Note that the order in both cases may not be what you want for populating your labels with the chosen letters. The documentation doesn't say, but I believe the order that's returned reflects the order that the children were created in. Since you created them in Qt Designer, that order may not be reliable; for instance, if you missed number 12 in the middle and added it after the others, then label_12 will be last in the list. That may or may not matter depending on the rest of your approach. If you need your list to be in the order of label 0, label 1, and so forth, then your current mechanism is probably what you want.</p>\n\n<p>It seems brute force, and it is, but sometimes that's perfectly acceptable.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1487272968, "creation_date": 1487272968, "answer_id": 42282860, "question_id": 42261596, "link": "https://stackoverflow.com/questions/42261596/how-to-create-a-group-of-ui-elements-that-you-are-able-to-iterate-through/42282860#42282860", "title": "How to create a group of UI elements that you are able to iterate through", "body": "<p>Starting with the code you have, let's fix it so that it has a correct method signature, and so that it compiles:</p>\n\n<pre><code>/// Returns the number of newly matched letters.\nint Hangman0::check_input(QChar input) {\n   int matched{};\n   std::array&lt;QLabel*, 5&gt; visible_word = {ui-&gt;label_0, ui-&gt;label_1,ui-&gt;label_2, ui-&gt;label_3,ui-&gt;label_4};\n   for (int i{}; i &lt; current_word.length(); i++) {\n      auto const ch = current_word.at(i);\n      if (input == ch &amp;&amp; visible_word[i]-&gt;text() != ch) {\n         visible_word[i]-&gt;setText(ch);\n         ++ matched;\n      }\n   }\n   return matched;\n}\n</code></pre>\n\n<p>But there's little point to enumerating those Ui elements manually, nor to manually inserting them into the layout in the Ui file. Instead, leave the Ui file with an empty layout, and insert the elements programmatically as needed. First, let's approximate the uic output from a minimal <code>.ui</code> file:</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/hangman-42261596\n#include &lt;QtWidgets&gt;\n#include &lt;forward_list&gt;\n\nnamespace Ui { // Approximate uic output\nstruct Hangman {\n   QFormLayout * topLayout;\n   QHBoxLayout * lettersLayout;\n   QLineEdit * letterEntry;\n   QPushButton * setup;\n   void setupUi(QWidget * widget) {\n      topLayout = new QFormLayout{widget};\n      topLayout-&gt;addRow(lettersLayout = new QHBoxLayout);\n      topLayout-&gt;addRow(\"Guess\", letterEntry = new QLineEdit);\n      letterEntry-&gt;setMaxLength(1);\n      topLayout-&gt;addRow(setup = new QPushButton{\"Setup\"});\n   }\n};\n}\n</code></pre>\n\n<p>Then, let's design a basic <code>Hangman</code> game widget. We can keep the letter labels by value in a <code>std::forward_list</code> - this makes life relatively easy and we don't have to deal with explicit memory management of any kind.</p>\n\n<pre><code>class Hangman : public QWidget {\n   Q_OBJECT\n   Ui::Hangman ui;\n   QString m_currentWord;\n   std::forward_list&lt;QLabel&gt; m_letters;\npublic:\n   explicit Hangman(QWidget * parent = nullptr) :\n      QWidget{parent}\n   {\n      ui.setupUi(this);\n      connect(ui.letterEntry, &amp;QLineEdit::returnPressed, [this]{\n         auto const text = ui.letterEntry-&gt;text();\n         if (!text.isEmpty())\n            checkInput(text[0]);\n      });\n      connect(ui.setup, &amp;QPushButton::clicked, [this]{\n         setWord(QInputDialog::getText(this, \"Setup\", \"Secret word:\",\n                                       QLineEdit::Normal, m_currentWord)); // a hack\n      });\n      setWord(\"Hello\");\n   }\n   void setWord(const QString &amp; word) {\n      m_currentWord = word.toUpper();\n      m_letters.clear();\n      auto letter = m_letters.before_begin();\n      for (int i{}; i &lt; word.size(); ++i) {\n         letter = m_letters.emplace_after(letter);\n         letter-&gt;setFrameShape(QFrame::Box);\n         ui.lettersLayout-&gt;addWidget(&amp;*letter);\n      }\n   }\n   int checkInput(QChar input) {\n      int matched{};\n      input = input.toUpper();\n      auto letter = m_letters.begin();\n      for (int i{}; i &lt; m_currentWord.size(); ++i) {\n         if (m_currentWord.at(i) == input) {\n            letter-&gt;setText(input);\n            matched ++;\n         }\n         letter ++;\n      }\n      return matched;\n   }\n};\n\nint main(int argc, char ** argv) {\n   QApplication app{argc, argv};\n   Hangman hangman;\n   hangman.show();\n   return app.exec();\n}\n#include \"main.moc\"\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5808700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a49aa2f16a76d8494a3f771778b482a3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Shears", "link": "https://stackoverflow.com/users/5808700/a-shears"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 42282860, "answer_count": 2, "score": 1, "last_activity_date": 1487272968, "creation_date": 1487198997, "question_id": 42261596, "link": "https://stackoverflow.com/questions/42261596/how-to-create-a-group-of-ui-elements-that-you-are-able-to-iterate-through", "title": "How to create a group of UI elements that you are able to iterate through", "body": "<p>I have an application I am making as a project for a class, which contains the game hangman and others.<br> \nI have a Line Edit input field for the user to guess a letter. This input is restricted to 1 letter. <br>\n I want to have a for loop that checks if the users input matches any letters from the games target word, and if it does it places that letter on the screen. <br>\nI have a bunch of labels that I plan on putting a single letter in, each arranged to correspond with the letters placement in the correct word string.<br>\n<b>How do I put a qt ui elements into a data structure so that I can access them in a for loop?</b> <br>\nHere is some code I tried after looking online, to give you an idea of what I'm trying to do.</p>\n\n<pre><code>int Hangman::check_input(QString input){\n\n    QList&lt;QObject *&gt; visible_word = {ui-&gt;label_0, ui-&gt;label_1,ui-&gt;label_2, ui-&gt;label_3,ui-&gt;label_4};\n    int i;\n    for (i = 0; i &lt; current_word.length(); i++){\n        if (input == current_word[i]){\n            ui-&gt;visible_word[i]-&gt;text() == current_word[i];\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "opengl", "qml"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7571483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd105eec8110cd5380409de3d0459ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eagle13559", "link": "https://stackoverflow.com/users/7571483/eagle13559"}, "is_accepted": true, "score": 0, "last_activity_date": 1487611105, "creation_date": 1487611105, "answer_id": 42350660, "question_id": 42261472, "link": "https://stackoverflow.com/questions/42261472/segfault-on-gldrawarrays-when-combining-opengl-and-qml/42350660#42350660", "title": "Segfault on glDrawArrays when combining OpenGl and QML", "body": "<p>The paint function should be written as follows to preserve state and prevent segfaults on drawing:</p>\n\n<pre><code>    if (!program) initializeGL();\n    program-&gt;bindAttributeLocation(\"vertex\", PROGRAM_VERTEX_ATTRIBUTE);\n    program-&gt;bindAttributeLocation(\"texCoord\", PROGRAM_TEXCOORD_ATTRIBUTE);\n    if (!program-&gt;bind()) std::cerr &lt;&lt; \"Error: Program failed to bind\\n\";\n    texture-&gt;bind();\n    vbo.bind();\n\n    glClearColor(_clearColor.redF(), _clearColor.greenF(), _clearColor.blackF(), _clearColor.alphaF());\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glViewport(viewportPosition.x(), viewportPosition.y(), viewportSize.width(), viewportSize.height());\n\n    QMatrix4x4 m;\n    m.ortho(0.0f, 1.0f, 1.0f, 0.0f, 4.0f, 15.0f);\n    m.translate(0.0f, 0.0f, -10.0f);\n    program-&gt;setUniformValue(\"matrix\", m);\n    program-&gt;setUniformValue(\"texture\", 0);\n\n    program-&gt;enableAttributeArray(PROGRAM_VERTEX_ATTRIBUTE);\n    program-&gt;enableAttributeArray(PROGRAM_TEXCOORD_ATTRIBUTE);\n    program-&gt;setAttributeBuffer(PROGRAM_VERTEX_ATTRIBUTE, GL_FLOAT, 0, 3, 5 * sizeof(GLfloat));\n    program-&gt;setAttributeBuffer(PROGRAM_TEXCOORD_ATTRIBUTE, GL_FLOAT, 3 * sizeof(GLfloat), 2, 5 * sizeof(GLfloat));\n\n    glDrawArrays(GL_TRIANGLE_FAN, 0, 4);\n\n    program-&gt;disableAttributeArray(PROGRAM_VERTEX_ATTRIBUTE);\n    program-&gt;disableAttributeArray(PROGRAM_TEXCOORD_ATTRIBUTE);\n    program-&gt;disableAttributeArray(0);\n    program-&gt;release();\n    texture-&gt;release();\n    vbo.release();\n    _window-&gt;resetOpenGLState();\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7571483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd105eec8110cd5380409de3d0459ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eagle13559", "link": "https://stackoverflow.com/users/7571483/eagle13559"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 42350660, "answer_count": 1, "score": 0, "last_activity_date": 1487611105, "creation_date": 1487198489, "last_edit_date": 1487199252, "question_id": 42261472, "link": "https://stackoverflow.com/questions/42261472/segfault-on-gldrawarrays-when-combining-opengl-and-qml", "title": "Segfault on glDrawArrays when combining OpenGl and QML", "body": "<p>I'm trying to write an application which renders a texture via OpenGL into a QML item. After searching online and trying various things, (felt like a lot of guessing, I have a very limited understanding of OpenGl,) I eventually ran the program through Valgrind and discovered an illegal memory access, meaning I'm not initializing everything needed for the OpenGl to draw correctly. I was hoping someone could look at my rough code and tell me which step I'm forgetting. </p>\n\n<p>I tried to follow and combine the two tutorials in the QT docs, this one (<a href=\"http://doc.qt.io/qt-5/qtquick-scenegraph-openglunderqml-example.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtquick-scenegraph-openglunderqml-example.html</a>) which shows QML and OpenGl, as well as this one (<a href=\"http://doc.qt.io/qt-5/qtopengl-textures-example.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtopengl-textures-example.html</a>) which shows how to render a texture using OpenGl and QT. I altered it slightly because my texture was only a 2 dimensional image I wish to display. I was able to successfully follow the latter, rendering my texture to a viewport and drawing it on screen, unfortunately when attempting to integrate QML things went downhill. </p>\n\n<p>My paint function is as follows:</p>\n\n<pre><code>    void glViewer::paint()\n    {\n        // program is type QOpenGLShaderProgram *\n        if (!program) initializeGL();\n        if (!program-&gt;bind()) std::cerr &lt;&lt; \"Error: Program failed to bind\\n\";\n\n        glViewport(0, 0, _viewportSize.width(), _viewportSize.height());\n        glClearColor(clearColor.redF(), clearColor.greenF(), clearColor.blackF(), clearColor.alphaF());\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n        QMatrix4x4 m;\n        m.ortho(0.0f, 1.0f, 1.0f, 0.0f, 4.0f, 15.0f);\n        m.translate(0.0f, 0.0f, -10.0f);\n        program-&gt;setUniformValue(\"matrix\", m);\n\n        program-&gt;enableAttributeArray(PROGRAM_VERTEX_ATTRIBUTE);\n        program-&gt;enableAttributeArray(PROGRAM_TEXCOORD_ATTRIBUTE);\n\n        program-&gt;setAttributeBuffer(PROGRAM_VERTEX_ATTRIBUTE, GL_FLOAT, 0, 3, 5 * sizeof(GLfloat));\n        program-&gt;setAttributeBuffer(PROGRAM_TEXCOORD_ATTRIBUTE, GL_FLOAT, 3 * sizeof(GLfloat), 2, 5 * sizeof(GLfloat));\n\n        texture-&gt;bind();\n\n        glDrawArrays(GL_TRIANGLE_FAN, 0, 4);\n\n        program-&gt;disableAttributeArray(PROGRAM_VERTEX_ATTRIBUTE);\n        program-&gt;disableAttributeArray(PROGRAM_TEXCOORD_ATTRIBUTE);\n        program-&gt;release();\n        // _window refers the QQuickWindow generated by the QApplication\n        _window-&gt;resetOpenGLState();\n    }\n</code></pre>\n\n<p>The first line calls intializeGL() if there is no shader program, which is where I believe the issue is. The function is defined as followed:</p>\n\n<pre><code>    void glViewer::initializeGL()\n    {\n        initializeOpenGLFunctions();\n\n        texture = new QOpenGLTexture(QOpenGLTexture::Target2D);\n        texture-&gt;setSize(imageDisplayResolution.x,imageDisplayResolution.y,1);\n        texture-&gt;setMinMagFilters(QOpenGLTexture::Nearest, QOpenGLTexture::Nearest);\n        texture-&gt;setWrapMode(QOpenGLTexture::ClampToBorder);\n        texture-&gt;setFormat(QOpenGLTexture::TextureFormat::R32F);\n        texture-&gt;allocateStorage(QOpenGLTexture::Luminance, QOpenGLTexture::Float32);\n        if (!texture-&gt;isStorageAllocated()) std::cerr &lt;&lt; \"Error: Failed to allocate texture!\\n\";\n\n        QVector&lt;GLfloat&gt; vertData;\n\n        // vertex position \n        vertData.append(0);\n        vertData.append(0);\n        vertData.append(0);\n        // texture coordinate\n        vertData.append(0);\n        vertData.append(0);\n\n        // vertex position \n        vertData.append(0);\n        vertData.append(1);\n        vertData.append(0);\n        // texture coordinate\n        vertData.append(0);\n        vertData.append(1);\n\n        // vertex position \n        vertData.append(1);\n        vertData.append(1);\n        vertData.append(0);\n        // texture coordinate\n        vertData.append(1);\n        vertData.append(1);\n\n        // vertex position \n        vertData.append(1);\n        vertData.append(0);\n        vertData.append(0);\n        // texture coordinate\n        vertData.append(1);\n        vertData.append(0);\n\n        vbo.create();\n        if (!vbo.bind()) std::cerr &lt;&lt; \"Error: VBO bind has failed\\n\";\n        vbo.allocate(vertData.constData(), vertData.count() * sizeof(GLfloat));\n\n        // Enable or disable server-side GL capabilities.\n        glEnable(GL_DEPTH_TEST);\n        glEnable(GL_CULL_FACE);\n\n    #define PROGRAM_VERTEX_ATTRIBUTE 0\n    #define PROGRAM_TEXCOORD_ATTRIBUTE 1\n\n        program = new QOpenGLShaderProgram;\n        if (!program-&gt;addShaderFromSourceCode(QOpenGLShader::Vertex,\n                                       \"attribute highp vec4 vertex;\\n\"\n                                        \"attribute mediump vec4 texCoord;\\n\"\n                                        \"varying mediump vec4 texc;\\n\"\n                                        \"uniform mediump mat4 matrix;\\n\"\n                                        \"void main(void)\\n\"\n                                        \"{\\n\"\n                                        \"    gl_Position = matrix * vertex;\\n\"\n                                        \"    texc = texCoord;\\n\"\n                                        \"}\\n\")) { std::cerr &lt;&lt; \"Error: Vertex shader failed to compile!\\n\"; }\n        if (!program-&gt;addShaderFromSourceCode(QOpenGLShader::Fragment,\n                                       \"uniform sampler2D texture;\\n\"\n                                        \"varying mediump vec4 texc;\\n\"\n                                        \"void main(void)\\n\"\n                                        \"{\\n\"\n                                        \"    gl_FragColor = texture2D(texture, texc.st).rrra;\\n\"\n                                        \"}\\n\")) { std::cerr &lt;&lt; \"Error: Fragment shader failed to compile!\\n\"; }\n        // Binds the attribute name to the specified location.\n        program-&gt;bindAttributeLocation(\"vertex\", PROGRAM_VERTEX_ATTRIBUTE);\n        program-&gt;bindAttributeLocation(\"texCoord\", PROGRAM_TEXCOORD_ATTRIBUTE);\n\n        if (!program-&gt;link()) std::cerr &lt;&lt; \"Error: Program shaders failed to link\\n\";\n        if (!program-&gt;bind()) std::cerr &lt;&lt; \"Error: Program failed to bind\\n\";\n        program-&gt;setUniformValue(\"texture\", 0);\n    }\n</code></pre>\n\n<p>paint() is a slot connect to the QQuickWindow::beforeRendering signal. Stepping through with a debugger tells me all pointers, (texture, program) are not null when paint() is called. None of the OpenGL calls throw errors, the program simply segfaults in paint() on glDrawArrays.</p>\n\n<p>Thanks!</p>\n\n<p>Edit: further debugging has taught me it is successfully going through the paint function once, it's on the second pass that it fails. However, I never see the fully drawn texture, just the application background is filled in.</p>\n"}, {"tags": ["c++", "opencv", "opencv3.0"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1487199615, "post_id": 42261401, "comment_id": 71681073, "body": "Hi David! I think I spotted the bug. I&#39;ll drop an email to the author of the algorithm to see if he has further insights"}], "answers": [{"comments": [{"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 1, "creation_date": 1487200918, "post_id": 42261700, "comment_id": 71681508, "body": "I wish I could give +5 :) This was causing serious headaches today."}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1487254130, "post_id": 42261700, "comment_id": 71708615, "body": "I used both electric fence and valgrind (one at a time) and actually with both it did NOT crash in the case I indicated as &quot;crashes&quot;. How else would you track down something like this?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1487254337, "post_id": 42261700, "comment_id": 71708793, "body": "@David I suppose the visual studio debugger did a pretty good job. The crash was located near the <code>fastFree</code> of <code>P</code>, so it was clear what to look for"}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 3, "last_activity_date": 1487199516, "creation_date": 1487199516, "answer_id": 42261700, "question_id": 42261401, "link": "https://stackoverflow.com/questions/42261401/cvconnectedcomponentswithstats-in-opencv-3-2-0-sometimes-crashes-with-gcc-6-2/42261700#42261700", "title": "cv::connectedComponentsWithStats in OpenCV 3.2.0 sometimes crashes with gcc 6.2", "body": "<p>I can reproduce this bug with Visual Studio 2015 (vc14 x64).</p>\n\n<p>The problems seems in line <a href=\"https://github.com/opencv/opencv/blob/master/modules/imgproc/src/connectedcomponents.cpp#L352\" rel=\"nofollow noreferrer\">352 of connectedcomponents.cpp</a>:</p>\n\n<pre><code> //A quick and dirty upper bound for the maximimum number of labels.\n const size_t Plength = img.rows*img.cols / 4;\n LabelT *P = (LabelT *)fastMalloc(sizeof(LabelT)* Plength);\n</code></pre>\n\n<p>With your test image, this <code>PLength</code> evaluates to <code>0</code>:</p>\n\n<pre><code> Plength = (3*1)/4 = 0\n</code></pre>\n\n<p>So <code>*P</code> has zero elements.</p>\n\n<p>However, there is this assignement in a few places in the algorithm:</p>\n\n<pre><code> P[lunique] = lunique;\n</code></pre>\n\n<p>and <code>lunique</code> has values <code>&gt;0</code>. So this causes the heap corruption <em>sometimes</em>.</p>\n\n<p>The fix should be to provide a better estimate of the upper bound <code>Plength</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "is_accepted": true, "score": 4, "last_activity_date": 1510587625, "last_edit_date": 1510587625, "creation_date": 1487230040, "answer_id": 42267486, "question_id": 42261401, "link": "https://stackoverflow.com/questions/42261401/cvconnectedcomponentswithstats-in-opencv-3-2-0-sometimes-crashes-with-gcc-6-2/42267486#42267486", "title": "cv::connectedComponentsWithStats in OpenCV 3.2.0 sometimes crashes with gcc 6.2", "body": "<p>I'm responsible for the bug... sigh. </p>\n\n<p>The problem is that the algorithm works in 2x2 blocks on the image. The maximum number of labels is one per block. Unfortunately if the image has an odd number of row and/or columns the estimate of number of blocks is wrong. So to fix this we should be doing:</p>\n\n<pre><code>const size_t Plength = ((img.rows + 1) / 2) * ((img.cols + 1) / 2);\n</code></pre>\n\n<p><strike>We'll file a pull request to OpenCV for this today. Plus an improved set of tests. By the way we are still waiting for the parallel version (multicore) of the algorithm to be included.</strike>\n<strike>We already filed in November a <a href=\"https://github.com/opencv/opencv/pull/7705\" rel=\"nofollow noreferrer\">pull request</a> for the parallel version (multicore) of the algorithm which also fixes the bug.</strike></p>\n\n<p>You can find the fixed version in OpenCV 3.3, since June 2017. Moreover it also includes the parallel version.</p>\n"}], "owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 1, "accepted_answer_id": 42267486, "answer_count": 2, "score": 2, "last_activity_date": 1510587625, "creation_date": 1487198170, "question_id": 42261401, "link": "https://stackoverflow.com/questions/42261401/cvconnectedcomponentswithstats-in-opencv-3-2-0-sometimes-crashes-with-gcc-6-2", "title": "cv::connectedComponentsWithStats in OpenCV 3.2.0 sometimes crashes with gcc 6.2", "body": "<p>Using this simple standalone demo:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\n#include &lt;iostream&gt;\n\nint main(int argc, char *argv[]) {\n  // unsigned char data[] = {1, 0, 1}; // crashes\n  unsigned char data[] = {1, 1, 0}; // does not crash\n\n  cv::Mat1b testImage = cv::Mat1b(3, 1, data);\n\n  cv::Mat labeledImage;\n  cv::Mat stats;\n  cv::Mat centroids;\n  int neighborhood = 8;\n\n  int componentCount = cv::connectedComponentsWithStats(\n      testImage, labeledImage, stats, centroids, neighborhood);\n\n  std::cout &lt;&lt; \"componentCount: \" &lt;&lt; componentCount &lt;&lt; std::endl;\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>With gcc 5.4 it works fine for both 'data' values. With gcc 6.2, it works fine for <code>{1,1,0}</code> but dumps this with <code>data = {1,0,0}</code>:</p>\n\n<pre><code>======= Memory map: ========\n00400000-00407000 r-xp 00000000 08:01 15214967                           /home/doria/build/Examples/c++/OpenCV/Bug/Bug\n00606000-00607000 rw-p 00006000 08:01 15214967                           /home/doria/build/Examples/c++/OpenCV/Bug/Bug\n020b2000-0216c000 rw-p 00000000 00:00 0                                  [heap]\n7f2608000000-7f2608021000 rw-p 00000000 00:00 0 \n7f2608021000-7f260c000000 ---p 00000000 00:00 0 \n7f260cc1d000-7f260cc24000 r-xp 00000000 08:01 10883576                   /lib/x86_64-linux-gnu/librt-2.23.so\n7f260cc24000-7f260ce23000 ---p 00007000 08:01 10883576                   /lib/x86_64-linux-gnu/librt-2.23.so\n7f260ce23000-7f260ce24000 r--p 00006000 08:01 10883576                   /lib/x86_64-linux-gnu/librt-2.23.so\n7f260ce24000-7f260ce25000 rw-p 00007000 08:01 10883576                   /lib/x86_64-linux-gnu/librt-2.23.so\n7f260ce25000-7f260ce28000 r-xp 00000000 08:01 10883446                   /lib/x86_64-linux-gnu/libdl-2.23.so\n</code></pre>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1487204937, "post_id": 42261129, "comment_id": 71682763, "body": "Where do you get this <code>std::assign</code> from?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1487233382, "post_id": 42261129, "comment_id": 71693241, "body": "@JonathanWakely he is probably thinking of <a href=\"http://en.cppreference.com/w/cpp/container/vector/assign\" rel=\"nofollow noreferrer\"><code>std::vector::assign()</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 5723681, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-tgYfKeyQY0U/AAAAAAAAAAI/AAAAAAAAADE/rWubObxyEXE/photo.jpg?sz=128", "display_name": "Robert H&#246;nig", "link": "https://stackoverflow.com/users/5723681/robert-h%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1487197444, "post_id": 42261184, "comment_id": 71680136, "body": "As far as I can see, <code>copy</code> inserts the elements in the vector. What I am looking for is a function that replaces the elements in a vector, beginning from some iterator, with a sequence of other elements."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 535, "user_id": 5723681, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-tgYfKeyQY0U/AAAAAAAAAAI/AAAAAAAAADE/rWubObxyEXE/photo.jpg?sz=128", "display_name": "Robert H&#246;nig", "link": "https://stackoverflow.com/users/5723681/robert-h%c3%b6nig"}, "edited": false, "score": 0, "creation_date": 1487197540, "post_id": 42261184, "comment_id": 71680182, "body": "@RobertH&#246;nig: Yes, I understand. You are looking for <code>std::copy</code>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1487205119, "post_id": 42261184, "comment_id": 71682821, "body": "<i>&quot;As far as I can see, <code>copy</code> inserts the elements in the vector.&quot;</i> No it doesn&#39;t. It performs the assignment <code>*(dst_begin+i) = *(src_begin+i)</code> for every <code>i</code> from 0 to <code>std::distance(src_begin, src_end)</code>. That doesn&#39;t insert any new elements into the vector <i>unless</i> <code>dst_begin</code> is a <code>back_insert_iterator</code> into the vector. It just assigns new values to existing elements."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 9, "last_activity_date": 1487197194, "creation_date": 1487197194, "answer_id": 42261184, "question_id": 42261129, "link": "https://stackoverflow.com/questions/42261129/partially-assigning-a-vector-to-another/42261184#42261184", "title": "Partially assigning a vector to another", "body": "<p>Yes, it's called <code>std::copy</code>:</p>\n\n<pre><code>std::copy(src_begin, src_end, dst_begin);\n</code></pre>\n\n<p>It copies <code>std::distance(src_begin, src_end)</code> elements (from your source vector) to the elements beginning at <code>dst_begin</code> (in your destination vector). Just as with <code>fill</code>, the destination iterator may be an inserter if you want to mutate the receiving container.</p>\n\n<p>There are several variations, e.g.</p>\n\n<pre><code>std::copy_n(src_begin, n, dst_begin);\n</code></pre>\n\n<p>which copies <code>n</code> elements. There is also <code>std::move</code> that moves elements rather than copy them, or you can use move iterators with <code>copy</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1487198074, "last_edit_date": 1487198074, "creation_date": 1487197612, "answer_id": 42261285, "question_id": 42261129, "link": "https://stackoverflow.com/questions/42261129/partially-assigning-a-vector-to-another/42261285#42261285", "title": "Partially assigning a vector to another", "body": "<p>There are three such methods in the class template <code>std::vector</code>. They are</p>\n\n<pre><code>iterator insert(const_iterator position, size_type n, const T&amp; x); \ntemplate &lt;class InputIterator&gt; \niterator insert(const_iterator position, InputIterator first, InputIterator last); \niterator insert(const_iterator position, initializer_list&lt;T&gt; il); \n</code></pre>\n\n<p>It seems that the most suitable method for your task is</p>\n\n<pre><code>template &lt;class InputIterator&gt; \niterator insert(const_iterator position, InputIterator first, InputIterator last); \n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\nint main() \n{\n    std::vector&lt;int&gt; v1 = { 0, 1, 1, 0 };\n\n    std::vector&lt;int&gt; v2 = { 1, 2, 3, 2, 1 };\n\n    v1.insert( std::next( v1.begin(), 2 ), \n               std::next( v2.begin(), 1 ), \n               std::prev( v2.end(), 1 ) ); \n\n    for ( int x : v1 ) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n}   \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>0 1 2 3 2 1 0 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 0, "last_activity_date": 1487204477, "creation_date": 1487204477, "answer_id": 42262586, "question_id": 42261129, "link": "https://stackoverflow.com/questions/42261129/partially-assigning-a-vector-to-another/42262586#42262586", "title": "Partially assigning a vector to another", "body": "<p>At least as I understand the question, you're asking for something where (for example) I can have an input vector like:</p>\n\n<p>[1, 2, 3, 4, 5, 6]</p>\n\n<p>and I want to replace the piece <code>3, 4, 5</code> with different data--say <code>[7, 8, 9, 10, 11, 12]</code>, so after the operation, the result should be: <code>[1, 2, 7, 8, 9, 10, 11, 12, 6]</code>. Particularly, I'm assuming that the old piece and the new piece are <em>not</em> necessarily the same length.</p>\n\n<p>Assuming that's correct, then the short is is: \"no\". As in, no, neither <code>std::vector</code> nor the standard algorithms directly support doing that.</p>\n\n<p>The simple way to do it would be to use <code>vector::erase</code> to erase the original data, then use <code>vector::insert</code> to insert the new data.</p>\n\n<p>For (possibly) improved efficiency, you's start by finding the shorter of the two (the old piece or the new piece). Then you'd copy that length of data from the new data over the old data. Then, if the new was larger than the old, you'd insert the remainder of the new data. Otherwise (the new was smaller than the old) you'd erase the remainder of the old data.</p>\n"}], "owner": {"reputation": 535, "user_id": 5723681, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-tgYfKeyQY0U/AAAAAAAAAAI/AAAAAAAAADE/rWubObxyEXE/photo.jpg?sz=128", "display_name": "Robert H&#246;nig", "link": "https://stackoverflow.com/users/5723681/robert-h%c3%b6nig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1457, "favorite_count": 0, "accepted_answer_id": 42261184, "answer_count": 3, "score": 3, "last_activity_date": 1487204477, "creation_date": 1487196952, "question_id": 42261129, "link": "https://stackoverflow.com/questions/42261129/partially-assigning-a-vector-to-another", "title": "Partially assigning a vector to another", "body": "<p><code>std::fill( ForwardIt first, ForwardIt last, const T&amp; value )</code> allows me to fill a part of a <em>vector</em> with a constant value.</p>\n\n<p><code>std::assign( InputIt first, InputIt last )</code> allows me to <em>completely</em> replace a <em>vector</em> with a part of another vector.</p>\n\n<p>Is there a function in the STL that combines these two (smt like <code>part_assign(begin, end, begin, end)</code>) that allows me to fill an interval of a vector with another vector? </p>\n\n<p>If not, what would be the most efficient way to do so?</p>\n"}, {"tags": ["c++", "undefined-behavior", "virtual-inheritance", "memory-layout", "type-punning"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 3, "creation_date": 1487196971, "post_id": 42261082, "comment_id": 71679881, "body": "Stop using c-style casts and too much stars."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1487197038, "post_id": 42261082, "comment_id": 71679926, "body": "<a href=\"http://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-const-cast-and-reinterpret-cast-be-used\" title=\"when should static cast dynamic cast const cast and reinterpret cast be used\">stackoverflow.com/questions/332030/&hellip;</a>"}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1487197041, "post_id": 42261082, "comment_id": 71679930, "body": "And this is not a good reason to down vote this question."}, {"owner": {"reputation": 1031, "user_id": 7158505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ucFS3.jpg?s=128&g=1", "display_name": "Eduard Malakhov", "link": "https://stackoverflow.com/users/7158505/eduard-malakhov"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1487197187, "post_id": 42261082, "comment_id": 71680007, "body": "@LogicStuff is right, C-style casts will only work for interfaces in trivial cases. For multiple inheritance <code>dynamic_cast</code> and friends is a must."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1487197202, "post_id": 42261082, "comment_id": 71680013, "body": "@LogicStuff, What are the benefits of using reinterpret_cast&lt;B**&gt; here?"}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1487197338, "post_id": 42261082, "comment_id": 71680084, "body": "dynamic_cast does not change anything in this case, I think you are missing whatever I&#39;m missing"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1487197359, "post_id": 42261082, "comment_id": 71680093, "body": "Why the difference between compilers? Most likely, undefined behavior in your code."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1487197387, "post_id": 42261082, "comment_id": 71680108, "body": "@FredLarson do you know where?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1487197444, "post_id": 42261082, "comment_id": 71680135, "body": "Step through the program in the debugger and check the values of the variables."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1487197460, "post_id": 42261082, "comment_id": 71680145, "body": "No. But when there&#39;s a difference between compilers, that&#39;s often the case."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1487197567, "post_id": 42261082, "comment_id": 71680193, "body": "I will update my question so other people won&#39;t answer the same"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1487197957, "post_id": 42261082, "comment_id": 71680378, "body": "I suspect your double pointer casts aren&#39;t legal. I can&#39;t convert them to either <code>static_cast</code> or <code>dynamic_cast</code> without a compile error."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1487198108, "post_id": 42261082, "comment_id": 71680444, "body": "@FredLarson I don&#39;t think there exists a way to have static_cast or dynamic_cast work for a pointer to pointer"}, {"owner": {"reputation": 5409, "user_id": 480386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hKe7X.jpg?s=128&g=1", "display_name": "Christian Abella", "link": "https://stackoverflow.com/users/480386/christian-abella"}, "edited": false, "score": 0, "creation_date": 1487201809, "post_id": 42261082, "comment_id": 71681823, "body": "It&#39;s funny that changing the convert function parameter to C** will actually work in MSVC. Or moving your virtual foo to A from B will also fix the issue."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1487201817, "post_id": 42261082, "comment_id": 71681827, "body": "Cast your <code>D*</code> <code>this</code> to both a <code>C*</code> and <code>B*</code> and look at the addresses. They might not be the same!"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1487392625, "post_id": 42261082, "comment_id": 71776877, "body": "&quot;<code>(C*)this</code>&quot; why do you believe you need this cast? What are you trying to accomplish with this upcast?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1487393699, "post_id": 42261082, "comment_id": 71777094, "body": "You should use <code>dynamic_cast</code> for polymorphic casts, so that you get well-defined error behaviour in case of a mistake."}], "answers": [{"comments": [{"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1487259522, "post_id": 42264451, "comment_id": 71712893, "body": "Thank you for the detailed answer, I have also reproduced this behavior without multiple inheritance, since the real problem is the cast to B** before the call. Do you have any idea what causes the difference in compilers?"}, {"owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "reply_to_user": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1487287411, "post_id": 42264451, "comment_id": 71729714, "body": "@ZivS Different compilers can make different choices as to the memory layout of the parts of the object. Having classes with no members particularly can allow optimizations where the base part of the object doesn&#39;t take up any space within the total size of the derived object. So in other works the pointers to derived and base end up being the same address. Notice there&#39;s an instance of that in my results with the C and D addresses. Maybe on g++ that happens for B and C, and so your code ends up working despite the bad cast. I wouldn&#39;t want to rely on that though."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1487510817, "post_id": 42264451, "comment_id": 71808083, "body": "I my real code D inherint from C1, C2... and also some other types. In this case D inherits from C and an A, isn&#39;t that MI?"}], "tags": [], "owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1487216518, "creation_date": 1487216518, "answer_id": 42264451, "question_id": 42261082, "link": "https://stackoverflow.com/questions/42261082/c-access-violation-in-msvc-but-not-gcc-for-multiple-inheritance-and-cast/42264451#42264451", "title": "C++ access violation in msvc but not gcc for multiple inheritance and cast", "body": "<p>When dealing with inheritance, and especially multiple inheritance, you should really try to avoid casts entirely. But if you have to cast, then use either <code>static_cast</code> or <code>dynamic_cast</code>. That way the compiler will help you avoid invalid conversions. If you do anything else, then you have to understand all the details of C++ as well as or better than the compiler itself! Otherwise you risk easily making mistakes. Like you did here.</p>\n\n<p>Try modifying your main to something like:</p>\n\n<pre><code>int main()\n{\n    D s;\n\n    A* a = &amp;s;\n    B* b = &amp;s;\n    C* c = &amp;s;\n    std::cout &lt;&lt; \"A address = \" &lt;&lt; a &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"B address = \" &lt;&lt; b &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"C address = \" &lt;&lt; c &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"D address = \" &lt;&lt; &amp;s &lt;&lt; std::endl;\n\n    C* foo_ext = nullptr;\n    s.convert(42, (B**)&amp;foo_ext);\n    std::cout &lt;&lt; \"foo_ext = \" &lt;&lt; foo_ext &lt;&lt; std::endl;\n    foo_ext-&gt;foo();\n\n    foo_ext = nullptr;\n    s.convert(1, (B**)&amp;foo_ext);\n    std::cout &lt;&lt; \"foo_ext = \" &lt;&lt; foo_ext &lt;&lt; std::endl;\n    foo_ext-&gt;foo();\n\n    return 0;\n}\n</code></pre>\n\n<p>Running that up until the crash, I get:</p>\n\n<pre><code>A address = 0037FEA0\nB address = 0037FE9C\nC address = 0037FE98\nD address = 0037FE98\nfoo_ext = 0037FE98\nfoo called\nfoo_ext = 0037FE9C\n</code></pre>\n\n<p>Obviously in the second case <code>foo_ext</code> is not being set to the proper <code>C</code> address of the object but instead to the <code>B</code> part. In practice then, the call to <code>foo()</code> might be going through an incorrect or non-existent virtual table pointer, thus the crash.</p>\n\n<p>Now, why does the first case work? Well, cutting it down to the minimum of what's happening, you've effectively done:</p>\n\n<pre><code>C* foo_ext = nullptr;\nC** ppc = &amp;foo_ext;\nB** ppb = (B**)ppc;\nC** pp_ext = (C**)ppb;\n*pp_ext = &amp;s;\n</code></pre>\n\n<p>So it starts with a <code>C</code> pointer and ends with a <code>C</code> pointers. And the compiler knows how to properly shift a <code>D</code> pointer to be <code>C</code> pointer. (Derived to base conversion. The compiler doesn't need a cast to do that.)</p>\n\n<p>However in the second case you effectively have:</p>\n\n<pre><code>C* foo_ext = nullptr;\nC** ppc = &amp;foo_ext;\nB** ext = (B**)ppc;\n*ext = &amp;s;\n</code></pre>\n\n<p>So at the last line the compiler is shifting a <code>D</code> pointer to become a <code>B</code> pointer. But really that address is ending up back in a <code>C</code> pointer. So it has been shifted too far back up the inheritance hierarchy!</p>\n\n<hr>\n\n<p>Now, how to fix you program... Well, the basic idea of course is to get rid of most of the casting and replace the remaining couple spots with static or dynamic casts. Try the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {};\n\nclass B : public virtual A {};\n\nclass C : public B\n{\npublic:\n    virtual void foo() = 0;\n};\n\nclass D : public virtual A, public C\n{\npublic:\n    bool convert(int id, B** ext)\n    {\n        if (id == 1)\n        {\n            *ext = this;\n            return true;\n        }\n\n        if (id == 42)\n        {\n            *ext = this;\n            return true;\n        }\n\n        return false;\n    }\n    void foo() override\n    {\n        std::cout &lt;&lt; \"foo called\" &lt;&lt; std::endl;\n    }\n};\n\n\nint main()\n{\n    D s;\n\n    A* a = &amp;s;\n    B* b = &amp;s;\n    C* c = &amp;s;\n    std::cout &lt;&lt; \"A address = \" &lt;&lt; a &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"B address = \" &lt;&lt; b &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"C address = \" &lt;&lt; c &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"D address = \" &lt;&lt; &amp;s &lt;&lt; std::endl;\n\n    B* b_pointer = nullptr;\n    C* foo_ext = nullptr;\n    s.convert(42, &amp;b_pointer);\n    foo_ext = static_cast&lt;C*&gt;(b_pointer);\n    std::cout &lt;&lt; \"foo_ext = \" &lt;&lt; foo_ext &lt;&lt; std::endl;\n    foo_ext-&gt;foo();\n\n    b_pointer = nullptr;\n    foo_ext = nullptr;\n    s.convert(1, &amp;b_pointer);\n    foo_ext = static_cast&lt;C*&gt;(b_pointer);\n    std::cout &lt;&lt; \"foo_ext = \" &lt;&lt; foo_ext &lt;&lt; std::endl;\n    foo_ext-&gt;foo();\n\n    return 0;\n}\n</code></pre>\n\n<p>This should run fine with all the expected output. The static casts allow the compiler to properly situate the pointers as per their types. (And in this limited example we of course know what all the types really are, so we don't have to bother with dynamic cast.)</p>\n\n<p>I assume this example was based on a real world problem. I can't say whether this exact solution is appropriate for that (since obviously I don't know the real situation). But the principle is sound: don't lie to the compiler by forcing questionable casts. Let it automatically convert whenever possible, and resort only to <code>static_cast</code> or <code>dynamic_cast</code> when necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1487494326, "post_id": 42311334, "comment_id": 71803658, "body": "Pointers to classes need to have the same size."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1487394967, "creation_date": 1487394967, "answer_id": 42311334, "question_id": 42261082, "link": "https://stackoverflow.com/questions/42261082/c-access-violation-in-msvc-but-not-gcc-for-multiple-inheritance-and-cast/42311334#42311334", "title": "C++ access violation in msvc but not gcc for multiple inheritance and cast", "body": "<p>The first runtime problem comes at:</p>\n\n<pre><code>s.convert(42, (B**)&amp;foo_ext);\n</code></pre>\n\n<p><code>foo_ext</code> has type <code>C *</code>.  So the use of <code>*ext</code> inside <code>convert</code> commits a strict aliasing violation, by accessing the memory of a <code>C *</code> as if it were a <code>B *</code>  . In general, pointers to different types may have different size and representation; but even if they don't, it is still not permitted to alias them.</p>\n\n<p>Although the strict aliasing rule has an exception for accessing base classes, that doesn't extend to base class pointers.   </p>\n\n<p>MSVC probably doesn't enforce strict aliasing in that situation (in fact some things in the Windows API rely on that behaviour).  But if you want to write portable code, it would be a good idea to not rely on strict aliasing violations. </p>\n\n<hr>\n\n<p>The <code>convert</code> function uses pass-by-pointer. There is never a need for this in C++. You can use pass-by-reference as a language feature instead.  This reduces the chance of making mistakes -- some of the mistakes in your code actually can't even be expressed in reference notation.</p>\n\n<p>Here is a modified version:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A{};\n\nclass B : public virtual A{};\n\nclass C : public B\n{\npublic:\n    virtual void foo() = 0;\n};\n\nclass D : public virtual A, public C\n{\npublic:\n    bool convert(int id, B*&amp; ext)\n    {\n        if (id == 1)\n        {\n            ext = static_cast&lt;C *&gt;(this);  // note: redundant cast\n            return true;\n        }\n\n        if (id == 42)\n        {\n            ext = this;\n            return true;\n        }\n\n        return false;\n    }\n    void foo() override\n    {\n        std::cout &lt;&lt; \"foo called\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    D s;\n    B* foo_ext_b;\n    C* foo_ext;\n\n    foo_ext_b = nullptr;\n\n    if ( !s.convert(42, foo_ext_b) )\n        throw std::runtime_error(\"convert42 failed\");\n\n    foo_ext = static_cast&lt;C *&gt;(foo_ext_b);\n    foo_ext-&gt;foo();\n\n    foo_ext_b  = nullptr;\n\n    if ( !s.convert(1, foo_ext_b) )\n        throw std::runtime_error(\"convert1 failed\");\n\n    foo_ext = static_cast&lt;C *&gt;(foo_ext_b);\n    foo_ext-&gt;foo();\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that using <code>foo_ext = static_cast&lt;C *&gt;(foo_ext_b);</code> , in general, is error-prone. There will be silent undefined behaviour if <code>convert</code> \"returned\" a <code>B *</code> that did not happen to point to a <code>B</code> which is a base class of a <code>C</code> instance.</p>\n\n<p>For safety you would use <code>dynamic_cast</code> instead. But to allow dynamic_cast to work, the base class must have at least one virtual function.  You could add a virtual destructor to <code>B</code> or <code>A</code>.</p>\n"}], "owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 42264451, "answer_count": 2, "score": 3, "last_activity_date": 1487394967, "creation_date": 1487196774, "last_edit_date": 1487392743, "question_id": 42261082, "link": "https://stackoverflow.com/questions/42261082/c-access-violation-in-msvc-but-not-gcc-for-multiple-inheritance-and-cast", "title": "C++ access violation in msvc but not gcc for multiple inheritance and cast", "body": "<p>I have a fairly large project with multiple interfaces and implementations.\nThe code was implemented on a linux environment using g++ (5.4 I think). After porting the code to Windows and running it with VS15 (MSVC v140) I got an access violation after trying to access a casted pointer.</p>\n\n<p>This is the inheritance hierarchy in the code below:</p>\n\n<pre><code>                 A    \n                / \\  \n     virtual   /   \\   \n              /     |\n             B      |\n             |      | virtual\n             C      |\n             |      |\n             \\      / \n              \\    /\n                D\n</code></pre>\n\n<p>In the real code the inheritance design includes more classes so please don't pick on why this is the way I inherit from <code>A</code>.\nI've narrowed down the code to present only what is necessary.</p>\n\n<p>The following runs with gcc and prints <code>foo called</code> twice <a href=\"http://rextester.com/ZNX84854\" rel=\"nofollow noreferrer\">(Live demo on rextester)</a>, but with msvc on the second call to <code>foo</code> crashes with access violation <a href=\"http://rextester.com/TYUB61269\" rel=\"nofollow noreferrer\">(Live demo on rextester)</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A{};\n\nclass B : public virtual A{};\n\nclass C : public B\n{\npublic:\n    virtual void foo() = 0;\n};\n\nclass D : public virtual A, public C\n{\npublic:\n    bool convert(int id, B** ext)\n    {\n        if (id == 1)\n        {\n            *ext = (C*)this;\n            return true;\n        }\n\n        if (id == 42)\n        {\n            C** pp_ext = (C**)(ext);\n            *pp_ext = (C*)this;\n            return true;\n        }\n\n        return false;\n    }\n    void foo() override\n    {\n        std::cout &lt;&lt; \"foo called\" &lt;&lt; std::endl;\n    }\n};\n\n\nint main()\n{\n    D s;\n    C* foo_ext = nullptr;\n    s.convert(42, (B**)&amp;foo_ext);\n    foo_ext-&gt;foo();\n\n    foo_ext = nullptr;\n    s.convert(1, (B**)&amp;foo_ext);\n    foo_ext-&gt;foo();\n\n    return 0;\n}\n</code></pre>\n\n<p>First - Am I missing a fundamental error in the <code>*ext = (C*)this;</code> conversion?</p>\n\n<p>Second - Why is this code different in the two compilers?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<ol>\n<li><p>This code uses pointers, pointers to pointers and is built with this inheritance for good reasons (one of which is ABI compliant interface).</p></li>\n<li><p><code>dynamic_cast</code> doesn't change the behavior in this case.</p></li>\n<li><p>If I call <code>static_cast&lt;C*&gt;(*ext)-&gt;foo();</code> after <code>*ext = (C*)this;</code> it will call foo, but fail after returning from <code>convert</code>. This is something I have already understood and this is what made me understand that the solution for <code>42</code> is a (good?) solution.</p></li>\n</ol>\n"}, {"tags": ["c++", "soci"], "answers": [{"comments": [{"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1487351344, "post_id": 42275224, "comment_id": 71762139, "body": "Great thank you for this! I have two more questions: Does SOCI cache objects in the background if I execute the same query again? And what is the correct way to declare the <code>rowset</code> as friend so I can make the default constructor private? I tried <code>friend class soci::rowset&lt;Event&gt;</code> but this does not work."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1487363808, "post_id": 42275224, "comment_id": 71768750, "body": "SOCI does not cache anything between issuing separate queries. Type used to specialise rowset must be default constructible."}, {"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1487365707, "post_id": 42275224, "comment_id": 71769715, "body": "It should be default constructable if the rowset is a friend of my class and the constructor is private or do I misunderstand you?"}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1487434207, "post_id": 42275224, "comment_id": 71788203, "body": "<code>Event</code> can not have private constructor. That is requirement of <code>rowset</code> (and internal <code>rowset_impl</code> class). Take a look into the SOCI code and you will see why (ie. <code>new T()</code>). You can always modify SOCI code according to your needs."}], "tags": [], "owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "is_accepted": true, "score": 4, "last_activity_date": 1487251391, "creation_date": 1487251391, "answer_id": 42275224, "question_id": 42260993, "link": "https://stackoverflow.com/questions/42260993/c-soci-query-into-vector-of-custom-object/42275224#42275224", "title": "C++ SOCI query into vector of custom Object", "body": "<p>SOCI does not support combination of ORM with bulk operations. See the mailing list thread: <a href=\"https://sourceforge.net/p/soci/mailman/message/19607893/\" rel=\"nofollow noreferrer\">ORM with std::vector not supported?</a>.</p>\n\n<p>Instead, you can use rowset and iterator-based access:</p>\n\n<pre><code>rowset&lt;Event&gt; rs = (sql.prepare &lt;&lt; \"SELECT * FROM Event\");\nfor (auto it = rs.cbegin(); it != rs.cend(); ++it)\n{\n   // access event\n}\n</code></pre>\n\n<p>AFAIR, it still should be supported.</p>\n"}], "owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 1, "accepted_answer_id": 42275224, "answer_count": 1, "score": 5, "last_activity_date": 1487251391, "creation_date": 1487196407, "last_edit_date": 1487196846, "question_id": 42260993, "link": "https://stackoverflow.com/questions/42260993/c-soci-query-into-vector-of-custom-object", "title": "C++ SOCI query into vector of custom Object", "body": "<p>Currently I'm writing a C++ application where I have to connect to a SQLite database. I search for a library and found SOCI and I have to say: I love it. The stream syntax and the mapping is so awesome. But I have one problem with it:</p>\n\n<p>I have an Event class and I've written the parser functions for it:</p>\n\n<pre><code>template&lt;&gt; struct type_conversion&lt;Event&gt;\n{\n    typedef values base_type;\n\n    static void from_base(const values&amp; v, indicator /* ind */, Event&amp; event)\n    {\n        event.m_id = v.get&lt;std::string&gt;(\"id\");\n        event.m_title = v.get&lt;std::string&gt;(\"Title\");\n        event.m_description = v.get&lt;std::string&gt;(\"Description\");\n        event.m_date = v.get&lt;std::tm&gt;(\"Date\");\n    }\n\n    static void to_base(const Event&amp; event, values&amp; v, indicator&amp; ind)\n    {\n        v.set(\"id\", event.m_id);\n        v.set(\"Title\", event.m_title);\n        v.set(\"Description\", event.m_description);\n        v.set(\"Date\", event.m_date);\n\n        ind = i_ok;\n    }\n};\n</code></pre>\n\n<p>This works great for queries like this:</p>\n\n<pre><code>sql &lt;&lt; \"SELECT * FROM Event WHERE id=5\", into(event); \n</code></pre>\n\n<p>I would like to select a bulk of Events into a <code>std::vector&lt;Event*&gt;</code> but if I try this with:</p>\n\n<pre><code>std::vector&lt;Event*&gt; events;\nsql &lt;&lt; \"SELECT * FROM Event\", into(events)\n</code></pre>\n\n<p>But with this I get following compiler error:</p>\n\n<pre><code>No known convertation from\nsoci::details::conversion_into_type&lt;std::vector&lt;Event&gt;&gt; into\nsoci::details::into_type_base\n</code></pre>\n\n<p>Isn't that possible with SOCI or am I missing something? I also found OTL as library. Is that maybe a good alternative? As I said I like the SOCI way. Is something like this also possible with OTL?</p>\n"}, {"tags": ["c++", "bash", "memory", "redhat", "virtual-memory"], "comments": [{"owner": {"reputation": 331, "user_id": 3255528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/58c2da9078c2f0a507d45b78f1265db0?s=128&d=identicon&r=PG&f=1", "display_name": "stopBugs", "link": "https://stackoverflow.com/users/3255528/stopbugs"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1487200331, "post_id": 42260960, "comment_id": 71681311, "body": "This happens in a c++ application. Just pasted the code used inside the application for printing out the memory usage."}, {"owner": {"reputation": 331, "user_id": 3255528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/58c2da9078c2f0a507d45b78f1265db0?s=128&d=identicon&r=PG&f=1", "display_name": "stopBugs", "link": "https://stackoverflow.com/users/3255528/stopbugs"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1487707165, "post_id": 42260960, "comment_id": 71902624, "body": "I used valgrind&#39;s massif profiler and it seems like the memory is being allocated/freed as expected regardless of the allocation size. So proc/self/status does not report the actual memory used by a process? Could someone comment on this?"}], "answers": [{"tags": [], "owner": {"reputation": 490, "user_id": 976641, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/54110277ed652edb7c3958e560451083?s=128&d=identicon&r=PG", "display_name": "sknaumov", "link": "https://stackoverflow.com/users/976641/sknaumov"}, "is_accepted": false, "score": -1, "last_activity_date": 1536068165, "creation_date": 1536068165, "answer_id": 52167626, "question_id": 42260960, "link": "https://stackoverflow.com/questions/42260960/inconsistent-change-in-vmrss-or-vmsize-when-looking-at-proc-self-status/52167626#52167626", "title": "Inconsistent change in VmRSS or VmSize when looking at /proc/self/status", "body": "<p>Once I encountered quite a similar problem with suricata - this program has a lot of small rules it loads into memory, and once developers added dynamic reload of rules, the program ended up constantly occupying twice as much of memory even though all the previous rules were freed after loading the new ones.</p>\n\n<p>It was caused by a fact that there are a lot of rules, one malloc per rule, but each one takes not so much space => malloc internally used brk/sbrk (stack-like) instead of mmap => as original rules were below the new ones on a data segment, this segment hadn't been decreased even after gigabytes of original rules were freed.</p>\n\n<p>The solution in this case is to allocate a big chunk of memory at once and then split it into smaller pieces manually.</p>\n\n<p>As to a file, it is mmapped, so the memory could be immediately released after you unmap it.</p>\n"}], "owner": {"reputation": 331, "user_id": 3255528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/58c2da9078c2f0a507d45b78f1265db0?s=128&d=identicon&r=PG&f=1", "display_name": "stopBugs", "link": "https://stackoverflow.com/users/3255528/stopbugs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536068165, "creation_date": 1487196312, "last_edit_date": 1498238945, "question_id": 42260960, "link": "https://stackoverflow.com/questions/42260960/inconsistent-change-in-vmrss-or-vmsize-when-looking-at-proc-self-status", "title": "Inconsistent change in VmRSS or VmSize when looking at /proc/self/status", "body": "<p>I have been investigating an issue with a customer on Red Hat Enterprise Linux 6. I have seen similar behavior on Ubuntu as well. The customer is tracking the memory usage by outputting \n/proc/self/status</p>\n\n<p>This happens in an ODBC application when using a specific ODBC driver but I suspect that is relevant to the problem.</p>\n\n<p>The memory usage is being tracked (via calling /proc/self/status function pasted in then end) in various stages of the program, once before allocating some memory on the heap, once after freeing that memory and once after unloading the dynamic library.</p>\n\n<p>When the amount of the allocated memory exceeds some value, the VmRSS does not go down immediately after freeing the memory, but does go down immediately after unloading the so file. When the amount of the allocated memory is small VmRSS goes down immediately after freeing the memory.</p>\n\n<p>I have run valgrind on the application and I could not find any memory leak.\nAny help, explanations, pointers to articles is very much appreciated.</p>\n\n<pre><code>void print_proc_status_vm()\n{\n  std::ifstream proc_status_fhandle;\n  proc_status_fhandle.open(\"/proc/self/status\");\n  std::string s;\n  int line=0;\n  static std::map&lt;std::string, int&gt; memoryUsage;\n  while(std::getline(proc_status_fhandle, s)){\n    ++line;\n    if( (line &gt;=12) and (line &lt;=17 ) and (line !=14) )\n    {   \n        char* str = new char[s.size()+1];\n        strcpy(str, s.c_str());\n        std::string key(strtok(str, \"\\t \"));\n\n        int value = atoi(strtok(NULL, \"\\t \"));\n\n        printf(\"%s   %d \\n\", key.c_str(), value - memoryUsage[key] );\n\n       memoryUsage[key] = value;\n       delete[] str;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1487196283, "post_id": 42260906, "comment_id": 71679536, "body": "That&#39;s because the type of <code>&amp;array</code> is <code>float (*)[4]</code>. If you&#39;re learning C++, learn C++ and use the Standard Library: <code>std::vector</code> is the answer here."}, {"owner": {"reputation": 326, "user_id": 4304677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-nIkkoSiBR4g/AAAAAAAAAAI/AAAAAAAAAFY/8ZxVCy95KRc/photo.jpg?sz=128", "display_name": "Selim Ajimi", "link": "https://stackoverflow.com/users/4304677/selim-ajimi"}, "edited": false, "score": 0, "creation_date": 1487196290, "post_id": 42260906, "comment_id": 71679542, "body": "As I know if you pass an <code>array</code> you are already passing an address of the array and if you pass <code>&amp;array</code> you are passing the address of the array address"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1487196589, "creation_date": 1487196589, "answer_id": 42261032, "question_id": 42260906, "link": "https://stackoverflow.com/questions/42260906/c-what-is-the-difference-between-the-usage-of-array-and-array/42261032#42261032", "title": "C++ What is the difference between the usage of &amp;array and array?", "body": "<p>Here's a way of doing it with <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nvoid do_something(const std::vector&lt;float&gt;&amp; arr) {\n  // Use arr for whatever.\n}\n\nint main() {\n   std::vector&lt;float&gt; arr = { 1, 2, 3, 4 };\n\n   do_something(arr);\n\n    return 0;\n}\n</code></pre>\n\n<p>This initializer requires C++11 mode, which most compilers support if that flag is turned on.</p>\n"}], "owner": {"reputation": 299, "user_id": 7571462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jtetb.jpg?s=128&g=1", "display_name": "Han M", "link": "https://stackoverflow.com/users/7571462/han-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1487196296, "answer_count": 1, "score": 0, "last_activity_date": 1487196589, "creation_date": 1487196120, "question_id": 42260906, "link": "https://stackoverflow.com/questions/42260906/c-what-is-the-difference-between-the-usage-of-array-and-array", "closed_reason": "Duplicate", "title": "C++ What is the difference between the usage of &amp;array and array?", "body": "<p>Recently, I encountered a problem about using the address of an array when I need to pass it as a reference to another function in C++. For example:</p>\n\n<pre><code>void do_something(float * arr, int size) {\n    //Will do something about the arr\n}\n\nint main () {\n    float array[] = {1, 2, 3, 4};\n    do_something(array, 4);  // this will work well\n    do_something(&amp;array, 4); // this will cause error\n    return 0;\n}\n</code></pre>\n\n<p>But when I try to print out both array and &amp;array, they are the same. Do you guys know what is the reason for this?</p>\n"}, {"tags": ["c++", "qt", "qabstractitemmodel", "qitemdelegate"], "comments": [{"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1487200076, "post_id": 42260866, "comment_id": 71681220, "body": "As far as I know, it is working as expected: the item delegate is applied to a column of the view, which is supposed to be agnostic about the model. Additionally, your model <i>is</i> the proxy model, so it is being applied to the correct column."}, {"owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "reply_to_user": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1487207435, "post_id": 42260866, "comment_id": 71683525, "body": "I suppose you&#39;re right @cbuchart.  I guess it makes sense that when I call setItemDelegateForColumn on the view it would be the view&#39;s column I&#39;m specifying, not the model&#39;s.  I think your proposed answer below would be a valid workaround if you know you&#39;re using a proxy model that could alter the column numbers."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1487231704, "post_id": 42260866, "comment_id": 71692241, "body": "You may do a qobject_cast to check if the model is a proxy model."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "edited": false, "score": 0, "creation_date": 1487207331, "post_id": 42261910, "comment_id": 71683491, "body": "That seems like it would work, it just seems odd that I&#39;d have to.  I would expect the view or the proxy model would automatically do that.  I&#39;ll give it a shot and if it works as expected I&#39;ll accept it as the answer."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "edited": false, "score": 0, "creation_date": 1487231626, "post_id": 42261910, "comment_id": 71692214, "body": "Yes, it is a pity that it wouldn&#39;t be automatic, or at least that the model can suggest an item delegate in the same way it suggests other roles such as text alignment."}, {"owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "edited": false, "score": 1, "creation_date": 1489928722, "post_id": 42261910, "comment_id": 72875780, "body": "Sorry, I forgot all about this.  I think I tried this approach and it also did not work.  I ended up just calling setColumnVisible() on the view instead."}], "tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": false, "score": 1, "last_activity_date": 1487200484, "creation_date": 1487200484, "answer_id": 42261910, "question_id": 42260866, "link": "https://stackoverflow.com/questions/42260866/using-custom-qitemdelegate-with-a-qsortfilterproxymodel/42261910#42261910", "title": "Using custom QItemDelegate with a QSortFilterProxyModel", "body": "<p>You may try <code>mapToSource</code> on filtered indices (one per column) and check the original column and set the corresponding item delegate based on it.</p>\n\n<pre><code>for (int i = 0; i &lt; proxy-&gt;columnCount(); ++i) {\n  if (proxy-&gt;mapToSource(proxy-&gt;index(0, i)).column() == 6) {\n    table-&gt;setItemDelegateForColumn(i, yourDelegate);\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "is_accepted": false, "score": 0, "last_activity_date": 1513650701, "creation_date": 1513650701, "answer_id": 47879251, "question_id": 42260866, "link": "https://stackoverflow.com/questions/42260866/using-custom-qitemdelegate-with-a-qsortfilterproxymodel/47879251#47879251", "title": "Using custom QItemDelegate with a QSortFilterProxyModel", "body": "<p>This is one of many good reasons not to use column position detection in display delegates.  If you let users re-arrange columns in the view, that also is a problem.  I don't think it's a bug, but I HAVE wished in the past that there was a way to assign a default delegate at the item model level.  Perhaps as a Role or something.</p>\n\n<p>Anyway, one simple workaround, if you have control of the data, is to store the column/field ID right in the data itself, as a custom data role, e.g. <code>modelIndex.setData(FIELD_ONE, Qt::UserRole + 1)</code> (where <code>FIELD_ONE</code> is some enum of your columns, for example).  Then the delegate can just check that role and know what to do.</p>\n"}], "owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513650701, "creation_date": 1487195955, "question_id": 42260866, "link": "https://stackoverflow.com/questions/42260866/using-custom-qitemdelegate-with-a-qsortfilterproxymodel", "title": "Using custom QItemDelegate with a QSortFilterProxyModel", "body": "<p>I have a custom QSortFilterProxyModel to only show certain rows and columns in a table.  I also have a custom QItemDelegate to control how certain values in the table are drawn.  I'm only applying the delegate to the columns that need it and the problem seems to be that when I have the proxy model hide certain columns it messes up the delegate.</p>\n\n<p>For example, suppose I have columns A-G and I apply my custom delegate to column F.</p>\n\n<pre><code>A  B  C  D  E  F  G\n-------------------\no  o  o  o  o  X  o\no  o  o  o  o  X  o\no  o  o  o  o  X  o\n</code></pre>\n\n<p>If my proxy model doesn't show column B, my delegate ends up getting applied to column G instead.</p>\n\n<pre><code>A  C  D  E  F  G\n----------------\no  o  o  o  o  X\no  o  o  o  o  X\no  o  o  o  o  X\n</code></pre>\n\n<p>I've been able to work around the problem by hiding the columns on the view instead of in the proxy model by calling</p>\n\n<pre><code>table-&gt;setColumnHidden(B, true);\n</code></pre>\n\n<p>And I suppose that works, but is that the only solution?  It seems like bug that the delegate and proxy model classes don't work better together, like you can use one or the other but not both on the same model very well.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487195941, "post_id": 42260806, "comment_id": 71679363, "body": "Related: <a href=\"http://stackoverflow.com/questions/30533439/string-literals-vs-array-of-char-when-initializing-a-pointer\" title=\"string literals vs array of char when initializing a pointer\">stackoverflow.com/questions/30533439/&hellip;</a>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1487196025, "post_id": 42260806, "comment_id": 71679407, "body": "You aren&#39;t returning arrays in either case. You&#39;re returning a pointer to the first element of an array. This is important if the array ceases to exist."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1487196036, "post_id": 42260806, "comment_id": 71679418, "body": "btw in c++ you can avoid all that headace by using <code>std::string</code>"}, {"owner": {"reputation": 1237, "user_id": 2614539, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4lZ0X.jpg?s=128&g=1", "display_name": "Dineshkumar", "link": "https://stackoverflow.com/users/2614539/dineshkumar"}, "edited": false, "score": 0, "creation_date": 1487196160, "post_id": 42260806, "comment_id": 71679472, "body": "Refer this. <a href=\"http://stackoverflow.com/questions/1335786/c-differences-between-char-pointer-and-array\" title=\"c differences between char pointer and array\">stackoverflow.com/questions/1335786/&hellip;</a>"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1487196420, "post_id": 42260806, "comment_id": 71679616, "body": "Your code will cause a UB: returning a local variable: <code>return text</code> &quot;text[]&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1487196711, "post_id": 42260806, "comment_id": 71679742, "body": "<i>sigh</i> C is not C++ is not C. Don&#39;t spam tags! And &quot;CPP&quot; is the C <b>P</b>re<b>P</b>rocessor, not C++!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487196831, "post_id": 42260806, "comment_id": 71679798, "body": "And you apparently learned something wrong. If an array was a pointer, it would be called &quot;pointer&quot;, not &quot;array&quot; (and vice versa)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487197251, "post_id": 42260806, "comment_id": 71680036, "body": "@Olaf usually I fully support your C is not C++ crusade, but even SO lists cpp as synonym for C++ (though in lowercase)"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1487197985, "post_id": 42260806, "comment_id": 71680392, "body": "The <code>char*</code> should rather be <code>const char*</code> for reasons mentioned <a href=\"http://stackoverflow.com/a/8795589/1460794\">here</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1487198020, "post_id": 42260806, "comment_id": 71680409, "body": "@tobi303: try <code>cpp</code> on your console. (and that is not related to the C is not C++ policy, a both use the CPP.) Anyway, I removed the CPP, as the language should not be in the title anyway. That&#39;s what tags are for."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1487204054, "post_id": 42260806, "comment_id": 71682502, "body": "&quot;I learned that when I initialize an array of chars it&#39;s just like initializing a pointer to chars&quot;  - this is wrong , whatever source you &quot;learned&quot; that from you should now regard as being a bad source."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1487205350, "post_id": 42260806, "comment_id": 71682888, "body": "<code>char* text = &quot;Will I live forever?&quot;;</code> has not been valid C++ since 2010, it&#39;s invalid in C++11, for good reasons. It should be <code>const char* text = &quot;Will I live forever?&quot;;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487196243, "post_id": 42260896, "comment_id": 71679509, "body": "So long text to just say &#39;Memory is allocated: 1. On the stack. 2. On the read only section in the binary.&#39; That explains everything."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1487196283, "post_id": 42260896, "comment_id": 71679537, "body": "@tobi303 it returns &quot;copy&quot; of local variable. (Because ABI defines returned code to be %r1 IIRC, thus anything which fits register can be returned in such way)"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1487196396, "post_id": 42260896, "comment_id": 71679603, "body": "@tobi303, shallow copy, yes. Pointer fits register. That&#39;s all what you get for <code>return text;</code> case."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1487196796, "post_id": 42260896, "comment_id": 71679782, "body": "This has nothing to do with what can fit in a register."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1487197054, "post_id": 42260896, "comment_id": 71679933, "body": "I never completely understood that array vs pointer stuff, I really learned something from this answer :) upvoted (and removed some noisy comments)"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487197063, "post_id": 42260896, "comment_id": 71679938, "body": "@NeilButterworth, how come? On low level it&#39;s exactly what ABI defines. On next level is some other standards and agreements involved (such as C standard). UB in this case is so obvious."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487197172, "post_id": 42260896, "comment_id": 71679996, "body": "@0 There is no C++ ABI. There is nothing in C++ that requires return values be passed in registers, or suggests different semantics if they are passed that way. On the contrary, C++ (and C) programs must behave in the same way however function and return values are implemented.."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487197294, "post_id": 42260896, "comment_id": 71680056, "body": "@NeilButterworth, Again, (most of the people here by some unknown reason afraid of magic ABI abbreviation) the C standard is on <b>upper</b> level than ABI. ABI is defined <b>without</b> referring to <b>any</b> programming language except direct CPU instructions. ABI is written for <b>CPU</b>, not for the PL."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487197358, "post_id": 42260896, "comment_id": 71680091, "body": "@0 Sorry, you either don&#39;t know what you are talking about, you can&#39;t express yourself in English, or both."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487197459, "post_id": 42260896, "comment_id": 71680144, "body": "@NeilButterworth, okay, English is not my native, indeed, but you chose way to talk offtopic. Just google for ABI x86_64, or ABI for ARM."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487197623, "post_id": 42260896, "comment_id": 71680220, "body": "@0andriy afaik one major reason to write code in c++ is to not care about the details of the cpu, like registers for example"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1487197739, "post_id": 42260896, "comment_id": 71680284, "body": "@tobi303, correct. I oppose the <i>This has nothing to do with what can fit in a register.</i> It definitely has."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1487198557, "post_id": 42260896, "comment_id": 71680630, "body": "nothing to do with this question, he would have the same problem if he returned huge struct with pointers to local variables, for sure wont fit in registers, for sure still crashes"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 1, "creation_date": 1487204132, "post_id": 42260896, "comment_id": 71682528, "body": "@0andriy some systems have neither a stack, nor a read-only section in the binary.  The question can, and IMO should , be answered without reference to specific system details"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 10, "last_activity_date": 1487196866, "last_edit_date": 1487196866, "creation_date": 1487196075, "answer_id": 42260896, "question_id": 42260806, "link": "https://stackoverflow.com/questions/42260806/difference-when-returning-an-array-of-chars-or-a-pointer-to-char-literal/42260896#42260896", "title": "Difference when returning an array of chars or a pointer to char literal", "body": "<p>The function containing this:</p>\n\n<pre><code> char text[] = \"Will I live forever?\";\n</code></pre>\n\n<p>returns a pointer to a local variable called <code>text</code>, which <em>contains</em> the string \"Will I live forever?\". As with all local variables, that variable evaporates after the function returns, and so you are off in undefined behaviour land if you try to  access it.</p>\n\n<p>The function containing this:</p>\n\n<pre><code> char* text = \"Will I live forever?\";\n</code></pre>\n\n<p>returns a pointer to some magic place in memory (but not a local variable) containing the string, which persists for the program's execution, so using that pointer is not undefined behaviour.</p>\n"}], "owner": {"reputation": 77, "user_id": 7531186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/13894a3cc583d4c9d56e35fbc410f290?s=128&d=identicon&r=PG&f=1", "display_name": "wrg wfg", "link": "https://stackoverflow.com/users/7531186/wrg-wfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 42260896, "answer_count": 1, "score": 3, "last_activity_date": 1487203625, "creation_date": 1487195752, "last_edit_date": 1487203625, "question_id": 42260806, "link": "https://stackoverflow.com/questions/42260806/difference-when-returning-an-array-of-chars-or-a-pointer-to-char-literal", "title": "Difference when returning an array of chars or a pointer to char literal", "body": "<p>I learned that when I initialize an array of chars it's just like initializing a pointer to chars.\nBut, if that is the situation, why does the following code output strange characters?</p>\n\n<pre><code>char* returnMe()\n{\n    char text[] = \"Will I live forever?\";\n    return text;\n}\n</code></pre>\n\n<p>While the following code:</p>\n\n<pre><code>char* returnMe()\n{\n    char* text = \"Will I live forever?\";\n    return text;\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<blockquote>\n  <p>Will I live forever?</p>\n</blockquote>\n\n<p>What exactly are the differences between these two initializations?\nThey both act like pointers, so if I do:</p>\n\n<pre><code>puts(X); //puts get char* as a parameter in it.\n</code></pre>\n\n<p>It will work for both cases (When I haven't gone out of scope yet.)</p>\n"}, {"tags": ["c++", "boost-filesystem"], "comments": [{"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 2, "creation_date": 1487195388, "post_id": 42260673, "comment_id": 71679099, "body": "Well, what is <code>String</code>? How can you turn it into something that the documentation says a <code>path</code> can be constructed from? You have the definition of <code>String</code>, you tell us. Probably ask for a C-string or <code>std::string</code> from it or something."}, {"owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1487195721, "post_id": 42260673, "comment_id": 71679247, "body": "I&#39;m sort of relearning c++... I don&#39;t exactly remember/know the &#39;definition&#39; of <code>String</code> in the way that you are asking.  Updated to include links to documentation..."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1487196278, "post_id": 42260673, "comment_id": 71679532, "body": "Nobody but you knows what <code>String</code> is, please post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1487202933, "post_id": 42260673, "comment_id": 71682176, "body": "Apparently no-one is willing to elaborate, so let me: <code>String</code> is not a standard C++ class. There is a class called <code>string</code> (actually, <code>std::string</code>), beginning with a lower-case &quot;s&quot;. It looks like your program contains another class which is called <code>String</code> (upper case &quot;S&quot;). The constructor isn&#39;t working because you&#39;re passing it one of these <code>String</code> objects which it knows nothing about; what you need to give it is a <code>std::string</code>."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1487203005, "post_id": 42260673, "comment_id": 71682204, "body": "@RisaAudr To clarify, <code>String</code> is part of <i>your code</i>, not part of the C++ language. You should be able to find the definition somewhere in your codebase."}, {"owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "edited": false, "score": 0, "creation_date": 1487265172, "post_id": 42260673, "comment_id": 71717527, "body": "Thanks all!  That managed to clarify what exactly was happening.  I&#39;m using c++ builder, which has <code>String</code> defined as a <code>const char*</code> (I think).  Regardless that led me down the right tracks.  I posted my solution as an answer in case anyone else runs across builder&#39;s weird <code>String</code> vs <code>std::string</code> issues.  Again, thanks for the help &amp; clarification :)"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "is_accepted": true, "score": 0, "last_activity_date": 1487198717, "creation_date": 1487198717, "answer_id": 42261530, "question_id": 42260673, "link": "https://stackoverflow.com/questions/42260673/c-boost-filesystem-path-from-variable-string/42261530#42261530", "title": "c++ - BOOST filesystem path from variable string", "body": "<p>Thanks GManNickG - you actually managed to solve my issue. I'm using C++ builder 10.1, and was able to mess with <code>String</code> for a while, assigning it values, etc.  It was actually the <code>ShowMessage()</code> <a href=\"http://www.functionx.com/bcb/functions/showmsg.htm\" rel=\"nofollow noreferrer\">method</a> that led me to my answer - in c++ builder, it wants an AnsiString argument to work, and a std::string wouldn't compile.  C++ Builder 10.1 defines <code>String</code> to be an AnsiString, not std::string.  Again, I'm newish to c++ so when <code>using namespace std</code> I didn't realize the difference (most of my prior knowledge of Obj Oriented is from java where you define a string as <code>String</code>.  </p>\n\n<pre><code>//Working Example in C++ Builder 10.1 Starter\nnamespace fs = boost::filesystem;\nstd::string un = \"/username\";\nstd::string dest = \"C:/Users\" + un;  //concatenation test\nfs::path destination (dest); //Works, no compiler error now\n\nstd::string pathStdString = destination.string(); //retrieve 'dest' as std:string from path\nString pathAnsiString = pathStdString.c_str(); //Converts std::string to ansi\n\nShowMessage(pathAnsiString); //Output box showing the path (valid in C++ Builder)\n</code></pre>\n\n<p>Hopefully this helps someone else coming along with a similar issue.  Also, <a href=\"http://www.tek-tips.com/viewthread.cfm?qid=648627\" rel=\"nofollow noreferrer\">link</a> to how std::converts to Ansi in case anyone finds it useful.</p>\n"}], "owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7464, "favorite_count": 0, "accepted_answer_id": 42261530, "answer_count": 1, "score": 0, "last_activity_date": 1487198717, "creation_date": 1487195154, "last_edit_date": 1487195861, "question_id": 42260673, "link": "https://stackoverflow.com/questions/42260673/c-boost-filesystem-path-from-variable-string", "title": "c++ - BOOST filesystem path from variable string", "body": "<p>I ran into this issue when creating a <code>boost::filesystem::path</code> object (boost v1.55). I couldn't figure out how to create a path from from a String variable, or concatenation of Strings?</p>\n\n<pre><code>//Example 1\nnamespace fs = boost::filesystem;\nString dest = \"C:/Users/username\";  \nfs::path destination (dest); //Error here\n\n//Example 2\nnamespace fs = boost::filesystem;\nString user = \"username\";\nfs::path destination (\"C:/Users/\" + user); //Error here as well.\n\n//Example 3\nnamespace fs = boost::filesystem;\nfs::path destination (\"C:/Users/username\");\n</code></pre>\n\n<p>I've only been able to create a path object when the entire string is specified between double quotes like example 3 above, but this does not allow for a variable input.  </p>\n\n<p>Basically, how would I implement the <code>fs::path</code> object class using a String as my starting point?</p>\n\n<p>Thanks for any assistance!</p>\n\n<p><strong>edit</strong></p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_55_0/libs/filesystem/doc/reference.html#class-path\" rel=\"nofollow noreferrer\">Link</a> to boost/filesystem path documentation.  Relearning c++, so a some of it is still a bit over my head... I don't quite understand how the constructor works here... and really don't know what to ask at this point.... I'd definitely appreciate any pointers.</p>\n"}, {"tags": ["c++", "cython"], "comments": [{"owner": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1487195286, "post_id": 42260605, "comment_id": 71679039, "body": "I&#39;m not familiar with <code>Cython.build</code>, but from the build log you can see that it&#39;s compiling <code>primes.o</code> from <code>primes.cpp</code> <i>twice</i>, and then when it tries to build the <code>.so</code> it&#39;s trying to link in <code>primes.o</code> twice."}, {"owner": {"reputation": 790, "user_id": 1905506, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0635ccd3a14b9c2801ccb180ee78abe?s=128&d=identicon&r=PG", "display_name": "Roy", "link": "https://stackoverflow.com/users/1905506/roy"}, "reply_to_user": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1487202100, "post_id": 42260605, "comment_id": 71681914, "body": "Your observation is correct. I also observed that. My OP was trying to ask &quot;why implementation in primes.cpp is linked twice&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 790, "user_id": 1905506, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0635ccd3a14b9c2801ccb180ee78abe?s=128&d=identicon&r=PG", "display_name": "Roy", "link": "https://stackoverflow.com/users/1905506/roy"}, "edited": false, "score": 1, "creation_date": 1487197760, "post_id": 42261110, "comment_id": 71680297, "body": "Indeed, as you said, naming both <code>.cpp</code> and <code>.pyx</code> using the same primary filename was the problem. However, it&#39;s unexpected for me, and I&#39;d like to think it&#39;s an issue on Cython side, since it generates a build folder anyways, and I&#39;d expect any intermediate file to be placed into the build folder. But anyways, thank you for your answer!"}, {"owner": {"reputation": 790, "user_id": 1905506, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0635ccd3a14b9c2801ccb180ee78abe?s=128&d=identicon&r=PG", "display_name": "Roy", "link": "https://stackoverflow.com/users/1905506/roy"}, "edited": false, "score": 0, "creation_date": 1487198199, "post_id": 42261110, "comment_id": 71680477, "body": "I further discovered that the <code>.pyx</code> file should have the same name as the package name, since renaming it into something like <code>wrapper.pyx</code> will lead to <code>ImportError: dynamic module does not define module export function (PyInit_prime)</code>. The hardcoded naming rules here are quite easy to miss for newbies IMHO."}], "tags": [], "owner": {"reputation": 261, "user_id": 3508401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/meTxn.png?s=128&g=1", "display_name": "Thomas Foster", "link": "https://stackoverflow.com/users/3508401/thomas-foster"}, "is_accepted": true, "score": 3, "last_activity_date": 1487196867, "creation_date": 1487196867, "answer_id": 42261110, "question_id": 42260605, "link": "https://stackoverflow.com/questions/42260605/cython-why-duplicate-symbol/42261110#42261110", "title": "Cython: why &quot;duplicate symbol&quot;?", "body": "<p>Could you rename <code>primes.cpp</code> to e.g. <code>primesc.cpp</code>?  I think <code>primes.pyx</code> is compiled to <code>primes.cpp</code> by Cython as part of the build, so there's a filename clash.</p>\n"}], "owner": {"reputation": 790, "user_id": 1905506, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0635ccd3a14b9c2801ccb180ee78abe?s=128&d=identicon&r=PG", "display_name": "Roy", "link": "https://stackoverflow.com/users/1905506/roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 42261110, "answer_count": 1, "score": 2, "last_activity_date": 1487196867, "creation_date": 1487194865, "last_edit_date": 1487196660, "question_id": 42260605, "link": "https://stackoverflow.com/questions/42260605/cython-why-duplicate-symbol", "title": "Cython: why &quot;duplicate symbol&quot;?", "body": "<p>I'm new to Cython, so please forgive me if this is a noob question. I'm trying to modify the <a href=\"http://cython.readthedocs.io/en/latest/src/tutorial/cython_tutorial.html#primes\" rel=\"nofollow noreferrer\">primes example</a> into a pure c++ (.h/.cpp) implementation which then is wrapped by a .pyx file.</p>\n\n<p><strong>primes.h:</strong></p>\n\n<pre><code>#include &lt;list&gt;\n\nstd::list&lt;int&gt; primes2_c(int maxn);\n</code></pre>\n\n<p><strong>primes.cpp</strong>:</p>\n\n<pre><code>#include \"primes.h\"\n\n#include &lt;list&gt;\n\nstd::list&lt;int&gt; primes2_c(int maxn) {\n    int n;\n    std::list&lt;int&gt; ret;\n    n = 2;\n    while (n &lt; maxn) {\n        auto it = ret.begin();\n        for (; it != ret.end() &amp;&amp; n % *it != 0; it++);\n        if (it == ret.end()) {\n            ret.push_back(n);\n        }\n        n++;\n    }\n\n    return ret;\n}\n</code></pre>\n\n<p><strong>primes.pyx</strong>:</p>\n\n<pre><code>cdef extern from \"primes.h\":\n    list[int] primes2_c(int)\n\ndef primes2(kmax):\n    ret = primes2_c(kmax)\n    return ret\n</code></pre>\n\n<p><strong>primes.setup</strong>:</p>\n\n<pre><code>from distutils.core import setup, Extension\nfrom Cython.Build import cythonize\n\nsetup(\n    name='primes',\n    ext_modules=cythonize(Extension(\n        'primes',\n        ['primes.pyx', 'primes.cpp'],\n        language='c++',\n        extra_compile_args=[\"-std=c++11\"],\n        extra_link_args=[\"-std=c++11\"],\n    ))\n)\n</code></pre>\n\n<p>Then I run the compilation and see this error:</p>\n\n<pre><code>[cython (master)]$ python primes.setup build_ext --inplace\nrunning build_ext\nbuilding 'primes' extension\n/usr/bin/clang -fno-strict-aliasing -Wsign-compare -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch i386 -arch x86_64 -g -I/Users/.../venv/cython/include -I/Library/Frameworks/Python.framework/Versions/3.5/include/python3.5m -c primes.cpp -o build/temp.macosx-10.6-intel-3.5/primes.o -std=c++11\n/usr/bin/clang -fno-strict-aliasing -Wsign-compare -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -arch i386 -arch x86_64 -g -I/Users/.../venv/cython/include -I/Library/Frameworks/Python.framework/Versions/3.5/include/python3.5m -c primes.cpp -o build/temp.macosx-10.6-intel-3.5/primes.o -std=c++11\n/usr/bin/clang++ -bundle -undefined dynamic_lookup -arch i386 -arch x86_64 -g build/temp.macosx-10.6-intel-3.5/primes.o build/temp.macosx-10.6-intel-3.5/primes.o -o /Users/.../cython/primes.cpython-35m-darwin.so -std=c++11\nclang: warning: libstdc++ is deprecated; move to libc++ with a minimum deployment target of OS X 10.9\nclang: warning: libstdc++ is deprecated; move to libc++ with a minimum deployment target of OS X 10.9\nduplicate symbol __Z9primes2_ci in:\n    build/temp.macosx-10.6-intel-3.5/primes.o\nld: 1 duplicate symbol for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nerror: command '/usr/bin/clang++' failed with exit status 1\n[cython (master)]$\n</code></pre>\n\n<p>My understanding is that <strong>primes.pyx</strong> only reads the API of <code>primes2_c()</code> but not the implementation. So the only implementation provided for the same function should be from the reference to <strong>primes.cpp</strong> in <strong>primes.setup</strong>.</p>\n"}, {"tags": ["c++", "performance", "constructor", "assignment-operator", "member-initialization"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1487194433, "post_id": 42260463, "comment_id": 71678593, "body": "That would seem to expect the compiler to perform a complete code analysis of what happens in the body of the constructor, which it probably won&#39;t do. So yes, initialisation lists are, magic compilers aside, more efficient, and also, IMHO, easier to read."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1487194486, "post_id": 42260463, "comment_id": 71678629, "body": "the compiler could only &quot;elide&quot; the default construction through the &quot;as-if&quot; rule, so it needs to be able to figure out there is no difference. Given that it is trivial to avoid this by suitably initializing, why not do it?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487194547, "post_id": 42260463, "comment_id": 71678656, "body": "Initialization followed by assignment operator is not a copy-elision scenario"}], "answers": [{"tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": false, "score": 10, "last_activity_date": 1487195472, "last_edit_date": 1487195472, "creation_date": 1487194653, "answer_id": 42260548, "question_id": 42260463, "link": "https://stackoverflow.com/questions/42260463/are-member-initialization-lists-really-more-efficient/42260548#42260548", "title": "Are member-initialization lists really more efficient?", "body": "<p>In the words of <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321113586\" rel=\"noreferrer\" rel=\"nofollow noreferrer\"><strong>Alexandrescu &amp; Sutter</strong></a> (item 9) <strong>Don't pessimize prematurely</strong></p>\n\n<blockquote>\n  <p>Avoiding premature optimization does not imply gratuitously hurting\n  efficiency. By premature pessimization we mean writing such gratuitous\n  potential inefficiencies as:</p>\n  \n  <p>\u2022 Defining pass-by-value parameters when pass-by-reference is\n  appropriate. (See Item25.)</p>\n  \n  <p>\u2022 Using postfix + + when the prefix version is just as good. (See\n  Item 28.)</p>\n  \n  <p>\u2022 Using assignment inside constructors instead of the initializer\n  list. (See Item 48.)</p>\n</blockquote>\n\n<p>Whenever you are writing assignments inside constructors, your code reviewers will be on alert: is something special going on? Did he really want some special two-stage initialization (because there is an implicit default construction of the member being generated anyway!). Don't surprise the readers of your code gratuitously. </p>\n\n<p>Note that Alexandrescu &amp; Sutter go on in Item 48 to discuss the <em>potential</em> inefficiency, but don't claim anywhere that there an <em>actual</em> inefficiency in real optimized code. That is also beside the point, it's about <strong>expressing intent</strong> and avoiding the <em>risk</em> of inefficiency.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 4, "last_activity_date": 1487195728, "last_edit_date": 1487195728, "creation_date": 1487194989, "answer_id": 42260627, "question_id": 42260463, "link": "https://stackoverflow.com/questions/42260463/are-member-initialization-lists-really-more-efficient/42260627#42260627", "title": "Are member-initialization lists really more efficient?", "body": "<blockquote>\n  <p>Are member initialization lists actually more efficient? If so, is it for this reason?</p>\n</blockquote>\n\n<p>Generally yes. With member initialization you pass value directly to a constructor, otherwise a default-constructed object would be created and then assignment operator would be called. Note this is not about \"temporary\" mentioned in quote you provided, this is about field itself.</p>\n\n<p>You can see it live <a href=\"http://ideone.com/9Oifea\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>class Verbose {\npublic:\n    Verbose() { std::cout &lt;&lt; \"Verbose::Verbose()\" &lt;&lt; std::endl; }\n    Verbose( int ) { std::cout &lt;&lt; \"Verbose::Verbose(int)\" &lt;&lt; std::endl; }\n    Verbose &amp;operator=( int )  { std::cout &lt;&lt; \"Verbose::operator=(int)\" &lt;&lt; std::endl; }\n};\n\nclass A {\npublic:\n    A() : v( 0 ) {}\n    A(int)  { v = 0; }\nprivate:\n    Verbose v;    \n};\n\n\nint main() {\n    std::cout &lt;&lt; \"case 1 --------------------\" &lt;&lt; std::endl;\n    A a1;\n    std::cout &lt;&lt; \"case 2 --------------------\" &lt;&lt; std::endl;\n    A a2( 0 );\n    // your code goes here\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>case 1 --------------------\nVerbose::Verbose(int)\ncase 2 --------------------\nVerbose::Verbose()\nVerbose::operator=(int)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1487195886, "post_id": 42260767, "comment_id": 71679340, "body": "that&#39;s actually depressing to see that modern compilers won&#39;t optimize this away."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 9, "last_activity_date": 1487195889, "last_edit_date": 1487195889, "creation_date": 1487195542, "answer_id": 42260767, "question_id": 42260463, "link": "https://stackoverflow.com/questions/42260463/are-member-initialization-lists-really-more-efficient/42260767#42260767", "title": "Are member-initialization lists really more efficient?", "body": "<p>Using member init list,</p>\n\n<pre><code>#include &lt;string&gt;\n\nstruct Fred {\n  Fred() : x_(\"hello\") { }\n  std::string x_;\n};\n\nint main() {\n  Fred fred;\n}\n</code></pre>\n\n<p>Clang 3.9.1 and gcc 6.3 generate the following with <code>-O3 -fno-exceptions</code> (<a href=\"https://godbolt.org/g/tdiIr0\">Compiler Explorer</a>):</p>\n\n<pre><code>main:                                   # @main\n        xor     eax, eax\n        ret\n</code></pre>\n\n<p>If we do an assignment in the body instead:</p>\n\n<pre><code>#include &lt;string&gt;\n\nstruct Fred {\n  Fred() { x_ = \"hello\"; }\n  std::string x_;\n};\n\nint main() {\n  Fred fred;\n}\n</code></pre>\n\n<p>both generate a lot more code, e.g. Clang 3.9.1 outputs this:</p>\n\n<pre><code>main:                                   # @main\n        push    rbx\n        sub     rsp, 32\n        lea     rbx, [rsp + 16]\n        mov     qword ptr [rsp], rbx\n        mov     qword ptr [rsp + 8], 0\n        mov     byte ptr [rsp + 16], 0\n        lea     rdi, [rsp]\n        xor     esi, esi\n        xor     edx, edx\n        mov     ecx, .L.str\n        mov     r8d, 5\n        call    std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_M_replace(unsigned long, unsigned long, char const*, unsigned long)\n        mov     rdi, qword ptr [rsp]\n        cmp     rdi, rbx\n        je      .LBB0_2\n        call    operator delete(void*)\n.LBB0_2:\n        xor     eax, eax\n        add     rsp, 32\n        pop     rbx\n        ret\n\n.L.str:\n        .asciz  \"hello\"\n</code></pre>\n\n<p>So it seems member init lists really are more efficient, at least for some cases, even with modern compilers.</p>\n"}], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1269, "favorite_count": 1, "accepted_answer_id": 42260767, "answer_count": 3, "score": 8, "last_activity_date": 1487195978, "creation_date": 1487194301, "last_edit_date": 1487195978, "question_id": 42260463, "link": "https://stackoverflow.com/questions/42260463/are-member-initialization-lists-really-more-efficient", "title": "Are member-initialization lists really more efficient?", "body": "<p>I agree with the consensus that it's generally best to initialise C++ data members in a member initialization list rather than the body of a constructor, but I am sceptical of <a href=\"https://isocpp.org/wiki/faq/ctors#init-lists\" rel=\"nofollow noreferrer\">this explanation</a></p>\n\n<blockquote>\n  <p>The other (inefficient) way to build constructors is via assignment, such as: <code>Fred::Fred() { x_ = whatever; }.</code> In this case the expression whatever causes a separate, temporary object to be created, and this temporary object is passed into the x_ object\u2019s assignment operator. Then that temporary object is destructed at the <code>;</code>. That\u2019s inefficient.</p>\n</blockquote>\n\n<p>Is this actually correct? I would have expected the compiler to elide the default-constructed temporary object which is immediately replaced by assignment in the body. I don't know why I expected this but having read the above claim I guess I have been quietly assuming it for years.</p>\n\n<p>Are member initialization lists actually more efficient? If so, is it for this reason?</p>\n"}, {"tags": ["c++", "gcc", "c++17", "bug-reporting"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 3, "creation_date": 1487195799, "post_id": 42260453, "comment_id": 71679300, "body": "<i>&quot;Is it even worth to put up an bug report for the trunk version? Is it even wanted?&quot;</i> I would say so, yes - maybe more so than any other version!"}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1487196540, "post_id": 42260453, "comment_id": 71679670, "body": "it appears that you can only search bugzilla if you are logged on, and that new accounts are currently not allowed due to spam. So you are out of luck unless someone files this bug for you."}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1487247024, "post_id": 42260453, "comment_id": 71703164, "body": "Well I think it might be in bugzilla now. I checked today and i believe there was a submission today which mighy touch my problem as well. <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=79549\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=79549</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1487258726, "post_id": 42277501, "comment_id": 71712306, "body": "Thank you. I&#39;ve written an email to get an account and access to bug reports. No Answer yet... I have more ICE&#39;s, which i could deliver. I do alot of development with Concepts and I see errors from time to time."}], "tags": [], "owner": {"reputation": 635, "user_id": 3540970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WfNxP.jpg?s=128&g=1", "display_name": "octoploid", "link": "https://stackoverflow.com/users/3540970/octoploid"}, "is_accepted": true, "score": 1, "last_activity_date": 1487257163, "creation_date": 1487257163, "answer_id": 42277501, "question_id": 42260453, "link": "https://stackoverflow.com/questions/42260453/how-to-report-this-ice-for-gcc-trunk/42277501#42277501", "title": "How to report this ICE for gcc-trunk", "body": "<p>Yes, all ICEs should be reported. </p>\n\n<p>I've opened <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=79556\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=79556</a> for you.</p>\n\n<p>Thanks.</p>\n"}, {"tags": [], "owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "is_accepted": false, "score": 0, "last_activity_date": 1606763690, "creation_date": 1606763690, "answer_id": 65079757, "question_id": 42260453, "link": "https://stackoverflow.com/questions/42260453/how-to-report-this-ice-for-gcc-trunk/65079757#65079757", "title": "How to report this ICE for gcc-trunk", "body": "<p>I want to answer for all readers, that find your question:</p>\n<ul>\n<li>Yes, it is highly appreciated to file bug reports for trunk. During the development stage, it is far more easy to fix bugs compared to after a release.</li>\n<li>Yes, it is wanted. If the bug or regression was introduced a couple of days or weeks ago, the change is still present and less difficult to fix.</li>\n</ul>\n<p>How should you proceed?</p>\n<ul>\n<li>Try with the lastet version of trunk or as new as possible.</li>\n<li>Recompile your code with added <code>-save-temps</code>. This will produce a .i (for C, it will be .ii for C++) file.</li>\n<li>Compile with same flags as above but with the .i/.ii file to check that the problem remains.</li>\n<li>Post bug at gcc.gnu.org/bugzilla/, include the error message, GCC version (<code>gcc - v</code>), and attach your .i/-ii file.</li>\n</ul>\n<p>By the way, LLVM/Clang work in a similar way: <a href=\"https://releases.llvm.org/1.9/docs/HowToSubmitABug.html\" rel=\"nofollow noreferrer\">https://releases.llvm.org/1.9/docs/HowToSubmitABug.html</a></p>\n<p>Further reading:</p>\n<ul>\n<li><a href=\"https://gcc.gnu.org/bugs/\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugs/</a></li>\n<li><a href=\"https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide\" rel=\"nofollow noreferrer\">https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide</a></li>\n</ul>\n"}], "owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 42277501, "answer_count": 2, "score": 3, "last_activity_date": 1606763690, "creation_date": 1487194275, "last_edit_date": 1487194861, "question_id": 42260453, "link": "https://stackoverflow.com/questions/42260453/how-to-report-this-ice-for-gcc-trunk", "title": "How to report this ICE for gcc-trunk", "body": "<p>I would like to get this code work</p>\n\n<pre><code>#include &lt;cstddef&gt;\n\ntemplate &lt;bool B, auto T, auto F&gt;\nstruct conditional { static constexpr auto value = T; };\n\ntemplate &lt;auto T, auto F&gt;\nstruct conditional&lt;false, T, F&gt; { static constexpr auto value = F; };\n\ntemplate &lt;std::size_t N, auto... Dims&gt;\nstruct static_extent;\n\ntemplate &lt;std::size_t N&gt;\nstruct static_extent&lt;N&gt; {\n   static constexpr std::size_t value = 0;\n};\n\ntemplate &lt;std::size_t N, auto Dim, auto... Dims&gt;\nstruct static_extent&lt;N, Dim, Dims...&gt; {\n  static constexpr auto value =\n     conditional&lt;\n        (N == 0),\n        Dim,\n        static_extent&lt;N-1, Dims...&gt;::value\n     &gt;::value;\n};\n\nenum class dynamic_extent_tag {};\ninline constexpr dynamic_extent_tag dyn{-1};\n\nint main()\n{\n    static_assert(static_extent&lt;1, 33, dyn, 19&gt;::value == dyn, \"\");\n    static_assert(static_extent&lt;0, 33, dyn, 19&gt;::value == 33, \"\");\n}\n</code></pre>\n\n<p>I have tested it on <a href=\"https://godbolt.org/g/iFvTKs\" rel=\"nofollow noreferrer\">godbolt</a> and it seems to work with clang. I am unfortunately bound to gcc which gives me an ICE plus a stack trace. I tried to surf on their <a href=\"https://gcc.gnu.org/bugzilla/\" rel=\"nofollow noreferrer\">bugzilla</a> and i am kinda lost. </p>\n\n<p>Is it even worth to put up an bug report for the trunk version? Is it even wanted?\nDoes someone knows if it is already a known problem?\nI looked for the keyword \"ice\" but I could not find anything useful there.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1569, "user_id": 1826647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58eb470a46f1a759c6c630986fe04a12?s=128&d=identicon&r=PG", "display_name": "JChrist", "link": "https://stackoverflow.com/users/1826647/jchrist"}, "edited": false, "score": 0, "creation_date": 1487194995, "post_id": 42260372, "comment_id": 71678876, "body": "Welcome to StackOverflow! Please take a moment to read how to write a minimal complete verifiable example of your problem here: <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>. Right now, your question does not contain enough information for anyone to understand what is your particular issue and how to help you"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7562136, "user_type": "registered", "profile_image": "https://graph.facebook.com/1190382561009068/picture?type=large", "display_name": "Mohamed Abdalla", "link": "https://stackoverflow.com/users/7562136/mohamed-abdalla"}, "edited": false, "score": 0, "creation_date": 1487241844, "post_id": 42260590, "comment_id": 71699321, "body": "Hi Bowen Kuang when I run to code who wirite it and enter tow number (1,10) then output was print all number from 1 to 10 but I want to print prime numberes for all number between tow number that enter as(2,3,5,7) please rewrite it"}, {"owner": {"reputation": 25, "user_id": 7562136, "user_type": "registered", "profile_image": "https://graph.facebook.com/1190382561009068/picture?type=large", "display_name": "Mohamed Abdalla", "link": "https://stackoverflow.com/users/7562136/mohamed-abdalla"}, "edited": false, "score": 0, "creation_date": 1487259992, "post_id": 42260590, "comment_id": 71713308, "body": "I want to code as this but it need to editing to become right:    #include&lt;iostream&gt; using namespace std;  void prime(int x, int y){ for(int i=m; i&lt;n; i++) { for (int i=1; i&lt;m; i++) {  if(i %m==0) p=p+1;  } if(p=2) cout &lt;&lt;m &lt;&lt;endl;  } }  int main() { int m, n;  cout &lt;&lt;&quot;enter two numbers&quot;&lt;&lt;endl;  cin&gt;&gt;m&gt;&gt;n;  prime(m, n);  return 0;  }"}], "tags": [], "owner": {"reputation": 90, "user_id": 7512622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8084a1584184542e7978d466fa384911?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Kuang", "link": "https://stackoverflow.com/users/7512622/bowen-kuang"}, "is_accepted": false, "score": 1, "last_activity_date": 1487247095, "last_edit_date": 1487247095, "creation_date": 1487194810, "answer_id": 42260590, "question_id": 42260372, "link": "https://stackoverflow.com/questions/42260372/prime-numbers-between-two-numbers/42260590#42260590", "title": "Prime numbers between two numbers", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std; \nvoid prime(int m, int n)\n{\n    for(int i=m; i&lt;n; i++)\n    {\n        bool isPrimeNumber = false; \n        for (int j=1; j&lt;m; j++)\n        {\n            if(i%j==0&amp;&amp;j!=1) {\n                isPrimeNumber = true;\n                break;\n            } \n        }\n        if(!isPrimeNumber)\n          cout &lt;&lt; i &lt;&lt; endl; \n    }\n}\n\n\nint main()\n{\n    int m, n; \n    cout &lt;&lt; \"enter two numbers\" &lt;&lt; endl; \n    cin&gt;&gt;m&gt;&gt;n; \n    prime(m, n); \n    return 0; \n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7562136, "user_type": "registered", "profile_image": "https://graph.facebook.com/1190382561009068/picture?type=large", "display_name": "Mohamed Abdalla", "link": "https://stackoverflow.com/users/7562136/mohamed-abdalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "closed_date": 1487204791, "answer_count": 1, "score": 0, "last_activity_date": 1487247095, "creation_date": 1487194013, "last_edit_date": 1487194693, "question_id": 42260372, "link": "https://stackoverflow.com/questions/42260372/prime-numbers-between-two-numbers", "closed_reason": "Needs details or clarity", "title": "Prime numbers between two numbers", "body": "<p>I try write program print prime numbers between two numbers but I have problem when I run it.</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nvoid prime(int m, int n) {\n    int p = 0;\n    for (int i = m; i &lt; n; i++)\n    {\n        for (int i = 1; i &lt; m; i++)\n        {\n            if (i %m == 0)\n                p = p + 1;\n        }\n        if (p = 2)\n            cout &lt;&lt; m &lt;&lt; endl;\n    }\n}\nint main()\n{\n    int m, n;\n    cout &lt;&lt; \"enter two numbers\" &lt;&lt; endl;\n    cin &gt;&gt; m &gt;&gt; n;\n    prime(m, n);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1487194100, "post_id": 42260352, "comment_id": 71678412, "body": "What&#39;s the value of the QString?"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1487194109, "post_id": 42260352, "comment_id": 71678418, "body": "<code>std::stod(&quot;1234.56&quot;)</code>."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1487194187, "post_id": 42260352, "comment_id": 71678461, "body": "You must also be including some Qt header as well as the ones mentioned."}, {"owner": {"reputation": 464, "user_id": 2302877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t5G0L.jpg?s=128&g=1", "display_name": "Mircea Paul Muresan", "link": "https://stackoverflow.com/users/2302877/mircea-paul-muresan"}, "edited": false, "score": 0, "creation_date": 1487194333, "post_id": 42260352, "comment_id": 71678539, "body": "I have also included QString, and I have also tried std::stod and strtod. The value from the file is 0,04019173434"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1487194421, "post_id": 42260352, "comment_id": 71678590, "body": "<code>0,04019173434</code> won&#39;t be converted unless you have set the appropriate <code>locale</code> I believe, and I don&#39;t know how to do that with <code>QString</code>."}, {"owner": {"reputation": 464, "user_id": 2302877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t5G0L.jpg?s=128&g=1", "display_name": "Mircea Paul Muresan", "link": "https://stackoverflow.com/users/2302877/mircea-paul-muresan"}, "edited": false, "score": 0, "creation_date": 1487194651, "post_id": 42260352, "comment_id": 71678700, "body": "well, I have tried to convert it using string or atof but the result is the same. The QString conversion method is just of the multiple methods I have tried...If you know any other way in which I could convert the string to double I would appreciate the help!"}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1487194720, "post_id": 42260352, "comment_id": 71678731, "body": "It should be possible to set a locale object with <code>QLocale</code> that takes into account the decimal separator and then create a QString from double with <code>QLocale::toString</code> and convert a string to a double with <code>QLocale::toDouble</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "reply_to_user": {"reputation": 464, "user_id": 2302877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t5G0L.jpg?s=128&g=1", "display_name": "Mircea Paul Muresan", "link": "https://stackoverflow.com/users/2302877/mircea-paul-muresan"}, "edited": false, "score": 0, "creation_date": 1487198751, "post_id": 42260685, "comment_id": 71680714, "body": "Good to know that. For future reference please specify the comma stuff in your question and not only in the comment."}], "tags": [], "owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "is_accepted": true, "score": 2, "last_activity_date": 1487195204, "creation_date": 1487195204, "answer_id": 42260685, "question_id": 42260352, "link": "https://stackoverflow.com/questions/42260352/string-to-double-conversion-allways-0/42260685#42260685", "title": "String to double conversion allways 0", "body": "<p>If the decimal separator is a comma you must handle with locale.</p>\n\n<p>Since you're using Qt is possible to set a <code>QLocale</code> object and setting a locale that uses the comma (I've only take one that works, it's not specific to your situation).</p>\n\n<pre><code>#include &lt;QDebug&gt;\n#include &lt;QLocale&gt;\n\nint main(int argc, char *argv[]) {\n  QString t_string(\"0,04019173434\");\n  QLocale locale(QLocale::Catalan);\n  double number = locale.toDouble(t_string);\n  qDebug() &lt;&lt; \"String is\" &lt;&lt; t_string &lt;&lt; \", number is \" &lt;&lt; number;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 464, "user_id": 2302877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t5G0L.jpg?s=128&g=1", "display_name": "Mircea Paul Muresan", "link": "https://stackoverflow.com/users/2302877/mircea-paul-muresan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 42260685, "answer_count": 1, "score": 1, "last_activity_date": 1487195204, "creation_date": 1487193943, "question_id": 42260352, "link": "https://stackoverflow.com/questions/42260352/string-to-double-conversion-allways-0", "title": "String to double conversion allways 0", "body": "<p>I am trying to read a double precision floating point number from a binary file and assign it to a static double variable. I have tried numerous methods however the result of the conversion regardless of the method is 0.The number is correctly read from the file(as an array of characters), however something happens when I try to convert it... The included headers are: # include &lt; string > # include &lt; sstream > #include &lt; stdlib.h ></p>\n\n<p>The code snippet of the method is given bellow:</p>\n\n<pre><code>FILE * pFile;\nchar mystring [100];\ndouble v;\nstring temp;\nQString t_string;\npFile = fopen (\"path_to_binary_file\",\"r\");\nif (pFile != NULL)\n{\n   if ( fgets (mystring , 100 , pFile) != NULL )\n    {\n     //I am putting a \\0 on the last position since my array finishes with  \\n\n    mystring[strlen(mystring) - 1] = '\\0';\n\n   temp.assign(mystring, mystring + 12);\n   t_string = QString::fromStdString(temp);\n  //  std::istringstream s(temp);\n   // s &gt;&gt; sheethConstant;\n\n    v = t_string.toDouble();//atof(mystring);\n    static_variable = v;\n   }\nfclose (pFile);\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 2, "creation_date": 1487194013, "post_id": 42260260, "comment_id": 71678381, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3588526/how-to-turn-off-beeping-when-pressing-enter-on-a-single-line-edit-control-under\">How to turn off beeping when pressing ENTER on a single-line EDIT control under Windows CE?</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487194121, "post_id": 42260260, "comment_id": 71678423, "body": "Is your <i>Find</i> button created with the <code>BS_DEFPUSHBUTTON</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775951.aspx\" rel=\"nofollow noreferrer\">button style</a>?"}, {"owner": {"reputation": 119, "user_id": 5597409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025018dff1ef009d25cdace560383c40?s=128&d=identicon&r=PG&f=1", "display_name": "George T.", "link": "https://stackoverflow.com/users/5597409/george-t"}, "edited": false, "score": 0, "creation_date": 1487194344, "post_id": 42260260, "comment_id": 71678549, "body": "Yes, of course, Find has the BS_DEFPUSHBUTTON. that&#39;s why its activated in modal...  Regarding the previous comment, sub-classing will probably do the job, but the dialog woks fine in modal; why it should not work in modeless?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1487194726, "post_id": 42260260, "comment_id": 71678738, "body": "Are you calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645498.aspx\" rel=\"nofollow noreferrer\">IsDialogMessage</a> as part of your message dispatching loop? That&#39;s what the modal dialog loop does, but since you are running a modeless dialog, you are responsible for handling keyboard navigation yourself."}], "owner": {"reputation": 119, "user_id": 5597409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025018dff1ef009d25cdace560383c40?s=128&d=identicon&r=PG&f=1", "display_name": "George T.", "link": "https://stackoverflow.com/users/5597409/george-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1487193536, "creation_date": 1487193536, "question_id": 42260260, "link": "https://stackoverflow.com/questions/42260260/handling-of-enter-key-in-a-modeless-dialong", "title": "Handling of ENTER key in a modeless dialong", "body": "<p>I have a simple Dialog Box having an entry field ( one line ) a default \"Find\" button, and a Cancel button.</p>\n\n<p>When I instantiate this dialog as modal, if I hit ENTER while I am typing the Find button is activated, which is the desired behavior. \nWhen I instantiate it as modeless and hit ENTER while in the entry field the speaker beeps instead.</p>\n\n<p>Has anyone any ideas what I have to do to get the same behavior in modeless mode as in modal?</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["c++", "encryption", "openssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1487197006, "post_id": 42260141, "comment_id": 71679902, "body": "Maybe take a quick look at <a href=\"https://www.google.com/search?q=openssl+json+aes+decryption+site%3Astackoverflow.com\" rel=\"nofollow noreferrer\">openssl json aes decryption</a>. Also, you should <i>not</i> use <code>AES_encrypt</code> and friends. That&#39;s a software-only implementation, so you will not enjoy hardware support, like AES-NI. You should be using <code>EVP_*</code> functions. See <a href=\"http://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1487198238, "post_id": 42260141, "comment_id": 71680490, "body": "For that matter, it is easily doable to set this up using just BIOs and the EVP_xxxx symmetric cipher of your choice (<code>EVP_aes_128_cbc()</code> for example). Not exactly a C++-ish mechanism, but then again, neither is libcrypto."}], "answers": [{"comments": [{"owner": {"reputation": 1057, "user_id": 3146833, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f082bbc93beb4694e9baf798dcdbd1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Miller", "link": "https://stackoverflow.com/users/3146833/eric-miller"}, "edited": false, "score": 0, "creation_date": 1487196886, "post_id": 42260385, "comment_id": 71679831, "body": "Wow.  Thanks!  I can&#39;t believe I missed some of this."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 3, "last_activity_date": 1487194043, "creation_date": 1487194043, "answer_id": 42260385, "question_id": 42260141, "link": "https://stackoverflow.com/questions/42260141/openssl-and-json-file-encryption-and-decryption/42260385#42260385", "title": "OpenSSL and JSON file encryption and decryption", "body": "<p>Here's one obvious error:</p>\n\n<pre><code>stringstream encryptedStreamStr;\nencryptedStreamStr &lt;&lt; inEncryptedFile.rdbuf();\n</code></pre>\n\n<p>This is presumed to be your encrypted file. This is binary data.</p>\n\n<pre><code>string encryptedStr = encryptedStreamStr.str();\n</code></pre>\n\n<p>A <code>std::string</code> is meant to be used with text strings. Not binary data. Although a <code>std::string</code> shouldn't have issues with swallowing binary data that was read in the above manner, the following is going to be a problem:</p>\n\n<pre><code>int lenDecrypt = strlen(encryptedStr.c_str());\n</code></pre>\n\n<p><code>strlen()</code> is a C library function that knows absolutely nothing about C++ strings. It determines the length of the string by looking for the first '\\0' byte. Which is unlikely to give you the true size of the encrypted binary blob, sine the binary blob would certainly have <code>\\0</code> bytes. So, at the very least, the computed size of the encrypted file is going to be wrong here.</p>\n\n<p>The shown code is also using <code>strlen</code> when reading the original file to encrypt. It's unclear whether the original file is plain text or binary. If the file getting encrypted is binary, the same bug occurs when reading the original file.</p>\n\n<p>Next problem:</p>\n\n<pre><code>for (int k = 0; k &lt;= 16; k++) {\n    outFile &lt;&lt; encryptedbuffer[k];\n}\n</code></pre>\n\n<p>This is going to write 17 bytes to the output file, and not 16, as your obvious intent is.</p>\n\n<p>The same bug occurs when encrypting the file. The original file getting encrypted is getting corrupted right off the bat. Game over.</p>\n\n<p>In conclusion: a <code>std::string</code> is meant to be used, well, with text strings. Although <code>std::string</code> can be used correctly, and safely, with binary data, this'll often lead to confusion.</p>\n\n<p>It's going to be less confusing to use <code>std::vector&lt;char&gt;</code> with binary data, rather than <code>std::string</code>, making it explicit that this is not a text string. It's binary data.</p>\n"}], "owner": {"reputation": 1057, "user_id": 3146833, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f082bbc93beb4694e9baf798dcdbd1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Miller", "link": "https://stackoverflow.com/users/3146833/eric-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1716, "favorite_count": 0, "accepted_answer_id": 42260385, "answer_count": 1, "score": 1, "last_activity_date": 1487197741, "creation_date": 1487193110, "last_edit_date": 1487197741, "question_id": 42260141, "link": "https://stackoverflow.com/questions/42260141/openssl-and-json-file-encryption-and-decryption", "title": "OpenSSL and JSON file encryption and decryption", "body": "<p>I've successfully used the openssl library to encrypt a file (jsonOut.crypto).  However, I can't successfully read that encrypted file into a char array and decrypt with the below c++ code.  </p>\n\n<p>I read the file contents into a string (char array), iterate over that array while decrypting a buffer of 16 bytes, inserting those 16 bits in an array, and inserting that array into a file object.</p>\n\n<p>However, the decrypted file looks like gibberish.  It's different than the encrypted file, but still looks encrypted none the less.  Can someone look through my code for obvious errors?</p>\n\n<p>Please do not suggest another library.  This isn't production code to get the highest level of crypto possible - it's just quickly put something together.</p>\n\n<p>Thanks!</p>\n\n<pre><code>int main()\n{\n    // read json file into memory\n    ifstream inFile;\n    inFile.open(\"file.json\");\n\n    stringstream strStream;\n    strStream &lt;&lt; inFile.rdbuf();\n    string str = strStream.str();\n\n    // create buffer and buffer input/output\n    int len = strlen(str.c_str());\n    unsigned char encryptedbuffer[128];\n\n    // CODE FOR ENCRYPTION\n    unsigned char oneKey[] = \"abcdefghijklmnop\";\n    AES_KEY key;\n\n    // encryption - could make into function?\n    AES_set_encrypt_key(oneKey,128,&amp;key);\n\n    ofstream outFile;\n    outFile.open(\"jsonOut.crypto\");\n\n    for(int i = 0; i &lt;= len; i += 16) {\n        AES_encrypt((const unsigned char *) str.c_str() + i,encryptedbuffer,&amp;key);\n        for (int k = 0; k &lt;= 16; k++) {\n            outFile &lt;&lt; encryptedbuffer[k];\n        }\n    }\n\n    outFile.close();\n    inFile.close();\n\n    // read encrypted file into memory\n    ifstream inEncryptedFile;\n    inEncryptedFile.open(\"jsonOut.crypto\");\n\n    stringstream encryptedStreamStr;\n    encryptedStreamStr &lt;&lt; inEncryptedFile.rdbuf();\n    string encryptedStr = encryptedStreamStr.str();\n\n    // create buffer and buffer input/output\n    int lenDecrypt = strlen(encryptedStr.c_str());\n    unsigned char outbufferDecrypt[lenDecrypt];\n\n    AES_set_decrypt_key(oneKey,128,&amp;key);\n\n    ofstream outFileDecrypt;\n    outFileDecrypt.open(\"jsonOut.decrypt\");\n\n    for(int j = 0; j &lt;= lenDecrypt; j += 16){\n        AES_decrypt((const unsigned char *) encryptedStr.c_str() + j,outbufferDecrypt,&amp;key);\n        for (int k = 0; k &lt;= 16; k++) {\n            outFileDecrypt &lt;&lt; outbufferDecrypt[k];\n        }\n    }\n\n    outFileDecrypt.close();\n    inEncryptedFile.close();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "quicksort", "minimum-spanning-tree", "kruskals-algorithm"], "answers": [{"tags": [], "owner": {"reputation": 395, "user_id": 7558061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIF0G.png?s=128&g=1", "display_name": "Louisiana Hasek", "link": "https://stackoverflow.com/users/7558061/louisiana-hasek"}, "is_accepted": true, "score": 3, "last_activity_date": 1487200757, "last_edit_date": 1487200757, "creation_date": 1487200211, "answer_id": 42261844, "question_id": 42260121, "link": "https://stackoverflow.com/questions/42260121/c-implementation-of-kruskals-algorithm/42261844#42261844", "title": "C++ implementation of Kruskal&#39;s algorithm", "body": "<p>There are a lot of off by one errors in your code, I think because you are numbering your vertices from 1 rather than 0. One of these errors was causing it to crash, and I think another one was causing the wrong result to be produced.</p>\n\n<p>I changed all of the internal numbering to be 0-based and and that has got it to work. I renamed your variables because they were quite preposterously named (what you call a Vertex is an Edge) and I couldn't make sense of the code with them like that.</p>\n\n<p>I'm afraid I lost track of everything I changed, but I expect you can see what I did if you compare it with your original code.</p>\n\n<p>Notice that I added some debug lines. When you can't work out what your code is doing, just print the relevant variables and you will soon see what the problem is.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#define grafMAX 101\n\nFILE *fin = fopen(\"grafin.txt\",\"r\");\nFILE *fout = fopen(\"grafout.txt\",\"w\");\n\nstruct Edge {\n    int first,last,Cost;\n};\n\nvoid read_graf(Edge **g, int *components, int &amp;num_edges, int &amp;num_vertices){\n    int x,y,w;\n    fscanf(fin,\"%d %d\",&amp;num_edges,&amp;num_vertices);\n    *g = (Edge *)malloc(num_edges*sizeof(Edge));\n    for(int i=0;i&lt;num_edges;++i){\n        fscanf(fin,\"%d %d %d\",&amp;x,&amp;y,&amp;w);\n        (*g+i)-&gt;first = x - 1;\n        (*g+i)-&gt;last = y - 1;\n        (*g+i)-&gt;Cost = w;\n    }\n    for(int i=0;i&lt; num_vertices;++i)\n        components[i] = i;\n}\n\nint costMST(Edge *edges, int *answer, int num_edges){\n    int MST = 0;\n    for(int i=0;i&lt;num_edges;++i)\n        MST += edges[answer[i]].Cost;\n    return MST;\n}\n\nvoid print_components(const int* components, int num_components) \n{\n    for (int i = 0; i &lt; num_components; i++) {\n        printf(\"Vertex %d is in component %d\\n\", i, components[i]);\n    }\n    putchar('\\n');\n}\n\nvoid print_edge(const Edge&amp; edge, int index)\n{\n    printf(\"Edge %d connecting %d to %d with weight %d\", index, edge.first, edge.last, edge.Cost);\n}\n\nvoid Kruskal(Edge *edges, int *components, int *answer, int num_edges, int num_vertices){\n    int nr = 0, mini, maxi;\n    for(int i=0;i&lt;num_edges &amp;&amp; nr &lt; num_vertices - 1;++i) {\n        printf(\"Considering \");\n        print_edge(edges[i], i);\n        putchar('\\n');\n        if(components[edges[i].first] != components[edges[i].last]){\n            printf(\"Adding \");\n            print_edge(edges[i], i);\n            putchar('\\n');\n            answer[nr++] = i;\n            if(components[edges[i].first] &lt; components[edges[i].last]){\n                mini = components[edges[i].first];\n                maxi = components[edges[i].last];\n            }\n            else{\n                maxi = components[edges[i].first];\n                mini = components[edges[i].last];\n            }\n            for(int j=0;j&lt;num_vertices;++j)\n                if(components[j] == maxi)\n                    components[j] = mini;\n            print_components(components, num_vertices);\n        }\n        else {\n            printf(\"Rejecting \");\n            print_edge(edges[i], i);\n            putchar('\\n');\n        }\n    }\n}\n\ninline int cmp(const void *a, const void *b){\n    return (((Edge *)a)-&gt;Cost - ((Edge *)b)-&gt;Cost);\n}\n\nint answer[grafMAX], components[grafMAX];\n\nint main(){\n    Edge *edges;\n    int num_edges, num_vertices;\n    read_graf(&amp;edges,components,num_edges,num_vertices);\n    qsort(edges,num_edges,sizeof(Edge),cmp);\n    Kruskal(edges,components,answer,num_edges,num_vertices);\n    fprintf(fout,\"The cost of the MST is: %d.\\n\",costMST(edges,answer,num_vertices - 1));\n    fclose(fin);\n    fclose(fout);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 7105973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4hG72.jpg?s=128&g=1", "display_name": "theSongbird", "link": "https://stackoverflow.com/users/7105973/thesongbird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1335, "favorite_count": 1, "accepted_answer_id": 42261844, "answer_count": 1, "score": 1, "last_activity_date": 1487207545, "creation_date": 1487193057, "last_edit_date": 1487207545, "question_id": 42260121, "link": "https://stackoverflow.com/questions/42260121/c-implementation-of-kruskals-algorithm", "title": "C++ implementation of Kruskal&#39;s algorithm", "body": "<p>I'm trying to implement Kruskal's algorithm. Here is a map of the structures I'm using:</p>\n\n<p>g = array of edges, it keeps the left end and the right end and the edge's weight;</p>\n\n<p>c = array which memorises the conex components; c[N] = the conex component in which we find the Nth vertex;</p>\n\n<p>a = array which memorises the MST;</p>\n\n<p>m = nr of vertexes;</p>\n\n<p>n = nr of nodes.</p>\n\n<p>There are two problems with the following code:</p>\n\n<p>1) For the following input it outputs that the cost of the MST is <em>18</em> (which is wrong, the cost is actually <em>14</em>):</p>\n\n<p>7 ( =m )</p>\n\n<p>6 ( =n )</p>\n\n<p>1 2 9</p>\n\n<p>1 3 5</p>\n\n<p>1 4 2</p>\n\n<p>2 3 7</p>\n\n<p>3 5 3</p>\n\n<p>4 6 1</p>\n\n<p>5 6 1</p>\n\n<p>2) Compiling the code step by step doesn't give any errors, although the actual execution of the program halts at some point, I figure it's when printing the cost of the MST.</p>\n\n<p>Thanks for helping! Here's the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#define grafMAX 101\n\nFILE *fin = fopen(\"grafin.txt\",\"r\");\nFILE *fout = fopen(\"grafout.txt\",\"w\");\n\nstruct Vertex{\n    int first,last,Cost;\n};\n\nvoid read_graf(Vertex **g, int *c, int &amp;m, int &amp;n){\n    int x,y,w;\n    fscanf(fin,\"%d%d\",&amp;m,&amp;n);\n    *g = (Vertex *)malloc(m*sizeof(Vertex));\n    for(int i=1;i&lt;=m;++i){\n        fscanf(fin,\"%d%d%d\",&amp;x,&amp;y,&amp;w);\n        (*g+i)-&gt;first = x;\n        (*g+i)-&gt;last = y;\n        (*g+i)-&gt;Cost = w;\n    }\n    for(int i=1;i&lt;=n;++i)\n        c[i] = i;\n}\n\nint costMST(Vertex *g, int *a, int n){\n    int MST = 0;\n    for(int i=1;i&lt;n;++i)\n        MST += g[a[i]].Cost;\n    return MST;\n}\n\nvoid Kruskal(Vertex *g, int *c, int *a, int n){\n    int nr = 0, mini, maxi;\n    for(int i=1;nr&lt;n-1;++i)\n        if(c[g[i].first] != c[g[i].last]){\n            a[++nr] = i;\n            if(c[g[i].first] &lt; c[g[i].last]){\n                mini = c[g[i].first];\n                maxi = c[g[i].last];\n            }\n            else{\n                maxi = c[g[i].first];\n                mini = c[g[i].last];\n            }\n            for(int j=1;j&lt;=n;++j)\n                if(c[j] == maxi)\n                    c[j] = mini;\n        }\n}\n\ninline int cmp(const void *a, const void *b){\n    return (((Vertex *)a)-&gt;Cost - ((Vertex *)b)-&gt;Cost);\n}\n\nint a[grafMAX], c[grafMAX];\n\nint main(){\n    Vertex *g;\n    int m, n;\n    read_graf(&amp;g,c,m,n);\n    qsort(g,m,sizeof(Vertex),cmp);\n    Kruskal(g,c,a,n);\n    fprintf(fout,\"The cost of the MST is: %d.\\n\",costMST(g,a,n));\n    fclose(fin);\n    fclose(fout);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1487192426, "post_id": 42259877, "comment_id": 71677524, "body": "When the name isn&#39;t found, you open a new stream and add it to the map. But you never assign <code>it</code> to point to it."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1487192440, "post_id": 42259877, "comment_id": 71677530, "body": "You&#39;re doing two things wrong: you&#39;re assuming that just because the program compiles, it is correct. That&#39;s obviously not true. Secondly, stream objects are not copyable, so you cannot construct and open a stream objects, and copy them into the map afterwards. They are movable, but you need to move the stream object properly, for this to work."}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1487192533, "post_id": 42259877, "comment_id": 71677575, "body": "After inserting incorrectly a new node into the map, the iterator <code>it</code> which you are going to deference is still equal to outs.end()."}, {"owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1487193441, "post_id": 42259877, "comment_id": 71678105, "body": "@Barmar i did a new iterator and it&#39;s not crashing anymore. However it doesn&#39;t wrote the message content to the file."}, {"owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487193656, "post_id": 42259877, "comment_id": 71678216, "body": "@Sam Varsharvchik please elaborate on moving stream object properly"}, {"owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "reply_to_user": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1487193726, "post_id": 42259877, "comment_id": 71678238, "body": "@felix why is my way of inserting ofstream into the map incorrect?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487194309, "post_id": 42259877, "comment_id": 71678522, "body": "400 characters in a stackoverflow.com comment is, unfortunately, not enough to fully and completely explain move semantics in C++11. I&#39;ll refer you to your C++ book, which should fully explain the subject matter."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487294428, "post_id": 42259877, "comment_id": 71731854, "body": "@SamVarshavchik, you don&#39;t need move semantics if you get rid of the temporary stream object and instead create it directly within the map using operator[]. See my answer."}], "answers": [{"comments": [{"owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "edited": false, "score": 0, "creation_date": 1487193806, "post_id": 42259937, "comment_id": 71678281, "body": "@Neil Butterworth if it will be discard at the end of the if block how does a pointer persist it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "edited": false, "score": 1, "creation_date": 1487193962, "post_id": 42259937, "comment_id": 71678352, "body": "@Beh A pointer doesn&#39;t persist it; creating it with <code>new</code> will persist it. Also, you could use move semantics, but not with a map of references."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1487294234, "post_id": 42259937, "comment_id": 71731790, "body": "Neither pointers nor move semantics are required to make this work. See my answer."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 7, "last_activity_date": 1487192380, "creation_date": 1487192380, "answer_id": 42259937, "question_id": 42259877, "link": "https://stackoverflow.com/questions/42259877/how-to-write-to-ofstream-accessed-through-map-iterator/42259937#42259937", "title": "How to write to ofstream accessed through map iterator", "body": "<p>Your ofstream instance is a local variable of the if-statement and will be closed and discarded when the if-statement terminates. You almost never want to use collections of references like your map, instead you should create a map of strings to ofstream pointers (preferably to smart pointers), create the ofstreams dynamically, and scrap all the code you have already written.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1487195007, "post_id": 42260511, "comment_id": 71678885, "body": "It gets compiled because it is syntactically correct. Anything else the compiler does for you, like warnings, is gravy. One cannot assume the logic is correct from correct grammar. I cite example politicians as an example."}], "tags": [], "owner": {"reputation": 1563, "user_id": 4556696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b77fa3f6e3e71da089a1dead131a3a?s=128&d=identicon&r=PG&f=1", "display_name": "dimm", "link": "https://stackoverflow.com/users/4556696/dimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194482, "creation_date": 1487194482, "answer_id": 42260511, "question_id": 42259877, "link": "https://stackoverflow.com/questions/42259877/how-to-write-to-ofstream-accessed-through-map-iterator/42260511#42260511", "title": "How to write to ofstream accessed through map iterator", "body": "<p>You seem to have a <code>map</code> from string to <strong>ofstream reference</strong>. I am not sure how that compiles but that is definitely a bug since the referenced objects get destructed.</p>\n\n<p>I think you should use <code>map&lt;string,ofstream&gt;</code>\nThen you should <code>.insert()</code> <code>.emplace()</code> into the map and on the returned iterator you should call <code>it-&gt;second.open()</code>.</p>\n\n<p>This might be a little tricky since the <code>ifstream</code> is not copyable but is movable so</p>\n\n<pre><code>map.insert(make_pair(some_key, ifstream(...))); //this will work, calls move\n\nifstream x;\nmap.insert(make_pair(some_key, x)); //this will NOT work, calls copy\n\nmap.insert(make_pair(some_key, std::move(x))); // should work\n</code></pre>\n\n<p>Similar is for <code>emplace</code>, that skips the <code>make_pair</code> call.</p>\n"}, {"tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 1, "last_activity_date": 1487202048, "last_edit_date": 1487202048, "creation_date": 1487201373, "answer_id": 42262081, "question_id": 42259877, "link": "https://stackoverflow.com/questions/42259877/how-to-write-to-ofstream-accessed-through-map-iterator/42262081#42262081", "title": "How to write to ofstream accessed through map iterator", "body": "<p>As others have already explained, you are creating only a temporary ofstream object inside the if block. This object gets destroyed when the if block ends so the reference stored in the map will be invalid then.</p>\n\n<p>You want a <code>map&lt;string,ofstream&gt;</code> because the map should actually store the stream object, not just a reference to it.</p>\n\n<p>Now we have the problem, how to put the temporary stream into the map? Copying a stream object is not possible, because streams have no copy constructors nor assignment operators.</p>\n\n<p>It turns out the temporary object is not required, because you can create the stream object directly inside the map using operator[].</p>\n\n<p>So you don't even need pointers or move semantics as some users suggested! </p>\n\n<pre><code>void write_packet_to_symbol_file(packet p)\n{\n\n  string path = \"E:\\\\20170131\\\\\";\n  map&lt;string,ofstream&gt; outs;\n  for (message m : p.messages) {\n    map&lt;string,ofstream&gt;::iterator it = outs.find(m.symbol.name);\n    if (it == outs.end()) {\n        // Create stream object in the map and get reference 'of' to it\n        ofstream&amp; of = outs[ m.symbol.name ];\n\n        string full_path = path + m.symbol.name + \".CAP\";\n        of.open(full_path, ios_base::app); \n        // write packet header since first message for that symbol\n        of &lt;&lt; p.get_header();\n\n        // No need to insert 'of' into 'outs', because it is already in there! \n    }\n\n    map&lt;string,ofstream&gt;::iterator it2 = outs.find(m.symbol.name);\n    if (it2 != outs.end())\n      it2-&gt;second &lt;&lt; m.get_message_content();\n}\n</code></pre>\n"}], "owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 2, "accepted_answer_id": 42259937, "answer_count": 3, "score": 2, "last_activity_date": 1487202048, "creation_date": 1487192168, "last_edit_date": 1487194213, "question_id": 42259877, "link": "https://stackoverflow.com/questions/42259877/how-to-write-to-ofstream-accessed-through-map-iterator", "title": "How to write to ofstream accessed through map iterator", "body": "<p>I have a map of <code>ofstream</code>. I'm going through a packet of messages and want to write each message pertaining to a specific symbol to its respective file, in essence dividing the packet file into smaller ones. It writes to the file when I <code>&lt;&lt;</code> to the <code>ofstream</code>. However when I try to <code>&lt;&lt;</code> to the <code>ofstream</code> accessed via the map iterator it crashes even though it compiles fine. </p>\n\n<p>The reason I'm using a map is to ensure that the packet header is not writen more than once for a given symbol. </p>\n\n<pre><code>void write_packet_to_symbol_file(packet p)\n{\n\n  string path = \"E:\\\\20170131\\\\\";\n  map&lt;string,ofstream&amp;&gt; outs;\n  for (message m : p.messages) {\n    map&lt;string,ofstream&amp;&gt;::iterator it = outs.find(m.symbol.name);\n    if (it == outs.end()) { \n        string full_path = path + m.symbol.name + \".CAP\";\n        ofstream of;\n        of.open(full_path, ios_base::app); \n        // write packet header since first message for that symbol\n        of &lt;&lt; p.get_header();\n        outs.emplace(m.symbol.name,of);\n    }\n\n    map&lt;string,ofstream&amp;&gt;::iterator it2 = outs.find(m.symbol.name);\n    if (it2 != outs.end())\n      it2-&gt;second &lt;&lt; m.get_message_content();\n}\n</code></pre>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["c++", "vector", "unordered-map"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1487191738, "post_id": 42259721, "comment_id": 71677164, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 1, "creation_date": 1487194287, "post_id": 42259721, "comment_id": 71678512, "body": "What error exactly was produced compilation failed?"}, {"owner": {"reputation": 21, "user_id": 7571096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3405456c68f0165aaab5256d29832e66?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplusnoob", "link": "https://stackoverflow.com/users/7571096/cplusplusnoob"}, "reply_to_user": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1487281657, "post_id": 42259721, "comment_id": 71727267, "body": "@ABusyProgrammer Error was - In function &#39;int main()&#39;: 23:42: error: passing &#39;const std::vector&lt;int&gt;&#39; as &#39;this&#39; argument of &#39;void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;) [with _Tp = int; _Alloc = std::allocator&lt;int&gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = int]&#39; discards qualifiers [-fpermissive]"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7571096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3405456c68f0165aaab5256d29832e66?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplusnoob", "link": "https://stackoverflow.com/users/7571096/cplusplusnoob"}, "edited": false, "score": 0, "creation_date": 1487192922, "post_id": 42259853, "comment_id": 71677810, "body": "Thank you so much Slava, this saves a lot of effort and its pretty easy, now the code works perfectly."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 3, "last_activity_date": 1487192063, "creation_date": 1487192063, "answer_id": 42259853, "question_id": 42259721, "link": "https://stackoverflow.com/questions/42259721/c-unordered-map-insert-into-vector/42259853#42259853", "title": "C++ unordered_map insert into vector", "body": "<p>you overcomplicated the issue, <code>operator[]</code> on map or unordered_map are created specially for such cases:</p>\n\n<pre><code>int loc = 1;\nfor(auto n = words.begin(); n != words.end(); ++n)\n   hash_table[*n].push_back( loc++ );\n</code></pre>\n\n<p>that is all code you need. you can make it even simpler using for range loop:</p>\n\n<pre><code>int loc = 1;\nfor(const auto &amp;word: words)\n   hash_table[word].push_back( loc++ );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 7571096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3405456c68f0165aaab5256d29832e66?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplusnoob", "link": "https://stackoverflow.com/users/7571096/cplusplusnoob"}, "edited": false, "score": 0, "creation_date": 1487193062, "post_id": 42259912, "comment_id": 71677880, "body": "Thank you so much Fran&#231;ois. I didn&#39;t realized its const iterator, now I get it why that line was not working. This is great help!"}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 3, "last_activity_date": 1487192286, "last_edit_date": 1495539975, "creation_date": 1487192286, "answer_id": 42259912, "question_id": 42259721, "link": "https://stackoverflow.com/questions/42259721/c-unordered-map-insert-into-vector/42259912#42259912", "title": "C++ unordered_map insert into vector", "body": "<p>The first problem is you are using <code>const_iterator</code> where you should be using <code>iterator</code>. You cannot modify the element referred to by <code>const_iterator</code>.</p>\n\n<p>Use <code>unordered_map&lt;string, vector&lt;int&gt;&gt;::iterator hash_it;</code> instead of <code>unordered_map&lt;string, vector&lt;int&gt;&gt;::const_iterator hash_it;</code>. Better yet, use <code>auto</code> to automatically deduce the type to use.</p>\n\n<pre><code>for (auto n = words.begin(); n != words.end(); ++n) {\n    auto hash_it = hash_table.find(*n);\n//  ^^^^ Deduce the correct type\n    if (hash_it == hash_table.end())\n        hash_table.insert(make_pair(*n, vector&lt;int&gt;(loc)));\n    else\n        hash_it-&gt;second.push_back(loc);   //No problem\n\n        ++loc;\n}\n</code></pre>\n\n<p>The second problem is that the statement <code>vector&lt;int&gt;(loc)</code> makes a vector containing <code>loc</code> values, not a vector containing only <code>loc</code>. The simplest change is to use <code>vector&lt;int&gt;(1, loc)</code> instead, which makes 1 value equal to <code>loc</code>.</p>\n\n<pre><code>for (auto n = words.begin(); n != words.end(); ++n) {\n    auto hash_it = hash_table.find(*n);\n//  ^^^^ Deduce the correct type\n    if (hash_it == hash_table.end())\n        hash_table.insert(make_pair(*n, vector&lt;int&gt;(1, loc)));\n    else\n        hash_it-&gt;second.push_back(loc);   //Problem 1 - this statement gives error\n\n    ++loc;\n}\n</code></pre>\n\n<p>As others have pointed out, you can save yourself a lot of trouble by using <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/operator_at\" rel=\"nofollow noreferrer\">operator[]</a>. See <a href=\"https://stackoverflow.com/a/42259853/7359094\">this answer</a> by Slava for a simpler way of doing this.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 7571096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3405456c68f0165aaab5256d29832e66?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplusnoob", "link": "https://stackoverflow.com/users/7571096/cplusplusnoob"}, "edited": false, "score": 0, "creation_date": 1487282158, "post_id": 42260600, "comment_id": 71727525, "body": "please forgive my lack of knowledge but what does size_t do? does it store any type of information?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 21, "user_id": 7571096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3405456c68f0165aaab5256d29832e66?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplusnoob", "link": "https://stackoverflow.com/users/7571096/cplusplusnoob"}, "edited": false, "score": 0, "creation_date": 1487292780, "post_id": 42260600, "comment_id": 71731390, "body": "size_t is usually defined as an unsigned integer type, but it depends on the platform. When you compile for 64-bit, size_t will usually be 64-bit too, while an integer (at least under Windows) would still be 32-bit and thus not be sufficient to store an index of a vector without overflow. That&#39;s the reason why this data type is used by all standard containers as the return type of the size() method for instance."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 21, "user_id": 7571096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3405456c68f0165aaab5256d29832e66?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplusnoob", "link": "https://stackoverflow.com/users/7571096/cplusplusnoob"}, "edited": false, "score": 0, "creation_date": 1487293462, "post_id": 42260600, "comment_id": 71731566, "body": "I fixed my example to use size_t as the datatype of the &#39;loc&#39; variable too. With 5 entries of the words vector this is of course not important, but consider a very big vector with more than 2^31 words... in this case the &#39;int loc&#39; could already overflow."}], "tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 0, "last_activity_date": 1487293716, "last_edit_date": 1487293716, "creation_date": 1487194850, "answer_id": 42260600, "question_id": 42259721, "link": "https://stackoverflow.com/questions/42259721/c-unordered-map-insert-into-vector/42260600#42260600", "title": "C++ unordered_map insert into vector", "body": "<p>You could make the code more efficient if you use a unordered_multimap. You don't need a vector for the positions then.\nThis works because elements that have the same key are guaranteed to be in consecutive order.</p>\n\n<pre><code>int main()\n{\n    vector&lt;string&gt; words {\"first\", \"second\", \"third\", \"forth\", \"second\"};\n\n    unordered_multimap&lt; string, size_t &gt; hash_table;\n\n    size_t loc = 0;\n    for( const auto&amp; word : words )\n    {\n        hash_table.insert( make_pair( word, ++loc ) );\n    }\n\n    for( auto i = hash_table.begin(), j = hash_table.begin(); \n         i != hash_table.end();\n         i = j )\n    {\n        cout &lt;&lt; \"Word - \"&lt;&lt; i-&gt;first &lt;&lt; \" Loc -\";\n\n        // Iterate over all elements with same key\n        do\n        {\n            cout &lt;&lt; \" \" &lt;&lt; j-&gt;second;\n            ++j;\n        }\n        while( j != hash_table.end() &amp;&amp; j-&gt;first == i-&gt;first );\n\n        cout &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you only want to look up the locations of a specific word, you would use unordered_map::equal_range() like this:</p>\n\n<pre><code>cout &lt;&lt; \"Locations of 'second':\";\nauto rng = hash_table.equal_range( \"second\" );\nfor( auto i = rng.first; i != rng.second; ++i )\n    cout &lt;&lt; \" \" &lt;&lt; i-&gt;second;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7571096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3405456c68f0165aaab5256d29832e66?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplusnoob", "link": "https://stackoverflow.com/users/7571096/cplusplusnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1633, "favorite_count": 1, "closed_date": 1487230899, "answer_count": 3, "score": -2, "last_activity_date": 1487293716, "creation_date": 1487191646, "question_id": 42259721, "link": "https://stackoverflow.com/questions/42259721/c-unordered-map-insert-into-vector", "closed_reason": "Needs details or clarity", "title": "C++ unordered_map insert into vector", "body": "<p>I am trying to write a program which will take list of strings as input and create hash table with string name and its position.</p>\n\n<p>Example:<br>\nvector words {\"first\", \"second\", \"third\", \"forth\", \"second\"};</p>\n\n<p>output:<br>\nfirst 1<br>\nsecond 2,5<br>\nthird 3<br>\nforth 4  </p>\n\n<p>I am facing two problems please find them in code comment below.<br>\nPlease tell me what am i doing wrong?</p>\n\n<pre><code>int main()\n{\n    vector&lt;string&gt; words {\"first\", \"second\", \"third\", \"forth\", \"second\"};\n\n    unordered_map&lt;string, vector&lt;int&gt;&gt; hash_table;\n    unordered_map&lt;string, vector&lt;int&gt;&gt;::const_iterator hash_it;\n\n    int loc = 1;\n\n    for(auto n = words.begin(); n != words.end(); ++n){\n        hash_it = hash_table.find(*n);\n        if(hash_it == hash_table.end())\n            hash_table.insert(make_pair(*n, vector&lt;int&gt; (loc)));\n        else\n            //hash_it-&gt;second.push_back(loc);   //Problem 1 - this statement gives error\n\n        ++loc;\n    }\n\n    for(auto&amp; n:hash_table){\n        cout&lt;&lt;\"Word - \"&lt;&lt;n.first&lt;&lt;\" Loc -\";\n        vector&lt;int&gt; tmp1 = n.second;\n        for(auto j = tmp1.begin(); j != tmp1.end(); ++j)\n            cout&lt;&lt;\" \"&lt;&lt;*j;\n        cout&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>Problem 2 - location values are 0<br>\nOutput of program -<br>\nWord - forth Loc - 0<br>\nWord - third Loc - 0<br>\nWord - second Loc - 0<br>\nWord - first Loc - 0  </p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1487192015, "post_id": 42259709, "comment_id": 71677297, "body": "You could always <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">look at the docs</a> for each of the containers. I gotta ask....why haven&#39;t you done this already?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1487192702, "post_id": 42259709, "comment_id": 71677688, "body": "Chances are the container types reported by a <a href=\"http://en.cppreference.com/mwiki/index.php?title=Special%3ASearch&amp;search=remove\" rel=\"nofollow noreferrer\">search of the docs</a> would be a pretty good indicator of which containers have this, and which do not. That list culls down <i>considerably</i> if you <a href=\"http://en.cppreference.com/mwiki/index.php?title=Special%3ASearch&amp;search=remove_if\" rel=\"nofollow noreferrer\">search on <code>remove_if</code></a>."}, {"owner": {"reputation": 1237, "user_id": 2614539, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4lZ0X.jpg?s=128&g=1", "display_name": "Dineshkumar", "link": "https://stackoverflow.com/users/2614539/dineshkumar"}, "edited": false, "score": 0, "creation_date": 1487193085, "post_id": 42259709, "comment_id": 71677891, "body": "@Jay Bazuzi I saw it in `algorithm&#39; also, <a href=\"http://www.cplusplus.com/reference/algorithm/remove/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/algorithm/remove</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487194335, "post_id": 42259709, "comment_id": 71678541, "body": "Related topic: <a href=\"http://stackoverflow.com/questions/4342957/why-does-vector-not-have-sort-method-as-a-member-function-of-vector-while-lis\">Why does vector not have sort() method as a member function of vector, while list does?</a>"}, {"owner": {"reputation": 41165, "user_id": 5314, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG", "display_name": "Jay Bazuzi", "link": "https://stackoverflow.com/users/5314/jay-bazuzi"}, "edited": false, "score": 0, "creation_date": 1487194342, "post_id": 42259709, "comment_id": 71678548, "body": "I&#39;m looking for a canonical list, and did a Google search, but didn&#39;t find one. I can read the docs myself, but I&#39;m not sure if I&#39;ll miss any important, subtle details."}, {"owner": {"reputation": 41165, "user_id": 5314, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG", "display_name": "Jay Bazuzi", "link": "https://stackoverflow.com/users/5314/jay-bazuzi"}, "reply_to_user": {"reputation": 1237, "user_id": 2614539, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4lZ0X.jpg?s=128&g=1", "display_name": "Dineshkumar", "link": "https://stackoverflow.com/users/2614539/dineshkumar"}, "edited": false, "score": 0, "creation_date": 1487194668, "post_id": 42259709, "comment_id": 71678709, "body": "@Dinesh - That&#39;s the non-built-in remove, which can be applied anywhere you have iterators."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1487199945, "post_id": 42259709, "comment_id": 71681180, "body": "If you want a canonical list why not look at the standard? It tells you all of the member functions that need to be implemented."}], "answers": [{"tags": [], "owner": {"reputation": 41165, "user_id": 5314, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG", "display_name": "Jay Bazuzi", "link": "https://stackoverflow.com/users/5314/jay-bazuzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194585, "creation_date": 1487194585, "answer_id": 42260536, "question_id": 42259709, "link": "https://stackoverflow.com/questions/42259709/c-collections-with-built-in-remove-operations/42260536#42260536", "title": "C++ collections with built-in remove operations?", "body": "<p>At the bottom of <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container</a> I see a table listing all the operations on all the STL containers, and <code>remove</code>/<code>remove_if</code> only appear on <code>forward_list</code> and <code>list</code>.</p>\n"}], "owner": {"reputation": 41165, "user_id": 5314, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG", "display_name": "Jay Bazuzi", "link": "https://stackoverflow.com/users/5314/jay-bazuzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1487194585, "creation_date": 1487191604, "question_id": 42259709, "link": "https://stackoverflow.com/questions/42259709/c-collections-with-built-in-remove-operations", "title": "C++ collections with built-in remove operations?", "body": "<p>Which standard C++ collections include built in <code>remove</code>/<code>remove_if</code> operations?</p>\n\n<p>For example, I see that <code>list</code> has them:</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/list/list/remove/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/list/list/remove/</a>\n<a href=\"http://www.cplusplus.com/reference/list/list/remove_if/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/list/list/remove_if/</a></p>\n\n<pre><code>list&lt;int&gt; mylist (...);\nmylist.remove(42);\n</code></pre>\n\n<p>but <code>vector</code> does not, and I have to do <code>v.erase(remove(etc.etc.etc.))</code></p>\n"}, {"tags": ["python", "c++", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487191401, "post_id": 42259556, "comment_id": 71676986, "body": "can you try to write a video with VideoWriter class (e.g. mjpg codec) and try to load that one afterwards?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487191959, "post_id": 42259556, "comment_id": 71677268, "body": "I did so. I still get 0 fps even though the video is rendered correctly."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487193968, "post_id": 42259556, "comment_id": 71678357, "body": "but your other videos aren&#39;t rendered correctly? you wrote &quot;and I can&#39;t access the frames of the video&quot;"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487252167, "post_id": 42259556, "comment_id": 71706956, "body": "I can write a video correctly, and <code>ffplay</code> it, but I can&#39;t read a video, either a &quot;real&quot; video or one I synthesized with OpenCV."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487255570, "post_id": 42259556, "comment_id": 71709841, "body": "ah ok, I interpreted &quot;rendered correctly&quot; to mean that you can read (and display/render) the frames but the number-of-frames-property was 0. Can you post your code?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487257009, "post_id": 42259556, "comment_id": 71710957, "body": "I edited with my code. The code is incredibly simple and works fine on other machines."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487257277, "post_id": 42259556, "comment_id": 71711192, "body": "but does it read frames? <code>cv::Mat img; cap &gt;&gt; img; std::cout &lt;&lt; &quot;image read: &quot; &lt;&lt; img.empty()==false &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 2, "creation_date": 1487258247, "post_id": 42259556, "comment_id": 71711959, "body": "Um, yeah, this is embarrassing. It does read the frame and I can display it. Why might <code>cap.get()</code> be lying to me then?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487259043, "post_id": 42259556, "comment_id": 71712548, "body": "does <code>cap.get()</code> work in centOS without VM (if you have a machine to test it)? From what I&#39;ve read, the VideoCapture class might show different behaviour for different OS or devices, especially the properties get and set are or aren&#39;t present for each device. But I don&#39;t even know which underlying low-level function is called for video property .get maybe you&#39;ll have to debug openCV yourself to locate the problem."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487259089, "post_id": 42259556, "comment_id": 71712586, "body": "Does cap.set and cap.get of parameter <code>CV_CAP_PROP_POS_FRAMES</code> work?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1487260445, "post_id": 42259556, "comment_id": 71713757, "body": "<code>CV_CAP_PROP_POS_FRAMES</code> returns <code>185759637.0</code> when I call it on the video immediately after loading it."}, {"owner": {"reputation": 822, "user_id": 5315126, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153201468803250/picture?type=large", "display_name": "Shivam Gaur", "link": "https://stackoverflow.com/users/5315126/shivam-gaur"}, "edited": false, "score": 0, "creation_date": 1492954794, "post_id": 42259556, "comment_id": 74193368, "body": "Any update on this?"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "reply_to_user": {"reputation": 822, "user_id": 5315126, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153201468803250/picture?type=large", "display_name": "Shivam Gaur", "link": "https://stackoverflow.com/users/5315126/shivam-gaur"}, "edited": false, "score": 1, "creation_date": 1493042563, "post_id": 42259556, "comment_id": 74229887, "body": "I believe this is fixed in OpenCV 3.2. @ShivamGaur"}, {"owner": {"reputation": 822, "user_id": 5315126, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153201468803250/picture?type=large", "display_name": "Shivam Gaur", "link": "https://stackoverflow.com/users/5315126/shivam-gaur"}, "edited": false, "score": 1, "creation_date": 1493100458, "post_id": 42259556, "comment_id": 74255053, "body": "Oh, okay. I did come across the same issue (where CAP_PROP_FRAME_COUNT returned 0 frames ) when using the python wrapper for opencv 3.2. But was able to fix it by installing <code>ffmpeg-devel</code>"}, {"owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "edited": false, "score": 0, "creation_date": 1493123037, "post_id": 42259556, "comment_id": 74269943, "body": "Then maybe it&#39;s a codec issue as well. Good to know. Post it as an answer and I&#39;ll accept it."}, {"owner": {"reputation": 121, "user_id": 7199416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sjC6PWJsqAU/AAAAAAAAAAI/AAAAAAAADFo/Z9m4ssYaTp0/photo.jpg?sz=128", "display_name": "user7199416", "link": "https://stackoverflow.com/users/7199416/user7199416"}, "edited": false, "score": 0, "creation_date": 1551096555, "post_id": 42259556, "comment_id": 96502117, "body": "Same problem as @Hal T. Didn&#39;t work even after installing ffmpeg. I can read frames but cv2.CAP_PROP_FRAME_COUNT returns 0."}], "answers": [{"tags": [], "owner": {"reputation": 438, "user_id": 2453904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfc4d5409cb96d6d7922ca4cfc8c3100?s=128&d=identicon&r=PG", "display_name": "barceloco", "link": "https://stackoverflow.com/users/2453904/barceloco"}, "is_accepted": true, "score": 1, "last_activity_date": 1496948667, "creation_date": 1496948667, "answer_id": 44443705, "question_id": 42259556, "link": "https://stackoverflow.com/questions/42259556/opencv-videocapture-says-video-has-0-frames-c-and-python/44443705#44443705", "title": "OpenCV VideoCapture says video has 0 frames (C++ and Python)", "body": "<p>This looks similar to the codec issues I had, and described <a href=\"https://stackoverflow.com/questions/44426099/opencv-cannot-read-ffmpeg-videos/44426100#44426100\">in this stack overflow post</a>. In short: I used <code>ffmpeg</code> to convert the video:</p>\n\n<p><code>ffmpeg -i input.avi -c:v libx264 -vf format=yuv420p output.mp4</code></p>\n"}], "owner": {"reputation": 497, "user_id": 5086961, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cb95643bc1ba1fadf36a8dc531f06dfa?s=128&d=identicon&r=PG&f=1", "display_name": "Hal T", "link": "https://stackoverflow.com/users/5086961/hal-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1578, "favorite_count": 0, "accepted_answer_id": 44443705, "answer_count": 1, "score": 3, "last_activity_date": 1496948667, "creation_date": 1487191069, "last_edit_date": 1487256989, "question_id": 42259556, "link": "https://stackoverflow.com/questions/42259556/opencv-videocapture-says-video-has-0-frames-c-and-python", "title": "OpenCV VideoCapture says video has 0 frames (C++ and Python)", "body": "<p>I'm using OpenCV 2.4.9 and trying to open a video. <code>isOpened()</code> successfully runs, but when I try to look at the number of frames the video has, it returns 0, and I can't access the frames of the video. This happens with every video I have. I can use the same videos on a different machine (the issue happens in my CentOS 7 VM, the videos are in a shared folder and the host OS can access them fine in OpenCV). Ffmpeg is installed and I can <code>ffplay</code> the videos and <code>ffmpeg -i</code> tells me the videos have a nonzero number of frames. My OpenCV was compiled with ffmpeg successfully:</p>\n\n<pre><code>\"  Video I/O:\\n\"\n\"    DC1394 1.x:                  NO\\n\"\n\"    DC1394 2.x:                  YES (ver 2.2.2)\\n\"\n\"    FFMPEG:                      YES\\n\"\n\"      codec:                     YES (ver 56.26.100)\\n\"\n\"      format:                    YES (ver 56.25.101)\\n\"\n\"      util:                      YES (ver 54.20.100)\\n\"\n\"      swscale:                   YES (ver 3.1.101)\\n\"\n\"      gentoo-style:              YES\\n\"\n\"    GStreamer:                   \\n\"\n\"      base:                      YES (ver 0.10.36)\\n\"\n\"      app:                       YES (ver 0.10.36)\\n\"\n\"      video:                     YES (ver 0.10.36)\\n\"\n\"    OpenNI:                      NO\\n\"\n\"    OpenNI PrimeSensor Modules:  NO\\n\"\n\"    PvAPI:                       NO\\n\"\n\"    GigEVisionSDK:               NO\\n\"\n\"    UniCap:                      NO\\n\"\n\"    UniCap ucil:                 NO\\n\"\n\"    V4L/V4L2:                    Using libv4l (ver 0.9.5)\\n\"\n\"    XIMEA:                       NO\\n\"\n\"    Xine:                        NO\\n\"\n\"\\n\"\n</code></pre>\n\n<p>My code correctly compiles and I can read images with OpenCV.</p>\n\n<p>The code is incredibly basic. For Python:</p>\n\n<pre><code>import cv2\ncap = cv2.VideoCapture('test.mp4')\nprint cap.isOpened()\nprint cap.get(cv2.cv.CV_CAP_PROP_FPS)\nprint cap.get(cv2.cv.CV_CAP_PROP_FRAME_COUNT)\n&gt;&gt; True\n&gt;&gt; 0.0\n&gt;&gt; 0\n</code></pre>\n\n<p>And for C++:</p>\n\n<pre><code>#include \"opencv2/opencv.hpp\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main(int argc, char *argv[])\n{\n    cv::VideoCapture cap;\n    cap.open(\"test.mp4\");\n    if(cap.isOpened())\n    {\n        cout &gt;&gt; cap.get(CV_CAP_PROP_FPS) &gt;&gt; endl;\n        cout &gt;&gt; cap.get(CV_CAP_PROP_FRAME_COUNT) &gt;&gt; endl;\n    }\n    return(0);\n}\n</code></pre>\n\n<p>Which prints 0 as well. </p>\n"}, {"tags": ["c++", "colors", "sdl-2", "palette", "sdl-image"], "answers": [{"tags": [], "owner": {"reputation": 738, "user_id": 1911185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d81afc475b218233e088711b5a751ff?s=128&d=identicon&r=PG", "display_name": "jordsti", "link": "https://stackoverflow.com/users/1911185/jordsti"}, "is_accepted": false, "score": 1, "last_activity_date": 1487192883, "last_edit_date": 1592644375, "creation_date": 1487192883, "answer_id": 42260074, "question_id": 42259554, "link": "https://stackoverflow.com/questions/42259554/encode-image-and-change-color-in-sdl2-and-c/42260074#42260074", "title": "Encode image and change color in SDL2 and C ++", "body": "<p>You need to do it yourself. SDL wasn't done to works with NES texture format.\nYou'll need to load your texture array. Create a new surface with the right size. After that, you can fill the pixels with the colour corresponding to your colour palette. You could do it with a custom SDL_Palette, but this isn't a good practice.</p>\n<blockquote>\n<p>An SDL_Palette should never need to be created manually. It is automatically created when SDL allocates an SDL_PixelFormat for a surface. The colors values of an SDL_Surface's palette can be set with SDL_SetPaletteColors().\n<a href=\"https://wiki.libsdl.org/SDL_Palette\" rel=\"nofollow noreferrer\">SDL_Palette Wiki Page</a></p>\n</blockquote>\n"}], "owner": {"reputation": 169, "user_id": 7419960, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4861ca3c2f01b29a1b700a09a227ec73?s=128&d=identicon&r=PG&f=1", "display_name": "Islam Linarez", "link": "https://stackoverflow.com/users/7419960/islam-linarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487192883, "creation_date": 1487191062, "question_id": 42259554, "link": "https://stackoverflow.com/questions/42259554/encode-image-and-change-color-in-sdl2-and-c", "title": "Encode image and change color in SDL2 and C ++", "body": "<p>Is there a method or function that: when loading a texture, it is coded to apply color changes?</p>\n\n<p><a href=\"https://i.stack.imgur.com/rNKIN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rNKIN.png\" alt=\"enter image description here\"></a></p>\n\n<p>How Sprite Works in NES</p>\n"}, {"tags": ["c++", "alignment", "mmap"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1487191324, "post_id": 42259495, "comment_id": 71676954, "body": "I don&#39;t know if it&#39;s guaranteed, but since it&#39;s backed by hardware capabilities I&#39;d be extremely surprised if it didn&#39;t."}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1487191427, "post_id": 42259495, "comment_id": 71676997, "body": "<a href=\"http://stackoverflow.com/questions/31411730/mmap-enforce-64k-alignment\">this link</a> might help. Quoated:  In contrast address returned by mmap is only guaranteed to be page-aligned."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1487191873, "post_id": 42259495, "comment_id": 71677227, "body": "@felix The man page for <code>munmap()</code> says <code>The addr parameter was not page aligned (i.e., a multiple of the page size).</code>, meaning that I cannot deallocate memory that is not aligned on a page boundary, and since the page boundary is larger than the maximum alignment, I will not be able to call <code>munmap()</code> in the case where a pointer is not aligned on the maximum alignment"}], "answers": [{"tags": [], "owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "is_accepted": true, "score": 9, "last_activity_date": 1487191952, "creation_date": 1487191952, "answer_id": 42259829, "question_id": 42259495, "link": "https://stackoverflow.com/questions/42259495/does-mmap-return-aligned-pointer-values/42259829#42259829", "title": "Does mmap return aligned pointer values", "body": "<p>Yes it does.</p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"noreferrer\">http://man7.org/linux/man-pages/man2/mmap.2.html</a></p>\n\n<p>In case of most \"popular\" NULL mapping</p>\n\n<blockquote>\n  <p>If addr is NULL, then the kernel chooses the address at which to\n  create the mapping; this is the most portable method of creating a new\n  mapping.  If addr is not NULL, then the kernel takes it as a hint\n  about where to place the mapping; <strong>on Linux, the mapping will be\n  created at a nearby page boundary</strong>. The address of the new mapping is\n  returned as the result of the call.</p>\n</blockquote>\n\n<p>Even if you specify MAP_FIXED than</p>\n\n<blockquote>\n  <p>Don't interpret addr as a hint: place the mapping at exactly that\n  address.  <strong>addr must be a multiple of the page size</strong>.  If the memory\n  region specified by addr and len overlaps pages of any existing\n  mapping(s), then the overlapped part of the existing mapping(s) will\n  be discarded.  If the specified address cannot be used, mmap() will\n  fail.  Because requiring a fixed address for a mapping is less\n  portable, the use of this option is discouraged.</p>\n</blockquote>\n\n<p>Taking the fact the smallest page is 4096B (for x86, but for other platforms it is multiple of 1024B anyway) and as std::max_align_t is most likely to be 16B on 64bit systems it will be alligned.</p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5128, "favorite_count": 0, "accepted_answer_id": 42259829, "answer_count": 1, "score": 8, "last_activity_date": 1487191952, "creation_date": 1487190882, "question_id": 42259495, "link": "https://stackoverflow.com/questions/42259495/does-mmap-return-aligned-pointer-values", "title": "Does mmap return aligned pointer values", "body": "<p>Does <code>mmap()</code> guarantee that the return values are aligned to the largest alignment on the system?  i.e. is it guaranteed by the POSIX standard that mmap has to return pointer values that are multiples of <code>alignof(std::max_align_t)</code>?</p>\n\n<p>I was not able to find this information on either the Ubuntu linux mmap(2) man page or a mac osx mmap(2) man page</p>\n"}, {"tags": ["c++", "c++11", "compiler-errors", "auto"], "comments": [{"owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "edited": false, "score": 0, "creation_date": 1487190905, "post_id": 42259168, "comment_id": 71676695, "body": "Are you sure that your compiler has implemented <code>std::find()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 7564727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ed0cc8fda388090db921d77a21410?s=128&d=identicon&r=PG&f=1", "display_name": "fm0", "link": "https://stackoverflow.com/users/7564727/fm0"}, "is_accepted": true, "score": 1, "last_activity_date": 1487190930, "creation_date": 1487190930, "answer_id": 42259506, "question_id": 42259168, "link": "https://stackoverflow.com/questions/42259168/error-in-a-function-used-to-find-the-position-of-an-element-in-a-vector-of-strin/42259506#42259506", "title": "Error in a function used to find the position of an element in a vector of string (c++)", "body": "<p>You need to <code>#include &lt;algorithm&gt;</code> for <code>std::find</code></p>\n"}], "owner": {"reputation": 255, "user_id": 1813571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8fOSI.jpg?s=128&g=1", "display_name": "niandra82", "link": "https://stackoverflow.com/users/1813571/niandra82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 42259506, "answer_count": 1, "score": 0, "last_activity_date": 1527138507, "creation_date": 1487189726, "last_edit_date": 1527138507, "question_id": 42259168, "link": "https://stackoverflow.com/questions/42259168/error-in-a-function-used-to-find-the-position-of-an-element-in-a-vector-of-strin", "title": "Error in a function used to find the position of an element in a vector of string (c++)", "body": "<p>I have the following function  that works fine that I use to find the position of a string in a string vector:</p>\n\n<pre><code>int FindIndexString(vector &lt;string&gt; *Names, string *name)\n{\n    auto it = find(Names-&gt;begin(), Names-&gt;end(), name-&gt;c_str());\n    if (it == Names-&gt;end())\n    {\n         error(\"FindIndexString: %s not found\",name-&gt;c_str());\n    }else{\n        auto index = distance(Names-&gt;begin(), it);\n        return((int)index);\n    }\n}\n</code></pre>\n\n<p>I need to use this function in a R program that complains about the \"auto\" specifier and I cannot compile with C++11.</p>\n\n<p>I changed the function to </p>\n\n<pre><code>int FindIndexString(vector &lt;string&gt; *Names, string *name)\n {\n     vector&lt;string&gt;::iterator it;\n     it = find(Names-&gt;begin(), Names-&gt;end(), name-&gt;c_str());\n\n     int pos = (int)distance(Names-&gt;begin(), it);\n\n     if(it==Names-&gt;end())\n     {\n          error(\"FindIndexString: %s not found\",name-&gt;c_str());;\n     }else{\n         return(pos);\n     }    \n  }\n</code></pre>\n\n<p>but it doesn't work and I get the following error</p>\n\n<pre><code>In function 'int FindIndexString(std::vector&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::allocator&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt;*, std::string*)':\nF_Utils.cpp:92: error: no matching function for call to 'find(__gnu_cxx::__normal_iterator&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::vector&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::allocator&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*, std::vector&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::allocator&lt;std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;, const char*)'\n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "googletest", ".lib"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "edited": false, "score": 0, "creation_date": 1487194659, "post_id": 42259447, "comment_id": 71678704, "body": "Is there particular reason for the new project to be WIn32 and not 64 or it does not matter? I compiled both gtest and my project in x64."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "edited": false, "score": 0, "creation_date": 1487195754, "post_id": 42259447, "comment_id": 71679268, "body": "Win32 is the type of the project template in the New Project dialog."}, {"owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "edited": false, "score": 0, "creation_date": 1487198368, "post_id": 42259447, "comment_id": 71680551, "body": "I see. Is there a way to turn my current &quot;code&quot; project into a static lib and then create a new project just for a main? It seems easier and then coping  all my files. Also my current project is a qt5 template project will that still work with it?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "edited": false, "score": 0, "creation_date": 1487229516, "post_id": 42259447, "comment_id": 71691073, "body": "If you do that you will lose linker settings because a static lib project has librarian settings instead of linker settings. But can be done of course."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 3, "last_activity_date": 1487190699, "creation_date": 1487190699, "answer_id": 42259447, "question_id": 42259074, "link": "https://stackoverflow.com/questions/42259074/linking-google-test-to-your-main-project/42259447#42259447", "title": "Linking google test to your main project", "body": "<ol>\n<li><p>Add a new empty Win32 project to your solution, in its properties select Project Type \"static library (.lib)\"</p></li>\n<li><p>Move all your sources except the <code>main()</code> function to that project</p></li>\n<li><p>Add a reference to the .lib project to both your main application project and the google test project</p></li>\n</ol>\n"}], "owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1497, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487190699, "creation_date": 1487189457, "question_id": 42259074, "link": "https://stackoverflow.com/questions/42259074/linking-google-test-to-your-main-project", "title": "Linking google test to your main project", "body": "<p>I am new to the gtest. I have followed a tutorial how to set it up in the VS 2105.\nBut all that I could find talked about how to build and link gtest. \nI am passed that level. The code below runs and passes the first dummy test.</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n\nTEST(VI, simple) {\n    EXPECT_EQ(false, false);\n}\n\nint main(int argc, char* argv[]) {\n    testing::InitGoogleTest(&amp;argc, argv);\n    RUN_ALL_TESTS();\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>My question:\nHow do I exactly hook it up to my project that I want to test? \nBoth gtest project and my \"code\" project are in the same solution.\nAs far as I understood from reading numerous tutorials, I need 2 things:</p>\n\n<p>1) to include my .h of the class I am about to test (easy and done)</p>\n\n<p>2) To compile my \"code\" project into a static lib and then hook up\n   the lib to gtest project so I can create and test objects from the\n   \"code\" project.</p>\n\n<p>I am struggling with the point 2. How exactly do I go about it?</p>\n\n<p>Thank you for help in advance.</p>\n"}, {"tags": ["c++", "boost-filesystem"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "is_accepted": true, "score": 0, "last_activity_date": 1488209068, "last_edit_date": 1495541366, "creation_date": 1488209068, "answer_id": 42489444, "question_id": 42259020, "link": "https://stackoverflow.com/questions/42259020/c-update-mirror-a-folder-backup-with-boost-filesystem-1-55/42489444#42489444", "title": "C++ - Update/mirror a folder backup with BOOST Filesystem (1.55)", "body": "<p>To answer my own question, the <code>copy_file</code> method has a 3rd argument that can be passed to it - <code>fs::copy_option::overwrite_if_exists</code>.  If you take <a href=\"https://stackoverflow.com/questions/8593608/how-can-i-copy-a-directory-using-boost-filesystem\">nijansen's copyDir method</a> and add this option to the <code>copy_file</code> call, it will overwrite a file if it already exists (updating a file in a backup from live).</p>\n\n<p>The function call then becomes:</p>\n\n<pre><code>fs::copy_file(current,\n    destination / current.filename(), \n    fs::copy_option::overwrite_if_exists);\n</code></pre>\n\n<p>Also, for anyone who stumbles upon this question,  I also figured out a way to exclude files/directories from the <code>copy_file</code> (add the if statements to the \"else\" that does the copy within the <code>copyDir</code> method.</p>\n\n<pre><code>// Need to exclude My Music, My Pictures, My Videos (from Documents folder)\nstd::string stem = current.filename().string();\n//If not equal to excludes, then copy away; else skips them\nif (!(stem == \"My Music\" || stem == \"My Pictures\" || stem == \"My Videos\"))\n{\n    fs::copy_file(current,destination / current.filename(), \n        fs::copy_option::overwrite_if_exists);\n}\n</code></pre>\n\n<p>Anyhow,  thanks!</p>\n"}], "owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 42489444, "answer_count": 1, "score": 0, "last_activity_date": 1488209068, "creation_date": 1487189246, "last_edit_date": 1495540816, "question_id": 42259020, "link": "https://stackoverflow.com/questions/42259020/c-update-mirror-a-folder-backup-with-boost-filesystem-1-55", "title": "C++ - Update/mirror a folder backup with BOOST Filesystem (1.55)", "body": "<p>I am attempting to backing up a user profile (or more accurately copying specific directories e.g. <em>username</em>\\documents, <em>username</em>\\desktop, etc.) to a network shared drive.   I'm using C++ builder (10.1 starter), thus limited to boost 1.55.</p>\n\n<p>I've found this <a href=\"https://stackoverflow.com/questions/8593608/how-can-i-copy-a-directory-using-boost-filesystem\" title=\"This\">copyDir</a> method by nijansen but it has an issue:  it \"breaks\" when attempting to copy to a directory that already exists because of this code:  </p>\n\n<pre><code>if(fs::exists(destination))\n{\n    std::cerr &lt;&lt; \"Destination directory \" &lt;&lt; destination.string()\n        &lt;&lt; \" already exists.\" &lt;&lt; '\\n';\n    return false;\n}\n</code></pre>\n\n<p>Obviously I could just change it to delete directory if exists, then rather than returning instead let it proceed with copying, but I'm looking for a bit more.</p>\n\n<p>What I would like to do is mirror the directories from the original to the backup (like robocopy's /MIR flag (including subdirectories)).  If I backup a user today, then they delete a few things, create a few more, edit a document, etc., I want to copy just those changes into tomorrow's backup (and not re-backup everything that didn't change).  Some users have 50+ GB of data which would take entirely too long if I were to just delete their \"yesterday's\" backup folder and create an entirely new backup. </p>\n\n<p><strong>Summary</strong>: Is there a way to mirror (not just copy!) directory trees between a source and destination using BOOST? </p>\n\n<p>Any help and/or examples would be greatly appreciated! Thanks in advance!</p>\n"}, {"tags": ["c++", "visual-studio", "templates", "gcc"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1487189151, "post_id": 42258970, "comment_id": 71675755, "body": "<code>const int* ptr</code> is not a const pointer, it is a pointer to const."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 7, "last_activity_date": 1487190006, "last_edit_date": 1495540403, "creation_date": 1487190006, "answer_id": 42259245, "question_id": 42258970, "link": "https://stackoverflow.com/questions/42258970/compiler-ignores-const-on-function-parameter/42259245#42259245", "title": "Compiler ignores &#39;const&#39; on function parameter", "body": "<p>There is an important distinction between <code>const int *</code> and <code>int * const</code>. See <a href=\"https://stackoverflow.com/a/890560/7359094\">this answer</a> for an explanation of the difference.</p>\n\n<p>Consider what <code>const typename MyStruct&lt;T&gt;::type</code> means. It's a <code>MyStruct&lt;T&gt;::type</code> that is <code>const</code>. In this case, it's an <code>int*</code> that is <code>const</code>. This is a <code>int* const</code>, a pointer which can't be reassigned a new address but that can still be used to modify the pointed <code>int</code>. However, the pointer you are passing in <code>foo&lt;int&gt;(ptr)</code> is a <code>const int *</code> which cannot be converted to <code>int * const</code>, as it would be discarding the <code>const</code> qualifier.</p>\n\n<p>To achieve what you want, <code>const</code> must be part of the type before making it a pointer. It can't be added after the fact or it will always be interpreted as <code>T * const</code>. You can use type traits to remove the pointer part of the type, add const and then make it a pointer.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;class T&gt;\nstruct MyStruct { };\n\ntemplate&lt;&gt;\nstruct MyStruct&lt;int&gt; {\n    typedef int* type;\n};\n\ntemplate&lt;class T&gt;\nvoid foo( std::add_const_t&lt;std::remove_pointer_t&lt;typename MyStruct&lt;T&gt;::type&gt;&gt; * myType) {}\n\nint main()\n{\n    const int* ptr = nullptr;\n    foo&lt;int&gt;(ptr);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 3706707, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4ed4be8b27a97cd38ae6a3ed5004980e?s=128&d=identicon&r=PG&f=1", "display_name": "UdiM", "link": "https://stackoverflow.com/users/3706707/udim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1499817769, "creation_date": 1487189075, "last_edit_date": 1499817769, "question_id": 42258970, "link": "https://stackoverflow.com/questions/42258970/compiler-ignores-const-on-function-parameter", "title": "Compiler ignores &#39;const&#39; on function parameter", "body": "<p>I have a problem with a compiler error, take a look at this code:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct MyStruct\n{\n};\n\ntemplate&lt;&gt;\nstruct MyStruct&lt;int&gt;\n{\n    typedef int* type;\n};\n\ntemplate&lt;class T&gt;\nvoid foo(const typename MyStruct&lt;T&gt;::type myType)\n{\n}\n\nint main()\n{\n    const int* ptr = NULL;\n    foo&lt;int&gt;(ptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that the compiler is ignoring the 'const' on foo function, making the call to foo illegal (const int* to int*).</p>\n\n<blockquote>\n  <p>Severity  Code    Description Project File    Line    Suppression State\n  Error   C2664   'void foo(const MyStruct::type)': cannot convert argument 1 from 'const int *' to 'const MyStruct::type' </p>\n</blockquote>\n\n<p>I have tested the following code in Visual studio's and gcc's 5.3 complier, both of them dropping the same error. </p>\n\n<p>Does the complier doing this on purpose? why is this happening?</p>\n"}, {"tags": ["c++", "boost", "bjam", "boost-build"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1487189536, "post_id": 42258949, "comment_id": 71675980, "body": "&quot;I have build the library using the command bootstrap.bat&quot; -- that doesn&#39;t build the library, it just prepares the build system (e.g. compiles bjam) so you can build it."}, {"owner": {"reputation": 21, "user_id": 4227655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17aa2f4b0f991ef52a2bea5b3ad6a8e?s=128&d=identicon&r=PG", "display_name": "Tauseef", "link": "https://stackoverflow.com/users/4227655/tauseef"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1487282163, "post_id": 42258949, "comment_id": 71727528, "body": "Thanks for correcting. You mean bjam --show-libraries command will work after i build it? Whereas i think above command should show at least all libraries and then i can choose which one to build, am i wrong?"}], "owner": {"reputation": 21, "user_id": 4227655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b17aa2f4b0f991ef52a2bea5b3ad6a8e?s=128&d=identicon&r=PG", "display_name": "Tauseef", "link": "https://stackoverflow.com/users/4227655/tauseef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1329, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487197228, "creation_date": 1487188990, "last_edit_date": 1487197228, "question_id": 42258949, "link": "https://stackoverflow.com/questions/42258949/configure-jam-no-such-file-or-directory", "title": "configure.jam: No such file or directory", "body": "<p>I have installed boost c++ library, \"boost_1_63_0\" to use with MinGW compiler on windows 8.1. I am also using boost-build. I have build the library using the command bootstrap.bat and now there is bjam.exe file in BOOST_ROOT. I also set the toolset option \"using gcc ;\" in \"user-config.jam\" file in boost-build directory. But still i am facing following error message while running command</p>\n\n<blockquote>\n  <p>bjam --show-libraries</p>\n</blockquote>\n\n<p>...........Here is console output..................</p>\n\n<h2><img src=\"https://i.stack.imgur.com/ZZj5l.png\" alt=\"[console output\">]<a href=\"https://i.stack.imgur.com/ZZj5l.png\" rel=\"nofollow noreferrer\">1</a></h2>\n\n<p>Please identify which configure.jam file it is and what to configure?\nThanks in advance.</p>\n"}, {"tags": ["c++", "windows", "qt", "command-prompt", "qt5.8"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7570974, "user_type": "registered", "profile_image": "https://graph.facebook.com/1277231809062602/picture?type=large", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7570974/andrey"}, "edited": false, "score": 0, "creation_date": 1487365547, "post_id": 42292619, "comment_id": 71769631, "body": "Thank you for your answer. Now I am use QThread and system() command. This solution make code more complex, but this is work and cross-platform."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 23, "user_id": 7570974, "user_type": "registered", "profile_image": "https://graph.facebook.com/1277231809062602/picture?type=large", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7570974/andrey"}, "edited": false, "score": 0, "creation_date": 1487371763, "post_id": 42292619, "comment_id": 71772427, "body": "BTW, if don&#39;t mind about using Boost in addition to Qt, and if the <code>system</code> call can be completely asynchronous, you can make it in a single line: <code>boost::thread([]() { system(&quot;cmd.exe&quot;); });</code>"}], "tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 0, "last_activity_date": 1487319036, "creation_date": 1487319036, "answer_id": 42292619, "question_id": 42258892, "link": "https://stackoverflow.com/questions/42258892/qprocessstartdetached-not-show-console-window/42292619#42292619", "title": "QProcess::startDetached() not show console window", "body": "<p>It is the expected behavior. At least in Windows <code>startDetached</code> is equivalent to calling <code>CreateProcess</code> with the <a href=\"https://msdn.microsoft.com/es-es/library/windows/desktop/ms684863(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>DETACHED_PROCESS</code></a> flag, where the new process does not inherit its parent's console. It makes sense that in other platforms the method would do something similar.</p>\n\n<p>In this case you'd had to manually allocate a new one using <a href=\"https://msdn.microsoft.com/es-es/library/windows/desktop/ms681944(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>AllocConsole</code></a> on the new process (be aware that you may need to redirect the streaming handles to the new console), or try to start the process in a different way (check <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>CreateProcess</code></a> or <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\"><code>fork</code></a>).</p>\n\n<p>BTW, the reason <code>system</code> freezes your application is because it is a synchronous call, so it won't return the control until the other process finishes. You may try calling <code>system</code> from a separate thread and it this way you avoid blocking the main event loop of your application.</p>\n"}], "owner": {"reputation": 23, "user_id": 7570974, "user_type": "registered", "profile_image": "https://graph.facebook.com/1277231809062602/picture?type=large", "display_name": "Andrey", "link": "https://stackoverflow.com/users/7570974/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "accepted_answer_id": 42292619, "answer_count": 1, "score": 2, "last_activity_date": 1487319036, "creation_date": 1487188727, "question_id": 42258892, "link": "https://stackoverflow.com/questions/42258892/qprocessstartdetached-not-show-console-window", "title": "QProcess::startDetached() not show console window", "body": "<p>I have a GUI program that start cli program by click button. I want to see console window and don't need wait until cli program end. So I use code like this:</p>\n\n<pre><code>QProcess::startDetached(\"cmd.exe\");\n</code></pre>\n\n<p>After click button I don't see console window. But see cmd.exe process in task manager.</p>\n\n<p>I tried use system() command but it freeze my app before cli program end.</p>\n\n<p>Is there any way to make window visible?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 3, "creation_date": 1487188722, "post_id": 42258885, "comment_id": 71675502, "body": "Don&#39;t spam tags please."}, {"owner": {"reputation": 5678, "user_id": 1442821, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7c73b66fc831aa768fd872eb86b447f7?s=128&d=identicon&r=PG&f=1", "display_name": "kdauria", "link": "https://stackoverflow.com/users/1442821/kdauria"}, "edited": false, "score": 0, "creation_date": 1487207417, "post_id": 42258885, "comment_id": 71683519, "body": "This should be moved to the code golf site: <a href=\"http://codegolf.stackexchange.com/\">codegolf.stackexchange.com</a>"}, {"owner": {"reputation": 5678, "user_id": 1442821, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7c73b66fc831aa768fd872eb86b447f7?s=128&d=identicon&r=PG&f=1", "display_name": "kdauria", "link": "https://stackoverflow.com/users/1442821/kdauria"}, "edited": false, "score": 0, "creation_date": 1487207453, "post_id": 42258885, "comment_id": 71683532, "body": "I&#39;m voting to close this question as off-topic because it should be moved to the code golf site: <a href=\"http://codegolf.stackexchange.com/\">codegolf.stackexchange.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1487189815, "creation_date": 1487189815, "answer_id": 42259189, "question_id": 42258885, "link": "https://stackoverflow.com/questions/42258885/can-we-return-decision-based-values-from-a-function-without-using-any-control-st/42259189#42259189", "title": "Can we return decision based values from a function without using any control structure?", "body": "<p>Use the property of XOR operation:</p>\n\n<pre><code>A xor A = 0\n0 xor B = B\n</code></pre>\n\n<p>Combined it is giving </p>\n\n<pre><code>                 /\n                 | A if B == C \nA xor B xor C = &lt;  B if A == C\n                 | something else otherwise\n                 \\\n</code></pre>\n\n<p>So utilizing this you can write a function</p>\n\n<pre><code>unsigned int foo(unsigned int x)\n{\n    return x ^ 5 ^ 9;\n}\n</code></pre>\n\n<p>So here it can be either <code>x == 5</code> and then it will return <code>5^5^9=9</code>, or <code>x == 9</code> and then it will return <code>9^5^9=5</code></p>\n"}, {"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 4, "last_activity_date": 1487191208, "last_edit_date": 1487191208, "creation_date": 1487190742, "answer_id": 42259461, "question_id": 42258885, "link": "https://stackoverflow.com/questions/42258885/can-we-return-decision-based-values-from-a-function-without-using-any-control-st/42259461#42259461", "title": "Can we return decision based values from a function without using any control structure?", "body": "<p>The solution might be:</p>\n\n<pre><code>unsigned flip59(unsigned x)\n{\n    return x ^ 12;\n}\n</code></pre>\n\n<p>The trick is that bitwise XOR operation can be used to either preserve or negate the bits basing on the mask. Here, the bits at position 2 and 3 are flipped, hence yielding <code>5 --&gt; 9</code> and <code>9 --&gt; 5</code>.</p>\n\n<h3><code>x = 5:</code></h3>\n\n<pre><code>5 : 0000 0101\n12: 0000 1100\n^\n9 : 0000 1001\n</code></pre>\n\n<h3><code>x = 9:</code></h3>\n\n<pre><code>9 : 0000 1001\n12: 0000 1100\n^\n5 : 0000 0101 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1356, "user_id": 4584421, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xdIx5.png?s=128&g=1", "display_name": "Julian Declercq", "link": "https://stackoverflow.com/users/4584421/julian-declercq"}, "is_accepted": false, "score": 1, "last_activity_date": 1487196981, "last_edit_date": 1487196981, "creation_date": 1487190853, "answer_id": 42259492, "question_id": 42258885, "link": "https://stackoverflow.com/questions/42258885/can-we-return-decision-based-values-from-a-function-without-using-any-control-st/42259492#42259492", "title": "Can we return decision based values from a function without using any control structure?", "body": "<p>Cool thing to see how different people do it. This is my solution. It's a no-brainer really. I bet there's a lot more simple solutions!</p>\n\n<p>in short:</p>\n\n<pre><code>int function(int i){\n  map&lt;int, int&gt; m{{5, 9}, {9, 5}};\n  return m[i];\n}\n</code></pre>\n\n<p>or long step-wise version + test</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint function(int i)\n{\n  map&lt;int, int&gt; m;\n  m.insert({5, 9});\n  m.insert({9, 5});\n\n  return m[i];\n}\n\nint main()\n{\n  cout &lt;&lt; function(5) &lt;&lt; endl;\n  cout &lt;&lt; function(9) &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 0, "last_activity_date": 1487191745, "creation_date": 1487191745, "answer_id": 42259752, "question_id": 42258885, "link": "https://stackoverflow.com/questions/42258885/can-we-return-decision-based-values-from-a-function-without-using-any-control-st/42259752#42259752", "title": "Can we return decision based values from a function without using any control structure?", "body": "<p>A variant of the original idea using a smaller lookup table:</p>\n\n<pre><code>int get5or9( int x )\n{\n    const int lookup[] = { 9, 5 };\n    return lookup[ ( x &gt;&gt; 3 ) &amp; 1 ];\n}\n</code></pre>\n"}], "owner": {"reputation": 1066, "user_id": 5383801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9ceh.jpg?s=128&g=1", "display_name": "Muhammad Iqbal", "link": "https://stackoverflow.com/users/5383801/muhammad-iqbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1487207453, "accepted_answer_id": 42259461, "answer_count": 4, "score": -3, "last_activity_date": 1487196981, "creation_date": 1487188694, "last_edit_date": 1487189081, "question_id": 42258885, "link": "https://stackoverflow.com/questions/42258885/can-we-return-decision-based-values-from-a-function-without-using-any-control-st", "closed_reason": "Needs more focus", "title": "Can we return decision based values from a function without using any control structure?", "body": "<p>One of my senior asked me to solve this programming puzzle.</p>\n\n<p>Puzzle:: Make a function that returns 9 if you pass 5 on function call. and return 5 if you pass 9 on function call but you don't use any control structure if,switch ternary operator etc.\nI implement this puzzle using bellow mentioned code snippet </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint myFunction(int value){\n    return value%5;\n}\n\nint main(){\n    int myArray[5]={9,5,5,5,5};\n    cout&lt;&lt;myArray[myFunction(9)]&lt;&lt;endl\n        &lt;&lt;myArray[myFunction(5)];\n    return 0;\n}\n</code></pre>\n\n<p>suggest more efficient way to solve this puzzle</p>\n"}, {"tags": ["c++", "api", "com", "save", "solidworks"], "answers": [{"tags": [], "owner": {"reputation": 140, "user_id": 7571066, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GuhBsYDbhyo/AAAAAAAAAAI/AAAAAAAAAK4/TCKAx9Ybo1I/photo.jpg?sz=128", "display_name": "Guillermo Oliver", "link": "https://stackoverflow.com/users/7571066/guillermo-oliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1487270435, "creation_date": 1487270435, "answer_id": 42282146, "question_id": 42258752, "link": "https://stackoverflow.com/questions/42258752/swgenericsaveerror-when-using-solidworks-api-to-save-assembly-as-part-c/42282146#42282146", "title": "swGenericSaveError when using SolidWorks API to save assembly as part (C++)", "body": "<p>Found the solution. The key is to use the <strong>ActivateDoc3</strong> method to activate the loaded assembly before saving the document. This takes care of the swGenericSaveError and works great.</p>\n"}], "owner": {"reputation": 140, "user_id": 7571066, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GuhBsYDbhyo/AAAAAAAAAAI/AAAAAAAAAK4/TCKAx9Ybo1I/photo.jpg?sz=128", "display_name": "Guillermo Oliver", "link": "https://stackoverflow.com/users/7571066/guillermo-oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 42282146, "answer_count": 1, "score": 0, "last_activity_date": 1487270435, "creation_date": 1487188212, "question_id": 42258752, "link": "https://stackoverflow.com/questions/42258752/swgenericsaveerror-when-using-solidworks-api-to-save-assembly-as-part-c", "title": "swGenericSaveError when using SolidWorks API to save assembly as part (C++)", "body": "<p>I am trying to use the C++ API implementation to save an assembly (.SLDASM) as a part document (.SLDPRT), but I keep getting swGenericSaveError.</p>\n\n<p>Using the following code:</p>\n\n<pre><code>void guardarModelo()  \n{  \n  //Guardar como part  \n  wchar_t exportedfilename[MAX_PATH], assemblyname[MAX_PATH], *pext, *pname;  \n  long error = 0, warning = 0;  \n  VARIANT_BOOL result = 0;  \n  CComPtr&lt;IModelDocExtension&gt; swExtension; //Extension (formato de fichero)  \n  swUserPreferenceIntegerValue_e part = swSaveAssemblyAsPartOptions; //Opciones de part  \n\n  //Arreglamos la extension y la ubicacion del fichero  \n  wcscpy(exportedfilename, filename);  \n  pext = wcsrchr(exportedfilename, L'\\\\') + 1;  \n  wcscpy(pext, L\"-modelo\\\\\");  \n  CreateDirectory(exportedfilename, NULL);  \n\n  wcscpy(assemblyname, filename);  \n  pname = wcsrchr(assemblyname, L'\\\\') + 1;  \n  pext = wcsrchr(assemblyname, L'.');  \n  wcsncpy(pext, L\".SLDPRT\\0\", 8);  \n  wcscat(exportedfilename, pname);  \n\n  CComBSTR sFileName(exportedfilename);  \n\n  swModel-&gt;get_Extension(&amp;swExtension);  \n\n  //swApp-&gt;SetUserPreferenceIntegerValue(part, swSaveAsmAsPart_AllComponents, &amp;result);  \n  swExtension-&gt;SetUserPreferenceInteger(swSaveAssemblyAsPartOptions, swDetailingNoOptionSpecified, swSaveAsmAsPart_AllComponents, &amp;result);  \n\n  swExtension-&gt;SaveAs(sFileName, swSaveAsCurrentVersion, swSaveAsOptions_Silent, NULL, &amp;error, &amp;warning, &amp;result);  \n\n  if (error == 0)  \n  wcout &lt;&lt; \"Modelo completo guardado como part.\" &lt;&lt; endl;  \n  else  \n  wcout &lt;&lt; \"ERROR \" &lt;&lt; error &lt;&lt; \" guardando modelo completo como part.\" &lt;&lt; endl;  \n\n}  \n</code></pre>\n\n<p>The code works fine when exporting the asssembly to a Parasolid binary (.x_b):</p>\n\n<pre><code>void exportarModelo()  \n{  \n  //Exportar a parasolid  \n  wchar_t exportedfilename[MAX_PATH], assemblyname[MAX_PATH], *pext, *pname;  \n  long error = 0, warning = 0;   \n  VARIANT_BOOL result = 0;  \n  CComPtr&lt;IModelDocExtension&gt; swExtension; //Extension (formato de fichero)  \n  swUserPreferenceIntegerValue_e parasolid = swParasolidOutputVersion; //Opciones de Parasolid  \n\n\n  //Arreglamos la extension y la ubicacion del fichero  \n  wcscpy(exportedfilename, filename);  \n  pext = wcsrchr(exportedfilename, L'\\\\') + 1;  \n  wcscpy(pext, L\"-modelo\\\\\");  \n  CreateDirectory(exportedfilename, NULL);  \n\n\n  wcscpy(assemblyname, filename);  \n  pname = wcsrchr(assemblyname, L'\\\\') + 1;  \n  pext = wcsrchr(assemblyname, L'.');  \n  wcsncpy(pext, L\".x_b\\0\", 5);  \n  wcscat(exportedfilename, pname);  \n\n\n  CComBSTR sFileName(exportedfilename);  \n\n  swModel-&gt;get_Extension(&amp;swExtension);  \n\n\n  //Elegir version de Parasolid y guardar  \n  swApp-&gt;SetUserPreferenceIntegerValue(parasolid, swParasolidOutputVersion_150, &amp;result);  \n\n\n  swExtension-&gt;SaveAs(sFileName, swSaveAsCurrentVersion, swSaveAsOptions_Silent, NULL, &amp;error, &amp;warning, &amp;result);  \n\n\n  if (error == 0)  \n  wcout &lt;&lt; \"Modelo completo exportado a Parasolid.\" &lt;&lt; endl;  \n  else  \n  wcout &lt;&lt; \"ERROR \" &lt;&lt; error &lt;&lt; \" exportando modelo completo a Parasolid.\" &lt;&lt; endl;  \n\n\n}  \n</code></pre>\n\n<p>Anyone has any idea why this isn't working? Is there an alternative way to save all components of an assembly in a single part document?</p>\n"}, {"tags": ["c++", "c++11", "templates", "unique", "constexpr"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1487187863, "post_id": 42258608, "comment_id": 71675005, "body": "A <code>reinterpret_cast</code> <i>cannot</i> appear in a <code>constexpr</code> function. That&#39;s that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1487188049, "post_id": 42258608, "comment_id": 71675111, "body": "What is <code>ysize</code>? Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1136, "user_id": 5147158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f5a49ac25a325cbd8293c5c6793c40f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lenkefi", "link": "https://stackoverflow.com/users/5147158/peter-lenkefi"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1487188450, "post_id": 42258608, "comment_id": 71675329, "body": "@LightnessRacesinOrbit Sorry ysize was my own defined size_t. Edited"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1487187928, "creation_date": 1487187928, "answer_id": 42258675, "question_id": 42258608, "link": "https://stackoverflow.com/questions/42258608/c-constexpr-values-for-types/42258675#42258675", "title": "C++ constexpr values for types", "body": "<p><code>constexpr</code> functions can not use <code>reinterpret_cast</code> in any shape or form. Some more formal reading can be found at <a href=\"http://en.cppreference.com/w/cpp/language/constant_expression\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/constant_expression</a> </p>\n"}, {"comments": [{"owner": {"reputation": 1136, "user_id": 5147158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f5a49ac25a325cbd8293c5c6793c40f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lenkefi", "link": "https://stackoverflow.com/users/5147158/peter-lenkefi"}, "edited": false, "score": 0, "creation_date": 1487267554, "post_id": 42259567, "comment_id": 71719089, "body": "Both this and @PaperBirdMaster&#39;s are awesome, sadly I can&#39;t accept 2 answers. Thank you, clever!"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 4, "last_activity_date": 1487191112, "creation_date": 1487191112, "answer_id": 42259567, "question_id": 42258608, "link": "https://stackoverflow.com/questions/42258608/c-constexpr-values-for-types/42259567#42259567", "title": "C++ constexpr values for types", "body": "<p>I'm not sure it's a good idea but... just for fun... using the <code>constexpr</code> counter, suggested <a href=\"http://b.atch.se/posts/constexpr-counter/\" rel=\"nofollow noreferrer\">in this page</a>, you should be able to substitute the value of the pointer.</p>\n\n<p>The following is a (I repeat: just for fun) full experiment</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;int N&gt;\nstruct flag\n { friend constexpr int adl_flag (flag&lt;N&gt;); };\n\ntemplate &lt;int N&gt;\nstruct writer\n {\n   friend constexpr int adl_flag (flag&lt;N&gt;)\n    { return N; }\n\n   static constexpr int value { N };\n };\n\ntemplate &lt;int N, int = adl_flag (flag&lt;N&gt; {})&gt;\nint constexpr reader (int, flag&lt;N&gt;)\n { return N; }\n\ntemplate &lt;int N&gt;\nint constexpr reader (float, flag&lt;N&gt;, int R = reader (0, flag&lt;N-1&gt; {}))\n { return R; }\n\nint constexpr reader (float, flag&lt;0&gt;)\n { return 0; }\n\ntemplate &lt;int N = 1&gt;\nint constexpr next (int R = writer&lt;reader (0, flag&lt;32&gt; {}) + N&gt;::value)\n { return R; }\n\ntemplate &lt;typename T&gt;\nstruct type\n { \n   static constexpr int id { next() };\n\n   constexpr static int type_id ()\n    { return id; }\n };\n\nvoid printType (int idT )\n {\n   switch ( idT )\n    {\n      case type&lt;int&gt;::type_id():\n         std::cout &lt;&lt; \"- int type\" &lt;&lt; std::endl;\n         break;\n\n      case type&lt;long&gt;::id:\n         std::cout &lt;&lt; \"- long type\" &lt;&lt; std::endl;\n         break;\n\n      default:\n         std::cout &lt;&lt; \"- another type\" &lt;&lt; std::endl;\n         break;\n    }\n }\n\nint main ()\n {\n   int ii { type&lt;int&gt;::id };\n   int il { type&lt;long&gt;::type_id() };\n\n   printType(ii);\n   printType(il);\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": false, "score": 3, "last_activity_date": 1487191166, "creation_date": 1487191166, "answer_id": 42259583, "question_id": 42258608, "link": "https://stackoverflow.com/questions/42258608/c-constexpr-values-for-types/42259583#42259583", "title": "C++ constexpr values for types", "body": "<p>This may solve your problem:</p>\n\n<pre><code>#include &lt;tuple&gt;\n\n//Index from http://stackoverflow.com/a/18063608/3484570\ntemplate &lt;class T, class Tuple&gt;\nstruct Index;\n\ntemplate &lt;class T, class... Types&gt;\nstruct Index&lt;T, std::tuple&lt;T, Types...&gt;&gt; {\n    static const std::size_t value = 0;\n};\n\ntemplate &lt;class T, class U, class... Types&gt;\nstruct Index&lt;T, std::tuple&lt;U, Types...&gt;&gt; {\n    static const std::size_t value = 1 + Index&lt;T, std::tuple&lt;Types...&gt;&gt;::value;\n};\n\ntemplate &lt;class T&gt;\nconstexpr std::size_t type_id() {\n    //need to add every type in this tuple:\n    return Index&lt;T, std::tuple&lt;int, double, char&gt;&gt;::value;\n}\n\nint main() {\n    size_t a = type_id&lt;int&gt;();\n    switch (a) {\n        case type_id&lt;int&gt;():\n            break;\n    }\n}\n</code></pre>\n\n<p>The good news is that you get a <code>type_id&lt;T&gt;()</code> that you can use in a <code>constexpr</code> context such as in a <code>case</code> like you wanted.<br>\nThe bad news is that you need to list all supported types.<br>\nIn practice you might get used to the error message that occurs when you ask for the <code>type_id</code> of an unsupported type and just add it and eventually add all relevant types.</p>\n"}, {"comments": [{"owner": {"reputation": 18645, "user_id": 50385, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2faf0c72f6a7f65431e7df489878be24?s=128&d=identicon&r=PG", "display_name": "Joseph Garvin", "link": "https://stackoverflow.com/users/50385/joseph-garvin"}, "edited": false, "score": 0, "creation_date": 1579885839, "post_id": 42269094, "comment_id": 105929035, "body": "this won&#39;t work with template types because of the macro usage, it will capture the name of the template parameter rather than the type that it actually represents"}], "tags": [], "owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "is_accepted": false, "score": 3, "last_activity_date": 1487235377, "creation_date": 1487235377, "answer_id": 42269094, "question_id": 42258608, "link": "https://stackoverflow.com/questions/42258608/c-constexpr-values-for-types/42269094#42269094", "title": "C++ constexpr values for types", "body": "<p>I would like to suggest another approach which involves <code>constexpr</code> functions and macros (<em>eeeewww...</em>):</p>\n\n<pre><code>// Some naive text hashing function\ntemplate &lt;std::size_t SIZE&gt;\nconstexpr std::size_t hash(const char (&amp;type_name)[SIZE])\n{\n    std::size_t result{0xf};\n    for (const auto &amp;c : type_name)\n    {\n        result &lt;&lt;= 1;\n        result |= c;\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>First we create  a <code>constexpr</code> function able to transform a string literal into a number, this is my approach but you can choose anoter function as long as it is <code>constexpr</code>, then we create a macro which stringify the given parameter using the <code>#</code>:</p>\n\n<pre><code>#define TYPE_ID(X) hash(#X)\n</code></pre>\n\n<p>And now, we can use it:</p>\n\n<pre><code>int main(void) {\n    size_t a = TYPE_ID(int);\n    switch (a) {\n    case TYPE_ID(int):\n        break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Pros:</p>\n\n<ul>\n<li>Pretty straightforward.</li>\n<li>Tiny amount of code.</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Macros.</li>\n<li>Accepts any value, included nonsense: <code>TYPE_ID(I LOVE BACON)</code> is valid.</li>\n<li>Yields different result for <code>TYPE_ID(size_t)</code> and <code>TYPE_ID(unsigned long)</code> even if they might be the same type.</li>\n</ul>\n"}], "owner": {"reputation": 1136, "user_id": 5147158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f5a49ac25a325cbd8293c5c6793c40f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lenkefi", "link": "https://stackoverflow.com/users/5147158/peter-lenkefi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2613, "favorite_count": 1, "accepted_answer_id": 42259567, "answer_count": 4, "score": 6, "last_activity_date": 1489925709, "creation_date": 1487187690, "last_edit_date": 1489925709, "question_id": 42258608, "link": "https://stackoverflow.com/questions/42258608/c-constexpr-values-for-types", "title": "C++ constexpr values for types", "body": "<p>I want to be able to create switch statements over a type's ID. I've found a mechanism that could give a unique ID for different types. It's very simple:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct type { \n    static void id() { } \n};\n\ntemplate &lt;typename T&gt;\nconstexpr const size_t type_id() {\n    return reinterpret_cast&lt;size_t&gt;(&amp;type&lt;T&gt;::id); \n}\n</code></pre>\n\n<p>I thought this would evaluate to a constant that I could use as cases for the switch. But I get an error that the case expression is not a constant when I do the following:</p>\n\n<pre><code>int main(void) {\n    size_t a = type_id&lt;int&gt;();\n    switch (a) {\n    case type_id&lt;int&gt;():\n        break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Why is it not a constant? How could I achieve this effect?</p>\n\n<p>Edit:</p>\n\n<p>Can I do something like this without the reinterpret_cast then?</p>\n"}, {"tags": ["c++", "c++11", "pointers", "syntax"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 5, "creation_date": 1487187610, "post_id": 42258566, "comment_id": 71674856, "body": "It is a C-style cast. Get a good textbook."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1487187651, "post_id": 42258566, "comment_id": 71674886, "body": "You have a Window pointer set equal to the function return casted to a main_Window pointer."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1487187681, "post_id": 42258566, "comment_id": 71674905, "body": "Note that Window* can be equal to a main_window probably because Window is the base class"}], "answers": [{"tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1487187680, "creation_date": 1487187680, "answer_id": 42258602, "question_id": 42258566, "link": "https://stackoverflow.com/questions/42258566/syntax-meaning-in-c/42258602#42258602", "title": "Syntax meaning in C++", "body": "<p>Casting in C. Means that memory you get from function will be casted to <code>main_window</code> type of your structure or class you have.</p>\n\n<p>This will help compiler to know everything about your data offsets in structure or class. It will also prevent any warnings from compiler.</p>\n\n<p>This will be later assigned to win variable.</p>\n"}], "owner": {"reputation": 1179, "user_id": 7369982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52db64fee4466ea4c9ceff87500fdcb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dorone", "link": "https://stackoverflow.com/users/7369982/tom-dorone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1487188168, "creation_date": 1487187556, "question_id": 42258566, "link": "https://stackoverflow.com/questions/42258566/syntax-meaning-in-c", "title": "Syntax meaning in C++", "body": "<p>Can someone please explain to me the meaning of the first parentheses in the following statement:</p>\n\n<pre><code>Window* win= (main_window*) glfwGetWindowUserPointer(main_window);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 4, "creation_date": 1487187499, "post_id": 42258537, "comment_id": 71674804, "body": "It&#39;s a default constructor.  You don&#39;t need the semicolon. Also, your operator+ should ideally not be a member function. And  cplusplus.com is not a good learning resource."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1487187611, "post_id": 42258537, "comment_id": 71674859, "body": "There must be a duplicate, but I can&#39;t find one..."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1487187614, "post_id": 42258537, "comment_id": 71674862, "body": "It would be better to fill in <code>x</code> and <code>y</code> with an initialization list"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487187658, "post_id": 42258537, "comment_id": 71674891, "body": "@SergeyA - Probably page 5 or 10 of a C++ programming book"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487189036, "post_id": 42258537, "comment_id": 71675687, "body": "@SergeyA I doubt that there&#39;s something appropriate. That question is lacking of research at best though. (Eek, I even wrote an answer :-P )"}, {"owner": {"reputation": 127, "user_id": 7212364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee7932311b64c3ab8b4672736ba84f4d?s=128&d=identicon&r=PG&f=1", "display_name": "Pracka", "link": "https://stackoverflow.com/users/7212364/pracka"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487192625, "post_id": 42258537, "comment_id": 71677641, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 Thanks for your help. I did try to find out my answer by reviewing the chapter on constructor before asking. But I failed to recognize this is a default constructor because I have never seen it be used before.  Neil Butterworth"}, {"owner": {"reputation": 127, "user_id": 7212364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee7932311b64c3ab8b4672736ba84f4d?s=128&d=identicon&r=PG&f=1", "display_name": "Pracka", "link": "https://stackoverflow.com/users/7212364/pracka"}, "edited": false, "score": 0, "creation_date": 1487193086, "post_id": 42258537, "comment_id": 71677892, "body": "@Neil Butterworth thanks for your help. I found cplusplus.com to be the most helpful among all the C++ tutorial websites I have visited. Can you suggest some better learning source?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487193230, "post_id": 42258537, "comment_id": 71677975, "body": "@Pracka Get a good book. Heck, get several."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487191269, "post_id": 42258821, "comment_id": 71676926, "body": "What makes you think the assignment operator and copy constructor will not be generated?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487191407, "post_id": 42258821, "comment_id": 71676989, "body": "@NeilButterworth Removed that."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1487210826, "last_edit_date": 1487210826, "creation_date": 1487188509, "answer_id": 42258821, "question_id": 42258537, "link": "https://stackoverflow.com/questions/42258537/class-name-followed-by-empty-parentheses-and-empty-curly-braces/42258821#42258821", "title": "Class name followed by empty parentheses and empty curly braces", "body": "<blockquote>\n  <p>I am not sure what <code>CVector () {};</code> means here. It does not look like a constructor,</p>\n</blockquote>\n\n<p>What gives you this idea? Of course that's a default constructor <strong>defined</strong> without any special member initializers.</p>\n\n<p><sub>The semicolon can be dropped, it's only needed for plain function declarations, that do not provide a definition.</sub></p>\n\n<blockquote>\n  <p>and when I delete this line, the compiler give me errors.</p>\n</blockquote>\n\n<p>That's probably because some other part of your code needs to have a default constructor for <code>CVector</code>. The obvious candidate is</p>\n\n<pre><code>CVector result;\n</code></pre>\n\n<hr>\n\n<p>To extend a little bit:</p>\n\n<p>You have to declare/define the default constructor function explicitly, as soon you declare a custom constructor like </p>\n\n<pre><code>CVector (int a,int b) : x(a), y(b) {}\n</code></pre>\n\n<p>The automatically generated default constructor</p>\n\n<pre><code>CVector();\n</code></pre>\n\n<p>won't be generated in that case.</p>\n\n<p>The easiest way in such case is to write</p>\n\n<pre><code>CVector () = default;\n</code></pre>\n\n<p>But you have to define it to be usable with statements like</p>\n\n<pre><code>CVector result;\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 7212364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee7932311b64c3ab8b4672736ba84f4d?s=128&d=identicon&r=PG&f=1", "display_name": "Pracka", "link": "https://stackoverflow.com/users/7212364/pracka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 42258821, "answer_count": 1, "score": -1, "last_activity_date": 1487210826, "creation_date": 1487187456, "question_id": 42258537, "link": "https://stackoverflow.com/questions/42258537/class-name-followed-by-empty-parentheses-and-empty-curly-braces", "title": "Class name followed by empty parentheses and empty curly braces", "body": "<p>This is a sample code found on cplusplus.com for overloading operators. I am not sure what \"CVector () {};\" means here. It does not look like a constructor, and when I delete this line, the compiler give me errors. </p>\n\n<pre><code>// overloading operators example\n#include &lt;iostream&gt;\nusing namespace std;\n\nclass CVector {\n  public:\n    int x,y;\n    CVector () {};                             &lt;-- This Line\n    CVector (int a,int b) : x(a), y(b) {}\n    CVector operator + (const CVector&amp;);\n};\n\nCVector CVector::operator+ (const CVector&amp; param) {\n  CVector temp;\n  temp.x = x + param.x;\n  temp.y = y + param.y;\n  return temp;\n}\n\nint main () {\n  CVector foo (3,1);\n  CVector bar (1,2);\n  CVector result;\n  result = foo + bar;\n  cout &lt;&lt; result.x &lt;&lt; ',' &lt;&lt; result.y &lt;&lt; '\\n';\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 573, "user_id": 3853544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8fb5bb3d5d9f89483269b8ba233de92c?s=128&d=identicon&r=PG&f=1", "display_name": "user3853544", "link": "https://stackoverflow.com/users/3853544/user3853544"}, "edited": false, "score": 0, "creation_date": 1487187543, "post_id": 42258508, "comment_id": 71674823, "body": "Just to clarify if you input 099 you want the reverse to be 990?"}], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": true, "score": 0, "last_activity_date": 1487187817, "creation_date": 1487187817, "answer_id": 42258640, "question_id": 42258508, "link": "https://stackoverflow.com/questions/42258508/padding-with-a-zero-when-reversing-a-number/42258640#42258640", "title": "Padding with a zero when reversing a number", "body": "<p>There is nothing wrong with your <code>reverse()</code> function. it would seem that the problem you are having is in another part of your code. Namely: in the code that adds a reversed number to it's original non-reversed form.</p>\n\n<p>What you should do to make it behave the way you need is to first check if the number has 1, 2, or 3 digits and perform the addition accordingly.</p>\n\n<p>For example:</p>\n\n<pre><code>int add(int _d, int _r){ // _d is \"direct\" and _r is \"reversed\" number\n    int result = _d;\n    if(_r &gt; 99){ // 3 digits\n      result += _r;\n    }else if(_r &gt; 9){ // only 2 digits\n      result += _r * 10;\n    }else{ // only 1 digit\n      result += _r * 100;\n    }\n    return result;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487188598, "post_id": 42258806, "comment_id": 71675415, "body": "Doesn&#39;t look right to me. Have you tested that code?"}, {"owner": {"reputation": 90, "user_id": 7512622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8084a1584184542e7978d466fa384911?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Kuang", "link": "https://stackoverflow.com/users/7512622/bowen-kuang"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487189642, "post_id": 42258806, "comment_id": 71676031, "body": "Thank you for pointing out.I was not. I changed a bit and it is working now: )"}], "tags": [], "owner": {"reputation": 90, "user_id": 7512622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8084a1584184542e7978d466fa384911?s=128&d=identicon&r=PG&f=1", "display_name": "Bowen Kuang", "link": "https://stackoverflow.com/users/7512622/bowen-kuang"}, "is_accepted": false, "score": 0, "last_activity_date": 1487281988, "last_edit_date": 1487281988, "creation_date": 1487188439, "answer_id": 42258806, "question_id": 42258508, "link": "https://stackoverflow.com/questions/42258508/padding-with-a-zero-when-reversing-a-number/42258806#42258806", "title": "Padding with a zero when reversing a number", "body": "<p>That's because your reverse function is general for numbers of all kinds of digits. So you should specify how many digits you want explicitly:</p>\n\n<pre><code>#include &lt;math.h&gt; \nint reverseFunction(int userNumber,int numOfDigits)\n{ \n    int reverse = 0,mod; \n    int digitsCount = 0;\n    while (userNumber != 0)\n    {\n        mod = userNumber%10;\n        reverse = reverse*10 + mod; \n        userNumber /= 10; \n        digitsCount++;\n    }\n    return reverse*pow(10,numOfDigits-digitsCount);\n}\n</code></pre>\n\n<p>This should do the padding thing for all kinds of digits now.</p>\n"}], "owner": {"reputation": 19, "user_id": 7570965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/747e6ae9787464b78e0bb80e0f6534e4?s=128&d=identicon&r=PG&f=1", "display_name": "Burns", "link": "https://stackoverflow.com/users/7570965/burns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 42258640, "answer_count": 2, "score": 1, "last_activity_date": 1487281988, "creation_date": 1487187342, "question_id": 42258508, "link": "https://stackoverflow.com/questions/42258508/padding-with-a-zero-when-reversing-a-number", "title": "Padding with a zero when reversing a number", "body": "<p>I am working on a program which has one function thats purpose is to reverse a three digit number. The code looks like</p>\n\n<pre><code>int reverseFunction(int userNumber){ \n    int reverse = 0,mod; \n    while (userNumber != 0)\n    {\n        mod = userNumber%10;\n        reverse = reverse*10 + mod; \n        userNumber /= 10; \n    }\n\n    return reverse;\n}\n</code></pre>\n\n<p>This works great except when you pass it a number that has the first number only 1 greater than the last. The reverse is called later on and if the above is true you end up with a two digit number. e.g. </p>\n\n<pre><code>The number you entered is: 473.\n\nThe reversal of the input is: 374.\n\nSubtraction of reversal from the original number is: 99.\n\nReversal of the resulting number is: 99.\n\nAddition of the number to the un-reversed form is: 198.\n\nThe final outcome should be: 1089, which is our \u201cMagic Number\u201d.\n</code></pre>\n\n<p>If the '99' was padded with a zero '099' it would spit out 1089 which is the right number. How do I solve this problem and pad with a zero? I've seen ways to output with a zero but not to calculate with a zero. I'm using c++.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "boost-spirit"], "comments": [{"owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "edited": false, "score": 0, "creation_date": 1487187387, "post_id": 42258463, "comment_id": 71674747, "body": "can someone edit the title to remove the qi::as_wstring part ? it is not relevent (I think)"}, {"owner": {"reputation": 194, "user_id": 5802276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f55f97bea0dc3f4d25395f71048f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Glick", "link": "https://stackoverflow.com/users/5802276/boris-glick"}, "edited": false, "score": 4, "creation_date": 1487195844, "post_id": 42258463, "comment_id": 71679321, "body": "I think you meant to write <code>+(digit)</code> (one or more digits) instead of <code>+(int_)</code> (one or more integers).  Note that it won&#39;t do the same thing as <code>int_</code> (no range check, no +/- sign).  If you want to capture the input recognized by int_, you might try using the raw directive: <code>raw[int_]</code> <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/spirit/doc/html/spirit/qi/reference/directive/raw.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_63_0/libs/spirit/doc/html/spirit/qi/&hellip;</a>"}, {"owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "reply_to_user": {"reputation": 194, "user_id": 5802276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f55f97bea0dc3f4d25395f71048f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Glick", "link": "https://stackoverflow.com/users/5802276/boris-glick"}, "edited": false, "score": 0, "creation_date": 1492104867, "post_id": 42258463, "comment_id": 73857668, "body": "(got back on the project) Hey @BorisGlick, can you put that as an answer so I can accept this as an answer ? Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "edited": false, "score": 0, "creation_date": 1492191331, "post_id": 43416396, "comment_id": 73891675, "body": "Thanks. I got my simple things working, but I am still learning the spirit parser."}, {"owner": {"reputation": 194, "user_id": 5802276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f55f97bea0dc3f4d25395f71048f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Glick", "link": "https://stackoverflow.com/users/5802276/boris-glick"}, "reply_to_user": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "edited": false, "score": 0, "creation_date": 1492191569, "post_id": 43416396, "comment_id": 73891798, "body": "You&#39;re welcome!  I&#39;ve been using it for a while, but still at a &quot;learning&quot; stage."}], "tags": [], "owner": {"reputation": 194, "user_id": 5802276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f55f97bea0dc3f4d25395f71048f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Glick", "link": "https://stackoverflow.com/users/5802276/boris-glick"}, "is_accepted": true, "score": 1, "last_activity_date": 1492191241, "last_edit_date": 1495540005, "creation_date": 1492191241, "answer_id": 43416396, "question_id": 42258463, "link": "https://stackoverflow.com/questions/42258463/trying-to-parse-integer-as-string-qias-wstring/43416396#43416396", "title": "Trying to parse integer as string (qi::as_wstring)", "body": "<p>I think you meant to write <code>+(digit)</code> (one or more digits) instead of <code>+(int_)</code> (one or more integers). Note that <code>+(digit)</code> won't do the same thing as <code>qi::int_</code> (no range check, no +/- sign, no limit on the number of digits, accepting inputs like <code>\"000\"</code>, etc).</p>\n\n<p>If you want to capture the input recognized by <code>qi::int_</code>, you might try using the raw directive: <code>raw[int_]</code> <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/spirit/doc/html/spirit/qi/reference/directive/raw.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_63_0/libs/spirit/doc/html/spirit/qi/reference/directive/raw.html</a></p>\n\n<p>If necessary, it's possible to save <em>both</em> the parsed value and the raw input of the <code>qi::int_</code> parser, see here: <a href=\"https://stackoverflow.com/questions/42634929/qirule-with-inherited-attribute-as-inherited-attribute\">qi::rule with inherited attribute as inherited attribute</a></p>\n"}], "owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 43416396, "answer_count": 1, "score": 3, "last_activity_date": 1492191241, "creation_date": 1487187138, "last_edit_date": 1487188730, "question_id": 42258463, "link": "https://stackoverflow.com/questions/42258463/trying-to-parse-integer-as-string-qias-wstring", "title": "Trying to parse integer as string (qi::as_wstring)", "body": "<p>(disclaimer, I am learning boost spirit)</p>\n\n<p>I am trying to parse an expression like this: \n<strong>F( 1 )</strong> </p>\n\n<p>and want to get the 1 as a string (\"1\" instead of a number (which works with qi::int_)).</p>\n\n<p>I tried something like this (which is wrong, but maybe I am in the right direction), but the resulting string is \"<strong>\\x1</strong>\" instead of just \"<strong>1</strong>\"</p>\n\n<p>Any insight as to what is needed to parse a number into a string?</p>\n\n<pre><code>template &lt;typename Iterator&gt;\nstruct range_parser : boost::spirit::qi::grammar&lt;Iterator, RangeResult(), iso8859_1::space_type&gt;\n{\n    range_parser() : range_parser::base_type(start)\n    {\n        using qi::lexeme;\n        using qi::int_;\n        using iso8859_1::digit;\n\n        number_as_string %= lexeme[ +(int_) ];\n\n        start %=\n            qi::lit(\"F\")\n            &gt;&gt; '('\n            &gt;&gt; number_as_string\n            &gt;&gt; \")\"\n            ;\n    }\n\n    qi::rule&lt;Iterator, std::wstring(), iso8859_1::space_type&gt; number_as_string;\n    qi::rule&lt;Iterator, RangeResult(), iso8859_1::space_type&gt; start;\n};\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "edited": false, "score": 0, "creation_date": 1487188493, "post_id": 42258658, "comment_id": 71675348, "body": "hmm.. yeah, checking for <code>pos</code> definitely can save me. The negative of the problem is that if pos gets to be -1 means that this string shouldn&#39;t even be there."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "edited": false, "score": 0, "creation_date": 1487188652, "post_id": 42258658, "comment_id": 71675453, "body": "@Theo.Fanis, you&#39;ll have to come up with a strategy for dealing with that problem. At least this makes sure that you don&#39;t call <code>erase</code> when you shouldn&#39;t."}, {"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "edited": false, "score": 0, "creation_date": 1487188802, "post_id": 42258658, "comment_id": 71675544, "body": "Yes I know, now that this problem is solved I will go back to my main. thank you very much !"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "edited": false, "score": 0, "creation_date": 1487188834, "post_id": 42258658, "comment_id": 71675557, "body": "@Theo.Fanis If there is no coma, then it&#39;s up to you to define what that means. The most likely case though is that it&#39;s the last token of the string (the previous comas have been erased). In that case, the absence of a comma means that the whole thing is a token."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1487188332, "last_edit_date": 1487188332, "creation_date": 1487187879, "answer_id": 42258658, "question_id": 42258460, "link": "https://stackoverflow.com/questions/42258460/extracting-data-with-stringerase-in-c/42258658#42258658", "title": "Extracting data with string::erase in c++", "body": "<p>It's hard to see why you are seeing the problem. My suggestions:</p>\n\n<p>Remove the <code>erase</code> function call. If the line contains a number followed by a <code>,</code>, then the stream extractor will stop at the <code>,</code> any way. Just use:</p>\n\n<pre><code>int get_id(string myline) {\n   int id = 0;\n   stringstream converter(myline);\n   converter &gt;&gt; id;\n   return id;\n}\n</code></pre>\n\n<p>If you must erase, you may want to add another check.</p>\n\n<pre><code>int get_id(string myline) {\n\n   // Erase only if there is a \",\" in the line.\n   atuo pos = myline.find(\",\");\n   if ( pos != std::string::npos )\n   {\n      myline.erase((myline.begin() + pos), myline.end());\n   }\n\n   int id = 0;\n   stringstream converter(myline);\n   converter &gt;&gt; id;\n   return id;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "edited": false, "score": 0, "creation_date": 1487188175, "post_id": 42258682, "comment_id": 71675177, "body": "yeah, it sounds very reasonable, because I call this function in a big loop. But I&#39;m wondering how, because I check for eof."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 1, "last_activity_date": 1487187978, "creation_date": 1487187978, "answer_id": 42258682, "question_id": 42258460, "link": "https://stackoverflow.com/questions/42258460/extracting-data-with-stringerase-in-c/42258682#42258682", "title": "Extracting data with string::erase in c++", "body": "<p>The example, with the provided data does not cause an error. There will however be a problem if the input contains no comma, such as you will encounter if you try to tokenize the last element. <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/find\" rel=\"nofollow noreferrer\">std::string::find</a> returns <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/npos\" rel=\"nofollow noreferrer\">npos</a> if no match is found. <code>npos</code>'s value is the largest value of <code>std::size_t</code> (if you are using the default allocator). Adding this value to <code>begin</code> will give you an invalid iterator.</p>\n\n<p>Simply compare with <code>npos</code> before erasing to avoid this issue.</p>\n\n<pre><code>if (pos != string::npos) {\n    myline.erase((myline.begin() + pos), myline.end());\n}\n</code></pre>\n"}], "owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 42258682, "answer_count": 2, "score": 3, "last_activity_date": 1487188332, "creation_date": 1487187118, "question_id": 42258460, "link": "https://stackoverflow.com/questions/42258460/extracting-data-with-stringerase-in-c", "title": "Extracting data with string::erase in c++", "body": "<p>I'm working on data reading and writing on csv's.</p>\n\n<p>So I came up with this problem.</p>\n\n<p>I'm taking a line from csv with <code>getline(myfile, myline);</code> and I send myline to a function in order to extract all the useless information and keep the part between some certain ',' (commas) I need.</p>\n\n<p>I implemented this with this function:</p>\n\n<pre><code>int get_id(string myline) {\n    int id;\n    size_t pos;\n    pos = myline.find(\",\");\n    myline.erase((myline.begin() + pos), myline.end());\n    stringstream converter(myline);\n    converter &gt;&gt; id;\n    return id;\n}\n</code></pre>\n\n<p>I have only one <code>myline.find(\",\");</code> because the data I want is the first of the line.</p>\n\n<p>Example of my csv format:</p>\n\n<pre><code>id,name,age,address\n</code></pre>\n\n<p>So I'm having an error at <code>myline.erase()</code> I think because when I put it in comments it ran smoothly. I'm wondering is it correct that I added a <code>size_t</code> to <code>myline.begin()</code> ? (no compilation errors). Is it also correct as a mindset for extracting data ? </p>\n\n<p>The error is the following:</p>\n\n<blockquote>\n  <p>terminate called after throwing an instance of 'std::length_error' what(): basic_string::_S_create</p>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 1821, "user_id": 2391244, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DyC7o.jpg?s=128&g=1", "display_name": "BalinKingOfMoria Reinstate CMs", "link": "https://stackoverflow.com/users/2391244/balinkingofmoria-reinstate-cms"}, "edited": false, "score": 0, "creation_date": 1487186610, "post_id": 42258311, "comment_id": 71674337, "body": "Does <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/04a10aec-3242-4e01-af3f-cb1881d71358/cannot-compile-windows-universal-dll-or-win32-dll-with-vs2015-rc-cannot-open-include-file-ctypeh?forum=vcgeneral\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/vstudio/en-US/&hellip;</a> help?"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "edited": false, "score": 0, "creation_date": 1487186997, "post_id": 42258311, "comment_id": 71674552, "body": "What project are you trying to build? Post project properties and the include directories of your config..."}, {"owner": {"reputation": 363, "user_id": 7307394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2071b7be1d55dbce56d4514a459f77?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hamza Al Omari", "link": "https://stackoverflow.com/users/7307394/m-hamza-al-omari"}, "edited": false, "score": 0, "creation_date": 1487187382, "post_id": 42258311, "comment_id": 71674744, "body": "I found the &#39;ctype.h&#39; file and included the directory to the project , the problem has gone , but i&#39;m getting another problem : cannot open file uctrd.lib"}, {"owner": {"reputation": 266, "user_id": 3092609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e10fe04031a71197441e33d7b7542c?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Kukoba", "link": "https://stackoverflow.com/users/3092609/anton-kukoba"}, "edited": false, "score": 0, "creation_date": 1523355526, "post_id": 42258311, "comment_id": 86516562, "body": "In my case this was because of WDK: <a href=\"https://stackoverflow.com/a/35927499/3092609\">stackoverflow.com/a/35927499/3092609</a>"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1487189904, "post_id": 42258579, "comment_id": 71676185, "body": "If this works, just.. wow. <code>ctype.h</code> has <i>nothing</i> to do with Windows or its SDK. It&#39;s part of the C standard library (likewise, <code>ctype</code> as the C++ counterpart). If anything, I would expect something broken in Programming Languages, not the Windows SDK configuration. Or is this in relation to the <i>second</i> question this post has now morphed to?"}, {"owner": {"reputation": 284, "user_id": 7276783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9252c257f17dee9df552bc0dccdd25bb?s=128&d=identicon&r=PG&f=1", "display_name": "Ynon", "link": "https://stackoverflow.com/users/7276783/ynon"}, "edited": false, "score": 0, "creation_date": 1487190824, "post_id": 42258579, "comment_id": 71676652, "body": "I&#39;ve searched for ctype.h, It&#39;s located in C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.10150.0\\ucrt, which is the directory that&#39;s created when you install the SDK.."}, {"owner": {"reputation": 1340, "user_id": 3575426, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/feCzU.png?s=128&g=1", "display_name": "Youda008", "link": "https://stackoverflow.com/users/3575426/youda008"}, "edited": false, "score": 3, "creation_date": 1494596719, "post_id": 42258579, "comment_id": 74910707, "body": "Reinstall whole Visual Studio just to add 1 feature, that i forgot to tick, really?"}, {"owner": {"reputation": 2021, "user_id": 321935, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PiKZc.jpg?s=128&g=1", "display_name": "SilverbackNet", "link": "https://stackoverflow.com/users/321935/silverbacknet"}, "edited": false, "score": 3, "creation_date": 1495414842, "post_id": 42258579, "comment_id": 75226642, "body": "Why would you think you have to reinstall? That&#39;s the interface to add or remove features. It&#39;s under Modify in Add/Remove or you can run vs_setup.exe."}, {"owner": {"reputation": 239, "user_id": 2464169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6263742c33ce18d5c232d88820547b9c?s=128&d=identicon&r=PG", "display_name": "Vizor", "link": "https://stackoverflow.com/users/2464169/vizor"}, "edited": false, "score": 34, "creation_date": 1496162807, "post_id": 42258579, "comment_id": 75543588, "body": "In Visual Studio 2017 it is in component called Windows Universal CRT SDK and you can find it in Compilators section under component installation tab."}, {"owner": {"reputation": 10890, "user_id": 393280, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4f0bc239a1291a514e469127bd79e350?s=128&d=identicon&r=PG", "display_name": "palswim", "link": "https://stackoverflow.com/users/393280/palswim"}, "edited": false, "score": 7, "creation_date": 1506628347, "post_id": 42258579, "comment_id": 79909708, "body": "Wow, 8 GB just to add <a href=\"https://stackoverflow.com/q/31953769/393280\">support for the C++ language</a> and this to my existing bloated Visual Studio install."}, {"owner": {"reputation": 184, "user_id": 5888998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nvMO5.jpg?s=128&g=1", "display_name": "Dylan Kapp", "link": "https://stackoverflow.com/users/5888998/dylan-kapp"}, "edited": false, "score": 2, "creation_date": 1512582996, "post_id": 42258579, "comment_id": 82320367, "body": "ctype.h is in fact located at &quot;C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.10240.0\\ucrt&quot;"}], "tags": [], "owner": {"reputation": 284, "user_id": 7276783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9252c257f17dee9df552bc0dccdd25bb?s=128&d=identicon&r=PG&f=1", "display_name": "Ynon", "link": "https://stackoverflow.com/users/7276783/ynon"}, "is_accepted": false, "score": 22, "last_activity_date": 1487187597, "creation_date": 1487187597, "answer_id": 42258579, "question_id": 42258311, "link": "https://stackoverflow.com/questions/42258311/cannot-open-include-file-ctype-h-no-such-file-or-directory/42258579#42258579", "title": "Cannot open include file: &#39;ctype.h&#39;: No such file or directory", "body": "<p>Repair / Reinstall visual studio.\nMake sure that the Windows SDK option (Probably 8.1 in your case) is ticked,\nAs you can see in this picture:\n<a href=\"https://i.stack.imgur.com/rAknB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rAknB.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 58368, "user_id": 30038, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/mPvRH.jpg?s=128&g=1", "display_name": "Vlad Bezden", "link": "https://stackoverflow.com/users/30038/vlad-bezden"}, "is_accepted": false, "score": 1, "last_activity_date": 1532693090, "last_edit_date": 1532693090, "creation_date": 1532353377, "answer_id": 51480305, "question_id": 42258311, "link": "https://stackoverflow.com/questions/42258311/cannot-open-include-file-ctype-h-no-such-file-or-directory/51480305#51480305", "title": "Cannot open include file: &#39;ctype.h&#39;: No such file or directory", "body": "<p>Here is mine VS 2017 build tools configuration to make Python 3.7 and up to compile on my local machine and fix. Please notice that MS changed VS Studio Build Tools interface </p>\n\n<p><a href=\"https://i.stack.imgur.com/8hNak.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8hNak.png\" alt=\"VS Build Tool 2017 configuration for pyodbc compilation\"></a></p>\n\n<p>In order to make code to compile you also MUST to install <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=56567\" rel=\"nofollow noreferrer\">ODBC driver</a></p>\n\n<p>You can download VS 2017 Build tools from:\n<a href=\"https://visualstudio.microsoft.com/downloads/\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/downloads/</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/NYRyJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NYRyJ.png\" alt=\"VS Build Tool 2017 download\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 2743, "user_id": 1592639, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/61c0I.png?s=128&g=1", "display_name": "Michael Haephrati", "link": "https://stackoverflow.com/users/1592639/michael-haephrati"}, "is_accepted": false, "score": 6, "last_activity_date": 1534941962, "last_edit_date": 1534941962, "creation_date": 1534940899, "answer_id": 51966921, "question_id": 42258311, "link": "https://stackoverflow.com/questions/42258311/cannot-open-include-file-ctype-h-no-such-file-or-directory/51966921#51966921", "title": "Cannot open include file: &#39;ctype.h&#39;: No such file or directory", "body": "<p>To add the missing component, go to <strong>Control Panel</strong> -> <strong>Uninstall a Program</strong>, and select to Change the installation of Visual Studio.\nThen, here is the option you need to check:\n<a href=\"https://i.stack.imgur.com/i04xL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/i04xL.png\" alt=\"enter image description here\"></a>\nThen press \"Modify\".</p>\n\n<p>Also don't forget to update the project's Properties to be using Windows SDK version 10.0.17134.0.\n<a href=\"https://i.stack.imgur.com/63DJY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/63DJY.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 480, "user_id": 316253, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2a52215f01eda0fb596872ab5a7bb4b?s=128&d=identicon&r=PG", "display_name": "syam", "link": "https://stackoverflow.com/users/316253/syam"}, "edited": false, "score": 0, "creation_date": 1617573638, "post_id": 59955318, "comment_id": 118336421, "body": "Simply worked for me!"}], "tags": [], "owner": {"reputation": 107, "user_id": 6300773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539cd357e46372d2ed5307a5774e4efc?s=128&d=identicon&r=PG&f=1", "display_name": "ej8000", "link": "https://stackoverflow.com/users/6300773/ej8000"}, "is_accepted": false, "score": 5, "last_activity_date": 1580237839, "creation_date": 1580237839, "answer_id": 59955318, "question_id": 42258311, "link": "https://stackoverflow.com/questions/42258311/cannot-open-include-file-ctype-h-no-such-file-or-directory/59955318#59955318", "title": "Cannot open include file: &#39;ctype.h&#39;: No such file or directory", "body": "<p>Right click on your solution or project in the solution explorer\n&amp; Retarget your solution or project to the installed SDK version</p>\n"}], "owner": {"reputation": 363, "user_id": 7307394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2071b7be1d55dbce56d4514a459f77?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hamza Al Omari", "link": "https://stackoverflow.com/users/7307394/m-hamza-al-omari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54168, "favorite_count": 6, "answer_count": 4, "score": 35, "last_activity_date": 1580237839, "creation_date": 1487186539, "question_id": 42258311, "link": "https://stackoverflow.com/questions/42258311/cannot-open-include-file-ctype-h-no-such-file-or-directory", "title": "Cannot open include file: &#39;ctype.h&#39;: No such file or directory", "body": "<p>I installed c++ package on VS 2015 , if I tried to build the project ,the following problem appears :</p>\n\n<p>C1083   Cannot open include file: 'ctype.h': No such file or directory  Win32Project5   c:\\program files (x86)\\windows kits\\8.1\\include\\um\\winnt.h  31  </p>\n\n<p>Any possible solution ....</p>\n"}, {"tags": ["python", "c++", "ctypes"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487186500, "post_id": 42258253, "comment_id": 71674273, "body": "You don&#39;t seem to have allocated any memory to hold the decrypted value."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487186684, "post_id": 42258253, "comment_id": 71674377, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}], "answers": [{"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1487391994, "creation_date": 1487391994, "answer_id": 42311041, "question_id": 42258253, "link": "https://stackoverflow.com/questions/42258253/ctypes-windowserror-exception-access-violation-reading-0x0000000000000400-whe/42311041#42311041", "title": "Ctypes: WindowsError: exception: access violation reading 0x0000000000000400 when calling C++ function", "body": "<pre><code># WinDLL is for __stdcall functions.  Use CDLL.\n# This is most likely the cause of your exception because the parameters\n# are marshalled on the stack incorrectly.\nlib = ctypes.CDLL(os.path.join(baseDir, \"basicLib.dll\"))\n\n# No need to explicitly create c_char_p objects if you declare argtypes,\n# but make sure it is a byte string if using Python 3\nencryptedValue = b'absfdxfd'\n\n# Create a writable buffer for the output.\ndecryptedValue = ctypes.create_string_buffer(1024)\n\n# Good\nlib.decrypt.argtypes = [ctypes.c_char_p, ctypes.c_char_p, ctypes.c_size_t]\n\n# No need to declare explicit c_size_t() object either.\nlib.decrypt(encryptedValue, decryptedValue, len(decryptedValue))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7087590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e15f5719126e16151865393c55a01a?s=128&d=identicon&r=PG&f=1", "display_name": "Booyaah", "link": "https://stackoverflow.com/users/7087590/booyaah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487391994, "creation_date": 1487186370, "question_id": 42258253, "link": "https://stackoverflow.com/questions/42258253/ctypes-windowserror-exception-access-violation-reading-0x0000000000000400-whe", "title": "Ctypes: WindowsError: exception: access violation reading 0x0000000000000400 when calling C++ function", "body": "<p>In my cpp file</p>\n\n<pre><code>extern \"C\" {\n    Password obj;\n    _declspec(dllexport) BOOL decrypt(const char *encryptedPassword, char *password, size_t *sizeOfThePasswordPtr)\n    {\n        return obj.decrypt(encryptedPassword, password, sizeOfThePasswordPtr);\n    }\n}\n</code></pre>\n\n<p>In my python file:</p>\n\n<pre><code>    lib = ctypes.WinDLL(os.path.join(baseDir, \"basicLib.dll\"))\n    encryptedValue = ctypes.c_char_p('absfdxfd')\n    decryptedValue = ctypes.c_char_p()\n    size = ctypes.c_size_t(1024)\n    lib.decrypt.argtypes = [ctypes.c_char_p, ctypes.c_char_p, ctypes.c_size_t]\n    lib.decrypt(encryptedValue, decryptedValue, size)\n</code></pre>\n\n<p>I got this error <code>WindowsError: exception: access violation reading 0x0000000000000400</code> when calling the function. The problem is because <code>encryptedValue</code> argument.</p>\n\n<p>It only work if I set <code>encryptedValue = ctypes.c_char_p()</code>, but I will get exception if I pass in some value. Please let me know why. </p>\n"}, {"tags": ["c++", "object", "vector"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1487185560, "post_id": 42257966, "comment_id": 71673788, "body": "Looks like you need a <code>std::vector&lt;std::vector&lt;std::unique_ptr&lt;Tree&gt;&gt;&gt; treeVector(100);</code> actually."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1487186035, "post_id": 42257966, "comment_id": 71674054, "body": "Are you sure you want to be storing pointers?"}, {"owner": {"reputation": 123, "user_id": 6518570, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e0a3bc6498de5b985466988440dc3651?s=128&d=identicon&r=PG&f=1", "display_name": "Leo.1906", "link": "https://stackoverflow.com/users/6518570/leo-1906"}, "edited": false, "score": 0, "creation_date": 1487186277, "post_id": 42257966, "comment_id": 71674169, "body": "not sure .. I also tried without pointers. Doesn&#39;t make a big difference. But nevertheless. Same problem occurs without using pointers .."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1487186479, "post_id": 42257966, "comment_id": 71674263, "body": "If you don&#39;t have to have a pointer (I try to avoid them most of the time) then you can use <code>std::vector&lt;std::vector&lt;Tree&gt;&gt; treeVector(100, std::vector&lt;Tree&gt;(100));</code> and your done."}, {"owner": {"reputation": 123, "user_id": 6518570, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e0a3bc6498de5b985466988440dc3651?s=128&d=identicon&r=PG&f=1", "display_name": "Leo.1906", "link": "https://stackoverflow.com/users/6518570/leo-1906"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487187182, "post_id": 42257966, "comment_id": 71674642, "body": "@NathanOliver and than fill the vector like this? <code>for (int i = 0; i &lt; treeVector.size(); i++) {          for (int j = 0; j &lt; treeVector.size(); j++) {             treeVector[i][j] = *new tree(0, 0);         }     }</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487191002, "post_id": 42257966, "comment_id": 71676755, "body": "@Leo.1906 No.  The vector would already be full of default constructed <code>Tree</code>s."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 6518570, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e0a3bc6498de5b985466988440dc3651?s=128&d=identicon&r=PG&f=1", "display_name": "Leo.1906", "link": "https://stackoverflow.com/users/6518570/leo-1906"}, "edited": false, "score": 0, "creation_date": 1487186122, "post_id": 42258121, "comment_id": 71674102, "body": "and what would be correct?"}], "tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": false, "score": 2, "last_activity_date": 1487186142, "last_edit_date": 1487186142, "creation_date": 1487185911, "answer_id": 42258121, "question_id": 42257966, "link": "https://stackoverflow.com/questions/42257966/c-add-objects-to-vector/42258121#42258121", "title": "C++ add objects to vector", "body": "<p>The loop</p>\n\n<pre><code>for (auto &amp;j : treeVector)\n  j.assign(treeVector.size(), new Tree(0, 0));\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>for (auto &amp;j : treeVector) {\n  Tree *tmp = new Tree(0, 0);\n  j.assign(treeVector.size(), tmp);\n}\n</code></pre>\n\n<p>Only one Tree is allocated and constructed in each iteration, and each element(<code>std::vector&lt;Tree *&gt;</code>) of treeVector will contains 100 pointers which point to a same object.</p>\n\n<p>What you want might be:</p>\n\n<pre><code>for (auto &amp;j : treeVector) {\n  for (int i=0; i&lt;treeVector.szie(); ++i)\n    j.push_back(new Tree(0,0));\n}\n</code></pre>\n\n<p>And you might want to use <code>std::unique_ptr</code> instead, which will help with managing the memory.</p>\n"}], "owner": {"reputation": 123, "user_id": 6518570, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e0a3bc6498de5b985466988440dc3651?s=128&d=identicon&r=PG&f=1", "display_name": "Leo.1906", "link": "https://stackoverflow.com/users/6518570/leo-1906"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "closed_date": 1487232610, "answer_count": 1, "score": -3, "last_activity_date": 1487186142, "creation_date": 1487185337, "question_id": 42257966, "link": "https://stackoverflow.com/questions/42257966/c-add-objects-to-vector", "closed_reason": "Needs details or clarity", "title": "C++ add objects to vector", "body": "<p>I'm not sure if my approach is correct, so I'm asking you to verify please.\nI'm trying to add individual objects to an 2D Vector. This is the code:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;*Tree&gt;&gt; treeVector(100);\n\nfor (auto &amp;j : treeVector)\n        j.assign(treeVector.size(), new Tree(0, 0));\n</code></pre>\n\n<p>The class is called <code>Tree</code>. The Code works but it seems like there are objects doubled in the vector?\nAm I missing something?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487183705, "post_id": 42257410, "comment_id": 71672657, "body": "Please example with some code what you are trying to do.  It makes it a lot easier to understand."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487183838, "post_id": 42257410, "comment_id": 71672726, "body": "@NathanOliver Not that I really like to draw dupes from <i>@VFM</i> ;-) but that one seems to answer the question with standard reference."}, {"owner": {"reputation": 219, "user_id": 5107882, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1014131048620071/picture?type=large", "display_name": "R\u0131fat Tolga Kiran", "link": "https://stackoverflow.com/users/5107882/r%c4%b1fat-tolga-kiran"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487183895, "post_id": 42257410, "comment_id": 71672768, "body": "@NathanOliver i have added an example."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487184095, "post_id": 42257410, "comment_id": 71672901, "body": "@R\u0131fatTolgaKiran Your forward declaration looks just fine. Can you add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what you want to achieve and how it fails?"}, {"owner": {"reputation": 219, "user_id": 5107882, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1014131048620071/picture?type=large", "display_name": "R\u0131fat Tolga Kiran", "link": "https://stackoverflow.com/users/5107882/r%c4%b1fat-tolga-kiran"}, "edited": false, "score": 0, "creation_date": 1487184478, "post_id": 42257410, "comment_id": 71673147, "body": "Eventually my intention is to create a linked list whose node is declared inside the outer list class. i hope that i am in the right way."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487184788, "post_id": 42257410, "comment_id": 71673350, "body": "@R\u0131fatTolgaKiran When I <a href=\"http://coliru.stacked-crooked.com/a/a5438bb09e603382\" rel=\"nofollow noreferrer\">compile</a> your example now (removing the unrelated <code>#include</code> statement), it just works fine, no? I don&#39;t get what&#39;s your concern actually."}], "owner": {"reputation": 219, "user_id": 5107882, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1014131048620071/picture?type=large", "display_name": "R\u0131fat Tolga Kiran", "link": "https://stackoverflow.com/users/5107882/r%c4%b1fat-tolga-kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1487183722, "answer_count": 0, "score": 0, "last_activity_date": 1487184245, "creation_date": 1487183516, "last_edit_date": 1487184245, "question_id": 42257410, "link": "https://stackoverflow.com/questions/42257410/outer-declaration-of-nested-two-template-classes", "closed_reason": "Duplicate", "title": "outer declaration of nested two template classes", "body": "<p>assume we have a template class named <strong>outer</strong> and inside this template class we declare a template class named <strong>inner</strong>. </p>\n\n<pre><code>template &lt;typename T&gt;\nclass outer{\n\ntemplate &lt;typename U&gt; class inner;\n\n};\n</code></pre>\n\n<p>My questions;</p>\n\n<ul>\n<li><strong>1) How to forward declare a template class inside the outer one?</strong></li>\n<li><strong>2) How to define template inner class after the template outer class?</strong></li>\n</ul>\n\n<p>According to duplicate answers,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"forward_list.h\"\n\ntemplate &lt;typename T&gt;\nclass outer{\n    template &lt;typename U&gt; class inner;\nprivate:\n    inner&lt;T&gt; innerItem;\npublic:\n    void doSomething(){\n        innerItem.print();\n    }\n\n};\n\ntemplate &lt;typename T&gt;\ntemplate &lt;typename U&gt;\nclass outer&lt;T&gt;::inner{\npublic:\n    void print(){std::cout &lt;&lt; \"inner print\\n\";}\n\n};\n\n\nint main(int argc, char ** argv){\n\n\n    outer&lt;int&gt; a;\n    a.doSomething();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "cmake", "openmp", "icc"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1487188407, "post_id": 42257404, "comment_id": 71675311, "body": "What&#39;s your CMake version? Have you tried the latest one like 3.7.2 or 3.8-rc1?"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1487188714, "post_id": 42257404, "comment_id": 71675496, "body": "Oh thanks for the tip! I&#39;ll check ASAP !"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1487189015, "post_id": 42257404, "comment_id": 71675673, "body": "Seems that this was fixed in <a href=\"https://github.com/Kitware/CMake/commit/4671f3ab7dc65186484ce31dff5e810aa2792145\" rel=\"nofollow noreferrer\">CMake 3.1.0</a> -- you&#39;re probably seriously out of date. Either way, you have the source code for <a href=\"https://github.com/opencv/opencv/blob/master/cmake/OpenCVFindLibsPerf.cmake#L139\" rel=\"nofollow noreferrer\">OpenCV</a> that you can patch, as well as the Find* scripts from CMake. Use the source! :)"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1487235990, "post_id": 42257404, "comment_id": 71694846, "body": "That was the problem! If you&#39;re going to post it as an answer I&#39;m going to choose it ;)"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 843, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1487183482, "creation_date": 1487183482, "question_id": 42257404, "link": "https://stackoverflow.com/questions/42257404/cmake-use-openmp-instead-of-qopenmp-for-intel-compiler", "title": "CMake use -openmp instead of -qopenmp for Intel Compiler", "body": "<p>I'm building OpenCV on a Xeon Phi using the Intel Compiler v16. These are the cmake settings:</p>\n\n<pre><code>cmake -D CMAKE_BUILD_TYPE=RelWithDebInfo -DWITH_TBB=OFF -DWITH_OPENMP=ON -DCMAKE_C_COMPILER=icc -DCMAKE_CXX_COMPILER=icpc ..\n</code></pre>\n\n<p>However, using <code>-DWITH_OPENMP=ON</code> produces the flag <code>-openmp</code> which is depecrated, instead it should use <code>-qopenmp</code>. How can I tell to cmake to use the correct flag?</p>\n"}, {"tags": ["c++", "vector", "unique-ptr", "abc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487183652, "post_id": 42257397, "comment_id": 71672619, "body": "Not sure about everyone else but if you use the same names from the example code in the question it makes what you are asking a lot clearer.  That said, what is the error you get?  Your example code compile for me."}, {"owner": {"reputation": 2103, "user_id": 1865694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bP5UU.jpg?s=128&g=1", "display_name": "Alex Zywicki", "link": "https://stackoverflow.com/users/1865694/alex-zywicki"}, "edited": false, "score": 0, "creation_date": 1487183868, "post_id": 42257397, "comment_id": 71672747, "body": "Couldn&#39;t you just forward declare Base? Right before you define it?"}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1487183872, "post_id": 42257397, "comment_id": 71672751, "body": "I get a mile long set of messages from VS 2015 Upd 3 which basically is a failure to instantiate the default fill <code>elements</code> for the vector due to a delete ctor in Base (presumably because it is an ABC)"}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1487184079, "post_id": 42257397, "comment_id": 71672890, "body": "@Fran&#231;oisAndrieux yes, exactly.  I have no issue with that - that is what I want!  If the compiler would agree to do so... ;)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1487184107, "post_id": 42257397, "comment_id": 71672906, "body": "The error message states that you are preforming a copy of a <code>unique_ptr&lt;Base&gt;</code> somewhere. It&#39;s complaining that you are referring to a function that is deleted, which the copy constructor if <code>unique_ptr</code> is. It&#39;s not complaining about a &quot;delete function&quot;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1487184138, "post_id": 42257397, "comment_id": 71672926, "body": "Weird.  When I run <a href=\"http://coliru.stacked-crooked.com/a/16ab964f5c94e18a\" rel=\"nofollow noreferrer\">this</a> I have no problems with it on my version of MSVS 2015.  I am also on upate 3.  Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that gives those errors."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1487184756, "post_id": 42257397, "comment_id": 71673322, "body": "Thanks - I&#39;m looking further into it now.  I&#39;ll post when I have such a thing..."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1487185574, "post_id": 42257397, "comment_id": 71673795, "body": "Updated based on feedback - and found in deriving a verifiable example that it is the last line of ABC <code>std::vector&lt;std::unique_ptr&lt;ABC&gt;&gt;   elements;</code> that causes the compiler errors.  If I omit this, I have no errors...?"}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 1, "creation_date": 1487185906, "post_id": 42257397, "comment_id": 71673965, "body": "Ah,I see, it&#39;s the <code>Clone()</code> functions - they&#39;re explicitly attempting to copy the elements in the base.  d&#39;oh!  Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1487186012, "post_id": 42257741, "comment_id": 71674034, "body": "Thanks.  I just wasn&#39;t seeing the obvious.  Much obliged."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 4, "last_activity_date": 1487184517, "creation_date": 1487184517, "answer_id": 42257741, "question_id": 42257397, "link": "https://stackoverflow.com/questions/42257397/how-is-it-possible-to-have-a-vectorunique-ptrabc/42257741#42257741", "title": "How / Is it possible to have a vector&lt;unique_ptr&lt;ABC&gt;&gt;?", "body": "<p>The error occurs when you try to copy an instance of <code>Base</code> or an instance of a type derived from <code>Base</code>. The default copy constructor will attempt to copy <code>Base::elements</code>, which attempts to copy each of it's elements into the new <code>vector</code>. Since these elements are <code>unique_ptr&lt;Base&gt;</code> this copy is not allowed.</p>\n\n<p>This example reproduces the problem :</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nstruct Base\n{\n    using PBase = std::unique_ptr&lt;Base&gt;;\n    using VBase = std::vector&lt;PBase&gt;;\n\n    VBase   elements;\n};\n\nint main()\n{\n    Base x;\n    auto y = x; // This line causes the error\n\n    return 0;\n}\n</code></pre>\n\n<p>You will likely need to implement your own copy constructor and copy assignment operator, or forbid copying by deleting these functions. Using <code>shared_ptr</code> instead might work, if shallow copies will work for your application.</p>\n"}, {"tags": [], "owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "is_accepted": false, "score": 0, "last_activity_date": 1487186750, "creation_date": 1487186750, "answer_id": 42258372, "question_id": 42257397, "link": "https://stackoverflow.com/questions/42257397/how-is-it-possible-to-have-a-vectorunique-ptrabc/42258372#42258372", "title": "How / Is it possible to have a vector&lt;unique_ptr&lt;ABC&gt;&gt;?", "body": "<p>For completeness sake, here's what I should have been doing:</p>\n\n<pre><code>class ABC\n{\npublic:\n    ABC() = default;\n    ABC(const ABC &amp; rhs)\n    {\n        // manually clone our elements\n        elements.reserve(rhs.elements.size());\n        for (const auto &amp; e : rhs.elements)\n            elements.emplace_back(e-&gt;Clone());\n    }\n    ABC &amp; operator = (const ABC &amp;) = delete;\n\n    virtual ~ABC() { } // need a vtable entry so that concrete subclasses will be deleted through the base dtor\n\n    virtual std::unique_ptr&lt;ABC&gt; Clone() = 0;\n    virtual void Foo() = 0;\n\n    std::vector&lt;std::unique_ptr&lt;ABC&gt;&gt;   elements;\n};\n</code></pre>\n"}], "owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 42257741, "answer_count": 2, "score": 1, "last_activity_date": 1487186750, "creation_date": 1487183470, "last_edit_date": 1487186451, "question_id": 42257397, "link": "https://stackoverflow.com/questions/42257397/how-is-it-possible-to-have-a-vectorunique-ptrabc", "title": "How / Is it possible to have a vector&lt;unique_ptr&lt;ABC&gt;&gt;?", "body": "<p>Revamping some old code where I was manually handling lifetimes of a vector of raw pointers to concrete instances of an abstract base class (ABC).</p>\n\n<p>So the vector's owner had a virtual dtor which manually went through and deleted the contents of the vector, etc.</p>\n\n<p>Since the vector's owner owns the elements in it, it makes a lot of sense to change this to a vector of unique_ptr's.</p>\n\n<p>Sadly, it seems this is impossible? Because a <code>vector&lt;unique_ptr&lt;type&gt;&gt;</code> must be able to have a static dtor for <code>type</code> but because in this case type is an ABC, that is not available, hence the <code>vector</code> won't compile...</p>\n\n<p>Or am I missing something?</p>\n\n<p>e.g.:</p>\n\n<pre><code>struct ABC\n{\n    ABC() = default;\n    virtual ~ABC() { } // need a vtable entry so that concrete subclasses will be deleted through the base dtor\n\n    virtual std::unique_ptr&lt;ABC&gt; Clone() = 0;\n    virtual void Foo() = 0;\n\n    std::vector&lt;std::unique_ptr&lt;ABC&gt;&gt;   elements;\n};\n</code></pre>\n\n<p>EDIT2: here's a complete example that fails:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nstruct ABC\n{\n    virtual ~ABC() { } // need a vtable entry so that concrete subclasses will be deleted through the base dtor\n\n    virtual std::unique_ptr&lt;ABC&gt; Clone() = 0;\n    virtual void Foo() = 0;\n\n    std::vector&lt;std::unique_ptr&lt;ABC&gt;&gt;   elements;\n};\n\nstruct Child : ABC\n{\n    std::unique_ptr&lt;ABC&gt; Clone() override { return std::make_unique&lt;Child&gt;(*this); }\n    void Foo() override { };\n};\n\nstruct Derived : Child\n{\n    std::unique_ptr&lt;ABC&gt; Clone() override { return std::make_unique&lt;Derived&gt;(*this); }\n};\n\nint main()\n{\n    std::unique_ptr&lt;ABC&gt; x;\n    std::unique_ptr&lt;ABC&gt; c = std::make_unique&lt;Child&gt;();\n\n    std::vector&lt;std::unique_ptr&lt;ABC&gt;&gt;   elements;\n    elements.emplace_back(std::make_unique&lt;Derived&gt;());\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "shared-ptr", "relational-operators"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 1, "creation_date": 1487183691, "post_id": 42257333, "comment_id": 71672643, "body": "The prescribed solution is to provide your own version of the comparison operator if the default one does not suit your need. A better design for your <code>heap</code> class would be to take a Comparator type as well, which can default to <code>std::less</code>"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 2, "creation_date": 1487183959, "post_id": 42257333, "comment_id": 71672802, "body": "If you&#39;re worried about too many copies being made, you should learn about move semantics rather than jumping straight to <code>std::shared_ptr</code>."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1487186242, "post_id": 42257333, "comment_id": 71674149, "body": "@miles, I would love to learn about move semantics.  Can you point me to some docs?  I was wondering whether there was some special swap I could use that would bypass the constructor/destructor."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 1, "creation_date": 1487193378, "post_id": 42257333, "comment_id": 71678066, "body": "See <a href=\"http://stackoverflow.com/questions/3106110/what-are-move-semantics\">What are move semantics?</a>  The answers on that question are quite in-depth."}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1487186341, "post_id": 42257565, "comment_id": 71674200, "body": "thanks.  My heap implementation uses both &#39;&gt;&#39; and &#39;&lt;&#39; so just providing less is probably not going to be sufficient.  By the way, I was planning to allow support for a comparison type as the stl classes do."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1487211878, "post_id": 42257565, "comment_id": 71684639, "body": "just want to make sure I&#39;m understanding what exactly you&#39;re saying.  You mention both comparison operator and Comparator type.  Is the operator just the operator() on the comparison type?  Also, since I use both &#39;&lt;&#39; and &#39;&gt;&#39; I&#39;m wondering whether it would be better to instead required a comparison operator as opposed to a predicate so that I can only require a single optional Comparator type instead of two."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1487222266, "post_id": 42257565, "comment_id": 71687794, "body": "@nickdu Using <code>operator &lt;</code> or a Comparator like above is basically a choice. I prefer a Comparator as that can be passed as a type in template parameters and this is what the standard library also does."}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": true, "score": 1, "last_activity_date": 1487184023, "creation_date": 1487184023, "answer_id": 42257565, "question_id": 42257333, "link": "https://stackoverflow.com/questions/42257333/c-using-shared-ptr-but-having-my-objects-relational-operators-called/42257565#42257565", "title": "C++ using shared_ptr but having my object&#39;s relational operators called?", "body": "<p>The prescribed solution is to provide your own version of the comparison operator if the default one does not suit your need. A better design for your <code>heap</code> class would be to take a <code>Comparator</code> type as well, which can default to <code>std::less</code>.</p>\n\n<pre><code>template &lt;typename T, typename Comp = std::less&lt;T&gt;&gt;\nclass heap {\n...\n};\n</code></pre>\n\n<p>And now provide you own version of <code>less</code> specialized for <code>shared_ptr</code>.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct less&lt;shared_ptr&lt;T&gt;&gt; {\n    bool operator()(const shared_ptr&lt;T&gt;&amp; a, const shared_ptr&lt;T&gt;&amp; b) const {\n      *a &lt; *b;\n    }\n};\n</code></pre>\n\n<p>For a better design, you cann add some metaprogramming hack to make it work only for type <code>T</code> which can be compared.</p>\n"}], "owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 42257565, "answer_count": 1, "score": 0, "last_activity_date": 1487184023, "creation_date": 1487183283, "question_id": 42257333, "link": "https://stackoverflow.com/questions/42257333/c-using-shared-ptr-but-having-my-objects-relational-operators-called", "title": "C++ using shared_ptr but having my object&#39;s relational operators called?", "body": "<p>I'm playing around writing my own heap class.  My templated heap class requires the operators '>' and '&lt;' to be defined on the template type.</p>\n\n<p>All seemed to work fine when using an instance of a sample class I wrote (and also worked fine on int).  However, since there is so much construction of instances as class instances move from different nodes in the heap, I decided to see what happened when I created a heap of a shared_ptr of my class.  While I did see the number of instances constructed go way down, the heap was not working correctly as it appears the smart pointer '>' and '&lt;' are getting called which I guess just compares smart pointer references.</p>\n\n<p>One solution that comes to mind is allowing for a comparison type, just as many of the stl types do, so that I can pass in my own comparison type into the heap class which will dereference the shared_ptr and call the operation on the underlying type.</p>\n\n<p>Some docs I read on the shared_ptr said that they implement the relational operator (namely &lt;) so that they could be used as keys in associative containers.  I'm trying to think about when I might want to use the shared_ptr as the key instead of having a specific key of my own.</p>\n\n<p>heap of my sample type which appears to work fine:</p>\n\n<pre><code>heap&lt;foo&gt; foo_heap(heap_type::max);\nfor (unsigned int i = 0; i &lt; 10; ++i)\n    {\n    std::string s = \"string \";\n    s += ('0' + i);\n    foo f(i, s);\n    foo_heap.push(f);\n    }\ncout &lt;&lt; \"root: \" &lt;&lt; foo_heap.top() &lt;&lt; endl;\n</code></pre>\n\n<p>wrapping my sample class in a shared_ptr which doesn't work, eg. heap constraint not met in terms of what I'm trying to accomplish.</p>\n\n<pre><code>heap&lt;shared_ptr&lt;foo&gt;&gt; foo_heap_smart(heap_type::max);\nfor (unsigned int i = 0; i &lt; 10; ++i)\n    {\n    std::string s = \"string \";\n    s += ('0' + i);\n    shared_ptr&lt;foo&gt; f(new foo(i, s));\n    foo_heap_smart.push(f);\n    }\ncout &lt;&lt; \"root: \" &lt;&lt; *(foo_heap_smart.top()) &lt;&lt; endl;\n</code></pre>\n\n<p>my sample foo class:</p>\n\n<pre><code>class foo\n{\npublic:\n    foo(int value, std::string s) : _value(value), _s(s)\n    {\n        std::cout &lt;&lt; \"foo::foo()\" &lt;&lt; std::endl;\n    }\n\n    foo(const foo&amp; f) : _value(f._value), _s(f._s)\n    {\n        std::cout &lt;&lt; \"foo::foo(const foo&amp; f)\" &lt;&lt; std::endl;\n    }\n\n    ~foo()\n    {\n        std::cout &lt;&lt; \"foo::~foo()\" &lt;&lt; std::endl;\n    }\n\n    virtual void operator=(const foo&amp; f)\n    {\n        std::cout &lt;&lt; \"foo::operator=()\" &lt;&lt; std::endl;\n        this-&gt;_value = f._value;\n        this-&gt;_s = f._s;\n    }\n\n    virtual bool operator&lt;(const foo&amp; right)\n    {\n        return this-&gt;_value &lt; right._value;\n    }\n\n    virtual bool operator&gt;(const foo&amp; right)\n    {\n        return this-&gt;_value &gt; right._value;\n    }\n\n    void print(ostream&amp; stm) const\n    {\n        stm &lt;&lt; \"value: \" &lt;&lt; this-&gt;_value &lt;&lt; \", s: \" &lt;&lt; this-&gt;_s;\n    }\n\nprivate:\n    int _value;\n    std::string _s;\n};\n</code></pre>\n\n<p>So I assume that many have run into a similar problem.  Just wondering what the prescribed solution is.  As I mentioned, I think I know of what appears might be a good solution, but wanted to check as it seems that the smart pointer could cause many problems because of their implementation of the relational operators.</p>\n\n<p>Thanks,\nNick</p>\n"}, {"tags": ["c++", "casting", "unions"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1487184095, "post_id": 42257303, "comment_id": 71672900, "body": "Reading a member of a union other than the last written one is Undefined Behaviour.  memcpy is the best way to move bytes into a different representation, just take care with alignment."}, {"owner": {"reputation": 25, "user_id": 7570345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1ebb905c931acbd969f34813f3e0e8?s=128&d=identicon&r=PG&f=1", "display_name": "user7570345", "link": "https://stackoverflow.com/users/7570345/user7570345"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1487236570, "post_id": 42257303, "comment_id": 71695295, "body": "@Richard Critten : Thanks for your suggestion."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7570345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1ebb905c931acbd969f34813f3e0e8?s=128&d=identicon&r=PG&f=1", "display_name": "user7570345", "link": "https://stackoverflow.com/users/7570345/user7570345"}, "edited": false, "score": 0, "creation_date": 1487236690, "post_id": 42258554, "comment_id": 71695391, "body": "Thanks for the link and I decided to follow user suggestion."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 0, "last_activity_date": 1487187524, "last_edit_date": 1495535482, "creation_date": 1487187524, "answer_id": 42258554, "question_id": 42257303, "link": "https://stackoverflow.com/questions/42257303/unsigned-int16-to-float-and-float-to-unsigned-int16-typecast-vs-union-in/42258554#42258554", "title": "(unsigned __int16 to float) and float to (unsigned __int16) typecast vs union in C++", "body": "<p>What you're attempting to do with the <code>union</code> is called <a href=\"https://en.wikipedia.org/wiki/Type_punning\" rel=\"nofollow noreferrer\">Type Punning</a>, and is undefined behavior in C++: <a href=\"https://stackoverflow.com/a/11996970/2642059\">https://stackoverflow.com/a/11996970/2642059</a></p>\n\n<p>Because unions are frequently abused <em>because</em> of the speed afforded by <code>union</code> based Type Punning so most C++ compilers <em>do</em> support such behavior.</p>\n\n<p>In short if you intend to write portable <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> which conforms to the standard, you'll need to use <strong>Solution 1</strong>; however depending upon your compiler, you may find <strong>Solution 2</strong> to be a faster solution on your compiler.</p>\n"}], "owner": {"reputation": 25, "user_id": 7570345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1ebb905c931acbd969f34813f3e0e8?s=128&d=identicon&r=PG&f=1", "display_name": "user7570345", "link": "https://stackoverflow.com/users/7570345/user7570345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 42258554, "answer_count": 1, "score": 2, "last_activity_date": 1493398931, "creation_date": 1487183191, "last_edit_date": 1493398931, "question_id": 42257303, "link": "https://stackoverflow.com/questions/42257303/unsigned-int16-to-float-and-float-to-unsigned-int16-typecast-vs-union-in", "title": "(unsigned __int16 to float) and float to (unsigned __int16) typecast vs union in C++", "body": "<p>I have 3000 floating type(4 byte) variables and 2000 unsigned __int16(2 byte) variables. These variables stores data from plc.</p>\n\n<p>I have a constant struct array which stores the information of each plc tag.</p>\n\n<pre><code>struct  strPLCtags\n{\n    unsigned short   id ;           //plc tag id        \n    unsigned __int16 mbaddress ;    //plc Modbus address    \n    String           name ;         //plc tag name  \n    String           description ;  //plc tag description   \n    Byte             datatype  ;    // 2 = ushort ; 4 = float  \n    Byte             plcaccess   ;  //Read, Write, Read/Write Tag\n};\n\nconst strPLCtags  plcTags[5000] = {{....},{....},.................,{....}};\n</code></pre>\n\n<p>I want to group all of the above variables(3000 float + 2000 ushort) as a single array[5000]. So, I can access value of plc tag based on tag index.</p>\n\n<p>I came up with two solutions. But not sure which one is correct to use.</p>\n\n<p><strong>Solution 1:</strong>  declare float array[5000] and access value based on plc tag id.</p>\n\n<pre><code>  float   PLCDataArray1[5000] ;\n\n  //Get PLC data and assign to array\n\n  PLCDataArray1[0]    = static_cast&lt;float&gt;(GetU16ValueFromPLC(addr)) ;\n  PLCDataArray1[1]    = GetFloatValueFromPLC(addr) ;\n  .\n  .\n  PLCDataArray1[4999] = GetFloatValueFromPLC(addr) ;\n\n //To read back above data as String and show it on form.\n String GetPLCData(unsigned short tid) //tid is plc tag id\n {\n     if(plcTags[tid] == 2)\n     {\n         return IntToStr(PLCDataArray1[tid]) ;\n     }\n     else\n     {\n         return FloatToStrF(PLCDataArray1[tid],ffFixed,6,2) ; \n     }\n }\n</code></pre>\n\n<p><strong>Solution 2:</strong>        </p>\n\n<pre><code>union uFltOrUS16\n{\n    unsigned __int16 usVal;\n    float            fltVal;\n};\nuFltOrUS16    PLCDataArray2[5000] ;\n\n//Get PLC data and assign to array\n  PLCDataArray2[0].usVal     = GetU16ValueFromPLC(addr) ;\n  PLCDataArray2[1].fltVal    = GetFloatValueFromPLC(addr) ;\n  .\n  .\n  PLCDataArray2[4999].fltVal = GetFloatValueFromPLC(addr) ;\n\n //To read back above data as String and show it on form.\n String GetPLCData(unsigned short tid) //tid is plc tag id\n {\n     if(plcTags[tid] == 2)\n     {\n         return IntToStr(PLCDataArray2[tid].usval) ;\n     }\n     else\n     {\n         return FloatToStrF(PLCDataArray2[tid].fltval,ffFixed,6,2) ; \n     }\n }\n</code></pre>\n\n<p>Could you please suggest me which type of above solution is better to use for my problem?\nIf both of above aren't good to use, please suggest me a better idea to implement.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "graph"], "comments": [{"owner": {"reputation": 1888, "user_id": 6325994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/SAdLl.jpg?s=128&g=1", "display_name": "Abdennacer Lachiheb", "link": "https://stackoverflow.com/users/6325994/abdennacer-lachiheb"}, "edited": false, "score": 0, "creation_date": 1487183370, "post_id": 42257300, "comment_id": 71672428, "body": "I didn&#39;t understand what you want, you want to implement that graph, what&#39;s that has to do with these resukts?"}, {"owner": {"reputation": 13, "user_id": 7148541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9ba1b7ed686d01492d7a25221b875e?s=128&d=identicon&r=PG&f=1", "display_name": "user58504", "link": "https://stackoverflow.com/users/7148541/user58504"}, "reply_to_user": {"reputation": 1888, "user_id": 6325994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/SAdLl.jpg?s=128&g=1", "display_name": "Abdennacer Lachiheb", "link": "https://stackoverflow.com/users/6325994/abdennacer-lachiheb"}, "edited": false, "score": 0, "creation_date": 1487184474, "post_id": 42257300, "comment_id": 71673144, "body": "the result is generated by the graph for example : There are 3 AU , so u can only use that node 3 times etc... until all &quot;part strings are used up &quot; i already counted the AU , C, G, AC, U"}], "owner": {"reputation": 13, "user_id": 7148541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce9ba1b7ed686d01492d7a25221b875e?s=128&d=identicon&r=PG&f=1", "display_name": "user58504", "link": "https://stackoverflow.com/users/7148541/user58504"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487216072, "creation_date": 1487183175, "last_edit_date": 1487216072, "question_id": 42257300, "link": "https://stackoverflow.com/questions/42257300/how-can-i-implement-a-directed-graph-with-strings", "title": "How can i implement a directed graph with strings?", "body": "<p><img src=\"https://i.imgur.com/zaBvcoC.png\" alt=\"Graph\"></p>\n\n<p>This graph is a little bit confusing to understand, but i have to re-arrange these strings AU/C/G,AU/G,G,C/U,AC/U/AU/AC/G  into  (beginning always AU and end always CU). i have already made a count for the strings AU , C , G , AC, U so i basically need help implementing the string directed graph from the photo above  to create the result </p>\n\n<p>results:</p>\n\n<p>1) AU/ C / G / AU/ G / G/ AC / U / AU / AC / G / CU</p>\n\n<p>2) AU/ C / G / G / AC / U / AU/ AC / G / AU / G / CU</p>\n\n<p>3) AU / G / AU / C / G / G/ AC / U / AU / AC / G / CU</p>\n\n<p>4) AU / G / G / AC / U / AU / AC / G / AU / C / G / CU</p>\n"}, {"tags": ["c++", "c++17", "c++98"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487183337, "post_id": 42257227, "comment_id": 71672404, "body": "If everything in the header is deprecated, then by inference the header is deprecated, though because of the C++ include mechanism, which allows any Standard Library header to include any other header, I suppose sstream could include some other header that wasn&#39;t deprecated, so using it would be OK."}, {"owner": {"reputation": 6610, "user_id": 2403810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c63a4cc13b434306ccc00ba2cd64d6?s=128&d=identicon&r=PG&f=1", "display_name": "tinstaafl", "link": "https://stackoverflow.com/users/2403810/tinstaafl"}, "edited": false, "score": 0, "creation_date": 1487185795, "post_id": 42257227, "comment_id": 71673902, "body": "in the StackOverflow question you reference, one of the <a href=\"http://stackoverflow.com/a/2820264/2403810\">answers</a>, gives you the answer to your question."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1487186981, "post_id": 42257227, "comment_id": 71674541, "body": "This seems to be a topic for <a href=\"http://meta.stackexchange.com/\">meta.stackexchange.com</a>"}], "owner": {"reputation": 3492, "user_id": 831725, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c4fe1b12d7ac380eb8db0c8a81f5683d?s=128&d=identicon&r=PG", "display_name": "Ren&#233; Richter", "link": "https://stackoverflow.com/users/831725/ren%c3%a9-richter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487183321, "creation_date": 1487182909, "last_edit_date": 1495541349, "question_id": 42257227, "link": "https://stackoverflow.com/questions/42257227/why-isnt-header-strstream-deprecated", "title": "Why isn&#39;t header &lt;strstream&gt; deprecated?", "body": "<p>According to latest C++ standard draft <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2017/n4640.pdf\" rel=\"nofollow noreferrer\">N4640</a> (\u00a7D.5) the <code>char*</code> streams <code>std::strstream</code> and related types are deprecated since C++98 (see also <a href=\"https://stackoverflow.com/questions/2820221/why-was-stdstrstream-deprecated\">this Stack Overflow question</a>, <a href=\"http://en.cppreference.com/w/cpp/header/strstream\" rel=\"nofollow noreferrer\">cppreference</a>, <a href=\"https://bytes.com/topic/c/answers/158338-strstream-depreciation\" rel=\"nofollow noreferrer\">Howard Hinnant's answer</a> on bytes.com).\nSince the header <code>&lt;strstream&gt;</code> defines only these streams and supporting deprecated types, why isn't <code>&lt;strstream&gt;</code> deprecated as a whole (or is it)?\nIs it just an oversight?</p>\n"}, {"tags": ["c++", "templates", "lambda", "constexpr"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1487182942, "post_id": 42257092, "comment_id": 71672189, "body": "Not really a <code>constexpr</code> lambda - can&#39;t do <code>reinterpret_cast</code> in a constant expression..."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1487184222, "post_id": 42257092, "comment_id": 71672982, "body": "Every lambda has a unique type, and &quot;what routine to call&quot; is embedded in that type. UB galore, of course."}, {"owner": {"reputation": 1256, "user_id": 212010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8019a9fde70ba696125db5e0315e24d9?s=128&d=identicon&r=PG", "display_name": "Mathias", "link": "https://stackoverflow.com/users/212010/mathias"}, "edited": false, "score": 1, "creation_date": 1487192483, "post_id": 42257092, "comment_id": 71677550, "body": "Btw, you will have real constexpr lambdas in C++17 :)"}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1487235370, "post_id": 42257092, "comment_id": 71694402, "body": "@T.C. That was a very short and very explaining answer. Can you also tell me what&#39;s &quot;UB galore&quot; ?"}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "edited": false, "score": 0, "creation_date": 1487237148, "post_id": 42257092, "comment_id": 71695710, "body": "Oh and if you are sure of this answer then this seems like a perfect answer to my question. If you don&#39;t mind posting it as answer (maybe a bit longer and some references) that would be a perfect answer to accept. Combined maybe with answer to question 1 that J.H.Bonarius added in comments to his answer."}], "answers": [{"comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1487192084, "post_id": 42258943, "comment_id": 71677340, "body": "p.s. note that I replaced <code>std::is_empty&lt;F&gt;()</code> with <code>std::is_empty&lt;F&gt;::value</code>. is_empty::operator() is new in C++14, but did not seem to work for me in msvs2015. all the operator() does is return the value... so that&#39;s your answer to question 1"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1487193371, "post_id": 42258943, "comment_id": 71678062, "body": "Note that it does not work as constexpr i.e. <code>int n[add_one(1)] = { 1, 2 }; </code> will not work."}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "edited": false, "score": 0, "creation_date": 1487235755, "post_id": 42258943, "comment_id": 71694689, "body": "thats a good answer to question 1. For question 2, I think T.C. answered me in the comment to my question."}], "tags": [], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "is_accepted": false, "score": 0, "last_activity_date": 1487192458, "last_edit_date": 1487192458, "creation_date": 1487188970, "answer_id": 42258943, "question_id": 42257092, "link": "https://stackoverflow.com/questions/42257092/constexpr-lambda-implementation-how-does-this-work/42258943#42258943", "title": "Constexpr lambda implementation - how does this work?", "body": "<p>So consider this code</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;class F&gt;\nstruct wrapper\n{\n    static_assert(std::is_empty&lt;F&gt;::value, \"Lambdas must be empty\");\n    template&lt;class... Ts&gt;\n    decltype(auto) operator()(Ts&amp;&amp;... xs) const\n    {\n        return reinterpret_cast&lt;const F&amp;&gt;(*this)(std::forward&lt;Ts&gt;(xs)...);\n    }\n};\n\nstruct wrapper_factor\n{\n    template&lt;class F&gt;\n    constexpr wrapper&lt;F&gt; operator += (F*)\n    {\n        return{};\n    }\n};\n\nstruct addr_add\n{\n    template&lt;class T&gt;\n    friend typename std::remove_reference&lt;T&gt;::type *operator+(addr_add, T &amp;&amp;t)\n    {\n        return &amp;t;\n    }\n};\n\n#define STATIC_LAMBDA wrapper_factor() += true ? nullptr : addr_add() + []\n\nconst constexpr auto add_one = STATIC_LAMBDA(auto x)\n{\n    return x + 1;\n};\n\nint main()\n{\n    int a = 1;\n    int b = add_one(a);\n\n    return 0;\n}\n</code></pre>\n\n<p>So in MSVS2015, add_one is reported as a <code>constexpr wrapper&lt;type&gt; add_one = {}</code>\nBut in main, <code>add_one(a)</code> is reported as <code>int wrapper&lt;lambda []auto (auto x)-&gt;auto&gt;::operator() &lt;int &amp;&gt;(int &amp;xs) const</code>\nAnd you can see that the friend function <code>*operator+</code> in <code>addr_add</code> returns the pointer to the lambda function. And the lambda function definition is implicit. The variadic template in the wrapper struct operator() will mimic the lambda arguments.</p>\n\n<p>Is this what you wanted to know?</p>\n"}], "owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487192458, "creation_date": 1487182446, "question_id": 42257092, "link": "https://stackoverflow.com/questions/42257092/constexpr-lambda-implementation-how-does-this-work", "title": "Constexpr lambda implementation - how does this work?", "body": "<p>while doing one task I came up across this tricky implementation that would allow you to make constexpr lambdas (which is not allowed out of the box):</p>\n\n<p><a href=\"http://pfultz2.com/blog/2014/09/02/static-lambda/\" rel=\"nofollow noreferrer\" title=\"Crazy constexpr lambdas implementation article\">Crazy constexpr lambdas implementation article</a></p>\n\n<p>It basicly boils down to this implementation:</p>\n\n<pre><code>template&lt;class F&gt;\nstruct wrapper\n{\n    //static_assert(std::is_empty&lt;F&gt;(), \"Lambdas must be empty\");\n    template&lt;class... Ts&gt;\n    decltype(auto) operator()(Ts&amp;&amp;... xs) const\n    {\n        return reinterpret_cast&lt;const F&amp;&gt;(*this)(std::forward&lt;Ts&gt;(xs)...);\n    }\n};\n\nstruct wrapper_factor\n{\n    template&lt;class F&gt;\n    constexpr wrapper&lt;F&gt; operator += (F*)\n    {\n        return{};\n    }\n};\n\nstruct addr_add\n{\n    template&lt;class T&gt;\n    friend typename std::remove_reference&lt;T&gt;::type* operator+(addr_add, T &amp;&amp;t)\n    {\n        return &amp;t;\n    }\n};\n#define STATIC_LAMBDA wrapper_factor() += true ? nullptr : addr_add() + []\n</code></pre>\n\n<p>usage</p>\n\n<pre><code>const constexpr auto add_one = STATIC_LAMBDA (/*i believe you can pass arguments here but i havent tried*/) -&gt; bool\n{\n    //do stuff\n    return stuff;\n};\n</code></pre>\n\n<p>I have got 2 questions:</p>\n\n<ol>\n<li><p>I needed to comment out static_assert due to \"std::is_empty&lt;_Ty>': no appropriate default constructor available\" even without making any instance of this lambda. Anyone knows why?</p></li>\n<li><p>How does this even work? I followed the flow of all the classes and I understand that </p></li>\n</ol>\n\n<p>a) this part </p>\n\n<pre><code>true ? nullptr : addr_add() + [] your_lambda\n</code></pre>\n\n<p>returns a nullptr of a type we want lambda to be (further refered to as \"correct_type\" )</p>\n\n<p>b) wrapper_factory takes this nullptr of correct_type, constructs wrapper. This wrapper is default initialized.</p>\n\n<p>c) wrapper in operator() forwards the arguments that he is called with (passed in the /* i believe.../* place) to an object that is \"wrapper this pointer casted to correct_type\". </p>\n\n<p>Now where is the information what routine to call actually passed? I can only see default created empty wrapper that is reinterpreted to some lambda type and called via ().</p>\n\n<p>Best regards</p>\n\n<p>Marcin K.</p>\n"}, {"tags": ["c++", "qt", "qtreewidget"], "answers": [{"tags": [], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "is_accepted": true, "score": 3, "last_activity_date": 1487182602, "creation_date": 1487182602, "answer_id": 42257137, "question_id": 42256986, "link": "https://stackoverflow.com/questions/42256986/how-to-centralize-the-qtreewidget-header/42257137#42257137", "title": "How to centralize the QTreeWidget header", "body": "<p>I found a solution:</p>\n\n<pre><code>ui-&gt;myTreeWidget-&gt;header()-&gt;setDefaultAlignment(Qt::AlignCenter);\n</code></pre>\n\n<p>Set the default alignment as centralized to the <code>QHeaderView</code>.</p>\n\n<p>Documentation: <a href=\"http://doc.qt.io/qt-4.8/qheaderview.html#defaultAlignment-prop\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-4.8/qheaderview.html#defaultAlignment-prop</a></p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2355, "favorite_count": 0, "accepted_answer_id": 42257137, "answer_count": 1, "score": 1, "last_activity_date": 1487182602, "creation_date": 1487182090, "question_id": 42256986, "link": "https://stackoverflow.com/questions/42256986/how-to-centralize-the-qtreewidget-header", "title": "How to centralize the QTreeWidget header", "body": "<p>How to centralize the <code>QTreeWidget</code> header?</p>\n\n<p>I have the following <code>QTreeWidget</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4oMUu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4oMUu.png\" alt=\"enter image description here\"></a></p>\n\n<p>And I want to centralize the header to look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CrZx5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CrZx5.png\" alt=\"enter image description here\"></a></p>\n\n<p>I already tried to set this stylesheet:</p>\n\n<pre><code>QHeaderView::section {\n     text-align: center;\n }\n</code></pre>\n\n<p>But it didn't work.</p>\n\n<p>I know that with <code>QTableWidget</code> we can do something like this:</p>\n\n<pre><code>myTableWidget-&gt;horizontalHeaderItem(0)-&gt;setTextAlignment(Qt::AlignCenter);\n</code></pre>\n\n<p>But <code>QTreeWidget</code> doesn't have horizontalHeaderItem().</p>\n\n<p>I'm on Qt 5.3.</p>\n"}, {"tags": ["c++", "constants", "void-pointers", "type-erasure"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487181820, "post_id": 42256800, "comment_id": 71671512, "body": "Any reason not to just store both pointers and leave the non-const pointer set to nullptr when a const pointer is used? That seems like the obvious way to do it, at least to me."}, {"owner": {"reputation": 2519, "user_id": 170361, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/72b0cfad0e96fce94648abe53632d2c9?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/170361/dennis"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487182728, "post_id": 42256800, "comment_id": 71672053, "body": "David - I thought about that too, and almost added it to the question.  Then I realized it&#39;s functionally equivalent to the &quot;union&quot; case, just differing in how its storage is laid out."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487182988, "post_id": 42256800, "comment_id": 71672215, "body": "It&#39;s not quite because it doesn&#39;t require a separate check to see which pointer is valid. (When you set a non-const pointer, you set both pointers.)"}, {"owner": {"reputation": 2519, "user_id": 170361, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/72b0cfad0e96fce94648abe53632d2c9?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/170361/dennis"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487183570, "post_id": 42256800, "comment_id": 71672548, "body": "Right but the thing is the code has to know what type it&#39;s casting to anyway on the get() function, so it already knows if it&#39;s const.  This would be a separate variable that stores what type was in the pointer.  It could be something derived from RTTI type_id, or an enumeration value, etc."}, {"owner": {"reputation": 2519, "user_id": 170361, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/72b0cfad0e96fce94648abe53632d2c9?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/170361/dennis"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487184004, "post_id": 42256800, "comment_id": 71672834, "body": "Leaving aside &quot;const&quot;, the storage is &quot;void*&quot; and the actual-type is &quot;T*&quot;.  When the pointer is stored the type &quot;T&quot; is lost.  When the stored value is retrieved it has type &quot;void*&quot; and has to be cast back to &quot;T*&quot;.  Supposing for example we are talking about storing an &quot;int&quot;, T could just as easily be made to &quot;int const&quot; as &quot;int&quot;.  So if we know &quot;T&quot; at retrieval we also know whether it is &quot;int&quot; or &quot;int const&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 2519, "user_id": 170361, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/72b0cfad0e96fce94648abe53632d2c9?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/170361/dennis"}, "edited": false, "score": 0, "creation_date": 1487183349, "post_id": 42256927, "comment_id": 71672411, "body": "Thanks, but I was rather assuming an interface hiding the storage exists, and asking about how should the implementation of that interface handle storing the pointers.I omitted describing the method of ensuring correct type access because I didn&#39;t want to make the question too long.  It could be that the add() assigns a unique ID to each T, or it could be that there are a small enough number of types to use an enumeration variable."}], "tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": true, "score": 2, "last_activity_date": 1487181885, "creation_date": 1487181885, "answer_id": 42256927, "question_id": 42256800, "link": "https://stackoverflow.com/questions/42256800/storing-a-pointer-to-t-in-a-void-but-t-may-be-const-or-nonconst-use-void-cons/42256927#42256927", "title": "Storing a pointer to T in a void* but T may be const or nonconst - use void const* or just void*?", "body": "<p>From the point of view of somebody who is going to read your code (even you in the future, 6 months from now) it is better to express the idea as clearly as possible instead of trying to minimize the number of times you cast.</p>\n\n<p>In your case using a <code>union</code> says \"it can be either one\" but it doesn't put any checks on actually enforcing its usage.</p>\n\n<p>OTOH having a clear interface that implements both const and non-const access functions (including cast functions) allows you to perform runtime-check and act accordingly (error message? exception?).</p>\n\n<p>A clear interface has an added benefit of encapsulating the implementation so that your client code doesn't depend on the internal structure of the implementation - your client code will just use your template as const or non-const (depending on the usage) and the access/cast functions will take care of making sure the usage is actually valid.</p>\n"}], "owner": {"reputation": 2519, "user_id": 170361, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/72b0cfad0e96fce94648abe53632d2c9?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/170361/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 42256927, "answer_count": 1, "score": 3, "last_activity_date": 1487183035, "creation_date": 1487181486, "last_edit_date": 1487183035, "question_id": 42256800, "link": "https://stackoverflow.com/questions/42256800/storing-a-pointer-to-t-in-a-void-but-t-may-be-const-or-nonconst-use-void-cons", "title": "Storing a pointer to T in a void* but T may be const or nonconst - use void const* or just void*?", "body": "<p>When template code needs to store a <code>T*</code> in a variable of type <code>void*</code> so that it can be retrieved and cast back to a <code>T*</code> later, but it needs to handle both <code>T</code> and <code>T const*</code>, should it use <code>void*</code> or a <code>void const*</code> for the type erased storage?  (Either choice requires at least one const cast somewhere.)</p>\n\n<p>(Assume that the program tracks at runtime what was put into the void* to ensure it only retrieves the same type as what was put in, but it doesn't know at compile time what type is going to be stored in the variable.)</p>\n\n<p>Edit:  Also assume that the un-typed storage is hidden behind a wrapper class that has templated set() and get() methods, which record what T was used for the set() call and throw an exception if a different T is used for the get().  So the question is really about how should the wrapper class store it.  (Note: the wrapper class is not itself a template; just its methods set() and get() are templates.)</p>\n\n<p>In the past, I've used a <code>union { void* p_nc; void const* p_c; };</code> when this problem came up.  However I'm wondering if that's overkill compared to just using a const_cast.</p>\n\n<p>The question is, which way is better (if any):  cast the const off <code>T const*</code> upon storage in a <code>void*</code>, or use a <code>void* const</code> for storage and cast the const off if retreiving a nonconst <code>T*</code>?</p>\n"}, {"tags": ["c++", "rest", "google-nativeclient"], "answers": [{"tags": [], "owner": {"reputation": 523, "user_id": 1340699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b946a8ec341900bc00531c90893dbc7c?s=128&d=identicon&r=PG", "display_name": "cmonsqpr", "link": "https://stackoverflow.com/users/1340699/cmonsqpr"}, "is_accepted": false, "score": 0, "last_activity_date": 1490777933, "creation_date": 1490777933, "answer_id": 43088895, "question_id": 42256432, "link": "https://stackoverflow.com/questions/42256432/sending-a-post-request-with-googles-c-native-client/43088895#43088895", "title": "sending a POST request with Google&#39;s C++ native client", "body": "<p>Did you have a look at the NativeClient SDK's examples?</p>\n\n<p>In the nacl_sdk\\pepper_\\examples\\api\\url_loader folder you'll find an example of how to use the URLLoader.</p>\n"}], "owner": {"reputation": 87, "user_id": 7352153, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c7f1fd2899490be0203c0635ce256dfd?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorP", "link": "https://stackoverflow.com/users/7352153/connorp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490777933, "creation_date": 1487180220, "last_edit_date": 1495542733, "question_id": 42256432, "link": "https://stackoverflow.com/questions/42256432/sending-a-post-request-with-googles-c-native-client", "title": "sending a POST request with Google&#39;s C++ native client", "body": "<p>Can someone give an example of how to send a POST request with Google's C++ native client? The question has been <a href=\"https://stackoverflow.com/questions/6935585/http-post-request-with-googles-c-native-client\">asked before</a>, but Google's documentation is not very helpful (and in some cases non-existent). And yes, I have been scouring github for help, but to no avail. </p>\n"}, {"tags": ["c++", "c++14", "variable-templates"], "comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487181153, "post_id": 42256429, "comment_id": 71671113, "body": "Think the best you can do is to make it a private (static) member of a class, which friends your free function. That said, I don&#39;t consider the repetition and boilerplate worth it over just putting it in a detail namespace. This is a very well worn convention, and C++ is not really the kind of language where you can make bad behavior impossible anyway."}], "answers": [{"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1487180917, "post_id": 42256573, "comment_id": 71670947, "body": "Yes, I wrote this above. The question was if there is a way to not expose the variable template."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487181023, "post_id": 42256573, "comment_id": 71671018, "body": "As I wrote on the other answer, should not assume it&#39;s ok to make a free function a class static function instead, this has pretty wide implications."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487181154, "post_id": 42256573, "comment_id": 71671115, "body": "@NirFriedman Your comment is about inlining the function and it seems to me it was the expectation of the OP. Anyway, make it a friend can be a workaround. Let me update the answer."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487181353, "post_id": 42256573, "comment_id": 71671225, "body": "Sorry, you&#39;re right, it&#39;s because I started writing a comment and then they changed to forwarding and I changed my comment. That said, the substance still holds: a free function has quite different behavior from a static function that cannot be reconciled."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487181600, "post_id": 42256573, "comment_id": 71671381, "body": "Upvoted since I think this is the best possible answer that can meet the original requirements."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1487182551, "post_id": 42256573, "comment_id": 71671957, "body": "@skypjack &quot;That being said, I don&#39;t understand what prevents you from simply doing this&quot; I was going to write Clang give you a warning on narrowing double to float, since that&#39;s what I&#39;ve seen when I tried that, but I can&#39;t see it anymore. I&#39;ll update if I see it again, maybe it was just my fluke."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1487182637, "post_id": 42256573, "comment_id": 71672004, "body": "@Danra It will be back using <code>T{1200.0}</code> and using <code>int</code> as a <code>T</code>, for example. Let me update the answer with a slightly different version that should work for both the cases."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1487182928, "post_id": 42256573, "comment_id": 71672181, "body": "@skypjack Hmm, isn&#39;t there a risk of loss of precision when initializing a <code>double</code> (in case of <code>T</code>=<code>double</code>) from an <code>int</code> this way?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1487183344, "post_id": 42256573, "comment_id": 71672410, "body": "@Danra 1200 is perfectly representable as a <code>double</code> and <code>double{1200}</code> is just fine, as well as <code>int{1200}</code>."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1487183615, "post_id": 42256573, "comment_id": 71672588, "body": "@skypjack Of course, I meant the more general issue of initializing a double with an int this way."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 3, "last_activity_date": 1487190672, "last_edit_date": 1487190672, "creation_date": 1487180705, "answer_id": 42256573, "question_id": 42256429, "link": "https://stackoverflow.com/questions/42256429/using-a-variable-template-inside-inline-constexpr-function-without-exposing-the/42256573#42256573", "title": "Using a variable template inside inline constexpr function without exposing the variable template?", "body": "<p>From the standard we have that:</p>\n\n<blockquote>\n  <p>A\u00a0template-declaration\u00a0is a\u00a0declaration.\u00a0[...]. A declaration introduced by a template declaration of a\u00a0variable is a\u00a0variable template. [...]</p>\n</blockquote>\n\n<p>And:</p>\n\n<blockquote>\n  <p>A\u00a0template-declaration\u00a0can appear only as a namespace scope or class scope declaration.</p>\n</blockquote>\n\n<p>Therefore no, it isn't allowed.<br>\nYou can still wrap it in a class and make both the data member and the member function static if you don't want to expose it:</p>\n\n<pre><code>class C {\n    template&lt;typename T&gt;\n    static constexpr T twelve_hundred = T(1200.0);\n\npublic:\n    template&lt;typename T&gt;\n    static constexpr T centsToOctaves(const T cents) {\n        return cents / twelve_hundred&lt;T&gt;;\n    }\n};\n\nint main() {\n    C::centsToOctaves(42);\n}\n</code></pre>\n\n<p>Another possible solution is:</p>\n\n<pre><code>class C {\n    template&lt;typename T&gt;\n    static constexpr T twelve_hundred = T(1200.0);\n\n    template&lt;typename T&gt;\n    friend inline constexpr T centsToOctaves(const T cents);\n};\n\ntemplate&lt;typename T&gt;\ninline constexpr T centsToOctaves(const T cents) {\n    return cents / C::twelve_hundred&lt;T&gt;;\n}\n\nint main() {\n    centsToOctaves(42);\n}\n</code></pre>\n\n<p>It has the <em>plus</em> that <code>centsToOctaves</code> is no longer a member function of <code>C</code>, as mentioned in the comments.</p>\n\n<p>That being said, I don't understand what prevents you from simply doing this:</p>\n\n<pre><code>template&lt;typename T&gt;\ninline constexpr T centsToOctaves(const T cents) {\n    return cents / T{1200};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487180928, "post_id": 42256595, "comment_id": 71670952, "body": "The inline on the class static function is implied and redundant. Also, not sure why you would forward instead of just declaring a friend?"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1487181020, "post_id": 42256595, "comment_id": 71671017, "body": "Indeed this is a solution, but not a great one unfortunately in the case that embedding the function in a class would be cumbersome (as in my case)."}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487184934, "post_id": 42256595, "comment_id": 71673427, "body": "@NirFriedman I declare the member function first, and then I realise that the <code>centsToOctaves</code> was a non member function, thus, in that moment, I thought that using a member function to access private member variable is better. Then with out any further thinking... you know what has happened."}], "tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1487184757, "last_edit_date": 1487184757, "creation_date": 1487180783, "answer_id": 42256595, "question_id": 42256429, "link": "https://stackoverflow.com/questions/42256429/using-a-variable-template-inside-inline-constexpr-function-without-exposing-the/42256595#42256595", "title": "Using a variable template inside inline constexpr function without exposing the variable template?", "body": "<p>Aside from using a namespace, you can also put the template variable into a class, and declare it as private.\nDeclaring template in function scope is not allowed.</p>\n\n<pre><code>class Detail {\n public:\n  template&lt;typename T&gt;\n  static constexpr T centsToOctaves(const T cents) {\n    return cents / twelve_hundred&lt;T&gt;;\n  }\n\n private:\n  template&lt;typename U&gt;\n  static constexpr U twelve_hundred = U(1200.0);\n};\n\n// forwarding\ntemplate&lt;typename T&gt;\ninline constexpr T centsToOctaves(const T cents) {\n  return Detail::centsToOctaves&lt;T&gt;(cents);\n}\n\nint main() {\n  centsToOctaves&lt;int&gt;(12);\n  return 0;\n}\n</code></pre>\n\n<p>Unrelated:</p>\n\n<p>You may not need to declare template <code>constexpr</code> variable. Since you can't modify it after initialisation, an alternative implementation can be using a literal directly:</p>\n\n<pre><code>template&lt;typename T&gt;\ninline constexpr T centsToOctaves(const T cents) {\n    using U = T;\n    return cents / U(1200.0);\n}\n</code></pre>\n\n<p>And when you need to explicitly specialise the template variable, you can specialise the function template instead.</p>\n\n<pre><code>template &lt;&gt;\ninline constexpr int centsToOctaves(const int cents) {\n    using U = int;\n    return cents / U(1200.0);\n}\n</code></pre>\n\n<p>But sadly this solution will generate some duplicated code, may be a worse one.</p>\n"}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 42256573, "answer_count": 2, "score": 4, "last_activity_date": 1487190672, "creation_date": 1487180215, "question_id": 42256429, "link": "https://stackoverflow.com/questions/42256429/using-a-variable-template-inside-inline-constexpr-function-without-exposing-the", "title": "Using a variable template inside inline constexpr function without exposing the variable template?", "body": "<p>Is it possible to use a variable template inside an inline constexpr function without also exposing the variable template itself?</p>\n\n<p>For example, this compiles and works:</p>\n\n<pre><code>template&lt;typename T&gt; constexpr T twelve_hundred = T(1200.0);\n\ntemplate&lt;typename T&gt;\ninline constexpr T centsToOctaves(const T cents) {\n    return cents / twelve_hundred&lt;T&gt;;\n}\n</code></pre>\n\n<p>But this doesn't compile:</p>\n\n<pre><code>template&lt;typename T&gt;\ninline constexpr T centsToOctaves(const T cents) {\n    template&lt;typename U&gt; constexpr U twelve_hundred = U(1200.0);\n    return cents / twelve_hundred&lt;T&gt;;\n}\n</code></pre>\n\n<p>The reason seems to be that template declarations aren't allowed in block scope (GCC gives an informative error message about this, Clang doesn't).</p>\n\n<p>To repeat the motivation in a bit more detail, the function is inline and defined in a header, and I'm not interested in exposing the variable template wherever the header is included.</p>\n\n<p>I guess I can define a detail namespace and put the variable template there, but it would be nicer not to expose the variable template at all. Maybe it's not possible.</p>\n"}, {"tags": ["c++", "arrays", "quicksort", "partitioning"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 1, "creation_date": 1487180052, "post_id": 42256336, "comment_id": 71670399, "body": "<i>&quot;... however when creating a large array the application stops working.&quot;</i> - Can you <a href=\"https://stackoverflow.com/posts/42256336/edit\">edit</a> your question to be more specific... How large of an array? What do you mean <i>&quot;stops working&quot;</i>? Any errors?"}, {"owner": {"reputation": 123, "user_id": 2439427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d0127bc564d81e1e4da5425e3e5e1ca1?s=128&d=identicon&r=PG", "display_name": "user2439427", "link": "https://stackoverflow.com/users/2439427/user2439427"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1487181060, "post_id": 42256336, "comment_id": 71671043, "body": "I tested with different array sizes. The current test is with an array of size 20000 elements. I have updated the post with an image of the output. Basically what is written is that the application is stopped working simular to this image: <a href=\"https://www.google.dk/search?q=exe+stops+working&amp;biw=1680&amp;bih=880&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwjm7-jk05LSAhXFjCwKHenHBboQ_AUICCgB#imgrc=JpHhSEC9Pyy5SM\" rel=\"nofollow noreferrer\">google.dk/&hellip;</a>:"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1487182697, "post_id": 42256336, "comment_id": 71672027, "body": "@user2439427 If it doesn&#39;t work with large arrays, it probably is broken for small arrays also, just that you haven&#39;t noticed it yet.  Also, 20000 is <b>not</b> large."}, {"owner": {"reputation": 123, "user_id": 2439427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d0127bc564d81e1e4da5425e3e5e1ca1?s=128&d=identicon&r=PG", "display_name": "user2439427", "link": "https://stackoverflow.com/users/2439427/user2439427"}, "edited": false, "score": 0, "creation_date": 1487183265, "post_id": 42256336, "comment_id": 71672358, "body": "I have tested different sizes below 1000 which is not a large array but it works every time. Everytime i try to make the array a bit larger it cannot handle it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1487183317, "post_id": 42256336, "comment_id": 71672392, "body": "You could have also posted an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> just like <a href=\"http://ideone.com/VIKsol\" rel=\"nofollow noreferrer\">this one</a>.  Running that program under Visual Studio reveals a stack overflow error."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1487183730, "post_id": 42256336, "comment_id": 71672672, "body": "Also, <a href=\"http://ideone.com/HWE3A6\" rel=\"nofollow noreferrer\">this quicksort program</a> using <a href=\"http://stackoverflow.com/questions/24650626/how-to-implement-classic-sorting-algorithms-in-modern-c\">this implementation that uses recursion</a> sorts correctly.  So again, you have a bug in that you are excessively calling your recursive function, even for the cases you say &quot;work correctly&quot;."}, {"owner": {"reputation": 123, "user_id": 2439427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d0127bc564d81e1e4da5425e3e5e1ca1?s=128&d=identicon&r=PG", "display_name": "user2439427", "link": "https://stackoverflow.com/users/2439427/user2439427"}, "edited": false, "score": 0, "creation_date": 1487183836, "post_id": 42256336, "comment_id": 71672725, "body": "<a href=\"http://ideone.com/1R1MVL\" rel=\"nofollow noreferrer\">ideone.com/1R1MVL</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1487183938, "post_id": 42256336, "comment_id": 71672792, "body": "@user2439427 -- Doesn&#39;t matter. You have a bug that was exposed by the large number.  A recursive quick sort should never bomb out at 20,000.  That means that you are erroneously calling your recursive function too many times, even for the cases that work."}, {"owner": {"reputation": 123, "user_id": 2439427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d0127bc564d81e1e4da5425e3e5e1ca1?s=128&d=identicon&r=PG", "display_name": "user2439427", "link": "https://stackoverflow.com/users/2439427/user2439427"}, "edited": false, "score": 0, "creation_date": 1487184076, "post_id": 42256336, "comment_id": 71672885, "body": "Obviously something os wrong which is why i seek for help by asking a question in here since i cannot solve it myself and i have been stuck quite a while now."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1487184697, "post_id": 42256336, "comment_id": 71673286, "body": "why not press &#39;break&#39; and see what line its failing on. Or check the box &#39;break when this exception is thrown&#39; and run it again. VS is trying to help you"}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1487184771, "post_id": 42256336, "comment_id": 71673334, "body": "<code>SerialQuicksort(first, mid+1, myArray, size);</code> looks like a bug. You should probably use <code>mid-1</code> instead."}, {"owner": {"reputation": 898, "user_id": 1450036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/apHNG.jpg?s=128&g=1", "display_name": "LZR", "link": "https://stackoverflow.com/users/1450036/lzr"}, "edited": false, "score": 0, "creation_date": 1487184783, "post_id": 42256336, "comment_id": 71673344, "body": "did not test but at the first glance this seems wrong <code>SerialQuicksort(first, mid+1, myArray, size); &#47;&#47; mid -1 SerialQuicksort(mid+1, last, myArray, size);</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1487184868, "post_id": 42256336, "comment_id": 71673391, "body": "@user2439427 You need to debug your code.  The immediate issue is that you are blowing out the stack by calling your function too many times.  Observe what you&#39;re doing when you choose your first and mid.  Also, you don&#39;t need to pass <code>myArray</code> or <code>SIZE</code> to any of your functions.  Note that both of these parameters are not used at all.  All you need is the start and end of the range you&#39;re sorting."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1487184914, "post_id": 42256336, "comment_id": 71673417, "body": "<code>*r--;</code> I don&#39;t think this does what you think it does."}, {"owner": {"reputation": 123, "user_id": 2439427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d0127bc564d81e1e4da5425e3e5e1ca1?s=128&d=identicon&r=PG", "display_name": "user2439427", "link": "https://stackoverflow.com/users/2439427/user2439427"}, "edited": false, "score": 0, "creation_date": 1487191313, "post_id": 42256336, "comment_id": 71676949, "body": "I did debug and yet i am still stuck. I believe it is because the recursion is so deep but I dont know how to fix it. The Error when debygging is stackoverflow"}, {"owner": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "edited": false, "score": 0, "creation_date": 1487211031, "post_id": 42256336, "comment_id": 71684420, "body": "Your program has not a single comment.  Add the appropriate comments, explaining what EXACTLY each function does, and what each parameters EXACTLY means.  Without comments, it is not surprising it doesn&#39;t work.  And never use parameters like &quot;a&quot;, &quot;r&quot;, &quot;p&quot;.  Names should be meaningful.  And fix the indentations.  Your code is written so bad, that I would be surprised if it had no bug."}, {"owner": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "edited": false, "score": 0, "creation_date": 1487211188, "post_id": 42256336, "comment_id": 71684449, "body": "One obvious bug: if last-first==1, your SerialQuicksort does nothing. Instead, it should swap two elements of the array if neccessary."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 2439427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d0127bc564d81e1e4da5425e3e5e1ca1?s=128&d=identicon&r=PG", "display_name": "user2439427", "link": "https://stackoverflow.com/users/2439427/user2439427"}, "edited": false, "score": 0, "creation_date": 1487234734, "post_id": 42262737, "comment_id": 71694027, "body": "I have already tried it but somehow as you write My recursion is to deep"}], "tags": [], "owner": {"reputation": 101, "user_id": 3345850, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cc0f13285e6e0ca08e2c71bcf2ce76cf?s=128&d=identicon&r=PG&f=1", "display_name": "user3345850", "link": "https://stackoverflow.com/users/3345850/user3345850"}, "is_accepted": false, "score": 0, "last_activity_date": 1487205428, "creation_date": 1487205428, "answer_id": 42262737, "question_id": 42256336, "link": "https://stackoverflow.com/questions/42256336/quicksort-not-working-with-large-array/42262737#42262737", "title": "Quicksort not working with large array", "body": "<p>You could increase the stack size, by stetting stack reserve size (in configuration properties > linker > system) to a higher value, but this won't help if the recursion is too deep. </p>\n"}], "owner": {"reputation": 123, "user_id": 2439427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d0127bc564d81e1e4da5425e3e5e1ca1?s=128&d=identicon&r=PG", "display_name": "user2439427", "link": "https://stackoverflow.com/users/2439427/user2439427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487205428, "creation_date": 1487179902, "last_edit_date": 1487184510, "question_id": 42256336, "link": "https://stackoverflow.com/questions/42256336/quicksort-not-working-with-large-array", "title": "Quicksort not working with large array", "body": "<p>I am trying to implement a quicksort algorithm with Hoare partioning which can work with a large set of array. It works with small size arrays however when creating a large array the application stops working. Can anyone help? </p>\n\n<p>The implementation looks as followed:\nQuickSort.h</p>\n\n<pre><code>void SerialQuicksort(T* first, T* last, T* myArray, int size) {\n    if (last - first&gt;1) {\n        T* mid = ModifiedHoare(myArray, first, last);\n        SerialQuicksort(first, mid+1, myArray, size);\n        SerialQuicksort(mid+1, last, myArray, size);\n    }\n} \n</code></pre>\n\n<p>Partitioning function:</p>\n\n<pre><code>    int* ModifiedHoare(int* a, int* p, int* r)\n{\n    if (*p&gt;*r)\n        swapp(p, r); // Sentinel at both ends\n        int x = *p; // x stores the pivot and location p is vacant now.\n        while (1)\n        {\n            do{\n                *r--;\n            } while (*r&gt;x); // search the smaller   element in right\n                // portion.\n                *p = *r; // location r is vacant now.\n                do{\n                    *p++;\n                } while (*p&lt;x); // search the larger element in left portion.\n                    if (p&lt;r)\n                        *r = *p; // location p is vacant now.\n                    else{\n                    if (*(r + 1) &lt;= x)\n                        r++;\n                    *r = x;\n                    return r; // return the location of the pivot\n                }\n        }\n}\n\ninline void swapp(int* x, int* y)\n{\n    int temp = *x;\n    *x = *y;\n    *y = temp;\n}\n</code></pre>\n\n<p>Test - Main</p>\n\n<pre><code>#define SIZE 20000\nint* myArray = new int[SIZE];\nfor (int i = 0; i &lt; SIZE; i++)\n{\n    *(myArray + i) = rand();\n}\n\nparallelQuick.SerialQuicksort(&amp;myArray[0], &amp;myArray[SIZE-1], myArray, SIZE);\n</code></pre>\n\n<p>Output on screen:\n<a href=\"https://i.stack.imgur.com/tJXrg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tJXrg.png\" alt=\"enter image description here\"></a></p>\n\n<p>When debugging the application an exception appears with the following:</p>\n\n<p>Access violation writing location 0x00140F64</p>\n\n<pre><code>#define SIZE 356\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UsvAb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UsvAb.png\" alt=\"Number of calls\"></a>\n<a href=\"https://i.stack.imgur.com/d20eS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d20eS.png\" alt=\"Exception popup window\"></a></p>\n"}, {"tags": ["c++", "performance", "std", "boost-spirit"], "comments": [{"owner": {"reputation": 454, "user_id": 2041703, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/eZ3la.png?s=128&g=1", "display_name": "DiB", "link": "https://stackoverflow.com/users/2041703/dib"}, "edited": false, "score": 0, "creation_date": 1487179110, "post_id": 42255919, "comment_id": 71669752, "body": "@NeilButterworth To the best of my knowledge, std::to_string does not allow for controlling the format.  Here I am wanting to control the precision. Other functions may also want to control the width of the output.  All of this is easy with std::stringstream, but I would like a more performance-oriented solution."}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "is_accepted": true, "score": 5, "last_activity_date": 1487181115, "creation_date": 1487181115, "answer_id": 42256697, "question_id": 42255919, "link": "https://stackoverflow.com/questions/42255919/using-boost-karma-to-replace-stdstringstream-for-double-to-stdstring-convers/42256697#42256697", "title": "Using Boost Karma to replace std::stringstream for double to std::string Conversion", "body": "<p>You can achieve what you want with the help of <a href=\"http://www.boost.org/libs/spirit/doc/html/spirit/karma/reference/numeric/real_number.html#spirit.karma.reference.numeric.real_number.real_number_formatting_policies\" rel=\"noreferrer\"><code>real_generator</code>'s formatting policies</a>. Since you only need to modify the precision you can derive from the default <code>real_policies&lt;Num&gt;</code> and then add the <code>precision(Num n)</code> member function that has the behaviour you need.</p>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/ZfAwTb0hjHU0Pc5l\" rel=\"noreferrer\">Running on WandBox</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n\n#include &lt;boost/spirit/include/karma.hpp&gt;\n\ntemplate &lt;typename Num&gt;\nstruct precision_policy : boost::spirit::karma::real_policies&lt;Num&gt;\n{\n    precision_policy(int prec):precision_(prec){}\n    int precision(Num n) const { return precision_; }\n    int precision_;\n};\n\nstd::string ToStringFixedKarma(double d, const unsigned int width = 8)\n{\n  using boost::spirit::karma::real_generator;\n  using boost::spirit::ascii::space;\n  using boost::spirit::karma::generate;\n\n  real_generator&lt;double,precision_policy&lt;double&gt; &gt; my_double_(width);\n\n  std::string s;\n  std::back_insert_iterator&lt;std::string&gt; sink(s);\n  generate(sink, my_double_, d);\n  return s;\n}\n\nint main() {\n    const double pi = std::acos(-1);\n    std::cout &lt;&lt; ToStringFixedKarma(pi) &lt;&lt; std::endl;\n    std::cout &lt;&lt; ToStringFixedKarma(pi,2) &lt;&lt; std::endl;\n    std::cout &lt;&lt; ToStringFixedKarma(pi,4) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>PS: The documentation (and inspecting the source) seems to imply that the member functions in these policies need to be static, which would make what you need impossible, but as <a href=\"http://www.boost.org/libs/spirit/example/karma/printf_style_double_format.cpp\" rel=\"noreferrer\">this example</a> shows, that is not the case.</p>\n"}], "owner": {"reputation": 454, "user_id": 2041703, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/eZ3la.png?s=128&g=1", "display_name": "DiB", "link": "https://stackoverflow.com/users/2041703/dib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 1, "accepted_answer_id": 42256697, "answer_count": 1, "score": 3, "last_activity_date": 1487181115, "creation_date": 1487178641, "question_id": 42255919, "link": "https://stackoverflow.com/questions/42255919/using-boost-karma-to-replace-stdstringstream-for-double-to-stdstring-convers", "title": "Using Boost Karma to replace std::stringstream for double to std::string Conversion", "body": "<p>For performance improvement, I am looking to replace:</p>\n\n<pre><code>template&lt;class T&gt; std::string ToStringFixed(const T x, const unsigned int width = 8)\n{\n  std::stringstream ss;\n  ss &lt;&lt; std::setprecision(width) &lt;&lt; std::fixed &lt;&lt; x;\n  return ss.str();\n}\n</code></pre>\n\n<p>With an implementation from Boost Karma as our project already uses Boost and it looks to have a significant performance gain over the naive solution above.</p>\n\n<p>Something like:</p>\n\n<pre><code>std::string ToString(double d)\n{\n  using boost::spirit::karma::double_;\n  using boost::spirit::ascii::space;\n  using boost::spirit::karma::generate;\n\n  std::string s\n  std::back_insert_iterator&lt;std::string&gt; sink(s);\n  generate(sink, double_, d);\n  return s;\n}\n</code></pre>\n\n<p>Which is adopted from: <a href=\"http://thisthread.blogspot.com/2011/04/generating-text-with-spirit-karma.html\" rel=\"nofollow noreferrer\">http://thisthread.blogspot.com/2011/04/generating-text-with-spirit-karma.html</a> seems to be on the right track, but it isn't clear to me how to control the precision, or if such a solution can be template-friendly for floating point types without use of type traits.  (Answers using up through C++14 are acceptable.)</p>\n"}, {"tags": ["c++", "c++11", "templates", "refactoring", "variadic-templates"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 3, "creation_date": 1487178294, "post_id": 42255534, "comment_id": 71669170, "body": "I don&#39;t see any problem with your <code>doStuffBetter</code> function. Looks readable and productive enough for me."}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 1, "creation_date": 1487178325, "post_id": 42255534, "comment_id": 71669200, "body": "Given you have working code, this may be better suited for <a href=\"http://codereview.stackexchange.com/\">Code Review</a>"}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "reply_to_user": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 0, "creation_date": 1487178505, "post_id": 42255534, "comment_id": 71669335, "body": "@lcs maybe but the second part of the question don&#39;t have any working code"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1487178565, "post_id": 42255534, "comment_id": 71669375, "body": "@AlexandreTHOUVENIN: You shouldn&#39;t ask multiple questions in one question."}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1487178622, "post_id": 42255534, "comment_id": 71669414, "body": "@Christian Hackl I though they were close enough but you are right"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1487178656, "post_id": 42255534, "comment_id": 71669435, "body": "Do you have C++14, or are you really stuck in C++11?  Generic lambdas can make a similar solution inline."}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1487178794, "post_id": 42255534, "comment_id": 71669526, "body": "@Yakk stuck in C++11, this has to work on game consoles and we have not yet tested C++14 properly on those devices (even if it should be supported), however I&#39;m really interested in your answer since I know nothing about generic lambdas"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1487179019, "post_id": 42255534, "comment_id": 71669688, "body": "With additional layer and variadic template, you may do <code>do123&lt;Type1, Type2, Type3&gt;();</code>. Not sure it is better here though."}], "answers": [{"comments": [{"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "edited": false, "score": 0, "creation_date": 1487179679, "post_id": 42256179, "comment_id": 71670143, "body": "Boost does amazing things, I&#39;m not using that in production code but definitely +1 for the originality"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "edited": false, "score": 0, "creation_date": 1487180006, "post_id": 42256179, "comment_id": 71670359, "body": "@AlexandreTHOUVENIN Added a version without Boost for you."}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "edited": false, "score": 0, "creation_date": 1487180495, "post_id": 42256179, "comment_id": 71670663, "body": "It brings something interesting, less elegant than type vector yet it still keeps the list of type somewhere else. It can be useful."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1487179698, "last_edit_date": 1487179698, "creation_date": 1487179425, "answer_id": 42256179, "question_id": 42255534, "link": "https://stackoverflow.com/questions/42255534/c-execute-an-action-for-each-type-in-a-given-list/42256179#42256179", "title": "C++ execute an action for each type in a given list", "body": "<p>You can use <code>boost::mpl::vector&lt;&gt;</code> as a list of types and <code>boost::mpl::for_each</code> to iterate over the types:</p>\n\n<pre><code>#include &lt;boost/mpl/vector.hpp&gt;\n#include &lt;boost/mpl/for_each.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n\nstruct Type1 {};\nstruct Type2 {};\nstruct Type3 {};\n\ntemplate&lt;class T&gt;\nstruct Type\n{\n    typedef T agrument_type;\n};\n\nint main(int ac, char**) {\n    using Types = boost::mpl::vector&lt;Type1, Type2, Type3&gt;;\n\n    boost::mpl::for_each&lt;Types, Type&lt;boost::mpl::_1&gt; &gt;([](auto type_wrapper) {\n        using Type = typename decltype(type_wrapper)::agrument_type;\n        // Place your code here.\n        std::cout &lt;&lt; typeid(Type).name() &lt;&lt; '\\n';\n    });\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>5Type1\n5Type2\n5Type3\n</code></pre>\n\n<hr>\n\n<p>If C++14 lambda with <code>auto</code> is unavailable, use the following functional object instead of the lambda function:</p>\n\n<pre><code>struct TypeCallback\n{\n    template&lt;class TypeWrapper&gt;\n    void operator()(TypeWrapper) {\n        using Type = typename TypeWrapper::agrument_type;\n        // Place your code here.\n        std::cout &lt;&lt; typeid(Type).name() &lt;&lt; '\\n';\n    }\n};\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>boost::mpl::for_each&lt;Types, Type&lt;boost::mpl::_1&gt; &gt;(TypeCallback{});\n</code></pre>\n\n<hr>\n\n<p>Without boost, instead of using <code>boost::mpl::vector&lt;&gt;</code> and <code>boost::mpl::for_each</code>, just create a function that iterates over a hard-coded list of types:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n\ntemplate&lt;class T&gt;\nstruct Type\n{\n    typedef T agrument_type;\n};\n\nstruct TypeCallback\n{\n    template&lt;class TypeWrapper&gt;\n    void operator()(TypeWrapper) {\n        using Type = typename TypeWrapper::agrument_type;\n        // Place your code here.\n        std::cout &lt;&lt; typeid(Type).name() &lt;&lt; '\\n';\n    }\n};\n\nstruct Type1 {};\nstruct Type2 {};\nstruct Type3 {};\n\ntemplate&lt;class F&gt;\nvoid for_each_mytype(F f) { // &lt;--- one function per different list of types\n    f(Type&lt;Type1&gt;{});\n    f(Type&lt;Type2&gt;{});\n    f(Type&lt;Type3&gt;{});\n}\n\nint main(int ac, char**) {\n    for_each_mytype(TypeCallback{});\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "edited": false, "score": 0, "creation_date": 1487181115, "post_id": 42256587, "comment_id": 71671082, "body": "I really like your for_each_type, even if it&#39;s C++14 I might use this kind of solutions in other projects or even later in the same project, +1 obviously. The iterator upgrade is also good, if the codebase using it wasn&#39;t that huge, I&#39;d probably go for that"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1487180746, "creation_date": 1487180746, "answer_id": 42256587, "question_id": 42255534, "link": "https://stackoverflow.com/questions/42255534/c-execute-an-action-for-each-type-in-a-given-list/42256587#42256587", "title": "C++ execute an action for each type in a given list", "body": "<p>This is a C++14 solution.</p>\n\n<pre><code>namespace notstd {\n  template&lt;class T&gt; struct tag_t { constexpr tag_t() {}; using type=T; };\n  template&lt;class T&gt; constexpr tag_t&lt;T&gt; tag{};\n  template&lt;class Tag&gt; using type_t = typename Tag::type;\n\n  template&lt;class...Ts, class F&gt;\n  void for_each_type(F&amp;&amp; f) {\n    using discard=int[];\n    (void)discard{ 0,(void(\n      f( tag&lt;Ts&gt; )\n    ),0)...};\n  }\n}\n</code></pre>\n\n<p>that is some boilerplate.</p>\n\n<p>Now we do:</p>\n\n<pre><code>void myClass::doStuffBetter()\n{\n  notstd::for_each_type&lt;Type1,Type2,Type2&gt;(\n    [&amp;](auto tag){\n      using type=notstd::type_t&lt;decltype(tag)&gt;;\n      for( myIterator&lt;type&gt; it( getDatabase() ); it; ++it )\n      {\n        do1( *it );\n        do2( *it );\n        do3( *it );\n      }\n    }\n  );\n}\n</code></pre>\n\n<p>we can go a step further and upgrade <code>myIterator&lt;_type&gt;</code> such that a default-constructed instance compares equal to the one-past-the-end iterator.</p>\n\n<pre><code>namespace notstd {\n  template&lt;class It&gt;\n  struct range_t {\n    It b, e;\n    It begin() const { return b; }\n    It end() const { return e; }\n  };\n\n  template&lt;class It&gt;\n  range_t&lt;It&gt; range( It s, It f = {} ) {\n    return {std::move(s), std::move(f)};\n  }\n}\n</code></pre>\n\n<p>then we get:</p>\n\n<pre><code>void myClass::doStuffBetter()\n{\n  notstd::for_each_type&lt;Type1,Type2,Type2&gt;(\n    [&amp;](auto tag){\n      using type=notstd::type_t&lt;decltype(tag)&gt;;\n      for( auto&amp;&amp; e : notstd::range( myIterator&lt;type&gt;( getDatabase() ) )\n      {\n        do1( e );\n        do2( e );\n        do3( e );\n      }\n    }\n  );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "edited": false, "score": 0, "creation_date": 1487189702, "post_id": 42257028, "comment_id": 71676064, "body": "It definitely answers the bonus question. I like how you used initializer_list to do the trick"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "edited": false, "score": 0, "creation_date": 1487190817, "post_id": 42257028, "comment_id": 71676647, "body": "@AlexandreTHOUVENIN - I&#39;m not an expert and I&#39;m not good in explaining but... the idea is initialize an array of <code>int</code>, so we create an environment where we can put a sequence of comma separated values, and every value for the array (a zero) is preceded by a value (<code>do123&lt;Types&gt;()</code>) that is discarded by the following comma"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1487182236, "creation_date": 1487182236, "answer_id": 42257028, "question_id": 42255534, "link": "https://stackoverflow.com/questions/42255534/c-execute-an-action-for-each-type-in-a-given-list/42257028#42257028", "title": "C++ execute an action for each type in a given list", "body": "<p>I find your solution good enough.</p>\n\n<p>Just for fun, I propose the following <code>doStuffBetter()</code></p>\n\n<pre><code>template &lt;typename ... Types&gt;\nvoid myClass::doStuffBetter()\n {\n   int unused[] { (do123&lt;Types&gt;(), 0)... };\n\n   (void)unused; // to avoid a warning\n }\n</code></pre>\n\n<p>Should work with C++11 and I suppose that can respond to your bonus question too.</p>\n"}], "owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 42257028, "answer_count": 3, "score": 2, "last_activity_date": 1487182236, "creation_date": 1487177723, "last_edit_date": 1487178293, "question_id": 42255534, "link": "https://stackoverflow.com/questions/42255534/c-execute-an-action-for-each-type-in-a-given-list", "title": "C++ execute an action for each type in a given list", "body": "<p>I have been given the charge to refactor old code and have stumbled upon this case: </p>\n\n<pre><code>void myClass::doStuff()\n{\n    for( myIterator&lt; Type1 &gt; it( this-&gt;getDatabase() ); it; ++it )\n    {\n        do1( *it );\n        do2( *it );\n        do3( *it );\n    }\n    for( myIterator&lt; Type2 &gt; it( this-&gt;getDatabase() ); it; ++it )\n    {\n        do1( *it );\n        do2( *it );\n        do3( *it );\n    }\n    for( myIterator&lt; Type3 &gt; it( this-&gt;getDatabase() ); it; ++it )\n    {\n        do1( *it );\n        do2( *it );\n        do3( *it );\n    }\n}\n</code></pre>\n\n<p>It's obviously bad since I copy basically the same code 3 times so I decided to refactor it using templates like this :</p>\n\n<pre><code>template&lt;class _type&gt; void myClass::do123()\n{\n    for( myIterator&lt; _type &gt; it( this-&gt;getDatabase() ); it; ++it )\n    {\n        do1( *it );\n        do2( *it );\n        do3( *it );\n    }\n}\nvoid myClass::doStuffBetter()\n{\n    do123&lt;Type1&gt;();\n    do123&lt;Type2&gt;();\n    do123&lt;Type3&gt;();\n}\n</code></pre>\n\n<p>Is there other easier/more productive ways to factorize this kind of repetition in code ?</p>\n\n<p>Bonus question : if my types were not static but given in a variadic template how would I do a similar treatment ?</p>\n"}, {"tags": ["c++", "arrays", "llvm", "llvm-c++-api"], "answers": [{"comments": [{"owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "edited": false, "score": 0, "creation_date": 1487234025, "post_id": 42268614, "comment_id": 71693615, "body": "Thanks! What is the difference between using a <code>ConstantArray</code> and <code>ConstantDataArray</code>?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "edited": false, "score": 0, "creation_date": 1487234597, "post_id": 42268614, "comment_id": 71693949, "body": "Seems like ConstantDataArray is &quot;essentially the same, except only supports a limited range of member types&quot; (1/2/4/8 byte types - such as <code>int</code> or <code>float</code> or <code>double</code>) - and yes, you could use that in this case - my description works for any type [aside from, of course <code>getIntegerValue</code> doesn&#39;t work if you have a non-integertype]"}, {"owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "edited": false, "score": 0, "creation_date": 1487234674, "post_id": 42268614, "comment_id": 71693988, "body": "Thanks, very helpful!"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 5, "last_activity_date": 1487233893, "creation_date": 1487233893, "answer_id": 42268614, "question_id": 42255453, "link": "https://stackoverflow.com/questions/42255453/how-do-i-initialize-an-integer-array-in-llvm-using-a-list-of-integers/42268614#42268614", "title": "How do I initialize an integer array in LLVM using a list of integers?", "body": "<p>You can create a constant initializer list:</p>\n\n<pre><code>std::vector&lt;llvm::Constant*&gt; values;\n...\n/* Make the value 42 appear in the array - ty is \"i32\" */\nllvm::Constant* c = llvm::Constant::getIntegerValue(ty, 42);\nvalues.push_back(c);\n... // Add more values here ... \nllvm::Constant* init = llvm::ConstantArray::get(arrayTy_0, values);\nGArray-&gt;setInitializer(init);\n</code></pre>\n\n<p>This code (and the 20 or so lines before it) creates a global struct that is initialized:\n<a href=\"https://github.com/Leporacanthicus/lacsap/blob/master/expr.cpp#L2585\" rel=\"noreferrer\">https://github.com/Leporacanthicus/lacsap/blob/master/expr.cpp#L2585</a></p>\n\n<p>And here is another example using setInitializer - again, it's not an array but a struct, but conceptually there's not much difference between arrays and structs:\n<a href=\"https://github.com/Leporacanthicus/lacsap/blob/master/expr.cpp#L3376\" rel=\"noreferrer\">https://github.com/Leporacanthicus/lacsap/blob/master/expr.cpp#L3376</a></p>\n\n<p>See also (for example):\n<a href=\"http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantArray.html\" rel=\"noreferrer\">http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantArray.html</a></p>\n"}], "owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2394, "favorite_count": 1, "accepted_answer_id": 42268614, "answer_count": 1, "score": 4, "last_activity_date": 1487233893, "creation_date": 1487177536, "question_id": 42255453, "link": "https://stackoverflow.com/questions/42255453/how-do-i-initialize-an-integer-array-in-llvm-using-a-list-of-integers", "title": "How do I initialize an integer array in LLVM using a list of integers?", "body": "<p>I've the following IR code that I want to generate C++ for:</p>\n\n<pre><code>@gArray = global [10 x i32] [i32 3, i32 4, i32 5, i32 6, i32 0, i32 0, i32 0, i32 0, i32 12, i32 0], align 16\n</code></pre>\n\n<p>I know I could use these lines of code to initialize the array to all zeros:</p>\n\n<pre><code>    ConstantAggregateZero* const_array_2 = ConstantAggregateZero::get(ArrayTy_0);\n    GArray-&gt;setInitializer(const_array_2);\n</code></pre>\n\n<p>How do I initialize an array in LLVM to a list of values?</p>\n"}, {"tags": ["c++", "bind"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1487177167, "post_id": 42255121, "comment_id": 71668302, "body": "Why do you think your <code>bind()</code> result takes two parameters?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487177297, "post_id": 42255121, "comment_id": 71668394, "body": "The new function created by bind takes <i>one</i> parameter, because you have provided the other parameter for the function that the bind is based on. It&#39;s important to realise that bind creates a new function."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1487177357, "post_id": 42255121, "comment_id": 71668435, "body": "And where are &quot;stored&quot; those parameters? When it calls <code>callback(mVoices[i]);</code> it also pass 100 to SetValue()."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487177480, "post_id": 42255121, "comment_id": 71668534, "body": "@paizza In the object that bind returns."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1487177536, "post_id": 42255121, "comment_id": 71668581, "body": "@NeilButterworth: can you write down how will be &quot;written&quot; the object bind returns so? I don&#39;t get the point..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487177702, "post_id": 42255121, "comment_id": 71668691, "body": "@paizza bind doesn&#39;t return a function pointer, it returns a std::function object. Like all objects in C++, this object can have member variables, and one of those member variables will be the bound parameter 100, which will be used when a function call is made via the function object."}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1487189209, "post_id": 42255121, "comment_id": 71675791, "body": "The question&#39;s example code might benefit from further generalization. It was not as easy as it could have been to parse what you were trying to do with your code. Could just me though."}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "is_accepted": false, "score": 2, "last_activity_date": 1487177164, "creation_date": 1487177164, "answer_id": 42255317, "question_id": 42255121, "link": "https://stackoverflow.com/questions/42255121/can-you-help-me-to-understand-why-this-bind-works/42255317#42255317", "title": "Can you help me to understand why this bind works?", "body": "<p>When you bind, you're making a new function that only takes <code>Voice</code> as a param, that's why it works. </p>\n\n<pre><code>void a_func(int x) { return; }\nstd::function&lt;void(void)&gt; new_func = std::bind(&amp;a_func, 1);\n</code></pre>\n\n<p><code>new_func</code> now has the signature of <code>void(void)</code>, so you could pass it around to anywhere that expects a function of type <code>void(void</code>). </p>\n\n<p>When you call <code>new_func</code>, it really calls <code>a_func(1)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1487177483, "post_id": 42255368, "comment_id": 71668541, "body": "What do you mean with &quot;The other parmeter on your function is already bound to 100.&quot;? Where its stored the 100 value when I call that function? I don&#39;t think it replace <code>value</code> with 100, such as <code>voice.mValue = 100;</code> :O"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 1, "creation_date": 1487177744, "post_id": 42255368, "comment_id": 71668734, "body": "@paizza: It&#39;s stored inside the mechanism of <code>bind</code>. This is what <code>bind</code> does! It binds."}, {"owner": {"reputation": 12730, "user_id": 264338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/97936fd8ef03399c3adb1d678d19270f?s=128&d=identicon&r=PG", "display_name": "mkaes", "link": "https://stackoverflow.com/users/264338/mkaes"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1487178109, "post_id": 42255368, "comment_id": 71669024, "body": "@paizza I added a simplified sketch of what bind does but if you really want to know just look into boost. It is easier to read than the gcc STL code."}], "tags": [], "owner": {"reputation": 12730, "user_id": 264338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/97936fd8ef03399c3adb1d678d19270f?s=128&d=identicon&r=PG", "display_name": "mkaes", "link": "https://stackoverflow.com/users/264338/mkaes"}, "is_accepted": false, "score": 2, "last_activity_date": 1491479705, "last_edit_date": 1491479705, "creation_date": 1487177323, "answer_id": 42255368, "question_id": 42255121, "link": "https://stackoverflow.com/questions/42255121/can-you-help-me-to-understand-why-this-bind-works/42255368#42255368", "title": "Can you help me to understand why this bind works?", "body": "<p>Your assumption about bind is wrong.<br>\nYour bind call returns a function object that will accept one parameter, namely the placeholder. The other parameter on your function is already bound to 100.</p>\n\n<p>A little example:</p>\n\n<pre><code>void foo(int i1, int i2) {};\nstd::function&lt;void(int,int)&gt; fn1 = std::bind(foo, std::placeholders::_1, std::placeholders::_2);\nstd::function&lt;void(int)&gt; fn1 = std::bind(foo, std::placeholders::_1, 1);\nstd::function&lt;void()&gt; fn1 = std::bind(foo, 1, 1);\n</code></pre>\n\n<p>The bind will create a matching function depending on bound and unbound parameters.</p>\n\n<p><strong>Update</strong></p>\n\n<p>The compiler will generate a struct from the bind expression and a copy of your parameter. Simplified something like this(this will not compile):</p>\n\n<pre><code>struct Function_{\n    void(*fn)(Voice &amp;, unsigned int)\n    unsigned int i_;\n\n    Function_(void(*f)(Voice &amp;, unsigned int), unsigned int i):fn(f),i_(i){}\n    void operator()(Voice&amp; v){\n        fn(v, i_);\n    }\n}\n</code></pre>\n\n<p>fn is the first parameter which is a function pointer and the bound (100) is the second. Then all you need is some type erasure and your own bind is ready to go.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1487177787, "last_edit_date": 1487177787, "creation_date": 1487177467, "answer_id": 42255429, "question_id": 42255121, "link": "https://stackoverflow.com/questions/42255121/can-you-help-me-to-understand-why-this-bind-works/42255429#42255429", "title": "Can you help me to understand why this bind works?", "body": "<p>That is exactly the beauty of <code>bind</code> and <code>std::function</code> at works. You are defining the callback as function taking one argument, and <code>bind</code> is  returning a function object which takes one argument.</p>\n\n<p>The main point here is that it actually calls the function which takes 2 parameters, but the second one is fixed, and will always be 100 (in your case). This is the sole purpose of binders - to provide a way to call functions with different set of arguments with some fixed values. If you would be calling the function taking the same set of arguments, there would be no reason to use binders at all!</p>\n\n<p>Knowing that <code>bind</code> is similar to lambdas, the same code could be written as - and probably be more clear:</p>\n\n<pre><code>VoiceManager::VoiceChangerFunction callback;\ncallback = [](Voice&amp; v) { VoiceManager::SetValue(v, 100); };\nvoiceManager.UpdateVoices(callback);\n</code></pre>\n\n<p>And if you are curious how it works, you might try to create a binder framework yourself. If you are only doing it for educational purposes and not worried about too many details, it is not that hard.</p>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1491479705, "creation_date": 1487176669, "question_id": 42255121, "link": "https://stackoverflow.com/questions/42255121/can-you-help-me-to-understand-why-this-bind-works", "title": "Can you help me to understand why this bind works?", "body": "<p>I'm trying to understand bind and pre-fill functions in C++.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/d9e2dba7a698e279\" rel=\"nofollow noreferrer\">Here's</a> my example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n\nclass Voice\n{\npublic:\n    double mValue;\n\nprivate:\n};\n\nclass VoiceManager\n{\npublic:\n    VoiceManager() { }\n    ~VoiceManager() { }\n\n    typedef std::function&lt;void(Voice &amp;)&gt; VoiceChangerFunction;\n    inline void UpdateVoices(VoiceChangerFunction callback) {\n        for (int i = 0; i &lt; mNumOfVoices; i++) {\n            callback(mVoices[i]);\n        }\n    }\n    static void SetValue(Voice &amp;voice, unsigned int value) {\n        voice.mValue = value;\n        std::cout &lt;&lt; voice.mValue &lt;&lt; std::endl;\n    }\n\nprivate:\n    static const int mNumOfVoices = 4;    \n    Voice mVoices[mNumOfVoices];\n};\n\nint main()\n{\n    VoiceManager voiceManager;\n    VoiceManager::VoiceChangerFunction callback;\n    callback = std::bind(&amp;VoiceManager::SetValue, std::placeholders::_1, 100);\n    voiceManager.UpdateVoices(callback);\n}\n</code></pre>\n\n<p>Basically, I create a <code>VoiceChangerFunction</code> function (object) that takes a <code>Voice &amp;</code> as first parameter and returns <code>void</code>.</p>\n\n<p>Later, I <code>bind</code> a function that will take as first parameter the one I'll give to it when I call it, and another parameter that I give when I bind it (<code>100</code>, in my example).</p>\n\n<p>Right? </p>\n\n<p>What I don't understand is: then, this function is passed to <code>UpdateVoices()</code>, which take as input a function/object that has 1 param (<code>Voice &amp;</code>), not 2 as created in my bind function (<code>Voice &amp;</code>, <code>unsigned int</code>).</p>\n\n<p>How can it works?</p>\n\n<p>Its like to have <code>void VoiceChangerFunction(Voice &amp;voice)</code> and call <code>VoiceChangerFunction(Voice &amp;voice, unsigned int value )</code>.</p>\n\n<p>The function prototype is different. I mean: the callback <code>bind</code> I created isn't a <code>VoiceChangerFunctions</code> function, because <strong>it takes more parameters</strong>.</p>\n\n<p>How can it works/match?</p>\n"}, {"tags": ["c++", "qt", "qtablewidget", "qtabwidget"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7568529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff72115dff8daa2032c92ca88cb08625?s=128&d=identicon&r=PG&f=1", "display_name": "lntl", "link": "https://stackoverflow.com/users/7568529/lntl"}, "is_accepted": false, "score": 3, "last_activity_date": 1487176957, "creation_date": 1487176957, "answer_id": 42255224, "question_id": 42255070, "link": "https://stackoverflow.com/questions/42255070/how-can-i-remove-the-padding-of-a-qtabwidget/42255224#42255224", "title": "How can I remove the &quot;padding&quot; of a QTabWidget?", "body": "<p>Try something like this :</p>\n\n<pre><code>tabwidget.setStyleSheet(\"QTabWidget::pane { \n margin: 0px,1px,1px,1px;\n border: 2px solid #020202;\n border-radius: 7px;\n padding: 1px;\n background-color: #E6E6E3;\n}\");\n</code></pre>\n\n<p>Hope this help you</p>\n"}, {"tags": [], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "is_accepted": true, "score": 1, "last_activity_date": 1487177878, "creation_date": 1487177878, "answer_id": 42255608, "question_id": 42255070, "link": "https://stackoverflow.com/questions/42255070/how-can-i-remove-the-padding-of-a-qtabwidget/42255608#42255608", "title": "How can I remove the &quot;padding&quot; of a QTabWidget?", "body": "<p>The problem seems to be related to the \"pane\" margin of the <code>QTabWidget</code>.</p>\n\n<p>I solved the problem by using this on the stylesheet:</p>\n\n<pre><code>QTabWidget::pane {\n    border: 0 solid white;\n    margin: -13px -9px -13px -9px;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1487267071, "post_id": 42259883, "comment_id": 71718775, "body": "Hi @Dmitriy, thanks for the answer. Actually, I added a Vertical Layout to my QTabWidget (using the upper layout menu from the Qt Design) but the Layout options does not appear on my Property Editor."}, {"owner": {"reputation": 703, "user_id": 8787505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zY7CD.jpg?s=128&g=1", "display_name": "1313e", "link": "https://stackoverflow.com/users/8787505/1313e"}, "edited": false, "score": 0, "creation_date": 1569902504, "post_id": 42259883, "comment_id": 102736155, "body": "I am looking for something similar, but in your example, you can still clearly see a 1 pixel margin between the inner frame and the tab widget itself. So, it does not remove it completely?"}], "tags": [], "owner": {"reputation": 356, "user_id": 1737869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7e63ff69952e07204b206d0248ff3e5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/1737869/dmitriy"}, "is_accepted": false, "score": 0, "last_activity_date": 1487192190, "creation_date": 1487192190, "answer_id": 42259883, "question_id": 42255070, "link": "https://stackoverflow.com/questions/42255070/how-can-i-remove-the-padding-of-a-qtabwidget/42259883#42259883", "title": "How can I remove the &quot;padding&quot; of a QTabWidget?", "body": "<p>When you put <code>QTableWidget</code> to <code>QTabWidget</code> tab, you can right click on it (<code>QTabWidget</code>) and select <code>Lay out -&gt; Lay out vertically</code> (for example, or horizontally), this will add an verticalLayout element and place your <code>QTableWidget</code> into it, filling the whole tab. Then, select newly created verticalLayout, scroll down to <code>Layout</code> section, and from here you can control <code>layoutLeftMargin</code>, <code>layoutTopMargin</code>, <code>layoutRightMargin</code> and <code>layoutBottomMargin</code> properties:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Bb3VT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bb3VT.png\" alt=\"Qt Creator, UI Editor, Layout Margins\"></a></p>\n\n<p>Setting all of them to 0, will give you desired result (no stylesheets involved):</p>\n\n<p><a href=\"https://i.stack.imgur.com/k45hZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k45hZ.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2818, "favorite_count": 0, "accepted_answer_id": 42255608, "answer_count": 3, "score": 5, "last_activity_date": 1487192190, "creation_date": 1487176521, "question_id": 42255070, "link": "https://stackoverflow.com/questions/42255070/how-can-i-remove-the-padding-of-a-qtabwidget", "title": "How can I remove the &quot;padding&quot; of a QTabWidget?", "body": "<p>I have a <code>QTabWidget</code> with a <code>QTableWidget</code> inside, as the example below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/P4bj3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/P4bj3.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it has a \"padding\" (at least I think it is a padding) in the <code>QTabWidget</code> (marked as red in the figure). </p>\n\n<p><strong>How can I remove that or expand the QTableWidget to fill the QTabWidget area?</strong></p>\n\n<p>I am using Qt 5.3.</p>\n"}, {"tags": ["c++", "pointers", "stl"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 4, "creation_date": 1487176063, "post_id": 42254840, "comment_id": 71667506, "body": "How is a weak pointer different from whatever this &quot;NonOwningSmart_pointer&quot; is?"}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487176190, "post_id": 42254840, "comment_id": 71667601, "body": "A std::weak_ptr is always associated with std::shared_ptr, as I understand. But there&#39;s std::unique_ptr and also raw."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1487176318, "post_id": 42254840, "comment_id": 71667684, "body": "Why do you need non-owning smart pointer in the first place? What is the benefit over plain pointer?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1487176366, "post_id": 42254840, "comment_id": 71667714, "body": "Well if you follow the cpp core guidelines then a raw pointer is always a non owning pointer.  Only <code>owner</code> or smart pointers are considered owners.  This kind of makes life easy if you use this method as you just assume all raw pointers are not yours to manage.  Personally I like this approach."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1487176381, "post_id": 42254840, "comment_id": 71667729, "body": "<code>referring_ptr</code> or just use <code>std::reference_wrapper_t</code>"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487176474, "post_id": 42254840, "comment_id": 71667772, "body": "Well then, it sounds to me like a &quot;plain pointer&quot; is what this mythical kind of a pointer is. It doesn&#39;t own the object."}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1487176616, "post_id": 42254840, "comment_id": 71667870, "body": "@PiotrNycz - referring_ptr is nice, but it would be nice to have a null state which as I understand std::reference_wrapper_t is without."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1487176784, "post_id": 42254840, "comment_id": 71668010, "body": "How is your smart pointer different from a raw pointer? What smart features does it support?"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1487176828, "post_id": 42254840, "comment_id": 71668037, "body": "the simplest is <code>template &lt;typename T&gt; using referring_ptr = T*;</code> - but just consider if this is better than raw <code>T*</code>?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487176832, "post_id": 42254840, "comment_id": 71668040, "body": "It depends on what your non-owning smart pointer does. For example, it can be a <code>Non_null_pointer</code>, if that&#39;s what it does. Or it can a <code>Non_owning_shared</code> for a subclass of <code>shared_ptr</code> that uses a no-op deleter. Whatever. Make sure your name is meaningful, or else, if there is no meaningful name at all, the concept is probably not meaningful either."}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1487176982, "post_id": 42254840, "comment_id": 71668156, "body": "@anatolyg - Well, as the discussions goes raw pointer is what&#39;s wrapped in all types of pointers."}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1487177043, "post_id": 42254840, "comment_id": 71668206, "body": "@anatolyg - This NonOwningSmart_pointer provides only cloning from shared_ptr and unique_ptr without any side effects, and does nothing on destruction."}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "edited": false, "score": 0, "creation_date": 1487177959, "post_id": 42254840, "comment_id": 71668920, "body": "@&quot;Cheers and hth. - Alf&quot; - Actually it should be something like &quot;Non-owning out of some type of smart that will guarantee to keep pointed-to object alive while I&#39;m working on it, and I promise to not store it somewhere bad&quot;. Common use-case is as input to function."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1487181270, "post_id": 42254840, "comment_id": 71671177, "body": "Might be of interest/revance &quot;Herb Sutter - Distinguishing between maybe-null vs never-null is the important thing&quot; <a href=\"https://herbsutter.com/2017/02/15/distinguishing-between-maybe-null-vs-never-null-is-the-important-thing/\" rel=\"nofollow noreferrer\">herbsutter.com/2017/02/15/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "edited": false, "score": 0, "creation_date": 1487176817, "post_id": 42255050, "comment_id": 71668030, "body": "Owners and observers, and this middleground weak.  Yes I think I like it, best so far."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 3, "creation_date": 1487176932, "post_id": 42255050, "comment_id": 71668116, "body": "&quot;N4282: A Proposal for the World\u2019s Dumbest Smart Pointer, v4&quot; - the title made my day ;)"}], "tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": true, "score": 5, "last_activity_date": 1487176482, "creation_date": 1487176482, "answer_id": 42255050, "question_id": 42254840, "link": "https://stackoverflow.com/questions/42254840/practical-code-friendly-name-for-non-owning-smart-pointer/42255050#42255050", "title": "Practical code-friendly name for non-owning smart-pointer", "body": "<p>There was even a proposal for something like this:\n<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4282.pdf\" rel=\"noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4282.pdf</a></p>\n\n<p>There it was named 'observer_ptr'.<br>\nThe proposal was rejected, but the same idea was discussed (with a somewhat more positive feedback) on the Boost mailing list just recently.</p>\n"}, {"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1487180155, "post_id": 42256187, "comment_id": 71670460, "body": "The advantage is that you see the pointer and immediately know that it&#39;s non-owning. If it&#39;s just <code>T*</code>, then you have to inspect the code or the documentation to find out."}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "edited": false, "score": 0, "creation_date": 1487180801, "post_id": 42256187, "comment_id": 71670870, "body": "Also not all raw-pointers are about object lifetime and ownership. I always use some type to clear what kind of role a pointer is in."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1487180879, "post_id": 42256187, "comment_id": 71670924, "body": "@ChristianHackl:  Not if you follow the core guidelines.  If you see a <code>T*</code>, then you do know it&#39;s a non-owning pointer."}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "edited": false, "score": 0, "creation_date": 1487181013, "post_id": 42256187, "comment_id": 71671008, "body": "But a raw pointer might point to a substring or a device control register etc, not within object lifetime management at all. And most legacy code is not clear about raw pointers."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1487181868, "post_id": 42256187, "comment_id": 71671535, "body": "@AdrianMcCarthy: You may be working in a huge project with many different developers, inconsistent coding styles and a mix of new code and legacy code."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "edited": false, "score": 0, "creation_date": 1487182341, "post_id": 42256187, "comment_id": 71671824, "body": "@Jojje:  Given that the question is about introducing a non-owning smart pointer, I assumed it was early enough in the project that you were considering how to consistently mark non-owning pointers.  If you have legacy code that cannot be made consistent with whichever solution you choose, then I&#39;m not sure what&#39;s to be gained by introducing a non-owning smart pointer in only limited context."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1487182401, "post_id": 42256187, "comment_id": 71671865, "body": "As for substrings, you probably want to use a range, StringPiece, string_view, array_view or other abstraction that captures more than just the pointer."}, {"owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "edited": false, "score": 1, "creation_date": 1487193527, "post_id": 42256187, "comment_id": 71678146, "body": "@&quot;Adrian McCarthy&quot;: Legacy code with lots of raw-pointers is a reality, I&#39;m afraid,  and I don&#39;t follow why this is an obstacle to design new and modified code in a presumed better way ?"}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 2, "last_activity_date": 1487179446, "creation_date": 1487179446, "answer_id": 42256187, "question_id": 42254840, "link": "https://stackoverflow.com/questions/42254840/practical-code-friendly-name-for-non-owning-smart-pointer/42256187#42256187", "title": "Practical code-friendly name for non-owning smart-pointer", "body": "<p>The C++ Core Guidelines seem to suggest using raw pointers for non-owning pointers.  I guess, technically, they say to use smart pointers to indicate ownership and to assume raw pointers are non-owning.  I guess that doesn't rule out using a smart pointer for a non-owning pointer, but I don't see what advantage that would provide. </p>\n"}], "owner": {"reputation": 372, "user_id": 1230343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4mrnW.jpg?s=128&g=1", "display_name": "Jojje", "link": "https://stackoverflow.com/users/1230343/jojje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "closed_date": 1487183232, "accepted_answer_id": 42255050, "answer_count": 2, "score": 1, "last_activity_date": 1487330497, "creation_date": 1487175969, "last_edit_date": 1487330497, "question_id": 42254840, "link": "https://stackoverflow.com/questions/42254840/practical-code-friendly-name-for-non-owning-smart-pointer", "closed_reason": "Needs details or clarity", "title": "Practical code-friendly name for non-owning smart-pointer", "body": "<p>We are since C++11 blessed with a rather complete set of smart-pointer types: </p>\n\n<ul>\n<li>std::shared_ptr</li>\n<li>std::weak_ptr</li>\n<li>std::unique_ptr</li>\n<li>std::auto_ptr (deprecated)</li>\n</ul>\n\n<p>But missing is a smart-pointer without ownership, integrated whith the above. </p>\n\n<p>This seems to lead developer discussions into a somewhat loose classification that commonly has phrases like 'that is a non-owning smart-pointer'. But this is not a good name that I want to use in naming a pointer-wrapper template in my code. </p>\n\n<p>Is there any suggestions for a better code-friendly name for a non-owning smart-pointer? </p>\n\n<pre><code>template&lt;typename T&gt;\nstruct NonOwningSmart_pointer;\n</code></pre>\n\n<p>There is std::weak_ptr which does not really fill the requirements as it requires shared_ptr.</p>\n\n<p>Update: the main benefit of naming this type of smart-pointer uniquely is code clarity, construction to nullptr and playing well with the other std pointer types.</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-debugging", "visual-studio-2015"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487176174, "post_id": 42254828, "comment_id": 71667591, "body": "What&#39;s going on is a bug in your code, somewhere. The results of a common, garden-variety bug is &quot;undefined behavior&quot;, of which your observable results certainly qualify. You&#39;ll just have to figure out what your bug is. There is no paint-by-numbers recipe for figuring out and tracking down the bug, unfortunately. If there were, I&#39;d be out of a job..."}, {"owner": {"reputation": 224, "user_id": 507662, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4261ca820fe2cfbac8865f48b4dc6ee?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/507662/michael"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487176610, "post_id": 42254828, "comment_id": 71667865, "body": "Thank you for your response, Sam. I do understand that this is a bug. I&#39;ve been working professionally in C++ for about three years, and have yet to see an issue where the return stack gets corrupted like this. I was hoping for a hint from someone with more experience than myself, rather than &quot;your problem is that you have a problem.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 224, "user_id": 507662, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4261ca820fe2cfbac8865f48b4dc6ee?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/507662/michael"}, "edited": false, "score": 0, "creation_date": 1487182307, "post_id": 42256400, "comment_id": 71671800, "body": "Thanks for your response, Adrian. I had the same thought, that this could be cause by buffer overrun. So I tested this hypothesis. To do this, I replaced my void* parameters with uint8_t (&amp;Buffer)[PACKET_SIZE], where PACKET_SIZE is a defined constant. This forced my code to always pass buffers of a particular size. This didn&#39;t seem to change anything, unfortunately. I looked at the points where I copy and set memory, and they look good to me. Are there any other reasons you think I could be seeing this?"}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 1, "last_activity_date": 1487180133, "creation_date": 1487180133, "answer_id": 42256400, "question_id": 42254828, "link": "https://stackoverflow.com/questions/42254828/returning-from-function-changes-context-to-null/42256400#42256400", "title": "Returning from Function changes context to NULL", "body": "<p>A buffer overrun can trash the return address on the stack.  You seem to be reading and writing packets with void pointers and without passing around explicit sizes, so a simple overrun bug seems quite likely.  The Visual Studio compiler has options to add stack integrity checks to detect these kinds of bugs, but they're not 100% perfect.  Nonetheless, make sure you have them switched on.</p>\n\n<p>Also note that the Visual Studio debugger can occasionally (but rarely) show the wrong value for <code>this</code>, especially if you're trying to debug optimized code.  If you're at the <code>}</code> at the end of a method, I wouldn't necessarily worry about the debugger showing a bizarre value for <code>this</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5606, "user_id": 6601554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d8e70907365c8fce9135ffe1e5868f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Zhai-MSFT", "link": "https://stackoverflow.com/users/6601554/jack-zhai-msft"}, "edited": false, "score": 0, "creation_date": 1487310780, "post_id": 42259547, "comment_id": 71736691, "body": "thanks for sharing your solution here. If possible, please also mark your reply as the answer, so it could help other community members. Have a nice day:)"}], "tags": [], "owner": {"reputation": 224, "user_id": 507662, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4261ca820fe2cfbac8865f48b4dc6ee?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/507662/michael"}, "is_accepted": true, "score": 0, "last_activity_date": 1487191035, "creation_date": 1487191035, "answer_id": 42259547, "question_id": 42254828, "link": "https://stackoverflow.com/questions/42254828/returning-from-function-changes-context-to-null/42259547#42259547", "title": "Returning from Function changes context to NULL", "body": "<p>After further dissection, I found that I was reading before calling write, and the buffer that I was reading into was declared in local scope (in the read function).</p>\n\n<p>When new reads came in, they were being pushed into the stack, corrupting it. The next function I called, write, would return to a destroyed stack.</p>\n"}], "owner": {"reputation": 224, "user_id": 507662, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d4261ca820fe2cfbac8865f48b4dc6ee?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/507662/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 42259547, "answer_count": 2, "score": 1, "last_activity_date": 1487191035, "creation_date": 1487175940, "last_edit_date": 1487190984, "question_id": 42254828, "link": "https://stackoverflow.com/questions/42254828/returning-from-function-changes-context-to-null", "title": "Returning from Function changes context to NULL", "body": "<p>I have three classes relevant to this issue. I'm implementing a hardware service for an application. PAPI (Platform API) is a hardware service class that keeps track of various hardware interfaces. I have implemented an abstract HardwareInterface class, and a class that derives it called HardwareWinUSB.</p>\n\n<p>Below are examples similar to what I've done. I've left out members that don't appear to be relevant to this issue, like functions to open the USB connection:</p>\n\n<pre><code>class PAPI {\n    HardwareInterface *m_pHardware;\n\n    PAPI() {\n        m_pHardware = new HardwareWinUSB();\n    }\n\n    ~PAPI() {\n        delete m_pHardware;\n    }\n\n    ERROR_CODE WritePacket(void* WriteBuf)\n    {\n        return m_pHardware-&gt;write( WriteBuf);\n    }\n};\n\nclass HardwareInterface {\n    virtual ERROR_CODE write( void* WriteBuf) = 0;\n};\n\nclass HardwareWinUSB : public HardwareInterface\n{\n    ERROR_CODE write( void* Params)\n    {\n        // Some USB writing code.\n        // This had worked just fine before attempting to refactor\n        // Into this more sustainable hardware management scheme\n    {\n};\n</code></pre>\n\n<p>I've been wrestling with this for several hours now. It's a strange, reproducible issue, but is sometimes intermittent. If I step through the debugger at a higher context, things execute well. If I don't dig deep enough, I'm met with an error that reads </p>\n\n<pre><code>Exception thrown at 0x00000000 in &lt;ProjectName.exe&gt;: 0xC0000005: Access violation executing location 0x00000000\n</code></pre>\n\n<p>If I dig down into the PAPI code, I see bizarre behavior.\nWhen I set a breakpoint in the body of WritePacket, everything appears normal. Then I do a \"step over\" in the debugger. After the return from the function call, my reference to 'this' is set to 0x00000000.</p>\n\n<p>What is going on? It looks like a null value was pushed on the return stack? Has anyone seen something like this happen before? Am I using virtual methods incorrectly?</p>\n\n<p><strong>edit</strong>\nAfter further dissection, I found that I was reading before calling write, and the buffer that I was reading into was declared in local scope. When new reads came in, they were being pushed into the stack, corrupting it. The next function called, write, would return to a destroyed stack.</p>\n"}, {"tags": ["c++", "parsing", "fstream"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1487175715, "post_id": 42254691, "comment_id": 71667219, "body": "You didn&#39;t give us a sample of the file <code>raw_questions.txt</code>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1487182275, "post_id": 42254691, "comment_id": 71671776, "body": "Personally if the file was a reasonable size (less than 100Mb say) I would read it into a <code>std::list&lt;std::string&gt;</code> where each string is a line.  Operate on it in memory until I was satisfied and then output it. Insert-line is add a new list node; delete-line is remove list node; edit-line is modify the string."}, {"owner": {"reputation": 211, "user_id": 4545336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-42ycKfdEF4Q/AAAAAAAAAAI/AAAAAAAAAPs/PQXOtSghCm0/photo.jpg?sz=128", "display_name": "Joseph Morgan", "link": "https://stackoverflow.com/users/4545336/joseph-morgan"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1487230418, "post_id": 42254691, "comment_id": 71691525, "body": "@WhiZTiM, I didn&#39;t include the sample in my post because I was concerned that it was getting a little on the long side. There should be a file called questions_source.txt in the github repo. I can paste it here if that would be better."}, {"owner": {"reputation": 211, "user_id": 4545336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-42ycKfdEF4Q/AAAAAAAAAAI/AAAAAAAAAPs/PQXOtSghCm0/photo.jpg?sz=128", "display_name": "Joseph Morgan", "link": "https://stackoverflow.com/users/4545336/joseph-morgan"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1487230539, "post_id": 42254691, "comment_id": 71691619, "body": "@Richard Critten, I didn&#39;t even think of using a list but that sounds like exactly what I need. I&#39;m only just becoming familiar with the standard library. Thanks for your reply, if you put it in an actual reply I&#39;ll mark as solved."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1487179566, "creation_date": 1487179566, "answer_id": 42256230, "question_id": 42254691, "link": "https://stackoverflow.com/questions/42254691/ifstream-and-ofstream-how-do-i-perform-multiple-modifications-to-a-file/42256230#42256230", "title": "ifstream and ofstream: How do I perform multiple modifications to a file?", "body": "<p>Streams do not magically read the entire file into memory. If that is what you want to do, you should just do that: my guess is that your file is considerably smaller than your available memory, and it might be easier to perform all the operations in place using standard C++ containers.</p>\n"}], "owner": {"reputation": 211, "user_id": 4545336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-42ycKfdEF4Q/AAAAAAAAAAI/AAAAAAAAAPs/PQXOtSghCm0/photo.jpg?sz=128", "display_name": "Joseph Morgan", "link": "https://stackoverflow.com/users/4545336/joseph-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487179566, "creation_date": 1487175546, "question_id": 42254691, "link": "https://stackoverflow.com/questions/42254691/ifstream-and-ofstream-how-do-i-perform-multiple-modifications-to-a-file", "title": "ifstream and ofstream: How do I perform multiple modifications to a file?", "body": "<p>I've been googling this question for a few hours and can't seem to find anything that addresses it.</p>\n\n<p>I'm reeaaaally hazy on file operations in C++, but I've spent about 20 of the last 36 hours reading documentation and forum questions trying to get a project for a friend together.</p>\n\n<p>Say I've got a file called raw_questions.txt, and I'd like to make some changes to it. This file is a study guide for an exam, and has a question followed by 4 multiple-choice answers. I want to remove blank lines and add some tokens to allow another program I'm working on to parse it. I've written a formatter program to perform those operations. The operations are: </p>\n\n<ol>\n<li>Remove blank lines from source file as it appears it's double-spaced</li>\n<li>Add a delimiter character ('@') to the end of each question and\nanswer.</li>\n<li>Using the delimiter, read each question and answer in as a string\nand append it to an output file with a token at the beginning of\nquestion or answer, which will let my other program know whether a\nline contains a question or answer.</li>\n</ol>\n\n<p>My question: I'm stuck at how to move from one operation to the next. My current approach is to read each line into a string, perform the operation on the string, and to add the new string to an output file. Using this approach, to perform the next operation I have to open the previous operation's output file as my new input file, and make a new output file for that operation. I feel like there's got to be a better way, but like I said, I'm pretty hazy on file operations in C++. What should I be doing in this situation?</p>\n\n<p>I've considered creating an ifstream and ofstream that both point to the same file, and hoping that when the ifstream file is opened, it will store a temporary copy in memory. Then, after I read line by line and write to my ofstream object, when it closes it will overwrite my old file. I don't know if that makes any sense, and I don't think that's even how fstream works.</p>\n\n<p>The code that I have so far:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"Debug.h\"\n\nDebug debugger;\n\nvoid remove_empty_lines (std::ifstream&amp; input, std::ofstream&amp; output);\nvoid insert_delimiter (std::ifstream&amp; input, std::ofstream&amp; output, char delimiter);\nvoid create_output (std::ifstream&amp; input, std::ofstream&amp; output);\n\nint main() {\n    debugger.set_active();\n\n    char delimiter = '@';\n\n    std::ifstream input;\n    std::ofstream output;\n    input.open(\"questions_source.txt\");\n    output.open(\"questions_intermidiate.txt\");\n\n    remove_empty_lines (input, output);\n\n}\n\nvoid remove_empty_lines (std::ifstream&amp; input, std::ofstream&amp; output) {\n    while (!input.eof()) {\n        std::string line;\n\n        std::getline(input, line);\n        if (line != \"\") {\n            output &lt;&lt; line &lt;&lt; std::endl;\n        }\n    }\n}\n\nvoid insert_delimiter(std::ifstream&amp; input, std::ofstream&amp; output) {\n}\n\n// This function doesn't quite work, WIP - Please ignore\nvoid create_output(std::ifstream&amp; input, std::ofstream&amp; output) {\n    std::string line;\n\n    for (int i = 1; !input.eof(); i++) {\n        debugger.out(\"Inserting tokens.\");\n        bool found = false;\n        while (!found) {\n            getline (input, line);\n            if (i &lt; 10) {\n                if (line[1] == ')') {\n                    line.erase (0, 3);\n                    output &lt;&lt; \"[\" &lt;&lt; i &lt;&lt; \"]\" &lt;&lt; line &lt;&lt; std::endl;\n                    debugger.out(\"Found line: \" + line);\n                    found = true;\n                }\n            } else if (i &lt; 100) {\n                if (line[2] == ')') {\n                    line.erase (0, 4);\n                    output &lt;&lt; \"[\" &lt;&lt; i &lt;&lt; \"]\" &lt;&lt; line &lt;&lt; std::endl;\n                    debugger.out(\"Found line: \" + line);\n                    found = true;\n                }\n            }\n        }\n\n        for (int j = 0; j &lt; 4; j++) {\n            getline (input, line);\n            if (line[1] == ')') {\n                line.erase (0, 3);\n                output &lt;&lt; \"[\" &lt;&lt; i &lt;&lt; \"a]\" &lt;&lt; line &lt;&lt; std::endl;\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>I'm also trying to teach myself git at the moment, so I happen to have the project I'm working on hosted on github <a href=\"https://github.com/josephemorgan91/shelley_quiz\" rel=\"nofollow noreferrer\">here</a>. I don't know if the context will make what I'm trying to do make sense, but I'm posting it just in case.</p>\n\n<p>Bonus question: I've been racking my brain, but I haven't come up with a solution to adding the delimiter. Answers seem to be one line long, so I can probably just add the delimiter to the end of any line starting with \"A)\" etc., but some of the questions are much longer. My thought is to find any occurrence of \"A)\" and add the delimiter to the end of the line above it, but I can't think of how to do that. Can anyone point me in the right directions for member functions of fstream that might help?</p>\n\n<p>Thanks for reading.</p>\n"}, {"tags": ["c++", "qt", "error-handling", "xml-validation", "qtxml"], "comments": [{"owner": {"reputation": 1189, "user_id": 6887528, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29783d4ad32259755cba45af1fd8394f?s=128&d=identicon&r=PG&f=1", "display_name": "Oli", "link": "https://stackoverflow.com/users/6887528/oli"}, "edited": false, "score": 0, "creation_date": 1487175396, "post_id": 42254592, "comment_id": 71666978, "body": "Post your code."}, {"owner": {"reputation": 1189, "user_id": 6887528, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29783d4ad32259755cba45af1fd8394f?s=128&d=identicon&r=PG&f=1", "display_name": "Oli", "link": "https://stackoverflow.com/users/6887528/oli"}, "edited": false, "score": 0, "creation_date": 1487255381, "post_id": 42254592, "comment_id": 71709681, "body": "I think you have to write a custom validator to catch all errors. I can post one example which I used in the university project. So you can modify according to your needs."}], "answers": [{"tags": [], "owner": {"reputation": 1189, "user_id": 6887528, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29783d4ad32259755cba45af1fd8394f?s=128&d=identicon&r=PG&f=1", "display_name": "Oli", "link": "https://stackoverflow.com/users/6887528/oli"}, "is_accepted": false, "score": 0, "last_activity_date": 1487255878, "creation_date": 1487255878, "answer_id": 42276982, "question_id": 42254592, "link": "https://stackoverflow.com/questions/42254592/qt-xml-validation-errorhandling/42276982#42276982", "title": "Qt XML validation Errorhandling", "body": "<p>I think you need to write a custom validator to catch all errors. You can modify this example code to catch all errors.</p>\n\n<pre><code>struct NodeProperties\n{\n    NodeProperties()\n    {\n         values.resize(names.size());\n    }\n    std::vector&lt;int&gt; values;\n\n    static QStringList names;\n    static QString rootName;\n    static QString childName;\n};\n\nQString NodeProperties::rootName = \"static_route\";\nQString NodeProperties::childName = \"molenet\";\nQStringList NodeProperties::names = QList&lt;QString&gt;() &lt;&lt; \"node_id\"\n                                                      &lt;&lt; \"nextHop_id\"\n                                                      &lt;&lt; \"sink_id\"\n                                                      &lt;&lt; \"delay_before_send\"\n                                                      &lt;&lt; \"delay_before_sleep\";\n\nQList&lt;NodeProperties&gt; nodesProperties;\n\nbool parseXMLFile()\n{\n    QXmlStreamReader xmlStreamReader;\n\n    QString xmlFile;\n    xmlFile = QFileDialog::getOpenFileName(this,\n        tr(\"Open XML file\"), QDir::currentPath(), tr(\"XML (*.xml)\"));\n\n    if(xmlFile.isEmpty())\n        return false;\n\n    QFile file(xmlFile);\n    if (!file.open(QFile::ReadOnly | QFile::Text))\n    {\n        QMessageBox::warning(this,tr(\"Error: Cannot read file ...\"),\n                                  (xmlFile+\"  \" + file.errorString() ));\n        return false;\n    }\n\n    nodesProperties.clear();\n\n    xmlStreamReader.setDevice(&amp;file);\n    xmlStreamReader.readNext();\n\n    while(!xmlStreamReader.atEnd())\n    {\n        if(xmlStreamReader.isStartElement())\n        {\n            if(xmlStreamReader.name() == NodeProperties::rootName)\n                xmlStreamReader.readNext();\n\n            if(xmlStreamReader.name() == NodeProperties::childName)\n            {\n                xmlStreamReader.readNext();\n\n                if(xmlStreamReader.isCharacters() )\n                    xmlStreamReader.readNext();\n\n                if(xmlStreamReader.isStartElement())\n                {\n                    NodeProperties prop;\n                    for(int i = 0; i &lt; NodeProperties::names.size(); ++i)\n                    {\n                        if(xmlStreamReader.isCharacters() )\n                        {\n                            xmlStreamReader.readNext();\n                            --i;\n                            continue;\n                        }\n                        if(xmlStreamReader.name() == NodeProperties::names[i])\n                        {\n                            prop.values[i] = xmlStreamReader.readElementText().toInt();\n                        }\n                        xmlStreamReader.readNext();\n                    }\n                    nodesProperties.push_back(prop);\n                }\n            }\n        }\n        xmlStreamReader.readNext();\n    }\n\n    file.close();\n\n    if (xmlStreamReader.hasError())\n    {\n        QMessageBox::warning(this,tr(\"Error: Failed to parse file \"),\n                                  (xmlFile+\"  \" + xmlStreamReader.errorString() ));\n        nodesProperties.pop_back();\n    }\n    else if (file.error() != QFile::NoError)\n    {\n        qDebug() &lt;&lt; \"Error: Cannot read file \" &lt;&lt; qPrintable(xmlFile)\n                  &lt;&lt; \": \" &lt;&lt; qPrintable(file.errorString());\n    }\n\n    //createGraphVizFile(xmlFile);\n    this-&gt;xmlFile = xmlFile;\n    return true;\n}\n</code></pre>\n\n<p>The XML file is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;static_route&gt;\n    &lt;molenet&gt;\n            &lt;node_id&gt; 1 &lt;/node_id&gt;\n            &lt;nextHop_id&gt; 2 &lt;/nextHop_id&gt;\n            &lt;sink_id&gt; 254 &lt;/sink_id&gt;\n            &lt;delay_before_send&gt; 2 &lt;/delay_before_send&gt;\n            &lt;delay_before_sleep&gt; 30 &lt;/delay_before_sleep&gt;\n    &lt;/molenet&gt;\n\n    &lt;molenet&gt;\n            &lt;node_id&gt; 2 &lt;/node_id&gt;\n            &lt;nextHop_id&gt; 3 &lt;/nextHop_id&gt;\n            &lt;sink_id&gt; 254 &lt;/sink_id&gt;\n            &lt;delay_before_send&gt; 4 &lt;/delay_before_send&gt;\n            &lt;delay_before_sleep&gt; 30 &lt;/delay_before_sleep&gt;\n    &lt;/molenet&gt;\n&lt;/static_route&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6488397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377598959a22c7b273029fb3bb988383?s=128&d=identicon&r=PG&f=1", "display_name": "S.D", "link": "https://stackoverflow.com/users/6488397/s-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532703221, "creation_date": 1487175281, "last_edit_date": 1532703221, "question_id": 42254592, "link": "https://stackoverflow.com/questions/42254592/qt-xml-validation-errorhandling", "title": "Qt XML validation Errorhandling", "body": "<p>I'm trying to find a solution that in case that a validation is not successful because there is more then one error in the XML file the Qt MessageHandler(line, column, description etc. ) is able to show every error in the XML data not just the first one that occurs in the XML file.</p>\n\n<p>Example: \nI have an error in line: 65 (see pic) </p>\n\n<p><img src=\"https://i.stack.imgur.com/BmsOF.png\" alt=\"this is my error\"></p>\n\n<p>but there are also errors in line :78,83,95 but it dose not show it only shows the first one.</p>\n\n<p>Is there a solution for this case? And if yes how?</p>\n\n<p>My Code looks like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>  MessageHandler messageHandler;\n  QFile xsdfile(\"....xsd\");\n  xsdfile.open(QIODevice::ReadOnly);\n  QXmlSchema schema;\n  schema.setMessageHandler(&amp;messageHandler);\n  bool errorOccurred = false;\n  if (schema.load(&amp;xsdfile, QUrl::fromLocalFile(xsdfile.fileName())) == false)\n     errorOccurred = true;\n  else\n  {\n    QXmlSchemaValidator xmlvalidator(schema);\n\n    QFile xmlfile(\"......xml\");\n    xmlfile.open(QIODevice::ReadOnly);\n\n    if (!xmlvalidator.validate(&amp;xmlfile, QUrl::fromLocalFile(xmlfile.fileName())))\n      errorOccurred = true;\n\n    xmlfile.close();\n  }\n  xsdfile.close();\n  if (errorOccurred) {\n    QString qs = messageHandler.statusMessage();\n    cout &lt;&lt; \"Line: \" &lt;&lt; messageHandler.line() &lt;&lt; \"\\n\" &lt;&lt; \"Row: \" &lt;&lt; messageHandler.column() &lt;&lt; \"\\n\" &lt;&lt; \"ErrorMessage: \";\n    std::cout &lt;&lt; qs.toUtf8().constData() &lt;&lt; std::endl;\n    return -1;\n  }\n  else {\n\n    return 0;\n  }\n</code></pre>\n\n<p>And my MessageHandler class looks like this:</p>\n\n<pre><code>class MessageHandler : public QAbstractMessageHandler\n{\npublic:\n  MessageHandler()\n    : QAbstractMessageHandler(0)\n  {\n  }\n\n  QString statusMessage() const\n  {\n    return m_description;\n  }\n\n  int line() const\n  {\n    return m_sourceLocation.line();\n  }\n\n  int column() const\n  {\n    return m_sourceLocation.column();\n  }\n\nprotected:\n  virtual void handleMessage(QtMsgType type, const QString &amp;description,\n    const QUrl &amp;identifier, const QSourceLocation &amp;sourceLocation)\n  {\n    Q_UNUSED(type);\n    Q_UNUSED(identifier);\n\n    m_description = description;\n    m_sourceLocation = sourceLocation;\n  }\n\nprivate:\n  QString m_description;\n  QSourceLocation m_sourceLocation;\n};\n</code></pre>\n\n<p>Thanks :)</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": false, "score": 0, "last_activity_date": 1487175380, "last_edit_date": 1495535386, "creation_date": 1487175380, "answer_id": 42254631, "question_id": 42254538, "link": "https://stackoverflow.com/questions/42254538/ctrlleft-mouse-click-event-capture-qt/42254631#42254631", "title": "Ctrl+Left mouse click event capture Qt", "body": "<p>Check out this Stackoverflow.com question. I think it is exactly the issue you are having.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3100090/how-to-detect-the-modifier-key-on-mouse-click-in-qt\">How to detect the modifier key on mouse click in Qt</a></p>\n"}, {"comments": [{"owner": {"reputation": 1189, "user_id": 6887528, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29783d4ad32259755cba45af1fd8394f?s=128&d=identicon&r=PG&f=1", "display_name": "Oli", "link": "https://stackoverflow.com/users/6887528/oli"}, "edited": false, "score": 0, "creation_date": 1487177943, "post_id": 42255579, "comment_id": 71668903, "body": "Actually I wanted to avoid this, but it could be done this way. Thanks."}], "tags": [], "owner": {"reputation": 390, "user_id": 7463775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b9008a922abba541591d89015423f8?s=128&d=identicon&r=PG&f=1", "display_name": "JoshThunar", "link": "https://stackoverflow.com/users/7463775/joshthunar"}, "is_accepted": true, "score": 2, "last_activity_date": 1523887611, "last_edit_date": 1523887611, "creation_date": 1487177808, "answer_id": 42255579, "question_id": 42254538, "link": "https://stackoverflow.com/questions/42254538/ctrlleft-mouse-click-event-capture-qt/42255579#42255579", "title": "Ctrl+Left mouse click event capture Qt", "body": "<p>You can try to use an additional variable, like:</p>\n\n<pre><code>private:\n    bool ctrlIsPressed = false;\n\nprotected:\n    void keyPressEvent(QKeyEvent *event) \n    { \n        if( event-&gt;key() == Qt::Key_Control ) \n           ctrlIsPressed = true; \n    }\n    void keyReleaseEvent(QKeyEvent *event)\n    { \n        if( event-&gt;key() == Qt::Key_Control ) \n           ctrlIsPressed = false; \n    }\n\n    void mousePressEvent()\n    {\n        if( ctrlIsPressed )\n            // ... Your code\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2201, "user_id": 382784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef9aa6aad6b3a0251d6872bc4c5bdae?s=128&d=identicon&r=PG", "display_name": "wedesoft", "link": "https://stackoverflow.com/users/382784/wedesoft"}, "is_accepted": false, "score": 1, "last_activity_date": 1547551506, "creation_date": 1547551506, "answer_id": 54197905, "question_id": 42254538, "link": "https://stackoverflow.com/questions/42254538/ctrlleft-mouse-click-event-capture-qt/54197905#54197905", "title": "Ctrl+Left mouse click event capture Qt", "body": "<p>You can call <a href=\"http://doc.qt.io/qt-5/qinputevent.html#modifiers\" rel=\"nofollow noreferrer\">QMouseEvent::modifiers()</a> to check whether it returns the value <a href=\"http://doc.qt.io/qt-5/qt.html#KeyboardModifier-enum\" rel=\"nofollow noreferrer\">Qt::ControlModifier</a>.</p>\n"}], "owner": {"reputation": 1189, "user_id": 6887528, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/29783d4ad32259755cba45af1fd8394f?s=128&d=identicon&r=PG&f=1", "display_name": "Oli", "link": "https://stackoverflow.com/users/6887528/oli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1809, "favorite_count": 0, "accepted_answer_id": 42255579, "answer_count": 3, "score": 0, "last_activity_date": 1587985174, "creation_date": 1487175140, "question_id": 42254538, "link": "https://stackoverflow.com/questions/42254538/ctrlleft-mouse-click-event-capture-qt", "title": "Ctrl+Left mouse click event capture Qt", "body": "<p>How can one get <code>Ctrl+Left mouse click</code> event in Qt widget. I am able to get key event from <code>QObject::keyPressEvent()</code> and mouse click from <code>QObject::mousePressEvent()</code>. But I need to capture both in the same function. Can someone give some pointer to right direction. Thanks.</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1487175322, "post_id": 42254517, "comment_id": 71666907, "body": "Show your actual <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please. Include regex usage. And lookup &quot;capturing groups&quot;."}, {"owner": {"reputation": 998, "user_id": 2374540, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/2oFyF.jpg?s=128&g=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/2374540/kob"}, "edited": false, "score": 0, "creation_date": 1487175627, "post_id": 42254517, "comment_id": 71667151, "body": "I cannot edit just 1 character, but i guess the  19934 is a typo."}, {"owner": {"reputation": 801, "user_id": 74739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBpz9.jpg?s=128&g=1", "display_name": "zenzelezz", "link": "https://stackoverflow.com/users/74739/zenzelezz"}, "edited": false, "score": 0, "creation_date": 1487175684, "post_id": 42254517, "comment_id": 71667198, "body": "On a side note, where is the input coming from? If it&#39;s user-entered, it could be either 1993 or 1994 (or maybe 1934), humans are unpredictable."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1487190687, "post_id": 42254517, "comment_id": 71676576, "body": "It only takes about five lines of code to write a parser that handles this directly. There&#39;s no need for regular expressions here."}, {"owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1487319018, "post_id": 42254517, "comment_id": 71740614, "body": "@PeteBecker I guess you are right, I wanted to know a solution using RegEx though"}, {"owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "reply_to_user": {"reputation": 998, "user_id": 2374540, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/2oFyF.jpg?s=128&g=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/2374540/kob"}, "edited": false, "score": 0, "creation_date": 1487319078, "post_id": 42254517, "comment_id": 71740639, "body": "@KOB actually &quot;19934&quot; was correct because &quot;1994&quot; would&#39;ve been to easy to use RegEx on and users sometimes fail Input and it is not bad to include possibility in your code"}], "answers": [{"comments": [{"owner": {"reputation": 11918, "user_id": 5527985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfG3C.png?s=128&g=1", "display_name": "bobble bubble", "link": "https://stackoverflow.com/users/5527985/bobble-bubble"}, "edited": false, "score": 0, "creation_date": 1487176535, "post_id": 42254661, "comment_id": 71667816, "body": "Why the quantified group in middle? How about just <code>([A-Za-z]{3})[a-z ]+([\\d]{4})</code>"}, {"owner": {"reputation": 659, "user_id": 4763487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0XfXd.jpg?s=128&g=1", "display_name": "Drako", "link": "https://stackoverflow.com/users/4763487/drako"}, "reply_to_user": {"reputation": 11918, "user_id": 5527985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfG3C.png?s=128&g=1", "display_name": "bobble bubble", "link": "https://stackoverflow.com/users/5527985/bobble-bubble"}, "edited": false, "score": 0, "creation_date": 1487240170, "post_id": 42254661, "comment_id": 71698007, "body": "You are right @bobblebubble I might have some idea to make it group yesterday but today I even can not remember my reasoning so its sign - that was bad idea :)"}], "tags": [], "owner": {"reputation": 659, "user_id": 4763487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0XfXd.jpg?s=128&g=1", "display_name": "Drako", "link": "https://stackoverflow.com/users/4763487/drako"}, "is_accepted": false, "score": 2, "last_activity_date": 1487176414, "last_edit_date": 1487176414, "creation_date": 1487175467, "answer_id": 42254661, "question_id": 42254517, "link": "https://stackoverflow.com/questions/42254517/using-regex-to-filter-wrong-input/42254661#42254661", "title": "Using RegEx to filter wrong Input?", "body": "<p>This could work.</p>\n\n<pre><code>([A-Za-z]{3})([a-z ])+([\\d]{4})\n</code></pre>\n\n<p>Note the space after a-z is important to catch space.</p>\n"}, {"comments": [{"owner": {"reputation": 998, "user_id": 2374540, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/2oFyF.jpg?s=128&g=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/2374540/kob"}, "edited": false, "score": 0, "creation_date": 1487175883, "post_id": 42254709, "comment_id": 71667355, "body": "The output isn&#39;t &quot;Jan 9934&quot;?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 998, "user_id": 2374540, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/2oFyF.jpg?s=128&g=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/2374540/kob"}, "edited": false, "score": 0, "creation_date": 1487175950, "post_id": 42254709, "comment_id": 71667410, "body": "@KOB: <i>The Outcome should be <code>Jan 1993</code></i>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487175962, "post_id": 42254709, "comment_id": 71667416, "body": "Instead of nongready maybe it is better to use <code>\\D*</code> instead of <code>.*?</code>"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487176031, "post_id": 42254709, "comment_id": 71667478, "body": "@Slava: It depends on what kind of strings are expected. I suggested the minimal fix. If there are other digits, say, 1 or 2 or 3 digit chunks before the year, using <code>\\D*</code> will prevent the match."}, {"owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "edited": false, "score": 0, "creation_date": 1487319383, "post_id": 42254709, "comment_id": 71740797, "body": "@WiktorStribi\u017cew your example is working, do you know why it is not working anymore when I use Userinput string as <code>s</code> ? No Output is being shown even though the String should be the same as &quot;January 19934&quot;"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487319542, "post_id": 42254709, "comment_id": 71740877, "body": "Are you sure it is <code>std::string</code>? Check the <a href=\"http://en.cppreference.com/w/cpp/regex/regex_search\" rel=\"nofollow noreferrer\"><code>regex_search</code> signatures</a> and check what type of data you pass to <code>regex_search</code>."}, {"owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "edited": false, "score": 0, "creation_date": 1487324911, "post_id": 42254709, "comment_id": 71744277, "body": "@WiktorStribi\u017cew yes i am using <code>std::string s;</code> <code>cin &gt;&gt; s;</code> instead of <code>string s(&quot;January 19934&quot;);</code> , I have tried debugging to see what exactly is passed to regex_search with Watches in CodeBlocks, couldnt find anything though"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1487325135, "post_id": 42254709, "comment_id": 71744451, "body": "Aha, that is unrelated to the current question and the answer is <a href=\"http://stackoverflow.com/questions/5838711/stdcin-in-input-with-spaces\">already provided here</a>."}, {"owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "edited": false, "score": 1, "creation_date": 1487329441, "post_id": 42254709, "comment_id": 71747365, "body": "@WiktorStribi\u017cew oh god I am so stupid, forgot that cin cuts off whitespaces with string, need to use getline, thank you!"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1487175609, "last_edit_date": 1495540403, "creation_date": 1487175609, "answer_id": 42254709, "question_id": 42254517, "link": "https://stackoverflow.com/questions/42254517/using-regex-to-filter-wrong-input/42254709#42254709", "title": "Using RegEx to filter wrong Input?", "body": "<p>Your regex contains a common typo: <a href=\"https://stackoverflow.com/a/29771926/3832970\"><code>[A-z]</code> matches more than just ASCII letters</a>. Also, the <code>.*</code> will grab all the string up to its end, and backtracking will force <code>\\d{4}</code> match the <em>last</em> 4 digits. You need to use <em>lazy</em> quantifier with the dot, <code>*?</code>.</p>\n\n<p>Then, use <code>regex_search</code> and concat the 2 group values:</p>\n\n<pre><code>#include &lt;regex&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    regex r(\"([A-Za-z]{3}).*?([0-9]{4})\");\n    string s(\"January 19934\");\n    smatch match;\n    std::stringstream res(\"\");\n    if (regex_search(s, match, r)) {\n        res &lt;&lt; match.str(1) &lt;&lt; \" \" &lt;&lt; match.str(2);\n    }\n    cout &lt;&lt; res.str();  // =&gt; Jan 1993\n    return 0;\n}\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/UdzfZI\" rel=\"nofollow noreferrer\">C++ demo</a></p>\n\n<p><strong>Pattern explanation</strong>:</p>\n\n<ul>\n<li><code>([A-Za-z]{3})</code>  - Group 1: three ASCII letters</li>\n<li><code>.*?</code> - any 0+ chars other than line break symbols as few as possible</li>\n<li><code>([0-9]{4})</code> - Group 2: 4 digits</li>\n</ul>\n"}], "owner": {"reputation": 492, "user_id": 6668554, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-A5AWL5JzpQ0/AAAAAAAAAAI/AAAAAAAAABw/lDgM6R-ThsM/photo.jpg?sz=128", "display_name": "Zesa Rex", "link": "https://stackoverflow.com/users/6668554/zesa-rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42254709, "answer_count": 2, "score": 1, "last_activity_date": 1487176414, "creation_date": 1487175083, "last_edit_date": 1487175285, "question_id": 42254517, "link": "https://stackoverflow.com/questions/42254517/using-regex-to-filter-wrong-input", "title": "Using RegEx to filter wrong Input?", "body": "<p>Look at this example:</p>\n\n<pre><code>string str = \"January 19934\";\n</code></pre>\n\n<p>The Outcome should be </p>\n\n<pre><code>Jan 1993\n</code></pre>\n\n<p>I think I have created the right RegEx <code>([A-z]{3}).*([\\d]{4})</code> to use in this case but I do not know what I should do now? </p>\n\n<p>How can I extract what I am looking for, using RegEx? Is there a way like receiving 2 variables, the first one being the result of the first RegEx bracket: <code>([A-z]{3})</code> and the second result being 2nd bracket:<code>[[\\d]{4}]</code>?</p>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 2, "creation_date": 1487175137, "post_id": 42254482, "comment_id": 71666769, "body": "<code>#pragma omp parallel if(variable)</code>"}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1487175248, "post_id": 42254482, "comment_id": 71666857, "body": "Both versions are parallel, mostly I want to selectively enable the <code>#pragma omp for line</code>. I will try to look up if the if clause can work with the for clause. thanks."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1487175326, "post_id": 42254482, "comment_id": 71666913, "body": "it does. <a href=\"https://msdn.microsoft.com/en-us/library/5187hzke.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/5187hzke.aspx</a> hopefully this is true for all compilers."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1487177223, "post_id": 42254482, "comment_id": 71668350, "body": "tried g++ 6. <code>if\u2019 is not valid for \u2018#pragma omp for\u2019</code>"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1487180998, "post_id": 42254482, "comment_id": 71670996, "body": "I can&#39;t help but wonder in what kind of code you would want to conditionally execute each loop iteration either 4 times or 4 * nthread times. This sounds very much like a <a href=\"http://meta.stackexchange.com/q/66377/317725\">XY problem</a>"}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1487181689, "post_id": 42254482, "comment_id": 71671442, "body": "@Zulan Implemented different data structures (sparse and dense array etc. some saves more memory than others.). The data structure can be divided into two kinds. The two kinds need two different ways to loop over them. And then there is a class template that implements algorithms that works on all of the data structures. I don&#39;t want to implement the loops for each kind of data structure or repeat lots of code."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1487182347, "post_id": 42254482, "comment_id": 71671828, "body": "@Zulan guess you are right. That thing is just too ugly to use. Probably I will try to find another way to duplicate less code."}], "answers": [{"comments": [{"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1487180005, "post_id": 42256014, "comment_id": 71670358, "body": "this works for both clang and g++. not sure about intel compiler."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1487237454, "post_id": 42256014, "comment_id": 71695947, "body": "It won&#39;t work as expected if nested parallelism is enabled."}], "tags": [], "owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "is_accepted": false, "score": 1, "last_activity_date": 1487180311, "last_edit_date": 1487180311, "creation_date": 1487178890, "answer_id": 42256014, "question_id": 42254482, "link": "https://stackoverflow.com/questions/42254482/selectively-enable-an-openmp-for-loop-within-a-parallel-region/42256014#42256014", "title": "Selectively enable an OpenMP for loop within a parallel region", "body": "<p>Sort of a work around. Don't know if it is possible to get rid of conditionals for getting the thread id.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;omp.h&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\nint main() {\n    constexpr bool var = true;\n    int n_threads = omp_get_num_procs();\n    std::cout &lt;&lt; \"n_threads: \" &lt;&lt; n_threads &lt;&lt; \"\\n\";\n    std::vector&lt;std::stringstream&gt; s(omp_get_num_procs());\n\n    #pragma omp parallel if (var) \n    {\n\n        const int thread_id0 = omp_get_thread_num();\n        #pragma omp parallel\n        {\n            int thread_id1;\n            if (var) {\n                thread_id1 = thread_id0;\n            } else {\n                thread_id1 = omp_get_thread_num();\n            }\n\n            #pragma omp for\n            for (int i = 0; i &lt; 8; ++i) {\n                s[thread_id1] &lt;&lt; i &lt;&lt; \", \";\n            }\n        }\n    }\n\n    for (int i = 0; i &lt; s.size(); ++i) {\n        std::cout &lt;&lt; \"thread \" &lt;&lt; i &lt;&lt; \": \" \n                  &lt;&lt; s[i].str() &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Output (when <code>var == true</code>):</p>\n\n<pre><code>n_threads: 8\nthread 0: 0, 1, 2, 3, 4, 5, 6, 7, \nthread 1: 0, 1, 2, 3, 4, 5, 6, 7, \nthread 2: 0, 1, 2, 3, 4, 5, 6, 7, \nthread 3: 0, 1, 2, 3, 4, 5, 6, 7, \nthread 4: 0, 1, 2, 3, 4, 5, 6, 7, \nthread 5: 0, 1, 2, 3, 4, 5, 6, 7, \nthread 6: 0, 1, 2, 3, 4, 5, 6, 7, \nthread 7: 0, 1, 2, 3, 4, 5, 6, 7,\n</code></pre>\n\n<p>Output (when <code>var == false</code>):</p>\n\n<pre><code>n_threads: 8\nthread 0: 0, \nthread 1: 1, \nthread 2: 2, \nthread 3: 3, \nthread 4: 4, \nthread 5: 5, \nthread 6: 6, \nthread 7: 7, \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1487237308, "post_id": 42257254, "comment_id": 71695840, "body": "You realise that the code in the <code>else</code> block actually creates a nested parallel region, which might lead to a surprising result? The only reason it might seem to work as the OP wants is that nested parallelism is disabled by default and the region will execute in serial in each thread."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1487260173, "post_id": 42257254, "comment_id": 71713498, "body": "Thanks. I fixed that by removing <code>#pragma omp parallel for</code> in the <code>else</code> block."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1487277882, "post_id": 42257254, "comment_id": 71725134, "body": "Sorry, I didn&#39;t realise that you are the OP. You should really combine both your answers into one."}], "tags": [], "owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "is_accepted": false, "score": 0, "last_activity_date": 1487260181, "last_edit_date": 1487260181, "creation_date": 1487182993, "answer_id": 42257254, "question_id": 42254482, "link": "https://stackoverflow.com/questions/42254482/selectively-enable-an-openmp-for-loop-within-a-parallel-region/42257254#42257254", "title": "Selectively enable an OpenMP for loop within a parallel region", "body": "<pre><code>#include &lt;omp.h&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\nint main() {\n    constexpr bool var = false;\n    int n_threads = omp_get_num_procs();\n    std::cout &lt;&lt; \"n_threads: \" &lt;&lt; n_threads &lt;&lt; \"\\n\";\n    std::vector&lt;std::stringstream&gt; s(omp_get_num_procs());\n\n    #pragma omp parallel\n    {\n        const int thread_id = omp_get_thread_num();\n        if (var) {\n            #pragma omp for\n            for (int i = 0; i &lt; 8; ++i) {\n                s[thread_id] &lt;&lt; i &lt;&lt; \", \";\n            }\n        } else {\n            for (int i = 0; i &lt; 8; ++i) {\n                s[thread_id] &lt;&lt; i &lt;&lt; \", \";\n            } // code duplication\n        }\n    }\n    for (int i = 0; i &lt; s.size(); ++i) {\n        std::cout &lt;&lt; \"thread \" &lt;&lt; i &lt;&lt; \": \" \n                  &lt;&lt; s[i].str() &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1487186955, "post_id": 42258261, "comment_id": 71674526, "body": "I thought overhead was quite big for iterator: <a href=\"http://stackoverflow.com/questions/2513988/iteration-through-std-containers-in-openmp\" title=\"iteration through std containers in openmp\">stackoverflow.com/questions/2513988/&hellip;</a> Not sure if that is still true now. After reading that, I avoid writing iterator for classes if it is for openmp for loop."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 2, "creation_date": 1487190315, "post_id": 42258261, "comment_id": 71676404, "body": "You misread the linked answer. The example he gives is for <code>std::set</code>, which has no random access iterator. Hence he does not use the a loop worksharing construct (<code>#pragma omp (parallel) for</code>), but a hand-made loop. If you use a normal <code>#pragma omp for</code> on a random access iterator, there is no inherent overhead. Your optimization mileage may vary, so do measure and compare."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1487260264, "post_id": 42258261, "comment_id": 71713595, "body": "thanks. guess I will add random access iterators in the next project ..."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1487266023, "post_id": 42258261, "comment_id": 71718113, "body": "another way is to make a macro function."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 1, "last_activity_date": 1487186397, "creation_date": 1487186397, "answer_id": 42258261, "question_id": 42254482, "link": "https://stackoverflow.com/questions/42254482/selectively-enable-an-openmp-for-loop-within-a-parallel-region/42258261#42258261", "title": "Selectively enable an OpenMP for loop within a parallel region", "body": "<p>I think the idiomatic C++ solution is to hide the different OpenMP pragmas behind algorithmic overloads.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;omp.h&gt;\n\n#include &lt;type_traits&gt;\ntemplate &lt;bool ALL_PARALLEL&gt;\nstruct impl;\n\ntemplate&lt;&gt;\nstruct impl&lt;true&gt;\n{\n  template&lt;typename ITER, typename CALLABLE&gt;\n  void operator()(ITER begin, ITER end, const CALLABLE&amp; func) {\n    #pragma omp parallel\n    {\n      for (ITER i = begin; i != end; ++i) {\n        func(i);\n      }\n    }\n  }\n};\n\ntemplate&lt;&gt;\nstruct impl&lt;false&gt;\n{\n  template&lt;typename ITER, typename CALLABLE&gt;\n  void operator()(ITER begin, ITER end, const CALLABLE&amp; func) {\n    #pragma omp parallel for\n    for (ITER i = begin; i &lt; end; ++i) {\n      func(i);\n    }\n  }\n};\n\n// This is just so we don't have to write parallel_foreach()(...)\ntemplate &lt;bool ALL_PARALLEL, typename ITER, typename CALLABLE&gt;\nvoid parallel_foreach(ITER begin, ITER end, const CALLABLE&amp; func)\n{\n    impl&lt;ALL_PARALLEL&gt;()(begin, end, func);\n}\n\nint main()\n{\n    constexpr bool var = false;\n    int n_threads = omp_get_num_procs();\n    std::cout &lt;&lt; \"n_threads: \" &lt;&lt; n_threads &lt;&lt; \"\\n\";\n    std::vector&lt;std::stringstream&gt; s(omp_get_num_procs());\n\n    parallel_foreach&lt;var&gt;(0, 8, [&amp;s](auto i) {\n        s[omp_get_thread_num()] &lt;&lt; i &lt;&lt; \", \";\n    });\n\n    for (int i = 0; i &lt; s.size(); ++i) {\n        std::cout &lt;&lt; \"thread \" &lt;&lt; i &lt;&lt; \": \" \n                  &lt;&lt; s[i].str() &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>If you use some specific types, you can do an overload by type instead of to using the <code>bool</code> template parameter and iterate through elements rather than the numerical indexed loop. Note that you can use C++ random access iterators in OpenMP worksharing loops! Depending on your types you might very well be able to implement an iterator that hides everything about the internal data access form the caller.</p>\n"}], "owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1487260181, "creation_date": 1487174996, "last_edit_date": 1487179875, "question_id": 42254482, "link": "https://stackoverflow.com/questions/42254482/selectively-enable-an-openmp-for-loop-within-a-parallel-region", "title": "Selectively enable an OpenMP for loop within a parallel region", "body": "<p>Is it possible to selectively enable an openmp directive with template parameter or run time variable?</p>\n\n<pre><code>this (all threads work on the same for loop).\n#pragma omp parallel\n{\n    #pragma omp for\n    for (int i = 0; i &lt; 10; ++i) { /*...*/ }\n}\nversus this (each thread works on its own for loop)\n#pragma omp parallel\n{\n    for (int i = 0; i &lt; 10; ++i) { /*...*/ }\n}\n</code></pre>\n\n<hr>\n\n<p>Update (Testing if clause)</p>\n\n<p>test.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;omp.h&gt;\n\nint main() {\n    bool var = true;\n    #pragma omp parallel \n    {\n        #pragma omp for if (var)\n        for (int i = 0; i &lt; 4; ++i) {\n            std::cout &lt;&lt; omp_get_thread_num() &lt;&lt; \"\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>Error message (g++ 6, compiled with g++ test.cpp -fopenmp)</p>\n\n<pre><code>test.cpp: In function \u2018int main()\u2019:\ntest.cpp:8:25: error: \u2018if\u2019 is not valid for \u2018#pragma omp for\u2019\n         #pragma omp for if (var)\n                         ^~\n</code></pre>\n"}, {"tags": ["c++", "templates", "inheritance", "typelist"], "owner": {"reputation": 151, "user_id": 1490747, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c3ed05c263b1dbb5ed2bcc74feb50baa?s=128&d=identicon&r=PG", "display_name": "inzombiak", "link": "https://stackoverflow.com/users/1490747/inzombiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1487174512, "creation_date": 1487174512, "question_id": 42254309, "link": "https://stackoverflow.com/questions/42254309/generating-linear-hierarchy-from-a-typelist", "title": "Generating Linear Hierarchy from a Typelist", "body": "<p>I'm going through \"Modern C++ Design\" and I've run into an issue with the GenLinearHierarchy explained at the end of chapter 3.</p>\n\n<p>Since there's no code provided on how to call functions and deal with the generated hierarchy in general, I can't tell if what I've written is correct or not. The book simplifies the use of this technique a lot so it's hard to tell.</p>\n\n<p>I looked through the AbstractFactory example in the Loki library and just changed it to work with what I wanted, but I have a feeling that I'm taking an extra step somewhere.</p>\n\n<p>The GenScatterHierarchy and GenLinearHierarchy are the same as defined <a href=\"http://loki-lib.sourceforge.net/html/a00653.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>My code:</p>\n\n<pre><code>template&lt;class T&gt;\nclass AbstractCollisionEvent\n{\npublic:\n    virtual void Collision(int id, T&amp; obj) = 0;\n    virtual ~AbstractCollisionEvent() {};\n};\n\n\ntemplate &lt;class T, class Base&gt;\nclass CollisionEventImpl : public Base\n{\n    typedef typename Base::ProductList BaseProductList;\n\nprotected:\n    typedef typename BaseProductList::Tail ProductList;\n\npublic:\n    typedef typename BaseProductList::Head AbstractProduct;\n    void Collision(int id, AbstractProduct&amp; obj)\n    {\n        obj.Collided(id, Chapter2::Type2Type&lt;AbstractProduct&gt;());\n    }\n};\n\ntemplate\n&lt;\n    class TList,\n    template &lt;class&gt; class Unit = AbstractCollisionEvent\n&gt;\nclass CollisionHandlerScatter : public HierarchyGenerators::GenScatterHierarchy&lt;TList, Unit&gt;\n{\npublic:\n    typedef TList ProductList;\n\n    template&lt;class O&gt;\n    void OnCollide(O&amp; obj, int id)\n    {\n        Unit&lt;O&gt;&amp; unit = *this;\n        unit.Collided(id, obj);\n    }\n    virtual ~CollisionHandlerScatter() {}\n};\n\ntemplate\n&lt;\n    class AbstractHandler,\n    template &lt;class, class&gt; class Handler,\n    class TList\n&gt;\nclass ConcreteCollisionHandler : public  HierarchyGenerators::GenLinearHierarchy&lt;TList, Handler, AbstractHandler&gt;\n{\n\n};\n\nclass Explode\n{\npublic:\n    void Collided(int id, Chapter2::Type2Type&lt;Explode&gt;)\n    {\n        std::cout &lt;&lt; \"Exploded!\";\n    }\n};\n\nclass Spawn\n{\npublic:\n    void Collided(int id, Chapter2::Type2Type&lt;Spawn&gt;)\n    {\n        std::cout &lt;&lt; \"Spawned!\";\n    }\n};\n\nclass Heal\n{\npublic:\n    void Collided(int id, Chapter2::Type2Type&lt;Heal&gt;)\n    {\n        std::cout &lt;&lt; \"Heal!\";\n    }\n};\n\ntypedef TYPELIST_3(Spawn, Explode, Heal) colliderTL;\ntypedef CollisionHandlerScatter&lt;colliderTL&gt; CHS;\ntypedef ConcreteCollisionHandler&lt;CHS, CollisionEventImpl, colliderTL&gt; CCH;\n\n\nCCH cch;\nSpawn s;\nHeal h;\ncch.OnCollide(s, 1);\ncch.OnCollide(h, 1);\n</code></pre>\n\n<p>This code works. But I feel like \"AbstractCollisionEvent\" and \"CollisionEventImpl\" are just useless layer, or at least that's how it looks with the way the books explains it. I haven't been able to implement the behavior I want without those two and I was wondering if there is one or if there is a way to improve what I have.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1487174375, "post_id": 42254156, "comment_id": 71666149, "body": "Note you compile both times in C++ mode, you need to change extention or specify mode explicitly, g++ or gcc only differentiate libraries to link with."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1487174379, "post_id": 42254156, "comment_id": 71666153, "body": "For C it&#39;s a constraint violation, me thinks <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.8.6.4p1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.8.6.4p1</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1487174440, "post_id": 42254156, "comment_id": 71666204, "body": "It is not valid C. Please note that gcc is per default a non-standard compiler. If you tell it to be a standard conforming compiler, it will give you errors like it should <code>gcc -std=c11 -pedantic-errors</code>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1487175025, "post_id": 42254156, "comment_id": 71666689, "body": "@Werner Henze: &quot;Now valid&quot;? It has <i>always</i> been valid in standard C++."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487176739, "post_id": 42254156, "comment_id": 71667972, "body": "C and C++ are <b>different</b> languages. You could as well as about Java, C# or Brainfuck. There is no &quot;C/C++&quot;. Just ask about one language per question. As you seem to compile as C++ only, I remove the C tag."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1487181213, "post_id": 42254156, "comment_id": 71671148, "body": "@AnT OK, maybe I mixed something up. I thought to remember that it once did not work with MSVC. I deleted my misleading comment."}], "owner": {"reputation": 2647, "user_id": 2891462, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a27bd5b9762d5fad9cffc4f4f2812046?s=128&d=identicon&r=PG&f=1", "display_name": "user2891462", "link": "https://stackoverflow.com/users/2891462/user2891462"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "closed_date": 1487174305, "answer_count": 0, "score": 3, "last_activity_date": 1487176778, "creation_date": 1487174182, "last_edit_date": 1487176778, "question_id": 42254156, "link": "https://stackoverflow.com/questions/42254156/is-return-voidfunction-valid-code", "closed_reason": "Duplicate", "title": "Is &quot;return voidFunction()&quot; valid code?", "body": "<p>I know the return statement is unnecessary and therefore can be avoided, but out of curiosity: is this valid code?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid printNumber(int a)\n{\n    printf(\"Your number is: %d\\n\", a);\n}\n\nvoid doStuff()\n{\n    const int a = 12;\n    return printNumber(a); // Is this valid, well-defined code?\n}\n\nint main()\n{\n    doStuff();\n    return 0;\n}\n</code></pre>\n\n<p>This compiles with no warnings using gcc and g++ 4.8.4:</p>\n\n<p><code>gcc -W -Wall -Werror -Wextra voidtest.cxx</code></p>\n\n<p><code>g++ -W -Wall -Werror -Wextra voidtest.cxx</code></p>\n\n<p>It also runs as one would expect.</p>\n\n<p>The question is tagged as C and C++ because I'd like to know if there's any difference in the answer for both languages.</p>\n"}, {"tags": ["c++", "segmentation-fault", "sdl", "sdl-2", "surface"], "answers": [{"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 1, "last_activity_date": 1487175886, "creation_date": 1487175886, "answer_id": 42254799, "question_id": 42254038, "link": "https://stackoverflow.com/questions/42254038/sdl-surface-segmentation-fault/42254799#42254799", "title": "SDL_Surface Segmentation Fault", "body": "<p><a href=\"http://wiki.libsdl.org/SDL_GetWindowSurface\" rel=\"nofollow noreferrer\">SDL_GetWindowSurface</a> documentation says <strong>This surface will be freed when the window is destroyed. Do not free this surface.</strong></p>\n"}], "owner": {"reputation": 21, "user_id": 5102596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7cdbdcc9d4dac45e2d508a61b9ba5d?s=128&d=identicon&r=PG&f=1", "display_name": "Simeon Godinyachki", "link": "https://stackoverflow.com/users/5102596/simeon-godinyachki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 42254799, "answer_count": 1, "score": 0, "last_activity_date": 1501162297, "creation_date": 1487173910, "last_edit_date": 1501162297, "question_id": 42254038, "link": "https://stackoverflow.com/questions/42254038/sdl-surface-segmentation-fault", "title": "SDL_Surface Segmentation Fault", "body": "<p>so here's my problem(s). I have a class DrawMgr in which function DrawCube I call, my other class' function draw in which I use SDL_Surface. My main problem is that when I start moving the mouse over the window I created after some time it gives a segmentation fault, which when I backtrace says it has something to do with freeing the surface. The other thing is when I call the function DrawCube in the DrawManager.cpp it doesn't draw the cube.</p>\n\n<p><strong>EDIT:</strong> The problem was that I handled the \"Escape\" key with <code>e.key.keysym.sym == SDLK_ESCAPE</code>, which captured all movement within the window which made it crash. The correct way was <code>e.type == SDL_KEYDOWN &amp;&amp; e.key.keysym.sym...)</code></p>\n"}, {"tags": ["c++", "qt", "qtextedit"], "comments": [{"owner": {"reputation": 366, "user_id": 4991953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWcJl.jpg?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4991953/trevor"}, "edited": false, "score": 0, "creation_date": 1487173818, "post_id": 42253819, "comment_id": 71665672, "body": "Are you trying to handle this logic in your main window code file? Is so, have you included &lt;QTextEdit&gt;?"}, {"owner": {"reputation": 166, "user_id": 4928269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/383ba8fc10062b5815616dc709057f0c?s=128&d=identicon&r=PG&f=1", "display_name": "very hit", "link": "https://stackoverflow.com/users/4928269/very-hit"}, "edited": false, "score": 0, "creation_date": 1487174374, "post_id": 42253819, "comment_id": 71666145, "body": "I think you should put your key part of the code in the question, what does your main.cpp look like, and what does your widget class look like?"}, {"owner": {"reputation": 86, "user_id": 7410107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7639364711c6bfba83fa59e8a49308a?s=128&d=identicon&r=PG&f=1", "display_name": "Delet0r", "link": "https://stackoverflow.com/users/7410107/delet0r"}, "edited": false, "score": 0, "creation_date": 1487175775, "post_id": 42253819, "comment_id": 71667265, "body": "I don&#39;t do anything in the main.cpp, there is just what was generated when the project was created.  ` #include &quot;mainwindow.h&quot; #include &quot;include/dynamixel_sdk.h&quot; #include &lt;QApplication&gt;   int main(int argc, char *argv[]) {     QApplication a(argc, argv);     MainWindow w;     w.show();      return a.exec(); }`  I only wrote something in it to find the source of the crash. The &lt;QTextEdit&gt; is included."}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1487177113, "post_id": 42253819, "comment_id": 71668262, "body": "Three questions: 1)did you try debugging (set a breakpoint before the <code>setPlainText(...)</code> line)?, 2)if yes, then what happened during step by step debugging? and 3)did you actually create an instance of the <code>QTextEdit</code>? All I see in your constructor is a call <code>console-&gt;...</code> but no where before that an<code>console = new QTextEdit(...)</code> line. Since you are not calling <code>ui-&gt;console-&gt;...</code> I assume that it&#39;s not part of the designer form hence you need to allocate the memory yourself."}], "answers": [{"comments": [{"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1487173952, "post_id": 42253992, "comment_id": 71665764, "body": "Of course, you can try setting the cursor using <code>setTextCursor</code>."}, {"owner": {"reputation": 86, "user_id": 7410107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7639364711c6bfba83fa59e8a49308a?s=128&d=identicon&r=PG&f=1", "display_name": "Delet0r", "link": "https://stackoverflow.com/users/7410107/delet0r"}, "edited": false, "score": 0, "creation_date": 1487175985, "post_id": 42253992, "comment_id": 71667436, "body": "Thanks for the heads up, but I also tried <code>txt-&gt;setPlainText(&quot;text&quot;);</code> it had the same effect."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 86, "user_id": 7410107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7639364711c6bfba83fa59e8a49308a?s=128&d=identicon&r=PG&f=1", "display_name": "Delet0r", "link": "https://stackoverflow.com/users/7410107/delet0r"}, "edited": false, "score": 0, "creation_date": 1487176191, "post_id": 42253992, "comment_id": 71667602, "body": "May you please publish more complete examples for both the failing and the working cases?"}, {"owner": {"reputation": 86, "user_id": 7410107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7639364711c6bfba83fa59e8a49308a?s=128&d=identicon&r=PG&f=1", "display_name": "Delet0r", "link": "https://stackoverflow.com/users/7410107/delet0r"}, "edited": false, "score": 0, "creation_date": 1487176775, "post_id": 42253992, "comment_id": 71668002, "body": "I added the sample in the question ^^"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 86, "user_id": 7410107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7639364711c6bfba83fa59e8a49308a?s=128&d=identicon&r=PG&f=1", "display_name": "Delet0r", "link": "https://stackoverflow.com/users/7410107/delet0r"}, "edited": false, "score": 0, "creation_date": 1487177351, "post_id": 42253992, "comment_id": 71668431, "body": "I think you should be using <code>ui-&gt;console-&gt;setPlainText</code> (or whatever the name of the QTextEdit is). The QTextEdit is constructed <i>after</i> the <code>setupUi</code>, so if you copied it before you are using a uninitialized pointer."}, {"owner": {"reputation": 86, "user_id": 7410107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7639364711c6bfba83fa59e8a49308a?s=128&d=identicon&r=PG&f=1", "display_name": "Delet0r", "link": "https://stackoverflow.com/users/7410107/delet0r"}, "edited": false, "score": 0, "creation_date": 1487177470, "post_id": 42253992, "comment_id": 71668528, "body": "That was it. I&#180;m feeling so stupid right now. Thanks a lot !"}], "tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 0, "last_activity_date": 1494590022, "last_edit_date": 1494590022, "creation_date": 1487173808, "answer_id": 42253992, "question_id": 42253819, "link": "https://stackoverflow.com/questions/42253819/qt-program-crashes-when-using-inserttext/42253992#42253992", "title": "Qt program crashes when using insertText", "body": "<p>Take into consideration that <a href=\"http://doc.qt.io/qt-5/qtextedit.html#insertPlainText\" rel=\"nofollow noreferrer\"><code>insertPlainText</code></a> inserts text at current cursor position, so I think you may have problems if cursor is not set (no focus, for example). You may try:</p>\n\n<pre><code>txt-&gt;setPlainText(\"your text\");\n</code></pre>\n\n<p>Or, if want to append:</p>\n\n<pre><code>txt-&gt;setPlainText(txt-&gt;toPlainText() + \"appended text\");\n</code></pre>\n"}], "owner": {"reputation": 86, "user_id": 7410107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7639364711c6bfba83fa59e8a49308a?s=128&d=identicon&r=PG&f=1", "display_name": "Delet0r", "link": "https://stackoverflow.com/users/7410107/delet0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 42253992, "answer_count": 1, "score": 0, "last_activity_date": 1494590022, "creation_date": 1487173343, "last_edit_date": 1494589924, "question_id": 42253819, "link": "https://stackoverflow.com/questions/42253819/qt-program-crashes-when-using-inserttext", "title": "Qt program crashes when using insertText", "body": "<p>I'm trying to display some information in my Qt program with the <code>QPlainTextEdit</code>, which I included with the Qt Designer. But when i try to display something with </p>\n\n<pre><code>pTextEdit-&gt;insertPlainText(\"text\");\n</code></pre>\n\n<p>my program crashes on execution. When I try to declare the object myself </p>\n\n<pre><code>QTextEdit *txt = new QTextEdit();\n</code></pre>\n\n<p>it doesn't work either.</p>\n\n<p>The only time it works is when I create the object in the main.cpp. But I need to display the information in my widget not in another window.</p>\n\n<p>Any help is appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>working:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n\n    QTextEdit *txt = new QTextEdit();\n    txt-&gt;setText(\"Hello, world!\");\n    txt-&gt;append(\"Appending some text\u2026\");\n\n    txt-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>not working (object created by Qt Designer):</p>\n\n<pre><code>MainWindow::MainWindow( QWidget *parent ) :\n\n... initialization list ...\n\n{\n    ui-&gt;setupUi( this );\n\n    console-&gt;setPlainText(\"text\");\n\n    .. other stuff ...\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "initialization", "global-variables", "thread-local-storage"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487173487, "post_id": 42253808, "comment_id": 71665411, "body": "Not 100% sure because of <code>thread_local</code> so related/dupe: <a href=\"http://stackoverflow.com/questions/3746238/c-global-initialization-order-ignores-dependencies/3746249#3746249\" title=\"c global initialization order ignores dependencies\">stackoverflow.com/questions/3746238/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1487173566, "post_id": 42253808, "comment_id": 71665476, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/initialization</a>"}], "owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1487173742, "creation_date": 1487173305, "last_edit_date": 1487173742, "question_id": 42253808, "link": "https://stackoverflow.com/questions/42253808/are-global-variables-always-initialized-prior-to-any-global-thread-local-variabl", "title": "Are global variables always initialized prior to any global thread_local variables?", "body": "<pre><code>struct A\n{\n    A() : n(1)\n    {}\n\n    int n;\n};\n\nstruct B\n{\n    B() : n(2)\n    {}\n\n    int n;\n};\n\nthread_local A a;\nB b;\n\nint main()\n{\n    return a.n;\n}\n</code></pre>\n\n<p><code>a</code> is defined before <code>b</code>. </p>\n\n<p>My question:</p>\n\n<p><strong>Does the C++ standard guarantee <code>B::B()</code> is called before <code>A::A()</code> is called?</strong></p>\n"}, {"tags": ["c++", "winapi", "named-pipes"], "comments": [{"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1487173520, "post_id": 42253793, "comment_id": 71665439, "body": "You appear to be missing a lot of key code in your post (which I assume is a snippet of a random bit of the end of the server side?). Please construct and post a <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">full example</a>. In doing so you may discover the problem, but at the bare minimum you&#39;ll give the actual needed info for others to help."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487173704, "post_id": 42253793, "comment_id": 71665566, "body": "call <code>GetOverlappedResult</code> kill asynchronous logic"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1487174140, "post_id": 42253793, "comment_id": 71665922, "body": "That said I suspect your misunderstanding of <code>GetOverlappedResult</code> and your random packing of your <code>OVERLAPPED</code> structure with <code>hEvent</code> is the core issue, as well as you not actually starting a proper overlapped operation (you don&#39;t just fill your own <code>OVERLAPPED</code>, you have to get it from e.g. <code>ReadFile</code> which will fill in the event handle and such <i>for</i> you) where the event is presumably being triggered on incoming connection and so you&#39;re actually blocking on <code>GetOverlappedResult</code> until somebody tries to connect or something like that."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1487193142, "post_id": 42253793, "comment_id": 71677923, "body": "Per the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365592.aspx\" rel=\"nofollow noreferrer\">Named Pipe Client</a> documentation: &quot;<b>A named pipe client uses the <code>CreateFile</code> function to open a handle to a named pipe. <i>*If the pipe exists but all of its instances are busy, <code>CreateFile</code> returns <code>INVALID_HANDLE_VALUE</code> and the <code>GetLastError</code> function returns <code>ERROR_PIPE_BUSY</code></b>. When this happens, the named pipe client uses the <code>WaitNamedPipe</code> function to wait for an instance of the named pipe to become available.</i>&quot;  ..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1487193222, "post_id": 42253793, "comment_id": 71677970, "body": "... The server pipe could be busy because your client&#39;s error handling is bypassing <code>DisconnectNamedPipe()</code> to release the pipe.  Or it could be because your server is not calling <code>CreateNamedPIpe()</code> enough times.  Who knows.  You did not provide any of the relevant code showing how you are creating the server pipe and how the client is connecting to it."}], "answers": [{"comments": [{"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1487358348, "post_id": 42254398, "comment_id": 71765949, "body": "Note btw that if you start an overlapped operation then immediately go on to GetOverlappedResult without doing anything else in between, you might as well not use overlapped IO and save yourself the complexity. It&#39;s very useful when you need the asynchronicity, but when you don&#39;t a simple synchronous operation will suffice."}], "tags": [], "owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1487358476, "last_edit_date": 1487358476, "creation_date": 1487174756, "answer_id": 42254398, "question_id": 42253793, "link": "https://stackoverflow.com/questions/42253793/named-pipe-cant-connect-for-second-time/42254398#42254398", "title": "Named pipe can&#39;t connect for second time", "body": "<p>I can't tell precisely what <code>hEvent</code> is since you left out all your initialization code, but you are using <code>GetOverlappedResult</code> incorrectly, and all bets are pretty much off at that point:</p>\n\n<pre><code>OVERLAPPED ov;\nZeroMemory( &amp; ov, sizeof(OVERLAPPED));\nov.hEvent = hEvent;\n\nif (GetOverlappedResult(pipe(), &amp; ov, &amp; bytesTransferred, TRUE) == 0) ...\n</code></pre>\n\n<p>This isn't how you do that. You don't declare an <code>OVERLAPPED</code> and pass it off brand new to <code>GetOverlappedResult</code>. You have to actually <em>start</em> an overlapped operation (a read, a write, a connect, whatever), e.g. passing the <code>OVERLAPPED</code> to <code>ReadFile</code> or something first. And the event handle you give it is generally an event that you've created that's <em>dedicated</em> to that overlapped task, not one that is also in use by whatever else.</p>\n\n<p>It's the equivalent of you walking up to a random stranger on the street and saying, out of nowhere, \"So, did you get that thing I asked for?\".</p>\n\n<p>You're attempting to complete an overlapped operation that you haven't started, and you're using an event handle that you are presumably also using to check for incoming connections or something, too. So it's pretty much up in the air what's going to happen.</p>\n\n<p>So you have two options:</p>\n\n<ol>\n<li>Read <a href=\"http://www.dreamincode.net/forums/topic/165693-microsoft-working-with-overlapped-io/\" rel=\"nofollow noreferrer\">this tutorial</a> (which I haven't verified for correctness but at a glance it looks fine), <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686358(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this overview of overlapped I/O</a>, and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365603(v=vs.85).aspx\" rel=\"nofollow noreferrer\">the MS example of named pipe servers with overlapped I/O</a>, then read it all again until you understand it, or</li>\n<li>Stop using overlapped I/O. Which is what I recommend for now just to get the concepts down. </li>\n</ol>\n\n<p>In addition to the above there may be further issues on your client side as well, but you have not shown the code for that. You may want to double check it against the relevant docs to make sure everything's OK on that end as well. Also as far as missing code goes, you'll want to verify that you're creating the pipe in overlapped mode on the server side by passing the appropriate flags on creation (can't look up, on phone for this edit, but check pipe creation api docs). </p>\n"}], "owner": {"reputation": 178, "user_id": 5387904, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-nn9ivpj7I2s/AAAAAAAAAAI/AAAAAAAABBA/iWpV1RHF12g/photo.jpg?sz=128", "display_name": "banana36", "link": "https://stackoverflow.com/users/5387904/banana36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "closed_date": 1487182605, "accepted_answer_id": 42254398, "answer_count": 1, "score": 0, "last_activity_date": 1487358476, "creation_date": 1487173265, "last_edit_date": 1487173699, "question_id": 42253793, "link": "https://stackoverflow.com/questions/42253793/named-pipe-cant-connect-for-second-time", "closed_reason": "Not suitable for this site", "title": "Named pipe can&#39;t connect for second time", "body": "<p>I have a client-server pipe processes, and when I try to connect at the first time, everything's OK, but when I start my client process again without restarting the server I cannot connect with PIPE_BUSY error, though GetOverlappedResult succeeds on the server, but waitforsingleobject doesn't signal that somebody connected and the message is empty of course.</p>\n\n<pre><code>std::wstring buffer;\nwhile (true) {\n    // pinging here...\n    DWORD result = WaitForSingleObject(hEvent, 2000);\n\n    if (result == WAIT_FAILED) {\n        std::wcout &lt;&lt; result &lt;&lt; std::endl;\n        break;\n    }\n\n    if (result == WAIT_TIMEOUT) {\n        // always here \n    }\n\n    ResetEvent(hEvent);\n\n    DWORD bytesTransferred;\n\n    OVERLAPPED ov;\n    ZeroMemory( &amp; ov, sizeof(OVERLAPPED));\n    ov.hEvent = hEvent;\n\n    if (GetOverlappedResult(pipe(), &amp; ov, &amp; bytesTransferred, TRUE) == 0) // FAILED\n    {\n        return; // we do never get here...\n    } else {\n        ZeroMemory( &amp; ov, sizeof(OVERLAPPED));\n\n        DWORD bytesToRead = 0;\n\n        BOOL pingPipe;\n\n        Timer timer(1000);\n\n        while (!bytesToRead || !pingPipe) {\n            if (!timer.in()) {\n                break;\n            }\n\n            pingPipe = PeekNamedPipe(pipe(), NULL, 0, NULL, &amp; bytesToRead, NULL);\n        }\n\n        buffer.resize(sizeof(TCHAR) * bytesToRead);\n\n        if (!ReadFile(pipe(), &amp; buffer[0], bytesToRead, &amp; bytesTransferred, &amp; ov) &amp;&amp; timer.in()) {\n            if (GetLastError() == ERROR_IO_PENDING) {\n                continue;\n            }\n\n            return;\n        }\n\n        // data here\n        std::wcout &lt;&lt; buffer &lt;&lt; std::endl;\n    }\n}\n\nDisconnectNamedPipe(pipe());\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading", "bits"], "comments": [{"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1487173500, "post_id": 42253769, "comment_id": 71665423, "body": "@Fran&#231;oisAndrieux should be, but my question is about using an operator <i>that does not exist for that type yet</i>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1487173817, "post_id": 42253769, "comment_id": 71665669, "body": "What about using <code>std::bitset</code> to achieve what you want?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487174382, "post_id": 42253769, "comment_id": 71666157, "body": "<i>&quot;why the downvotes?&quot;</i> Wasn&#39;t mine, but <i>lack of research</i> might explain that."}, {"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487174670, "post_id": 42253769, "comment_id": 71666385, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 did research. found nothing relevant, only things like <a href=\"http://stackoverflow.com/questions/12848171/error-while-overloading-operator-must-be-a-nonstatic-member-function\" title=\"error while overloading operator must be a nonstatic member function\">stackoverflow.com/questions/12848171/&hellip;</a> and <a href=\"http://www.cplusplus.com/forum/beginner/15852/\" rel=\"nofollow noreferrer\">cplusplus.com/forum/beginner/15852</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487174821, "post_id": 42253769, "comment_id": 71666510, "body": "You probably should refer that in your question then. There&#39;s also an easy to find canonical Q&amp;A about <a href=\"http://stackoverflow.com/questions/4421706/operator-overloading\">operator overloading</a> here."}, {"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487174893, "post_id": 42253769, "comment_id": 71666581, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 those are not relevant. Otherwise, I wouldn&#39;t have needed to ask."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1487205216, "post_id": 42253769, "comment_id": 71682853, "body": "Sorry if I&#39;m wrong about this, but I get the feeling you want to be able to get a selected pixel value from the character&#39;s image, as it is shown on the screen.  Is this what you are asking about?"}, {"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1487231045, "post_id": 42253769, "comment_id": 71691897, "body": "@ChristopherOicles no, I want to know hat a particular bit is in the binaryform of a char."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1487231632, "post_id": 42253769, "comment_id": 71692217, "body": "Ok, I think I know what you are looking for now."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "edited": false, "score": 0, "creation_date": 1487173584, "post_id": 42253846, "comment_id": 71665489, "body": "I have got to the point where functions are boring. But fine."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "edited": false, "score": 4, "creation_date": 1487173650, "post_id": 42253846, "comment_id": 71665530, "body": "@Mark Writing functions is what programming is all about, so you had better find them interesting."}, {"owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "edited": false, "score": 0, "creation_date": 1487173697, "post_id": 42253846, "comment_id": 71665563, "body": "no, programming is about making the computer obey orders."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 3, "last_activity_date": 1487173413, "creation_date": 1487173413, "answer_id": 42253846, "question_id": 42253769, "link": "https://stackoverflow.com/questions/42253769/is-it-possible-to-overload-the-operator-to-access-a-specific-bit-of-a-char-wi/42253846#42253846", "title": "Is it possible to overload the [] operator to access a specific bit of a char without defining a class?", "body": "<p>As the error message says, operator[] must be a member function of a class or struct, and it must take one parameter. However, you can write a free named function (i.e. not an operator) to do what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "is_accepted": false, "score": 0, "last_activity_date": 1487236710, "last_edit_date": 1487236710, "creation_date": 1487236401, "answer_id": 42269462, "question_id": 42253769, "link": "https://stackoverflow.com/questions/42253769/is-it-possible-to-overload-the-operator-to-access-a-specific-bit-of-a-char-wi/42269462#42269462", "title": "Is it possible to overload the [] operator to access a specific bit of a char without defining a class?", "body": "<p>Here is a <code>char</code> wrapper class called <code>Char</code>. The two examples in <code>main()</code> demonstrate that you can use <code>Char</code>-typed values just like you would <code>char</code> values, except that <code>Char</code> has a [] operator, for getting its value's bit at some given index.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Char {\n    char c;\npublic:\n    Char() = default;\n    Char(const Char&amp;) = default;\n    Char(char src) : c(src) {}\n\n    Char&amp; operator = (char src) { c = src; return *this; }\n\n    operator const char&amp; () const { return c; }\n    operator char&amp; () { return c; }\n\n    // Special [] operator\n    // This is read-only -- making a writable (non-const)\n    // version is possible, but more complicated.\n    template &lt;typename I&gt;\n    bool operator [](I bit_idx) const { return !!(c &amp; (char(1) &lt;&lt; bit_idx)); }\n};\n\nint main() {\n    // Example 1\n    // Initialize a new Char value, just like using char.\n    Char my_char = 'x';\n    // Math operators work as expected\n    ++my_char;\n    // And cout will produce the same output as a char value\n    std::cout &lt;&lt; \"Bit 3 of '\" &lt;&lt; my_char &lt;&lt; \"' is \";\n    // But unlike a char, the [] operator gives you\n    // the bit at an index, as a bool value.\n    std::cout &lt;&lt; my_char[3] &lt;&lt; \"\\n\\n\"; \n\n    //Example 2\n    // Specify the Char type in a range-based for loop to\n    // iterate through an array of char values, as Char values.\n    const char str[] = \"Tasty\";\n    for(Char ch : str) {\n        // check if value is nonzero, the same as you would a char value\n        if(ch) {\n            // Send the value to cout,\n            // cast to an int to see the ASCII code\n            std::cout &lt;&lt; ch &lt;&lt; \" (\" &lt;&lt; static_cast&lt;int&gt;(ch) &lt;&lt; \") \";\n\n            // Count down from bit 7 to 0 and use\n            // the special [] operator to get each\n            // bit's value.  Use this to output each\n            // value's binary digits.\n            for(int bit=7; bit&gt;=0; --bit) {\n                std::cout &lt;&lt; ch[bit]; \n            }\n            std::cout &lt;&lt; '\\n';\n        }\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Bit 3 of 'y' is 1\n\nT (84) 01010100\na (97) 01100001\ns (115) 01110011\nt (116) 01110100\ny (121) 01111001\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 7105391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/643080586d2bc3f391b3e7b9904db033?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Gardner", "link": "https://stackoverflow.com/users/7105391/mark-gardner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 42253846, "answer_count": 2, "score": 0, "last_activity_date": 1489682932, "creation_date": 1487173219, "last_edit_date": 1489682932, "question_id": 42253769, "link": "https://stackoverflow.com/questions/42253769/is-it-possible-to-overload-the-operator-to-access-a-specific-bit-of-a-char-wi", "title": "Is it possible to overload the [] operator to access a specific bit of a char without defining a class?", "body": "<p>I have been given an exercise that includes a lot of fiddling (looking at) with bits in a <code>char[n]</code>. </p>\n\n<p>I have to check some geometrical properties of a <code>bit[n][8]</code> obtained by taking each char, and splitting it into it's bits. I know that I can access <code>bit[a]</code> of the char <code>c</code> by doing something like <code>c&amp;((1&lt;&lt;8)&gt;&gt;n)</code>.</p>\n\n<p>I would like to know if there is a way of making <code>c[n]</code> actually <em>be</em> <code>c&amp;((1&lt;&lt;8)&gt;&gt;n)</code>. I tried <code>bool operator [](char c,int n);</code> but that gave me this:</p>\n\n<pre><code>error: \u2018bool operator[](char, int)\u2019 must be a nonstatic member function\nbool operator [](char c,int n);\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "input", "cin", "cout"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1487173178, "post_id": 42253715, "comment_id": 71665160, "body": "What do you mean by &quot;can&#39;t input variables in loops&quot;? Also the title is not very descriptive of the problem."}, {"owner": {"reputation": 203, "user_id": 5516338, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LzZuH.jpg?s=128&g=1", "display_name": "\u0110or\u0111e Milanovi\u0107", "link": "https://stackoverflow.com/users/5516338/%c4%90or%c4%91e-milanovi%c4%87"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1487173294, "post_id": 42253715, "comment_id": 71665261, "body": "My english is bad, but I edited text"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1487173344, "post_id": 42253715, "comment_id": 71665302, "body": "Please explain also what it means. You get an error? Values don&#39;t appear? What you are trying to input and what exactly happens."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1487173402, "post_id": 42253715, "comment_id": 71665343, "body": "Here is <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a>."}, {"owner": {"reputation": 203, "user_id": 5516338, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LzZuH.jpg?s=128&g=1", "display_name": "\u0110or\u0111e Milanovi\u0107", "link": "https://stackoverflow.com/users/5516338/%c4%90or%c4%91e-milanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1487173470, "post_id": 42253715, "comment_id": 71665401, "body": "I input N, M and P, and program just ends, i have tried with system(&quot;pause&quot;) at the end but that just prints text &quot;Press any key to continue...&quot; and that doesn&#39;t help"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1487173508, "post_id": 42253715, "comment_id": 71665428, "body": "Looks like it crashes on the  <code>field[i].push_back(1);</code>. I think you&#39;re using the wrong limit in that outer <code>for</code> loop."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1487173594, "post_id": 42253715, "comment_id": 71665500, "body": "You&#39;ll have problems if <code>m</code> is greater than <code>n</code>. Probably a typo."}, {"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 0, "creation_date": 1487173666, "post_id": 42253715, "comment_id": 71665538, "body": "What are you trying to do in that first loop?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1487173758, "post_id": 42253715, "comment_id": 71665625, "body": "Debugger.  Use the Debugger.  The Debugger can show you variable values at each statement.  Did I say to use the Debugger?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1487173762, "post_id": 42253715, "comment_id": 71665630, "body": "Visual Studio has a debugger. You need to use it."}, {"owner": {"reputation": 203, "user_id": 5516338, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LzZuH.jpg?s=128&g=1", "display_name": "\u0110or\u0111e Milanovi\u0107", "link": "https://stackoverflow.com/users/5516338/%c4%90or%c4%91e-milanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1487173801, "post_id": 42253715, "comment_id": 71665656, "body": "To set all values of vector to be 1, give field[0][0], field[1][1]....field[n-1][m-1] values of 1"}, {"owner": {"reputation": 203, "user_id": 5516338, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LzZuH.jpg?s=128&g=1", "display_name": "\u0110or\u0111e Milanovi\u0107", "link": "https://stackoverflow.com/users/5516338/%c4%90or%c4%91e-milanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1487174076, "post_id": 42253715, "comment_id": 71665868, "body": "Fred Larson and Thomas Matthews, I don&#39;t know how to use debugger and how to see variable values"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1487174254, "post_id": 42253715, "comment_id": 71666032, "body": "Then learn to use a debugger. It is more important then knowing all the ins and outs of a programming language. It helps you in solving these problems. Really: first learn to use a debugger, then start writing your own code."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1487178797, "post_id": 42253715, "comment_id": 71669530, "body": "<code>#include &lt;minmax.h&gt;</code> is wrong. Use <code>#include &lt;algorithm&gt;</code> to get <code>std::min</code> and <code>std::max</code>. Don&#39;t use <code>using namespace std;</code>. And if you ever get problems due to <code>&lt;windows.h&gt;</code>&#39;s stupid <code>min</code> and <code>max</code> macros, make Visual Studio define <code>NOMINMAX</code> when it invokes Visual C++ on the *.cpp file."}], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 5516338, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LzZuH.jpg?s=128&g=1", "display_name": "\u0110or\u0111e Milanovi\u0107", "link": "https://stackoverflow.com/users/5516338/%c4%90or%c4%91e-milanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1487174903, "post_id": 42254367, "comment_id": 71666585, "body": "Mistake with m instead of n was a typo, but"}, {"owner": {"reputation": 203, "user_id": 5516338, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LzZuH.jpg?s=128&g=1", "display_name": "\u0110or\u0111e Milanovi\u0107", "link": "https://stackoverflow.com/users/5516338/%c4%90or%c4%91e-milanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1487175070, "post_id": 42254367, "comment_id": 71666714, "body": "Thank you, I have corrected mistake and now it is working, i haven&#39;t know that I can do &quot;field[i].resize(m, 1)&quot; this but now it is helpful."}], "tags": [], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "is_accepted": true, "score": 0, "last_activity_date": 1487174676, "creation_date": 1487174676, "answer_id": 42254367, "question_id": 42253715, "link": "https://stackoverflow.com/questions/42253715/c-in-visual-studio-2017-cant-input-variables-which-are-in-loop/42254367#42254367", "title": "C++ in Visual Studio 2017, can&#39;t input variables which are in loop", "body": "<pre><code>vector&lt;vector&lt;unsigned short&gt; &gt; field;\nfield.resize(n);\n\nfor (ull i = 0; i &lt; m; i++)\n    for (ull j = 0; j &lt; m; j++)\n        field[i].push_back(1);\n</code></pre>\n\n<p>there's a mistake already there. <code>m</code> instead of <code>n</code></p>\n\n<pre><code>for (ull i = 0; i &lt; n; i++)\n</code></pre>\n\n<p>You should properly name your variables. <code>n</code> is not a good name. <code>numberOfRows</code> or <code>rowCount</code> or <code>matrixDimension1</code> could be better.</p>\n\n<p>By the way, use stl.</p>\n\n<pre><code>for (ull i = 0; i &lt; n; i++)\n    for (ull j = 0; j &lt; m; j++)\n        field[i].push_back(1);\n</code></pre>\n\n<p>could be</p>\n\n<pre><code>for (ull i = 0; i &lt; field.size(); i++)\n    field[i].resize(m, 1);\n</code></pre>\n\n<p>And it could be more simple. Just look at examples online.</p>\n"}], "owner": {"reputation": 203, "user_id": 5516338, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LzZuH.jpg?s=128&g=1", "display_name": "\u0110or\u0111e Milanovi\u0107", "link": "https://stackoverflow.com/users/5516338/%c4%90or%c4%91e-milanovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "closed_date": 1487179817, "accepted_answer_id": 42254367, "answer_count": 1, "score": 0, "last_activity_date": 1487174676, "creation_date": 1487173071, "last_edit_date": 1487173353, "question_id": 42253715, "link": "https://stackoverflow.com/questions/42253715/c-in-visual-studio-2017-cant-input-variables-which-are-in-loop", "closed_reason": "Not suitable for this site", "title": "C++ in Visual Studio 2017, can&#39;t input variables which are in loop", "body": "<p>I'm solving some simple problem, but I have a problem, I can only input variables N, M and P, I can't input variables tempX and tempY which are in loop, here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;minmax.h&gt;\n\nusing namespace std;\n\ntypedef unsigned long long ull;\n\nint main() {\null n, m, p;\ncin &gt;&gt; n &gt;&gt; m &gt;&gt; p;\n\nvector&lt;vector&lt;unsigned short&gt; &gt; field;\nfield.resize(n);\n\nfor (ull i = 0; i &lt; m; i++)\n    for (ull j = 0; j &lt; m; j++)\n        field[i].push_back(1);\n\n\n\nfor (ull i = 0; i &lt; p; i++) {\n    ull tempX, tempY;\n    cin &gt;&gt; tempX &gt;&gt; tempY;\n    field[tempX][tempY] = 0;\n}\n\nfor (ull i = 1; i &lt; n; i++)\n    for (ull j = 1; j &lt; m; j++)\n        if (field[i - 1][j - 1] != 0 &amp;&amp; field[i][j] != 0)\n            field[i][j] = min(field[i - 1][j], field[i][j - 1]) + 1;\n\null maxLength = 0;\nfor (ull i = 0; i &lt; n; i++)\n    for (ull j = 0; j &lt; m; j++)\n        maxLength = max(maxLength, field[i][j]);\n\ncout &lt;&lt; maxLength &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>Btw. I had problems with printing simple text with cout, there was no problem in code but something is preventing printing simple text like \"Hello world\", is that connected in any way with this problem?</p>\n"}, {"tags": ["c++", "linux", "signals"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4610212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2232505ad4d818bdfa923be4cccd38?s=128&d=identicon&r=PG&f=1", "display_name": "sorth", "link": "https://stackoverflow.com/users/4610212/sorth"}, "edited": false, "score": 0, "creation_date": 1487246311, "post_id": 42272869, "comment_id": 71702614, "body": "Thanks a lot. I read the man page too much and was blind to solve this on my own. Make sense because otherwise I could just have used the poll function."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 0, "last_activity_date": 1487245060, "creation_date": 1487245060, "answer_id": 42272869, "question_id": 42253708, "link": "https://stackoverflow.com/questions/42253708/signals-in-ppoll-not-handled-immediately/42272869#42272869", "title": "Signals in ppoll not handled immediately", "body": "<p>When you called <code>ppoll</code>, you told it to block <code>SIGINT</code> and <code>SIGTERM</code> by passing them in the signal mask.</p>\n"}], "owner": {"reputation": 3, "user_id": 4610212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2232505ad4d818bdfa923be4cccd38?s=128&d=identicon&r=PG&f=1", "display_name": "sorth", "link": "https://stackoverflow.com/users/4610212/sorth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 42272869, "answer_count": 1, "score": 0, "last_activity_date": 1487245060, "creation_date": 1487173057, "last_edit_date": 1487244288, "question_id": 42253708, "link": "https://stackoverflow.com/questions/42253708/signals-in-ppoll-not-handled-immediately", "title": "Signals in ppoll not handled immediately", "body": "<p>I wrote a small ppoll test but I am confused about the signal handling. The man page says:</p>\n\n<blockquote>\n  <p>The relationship between poll() and ppoll() is analogous to the relationship between select(2) and pselect(2): like pselect(2), ppoll() allows an application to safely wait until either a file descriptor becomes ready or until a signal is caught.</p>\n</blockquote>\n\n<p>In my case fd changes are handled immediately while signals are handled after the timeout. I used ctr-c in the process context and kill from another shell but always the same behavior.</p>\n\n<p>What am I doing wrong? Did I miss something?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;poll.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid handleSignal(int signal)\n{\n    switch(signal)\n    {\n        case SIGINT:\n            std::cerr &lt;&lt; \"sigint\" &lt;&lt; std::endl;\n            break;\n        case SIGTERM:\n            std::cerr &lt;&lt; \"sigterm\" &lt;&lt; std::endl;\n            break;\n        default:\n            std::cerr &lt;&lt; \"sig=\" &lt;&lt; signal &lt;&lt; std::endl;\n            break;\n    }\n}\n\nint main(int argc, char* argv[])\n{\n    int result;\n    FILE *fd = fopen(\"/tmp/tmpFile\", \"r\");\n    result = fileno(fd);\n    if(-1 == result)\n    {\n        std::cerr &lt;&lt; \"could not open temp file\"  &lt;&lt; std::endl;\n        return EXIT_FAILURE;\n    }\n\n    pollfd fds[2];\n    fds[0] = { 0, POLLIN, 0 };\n    fds[1] = {result, POLLIN, 0 };\n\n    sigset_t mySigset, oldSigset;\n    sigemptyset(&amp;mySigset);\n    sigaddset(&amp;mySigset, SIGINT);\n    sigaddset(&amp;mySigset, SIGTERM);\n\n    struct sigaction mySigHandler;\n    mySigHandler.sa_handler = &amp;handleSignal;\n    mySigHandler.sa_flags = 0;\n    sigemptyset(&amp;mySigHandler.sa_mask);\n    sigaction(SIGINT, &amp;mySigHandler, NULL);\n    sigaction(SIGTERM, &amp;mySigHandler, NULL);\n\n    char buffer[1024];\n    timespec time;\n    while(true)\n    {\n        time = {20, 0};\n        result = ppoll(&amp;fds[0], 2, &amp;time, &amp;mySigset);\n        if(0 == result)\n        {\n            // timeout\n            std::cout &lt;&lt; \"ppoll timeout\" &lt;&lt; std::endl;\n        }\n        else if(0 &gt; result)\n        {\n            // error\n            std::cerr &lt;&lt; \"ppoll error\" &lt;&lt; std::endl;\n        }\n        else\n        {\n            // at least one fd changed\n            std::cout &lt;&lt; \"active fds: \" &lt;&lt; result &lt;&lt; std::endl;\n\n            for(int i = 0; i &lt; 2; i++)\n            {\n                if(fds[i].revents &amp; POLLIN)\n                {\n                    result = read(fds[i].fd, buffer, 1024);\n                    if (-1 == result)\n                    {\n                        std::cerr &lt;&lt; \"error while reading fd \" &lt;&lt; fds[i].fd &lt;&lt; std::endl;\n                    }\n                    else if(0 &lt; result)\n                    {\n                        buffer[result] = '\\0';\n                        std::cout &lt;&lt; \"read fd \" &lt;&lt; fds[i].fd &lt;&lt; \": \" &lt;&lt; buffer &lt;&lt; std::endl;\n                    }\n                }\n            }\n        }\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1487173221, "post_id": 42253672, "comment_id": 71665203, "body": "You may be running into a windows WDDM TDR timeout.  On windows for a GPU in WDDM mode (which yours will be), kernels are limited to about 2 seconds of execution time.  Beyond that, windows will reset the GPU and you may see a message &quot;the display driver stopped responding ...&quot; in the windows system tray.  The CUDA kernel itself has been terminated at that point, and the CUDA error code can be one of several, including the one you mention.  Also, please don&#39;t put in pictures of your code, please copy and paste the code text into the question."}, {"owner": {"reputation": 1, "user_id": 7569752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e4d82b4f199400c4bce9b7fd0a7de0?s=128&d=identicon&r=PG&f=1", "display_name": "Ziqi Pan", "link": "https://stackoverflow.com/users/7569752/ziqi-pan"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1487211516, "post_id": 42253672, "comment_id": 71684537, "body": "Thank you very much. I disabled TDR and it works now. Thank you!"}], "owner": {"reputation": 1, "user_id": 7569752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e4d82b4f199400c4bce9b7fd0a7de0?s=128&d=identicon&r=PG&f=1", "display_name": "Ziqi Pan", "link": "https://stackoverflow.com/users/7569752/ziqi-pan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1487214177, "answer_count": 0, "score": 0, "last_activity_date": 1487173762, "creation_date": 1487172970, "last_edit_date": 1487173762, "question_id": 42253672, "link": "https://stackoverflow.com/questions/42253672/for-loop-in-kernel-function-causes-unspecific-launch-failure-error", "closed_reason": "Duplicate", "title": "for loop in kernel function causes &quot;unspecific launch failure&quot; error", "body": "<p>when I using a for loop which contains large numbers of cycles, the error \"unspecific launch failure\"will occur.\nmy code is as followed:</p>\n\n<pre><code>//Kernel function\n__global__ void Kernel(double *M_gpu, int size)\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        M_gpu[i] = i / 2 + 6;\n    }\n}\n\nint main()\n{\n    cudaError_t cudaStatus;\n    //Allocating CPU space\n    int size = 10000000;\n    double *M = (double *)malloc(sizeof(double)*size);\n    //Allocating GPU space\n    double *M_gpu;\n    cudaStatus = cudaMalloc((void**)&amp;M_gpu, sizeof(double)*size); \n    if (cudaStatus != cudaSuccess) \n    { \n        cout &lt;&lt; \"Allocating CPU space failed\uff01\" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; endl; getchar(); exit(0);\n    }\n    //calling Kernel function\n    Kernel &lt;&lt; &lt;1, 1 &gt;&gt; &gt; (M_gpu, size);\n    cudaDeviceSynchronize();\n    cudaStatus = cudaGetLastError(); \n    if (cudaStatus != cudaSuccess) \n    { \n        cout &lt;&lt; \"Calling Kernel function failed\uff01\" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; endl; getchar(); exit(0);\n    }\n    //copying data from GPU to CPU\n    cudaStatus = cudaMemcpy(M, M_gpu, sizeof(double)*size, cudaMemcpyDeviceToHost); \n    if (cudaStatus != cudaSuccess) \n    { \n        cout &lt;&lt; \"Copying data from GPU to CPU failed\uff01\" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; endl; getchar(); exit(0);\n    }\n    //END\n    cout &lt;&lt; \"Success!\" &lt;&lt; endl;\n    getchar();\n}\n</code></pre>\n\n<p>My operating system is Win10 64bit and my GPU is GTX860M with 4GB memory and my CUDA version is 8.0. I using Visual Studio 2015 community.\nI know it is not good to do something like that because it performs badly. But I just want to know what is wrong with the code above,it seems good logically and it can be certain of no memory allocating error occurred. is there some limitations to kernel function?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1487172999, "post_id": 42253614, "comment_id": 71665034, "body": "Please indent the code properly and explain exactly what you are doing when it works and when it doesn&#39;t. For example, the arguments you give it. A debugger would also be the first step to use to see what&#39;s happening and what arguments you get in. Spaces in filename?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487173002, "post_id": 42253614, "comment_id": 71665039, "body": "Unfortunately, it looks like your keyboard is broken and its TAB key doesn&#39;t work. As a result, the shown code is completely unreadable. Please get your keyboard fixed, and then use the fixed TAB key to logically indent your code, so that it&#39;s actually possible to read it and follow what it&#39;s doing."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1487173004, "post_id": 42253614, "comment_id": 71665041, "body": "Proper indentation would make this a lot more readable. Also I&#39;m sure you could make this sample a lot more minimal than it currently is. TIA."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1487173061, "post_id": 42253614, "comment_id": 71665076, "body": "If using VS press <code>ctrl</code> + <code>k</code> + <code>d</code>."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487173339, "post_id": 42253614, "comment_id": 71665293, "body": "To follow up Borgleader&#39;s comment: Make your example only count the number of lines.  That will reduce the length enormously.  Also: It&#39;s always worth making your &quot;error&quot; strings unique - even if it&#39;s just &quot;error 1&quot;, &quot;error 2&quot;."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1487174405, "post_id": 42253614, "comment_id": 71666175, "body": "If I understand correctly, you think it&#39;s strange that the program misbehaves if you use <code>argv[2]</code> when it&#39;s only given one file name. It&#39;s not clear why this would be strange."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1487174479, "post_id": 42253614, "comment_id": 71666240, "body": "You&#39;re probably expected to write a function that does the computations and call that several times rather than copy-and-paste, by the way."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1487174882, "post_id": 42253614, "comment_id": 71666573, "body": "By the way, instead of an empty &quot;then&quot; clause in your first <code>if</code> statement, negate the condition.  So make the condition &quot;argc &lt;= 1&quot;.  I don&#39;t know how <code>argc</code> can be 0, as the first parameter is the name of your executable."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1487174997, "post_id": 42253614, "comment_id": 71666666, "body": "I don&#39;t understand.  Your program is reading from 2 files because you explicitly tell it to.  This statement: <code>ifstream infile(argv[2]);</code> opens the second file."}, {"owner": {"reputation": 72, "user_id": 6926808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Ac4kXGnUnxA/AAAAAAAAAAI/AAAAAAAAAA0/M0WR4Bup9b0/photo.jpg?sz=128", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6926808/thomas"}, "edited": false, "score": 0, "creation_date": 1487176277, "post_id": 42253614, "comment_id": 71667660, "body": "I want it to read the two files, but I also want it to read just one. The reason I though it would be able read just one was because of <code>ifstream infile(argv[1]);</code> which would read the first file. The thought I had was that if no second file existed then it would  just ignore ` ifstream infile(argv[2]);` since the next if statement would be false."}, {"owner": {"reputation": 72, "user_id": 6926808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Ac4kXGnUnxA/AAAAAAAAAAI/AAAAAAAAAA0/M0WR4Bup9b0/photo.jpg?sz=128", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6926808/thomas"}, "edited": false, "score": 0, "creation_date": 1487182434, "post_id": 42253614, "comment_id": 71671894, "body": "was able to fix it."}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1487414065, "post_id": 42253614, "comment_id": 71781902, "body": "Why do you have an empty if statement <code>if(argv &gt; 1){}else{...}</code>? It would be much better to simply do <code>if(argv &lt;= 1){...}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1487174767, "post_id": 42254213, "comment_id": 71666465, "body": "Will you write code for other posters?  <i>How</i> does your code resolve the OP&#39;s issue?"}, {"owner": {"reputation": 334, "user_id": 4588820, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-ati9TlgTIMs/AAAAAAAAAAI/AAAAAAAAAT0/qRcXvD-P_5g/photo.jpg?sz=128", "display_name": "hcnak", "link": "https://stackoverflow.com/users/4588820/hcnak"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1487223373, "post_id": 42254213, "comment_id": 71688210, "body": "This code snippet can read one file as well as any number of files."}], "tags": [], "owner": {"reputation": 334, "user_id": 4588820, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-ati9TlgTIMs/AAAAAAAAAAI/AAAAAAAAAT0/qRcXvD-P_5g/photo.jpg?sz=128", "display_name": "hcnak", "link": "https://stackoverflow.com/users/4588820/hcnak"}, "is_accepted": false, "score": 0, "last_activity_date": 1487177532, "last_edit_date": 1487177532, "creation_date": 1487174334, "answer_id": 42254213, "question_id": 42253614, "link": "https://stackoverflow.com/questions/42253614/c-program-process-two-files-and-not-one/42254213#42254213", "title": "C++ Program process two files and not one", "body": "<p>This works for any number of files input.</p>\n\n<p>Hope this helpful to you.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[]) {\n  if (argc &gt; 1) {\n    int countline = 0;\n    int countspace = 0;\n    int charcount = 0;\n    for (int i = 1; i &lt; argc; i++) {\n      ifstream infile(argv[i]); // open the file\n      if (infile.is_open() &amp;&amp; infile.good()) {\n        string line2 = \"\";\n        int countline2 = 0;\n        int charcount2 = 0;\n        char space2;\n        int countspace2 = 0;\n        int empty2 = 0;\n        while (getline(infile, line2)) {\n          if (line2.empty()) {\n            empty2++;\n          }\n          countline2++;\n          charcount2 += line2.length() + 1;\n          for (int i = 0; i &lt; line2.length(); i++) {\n            if (line2[i] == ' ')\n              countspace2++;\n          }\n        }\n        countspace2 = (countline2 - empty2) + countspace2;\n        countline += countline2;\n\n        countspace += countspace2;\n\n        charcount += charcount2;\n        cout &lt;&lt; setw(12) &lt;&lt; countline2;\n        cout &lt;&lt; setw(12) &lt;&lt; countspace2;\n        cout &lt;&lt; setw(12) &lt;&lt; charcount2 &lt;&lt; \" \";\n        cout &lt;&lt; argv[i] &lt;&lt; endl;\n        cout &lt;&lt; setw(12) &lt;&lt; countline;\n        cout &lt;&lt; setw(12) &lt;&lt; countspace;\n        cout &lt;&lt; setw(12) &lt;&lt; charcount &lt;&lt; \" \";\n        cout &lt;&lt; \"totals\" &lt;&lt; endl;\n      }\n      infile.close();\n    }\n  } else {\n    cout &lt;&lt; \"File anInvalidFileName is not found\" &lt;&lt; endl;\n    return -1;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 72, "user_id": 6926808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Ac4kXGnUnxA/AAAAAAAAAAI/AAAAAAAAAA0/M0WR4Bup9b0/photo.jpg?sz=128", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6926808/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487413993, "creation_date": 1487172831, "last_edit_date": 1487413993, "question_id": 42253614, "link": "https://stackoverflow.com/questions/42253614/c-program-process-two-files-and-not-one", "title": "C++ Program process two files and not one", "body": "<p>So, for an assignment I had to read a file and count its line , words , and chars. The issue is that the program I wrote would read two files but not one, the program would view the text file as something that it can not open and is sent to an else statement. I feel that maybe I messed something up, but I find it strange that it can reads two files and not one.\nCode:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt; // for file-access\n#include &lt;iomanip&gt;\n\nusing namespace std;\nint main(int argc, char* argv[])\n{\n    if (argc &gt; 1){}\n    else\n    {\n        cout &lt;&lt; \"File anInvalidFileName is not found\" &lt;&lt; endl;\n        return -1;\n    }\n    ifstream infile(argv[1]);\n\n    if (infile.is_open() &amp;&amp; infile.good())\n    {\n        string line1 = \"\";\n        int countline1 = 0;\n        int charcount1 = 0;\n        char space1;\n        int countspace1 = 0;\n        int empty1 = 0;\n        while (getline(infile, line1))\n        {\n            if (line1.empty())\n            {\n                empty1++;\n            }\n            countline1++;\n            charcount1 += line1.length() + 1;\n            for (int i = 0; i &lt; line1.length(); i++)\n            {\n                if (line1[i] == ' ')\n                {\n                    countspace1++;\n                }\n            }\n        }\n        countspace1 = (countline1 - empty1) + countspace1;\n        ifstream infile(argv[2]); //open the file\n        if (infile.is_open() &amp;&amp; infile.good())\n        {\n            string line2 = \"\";\n            int countline2 = 0;\n            int charcount2 = 0;\n            char space2;\n            int countspace2 = 0;\n            int empty2 = 0;\n            while (getline(infile, line2))\n            {\n                if (line2.empty())\n                {\n                    empty2++;\n                }\n                countline2++;\n                charcount2 += line2.length() + 1;\n                for (int i = 0; i &lt; line2.length(); i++)\n                {\n                    if (line2[i] == ' ')\n                    {\n                        countspace2++;\n                    }\n                }\n            }\n            countspace2 = (countline2 - empty2) + countspace2;\n            int countline = 0;\n            int countspace = 0;\n            int charcount = 0;\n            countline = countline1 + countline2;\n\n            countspace = countspace1 + countspace2;\n\n            charcount = charcount1 + charcount2;\n            cout &lt;&lt; setw(12) &lt;&lt; countline1;\n            cout &lt;&lt; setw(12) &lt;&lt; countspace1;\n            cout &lt;&lt; setw(12) &lt;&lt; charcount1 &lt;&lt; \" \";\n            cout &lt;&lt; argv[1] &lt;&lt; endl;\n            cout &lt;&lt; setw(12) &lt;&lt; countline2;\n            cout &lt;&lt; setw(12) &lt;&lt; countspace2;\n            cout &lt;&lt; setw(12) &lt;&lt; charcount2 &lt;&lt; \" \";\n            cout &lt;&lt; argv[2] &lt;&lt; endl;\n            cout &lt;&lt; setw(12) &lt;&lt; countline;\n            cout &lt;&lt; setw(12) &lt;&lt; countspace;\n            cout &lt;&lt; setw(12) &lt;&lt; charcount &lt;&lt; \" \";\n            cout &lt;&lt; \"totals\" &lt;&lt; endl;\n        }\n        else\n        {\n            cout &lt;&lt; \"error\" &lt;&lt; endl;\n        }\n        return 0;\n    }\n    else\n    {\n        cout &lt;&lt; \"error\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>The error output is something I added just to see where the one file gets sent to when it fails. It does go to the else, because when I run the program it prints out the error. As for input, the prof provided test cases that run automatically when the program is run.\nI feel it might be a simple mistake and maybe I miss understood how argv works, but any help would be welcome. If any more information is needed I'll try to add it.</p>\n"}, {"tags": ["c#", "c++", "wpf", "delphi", "direct2d"], "comments": [{"owner": {"reputation": 141, "user_id": 5463015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGKbb.jpg?s=128&g=1", "display_name": "Shaun Bebbers", "link": "https://stackoverflow.com/users/5463015/shaun-bebbers"}, "edited": false, "score": 1, "creation_date": 1487173041, "post_id": 42253592, "comment_id": 71665058, "body": "An example snippet of your code might be helpful here."}, {"owner": {"reputation": 3117, "user_id": 5615980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a3c026c1a72be812594861aeec8f56?s=128&d=identicon&r=PG&f=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/5615980/ron"}, "edited": false, "score": 0, "creation_date": 1487173240, "post_id": 42253592, "comment_id": 71665217, "body": "does setting <code>EdgeMode.Aliased</code> in  <code>RenderOptions</code> works?"}, {"owner": {"reputation": 1, "user_id": 12856924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ebf1e5b94e338d3860b8757b8d8cee?s=128&d=identicon&r=PG&f=1", "display_name": "user12856924", "link": "https://stackoverflow.com/users/12856924/user12856924"}, "reply_to_user": {"reputation": 3117, "user_id": 5615980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a3c026c1a72be812594861aeec8f56?s=128&d=identicon&r=PG&f=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/5615980/ron"}, "edited": false, "score": 0, "creation_date": 1487174317, "post_id": 42253592, "comment_id": 71666091, "body": "@Ramin: EdgeMode is from wpf? I use sharpDX. But i could also reproduce the same with a simple delphi application."}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 0, "creation_date": 1487221962, "post_id": 42253592, "comment_id": 71687683, "body": "@soeren.dd: half pixel shifts you&#39;re seeing are normal, WPF/D2D is using fractional coordinates, that could be snapped or not. Think of it as if 0.0 position was exactly at the left edge of a pixel, and at the right edge of the preceding it (talking X direction). When you fill this pixel with some color, half of pixel at -1 and half of 0 one are filled. Which in case of AA obviously results in blending."}, {"owner": {"reputation": 1, "user_id": 12856924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ebf1e5b94e338d3860b8757b8d8cee?s=128&d=identicon&r=PG&f=1", "display_name": "user12856924", "link": "https://stackoverflow.com/users/12856924/user12856924"}, "reply_to_user": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 0, "creation_date": 1487273455, "post_id": 42253592, "comment_id": 71722519, "body": "@bunglehead: Thank you for your explanations. I&#39;m now aware of that half pixel shifting but have problems to correctly determine when i have to shift which coordinate. It seems that it should be possible to do it in an generic way because wpf does it."}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 0, "creation_date": 1487362355, "post_id": 42253592, "comment_id": 71768016, "body": "@soeren.dd: you can simply round arc control points to half pixel, don&#39;t know what&#39;s delphi equivalent would be, in C it will looks something like coord_x = floorf(coord_x) + 0.5f."}, {"owner": {"reputation": 1, "user_id": 12856924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ebf1e5b94e338d3860b8757b8d8cee?s=128&d=identicon&r=PG&f=1", "display_name": "user12856924", "link": "https://stackoverflow.com/users/12856924/user12856924"}, "reply_to_user": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 0, "creation_date": 1487446306, "post_id": 42253592, "comment_id": 71792657, "body": "@bunglehead: thanks for the hint. But this is what i already found out. The problem is that i have to do this with the startpoint of the geometry (BeginFigure). In the case the arc is horizontal as shown in the image i have to use the y coordinate and in case of a vertical arc i have to use x. The problem for me is that i cant know in advance if a arc is in the figure. Furthermore the endpoint of a line could be the startpoint of the arc"}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 0, "creation_date": 1487451618, "post_id": 42253592, "comment_id": 71794431, "body": "@soeren.dd&quot; well, sure. It obviously applies to both coordinates. Can you snap all control points regardless of figure type to half pixel?"}, {"owner": {"reputation": 1, "user_id": 12856924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ebf1e5b94e338d3860b8757b8d8cee?s=128&d=identicon&r=PG&f=1", "display_name": "user12856924", "link": "https://stackoverflow.com/users/12856924/user12856924"}, "reply_to_user": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "edited": false, "score": 0, "creation_date": 1487774608, "post_id": 42253592, "comment_id": 71936472, "body": "@bunglehead: No this wont work. If I add a half unit to every x and y i get the very same output. Furthermore the arc is sometimes not 180 degree (a bit more or less than 180 degree)"}], "owner": {"reputation": 1, "user_id": 12856924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ebf1e5b94e338d3860b8757b8d8cee?s=128&d=identicon&r=PG&f=1", "display_name": "user12856924", "link": "https://stackoverflow.com/users/12856924/user12856924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 732, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487176533, "creation_date": 1487172748, "last_edit_date": 1487176533, "question_id": 42253592, "link": "https://stackoverflow.com/questions/42253592/direct2d-drawing-arc-missing-pixels-and-irritating-antialiasing", "title": "Direct2D drawing arc missing pixels and irritating antialiasing", "body": "<p>When drawing arcs with pathgeometry and arc segments in d2d there are some glitches compared to other frameworks. I have created a zoomed version from a arc drawn with d2d and with wpf <a href=\"https://i.stack.imgur.com/ELPCp.png\" rel=\"nofollow noreferrer\">wpf vs d2d</a>. I have marked the areas which are imho not drawn correctly in direct2d. Does somebody know what caused such drawings?</p>\n\n<p>Sample code (SharpDX):</p>\n\n<pre><code>private static void TestRender(WindowRenderTarget renderTarget)\n{\n    var geo = new PathGeometry(d2dFactory);\n    var sink = geo.Open();\n\n    Vector2 off = new Vector2(40.0f, 70.0f);\n    var arc_1 = new ArcSegment()\n    {\n        ArcSize = ArcSize.Small,\n        RotationAngle = 0,\n        Point = off,\n        Size = new Size2F(22, 22),\n        SweepDirection = SweepDirection.CounterClockwise\n    };\n\n    sink.BeginFigure(new SharpDX.Mathematics.Interop.RawVector2(84, 70), FigureBegin.Filled);\n    sink.AddArc(arc_1);\n    sink.EndFigure(FigureEnd.Open);\n\n    sink.Close();\n\n    StrokeStyle strokeStyle = new StrokeStyle(d2dFactory, new StrokeStyleProperties()\n    {\n        DashCap = CapStyle.Flat,\n        DashStyle = DashStyle.Solid,\n        LineJoin = LineJoin.Miter,\n        StartCap = CapStyle.Flat,\n        EndCap = CapStyle.Flat,\n        MiterLimit = 0,\n        DashOffset = 0\n    }, new float[0]);\n\n    var testBrush = new SharpDX.Direct2D1.SolidColorBrush(\n        renderTarget,\n        new SharpDX.Mathematics.Interop.RawColor4(1.0f, 0.0f, 0.0f, 1.0f),\n        new SharpDX.Direct2D1.BrushProperties\n        {\n            Opacity = 1.0f,\n        }\n    );\n\n    renderTarget.DrawGeometry(geo, testBrush, 10, strokeStyle);\n    geo.Dispose();\n    sink.Dispose();\n\n}        \n</code></pre>\n\n<p>After digging a bit i have found that if i shift the starting point a half \"pixel\" in the y direction everything looks good. Question for me is now how to programmaticaly determine which coordinates needs to be transformed.\nFurthermore i wonder how wpf is doing this. I know about UseLayoutRounding and SnapToPixels. I'm interested how they (MS) are doing that for the various shapes.</p>\n"}, {"tags": ["c++", "udp", "ace"], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1487228910, "post_id": 42263197, "comment_id": 71690766, "body": "Hello, well I&#39;m trying to do both - send message so multiple receivers get it + allow multiple processes to receive on the same UDP port. For testing purposes I&#39;m sending it only to local computer to test if it can be received by multiple processes. I will check that example, thanks."}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 1, "creation_date": 1487232776, "post_id": 42263197, "comment_id": 71692847, "body": "Oh, so now when I use one dgram with (12345, &quot;10.10.0.255&quot;) for sending and another with (12345, ACE_LOCALHOST) for reception then I get all the messages."}], "tags": [], "owner": {"reputation": 834, "user_id": 240342, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d37b41f088769d49d7ce5906345973b2?s=128&d=identicon&r=PG", "display_name": "Steve Huston", "link": "https://stackoverflow.com/users/240342/steve-huston"}, "is_accepted": false, "score": 1, "last_activity_date": 1487208399, "creation_date": 1487208399, "answer_id": 42263197, "question_id": 42253491, "link": "https://stackoverflow.com/questions/42253491/ace-with-multiple-app-instances-on-same-pc-only-first-gets-the-message/42263197#42263197", "title": "ACE with multiple app instances on same pc - only first gets the message", "body": "<p>I'm not sure I understand what you are trying to do... send a message multicast so multiple receivers get it, or allow multiple processes to receive on the same UDP port unicast... I'm guessing the former.</p>\n\n<p>You're using the ACE_SOCK_Dgram_Mcast class but with unicast addressing and operations. So only one instance will receive that message.</p>\n\n<p>Check the ACE_wrappers/tests/Multicast_Test.cpp for examples of how to send and receive multicast.</p>\n"}], "owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487208399, "creation_date": 1487172486, "question_id": 42253491, "link": "https://stackoverflow.com/questions/42253491/ace-with-multiple-app-instances-on-same-pc-only-first-gets-the-message", "title": "ACE with multiple app instances on same pc - only first gets the message", "body": "<p>I'm trying to create application where multiple instances will run on same machine and they will communicate together via UDP via the same port.</p>\n\n<p>I was reading many threads on StackOverflow about it that it should be possible.</p>\n\n<p>Though, when I open connection from each application instance I can see that each instance sends a message but only first instance (if first is closed then second...) receives that message.</p>\n\n<p>I'm using ACE library for the communication. Excerpt from code:</p>\n\n<pre><code>ACE_SOCK_Dgram_Mcast dgram;\nACE_INET_Addr *listenAddress = new ACE_INET_Addr(12345, ACE_LOCALHOST);\ndgram.open(*listenAddress);\n\nACE_INET_Addr peer_address;\nchar buffer[1024];\n\ndgram.send(buffer, 256);\n\nwhile (true)\n{\n    if (dgram.recv(buffer, 256, peer_address, 0, &amp;receiveLoopTimeout) != -1)\n    {\n        std::cout &lt;&lt; \"Received\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>I also found out that if I call \"dgram.join(*listenAddress)\" then I get error, code ENODEV from the first instance of the app.</p>\n"}, {"tags": ["c++", "c++11", "standards", "thread-local", "thread-local-storage"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1487172603, "post_id": 42253482, "comment_id": 71664718, "body": "works for me: Apple LLVM version 8.0.0 (clang-800.0.42.1)"}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "edited": false, "score": 1, "creation_date": 1487172703, "post_id": 42253482, "comment_id": 71664800, "body": "Your code works in gcc 6.3 as well."}, {"owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1487172846, "post_id": 42253482, "comment_id": 71664905, "body": "seems to be a bug of clang 3.8."}, {"owner": {"reputation": 4258, "user_id": 1085699, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4Bql4.jpg?s=128&g=1", "display_name": "Nathaniel Johnson", "link": "https://stackoverflow.com/users/1085699/nathaniel-johnson"}, "edited": false, "score": 1, "creation_date": 1487173057, "post_id": 42253482, "comment_id": 71665071, "body": "Check out this site for comparing results of different compilations. <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a>"}, {"owner": {"reputation": 669, "user_id": 6657837, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d986b6b2e0d601fb485cfdc61335bec3?s=128&d=identicon&r=PG&f=1", "display_name": "Turkhan Badalov", "link": "https://stackoverflow.com/users/6657837/turkhan-badalov"}, "edited": false, "score": 1, "creation_date": 1487174231, "post_id": 42253482, "comment_id": 71666007, "body": "Just tested, it works pretty well with gnu++11 compiler. Output is 7"}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 1, "creation_date": 1487185701, "post_id": 42253482, "comment_id": 71673860, "body": "Also ok for g++ 6.2.0, 5.4.1 and 4.9.4"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1575566777, "post_id": 42253482, "comment_id": 104618492, "body": "since you mention both clang and VS, this might actually be a bad interaction between clang and the link.exe since the linker is naturally also involved in initialization routines getting called"}], "owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575563823, "creation_date": 1487172461, "last_edit_date": 1575563823, "question_id": 42253482, "link": "https://stackoverflow.com/questions/42253482/why-does-the-global-thread-local-variable-not-initialized-as-expected", "title": "Why does the global thread_local variable not initialized as expected?", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct A\n{\n    A() : n(7)\n    {}\n\n    int n;\n};\n\nthread_local A a;\n\nint main()\n{\n    cout &lt;&lt; a.n &lt;&lt; endl;\n}\n</code></pre>\n\n<p>My compiler is clang 3.8 shipped with VS 2015.</p>\n\n<p>To my surprise, the output is <code>0</code>, rather than <code>7</code> as expected.</p>\n\n<p>Why does the main thread not call <code>A::A()</code> to initialize the <code>global thread_local</code> variable <code>a</code>?</p>\n\n<p>Is it conforming to the C++ standard?</p>\n"}, {"tags": ["c++", "c++11", "gcc", "clang", "c++14"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1487173283, "post_id": 42253481, "comment_id": 71665251, "body": "This is ill-formed in C++11 and C++14 as explained <a href=\"http://stackoverflow.com/a/39778788/2756719\">here</a>. Not sure what GCC is playing at though."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1487173415, "post_id": 42253481, "comment_id": 71665354, "body": "@Quentin No, that restriction is specific to non-static members (despite the horrible naming, &quot;pointer to member&quot; is all about non-static members; pointers to static members are just plain pointers). That is, <code>struct S { static int i; }; int* p = &amp;(((((S::i)))));</code> is perfectly valid."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1487173540, "post_id": 42253481, "comment_id": 71665453, "body": "@T.C. yes, yes it is... Glad I didn&#39;t dupe-hammer that one. Thanks for clearing that up."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1487176650, "post_id": 42253481, "comment_id": 71667910, "body": "Side note: MSVS2015 also seems to have no problems with the code. even with <code>&#47;std:c++14</code> or <code>&#47;std:c++latest</code>"}], "owner": {"reputation": 3451, "user_id": 484307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e9dc069de2952af4cd0f1720e499d47?s=128&d=identicon&r=PG", "display_name": "Andrew Durward", "link": "https://stackoverflow.com/users/484307/andrew-durward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1487172450, "creation_date": 1487172450, "question_id": 42253481, "link": "https://stackoverflow.com/questions/42253481/parentheses-and-non-type-template-arguments-in-c14", "title": "Parentheses and non-type template arguments in C++14", "body": "<p>The following code compiles fine in GCC 6.3 with -std=c++11.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct MetaFunction\n{\n    static int value;\n};\n\n#define MY_MACRO(T) (MetaFunction&lt;T&gt;::value)\n\ntemplate &lt;class T, const int* p = &amp;MY_MACRO(T)&gt;\nstruct Foo\n{\n    void DoSomething()\n    {\n    }\n};\n\nint main()\n{\n    Foo&lt; int &gt; f;\n    f.DoSomething();\n}\n</code></pre>\n\n<p>But if -std=c++14 is specified then it emits the following error:</p>\n\n<pre><code>main.cpp:19:14: error: '&amp; MetaFunction&lt;int&gt;::value' is not a valid template argument for 'const int*' because it is not the address of a variable\n     Foo&lt; int &gt; f;\n              ^\n</code></pre>\n\n<p>Clang 3.8 gives a similar error whether -std=c++11 or -std=c++14 is specified.</p>\n\n<pre><code>main.cpp:11:36: error: non-type template argument does not refer to any declaration\ntemplate &lt;class T, const int* p = &amp;MY_MACRO(T)&gt;\n                                   ^~~~~~~~~~~\n</code></pre>\n\n<p>Changing <code>MY_MACRO(T)</code> from <code>(MetaFunction&lt;T&gt;::value)</code> to <code>MetaFunction&lt;T&gt;::value</code> fixes the problem.</p>\n\n<p>Which compiler is correct here?  Does the C++14 standard include a change that makes GCC's behaviour expected?  Or is Clang right to emit an error under C++11 as well?</p>\n"}, {"tags": ["c++", "templates", "operator-overloading", "ostream"], "comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487175580, "post_id": 42253480, "comment_id": 71667107, "body": "If C++11 is available for your target platform, you may want to declare the iterator&#39;s type as <code>auto</code>, so the compiler can deduce the correct type for you.  It&#39;s a lot easier to type, in both senses of the word."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1487174982, "last_edit_date": 1487174982, "creation_date": 1487173009, "answer_id": 42253689, "question_id": 42253480, "link": "https://stackoverflow.com/questions/42253480/overloading-ostream-of-vector-template-with-iterator/42253689#42253689", "title": "Overloading ostream of vector template with iterator", "body": "<p>Try with </p>\n\n<pre><code>typename vector&lt;U&gt;::const_iterator it = rhs.v.begin();\n</code></pre>\n\n<p>If your <code>rsh</code> is <code>const</code>, you should use a <code>const_iterator</code></p>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 2, "last_activity_date": 1487208924, "last_edit_date": 1487208924, "creation_date": 1487173248, "answer_id": 42253783, "question_id": 42253480, "link": "https://stackoverflow.com/questions/42253480/overloading-ostream-of-vector-template-with-iterator/42253783#42253783", "title": "Overloading ostream of vector template with iterator", "body": "<ol>\n<li><p>Note that <code>rhs</code> is declared as reference to <code>const</code>, then <code>rhs.v</code> will be <code>const</code> too, then <code>rhs.v.begin()</code> will return a <code>std::vector&lt;U&gt;::const_iterator</code>, which can't be converted to <code>std::vector&lt;U&gt;::iterator</code> directly.</p></li>\n<li><p>You should use <a href=\"http://en.cppreference.com/w/cpp/keyword/typename\" rel=\"nofollow noreferrer\">typename</a> for <a href=\"http://en.cppreference.com/w/cpp/language/dependent_name\" rel=\"nofollow noreferrer\">dependent type names</a>.</p></li>\n</ol>\n\n<p>So change it to</p>\n\n<pre><code>typename vector&lt;U&gt;::const_iterator it = rhs.v.begin();\n</code></pre>\n\n<p>BTW: <code>void main()</code> should be <code>int main()</code>.</p>\n"}], "owner": {"reputation": 465, "user_id": 5182818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/fdb18ed57b555021be54c21f3b0fb51c?s=128&d=identicon&r=PG&f=1", "display_name": "Dannz", "link": "https://stackoverflow.com/users/5182818/dannz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 42253783, "answer_count": 2, "score": 1, "last_activity_date": 1487221342, "creation_date": 1487172450, "last_edit_date": 1487221342, "question_id": 42253480, "link": "https://stackoverflow.com/questions/42253480/overloading-ostream-of-vector-template-with-iterator", "title": "Overloading ostream of vector template with iterator", "body": "<p><strong>Why I can't use iterator in ostream overloading?</strong></p>\n\n<p>If I use the same declaration using iterative approach it works.</p>\n\n<p>Consider the following code:</p>\n\n<pre><code>template &lt;class T&gt;\nclass List {\n    template &lt;class U&gt;\n    friend ostream &amp;operator&lt;&lt;(ostream &amp;os, const List&lt;U&gt; &amp;rhs);\nprivate:\n    vector&lt;T&gt; v;\n};\n\ntemplate&lt;class U&gt;\nostream &amp; operator&lt;&lt;(ostream &amp; os, const List&lt;U&gt;&amp; rhs)\n{\n    vector&lt;U&gt;::iterator it = rhs.v.begin();\n    return os;\n}\n\nint main()\n{\n    List&lt;int&gt; list;\n    cout &lt;&lt; list &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost"], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487174038, "post_id": 42254053, "comment_id": 71665837, "body": "Probably custom comparator as well."}, {"owner": {"reputation": 197, "user_id": 7422950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d528a0e80c79053a63c2a8d9fa94a90b?s=128&d=identicon&r=PG&f=1", "display_name": "J Bramble", "link": "https://stackoverflow.com/users/7422950/j-bramble"}, "edited": false, "score": 0, "creation_date": 1487236613, "post_id": 42254053, "comment_id": 71695324, "body": "I am indeed using C++11 but why does that mean I should use std in preference to boost?"}], "tags": [], "owner": {"reputation": 592, "user_id": 6672815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6c8d74588b5dbf028aeed0e33b8ee5?s=128&d=identicon&r=PG&f=1", "display_name": "virgesmith", "link": "https://stackoverflow.com/users/6672815/virgesmith"}, "is_accepted": false, "score": 3, "last_activity_date": 1487173950, "creation_date": 1487173950, "answer_id": 42254053, "question_id": 42253475, "link": "https://stackoverflow.com/questions/42253475/can-boostunordered-map-be-used-with-stdshared-ptr/42254053#42254053", "title": "Can boost::unordered_map be used with std::shared_ptr?", "body": "<p>Sounds like you're using C++11 in which case you should use <code>std::shared_ptr</code> and <code>std::unordered_map</code>. But whatever you do, be consistent - mixing different shared_ptr types will bring a world of pain.</p>\n\n<p>If the <code>shared_ptr</code> is the <code>mapped_type</code> then you're probably good to go. \nIf it's the <code>key_type</code> you'll need a custom hash.</p>\n"}], "owner": {"reputation": 197, "user_id": 7422950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d528a0e80c79053a63c2a8d9fa94a90b?s=128&d=identicon&r=PG&f=1", "display_name": "J Bramble", "link": "https://stackoverflow.com/users/7422950/j-bramble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487173950, "creation_date": 1487172432, "question_id": 42253475, "link": "https://stackoverflow.com/questions/42253475/can-boostunordered-map-be-used-with-stdshared-ptr", "title": "Can boost::unordered_map be used with std::shared_ptr?", "body": "<p>Can <code>boost::unordered_map</code> be used with values wrapped in <code>std::shared_ptr</code> without problems? I'm aware that <code>boost::shared_ptr</code> is also available.</p>\n\n<p>As a rule, if I'm using boost for my map, should I be using <code>boost::shared_ptr</code> and all boost's versions of the <code>std</code> stuff everywhere?</p>\n"}, {"tags": ["c++", "c++11", "serialization", "vector", "cereal"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7569429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/km2NY.png?s=128&g=1", "display_name": "AverageCoder", "link": "https://stackoverflow.com/users/7569429/averagecoder"}, "edited": false, "score": 0, "creation_date": 1487346280, "post_id": 42283293, "comment_id": 71758590, "body": "Specifying the std::ios::binary flag did not help. Using the operator() instead of operator&gt;&gt; did not make a change either. I think I have to dig deeper and strip my example further down or try loading within the same app."}, {"owner": {"reputation": 35, "user_id": 7569429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/km2NY.png?s=128&g=1", "display_name": "AverageCoder", "link": "https://stackoverflow.com/users/7569429/averagecoder"}, "edited": false, "score": 0, "creation_date": 1487661577, "post_id": 42283293, "comment_id": 71872137, "body": "Serializing and deserializing within the same application makes no difference. It also fails. The next thing I will try is the following: My allData std::vector is reserved to a bigger size than what will eventually end in it (size &lt; reserved), perhaps that is a problem on serializing. I will update the question here according to my findings what worked and also what didn&#39;t work."}, {"owner": {"reputation": 1572, "user_id": 710791, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5fbc434a719276d6561f6a8f6d1b6a?s=128&d=identicon&r=PG", "display_name": "Azoth", "link": "https://stackoverflow.com/users/710791/azoth"}, "reply_to_user": {"reputation": 35, "user_id": 7569429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/km2NY.png?s=128&g=1", "display_name": "AverageCoder", "link": "https://stackoverflow.com/users/7569429/averagecoder"}, "edited": false, "score": 0, "creation_date": 1487710753, "post_id": 42283293, "comment_id": 71904718, "body": "cereal resizes the vector appropriately during a load - your reserved capacity shouldn&#39;t make any difference. I encourage you to look again at the example I posted and those on the cereal website, as from your descriptions I think you are making a simple interface error somewhere that is causing your problems."}, {"owner": {"reputation": 35, "user_id": 7569429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/km2NY.png?s=128&g=1", "display_name": "AverageCoder", "link": "https://stackoverflow.com/users/7569429/averagecoder"}, "edited": false, "score": 0, "creation_date": 1488980570, "post_id": 42283293, "comment_id": 72470475, "body": "To give a short update: I haven&#39;t yet found what the issue was but for now the situation is: After changing some calculations in myClass of the idxs member, the new output can be read by cereal as portableBinaryArchive. The number of items in the allData-vector is now only half of what it was originally (now ~8K items of myClass, formerly ~16K). However, opening the failing old archive via JSON (what works) and the new archive via portableBinaryArchive, I can see no difference in structure in the debugger. I am a bit stumped what to learn from all that, as I don&#39;t think it is a size issue."}, {"owner": {"reputation": 35, "user_id": 7569429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/km2NY.png?s=128&g=1", "display_name": "AverageCoder", "link": "https://stackoverflow.com/users/7569429/averagecoder"}, "edited": false, "score": 0, "creation_date": 1488980692, "post_id": 42283293, "comment_id": 72470562, "body": "As the problem probably is somewhere on my side, I will accept this answer as it answered my question such that I am not doing anything fundamentally wrong here :-) Thanks again, @Azoth."}], "tags": [], "owner": {"reputation": 1572, "user_id": 710791, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5fbc434a719276d6561f6a8f6d1b6a?s=128&d=identicon&r=PG", "display_name": "Azoth", "link": "https://stackoverflow.com/users/710791/azoth"}, "is_accepted": true, "score": 0, "last_activity_date": 1487274520, "creation_date": 1487274520, "answer_id": 42283293, "question_id": 42253474, "link": "https://stackoverflow.com/questions/42253474/trouble-deserializing-cereal-portablebinaryarchive/42283293#42283293", "title": "Trouble deserializing cereal PortableBinaryArchive", "body": "<p>There is nothing wrong with your class in regards to your serialization code. You do not need to provide serialization for enums, it is included automatically via <code>cereal/types/common.hpp</code>. The order that your fields are serialized in does not matter.</p>\n\n<p>Your error comes in not using the archives properly when performing loading and saving. cereal handles all of the interface with the stream, so you should not use the streaming operators (i.e. <code>&lt;&lt;</code> or <code>&gt;&gt;</code>) directly on a cereal archive. Take another look at the examples on the cereal website and you'll notice that whenever there is interaction with a cereal archive, it is done through the <code>()</code> operator.</p>\n\n<p>You should also ensure that you are using the appropriate flag (<code>std::ios::binary</code>) when operating on streams that deal with binary data - this can prevent some problems that are hard to debug.</p>\n\n<p>Here is a working example using your class where I'm saving to an in-memory stream rather than a file, but the principle is the same:</p>\n\n<pre><code>#include &lt;cereal/archives/portable_binary.hpp&gt;\n#include &lt;cereal/archives/json.hpp&gt;\n#include &lt;cereal/types/vector.hpp&gt;\n#include &lt;algorithm&gt;\n#include &lt;sstream&gt;\n\nenum class myType {\n    None, unset, Type1, Type2, Type3\n};\n\nclass myClass\n{\npublic:\n  myClass() = default;\n  myClass( myType mt, size_t i ) : isvalid( true ), dtype( mt ),\n                                idxs( i )\n  {\n    std::iota( idxs.begin(), idxs.end(), i );\n  }\n\n  std::vector&lt;size_t&gt; idxs;\n  myType dtype;\n  bool isvalid;\n\n  // This method lets cereal know which data members to serialize\n  template&lt;class Archive&gt;\n  void serialize(Archive &amp; archive)\n  {\n    archive(CEREAL_NVP(dtype), CEREAL_NVP(isvalid), CEREAL_NVP(idxs));\n  }\n};\n\nint main(int argc, char* argv[])\n{\n  std::vector&lt;myClass&gt; allData = {{myType::None, 3}, {myType::unset, 2}, {myType::Type3, 5}};\n\n  // When dealing with binary archives, always use the std::ios::binary flag\n  // I'm using a stringstream here just to avoid writing to file\n  std::stringstream ssb( std::ios::in | std::ios::out | std::ios::binary );\n  {\n    cereal::PortableBinaryOutputArchive arb(ssb);\n    // The JSON archive is only used to print out the data for display\n    cereal::JSONOutputArchive ar(std::cout);\n\n    arb( allData );\n    ar( allData );\n  }\n\n  {\n    cereal::PortableBinaryInputArchive arb(ssb);\n    cereal::JSONOutputArchive ar(std::cout);\n\n    std::vector&lt;myClass&gt; data;\n    arb( data );\n\n    // Write the data out again and visually inspect\n    ar( data );\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>and its output:</p>\n\n<pre><code>{\n    \"value0\": [\n        {\n            \"dtype\": 0,\n            \"isvalid\": true,\n            \"idxs\": [\n                3,\n                4,\n                5\n            ]\n        },\n        {\n            \"dtype\": 1,\n            \"isvalid\": true,\n            \"idxs\": [\n                2,\n                3\n            ]\n        },\n        {\n            \"dtype\": 4,\n            \"isvalid\": true,\n            \"idxs\": [\n                5,\n                6,\n                7,\n                8,\n                9\n            ]\n        }\n    ]\n}{\n    \"value0\": [\n        {\n            \"dtype\": 0,\n            \"isvalid\": true,\n            \"idxs\": [\n                3,\n                4,\n                5\n            ]\n        },\n        {\n            \"dtype\": 1,\n            \"isvalid\": true,\n            \"idxs\": [\n                2,\n                3\n            ]\n        },\n        {\n            \"dtype\": 4,\n            \"isvalid\": true,\n            \"idxs\": [\n                5,\n                6,\n                7,\n                8,\n                9\n            ]\n        }\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7569429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/km2NY.png?s=128&g=1", "display_name": "AverageCoder", "link": "https://stackoverflow.com/users/7569429/averagecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1136, "favorite_count": 0, "accepted_answer_id": 42283293, "answer_count": 1, "score": 0, "last_activity_date": 1487274520, "creation_date": 1487172429, "question_id": 42253474, "link": "https://stackoverflow.com/questions/42253474/trouble-deserializing-cereal-portablebinaryarchive", "title": "Trouble deserializing cereal PortableBinaryArchive", "body": "<p>I face a std::length exception using the cereal library to deserialize a std::vector full of a class of my own. I think it's easiest if I give some code. This is my class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"cereal/archives/portable_binary.hpp\"\n#include \"cereal/archives/json.hpp\"\n#include \"cereal/types/vector.hpp\"\n\nenum class myType {\n    None, unset, Type1, Type2, Type3\n};\n\nclass myClass\n{\npublic:\n    myClass();\n    myClass(size_t siz);\n    ~myClass();\n    std::vector&lt;size_t&gt; idxs;\n    myType dtype;\n    bool isvalid;\n\n    // This method lets cereal know which data members to serialize\n    template&lt;class Archive&gt;\n    void serialize(Archive &amp; archive)\n    {\n        archive(CEREAL_NVP(dtype), CEREAL_NVP(isvalid), CEREAL_NVP(idxs));\n    }\nprotected:\nprivate:\n};\n</code></pre>\n\n<p>The idxs member is not necessarily always of the same size. \nAfter some calculations I then obtain a </p>\n\n<pre><code>std::vector&lt;myClass&gt; allData;\n</code></pre>\n\n<p>which I want to serialize and later deserialize in another application. This is my code for serialization:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::ofstream ofile(allDataFilename.c_str());\nif (ofile.good())\n{\n    cereal::PortableBinaryOutputArchive theArchive(ofile);\n    theArchive(allData);\n    //ofilefp.close();   // Do not close because of RAII where dtor of cereal archive does some work on file!\n}\nelse\n{\n    std::cout &lt;&lt; \"Serialization to portable binary archive failed. File not good.\" &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The generated data file is not null size and not all zero, so just from the looks it is fine.\nThis is what I do to deserialize in the other application:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::string allDataFilename(\"C:\\\\path\\\\to\\\\file\\\\data.dat\");\nstd::ifstream infile(allDataFilename.c_str());\nstd::vector&lt;myClass&gt; myDataFromDisk;\nif (infile.good())\n{\n    cereal::PortableBinaryInputArchive inArchive(infile);\n    inArchive &gt;&gt; myDataFromDisk;\n}\nelse\n{\n    std::cout &lt;&lt; \"Data file unavailable.\" &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>When I run this deserialization code, I get an exception \"std::length_error\". Somehow related discussion to this error is <a href=\"https://github.com/USCiLab/cereal/issues/192\" rel=\"nofollow noreferrer\">here</a> but to me it seems not to be relevant for my case. (Or is it?)</p>\n\n<p>I tried to de-/serialize with separate load/save functions, because I was not sure whether this part of the cereal documentation applies here:</p>\n\n<blockquote>\n  <p>When possible, it is preferred to use a single internal serialize\n  method, though split methods can be used when it is necessary (e.g. to\n  dynamically allocate memory upon loading a class).</p>\n</blockquote>\n\n<p>I also tried to archive each vector element of the idxs member separately in a range based for loop (like it is done in cereal internally anyway), but both things didn't help.</p>\n\n<p>Both applications are compiled with Visual Studio 2015 Update 3. I use the current cereal v1.2.2 but also tried with cereal v1.1.2 which gave me a bit-identical serialization result.</p>\n\n<p>As an aside: It works with a cereal JSON archive. But only after I changed the serialization call to</p>\n\n<pre><code>archive(CEREAL_NVP(dtype), CEREAL_NVP(isvalid), CEREAL_NVP(idxs));\n</code></pre>\n\n<p>whereas it didn't work with JSON when the vector member came first on serialization. But this might be completely unrelated.</p>\n\n<pre><code>archive(CEREAL_NVP(idxs), CEREAL_NVP(dtype), CEREAL_NVP(isvalid));\n</code></pre>\n\n<p>Now my questions:</p>\n\n<p>1) Is this the way serialization is supposed to work with cereal?</p>\n\n<p>2) Do I need to add more serialization functions? E.g. to the enum class?</p>\n\n<p>Best regards\nAverageCoder</p>\n"}, {"tags": ["c++", "class", "reference", "header", "undefined"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1487171760, "post_id": 42253203, "comment_id": 71664020, "body": "Is the <code>Name.cpp</code> file built and linked? Is it possible to see the actual build log in the IDE?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1487172064, "post_id": 42253203, "comment_id": 71664292, "body": "What you showed us does not produce the error you mentioned. It results in three other errors when trying to compile. Please provide a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 4135, "user_id": 7432026, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/086029d2b3708108351c782b35278dbc?s=128&d=identicon&r=PG", "display_name": "Anthony Krivonos", "link": "https://stackoverflow.com/users/7432026/anthony-krivonos"}, "edited": false, "score": 0, "creation_date": 1487174472, "post_id": 42253203, "comment_id": 71666233, "body": "The issue ended up being the compiler. Cloud9 did not automatically reference Name.h, Name.cpp, and Name_Main.cpp, and thus I needed to write the following code:  <code>g++ -o exec Name.h Name.cpp Name_Main.cpp</code>  I also tried compiling and running the files in a new XCode target, and it seemed to work just fine without the above line."}], "owner": {"reputation": 4135, "user_id": 7432026, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/086029d2b3708108351c782b35278dbc?s=128&d=identicon&r=PG", "display_name": "Anthony Krivonos", "link": "https://stackoverflow.com/users/7432026/anthony-krivonos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 1, "closed_date": 1487172047, "answer_count": 0, "score": 0, "last_activity_date": 1487171629, "creation_date": 1487171629, "question_id": 42253203, "link": "https://stackoverflow.com/questions/42253203/undefined-reference-to-class-constructor-and-functions-c", "closed_reason": "Duplicate", "title": "&#39;undefined reference&#39; to Class Constructor and Functions C++", "body": "<p>For my second semester of an introductory class for C++, I made a class called <code>Name.h</code> that contains the following information:</p>\n\n<pre><code>#ifndef NAME_H\n#define NAME_H\n\nclass Name\n{\n   private:\n      string firstName;\n      string lastName;\n      string middleInitial;\n   public:\n      Name();\n      Name(string, string, string);\n      void setName(string, string, string);\n      void setFirstName(string);\n      void setLastName(string);\n      void setMiddleInitial(string);\n      void display() const;\n      string getFirstName() const {\n         return firstName;\n      }\n      string getLastName() const {\n         return lastName;\n      }\n      string getMiddleInitial() const {\n         return middleInitial;\n      }\n};\n\n#endif\n</code></pre>\n\n<p>The implementation is provided in the file <code>Name.cpp</code> as shown below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n#include \"Name.h\"\n\nName::Name() {}\n\nName::Name(string firstName, string lastName, string middleInitial) {\n    this-&gt;firstName = firstName;\n    this-&gt;lastName = lastName;\n    this-&gt;middleInitial = middleInitial;\n}\n\nvoid Name::setName(string firstName, string lastName, string middleInitial) {\n    this-&gt;firstName = firstName;\n    this-&gt;lastName = lastName;\n    this-&gt;middleInitial = middleInitial;\n}\n\nvoid Name::setFirstName(string firstName) {\n    this-&gt;firstName = firstName;\n}\n\nvoid Name::setLastName(string lastName) {\n    this-&gt;lastName = lastName;\n}\n\nvoid Name::setMiddleInitial(string middleInitial) {\n    this-&gt;middleInitial = middleInitial;\n}\n\nvoid Name::display() {\n    cout &lt;&lt; firstName &lt;&lt; \" \" &lt;&lt; middleInitial &lt;&lt; \" \" &lt;&lt; lastName &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Lastly, I tried testing the appropriate function and constructor implementations in the <code>Name_Main.cpp</code> file below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n#include \"Name.h\"\n\nint main() {\n    string firstName;\n    string lastName;\n    string middleInitial;\n\n    cout &lt;&lt; \"Using constructor: \" &lt;&lt; endl;\n    cout &lt;&lt; \"Enter first name: \";\n    cin &gt;&gt; firstName;\n\n    cout &lt;&lt; \"Enter last name: \";\n    cin &gt;&gt; lastName;\n\n    cout &lt;&lt; \"Enter middle initial: \";\n    cin &gt;&gt; middleInitial;\n\n    Name name(firstName, lastName, middleInitial);\n    cout &lt;&lt; \"Date: \";\n    name.display();\n\n    cout &lt;&lt; \"Using setName(): \" &lt;&lt; endl;;\n    cout &lt;&lt; \"Enter first name: \";\n    cin &gt;&gt; firstName;\n\n    cout &lt;&lt; \"Enter last name: \";\n    cin &gt;&gt; lastName;\n\n    cout &lt;&lt; \"Enter middle initial: \";\n    cin &gt;&gt; middleInitial;\n\n    name.setName(firstName, lastName, middleInitial);\n    cout &lt;&lt; \"Date: \";\n    name.display();\n\n    cout &lt;&lt; \"Using setters: \" &lt;&lt; endl;\n    cout &lt;&lt; \"Enter first name: \";\n    cin &gt;&gt; firstName;\n\n    cout &lt;&lt; \"Enter last name: \";\n    cin &gt;&gt; lastName;\n\n    cout &lt;&lt; \"Enter middle initial: \";\n    cin &gt;&gt; middleInitial;\n\n    name.setFirstName(firstName);\n    name.setLastName(lastName);\n    name.setMiddleInitial(middleInitial);\n    cout &lt;&lt; \"Date: \";\n    name.display();\n\n    return 0;\n}\n</code></pre>\n\n<p>After trying to test out the class functions and constructors in <code>Name_Main.cpp</code> using the Cloud9 IDE, I kept receiving the following error:</p>\n\n<pre><code>/tmp/cccNHMnU.o: In function `main':\nName_Main.cpp:(.text+0x126): undefined reference to `Name::Name(std::string, std::string, std::string)'\n</code></pre>\n\n<p>It appears <code>Name_Main.cpp</code> cannot find the appropriate methods in <code>Name.h</code> and their implementations in <code>Name.cpp</code>. I tried changing all of the <code>string</code> variable types to <code>std::string</code> variable types in <code>Name.h</code>, as well as adding <code>using namespace std;</code> and <code>#include &lt;string&gt;</code> into the header file, to no avail. Does anyone know why I am receiving this error, or has recommendations for solving this issue?</p>\n"}, {"tags": ["c#", "c++", "winforms", "winapi", "sendmessage"], "comments": [{"owner": {"reputation": 2571, "user_id": 19308, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/357484c51a4516af57969653e3535680?s=128&d=identicon&r=PG", "display_name": "Joshua Drake", "link": "https://stackoverflow.com/users/19308/joshua-drake"}, "edited": false, "score": 0, "creation_date": 1487171413, "post_id": 42253077, "comment_id": 71663727, "body": "What do you mean by <i>TargetApp</i>?"}, {"owner": {"reputation": 33311, "user_id": 5620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2f98606c6c7002862ef3be62cfc97c?s=128&d=identicon&r=PG", "display_name": "Peter Ritchie", "link": "https://stackoverflow.com/users/5620/peter-ritchie"}, "edited": false, "score": 0, "creation_date": 1487171559, "post_id": 42253077, "comment_id": 71663846, "body": "Try using PostMessage instead."}, {"owner": {"reputation": 6247, "user_id": 439497, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/913585cae910787fdd2186698cc7698e?s=128&d=identicon&r=PG", "display_name": "ManInMoon", "link": "https://stackoverflow.com/users/439497/maninmoon"}, "reply_to_user": {"reputation": 2571, "user_id": 19308, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/357484c51a4516af57969653e3535680?s=128&d=identicon&r=PG", "display_name": "Joshua Drake", "link": "https://stackoverflow.com/users/19308/joshua-drake"}, "edited": false, "score": 0, "creation_date": 1487171596, "post_id": 42253077, "comment_id": 71663878, "body": "@JoshuaDrake TargetApp is the wnd I find with FindWindow(&quot;QCDataInterfaceWndClass&quot;, null)"}, {"owner": {"reputation": 6247, "user_id": 439497, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/913585cae910787fdd2186698cc7698e?s=128&d=identicon&r=PG", "display_name": "ManInMoon", "link": "https://stackoverflow.com/users/439497/maninmoon"}, "reply_to_user": {"reputation": 33311, "user_id": 5620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2f98606c6c7002862ef3be62cfc97c?s=128&d=identicon&r=PG", "display_name": "Peter Ritchie", "link": "https://stackoverflow.com/users/5620/peter-ritchie"}, "edited": false, "score": 0, "creation_date": 1487171940, "post_id": 42253077, "comment_id": 71664175, "body": "@PeterRitchie PostMessage doesn&#39;t work either."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1487181917, "post_id": 42253077, "comment_id": 71671556, "body": "You never verify, whether <code>nWinHandle</code> holds a valid handle."}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1487184693, "post_id": 42253077, "comment_id": 71673283, "body": "Why do you expect that your window proc gets any messages from a different window. You ddin&#39;t subclass anything and you didn&#39;t register your window as a target for messages. (Cross application subclassing isn&#39;t allowed)."}, {"owner": {"reputation": 6247, "user_id": 439497, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/913585cae910787fdd2186698cc7698e?s=128&d=identicon&r=PG", "display_name": "ManInMoon", "link": "https://stackoverflow.com/users/439497/maninmoon"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487185160, "post_id": 42253077, "comment_id": 71673565, "body": "@IInspectable Actually I do - but in this snippet I had stripped it out. I definitely get a positive,non-zero number back"}, {"owner": {"reputation": 6247, "user_id": 439497, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/913585cae910787fdd2186698cc7698e?s=128&d=identicon&r=PG", "display_name": "ManInMoon", "link": "https://stackoverflow.com/users/439497/maninmoon"}, "reply_to_user": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1487185270, "post_id": 42253077, "comment_id": 71673618, "body": "@xMRi I thought WndProc got everything! What do I use to &quot;register my window as a target&quot;?"}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1487232099, "post_id": 42253077, "comment_id": 71692470, "body": "What I see is just a normal window procedure. To receive specific notifications you need to register your window for this. I don&#39;t know the library you use. You have registered messages, so who is sending them. Ask the guy who wrotes the stuff you want to use..."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1487246028, "post_id": 42253077, "comment_id": 71702376, "body": "@xMRi: Link to the documentation is in the question. Including the answer from <i>&quot;the guy who wrotes the stuff&quot;</i>."}, {"owner": {"reputation": 10761, "user_id": 2592875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abcf57451cf62e63e8e191421c6709e?s=128&d=identicon&r=PG", "display_name": "TnTinMn", "link": "https://stackoverflow.com/users/2592875/tntinmn"}, "edited": false, "score": 0, "creation_date": 1487800751, "post_id": 42253077, "comment_id": 71953164, "body": "I don&#39;t know if this matters, but it looks like typo: `&quot;QCOLLECTOR_PORTFOLIO_LIST_REQUEST_COMPLETE &quot;.  Note the space between COMPLETE and the closing quote."}, {"owner": {"reputation": 6247, "user_id": 439497, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/913585cae910787fdd2186698cc7698e?s=128&d=identicon&r=PG", "display_name": "ManInMoon", "link": "https://stackoverflow.com/users/439497/maninmoon"}, "reply_to_user": {"reputation": 10761, "user_id": 2592875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abcf57451cf62e63e8e191421c6709e?s=128&d=identicon&r=PG", "display_name": "TnTinMn", "link": "https://stackoverflow.com/users/2592875/tntinmn"}, "edited": false, "score": 0, "creation_date": 1487871326, "post_id": 42253077, "comment_id": 71990637, "body": "@TnTinMn Good spot - I do get something back now - but it is a number in lParam not a string as the Documentation says"}, {"owner": {"reputation": 10761, "user_id": 2592875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abcf57451cf62e63e8e191421c6709e?s=128&d=identicon&r=PG", "display_name": "TnTinMn", "link": "https://stackoverflow.com/users/2592875/tntinmn"}, "edited": false, "score": 0, "creation_date": 1487878350, "post_id": 42253077, "comment_id": 71994526, "body": "ManInMoon, Are saying that your <code>Console.WriteLine</code> is yielding a number for lParam or that the string that you retrieve using the pointer is a number?  If it is the 1st one, then you have a fundamental misunderstanding of how to work with this.  It should be something like: <code>stringVar = System.Runtime.InteropServices.PtrToStringAuto(m.lParam)</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 10761, "user_id": 2592875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abcf57451cf62e63e8e191421c6709e?s=128&d=identicon&r=PG", "display_name": "TnTinMn", "link": "https://stackoverflow.com/users/2592875/tntinmn"}, "edited": false, "score": 2, "creation_date": 1487929115, "post_id": 42253077, "comment_id": 72014765, "body": "@TnTinMn: <code>PtrToStringAuto</code> interprets the input as a pointer to a zero-terminated character array. That&#39;s not what <code>LParam</code> is, though. The value is an <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms649053.aspx\" rel=\"nofollow noreferrer\">atom</a> to deal with the cross-process marshaling. It can be retrieved calling by <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms649063.aspx\" rel=\"nofollow noreferrer\">GlobalGetAtomName</a>."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1488111216, "post_id": 42457762, "comment_id": 72077646, "body": "The question is not: &quot;How do I improve my design?&quot; The question is: &quot;How do I retrieve a value returned in a message across processes?&quot; This proposed answer does not address the question. Not even remotely. Nor does it add anything useful otherwise."}], "tags": [], "owner": {"reputation": 918, "user_id": 2135548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fM5xR.png?s=128&g=1", "display_name": "Mandar", "link": "https://stackoverflow.com/users/2135548/mandar"}, "is_accepted": false, "score": -1, "last_activity_date": 1488035577, "creation_date": 1488035577, "answer_id": 42457762, "question_id": 42253077, "link": "https://stackoverflow.com/questions/42253077/message-back-from-windows-api/42457762#42457762", "title": "Message back from windows API", "body": "<p>I dont know if it is fine in .Net but i would like to suggest you to call all the functions in either constructor or in init() function.</p>\n\n<p><strong><em>Suggested Design</em></strong></p>\n\n<pre><code>int nWinHandle=0;\nuint wm_QCollectorClientDataRequest=0;\nuint wm_QCollectorClientPortfolioListRequest=0;\nuint wm_QCollectorPortfolioListRequestComplete=0;\n\nvoid init()\n{\n    nWinHandle = FindWindow(\"QCDataInterfaceWndClass\", null);\n    wm_QCollectorClientDataRequest = RegisterWindowMessage(\"QCOLLECTOR_CLIENT_DATA_REQUEST\");\n    wm_QCollectorClientPortfolioListRequest = RegisterWindowMessage(\"QCOLLECTOR_CLIENT_PORTFOLIO_LIST_REQUEST\");\n    wm_QCollectorPortfolioListRequestComplete = RegisterWindowMessage(\"QCOLLECTOR_PORTFOLIO_LIST_REQUEST_COMPLETE \");\n}\n</code></pre>\n"}], "owner": {"reputation": 6247, "user_id": 439497, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/913585cae910787fdd2186698cc7698e?s=128&d=identicon&r=PG", "display_name": "ManInMoon", "link": "https://stackoverflow.com/users/439497/maninmoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1518285519, "creation_date": 1487171326, "last_edit_date": 1487782515, "question_id": 42253077, "link": "https://stackoverflow.com/questions/42253077/message-back-from-windows-api", "title": "Message back from windows API", "body": "<p>I am trying to receive messages from QCollector as explained in the <a href=\"http://www.mechtrading.com/developers/QCollectorDeveloperGuide_2.1.htm\" rel=\"noreferrer\">QCollector Data Interface</a> developer guide. The process consists of registering predefined messages, finding the QCollector server window, and exchanging data through the registered messages.</p>\n\n<p>My <code>WndProc</code> callback receives lost of messages, but none of those are recognized as one of the registered messages. I'm passing my <code>Form</code>'s <code>this.Handle</code> in the request, but I'm unsure if this is correct.</p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Linq;\nusing System.Runtime.InteropServices;\nusing System.Text;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing System.Windows.Forms;\n\nnamespace HistDataManager\n{\n\n    public partial class Form1 : Form\n    {\n        [DllImport(\"user32.dll\", EntryPoint = \"FindWindow\")]\n        private static extern int FindWindow(string sClass, string sWindow);\n\n        [DllImport(\"user32.dll\", SetLastError = true, CharSet = CharSet.Auto)]\n        static extern uint RegisterWindowMessage(string lpString);\n\n        [DllImport(\"user32.dll\")]\n        static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, UIntPtr wParam, IntPtr lParam);\n\n        int nWinHandle = FindWindow(\"QCDataInterfaceWndClass\", null);\n\n        uint wm_QCollectorClientDataRequest = RegisterWindowMessage(\"QCOLLECTOR_CLIENT_DATA_REQUEST\");\n        uint wm_QCollectorClientPortfolioListRequest = RegisterWindowMessage(\"QCOLLECTOR_CLIENT_PORTFOLIO_LIST_REQUEST\");\n        uint wm_QCollectorPortfolioListRequestComplete = RegisterWindowMessage(\"QCOLLECTOR_PORTFOLIO_LIST_REQUEST_COMPLETE \");\n\n        public void TestQC()\n        {\n            SendMessage(new IntPtr(nWinHandle), wm_QCollectorClientPortfolioListRequest, UIntPtr.Zero, this.Handle);\n\n        }\n\n        protected override void WndProc(ref Message m)\n        {\n            Console.WriteLine(m.HWnd + \",\" + m.Msg + \",\" + m.LParam + \",\" + m.WParam);\n            base.WndProc(ref m);\n\n            if (m.Msg == wm_QCollectorClientPortfolioListRequest || m.Msg == wm_QCollectorPortfolioListRequestComplete)\n            {\n                Console.WriteLine(\"Message from specified application found!\");\n            }\n\n        }\n\n    }\n}\n</code></pre>\n\n<p>EDIT 1:</p>\n\n<p>Just to be sure that I have the basics working in c# I created a second version of this app and got them to talk to each other. This works, so I know my handles and message structures are correct.</p>\n\n<p>BUT I never get a response from qCollector. Does anyone have experience of using this in any other language perhaps? I suspect qCollector was written in c++.</p>\n"}, {"tags": ["c++", "c", "graphics", "2d", "sdl"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1487180085, "post_id": 42252972, "comment_id": 71670426, "body": "Would you delete that Google Drive link please, and move the output into the question? Since the question is reliant on that link, we do not want to risk the data being deleted, since that would mean we would have to delete the question. Remember that questions here are intended for posterity, not just for the original poster."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1487180152, "post_id": 42252972, "comment_id": 71670459, "body": "Please also read: <a href=\"http://meta.stackoverflow.com/q/326569/472495\">Under what circumstances may I add \u201curgent\u201d or other similar phrases to my question, in order to obtain faster answers?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1487179198, "post_id": 42254962, "comment_id": 71669821, "body": "Can you please elaborate with an example?"}, {"owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1487179216, "post_id": 42254962, "comment_id": 71669828, "body": "I know that would be tedious but please"}, {"owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1487211118, "post_id": 42254962, "comment_id": 71684434, "body": "I finally got hang of what you wanted to say buddy. Thanks a lot. Project is on!!! Anyways, for other users, put <code>if(!(SDL_PollEvent(&amp;event))continue;</code> in while loop  in the beginning  &amp; see wonders. Remove the normal &#39;SDL_PollEvent(&amp;event)`. Thanks again."}], "tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 1, "last_activity_date": 1487176247, "creation_date": 1487176247, "answer_id": 42254962, "question_id": 42252972, "link": "https://stackoverflow.com/questions/42252972/sdl-mousebuttonevent-is-behaving-like-sdl-mousemotion/42254962#42254962", "title": "SDL_MouseButtonEvent is behaving like SDL_MouseMotion", "body": "<p><a href=\"https://wiki.libsdl.org/SDL_PollEvent\" rel=\"nofollow noreferrer\">SDL_PollEvent</a> doesn't block until event happens but instead returns 1 if it written event data into given structure, or 0 otherwise. You're ignoring this value and reading data from event anyway; noone said this event data is valid, especially first time, since it wasn't even initialised.</p>\n\n<p>Check return value and only use event if SDL said event is indeed happened. You can also use <code>SDL_WaitEvent</code>, which blocks until event happens.</p>\n"}], "owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 42254962, "answer_count": 1, "score": -2, "last_activity_date": 1487179915, "creation_date": 1487171036, "last_edit_date": 1487179915, "question_id": 42252972, "link": "https://stackoverflow.com/questions/42252972/sdl-mousebuttonevent-is-behaving-like-sdl-mousemotion", "title": "SDL_MouseButtonEvent is behaving like SDL_MouseMotion", "body": "<p>I coded an application but got erroneous outputs from SDL. To specify my problem, I have developed a simple code to count the number of clicks from mouse. I am using CodeBlocks with GCC compiler on Windows.</p>\n\n<p>The code goes as follows : </p>\n\n<pre><code>#include \"SDL.h\"\n#include &lt;stdio.h&gt;\n\nint main ( int argc , char *args[] )\n{\n    SDL_Window *window = NULL ;\n    SDL_Renderer *render = NULL ;\n    SDL_Event event ;\n    int counter = 0 ;\n\n    SDL_Init ( SDL_INIT_EVERYTHING ) ;\n\n    window = SDL_CreateWindow ( \"\" , 0 , 0 , 400 , 400 , SDL_WINDOW_BORDERLESS ) ;\n    render = SDL_CreateRenderer ( window , -1 , SDL_RENDERER_ACCELERATED ) ;\n\n    // Putting white color over window\n    SDL_SetRenderDrawColor ( render , 255 , 255 , 255 , 255 ) ;\n    SDL_RenderClear ( render ) ;\n    SDL_RenderPresent ( render ) ;\n\n    counter = 0 ; //Reinitializing counter to 0\n\n    //Starting Input\n    while ( 3 )\n    {\n         SDL_PollEvent ( &amp;event ) ;\n         if ( event.type == SDL_MOUSEBUTTONUP )\n         {\n               counter++ ;\n         }\n         else if ( event.type == SDL_KEYUP )\n         {\n               if ( event.key.keysym.sym == SDLK_ESCAPE )\n               {\n                     break ;\n               }\n         }\n    }\n\n    // Actual Clicks = 2\n    printf(\"CLicks = %d\" , counter );\n\n    return 0 ;\n}\n</code></pre>\n\n<p>The Output Always Is Fairly Huge &amp; Erroneous. The sample output is posted at</p>\n\n<p><a href=\"https://drive.google.com/open?id=0B2krxxnuHys0UzB3Q1d3MzJEVVU\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=0B2krxxnuHys0UzB3Q1d3MzJEVVU</a></p>\n"}, {"tags": ["c++", "xbase"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1487171363, "post_id": 42252643, "comment_id": 71663682, "body": "If that is the correct fix, then it is probably a typo."}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1487171498, "post_id": 42252643, "comment_id": 71663799, "body": "it&#39;s consistent typo across about 20 files.. and gcc warns about it, so it&#39;s hard to believe it wasn&#39;t done on purpose"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1487171702, "post_id": 42252643, "comment_id": 71663969, "body": "And google does indeed find more instances of it. However, this question is now the first result, and it doesn&#39;t yet have an answer. (I have no idea)."}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 2, "creation_date": 1487171842, "post_id": 42252643, "comment_id": 71664086, "body": "@BoBTFish heh it&#39;s a bit scary how fast can google index stuff :D"}], "owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1487170207, "creation_date": 1487170207, "question_id": 42252643, "link": "https://stackoverflow.com/questions/42252643/what-is-gnu-lesserc-gnu-lesserg", "title": "What is __GNU LesserC__, __GNU LesserG__?", "body": "<p>I found following code in library I'm trying to compile</p>\n\n<pre><code>#ifdef __GNU LesserC__\n    __attribute__((packed))\n#endif\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#ifdef __GNU LesserG__\n#pragma interface\n#endif\n</code></pre>\n\n<p>What the hell is <code>__GNU LesserC__</code>? Why is there the space, <code>#ifdef</code> afaik doesn't support anything like this. I trying googling it but I only found source code using it, no explanation what it is (was) supposed to do.</p>\n\n<p>Most patches I found fix it by</p>\n\n<pre><code>- #ifdef __GNU LesserC__\n+ #ifdef __GNU_LesserC__\n</code></pre>\n\n<p>but I would like to know what this actually is.</p>\n\n<p>Oh, and the library is <a href=\"https://sourceforge.net/projects/xdb/\" rel=\"nofollow noreferrer\">xbase</a>.</p>\n"}, {"tags": ["c++", "qt", "qtabwidget"], "answers": [{"comments": [{"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1487189601, "post_id": 42258873, "comment_id": 71676010, "body": "Thanks, @goug, I will need to measure if this is really necessary because it seems to be painful to implement. I really hoped it would have an easier way to do this."}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1487204078, "post_id": 42258873, "comment_id": 71682510, "body": "I&#39;m with you on that. I do a lot of forms work in Qt Designer, and if I had to do what you&#39;re asking for, it would be very expensive to create all of the tabbed forms in code rather than editing the forms directly."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1487251613, "post_id": 42258873, "comment_id": 71706528, "body": "I found a simpler solution that worked. Maybe it is not the best way to do that, but it worked very well. Please, see my answer."}], "tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 6, "last_activity_date": 1487189530, "last_edit_date": 1487189530, "creation_date": 1487188654, "answer_id": 42258873, "question_id": 42252403, "link": "https://stackoverflow.com/questions/42252403/how-to-expand-tabs-in-qtabwidget-qt/42258873#42258873", "title": "How to expand tabs in QTabWidget Qt", "body": "<p>I found that <code>QTabBar</code> has a <code>setExpanding</code> method, which appears to do exactly what you want, but I tried it (on Windows), and it doesn't work. This is the code:</p>\n\n<pre><code>ui-&gt;tabWidget-&gt;tabBar()-&gt;setExpanding (true);\n</code></pre>\n\n<p>Then I found the following post:</p>\n\n<p><a href=\"https://forum.qt.io/topic/47404/qtabbar-will-not-expand-its-tabs\" rel=\"noreferrer\">https://forum.qt.io/topic/47404/qtabbar-will-not-expand-its-tabs</a></p>\n\n<p>I find the answer provided in the above post to be debatable. He says it's respecting the operating system style whether or not the expanding property is set to true and that it's a feature, not a bug, and that you have to subclass <code>QTabBar</code> to get the desired behavior. If I write code to do a specific thing, I feel like my instructions should override the OS style. If I just wanted the OS style, I would leave that special code out. However much I disagree with the implementation, that appears to be what we're stuck with.</p>\n\n<p>So if it's important to you to have this look, then you'll need to subclass <code>QTabBar</code>, override the <code>tabSizeHint</code>--I suspect that will take some experimentation--and use <code>QTabWidget::setTabBar</code> to replace the default with your own. According to the documentation, you have to do that before adding any tabs, so this mechanism is not workable if you want to create your tab widget in Qt Designer. (Another argument in favor of implementing <code>setExpanding</code> as an override to the OS style rather than the way it's been done.)</p>\n"}, {"comments": [{"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 1, "creation_date": 1487265890, "post_id": 42275243, "comment_id": 71718018, "body": "I like this approach. It&#39;s very simple; the only issue you&#39;re likely to run into is the use of the use of the hard-coded adjustment or 24 pixels for the width. That&#39;s likely to change from OS to OS and perhaps by user setup, but I don&#39;t know that you can do anything about it. Good find."}], "tags": [], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "is_accepted": true, "score": 2, "last_activity_date": 1487251428, "creation_date": 1487251428, "answer_id": 42275243, "question_id": 42252403, "link": "https://stackoverflow.com/questions/42252403/how-to-expand-tabs-in-qtabwidget-qt/42275243#42275243", "title": "How to expand tabs in QTabWidget Qt", "body": "<p>As mostefa answered <a href=\"https://forum.qt.io/topic/76225/how-to-expand-tabs-in-qtabwidget/3\" rel=\"nofollow noreferrer\">here</a>, I can set a fixed width for the tabs using styleSheet.</p>\n\n<p>I am calculating the width based on the <code>QTabWidget</code> width.</p>\n\n<p>To get the <code>QTabWidget</code> width correctly I need to get it in the <code>showEvent</code> function:</p>\n\n<pre><code>void LogListForm::showEvent(QShowEvent *ev)\n{\n    /*\n     * Divide by 2 because we have 2 tabs.\n     * I need to decrease 24 pixels to fill the width correctly.\n     */\n    int tabWidth = (ui-&gt;myTabWidget-&gt;width()/2)-24;\n\n    /*\n     * Then, I set this tabWidth to the styleSheet.\n     * Note: I need to set the previously styleSheet to not lose it\n     */\n    ui-&gt;myTabWidget-&gt;setStyleSheet( ui-&gt;myTabWidget-&gt;styleSheet() +\n                                    \"QTabBar::tab {\"\n                                    \"width: \" + QString::number(tabWidth) + \"px; }\" );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 5029675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b44e5c6087f75e837ba441e6aada1b1?s=128&d=identicon&r=PG&f=1", "display_name": "inflames", "link": "https://stackoverflow.com/users/5029675/inflames"}, "is_accepted": false, "score": 1, "last_activity_date": 1555333770, "creation_date": 1555333770, "answer_id": 55689922, "question_id": 42252403, "link": "https://stackoverflow.com/questions/42252403/how-to-expand-tabs-in-qtabwidget-qt/55689922#55689922", "title": "How to expand tabs in QTabWidget Qt", "body": "<p>This works as well:</p>\n\n<pre><code>QTabWidget::tab-bar\n{\n    min-width:1000;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9122250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2fadc761fc053849f5f37c54e11f79?s=128&d=identicon&r=PG&f=1", "display_name": "Mitack", "link": "https://stackoverflow.com/users/9122250/mitack"}, "is_accepted": false, "score": 1, "last_activity_date": 1568808172, "last_edit_date": 1568808172, "creation_date": 1568807838, "answer_id": 57992231, "question_id": 42252403, "link": "https://stackoverflow.com/questions/42252403/how-to-expand-tabs-in-qtabwidget-qt/57992231#57992231", "title": "How to expand tabs in QTabWidget Qt", "body": "<pre><code>// Qt 5.12.2\n// just use TabWidget in place of QTabWidget, nothing else\nclass TabWidget : public QTabWidget\n{\n    class TabBar : public QTabBar\n    {\n        QSize _size;\n    public:\n        TabBar(QWidget* a_parent) : QTabBar(a_parent)\n        {\n            setWidth(size().width());\n        }\n        QSize tabSizeHint(int index) const\n        {\n            return QSize(_size.width()/(count()?count():1), size().height());\n        }\n        void setWidth(int a_width)\n        {\n            _size = QSize(a_width, size().height());\n            QTabBar::resize(_size);\n        }\n    };\n    TabBar* _tabBar = new TabBar(this);\npublic:\n    TabWidget(QWidget* a_parent) : QTabWidget(a_parent)\n    {\n        setTabBar(_tabBar);\n    }\n\n    void resizeEvent(QResizeEvent *e) override\n    {\n        _tabBar-&gt;setWidth(size().width());\n        QTabWidget::resizeEvent(e);\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 2019716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5d473769b52ac4dfb9af049808b923?s=128&d=identicon&r=PG", "display_name": "user2019716", "link": "https://stackoverflow.com/users/2019716/user2019716"}, "is_accepted": false, "score": 0, "last_activity_date": 1581679818, "creation_date": 1581679818, "answer_id": 60225465, "question_id": 42252403, "link": "https://stackoverflow.com/questions/42252403/how-to-expand-tabs-in-qtabwidget-qt/60225465#60225465", "title": "How to expand tabs in QTabWidget Qt", "body": "<p>Suggestion from Mitak worked. Assuming the tabwiget is in the centralwidget of the mainwindow, one can replace a tabwidget created with the designer as follow in the code :</p>\n\n<pre><code>QTabWidget* newTabWidget = new GeneralTabWidget(ui-&gt;tabWidget_ToReplace-&gt;parentWidget());\nui-&gt;centralWidget-&gt;layout()-&gt;replaceWidget(ui-&gt;tabWidget_ToReplace, newTabWidget );\ndelete ui-&gt;tabWidget_ToReplace;\nui-&gt;tabWidget_ToReplace= newTabWidget ;\n</code></pre>\n\n<p>if the tabwidget is situated in another location or in a dialog, one need to replace it in the appropriate layout.</p>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 6776611, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/SfM1Y.jpg?s=128&g=1", "display_name": "X 47 48 - IR", "link": "https://stackoverflow.com/users/6776611/x-47-48-ir"}, "is_accepted": false, "score": 0, "last_activity_date": 1616716762, "creation_date": 1616716762, "answer_id": 66809194, "question_id": 42252403, "link": "https://stackoverflow.com/questions/42252403/how-to-expand-tabs-in-qtabwidget-qt/66809194#66809194", "title": "How to expand tabs in QTabWidget Qt", "body": "<p>Just set both expanding and document mode to true.</p>\n<pre><code>ui-&gt;tabWidget-&gt;tabBar()-&gt;setDocumentMode(true);\nui-&gt;tabWidget-&gt;tabBar()-&gt;setExpanding(true);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/L1H3r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L1H3r.png\" alt=\"eddnter image description here\" /></a></p>\n<p>Works for me :)</p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3797, "favorite_count": 2, "accepted_answer_id": 42275243, "answer_count": 6, "score": 4, "last_activity_date": 1616716762, "creation_date": 1487169637, "last_edit_date": 1487188237, "question_id": 42252403, "link": "https://stackoverflow.com/questions/42252403/how-to-expand-tabs-in-qtabwidget-qt", "title": "How to expand tabs in QTabWidget Qt", "body": "<p>I have a <code>QTabWidget</code> like this one:</p>\n\n<p><a href=\"https://i.stack.imgur.com/23bxJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/23bxJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I want to expand the tabs to \"fill\" the entire widget width, like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fiG8f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fiG8f.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>How can I do that?</strong></p>\n\n<p>I am using <strong>Qt 5.3.2</strong> and <strong>Qt Creator 3.2.1</strong></p>\n\n<hr>\n\n<p><strong>Update</strong>:</p>\n\n<p>I tried to use the <code>setExpanding</code> function:</p>\n\n<pre><code>ui-&gt;myTabWidget-&gt;tabBar()-&gt;setExpanding(true);\n</code></pre>\n\n<p>But it didn't work.</p>\n"}, {"tags": ["c++", "rapidjson"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1487169707, "post_id": 42252348, "comment_id": 71662392, "body": "What are you trying to ask? This reads as off-topic (&quot;help me pick an app to use&quot;), but as it is, you&#39;re not asking anything."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1487170020, "post_id": 42252348, "comment_id": 71662634, "body": "I&#39;m looking for suggestions.  Someone said parsing again in second example is too slow.  But I think that doing the copy of each Value and iterating over a large json set and putting in a new doc would be slow too like Milos says to do.  Is the DeepCopy patch in 1.1.0?  If it is, how would I use it? Is there a good use example, other than looking at the API to figure it out?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1487170063, "post_id": 42252348, "comment_id": 71662668, "body": "My advice is to try the <code>rapidjson</code> version from <code>https:&#47;&#47;github.com&#47;rjeczalik&#47;rapidjson</code> which is the answer to your point #2 (and it is supposed to have a DeepCopy patch). Use <code>CMake</code> to generate a MakeFile / project file to build."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1487170199, "post_id": 42252348, "comment_id": 71662790, "body": "I don&#39;t think I can use un-released versions.  It might not fall under licensing for original rapidjson. If it was in an official release I think I could though. That was my #3 above."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1487171728, "post_id": 42252348, "comment_id": 71663992, "body": "Ah, I see. I was reading this as &quot;help me find a library to do this&quot;, but you&#39;re asking &quot;how can I do this task; here are some external resources that do it, but they all have problems.&quot; I&#39;d suggest rephrasing your question so that it&#39;s more obvious you aren&#39;t looking for a library or tool."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1487171877, "post_id": 42252348, "comment_id": 71664124, "body": "I think it&#39;s valid to discuss the difference between #1 and #2 for a large json set, and which is more efficient and why.  Also, if anyone could tell me if DeepCopy patch was ever officially released into rapidjson, which it doesn&#39;t appear that it is, that seems valid also."}], "owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 783, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487174255, "creation_date": 1487169521, "last_edit_date": 1495541816, "question_id": 42252348, "link": "https://stackoverflow.com/questions/42252348/how-to-clone-rapidjson-which-is-better-and-why", "title": "How to clone rapidjson; which is better and why", "body": "<p>I'm trying to figure out what the best way to clone rapidjson is.  I'm seeing a few good ideas online, which differ greatly.  </p>\n\n<ol>\n<li><p>There's the example Milo gives in his documentation (<a href=\"http://rapidjson.org/md_doc_tutorial.html\" rel=\"nofollow noreferrer\">deep copy milo</a>), which is just like the deep copy example in tutorial.md in rapidjson. However, this is for an oversimplified, one Value json.  For large, multi-type, json, iterating would be complicated, and I'm not seeing a good example.</p></li>\n<li><p>There is <a href=\"https://stackoverflow.com/questions/22707814/perform-a-copy-of-document-object-of-rapidjson\">newDocument copy</a> which has an example I like, but someone commented parsing is slow, but for a large rapidjson example, iterating over the entire set would take long too. Plus, the &lt;0> or other syntax appear wrong. There is no type given.</p>\n\n<pre><code>static void copyDocument(rapidjson::Document &amp; newDocument,   rapidjson::Document &amp; copiedDocument) {\n    rapidjson::StringBuffer strbuf;\n    rapidjson::Writer&lt;rapidjson::StringBuffer&gt; writer(strbuf);\n    newDocument.Accept(writer);\n    std::string str = strbuf.GetString();\n    copiedDocument.Parse&lt;0&gt;(str.c_str());\n}\n</code></pre></li>\n<li><p>Apparently there's a <a href=\"https://github.com/pah/rapidjson/issues/1#issuecomment-39079113\" rel=\"nofollow noreferrer\">DeepCopy patch</a>, but I'm not sure how to use it, or if it's in my version of rapidjson (1.1.0).  I haven't had luck using GenericMember yet. We are using DOM. I can't use an unofficial release of rapidjson because the license would be different and it would deviate from mainstream releases of rapidjson.</p></li>\n</ol>\n\n<p>For libjson, we used to do a shallow copy, like &amp;rhs, but I'm looking for suggestions, and possibly an example of using the DeepCopy patch if it's in 1.1.0.</p>\n"}, {"tags": ["c++", "winapi", "unicode"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1487169624, "post_id": 42252059, "comment_id": 71662329, "body": "Why aren&#39;t you using Unicode?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1487171408, "post_id": 42252059, "comment_id": 71663725, "body": "Life&#39;s too short to get you to explain what text encoding you told your text editor to use, whether or not the file has a BOM and how the string is rendered on the screen.  Use <code>(C) 2017</code> instead."}, {"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "edited": false, "score": 1, "creation_date": 1487173376, "post_id": 42252059, "comment_id": 71665324, "body": "Or just say Copyright. If your application is localized, the translators will know what to do with it.  Not always so with iconic symbolsl. Also, legally since 2000 there is no reason to use &quot;All rights reserved.&quot; <a href=\"https://en.wikipedia.org/wiki/All_rights_reserved\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/All_rights_reserved</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487173915, "post_id": 42252059, "comment_id": 71665739, "body": "<a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a>"}, {"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1487199999, "post_id": 42252059, "comment_id": 71681195, "body": "@HansPassant It&#39;s not a lot of work to save that file as Unicode (code page 1200). In Visual Studio that&#39;s the only sane way to deal with non-ascii characters anyway, or you&#39;ll be very surprised when you copy that file to a PC which is set up to use English."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "edited": false, "score": 0, "creation_date": 1487245839, "post_id": 42252059, "comment_id": 71702229, "body": "@roeland: Explaining, which buttons to press is easy. Explaining <i>why</i> is the hard part. Hans Passant&#39;s comment was on the latter."}, {"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487271970, "post_id": 42252059, "comment_id": 71721679, "body": "@IInspectable Agree, you don&#39;t need all the pesky details. If the file is saved as &quot;Unicode&quot; it means the same across machines. If it&#39;s saved as &quot;ansi&quot; you may read garbage on another PC. The end. It&#39;s easy enough to save as Unicode to just do it. And while you can write (c) instead of &#169;, most languages cannot be written in ASCII alone."}], "answers": [{"tags": [], "owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "is_accepted": false, "score": 4, "last_activity_date": 1487179546, "creation_date": 1487179546, "answer_id": 42256221, "question_id": 42252059, "link": "https://stackoverflow.com/questions/42252059/how-to-add-symbol-in-resource-file-to-support-in-japanese-windows-os/42256221#42256221", "title": "How to add \u24b8 symbol in resource file to support in Japanese Windows OS.", "body": "<p>The ANSI code page for the Japanese Windows locale is 932 (similar to Shift-JIS). This encoding does not include the copyright sign (U+00A9 <code>\u00a9</code>), nor the character you mention above (circled letter C, U+24D2 <code>\u24d2</code>, which is probably not what you wanted). If you are compiling resource files in code page 932, you will have to use plain ASCII <code>(c)</code>.</p>\n\n<p>Alternatively if you can convert the RC file to an encoding that supports Unicode you can use any character you like. This could be UTF-16LE (the encoding that Notepad misleadingly describes as \u201cUnicode\u201d), or UTF-8 if you include <code>#pragma code_page(65001)</code> (but then you have to make sure to not edit in the resource editor which will mess that up).</p>\n"}], "owner": {"reputation": 71, "user_id": 1661943, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/973fa8a91eed8538890500fbe5d45869?s=128&d=identicon&r=PG", "display_name": "varuag", "link": "https://stackoverflow.com/users/1661943/varuag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1218, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1487179546, "creation_date": 1487168788, "question_id": 42252059, "link": "https://stackoverflow.com/questions/42252059/how-to-add-symbol-in-resource-file-to-support-in-japanese-windows-os", "title": "How to add \u24b8 symbol in resource file to support in Japanese Windows OS.", "body": "<p>I need to \u00a0add copy right symbol\u00a0\u24b8 in my resource file(.rc). When I add this symbol in '.rc' file and run the app on Japanese OS, it displays ? symbol instead.\nBelow is my code line.</p>\n\n<pre><code>LTEXT \"\u24b8 2017 Comapny Inc. All rights reserved.\",IDC_COPYRIGHT,7,30,211,8\n</code></pre>\n\n<p>I tried editing this symbol on Japanese locale machine machine but still the issue was not resolved. \u24b8 symbol gets converted to ? symbol when I save the .rc file. \nOn Japanese machine I see the above code as below:</p>\n\n<pre><code>LTEXT \"? 2017 Comapny Inc. All rights reserved.\",IDC_COPYRIGHT,7,30,211,8\n</code></pre>\n\n<p>\u00a0Please share your idea how this can be done\u00a0 </p>\n"}, {"tags": ["c++", "casting", "operator-overloading", "standards", "overload-resolution"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1487172798, "post_id": 42252023, "comment_id": 71664877, "body": "Just to nitpick, nothing is ever implicitly cast. Types are implicitly converted, but a <i>cast</i> means <i>explicit conversion</i>."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487172965, "post_id": 42252023, "comment_id": 71665000, "body": "@StoryTeller Thanks, it&#39;s good to know the specific terminology. I&#39;ve edited my question."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1487172236, "post_id": 42252332, "comment_id": 71664433, "body": "Member/nonmember is irrelevant. It&#39;s the templateness that&#39;s the problem."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1487172432, "post_id": 42252332, "comment_id": 71664588, "body": "I agree with your conclusion (prefer explicit conversions), but I&#39;m not that sure about your explanation. See <a href=\"http://coliru.stacked-crooked.com/a/174a94a1e2fdcb7e\" rel=\"nofollow noreferrer\">this example on coliru</a>."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1487172448, "post_id": 42252332, "comment_id": 71664605, "body": "@T.C. Ah-ha!  Thanks."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1487172576, "last_edit_date": 1487172576, "creation_date": 1487169463, "answer_id": 42252332, "question_id": 42252023, "link": "https://stackoverflow.com/questions/42252023/implicit-conversion-operator-priority/42252332#42252332", "title": "Implicit conversion operator priority", "body": "<pre><code>ostream&amp; operator&lt;&lt;( bool value );\n</code></pre>\n\n<p>Is a member function of <code>std::ostream</code>.  On the other hand:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::string&amp; str);\n</code></pre>\n\n<p>Is a standalone function - <em>which is actually declared as a template</em>.  A reference to <code>S</code> doesn't match any of the templates - so it isn't considered for template expansion.</p>\n\n<hr>\n\n<p>It is possible to uniquely determine which overload should be selected, but I suggest you don't do that.  </p>\n\n<p>a) This is always one of the tricky corners of the standard (so you may encounter compiler bugs; </p>\n\n<p>b) future developers will always find the code hard to read.  </p>\n\n<p>My suggestion is to avoid the problem entirely by just making your conversion operators explicit,  or give them names like <code>to_bool()</code> and <code>to_string()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1487172745, "post_id": 42253006, "comment_id": 71664835, "body": "@YSC : I have edited mine to correct it.  I hadn&#39;t realized at the time it is now an imperfect version of Barry&#39;s.  I&#39;ve still left it, because I think the &quot;don&#39;t do that, then&quot; advice is useful."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1487182094, "post_id": 42253006, "comment_id": 71671665, "body": "@Barry, deduction succeeds for template operator &lt;&lt;. The compiler choose the member function because it is not a template. See my answer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487369602, "post_id": 42253006, "comment_id": 71771594, "body": "A clear way to see this for OP is to comment out <code>operator bool</code> from the original code... then it fails to compile (it doesn&#39;t call the string convertor)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 12, "last_activity_date": 1487368167, "last_edit_date": 1487368167, "creation_date": 1487171128, "answer_id": 42253006, "question_id": 42252023, "link": "https://stackoverflow.com/questions/42252023/implicit-conversion-operator-priority/42253006#42253006", "title": "Implicit conversion operator priority", "body": "<p>Recall that <code>std::string</code> is not a standalone type, it's really a class template specialization - <code>std::basic_string&lt;char&gt;</code>. The very important detail is that the potential overload for streaming a <code>std::string</code> does not take a <code>std::string const&amp;</code> argument, it is a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt\" rel=\"noreferrer\">function template</a> that deduces a <code>std::basic_string const&amp;</code>:</p>\n\n<pre><code>template &lt;class CharT, class Traits, class Allocator&gt;\nstd::basic_ostream&lt;CharT, Traits&gt;&amp; \n    operator&lt;&lt;(std::basic_ostream&lt;CharT, Traits&gt;&amp; os, \n               const std::basic_string&lt;CharT, Traits, Allocator&gt;&amp; str);\n</code></pre>\n\n<p>Template deduction <em>never considers conversions</em>. Name lookup will find this function template, and then discard at as being non-viable due to deduction failure. <code>S</code> is not a <code>basic_string&lt;CharT, Traits, Allocator&gt;</code> for any such types, so we're done. The only viable stream operators would be all the integral ones, of which <code>bool</code> is the best match. </p>\n\n<p>If there specifically was a function with signature:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, std::string const&amp; );    \n</code></pre>\n\n<p>Then the call would be ambiguous - you'd get two user-defined conversions that would be equivalently ranked. </p>\n\n<hr />\n\n<p>This is easy to verify by using our own functions instead of the million overloads for <code>operator&lt;&lt;</code>:</p>\n\n<pre><code>void foo(bool ); // #1\nvoid foo(std::string ); // #2\n\nvoid bar(bool );  // #3\ntemplate &lt;class C, class T, class A&gt;\nvoid bar(std::basic_string&lt;C,T,A&gt; ); // #4\n\nfoo(S{}); // error: ambiguous\nbar(S{}); // calls #3\n</code></pre>\n"}], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 1, "accepted_answer_id": 42253006, "answer_count": 2, "score": 12, "last_activity_date": 1487368167, "creation_date": 1487168702, "last_edit_date": 1487173643, "question_id": 42252023, "link": "https://stackoverflow.com/questions/42252023/implicit-conversion-operator-priority", "title": "Implicit conversion operator priority", "body": "<p>In the following piece of code (<a href=\"http://coliru.stacked-crooked.com/a/b3929a88c63138ec\" rel=\"noreferrer\">live on coliru</a>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    struct S {\n        operator bool        () const { return false; }\n        operator std::string () const { return \"false\"; }\n    } s;\n    std::cout &lt;&lt; s &lt;&lt; \"\\n\"; // outputs 0\n}\n</code></pre>\n\n<p>How does the compiler <em>choose</em> to pick the implicit conversion to <code>bool</code> over <code>std::string</code>?</p>\n\n<p>My hypothesis is that in this case, it might be purely the order of declaration of the different flavours of <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"noreferrer\"><code>std::basic_ostream::operator&lt;&lt;</code></a>, but is it all? Does the standard say something about picking a specific implicit conversion?</p>\n"}]