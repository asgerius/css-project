[{"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513209439, "post_id": 47803886, "comment_id": 82569304, "body": "Could you be more specific?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1513209526, "post_id": 47803886, "comment_id": 82569331, "body": "Also, where is <code>PayrollRecords</code> even defined? Does this code compile?"}, {"owner": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "edited": false, "score": 0, "creation_date": 1513209530, "post_id": 47803886, "comment_id": 82569332, "body": "basically I want to store the employee number into the organisation records vector"}, {"owner": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "edited": false, "score": 0, "creation_date": 1513209619, "post_id": 47803886, "comment_id": 82569350, "body": "the code compiles perfectly, I just cant figure out a way to display employee number"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513209619, "post_id": 47803886, "comment_id": 82569351, "body": "According to your reading code, <i>every</i> organization record has an employee number.  So just add a field for that value to your <code>OrganisationRecord</code> class, then you will have access to it in <code>displayEmployeeOfSalaryGTE()</code>."}, {"owner": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "edited": false, "score": 0, "creation_date": 1513209736, "post_id": 47803886, "comment_id": 82569380, "body": "I was told not to modify the classes, been trying t figure it out all week"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513210113, "post_id": 47803886, "comment_id": 82569510, "body": "Told by whom? That is information you should have included in your question. You can&#39;t solve this issue without modifying at least one of classes, either by adding a new field to <code>OrganisationRecord</code>, or another <code>vector</code> to <code>PayrollProcessing</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "edited": false, "score": 0, "creation_date": 1513209828, "post_id": 47803936, "comment_id": 82569415, "body": "is there a way to do it without modifying the classes?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "edited": false, "score": 0, "creation_date": 1513210044, "post_id": 47803936, "comment_id": 82569482, "body": "@EnsaTouray: no, <i>especially</i> because your code allows a different employee number per organization record.  So you have to store the numbers somewhere, may as well be in the same class as the rest of the organization&#39;s details."}, {"owner": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "edited": false, "score": 0, "creation_date": 1513210340, "post_id": 47803936, "comment_id": 82569575, "body": "what if I were to try and store the numbers inside the organisation records vector along with the other organisation records so that I can implicitly access them when needed? basically I&#39;m not allowed to modify any of the classes"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "edited": false, "score": 0, "creation_date": 1513210487, "post_id": 47803936, "comment_id": 82569615, "body": "That is exactly what my answer already does.  The numbers are stored in the records vector, as a field of each record.  If you are asking to store some kind of list of numbers <i>in addition to</i> the records <i>in the same vector</i>, that will not work, at least not the way you have organized things, unless you store an extra dummy record at the end of the vector with all of the previous numbers formatted as a single delimited string value in one of the existing fields.  But that is a bad design choice. If you can&#39;t change the classes, you are SOL without resorting to hacks."}, {"owner": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "edited": false, "score": 0, "creation_date": 1513212076, "post_id": 47803936, "comment_id": 82569993, "body": "Can you change the type of the vector? Something like <code>vector&lt;pair&lt;int,OrganisationRecord&gt;&gt;</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "edited": false, "score": 0, "creation_date": 1513213307, "post_id": 47803936, "comment_id": 82570301, "body": "@SCFrench: that would require changing the <code>PayrollProcessing</code> class, and as Ensa has already stated: &quot;<i>I&#39;m not allowed to modify any of the classes</i>&quot;"}, {"owner": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "edited": false, "score": 0, "creation_date": 1513279647, "post_id": 47803936, "comment_id": 82603799, "body": "@RemyLebeau You&#39;re right, somehow I thought it was just OrganisationRecord that couldn&#39;t be modified."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1513209968, "last_edit_date": 1513209968, "creation_date": 1513209673, "answer_id": 47803936, "question_id": 47803886, "link": "https://stackoverflow.com/questions/47803886/how-can-i-push-back-an-in-into-a-vector-with-different-data-type/47803936#47803936", "title": "how can i push back an in into a vector with different data type", "body": "<p>According to your reading code, <em>every</em> organization record has an employee number.  So simply add a field for that value to your <code>OrganisationRecord</code> class, then you will have access to it in <code>displayEmployeeOfSalaryGTE()</code>, eg:</p>\n\n<pre><code>class OrganisationRecord\n{\npublic:\n    int employeeNumber; // &lt;-- add this\n    ...\n};\n\n...\n\nvoid PayrollProcessing::loadOrganisationRecords(string filename)\n{\n    ...\n\n    int employeeNumber;\n    OrganisationRecord _organisationrecord;\n\n    while (inputfile &gt;&gt; employeeNumber)\n    {\n        inputfile.ignore();\n        _organisationrecord.employeeNumber = employeeNumber // &lt;-- add this\n        ...\n    }\n\n    ...\n}\n\n...\n\ncout &lt;&lt; \"EmployeeNumber: \" &lt;&lt; OrganisationRecords[count].employeeNumber &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9058966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd33c816523d8008ee6fbb4bfd2c118d?s=128&d=identicon&r=PG&f=1", "display_name": "Ensa Touray", "link": "https://stackoverflow.com/users/9058966/ensa-touray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513209968, "creation_date": 1513209270, "question_id": 47803886, "link": "https://stackoverflow.com/questions/47803886/how-can-i-push-back-an-in-into-a-vector-with-different-data-type", "title": "how can i push back an in into a vector with different data type", "body": "<p>I have two classes, one called \"<code>OrganisationRecord</code>\" and the other called \"<code>PayrollProcessing</code>\". \"<code>OrganisationRecord</code>\" contains the name occupation and department of an employee.</p>\n\n<pre><code>class OrganisationRecord\n{\nprivate:\npublic:\n    string name;\n    string occupation;\n    string department;\n};\n\nclass PayrollProcessing\n{\nprivate:\n    ifstream inputfile;\n    ofstream outputfile;\n    vector&lt;OrganisationRecord&gt; OrganisationRecords;\npublic:\n    void loadOrganisationRecords(string filename);\n    void displayEmployeeOfSalaryGTE(double salary);\n\n    //GTE = greater than or equal to\n};\n</code></pre>\n\n<p>within \"<code>PayrollProcessing</code>\" are two member functions; \"<code>loadOrganisationRecords</code>\" and \"<code>displayEmployeeOfSalaryGTE</code>\" the code for which are:</p>\n\n<pre><code>void PayrollProcessing::loadOrganisationRecords(string filename)\n{\n    inputfile.open(ORGANISATIONALRECORDSFILE);\n\n    if (!inputfile)\n    {\n        cout &lt;&lt; \"the organisation records file does not exist!\" &lt;&lt; endl;\n        return;\n    }\n        OrganisationRecord _organisationrecord;\n        int employeenumber;\n\n        while (inputfile &gt;&gt; employeenumber)\n        {\n            inputfile.ignore();\n            getline(inputfile, _organisationrecord.name);\n            getline(inputfile, _organisationrecord.occupation);\n            getline(inputfile, _organisationrecord.department);\n\n            OrganisationRecords.push_back(_organisationrecord);\n        }\n\n        inputfile.close();\n}\n\nvoid PayrollProcessing::displayEmployeeOfSalaryGTE(double salary)\n    {\n        unsigned int count;\n        salary = SALARY;\n\n        if (salary &lt; 0)\n        {\n            cout &lt;&lt; \"no record match this criteria!\" &lt;&lt; endl;\n            return;\n        }\n        for (count = 0; count &lt; PayrollRecords.size(); count++)\n        {\n            if (PayrollRecords[count].salary &gt;= salary)\n            {\n                cout &lt;&lt; \"=============================================\" &lt;&lt; endl;\n                cout &lt;&lt; \"Employeenumber: \" &lt;&lt; endl &lt;&lt; endl;\n                cout &lt;&lt; \"Name: \" &lt;&lt; OrganisationRecords[count].name &lt;&lt; endl;\n                cout &lt;&lt; \"Adress: \" &lt;&lt;  HRRecords[count].address &lt;&lt; endl;\n                cout &lt;&lt; \"Department: \" &lt;&lt; OrganisationRecords[count].department &lt;&lt; endl;\n                cout &lt;&lt; \"Salary: \" &lt;&lt; PayrollRecords[count].salary &lt;&lt; endl;\n                cout &lt;&lt; \"=============================================\" &lt;&lt; endl;\n                cout &lt;&lt; OrganisationRecords.size();\n            }\n        }\n\n        return;\n    }\n</code></pre>\n\n<p>how can i implicitly make the employee number available for display in \"<code>displayEmployeeOfSalaryGTE</code>\".</p>\n"}, {"tags": ["c++", "for-loop", "optimization", "vector"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 4, "creation_date": 1513209136, "post_id": 47803849, "comment_id": 82569187, "body": "Don&#39;t use a <code>vector</code>, use a <code>map</code> or <code>unordered_map</code>. Then you wouldn&#39;t need a loop at all. Micro-optimizing the loop is unlikely to give you noticeably better performance than you&#39;re getting already."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 3, "creation_date": 1513209171, "post_id": 47803849, "comment_id": 82569201, "body": "Considering things like <code>size_t</code> and pre-vs-post increment are not worth your time. You need to consider a different data structure. Have you considered a <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\"><code>std::map</code></a>?"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513209240, "post_id": 47803849, "comment_id": 82569225, "body": "Is this data sorted?"}, {"owner": {"reputation": 11, "user_id": 9096319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78eaae77e78d8985422f9e9b420ad03b?s=128&d=identicon&r=PG&f=1", "display_name": "bakablue2032", "link": "https://stackoverflow.com/users/9096319/bakablue2032"}, "edited": false, "score": 1, "creation_date": 1513209389, "post_id": 47803849, "comment_id": 82569281, "body": "Ah yes! A map. That totally glossed over my mind. That would make WAY more sense."}, {"owner": {"reputation": 11, "user_id": 9096319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78eaae77e78d8985422f9e9b420ad03b?s=128&d=identicon&r=PG&f=1", "display_name": "bakablue2032", "link": "https://stackoverflow.com/users/9096319/bakablue2032"}, "reply_to_user": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513209758, "post_id": 47803849, "comment_id": 82569390, "body": "@Jake Freeman it is unknown if this vector is sorted or not."}, {"owner": {"reputation": 2308, "user_id": 5883832, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Emekr.jpg?s=128&g=1", "display_name": "PhotometricStereo", "link": "https://stackoverflow.com/users/5883832/photometricstereo"}, "edited": false, "score": 0, "creation_date": 1513209775, "post_id": 47803849, "comment_id": 82569397, "body": "One more thing, but not pertaining to your loop. You pass your <code>species</code> string into the function by value. Normally this would be fine as species are generally short strings using short string optimizations. However it is good practice to use <code>std::string&amp;</code> or <code>const std::string&amp;</code> to pass in your <code>species</code> string."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 2308, "user_id": 5883832, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Emekr.jpg?s=128&g=1", "display_name": "PhotometricStereo", "link": "https://stackoverflow.com/users/5883832/photometricstereo"}, "edited": false, "score": 0, "creation_date": 1513210166, "post_id": 47803849, "comment_id": 82569525, "body": "@PhotometricStereo A bigger issue along those lines, which might well be the biggest cost in the function, is that the vector is also passed by value."}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 5, "creation_date": 1513209810, "post_id": 47803923, "comment_id": 82569408, "body": "I highly doubt that any modern compiler will not optimise <code>i++</code> to <code>++i</code> when <code>i</code> is an <code>int</code> and the incrementation is the only operation between the <code>;</code>s"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1513210252, "post_id": 47803923, "comment_id": 82569551, "body": "Better than both of these is to switch to a range-based for loop."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1513226734, "post_id": 47803923, "comment_id": 82573436, "body": "@DanielH a range-based for loop might look a little cleaner, but I doubt the compiler will generate more efficient code for it."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1513229299, "post_id": 47803923, "comment_id": 82574166, "body": "@MarkRansom It won&#39;t do things like call <code>size()</code> multiple times or increment iterators in a slow way, which is all that this answer talks about. I agree those are relatively small changes and that switching to range-based for loops won&#39;t be a big improvement, but when there&#39;s a difference I expect them to be slightly better than a non-range-based option."}], "tags": [], "owner": {"reputation": 11, "user_id": 9096350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSohS.jpg?s=128&g=1", "display_name": "cluslus", "link": "https://stackoverflow.com/users/9096350/cluslus"}, "is_accepted": false, "score": 1, "last_activity_date": 1513209478, "creation_date": 1513209478, "answer_id": 47803923, "question_id": 47803849, "link": "https://stackoverflow.com/questions/47803849/optimizing-for-loops-c/47803923#47803923", "title": "Optimizing For Loops C++", "body": "<p>One thing you could do is reduce the number of times .size() method gets called, by doing something like this:</p>\n\n<pre><code>size_t vectorSize = animals.size();\nfor (size_t i = 0; i &lt; vectorSize; i++)\n{\n    if (animals[i].species == species)\n\n    {\n        return animals[i].habitat;\n    }\n}\n</code></pre>\n\n<p>Another minor one would be to change <code>i++</code> to <code>++i</code>. The purpose of this is to avoid storing the value of <code>i</code> in a register every time it increments.</p>\n"}, {"comments": [{"owner": {"reputation": 2308, "user_id": 5883832, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Emekr.jpg?s=128&g=1", "display_name": "PhotometricStereo", "link": "https://stackoverflow.com/users/5883832/photometricstereo"}, "edited": false, "score": 0, "creation_date": 1513209895, "post_id": 47803958, "comment_id": 82569438, "body": "Why not pass inputs by reference?"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 2308, "user_id": 5883832, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Emekr.jpg?s=128&g=1", "display_name": "PhotometricStereo", "link": "https://stackoverflow.com/users/5883832/photometricstereo"}, "edited": false, "score": 0, "creation_date": 1513210123, "post_id": 47803958, "comment_id": 82569512, "body": "@PhotometricStereo Good suggestion."}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 6, "last_activity_date": 1513210072, "last_edit_date": 1513210072, "creation_date": 1513209824, "answer_id": 47803958, "question_id": 47803849, "link": "https://stackoverflow.com/questions/47803849/optimizing-for-loops-c/47803958#47803958", "title": "Optimizing For Loops C++", "body": "<p>A <code>std::map</code> surely works better than looping over a vector here:</p>\n\n<pre><code>string GetAnimalHabitat(const map&lt;string, string&gt;&amp; animals, const string&amp; species)\n{\n    auto search = animals.find(species);\n    if (search != animals.end())\n        return search-&gt;second;\n    return string(\"Animal not within records.\");\n}\n</code></pre>\n\n<p>It requires building a map first, however. But building it once is enough and you only have to add new key pairs to it:</p>\n\n<pre><code>map&lt;string, string&gt; build_map(const vector&lt;Animal&gt;&amp; animals)\n{\n    map&lt;string, string&gt; ret;\n    for (const auto&amp; x : animals)\n        ret[x.species] = x.habitat;\n    return ret;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 1, "last_activity_date": 1513210464, "creation_date": 1513210464, "answer_id": 47804052, "question_id": 47803849, "link": "https://stackoverflow.com/questions/47803849/optimizing-for-loops-c/47804052#47804052", "title": "Optimizing For Loops C++", "body": "<p>At a high level, you want to stop making a full copy of the vector and all its elements each time you call this function.  If you're needing to optimize, I assume the vector is large, so why not pass a reference to a const vector?</p>\n\n<p>Second, another problem is how many elements of the vector will match your input string?  If it's just a few, then scanning the whole vector is loading a lot of memory just to look at it to decide you don't need it.  Since you return after the first match, it's reasonable to think there is at most one of each species, and in that case an associative container is better.</p>\n\n<p>Some latency sensitive places partition data into different groups so no \"filtering\" is necessary.  Just look at the group of things you care about and only process those.</p>\n\n<p>Another thing to consider, a string comparison is much slower than something like an integer comparison.  You could pre-hash the species into the class, hash the species parameter before your loop, and compare the hashes.  If they are equal, THEN compare the strings to make sure it's a real match. </p>\n\n<p>But my guess is most of your time is spent copying your inputs and outputs.</p>\n"}, {"tags": [], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "is_accepted": false, "score": 0, "last_activity_date": 1514916962, "creation_date": 1514916962, "answer_id": 48065827, "question_id": 47803849, "link": "https://stackoverflow.com/questions/47803849/optimizing-for-loops-c/48065827#48065827", "title": "Optimizing For Loops C++", "body": "<p><code>std::unordered_map</code> makes the most sense since order is not important</p>\n\n<pre><code>string GetAnimalHabitat(const std::unordered_map&lt;string, string&gt;&amp; animals, const string&amp; species)\n{\n    auto search = animals.find(species);\n    if (search != animals.end())\n        return search-&gt;second;\n    return string(\"Animal not within records.\");\n}\n</code></pre>\n\n<p>It requires building a map first, however. But building it once is enough and you only have to add new key pairs to it.   Note that first time you pass a empty unordered_map in, after that you pass a vector of new values and the current map:</p>\n\n<pre><code>build_map(const std::vector&lt;Animal&gt;&amp; animals, std::unordered_map&lt;string_string&gt; * ret)\n{\n    for (const auto&amp; x : animals)\n        ret[x.species] = x.habitat;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9096319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78eaae77e78d8985422f9e9b420ad03b?s=128&d=identicon&r=PG&f=1", "display_name": "bakablue2032", "link": "https://stackoverflow.com/users/9096319/bakablue2032"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1514916962, "creation_date": 1513209012, "last_edit_date": 1513236147, "question_id": 47803849, "link": "https://stackoverflow.com/questions/47803849/optimizing-for-loops-c", "title": "Optimizing For Loops C++", "body": "<p>I have this small function that loops through a vector to find a given animal and return its habitat. I need to optimize it, but I'm hitting dead ends with what I could be doing. Three things that popped out at me was <code>size_t</code>, <code>i++</code>, and the fact I'm looping through a vector. I read that <code>size_t</code> is great for arrays that have a large size index. I know that <code>pre-increment</code> is better than <code>post-increment</code> since it changes the original value instead of creating a temp and incrementing. But compilers usually optimize this small difference anyway. Finally, the last thing I thought was that this vector could be unsorted, therefore dipping in performance. I was thinking of sorting the vector by the species variable of animals, then maybe porting it into a <code>BST</code> to search since the time complexity would be <code>O(log(n))</code>. Here is the code I'm working with:</p>\n\n<pre><code>string GetAnimalHabitat(vector&lt;Animal&gt; animals, string species)\n{\n    for (size_t i = 0; i &lt; animals.size(); i++)\n    {\n        if (animals[i].species == species)\n\n        {\n            return animals[i].habitat;\n        }\n    }\n    return \"Animal not within records.\";\n}\n</code></pre>\n\n<p>Is there anything that I'm potentially missing that could improve this function? Any tips would be great. Thanks! </p>\n"}, {"tags": ["c++", "c++11", "argument-dependent-lookup", "name-lookup"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1513208773, "post_id": 47803759, "comment_id": 82569069, "body": "You mean to say <code>&amp;g</code> doesn&#39;t compile right? There&#39;s no <code>g</code>."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1513210772, "post_id": 47803759, "comment_id": 82569680, "body": "Your code compiles for me with vs 2017 (15.5.1), VC 19.12.something, even with no c++ standard set."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1513211566, "post_id": 47803759, "comment_id": 82569867, "body": "<code>g_call</code> depends on <code>T</code> - but I&#39;m not sure how this is relevant; your problem is not with lookup of <code>g_call</code>, it&#39;s with lookup of <code>g</code>. When it appears in a function call, it&#39;s looked up twice - ordinary lookup at the point of definition, ADL at the point of instantiation (it&#39;s the latter that finds it). When it appears in <code>&amp;g</code>, it&#39;s not a dependent name, and is only looked up once, at the point of definition."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 1, "creation_date": 1513211672, "post_id": 47803759, "comment_id": 82569899, "body": "@SoronelHaetir It works because MSVC notoriously doesn&#39;t implement two-phase lookup, and delays all lookup to the point of instantiation. It happily compiles <code>template &lt;typename T&gt; void f() { random garbage here; }</code> as long as <code>f</code> is not actually used (<a href=\"http://rextester.com/GPCV88315\" rel=\"nofollow noreferrer\">Demo</a>)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1513216251, "post_id": 47803759, "comment_id": 82570966, "body": "You are asking for a workaround, but you are not describing what you want.  You are simply showing code that does not compile.  I could make your compile a countably infiinite number of ways, but with no clues asto what the underlying problem you are trying to solve I would not know what subset would be useful to you (if any), and SO has a post length limit that is finite."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 165, "user_id": 9064437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/423d7fe9d2232594bd7cde1eee5c0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu Vultur", "link": "https://stackoverflow.com/users/9064437/horatiu-vultur"}, "edited": false, "score": 0, "creation_date": 1513253374, "post_id": 47804786, "comment_id": 82587293, "body": "@horatiu While I did not explain why your code does not work, I am unclear hiw my technique does not solve ypur updated question.  Use a stateless lambda to force ADL..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1513255894, "post_id": 47804786, "comment_id": 82588900, "body": "<code>decltype(t)</code> So... <code>T</code>? :)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1513256126, "post_id": 47804786, "comment_id": 82589088, "body": "@barry It was copy/pasted from the OP&#39;s original question.  ;)  Cleaned up."}, {"owner": {"reputation": 165, "user_id": 9064437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/423d7fe9d2232594bd7cde1eee5c0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu Vultur", "link": "https://stackoverflow.com/users/9064437/horatiu-vultur"}, "edited": false, "score": 0, "creation_date": 1513257055, "post_id": 47804786, "comment_id": 82589693, "body": "@Yakk With your changes, I managed to compile it but I had to use c++17 and with some small changes. Correct me if I am wrong but you can&#39;t have a constexpr lambda function in c++14."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 165, "user_id": 9064437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/423d7fe9d2232594bd7cde1eee5c0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu Vultur", "link": "https://stackoverflow.com/users/9064437/horatiu-vultur"}, "edited": false, "score": 0, "creation_date": 1513264501, "post_id": 47804786, "comment_id": 82594756, "body": "@HoratiuVultur Ah, I missed the constexpr.  Well you can write a manual equivalent of a lambda that is constexpr, it is just more verbose."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 165, "user_id": 9064437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/423d7fe9d2232594bd7cde1eee5c0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu Vultur", "link": "https://stackoverflow.com/users/9064437/horatiu-vultur"}, "edited": false, "score": 0, "creation_date": 1513264659, "post_id": 47804786, "comment_id": 82594858, "body": "@HoratiuVultur Manual lambda added."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1513264640, "last_edit_date": 1513264640, "creation_date": 1513216566, "answer_id": 47804786, "question_id": 47803759, "link": "https://stackoverflow.com/questions/47803759/c-function-pointers-name-lookup-inside-function-template/47804786#47804786", "title": "C++ function pointers name lookup inside function template", "body": "<pre><code>template &lt;typename T&gt;\nvoid foo(T t) {\n   void(*f)(T) = +[](T x){ return g(std::forward&lt;T&gt;(x)); };\n   f(t); //This compiles\n   g(t); //This compiles\n}\n</code></pre>\n\n<p>this may be what you want.  Note that the argument is moved once within f, which should not matter for primitive types.</p>\n\n<pre><code>template &lt;class T&gt;\nstruct TypeResolution;\n\ntemplate &lt;class T&gt;\nstruct TypeResolution&lt;T&amp;&gt;:TypeResolution&lt;T&gt; {};\n\ntemplate &lt;class T&gt;\nstruct TypeResolution {\n  typedef const T* type;\n  static constexpr void (*func_ptr)(type) = +[](type x){ return g(x); };\n  static constexpr void *func_ptr_void = (void*)func_ptr;\n};\n</code></pre>\n\n<p>requires <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a> because you cannot use lambdas in <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a> or <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> in a <code>constexpr</code> expression.</p>\n\n<p>In previous versions of C++ we can do:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct TypeResolution {\n  typedef const T* type;\n  static void invoke_g(type t) { g( t ); }\n  static constexpr void (*func_ptr)(type) = invoke_g;\n  static constexpr void *func_ptr_void = (void*)func_ptr;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 9064437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/423d7fe9d2232594bd7cde1eee5c0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu Vultur", "link": "https://stackoverflow.com/users/9064437/horatiu-vultur"}, "is_accepted": false, "score": 0, "last_activity_date": 1513260805, "creation_date": 1513260805, "answer_id": 47815429, "question_id": 47803759, "link": "https://stackoverflow.com/questions/47803759/c-function-pointers-name-lookup-inside-function-template/47815429#47815429", "title": "C++ function pointers name lookup inside function template", "body": "<p>Based on Yakk's answer and based on <a href=\"http://open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4487.pdf\" rel=\"nofollow noreferrer\">n4487</a> I managed to implement a solution that I managed to compile with c++14.</p>\n\n<p><a href=\"https://godbolt.org/g/BRee4u\" rel=\"nofollow noreferrer\">https://godbolt.org/g/BRee4u</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;string&gt;\n\nvoid g(int*) {}\n\ntemplate &lt;typename T&gt;\nstruct TypeResolution;\n\ntemplate &lt;typename T&gt;\nstruct TypeResolution&lt;T&amp;&gt; {\n    struct Inner {\n        static constexpr void foo(T* t) { g(t); }\n    };\n    static constexpr void *func_ptr_void = (void*)Inner::foo;\n};\n\ntemplate &lt;typename T&gt;\nstruct TypeResolution {\n    struct Inner {\n        static constexpr void foo(T* t) { g(t); }\n    };\n    static constexpr void *func_ptr_void = (void*)Inner::foo;\n};\n\nvoid foo_impl(void *func_args[], void *data_args[]) {\n    //Some work here, that will be in a different file or library\n}\n\ntemplate &lt;typename... ARGS&gt;\nvoid foo(ARGS &amp;&amp; ... args) {\n    void *func_ptrs[] = { TypeResolution&lt;ARGS&gt;::func_ptr_void... };\n    void *args_ptrs[] = {(void*)&amp;args...};\n    foo_impl(func_ptrs, args_ptrs);\n}\n\nstruct MyClass {};\nvoid g(const MyClass*) {}\n\nint main(int argc, char* argv[]) {\n    int i = 1;\n    foo(i);\n\n    MyClass c;\n    foo(c);\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 9064437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/423d7fe9d2232594bd7cde1eee5c0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu Vultur", "link": "https://stackoverflow.com/users/9064437/horatiu-vultur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 47804786, "answer_count": 2, "score": 2, "last_activity_date": 1513264640, "creation_date": 1513208392, "last_edit_date": 1513248261, "question_id": 47803759, "link": "https://stackoverflow.com/questions/47803759/c-function-pointers-name-lookup-inside-function-template", "title": "C++ function pointers name lookup inside function template", "body": "<p>I am trying to understand the name lookup and argument dependency lookup.I have created a small example. </p>\n\n<p>Edited:</p>\n\n<p><a href=\"https://godbolt.org/g/rMWUbe\" rel=\"nofollow noreferrer\">https://godbolt.org/g/rMWUbe</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid g(const int*) {}\n\ntemplate &lt;typename T&gt;\nstruct TypeResolution;\n\ntemplate &lt;typename T&gt;\nstruct TypeResolution&lt;T&amp;&gt; {\n    typedef const T* type;\n    static constexpr void (*func_ptr)(TypeResolution::type) = g;\n    static constexpr void *func_ptr_void = (void*)func_ptr;\n};\n\ntemplate &lt;typename T&gt;\nstruct TypeResolution {\n    typedef const T* type;\n    static constexpr void (*func_ptr)(TypeResolution::type) = g;\n    static constexpr void *func_ptr_void = (void*)func_ptr;\n};\n\nvoid foo_impl(void *[], void *[]) {\n   //Some work here, that will be in a different file or library\n}\n\ntemplate &lt;typename... ARGS&gt;\nvoid foo(ARGS &amp;&amp; ... args) {\n   void *func_ptrs[] = { TypeResolution&lt;ARGS&gt;::func_ptr_void... };\n   void *args_ptrs[] = {(void*)&amp;args...};\n   foo_impl(func_ptrs, args_ptrs);\n}\n\nstruct MyClass {};\nvoid g(const MyClass*) {}\n\nint main(int argc, char* argv[]) {\n   int i = 1;\n   foo(i);\n\n   int j = 2;\n   foo(i, j);\n\n   MyClass c;\n   foo(c); //This fails.\n}\n</code></pre>\n\n<p>So my question is, why it doesn't compile? Or more simply why the lookup of g inside the TypeResolution happens when the class is declared, and not when it is instantiated? As I expected inside the main function and then to see the function <code>void g(const MyClass*)</code></p>\n\n<p>What I want to obtain is to be able to call different functions for different different types, but without needing to forward declare them. </p>\n\n<p>I am using g++ 5.4.0 on Ubuntu 16.04</p>\n"}, {"tags": ["c++", "c++17", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 1784153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098b4d71603f3703483465f1d78ca51a?s=128&d=identicon&r=PG", "display_name": "Oragon Efreet", "link": "https://stackoverflow.com/users/1784153/oragon-efreet"}, "edited": false, "score": 0, "creation_date": 1513209543, "post_id": 47803873, "comment_id": 82569336, "body": "Funny how after ten reads on cppreference I still did not see <code>invoke_result</code> does not have the same syntax as <code>result_of</code>. And yeah, for the address, it makes sense. Thank you."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1513209241, "last_edit_date": 1513209241, "creation_date": 1513209167, "answer_id": 47803873, "question_id": 47803751, "link": "https://stackoverflow.com/questions/47803751/using-sfinae-to-check-for-member-function-and-call-it/47803873#47803873", "title": "Using SFINAE to check for member function and call it", "body": "<p>Your problem is here:</p>\n\n<pre><code>template&lt;class S, class... ARGS&gt;\nauto activate(S&amp; s, ARGS&amp;&amp;... p_args)\n    -&gt; typename std::invoke_result&lt;decltype(&amp;S::activate)(S, ARGS...)&gt;::type\n//                                          ^^^^^^^^^^^^\n</code></pre>\n\n<p>If <code>activate</code> is an overloaded member function, as it is for <code>A</code>, you can't take its address via <code>decltype</code>. Secondly, that's an incorrect use of <a href=\"http://en.cppreference.com/w/cpp/types/result_of\" rel=\"nofollow noreferrer\"><code>invoke_result</code></a> - it doesn't use the <code>result_of</code> syntax of <code>F(Args...)</code>, you just do <code>invoke_result&lt;F, Args...&gt;</code>. It's simpler.</p>\n\n<p>What you want is to just directly invoke it yourself:</p>\n\n<pre><code>template&lt;class S, class... ARGS&gt;\nauto activate(S&amp; s, ARGS&amp;&amp;... p_args)\n    -&gt; decltype(s.activate(std::forward&lt;ARGS&gt;(p_args)...))\n</code></pre>\n\n<p>This side-steps the question of overloaded names, and how to use <code>invoke_result</code>. </p>\n"}], "owner": {"reputation": 1012, "user_id": 1784153, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098b4d71603f3703483465f1d78ca51a?s=128&d=identicon&r=PG", "display_name": "Oragon Efreet", "link": "https://stackoverflow.com/users/1784153/oragon-efreet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 47803873, "answer_count": 1, "score": 2, "last_activity_date": 1513210126, "creation_date": 1513208365, "last_edit_date": 1513210126, "question_id": 47803751, "link": "https://stackoverflow.com/questions/47803751/using-sfinae-to-check-for-member-function-and-call-it", "title": "Using SFINAE to check for member function and call it", "body": "<p>I am trying to understand how SFINAE works. </p>\n\n<p>My needs:</p>\n\n<p>I have a set of types which may provide or not a member function called <code>activate</code>. The thing is if <code>activate</code> does exist for the given type, it may accept any arguments. I want to write a function that will forward to the type's <code>activate</code>, if it exists, otherwise simply <code>return true</code>.</p>\n\n<p>I tried:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;functional&gt;\n\nstruct A\n{\n    bool activate()\n    {   \n        std::clog &lt;&lt; \"A::activate() called\" &lt;&lt; std::endl;\n        return true;\n    }   \n\n    bool activate(const char*)\n    {   \n        std::clog &lt;&lt; \"A::activate(const char*) called\" &lt;&lt; std::endl;\n        return true;\n    }   \n};\n\nstruct B\n{\n    // NOTHING\n};\n\ntemplate&lt;class S, class... ARGS&gt;\nauto activate(S&amp; s, ARGS&amp;&amp;... p_args) -&gt; typename std::invoke_result&lt;decltype(&amp;S::activate)(S, ARGS...)&gt;::type\n{\n    return s.activate(std::forward&lt;ARGS&gt;(p_args)...);\n}\n\nbool activate(...)\n{\n    return true;\n}\n\n\nint main(int argc, char* argv[])\n{\n    A a;\n    B b;\n\n    activate(a);\n    activate(a, \"Hello\");\n    activate(b);\n\n    return 0;\n}\n</code></pre>\n\n<p>But nothing is ever printed. Why?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1513208429, "post_id": 47803750, "comment_id": 82568972, "body": "Hint: Use <code>std:vector</code> instead of <code>new[]</code>. It&#39;ll save you a ton of pain and trouble. Also if your program isn&#39;t behaving like you expect it to, step through with a debugger to see what&#39;s happening."}, {"owner": {"reputation": 202, "user_id": 7342855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9c005587bc2b23af7c9231b3abd2d9a?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelX", "link": "https://stackoverflow.com/users/7342855/michaelx"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1513208626, "post_id": 47803750, "comment_id": 82569032, "body": "As I&#39;ve said in the post, my college doesn&#39;t allow me to use vectors."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1513208859, "post_id": 47803750, "comment_id": 82569097, "body": "Why do people insist on teaching &quot;C++&quot; courses that utterly fail to teach any meaningful C++? It&#39;s ridiculous. It&#39;s like they start with <code>using namespace std;</code>, which is a bad habit to adopt, and things go sharply downhill from there. I&#39;m all for teaching things from first principles, but even the book Bjarne wrote, which does that, shows how the Standard Library containers are built from primitives, it doesn&#39;t reinvent the wheel, just shows you how their wheel was made. Hope you can do what you&#39;ve got to do to pass, then. Debugger time!"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513208903, "post_id": 47803750, "comment_id": 82569107, "body": "aha - the usual  &#39;dont use the correct tool for the job, instead hack something you will never use again &#39; BS. The only justification for this is if this is a course trying to show you how to create std::vector like class"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513209052, "post_id": 47803750, "comment_id": 82569167, "body": "i mean this is a good advanced c++ task, create your own equivalent of std::vector. But i doubt thats the point here. The first thing you would do is use std::vector so you get the semantics"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513209203, "post_id": 47803750, "comment_id": 82569211, "body": "any way lets try to fix your issue. &quot;nothing happens&quot; what does that mean? More importantly do you know how to use your debugger?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1513209298, "post_id": 47803750, "comment_id": 82569251, "body": "You have an array of <code>Treatment</code> and the term you need to search for is &quot;slicing&quot;."}, {"owner": {"reputation": 202, "user_id": 7342855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9c005587bc2b23af7c9231b3abd2d9a?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelX", "link": "https://stackoverflow.com/users/7342855/michaelx"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513209316, "post_id": 47803750, "comment_id": 82569257, "body": "@pm100 The last statement I have, <code>cout &lt;&lt; i &lt;&lt;endl</code> doesn&#39;t print anything. I know how to use gdb to debug C but I don&#39;t know if it works on C++."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513209360, "post_id": 47803750, "comment_id": 82569273, "body": "<code>while (1);</code> is not a good thing to do. You should do <code>cin&gt;&gt;some_int</code> if you want to pause"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513209389, "post_id": 47803750, "comment_id": 82569280, "body": "gdb works the same for c++"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1513212201, "post_id": 47803750, "comment_id": 82570025, "body": "You do not need <code>..(void)</code> in methods. Please read up about <code>const</code>. Please dump` using namespace std;<code>. Please use </code>std::vector` and get the lecture to refer to us - real programmers"}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1513212295, "post_id": 47804255, "comment_id": 82570041, "body": "<code>virtual ~Treatment() {} &#47;&#47; &lt;-- add this</code> - Are you sure that this is required?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1513213226, "post_id": 47804255, "comment_id": 82570274, "body": "@EdHeal: If the base class destructor is not <code>virtual</code>, calling <code>delete</code> on a base class pointer will not invoke derived destructors.  This is OK as long as the derived classes do not have any data members with non-trivial destructors. If they do, the virtual destructor is required to avoid leaks. When writing polymorphic classes, it is common practice to <i>always</i> define a virtual destructor, just in case."}, {"owner": {"reputation": 202, "user_id": 7342855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9c005587bc2b23af7c9231b3abd2d9a?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelX", "link": "https://stackoverflow.com/users/7342855/michaelx"}, "edited": false, "score": 0, "creation_date": 1513213433, "post_id": 47804255, "comment_id": 82570339, "body": "I&#39;m familiar with slicing, but I only need to access parent methods, so I don&#39;t think it plays a part here. I copy pasted your code but it didn&#39;t seem to print either, anyway, you&#39;ve fixed it enough that I can debug on my own now. Thanks."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 202, "user_id": 7342855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9c005587bc2b23af7c9231b3abd2d9a?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelX", "link": "https://stackoverflow.com/users/7342855/michaelx"}, "edited": false, "score": 0, "creation_date": 1513213486, "post_id": 47804255, "comment_id": 82570354, "body": "@MichaelX: slicing isn&#39;t about methods, it is about data. If you slice an <code>Outside_treatment</code> object, you lose its <code>clinic_num</code> data. Then there is no point in creating an <code>Outside_treatment</code> object in the first place."}, {"owner": {"reputation": 202, "user_id": 7342855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9c005587bc2b23af7c9231b3abd2d9a?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelX", "link": "https://stackoverflow.com/users/7342855/michaelx"}, "edited": false, "score": 0, "creation_date": 1513214151, "post_id": 47804255, "comment_id": 82570495, "body": "<code>virtual get_clinic_num()</code> would fix that, correct?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 202, "user_id": 7342855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9c005587bc2b23af7c9231b3abd2d9a?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelX", "link": "https://stackoverflow.com/users/7342855/michaelx"}, "edited": false, "score": 0, "creation_date": 1513218468, "post_id": 47804255, "comment_id": 82571521, "body": "@MichaelX: That would NOT solve the slicing problem, no. The data is <i>gone</i>, it is not even in memory. And besides, it doesn&#39;t make sense to add derived-specific functions to a base class anyway"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1513213437, "last_edit_date": 1513213437, "creation_date": 1513211964, "answer_id": 47804255, "question_id": 47803750, "link": "https://stackoverflow.com/questions/47803750/dynamic-object-array-not-working/47804255#47804255", "title": "Dynamic object array not working", "body": "<p>You are creating an array of <code>Treatment</code> object instances.  As such, you cannot store any derived types at all.  If you try to assign an object of a  derived type to a <code>Treatment</code>object, <a href=\"https://stackoverflow.com/questions/274626/\">it will get sliced</a>.</p>\n\n<p>Your hunch is correct.  Since you are dealing with polymorphic types, you need to store <em>pointers to objects</em>, not <em>actual</em> objects, in the array.  Then you can store <code>Treatment*</code> pointers to objects of any derived type, eg:</p>\n\n<pre><code>class Treatment {\n    ...\npublic:\n    ...\n\n    // make the base class destructor virtual so calling\n    // 'delete' on a base class pointer will invoke derived\n    // destructors. Otherwise, if a derived class has any\n    // data members with a non-trivial destructor, you will\n    // cause leaking.  When writing polymorphic classes, it\n    // is common practice to always define a virtual destructor,\n    // just in case...\n    //\n    virtual ~Treatment() {} // &lt;-- add this\n    ..\n};\n\nclass Dynarray {\nprivate:\n    Treatment **pa;\n    int length;\n    int capacity;\n\n    // prevent copying the array, otherwise you risk\n    // memory errors if multiple arrays own the same\n    // objects being pointed at and try to free them\n    // multiple times. Copying pointers to owned objects\n    // is not safe, you need a cloning mechanism to\n    // make deep-copies of derived types so a copied\n    // array can point to its own objects...\n    Dynarray(const Dynarray &amp;) {}\n    Dynarray&amp; operator=(const Dynarray &amp;) {}\n\npublic:\n    Dynarray(int initialCapacity = 10) {\n        pa = new Treatment*[initialCapacity];\n        capacity = initialCapacity;\n        length = 0;\n    }\n\n    ~Dynarray() {\n        for (int i = 0; i &lt; length; ++i)\n            delete pa[i];\n        delete[] pa;\n    }\n\n    void add(Treatment *add) {\n        if (length == capacity) {\n            Dynarray temp(capacity + 10);\n            for (int i = 0; i &lt; length; ++i) {\n                temp.pa[i] = pa[i];\n            }\n            Treatment *ptr = temp.pa;\n            temp.pa = pa;\n            pa = ptr;\n            capacity = temp.capacity;\n        }\n\n        pa[length++] = add;\n    }\n\n    Treatment* operator[](int index) {\n        return pa[index];\n    }\n};\n\nint main(void) {\n    Outside_treatment *ot = new Outside_treatment;\n\n    cout &lt;&lt; \"Enter the patient ID\\n\";\n    int p_id;\n    cin &gt;&gt; p_id;\n    ot-&gt;set_patient_ID(p_id);\n    cin.ignore();\n    cout &lt;&lt; \"set treatment date\\n\";\n    ot-&gt;read_treatment_date();\n\n    cout &lt;&lt; \"enter costs\\n\";\n    int costs;\n    cin &gt;&gt; costs;\n    ot-&gt;set_treatment_costs(costs);\n\n    cout &lt;&lt; \"enter section num\\n\";\n    int sc_num;\n    cin &gt;&gt; sc_num;\n    ot-&gt;set_clinic_num(sc_num);\n\n    ot-&gt;print_outside_treatment();\n\n    Dynarray da;\n    da.add(ot);\n\n    Treatment *t = da[0];\n\n    int i = t-&gt;get_patient_ID();\n    cout &lt;&lt; i &lt;&lt; endl;\n\n    while (1);\n};\n</code></pre>\n\n<p>On the other hand, if the array doesn't need to own the objects being pointed at, just store the pointers, you can remove the <code>delete</code> loop in the destructor, and the caller is not required to use <code>new</code> to create objects being stored, and making a copy of the array is safe, eg:</p>\n\n<pre><code>class Dynarray {\nprivate:\n    Treatment **pa;\n    int length;\n    int capacity;\n\npublic:\n    Dynarray(int initialCapacity = 10) {\n        pa = new Treatment*[initialCapacity];\n        capacity = initialCapacity;\n        length = 0;\n    }\n\n    // coping is OK since the objects being pointed\n    // at are not owned by the array!\n    Dynarray(const Dynarray &amp;src) {\n        pa = new Treatment*[src.capacity];\n        capacity = src.capacity;\n        length = src.length;\n        for (int i = 0; i &lt; length; ++i) {\n            pa[i] = src.pa[i];\n        }\n    }\n\n    Dynarray&amp; operator=(const Dynarray &amp;rhs) {\n        if (&amp;rhs != this) {\n            Dynarray temp(rhs);\n            Treatment **ptr = temp.pa;\n            temp.pa = pa;\n            pa = ptr;\n            capacity = rhs.capacity;\n            length = rhs.length;\n        }\n        return *this;\n    }\n\n    ~Dynarray() {\n        delete[] pa;\n    }\n\n    void add(Treatment *add) {\n        if (length == capacity) {\n            Dynarray temp(capacity + 10);\n            for (int i = 0; i &lt; length; ++i) {\n                temp.pa[i] = pa[i];\n            }\n            Treatment **ptr = temp.pa;\n            temp.pa = pa;\n            pa = ptr;\n            capacity = temp.capacity;\n        }\n\n        pa[length++] = add;\n    }\n\n    Treatment* operator[](int index) {\n        return pa[index];\n    }\n};\n\nint main(void) {\n    Outside_treatment ot;\n\n    cout &lt;&lt; \"Enter the patient ID\\n\";\n    int p_id;\n    cin &gt;&gt; p_id;\n    ot.set_patient_ID(p_id);\n    cin.ignore();\n    cout &lt;&lt; \"set treatment date\\n\";\n    ot.read_treatment_date();\n\n    cout &lt;&lt; \"enter costs\\n\";\n    int costs;\n    cin &gt;&gt; costs;\n    ot.set_treatment_costs(costs);\n\n    cout &lt;&lt; \"enter section num\\n\";\n    int sc_num;\n    cin &gt;&gt; sc_num;\n    ot.set_clinic_num(sc_num);\n\n    ot.print_outside_treatment();\n\n    Dynarray da;\n    da.add(&amp;ot);\n\n    Treatment *t = da[0];\n\n    int i = t-&gt;get_patient_ID();\n    cout &lt;&lt; i &lt;&lt; endl;\n\n    while (1);\n};\n</code></pre>\n"}], "owner": {"reputation": 202, "user_id": 7342855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9c005587bc2b23af7c9231b3abd2d9a?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelX", "link": "https://stackoverflow.com/users/7342855/michaelx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 47804255, "answer_count": 1, "score": 0, "last_activity_date": 1513213437, "creation_date": 1513208361, "question_id": 47803750, "link": "https://stackoverflow.com/questions/47803750/dynamic-object-array-not-working", "title": "Dynamic object array not working", "body": "<p>I have one parent and two children, I want to create a dynamic array that contains the children (not allowed to use vectors). I created the classes and everything, and I get no compilation errors or warnings, but when I try to access a member of the array and print its content, nothing happens.</p>\n\n<p>I'm aware there may be some bad coding style here, but I'm only interested in knowing why the array isn't working. I think it's because I created an array of objects, instead of an array of pointers to objects, I'm not sure.</p>\n\n<p>(I removed the 2nd child from the code because it's irrelevant here)</p>\n\n<pre><code>#pragma warning(disable:4996)\nusing namespace std;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cctype&gt;\n#include \"date.h\"\n\n#define ADDRESS_SIZE 512\n#define NAME_SIZE 128\n#define DATE_SIZE 128\n\n\n\nclass Treatment {\nprotected:\n    int treatment_ID;\n    int patient_ID;\n    Date treatment_date;\n    int treatment_costs;\npublic:\n    Treatment() {}\n    Treatment(int treatment_ID, int patient_ID, int treatment_costs, char treatment_date[DATE_SIZE]) {\n        this-&gt;treatment_ID = treatment_ID;\n        this-&gt;patient_ID = patient_ID;\n        this-&gt;treatment_costs = treatment_costs;\n        this-&gt;treatment_date.convert_date(treatment_date);\n    }\n\n    void set_treatment_ID(int treatment_ID) {\n        this-&gt;treatment_ID = treatment_ID;\n    }\n\n    void read_treatment_date(void) {\n        treatment_date.read_date();\n    }\n\n    void set_treatment_date(char _date[DATE_SIZE]) {\n        treatment_date.convert_date(_date);\n    }\n\n    void set_patient_ID(int patient_ID) {\n        this-&gt;patient_ID = patient_ID;\n    }\n    void set_treatment_costs(int treatment_costs) {\n        this-&gt;treatment_costs = treatment_costs;\n    }\n\n    int get_treatment_ID(void) {\n        return treatment_ID;\n    }\n    int get_patient_ID(void) {\n        return patient_ID;\n    }\n    int get_treatment_costs(void) {\n        return treatment_costs;\n    }\n\n};\n\nclass Outside_treatment : public Treatment {\nprivate:\n    int clinic_num;\n    //class doctor;\npublic:\n    Outside_treatment() {}\n    Outside_treatment(int clinic_num, int treatment_ID, int patient_ID, int treatment_costs, char treatment_date[DATE_SIZE]) :Treatment(treatment_ID, patient_ID, treatment_costs, treatment_date) {\n        this-&gt;clinic_num = clinic_num;\n    }\n    void set_clinic_num(int clinic_num) {\n        this-&gt;clinic_num = clinic_num;\n    }\n    int get_clinic_num() {\n        return this-&gt;clinic_num;\n    }\n\n    void print_outside_treatment(void) {\n        cout &lt;&lt; \"The clinic num is \" &lt;&lt; clinic_num &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"The treatment ID is \" &lt;&lt; treatment_ID &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"The patient_ID is \" &lt;&lt; patient_ID &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"The treatment costs are \" &lt;&lt; treatment_costs &lt;&lt; \"\\n\";\n        treatment_date.print_date();\n        cout &lt;&lt; \" treatment date in compare format is \" &lt;&lt; treatment_date.get_compare();\n\n    }\n\n};\n\nclass Dynarray {\nprivate:\n    Treatment *pa;\n    int length;\n    int nextIndex;\npublic:\n    Dynarray() {\n        pa = new Treatment[10];\n        length = 10;\n        nextIndex = 0;\n    }\n    ~Dynarray() {\n        delete[]pa;\n    }\n    void add(Treatment &amp;add) {\n        Treatment *pnewa;\n        if (nextIndex == length) {\n            length += 10;\n            pnewa = new Treatment[length];\n            for (int i = 0; i &lt; nextIndex; ++i) {\n                pnewa[i] = pa[i];\n            }\n            delete[]pa;\n            pa = pnewa;\n        }\n        pa[nextIndex++] = add;\n    }\n    Treatment &amp;operator[](int index) {\n        return *(pa + index);\n    }\n};\n\nint main(void) {\n    Outside_treatment it;\n\n    cout &lt;&lt; \"Enter the patient ID\\n\";\n    int p_id;\n    cin &gt;&gt; p_id;\n    it.set_patient_ID(p_id);\n    cin.ignore();\n    cout &lt;&lt; \"set treatment date\\n\";\n    it.read_treatment_date();\n\n    cout &lt;&lt; \"enter costs\\n\";\n    int costs;\n    cin &gt;&gt; costs;\n    it.set_treatment_costs(costs);\n\n    cout &lt;&lt; \"enter section num\\n\";\n    int sc_num;\n    cin &gt;&gt; sc_num;\n    it.set_clinic_num(sc_num);\n\n    it.print_outside_treatment();\n\n    Dynarray da;\n\n    da.add(it);\n\n    Treatment *yetanotherpointer = &amp;da[0];\n\n\n    int i = yetanotherpointer-&gt;get_patient_ID();\n    cout &lt;&lt; i &lt;&lt; endl;\n\n    while (1);\n};\n</code></pre>\n"}, {"tags": ["c++", "ubuntu", "affdex-sdk"], "owner": {"reputation": 4737, "user_id": 1684118, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/77575b6a2f7dc3dbb3a7b25ea4ab4012?s=128&d=identicon&r=PG", "display_name": "machinery", "link": "https://stackoverflow.com/users/1684118/machinery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513207977, "creation_date": 1513207977, "question_id": 47803702, "link": "https://stackoverflow.com/questions/47803702/affectiva-affdex-does-not-process-videos-correctly", "title": "Affectiva affdex does not process videos correctly", "body": "<p>I'm using affectiva affdex with C++ on Ubuntu 16.04. The programm I'm using is below. As input I'm providing a 30 min mp4 video. I have followed all steps on the affectiva webpage (downloading Ubuntu-16.04 x86_64 4.0-75 and <code>sudo apt-get install libcurl4-openssl-dev uuid-dev</code>).</p>\n\n<p>The problem is that for some videos the processing terminates after around 2 minutes. For other videos there are large parts missing (i.e. for example 10 minutes of frames missing). I'm not getting any error and the output on the console is \"[Affectiva] Video processing finised.\"</p>\n\n<p>Why does this happen?</p>\n\n<pre><code>#define _GLIBCXX_USE_CXX11_ABI 0\n#include \"VideoDetector.h\"\n#include \"FrameDetector.h\"\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex m;\nstd::condition_variable conditional_variable;\nbool processed = false;\n\nclass Listener : public affdex::ImageListener {\npublic:\n    Listener(std::ofstream * fout) {\n        this-&gt;fout = fout;\n  }\n  virtual void onImageCapture(affdex::Frame image){\n  }\n  virtual void onImageResults(std::map&lt;affdex::FaceId, affdex::Face&gt; faces, affdex::Frame image){\n      for(auto&amp; kv : faces){\n        (*this-&gt;fout) &lt;&lt; image.getTimestamp() &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.first &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.joy &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.fear &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.disgust &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.sadness &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.anger &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.surprise &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.contempt &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.valence &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.emotions.engagement &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.measurements.orientation.pitch &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.measurements.orientation.yaw &lt;&lt; \",\";\n        (*this-&gt;fout) &lt;&lt; kv.second.measurements.orientation.roll &lt;&lt; std::endl;\n      }\n  }\nprivate:\n    std::ofstream * fout;\n};\n\nclass ProcessListener : public affdex::ProcessStatusListener{\npublic:\n    virtual void onProcessingException (affdex::AffdexException ex){\n        std::cerr &lt;&lt; \"[Error] \" &lt;&lt; ex.getExceptionMessage();\n    }\n    virtual void onProcessingFinished (){\n        {\n            std::lock_guard&lt;std::mutex&gt; lk(m);\n            processed = true;\n            std::cout &lt;&lt; \"[Affectiva] Video processing finised.\" &lt;&lt; std::endl;\n        }\n        conditional_variable.notify_one();\n    }\n};\n\nint main(int argc, char ** argsv)\n{\n        affdex::VideoDetector detector(60);\n        std::string classifierPath=\"/home/test/affdex-sdk/data\";\n        detector.setClassifierPath(classifierPath);\n        detector.setDetectAllEmotions(true);\n\n        std::ofstream fout(argsv[2]);\n        fout &lt;&lt; \"timestamp\" &lt;&lt; \",\";\n        fout &lt;&lt; \"faceId\" &lt;&lt; \",\";\n        fout &lt;&lt; \"joy\" &lt;&lt; \",\";\n        fout &lt;&lt; \"fear\" &lt;&lt; \",\";\n        fout &lt;&lt; \"disgust\" &lt;&lt; \",\";\n        fout &lt;&lt; \"sadness\" &lt;&lt; \",\";\n        fout &lt;&lt; \"anger\" &lt;&lt; \",\";\n        fout &lt;&lt; \"surprise\" &lt;&lt; \",\";\n        fout &lt;&lt; \"contempt\" &lt;&lt; \",\";\n        fout &lt;&lt; \"valence\" &lt;&lt; \",\";\n        fout &lt;&lt; \"engagement\"  &lt;&lt; \",\";\n        fout &lt;&lt; \"pitch\" &lt;&lt; \",\";\n        fout &lt;&lt; \"yaw\" &lt;&lt; \",\";\n        fout &lt;&lt; \"roll\" &lt;&lt; std::endl;\n\n        Listener l(&amp;fout);\n        ProcessListener pl;\n        detector.setImageListener(&amp;l);\n        detector.setProcessStatusListener(&amp;pl);\n\n        detector.start();\n        detector.process(argsv[1]);\n        {\n            std::unique_lock&lt;std::mutex&gt; lk(m);\n            conditional_variable.wait(lk, []{return processed;});\n        }\n        fout.flush();\n        fout.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors", "visual-studio-2017", "midl", "vcxproj"], "comments": [{"owner": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1513217220, "post_id": 47803621, "comment_id": 82571208, "body": "Have you checked project property pages | Linker | Embedded IDL ?  Also do the docs have anything useful to say <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa367335(v=vs.85).aspx\" rel=\"nofollow noreferrer\">/ms_ext</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa367357(v=vs.85).aspx\" rel=\"nofollow noreferrer\">/osf</a>"}, {"owner": {"reputation": 113, "user_id": 4001320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f5970d6a724a987fa8f474a3b102a0?s=128&d=identicon&r=PG&f=1", "display_name": "trishm", "link": "https://stackoverflow.com/users/4001320/trishm"}, "reply_to_user": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1513268226, "post_id": 47803621, "comment_id": 82597302, "body": "I did check the Embedded IDL setting. There are no switches specified. Also, it built successfully with VS2017 v15.4.1. I did quite a bit of research on the /ms_ext and /osf switches and modifications that might be necessary due to the the upgrade."}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 3075590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e8e29891e79104ba183e233d764f20?s=128&d=identicon&r=PG&f=1", "display_name": "blit", "link": "https://stackoverflow.com/users/3075590/blit"}, "edited": false, "score": 0, "creation_date": 1513259438, "post_id": 47804133, "comment_id": 82591249, "body": "If you have multiple projects with IDL files, the best option is to create a PropertySheet or use an existing one. Setting only the /robust and the /target that you need and assign the property sheet to each project. You also need to ensure that the /robust and /target settings are set to &quot;Inherit from parent or project defaults&quot;."}, {"owner": {"reputation": 113, "user_id": 4001320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f5970d6a724a987fa8f474a3b102a0?s=128&d=identicon&r=PG&f=1", "display_name": "trishm", "link": "https://stackoverflow.com/users/4001320/trishm"}, "edited": false, "score": 0, "creation_date": 1513272732, "post_id": 47804133, "comment_id": 82600071, "body": "bb292, Thank you for your response. I tried both changes but got the same error."}, {"owner": {"reputation": 113, "user_id": 4001320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f5970d6a724a987fa8f474a3b102a0?s=128&d=identicon&r=PG&f=1", "display_name": "trishm", "link": "https://stackoverflow.com/users/4001320/trishm"}, "edited": false, "score": 0, "creation_date": 1513273253, "post_id": 47804133, "comment_id": 82600356, "body": "/iid &quot;AceRmServer_i.c&quot; /env win32 /h &quot;AceRmServer_h.h&quot; /W1 /char signed /tlb &quot;Debug\\BtiRmAgent.tlb&quot; /D &quot;_DEBUG&quot; /nologo"}, {"owner": {"reputation": 113, "user_id": 4001320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f5970d6a724a987fa8f474a3b102a0?s=128&d=identicon&r=PG&f=1", "display_name": "trishm", "link": "https://stackoverflow.com/users/4001320/trishm"}, "edited": false, "score": 0, "creation_date": 1513278322, "post_id": 47804133, "comment_id": 82603127, "body": "bb292: IT WORKED!! In my first attempt, I removed both the NT60 and the no_robust settings. This time I removed only the NT60. Thank you, thank you, thank you!"}], "tags": [], "owner": {"reputation": 146, "user_id": 9096444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0756a81d45f7d7ab87c95817e7a9525c?s=128&d=identicon&r=PG&f=1", "display_name": "bb292", "link": "https://stackoverflow.com/users/9096444/bb292"}, "is_accepted": true, "score": 13, "last_activity_date": 1513229567, "last_edit_date": 1513229567, "creation_date": 1513211092, "answer_id": 47804133, "question_id": 47803621, "link": "https://stackoverflow.com/questions/47803621/upgrading-vs2017-from-15-4-1-to-15-5-1-resulted-in-build-error/47804133#47804133", "title": "Upgrading VS2017 from 15.4.1 to 15.5.1 resulted in build error", "body": "<p>I ran into the same problem just now, but luckily I do have access to another, older, installation.</p>\n\n<p>Here is the command line under VS 2017 15.4.4:</p>\n\n<pre><code>/iid \"RtdHandleServer_i.c\" /env win32 /h \"RtdHandleServer.h\" /W1 /char signed /tlb \"Win32\\Release\\RtdHandleServer.tlb\" /Oicf /D \"NDEBUG\" /no_robust /nologo /proxy \"RtdHandleServer_p.c\" \n</code></pre>\n\n<p>Here is what it is changed to under VS 2017 15.5.1:</p>\n\n<pre><code>/iid \"RtdHandleServer_i.c\" /env win32 /h \"RtdHandleServer.h\" /W1 /char signed /tlb \"Win32\\Release\\RtdHandleServer.tlb\" /Oicf /target \"NT60\" /D \"NDEBUG\" /no_robust /nologo /proxy \"RtdHandleServer_p.c\" \n</code></pre>\n\n<p>So all that has changed is that a new parameter <em>/target \"NT60\"</em> has been added, presumably as a new default.</p>\n\n<p>It looks to me as if there are two ways to address this:</p>\n\n<ol>\n<li>In the Property Pages dialog for the idl file, go to Configuration Properties > MIDL > Advanced, and clear the value of \"Minimum Target System\".</li>\n<li>Get rid of the -no_robust flag. According to the documentation (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa367349%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa367349%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396</a>): \n\n<blockquote>\n  <p>\"The /no_robust command line switch must be used to disable the /robust feature if generated stubs need to run on Microsoft Windows NT, Windows 95/98, or Windows Me.\"</p>\n</blockquote></li>\n</ol>\n\n<p>Either change works for me in terms of getting rid of the error, but the first method has the least impact.</p>\n\n<p>PS. I think that the MS error description (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366756%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa366756%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396</a>) is likely to be incorrect in this instance. The original error message that you are seeing refers to two specific flags, <em>/no_robust</em> and <em>/target</em>, not to <em>/osf</em> and <em>/ms_ext</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 13254, "user_id": 3063884, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/1lN2C.jpg?s=128&g=1", "display_name": "CJBS", "link": "https://stackoverflow.com/users/3063884/cjbs"}, "is_accepted": false, "score": 1, "last_activity_date": 1524530839, "creation_date": 1524530839, "answer_id": 49991857, "question_id": 47803621, "link": "https://stackoverflow.com/questions/47803621/upgrading-vs2017-from-15-4-1-to-15-5-1-resulted-in-build-error/49991857#49991857", "title": "Upgrading VS2017 from 15.4.1 to 15.5.1 resulted in build error", "body": "<p>In order to remove the <code>/no_robust</code> flag (if generated stubs don't need to be  run on Microsoft Windows NT, Windows 95/98, or Windows Me), simply remove the</p>\n\n<pre><code>&lt;ValidateAllParameters&gt;false&lt;/ValidateAllParameters&gt;\n</code></pre>\n\n<p>entries under the <code>&lt;Midl&gt;</code> element in the <code>.vcxproj</code> files.</p>\n\n<p>Source: <a href=\"https://developercommunity.visualstudio.com/comments/209278/view.html\" rel=\"nofollow noreferrer\">ref</a></p>\n"}], "owner": {"reputation": 113, "user_id": 4001320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f5970d6a724a987fa8f474a3b102a0?s=128&d=identicon&r=PG&f=1", "display_name": "trishm", "link": "https://stackoverflow.com/users/4001320/trishm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3312, "favorite_count": 1, "accepted_answer_id": 47804133, "answer_count": 2, "score": 11, "last_activity_date": 1541512163, "creation_date": 1513207415, "last_edit_date": 1541512163, "question_id": 47803621, "link": "https://stackoverflow.com/questions/47803621/upgrading-vs2017-from-15-4-1-to-15-5-1-resulted-in-build-error", "title": "Upgrading VS2017 from 15.4.1 to 15.5.1 resulted in build error", "body": "<p>I'm programming with the following tools/versions: Windows 10 / VS2017 Professional / C++</p>\n\n<p>After I upgraded to 15.5.1 I got the following error:</p>\n\n<blockquote>\n  <p>MIDL2338: switches are contradictory - no_robust vs. - target</p>\n</blockquote>\n\n<p>The Microsoft compiler error description list says: You cannot use both the /osf and /ms_ext command-line switches when you compile an IDL file.</p>\n\n<p>None of those switches are specified in my project properties.</p>\n\n<p>I tried to downgrade back to 15.4.1 but have found that it's impossible to revert to an old version unless it's N-1. This is based on the many blogs I've read (including Stack Overflow).</p>\n\n<p>I have hit a wall and am at a standstill until I figure out this switch issue.</p>\n\n<p>Your help would be greatly appreciated.</p>\n"}, {"tags": ["c++", "build", "compiler-errors", "visual-studio-2017", "wrapper"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513207811, "post_id": 47803607, "comment_id": 82568795, "body": "I am gcroot. Sorry. I had to."}, {"owner": {"reputation": 316, "user_id": 5862179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537450269b69166b3b48279088fc8610?s=128&d=identicon&r=PG", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5862179/jefferson"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513214159, "post_id": 47803607, "comment_id": 82570498, "body": "That is <i>also</i> true!"}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 5862179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537450269b69166b3b48279088fc8610?s=128&d=identicon&r=PG", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5862179/jefferson"}, "edited": false, "score": 0, "creation_date": 1515827281, "post_id": 48165682, "comment_id": 83457840, "body": "Long version: I forgot to do this on my test project, and had my linking set up such that a dependent wrapper class was using the &quot;release&quot; version of the DLL, thus the changes had not fed forward due to me not building for release."}], "tags": [], "owner": {"reputation": 90, "user_id": 1648356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b45eda2b920b6d893ec88a746e6f5e8?s=128&d=identicon&r=PG", "display_name": "jaufer.k", "link": "https://stackoverflow.com/users/1648356/jaufer-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1515492248, "creation_date": 1515492248, "answer_id": 48165682, "question_id": 47803607, "link": "https://stackoverflow.com/questions/47803607/project-fails-to-build-gcroot-h-this-document-is-opened-by-another-project/48165682#48165682", "title": "Project fails to build: &quot;gcroot.h This document is opened by another project&quot;", "body": "<p>I had the same issue and found a working solution for me:</p>\n\n<p><strong>Solution:</strong>\nChange your wrapper build from <strong><em>.exe</strong> to <strong></em>.dll</strong></p>\n\n<p>VS:\nProject <code>Properties-&gt;Configuration properties-&gt;General-&gt;Configuration Type-&gt;Dynamic Link Library (.dll)</code></p>\n\n<p><strong>Explained:</strong>\ni had the same issue and changed <code>Project Properties-&gt;Configuration properties-&gt;C/C++-&gt;All Options-&gt;Conformance mode</code> from <code>Yes (/permissive-)</code> to <code>No</code> </p>\n\n<p>A new build indicated a linker entry-point error: <code>LNK1561</code> <code>entry point must be defined</code></p>\n\n<p>A quick check of the build configuration revealed the wrong <code>Configuration Type</code> (exe instead of dll)</p>\n"}], "owner": {"reputation": 316, "user_id": 5862179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537450269b69166b3b48279088fc8610?s=128&d=identicon&r=PG", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5862179/jefferson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 1, "accepted_answer_id": 48165682, "answer_count": 1, "score": 2, "last_activity_date": 1515492248, "creation_date": 1513207333, "last_edit_date": 1513218184, "question_id": 47803607, "link": "https://stackoverflow.com/questions/47803607/project-fails-to-build-gcroot-h-this-document-is-opened-by-another-project", "title": "Project fails to build: &quot;gcroot.h This document is opened by another project&quot;", "body": "<p>I'm trying to build a C++ wrapper for a C# class using the following tutorial:\n<a href=\"http://pragmateek.com/using-c-from-native-c-with-the-help-of-ccli-v2/\" rel=\"nofollow noreferrer\">pragmateek C++ wrapper for C# class</a></p>\n\n<p>When I run build, I get this error:</p>\n\n<blockquote>\n  <p>Error  C1001   An internal error has occurred in the compiler. [project name] C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Enterprise\\VC\\Tools\\MSVC\\14.12.25827\\include\\msclr\\gcroot.h  110 </p>\n</blockquote>\n\n<p>When I click on the error it does the following:\nVS opens gcroot.h to line 110</p>\n\n<pre><code>void swap( gcroot&lt;T&gt; &amp; _right )\n    { //VS shows error on this line\n            using std::swap;\n            swap( _handle, _right._handle );\n    }\n</code></pre>\n\n<p>I get multiple popup prompts all reading: </p>\n\n<blockquote>\n  <p>\"This document is opened by another project\"</p>\n</blockquote>\n\n<hr>\n\n<p>I'm using VS2017, .net 4.5</p>\n\n<p>Is there some trick to this I'm not seeing? Is there a better or more modern/canonical way to wrap a .net class for use in C++? My end-goal is to develop in C# and provide an API for the client in C++. My client got too far into the project to turn back, and then lost their C# guy and now wants me to switch my part of the project to C++. </p>\n\n<p>I've spent a ton of time on google already.</p>\n\n<p>Update:\nAdding either of the following causes it to throw the error:</p>\n\n<pre><code>#include &lt;vcclr.h&gt;\n#include &lt;msclr\\auto_gcroot.h&gt;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1513207449, "post_id": 47803602, "comment_id": 82568651, "body": "Use std::string, not char arrays, new and str* functions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1513207516, "post_id": 47803602, "comment_id": 82568673, "body": "Line 9 is where?"}, {"owner": {"reputation": 1, "user_id": 9096295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad02c59acaae60fbe6158faa30f24c45?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9096295/joe"}, "edited": false, "score": 0, "creation_date": 1513207596, "post_id": 47803602, "comment_id": 82568706, "body": "@manni66 this is line 9 -&gt; name = new char[strlen(name) + 1];"}, {"owner": {"reputation": 1, "user_id": 9096295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad02c59acaae60fbe6158faa30f24c45?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9096295/joe"}, "edited": false, "score": 0, "creation_date": 1513207613, "post_id": 47803602, "comment_id": 82568714, "body": "I cannot use std::string, I&#39;ve to use char arrays in this task"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1513207636, "post_id": 47803602, "comment_id": 82568721, "body": "The error is not caused by the code you&#39;ve shown."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1513207644, "post_id": 47803602, "comment_id": 82568726, "body": "YAIT (yet another incompetent teacher)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1513207724, "post_id": 47803602, "comment_id": 82568761, "body": "Did you copy&amp;paste your code?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513208067, "post_id": 47803602, "comment_id": 82568862, "body": "@manni66 that&#39;s not quite fair. They could be brilliant teachers of C."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513208113, "post_id": 47803602, "comment_id": 82568876, "body": "Joe, the Member Initializer List could help you out somewhat here. Documentation link: <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/initializer_list</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1513208393, "post_id": 47803602, "comment_id": 82568968, "body": "@manni66 Another C++ course in name only where the teachers insist on inflicting C on people first."}, {"owner": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "edited": false, "score": 1, "creation_date": 1513213016, "post_id": 47803602, "comment_id": 82570221, "body": "Extended initializer lists require the use of curly braces. The only curly braces you have in this code are wrapping the body of the function. I can&#39;t see how this error could possibly be coming from this code."}, {"owner": {"reputation": 7974, "user_id": 4928, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3688dea735adb802ada72577f4897898?s=128&d=identicon&r=PG", "display_name": "SCFrench", "link": "https://stackoverflow.com/users/4928/scfrench"}, "edited": false, "score": 0, "creation_date": 1513213315, "post_id": 47803602, "comment_id": 82570303, "body": "I took a stab at compiling this code based on a reasonable guess as to the class declaration. It seems to compile fine: <a href=\"https://godbolt.org/g/r6FzTS\" rel=\"nofollow noreferrer\">godbolt.org/g/r6FzTS</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1513213622, "post_id": 47803602, "comment_id": 82570384, "body": "You probably meant <code>this-&gt;name =</code> rather than <code>name =</code>. But this is all horrible either way"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9096295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad02c59acaae60fbe6158faa30f24c45?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9096295/joe"}, "edited": false, "score": 0, "creation_date": 1513207826, "post_id": 47803666, "comment_id": 82568801, "body": "Ok so which name i&#39;ve to change, pls provide here me example from above code"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1513208525, "post_id": 47803666, "comment_id": 82569004, "body": "Name hiding is valid and legal in C++."}, {"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1513236608, "post_id": 47803666, "comment_id": 82577190, "body": "Yes, @George , but not recommendable or helpful. He could make his first line <code>this-&gt;name =...</code>, and it would work too. I just tried to help him avoid such issues in the future."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1513272526, "post_id": 47803666, "comment_id": 82599955, "body": "That&#39;s true but I think it&#39;d be better as a comment since it doesn&#39;t answer (the admittedly unanswerable question of the op&#39;s). Ps: The dv is not mine so I cannot revoke it :c."}], "tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": -1, "last_activity_date": 1513207733, "creation_date": 1513207733, "answer_id": 47803666, "question_id": 47803602, "link": "https://stackoverflow.com/questions/47803602/c-constructor-and-method-implementation/47803666#47803666", "title": "c++ constructor and method implementation", "body": "<p>The error is probably because you use the same names for the parameters as for the member variables - the compiler might understand a different thing than what you want.<br>\nRename the parameters, for example <code>n</code> instead of <code>name</code>, and you don\u2019t need <code>this-&gt;</code>, and the error will go away.</p>\n"}], "owner": {"reputation": 1, "user_id": 9096295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad02c59acaae60fbe6158faa30f24c45?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9096295/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513212624, "creation_date": 1513207309, "last_edit_date": 1513212624, "question_id": 47803602, "link": "https://stackoverflow.com/questions/47803602/c-constructor-and-method-implementation", "title": "c++ constructor and method implementation", "body": "<p>I've got stuck during this process of implementation class.\nBelow is my code which using g++ compile give me an error like below the code.</p>\n\n<pre><code>Contact::Contact(const char * name, const char * address, const char * \n tel) {\n      name = new char[strlen(name) + 1];\n      address = new char[strlen(address) + 1];\n      tel = new char[strlen(tel) + 1];\n      strcpy(this-&gt;name, name);\n      strcpy(this-&gt;address, address);\n      strcpy(this-&gt;tel, tel);\n}\n</code></pre>\n\n<p>The error is</p>\n\n<pre><code>Contact.cpp:9: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x\n</code></pre>\n\n<p>Thanks for help!</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 1037013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5be26a6ae77a1b10840189ed96098256?s=128&d=identicon&r=PG&f=1", "display_name": "g2mk", "link": "https://stackoverflow.com/users/1037013/g2mk"}, "edited": false, "score": 0, "creation_date": 1513238313, "post_id": 47803846, "comment_id": 82577988, "body": "Thanks. What you mean by downcasting - something other than ID-field in Base class containing unique ID&#39;s for each class in hierarchy? I have such field, but as I can&#39;t make it constexpr I have failed to make a templates specialized by this ID-field to use in DoSomething..."}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "reply_to_user": {"reputation": 501, "user_id": 1037013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5be26a6ae77a1b10840189ed96098256?s=128&d=identicon&r=PG&f=1", "display_name": "g2mk", "link": "https://stackoverflow.com/users/1037013/g2mk"}, "edited": false, "score": 0, "creation_date": 1513268693, "post_id": 47803846, "comment_id": 82597625, "body": "I mean, if a derived class exposes a type, you cannot access it if you only know the base type.  That&#39;s frequently why people use the CRTP - Curiously Recurring Template Pattern.  A base is template, and parameter is the derived class type passing itself up so base can use it."}, {"owner": {"reputation": 501, "user_id": 1037013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5be26a6ae77a1b10840189ed96098256?s=128&d=identicon&r=PG&f=1", "display_name": "g2mk", "link": "https://stackoverflow.com/users/1037013/g2mk"}, "edited": false, "score": 0, "creation_date": 1513273580, "post_id": 47803846, "comment_id": 82600535, "body": "Argh... Why I haven&#39;t though about template base class :| Thank you very much for CPTR."}], "tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": true, "score": 2, "last_activity_date": 1513208991, "creation_date": 1513208991, "answer_id": 47803846, "question_id": 47803594, "link": "https://stackoverflow.com/questions/47803594/pass-template-class-instance-type-alias-to-non-member-template-function/47803846#47803846", "title": "Pass template class instance type alias to non-member template function", "body": "<p>No.  Consider:</p>\n\n<pre><code>void f(Base* ptr) {\n    // What type does ptr point to?\n    // The runtime derived type might not exist when this function compiles\n}\n</code></pre>\n\n<p>Since the dynamic type of the pointer is only know at runtime, it's impossible for the compiler to gain access to it when compiling the function.</p>\n\n<p>If the definition is available there may be some more options, but all of them require you knowing in advance the entire set of types you intend to support, and possibly need to downcast to first.  (A type \"id\" might help if you go this route.)</p>\n\n<p>You might be able to build some limited working designs with a visitor pattern.</p>\n"}], "owner": {"reputation": 501, "user_id": 1037013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5be26a6ae77a1b10840189ed96098256?s=128&d=identicon&r=PG&f=1", "display_name": "g2mk", "link": "https://stackoverflow.com/users/1037013/g2mk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 47803846, "answer_count": 1, "score": 0, "last_activity_date": 1513208991, "creation_date": 1513207232, "last_edit_date": 1513208771, "question_id": 47803594, "link": "https://stackoverflow.com/questions/47803594/pass-template-class-instance-type-alias-to-non-member-template-function", "title": "Pass template class instance type alias to non-member template function", "body": "<p>Is there a way to pass template class instances type alias (<code>ClassTmplt/DerivedFloat::InternalType</code>) to external non-member template function (<code>DoSomething</code>) using <code>Base</code> class object pointer (like in two last <code>test()</code> function commented lines)?</p>\n\n<pre><code>class Base\n{\n};\n\ntemplate &lt;typename T&gt;\nclass ClassTmplt:\n    public Base\n{\npublic:\n    using InternalType = T;\n};\n\nclass DerivedFloat:\n    public ClassTmplt&lt;float&gt;\n{\n};\n\ntemplate &lt;typename T, typename TIn&gt;\nvoid DoSomething(const TIn value)\n{\n    T val = T(value);\n    std::cout &lt;&lt; val &lt;&lt; \" | \" &lt;&lt; typeid(val).name() &lt;&lt; \" | \" &lt;&lt; typeid(value).name() &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\ntypename T::InternalType PassInternalType(T* obj)\n{\n    return T::InternalType;\n    //return obj::InternalType\n}\n\n\nvoid test()\n{\n    Base* obj = new DerivedFloat;\n    DoSomething&lt;float&gt;(1.23);\n    DoSomething&lt;DerivedFloat::InternalType&gt;(1UL);\n    //DoSomething&lt;(*obj)::InternalType&gt;(-123);\n    //DoSomething&lt;PassInternalType(obj)&gt;(4.56);\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml", "qt4", "qt5"], "comments": [{"owner": {"reputation": 765, "user_id": 1292814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef9aba49bebc01053a625abcc8c3ba?s=128&d=identicon&r=PG", "display_name": "Innokentiy Alaytsev", "link": "https://stackoverflow.com/users/1292814/innokentiy-alaytsev"}, "edited": false, "score": 1, "creation_date": 1513207016, "post_id": 47803531, "comment_id": 82568519, "body": "It is Qt, Not QT. QT is for Quick Time."}, {"owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "reply_to_user": {"reputation": 765, "user_id": 1292814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef9aba49bebc01053a625abcc8c3ba?s=128&d=identicon&r=PG", "display_name": "Innokentiy Alaytsev", "link": "https://stackoverflow.com/users/1292814/innokentiy-alaytsev"}, "edited": false, "score": 0, "creation_date": 1513207342, "post_id": 47803531, "comment_id": 82568613, "body": "@InnokentiyAlaytsev Sorry. Fixed that"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1513207748, "post_id": 47803531, "comment_id": 82568769, "body": "I have tried LIMITS_T and it does not throw me that error, I can not use it together with SplitBarGauge because it seems that it is not part of Qt."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 765, "user_id": 1292814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef9aba49bebc01053a625abcc8c3ba?s=128&d=identicon&r=PG", "display_name": "Innokentiy Alaytsev", "link": "https://stackoverflow.com/users/1292814/innokentiy-alaytsev"}, "edited": false, "score": 0, "creation_date": 1513207763, "post_id": 47803531, "comment_id": 82568778, "body": "@InnokentiyAlaytsev Now you are being qute."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1513208050, "post_id": 47803531, "comment_id": 82568857, "body": "I see that you are overwriting the operator =, this must return an object of the same class: <code>LIMITS_T operator = (const LIMITS_T &amp;limit)     {         this-&gt;min = limit.min;         this-&gt;caution = limit.caution;         this-&gt;max = limit.max;         return *this;     }</code>"}, {"owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1513208669, "post_id": 47803531, "comment_id": 82569039, "body": "@eyllanesc Good catch on the operator override. I fixed that but still have the same problem"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1513208958, "post_id": 47803531, "comment_id": 82569130, "body": "Your code is not an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, since it is not verifiable due to SplitBarGauge, improve it and then I can continue to help you."}, {"owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1513209305, "post_id": 47803531, "comment_id": 82569252, "body": "@eyllanesc I believe that I have added the additional components that you need. I have also simplified the LIMITS_T class"}], "answers": [{"comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1513237173, "post_id": 47804440, "comment_id": 82577480, "body": "You really want to null the pointer in such cases. Right now it is a dangling reference, it will pass an if statement, and when it is used the program will crash. Also follow the idiomatic way to implement the setter - don&#39;t do anything if the new value is the same as the old value. You don&#39;t want to emit change notifications without actual changes."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1513285723, "last_edit_date": 1592644375, "creation_date": 1513213521, "answer_id": 47804440, "question_id": 47803531, "link": "https://stackoverflow.com/questions/47803531/why-can-i-not-assign-this-qt-property/47804440#47804440", "title": "Why can I not assign this Qt property?", "body": "<p>You must declare the property as a pointer. All QObjects are supposed to be manipulated as pointers, according to the <a href=\"http://doc.qt.io/qt-5/qobject.html\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p><strong>No Copy Constructor or Assignment Operator QObject</strong></p>\n<p>has neither a copy\nconstructor nor an assignment operator. This is by design. Actually,\nthey are declared, but in a private section with the macro\nQ_DISABLE_COPY(). In fact, all Qt classes derived from QObject (direct\nor indirect) use this macro to declare their copy constructor and\nassignment operator to be private. The reasoning is found in the\ndiscussion on Identity vs Value on the Qt Object Model page.</p>\n<p>The main consequence is that you should use pointers to QObject (or to\nyour QObject subclass) where you might otherwise be tempted to use\nyour QObject subclass as a value. For example, without a copy\nconstructor, you can't use a subclass of QObject as the value to be\nstored in one of the container classes. You must store pointers.</p>\n</blockquote>\n<p>In your case:</p>\n<pre><code>#ifndef SPLITDIALGAUGE_H\n#define SPLITDIALGAUGE_H\n\n#include &quot;limits_t.h&quot;\n\n#include &lt;QPainter&gt;\n#include &lt;QQuickPaintedItem&gt;    \n\nclass SplitDialGauge : public QQuickPaintedItem {\n    Q_OBJECT\n    Q_PROPERTY(LIMITS_T *limits READ getLimits WRITE setLimits NOTIFY limitsChanged)\n    LIMITS_T *limits;    \npublic:\n    SplitDialGauge(QQuickItem *parent = 0) : QQuickPaintedItem(parent), limits(nullptr) { }\n    void paint(QPainter *painter) {\n        [...]\n    }    \n    LIMITS_T *getLimits() const { return limits; }\n    void setLimits(LIMITS_T *value) {\n        if (limits == value) return;\n        limits = value;\n        [...]\n        emit limitsChanged();\n    }     \nsignals:\n    void limitsChanged();\n};\n#endif // SPLITDIALGAUGE_H\n</code></pre>\n<p>A functional example can be found in the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/47803531\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}], "owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 47804440, "answer_count": 1, "score": 0, "last_activity_date": 1513285723, "creation_date": 1513206789, "last_edit_date": 1513211267, "question_id": 47803531, "link": "https://stackoverflow.com/questions/47803531/why-can-i-not-assign-this-qt-property", "title": "Why can I not assign this Qt property?", "body": "<p>Qt throws the following error at runtime. </p>\n\n<pre><code>Unable to assign LIMITS_T to LIMITS_T\n</code></pre>\n\n<p>I assume that Qt needs more meta data information, but I don't know what I missing. I have done everything to declare the metatype:</p>\n\n<p><strong>limits.h</strong></p>\n\n<pre><code>class LIMITS_T : public QObject{\n    Q_OBJECT\n    Q_PROPERTY(float min READ readMin WRITE writeMin NOTIFY minChanged)\n\npublic:\n    LIMITS_T() : QObject() {}\n    LIMITS_T(const LIMITS_T&amp; limit) : QObject()\n    {\n        this-&gt;min = limit.min;\n    }\n\n    float min = 0;\n\n    float readMin() { return min; }\n    void writeMin(float min) { this-&gt;min = min; }\n\n    bool operator = (const LIMITS_T &amp;limit)\n    {\n        this-&gt;min = limit.min;\n    }\n\nsignals:\n    void minChanged();\n};\n\nQ_DECLARE_METATYPE(LIMITS_T)\n</code></pre>\n\n<p>This is a simplified version of the splitBarGauge class</p>\n\n<p><strong>splitDialGauge.h</strong></p>\n\n<pre><code>class SplitDialGauge : public QQuickPaintedItem\n{\n    Q_OBJECT\n    Q_PROPERTY(LIMITS_T limits READ getLimits WRITE setLimits NOTIFY limitsChanged)\n\npublic:\n    SplitDialGauge(QQuickItem *parent = 0);\n\nprotected:\n    LIMITS_T limits;\n    virtual LIMITS_T getLimits();\n    virtual void setLimits(LIMITS_T value);\n}\n</code></pre>\n\n<p><strong>splitDialGauge.cpp</strong></p>\n\n<pre><code>#include \"splitBarGauge.h\"\n\nSplitDialGauge::SplitDialGauge(QQuickItem *parent = 0);\n    : QQuickPaintedItem(parent)\n{\n}\n\nLIMITS_T SplitDialGauge::getLimits()\n{\n    return this-&gt;limits;\n}\n\nvoid SplitDialGauge::setLimits(LIMITS_T limits)\n{\n    this-&gt;limits = limits;\n    update();\n}\n</code></pre>\n\n<p>And I register the class with the Qt Metadata system</p>\n\n<pre><code>#include \"limits.h\"\n#include \"splitDialGauge.h\"\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n    QGuiApplication app(argc, argv);\n\n    qmlRegisterType&lt;SplitDialGauge&gt;(\"ExampleModule\", 1, 0, \"SplitDialGauge\");\n    qmlRegisterType&lt;LIMITS_T&gt;(\"ExampleModule\", 1, 0, \"Limits\");\n    qRegisterMetaType&lt;LIMITS_T&gt;();\n\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QLatin1String(\"qrc:/main.qml\")));\n    if (engine.rootObjects().isEmpty())\n        return -1;\n\n    return app.exec();\n}\n</code></pre>\n\n<p>Here is a snipet from the QML file</p>\n\n<pre><code>import ExampleModule 1.0\n\nApplicationWindow {\n    visible: true\n    width: 800\n    height: 480\n\n    SplitDialGauge {\n        Limits {\n            id: qtyLimits\n            min: 4\n        }\n        height: 200\n        width: 50\n        limits: qtyLimits\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "multidimensional-array", "coordinates", "coords"], "answers": [{"tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": false, "score": 0, "last_activity_date": 1513206619, "creation_date": 1513206619, "answer_id": 47803500, "question_id": 47803448, "link": "https://stackoverflow.com/questions/47803448/c-access-array-element-using-a-coord-struct/47803500#47803500", "title": "C++ access array element using a COORD struct?", "body": "<p>You just have to define a proper function <code>at()</code>:</p>\n\n<pre><code>class TwoDiArray {\n   ...\n   // assuming there is some 2-dimensional array representation arr\n   public: \n      int&amp; at(COORD c) noexcept { return arr[c.x][c.y]; }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 0, "last_activity_date": 1513206716, "creation_date": 1513206716, "answer_id": 47803516, "question_id": 47803448, "link": "https://stackoverflow.com/questions/47803448/c-access-array-element-using-a-coord-struct/47803516#47803516", "title": "C++ access array element using a COORD struct?", "body": "<p>I\u2019m making the assumption that your <code>TwoDArray</code> type is a type you can\u2019t change and which is accessed - well - like a two dimensional array, e.g., an alias for a two dimensional built-in array (otherwise see @Jodocus\u2019s answer). You could implement an accessory taking an array reference and a <code>COORD</code> object:</p>\n\n<pre><code>template &lt;typename Array2D&gt;\nauto at(Array2D&amp;&amp; array, COORD c) -&gt; decltype(array[c.x][c.y]) {\n    return array[c.x][c.y];\n}\n</code></pre>\n\n<p>(I don\u2019t know the name of the <code>COORD</code> members)\nYou\u2019d use the function like this:</p>\n\n<pre><code>at(myArray, myCoord) = 10;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9096249, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TST5NSDpGpw/AAAAAAAAAAI/AAAAAAAACe4/6GwteopF3o0/photo.jpg?sz=128", "display_name": "Samuel Herts", "link": "https://stackoverflow.com/users/9096249/samuel-herts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513206716, "creation_date": 1513206297, "question_id": 47803448, "link": "https://stackoverflow.com/questions/47803448/c-access-array-element-using-a-coord-struct", "title": "C++ access array element using a COORD struct?", "body": "<p>I was wondering if there is an easy way to access an element of a two dimensional array using a COORD struct.\nfor example:</p>\n\n<pre><code>COORD myCoord = {2,6};\nTwoDiArray myArray;\nmyArray.at(myCoord) = 10;\n</code></pre>\n\n<p>I have no idea how to properly do this. Any suggestions?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 8, "creation_date": 1513204941, "post_id": 47803188, "comment_id": 82567835, "body": "How about <code>weak_ptr</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513204974, "post_id": 47803188, "comment_id": 82567845, "body": "References in c++ usually refer to reference types. You do not make use of references in provided snippets. It seems like a misuse of terminology to me."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 3, "creation_date": 1513204991, "post_id": 47803188, "comment_id": 82567859, "body": "This sounds like a use-case for <code>std::weak_ptr&lt;...&gt;</code>."}, {"owner": {"reputation": 7696, "user_id": 2491420, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3tvex.jpg?s=128&g=1", "display_name": "nkmol", "link": "https://stackoverflow.com/users/2491420/nkmol"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513268811, "post_id": 47803188, "comment_id": 82597711, "body": "@DietmarK&#252;hl @Jodocus upvoted both! However, I have a question about this. <code>weak_ptr</code> would require me to make the object a <code>shared_ptr</code>, which <b>implies that it is allowed to share the ownership of the object.</b> I would like to imply that sharing the ownership is not the expected solution (and something else is wrong, if you want to do that).   Would this not be possible with a <code>unique_ptr</code> (not with a <code>weak_ptr</code> obviously)? Thanks again."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1513270739, "post_id": 47803188, "comment_id": 82598950, "body": "@nkmol: While accessing the object via the non-owning pointer it needs to be &quot;pinned&quot; (converted to a <code>std::shared_ptr&lt;T&gt;</code>) to avoid loosing the object via an operation on an owning pointer while accessing the non-owning pointer. Effectively, the pinning causes a second owning reference to exist: during the access the non-owning pointer is transformed into an owning pointer.  A similar system could be implemented via different smart pointer classes which don&#39;t imply sharing (although there will be temporary sharing) effectively reimplementing <code>std::shared_ptr</code> but that doesn&#39;t exist readily."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1513270904, "post_id": 47803188, "comment_id": 82599041, "body": "@nkmol: the need for &quot;pinning&quot; is more obvious in a concurrent system where the owner my surrender ownership concurrently to any access. However, even in a single-threaded system an operation can easily release an object with when weak ownership is involved and it remains advisable to pin the object. It could be done without pinning using the same mechanics as <code>std::shared_ptr</code> if necessary - I&#39;d just recommend against doing so."}, {"owner": {"reputation": 7696, "user_id": 2491420, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3tvex.jpg?s=128&g=1", "display_name": "nkmol", "link": "https://stackoverflow.com/users/2491420/nkmol"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513278660, "post_id": 47803188, "comment_id": 82603281, "body": "@DietmarK&#252;hl Gotcha. Thanks for explaining the &quot;pinning&quot; concept, have not heard about this before. This indeed seems to most accessible and easy solution. Thanks once again for your time!"}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 4, "last_activity_date": 1513205286, "creation_date": 1513205286, "answer_id": 47803273, "question_id": 47803188, "link": "https://stackoverflow.com/questions/47803188/non-owning-reference-to-deleteable-object/47803273#47803273", "title": "Non owning reference to deleteable object", "body": "<p>Your use-case sounds like a <code>std::weak_ptr&lt;Object&gt;</code> would be suitable non-owning representation. Of course, for a <code>std::weak_ptr&lt;T&gt;</code> the owning representation is <code>std::shared_ptr&lt;T&gt;</code>. However, since you\u2019ll need to \u201cpin\u201d the object before you could access a <code>std::weak_ptr&lt;T&gt;</code> you\u2019d have more than one owner anyway while accessing the pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 7696, "user_id": 2491420, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3tvex.jpg?s=128&g=1", "display_name": "nkmol", "link": "https://stackoverflow.com/users/2491420/nkmol"}, "edited": false, "score": 0, "creation_date": 1513278524, "post_id": 47803285, "comment_id": 82603214, "body": "Thanks for also providing an example. I seemed to be confused about how to use this."}, {"owner": {"reputation": 553, "user_id": 194305, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1bea25433dd75445237bc5c42a225287?s=128&d=identicon&r=PG", "display_name": "zzz777", "link": "https://stackoverflow.com/users/194305/zzz777"}, "edited": false, "score": 0, "creation_date": 1553870066, "post_id": 47803285, "comment_id": 97558547, "body": "The possibility to convert weak_ptr into shared_ptr means that it is owning reference."}], "tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": true, "score": 2, "last_activity_date": 1513205325, "creation_date": 1513205325, "answer_id": 47803285, "question_id": 47803188, "link": "https://stackoverflow.com/questions/47803188/non-owning-reference-to-deleteable-object/47803285#47803285", "title": "Non owning reference to deleteable object", "body": "<p>As stated in the comments, this is a typical use-case for <a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr\" rel=\"nofollow noreferrer\"><code>std::weak_ptr</code></a>:</p>\n\n<blockquote>\n  <p><code>std::weak_ptr</code> is a smart pointer that holds a non-owning (\"weak\")\n  reference to an object that is managed by <code>std::shared_ptr</code>. It must be\n  converted to <code>std::shared_ptr</code> in order to access the referenced object.</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>vector&lt;shared_ptr&lt;Object&gt;&gt; objects;\nobjects.push_back(make_shared&lt;Derived&gt;());\nweak_ptr&lt;Object&gt; ptr{ objects.back() };\nauto sh_ptr = ptr.lock(); // increase reference count if object is still alive\nif(sh_ptr) { // if object was not deleted yet\n   sh_ptr-&gt;doStuff(); // safely access the object, as this thread holds a valid reference\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 553, "user_id": 194305, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1bea25433dd75445237bc5c42a225287?s=128&d=identicon&r=PG", "display_name": "zzz777", "link": "https://stackoverflow.com/users/194305/zzz777"}, "is_accepted": false, "score": 0, "last_activity_date": 1553870494, "creation_date": 1553870494, "answer_id": 55419865, "question_id": 47803188, "link": "https://stackoverflow.com/questions/47803188/non-owning-reference-to-deleteable-object/55419865#55419865", "title": "Non owning reference to deleteable object", "body": "<p>Today there is no way to make non-owning relationship to be enforced by compiler: \n1. weak_ptr could be converted to shared_ptr\n2. Everything else could be deleted. \n3. Wrappers around weak_ptr that would be non convertible to shared_ptr would not work also: once reference to an object is retrieved it could be deleted too.</p>\n"}], "owner": {"reputation": 7696, "user_id": 2491420, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3tvex.jpg?s=128&g=1", "display_name": "nkmol", "link": "https://stackoverflow.com/users/2491420/nkmol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 47803285, "answer_count": 3, "score": 0, "last_activity_date": 1553870494, "creation_date": 1513204818, "last_edit_date": 1592644375, "question_id": 47803188, "link": "https://stackoverflow.com/questions/47803188/non-owning-reference-to-deleteable-object", "title": "Non owning reference to deleteable object", "body": "<p>What would the best practice to hold a <em>non owning</em> reference to a object, that can be deleted?</p>\n<p>The first part is fairly simple, I simply using the stupid-smart pointer: <code>observer_ptr</code>. However, the last part makes it somewhat more difficult.</p>\n<h3>Example</h3>\n<p>Having this setup, to illustrate the need of my vector unique ptr</p>\n<pre><code>class Object\n{\n    \n};\n\nclass Derrived : public Object\n{\n    \n};\n</code></pre>\n<p>With the implementation of</p>\n<pre><code>vector&lt;nonstd::observer_ptr&lt;Object&gt;&gt; _observers;\nvector&lt;unique_ptr&lt;Object&gt;&gt; _objects;\n\nauto t = make_unique&lt;Derrived&gt;();\n_observers.push_back(nonstd::make_observer(t.get()));\n_objects.push_back(move(t));\n\n// Same objects\ncout &lt;&lt; (_observers.at(0).get() == _objects.at(0).get()) &lt;&lt; endl;\n</code></pre>\n<h3>Issue</h3>\n<p>Now at any time, somewhere, one of the objects in <code>_objects</code> might be deleted.</p>\n<p>I will simply illustrate this by deleting the first object in the vector:</p>\n<pre><code>_objects.erase(_objects.begin());\n</code></pre>\n<p>This will result in the <code>_objects</code> vector is empty. However, the <code>_observers</code> vector now points to a freed memory space.</p>\n<p>Of course, I can simply delete the observer from <code>_observers</code>, but imagine having such observing references in different parts of my program.</p>\n<p>Would there be any cleaner solution for this, and it this the right way to observe different objects?</p>\n<hr />\n<p>Please let me know if the example at hand does not illustrate the problem (or any problem for that matter) that I described.</p>\n"}, {"tags": ["c++", "func"], "comments": [{"owner": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1513204994, "post_id": 47803139, "comment_id": 82567863, "body": "I have no clue, maybe <b>func</b> and friends are not macros, can you also tell what compiler and OS you are using."}, {"owner": {"reputation": 73, "user_id": 4908206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdeec78f9428923b851097ee660c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "Southern.Cross", "link": "https://stackoverflow.com/users/4908206/southern-cross"}, "reply_to_user": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1513205153, "post_id": 47803139, "comment_id": 82567908, "body": "I&#39;m using a cross-compiler based on GCC/G++ 4.7.2. The code does NOT produce this error when using Visual Studio 2010. I&#39;ve only seen this problem when I cross-compile."}, {"owner": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 3, "creation_date": 1513205414, "post_id": 47803139, "comment_id": 82568004, "body": "Thanks, <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.3/gcc/Function-Names.html\" rel=\"nofollow noreferrer\">this older page</a> says that they are not preprocessor macros, but are compiler built-ins."}, {"owner": {"reputation": 73, "user_id": 4908206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdeec78f9428923b851097ee660c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "Southern.Cross", "link": "https://stackoverflow.com/users/4908206/southern-cross"}, "reply_to_user": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1513205570, "post_id": 47803139, "comment_id": 82568073, "body": "@Chris O, Thanks. However, it still leaves the question: why would a native compile succeed and a cross-compile fail? Shouldn&#39;t the behavior be the same regardless of definition?"}, {"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 3, "creation_date": 1513206131, "post_id": 47803139, "comment_id": 82568232, "body": "They are macros in <a href=\"https://msdn.microsoft.com/en-us/library/b0084kay(v=vs.100).aspx\" rel=\"nofollow noreferrer\">Visual Studio 2010</a> and variables in <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Function-Names.html\" rel=\"nofollow noreferrer\">GCC/G++ 4.7.2</a>."}, {"owner": {"reputation": 73, "user_id": 4908206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdeec78f9428923b851097ee660c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "Southern.Cross", "link": "https://stackoverflow.com/users/4908206/southern-cross"}, "reply_to_user": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1513206446, "post_id": 47803139, "comment_id": 82568346, "body": "@DaBler, Thank you. That does explain the difference. Now I can work around that. Best!"}, {"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "edited": false, "score": 2, "creation_date": 1513207070, "post_id": 47803139, "comment_id": 82568530, "body": "You should check for existence of compiler identifying macros (<code>__GNUC__</code>, <code>_MSC_VER</code>), instead of <code>__func__</code> and <code>__FUNCTION__</code>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1513208026, "last_edit_date": 1592644375, "creation_date": 1513206834, "answer_id": 47803536, "question_id": 47803139, "link": "https://stackoverflow.com/questions/47803139/why-does-ifndef-func-return-true/47803536#47803536", "title": "Why does #ifndef __func__ return true?", "body": "<p><code>__func__</code> is not a macro. It is a magic variable, as are <code>__FUNCTION__</code> and <code>__PRETTY_FUNCTION__</code>.</p>\n<p>From <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.0/gcc/Function-Names.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc-4.9.0/gcc/Function-Names.html</a>:</p>\n<blockquote>\n<p>GCC provides three magic variables that hold the name of the current function, as a string. The first of these is <code>__func__</code>, which is part of the C99 standard:</p>\n<p>The identifier <code>__func__</code> is implicitly declared by the translator as if, immediately following the opening brace of each function definition, the declaration</p>\n<pre><code> static const char __func__[] = &quot;function-name&quot;;\n</code></pre>\n<p>...</p>\n<p><code>__FUNCTION__</code> is another name for <code>__func__</code>.</p>\n<p>...</p>\n<p>In C, <code>__PRETTY_FUNCTION__</code> is yet another name for <code>__func__</code>. However, in C++, <code>__PRETTY_FUNCTION__</code> contains the type signature of the function as well as its bare name.</p>\n</blockquote>\n"}], "owner": {"reputation": 73, "user_id": 4908206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdeec78f9428923b851097ee660c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "Southern.Cross", "link": "https://stackoverflow.com/users/4908206/southern-cross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1513208026, "creation_date": 1513204517, "last_edit_date": 1513207772, "question_id": 47803139, "link": "https://stackoverflow.com/questions/47803139/why-does-ifndef-func-return-true", "title": "Why does #ifndef __func__ return true?", "body": "<p>The following code,</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#ifndef __func__\n#   ifdef __FUNCTION__\n#       define __func__ __FUNCTION__\n#   else\n//#       error This compiler supports neither __func__ nor __FUNCTION__\n#   endif\n#endif\n\n\nint main(int argc, char **argv)\n{\n    std::cout &lt;&lt; __func__ &lt;&lt; std::endl\n              &lt;&lt; __FUNCTION__ &lt;&lt; std::endl\n              &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>gives the following expected output,</p>\n\n<pre><code>main\nmain\nint main(int, char**)\n</code></pre>\n\n<p>However, if I uncomment the <code>else</code> condition, compilation fails because neither <code>__func__</code> nor <code>__FUNCTION__</code> are defined. How can this be? They clearly are defined as seen in the output above. Is there some simple principle regarding <code>#ifdef</code>/<code>#ifndef</code> that I'm missing here?</p>\n"}, {"tags": ["c++", "numbers", "division"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1513203807, "post_id": 47802984, "comment_id": 82567408, "body": "Please post the output also."}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 4, "last_activity_date": 1513204016, "creation_date": 1513204016, "answer_id": 47803041, "question_id": 47802984, "link": "https://stackoverflow.com/questions/47802984/different-output-when-dividing-same-numbers-by-2-but-as-int-and-float/47803041#47803041", "title": "Different output when dividing same numbers by 2 but as int and float", "body": "<p><code>float</code> uses 24 bits for the mantissa (sort of:IEEE use 23 plus one implicit bit) while <code>int</code> probably uses 31 (or 63; the other bit is effectively a sign bit). The value bits for an exact representation need 30 bits (I think) so the <code>float</code> value is rounded.</p>\n"}, {"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1513204325, "post_id": 47803054, "comment_id": 82567585, "body": "The issue you are talking about here is ints being truncated.  The OP is concerned about his floating result not accurately representing the real answer.  A <code>double</code> <i>would</i> solve his problem, though.  Because the number itself being equal, a double will have more precision."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513204358, "post_id": 47803054, "comment_id": 82567596, "body": "Of course, the concrete value happens to be even, I.e., it doesn\u2019t suffer from that particular issue."}], "tags": [], "owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "is_accepted": true, "score": 0, "last_activity_date": 1513204080, "creation_date": 1513204080, "answer_id": 47803054, "question_id": 47802984, "link": "https://stackoverflow.com/questions/47802984/different-output-when-dividing-same-numbers-by-2-but-as-int-and-float/47803054#47803054", "title": "Different output when dividing same numbers by 2 but as int and float", "body": "<p>This is due to integer vs regular division. When dividing two integers the result is also an <code>int</code> this caused when you do <code>5/2</code> to return <code>2</code>. Floating point numbers and doubles do not have this problem. To bypass the int problem you can do <code>(double)five/two</code> using five and two as ints.</p>\n"}], "owner": {"reputation": 3, "user_id": 9096123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1187501758048450/picture?type=large", "display_name": "Micha\u0142 Kolczok", "link": "https://stackoverflow.com/users/9096123/micha%c5%82-kolczok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 47803054, "answer_count": 2, "score": -3, "last_activity_date": 1513204402, "creation_date": 1513203702, "last_edit_date": 1513204402, "question_id": 47802984, "link": "https://stackoverflow.com/questions/47802984/different-output-when-dividing-same-numbers-by-2-but-as-int-and-float", "title": "Different output when dividing same numbers by 2 but as int and float", "body": "<p>Why when i divide 1234567890 by 2 i get slightly different answer?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    float  m;\n    int n;  \n    cin&gt;&gt;n;\n    n/=2;\n    cout&lt;&lt;n&lt;&lt;endl;\n    cin&gt;&gt;m;\n    m/=2;\n    cout&lt;&lt;m;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "gnuplot", "ns-3"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 7490554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaf22dbfbd2f026fe833ec08d1ef9785?s=128&d=identicon&r=PG&f=1", "display_name": "SMA.D", "link": "https://stackoverflow.com/users/7490554/sma-d"}, "edited": false, "score": 0, "creation_date": 1513203189, "post_id": 47802839, "comment_id": 82567172, "body": "Thanks. The error was in include. I should have included the directory ns3/."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": true, "score": 0, "last_activity_date": 1513202886, "creation_date": 1513202886, "answer_id": 47802839, "question_id": 47802774, "link": "https://stackoverflow.com/questions/47802774/declaring-gnuplothelper-failed-in-ns3/47802839#47802839", "title": "Declaring GnuplotHelper failed in ns3", "body": "<p>First, did you install a gnu-plot-dev package or just gnuplot? Many distributions separate the ability to use libraries and the ability to develop against them.</p>\n\n<p>If you are sure the include files are actually on your system somewhere (check both /usr/include and /usr/local/include/) you may need to add an additional directory level to your compiler search path (perhaps /usr/include/gnuplot/ but I am only guessing there).</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 3311872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XDkHG.jpg?s=128&g=1", "display_name": "Tom Henderson", "link": "https://stackoverflow.com/users/3311872/tom-henderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1513291334, "creation_date": 1513291334, "answer_id": 47823234, "question_id": 47802774, "link": "https://stackoverflow.com/questions/47802774/declaring-gnuplothelper-failed-in-ns3/47823234#47823234", "title": "Declaring GnuplotHelper failed in ns3", "body": "<p>Try</p>\n\n<pre><code>#include \"ns3/stats-module.h\"\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 7490554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaf22dbfbd2f026fe833ec08d1ef9785?s=128&d=identicon&r=PG&f=1", "display_name": "SMA.D", "link": "https://stackoverflow.com/users/7490554/sma-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 47802839, "answer_count": 2, "score": 0, "last_activity_date": 1513291334, "creation_date": 1513202485, "question_id": 47802774, "link": "https://stackoverflow.com/questions/47802774/declaring-gnuplothelper-failed-in-ns3", "title": "Declaring GnuplotHelper failed in ns3", "body": "<p>I want to use <a href=\"https://www.nsnam.org/docs/manual/html/data-collection-helpers.html#gnuplothelper\" rel=\"nofollow noreferrer\">GnuplotHelper</a> in ns3 to plot the results. even when I run ns3's default example <a href=\"https://www.nsnam.org/doxygen/seventh_8cc.html\" rel=\"nofollow noreferrer\">seventh.cc</a> I get the following error:</p>\n\n<pre><code>../scratch/congestion.cc: In function \u2018int main(int, char**)\u2019:\n../scratch/congestion.cc:173:1: error: \u2018GnuplotHelper\u2019 was not declared in this scope\n GnuplotHelper plotHelper;\n ^\n../scratch/congestion.cc:180:1: error: \u2018plotHelper\u2019 was not declared in this scope\n plotHelper.ConfigurePlot (\"Test\",\"CongestionWindow vs. Time\",\"Time (Seconds)\",\"CongestionWindow\",\"jpg\");\n ^\n../scratch/congestion.cc:181:81: error: \u2018GnuplotAggregator\u2019 has not been declared\n plotHelper.PlotProbe (probeName,probeTrace,\"CongetionWindow\",\"CongestionWindow\",GnuplotAggregator::KEY_BELOW);\n</code></pre>\n\n<p>If I include \"<a href=\"https://www.nsnam.org/doxygen/gnuplot-helper_8h.html\" rel=\"nofollow noreferrer\">gnuplot-helper.h</a>\" I get an additional line and same error:</p>\n\n<pre><code>../scratch/seventh.cc:24:28: fatal error: gnuplot-helper.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p>I've installed gnuplot on my linux. What should I do? How can I declare Gnuplot helper?</p>\n"}, {"tags": ["c++", "file", "templates", "inheritance", "nested"], "comments": [{"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513202026, "post_id": 47802659, "comment_id": 82566720, "body": "Usually you need only 2 files header and implementation. You would only need 2 or 3 if you include main"}, {"owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "reply_to_user": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513202128, "post_id": 47802659, "comment_id": 82566756, "body": "@JakeFreeman But I want to create .cpp and header for all classes."}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513202289, "post_id": 47802659, "comment_id": 82566825, "body": "In that case you need 6 files because your nested class would usually be in the class in which it is nested. 7 if you include main. Also 4*2 + 1 = 9 not 10"}, {"owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "reply_to_user": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513202428, "post_id": 47802659, "comment_id": 82566883, "body": "@JakeFreeman Yes It must be 9 . I write wrong. Can you separate? For this code."}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513202510, "post_id": 47802659, "comment_id": 82566917, "body": "Ok I will do that now"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513203953, "post_id": 47802659, "comment_id": 82567462, "body": "Posted the separated code"}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513204528, "post_id": 47802907, "comment_id": 82567651, "body": "Which files must be include at top ?"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "reply_to_user": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513204889, "post_id": 47802907, "comment_id": 82567812, "body": "@EasterGamer ok I added that"}, {"owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513205870, "post_id": 47802907, "comment_id": 82568163, "body": "Thanks a lot. I think in main.cpp have to include .cpp files because of tamplates.Why don&#39;t you do that?"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "reply_to_user": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513206031, "post_id": 47802907, "comment_id": 82568208, "body": "Because it is in the definition file. If this answered your question please upvote and accept"}, {"owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513206301, "post_id": 47802907, "comment_id": 82568294, "body": "Could you write NestedClass to another files (NestedClass.cpp and NestedClass.h)?If you have time?"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "reply_to_user": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513207403, "post_id": 47802907, "comment_id": 82568634, "body": "Sure @EasterGamer it will be in a few minutes though"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "reply_to_user": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513208682, "post_id": 47802907, "comment_id": 82569042, "body": "@EasterGamer I added the NestedClass files. If this helps don&#39;t forget to upvote."}], "tags": [], "owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "is_accepted": true, "score": 0, "last_activity_date": 1513208653, "last_edit_date": 1513208653, "creation_date": 1513203287, "answer_id": 47802907, "question_id": 47802659, "link": "https://stackoverflow.com/questions/47802659/template-nested-class-with-inheritance-file-separation/47802907#47802907", "title": "Template Nested Class with Inheritance File Separation", "body": "<p>You need to place your code into these files. The class <code>BaseAbstract</code> goes into <code>BaseAbstract.h</code>. The implementation of class <code>Derived1</code> including the <code>Nested</code> class into <code>Dervived1.cpp</code> and the definitions in <code>Derived1.h</code>. The class <code>Derived2</code> definition should be in <code>Derived2.h</code> and the implementation in <code>Derived2.cpp</code>. I will post the separated code later.</p>\n\n<p>In the file <code>BaseAbstract.h</code> standard C++ includes and namespaces.</p>\n\n<pre><code>template &lt;class T&gt;\nclass BaseAbstract{\npublic:\n    class NestedClass;\n    virtual int count (const T&amp; val)=0;\n};\n</code></pre>\n\n<p>In the file <code>Derived1.h</code> includes BaseAbstract.h</p>\n\n<pre><code>template &lt;class T&gt;\nclass Derived1:public BaseAbstract&lt;T&gt;{\n\nprotected:\n    shared_ptr&lt;T&gt;dataS;\n    int sizeS;\n    int capacity;\n\npublic:\n\n    Derived1();\n\n    class NestedClass;\n\n    int count (const T&amp; val);\n\n};\n</code></pre>\n\n<p>In the file <code>Derived1.cpp</code> includes Derived1.h</p>\n\n<pre><code>Derived1::Derived1()\n{\n    sizeS = 0;\n    capacity = 0;\n}\n</code></pre>\n\n<p>In the file Nested.h includes Derived1.h</p>\n\n<pre><code>    Derived1::NestedClass\n    {\n    protected:\n        T* data;\n    public:\n        NestedClass();\n\n        T* getData();\n        NestedClass&amp; operator++();\n\n    };\n</code></pre>\n\n<p>In the file Nested.cpp includes Nested.h</p>\n\n<pre><code>template&lt;class T&gt;\nDerived1::NestedClass::NestedClass() { data = new T; }\n\ntemplate&lt;class T&gt;\nT* Derived1::NestedClass::getData() { return data; }\n\ntemplate&lt;class T&gt;\nNestedClass&amp; Derived1::NestedClass::operator++()\n{\n    data++;\n    return data;\n}\n</code></pre>\n\n<p>In the file <code>Derived2.h</code> includes Derived1.h</p>\n\n<pre><code>template &lt;class K,class V&gt;\nclass Derived2:public Derived1&lt;pair&lt;K, V&gt; &gt;{\npublic:\n    Derived2():Derived1&lt;pair&lt;K, V&gt; &gt;();\n\n\n};\n</code></pre>\n\n<p>In the file <code>Derived2.cpp</code> includes Derived2.h</p>\n\n<pre><code>    Derived2():Derived1&lt;pair&lt;K, V&gt; &gt;()\n    {\n\n        this-&gt;capacity=10000;\n\n        this-&gt;dataS=dataS1;\n    }\n</code></pre>\n\n<p>In the file <code>main.cpp</code> includes Derived2.h</p>\n\n<pre><code>int main(void){\n\n    Derived1&lt;int&gt; a;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1513214049, "accepted_answer_id": 47802907, "answer_count": 1, "score": -2, "last_activity_date": 1513208653, "creation_date": 1513201906, "last_edit_date": 1513202440, "question_id": 47802659, "link": "https://stackoverflow.com/questions/47802659/template-nested-class-with-inheritance-file-separation", "closed_reason": "Needs details or clarity", "title": "Template Nested Class with Inheritance File Separation", "body": "<p>I writed a program in only one file.\nBut Now, I want to separate to header and cpp files.\nBut in my program there are templated class,inheritance,and nested class.So I am confusing.</p>\n\n<p>I have 4 class which : BaseAbstract, Derived1, Nested, Derived2.</p>\n\n<p>I think there is 4*2+1=9 file but I am not sure.</p>\n\n<p>You can see my code.(I simplified it to facilitate for your answers)</p>\n\n<pre><code> #include &lt;iostream&gt;\n\n    using namespace std;\n\n\n\n    template &lt;class T&gt;\n    class BaseAbstract{\n    public:\n        class NestedClass;\n        virtual int count (const T&amp; val)=0;\n    };\n\n\n    template &lt;class T&gt;\n    class Derived1:public BaseAbstract&lt;T&gt;{\n\n    protected:\n        shared_ptr&lt;T&gt;dataS;\n        int sizeS;\n        int capacity;\n\n    public:\n\n        Derived1(){\n            sizeS=0;\n            capacity=0;\n        }\n\n        class NestedClass{\n        protected:\n            T* data;\n        public:\n            NestedClass(){\n                data=new T;\n            }\n            T* getData(){\n                return data;\n            }\n            NestedClass&amp; operator++(){\n                data++;\n                return *this;\n            }\n\n        };\n\n        int count (const T&amp; val){\n            for(int i=0;i&lt;sizeS;i++){\n                if(dataS.get()[i]==val){\n                    return 1;\n                }\n            }\n            return 0;\n        }\n\n    };\n\n\n    template &lt;class K,class V&gt;\n    class Derived2:public Derived1&lt;pair&lt;K, V&gt; &gt;{\n    public:\n        Derived2():Derived1&lt;pair&lt;K, V&gt; &gt;(){\n\n            this-&gt;capacity=10000;\n\n            this-&gt;dataS=dataS1;\n        }\n\n\n    };\n\n    int main(void){\n\n        Derived1&lt;int&gt; a;\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "linux", "g++", "shared-libraries", "libstdc++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513204149, "post_id": 47802510, "comment_id": 82567528, "body": "&quot;I update the /etc/ld/so.conf&quot; So you have defeated the purpose of -rpath, and in effect upgraded libc and libstdc++ and libm and lingcc_s for all programs on that machine. That&#39;s entirely your choice. &quot;libstdc++.so.6.0.21 exists&quot; But does libstdc++.so.6? That&#39;s what your app looks for. You need to set up symbolic link libstdc++.so.6 -&gt; libstdc++.so.6.0.21."}, {"owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513204486, "post_id": 47802510, "comment_id": 82567638, "body": "@n.m. I  updated the /etc/ld/so.conf because I wanted to check if I did something else wrong with the libraries. Regarding the files in libs folder exist both the symlink ibstdc++.so.6 as well as the the ibstdc++.so.6.0.21"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513204752, "post_id": 47802510, "comment_id": 82567749, "body": "Show what you have, don&#39;t describe it. <code>ls -l yourlibdir</code>, <code>file yourlibdir&#47;*</code>, <code>ldd yourapp</code> and everything else that might be needed. BTW /usr/share is for platform independent files, the right place for the libraries is /usr/lib/my_app."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513208016, "post_id": 47802510, "comment_id": 82568846, "body": "It could be that other shared libraries your app is linked with are looking for the system libstdc++ and find it first, overriding your choice. Try ldd&#39;ing each of the dependencies. This is not how ldd is supposed to work though, so it&#39;s rather dubious."}, {"owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513267348, "post_id": 47802510, "comment_id": 82596712, "body": "@n.m. Thanks for you replies. By checking the ldd of the libraries I found that for e.x libPocoFoundation shows libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6  in host machine. Since it doesn&#39;t have rpath to use chrpath is there any other way to change the path of the library in order to show the desired one?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513268444, "post_id": 47802510, "comment_id": 82597471, "body": "Try setting LD_LIBRARY_PATH and running your program."}], "owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513267727, "creation_date": 1513201142, "last_edit_date": 1513267727, "question_id": 47802510, "link": "https://stackoverflow.com/questions/47802510/c-executable-cannot-find-the-dynamically-linking-shared-libraries-when-using-r", "title": "C++ executable cannot find the dynamically-linking shared libraries when using rpath", "body": "<p>Hi all I have created a c++ app for Ubuntu 16.04 (g++ 5.4.0) using and a few poco libraries.\nI need to install the app in a previous Ubuntu 14.04 (g++ 4.8.4).\nSo I decided to distribute the shared libraries with the executable. Regarding the distribution of libstdc++.so library I followed the post <a href=\"https://stackoverflow.com/questions/13636513/linking-libstdc-statically-any-gotchas\">Linking libstdc++ statically: any gotchas?</a>\nI'm using the following makefile to build the executable file:</p>\n\n<pre><code>CC := g++ \n\n# Folders\nSRCDIR := src\nBUILDDIR := build\nTARGETDIR := /usr/bin\n\n# Targets\nEXECUTABLE := my_app\nTARGET := $(TARGETDIR)/$(EXECUTABLE)\n\nSRCEXT := cpp\nSOURCES := $(shell find $(SRCDIR) -type f -name *.$(SRCEXT))\nOBJECTS := $(patsubst $(SRCDIR)/%,$(BUILDDIR)/%,$(SOURCES:.$(SRCEXT)=.o))\nCFLAGS := -c -Wall -std=c++14\nINC := -I include\nLDFLAGS := '-Wl,-rpath,$$ORIGIN/../share/my_app_data/libs' -L/usr/share/my_app_data/libs\nLDLIBS := -lPocoNet -lPocoFoundation -lPocoJSON \n\n$(TARGET): $(OBJECTS)\n    @echo \" Linking...\"\n    sudo $(CC) $^ -o $@ $(LDFLAGS) $(LDLIBS) \n\n$(BUILDDIR)/%.o: $(SRCDIR)/%.$(SRCEXT)\n    @mkdir -p $(BUILDDIR)\n    $(CC) $(CFLAGS) $(INC) -c -o $@ $&lt;\n\nclean:\n    @echo \" Cleaning...\"; \n    sudo $(RM) -r $(BUILDDIR) $(TARGET)\n\n\n.PHONY: clean\n</code></pre>\n\n<p>I installed the executable file in /usr/bin and the libs folder in /usr/share/my_app_data/libs.\nWhen I give <code>readelf -d my_app</code> I get the following in both Ubuntu versions:</p>\n\n<pre><code>  Tag        Type                         Name/Value\n 0x0000000000000001 (NEEDED)             Shared library: [libPocoFoundation.so.48]\n 0x0000000000000001 (NEEDED)             Shared library: [libPocoJSON.so.48]\n 0x0000000000000001 (NEEDED)             Shared library: [libPocoNet.so.48]\n 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n 0x000000000000000f (RPATH)              Library rpath: [$ORIGIN/../share/my_app_data/libs]\n</code></pre>\n\n<p>When I run my_app the shared libraries are not found. I update the /etc/ld/so.conf with the folder /usr/share/my_app_data/libs and then finds the poco related libraries.\nHowever it does not find the libstdc++.so.6 even though the file libstdc++.so.6.0.21 exists in libs folder and I get the following printout:  </p>\n\n<pre><code>my_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by my_app)\nmy_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by my_app)\nmy_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /usr/share/my_app_data/libs/libPocoFoundation.so.48)\nmy_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /usr/share/my_app_data/libs/libPocoFoundation.so.48)\nmy_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /usr/share/my_app_data/libs/libPocoJSON.so.48)\nmy_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /usr/share/my_app_data/libs/libPocoJSON.so.48)\nmy_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /usr/share/my_app_data/libs/libPocoNet.so.48)\nmy_app: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /usr/share/my_app_data/libs/libPocoNet.so.48)\n</code></pre>\n\n<p>The output of <code>ls -l</code> in the libs folder is :</p>\n\n<pre><code>-rwx---rwx 1 root root 2092592 Dec  13 23:06 libPocoFoundation.so.48\n-rwx---rwx 1 root root  348488 Dec  13 23:06 libPocoJSON.so.48\n-rwx---rwx 1 root root 1225968 Dec  13 23:06 libPocoNet.so.48\nlrwxrwxrwx 1 root root      19 Dec  13 23:07 libstdc++.so.6 -&gt; libstdc++.so.6.0.21\n-rw----rwx 1 root root 1566440 Dec  13 23:06 libstdc++.so.6.0.21\n</code></pre>\n\n<p>The output of <code>file libs/*</code> is:</p>\n\n<pre><code>libs/libPocoFoundation.so.48:      ELF 64-bit LSB  shared object, x86-64, version 1 (GNU/Linux), dynamically linked, BuildID[sha1]=9b5472754fa836e7be0893d6ed306f63b2cbc4aa, stripped\nlibs/libPocoJSON.so.48:            ELF 64-bit LSB  shared object, x86-64, version 1 (GNU/Linux), dynamically linked, BuildID[sha1]=fb57d0459e72415f90a1fc32b7bb2f695b49c5d7, stripped\nlibs/libPocoNet.so.48:             ELF 64-bit LSB  shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=175c019baa1ec16d908737443294ed3cf03d3315, stripped\nlibs/libstdc++.so.6:               symbolic link to `libstdc++.so.6.0.21' \nlibs/libstdc++.so.6.0.21:          ELF 64-bit LSB  shared object, x86-64, version 1 (GNU/Linux), dynamically linked, BuildID[sha1]=b6d9d56d8e8afa9d4b46a60eda985d45dcd51524, stripped\n</code></pre>\n\n<p>And the output of <code>ldd my_app</code> is :</p>\n\n<pre><code>linux-vdso.so.1 =&gt;  (0x00007ffcbd394000)\n    libPocoFoundation.so.48 =&gt; /usr/bin/./../share/my_app_data/libs/libPocoFoundation.so.48 (0x00007feddb89a000)\n    libPocoJSON.so.48 =&gt; /usr/bin/./../share/my_app_data/libs/libPocoJSON.so.48 (0x00007feddb645000)\n    libPocoNet.so.48 =&gt; /usr/bin/./../share/my_app_data/libs/libPocoNet.so.48 (0x00007feddb317000)\n    libstdc++.so.6 =&gt; /usr/bin/./../share/my_app_data/libs/libstdc++.so.6 (0x00007fedd9f99000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fedd9c7f000)\n    libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fedd9a68000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fedd96a3000)\n    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fedd9485000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fedd9280000)\n    librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007fedd9078000)\n    libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007fedd8180000)\n    libidn.so.11 =&gt; /usr/lib/x86_64-linux-gnu/libidn.so.11 (0x00007fedd7f4d000)\n    librtmp.so.0 =&gt; /usr/lib/x86_64-linux-gnu/librtmp.so.0 (0x00007fedd7d33000)\n    libgssapi_krb5.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007fedd7aeb000)\n    liblber-2.4.so.2 =&gt; /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 (0x00007fedd78dc000)\n    libldap_r-2.4.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 (0x00007fedd768b000)\n    libgnutls.so.26 =&gt; /usr/lib/x86_64-linux-gnu/libgnutls.so.26 (0x00007fedd73cc000)\n    libgcrypt.so.11 =&gt; /lib/x86_64-linux-gnu/libgcrypt.so.11 (0x00007fedd714c000)\n    libkrb5.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libkrb5.so.3 (0x00007fedd6e81000)\n    libk5crypto.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 (0x00007fedd6c51000)\n    libcom_err.so.2 =&gt; /lib/x86_64-linux-gnu/libcom_err.so.2 (0x00007fedd6a4d000)\n    libkrb5support.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007fedd6842000)\n    libresolv.so.2 =&gt; /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007fedd6626000)\n    libsasl2.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libsasl2.so.2 (0x00007fedd640b000)\n    libgssapi.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libgssapi.so.3 (0x00007fedd61cd000)\n    libtasn1.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libtasn1.so.6 (0x00007fedd5fb8000)\n    libp11-kit.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 (0x00007fedd5d76000)\n    libgpg-error.so.0 =&gt; /lib/x86_64-linux-gnu/libgpg-error.so.0 (0x00007fedd5b71000)\n    libkeyutils.so.1 =&gt; /lib/x86_64-linux-gnu/libkeyutils.so.1 (0x00007fedd596c000)\n    libheimntlm.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libheimntlm.so.0 (0x00007fedd5763000)\n    libkrb5.so.26 =&gt; /usr/lib/x86_64-linux-gnu/libkrb5.so.26 (0x00007fedd54da000)\n    libasn1.so.8 =&gt; /usr/lib/x86_64-linux-gnu/libasn1.so.8 (0x00007fedd5239000)\n    libhcrypto.so.4 =&gt; /usr/lib/x86_64-linux-gnu/libhcrypto.so.4 (0x00007fedd5006000)\n    libroken.so.18 =&gt; /usr/lib/x86_64-linux-gnu/libroken.so.18 (0x00007fedd4df0000)\n    libffi.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007fedd4be8000)\n    libwind.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libwind.so.0 (0x00007fedd49be000)\n    libheimbase.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libheimbase.so.1 (0x00007fedd47b0000)\n    libhx509.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libhx509.so.5 (0x00007fedd4567000)\n</code></pre>\n\n<p>I have also found that by giving ldd in one library e.x. libPocoFoundation.so.48 \nI get that </p>\n\n<pre><code>libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 \n</code></pre>\n\n<p>So the my_app executable shows to the right path for libstdc++.so.6 while the shared libraries don't. Since these libraries do not contain rpath to use chrpath is there another way to make them show</p>\n\n<pre><code>libstdc++.so.6 =&gt; /usr/share/npt-data/libs/libstdc++.so.6 \n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "c", "delphi", "dll", "callback"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1513201351, "post_id": 47802397, "comment_id": 82566420, "body": "Which language, C or C++?  They are different languages.  For example, C++ has operator and function overloading which may result in name mangling."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1513203289, "post_id": 47802397, "comment_id": 82567205, "body": "The C functions look like cdecl"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513239514, "post_id": 47803451, "comment_id": 82578535, "body": "So which one I prefer  and How about it is usage? Sorry, I am confused. Thank you very much."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513239915, "post_id": 47803451, "comment_id": 82578720, "body": "@ErkanK which one you prefer is up to you. Use whatever one works for your situation."}, {"owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513320395, "post_id": 47803451, "comment_id": 82616499, "body": "I tried your definations yesterday, but I stil couldn&#39;t solve my problem. First off all I tried second defination. I got &quot;Access Vioaltion&quot; error at myPaymentResultCallback function on begin always. So it didn&#39;t solve my problem. But I love this defination.:) The First defination is that always said me with debugger &quot;Variable required&quot;. So what is my fault about in this situation"}, {"owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513328715, "post_id": 47803451, "comment_id": 82620268, "body": "Sorrrryy. Execuse Me. It is my fault. Your second solution is correct for me. The problem is that &quot;cdecl&quot;. I forgot use it for myPaymentResultCallback function in my example. Thank you again"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1513240142, "last_edit_date": 1513240142, "creation_date": 1513206309, "answer_id": 47803451, "question_id": 47802397, "link": "https://stackoverflow.com/questions/47802397/how-to-convert-c-c-callback-functon-to-delphi/47803451#47803451", "title": "How to convert c/c++ callback functon to delphi", "body": "<p>Your Delphi translation has some errors in it.  Try this instead:</p>\n\n<pre><code>type\n  TPaymentResultCallback = procedure(AResult: Integer); cdecl;\n\nfunction ARPaymentItemCredit(HInst: THandle; const TerminalNo: PAnsiChar;\n  const Description: PAnsiChar; Amount: Double; CurrencyID: Integer;\n  ReceiptID: Integer; onPaymentResult: TPaymentResultCallback): Integer;\nvar\n  MyFunct: function(const TerminalNo: PAnsiChar; const Description: PAnsiChar;\n    Amount: Double; CurrencyID: Integer; ReceiptID: Integer;\n    onPaymentResult: TPaymentResultCallback): Integer; cdecl;\nbegin\n  @MyFunct := GetProcAddress(HInst, 'AR_payment_item_credit');\n  if Assigned(MyFunct) then\n    Result := MyFunct(TerminalNo, Description, Amount, CurrencyID, ReceiptID, onPaymentResult)\n  else\n    Result := 0;\nend;\n</code></pre>\n\n<p>The most important difference from your code is <code>TPaymentResultCallback</code> is not declared as <code>of object</code>.  You can't use a Delphi-style method pointer as a C-style function pointer, which means you can't use a non-static class method for your DLL callback, at least in this example.</p>\n\n<p>There is a simple workaround, though - store the desired method pointer in a global variable, and then use a private callback function to invoke it, eg:</p>\n\n<pre><code>type\n  TPaymentResultEvent = procedure(AResult: Integer) of object;\n\nvar\n  gOnPaymentResult: TPaymentResultEvent;\n\nprocedure myPaymentResultCallback(AResult: Integer); cdecl;\nbegin\n  if Assigned(gOnPaymentResult) then\n    gOnPaymentResult(AResult);\nend;\n\nfunction ARPaymentItemCredit(HInst: THandle; const TerminalNo: PAnsiChar;\n  const Description: PAnsiChar; Amount: Double; CurrencyID: Integer;\n  ReceiptID: Integer; onPaymentResult: TPaymentResultEvent): Integer;\ntype\n  TPaymentResultCallback = procedure(AResult: Integer); cdecl;\nvar\n  MyFunct: function(const TerminalNo: PAnsiChar; const Description: PAnsiChar;\n    Amount: Double; CurrencyID: Integer; ReceiptID: Integer;\n    onPaymentResult: TPaymentResultCallback): Integer; cdecl;\nbegin\n  @MyFunct := GetProcAddress(HInst, 'AR_payment_item_credit');\n  if Assigned(MyFunct) then\n  begin\n    gOnPaymentResult := onPaymentResult;\n    Result := MyFunct(TerminalNo, Description, Amount, CurrencyID, ReceiptID, @myPaymentResultCallback)\n  end\n  else\n    Result := 0;\nend;\n</code></pre>\n\n<p>Needless to say, this won't work if you need to have multiple classes calling <code>ARPaymentItemCredit()</code> at the same time, thus requiring the DLL to call different methods each time.</p>\n\n<p><em>IF</em> the DLL provides a way to associate a user-defined value with the callback (and your example appears to not have that option, unless there is a separate DLL function for that purpose), things get easier.  You can simply pass (a pointer to) the actual method pointer as that user-defined value, and then your private callback function can invoke it directly.  No global variable is needed, making it re-entrant for multiple events to run in parallel. But that is a big <em>IF</em>.</p>\n"}], "owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 47803451, "answer_count": 1, "score": 2, "last_activity_date": 1513328904, "creation_date": 1513200579, "last_edit_date": 1513328904, "question_id": 47802397, "link": "https://stackoverflow.com/questions/47802397/how-to-convert-c-c-callback-functon-to-delphi", "title": "How to convert c/c++ callback functon to delphi", "body": "<pre><code>typedef void (*onPaymentResultCallback) (int result);\n\nDLL_EXPORT int AR_payment_item_credit(const char *terminal_no, const char *description, double amount, enum currency_id cid, int receiptid,\n                onPaymentResultCallback cb);\n</code></pre>\n\n<p>I convert above definetions like this:</p>\n\n<pre><code>TonPaymentResultCallback = procedure(result:LongInt) of object;\n\nfunction AR_payment_item_credit(HInst:THandle; const TerminalNo:PAnsiChar; const Description:PAnsiChar; Amount:Double; CurrencyId:LongInt;\nRecepitID:LongInt; onPaymentResultCallback:tonPaymentResultCallback):LongInt;\nvar\n  MyFunct: function (const TerminalNo:PAnsiChar; const Description:PAnsiChar; Amount:Double; CurrencyId:LongInt;\n           RecepitID:LongInt; onPaymentResultCallback:tonPaymentResultCallback): LongInt; cdecl;\nbegin\n  Result := 0;\n\n  MyFunct:=GetProcAddress(HInst,'AR_payment_item_credit');\n  if Assigned(MyFunct) then\n    Result := MyFunct(TerminalNo, Description, Amount, CurrencyId, RecepitID,onPaymentResultCallback);\nend;\n</code></pre>\n\n<p>I know C/C++ dll function converting to Delphi, but callback is new for me. \nAre my definitions correct?</p>\n"}, {"tags": ["c++", "operators"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1513200574, "post_id": 47802361, "comment_id": 82566109, "body": "You should probably flag <code>operator+</code> as <code>const</code> so you don&#39;t accidentally modify anything. Make a copy of your object, add to it, return that."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1513200608, "post_id": 47802361, "comment_id": 82566125, "body": "Your <code>operator=</code> fails to return a value, thus the behavior is undefined."}, {"owner": {"reputation": 1578, "user_id": 6822618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GapDl.jpg?s=128&g=1", "display_name": "JAD", "link": "https://stackoverflow.com/users/6822618/jad"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1513200728, "post_id": 47802361, "comment_id": 82566178, "body": "@PaulMcKenzie woops, fixed I hope."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1513200799, "post_id": 47802361, "comment_id": 82566211, "body": "You don&#39;t need to implement the assignment operator, the compiler does it for you. Also, <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\" title=\"what are the basic rules and idioms for operator overloading\">stackoverflow.com/questions/4421706/&hellip;</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1513200803, "post_id": 47802361, "comment_id": 82566214, "body": "<code>operator +</code> should be returning a brand new instance of <code>smallclass</code>, not the original instance or a reference. <code>return smallclass(*this) += y;</code>"}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1513200808, "post_id": 47802361, "comment_id": 82566219, "body": "<code>operator +</code> is easy if you already have <code>operator +=</code> and a copy constructor. (Though you will want to return by value rather than by reference.)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1513201464, "post_id": 47802361, "comment_id": 82566459, "body": "BTW, you don&#39;t need the <code>this-&gt;</code> syntax to access class methods or members.  The exception is to differentiate member names from parameter variable names (which can be resolved by using different names)."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1513201090, "post_id": 47802487, "comment_id": 82566330, "body": "An even shorter example: <code>return smallclass(*this) += y;</code>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1513203904, "post_id": 47802487, "comment_id": 82567450, "body": "@PaulMcKenzie That would probably inhibit RVO."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 4, "last_activity_date": 1513201091, "last_edit_date": 1513201091, "creation_date": 1513201034, "answer_id": 47802487, "question_id": 47802361, "link": "https://stackoverflow.com/questions/47802361/how-to-implement-operator-without-modifying-the-lhs-argument-in-c/47802487#47802487", "title": "How to implement `+` operator without modifying the LHS argument in C++?", "body": "<p>You are returning <code>*this</code> from <code>operator+</code>. You should instead return an object that contains the new result. By returning <code>*this</code> you are saying that the result of <code>x + y</code> is always <code>x</code>, which is not true. The result is a new value, distinct from both <code>x</code> and <code>y</code>. Notice that the return type should not be a reference, since the returned value doesn't refer to any existing instance.</p>\n\n<pre><code>smallclass smallclass::operator+(smallclass&amp; y)\n{\n    smallclass result;\n    result.a = this-&gt;a + y.a;\n    return result;\n}\n</code></pre>\n\n<p>You should also read about <code>const</code> correctness. By making <code>y</code> a <code>const</code> reference you guarantee the user that your operator will not modify <code>y</code>. The same is true about making the entire member function <code>const</code>. It guarantees to the user of your class that the operator won't modify <code>this</code>. Without these <code>const</code> you will not be able to use your operator with <code>const</code> instances.</p>\n\n<pre><code>smallclass smallclass::operator+(const smallclass&amp; y) const\n{\n    smallclass result;\n    result.a = this-&gt;a + y.a;\n    return result;\n}\n</code></pre>\n\n<p>A more idiomatic approach is to implement <code>operator+</code> in terms of <code>operator+=</code> and of the copy constructor. That way, you don't have to repeat yourself.</p>\n\n<pre><code>smallclass smallclass::operator+(const smallclass&amp; y) const\n{\n    smallclass result(*this);\n    result += y;\n    return result;\n}\n</code></pre>\n\n<p>You can do this for many operators. Notably the comparison operators can be all be implemented in terms of only two fundamental comparisons, for example <code>operator==</code> and <code>operator&lt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1513202276, "post_id": 47802550, "comment_id": 82566820, "body": "I would note this is canonical assuming you want auto conversion of the lhs from <code>int</code> to <code>smallclass</code>.  If not then a member method is more appropriate."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1513202399, "post_id": 47802550, "comment_id": 82566868, "body": "@LokiAstari: since you get auto conversion on the rhs and addition is commutative it seems consistent to have auto conversion on the lhs, too."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1513204100, "post_id": 47802550, "comment_id": 82567511, "body": "It &quot;leverages copy elision where possible&quot; except for NRVO. So if the LHS is an lvalue it could be less optimal than the version taking lvalue references and making a copy in the body of the function."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1513204185, "post_id": 47802550, "comment_id": 82567539, "body": "@DietmarK&#252;hl Don&#39;t disagree with that point. Just thought it was worth pointing out as the OP question does not have enough context."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 3, "last_activity_date": 1513213943, "last_edit_date": 1513213943, "creation_date": 1513201355, "answer_id": 47802550, "question_id": 47802361, "link": "https://stackoverflow.com/questions/47802361/how-to-implement-operator-without-modifying-the-lhs-argument-in-c/47802550#47802550", "title": "How to implement `+` operator without modifying the LHS argument in C++?", "body": "<p>The canonical version of implementing <code>operator+</code> is this:</p>\n\n<pre><code>friend smallclass operator+ (smallclass op1, smallclass const&amp; op2) {\n   op1 += op2;\n   return op1;\n}\n</code></pre>\n\n<p>This approach leverages copy-elision where possible and also leveraged the existing implementation of <code>operator+=</code>.</p>\n\n<p>If you want to inhibit auto conversion on the left hand side you can use the version below for a commutative addition:</p>\n\n<pre><code>smallclass operator+ (smallclass rhs) const {\n    rhs += *this;\n    return rhs;\n}\n</code></pre>\n\n<p>If the addition is not commutative you\u2019d use</p>\n\n<pre><code>smallclass operator+ (smallclass const&amp; rhs) const {\n    return smallclass(*this) += rhs;\n}\n</code></pre>\n\n<p>(the last version can\u2019t entirely elide one copy).</p>\n"}], "owner": {"reputation": 1578, "user_id": 6822618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GapDl.jpg?s=128&g=1", "display_name": "JAD", "link": "https://stackoverflow.com/users/6822618/jad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 47802487, "answer_count": 2, "score": -2, "last_activity_date": 1513213943, "creation_date": 1513200398, "last_edit_date": 1513200713, "question_id": 47802361, "link": "https://stackoverflow.com/questions/47802361/how-to-implement-operator-without-modifying-the-lhs-argument-in-c", "title": "How to implement `+` operator without modifying the LHS argument in C++?", "body": "<p>I am trying to learn how overloading operators works in C++. I managed to figure out how to implement the <code>+=</code> and <code>=</code> operators, but I am struggling with the <code>+</code> operator. The compiler tells me that the operator can only take one or two arguments. I can't seem to figure out how to properly return the result.</p>\n\n<p>The objects I can take as arguments would be the LHS and RHS of the operator, but it seems to me that I have to create a third instance of the class somehow to store and return the result. I don't think the <code>+</code> operator is supposed to be modifying either the LHS or the RHS themselves.</p>\n\n<p>Furthermore, creating a new instance within the method would not work, since that object would be removed after the method finishes.</p>\n\n<p><strong>So how do I properly store the result in a fresh instance?</strong></p>\n\n<p>This is what I tried so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass smallclass\n{\npublic:\n    smallclass();\n    smallclass(int x);\n\n    smallclass&amp; operator+=(smallclass&amp;y);\n    smallclass&amp; operator=(smallclass&amp; y);\n    smallclass&amp; operator+(smallclass&amp; y);\n    int a;\n\n};\n\nsmallclass::smallclass()\n{\n\n}\n\nsmallclass::smallclass(int x)\n{\n    this-&gt;a = x;\n}\n\n\nsmallclass&amp; smallclass::operator+=(smallclass&amp;y)\n{\n    this-&gt;a += y.a;\n\n    return *this;\n}\n\nsmallclass&amp; smallclass::operator=(smallclass&amp; y)\n{\n    int value = y.a;\n    this-&gt;a = value;\n    return *this;\n}\n\n\nsmallclass&amp; smallclass::operator+(smallclass&amp; y)\n{\n    int value = y.a;\n    this-&gt;a += value;\n\n    return *this;\n}\n\n\nint main()\n{\n    smallclass a = smallclass(5);\n    smallclass b = smallclass(6);\n\n    std::cout &lt;&lt; a.a &lt;&lt; std::endl;\n    std::cout &lt;&lt; b.a &lt;&lt; std::endl;\n    // a = 5\n    // b = 6\n\n    a += b;\n\n    std::cout &lt;&lt; a.a &lt;&lt; std::endl;\n    std::cout &lt;&lt; b.a &lt;&lt; std::endl;\n    // a = 11\n    // b = 6\n\n    a = b;\n\n    std::cout &lt;&lt; a.a &lt;&lt; std::endl;\n    std::cout &lt;&lt; b.a &lt;&lt; std::endl;\n    // a = 6\n    // b = 6\n\n    smallclass c;\n\n    c = a + b;\n\n    std::cout &lt;&lt; a.a &lt;&lt; std::endl;\n    std::cout &lt;&lt; b.a &lt;&lt; std::endl;\n    std::cout &lt;&lt; c.a &lt;&lt; std::endl;\n    // a = 12 should be 6\n    // b = 6\n    // c = 12\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml", "qt4", "qt5"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1513200710, "post_id": 47802357, "comment_id": 82566169, "body": "I believe there should be no children when the constructor is called for the parent. The children should be added after the parent is constructed."}, {"owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513201083, "post_id": 47802357, "comment_id": 82566326, "body": "@drescherjm Yes, but how do I properly capture those afterwards? <code>childEvent(QChildEvent *event)</code> does not appear to trigger"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1513204760, "post_id": 47802357, "comment_id": 82567750, "body": "It seems to me that the parent does not know he has children, you have to get them when you need them."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1513205524, "post_id": 47802357, "comment_id": 82568059, "body": "Try invoking a C++ function from QML from <code>Component.onCompleted</code>"}, {"owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1513206646, "post_id": 47802357, "comment_id": 82568395, "body": "@dtech Thank you. That is the solution that I was looking for."}, {"owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1513206825, "post_id": 47802357, "comment_id": 82568462, "body": "@dtech Post your comment as an answer and I will accept it as the solution."}], "answers": [{"comments": [{"owner": {"reputation": 3430, "user_id": 282901, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2da50f1dc1637221d4b650784f3f8802?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/282901/pierre"}, "edited": false, "score": 0, "creation_date": 1616971081, "post_id": 47803562, "comment_id": 118162675, "body": "Works with Widgets and QObject too."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": true, "score": 2, "last_activity_date": 1513206999, "creation_date": 1513206999, "answer_id": 47803562, "question_id": 47802357, "link": "https://stackoverflow.com/questions/47802357/how-can-i-get-a-qobjects-children/47803562#47803562", "title": "How can I get a QObject&#39;s children?", "body": "<p>You should delay the iteration until the QML object tree is completed. You can that by using</p>\n\n<pre><code>MultiGauge {\n  // ...\n  Component.onCompleted: doSomeStuff()\n}\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 8908459, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ad6bd397f0f8e361bf3bc05da4aa2929?s=128&d=identicon&r=PG&f=1", "display_name": "user8908459", "link": "https://stackoverflow.com/users/8908459/user8908459"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 47803562, "answer_count": 1, "score": 1, "last_activity_date": 1513207255, "creation_date": 1513200386, "last_edit_date": 1513207255, "question_id": 47802357, "link": "https://stackoverflow.com/questions/47802357/how-can-i-get-a-qobjects-children", "title": "How can I get a QObject&#39;s children?", "body": "<p>I am trying to get the children of the a <code>QObject</code> class and add their data to the parent (see QML example below). However, when I call the following code in the constructor, it returns no children. It appears that the child list has not yet been populated. It works if I place the same code in the <code>paint()</code> function, but I need the data earlier than that.</p>\n\n<pre><code>MultiGauge::MultiGauge() : \n    QQuickPaintedItem()\n{\n    QObjectList children = this-&gt;children();\n\n    for (int i = 0; i &lt; children.length(); i++)\n    {\n        this-&gt;myQList.append(children[i]-&gt;metaObject()-&gt;className());\n    } \n}\n</code></pre>\n\n<p>Here is the QML file</p>\n\n<pre><code>MultiGauge {\n\n    height: 125\n    width: height\n    Limits {\n        min: 0\n        caution: 1250\n        max: 2000\n    }\n    Limits {\n        min: 100\n        caution: 200\n        max: 300\n    }\n}\n</code></pre>\n\n<p><strong>EDIT: Solution:</strong></p>\n\n<pre><code>MultiGauge::componentComplete()\n{\n    // must call the parent's version of the function first\n    QQuickPaintedItem::componentComplete();\n\n    // now we can do what we need to\n    QObjectList children = this-&gt;children();\n\n    for (int i = 0; i &lt; children.length(); i++)\n    {\n        this-&gt;myQList.append(children[i]-&gt;metaObject()-&gt;className());\n    } \n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "iterator", "qt5", "qtconcurrent"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 364885, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd140fca2bb4f8e4ff64b2c90775769?s=128&d=identicon&r=PG&f=1", "display_name": "William GILLARD", "link": "https://stackoverflow.com/users/364885/william-gillard"}, "edited": false, "score": 0, "creation_date": 1513348537, "post_id": 47802474, "comment_id": 82631994, "body": "Thanks very much, this indeed solve my problem. Still did not really understand why the second variant of my code does not work initially. Now that variant 1 is fully operational, I will go for it as its seems to me that it will be the more efficient in time. Thanks again"}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 0, "last_activity_date": 1513200980, "creation_date": 1513200980, "answer_id": 47802474, "question_id": 47802305, "link": "https://stackoverflow.com/questions/47802305/iterating-through-qfuturesynchronizertresults/47802474#47802474", "title": "Iterating through QFutureSynchronizer&lt;T&gt;::results", "body": "<p>I don\u2019t know the <code>foreach</code> macro but assuming it is similar to range-based <code>for</code> it keeps the result of <code>futures()</code> alive. The other variations use this result as part of the expression and then let it die: only a temporary bound directly to a <code>const&amp;</code> or to a <code>&amp;&amp;</code> is kept alive. Other temporaries used in an expression are destroyed at the end of the full expression. You may want to try something like</p>\n\n<pre><code>// ...\nauto&amp;&amp; ucf = Up_corr.futures();\nauto&amp;&amp; dcf = Down_corr.futures();\nforeach(boost::tie(tu, td), boost::combine(ucf, dcf))\n{\n    vUp.push_back((tu.result()+td.result())*0.5);\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 364885, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd140fca2bb4f8e4ff64b2c90775769?s=128&d=identicon&r=PG&f=1", "display_name": "William GILLARD", "link": "https://stackoverflow.com/users/364885/william-gillard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 47802474, "answer_count": 1, "score": 0, "last_activity_date": 1513205161, "creation_date": 1513200118, "last_edit_date": 1513205161, "question_id": 47802305, "link": "https://stackoverflow.com/questions/47802305/iterating-through-qfuturesynchronizertresults", "title": "Iterating through QFutureSynchronizer&lt;T&gt;::results", "body": "<p>Can someone tell me what is wrong with these pieces of code :</p>\n\n<pre><code>std::vector&lt;double&gt; vUp;\nQFuture&lt;double&gt; tu, td;\nforeach(boost::tie(tu, td), boost::combine(Up_corr.futures(), Down_corr.futures()))\n{\n   vUp.push_back((tu.result()+td.result())*0.5);\n }\n</code></pre>\n\n<p>I got the following error at run time:</p>\n\n<pre><code>Thread 1: EXC_BAD_ACCESS (code=1, address=0x51)\n</code></pre>\n\n<p>The Up_corr and Down_corr are both QFutureSynchronizer and are well defined as the third methods present in this thread is working. Also, before passing through the above loop, I am waiting that both, Up_corr and Down_corr QtConcurent::run are finished.</p>\n\n<p>This variant of the code is also not working</p>\n\n<pre><code>std::vector&lt;double&gt; vUp;\nQList&lt; QFuture&lt;double&gt; &gt;::const_iterator tu   = Up_corr.futures().cbegin();\nQList&lt; QFuture&lt;double&gt; &gt;::const_iterator td = Down_corr.futures().cbegin();\nfor(size_t iCh = 0; iCh &lt; 32; iCh++)\n{\n     vUp.push_back((tu-&gt;result()+td-&gt;result())*0.5);\n     tu++;\n     td++;\n}\n</code></pre>\n\n<p>It gives the same error when trying to access tu->result() or td->result().</p>\n\n<p>The only method which is working is:</p>\n\n<pre><code>std::vector&lt;double&gt; v1;\nstd::vector&lt;double&gt; v2;\n\nforeach(QFuture&lt;double&gt; thread, Up_corr.futures())\n       v1.push_back(thread.result());\nforeach(QFuture&lt;double&gt; thread, Down_corr.futures())\n       v2.push_back(thread.result());\n\nfor(size_t iCh = 0; iCh &lt; 32; iCh++)\n       vUp.push_pack((v1[iCh]+v2[iCh])*0.5);\n</code></pre>\n\n<p>Why is the last one working while the two other failed with BAD ACCESS?</p>\n\n<p>The last methods, which is working, is not optimal: to fill one vector, I will need three loops. For 32 elements it isn't a big deal, but, I will also need to deal with List> of 2k elements and reducing timing is my objective.</p>\n"}, {"tags": ["c++", "mingw", "math.h"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1513200646, "post_id": 47802301, "comment_id": 82566146, "body": "Are you sure these headers are intended for that compiler?"}, {"owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1513200946, "post_id": 47802301, "comment_id": 82566265, "body": "No I am not sure. I am following the article at <a href=\"https://wiki.haskell.org/ALUT\" rel=\"nofollow noreferrer\">wiki.haskell.org/ALUT</a>, and I have made sure to do everything step-by-step. It doesn&#39;t state anything else on the topic."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513202597, "post_id": 47802301, "comment_id": 82566959, "body": "Those are part of a standard library header. Don&#39;t mess with them. If your program will not compile but millions upon millions of other programs using the same header will, odds are very good the problem is at your end somewhere. That or your compiler installation got mangled somehow and should be repaired or reinstalled. Start by producing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If that doesn&#39;t help you spot and fix the error, edit your question to include the MVCE."}, {"owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "edited": false, "score": 0, "creation_date": 1513203079, "post_id": 47802301, "comment_id": 82567143, "body": "I agree it&#39;s on my end somewhere. I&#39;m guessing it might have something to do with compiling under CXX."}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "edited": false, "score": 0, "creation_date": 1513200854, "post_id": 47802429, "comment_id": 82566238, "body": "So the lines simply state that it takes a value (double, float, long double) and returns an int? I thought it would be more complex than that. Thank you."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 2, "last_activity_date": 1513200735, "creation_date": 1513200735, "answer_id": 47802429, "question_id": 47802301, "link": "https://stackoverflow.com/questions/47802301/c-extern-int-double/47802429#47802429", "title": "C++ - extern int (double)", "body": "<p>The lines each declare a function returning int, one takes double,one float and one long double. The </p>\n\n<p>__cdecl is normally a calling convention indicator but I would check that it has not been #define'd to something else, other than that there is no numeric constant in that code.</p>\n"}], "owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513200735, "creation_date": 1513200075, "question_id": 47802301, "link": "https://stackoverflow.com/questions/47802301/c-extern-int-double", "title": "C++ - extern int (double)", "body": "<p>I'm receiving an error trying to build a program due to file <code>mingw/include/math.h</code></p>\n\n<p>The error states <code>include/math.h:379:20: error: expected identifier or '(' before numeric constant</code></p>\n\n<p>The error is from the following lines</p>\n\n<pre><code>extern int __cdecl __isnan (double);\nextern int __cdecl __isnanf (float);\nextern int __cdecl __isnanl (long double);\n</code></pre>\n\n<p>I'm wondering if I am able to modify these lines to work with my compiler or not, such as making them do the same thing in a compatible way, or what I need to do to fix these errors.</p>\n\n<p>Just as importantly, I am also curious what these lines do.</p>\n\n<p>If it is of any help, I am trying to do <code>mingw32-make install</code> freealut after configuring using cmake.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "getline"], "comments": [{"owner": {"reputation": 1672, "user_id": 4697963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIJum.jpg?s=128&g=1", "display_name": "Markiian Benovskyi", "link": "https://stackoverflow.com/users/4697963/markiian-benovskyi"}, "edited": false, "score": 1, "creation_date": 1513198717, "post_id": 47801980, "comment_id": 82565273, "body": "What is your <code>a</code> in <code>for (int i = 0; i &lt; a; i++) {</code> equal to?"}], "owner": {"reputation": 11, "user_id": 9095913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a73bf0f3b07712e19e422e55b76554a?s=128&d=identicon&r=PG&f=1", "display_name": "Lightningbolt", "link": "https://stackoverflow.com/users/9095913/lightningbolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1513198899, "answer_count": 0, "score": 1, "last_activity_date": 1513198895, "creation_date": 1513198597, "question_id": 47801980, "link": "https://stackoverflow.com/questions/47801980/getline-causing-program-to-skip-directions", "closed_reason": "Duplicate", "title": "Getline causing program to skip directions", "body": "<p>My code keeps skipping part of the instructions and I think it has something to do with getline.</p>\n\n<pre><code>if (userChoice == 'L') {\n        userChoice = NULL;\n        char option;\n        cout &lt;&lt; \"What are you searching for?\" &lt;&lt; endl;\n        cout &lt;&lt; \"1. Name\" &lt;&lt; endl;\n        cout &lt;&lt; \"2. Number\" &lt;&lt; endl;\n        cout &lt;&lt; \"3. Address\" &lt;&lt; endl;\n        cin &gt;&gt; option;\n        while (option != '1' &amp;&amp; option != '2' &amp;&amp; option != '3') {\n            cout &lt;&lt; \"That was not a valid input. Please try again: \" &lt;&lt; endl;\n            cin &gt;&gt; option;\n        }\n\n        if (option == '1') {\n            string find;\n            cout &lt;&lt; \"Enter the full name you are looking for: \" &lt;&lt; endl;\n            getline(cin, find);\n            bool found = false;\n            for (int i = 0; i &lt; a; i++) {\n                if (Ptr[i].getName() == find) {\n                    found = true;\n                    cout &lt;&lt; \"Entry Found: \" &lt;&lt; endl;\n                    cout &lt;&lt; Ptr[i].getName() &lt;&lt; endl &lt;&lt; Ptr[i].getAddress() &lt;&lt; endl &lt;&lt; Ptr[i].getNumber() &lt;&lt; endl;\n                    i = a;\n                }\n                else if(Ptr[i].getName() != find)\n                {\n                    i++;\n                }\n            }\n        }\n</code></pre>\n\n<p>The output prints the initial menu, lets the user input something(1 is the only real option right now) then asks the user to enter the name they are looking for, but immediately after that skips the rest of the if statement and outputs the main menu to the program.</p>\n"}, {"tags": ["c++", "c++11", "bitset"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 3, "creation_date": 1513200107, "post_id": 47801709, "comment_id": 82565885, "body": "It\u2019s a shame <code>std::bitset</code> doesn\u2019t have a constructor taking an <code>std::initializer_list&lt;bool&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1513724412, "post_id": 47802006, "comment_id": 82759717, "body": "casting through string uses unnecessary overhead"}, {"owner": {"reputation": 612, "user_id": 2427022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e52454d2d6285752b7f1caf8ddcb8e?s=128&d=identicon&r=PG", "display_name": "Shivendra Agarwal", "link": "https://stackoverflow.com/users/2427022/shivendra-agarwal"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1513776741, "post_id": 47802006, "comment_id": 82781449, "body": "well bitset provided a string constructor for some reason!   and just to add we are using stringstream not string while construction, which is quite optimized for scenarios like these where we may want to append strings."}], "tags": [], "owner": {"reputation": 612, "user_id": 2427022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e52454d2d6285752b7f1caf8ddcb8e?s=128&d=identicon&r=PG", "display_name": "Shivendra Agarwal", "link": "https://stackoverflow.com/users/2427022/shivendra-agarwal"}, "is_accepted": false, "score": 2, "last_activity_date": 1513199859, "last_edit_date": 1513199859, "creation_date": 1513198705, "answer_id": 47802006, "question_id": 47801709, "link": "https://stackoverflow.com/questions/47801709/best-way-to-set-a-bitset-with-boolean-values/47802006#47802006", "title": "best way to set a bitset with boolean values", "body": "<p>Introduce a new api that can give you string input that bitset accepts in parameter.</p>\n\n<p>to be more generic, recommendation will be to use bool array or <code>[std::vector&lt;bool&gt;][1]</code> to get rid of these variable parameters in getString()</p>\n\n<pre><code>inline std::string getString(bool canwalk, bool canTalk, bool canEat)\n{\nstd::stringstream input;\nstr &lt;&lt; canwalk?1:0 &lt;&lt; cantalk?1:0 &lt;&lt; caneat?1:0;\nreturn input.str();\n}\n</code></pre>\n\n<p>now can define bitset as:</p>\n\n<pre><code>std::bitset&lt;3&gt; foo (getString(canwalk, canTalk, canEat));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "is_accepted": false, "score": 1, "last_activity_date": 1513724228, "last_edit_date": 1513724228, "creation_date": 1513199320, "answer_id": 47802138, "question_id": 47801709, "link": "https://stackoverflow.com/questions/47801709/best-way-to-set-a-bitset-with-boolean-values/47802138#47802138", "title": "best way to set a bitset with boolean values", "body": "<p>You basically need a builder that will build an initial value from your boolean set to pass to the constructor of std::bitset. You can do this at compile time (as opposed to runtime) via variadic templates, like so:</p>\n\n<pre><code>template &lt;unsigned long long initialValue&gt; \nconstexpr unsigned long long bitset_value_builder_impl() { return initialValue; }\n\ntemplate &lt;unsigned long long initialValue, typename First, typename ... Args&gt;\nconstexpr unsigned long long bitset_value_builder_impl(First &amp;&amp;first, Args &amp;&amp;...args) {\n    return first ? \n        bitset_value_builder_impl&lt; (initialValue | (1UL&lt;&lt;sizeof...(args)) ), Args...&gt;(std::forward&lt;Args&gt;(args)...) :\n        bitset_value_builder_impl&lt; (initialValue &amp; ~(1UL&lt;&lt;sizeof...(args)) ), Args...&gt;(std::forward&lt;Args&gt;(args)...);\n}\n\ntemplate &lt;typename First, typename ... Args&gt;\nconstexpr unsigned long long bitset_value_builder(First &amp;&amp;first, Args &amp;&amp;...args) {   \n    return bitset_value_builder_impl&lt;0, First, Args...&gt;(std::forward&lt;First&gt;(first), std::forward&lt;Args&gt;(args)...);\n}\n\nint main()\n{\n    bool canwalk=true;\n    bool cantalk=false;\n    bool caneat=false;    \n    std::bitset&lt;3&gt; bits{bitset_value_builder(canwalk, cantalk, caneat)};\n    std::cout &lt;&lt; bits &lt;&lt; std::endl; //100\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1513724381, "post_id": 47802225, "comment_id": 82759706, "body": "Why use <code>unsigned long long</code> as a temporary? Why not just create the bitset and then assign?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1513724946, "post_id": 47802225, "comment_id": 82759874, "body": "@MooingDuck - well... I liked the Shivendra Agarwal&#39;s answer but I&#39;ve found it a little heavy; so I&#39;ve developed a lightweight version of it; the &quot;just create the bitset and then assign&quot; is the other my answer (and, yes:I think it&#39;s better)"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 3, "last_activity_date": 1513199723, "creation_date": 1513199723, "answer_id": 47802225, "question_id": 47801709, "link": "https://stackoverflow.com/questions/47801709/best-way-to-set-a-bitset-with-boolean-values/47802225#47802225", "title": "best way to set a bitset with boolean values", "body": "<p>Following the example of Shivendra Agarwal, but using the constructor that receive an <code>unsigned long long</code>, I propose the following variadic template function (to be more generic)</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nunsigned long long getULL (Args ... as)\n {\n   using unused = int[];\n\n   unsigned long long ret { 0ULL };\n\n   (void) unused { 0, (ret &lt;&lt;= 1, ret |= (as ? 1ULL : 0ULL), 0)... };\n\n   return ret;\n }\n</code></pre>\n\n<p>that permit the initialization of <code>foo</code> as follows</p>\n\n<pre><code>std::bitset&lt;3&gt; foo{ getULL(canwalk, cantalk, caneat) };\n</code></pre>\n\n<p>This works only if the dimension of the <code>std::bitset</code> isn't grater of the number of bits in an <code>unsigned long long</code> (with <code>3</code> whe are surely safe).</p>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;bitset&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename ... Args&gt;\nunsigned long long getULL (Args ... as)\n {\n   using unused = int[];\n\n   unsigned long long ret { 0ULL };\n\n   (void) unused { 0, (ret &lt;&lt;= 1, ret |= (as ? 1ULL : 0ULL), 0)... };\n\n   return ret;\n }\n\nint main()\n {\n   bool canwalk=true;\n   bool cantalk=false;\n   bool caneat=false;\n\n   std::bitset&lt;3&gt; foo{ getULL(canwalk, cantalk, caneat) };\n\n   std::cout &lt;&lt; foo &lt;&lt; std::endl;\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1513247994, "post_id": 47804243, "comment_id": 82583819, "body": "It may be dangerous, but it is standard o not fix the length. both c-style arrays and std::array allow it. I wonder why they don&#39;t use or recommend this approach for std::array?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1513724675, "post_id": 47804243, "comment_id": 82759798, "body": "@GemTaylor: c-style arrays have backwards compatibility that appears to have received precedence from null terminated strings, and <code>std::array</code> is a trivial type that is only the thinnest of wrappers around a c-style array, and part of the magic it works with is that <i>it has no constructor</i>, and so it defaults to only constructing the c-style array, using the legacy syntax. Adding a limiting constructor would break the magic."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1513794993, "post_id": 47804243, "comment_id": 82792408, "body": "Prefer <a href=\"http://www.cplusplus.com/reference/bitset/bitset/set/\" rel=\"nofollow noreferrer\">bitset.set</a> to <code>bitset.operator[]</code>, there&#39;s a huge performance win sometimes. Not sure how easy that is here."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1513802291, "post_id": 47804243, "comment_id": 82795811, "body": "@MooingDuck - I didn&#39;t know... but make sense: the not constant version of <code>operator[]</code> return a <code>std::bitset::reference</code> and the following assignment pass through this class. Yes: <code>set()</code> is better. Thanks."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 3, "last_activity_date": 1513802100, "last_edit_date": 1513802100, "creation_date": 1513211859, "answer_id": 47804243, "question_id": 47801709, "link": "https://stackoverflow.com/questions/47801709/best-way-to-set-a-bitset-with-boolean-values/47804243#47804243", "title": "best way to set a bitset with boolean values", "body": "<p>IMHO, an initialization of type </p>\n\n<pre><code>std::bitset&lt;3&gt; foo(canWalk, cantalk, caneat);\n</code></pre>\n\n<p>is dangerous (error prone) because require that the template argument of <code>std::bitset</code> (<code>3</code>, in the example) correspond to the number of argument of the initialization.</p>\n\n<p>I propose the creation of a \"make\" function (following the consolidated example of <code>std::pair()</code>, <code>std::tuple()</code>, <code>std::make_unique()</code>, <code>std::make_shared</code>) where the type and the number of arguments fix the returned type.</p>\n\n<p>So I propose the following <code>makeBitSet()</code> function that return a <code>std::bitset&lt;N&gt;</code> where <code>N</code> is the number of the arguments</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nstd::bitset&lt;sizeof...(Args)&gt; makeBitSet (Args ... as)\n {\n   using unused = bool[];\n\n   std::bitset&lt;sizeof...(Args)&gt;  ret;\n\n   std::size_t ui { ret.size() };\n\n   (void) unused { true, (ret.set(--ui, as), true)... };\n\n   return ret;\n }\n</code></pre>\n\n<p>The function can be used as follows</p>\n\n<pre><code>std::bitset&lt;3&gt; foo{ makeBitSet(canwalk, cantalk, caneat) };\n</code></pre>\n\n<p>but also (better, IMHO), using the C++11 <code>auto</code>,</p>\n\n<pre><code>auto foo = makeBitSet(canwalk, cantalk, caneat);\n</code></pre>\n\n<p>Observe that, starting from C++14, <code>makeBitSet()</code> can use the returning <code>auto</code> type</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nauto makeBitSet (Args ... as)\n {\n   // ...\n</code></pre>\n\n<p>avoiding the annoying <code>std::bitset&lt;sizeof...(Args)&gt;</code> redundancy.</p>\n\n<p>Moreover, starting from C++17, you can use template folding and, throwing away the <code>unused</code> array (and the corresponding <code>using</code> declaration), the <code>makeBitSet()</code> can be simplified as [EDIT: modified, to improve performances, following a suggestion from Mooing Duck (thanks!)]  </p>\n\n<pre><code>template &lt;typename ... Args&gt;\nauto makeBitSet (Args ... as)\n {\n   std::bitset&lt;sizeof...(Args)&gt;  ret;\n\n   std::size_t ui { ret.size() };\n\n   ( ret.set(--ui, as), ... );\n\n   return ret;\n }\n</code></pre>\n\n<p>The following is a full working C++11 example</p>\n\n<pre><code>#include &lt;bitset&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename ... Args&gt;\nstd::bitset&lt;sizeof...(Args)&gt; makeBitSet (Args ... as)\n {\n   using unused = bool[];\n\n   std::bitset&lt;sizeof...(Args)&gt;  ret;\n\n   std::size_t ui { ret.size() };\n\n   (void) unused { true, (ret.set(--ui, as), true)... };\n\n   return ret;\n }\n\nint main()\n {\n   bool canwalk { true  };\n   bool cantalk { false };\n   bool caneat  { false };\n\n   auto foo = makeBitSet(canwalk, cantalk, caneat);\n\n   std::cout &lt;&lt; foo &lt;&lt; std::endl;\n }\n</code></pre>\n"}], "owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1463, "favorite_count": 0, "accepted_answer_id": 47802225, "answer_count": 4, "score": 3, "last_activity_date": 1513802100, "creation_date": 1513197385, "last_edit_date": 1513199820, "question_id": 47801709, "link": "https://stackoverflow.com/questions/47801709/best-way-to-set-a-bitset-with-boolean-values", "title": "best way to set a bitset with boolean values", "body": "<p>Suppose I have 3 <code>bool</code> type values</p>\n\n<pre><code>bool canwalk=true;\nbool cantalk=false;\nbool caneat=false;\n</code></pre>\n\n<p>I would like to set a <code>bitset</code> denoting the three</p>\n\n<pre><code>std::bitset&lt;3&gt; foo;\n</code></pre>\n\n<p>How can I construct a <code>bitset</code> using the boolean values?\nI want to do something like this</p>\n\n<pre><code> std::bitset&lt;3&gt; foo(canWalk,cantalk,caneat); //giving me 100\n</code></pre>\n"}, {"tags": ["c++", "string", "vector"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1513197046, "post_id": 47801607, "comment_id": 82564484, "body": "So ... don&#39;t use <code>remove</code>. Use <code>find</code> to find an <code>apple</code> and <code>vector::erase</code> that."}], "answers": [{"tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": false, "score": 3, "last_activity_date": 1513197044, "creation_date": 1513197044, "answer_id": 47801639, "question_id": 47801607, "link": "https://stackoverflow.com/questions/47801607/removing-one-item-in-a-vector-containing-identical-items/47801639#47801639", "title": "Removing one item in a vector containing identical items", "body": "<pre><code>const std::string apple = \"apple\";\nconst auto it = std::find(std::cbegin(inventory), std::cend(inventory), apple);\n\nif (it != std::cend(inventory)) inventory.erase(it);\n</code></pre>\n\n<p>You just find the first one and, if it exists, remove.</p>\n\n<p><a href=\"https://godbolt.org/g/BkSVLf\" rel=\"nofollow noreferrer\"><strong>Example</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1513200270, "post_id": 47801976, "comment_id": 82565960, "body": "In <code>remove_first_coincidence()</code>, the <code>container</code> needs to be passed by reference, not by value, otherwise you are modifying a copy of the container instead of the original.  You need to change that in your demo"}, {"owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513200558, "post_id": 47801976, "comment_id": 82566102, "body": "Ups sorry, I copied the code from an old generic implementation in which I used iterators :S little mistake."}], "tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 2, "last_activity_date": 1513206565, "last_edit_date": 1513206565, "creation_date": 1513198574, "answer_id": 47801976, "question_id": 47801607, "link": "https://stackoverflow.com/questions/47801607/removing-one-item-in-a-vector-containing-identical-items/47801976#47801976", "title": "Removing one item in a vector containing identical items", "body": "<p>As <a href=\"https://stackoverflow.com/a/47801639/4297146\">Edgar Rokyan</a> said, you can remove one instance easily using <a href=\"http://es.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find()</code></a> and <a href=\"http://www.cplusplus.com/reference/vector/vector/erase/\" rel=\"nofollow noreferrer\"><code>std::vector::erase()</code></a>. </p>\n\n<pre><code>const auto it = std::find(std::cbegin(inventory), std::cend(inventory), apple);\nif (it != std::cend(inventory)) inventory.erase(it);\n</code></pre>\n\n<p>When an item disappears from a vector, and sits somewhere in the middle, then all the items right of it must move one slot to the left, implying an <code>O(n)</code> complexity. If you don't care about the order of the elements inside the vector, you can reduce the complexity to <code>O(1)</code> by moving the last component to the position of the one you want to remove, and then removing the last position of the vector:</p>\n\n<pre><code>auto it = std::find(std::begin(inventory), std::end(inventory), apple);\nif (it != std::end(inventory)) {\n    *it = std::move(inventory.back());\n    inventory.pop_back();\n}\n</code></pre>\n\n<p>In this case, a better approach is a generic template function, so you can use it with different types:</p>\n\n<pre><code>template&lt;class Container&gt;\ninline auto remove_first_coincidence(Container &amp;container, typename Container::value_type const&amp; element) {\n    auto it = std::find(std::begin(container), std::end(container), element);\n    if (it != std::end(container)) {\n        *it = std::move(container.back());\n        container.pop_back();\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/QtPBMx\" rel=\"nofollow noreferrer\">LIVE DEMO</a></p>\n"}], "owner": {"reputation": 17, "user_id": 9010938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc8fe44219b2550285386e18fd5fbf?s=128&d=identicon&r=PG&f=1", "display_name": "Brannon Penrod", "link": "https://stackoverflow.com/users/9010938/brannon-penrod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1513206565, "creation_date": 1513196888, "last_edit_date": 1513197048, "question_id": 47801607, "link": "https://stackoverflow.com/questions/47801607/removing-one-item-in-a-vector-containing-identical-items", "title": "Removing one item in a vector containing identical items", "body": "<p>Imagine you have a <code>vector&lt;string&gt; inventory</code> full of <code>apple</code>s and <code>oranges</code>. How do you remove a single <code>apple</code> rather than all <code>apple</code>s in the vector? <code>std::remove</code> usually does this because the strings are identical, from what I can tell. Here's the line I think needs to be changed. </p>\n\n<pre><code>inventory.erase(remove(inventory.begin(), inventory.end(), \"apple\") inventory.end());\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 5, "creation_date": 1513196845, "post_id": 47801590, "comment_id": 82564379, "body": "The compiler will tell you."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1513196894, "post_id": 47801590, "comment_id": 82564404, "body": "Do you... need to know <i>anything</i> else about <code>class1</code> besides the fact that it exists? Its size, its members, ...?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1513196901, "post_id": 47801590, "comment_id": 82564408, "body": "You can&#39;t do that much with a forward declaration."}, {"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1513196931, "post_id": 47801590, "comment_id": 82564423, "body": "@juanchopanza I&#39;m sure you will get some votes for this comment. Now can you provide a good answer from your experience?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1513197014, "post_id": 47801590, "comment_id": 82564462, "body": "IIRC, <a href=\"https://youtu.be/QjFpKJ8Xx78\" rel=\"nofollow noreferrer\">this talk by John Lakos</a> (it&#39;s 3 parts; not short) mentions a good pattern on when to forward declare, or at least a good pattern for Bloomberg."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 4, "creation_date": 1513197015, "post_id": 47801590, "comment_id": 82564465, "body": "The disadvantage is that if you decide to rename the class, you won&#39;t get any compiler errors if you forget to update the forward declarations. Generally, you&#39;ll still have SOME error somewhere, but the cause won&#39;t be as obvious."}, {"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1513197015, "post_id": 47801590, "comment_id": 82564464, "body": "@Barry No, I don&#39;t need to know anything in the <i>header</i> file about <code>class1</code>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 2, "creation_date": 1513197020, "post_id": 47801590, "comment_id": 82564469, "body": "A complete class declaration and a forward declaration are not interchangeable: a forward declaration does not let you use members of your class, only declare references and pointers to it. When this is sufficient for your purposes, there are no risks."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1513197057, "post_id": 47801590, "comment_id": 82564488, "body": "Not necessarily a duplicate question but a possible duplicate answer (if that even makes sense lol) <a href=\"https://stackoverflow.com/questions/4757565/what-are-forward-declarations-in-c\" title=\"what are forward declarations in c\">stackoverflow.com/questions/4757565/&hellip;</a>"}, {"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 0, "creation_date": 1513197183, "post_id": 47801590, "comment_id": 82564559, "body": "For all the downvoters: This question is perfectly clear. <b>If you think otherwise, you are welcome to comment.</b>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1513197250, "post_id": 47801590, "comment_id": 82564587, "body": "@StavAlfi I didn&#39;t down vote but some of the down votes might be because they feel you should have researched forward declarations first."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1513197470, "post_id": 47801590, "comment_id": 82564693, "body": "@StavAlfi Regarding the downvotes: Maybe your title is a bit unclear, and you&#39;re not giving a specific code example of what you&#39;re asking about. Of course replacing an <code>#include</code> statement with a plain forward declaration will lead to errors if you try to expand anything more than a reference or pointer with your code seen there."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1513197920, "post_id": 47801590, "comment_id": 82564898, "body": "@Justin: sadly Lakos\u2019s rules for forward declarations cause a lot of grief and incur substantial costs! On a large code base forward declarations outside the control of the provider of the class are bad."}], "answers": [{"comments": [{"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 0, "creation_date": 1513198024, "post_id": 47801789, "comment_id": 82564946, "body": "Can you please explain what is the &quot;provider of a class&quot; ?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 2, "creation_date": 1513198236, "post_id": 47801789, "comment_id": 82565041, "body": "@StavAlfi The person writing the class that you want to use"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 0, "creation_date": 1513198351, "post_id": 47801789, "comment_id": 82565104, "body": "@StavAlfi: the <i>provider of a class</i> is the one who implements the class. That is, forward declarations have to be a part of the implementation of a class, e.g., by having a header with forward declarations of a class or a group of classes."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1513198369, "post_id": 47801789, "comment_id": 82565112, "body": "If only forward declarations worked in a more logical way. In cases where I might want a forward declaration, all I want to say is, &quot;There will be a type of this name here.&quot; Doesn&#39;t matter to me whether that type is by a type alias or something else"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1513198592, "post_id": 47801789, "comment_id": 82565210, "body": "@Justin: there is a reason why declarations work the way they do, though! Notably, the pointer representation may (and on some systems does) depend on the size of the type. In particular a type may be an alias for <code>char</code> or <code>void</code> whose pointers  have a larger representation than pointers to other types on some systems."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1513199026, "post_id": 47801789, "comment_id": 82565416, "body": "@DietmarK&#252;hl Yeah I just read through a standards proposal thread on it. I still think that it would be nice to be able to forward declare regardless of what the type is, but it&#39;s clearly not an easy problem to solve."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1513199164, "post_id": 47801789, "comment_id": 82565480, "body": "Hahaha, that hat is perfect for you Dietmar. Love it."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1513214752, "post_id": 47801789, "comment_id": 82570649, "body": "@DietmarK&#252;hl: can you give an example of such system please?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1513232982, "post_id": 47801789, "comment_id": 82575470, "body": "@geza: you mean a system providing header(s) with declarations? I did: the standard library does this for the streams classes with <code>&lt;iosfwd&gt;</code>. I\u2019m not awsre of another publicly available system."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1513247964, "post_id": 47801789, "comment_id": 82583797, "body": "@DietmarK&#252;hl: no, I meant a system, where the pointer representation depends on the size of the type."}, {"owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 0, "creation_date": 1513271238, "post_id": 47801789, "comment_id": 82599243, "body": "@DietmarK&#252;hl &quot;That is, forward declarations have to be a part of the implementation of a class, e.g., by having a header with forward declarations of a class or a group of classes. &quot; I&#39;m confused, a forward declaration must be in the header file or the CPP file?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1513271697, "post_id": 47801789, "comment_id": 82599491, "body": "@geza: I&#39;m not aware of a contemporary system with varying pointer sizes. If I were to go searching I&#39;d look at embedded systems, especially ones with a segmented memory architecture. I briefly used a system with different pointer sizes (i.e., a PC ~30 years ago)  although these didn&#39;t really differ by type. However, as a result I always considered it plausible enough to not question the possibility. <a href=\"https://stackoverflow.com/a/1539196/1120273\">This answer</a> seems relevant."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "edited": false, "score": 0, "creation_date": 1513272047, "post_id": 47801789, "comment_id": 82599674, "body": "@StavAlfi: In my mind the implementation of a C++ &quot;component&quot; (tightly related classes and their supporting functions; there is no agreed upon concept of a <i>component</i> in the C++ community, though) uses [at least] four files: 1. a header with definitions; 2. a header with [forward] declarations; 3. an implementation (<code>.cpp</code>) file; 4. a file with unit tests for the entities in the component. The first three files are for production use. No user of a component shall declare anything provided by a component but acquire all declarations/definitions via the appropriate header."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 13, "last_activity_date": 1513272774, "last_edit_date": 1513272774, "creation_date": 1513197710, "answer_id": 47801789, "question_id": 47801590, "link": "https://stackoverflow.com/questions/47801590/what-are-the-risks-to-massively-forward-declaration-classes-in-header-files/47801789#47801789", "title": "What are the risks to massively forward declaration classes in header files?", "body": "<p>Forward declarations outside the control of the provider of the class are problematic! I\u2019m working on a code base where a lot of forward declarations are used. While things are initially great the existence of forward declarations become a legacy:</p>\n\n<ul>\n<li>Classes can\u2019t be moved from one namespace to a different one. Without the forward declarations the name in the original namespace could be made an alias (<code>typedef</code> or <code>using alias</code>).</li>\n<li>Classes can\u2019t be turned into specialisations of class templates as is, e.g., useful when generalising a successful class.</li>\n<li>Class templates cannot be forward declared by users as only the first declaration of a class template can provide default arguments.</li>\n</ul>\n\n<p>Assuming the forward declarations are provided via a header under the control of the class provider/implementer (e.g., the implemented providing something akin to <code>&lt;iosfwd&gt;</code>) these problems are not relevant as there is a central place where the declarations can be changed. However, having users decide to declare entities becomes a legacy causing significant cost.</p>\n\n<hr>\n\n<p>The approach to provision of declarations outlined above seems to have caused some confusion. I'll try to clarify. In my mind the unit of implementation is a <em>component</em> (which is based on John Lakos's notation of a component). A component defines one or more closely related classes and/or functions. The implementation of a component consists of multiple files:</p>\n\n<ol>\n<li>A header file <em>declaring</em> all relevant entities which also <em>defines</em> entities which must be defined when using the component, i.e., user-accessible classes, enumerations, etc. are defined.</li>\n<li>A header file <em>only declaring</em> relevant entities provided by the component (multiple related components may share one such header file; <code>&lt;iosfwd&gt;</code> is an example of such a header shared across multiple components).</li>\n<li>An implementation file defining all entities [which are meant to be ODR-used] which are only declared in by the headers above.</li>\n<li>At least one file with a test driver testing all entities defined by the component.</li>\n</ol>\n\n<p>Users of a component which in some contexts only need to know about names in the component would include the declaration-only header. In no case would a user provide a declaration of a name in a component: all declaration of a name in a component are the responsibility of the provider/implementer of the component.</p>\n"}, {"tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": false, "score": 1, "last_activity_date": 1513198582, "last_edit_date": 1513198582, "creation_date": 1513197961, "answer_id": 47801840, "question_id": 47801590, "link": "https://stackoverflow.com/questions/47801590/what-are-the-risks-to-massively-forward-declaration-classes-in-header-files/47801840#47801840", "title": "What are the risks to massively forward declaration classes in header files?", "body": "<blockquote>\n  <p>I can see only the advantage: The header file will have less size.</p>\n</blockquote>\n\n<p>That's not exactly the point.</p>\n\n<p>Let's assume you have a class declaration in a header file like</p>\n\n<pre><code>namespace MyNamespace {\n    class Baz;\n}\n\nclass Foo {\npublic:\n    void bar(const MyNamespace::Baz &amp; x);\n};\n</code></pre>\n\n<p>and the definition in a separate translation unit as</p>\n\n<pre><code>#include \"Baz.hpp\"\n\nvoid Foo::bar(const MyNamespace::Baz &amp; x) {\n    // actually do something with Baz\n}\n</code></pre>\n\n<p>and in contrast having everything included in the header file (and necessarily all dependent sources will be recompiled when <code>Baz.hpp</code> will be changed)</p>\n\n<pre><code>#include \"Baz.hpp\"\n\nclass Foo {\npublic:\n    void bar(const MyNamespace::Baz &amp; x);\n};\n</code></pre>\n\n<p>with the declaration, the 1st version might help to compile the code a little bit faster.</p>\n\n<p>Especially if you have your own headers and class declarations, and if any of these are likely to be changed, you only want to recompile your translation units in the codebase, and not every source file that includes your type dependent header.</p>\n\n<hr>\n\n<p>Note that forward declarations can be only used with references and pointers. Also header inlined code which dereferences to the forwarded type members cannot be used.</p>\n"}], "owner": {"reputation": 10523, "user_id": 806963, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gSzvm.jpg?s=128&g=1", "display_name": "Stav Alfi", "link": "https://stackoverflow.com/users/806963/stav-alfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 2, "accepted_answer_id": 47801789, "answer_count": 2, "score": 9, "last_activity_date": 1513272774, "creation_date": 1513196807, "last_edit_date": 1513197573, "question_id": 47801590, "link": "https://stackoverflow.com/questions/47801590/what-are-the-risks-to-massively-forward-declaration-classes-in-header-files", "title": "What are the risks to massively forward declaration classes in header files?", "body": "<p>For every pointer <code>p1</code> of class <code>class1</code>, are there any risks we should consider by using a forward declaration of <code>class1</code> instead of including <code>class1</code> header file?</p>\n\n<p>I can see only the advantage: The header file will have less size.</p>\n"}, {"tags": ["c++", "dynamic-memory-allocation", "suffix-array"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1513195502, "post_id": 47801279, "comment_id": 82563715, "body": "For an array of size <code>n</code> the highest index you can access is <code>n-1</code>. The lines <code>charArrayA[lengthA]</code> and <code>charArrayB[lengthB]</code> always access one element past the end of the array which is undefined behavior."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1513195599, "post_id": 47801279, "comment_id": 82563757, "body": "<code>suffixArrayA[lengthA]</code> is a variable length array and is not standard c++. It&#39;s supported by some compilers as extensions, but it&#39;s not a portable construct. Notably, gcc supports it by default."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 7, "creation_date": 1513195692, "post_id": 47801279, "comment_id": 82563801, "body": "Since you are already using <code>std::string</code> in <code>charArrayFromTxtFile</code>, I don&#39;t understand why you choose to return a owning raw pointer to a dynamic array. You could simply return another <code>std::string</code> and make everything much simpler and safer."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513197589, "post_id": 47801385, "comment_id": 82564759, "body": "Close: <code>char* charArray = new char[length+1];</code> and then <code>charArray[length] = &#39;\\0&#39;;</code> Otherwise you wipe out the last byte in the file."}, {"owner": {"reputation": 485, "user_id": 7180357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e25f1f32aa29286ab615159b0b294d?s=128&d=identicon&r=PG&f=1", "display_name": "Corey Taylor", "link": "https://stackoverflow.com/users/7180357/corey-taylor"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513197683, "post_id": 47801385, "comment_id": 82564797, "body": "I left it to the user to figure out what valid input they need.  This simply shows the null termination."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513198399, "post_id": 47801385, "comment_id": 82565124, "body": "You will find that, more often than not, that approach just sets you up for a volley of questions that should have been resolved with the first answer."}, {"owner": {"reputation": 485, "user_id": 7180357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e25f1f32aa29286ab615159b0b294d?s=128&d=identicon&r=PG&f=1", "display_name": "Corey Taylor", "link": "https://stackoverflow.com/users/7180357/corey-taylor"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513198441, "post_id": 47801385, "comment_id": 82565136, "body": "The program is in complete and cannot be run.  I wouldn&#39;t answer anything else about it."}, {"owner": {"reputation": 11, "user_id": 8658800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee7db11281e3115921460e2e302b56c5?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8658800/sebastian"}, "edited": false, "score": 0, "creation_date": 1513360544, "post_id": 47801385, "comment_id": 82638788, "body": "I apologise for the late response guys, thanks for your feedback! I tried null terminating my char arrays, and I&#39;m still running into the same EXC_BAD_ACCESS error. What&#39;s interesting is that if I run the program with just one txt file, it works just fine, but as soon as I attempt to run it with two files (that is, charArrayA and charArrayB), it gives me problems. I also tried dynamically allocating the char array outside the function, but it gives me the same error. I hope that clears up things more. (By the way, I am using char arrays because my professor specifically asked for them)"}, {"owner": {"reputation": 485, "user_id": 7180357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e25f1f32aa29286ab615159b0b294d?s=128&d=identicon&r=PG&f=1", "display_name": "Corey Taylor", "link": "https://stackoverflow.com/users/7180357/corey-taylor"}, "edited": false, "score": 0, "creation_date": 1513362245, "post_id": 47801385, "comment_id": 82639534, "body": "Did you remove the bad code?  charArrayA[lengthA] = 0; charArrayB[lengthB] = 0;"}], "tags": [], "owner": {"reputation": 485, "user_id": 7180357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e25f1f32aa29286ab615159b0b294d?s=128&d=identicon&r=PG&f=1", "display_name": "Corey Taylor", "link": "https://stackoverflow.com/users/7180357/corey-taylor"}, "is_accepted": false, "score": 2, "last_activity_date": 1513195920, "creation_date": 1513195920, "answer_id": 47801385, "question_id": 47801279, "link": "https://stackoverflow.com/questions/47801279/why-do-i-get-an-exc-bad-access-error-when-i-try-to-create-a-two-suffix-arrays/47801385#47801385", "title": "Why do I get an EXC_BAD_ACCESS error when I try to create a two suffix arrays?", "body": "<p>Your charArrayfromTxtFile() function is not null terminating the string charArray.</p>\n\n<pre><code>charArray[length - 1] = '\\0';\n</code></pre>\n\n<p>This must be done before you iterate over them with strlen().</p>\n"}], "owner": {"reputation": 11, "user_id": 8658800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee7db11281e3115921460e2e302b56c5?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/8658800/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513195920, "creation_date": 1513195402, "last_edit_date": 1513195523, "question_id": 47801279, "link": "https://stackoverflow.com/questions/47801279/why-do-i-get-an-exc-bad-access-error-when-i-try-to-create-a-two-suffix-arrays", "title": "Why do I get an EXC_BAD_ACCESS error when I try to create a two suffix arrays?", "body": "<p>My task involves finding the longest common substring in two txt files using suffix arrays. I have done the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;algorithm&gt;\n#include &lt;fstream&gt;\n\nint main() {\n    char* charArrayA = charArrayFromTxtFile(\"~/txt_file1.txt\");\n    char* charArrayB = charArrayFromTxtFile(\"~/txt_file2.txt\");\n\n    int lengthA = strlen(charArrayA);\n    int lengthB = strlen(charArrayB);\n\n    char* suffixArrayA[lengthA];\n    char* suffixArrayB[lengthB];\n\n    for(int i = 0; i &lt; lengthA; i++) { suffixArrayA[i] = &amp;charArrayA[i]; }\n    for(int i = 0; i &lt; lengthB; i++) { suffixArrayB[i] = &amp;charArrayB[i]; }\n    charArrayA[lengthA] = 0;\n    charArrayB[lengthB] = 0;\n\n    ...\n\n     return 0;\n}\n</code></pre>\n\n<p>However, when I compiled this portion of code, I get the following error flag at the line containing the SECOND for-loop:</p>\n\n<p>Thread 1: EXC_BAD_ACCESS (code=2, address=0x7ffeef1446e0)</p>\n\n<p>For reference, the function I use to create charArrayA and charArrayB is:</p>\n\n<pre><code>char* charArrayFromTxtFile(std::string fileName) {\n    std::ifstream filename;             // Variable for file\n    int length;                         // Number of characters\n    filename.open(fileName);\n    filename.seekg(0, std::ios::end);   // Goes to the end of the file\n    length = filename.tellg();          // Location of the end (index, length of file)\n    filename.seekg(0, std::ios::beg);   // Go back to the beginning\n    char* charArray = new char[length]; // Allocate a char array of \"length\" file\n    filename.read(charArray, length);   // Write characters from txt file into the char array\n    filename.close();\n\n    return charArray;\n}\n</code></pre>\n\n<p>Anybody know why it would be the case that the first txt file doesn't give me any trouble, but the second one does? I'll appreciate any guidance. Thanks so much guys!</p>\n\n<p>P.S. This is my first stackoverflow question, so hopefully I was clear enough. I'll appreciate any feedback in question form as well! :D</p>\n"}, {"tags": ["c++", "memory-leaks", "directx-11", "direct2d", "dxgi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513197263, "post_id": 47801238, "comment_id": 82564591, "body": "Have you tried calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh404542.aspx\" rel=\"nofollow noreferrer\"><code>m_lpD2DDevice-&gt;ClearResources()</code></a> before calling <code>Release()</code>?  Maybe it won&#39;t make a difference. What is the return value of <code>Release()</code>? Ideally, it should always be 0 in your example."}, {"owner": {"reputation": 4894, "user_id": 3956290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZsQ0z.png?s=128&g=1", "display_name": "Mehrzad Chehraz", "link": "https://stackoverflow.com/users/3956290/mehrzad-chehraz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513197326, "post_id": 47801238, "comment_id": 82564617, "body": "@Remy Thanks for the response. I tried ClearResources and it didn&#39;t change anything. I also checked return value of Release and it is 0 as expected."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513197683, "post_id": 47801238, "comment_id": 82564796, "body": "Short of a D2D driver bug, it sounds like maybe D2D is simply holding on to internal resources, probably caching them for later reuse.  Not unheard of in memory management systems, especially when allocating new resources dynamically may be slow/expensive.  Is there a reason why your tasks can&#39;t reuse devices?"}, {"owner": {"reputation": 4894, "user_id": 3956290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZsQ0z.png?s=128&g=1", "display_name": "Mehrzad Chehraz", "link": "https://stackoverflow.com/users/3956290/mehrzad-chehraz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513198656, "post_id": 47801238, "comment_id": 82565236, "body": "@RemyLebeau I can reuse them but since the entire design is OO, I don&#39;t like to hold a static reference and having  Init, Shutdown pair functions in the program lifetime. However, check my update, looks like problem is somehow solved."}], "owner": {"reputation": 4894, "user_id": 3956290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZsQ0z.png?s=128&g=1", "display_name": "Mehrzad Chehraz", "link": "https://stackoverflow.com/users/3956290/mehrzad-chehraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513199653, "creation_date": 1513195256, "last_edit_date": 1513199653, "question_id": 47801238, "link": "https://stackoverflow.com/questions/47801238/memory-leak-in-creating-direct2d-device", "title": "Memory leak in Creating Direct2D Device", "body": "<p>For testing purposes, I put the code into a for loop which creates and releases one thousand Direct2D devices but it never free up the allocated memory:</p>\n\n<pre><code>for (UINT i = 0; i &lt; 1000; i++) {\n    hr = m_lpD2DFactory-&gt;CreateDevice(lpDxgiDevice, &amp;m_lpD2DDevice);\n    m_lpD2DDevice-&gt;Release();\n}\n</code></pre>\n\n<p>Execution of the code above holds around 500MB of memory. Seems like releasing the device has no effect.</p>\n\n<p>I appreciate any help.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I have found out that if I uncomment rest of my code which leads to a pair of calls to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd371768(v=vs.85).aspx\" rel=\"nofollow noreferrer\">ID2DRenderTarget::BeginDraw</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd371924(v=vs.85).aspx\" rel=\"nofollow noreferrer\">ID2DRenderTarget::EndDraw</a> using the created device, the <code>Release</code> method works as expected. It is still strange and could be problem if somehow my code does not lead to those calls.</p>\n\n<pre><code>hr = m_lpD2DFactory-&gt;CreateDevice(lpDxgiDevice, &amp;m_lpD2DDevice);\n...\nlpRenderTarget-&gt;BeginDraw();    \nlpRenderTarget-&gt;EndDraw();\n...\nm_lpD2DDevice-&gt;Release();\n</code></pre>\n"}, {"tags": ["c++", "class", "variables"], "comments": [{"owner": {"reputation": 924, "user_id": 180343, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4f01e97f6ef1e98427603193245c36e?s=128&d=identicon&r=PG", "display_name": "PythEch", "link": "https://stackoverflow.com/users/180343/pythech"}, "edited": false, "score": 0, "creation_date": 1513195234, "post_id": 47801165, "comment_id": 82563553, "body": "When you call <code>getCars()</code>, a copy of the vector is made. You&#39;re only mutating the copy of it."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1513195300, "post_id": 47801165, "comment_id": 82563599, "body": "Does it make sense for a car to store cars?"}, {"owner": {"reputation": 3, "user_id": 9095710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6cZ4UP9ODc8/AAAAAAAAAAI/AAAAAAAAAQg/okX6BamHEgk/photo.jpg?sz=128", "display_name": "Ant&#243;nio Faneca", "link": "https://stackoverflow.com/users/9095710/ant%c3%b3nio-faneca"}, "edited": false, "score": 0, "creation_date": 1513195424, "post_id": 47801165, "comment_id": 82563663, "body": "So, how could I do what I need?"}, {"owner": {"reputation": 3, "user_id": 9095710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6cZ4UP9ODc8/AAAAAAAAAAI/AAAAAAAAAQg/okX6BamHEgk/photo.jpg?sz=128", "display_name": "Ant&#243;nio Faneca", "link": "https://stackoverflow.com/users/9095710/ant%c3%b3nio-faneca"}, "edited": false, "score": 0, "creation_date": 1513195437, "post_id": 47801165, "comment_id": 82563673, "body": "How am I storing cars in a car?"}, {"owner": {"reputation": 924, "user_id": 180343, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4f01e97f6ef1e98427603193245c36e?s=128&d=identicon&r=PG", "display_name": "PythEch", "link": "https://stackoverflow.com/users/180343/pythech"}, "edited": false, "score": 0, "creation_date": 1513195534, "post_id": 47801165, "comment_id": 82563733, "body": "Modify it as <code>vector&lt;Car&gt; &amp;getCars();</code>. But then having the vector as private makes no sense."}, {"owner": {"reputation": 3, "user_id": 9095710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6cZ4UP9ODc8/AAAAAAAAAAI/AAAAAAAAAQg/okX6BamHEgk/photo.jpg?sz=128", "display_name": "Ant&#243;nio Faneca", "link": "https://stackoverflow.com/users/9095710/ant%c3%b3nio-faneca"}, "edited": false, "score": 0, "creation_date": 1513195775, "post_id": 47801165, "comment_id": 82563853, "body": "Yes, that solves it. And you&#39;re right. Then making it private is useless. Is there a more elegant way of approaching this?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1513196915, "post_id": 47801165, "comment_id": 82564414, "body": "@Ant&#243;nioFaneca approaching what? currently your code looks like you better use just a <code>std::vector&lt;Car&gt;</code> instead of <code>Vehicle</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9095710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6cZ4UP9ODc8/AAAAAAAAAAI/AAAAAAAAAQg/okX6BamHEgk/photo.jpg?sz=128", "display_name": "Ant&#243;nio Faneca", "link": "https://stackoverflow.com/users/9095710/ant%c3%b3nio-faneca"}, "edited": false, "score": 0, "creation_date": 1513195704, "post_id": 47801294, "comment_id": 82563809, "body": "Thank you very much. That single change solved it for me. And it makes a lot of sense. I&#39;m not making that mistake again. thanks!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1513196288, "post_id": 47801294, "comment_id": 82564091, "body": "returning a non-const reference is as good as making the member public"}, {"owner": {"reputation": 190, "user_id": 3943183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/edd96423277d19c443af7ba5c06e9d97?s=128&d=identicon&r=PG&f=1", "display_name": "peti446", "link": "https://stackoverflow.com/users/3943183/peti446"}, "edited": false, "score": 0, "creation_date": 1513196351, "post_id": 47801294, "comment_id": 82564120, "body": "as @PythEh mentioned in a comment, doing this would not make sense having it as a private member data. It would also destroy the Data encapsulation of the class. You could as well create a <code>void editCar(int index, int value);</code> function in your class that will directly edit the vector without exposing it to the public, thus keeping it private and encapsulated in the class."}], "tags": [], "owner": {"reputation": 190, "user_id": 3943183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/edd96423277d19c443af7ba5c06e9d97?s=128&d=identicon&r=PG&f=1", "display_name": "peti446", "link": "https://stackoverflow.com/users/3943183/peti446"}, "is_accepted": true, "score": 1, "last_activity_date": 1513195455, "creation_date": 1513195455, "answer_id": 47801294, "question_id": 47801165, "link": "https://stackoverflow.com/questions/47801165/change-value-of-object-variable-through-a-vector/47801294#47801294", "title": "Change value of Object Variable through a vector", "body": "<p>Currently, you are returning a new instance of a vector when you call <code>getCars()</code> function from your Vehicle, this means that all changes to the vector will not be applied to the original vector in the class.</p>\n\n<p>To fix this you could just return a reference  of the vector(changing the <code>vector&lt;Car&gt; getCars();</code> to <code>std::vector&lt;Car&gt;&amp; getCars()</code>).</p>\n\n<p>You could also make a local copy of the vector and then setting the vector to the class.</p>\n"}], "owner": {"reputation": 3, "user_id": 9095710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6cZ4UP9ODc8/AAAAAAAAAAI/AAAAAAAAAQg/okX6BamHEgk/photo.jpg?sz=128", "display_name": "Ant&#243;nio Faneca", "link": "https://stackoverflow.com/users/9095710/ant%c3%b3nio-faneca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "accepted_answer_id": 47801294, "answer_count": 1, "score": 0, "last_activity_date": 1513195455, "creation_date": 1513194959, "question_id": 47801165, "link": "https://stackoverflow.com/questions/47801165/change-value-of-object-variable-through-a-vector", "title": "Change value of Object Variable through a vector", "body": "<p>I'm developing a simulation game in cpp using Visual Studio 2017 for School and in the development phase I got stuck in this situation.\nSo, what I did was create a new project to try and recreate that issue in the simplest form, so that it would be easier to debug.</p>\n\n<p>Below is the main file and all the associated source codes:</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"header.h\"\n#include \"Vehicle.h\"\n#include \"Car.h\"\n\nint main() {\n\n    Vehicle v;\n\n    v.addCar(1);\n    v.addCar(2);\n    v.addCar(3);\n\n\n    cout &lt;&lt; v.getCars()[1].id &lt;&lt; endl;\n    v.getCars()[1].id = 99;\n    cout &lt;&lt; v.getCars()[1].id &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>header.h</p>\n\n<pre><code>#ifndef CLUSTE2R_H\n#define CLUSTE2R_H\n#pragma once\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;  \n#endif\n</code></pre>\n\n<p>Car.h</p>\n\n<pre><code>#ifndef CLUSTE1R_H\n#define CLUSTE1R_H\n#pragma once\n#include \"Vehicle.h\"\n\nusing namespace std;\n\n\nclass Car : public Vehicle\n{\npublic:\n    int id;\n    Car(int id);\n    ~Car();\n};\n\n#endif\n</code></pre>\n\n<p>Car.cpp</p>\n\n<pre><code>#include \"Car.h\"\n\nCar::Car(int id)\n{\n    this-&gt;id = id;\n}\n\n\nCar::~Car()\n{\n}\n</code></pre>\n\n<p>Vehicle.h</p>\n\n<pre><code>#ifndef CLUSTER_H\n#define CLUSTER_H\n#pragma once\n\n#include &lt;vector&gt;\n//#include \"Car.h\"\n\nclass Car;\nusing namespace std;\n\n\nclass Vehicle\n{\nprivate:\n    vector&lt;Car&gt; cars;\n\npublic:\n    Vehicle();\n    ~Vehicle();\n\n    vector&lt;Car&gt; getCars();\n    void addCar(int id);\n\n};\n\n#endif\n</code></pre>\n\n<p>Vehicle.cpp</p>\n\n<pre><code>#include \"Vehicle.h\"\n#include \"Car.h\"\n#include &lt;vector&gt;\n\nusing namespace std;\n//class Car;\nVehicle::Vehicle()\n{\n}\n\n\nVehicle::~Vehicle()\n{\n}\n\n\nvector&lt;Car&gt; Vehicle::getCars()\n{\n    return this-&gt;cars;\n}\n\nvoid Vehicle::addCar(int id)\n{\n    Car c(id);\n\n    cars.reserve(cars.size() + 1);\n    cars.push_back(c);\n}\n</code></pre>\n\n<p>So, what I'm trying to do is to get the following output:</p>\n\n<blockquote>\n  <p>2 \\n 99</p>\n</blockquote>\n\n<p>This is what I'm getting:</p>\n\n<blockquote>\n  <p>2 \\n 2</p>\n</blockquote>\n\n<p>What am I doing wrong? I believe the issue is associated with the main.cpp file. But I'm not quite sure how to achieve what I want in any other way...</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 924, "user_id": 180343, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4f01e97f6ef1e98427603193245c36e?s=128&d=identicon&r=PG", "display_name": "PythEch", "link": "https://stackoverflow.com/users/180343/pythech"}, "edited": false, "score": 1, "creation_date": 1513194970, "post_id": 47801140, "comment_id": 82563396, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/197675/how-does-delete-know-the-size-of-the-operand-array\">How does delete&#91;&#93; &quot;know&quot; the size of the operand array?</a>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1513194981, "post_id": 47801140, "comment_id": 82563405, "body": "Where do you initialize foo and bar? The second example you show should not work, as foo was never declared.  This does not compile."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1513194990, "post_id": 47801140, "comment_id": 82563410, "body": "Although this is a rather popular demand, the answer is, unfortunately, &quot;no&quot;."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513194998, "post_id": 47801140, "comment_id": 82563418, "body": "You&#39;re asking two question. The one in your question&#39;s title and in the first sentence of the question. Which question do you want answered here?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1513195002, "post_id": 47801140, "comment_id": 82563421, "body": "If you read the information about the tags, you would see that <code>dynamic-arrays</code> is specifically about array like constructs that can change size dynamically at runtime (and not dynamically allocated arrays)."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1513195567, "post_id": 47801140, "comment_id": 82563746, "body": "<code>&amp;foo[0]</code>, <code>foo</code> and <code>&amp;0[foo]</code> are equivalent to <code>foo + 0</code>. In this case you are releasing memory using pointer to the front of memory block. With <code>delete[] &amp;bar[1];</code> you are trying to release memory by pointer which is set to middle of allocated memory block. Standard library threats this as a fatal error of heap corruption."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1513195635, "post_id": 47801140, "comment_id": 82563774, "body": "Use <code>std::vector</code>."}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1513508091, "post_id": 47801140, "comment_id": 82672810, "body": "@chris added declaration of foo and bar"}], "answers": [{"comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1513196449, "post_id": 47801324, "comment_id": 82564176, "body": "<code>MyClass *pt1 = new MyClass[3]; \tMyClass *pt2 = &amp;pt1[0]; \tstd::cout &lt;&lt; std::boolalpha &lt;&lt; (pt1 == pt2);</code> Techically <code>pt2</code> was not obtained from the corresponding standard library allocation function, yet it is the same pointer as <code>pt1</code> that was obtained from the corresponding standard library allocation function. It this still UB?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1513197404, "post_id": 47801324, "comment_id": 82564661, "body": "@KillzoneKid -- by that analysis, <code>pt1</code> was not obtained from the standard library allocation function. It&#39;s value is a <b>copy</b> of the pointer that the allocation function returned. So is <code>pt2</code>. Choose your poison: either nothing works because of a hyper-technical (and unwarranted) reading of the requirement, or both of them work."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1513197406, "post_id": 47801324, "comment_id": 82564662, "body": "@KillzoneKid: What is important is that the memory address you pass to <code>delete</code> must be the same address that <code>new</code> returned.  How you determine the address before passing it to <code>delete</code> does not matter.  <code>pt1</code>, <code>&amp;pt1[0]</code>, <code>pt1+0</code>, <code>pt1+1-1</code>, they all point to the same address."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513198943, "post_id": 47801324, "comment_id": 82565378, "body": "@RemyLebeau This is what I thought and what makes sense. Just wanted to make sure cppreference formulation is not final."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1513195599, "creation_date": 1513195599, "answer_id": 47801324, "question_id": 47801140, "link": "https://stackoverflow.com/questions/47801140/can-i-query-if-a-pointer-is-the-first-in-a-dynamically-allocated-array/47801324#47801324", "title": "can I query if a pointer is the first in a dynamically allocated array?", "body": "<p>Your approach - though being quite creative :-) - does not work. The reason is that you cannot \"try out\" <code>delete</code>; you rather have to make sure that the pointer  passed to <code>delete</code> is one that has previously been obtained by <code>new</code>. Otherwise, the behaviour is undefined (cf, for example, <a href=\"http://en.cppreference.com/w/cpp/memory/new/operator_delete\" rel=\"nofollow noreferrer\">this definition of delete</a> at cppreference.com): </p>\n\n<blockquote>\n  <p>If the pointer passed to the standard library deallocation function\n  was not obtained from the corresponding standard library allocation\n  function, the behavior is undefined.</p>\n</blockquote>\n\n<p>So any try that has not been \"the first pointer\" (i.e. the beginning of the array)  will yield undefined behaviour (a crash, something obscure, even nothing) and you must not rely on such a \"behaviour\".</p>\n"}], "owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47801324, "answer_count": 1, "score": 0, "last_activity_date": 1513507981, "creation_date": 1513194862, "last_edit_date": 1513507981, "question_id": 47801140, "link": "https://stackoverflow.com/questions/47801140/can-i-query-if-a-pointer-is-the-first-in-a-dynamically-allocated-array", "title": "can I query if a pointer is the first in a dynamically allocated array?", "body": "<p>If delete[] \"knows\" the size of any dynamically allocated array, shouldn't I be able to query its size somehow?</p>\n\n<p>This is from cplusplus.com mixed with some of my own code to show what I mean:</p>\n\n<pre><code>// operator delete[] example\n#include &lt;iostream&gt;     // std::cout\n\nstruct MyClass {\n  MyClass() {std::cout &lt;&lt;\"MyClass constructed\\n\";}\n  ~MyClass() {std::cout &lt;&lt;\"MyClass destroyed\\n\";}\n};\n\nint main () {\n  MyClass * pt;\n  MyClass * foo;\n  MyClass * bar;\n\n  pt = new MyClass[3];\n  delete[] pt;      \n  foo = new MyClass[12];\n  delete[] &amp;foo[0]; // this works      \n  bar = new MyClass[33];\n  delete[] &amp;bar[1]; // this does not work\n\n  return 0;\n}\n</code></pre>\n\n<p>Motivation: If the first element of the array is special than any for-all would need only the last pointer and decrement until the first is detected... (I guess it could be \"found\" by looking for delete[] exception/error)</p>\n"}, {"tags": ["c++", "reflection", "metaprogramming", "constexpr"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1513195241, "post_id": 47801134, "comment_id": 82563558, "body": "Note that the reason yours doesn&#39;t work is that you&#39;re simply checking if the function is invocable - nowhere do you actually require that its invocable <i>as a constant expression</i>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1513195322, "post_id": 47801134, "comment_id": 82563614, "body": "This isn&#39;t currently possible in standard C++. I think there&#39;s a proposal floating around for a <code>constexpr</code> operator which asks &quot;is this expression <code>constexpr</code>?&quot; For what you can use right now, with clang and g++, you may be able to use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\"><code>__builtin_constant_p()</code></a> to do what you want, but that also takes compiler optimizations into account."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1513195354, "post_id": 47801134, "comment_id": 82563632, "body": "Actually this code does not check whether function is invocable at all since it is only used inside of <code>decltype</code> which does not evaluate anything."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1513195933, "post_id": 47801134, "comment_id": 82563924, "body": "@VTT Yes, it does. The check verifies that the expression itself is valid. For instance, try <code>is_constexpr_function&lt;int&gt;</code>."}, {"owner": {"reputation": 10644, "user_id": 722294, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/93c0ad362f097b52bf81c30d116e7319?s=128&d=identicon&r=PG", "display_name": "Jared Hoberock", "link": "https://stackoverflow.com/users/722294/jared-hoberock"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1513201556, "post_id": 47801134, "comment_id": 82566515, "body": "Thanks for your replies. I&#39;ve updated the original post with a corrected implementation that seems to do what I want. However, @Justin&#39;s comment indicates that this isn&#39;t currently possible in C++. Is there some case which my implementation will not handle correctly?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1513201654, "post_id": 47801134, "comment_id": 82566562, "body": "@JaredHoberock It turns out I was wrong. There&#39;s a way to do it by &quot;abusing&quot; the <code>noexcept</code> operator, as shown in <a href=\"https://stackoverflow.com/a/46920091/1896169\">the accepted answer of the marked duplicate</a>. The proposed <code>constexpr</code> operator would be able to do a bit more, but this may be all you desire"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1513213507, "post_id": 47801134, "comment_id": 82570358, "body": "@Barry - Sorry: are you sure this is a duplicate of the question you pointed? Is seems to me that this question (simplifying) is &quot;how detect if a function is callable as <code>constexpr</code>?&quot; where the other is (ever simplifyng) &quot;how detect when a <code>constexpr</code> function is executed compile time and when is executed runtime?&quot;. Maybe I&#39;m wrong (I&#39;ve big troubles with English) but It seems to me that they are different questions."}], "owner": {"reputation": 10644, "user_id": 722294, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/93c0ad362f097b52bf81c30d116e7319?s=128&d=identicon&r=PG", "display_name": "Jared Hoberock", "link": "https://stackoverflow.com/users/722294/jared-hoberock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 1, "closed_date": 1513195214, "answer_count": 0, "score": 2, "last_activity_date": 1513195637, "creation_date": 1513194834, "last_edit_date": 1513195637, "question_id": 47801134, "link": "https://stackoverflow.com/questions/47801134/how-to-check-at-compile-time-that-a-function-may-be-called-at-compile-time", "closed_reason": "Duplicate", "title": "How to check at compile time that a function may be called at compile time?", "body": "<p>I would like to be able to introspect whether or not a function or function object may be called at compile time; that is, whether or not it is <code>constexpr</code>:</p>\n\n<pre><code>template&lt;class Function&gt;\nstruct is_constexpr;\n</code></pre>\n\n<p>This is my first attempt, which does seem to work, but may not generalize:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;class Function&gt;\nstruct is_constexpr\n{\n  template&lt;class T,\n           int = (T()(), 0)&gt;\n  static std::true_type test(const T&amp; f);\n\n  static std::false_type test(...);\n\n  static const bool value = decltype(test(Function()))::value;\n};\n\nstruct is_constexpr_function\n{\n  constexpr void operator()() const\n  {\n  }\n};\n\nstruct is_not_constexpr_function\n{\n  void operator()() const\n  {\n  }\n};\n\nint main()\n{\n  std::cout &lt;&lt; \"is_constexpr_function is constexpr function object: \" &lt;&lt; is_constexpr&lt;is_constexpr_function&gt;::value &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"is_not_constexpr_function is constexpr function object: \" &lt;&lt; is_constexpr&lt;is_not_constexpr_function&gt;::value &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>$ clang -std=c++14 is_constexpr.cpp -lstdc++\n$ ./a.out \nis_constexpr_function is constexpr function object: 1\nis_not_constexpr_function is constexpr function object: 0\n</code></pre>\n\n<p>Is this possible to do correctly in C++? If so, what might a correct implementation of <code>is_constexpr</code> look like? If not, what approximations might be possible?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1513193922, "post_id": 47800885, "comment_id": 82562896, "body": "Can you be more specific, what does &quot;crashing&quot; mean?  What is your output?"}, {"owner": {"reputation": 6850, "user_id": 650884, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7475fa31c3962a357047617df181c680?s=128&d=identicon&r=PG", "display_name": "Pavel", "link": "https://stackoverflow.com/users/650884/pavel"}, "edited": false, "score": 0, "creation_date": 1513193955, "post_id": 47800885, "comment_id": 82562911, "body": "Have you tried compiling it with <code>-g</code> (GCC) and run through a debugger? E.g. <code>gdb .&#47;a.out</code>. It will show you which line causes the crash."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1513194030, "post_id": 47800885, "comment_id": 82562949, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, although with a clear description of what the problem is."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1513194135, "post_id": 47800885, "comment_id": 82563002, "body": "In the second <code>for</code> loop, you are using <code>or(int i=0 , j=1 ; j&lt;39 ; j++)</code>. When the value of <code>j</code> is greater than 27, you end up accessing <code>mat</code> using an out of bounds index."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 2, "creation_date": 1513194157, "post_id": 47800885, "comment_id": 82563017, "body": "One of your for loops has j &lt; 39, but your mat only has a size of 27 so it is out of bounds."}, {"owner": {"reputation": 3, "user_id": 9095660, "user_type": "registered", "profile_image": "https://graph.facebook.com/1966722496687895/picture?type=large", "display_name": "Fahad Sultan", "link": "https://stackoverflow.com/users/9095660/fahad-sultan"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1513233388, "post_id": 47800885, "comment_id": 82575668, "body": "Thanks @RSahu !"}, {"owner": {"reputation": 3, "user_id": 9095660, "user_type": "registered", "profile_image": "https://graph.facebook.com/1966722496687895/picture?type=large", "display_name": "Fahad Sultan", "link": "https://stackoverflow.com/users/9095660/fahad-sultan"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1513233430, "post_id": 47800885, "comment_id": 82575688, "body": "Thanks @AnonMail"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9095660, "user_type": "registered", "profile_image": "https://graph.facebook.com/1966722496687895/picture?type=large", "display_name": "Fahad Sultan", "link": "https://stackoverflow.com/users/9095660/fahad-sultan"}, "edited": false, "score": 0, "creation_date": 1513233456, "post_id": 47800989, "comment_id": 82575700, "body": "Really appreciate the help!"}], "tags": [], "owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "is_accepted": true, "score": 2, "last_activity_date": 1513194231, "creation_date": 1513194231, "answer_id": 47800989, "question_id": 47800885, "link": "https://stackoverflow.com/questions/47800885/i-want-to-initilize-specific-cells-of-a-2d-array-to-1-but-my-program-keeps-cras/47800989#47800989", "title": "I want to initilize specific cells of a 2D array to 1. But my program keeps crashing", "body": "<p>your matrix is defined as <code>int mat[27][27]</code> but in your loop j can be > 26 (for example your loop goes to <code>j &lt; 39</code>) which is out of bounds.</p>\n"}, {"tags": [], "owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "is_accepted": false, "score": 0, "last_activity_date": 1513195537, "creation_date": 1513195537, "answer_id": 47801316, "question_id": 47800885, "link": "https://stackoverflow.com/questions/47800885/i-want-to-initilize-specific-cells-of-a-2d-array-to-1-but-my-program-keeps-cras/47801316#47801316", "title": "I want to initilize specific cells of a 2D array to 1. But my program keeps crashing", "body": "<p>As mentioned by <a href=\"https://stackoverflow.com/users/6312818/eyal-cinamon\">Eyal Cinamon</a> and others, your loop second loop is going out of bounds and you're segfaulting.</p>\n\n<p>A common way to avoid this error is to put your array bounds in a constant</p>\n\n<pre><code>const int MAT_MAX = 27;\nint mat[MAT_MAX][MAT_MAX];\n\nfor (int i = 0, j = 1; j &lt; MAT_MAX; j++)\n{\n    ...\n}\n</code></pre>\n\n<p>also, as a nitpick, it's generally better to make a habit of using the prefix increment (<code>++j</code>) for incrementing your iterator. A smart compiler can probably optimise around it, but it's a good habit.</p>\n"}], "owner": {"reputation": 3, "user_id": 9095660, "user_type": "registered", "profile_image": "https://graph.facebook.com/1966722496687895/picture?type=large", "display_name": "Fahad Sultan", "link": "https://stackoverflow.com/users/9095660/fahad-sultan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 47800989, "answer_count": 2, "score": -3, "last_activity_date": 1513195537, "creation_date": 1513193808, "last_edit_date": 1513193849, "question_id": 47800885, "link": "https://stackoverflow.com/questions/47800885/i-want-to-initilize-specific-cells-of-a-2d-array-to-1-but-my-program-keeps-cras", "title": "I want to initilize specific cells of a 2D array to 1. But my program keeps crashing", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int arr[40] = {1,2,0,3,4,0,5,6,0,7,8,0,9,10,0,11,12,0,13,14,0,15,16,0,17,18,0,19,20,0,21,22,0,23,24,0,25,26,0,27};\n    int i;\n    int mat[27][27];\n\n    //initilizing all cells of the matrix to zero\n    for(int a=0 ; a&lt;27 ; a++)\n    {\n        for(int b=0 ; b&lt;27 ; b++)\n        {\n            mat[a][b]=0;\n        }\n    }\n\n    //initilizing specific matix cells to 1\n    for(int i=0 , j=1 ; j&lt;39 ; j++)\n    {\n      if((j+1)%3 == 0)\n      {\n        j=j+2;\n        i=i+3;\n        mat[i][j]=1;\n        /*cout&lt;&lt;arr[i]&lt;&lt;\" \";  //Print array element\n        cout&lt;&lt;arr[j]&lt;&lt;\" \";*/\n        continue;\n      }\n      mat[i][j]=1;\n      /*cout&lt;&lt;arr[i]&lt;&lt;\" \";  //Print array element\n      cout&lt;&lt;arr[j]&lt;&lt;\" \";*/\n    } \n\n    //displaying matrix\n    for(int c=0 ; c&lt;27 ; c++)\n    {\n        for(int d=0 ; d&lt;27 ; d++)\n        {\n            cout&lt;&lt;mat[c][d]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n    }\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 0, "creation_date": 1513194614, "post_id": 47800872, "comment_id": 82563260, "body": "<code>A &lt;&lt; 1, 0, ...</code> is just like <code>A &lt;&lt; 1</code>, the numbers after the first comma are not part of the first expression."}, {"owner": {"reputation": 1193, "user_id": 1559897, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78f6209c8dd5c860cae279fe69793a01?s=128&d=identicon&r=PG", "display_name": "user1559897", "link": "https://stackoverflow.com/users/1559897/user1559897"}, "reply_to_user": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 0, "creation_date": 1513194921, "post_id": 47800872, "comment_id": 82563374, "body": "I printed out A, it is the identity matrix.  @NiklasR"}, {"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 0, "creation_date": 1513195202, "post_id": 47800872, "comment_id": 82563532, "body": "My bad, seems like it works as you intended. Thought the C++ syntax would result in a different behaviour here."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 1, "creation_date": 1513199105, "post_id": 47800872, "comment_id": 82565454, "body": "@NiklasR Eigen overloads the comma operator so that it can be used to assign values to a matrix."}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 1, "creation_date": 1513203367, "post_id": 47800872, "comment_id": 82567237, "body": "Works for me, but you need to replace <code>auto</code> by <code>VectorXd</code> otherwise <code>x</code> will be an abstract expression storing a dead reference to the QR factorization. See <a href=\"https://eigen.tuxfamily.org/dox/TopicPitfalls.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/TopicPitfalls.html</a>"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "reply_to_user": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1513205999, "post_id": 47800872, "comment_id": 82568205, "body": "@ggael , you should make it an answer because, sure enough for me, that makes it work. <code>arr2 x = A....</code> Even though it compiles fine with <code>auto</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1193, "user_id": 1559897, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78f6209c8dd5c860cae279fe69793a01?s=128&d=identicon&r=PG", "display_name": "user1559897", "link": "https://stackoverflow.com/users/1559897/user1559897"}, "edited": false, "score": 0, "creation_date": 1513563960, "post_id": 47840292, "comment_id": 82687622, "body": "I read the doc, but still cannot make sense why auto would cause errors. Can you elaborate?"}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "reply_to_user": {"reputation": 1193, "user_id": 1559897, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78f6209c8dd5c860cae279fe69793a01?s=128&d=identicon&r=PG", "display_name": "user1559897", "link": "https://stackoverflow.com/users/1559897/user1559897"}, "edited": false, "score": 0, "creation_date": 1513635408, "post_id": 47840292, "comment_id": 82720238, "body": "I edited my answer to fully explain what&#39;s going one. Hope its clear now. If not, you might need to read about temporary lifetimes in C/C++."}, {"owner": {"reputation": 1193, "user_id": 1559897, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78f6209c8dd5c860cae279fe69793a01?s=128&d=identicon&r=PG", "display_name": "user1559897", "link": "https://stackoverflow.com/users/1559897/user1559897"}, "edited": false, "score": 0, "creation_date": 1513652186, "post_id": 47840292, "comment_id": 82724802, "body": "I understand the dead reference problem you refer to. The part i am confused about is why auto causes the dead reference, but VectorXd avoids it. Isnt auto resolved at compile time to be VectorXd?"}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "reply_to_user": {"reputation": 1193, "user_id": 1559897, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78f6209c8dd5c860cae279fe69793a01?s=128&d=identicon&r=PG", "display_name": "user1559897", "link": "https://stackoverflow.com/users/1559897/user1559897"}, "edited": false, "score": 0, "creation_date": 1513701333, "post_id": 47840292, "comment_id": 82749054, "body": "No, that&#39;s the point, with <code>auto x</code> the type of <code>x</code> is a <code>Solve&lt;...&gt;</code> abstract expression storing the references...."}], "tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 3, "last_activity_date": 1513635318, "last_edit_date": 1513635318, "creation_date": 1513374439, "answer_id": 47840292, "question_id": 47800872, "link": "https://stackoverflow.com/questions/47800872/what-is-the-correct-way-to-solve-a-least-square-equation-with-eigen/47840292#47840292", "title": "What is the correct way to solve a least square equation with eigen?", "body": "<p>As said in my comment, the problem is that <code>x</code> is an abstract expression storing a reference to the QR object, but right after the last line it will reference a dead object and then anything can happen!</p>\n\n<p>More precisely, <code>A.matrix().colPivHouseholderQr()</code> creates a temporary object, let's call it <code>tmp_qr</code>. Then <code>tmp_qr.solve(B)</code> creates another object which becomes <code>x</code> of type <code>Solve&lt;...&gt;</code>. This object essentially stores two references: one to <code>tmp_qr</code>, and one to <code>B</code>. Right after this line, the temporary object <code>tmp_qr</code> is deleted, so the <code>Solve&lt;...&gt;</code> object <code>x</code> has one dead reference. It is like a pointer referencing a deleted buffer. Finally, if you <code>x</code> later, like:</p>\n\n<pre><code>VectorXd y = x;\n</code></pre>\n\n<p><code>operator=</code> will trigger the solve operation using the QR decomposition referenced by <code>x</code> and the right-hand-side <code>B</code> referenced by <code>x</code> too, but, wait... the QR decomposition object has been deleted, so at best you'll get a segfault.</p>\n\n<p>So the solution is to write:</p>\n\n<pre><code>VectorXd x = A.matrix().colPivHouseholderQr().solve(B.matrix());\n</code></pre>\n\n<p>See Eigen's <a href=\"https://eigen.tuxfamily.org/dox/TopicPitfalls.html\" rel=\"nofollow noreferrer\">doc</a> for more details on how <code>auto</code> is dangerous if you don't know what you get.</p>\n"}], "owner": {"reputation": 1193, "user_id": 1559897, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78f6209c8dd5c860cae279fe69793a01?s=128&d=identicon&r=PG", "display_name": "user1559897", "link": "https://stackoverflow.com/users/1559897/user1559897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 1, "accepted_answer_id": 47840292, "answer_count": 1, "score": 1, "last_activity_date": 1513635318, "creation_date": 1513193748, "question_id": 47800872, "link": "https://stackoverflow.com/questions/47800872/what-is-the-correct-way-to-solve-a-least-square-equation-with-eigen", "title": "What is the correct way to solve a least square equation with eigen?", "body": "<p>I have the following simple example to perform a least square, but got the following assertion error. </p>\n\n<blockquote>\n  <p>Assertion failed: (i>=0) &amp;&amp; ( ((BlockRows==1) &amp;&amp;\n  (BlockCols==XprType::ColsAtCompileTime) &amp;&amp; i\n</blockquote>\n\n<p>What is the correct way to do this?</p>\n\n<pre><code>typedef Eigen::ArrayXd arr;\ntypedef Eigen::ArrayXXd arr2;\n\narr2 A(3, 3);\narr B(3);\nA &lt;&lt; 1, 0, 0, 0, 1, 0, 0, 0, 1;\nB &lt;&lt; 1, 2, 3;\nauto x = A.matrix().colPivHouseholderQr().solve(B.matrix());\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "dll", "static-libraries"], "comments": [{"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1513193754, "post_id": 47800810, "comment_id": 82562814, "body": "I actually don&#39;t understand the background... Couldn&#39;t you just split your code, the part should be a static lib in one project, and the part for the dynamic lib in another? Plus data being unique at runtime can be achived with dll&#39;s!!!"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1513193996, "post_id": 47800810, "comment_id": 82562927, "body": "@user1810087 you described lead #1 :) I&#39;ll try to clarify that last paragraph."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1513194356, "post_id": 47800911, "comment_id": 82563127, "body": "Hmm, <code>#pragma comment</code>... That could also be a nicer way of sticking the import lib and the static lib together without resorting to <code>lib.exe</code> if I put it inside the static lib."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1513197122, "post_id": 47800911, "comment_id": 82564523, "body": "@Quentin:  Why don&#39;t you make a lib, and make a dll from the lib?  They will obviously not be both referenced at the same time from projects that use them.  If that is not what you had in mind, you are engaging yourself into a design dead-end."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1513197710, "post_id": 47800911, "comment_id": 82564807, "body": "@Micha&#235;lRoy because they should have one half each of the data, not the same contents."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1513198528, "post_id": 47800911, "comment_id": 82565182, "body": "And a dll&#39;s data belings to its calling process.  While several instances of a dll (in different processes) may share the same physical address for its code segment, that is not at all the case for its data.  Each process has its own data, even if it belongs to a dll."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1513198978, "post_id": 47800911, "comment_id": 82565392, "body": "Maybe what you really want is not a dll, but a global data provider, which is a service."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1513200520, "post_id": 47800911, "comment_id": 82566082, "body": "@Micha&#235;lRoy Oh, I see what you mean now. I&#39;m in the scope of a single process, which contains the <code>.exe</code>, several <code>.dll</code>s and the hybrid thingy."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1513193936, "creation_date": 1513193936, "answer_id": 47800911, "question_id": 47800810, "link": "https://stackoverflow.com/questions/47800810/producing-a-hybrid-static-library-with-msvc/47800911#47800911", "title": "Producing a hybrid static library with MSVC", "body": "<p>To the best of my knowledge you cannot create a single .lib for this, however you can use msvc's #pragma comment(lib, ) to achieve much the same thing, you simply have more than one #pragma comment(lib, ) one for the dynamic .lib and one for the static.</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 0, "last_activity_date": 1519221139, "last_edit_date": 1519221139, "creation_date": 1513860077, "answer_id": 47925236, "question_id": 47800810, "link": "https://stackoverflow.com/questions/47800810/producing-a-hybrid-static-library-with-msvc/47925236#47925236", "title": "Producing a hybrid static library with MSVC", "body": "\n\n<p>I have finally taken the first route I listed in the question: create two projects, a static library and a dynamic library, and merge their outputs. This ended up being easier than expected: I just had to register the DLL's import library as a dependency for the static library's \"Librarian\" build step, and setup a project reference to have the correct build order.</p>\n\n<p><code>FooDll.vcxproj</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Project DefaultTargets=\"Build\" ToolsVersion=\"12.0\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;\n    &lt;!-- snip snip snip --&gt;\n    &lt;PropertyGroup&gt;\n        &lt;TargetName&gt;Foo&lt;/TargetName&gt;\n    &lt;/PropertyGroup&gt;\n    &lt;ItemDefinitionGroup&gt;\n        &lt;Link&gt;\n            &lt;ImportLibrary&gt;$(OutDir)FooDll.lib&lt;/ImportLibrary&gt;\n        &lt;/Link&gt;\n    &lt;/ItemDefinitionGroup&gt;\n    &lt;!-- snip snip --&gt;\n&lt;/Project&gt;\n</code></pre>\n\n<p><code>Foo.vcxproj</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Project DefaultTargets=\"Build\" ToolsVersion=\"12.0\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;\n    &lt;!-- snip snip snip --&gt;\n    &lt;ItemDefinitionGroup&gt;\n        &lt;Lib&gt;\n            &lt;AdditionalDependencies&gt;$(OutDir)FooDll.lib;$(AdditionalDependencies)&lt;/AdditionalDependencies&gt;\n        &lt;/Lib&gt;\n    &lt;/ItemDefinitionGroup&gt;\n    &lt;!-- snip snip --&gt;\n    &lt;ItemGroup&gt;\n        &lt;ProjectReference Include=\"..\\FooDll\\FooDll.vcxproj\" /&gt;\n    &lt;/ItemGroup&gt;\n    &lt;!-- snip --&gt;\n&lt;/Project&gt;\n</code></pre>\n\n<p>The end result is a <code>Foo.dll</code>/<code>Foo.lib</code> pair, the latter being both a static library on its own and an import library for <code>Foo.dll</code>.</p>\n\n<p>I still have to straddle two projects, but this is simple enough that I'm happy with it.</p>\n"}], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 47925236, "answer_count": 2, "score": 0, "last_activity_date": 1519221139, "creation_date": 1513193436, "last_edit_date": 1513200460, "question_id": 47800810, "link": "https://stackoverflow.com/questions/47800810/producing-a-hybrid-static-library-with-msvc", "title": "Producing a hybrid static library with MSVC", "body": "<p>It is my understanding that Visual Studio library projects use two separate processes after compiling, depending on the \"General/Configuration type\" setting:</p>\n\n<ul>\n<li><p>If \"static library\" is selected, all of the object files are bundled together into the final <code>.lib</code> file, a <em>static library</em>.</p></li>\n<li><p>If \"dynamic library\" is selected, all of the object files are linked together, along with dependencies, and bundled into the final <code>.dll</code> file, a <em>dynamic library</em>. Meanwhile, all of the <code>__declspec(dllexport)</code> symbols are gathered, and used to generate a <code>.lib</code> file, the <em>import library</em>.</p></li>\n</ul>\n\n<p>I would like to create a <code>foo.lib</code>/<code>foo.dll</code> pair, where <code>foo.lib</code> is both an import library for <code>foo.dll</code> <em>and</em> a static library on its own. I have considered the following leads:</p>\n\n<ul>\n<li><p>Create two separate projects, <code>FooLib</code> and <code>FooDll</code>, and <a href=\"https://stackoverflow.com/questions/13492365/how-to-merge-two-windows-vc-static-library-into-one\">use <code>lib.exe</code> in a post-build step to merge both <code>.lib</code> files</a>. This sounds like the easiest option but requires splitting in half what should otherwise be a cohesive module.</p></li>\n<li><p>Create a single DLL project, let the default build process create <code>foo.dll</code> and its import library. Then add custom build steps to manually gather the object files and bundle them into the import library with lib. This sounds messy, and I'm not sure what the duplicates will do.</p></li>\n<li><p>I've tried messing around with <code>.def</code> files, but even after <code>dumpbin</code>ing the resulting lib files I'm a bit perplexed by its behaviour. Also, it needs an explicit list of mangled symbols, which is impractical.</p></li>\n</ul>\n\n<p>Is there a simpler way to achieve that hybrid <code>.lib</code>/<code>.dll</code> combo? Otherwise, which lead should I rather follow?</p>\n\n<hr>\n\n<p><strong>Background</strong></p>\n\n<p>This module will be used in several <code>.dll</code>s and one <code>.exe</code> linked together. I need to have a single instance of half of its data in the resulting process at runtime (which is achieved by the <code>.dll</code>, since it will be only loaded once), while the other half is duplicated into each <code>.dll</code> or <code>exe</code> and initialized therein (which is achieved by the <code>.lib</code>).</p>\n"}, {"tags": ["c++", "multithreading", "opencv", "foreach", "htop"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1513196396, "post_id": 47800790, "comment_id": 82564150, "body": "Seems platform specific. What version of OpenCV? On Windows with v3.1.0 it will fully uses all the cores."}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1513199271, "post_id": 47800790, "comment_id": 82565528, "body": "@DanMa\u0161ek I&#39;m using OpenCV 3.3 on linux"}], "answers": [{"comments": [{"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1513252987, "post_id": 47805159, "comment_id": 82587037, "body": "I figured out that I didn&#39;t activate TBB so I&#39;m gonna do it now. Should I just install opencv with the flag and then recompile my program or I need to implement the functions from TBB lib?"}], "tags": [], "owner": {"reputation": 1415, "user_id": 3055724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZGm8W.png?s=128&g=1", "display_name": "Duloren", "link": "https://stackoverflow.com/users/3055724/duloren"}, "is_accepted": true, "score": 2, "last_activity_date": 1513254306, "last_edit_date": 1513254306, "creation_date": 1513220034, "answer_id": 47805159, "question_id": 47800790, "link": "https://stackoverflow.com/questions/47800790/opencv-foreach-function-parallel-access/47805159#47805159", "title": "OpenCV forEach function parallel access", "body": "<p>Have you taken a look in <a href=\"https://www.threadingbuildingblocks.org/tutorial-intel-tbb-generic-parallel-algorithms\" rel=\"nofollow noreferrer\">TBB</a> already? Threading Building Blocks is an apache licensed lib for parallel computing which you can use just compiling OpenCV with the flag -D WITH_TBB=ON</p>\n\n<p>See this example of parallel_for: <a href=\"http://www.jayrambhia.com/blog/opencv-with-tbb\" rel=\"nofollow noreferrer\">http://www.jayrambhia.com/blog/opencv-with-tbb</a></p>\n\n<p>If you decide to adopt TBB follow these steps:</p>\n\n<p>1 - Rebuild OpenCV with TBB support. If you are running into a Linux machine just do:</p>\n\n<p>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON BUILD_TBB=ON ..</p>\n\n<p>2 - Rewrite your program to use TBB</p>\n\n<p>See the answers there: <a href=\"https://stackoverflow.com/questions/10607215/simplest-tbb-example\">Simplest TBB example</a> focusing in the most recent ones.</p>\n"}], "owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1830, "favorite_count": 0, "accepted_answer_id": 47805159, "answer_count": 1, "score": 0, "last_activity_date": 1513254306, "creation_date": 1513193347, "question_id": 47800790, "link": "https://stackoverflow.com/questions/47800790/opencv-foreach-function-parallel-access", "title": "OpenCV forEach function parallel access", "body": "<p>I'm processing <code>RGB</code> images and doing the same thing for each channel (R+G+B) so I've been looking for parallel functions that could help me improve my code and run it (3*?) faster. Now Im using <code>forEach</code> function like so:</p>\n\n<pre><code>unsigned char lut[256];\nfor (int i = 0; i &lt; 256; i++)\n    lut[i] = cv::saturate_cast&lt;uchar&gt;(pow((float)(i / 255.0), fGamma) * 255.0f); //pow: power exponent\n\ndst.forEach&lt;cv::Vec3b&gt; //dst is an RGB image\n(\n    [&amp;lut](cv::Vec3b &amp;pixel, const int* po) -&gt; void\n    {\n        pixel[0] = lut[(pixel[0])];\n        pixel[1] = lut[(pixel[1])];\n        pixel[2] = lut[(pixel[2])];\n    }\n);\n</code></pre>\n\n<p>But when I use <code>htop</code> to see the number of threads running, I only find one or two threads on..</p>\n\n<p><a href=\"https://i.stack.imgur.com/r9XRn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r9XRn.png\" alt=\"htop\"></a></p>\n\n<p>Am I doing something wrong or <code>forEach</code> isn't suppose to run on <code>multi-threading</code>? Do you have any resources to help me with to get to <code>multi-threading</code> computations?</p>\n\n<p>I'm running my code on ubuntu with this:</p>\n\n<pre><code>g++ -std=c++1z -Wall -Ofast -march=native test3.cpp -o test3 `pkg-config --cflags --libs opencv`\n</code></pre>\n"}, {"tags": ["c++", "webgl", "emscripten", "webgl2"], "comments": [{"owner": {"reputation": 9, "user_id": 7020362, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7f67c1668adf2b78b7796d280ac7d62a?s=128&d=identicon&r=PG&f=1", "display_name": "oglglslnoob", "link": "https://stackoverflow.com/users/7020362/oglglslnoob"}, "edited": false, "score": 1, "creation_date": 1513194958, "post_id": 47800759, "comment_id": 82563388, "body": "Addition: Cube texture dimensions: 512 x 512."}, {"owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "edited": false, "score": 1, "creation_date": 1513273927, "post_id": 47800759, "comment_id": 82600745, "body": "When rendering where you call <code>glBindTexture</code> add some code to check the id is not 0. If it is that would be the error. Desktop GL supports the concept of a default texture, texture 0. WebGL does not."}, {"owner": {"reputation": 9, "user_id": 7020362, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7f67c1668adf2b78b7796d280ac7d62a?s=128&d=identicon&r=PG&f=1", "display_name": "oglglslnoob", "link": "https://stackoverflow.com/users/7020362/oglglslnoob"}, "reply_to_user": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "edited": false, "score": 0, "creation_date": 1513309807, "post_id": 47800759, "comment_id": 82613490, "body": "Hey, thank you for the response, do you mean the texture-id that OpeGL assigns to a GLuint variable upon texture creation (glGenTextures(1, &amp;GLuint))? Thank you in advance"}, {"owner": {"reputation": 9, "user_id": 7020362, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7f67c1668adf2b78b7796d280ac7d62a?s=128&d=identicon&r=PG&f=1", "display_name": "oglglslnoob", "link": "https://stackoverflow.com/users/7020362/oglglslnoob"}, "reply_to_user": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "edited": false, "score": 0, "creation_date": 1513310228, "post_id": 47800759, "comment_id": 82613575, "body": "Right, just checked all the texture IDs, the fbo texture and the textures on the meshes. None of them is 0."}, {"owner": {"reputation": 9, "user_id": 7020362, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7f67c1668adf2b78b7796d280ac7d62a?s=128&d=identicon&r=PG&f=1", "display_name": "oglglslnoob", "link": "https://stackoverflow.com/users/7020362/oglglslnoob"}, "reply_to_user": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "edited": false, "score": 0, "creation_date": 1513364010, "post_id": 47800759, "comment_id": 82640323, "body": "This is very confusing - when I use a different filtering for the cube texture it says that the texture bound to the unit 0 is no renderable. So it is bound apparently to the unit 0. But when I correct the filtering error, there&#39;s apparently no texture bound to the unit 0. What the... ?"}], "owner": {"reputation": 9, "user_id": 7020362, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7f67c1668adf2b78b7796d280ac7d62a?s=128&d=identicon&r=PG&f=1", "display_name": "oglglslnoob", "link": "https://stackoverflow.com/users/7020362/oglglslnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513194368, "creation_date": 1513193228, "last_edit_date": 1513194368, "question_id": 47800759, "link": "https://stackoverflow.com/questions/47800759/webgl-render-to-cubetexture-error-1282-no-texture-bound-to-the-unit-0", "title": "WebGL render to cubetexture error 1282 - &quot;no texture bound to the unit 0&quot;", "body": "<p>I'm trying to render a small scene into a cubemap to use for reflections in WebGL - using Emscripten (<em>C++ to JavaScript</em>). My code just goes through the 6 faces, and renders all objects into the currently bound side of the cube-texture. The code works on a desktop build, no errors. But WebGL says:</p>\n\n<p>RENDER WARNING: there is no texture bound to the unit 0.</p>\n\n<p>Also I get error 1282, after checking with glGetError(); when I call \"glDrawElements\". Both messages appear 30 times (rendering 5 meshes into 6 faces - 6*5=30)</p>\n\n<p>Fbo &amp; texture creation</p>\n\n<pre><code>    glGenFramebuffers(1, &amp;m_FboId);\n    glBindFramebuffer(GL_FRAMEBUFFER, m_FboId);\n\n    glGenTextures(1, &amp;m_glId);\n    glBindTexture(GL_TEXTURE_CUBE_MAP, m_glId);\n\n    for (unsigned int i = 0; i &lt; 6; i++)\n        glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, GL_RGB, CUBEMAP_SIZE, CUBEMAP_SIZE, 0, GL_RGB, GL_FLOAT, nullptr);\n\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n#if !WEB\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE); // Wrap_R is invalid in WebGL\n#endif\n\n    glBindTexture(GL_TEXTURE_CUBE_MAP, 0);\n\n    glGenRenderbuffers(1, &amp;m_DepthId);\n    glBindRenderbuffer(GL_RENDERBUFFER, m_DepthId);\n\n    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, CUBEMAP_SIZE, CUBEMAP_SIZE);\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, m_DepthId);\n\n    m_DrawBuffers[0] = GL_COLOR_ATTACHMENT0;\n    glDrawBuffers(1, m_DrawBuffers);\n\n    int fbo_Status = glCheckFramebufferStatus(GL_FRAMEBUFFER);\n    if (fbo_Status != GL_FRAMEBUFFER_COMPLETE) printf(\" ::ENGINE:: FBO Creation Failed! glError: %i\\n\", fbo_Status);\n\n    glBindRenderbuffer(GL_RENDERBUFFER, 0);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n</code></pre>\n\n<p>Rendering:</p>\n\n<pre><code>    glBindFramebuffer(GL_FRAMEBUFFER, m_FboId);\n    glViewport(0, 0, CUBEMAP_SIZE, CUBEMAP_SIZE);\n\n    Object* objectPtr;\n\n    shader.bind();\n    shader.loadProjectionMtx(math::perspective(90.0f, 1.0f, 0.001f, 300.0f)[0][0]);\n    shader.loadCameraPosition(m_Position.x, m_Position.y, m_Position.z);\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    math::mat4 viewMtx(1.0f);\n\n    for (unsigned int f = 0; f &lt; 6; f++)\n    {\n        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_CUBE_MAP_POSITIVE_X + f, m_glId, 0);\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n        if (f == 2)\n            viewMtx = math::lookAt(m_Position, m_Position - math::vec3( 0.0f, -1.0f,  0.0f), math::vec3(0.0f, 0.0f, 1.0f));\n        else if (f == 1)\n            viewMtx = math::lookAt(m_Position, m_Position - math::vec3( 1.0f,  0.0f,  0.0f), math::vec3(0.0f, -1.0f, 0.0f));\n        else if (f == 4)\n            viewMtx = math::lookAt(m_Position, m_Position - math::vec3( 0.0f,  0.0f, -1.0f), math::vec3(0.0f, -1.0f, 0.0f));\n        else if (f == 3)\n            viewMtx = math::lookAt(m_Position, m_Position - math::vec3( 0.0f,  1.0f,  0.0f), math::vec3(0.0f, 0.0f, -1.0f));\n        else if (f == 0)\n            viewMtx = math::lookAt(m_Position, m_Position - math::vec3(-1.0f,  0.0f,  0.0f), math::vec3(0.0f, -1.0f, 0.0f));\n        else if (f == 5)\n            viewMtx = math::lookAt(m_Position, m_Position - math::vec3( 0.0f,  0.0f,  1.0f), math::vec3(0.0f, -1.0f, 0.0f));\n\n        shader.loadViewMtx(viewMtx[0][0]);\n\n        for (unsigned int i = 0; i &lt; m_Entities.size(); i++)\n        {\n            shader.loadModelMtx(m_Entities[i]-&gt;getMtx()[0][0]);\n\n            objectPtr = static_cast&lt;Object*&gt;(m_Entities[i]);\n\n            for (int t = 0; t &lt; 3; t++)\n            {\n                glActiveTexture(GL_TEXTURE0 + t);\n                glBindTexture(GL_TEXTURE_2D, objectPtr-&gt;getTextureId(t));\n                glUniform1i(objectPtr-&gt;getUniformLoc(t), t);\n            }\n\n            glBindVertexArray(objectPtr-&gt;getMesh()-&gt;getVao());\n            int error = glGetError();\n            glDrawElements(GL_TRIANGLES, objectPtr-&gt;getMesh()-&gt;getNumberOfIndices(), GL_UNSIGNED_SHORT, 0);\n            error = glGetError(); if (error != 0) printf(\"GL ERROR: %i\\n\", error);\n            glBindVertexArray(0);\n        }\n    }\n\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n</code></pre>\n\n<p>What did I do here that WebGL doesn't like? This is exactly how I render my scene when I just render it onto a 2D texture into another FBO. Only difference is that this time, I'm rendering into a cube texture.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2017"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1513193349, "post_id": 47800730, "comment_id": 82562613, "body": "Sounds like the &quot;local debugger&quot; environment is not what you expect, you want may want to &quot;Start Without Debugging&quot; (or Ctrl` + F5)? Basically &quot;run program&quot; not &quot;debug program&quot;"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1513193868, "post_id": 47800730, "comment_id": 82562872, "body": "<a href=\"https://stackoverflow.com/questions/31909879/how-to-keep-window-open-not-working-depending-on-inputs\">This Question</a> may not help now, but it would seem there are some issues."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513194182, "post_id": 47800730, "comment_id": 82563040, "body": "Perhaps your antivirus is causing this behavior. aVast is known to cause issues like that. Some other antivirus software also do this. Try disabling your AV in either case."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1513194220, "post_id": 47800730, "comment_id": 82563065, "body": "What is the definition (body) of your keep_window_open(); function?"}, {"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1513194941, "post_id": 47800730, "comment_id": 82563383, "body": "I solved the problem by getting rid of Avast and opening VS as administrator.  Thank you for your help."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1513195783, "post_id": 47800730, "comment_id": 82563859, "body": "You should not need (or want) to run VS as an administrator. Turning off the sandbox feature in aVast should be all that is needed. Or adding an exception for the folders where your projects exist."}, {"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1513196572, "post_id": 47800730, "comment_id": 82564245, "body": "My confusion was caused by an accidental use of a breakpoint. I didn&#39;t know what this feature did at that time, and simply restarting VS made everything work perfectly. The problem 99% wasn&#39;t caused by Avast. So, for everyone who has this problem in the future - just click on a red dot left to your code."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "edited": false, "score": 0, "creation_date": 1513195221, "post_id": 47801167, "comment_id": 82563546, "body": "This is not quite what I ment, as function &quot;keep_window_open&quot; does exactly what you wrote. The problem has been solved in the comments though."}], "tags": [], "owner": {"reputation": 190, "user_id": 3943183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/edd96423277d19c443af7ba5c06e9d97?s=128&d=identicon&r=PG&f=1", "display_name": "peti446", "link": "https://stackoverflow.com/users/3943183/peti446"}, "is_accepted": false, "score": 0, "last_activity_date": 1513194967, "creation_date": 1513194967, "answer_id": 47801167, "question_id": 47800730, "link": "https://stackoverflow.com/questions/47800730/visual-studio-2017-causing-problems/47801167#47801167", "title": "Visual Studio 2017 causing problems", "body": "<p>If you only want to have the behaviour of \"Please enter character to exit\", you could just include the cstdio header and use <code>std::getchar()</code> at the end. This will make sure the program does not exit until you press any key on the keyboard.</p>\n\n<p>However, this method does not print out the message \"Please enter a character to exit\" so you would need to print it yourself using cout.</p>\n\n<p>The main.cpp would end up looking something like this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"Hello World\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Please enter character to exit\" &lt;&lt; std::endl;\n    std::getchar();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 9095574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VqI4h.jpg?s=128&g=1", "display_name": "Mihu", "link": "https://stackoverflow.com/users/9095574/mihu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513194967, "creation_date": 1513193093, "question_id": 47800730, "link": "https://stackoverflow.com/questions/47800730/visual-studio-2017-causing-problems", "title": "Visual Studio 2017 causing problems", "body": "<p>I'm a complete begginer when it comes to programming. I'm trying to learn using the book \"Programming: Principles and Practice Using C++\" and it recommended downloading Visual Studio to code (I was previously using Codeblocks). \nI downloaded the newest version (2017), got the classic applications packet for C++ and created a project.</p>\n\n<p>But when I wrote my first code</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"../../std_lib_facilities.h\"\n\n\nint main()\n{\n    cout &lt;&lt; \"Hello world!\";\n    keep_window_open();\n    return 0;\n}\n</code></pre>\n\n<p>Visual Studio started to freak out. When I click the local debugger button, the console app goes to the taskbar, and when I click on it, I can't do anything with it. It jsut displays \"Hello World!\" but no \"Please enter character to exit\" as it should. It doesn't react to keyboard input. I can't close it (even if I use task manager and try to close the process manually). Only solution I found is clicking \"continue\" button in Visual Studio, but it's not very convenient to use as the app still doesn't quite work the way I want to. Is there a way to make it work like it does in codeblocks - I just put in code, click a button and I have a fully functional console app? </p>\n\n<p>One thing that could cause it - I was getting an error about using , so following advice from the internet I added </p>\n\n<pre><code>#define _SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS 1\n</code></pre>\n\n<p>at the beggining of the header std_lib_facilities.h</p>\n\n<p>Any way someone could help me out? (Maybe I should just go back to Codeblocks and ignore Visual Studio? That doesn't seem like a good way though)</p>\n"}, {"tags": ["c++", "visual-studio-2017", "c++17", "constexpr"], "comments": [{"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1513194548, "post_id": 47800684, "comment_id": 82563223, "body": "Internal compiler error is always a bug in a compiler. So even your <code>struct B</code> might be important. It would be best if you were able to create <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, that produces the compiler error (and possibly report it to MSVC)."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1513195064, "post_id": 47800684, "comment_id": 82563446, "body": "Yes, even if the compiler is going to reject code (because it doesn&#39;t support some newer feature, for example), it shouldn&#39;t ICE. One thing I would suggest you try is go into the project settings (Project -&gt; Properties, go to C/C++ -&gt; Language and set &quot;C++ Language Standard&quot; to either c++ 17 or latest. I don&#39;t know that will fix this but it may at least give you informative diagnostics."}, {"owner": {"reputation": 25, "user_id": 8802791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be38fc50269a1e45311c407c67765ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sandor", "link": "https://stackoverflow.com/users/8802791/sandor"}, "edited": false, "score": 0, "creation_date": 1513195113, "post_id": 47800684, "comment_id": 82563475, "body": "At this very moment I don&#39;t know what MCVE is (thanks for the link), I&#39;m checking it out."}, {"owner": {"reputation": 25, "user_id": 8802791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be38fc50269a1e45311c407c67765ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sandor", "link": "https://stackoverflow.com/users/8802791/sandor"}, "edited": false, "score": 0, "creation_date": 1513195249, "post_id": 47800684, "comment_id": 82563561, "body": "I am using c++17, and (also tried latest) language standard. Sorry, I should have mentioned it in the post."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8802791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be38fc50269a1e45311c407c67765ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sandor", "link": "https://stackoverflow.com/users/8802791/sandor"}, "edited": false, "score": 0, "creation_date": 1513198026, "post_id": 47801567, "comment_id": 82564949, "body": "I know about fold expressions, but as you wrote, it&#39;s not supported in MSVC yet and the implementation I wrote seems the most short and self-explanatory implementation to me, but I guess I will try the implementation you suggested. It&#39;s just strange to me that mine doesn&#39;t work properly."}, {"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "reply_to_user": {"reputation": 25, "user_id": 8802791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be38fc50269a1e45311c407c67765ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sandor", "link": "https://stackoverflow.com/users/8802791/sandor"}, "edited": false, "score": 0, "creation_date": 1513198250, "post_id": 47801567, "comment_id": 82565050, "body": "@Sandor It&#39;s not strange, it&#39;s just a bug. It&#39;s not a compiler error that implies your code is wrong. Every software has bugs, even the compilers..."}, {"owner": {"reputation": 25, "user_id": 8802791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be38fc50269a1e45311c407c67765ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sandor", "link": "https://stackoverflow.com/users/8802791/sandor"}, "edited": false, "score": 0, "creation_date": 1513198521, "post_id": 47801567, "comment_id": 82565177, "body": "Ok, I get it. I&#39;ll check how to report this to MSVC. Thanks for everyone!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1513196711, "creation_date": 1513196711, "answer_id": 47801567, "question_id": 47800684, "link": "https://stackoverflow.com/questions/47800684/a-compilation-issue-regarding-constexpr-expressions-in-visual-studio-2017/47801567#47801567", "title": "A compilation issue regarding constexpr expressions in Visual Studio 2017", "body": "<p>First, an internal compiler error is <em>always</em> a compiler bug. Please report this to MSVC.</p>\n\n<p>Second, this implementation is a bit odd. When you write <code>constexpr</code> functions you want to think in a more functionally-oriented way - input-only arguments, output-only results. <code>count_in_array</code> should surely just return a number:</p>\n\n<pre><code>template &lt;size_t Size&gt;\nconstexpr uint32_t count_in_array(B b, const std::array&lt;B, Size&gt;&amp; a)\n{\n    uint32_t count = 0;\n    for(auto&amp; e : a)\n    {\n        if(e==b)\n            ++count;\n    }\n    return count;\n}\n</code></pre>\n\n<p>This is a more reasonable implementation - <code>count</code> returns a count. Not only that, but it composes really nicely. How do you get all the counts? You sum them:</p>\n\n<pre><code>template &lt;size_t... Ids&gt;\nconstexpr uint32_t count_in_arrays(B b, std::index_sequence&lt;Ids...&gt;)\n{\n   return (count_in_array(b, A&lt;Ids&gt;::member) + ...);\n}\n</code></pre>\n\n<p>Much clearer.</p>\n\n<hr />\n\n<p>Note that, while I think fold-expressions don't quite work in MSVC yet (though might <a href=\"https://www.reddit.com/r/cpp/comments/7jdnfh/did_anyone_get_fold_expressions_working_in_either/dr60244/?st=jb5ibv25&amp;sh=12a078dd\" rel=\"nofollow noreferrer\">soon</a>?), that in of itself is not a reason to implement this differently. It just means that you need to manually sum - not that <code>count_in_array()</code> shouldn't return a count. </p>\n"}], "owner": {"reputation": 25, "user_id": 8802791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be38fc50269a1e45311c407c67765ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sandor", "link": "https://stackoverflow.com/users/8802791/sandor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 47801567, "answer_count": 1, "score": 1, "last_activity_date": 1513196711, "creation_date": 1513192921, "last_edit_date": 1513196399, "question_id": 47800684, "link": "https://stackoverflow.com/questions/47800684/a-compilation-issue-regarding-constexpr-expressions-in-visual-studio-2017", "title": "A compilation issue regarding constexpr expressions in Visual Studio 2017", "body": "<p>I'm working on a rendering engine using Vulkan and Visual Studio 2017, and I bumped into the following type of problem recently.</p>\n\n<p>I have a template struct <code>template&lt;uint32_t id&gt; struct A;</code>. This struct is defined (in separate header files) for <code>id=0, ... , N-1</code>. All of the definitions have a <code>static constexpr std::array&lt;B, M(id)&gt; member</code> for some struct <code>B</code> and number <code>M</code> depending on <code>id</code>. I have a constexpr function (and a helper function) which for a given value <code>b</code> of type <code>B</code>  counts how many elements of all of these arrays equal to <code>b</code>. It looks something like this:</p>\n\n<p>Helper function:</p>\n\n<pre><code>template&lt;size_t Size&gt;\nconstexpr void count_in_array(B b, const std::array&lt;B, Size&gt;&amp; a, uint32_t&amp; count)\n{\n    for(auto&amp; e : a)\n    {\n        if(e==b)\n            ++count;\n    }\n}\n</code></pre>\n\n<p>Main function:</p>\n\n<pre><code>template&lt;uint32_t... ids&gt;\nconstexpr uint32_t count_in_arrays(B b, std::index_sequence&lt;ids...&gt;)\n{\n   uint32_t count=0;\n   auto l ={ (count_in_array(b, A&lt;ids&gt;::member, count), 0)... };\n   return count;\n}\n</code></pre>\n\n<p>When I compile, I get a C1001 internal compiler error. The strange thing is that my funcions work, because if I use them to define a constexpr variable </p>\n\n<pre><code>constexpr uint32_t var=count_in_arrays(b, std::make_index_sequence&lt;N&gt;());\n</code></pre>\n\n<p>(for a <code>constexpr B b</code>),\nand I hoover the mouse over that variable, I see the computed (and correct) number in the appearing rectangle.</p>\n\n<p>I am not familiar with compiler switches, I only tried to use <code>#pragma optimize(\"\", on/off)</code> around the above functions, but that didn't help. Does somebody have an idea how to make Visual Studio to compile my code?</p>\n\n<p>Remark: I am pretty sure that the struct <code>B</code> is not important here, in my case, it is a simple data struct containing some built-in variables.</p>\n"}, {"tags": ["c++", "odbc"], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 1054539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75a605a624f74230b5f0e6b58d193a0a?s=128&d=identicon&r=PG", "display_name": "GBrookman", "link": "https://stackoverflow.com/users/1054539/gbrookman"}, "edited": false, "score": 0, "creation_date": 1513196110, "post_id": 47800672, "comment_id": 82564004, "body": "Thanks. So you&#39;re saying check the version of the driver and if &gt; 3.8 I can make my app more responsive but otherwise I&#39;m stuck waiting? Creating a deadlock in MS SQL Management Studio gives this response &quot;Transaction (Process ID n) was deadlocked on lock resources with another process and has been chosen as the deadlock victim.&quot; Was hoping ODBC had some way to tap into that."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1513192888, "creation_date": 1513192888, "answer_id": 47800672, "question_id": 47800492, "link": "https://stackoverflow.com/questions/47800492/sqlexecdirect-doesnt-return-when-deadlocked/47800672#47800672", "title": "SQLExecDirect doesn&#39;t return when deadlocked", "body": "<p>If your ODBC provider supports asynchronous execution you could perform the operation that way, ODBC 3.8+ even supports an event-based notification mode over the older 3.0 polling-only. Note that unless using something like SQLServer's MARS your connection will still be deadlocked it just allows the thread to do something else while waiting for an answer.</p>\n"}], "owner": {"reputation": 293, "user_id": 1054539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75a605a624f74230b5f0e6b58d193a0a?s=128&d=identicon&r=PG", "display_name": "GBrookman", "link": "https://stackoverflow.com/users/1054539/gbrookman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513192888, "creation_date": 1513192158, "question_id": 47800492, "link": "https://stackoverflow.com/questions/47800492/sqlexecdirect-doesnt-return-when-deadlocked", "title": "SQLExecDirect doesn&#39;t return when deadlocked", "body": "<p>I have a C++ app calling a stored procedure via SQLExecDirect. If there is a deadlock SQLExecDirect doesn't return until the deadlock is resolved.</p>\n\n<p>I've read in the .net world it can detect deadlocks and throw an exception. Is there any way with C++/ODBC to regain control while deadlocked? I suspect the answer is no, but I'm hoping there's some ODBC feature I haven't found yet.</p>\n\n<p>The only work around I can think of is kicking off another thread to run it and and setting a timeout for the thread to return. </p>\n\n<p>And no, I can't fix the deadlock. This app is running queries or stored procedures from my customer's DBs that they choose. I just don't want it unresponsive for the duration of the deadlock.   </p>\n"}, {"tags": ["c++", "arrays", "associations", "data-mining", "apriori"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1513192125, "post_id": 47800443, "comment_id": 82562005, "body": "You do know that array-indexes are <i>zero</i> based? I.e. an array of five elements will have valid indexes from <code>0</code> to <code>4</code> (inclusive)."}, {"owner": {"reputation": 1064, "user_id": 4722577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df632265f05cfef80f4d3da89de8cd7b?s=128&d=identicon&r=PG&f=1", "display_name": "CAM_344", "link": "https://stackoverflow.com/users/4722577/cam-344"}, "edited": false, "score": 0, "creation_date": 1513192250, "post_id": 47800443, "comment_id": 82562069, "body": "How is your application running? It should crash with an index out of bounds exception in your for loop"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 1064, "user_id": 4722577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df632265f05cfef80f4d3da89de8cd7b?s=128&d=identicon&r=PG&f=1", "display_name": "CAM_344", "link": "https://stackoverflow.com/users/4722577/cam-344"}, "edited": false, "score": 1, "creation_date": 1513192305, "post_id": 47800443, "comment_id": 82562099, "body": "@CDVAProgrammer, C++ doesn&#39;t specify an exception for accessing an array out of bounds."}, {"owner": {"reputation": 1, "user_id": 9095477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1764057360279847/picture?type=large", "display_name": "Andreas Wg", "link": "https://stackoverflow.com/users/9095477/andreas-wg"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1513192346, "post_id": 47800443, "comment_id": 82562127, "body": "@Someprogrammerdude yes, i do"}, {"owner": {"reputation": 1, "user_id": 9095477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1764057360279847/picture?type=large", "display_name": "Andreas Wg", "link": "https://stackoverflow.com/users/9095477/andreas-wg"}, "reply_to_user": {"reputation": 1064, "user_id": 4722577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df632265f05cfef80f4d3da89de8cd7b?s=128&d=identicon&r=PG&f=1", "display_name": "CAM_344", "link": "https://stackoverflow.com/users/4722577/cam-344"}, "edited": false, "score": 0, "creation_date": 1513192397, "post_id": 47800443, "comment_id": 82562142, "body": "@CDVAProgrammer it can run, but the output is all 0 value"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513192619, "post_id": 47800443, "comment_id": 82562251, "body": "Then what do you think e.g. <code>item1 == tra1[5]</code> will do? What will <code>item1</code> be compared to? Especially since your arrays are only initialized with <i>four</i> strings. It seems you could use <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a couple of good beginners books</a>."}, {"owner": {"reputation": 1064, "user_id": 4722577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df632265f05cfef80f4d3da89de8cd7b?s=128&d=identicon&r=PG&f=1", "display_name": "CAM_344", "link": "https://stackoverflow.com/users/4722577/cam-344"}, "edited": false, "score": 0, "creation_date": 1513192664, "post_id": 47800443, "comment_id": 82562276, "body": "It seems like you\u2019re not actually incrementing the values of your support variables.  I think what you\u2019re trying to do is add to those variables, \u201csupportx + 1\u201d isn\u2019t adding the values to a variable.  You need to do \u201csupportx+= 1."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1513192756, "post_id": 47800443, "comment_id": 82562319, "body": "Are you compiling in debug mode? <code>item1 == tra1[5]</code> should throw."}, {"owner": {"reputation": 1064, "user_id": 4722577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df632265f05cfef80f4d3da89de8cd7b?s=128&d=identicon&r=PG&f=1", "display_name": "CAM_344", "link": "https://stackoverflow.com/users/4722577/cam-344"}, "edited": false, "score": 0, "creation_date": 1513192756, "post_id": 47800443, "comment_id": 82562320, "body": "Not to mention all of your support variables are initialized with value 0, which is fine, but since you\u2019re not incrementing the support variables themselves that\u2019s why the final result are 0."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 2, "creation_date": 1513192483, "post_id": 47800533, "comment_id": 82562180, "body": "There is a bunch of stuff. Like what does <code>support1 + 1;</code> do? Andreas is writing blind."}, {"owner": {"reputation": 1, "user_id": 9095477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1764057360279847/picture?type=large", "display_name": "Andreas Wg", "link": "https://stackoverflow.com/users/9095477/andreas-wg"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1513193022, "post_id": 47800533, "comment_id": 82562448, "body": "@lakeweb what i mean is the value of support1 will be ++ in every tra1[5] that have equal values with item1"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1513193263, "post_id": 47800533, "comment_id": 82562563, "body": "First, there is no tra1[5]. As pointed out, you only have 0 to 4. And if you want to count, it is <code>++support1</code> .. <code>support1 + 1;</code> does nothing. Which compiler are you using?"}, {"owner": {"reputation": 1, "user_id": 9095477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1764057360279847/picture?type=large", "display_name": "Andreas Wg", "link": "https://stackoverflow.com/users/9095477/andreas-wg"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1513195028, "post_id": 47800533, "comment_id": 82563429, "body": "@lakeweb i use visual studio. Thank you for your suggestion. It helps me a lot"}], "tags": [], "owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "is_accepted": false, "score": 0, "last_activity_date": 1513192338, "creation_date": 1513192338, "answer_id": 47800533, "question_id": 47800443, "link": "https://stackoverflow.com/questions/47800443/i-cant-get-a-value-except-0-from-my-fixed-array-as-input/47800533#47800533", "title": "I can&#39;t get a value except 0 from my fixed array as input", "body": "<p>in your code, inside the loop you keep referencing <code>tra2[5]</code> . I think you mean to use <code>tra2[i]</code> instead. The way you have it now you're only looking at one past the last item in your arrays (arrays are 0-based. Valid indices are [0-4])</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9095477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1764057360279847/picture?type=large", "display_name": "Andreas Wg", "link": "https://stackoverflow.com/users/9095477/andreas-wg"}, "edited": false, "score": 0, "creation_date": 1513193578, "post_id": 47800683, "comment_id": 82562723, "body": "i already change the <code>tra1[5]</code> to <code>tra1[i]</code>, and also <code>support1 + 1</code> to <code>support1+=1</code>. but the value is still 0. But thank you for your help i really apreciate it."}, {"owner": {"reputation": 1, "user_id": 9095477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1764057360279847/picture?type=large", "display_name": "Andreas Wg", "link": "https://stackoverflow.com/users/9095477/andreas-wg"}, "edited": false, "score": 0, "creation_date": 1513193944, "post_id": 47800683, "comment_id": 82562904, "body": "i&#39;m sorry i was wrong, it was a problem with my visual studio solution explorer. I closed it and make a new file and then I re do what you suggested, and it actually works ! thank you very much. I really appreciate your help"}], "tags": [], "owner": {"reputation": 1064, "user_id": 4722577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df632265f05cfef80f4d3da89de8cd7b?s=128&d=identicon&r=PG&f=1", "display_name": "CAM_344", "link": "https://stackoverflow.com/users/4722577/cam-344"}, "is_accepted": false, "score": 0, "last_activity_date": 1513192921, "creation_date": 1513192921, "answer_id": 47800683, "question_id": 47800443, "link": "https://stackoverflow.com/questions/47800443/i-cant-get-a-value-except-0-from-my-fixed-array-as-input/47800683#47800683", "title": "I can&#39;t get a value except 0 from my fixed array as input", "body": "<p>2 things, you\u2019re for loop is trying to access the 6th index of the array when it\u2019s only initialized to have 5 indicis.</p>\n\n<p>2nd the support1,2,3 variables are initialized to 0 but you never actually increment those variables, which are used as part of your final calculation.</p>\n\n<p>Your for loop needs to change to have \u201csupport1 + 1\u201d be \u201csupport1+=1\u201d.</p>\n"}], "owner": {"reputation": 1, "user_id": 9095477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1764057360279847/picture?type=large", "display_name": "Andreas Wg", "link": "https://stackoverflow.com/users/9095477/andreas-wg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1513192921, "creation_date": 1513191968, "last_edit_date": 1513192168, "question_id": 47800443, "link": "https://stackoverflow.com/questions/47800443/i-cant-get-a-value-except-0-from-my-fixed-array-as-input", "title": "I can&#39;t get a value except 0 from my fixed array as input", "body": "<p>I got a task from my lecture to make association program from my data mining class, and i'm using c++ in microsoft visual studio 2017 since that is the only language i understand.\nI'm trying to get support result but all i got is 0. i use an algorithm i got from some sites, but i can't implement it to my code because the value is 0.\nI think the problem is in the input data reading, the one with <code>for(int i=0;i&lt;n;i++)</code>.</p>\n\n<p>this is my code :</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    float n = 5, support1 = 0, support2 = 0, support3 = 0;\n    string item1, item2;\n    //dataset fixed\n    string tra1[5] = { \"milk\", \"beer\" , \"coffee\" , \"sugar\" , \"detergen\" };\n    string tra2[5] = { \"egg\", \"flour\" , \"milk\" , \"sugar\" };\n    string tra3[5] = { \"coffee\", \"butter\" , \"cigarette\" , \"sugar\" };\n    string tra4[5] = { \"doritos\", \"tea\" , \"coconut oil\" , \"soap\" };\n    string tra5[5] = { \"detergen\", \"milk\" , \"sugar\" , \"coca cola\" };\n\n    cout &lt;&lt; \"item 1 : \"; cin &gt;&gt; item1;//for example coffee\n    cout &lt;&lt; \"item 2 : \"; cin &gt;&gt; item2;//for example sugar\n    cout &lt;&lt; endl &lt;&lt; \"------------------------------\" &lt;&lt; endl;\n\n    //i think this is where the problem is\n    for (int i = 0;i &lt; n;i++)\n    {\n        //tra1\n        if (item1 == tra1[5]) { support1 + 1; }\n        if (item2 == tra1[5]) { support2 + 1; }\n        if (item1 == tra1[5] &amp;&amp; item2 == tra1[5]) { support3 + 1; }\n\n        //tra2\n        if (item1 == tra2[5]) { support1 + 1; }\n        if (item2 == tra2[5]) { support2 + 1; }\n        if (item1 == tra2[5] &amp;&amp; item2 == tra2[5]) { support3 + 1; }\n\n        //tra3\n        if (item1 == tra3[5]) { support1 + 1; }\n        if (item2 == tra3[5]) { support2 + 1; }\n        if (item1 == tra3[5] &amp;&amp; item2 == tra3[5]) { support3 + 1; }\n        //tra4\n        if (item1 == tra4[5]) { support1 + 1; }\n        if (item2 == tra4[5]) { support2 + 1; }\n        if (item1 == tra4[5] &amp;&amp; item2 == tra4[5]) { support3 + 1; }\n        //tra5\n        if (item1 == tra5[5]) { support1 + 1; }\n        if (item2 == tra5[5]) { support2 + 1; }\n        else if (item1 == tra1[5] &amp;&amp; item2 == tra5[5]) { support3 + 1; }\n    }\n\n    //print how many times are coffee and sugar purchased\n    cout &lt;&lt; \"Transaction done \" &lt;&lt; item1 &lt;&lt; \" : \" &lt;&lt; support1 &lt;&lt; endl;\n    cout &lt;&lt; \"Transaction done \" &lt;&lt; item2 &lt;&lt; \" : \" &lt;&lt; support2 &lt;&lt; endl;\n    cout &lt;&lt; \"Transaction done \" &lt;&lt; item2 &lt;&lt; \" dan \" &lt;&lt; item2 &lt;&lt; \" : \" &lt;&lt; support3 &lt;&lt; endl;\n    cout &lt;&lt; endl &lt;&lt; \"------------------------------\" &lt;&lt; endl;\n\n    float result1,result2,result3;\n    result1 = (support1 / n) * 100;\n    result2 = (support2 / n) * 100;\n    result3 = (support3 / n) * 100;\n\n    cout &lt;&lt; \"Item 1 : \" &lt;&lt; item1 &lt;&lt; \"\\t\" &lt;&lt; \"Item 2 : \" &lt;&lt; item2 &lt;&lt; endl;\n    cout &lt;&lt; \"support \" &lt;&lt; item1 &lt;&lt; \" : \" &lt;&lt; result1 &lt;&lt; endl;\n    cout &lt;&lt; \"support \" &lt;&lt; item2 &lt;&lt; \" : \" &lt;&lt; result2 &lt;&lt; endl;\n    cout &lt;&lt; \"support \" &lt;&lt; item1 &lt;&lt; \" dan \" &lt;&lt; item2 &lt;&lt; \" : \" &lt;&lt; result3 &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "design-patterns"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1513191634, "post_id": 47800316, "comment_id": 82561765, "body": "<a href=\"https://stackoverflow.com/questions/46991224/are-there-any-valid-use-cases-to-use-new-and-delete-raw-pointers-or-c-style-arr\">Are there any valid use cases to use new and delete, raw pointers or c-style arrays with modern C++?</a>"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1513191739, "post_id": 47800316, "comment_id": 82561809, "body": "Use an interface based design and references or smart pointers. Wrap the whole legacy stuff away."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1513192174, "post_id": 47800316, "comment_id": 82562030, "body": "Why do you need the NullLabel type? Why not just return nullptr? I can see an argument for the getLabel call over littering the code with casts but returning an object instance when there is no item with the given name seems very odd."}, {"owner": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "edited": false, "score": 3, "creation_date": 1513192301, "post_id": 47800316, "comment_id": 82562094, "body": "Should you be using <code>dynamic_cast&lt;&gt;</code> instead of <code>static_cast&lt;&gt;</code> to catch issues with casting to the wrong type?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513193809, "post_id": 47800316, "comment_id": 82562840, "body": "Using <code>static_cast</code> with the wrong derived type is undefined behavior, and it certainly isn&#39;t obligated to return <code>nullptr</code>. You are thinking of <code>dynamic_cast</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513193843, "post_id": 47800316, "comment_id": 82562856, "body": "It sounds to me like you need a virtual function. Read about polymorphism."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1513198729, "post_id": 47800316, "comment_id": 82565282, "body": "You could make <code>getUiWidget()</code> be a template function so the caller can specify the output type, that will eliminate the need for the caller to use <code>static_cast</code>/<code>dynamic_cast</code> (if you make the function take the returned pointer as an output parameter, it can deduce the template automatically). Making the function throw an exception if the widget name is not found (or the widget is the wrong type) will eliminate the <code>nullptr</code> checks."}], "answers": [{"comments": [{"owner": {"reputation": 289, "user_id": 3904534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a310ace93f91e9abeb673eac8d973d40?s=128&d=identicon&r=PG&f=1", "display_name": "user3904534", "link": "https://stackoverflow.com/users/3904534/user3904534"}, "edited": false, "score": 0, "creation_date": 1513192910, "post_id": 47800557, "comment_id": 82562392, "body": "I can&#39;t do the first because the method signatures are not always the same. And I can&#39;t do the second because that means every widget knows about all its brothers. For example, label should not need to know anything about button right?"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1513192447, "creation_date": 1513192447, "answer_id": 47800557, "question_id": 47800316, "link": "https://stackoverflow.com/questions/47800316/how-to-avoid-many-static-casts-and-nullptr-checks-in-c/47800557#47800557", "title": "How to avoid many static casts and nullptr checks in c++?", "body": "<p>Usually you make use of polymorphism and dynamic binding to overcome the need of even casting the returned object:</p>\n\n<pre><code>class Widget {\n  virtual void someTypeSpeficifBehaviour() = 0;\n}\nclass Button : public Widget {\n  virtual void someTypeSpeficifBehaviour() { // button specific };\n}\nclass Label : public Widget {\n  virtual void someTypeSpeficifBehaviour() { // label specific };\n}\nint main() {\n  Widget *w = baseApp-&gt;getUIWidget(\"test\");\n  w-&gt;someTypeSpeficiBehaviour();\n}\n</code></pre>\n\n<p>It you cannot handle it that way, you can still include a type information in the object:</p>\n\n<pre><code>class Widget {\n  virtual bool isButton() = 0;\n}\nclass Button : public Widget {\n  virtual bool isButton() { return true; }\n}\nclass Label : public Widget {\n  virtual bool isButton() { return false; }\n}\nint main() {\n  Widget *w = baseApp-&gt;getUIWidget(\"test\"); \n  if (w-&gt;isButton()) { // button specific\n  }\n  else { // else...\n  }\n}\n</code></pre>\n\n<p>If that all does not work, you may think of <code>dynamic_cast&lt;&gt;</code>-checks (not <code>static_cast</code>). But usually a <code>dynamic_cast&lt;&gt;</code> should make you rethinking the design.</p>\n"}, {"tags": [], "owner": {"reputation": 612, "user_id": 2427022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e52454d2d6285752b7f1caf8ddcb8e?s=128&d=identicon&r=PG", "display_name": "Shivendra Agarwal", "link": "https://stackoverflow.com/users/2427022/shivendra-agarwal"}, "is_accepted": false, "score": 2, "last_activity_date": 1513194437, "last_edit_date": 1513194437, "creation_date": 1513193829, "answer_id": 47800893, "question_id": 47800316, "link": "https://stackoverflow.com/questions/47800316/how-to-avoid-many-static-casts-and-nullptr-checks-in-c/47800893#47800893", "title": "How to avoid many static casts and nullptr checks in c++?", "body": "<p>can use a visitor pattern to avoid dynamic casts. (static casts as marked in questions are hazardous!)</p>\n\n<ol>\n<li>Define a new accept method in widget hierarchy.</li>\n<li>Create a new visitor class encompassing all the object specific \"do something\" you wanted to do in the overloaded visit functions.</li>\n</ol>\n\n<p>adding visitor class:</p>\n\n<pre><code>class Visitor {\npublic visit (Button* button) { /* do button specific work */}\npublic visit (Label* label) { /* do label specific work */}\n}\n</code></pre>\n\n<p>adding accept method:</p>\n\n<pre><code>// Widget structure\nclass Widget {\nvirtual public accept (Visitor * v);\n...\n}\n\nclass Button : public Widget {\npublic accept (Visitor * v) override {v-&gt;visit(this);}\n...\n}\n\nclass Label : public Widget {\npublic accept (Visitor * v) override {v-&gt;visit(this);}\n...\n}\n</code></pre>\n\n<p>Now your code will change to:</p>\n\n<pre><code>Visitor* v = new Visitor;\nauto button = getUiWidget(buttonName);\nbutton.accept(v);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "is_accepted": false, "score": 0, "last_activity_date": 1513194427, "last_edit_date": 1592644375, "creation_date": 1513194123, "answer_id": 47800958, "question_id": 47800316, "link": "https://stackoverflow.com/questions/47800316/how-to-avoid-many-static-casts-and-nullptr-checks-in-c/47800958#47800958", "title": "How to avoid many static casts and nullptr checks in c++?", "body": "<h3>Your sample code is unsafe.</h3>\n<p>As static_cast does <strong>no</strong> run-time type information (RTTI) checks before casting, those nullptr checks <strong>will not</strong> catch casting failures.</p>\n<p>Using RTTI one would expect those to be dynamic_cast.</p>\n<p>Replacing test casts without invoking RTTI when handling polymorphism would require some form of enumeration of the widget types and storage of the type enumeration in the class as a static const.</p>\n<p>If you don't mind RTTI then use typeid and switch on the result.</p>\n<p>Since the type of a Button or Label and the associated hash_code are known constants at compile time a switch should work fine, but if I'm wrong you can always use if statements.</p>\n<p>e.g.:</p>\n<pre><code>auto widget = getUiWidget(buttonName);\nswitch(typeid(*widget).hash_code())\n{\n    case typeid(Button).hash_code():\n        {cast to Button, possibly do something, and break}\n    case typeid(Label).hash_code():\n        {cast to Label, possibly do something, and break}\n}\n</code></pre>\n"}], "owner": {"reputation": 289, "user_id": 3904534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a310ace93f91e9abeb673eac8d973d40?s=128&d=identicon&r=PG&f=1", "display_name": "user3904534", "link": "https://stackoverflow.com/users/3904534/user3904534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1513196109, "creation_date": 1513191535, "last_edit_date": 1513196109, "question_id": 47800316, "link": "https://stackoverflow.com/questions/47800316/how-to-avoid-many-static-casts-and-nullptr-checks-in-c", "title": "How to avoid many static casts and nullptr checks in c++?", "body": "<p>So a large legacy code base has structure that looks something like this.</p>\n\n<p>We have a base app that has this public interface:</p>\n\n<pre><code>// Base app\nclass BaseApp {\npublic:\n   ...\n   Widget* getUiWidget(string _widgetName);\n   ...\n}\n</code></pre>\n\n<p>However, our widgets are implemented like this</p>\n\n<pre><code>// Widget structure\nclass Widget {\n...\n}\n\nclass Button : public Widget {\n...\n}\n\nclass Label : public Widget {\n...\n}\n</code></pre>\n\n<p>The problem is everywhere in our view code we have a bunch of calls that look like this:</p>\n\n<pre><code>auto button = static_cast&lt;Button*&gt;(getUiWidget(buttonName));\nif (button != nullptr) {\n  // something happens\n  button-&gt;doSomething1();\n}\n\nauto label = static_cast&lt;Label*&gt;(getUiWidget(buttonName));\nif (label != nullptr) {\n  // something happens\n  label-&gt;doSomething2();\n}\n</code></pre>\n\n<p>I personally don't like this as there are literally thousands of calls like this and I feel it could be done much better.</p>\n\n<p>My intuition tells me I can do something like this</p>\n\n<pre><code>// Base app\nclass BaseApp {\npublic:\n   ...\n   Widget* getUiWidget(string _widgetName);\n   Label* getLabel(string _labelName) {\n     if (//labelName is in widget layout) \n        return new NullLabel;\n     else \n        return new Label(_labelName)\n   }\n   Button* getButton(string _buttonName) {\n     if (//buttonName is in widget layout) \n        return new NullButton;\n     else \n        return new Button(_buttonName)\n   }\n   ...\n}\n</code></pre>\n\n<p>Where the null objects are</p>\n\n<pre><code>class NullButton : public Button {\npublic:\n  // override all methods of button and do nothing with it\n}\n\nclass NullLabel : public Label {\npublic:\n  // override all methods of Label and do nothing with it\n}\n</code></pre>\n\n<p>So the code :</p>\n\n<pre><code>auto button = static_cast&lt;Button*&gt;(getUiWidget(buttonName));\nif (button != nullptr) {\n  // something happens\n  button-&gt;doSomething();\n}\n\n// Would turn in to \n\nauto button = getButton(buttonName);\nbutton-&gt;doSomething1();\n</code></pre>\n\n<p>My issue with this approach is that we have n number of widget children like toggle, slider, etc. So, in order to implement this, I would need n number of <code>getSomeWidgetChild</code> and also I would need to write n number of <code>NullSomeWidgetChild</code>. </p>\n\n<p>Is there a better solution?</p>\n"}, {"tags": ["c++", "operator-overloading", "user-defined-functions", "class-members"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 11, "creation_date": 1513191101, "post_id": 47800179, "comment_id": 82561507, "body": "Neither. Please use a <a href=\"http://en.cppreference.com/w/cpp/language/destructor\" rel=\"nofollow noreferrer\">destructor</a>."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 5, "creation_date": 1513191123, "post_id": 47800179, "comment_id": 82561517, "body": "Don&#39;t use new or delete if you can avoid them. Use a <code>vector</code>"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1513191239, "post_id": 47800179, "comment_id": 82561565, "body": "<a href=\"https://stackoverflow.com/questions/46991224/are-there-any-valid-use-cases-to-use-new-and-delete-raw-pointers-or-c-style-arr\">Are there any valid use cases to use new and delete, raw pointers or c-style arrays with modern C++?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1513191797, "last_edit_date": 1513191797, "creation_date": 1513191254, "answer_id": 47800243, "question_id": 47800179, "link": "https://stackoverflow.com/questions/47800179/how-to-correctly-deallocate-class-member/47800243#47800243", "title": "How to correctly deallocate class member?", "body": "<blockquote>\n  <p>Should I use delete overload or del() function or something else to deallocate class member?</p>\n</blockquote>\n\n<p>Neither.</p>\n\n<p>Add a destructor and make sure to delete the memory in the destructor.</p>\n\n<pre><code>class Field\n{\n  private:\n    size_t* square = new size_t[5];\n  public:\n    ~Field() { delete [] square; }\n};\n</code></pre>\n\n<p>While at it, checkout the <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">Rule of Three</a> and follow the rule.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1513191271, "creation_date": 1513191271, "answer_id": 47800247, "question_id": 47800179, "link": "https://stackoverflow.com/questions/47800179/how-to-correctly-deallocate-class-member/47800247#47800247", "title": "How to correctly deallocate class member?", "body": "<p>You're looking for a destructor:</p>\n\n<pre><code>class Field\n{\nprivate:\n    size_t* square = new size_t[5];\npublic:\n    ~Field() { delete [] square; }\n};\n</code></pre>\n\n<p>But learn the <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"noreferrer\">Rule of Zero</a> and defer instead to a resource managing class:</p>\n\n<pre><code>class Field\n{\nprivate:\n    std::unique_ptr&lt;size_t[]&gt; square;\npublic:\n    Field() : square(new size_t[5]) { }\n};\n</code></pre>\n\n<p>Which has the benefits of having move semantics already do the right thing, copy semantics already being disabled, and the destructor already managing your resources. </p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1513191559, "creation_date": 1513191559, "answer_id": 47800323, "question_id": 47800179, "link": "https://stackoverflow.com/questions/47800179/how-to-correctly-deallocate-class-member/47800323#47800323", "title": "How to correctly deallocate class member?", "body": "<p>First: Don't override the delete operator; this rarely makes sense. \"Cleaning\" up dependent objects, if necessary, is done in the destructor.</p>\n\n<p>So you'd write  </p>\n\n<pre><code>class Field {\n   ...\n   virtual ~Field() { delete[] square; }\n   ...\n}\n</code></pre>\n\n<p>Note that deleting a field (explicitly or implicitly) will trigger the destructor.</p>\n\n<p>Second, call <code>delete</code> only on objects that you have previously created with <code>new</code>. Don't  delete objects with automatic storage duration like you do with <code>Field f; delete &amp;f</code>.</p>\n\n<p>Third, avoid allocating objects with <code>new</code> if automatic storage duration is an option, too. So you'd overcome the complete issue if you wrote:</p>\n\n<pre><code>class Field\n{\nprivate:\n    size_t square[5];\n};\n\nint main() {\n    Field f;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9095340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/710c52935387a0e7644ed5a5c9ad5cc7?s=128&d=identicon&r=PG&f=1", "display_name": "  Vilkoxd", "link": "https://stackoverflow.com/users/9095340/vilkoxd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 47800247, "answer_count": 3, "score": -1, "last_activity_date": 1513191797, "creation_date": 1513190987, "question_id": 47800179, "link": "https://stackoverflow.com/questions/47800179/how-to-correctly-deallocate-class-member", "title": "How to correctly deallocate class member?", "body": "<p>\nShould I use <code>delete</code> overload or <code>del()</code> function or something else to deallocate class member?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Field\n{\nprivate:\n    size_t* square = new size_t[5];\npublic:\n    void del()\n    {\n        delete[] square;\n    }\n    void operator delete (void* p)\n    {\n        delete[] reinterpret_cast&lt;Field*&gt;(p)-&gt;square;\n    }\n};\nint main()\n{\n    Field f;\n\n    delete &amp;f; \n    //or\n    f.del();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1513190932, "post_id": 47800141, "comment_id": 82561415, "body": "Since <code>arr[10]</code> is local, its elements are not initialized to zero unless you tell the compiler to do so: <code>arr[0] = {0}</code>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1513190935, "post_id": 47800141, "comment_id": 82561416, "body": "With raw arrays, always pass the length. Don&#39;t rely on the sizeof trick as it only works in some cases (but you <i>always</i> can start by passing the length)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513190971, "post_id": 47800141, "comment_id": 82561435, "body": "Three problems: You <i>don&#39;t</i> initialize the array; Passing an array to a function lets it decay to a <i>pointer</i> to its first element; And lastly, doing <code>sizeof</code> on a pointer returns the size of the pointer itself and not to the memory it points to."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1513190980, "post_id": 47800141, "comment_id": 82561443, "body": "@crashmstr That&#39;s not entirely true. You can use reference to array types. The reason is usually only works in the same scope as the declaration is that people usually let their array decay to a pointer which loses the size information."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1513197521, "post_id": 47800141, "comment_id": 82564722, "body": "You are not using <code>std::vector</code>."}], "owner": {"reputation": 1414, "user_id": 5183807, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/34e6711722a4f7d037a3b8ee8de5e491?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/5183807/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1513190943, "answer_count": 0, "score": 0, "last_activity_date": 1513190858, "creation_date": 1513190858, "question_id": 47800141, "link": "https://stackoverflow.com/questions/47800141/unexpected-behavior-in-printarray-method-c", "closed_reason": "Duplicate", "title": "Unexpected behavior in printArray method c++", "body": "<p>I am trying to print an array using this code.</p>\n\n<p>My expectation would be that it prints out a bunch of 0s but for some reason it is not doing so</p>\n\n<pre><code>int arr[10]; //Initialize all 10 elements to 0\nprintArray(arr);\nvoid printArray(int in[]) {\n    cout &lt;&lt; \"Array: \" &lt;&lt; endl;\n    for (int i = 0; i &lt; sizeof(in) / sizeof(in[0]); i++) {\n        cout &lt;&lt; \", \" &lt;&lt; in[i];\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "if-statement", "lambda", "conditional-operator"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 4, "creation_date": 1513188753, "post_id": 47799615, "comment_id": 82560385, "body": "The lambda uses the returned expression to deduce the return type, so it can&#39;t possibly deduce <code>void</code> from <code>return &lt;something&gt;</code>... There&#39;s an error in this book."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 1, "creation_date": 1513188853, "post_id": 47799615, "comment_id": 82560432, "body": "<code>[](int i) { if (i &lt; 0) return -i; else return i; }</code> is perfectly fine as of C++14."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 5, "creation_date": 1513189492, "post_id": 47799615, "comment_id": 82560721, "body": "What is written in the book was true for C++11 but got improved with C++14 to allow multiple <code>return</code> statements (as long as the returned type matches)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1513189838, "post_id": 47799615, "comment_id": 82560860, "body": "This is interesting times for C++. A lot of new functionality has been added and updated in a relatively short period of time, so your reading material has to be up to date or you have to ensure that your compiler is building according to the rules of whatever standard revision the reading material was written to address."}, {"owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1568672036, "post_id": 47799615, "comment_id": 102340904, "body": "@DietmarK&#252;hl: But the same code works fine on C++11?!!! Does this mean an error in the book?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "edited": false, "score": 0, "creation_date": 1568686626, "post_id": 47799615, "comment_id": 102343743, "body": "@ItachiUchiwa The code using two <code>return</code> statements should not compile with C++11: with C++11 return type deduction only works when there is one <code>return</code> statement."}, {"owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1568720272, "post_id": 47799615, "comment_id": 102356637, "body": "@DietmarK&#252;hl: But I&#39;ve run the very code on &quot;wandbox.org&quot; and &quot;ideone.com&quot; and  <a href=\"https://repl.it/languages/cpp11\" rel=\"nofollow noreferrer\">repl.it/languages/cpp11</a> and works fine! Even the trailing return type is removed still works?!! Does this mean this works because of some compiler-feature only?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8927332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b8b2ed495e98ec369b5e60f8a0b7a5?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Wamba", "link": "https://stackoverflow.com/users/8927332/stephane-wamba"}, "edited": false, "score": 0, "creation_date": 1513190714, "post_id": 47799837, "comment_id": 82561305, "body": "Thank you, I&#39;m using C++14 compiler , thus it&#39;s the real reason."}, {"owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "reply_to_user": {"reputation": 53, "user_id": 8927332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b8b2ed495e98ec369b5e60f8a0b7a5?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Wamba", "link": "https://stackoverflow.com/users/8927332/stephane-wamba"}, "edited": false, "score": 0, "creation_date": 1568671766, "post_id": 47799837, "comment_id": 102340831, "body": "@StephaneWamba: I am stuck at the same point. But the OP&#39;s code works even on C++11. So is the author wrong?"}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 4, "last_activity_date": 1513189595, "creation_date": 1513189595, "answer_id": 47799837, "question_id": 47799615, "link": "https://stackoverflow.com/questions/47799615/return-type-deduction-of-lambda-expressions-of-if-else-statements/47799837#47799837", "title": "Return type deduction of lambda expressions of if-else statements", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda</a>:</p>\n\n<blockquote>\n  <p>... the return type of the closure's operator() is determined according to\n  the following rules:</p>\n  \n  <ul>\n  <li><p>if the body consists of nothing but a single return statement with an\n  expression, the return type is the type of the returned expression\n  (after lvalue-to-rvalue, array-to-pointer, or function-to-pointer\n  implicit conversion); otherwise, the return type is void. <em>(until\n  C++14)</em></p></li>\n  <li><p>The return type is deduced from return statements as if for a function\n  whose return type is declared auto. <em>(since C++14)</em></p></li>\n  </ul>\n</blockquote>\n\n<p>So the author just describes the situation before C++14, since C++14 the code works perfectly.</p>\n"}], "owner": {"reputation": 53, "user_id": 8927332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b8b2ed495e98ec369b5e60f8a0b7a5?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Wamba", "link": "https://stackoverflow.com/users/8927332/stephane-wamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 1, "accepted_answer_id": 47799837, "answer_count": 1, "score": 2, "last_activity_date": 1513189595, "creation_date": 1513188577, "question_id": 47799615, "link": "https://stackoverflow.com/questions/47799615/return-type-deduction-of-lambda-expressions-of-if-else-statements", "title": "Return type deduction of lambda expressions of if-else statements", "body": "<p>I'm reading C++ primer 5th edition, chapter 10(lambdas expressions), Here is a program that is intended to replace negative values in a vector by their absolute value.</p>\n\n<pre><code>transform(vi.begin(), vi.end(), vi.begin(),\n      [](int i) { if (i &lt; 0) return -i; else return i; });\n</code></pre>\n\n<p>The author says that:</p>\n\n<blockquote>\n  <p>This code won't compile because the lambda infers the return type as <code>void</code> but we returned a value and to fix this, we must use a trailing return type.</p>\n</blockquote>\n\n<p>But when I compile this code with GNU GCC Compiler on Windows, it works well.</p>\n\n<p>The author also says that:</p>\n\n<blockquote>\n  <p>This version compile because  we need not specify the return type,\n  because that type can be inferred from the type of the conditional\n  operator.</p>\n</blockquote>\n\n<pre><code>transform(vi.begin(), vi.end(), vi.begin(),\n          [](int i) { return i &lt; 0 ? -i : i; });\n</code></pre>\n\n<p>So, my questions are:</p>\n\n<ul>\n<li>Why with the first version, the lambda infers the return type as void and why does GNU GCC compiler accept this.*(I thought that maybe because of optimizations).?</li>\n<li>Why with the second version, the return type can be inferred from the type of the conditional operator?</li>\n</ul>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1513186633, "post_id": 47799080, "comment_id": 82559286, "body": "Try <code>Base&lt;T&gt;::i = 1;</code> or <code>this-&gt;i = 1;</code>."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1513186773, "post_id": 47799080, "comment_id": 82559370, "body": "You&#39;ll need to qualify access to members in the base with something depending a template name. You can use <code>Base&lt;T&gt;::i</code> or <code>this-&gt;i</code>: both approaches will work. The problem you encounter is that phase I look-up doesn&#39;t find <code>i</code> as <code>i</code> doesn&#39;t depend on a template parameter. Adding the qualification delays look-up until phase II name look-up."}, {"owner": {"reputation": 535, "user_id": 1131907, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d84e8eb6d36627f0365acc886bc0812d?s=128&d=identicon&r=PG", "display_name": "Nicola Mori", "link": "https://stackoverflow.com/users/1131907/nicola-mori"}, "edited": false, "score": 0, "creation_date": 1513187102, "post_id": 47799080, "comment_id": 82559539, "body": "Thanks for your help, the proposed solutions work. So I guess that the solution of the question I linked is flawed. If one is willing to write an answer then I&#39;ll accept it."}], "owner": {"reputation": 535, "user_id": 1131907, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d84e8eb6d36627f0365acc886bc0812d?s=128&d=identicon&r=PG", "display_name": "Nicola Mori", "link": "https://stackoverflow.com/users/1131907/nicola-mori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1513186745, "answer_count": 0, "score": 0, "last_activity_date": 1513186403, "creation_date": 1513186403, "question_id": 47799080, "link": "https://stackoverflow.com/questions/47799080/template-derived-class-of-a-template-base-class", "closed_reason": "Duplicate", "title": "Template derived class of a template base class", "body": "<p>I need to define a template derived class of a template base class. The question has been asked and answered before (e.g. <a href=\"https://stackoverflow.com/questions/12895775/class-template-inheritance-c\">here</a>), but the accepted solution gives me a compiler error. For example, this code:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Base {\nprotected:\n    T i;\n};\n\ntemplate&lt;typename T&gt;\nclass Derived : public Base&lt;T&gt; {\npublic:\n    void f(){\n        i = 1;\n    }\n};\n\nint main(){\n    Derived&lt;int&gt; d;\n}\n</code></pre>\n\n<p>give the following errors:</p>\n\n<pre><code>$ g++ test.cpp \ntest2.cpp: In member function \u2018void Derived&lt;T&gt;::f()\u2019:\ntest2.cpp:11:9: error: \u2018i\u2019 was not declared in this scope\n         i = 1;\n         ^\n$ clang++ test2.cpp \ntest2.cpp:11:9: error: use of undeclared identifier 'i'\n        i = 1;\n        ^\n1 error generated.\n</code></pre>\n\n<p>So it seems like the derived class doesn't see the variable defined in the mother (tested with gcc 7.2.1 and clang 5.0.0). For sure I must be doing something wrong, but I can't figure out what, especially given the fact that in the accepted answer to the <a href=\"https://stackoverflow.com/questions/12895775/class-template-inheritance-c\">question I linked</a> the derived class seems to see the 'counter' variable defined in the mother class.\nThanks for the help.</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 0, "creation_date": 1513187290, "post_id": 47799074, "comment_id": 82559647, "body": "Have you tried assigning <code>&quot;Example&quot;</code> to a <code>std::string</code> variable before passing it to the <code>RenderWindow</code> constructor? Also, can you specify the compiler and platform you are using?"}, {"owner": {"reputation": 159, "user_id": 8212390, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IIgFbouePYo/AAAAAAAAAAI/AAAAAAAAAE4/8YeCc361Ncw/photo.jpg?sz=128", "display_name": "xX randomryze Xx", "link": "https://stackoverflow.com/users/8212390/xx-randomryze-xx"}, "reply_to_user": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 0, "creation_date": 1513187449, "post_id": 47799074, "comment_id": 82559729, "body": "Still not fixed"}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1513187921, "post_id": 47799074, "comment_id": 82559984, "body": "Which compiler are you using? This line should compile fine out of the box. Also your screenshot doesn&#39;t show a runtime error, it&#39;s a compiler error. Did you try to actually compile it? If this is Visual Studio Code, for me it sometimes has issues interpreting the headers properly and you can ignore them."}, {"owner": {"reputation": 239, "user_id": 4288960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e706d68fab8d64d1e541b4e8dd0762?s=128&d=identicon&r=PG&f=1", "display_name": "morsisko", "link": "https://stackoverflow.com/users/4288960/morsisko"}, "edited": false, "score": 0, "creation_date": 1513187991, "post_id": 47799074, "comment_id": 82560018, "body": "Try that one from SFML webpage and check if it&#39;s working for you <code>sf::RenderWindow window(sf::VideoMode(200, 200), &quot;SFML works!&quot;);</code>"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1513259071, "post_id": 47799074, "comment_id": 82591012, "body": "Code is correct, all params passes. Are you sure that you updated library files correct? Feels like they are corrupted and you forgot to replace some of them."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 14674724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjKTHFHNpFjA3YMZESIFLE79TA7_zNK-1H-RpWyPw=k-s128", "display_name": "Prabhat Maurya", "link": "https://stackoverflow.com/users/14674724/prabhat-maurya"}, "is_accepted": false, "score": 0, "last_activity_date": 1618460390, "creation_date": 1618460390, "answer_id": 67102229, "question_id": 47799074, "link": "https://stackoverflow.com/questions/47799074/sfml-2-4-2-videomode-error/67102229#67102229", "title": "SFML 2.4.2 VideoMode error", "body": "<p>Try to remove depth in VideoMode</p>\n<pre><code>sf::VideoMode(size,size)\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 8212390, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IIgFbouePYo/AAAAAAAAAAI/AAAAAAAAAE4/8YeCc361Ncw/photo.jpg?sz=128", "display_name": "xX randomryze Xx", "link": "https://stackoverflow.com/users/8212390/xx-randomryze-xx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 540, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1618460390, "creation_date": 1513186385, "last_edit_date": 1513244755, "question_id": 47799074, "link": "https://stackoverflow.com/questions/47799074/sfml-2-4-2-videomode-error", "title": "SFML 2.4.2 VideoMode error", "body": "<p>I decided to try with SFML again but here is when a new update comes and you don't know what to do. I managed to find how to setup my SFML but here the error is when i start the program</p>\n\n<pre><code>sf::RenderWindow window(sf::VideoMode(width, height, 32), \"Example\");\n</code></pre>\n\n<p>and here is a photo of the error and the code\n<a href=\"https://i.stack.imgur.com/Bdvrv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bdvrv.png\" alt=\"error\"></a></p>\n\n<p>I tried fixing it but still noting, i watched tutorials pictures of the code examples but noting happened again.\ni hope you can help me with this problem.</p>\n\n<p>after compiling it i got this many errors</p>\n\n<blockquote>\n  <p>Severity  Code    Description Project File    Line    Column  Suppression State\n  Error (active)  E1696   cannot open source file \"vector\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Window\\VideoMode.hpp 32  1<br>\n  Error   C1083   Cannot open include file: 'ostream': No such file or directory  MoonSurvival    C:\\SFML-2.4.2\\include\\SFML\\System\\Err.hpp   32  1<br>\n  Error (active)  E0018   expected a ')'  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    150 35<br>\n  Error (active)  E0020   identifier \"Iterator\" is undefined  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    479 5<br>\n  Error (active)  E0020   identifier \"ConstIterator\" is undefined MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    489 5<br>\n  Error (active)  E0020   identifier \"Iterator\" is undefined  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    503 5<br>\n  Error (active)  E0020   identifier \"ConstIterator\" is undefined MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    517 5<br>\n  Error (active)  E0065   expected a ';'  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    52  30<br>\n  Error (active)  E0065   expected a ';'  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    53  30<br>\n  Error (active)  E0065   expected a ';'  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    276 22<br>\n  Error (active)  E0065   expected a ';'  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    286 22<br>\n  Error (active)  E0065   expected a ';'  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    299 22<br>\n  Error (active)  E0065   expected a ';'  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    527 22<br>\n  Error (active)  E0077   this declaration has no storage class or type specifier MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    276 5<br>\n  Error (active)  E0077   this declaration has no storage class or type specifier MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    286 5<br>\n  Error (active)  E0077   this declaration has no storage class or type specifier MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    299 5<br>\n  Error (active)  E0077   this declaration has no storage class or type specifier MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    527 5<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Glsl.inl    40  61<br>\n  Error (active)  E0135   namespace \"std\" has no member \"string\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Texture.hpp 127 34<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Texture.hpp 159 48<br>\n  Error (active)  E0135   namespace \"std\" has no member \"ostream\" MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\Err.hpp   41  22<br>\n  Error (active)  E0135   namespace \"std\" has no member \"basic_string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    52  18<br>\n  Error (active)  E0135   namespace \"std\" has no member \"basic_string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    53  18<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    58  23<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    78  38<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    78  60<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    106 47<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    106 69<br>\n  Error (active)  E0135   namespace \"std\" has no member \"string\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    118 23<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    118 54<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    118 76<br>\n  Error (active)  E0135   namespace \"std\" has no member \"wstring\" MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    134 23<br>\n  Error (active)  E0135   namespace \"std\" has no member \"string\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    253 10<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    253 41<br>\n  Error (active)  E0135   namespace \"std\" has no member \"locale\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    253 63<br>\n  Error (active)  E0135   namespace \"std\" has no member \"wstring\" MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    266 10<br>\n  Error (active)  E0135   namespace \"std\" has no member \"basic_string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    276 10<br>\n  Error (active)  E0135   namespace \"std\" has no member \"basic_string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    286 10<br>\n  Error (active)  E0135   namespace \"std\" has no member \"basic_string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    299 10<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    332 29<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    345 30<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    365 10<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    387 21<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    387 43<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    399 22<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    413 10<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    413 46<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    427 23<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    427 45<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    456 27<br>\n  Error (active)  E0135   namespace \"std\" has no member \"size_t\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    456 49<br>\n  Error (active)  E0135   namespace \"std\" has no member \"basic_string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    527 10<br>\n  Error (active)  E0260   explicit type is missing ('int' assumed)    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    52  13<br>\n  Error (active)  E0260   explicit type is missing ('int' assumed)    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    53  13<br>\n  Error (active)  E0260   explicit type is missing ('int' assumed)    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    150 18<br>\n  Error (active)  E0260   explicit type is missing ('int' assumed)    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    221 5<br>\n  Error (active)  E0260   explicit type is missing ('int' assumed)    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    236 5<br>\n  Error (active)  E0289   no instance of constructor \"sf::RenderWindow::RenderWindow\" matches the argument list   MoonSurvival    c:\\Users\\Kids\\source\\repos\\MoonSurvival\\MoonSurvival\\Launcher.cpp   17  26<br>\n  Error (active)  E0297   expected an operator    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    221 14<br>\n  Error (active)  E0297   expected an operator    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    236 14<br>\n  Error (active)  E1696   cannot open source file \"vector\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\ConvexShape.hpp 33  1<br>\n  Error (active)  E1696   cannot open source file \"map\"   MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Font.hpp    37  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Font.hpp    38  1<br>\n  Error (active)  E1696   cannot open source file \"vector\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Font.hpp    39  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Image.hpp   34  1<br>\n  Error (active)  E1696   cannot open source file \"vector\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Image.hpp   35  1<br>\n  Error (active)  E1696   cannot open source file \"algorithm\" MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Rect.hpp    32  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\RenderWindow.hpp    35  1<br>\n  Error (active)  E1696   cannot open source file \"map\"   MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Shader.hpp  37  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Shader.hpp  38  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Text.hpp    38  1<br>\n  Error (active)  E1696   cannot open source file \"vector\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\Text.hpp    39  1<br>\n  Error (active)  E1696   cannot open source file \"vector\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\Graphics\\VertexArray.hpp 36  1<br>\n  Error (active)  E1696   cannot open source file \"ostream\"   MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\Err.hpp   32  1<br>\n  Error (active)  E1696   cannot open source file \"cstdio\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\FileInputStream.hpp   35  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\FileInputStream.hpp   36  1<br>\n  Error (active)  E1696   cannot open source file \"cstdlib\"   MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\MemoryInputStream.hpp 34  1<br>\n  Error (active)  E1696   cannot open source file \"iterator\"  MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    33  1<br>\n  Error (active)  E1696   cannot open source file \"locale\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    34  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\String.hpp    35  1<br>\n  Error (active)  E1696   cannot open source file \"cstdlib\"   MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\Thread.hpp    33  1<br>\n  Error (active)  E1696   cannot open source file \"cstdlib\"   MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\ThreadLocal.hpp   33  1<br>\n  Error (active)  E1696   cannot open source file \"algorithm\" MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\Utf.hpp   32  1<br>\n  Error (active)  E1696   cannot open source file \"locale\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\Utf.hpp   33  1<br>\n  Error (active)  E1696   cannot open source file \"string\"    MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\Utf.hpp   34  1<br>\n  Error (active)  E1696   cannot open source file \"cstdlib\"   MoonSurvival    c:\\SFML-2.4.2\\include\\SFML\\System\\Utf.hpp   35  1   </p>\n</blockquote>\n\n<p>and its really big, but when i saw it i touch maybe its because my project is on release not debug? i will try but for now that's the error.</p>\n\n<p>[FINAL GOOD EDIT]\neverything is just fine maybe i have deleted something in the properties window but i made new project and everything is  just fine</p>\n"}, {"tags": ["c++", "for-loop", "simplify"], "comments": [{"owner": {"reputation": 8813, "user_id": 1812788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Zn2AX.jpg?s=128&g=1", "display_name": "Tam&#225;s Zahola", "link": "https://stackoverflow.com/users/1812788/tam%c3%a1s-zahola"}, "edited": false, "score": 1, "creation_date": 1513186138, "post_id": 47798962, "comment_id": 82559014, "body": "Yes. Remove the whole <code>if</code>. It\u2019s redundant."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 15, "creation_date": 1513186191, "post_id": 47798962, "comment_id": 82559044, "body": "<code>i = 0; do { .... } while (++i);</code>"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 2, "creation_date": 1513186237, "post_id": 47798962, "comment_id": 82559070, "body": "Removing the if changes this into an infinite loop."}, {"owner": {"reputation": 167, "user_id": 5000251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02fd22e595e3bd750636cedf9143343?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Koeppen", "link": "https://stackoverflow.com/users/5000251/michael-koeppen"}, "edited": false, "score": 1, "creation_date": 1513186271, "post_id": 47798962, "comment_id": 82559085, "body": "No it isn&#39;t! When i is 0xFF and the loop is over i gets an overflow and is again at 0."}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1513186294, "post_id": 47798962, "comment_id": 82559097, "body": "a do...while seems exactly like what you want."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1513186296, "post_id": 47798962, "comment_id": 82559098, "body": "@n.m.: Nice! IMHO it would deserve to be an answer..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 6, "creation_date": 1513186358, "post_id": 47798962, "comment_id": 82559130, "body": "But seriously, just use <code>int</code> (not any other type)."}, {"owner": {"reputation": 167, "user_id": 5000251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02fd22e595e3bd750636cedf9143343?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Koeppen", "link": "https://stackoverflow.com/users/5000251/michael-koeppen"}, "edited": false, "score": 0, "creation_date": 1513186699, "post_id": 47798962, "comment_id": 82559340, "body": "do-while looks pretty good. I forgot about the pre increment. I&#39;m trying to minimize the size of my code to us it with a microcontroller."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1513187529, "post_id": 47798962, "comment_id": 82559772, "body": "Are you sure microcontroller has 8bit registers? Otherwise you just make things worse by not using <code>int</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1513190654, "post_id": 47798962, "comment_id": 82561272, "body": "A small simplification:      <code>for (uint8_t i = 0; ; ++i) {         &#47;* do stuff... *&#47;         if (i == 0xFF)             break;     }</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1513198091, "post_id": 47798962, "comment_id": 82564983, "body": "Beware, some bit operations are undefined for signed <i>int</i>eger types."}], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 7, "last_activity_date": 1513186582, "creation_date": 1513186582, "answer_id": 47799128, "question_id": 47798962, "link": "https://stackoverflow.com/questions/47798962/c-whats-the-best-way-to-end-this-8-bit-for-loop/47799128#47799128", "title": "C++ What&#39;s the best way to end this 8-Bit for loop", "body": "<p>To cover the full range, we just need to do the test after the body of the loop, so using a do...while is a nice fit here:</p>\n\n<pre><code>uint8_t i = 0;\ndo {\n...\n} while (i++ &lt; 0xFF);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1513187099, "post_id": 47799213, "comment_id": 82559538, "body": "Please always comment heavily how and why this works! <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_astonishment\" rel=\"nofollow noreferrer\">Principle of Least Astonishment</a>"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1513196854, "post_id": 47799213, "comment_id": 82564387, "body": "While neat and all, that it&#39;s weird-looking means it ought to be better than the alternatives.  Still, to see how g++ compared your code to the code in my loop, it was interesting to see that it was 100% identical asm for both solutions.  <a href=\"https://godbolt.org/g/ec8RFf\" rel=\"nofollow noreferrer\">godbolt.org/g/ec8RFf</a>   You could do ++i in your condition to get rid of the in-body loop management code."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1513199242, "post_id": 47799213, "comment_id": 82565513, "body": "@ChrisUzdavinis: :) yep, that&#39;s why I put the note in the answer. And even for 8-bit targets, they could compile to the same asm with good compilers.  Basically, our solutions are the same. I&#39;ve just added mine, because it doesn&#39;t have a 0xff constant. I&#39;ve put <code>i++;</code> into the loop intentionally, because I don&#39;t really like modifying the loop variable in the condition itself, it is clearer in my opinion. But it has drawbacks too: if there is a <code>continue</code> statement in the loop, so it is really a matter of preference. It&#39;s a pity that we don&#39;t have backward tested <code>for</code> loops :)"}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 3, "last_activity_date": 1513188630, "last_edit_date": 1513188630, "creation_date": 1513186889, "answer_id": 47799213, "question_id": 47798962, "link": "https://stackoverflow.com/questions/47798962/c-whats-the-best-way-to-end-this-8-bit-for-loop/47799213#47799213", "title": "C++ What&#39;s the best way to end this 8-Bit for loop", "body": "<p>As overflow for unsigned numbers are well-defined, this loop can do it:</p>\n\n<pre><code>uint8_t i = 0;\ndo {\n    // use i here\n    i++;\n} while (i);\n</code></pre>\n\n<p><i>i</i> overflows (becomes 0) at the 256th iteration and the while stops because the condition is false.</p>\n\n<p>Note: this trick is only worth it, if you are on a &lt;32-bit platform. On >=32-bit platforms, there is a high chance that this trick is transformed into a loop which uses >=32-bit wide counter.</p>\n\n<p>On the other hand, on 8-bit platforms, I think this is the most efficient and smallest 256-iteration loop.</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 5000251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02fd22e595e3bd750636cedf9143343?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Koeppen", "link": "https://stackoverflow.com/users/5000251/michael-koeppen"}, "edited": false, "score": 0, "creation_date": 1513859380, "post_id": 47799830, "comment_id": 82817546, "body": "Isn&#39;t that way to oversized?"}], "tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": false, "score": 1, "last_activity_date": 1513190299, "last_edit_date": 1513190299, "creation_date": 1513189564, "answer_id": 47799830, "question_id": 47798962, "link": "https://stackoverflow.com/questions/47798962/c-whats-the-best-way-to-end-this-8-bit-for-loop/47799830#47799830", "title": "C++ What&#39;s the best way to end this 8-Bit for loop", "body": "<p>Not the shortest, but the coolest way to do this is to declare an array with all possible values of <code>uint8_t</code> and iterate over it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;limits&gt;\n\nnamespace detail {\ntemplate&lt;typename int_t, int_t cnt, bool not_done, int_t... rest&gt;\nstruct range_impl {\n    static constexpr auto&amp; value = range_impl&lt;int_t, cnt - 1,\n        (cnt - 1) != std::numeric_limits&lt;int_t&gt;::min(), cnt, rest...&gt;::value;\n};\n\ntemplate&lt;typename int_t, int_t cnt, int_t... rest&gt;\nstruct range_impl&lt;int_t, cnt, false, rest...&gt; {\n    static constexpr int_t value[] = { cnt, rest... };\n};\n\ntemplate&lt;typename int_t, int_t cnt, int_t... rest&gt;\nconstexpr int_t range_impl&lt;int_t, cnt, false, rest...&gt;::value[];\n} // detail\n\ntemplate&lt;typename int_t&gt;\nstruct range : public detail::range_impl&lt;int_t, std::numeric_limits&lt;int_t&gt;::max(), true&gt; {};\n\nint main(int argc, char** argv) {\n    for(uint8_t i: range&lt;uint8_t&gt;::value) {\n        std::cout &lt;&lt;  (int) i &lt;&lt; std::endl;\n    }\n\n    for(int8_t i: range&lt;int8_t&gt;::value) {\n        std::cout &lt;&lt;  (int) i &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>The <code>range</code> struct generates the array in compile time. This code can be used for any integer type.</p>\n"}], "owner": {"reputation": 167, "user_id": 5000251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02fd22e595e3bd750636cedf9143343?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Koeppen", "link": "https://stackoverflow.com/users/5000251/michael-koeppen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1513190299, "creation_date": 1513186000, "question_id": 47798962, "link": "https://stackoverflow.com/questions/47798962/c-whats-the-best-way-to-end-this-8-bit-for-loop", "title": "C++ What&#39;s the best way to end this 8-Bit for loop", "body": "<p>Is it possible to write this for loop shorter or more elegant without using <em>uint16_t</em>? There is an overflow when <em>i</em> reaches <em>0xFF</em>.</p>\n\n<pre><code>for (uint8_t i = 0; i &lt;= 0xFF; i++)\n{\n    // do something\n    if (i == 0xFF)\n        break;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "answers": [{"tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": true, "score": 6, "last_activity_date": 1513185862, "last_edit_date": 1513185862, "creation_date": 1513185561, "answer_id": 47798869, "question_id": 47798859, "link": "https://stackoverflow.com/questions/47798859/cannot-overload-operator-because-cannot-access-private-member-declared-in-class/47798869#47798869", "title": "Cannot overload operator because cannot access private member declared in class", "body": "<p>You have to return a reference.</p>\n\n<pre><code>friend ostream&amp; operator&lt;&lt; (ostream &amp;stream, const Item &amp;item)\n//            ^\n</code></pre>\n\n<p>The copy-constructor of streams is deleted/private.</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1513186570, "creation_date": 1513186570, "answer_id": 47799123, "question_id": 47798859, "link": "https://stackoverflow.com/questions/47798859/cannot-overload-operator-because-cannot-access-private-member-declared-in-class/47799123#47799123", "title": "Cannot overload operator because cannot access private member declared in class", "body": "<p>The problem is with:</p>\n\n<pre><code>friend ostream operator&lt;&lt; (ostream &amp;stream, const Item &amp;item){\n</code></pre>\n\n<p>You need to return the stream by reference, ostream objects are not copyable.</p>\n"}], "owner": {"reputation": 188, "user_id": 9052185, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Mwp28Ar8Xc8/AAAAAAAAAAI/AAAAAAAAON4/Yz2QGVH_5NU/photo.jpg?sz=128", "display_name": "Aashishkebab", "link": "https://stackoverflow.com/users/9052185/aashishkebab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 47798869, "answer_count": 2, "score": 1, "last_activity_date": 1513186570, "creation_date": 1513185511, "question_id": 47798859, "link": "https://stackoverflow.com/questions/47798859/cannot-overload-operator-because-cannot-access-private-member-declared-in-class", "title": "Cannot overload operator because cannot access private member declared in class", "body": "<p>I have a class with an operator overload as so:</p>\n\n<pre><code>friend ostream operator&lt;&lt; (ostream &amp;stream, const Item &amp;item){\n          stream &lt;&lt; item.title &lt;&lt; \" - \" &lt;&lt; item.format &lt;&lt; \" (Loaned to \" &lt;&lt; item.name &lt;&lt; \") on \" &lt;&lt; item.date;\n          return stream;\n    }\n</code></pre>\n\n<p>My program fails to compile and gives me the following error:</p>\n\n<pre><code>error C2248: 'std::basic_ios&lt;_Elem,_Traits&gt;::basic_ios' : cannot access private member declared in class 'std::basic_ios&lt;_Elem,_Traits&gt;'\n1&gt;        with\n1&gt;        [\n1&gt;            _Elem=char,\n1&gt;            _Traits=std::char_traits&lt;char&gt;\n1&gt;        ]\n1&gt;        c:\\program files (x86)\\microsoft visual studio 8\\vc\\include\\ios(151) : see declaration of 'std::basic_ios&lt;_Elem,_Traits&gt;::basic_ios'\n1&gt;        with\n1&gt;        [\n1&gt;            _Elem=char,\n1&gt;            _Traits=std::char_traits&lt;char&gt;\n1&gt;        ]\n1&gt;        This diagnostic occurred in the compiler generated function 'std::basic_ostream&lt;_Elem,_Traits&gt;::basic_ostream(const std::basic_ostream&lt;_Elem,_Traits&gt; &amp;)'\n1&gt;        with\n1&gt;        [\n1&gt;            _Elem=char,\n1&gt;            _Traits=std::char_traits&lt;char&gt;\n1&gt;        ]\n</code></pre>\n\n<p>What is going on? Why is it saying that a private member cannot be access, I am confused.</p>\n"}, {"tags": ["c++", "serialization", "boost", "boost-bimap"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1513213950, "post_id": 47798781, "comment_id": 82570450, "body": "My hash implementation simply <i>scales</i> better. You never mentioned any limit to the size of the bitsets. Therefore we cannot assume there is a limit. However, for small sizes, obviously the simpler hash function is much faster. Why would you <i>not</i> want to use it if it&#39;s faster? (Corrollary: Tell us what you are doing, for once, so we can tell you (<a href=\"https://stackoverflow.com/questions/46095002/insert-boostdynamic-bitset-into-boostbimap#comment79156105_46096861\">again</a>) to use <code>std::bitset&lt;64&gt;</code> or similar!). That&#39;s &gt;2 months ago."}, {"owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1513248301, "post_id": 47798781, "comment_id": 82584028, "body": "I am concerned about the space of <code>bimap</code> also which you mentioned in the earlier <a href=\"https://stackoverflow.com/questions/47530399/serialize-boostbimap-with-boostdynamic-bitset-as-key-value-pair\">answer</a> that  &quot;you&#39;re copying all the blocks on every key/value hash&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1513212882, "post_id": 47804359, "comment_id": 82570189, "body": "I&#39;ll <i>await</i> [sic, nomen est omen] further clarifications before I spend a lot more time here. Regardless, it&#39;s clear that performance doesn&#39;t necessarily come from complexity (in fact, it rarely does) and theoretically &quot;better&quot; resource complexity doesn&#39;t guarantee better behaviour in practice. You have to <i>really</i> know what you need, what you&#39;re ending up doing and why."}, {"owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "edited": false, "score": 0, "creation_date": 1513247923, "post_id": 47804359, "comment_id": 82583763, "body": "Thank you, please check the edit above, I hope it improved the question."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1513213713, "last_edit_date": 1513213713, "creation_date": 1513212764, "answer_id": 47804359, "question_id": 47798781, "link": "https://stackoverflow.com/questions/47798781/create-access-store-and-load-boostbimap-in-an-efficient-way/47804359#47804359", "title": "Create, access, store and load boost::bimap in an efficient way", "body": "<p>You framed the whole question in terms of unordered maps with bitsets. What is the <em>goal</em>? What real life problems are you modeling with this design?</p>\n\n<p>Just how big are your bitsets? What is the variance in size? What is the distribution in certain subsets of the bits? You might be far better of with a quick-and-dirty ad-hoc hash assuming some things than this general-purpose approach (see \u00b9 and \u00b2 below)</p>\n\n<p>You will want to reduce allocations, load \"packed\" data into a non-node-based container, control when the elements are sorted (instead of carrying that invariant all the time).</p>\n\n<p>I've had excellent results putting such containers in a Boost Interprocess shared memory segment / memory mapped file.</p>\n\n<h2>Benchmarks</h2>\n\n<p>I've used the following code to benchmark generating/saving/loading the data.</p>\n\n<blockquote>\n  <p>Note this implements none of the above suggestions, except it opts out of the hash-table choice. Not having to instantiate an archive each time you insert or lookup a key is going to help a lot. Also, bear in mind hash-tables do rehash when the load-factor is reached. Tuning is of the essence for them to really work smoothly.</p>\n</blockquote>\n\n<p><strong><kbd><a href=\"https://wandbox.org/permlink/tAPyxu5Hv77QucUL\" rel=\"nofollow noreferrer\">Live On Wandbox</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/archive/binary_iarchive.hpp&gt;\n#include &lt;boost/archive/binary_oarchive.hpp&gt;\n#include &lt;boost/bimap.hpp&gt;\n#include &lt;boost/bimap/multiset_of.hpp&gt;\n#include &lt;boost/dynamic_bitset/serialization.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nnamespace bimaps = boost::bimaps;\nusing Block = uint32_t;\nusing Bitset = boost::dynamic_bitset&lt;Block&gt;;\n\ntypedef boost::bimap&lt;bimaps::set_of&lt;Bitset&gt;, bimaps::multiset_of&lt;Bitset&gt;&gt; Index;\n\ntemplate &lt;typename Caption, typename F&gt;\nauto timed(Caption const&amp; task, F&amp;&amp; f) {\n    using namespace std::chrono;\n    using namespace std::chrono_literals;\n    struct _ {\n        high_resolution_clock::time_point s;\n        Caption const&amp; task;\n        ~_() { std::cout &lt;&lt; \" -- (\" &lt;&lt; task &lt;&lt; \" completed in \" &lt;&lt; (high_resolution_clock::now() - s) / 1.0s &lt;&lt; \"s)\\n\"; }\n    } timing { high_resolution_clock::now(), task };\n\n    return f();\n}\n\nint main(int argc, char**) {\n    using namespace std::string_literals;\n\n    auto gen_bitset = [\n        data=std::vector&lt;Block&gt;(64), // max 2048 bits\n        prng=std::mt19937{42} // { std::random_device{}() }\n    ]() mutable {\n        auto length_gen = std::uniform_int_distribution&lt;size_t&gt;(data.size()/2, data.size());\n        auto block_gen = std::uniform_int_distribution&lt;Block&gt;{};\n\n        size_t n = length_gen(prng);\n        std::generate_n(data.begin(), n, [&amp;]{ return block_gen(prng); });\n\n        return Bitset(data.begin(), data.begin()+n);\n    };\n\n    if (argc&gt;1) {\n        std::cout &lt;&lt; \"# Creating ... \" &lt;&lt; std::endl;\n        Index index;\n\n        timed(\"Generating data set\", [&amp;] {\n            for (size_t i = 0; i &lt; 52&lt;&lt;19; ++i) {\n                index.insert({gen_bitset(), gen_bitset()});\n            }\n        });\n\n        timed(\"Writing binary file\", [&amp;] {\n            std::ofstream ofs(\"binaryfile\", std::ios::binary);\n            boost::archive::binary_oarchive oa(ofs);\n            oa &lt;&lt; index;\n        });\n        std::cout &lt;&lt; \"Written \" &lt;&lt; index.size() &lt;&lt; \" key/value pairs\\n\";\n    } else {\n        std::cout &lt;&lt; \"# Loading ... \" &lt;&lt; std::endl;\n        Index index;\n\n        timed(\"Loading binary file\", [&amp;] {\n            std::ifstream ifs(\"binaryfile\", std::ios::binary); // name of loading file\n            boost::archive::binary_iarchive ia(ifs);\n            ia &gt;&gt; index;\n        });\n\n        std::cout &lt;&lt; \"Roundtripped \" &lt;&lt; index.size() &lt;&lt; \" key/value pairs\\n\";\n    }\n}\n</code></pre>\n\n<p>This creates a 11G file of 27262976 key/value pairs. All keys and values are uniformly random bitsets with lengths distributed uniformly between 1024..2048 bits.</p>\n\n<pre><code>\ue0b0 rm binaryfile                                                                    \n\ue0b0 time ./sotest 1                                                                  \n     -- (Generating data set completed in 228.499s)\n     -- (Writing binary file completed in 106.083s)\n    Written 27262976 key/value pairs\n\n    real    5m48.362s\n    user    5m32.876s\n    sys     0m14.704s\n\ue0b0 ls -ltrah binaryfile \n    -rw-rw-r-- 1 sehe sehe 11G dec 14 01:16 binaryfile\n\ue0b0 time ./sotest\n    # Loading binary file ... \n     -- (Loading binary file completed in 135.167s)\n    Roundtripped 27262976 key/value pairs\n\n    real    2m19.397s\n    user    2m11.624s\n    sys     0m7.764s\n</code></pre>\n\n<p>When reducing the dataset to your .25 million entries, I get a file of 106MiB\u00b9, and the following timings:</p>\n\n<pre><code>\ue0b0 rm binaryfile \n\ue0b0 time ./sotest 1\n    # Creating ... \n     -- (Generating data set completed in 1.13267s)\n     -- (Writing binary file completed in 0.586325s)\n    Written 262144 key/value pairs\n\n    real    0m1.825s\n    user    0m1.676s\n    sys     0m0.140s\n\ue0b0 ls -ltrah binaryfile \n    -rw-rw-r-- 1 sehe sehe 106M dec 14 01:44 binaryfile\n\ue0b0 time ./sotest\n    # Loading ... \n     -- (Loading binary file completed in 0.776928s)\n    Roundtripped 262144 key/value pairs\n\n    real    0m0.823s\n    user    0m0.764s\n    sys     0m0.056s\n</code></pre>\n\n<hr>\n\n<p>\u00b9 this basically tells me your bitsets are much smaller - I think this could be <em>strongly</em> in favour of other datastructure choices</p>\n\n<p>\u00b2 I noticed the older non-scaling hash implementation had been written by Richard Hodges <a href=\"https://stackoverflow.com/questions/46095002/insert-boostdynamic-bitset-into-boostbimap\">in an older answer</a>. You see what's happening? You ask for X, giving too little information for people to really know your problem, so you get the answer to X. But it's not optimal. Your real problem is something else.</p>\n\n<p>StackOverflow may be populated with the very best programmers, but they will not magically see through your <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X/Y problems</a>, even though they might smell it and try to draw it out. In the end, we're not psychics. There's no substitute to working together with senior mentors/coworkers that can guide you every step of the way.</p>\n"}], "owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513247890, "creation_date": 1513185204, "last_edit_date": 1513247890, "question_id": 47798781, "link": "https://stackoverflow.com/questions/47798781/create-access-store-and-load-boostbimap-in-an-efficient-way", "title": "Create, access, store and load boost::bimap in an efficient way", "body": "<p>In continuation with <a href=\"https://stackoverflow.com/questions/47530399/serialize-boostbimap-with-boostdynamic-bitset-as-key-value-pair\">my earlier question to serialize bitsets</a> to avoid creating bimap repeatedly on the same data, so save the bimap and load when needed.</p>\n\n<p>I have chosen <code>boost::bimap</code> to store data (in bitsets) in <code>&lt;key,value&gt;</code> pair due to the reason that it uses hashing technique and need O(1) operation to search. The <code>bimap</code> may have 40 million entries of bitsets and want to perform the following.</p>\n\n<ol>\n<li><p>Insert bitsets in the <code>bimap</code> in the minimum possible time. <a href=\"https://stackoverflow.com/questions/47530399/serialize-boostbimap-with-boostdynamic-bitset-as-key-value-pair\">Answer to my earlier question takes more time</a> (nearly 5 seconds for .25 million bitset entries which are 5 fold when compared to the hash function given under <strong>2</strong> ). For the same reason <code>unordered_set_of</code> and <code>unordered_multiset_of</code> is used.</p></li>\n<li><p>I want <code>bimap</code> to consume minimum memory as possible and avoid copying, unlike the following hash function. </p>\n\n<pre><code>namespace std {\n    template &lt;typename Block, typename Alloc&gt;\n    struct hash&lt;boost::dynamic_bitset&lt;Block, Alloc&gt; &gt; {\n\n        using bitset_type = boost::dynamic_bitset&lt;Block, Alloc&gt;;\n        using block_type = typename bitset_type::block_type ;\n\n        size_t operator()(boost::dynamic_bitset&lt;Block, Alloc&gt; const&amp; bs) const\n        {\n            thread_local static std::vector&lt;block_type&gt; block_data;\n            auto blocks = bs.num_blocks();\n            block_data.assign(blocks, 0);\n            to_block_range(bs, block_data.begin());\n            return boost::hash&lt;std::vector&lt;block_type&gt;&gt;()(block_data);\n        }\n    };\n}\n</code></pre></li>\n<li><p>O(1) search for a key/value.</p></li>\n<li><p>Load bimap in a short time. <a href=\"https://stackoverflow.com/questions/47530399/serialize-boostbimap-with-boostdynamic-bitset-as-key-value-pair\">Again, loading bimap takes much time</a> (nearly 20 seconds for a bimap of .25 million entries, size 12 MB).</p></li>\n</ol>\n\n<p>So I want to achieve 1,2,3, and 4 to <a href=\"https://stackoverflow.com/questions/47530399/serialize-boostbimap-with-boostdynamic-bitset-as-key-value-pair#comment82081966_47530399\">my already asked question</a> for which the answer code <a href=\"https://stackoverflow.com/users/85371/sehe\">@sehe</a> is shown below.</p>\n\n<pre><code>#include &lt;boost/archive/binary_iarchive.hpp&gt;\n#include &lt;boost/archive/binary_oarchive.hpp&gt;\n#include &lt;boost/bimap.hpp&gt;\n#include &lt;boost/bimap/unordered_multiset_of.hpp&gt;\n#include &lt;boost/bimap/unordered_set_of.hpp&gt;\n#include &lt;boost/dynamic_bitset/serialization.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;boost/iostreams/device/back_inserter.hpp&gt;\n#include &lt;boost/iostreams/stream_buffer.hpp&gt;\n#include &lt;boost/iostreams/stream.hpp&gt;\n\n#include &lt;boost/functional/hash.hpp&gt;\n\nnamespace serial_hashing { // see https://stackoverflow.com/questions/30097385/hash-an-arbitrary-precision-value-boostmultiprecisioncpp-int\n    namespace io = boost::iostreams;\n\n    struct hash_sink {\n        hash_sink(size_t&amp; seed_ref) : _ptr(&amp;seed_ref) {}\n\n        typedef char         char_type;\n        typedef io::sink_tag category;\n\n        std::streamsize write(const char* s, std::streamsize n) {\n            boost::hash_combine(*_ptr, boost::hash_range(s, s+n));\n            return n;\n        }\n      private:\n        size_t* _ptr;\n    };\n\n    template &lt;typename T&gt; struct hash_impl {\n        size_t operator()(T const&amp; v) const {\n            using namespace boost;\n            size_t seed = 0;\n            {\n                iostreams::stream&lt;hash_sink&gt; os(seed);\n                archive::binary_oarchive oa(os, archive::no_header | archive::no_codecvt);\n                oa &lt;&lt; v;\n            }\n            return seed;\n        }\n    };\n}\n\nnamespace std {\n    template &lt;typename Block, typename Alloc&gt; struct hash&lt;boost::dynamic_bitset&lt;Block, Alloc&gt; &gt;\n        : serial_hashing::hash_impl&lt;boost::dynamic_bitset&lt;Block, Alloc&gt; &gt; \n    {};\n} // namespace std\n\nnamespace bimaps = boost::bimaps;\nusing Bitset = boost::dynamic_bitset&lt;&gt;;\n\ntypedef boost::bimap&lt;\n    bimaps::unordered_set_of&lt;Bitset, std::hash&lt;Bitset&gt; &gt;,\n     bimaps::unordered_multiset_of&lt;Bitset, std::hash&lt;Bitset&gt; &gt; &gt; Index;\n\nint main() {\n    using namespace std::string_literals;\n\n    {\n        std::cout &lt;&lt; \"# Writing binary file ... \" &lt;&lt; std::endl;\n        Index index;\n        index.insert({Bitset(\"10010\"s), Bitset(\"1010110110101010101\"s)});\n\n        std::ofstream ofs(\"binaryfile\", std::ios::binary);\n        boost::archive::binary_oarchive oa(ofs);\n        oa &lt;&lt; index;\n    }\n\n    {\n        std::cout &lt;&lt; \"# Loading binary file ... \" &lt;&lt; std::endl;\n        std::ifstream ifs(\"binaryfile\", std::ios::binary); // name of loading file\n\n        boost::archive::binary_iarchive ia(ifs);\n\n        Index index;\n        ia &gt;&gt; index;\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong> </p>\n\n<p><strong>AIM</strong>\nI have a real life example where I have a large string say for example 2000 or more million characters and say for example 40-100 million short strings of length 200 or more characters. My aim is to search these short strings in the large string. I thought to create <code>bimap</code> of bitsets for the large string and then search the short string there in the bimap. I also thought to use <code>unordered</code> to get the insertion and search very fast unlike <code>ordered</code>.</p>\n\n<p>Key bitset length around 3-40 (all combination at a time).</p>\n\n<p>Value bitset length around 100-2000 (only one at a time for example if it is 100, all the value entries will be around 90-110 or so).</p>\n"}, {"tags": ["c++", "class", "stack", "heap-memory"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513185247, "post_id": 47798705, "comment_id": 82558416, "body": "You want to have a <code>virtual</code> destructor for <code>Object</code>: without that, you&#39;ll get undefined behaviour when <code>delete</code>ing a pointer to an object of derived type. Also, note that you&#39;ll need to provide a matching <code>operator delete()</code> when you define an <code>operator new()</code>."}, {"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513185298, "post_id": 47798705, "comment_id": 82558449, "body": "good point, I don&#39;t intend to derive from this class though."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1513185364, "post_id": 47798705, "comment_id": 82558496, "body": "The compiler only has a forward declaration of Object, it cannot know whether it has a destructor.  You&#39;ll have to define it before releaseObjects()."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513185395, "post_id": 47798705, "comment_id": 82558528, "body": "Oh, right: you actually call <code>delete o;</code> at a place where <code>Object</code> isn&#39;t defined. That leads to undefined behaviour if <code>Object</code> has a non-trivial destructor (i.e., has a destructor or a member which has non-trivial destructor."}, {"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1513185530, "post_id": 47798705, "comment_id": 82558629, "body": "hmmm. can you offer any hint how to fix this?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1513185728, "post_id": 47798705, "comment_id": 82558742, "body": "Sure: define your <code>ObjectManager::releaseObject()</code> function after <code>Object</code> was defined. Note the member functions don&#39;t have to be defined within the class definition."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513186118, "post_id": 47798705, "comment_id": 82558998, "body": "Put releaseObject() in your source file and get it out of the header. Also get <code>#include &quot;Object.h&quot;</code> out of the header and put that in the source file."}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1513186386, "post_id": 47798705, "comment_id": 82559149, "body": "Why not put a destroyer method together with the object as pair on the same list or on a parallel list?"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1513197660, "post_id": 47798705, "comment_id": 82564789, "body": "Also, consider making your heap_flag be a static thread_local variable, or you can get weird results if you have a multi-threadded application with both heap and stack instances of your object(s) in different threads."}, {"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1513197878, "post_id": 47798705, "comment_id": 82564874, "body": "thank you all! the warning problem is solved. Do you think this good approach to managing objects on the heap? is this a good practice?"}], "answers": [{"tags": [], "owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "is_accepted": false, "score": 0, "last_activity_date": 1513186208, "creation_date": 1513186208, "answer_id": 47799026, "question_id": 47798705, "link": "https://stackoverflow.com/questions/47798705/how-to-manage-and-process-objects-of-a-class-only-created-on-the-heap/47799026#47799026", "title": "How to manage and process objects of a class only created on the heap?", "body": "<p>Your problem is you are defining and implementing both <code>Object</code> and <code>ObjectManager</code> in the header files. This creates a circular dependency because each header file includes the other.</p>\n\n<p>A better approach would be to only have the class definitions in the headers and the bodies of the methods in cpp files.</p>\n\n<p>The warning you're receiving is due to Object not being  defined. Because you have <code>#pragma once</code> you aren't seeing the error you should be seeing (the effect of the circular dependency.) This is preventing the ObjectManager from seeing how the Object class is defined.</p>\n"}, {"tags": [], "owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "is_accepted": true, "score": 0, "last_activity_date": 1513196407, "last_edit_date": 1513196407, "creation_date": 1513187084, "answer_id": 47799254, "question_id": 47798705, "link": "https://stackoverflow.com/questions/47798705/how-to-manage-and-process-objects-of-a-class-only-created-on-the-heap/47799254#47799254", "title": "How to manage and process objects of a class only created on the heap?", "body": "<p>You can't call a destructor on a forward declared class.</p>\n\n<p>You must put the destructor call in a compilation unit where it can see the declaration of the destructor (e.g. where you #include the Object.h).</p>\n\n<p>Also, stylistic tips:</p>\n\n<ul>\n<li>On pass by value:\n\n<ul>\n<li>If the object is not going to be mutated or copied by the method, pass by const ref <code>foo (const Object&amp; bar) {}</code></li>\n<li>If the object is going to be mutated but not copied by the method, pass by reference <code>foo (Object&amp; bar) {}</code></li>\n<li>If the object is going to be copied by the method, pass by value</li>\n<li>If the method takes possession of the object, pass by pointer</li>\n</ul></li>\n<li><p>pragma once is not officially part of the standard, and rarely offers faster compilation in current generation compilers. Most style guides recommended to use include guards:</p>\n\n<pre><code>#ifndef SOME_NAME\n#define SOME_NAME\n... body ...\n#endif\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 47799254, "answer_count": 2, "score": 0, "last_activity_date": 1513196407, "creation_date": 1513184969, "question_id": 47798705, "link": "https://stackoverflow.com/questions/47798705/how-to-manage-and-process-objects-of-a-class-only-created-on-the-heap", "title": "How to manage and process objects of a class only created on the heap?", "body": "<p>I have an Object class and ObjectManager class that is supposed to hold pointers to Objects created on the heap and is in charge of housekeeping. i.e., (I don't want to have pointers to temporary Objects, for instance when an object is passed to a function by value). I'd like to do some process on the items in the ObjectManager class and later release the memory.</p>\n\n<p>Please consider the following files:</p>\n\n<p>\"Object.h\" file</p>\n\n<pre><code>#pragma once\n#include&lt;algorithm&gt;\n#include \"ObjectManager.h\"\n\nclass ObjectManager;\nclass Object{\nprivate:\nint value;\nstatic bool heap_flag;\n\npublic:\n\n    Object() {\n        if (heap_flag) {\n            heap_flag = false;\n            ObjectManager::vo.push_back(this);\n            }\n        }\n\n    ~Object() {}\n\n    void* operator new (size_t sz){\n        heap_flag = true;\n        return malloc(sz);\n    }\n\n    void setValue(int v) { value = v; }\n\n};\n</code></pre>\n\n<p>and \"ObjectManager.h\"</p>\n\n<pre><code>#pragma once\n#include \"Object.h\"\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass Object;\nclass ObjectManager{\n\nprivate:\n    ObjectManager() {}\n\npublic:\n\nstatic vector &lt;Object*&gt; vo;   // vector that holds pointers to all objects created on heap\n\nstatic void releaseObjects() {\n\n    size_t index = 0;\n        for (auto o : vo){\n            // iterate through the vector and delete the object create on heap\n\n            delete o;\n            vo[index] = NULL;\n            index++;\n        }\n\n\n    }\n\n\n};\n</code></pre>\n\n<p>finally in the client code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Object.h\"\n#include \"ObjectManager.h\"\n\nusing namespace std;\n\nbool Object::heap_flag = false;\nvector&lt;Object*&gt; ObjectManager::vo;\n\nvoid process_Heap_objects (vector&lt;Object*&gt;) {\n\n// ... code to iterate through the elements of a vector and do some process\n\n\n}\n\nint main() {\n\nObject o; // created on stack\nObject* po = new Object(); // created on heap\n\nObjectManager::vo[0]-&gt;setValue(100);\n\nprocess_Heap_Objects(ObjectManager::vo); \n\nObjectManager::releaseObjects();\n\nreturn 0;\n}\n</code></pre>\n\n<p>when I compile this file I get the following warning in  VS2013 -> \"warning C4150: deletion of pointer to incomplete type 'Object'; no destructor called\n1> Objectmanager.h: see declaration of 'Object'\"</p>\n\n<p>the code compiles fine and works as expected though.</p>\n\n<p>two questions:</p>\n\n<p>1- what does the warning mean?</p>\n\n<p>2- is this a good design? is there a better way to achieve this? what are your thoughts?</p>\n"}, {"tags": ["c++", "mpi", "cluster-computing"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1513202007, "post_id": 47798686, "comment_id": 82566713, "body": "To what extend are your machines different?"}, {"owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1513207207, "post_id": 47798686, "comment_id": 82568577, "body": "In this moment i don t know the exact difference. They are university computer and i didn t use them yet."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1513237374, "post_id": 47798686, "comment_id": 82577562, "body": "Everything should be absolutely homogeneous. Do not run MPI on a mix of different OS / installations / versions / MPI implementations / compiler options / binaries / CPUs unless you really know what you are doing."}, {"owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1513263215, "post_id": 47798686, "comment_id": 82593882, "body": "you are right. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "edited": false, "score": 0, "creation_date": 1513266005, "post_id": 47804203, "comment_id": 82595816, "body": "thanks! What does MPI_create_resized do exactly? I&#39;m new in mpi and especially with derived type."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "reply_to_user": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "edited": false, "score": 0, "creation_date": 1513296506, "post_id": 47804203, "comment_id": 82610636, "body": "<code>MPI_Type_create_resized()</code> basically set the extent. If you <code>MPI_Send()</code> two elements, the first one start at offset <code>0</code>, and the second one starts at offset <code>extent</code>. There is no guarantee MPI and the compiler will handle padding (if any) at the end of a struct, so it is safer to explicitly tell MPI what the compiler chose."}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": false, "score": 1, "last_activity_date": 1513211554, "creation_date": 1513211554, "answer_id": 47804203, "question_id": 47798686, "link": "https://stackoverflow.com/questions/47798686/c-mpi-derived-datatypes-on-different-machines/47804203#47804203", "title": "c++ mpi derived datatypes on different machines", "body": "<p>Here is how i would write this</p>\n\n<pre><code>typedef struct {\n    int provider;\n    double service;\n    double cost;\n} mystruct;\n\ndisplacements[0]=static_cast&lt;MPI_Aint&gt;(offsetof(mystruct, provider));\ndisplacements[1]=static_cast&lt;MPI_Aint&gt;(offsetof(mystruct, service));\ndisplacements[2]=static_cast&lt;MPI_Aint&gt;(offsetof(mystruct, cost));\nMPI_Type_struct(3,blocks,displacements,types,&amp;tmp_ddt);\nMPI_Type_create_resized(tmp_ddt, static_cast&lt;MPI_Aint&gt;(0), static_cast&lt;MPI_Aint&gt;(sizeof(mystruct)), &amp;MPI_Struct);\nMPI_Type_free(&amp;tmp_ddt);\n</code></pre>\n\n<p>I am pretty sure <code>MPI_INT</code> and <code>MPI_DOUBLE</code> are standard in bit length (fwiw,  Fortran <code>MPI_INTEGER</code> datatype is not), but the padding the compiler might use (or not) is not. that is why i'd rather use the <code>offsetof()</code> macro to populate the <code>displacements</code> array, and then resize the datatype.</p>\n"}], "owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513227203, "creation_date": 1513184900, "last_edit_date": 1513227203, "question_id": 47798686, "link": "https://stackoverflow.com/questions/47798686/c-mpi-derived-datatypes-on-different-machines", "title": "c++ mpi derived datatypes on different machines", "body": "<p>I want create a derived datatype. In particular I want a struct like this:</p>\n\n<pre><code>struct {\n    int provider;\n    double service;\n    double cost;\n} MPI_Struct;\n</code></pre>\n\n<p>Following a web manual, I should write something like that:</p>\n\n<pre><code>  int blocks[3] = {1,1,1};\n  MPI_Datatype types[3] ={MPI_INT,MPI_DOUBLE,MPI_DOUBLE};       \n  MPI_Aint displacements[3];\n\n  MPI_Datatype MPI_Struct;\n  MPI_Aint doublex;\n\n  MPI_Type_extent(MPI_DOUBLE,&amp;doublex);\n\n  displacements[0]=static_cast&lt;MPI_Aint&gt;(0);\n  displacements[1]=doublex;\n  displacements[2]=doublex+doublex;\n\n  MPI_Type_struct(3,blocks,displacements,types,&amp;MPI_Struct)\n</code></pre>\n\n<p>My matter is the use of <code>MPI_Type_extent</code> that it should be similar to <code>size_of()</code> function. Since my program will run on a cluster with different machines, with <code>MPI_Datatype_exent</code>, can I be sure that there are no problems in passing <code>My_Struct</code> from one process to another on a different machine?</p>\n\n<p>If I'm not wrong, the types are not standard in bit length..</p>\n"}, {"tags": ["c++", "sql-server", "stored-procedures", "ado"], "comments": [{"owner": {"reputation": 3835, "user_id": 6194971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fWwxo.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/6194971/joe-c"}, "edited": false, "score": 0, "creation_date": 1513185041, "post_id": 47798665, "comment_id": 82558280, "body": "I have seen this done by building an insert statement and passing that text to the SP.  One insert statement with many values."}, {"owner": {"reputation": 35, "user_id": 6131342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfa859fb0977b3589a35858619efddf?s=128&d=identicon&r=PG&f=1", "display_name": "user255377", "link": "https://stackoverflow.com/users/6131342/user255377"}, "reply_to_user": {"reputation": 3835, "user_id": 6194971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fWwxo.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/6194971/joe-c"}, "edited": false, "score": 0, "creation_date": 1513186483, "post_id": 47798665, "comment_id": 82559200, "body": "I would prefer not to have to build a really long query.  I was hoping to pass the data and then have the stored procedure do all the work."}, {"owner": {"reputation": 3835, "user_id": 6194971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fWwxo.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/6194971/joe-c"}, "edited": false, "score": 1, "creation_date": 1513187340, "post_id": 47798665, "comment_id": 82559677, "body": "You can pass in a long string with delimiters.  I have seen posts that mention a table valued parameter.  The long query approach is simple and allows a &#39;bulk insert&#39; rather than multiple single inserts (built by the SP) which has a big impact on performance."}, {"owner": {"reputation": 3835, "user_id": 6194971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fWwxo.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/6194971/joe-c"}, "edited": false, "score": 0, "creation_date": 1513187407, "post_id": 47798665, "comment_id": 82559709, "body": "Here is a post that describes the table parameter solution - <a href=\"https://stackoverflow.com/questions/5595353/how-to-pass-table-value-parameters-to-stored-procedure-from-net-code\" title=\"how to pass table value parameters to stored procedure from net code\">stackoverflow.com/questions/5595353/&hellip;</a>"}, {"owner": {"reputation": 35, "user_id": 6131342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfa859fb0977b3589a35858619efddf?s=128&d=identicon&r=PG&f=1", "display_name": "user255377", "link": "https://stackoverflow.com/users/6131342/user255377"}, "reply_to_user": {"reputation": 3835, "user_id": 6194971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fWwxo.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/6194971/joe-c"}, "edited": false, "score": 0, "creation_date": 1513188063, "post_id": 47798665, "comment_id": 82560057, "body": "So that post is using ADO.net.  Where I am currently using classic ADO and C++.  Wouldn&#39;t passing in a long insert statement, possibly 500 records, take a while."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1513189082, "post_id": 47798665, "comment_id": 82560545, "body": "I don&#39;t think ADO can do this, at least not as efficiently as ODBC or OLE/DB (where you can submit multiple parameter sets in a single operation). And while it&#39;s possible to get ADO interfaces from OLE/DB I don&#39;t think the reverse is true. ADO was meant for pre .net visual basic and is thus fairly limited."}, {"owner": {"reputation": 3835, "user_id": 6194971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fWwxo.png?s=128&g=1", "display_name": "Joe C", "link": "https://stackoverflow.com/users/6194971/joe-c"}, "edited": false, "score": 0, "creation_date": 1513197599, "post_id": 47798665, "comment_id": 82564763, "body": "Passing in long strings is faster than individual inserts.  My preference would be to put business logic in the application and use SqlBulkInsert object.  Have not used C++ in 15 years, not sure if you can call .Net DLLS or if SqlBulkInsert is available outside .Net.  Another option would be to create a text file and use command line BulkInsert."}], "owner": {"reputation": 35, "user_id": 6131342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccfa859fb0977b3589a35858619efddf?s=128&d=identicon&r=PG&f=1", "display_name": "user255377", "link": "https://stackoverflow.com/users/6131342/user255377"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513184824, "creation_date": 1513184824, "question_id": 47798665, "link": "https://stackoverflow.com/questions/47798665/c-examples-of-how-to-pass-500-records-to-sql-server-stored-procedure-using-ado", "title": "C++ Examples of how to pass 500 records to Sql Server Stored procedure using ADO", "body": "<p>I am writing a c++ program using ADO's command and would like to pass multiple records to a SQL Server 2008 stored procedure at the same time.  Is this possible?  How would I do this?</p>\n\n<p>A record might have multiple values to it.  For example a record is worker (name, number, startDate)</p>\n"}, {"tags": ["android", "c++", "opencv", "android-ndk"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1513186466, "post_id": 47798642, "comment_id": 82559188, "body": "<a href=\"https://docs.opencv.org/3.3.0/d4/da8/group__imgcodecs.html#ga26a67788faa58ade337f8d28ba0eb19e\" rel=\"nofollow noreferrer\"><code>cv::imdecode</code></a> is the equivalent of <code>imread</code> when you already have the data in a buffer."}, {"owner": {"reputation": 79, "user_id": 8938792, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5001fbb3f1bed68e070c179ba38b0c64?s=128&d=identicon&r=PG&f=1", "display_name": "Ber12345", "link": "https://stackoverflow.com/users/8938792/ber12345"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1513186935, "post_id": 47798642, "comment_id": 82559468, "body": "@Dan Ma\u0161ek my code is in the format :      char* buffer = (char*) malloc (sizeof(char)*sizeOfImg);     AAsset_read(img, buffer, sizeOfImg); so the resulting buffer is in the form char*. imdecode() expects data in the format const_inputArray."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 2, "creation_date": 1513190327, "post_id": 47798642, "comment_id": 82561087, "body": "put the data in a <code>std::vector&lt;char&gt;</code> and use <code>cv::imdecode</code>"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1513191923, "post_id": 47798642, "comment_id": 82561905, "body": "Don&#39;t even have to copy the data to a vector: <a href=\"https://docs.opencv.org/3.3.1/d4/d32/classcv_1_1__InputArray.html#af5fefc8554c4df2697f83033753799e7\" rel=\"nofollow noreferrer\"><code>cv::_InputArray(buffer,buffer_size)</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 3334, "user_id": 919150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c0b1492fd96ee14e4a946e888dcd11?s=128&d=identicon&r=PG", "display_name": "AndreyICE", "link": "https://stackoverflow.com/users/919150/andreyice"}, "is_accepted": false, "score": 0, "last_activity_date": 1526659004, "creation_date": 1526659004, "answer_id": 50415175, "question_id": 47798642, "link": "https://stackoverflow.com/questions/47798642/how-to-put-an-image-into-a-mat-in-opencv-through-the-android-ndk-c/50415175#50415175", "title": "How to put an image into a MAT in openCV, through the android NDK (c++)", "body": "<p>Use code snippet</p>\n\n<pre><code>extern \"C\"\nJNIEXPORT int JNICALL\nJava_com_example_opencv_test_NativeLib_checkNativeImage(JNIEnv *env,\n                                                    jclass type,\n                                                    jobject jBitmap,\n                                                    jint width,\n                                                    jint height) {\n\nvoid *pPixelData = nullptr;\nif (AndroidBitmap_lockPixels(env, jBitmap, &amp;pPixelData) ==\n    ANDROID_BITMAP_RESULT_SUCCESS) {\n\n    // Android bitmap (Bitmap.Config.ARGB_8888) to Mat\n    // Android and OpenCV have different color channels order, just swap it\n    // You need cppFlags \"-std=c++14\" for this code\n    // See [opencv_src]\\modules\\java\\generator\\src\\cpp\\utils.cpp for details about PremultiplyAlpha\n    // Use https://docs.opencv.org/java/2.4.2/org/opencv/android/Utils.html for Mat in Java\n\n    cv::Mat temp = cv::Mat(cvSize(width, height), CV_8UC4, pPixelData); // 4 channels\n    cv::Mat img;\n    cv::cvtColor(temp, img, CV_BGRA2RGBA);\n\n    // ... use Mat Image\n\n\n    // back to Android Bitmap\n    cvtColor(img, temp, CV_RGBA2BGRA); // Swap colors back\n    memcpy(pPixelData, temp.data, static_cast&lt;size_t&gt;(width * height * 4));\n\n\n    AndroidBitmap_unlockPixels(env, jBitmap);\n\n    return EXIT_SUCCESS;\n}\n\nreturn EXIT_FAILURE;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8938792, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5001fbb3f1bed68e070c179ba38b0c64?s=128&d=identicon&r=PG&f=1", "display_name": "Ber12345", "link": "https://stackoverflow.com/users/8938792/ber12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 921, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1526659004, "creation_date": 1513184761, "last_edit_date": 1513185013, "question_id": 47798642, "link": "https://stackoverflow.com/questions/47798642/how-to-put-an-image-into-a-mat-in-opencv-through-the-android-ndk-c", "title": "How to put an image into a MAT in openCV, through the android NDK (c++)", "body": "<p>I'm using <code>OpenCv</code> through the <code>Android NDK (using c++)</code>\nI would like to save an image into MAT format and then display it on my android application. </p>\n\n<p>I have saved the image in assets. <code>imread()</code> does not work in the NKD because it cannot find the file path to the image, however, I can use AssetManager to load an asset and it finds the path perfectly. This method saves the data into a char* buffer.</p>\n\n<p>How can I, either use something similar to <code>imread()</code> to save the image into a MAT, or convert the char* buffer data into a MAT in order to display it on screen and later on manipulate with other <code>openCV</code> functions? </p>\n"}, {"tags": ["c++", "dynamic-cast"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 5, "creation_date": 1513184505, "post_id": 47798488, "comment_id": 82557959, "body": "A dynamic_cast, to Derived* of pbb results in a null pointer."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1513185013, "post_id": 47798488, "comment_id": 82558266, "body": "<i>&quot;What does an incomplete object of class Derived means?&quot;</i> - Means that wherever you got the above quote should be on a list of bad C++ tutorials."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513185990, "post_id": 47798488, "comment_id": 82558922, "body": "Norhing. There&#39;s no such thing as an incomplete object."}], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 0, "last_activity_date": 1513185069, "creation_date": 1513185069, "answer_id": 47798728, "question_id": 47798488, "link": "https://stackoverflow.com/questions/47798488/incomlete-object-of-class/47798728#47798728", "title": "Incomlete object of class", "body": "<p>There are <em>declarations</em> of types, and <em>definitions</em> of types.</p>\n\n<p>If you declare a type, it might not be actually defined:</p>\n\n<pre><code>// declare X\nclass X;\n\n// define X \nclass X { \n  int value;\n};\n</code></pre>\n\n<p>You may create a pointer to a type that has been only declared, but you may not instantiate an object if it is ONLY declared--it must also be defined.  (Definitions are also declarations.)</p>\n\n<p>Also, while <em>inside</em> the definition of a type, the type itself is still incomplete.  Only after the <strong>full</strong> definition has completed (think the closing } of the class) then it is a complete type and you may instantiate it.</p>\n\n<p>This prevents things like declaring an object to have an instance of itself in itself.</p>\n\n<pre><code>class Bad {\n   Bad other; // Invalid: Bad is still an incomplete type\n};\n\nclass Good {\n   Good * other; // just a pointer is ok, doesn't need type info\n};\n</code></pre>\n\n<p>Of course, if you have a pointer to an incomplete type, you still are not allowed to dereference it, or call through it, because the compiler doesn't know anything about what's there.  If you <em>use</em> the pointer as more than storing an address, you still must have the full definition.</p>\n\n<p>So what's the big fuss?  Why declare incomplete types?</p>\n\n<p>In a header, if you only need a pointer to an object, you can avoid including that object's header.  That means the file does not depend on the implementation, and anyone modifying the object header will NOT require your code to recompile.  If you include the header of another object, you (and anyone that includes you) will need to recompile anytime that header changes.  If it's a gratuitous include, it's a slowdown to compile times and a nastier dependency graph in your codebase.  So utilizing incomplete types is beneficial, even if it adds a small level of complexity.</p>\n"}, {"tags": [], "owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "is_accepted": true, "score": 2, "last_activity_date": 1513185209, "creation_date": 1513185209, "answer_id": 47798783, "question_id": 47798488, "link": "https://stackoverflow.com/questions/47798488/incomlete-object-of-class/47798783#47798783", "title": "Incomlete object of class", "body": "<p>Base does not have member variables and/or member methods declared in Derived, and is therefore incomplete; As this is frequently the case, dynamic_cast forbids the casting of an actual parent type to its derived type.</p>\n\n<p>Simply put: Derived is a Base, but Base is not a Derived, and dynamic_cast will not cast something into something it is not. That requires reinterpret_cast and is a recipe for undefined behavior.</p>\n\n<p>Side note:</p>\n\n<p>If you are going to ask questions about code examples from cplusplus.com you should link them.</p>\n\n<p>I found your snippet here <a href=\"http://www.cplusplus.com/doc/tutorial/typecasting/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/doc/tutorial/typecasting/</a> under dynamic cast.</p>\n"}], "owner": {"reputation": 33, "user_id": 7227461, "user_type": "registered", "profile_image": "https://graph.facebook.com/704018199767445/picture?type=large", "display_name": "Vuqar Eyvazov", "link": "https://stackoverflow.com/users/7227461/vuqar-eyvazov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1513191917, "accepted_answer_id": 47798783, "answer_count": 2, "score": -1, "last_activity_date": 1513185209, "creation_date": 1513184271, "question_id": 47798488, "link": "https://stackoverflow.com/questions/47798488/incomlete-object-of-class", "closed_reason": "Not suitable for this site", "title": "Incomlete object of class", "body": "<p><code>Base * pba = new Derived; \n Base * pbb = new Base;</code></p>\n\n<p>Even though both are pointers of type Base*, pba actually points to an object of type Derived, while pbb points to an object of type Base. Therefore, when their respective type-casts are performed using dynamic_cast, pba is pointing to a full object of class Derived, whereas pbb is pointing to an object of class Base, which is an incomplete object of class Derived.</p>\n\n<p>What does an incomplete object of class Derived means?</p>\n"}, {"tags": ["c++", "linux", "multithreading", "unix", "pthreads"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513185787, "post_id": 47798416, "comment_id": 82558796, "body": "any way you can set the priority using the attr argument of pthread_create"}, {"owner": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513186106, "post_id": 47798416, "comment_id": 82558986, "body": "@pm100, I know how to set priority, the problem is how don&#39;t run the created threads immediately but allow the user to run it or change priorities before running"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1513186816, "post_id": 47798416, "comment_id": 82559401, "body": "Look by your image of code (BAD) you are using C++, please don&#39;t tag C and C++ unless there is a reason. You are coding in C++, tag only C++, thanks."}, {"owner": {"reputation": 40268, "user_id": 1298400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ee2c2af01b6b83f8010ccde5032947b0?s=128&d=identicon&r=PG", "display_name": "Jeffery Thomas", "link": "https://stackoverflow.com/users/1298400/jeffery-thomas"}, "edited": false, "score": 0, "creation_date": 1513193565, "post_id": 47798416, "comment_id": 82562718, "body": "You need to attempt a solution before asking. Asking for user input before creating the thread. Try passing a different routine to pthread_create() that takes in user input. Look into using process control structures to sync the start and stops."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513199681, "post_id": 47798416, "comment_id": 82565714, "body": "Others have already explained how to use attributes to set the thread priority during thread creation. In a broader scope, <a href=\"https://stackoverflow.com/questions/7953917/\">pthreads does not have an option to create a thread in an initially-suspended state</a>, so whatever you want to do to configure the thread (priority, cpu affinity, etc) must be done during the thread&#39;s creation, if it can&#39;t be applied after the thread is already running."}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1513186288, "creation_date": 1513186288, "answer_id": 47799042, "question_id": 47798416, "link": "https://stackoverflow.com/questions/47798416/create-threads-but-dont-run-it-immediately-in-linux/47799042#47799042", "title": "create threads but don&#39;t run it immediately in linux", "body": "<p>For pthreads the priority isn't set after thread creation but rather by passing suitable attributes upon thread creation: the thread attributes go where you have specified <code>NULL</code> in your <code>pthread_create()</code> call. If you want to delay thread creation until the user has given you a priority you can create a function object expecting the priority and upon call of that function object you'd kick off the thread. Of course, you'll still need to keep track of the thus created object (possibly using a <code>std::future&lt;...&gt;</code>-like object) to later join that thread.</p>\n\n<p>Note that providing an answer shouldn't be construed as endorsing thread priorities: as far as I can tell, playing with thread priorities are ill-advised.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "edited": false, "score": 0, "creation_date": 1513190296, "post_id": 47799173, "comment_id": 82561073, "body": "I am trying to do like you but failed(it doesnt change priority ) where could be mistake  <a href=\"https://pasteboard.co/GY3urhX.png\" rel=\"nofollow noreferrer\">pasteboard.co/GY3urhX.png</a>"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "edited": false, "score": 0, "creation_date": 1513191029, "post_id": 47799173, "comment_id": 82561465, "body": "What did we tell you about images?!? And that doesn&#39;t look anything like what I posted?!?"}, {"owner": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "edited": false, "score": 0, "creation_date": 1513191858, "post_id": 47799173, "comment_id": 82561871, "body": "why is it bad that I give a link to the photo ? Ok how to rearrange the code I posted ?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "edited": false, "score": 0, "creation_date": 1513193304, "post_id": 47799173, "comment_id": 82562581, "body": "Re &quot;<i>why is it bad that I give a link to the photo ?</i>&quot;, It&#39;s bad that you didn&#39;t provide the contents of the image as text. You can <i>also</i> provide as an image if you want."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "edited": false, "score": 0, "creation_date": 1513193385, "post_id": 47799173, "comment_id": 82562625, "body": "Re &quot;<i>how to rearrange the code I posted ?</i>&quot;, The code you should use is in my Answer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "edited": false, "score": 0, "creation_date": 1513199197, "post_id": 47799173, "comment_id": 82565499, "body": "@markblacksmith: &quot;<i>why is it bad that I give a link to the photo ?</i>&quot; - posting images of code is wrong, because people can&#39;t copy code from an image. Post the code as actual text, and then people can copy/paste it into their code editors and compile it. Also, links can break over time, especially links to sites that are not owned by StackOverflow (which has its own image hosting provider, BTW, so don&#39;t use an external image hosting service)."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1513193449, "last_edit_date": 1513193449, "creation_date": 1513186760, "answer_id": 47799173, "question_id": 47798416, "link": "https://stackoverflow.com/questions/47798416/create-threads-but-dont-run-it-immediately-in-linux/47799173#47799173", "title": "create threads but don&#39;t run it immediately in linux", "body": "<p>Set the priority as you create the thread.</p>\n\n<p>Replace </p>\n\n<pre><code>int local_errno;\n\nlocal_errno = pthread_create(..., NULL, ...);\nif (local_errno != 0) { ... }\n</code></pre>\n\n<p>with</p>\n\n<pre><code>int local_errno;\n\npthread_attr_t attr;\nlocal_errno = pthread_attr_init(&amp;attr);\nif (local_errno != 0) { ... }\n\n{\n    struct sched_param sp;\n    local_errno = pthread_attr_getschedparam(&amp;attr, &amp;sp);\n    if (local_errno != 0) { ... }\n\n    sp.sched_priority = ...;\n\n    local_errno = pthread_attr_setschedparam(&amp;attr, &amp;sp);\n    if (local_errno != 0) { ... }\n}    \n\n/* So our scheduling priority gets used. */\nlocal_errno = pthread_attr_setinheritsched(&amp;attr, PTHREAD_EXPLICIT_SCHED);\nif (local_errno != 0) { ... }\n\nlocal_errno = pthread_create(..., &amp;attr, ...);\nif (local_errno != 0) { ... }\n\nlocal_errno = pthread_attr_destroy(&amp;attr);\nif (local_errno != 0) { ... }\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8924621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7D6KbkKS2Gk/AAAAAAAAAAI/AAAAAAAAAAo/otodB43N-2c/photo.jpg?sz=128", "display_name": "mark blacksmith", "link": "https://stackoverflow.com/users/8924621/mark-blacksmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "accepted_answer_id": 47799173, "answer_count": 2, "score": 0, "last_activity_date": 1516175843, "creation_date": 1513184023, "last_edit_date": 1516175843, "question_id": 47798416, "link": "https://stackoverflow.com/questions/47798416/create-threads-but-dont-run-it-immediately-in-linux", "title": "create threads but don&#39;t run it immediately in linux", "body": "<p>I am trying to execute my program in threads, I use <code>pthread_create()</code>, but it runs the threads immediately.  I would like to allow the user to change thread priorities before running.  How it is possible to resolve?</p>\n\n<pre><code>for(int i = 0; i &lt; threads; i++)\n{\n   pthread_create(data-&gt;threads+i,NULL,SelectionSort,data);\n   sleep(1);\n   print(data-&gt;array);\n}\n</code></pre>\n"}, {"tags": ["c++", ".net", "visual-studio-2017"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1513183309, "post_id": 47798098, "comment_id": 82557143, "body": "The runtime DLL(s) with filename(s) ending in <code>d</code> are usually the debug versions.  Did you give your client a debug build?  If so these DLL(s) cannot be re-distributed; you should give your client a release build."}, {"owner": {"reputation": 7614, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 0, "creation_date": 1513183380, "post_id": 47798098, "comment_id": 82557200, "body": "Does the client have the Visual C++ 2017 redistributables installed?"}, {"owner": {"reputation": 7614, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 0, "creation_date": 1513183537, "post_id": 47798098, "comment_id": 82557305, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/33743493/why-visual-studio-2015-cant-run-exe-file-ucrtbased-dll\">Why Visual Studio 2015 can&#39;t run exe file (ucrtbased.dll)?</a>"}, {"owner": {"reputation": 85, "user_id": 798211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e201a749fa2843c1c284a84282c16b?s=128&d=identicon&r=PG", "display_name": "Alex C", "link": "https://stackoverflow.com/users/798211/alex-c"}, "edited": false, "score": 0, "creation_date": 1513183755, "post_id": 47798098, "comment_id": 82557457, "body": "Actually you are right, I did send him a debug build, I&#39;ll try sending him a release build."}], "answers": [{"comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1513187209, "post_id": 47798415, "comment_id": 82559593, "body": "It&#39;s a debug DLL and cannot be redistributed."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1513190131, "post_id": 47798415, "comment_id": 82560987, "body": "That&#39;s not the only problem. I have updated my answer."}, {"owner": {"reputation": 85, "user_id": 798211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e201a749fa2843c1c284a84282c16b?s=128&d=identicon&r=PG", "display_name": "Alex C", "link": "https://stackoverflow.com/users/798211/alex-c"}, "edited": false, "score": 0, "creation_date": 1513192541, "post_id": 47798415, "comment_id": 82562213, "body": "There aren&#39;t any options to add have a target older than 8.1. <a href=\"https://i.stack.imgur.com/dyXOy.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/dyXOy.png</a> I think I also saw somewhere that targeting 8.1 would also work on Windows 7?"}, {"owner": {"reputation": 85, "user_id": 798211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e201a749fa2843c1c284a84282c16b?s=128&d=identicon&r=PG", "display_name": "Alex C", "link": "https://stackoverflow.com/users/798211/alex-c"}, "edited": false, "score": 0, "creation_date": 1513201742, "post_id": 47798415, "comment_id": 82566600, "body": "When I do the &#39;repair&#39; option on VS2017 installer, it gives me the following options: <a href=\"https://i.stack.imgur.com/unBQG.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/unBQG.png</a>"}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1513205447, "post_id": 47798415, "comment_id": 82568027, "body": "Hmm, upon hammering at google for a bit <a href=\"https://docs.microsoft.com/en-us/cpp/ide/general-property-page-project\" rel=\"nofollow noreferrer\">I have determined</a> that the Windows 8.1 SDK is also the target for Windows 7 development. I was mistaken on that account. I will correct my answer. So... just get him the release version and the runtime and you should be set."}], "tags": [], "owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "is_accepted": true, "score": 0, "last_activity_date": 1513205595, "last_edit_date": 1513205595, "creation_date": 1513184023, "answer_id": 47798415, "question_id": 47798098, "link": "https://stackoverflow.com/questions/47798098/targeting-the-windows-7-os-with-visual-studio-2017-gives-a-ucrtbased-dll-missing/47798415#47798415", "title": "Targeting the Windows 7 OS with Visual Studio 2017 gives a ucrtbased.dll missing error", "body": "<p>Build and send him a release copy. He will still need the appropriate windows libraries.</p>\n\n<p>ucrtbase (Universal C Runtime) is the replacement for the msvc* runtime dlls.</p>\n\n<p>To get the correct runtime, see <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=48234\" rel=\"nofollow noreferrer\">https://www.microsoft.com/en-us/download/details.aspx?id=48234</a>\nand also possibly <a href=\"https://support.microsoft.com/en-us/help/2999226/update-for-universal-c-runtime-in-windows\" rel=\"nofollow noreferrer\">https://support.microsoft.com/en-us/help/2999226/update-for-universal-c-runtime-in-windows</a>\nif you have problems.</p>\n"}], "owner": {"reputation": 85, "user_id": 798211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e201a749fa2843c1c284a84282c16b?s=128&d=identicon&r=PG", "display_name": "Alex C", "link": "https://stackoverflow.com/users/798211/alex-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1979, "favorite_count": 0, "accepted_answer_id": 47798415, "answer_count": 1, "score": -1, "last_activity_date": 1513205595, "creation_date": 1513183051, "last_edit_date": 1513201684, "question_id": 47798098, "link": "https://stackoverflow.com/questions/47798098/targeting-the-windows-7-os-with-visual-studio-2017-gives-a-ucrtbased-dll-missing", "title": "Targeting the Windows 7 OS with Visual Studio 2017 gives a ucrtbased.dll missing error", "body": "<p>I have a client that is running a Windows 7 machine and I want to him build an .exe that he can run on his computer. However, since I am running Windows 10, I am building everything in Visual Studio 2017. The program I am making is a Winforms CLR C++ program. I put in the Windows 7 WINVER define in one of the C++ files:</p>\n\n<pre><code>#define WINVER 0x0601\n</code></pre>\n\n<p>The compile the project with the following properties:\n<a href=\"https://i.stack.imgur.com/F8dH3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F8dH3.png\" alt=\"VSProjConfig\"></a></p>\n\n<p>I send him an .exe file but when he opens it up, it gives him a an error saying that he is <strong>missing the ucrtbased.dll</strong>. I verified that he has the correct .NET framework installed on his computer:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zrsnk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zrsnk.png\" alt=\"netFramework\"></a></p>\n\n<p>What could be the cause of this?</p>\n"}, {"tags": ["c++", "delphi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1513183908, "post_id": 47798090, "comment_id": 82557577, "body": "On side notes, the Delphi code is expecting <code>AnsiChar</code> data, so you shouldn&#39;t be using <code>TCHAR</code> in the C++ code. Also, the VCL uses <code>WM_COPYDATA</code> internally, so you have to look at <code>dwData</code> before interpreting <code>lpData</code> (you should use <code>RegisterWindowMessage()</code> for the <code>dwData</code> value). And the <code>WPARAM</code> of <code>WM_COPYDATA</code> needs to be the <code>HWND</code> of the sender, not the receiver."}, {"owner": {"reputation": 17, "user_id": 8382740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12387ff48ed4a64b927b4675fee41cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Vasiliy Tsiganov", "link": "https://stackoverflow.com/users/8382740/vasiliy-tsiganov"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513184615, "post_id": 47798090, "comment_id": 82558027, "body": "Useful info - thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1513183959, "post_id": 47798193, "comment_id": 82557619, "body": "This answer no longer applies after the question was edited."}, {"owner": {"reputation": 17, "user_id": 8382740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12387ff48ed4a64b927b4675fee41cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Vasiliy Tsiganov", "link": "https://stackoverflow.com/users/8382740/vasiliy-tsiganov"}, "edited": false, "score": 0, "creation_date": 1513183961, "post_id": 47798193, "comment_id": 82557621, "body": "Just noticed that. Thanks!"}], "tags": [], "owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "is_accepted": false, "score": 0, "last_activity_date": 1513183346, "creation_date": 1513183346, "answer_id": 47798193, "question_id": 47798090, "link": "https://stackoverflow.com/questions/47798090/sending-message-from-c-to-delphi-x/47798193#47798193", "title": "Sending message from C++ to Delphi X", "body": "<p>You are sending a WM_USER+1 message to Delphi, but aren't listening for that message in Delphi.</p>\n"}], "owner": {"reputation": 17, "user_id": 8382740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12387ff48ed4a64b927b4675fee41cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Vasiliy Tsiganov", "link": "https://stackoverflow.com/users/8382740/vasiliy-tsiganov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1513183346, "creation_date": 1513183010, "last_edit_date": 1513183327, "question_id": 47798090, "link": "https://stackoverflow.com/questions/47798090/sending-message-from-c-to-delphi-x", "title": "Sending message from C++ to Delphi X", "body": "<p>I am trying to send a message from my C++ console app to Delphi X app on Windows 10 and it does not work for some reason. \nBelow is my C++ code:</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n\n    CString dataToSend = _T(\"MY DATA\");\n    COPYDATASTRUCT cds;\n    cds.dwData = 1; // can be anything\n    cds.cbData = sizeof(TCHAR) * (_tcslen(dataToSend) + 1);\n    cds.lpData = (void*)dataToSend.GetBuffer(cds.cbData);\n\n    HWND hwndFound;         // This is what is returned to the caller.\n    hwndFound = FindWindow(_T(\"TMyForm\"), 0);\n\n\n    if (hwndFound)\n    {\n        printf(\"WINDOW IS FOUND %i... Sending a message...\\n\", hwndFound);\n        SendMessage(hwndFound, WM_COPYDATA, (WPARAM)hwndFound, (LPARAM)(LPVOID)&amp;cds);\n    }\n    else \n    {\n        printf(\"WINDOW IS NOT FOUND!\\n\");\n    }\n\n\n\n    char* end = \"\";\n    printf(\"Press enter to continue...\");\n    scanf(end);\n\n    return 0;\n}\n</code></pre>\n\n<p>This is my Delphi code:</p>\n\n<pre><code>private\n    procedure WMCopyData(var Msg : TWMCopyData); message WM_COPYDATA;\n....\n\n\nprocedure TMyForm.WMCopyData(var Msg: TWMCopyData);\nvar\n   s : AnsiString;\nbegin\n   s := PAnsiChar(Msg.CopyDataStruct.lpData) ;\n   ShowMessage(s);\nend;\n\n....\n\nprocedure TMyForm.MyButtonClick(Sender: TObject);\nbegin\n   // Checking my handle\n   ShowMessage(IntToStr(Handle));\nend\n</code></pre>\n\n<p>C++ app says it found a handle:</p>\n\n<p>WINDOW IS FOUND 3609366... Sending a message...\nPress enter to continue...</p>\n\n<p>Same handle is displayed when I press MyButton (3609366) but message box does not appear.\nFor some reason Delphi app is not receiving the message. </p>\n\n<p>Do you have any idea why?</p>\n\n<p>P.S.: they run under same user account.</p>\n"}, {"tags": ["android", "c++", "cmake", "android-ndk", "android-gradle-plugin"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1513626908, "post_id": 47797954, "comment_id": 82716413, "body": "AndroidFiles you have only under Executable1? Or you have 40 of these?"}, {"owner": {"reputation": 626, "user_id": 4690576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a328eeb1bb069c34be414a5e7bcda10?s=128&d=identicon&r=PG", "display_name": "AmeyaVS", "link": "https://stackoverflow.com/users/4690576/ameyavs"}, "edited": false, "score": 0, "creation_date": 1513659981, "post_id": 47797954, "comment_id": 82726527, "body": "Looks like a dependency issue, can you check if your targets are explicitly listing the dependencies for every target? Also, if you can post <code>CMakeLists.txt</code> for the library and the executable."}, {"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1513940669, "post_id": 47797954, "comment_id": 82849994, "body": "AndroidFiles I have 40 of. I can post the CMakeLists but they won&#39;t tell you anything - the dependencies are literally what I posted. It is not a &quot;dependency issue&quot; in the sense that the behaviour is <i>expected</i> it is just not what I want - see Oliv&#39;s answer below."}], "answers": [{"comments": [{"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 1, "creation_date": 1513940766, "post_id": 47889271, "comment_id": 82850033, "body": "Unfortunately this answer is &quot;sorry - there is no answer&quot; - option 1 is one of the things I want to avoid (two-step building), while option 2 is not an option - the build is mix-and-match, not monolithing. All of which is fair enough. I will wait a while to see if anyone comes up with anything, otherwise I will award this one."}, {"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1513940890, "post_id": 47889271, "comment_id": 82850093, "body": "Clarification - I&#39;m disappointed in reality, not the answer :)"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1513947701, "post_id": 47889271, "comment_id": 82853412, "body": "@Gerasimos What do you mean by mix-and-match. You realy should clarify your idea and your question, my answer is essentialy a speculation about what you are doing. I suppose that you are performing a build in each executable directory by executing for each directory the cmake command. But your last comment confuse me. I have certainly not grasped your intention and what you are actualy doing."}, {"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1514910023, "post_id": 47889271, "comment_id": 83101747, "body": "I think you have grasped what I am trying to do just fine - sorry to confuse. By &quot;mix and match&quot; I mean that each &quot;executable&quot; project must be buildable separately, so there is absolutely no possibility of an &quot;ubercmake&quot; file building everything. That&#39;s all I meant."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1514924171, "post_id": 47889271, "comment_id": 83107879, "body": "What&#39;s wrong with &#39;2-step&#39; building? Note that each executable can trigger build &amp; install of all libraries that it needs."}, {"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1514977486, "post_id": 47889271, "comment_id": 83125785, "body": "The problem with 2-step building is manyfold: the libraries have very volatile code (are expected to be modified/extended even by the end user), but please explain - if each executable can trigger build and install of libraries, based on their own code, and if that only happens when the library code is changed, then that would be the actual answer."}, {"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1514998395, "post_id": 47889271, "comment_id": 83137745, "body": "Additionally, this would make the solution sloppy (but it is not unsurmountable); Android build system makes it unwieldy to generate standalone libraries: gradle scripts are really only designed to generate .apk, not libraries, so while they CAN be hacked into generating the static libraries, it does look weird and rather sloppy. This is the solution I am currently developing, but I am not thrilled by it."}], "tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": true, "score": 2, "last_activity_date": 1513694217, "creation_date": 1513694217, "answer_id": 47889271, "question_id": 47797954, "link": "https://stackoverflow.com/questions/47797954/cmake-shared-project-subdirectories-avoid-rebuilding/47889271#47889271", "title": "CMake shared project subdirectories avoid rebuilding", "body": "<p>CMake can guess if the build is up-to-date by reading informations froms the current build directory.</p>\n\n<p>When you run CMake manualy in <code>Executables/&lt;x&gt;</code> directory, cmake retrieve information from the build directory associated to <code>Executable/&lt;x&gt;</code> directory. It then check if the timestamp of the built file correspond to the last build performed in this build directory. If not, it rebuild. What happen is that: <code>Lib1</code> library file is built after you build <code>Executable1</code>, then you run cmake in <code>Executalbe2</code>, it compares the timestamp of <code>Lib1</code> target file, see that this file was not produced by this instance of the cmake build and then rebuild the lib. And so on.</p>\n\n<p>So you have two options:</p>\n\n<p>1- Either you build the library and install  their target files in the <code>bin</code>directory (using <code>install</code> cmake command and <code>make install</code> bash command for exemple). Then in the <code>Executalbe&lt;x&gt;/CMakeLists</code> you use <code>find_library</code> command instead of <code>add_subdirectory</code>.</p>\n\n<p>2- Or you create a super project which has the following structure:</p>\n\n<pre><code>+  supper_project\n---CMakeLists.txt #add_subdirectory(LibProjects/lib&lt;x&gt;)... add_subdirectory(Executables/Executalbe&lt;x&gt;)...\n  + LibProjects/\n  ---Bin/ (Originally empty)\n  ---Lib1/CMakeLists.txt (+sources files, same level as the CMakeLists.txt)\n  ...\n  ---Lib10/CMakeLists.txt (same)\n  + Executables/\n  ---Executable1/CMakeLists.txt (source files here)\n  --------------/AndroidFiles/build.gradle (and other android project files)\n  (not any more:points to the CMakeLists.txt)\n  ...\n  ---Executable40/CMakeLists.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1514910110, "post_id": 47966029, "comment_id": 83101778, "body": "I have no possibility of a &quot;top-level&quot; cmake as such - Each &quot;Executable&quot; is a separate entity depending on each &quot;Library&quot;."}, {"owner": {"reputation": 805, "user_id": 3857473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef4a561dd16de766dce81f87f345e74?s=128&d=identicon&r=PG&f=1", "display_name": "Vikash Kesarwani", "link": "https://stackoverflow.com/users/3857473/vikash-kesarwani"}, "reply_to_user": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1514912048, "post_id": 47966029, "comment_id": 83102820, "body": "You can try setting <code>CMAKE_BINARY_DIR</code> on executable or <code>CMAKE_CURRENT_BINARY_DIR</code> in libraries to an absolute path."}, {"owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "edited": false, "score": 0, "creation_date": 1514977328, "post_id": 47966029, "comment_id": 83125698, "body": "Could you please elaborate?"}], "tags": [], "owner": {"reputation": 805, "user_id": 3857473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef4a561dd16de766dce81f87f345e74?s=128&d=identicon&r=PG&f=1", "display_name": "Vikash Kesarwani", "link": "https://stackoverflow.com/users/3857473/vikash-kesarwani"}, "is_accepted": false, "score": 0, "last_activity_date": 1514180859, "creation_date": 1514180859, "answer_id": 47966029, "question_id": 47797954, "link": "https://stackoverflow.com/questions/47797954/cmake-shared-project-subdirectories-avoid-rebuilding/47966029#47966029", "title": "CMake shared project subdirectories avoid rebuilding", "body": "<p>I think problem lies in the way you have defined your dependencies.</p>\n\n<p>For each executable you are creating separate targets using add_subdirectory.\ne.g. for executable 1 you have <code>add_subdirectory(${PROJECTS_ROOT}/LibProjects/${Library1})</code> and for executable 2 also you have <code>add_subdirectory(${PROJECTS_ROOT}/LibProjects/${Library1})</code>, so cmake will create two separate targets for same library1 in each of the executable's subdirectory and thus it will create separate timestamp and cache files. That is why it looks that it is building the same library for multiple times, but in fact for cmake they are different targets.</p>\n\n<p>To fix this you can include all libraries in top level CMakeLists.txt using <code>add_subdirectory</code> and them in each executable's CMakeLists.txt add the dependency using <code>add_dependencies</code> command.</p>\n"}, {"tags": [], "owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1517403533, "last_edit_date": 1517403533, "creation_date": 1515168965, "answer_id": 48117354, "question_id": 47797954, "link": "https://stackoverflow.com/questions/47797954/cmake-shared-project-subdirectories-avoid-rebuilding/48117354#48117354", "title": "CMake shared project subdirectories avoid rebuilding", "body": "<p>I managed to work around this problem - but in the end it was by working around rather than with CMake.</p>\n\n<p>I removed the CMakeFile-level dependencies (add_subdirectory) and only left the libraries at the linking level (target_link_libraries Executable [the library files])</p>\n\n<p>Afterwards, I created gradle scripts for each library and added dependencies to these scripts in each application gradle script, so that the building of the libraries gets triggered by gradle dependencies instead of CMake dependencies. It's slower than it would be if gradle could be avoided, but much faster than rebuilding every time, and the overhead is at least constant (a few seconds per project).</p>\n"}], "owner": {"reputation": 1868, "user_id": 1406393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6819fac41db50ea51d89e3d5fb89ad87?s=128&d=identicon&r=PG", "display_name": "Gerasimos R", "link": "https://stackoverflow.com/users/1406393/gerasimos-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 1, "accepted_answer_id": 47889271, "answer_count": 3, "score": 9, "last_activity_date": 1517403533, "creation_date": 1513182552, "last_edit_date": 1514910424, "question_id": 47797954, "link": "https://stackoverflow.com/questions/47797954/cmake-shared-project-subdirectories-avoid-rebuilding", "title": "CMake shared project subdirectories avoid rebuilding", "body": "<p>For a project, I am using Android gradle scripts with CMake, gradle plugin is version 3:0:0, CMake version 3.6. Both gradle and CMake files are pretty simple and uninteresting (just defining the files used - I can still copy-paste them as required).</p>\n\n<p>I have the following project structure; basically a codebase producing a few tens of .so files (the native part for the Android packages that get packaged into an apk, thereby called 'Executables'), which all depend on the same shared library code (static libraries, thereby called 'Libraries'). The Library code is still (relatively) volatile, so I wish the Executables to have project-level dependencies on them, so that whenever the Executables are built, the Libraries are rebuilt on-demand every time their code is changed. \nThe structure looks like:</p>\n\n<pre><code>+ LibProjects/\n---Bin/ (Originally empty)\n---Lib1/CMakeLists.txt (+sources files, same level as the CMakeLists.txt)\n...\n---Lib10/CMakeLists.txt (same)\n+ Executables/\n---Executable1/CMakeLists.txt (source files here)\n--------------/AndroidFiles/build.gradle (and other android project files)(points to the CMakeLists.txt)\n...\n---Executable40/CMakeLists.txt\n</code></pre>\n\n<p>The Libraries' CMakeLists redirect their output into the Bin folder using </p>\n\n<pre><code>set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY {CMAKE_CURRENT_SOURCE_DIR}/../Bin/${ANDROID_ABI}/${LibraryName})\n</code></pre>\n\n<p>The executable's projects add dependencies on the libraries \"as normal\"</p>\n\n<pre><code>add_subdirectory(${PROJECTS_ROOT}/LibProjects/${LibraryName} ${PROJECTS_ROOT}/Framework/Bin/Android/${ANDROID_ABI}/${LibraryName})...\n</code></pre>\n\n<p>Everything almost works, in the sense that I can get sensible executables and  the Executables trigger builds of the libraries.</p>\n\n<p>The problem is that when building the executables sequentially, each one does NOT reuse the library project outputs of the other ones: When I build Executable1, it will build all libraries (normal) and then it will build itself. Afterwards, when I build Executable2, it will NOT reuse the libraries that were already built for Executable1, and so on - this effectively increases my build time by a factor of ~10. </p>\n\n<p>I can find the output of the build of each library inside the /Bin folder as expected, but they are not reused across executables - there are no CMake \"project files\" (is this the correct term) in the bin folder, all of them get generated inside the executable build directory.</p>\n\n<p>The problem I am trying to resolve is the build times stemming from the fact that each library gets rebuilt for each executable.</p>\n\n<p>At the moment the solutions I am considering is to somehow instruct CMake to use the Bin folder (or another folder) as a working folder for each library in its own folder instead of with the executable, hoping that the gradle android plugin will be smart enough to then spot that neither the cmakefiles nor the object files need to be regenerated, and avoid the rebuild.</p>\n\n<p>The restriction that I have is that I cannot restructure the codebase itself, and that each Executable must be buildable separately of the others - there is absolutely no possibility of a top-level CMake - each Executable should be able to be triggered on its own.</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513182172, "post_id": 47797773, "comment_id": 82556318, "body": "Can you explain what your concern is regarding the snippet your provided? Which part or line are you unsure about?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1513182250, "post_id": 47797773, "comment_id": 82556367, "body": "The same as the owner of any other object. In that snippet, the &quot;stack frame&quot; in which <code>foo</code> is declared"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513182359, "post_id": 47797773, "comment_id": 82556448, "body": "If it is called in main you are correct otherwise it is in the scope of declaration"}, {"owner": {"reputation": 1620, "user_id": 902384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46da49256462126dbe77187c073aa6c6?s=128&d=identicon&r=PG", "display_name": "Shiv", "link": "https://stackoverflow.com/users/902384/shiv"}, "edited": false, "score": 0, "creation_date": 1513182420, "post_id": 47797773, "comment_id": 82556497, "body": "You can do <code>foo.get()</code> as <code>foo</code> is in scope. But your <code>t.join()</code> makes sure that it is already finished."}, {"owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 1, "creation_date": 1513182567, "post_id": 47797773, "comment_id": 82556592, "body": "My doubts are if other &quot;non-creators&quot; can also use the <code>std::future</code> object."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1513182647, "post_id": 47797773, "comment_id": 82556650, "body": "who is the owner of <code>int</code>? who is the owner of <code>std::string</code>? who is the owner of <code>std::ifstream</code>?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1513182785, "post_id": 47797773, "comment_id": 82556751, "body": "@David, yes but to be fair the documentation of std::string doesn&#39;t talk about &quot;the owner&quot; of the std::string."}, {"owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 0, "creation_date": 1513182855, "post_id": 47797773, "comment_id": 82556795, "body": "I should have used the term &quot;creator&quot; instead of &quot;owner&quot; in the title of the question."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1513182858, "post_id": 47797773, "comment_id": 82556801, "body": "and where does it talk about the ownership of <code>std::future</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513183329, "post_id": 47797773, "comment_id": 82557156, "body": "I can definitively see how the wording could be confusing. Ownership has several other meanings, which are more complex than just scope resolution. For example, smart pointers exist to make the semantics ownership of objects explicit. And only the thread that owns a mutex lock is allowed to unlock it. I&#39;m fairly certain that <code>std::future</code> is not one of those cases and that the documentation just refers to anything that has access to it, but I can&#39;t find a source to cite."}], "answers": [{"comments": [{"owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 0, "creation_date": 1513193684, "post_id": 47800131, "comment_id": 82562781, "body": "The <code>thread</code> of the snippet is for illustration purposes only. However, I don&#39;t understand why the snippet can create a race condition. Doesn&#39;t <code>t.join()</code> protect <code>get</code> from racing against <code>operator=</code>?"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 1, "creation_date": 1513232336, "post_id": 47800131, "comment_id": 82575229, "body": "@ChronoTiger, there&#39;s no race condition at that snippet,  however, you are misusing of both <code>std::thread</code> and <code>std::future</code>. There&#39;s a very high chance that if you continue writing code that way,  you&#39;ll introduce a race condition sooner than you know. Please reread my answer carefully"}, {"owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 0, "creation_date": 1513354733, "post_id": 47800131, "comment_id": 82635896, "body": "Now I understand you meant that <code>get</code> and the <code>assignment operator</code> are not thread-safe operations in general, and not in my specific snippet. I know I could just wrote <code>int n = 4</code>, but that does not exemplify the question I wanted to ask with that MWE. I appreciate your answer. Could you tell me if you agree with @David Haim&#39;s answer above, which says the snippet shows undefined behavior?"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 0, "creation_date": 1513381742, "post_id": 47800131, "comment_id": 82646709, "body": "@ChronoTrigger, No, I do not agree with David&#39;s answer that the snippet invokes Undefined Behavior. Note that: <code>t.join()</code> synchronizes with the completion of the thread <code>t</code> - All writes done in the thread <code>t</code> is guaranteed to be complete and visible to the thread waiting for the <code>join()</code> (after the <code>join()</code> is returns without an exception). See a <a href=\"https://stackoverflow.com/questions/29684369/implicit-synchronization-when-creating-joining-threads\"><b>very similar question to yours</b></a>. And see <a href=\"https://stackoverflow.com/questions/27109314/does-joining-a-stdthread-flush-memory\"><b>this</b></a> also..."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 1, "last_activity_date": 1513594106, "last_edit_date": 1513594106, "creation_date": 1513190810, "answer_id": 47800131, "question_id": 47797773, "link": "https://stackoverflow.com/questions/47797773/who-is-the-creator-of-a-stdfuture/47800131#47800131", "title": "Who is the creator of a std::future?", "body": "<blockquote>\n  <p>Who is the creator of the asynchronous operation? Is it the thread that creates the std::future object, or any thread that has access to that object?</p>\n</blockquote>\n\n<p>There are essentially 3 things that can create such \"asynchronous operation\":</p>\n\n<ul>\n<li><code>std::async</code></li>\n<li><code>std::promise</code></li>\n<li><code>std::packaged_task</code></li>\n</ul>\n\n<p>These \"creators\" create a so called <em>shared state</em>, in which the <code>std::future</code> obtained equally shares access to. The <em>shared state</em> is where the results of such operation is stored. both the provider (an <code>std::async</code>, <code>std::promise</code>, or <code>std::packaged_task</code> object) and the consumer (the <code>std::future</code> obtained) accesses the <em>shared state</em> in a thread safe manner, its an implementation detail you shouldn't be bothered about.</p>\n\n<blockquote>\n  <p>In the end, my question is if non-creators can also use the get method on the <code>std::future</code>.</p>\n</blockquote>\n\n<p>Of cause; An \"asynchronous operation\" typically takes place in a different thread of execution, and the purpose of <code>std::future</code> is to <strong>safely</strong> query and access the results of such \"asynchronous operation\" happening somewhere else, without you explicitly using any extra synchronization mechanism.</p>\n\n<blockquote>\n  <p>In particular, I would like to know if this piece of code is correct:</p>\n\n<pre><code>std::future&lt;int&gt; foo;\nstd::thread t([&amp;foo](){ \n    foo = std::async(std::launch::async, [](){ return 4; });\n});\nt.join();\nint n = foo.get();  // can the main thread call foo.get()?\n</code></pre>\n</blockquote>\n\n<p>While this \"particular short snippet\" doesn't seem to invoke a race condition; It's not in any way a good code. At any point in time, the <code>std::future</code> to a <em>shared state</em> obtained from an \"asynchronous operation\" should not be used by multiple thread at a time.</p>\n\n<p><em>In your case, the <code>get()</code> and the <code>assignment operator</code> isn't thread-safe. And sooner or later, this code will quickly grow to invoke a race-condition</em></p>\n\n<p>One more note, the use of a <code>std::thread</code> in your code isn't needed, in practice a decent implementation will create a new thread or use a thread pool when your <em>launch policy</em> is <code>std::launch::async</code>. Hence you should just do:</p>\n\n<pre><code>std::future&lt;int&gt; foo = std::async(std::launch::async, [](){ return 4; });\nint n = foo.get();\n</code></pre>\n"}], "owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 47800131, "answer_count": 1, "score": 3, "last_activity_date": 1513594106, "creation_date": 1513182061, "last_edit_date": 1513182870, "question_id": 47797773, "link": "https://stackoverflow.com/questions/47797773/who-is-the-creator-of-a-stdfuture", "title": "Who is the creator of a std::future?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/thread/future\" rel=\"nofollow noreferrer\">Cppreference</a> says about <code>std::future</code> that</p>\n\n<blockquote>\n  <p>The creator of the asynchronous operation can then use a variety of methods to query, wait for, or extract a value from the std::future.</p>\n</blockquote>\n\n<p>Who is the creator of the asynchronous operation? Is it the thread that creates the <code>std::future</code> object, or any thread that has access to that object? In the end, my question is if non-creators can also use the <code>get</code> method on the <code>std::future</code>.</p>\n\n<p>In particular, I would like to know if this piece of code is correct:</p>\n\n<pre><code>std::future&lt;int&gt; foo;\nstd::thread t([&amp;foo](){ \n    foo = std::async(std::launch::async, [](){ return 4; });\n});\nt.join();\nint n = foo.get();  // can the main thread call foo.get()?\n</code></pre>\n"}, {"tags": ["python", "c++", "python-2.7", "dll"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8166744, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9zkHgquMh_8/AAAAAAAAAAI/AAAAAAAAAGU/wXJmpNkupM0/photo.jpg?sz=128", "display_name": "LeviFiction", "link": "https://stackoverflow.com/users/8166744/levifiction"}, "edited": false, "score": 0, "creation_date": 1513186688, "post_id": 47797936, "comment_id": 82559331, "body": "Thank you, I would never have thought of that.  I&#39;m still curious about compiling but this is definitely the simplest option available.  :D  It appears to be working like a charm, which also answers my question on whether the msvcr.dlls need to match."}], "tags": [], "owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "is_accepted": true, "score": 0, "last_activity_date": 1513182497, "creation_date": 1513182497, "answer_id": 47797936, "question_id": 47797759, "link": "https://stackoverflow.com/questions/47797759/how-do-i-change-the-name-of-the-python-dll-when-compiling-a-library-like-pillow/47797936#47797936", "title": "How do I change the name of the python DLL when compiling a library like pillow?", "body": "<p>You can create a symbolic link named corepython27.dll showing to the installed python27.dll. You can do this in your console via the command </p>\n\n<pre><code>MKLINK &lt;path_to_corepython.dll&gt; &lt;path_to_python27.dll&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8166744, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9zkHgquMh_8/AAAAAAAAAAI/AAAAAAAAAGU/wXJmpNkupM0/photo.jpg?sz=128", "display_name": "LeviFiction", "link": "https://stackoverflow.com/users/8166744/levifiction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 47797936, "answer_count": 1, "score": 0, "last_activity_date": 1513182497, "creation_date": 1513182009, "question_id": 47797759, "link": "https://stackoverflow.com/questions/47797759/how-do-i-change-the-name-of-the-python-dll-when-compiling-a-library-like-pillow", "title": "How do I change the name of the python DLL when compiling a library like pillow?", "body": "<p><strong>Question:</strong>\nI want to compile a third-party library like Pillow or Numbpy but I want to change the name of the python27.dll to corepython27.dll.  How do I do this during the compile process?  Is it something I need to change in the setup.py?  Or the distutils library? </p>\n\n<p>I should explain that I have no experience in compiling at all.  I just know that I will need to make this change as I learn more about the basics of compiling.</p>\n\n<p><strong>Explanation:</strong>\nCorel's PaintShop Pro uses an embedded python interpreter to run scripts inside the program.  And I would like to be able to use third-party libraries like pillow and numpy but they always fail to load.  The version of python that is included with PaintShop Pro is 2.7.5.  I've made sure to download the appropriate versions of these libraries but it always fails with a \"DLL module doesn't exist\" type error.</p>\n\n<p>Using a PE viewer I was able to see that other libraries like TKinter were using imports corepython27.dll instead of python27.dll like pillow was.</p>\n\n<p>Also pillow for 2.7 was using msvcr90.dll but the custom version of the tkinter library included with PSP was compiled with msvcr110.dll.  Do you think this will be an issue?  Do I need to compile pillow with the appropriate version of msvcr DLL?  Or is matching versions (2.7) and making sure it uses the correct python.dll (corepython27.dll) the only important thing?  </p>\n"}, {"tags": ["c++", "visual-c++", "boost"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1513181161, "post_id": 47797351, "comment_id": 82555666, "body": "try <code>return 4.0;</code>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1513181205, "post_id": 47797351, "comment_id": 82555691, "body": "Hi and welcome to SO. Nice first question. Boost version and C++ version ?"}, {"owner": {"reputation": 488, "user_id": 7384437, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/386e2d14621537e11c4790308b91dbd0?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/7384437/lars"}, "edited": false, "score": 0, "creation_date": 1513181452, "post_id": 47797351, "comment_id": 82555852, "body": "For me it compiles with vs2017 and boost. No additional project settings, but old boost version."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1513183724, "post_id": 47797351, "comment_id": 82557436, "body": "It compiles for me as well using vs15.5.1 and boost 1.65.1 and the project set to use either c++17 or c++ latest."}, {"owner": {"reputation": 51, "user_id": 9094365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8389d3ca74ff8a1207ea0ddd3aacd047?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Vanbaelen", "link": "https://stackoverflow.com/users/9094365/nick-vanbaelen"}, "edited": false, "score": 0, "creation_date": 1513240587, "post_id": 47797351, "comment_id": 82579099, "body": "Thanks for welcoming me. Forgot to mention these indeed... I&#39;ll update the original post. Boost version is 1.65.1, and I was building this example in our existing project structure using qmake. I&#39;ll start fresh with a clean project without any compiler flags and narrow it down."}, {"owner": {"reputation": 51, "user_id": 9094365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8389d3ca74ff8a1207ea0ddd3aacd047?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Vanbaelen", "link": "https://stackoverflow.com/users/9094365/nick-vanbaelen"}, "edited": false, "score": 0, "creation_date": 1513240697, "post_id": 47797351, "comment_id": 82579172, "body": "Got it. In our project we&#39;re disabling the Microsoft C / C++ language extensions. So with the /Za compiler option added, this doesn&#39;t compile..."}], "owner": {"reputation": 51, "user_id": 9094365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8389d3ca74ff8a1207ea0ddd3aacd047?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Vanbaelen", "link": "https://stackoverflow.com/users/9094365/nick-vanbaelen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1513240615, "creation_date": 1513180806, "last_edit_date": 1513240615, "question_id": 47797351, "link": "https://stackoverflow.com/questions/47797351/boostoptional-assignment-with-msvc", "title": "boost::optional assignment with msvc", "body": "<p>Using the msvc2017 compiler and boost 1.65.1, the the code below doesn't compile. </p>\n\n<pre><code>#include &lt;boost/optional.hpp&gt;\n\nboost::optional&lt;double&gt;\nfoo()\n{\n    return boost::optional&lt;double&gt;(4.0);\n}\n\nint\nmain(void)\n{\n    boost::optional&lt;double&gt; result;\n    result = foo();\n}\n</code></pre>\n\n<p>The error being generated is:</p>\n\n<pre><code>C:/boost/optional/optional.hpp(954): error C2248: 'boost::optional_detail::optional_base&lt;T&gt;::optional_base': cannot access protected member declared in class 'boost::optional_detail::optional_base&lt;T&gt;'\n        with\n        [\n            T=double\n        ]\nC:/boost/optional/optional.hpp(157): note: see declaration of 'boost::optional_detail::optional_base&lt;T&gt;::optional_base'\n        with\n        [\n            T=double\n        ]\nC:/boost/optional/optional.hpp(771): note: see declaration of 'boost::optional_detail::optional_base&lt;T&gt;'\n        with\n        [\n            T=double\n        ]\nC:/boost/optional/optional.hpp(954): note: while checking that elided copy-constructor 'boost::optional_detail::optional_base&lt;T&gt;::optional_base(const boost::optional_detail::optional_base&lt;T&gt; &amp;)' is callable\n        with\n        [\n            T=double\n        ]\nC:/boost/optional/optional.hpp(157): note: see declaration of 'boost::optional_detail::optional_base&lt;T&gt;::optional_base'\n        with\n        [\n            T=double\n        ]\nC:/boost/optional/optional.hpp(954): note: when converting from 'boost::optional_detail::optional_base&lt;T&gt;' to 'boost::optional_detail::optional_base&lt;T&gt; &amp;&amp;'\n        with\n        [\n            T=double\n        ]\nC:/boost/optional/optional.hpp(953): note: while compiling class template member function 'boost::optional&lt;double&gt; &amp;boost::optional&lt;double&gt;::operator =(boost::optional&lt;double&gt; &amp;&amp;) noexcept'\nmain.cpp(13): note: see reference to function template instantiation 'boost::optional&lt;double&gt; &amp;boost::optional&lt;double&gt;::operator =(boost::optional&lt;double&gt; &amp;&amp;) noexcept' being compiled\nmain.cpp(5): note: see reference to class template instantiation 'boost::optional&lt;double&gt;' being compiled\n</code></pre>\n\n<p>This problem does not occur for other compilers (I tested both clang and gcc). So this seems like a Microsoft compiler bug to me?</p>\n"}, {"tags": ["c++", "qt", "qthread"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1513180821, "post_id": 47797277, "comment_id": 82555426, "body": "you cant copy threads. Maybe <code>emplace_back</code> can help"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513181000, "post_id": 47797277, "comment_id": 82555555, "body": "You may just want a QThreadPool."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 4853625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef3c0539803267df00afb9b5041a45d?s=128&d=identicon&r=PG", "display_name": "R&#233;mi", "link": "https://stackoverflow.com/users/4853625/r%c3%a9mi"}, "edited": false, "score": 0, "creation_date": 1513181312, "post_id": 47797369, "comment_id": 82555760, "body": "I updated to C++ 14 and your solution seems to work. Thank you."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 65, "user_id": 4853625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef3c0539803267df00afb9b5041a45d?s=128&d=identicon&r=PG", "display_name": "R&#233;mi", "link": "https://stackoverflow.com/users/4853625/r%c3%a9mi"}, "edited": false, "score": 1, "creation_date": 1513181321, "post_id": 47797369, "comment_id": 82555767, "body": "@BlackSilver-55 <code>std::make_unique</code> is part of c++14. See <a href=\"https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding\" title=\"make unique and perfect forwarding\">stackoverflow.com/questions/7038357/&hellip;</a> for more information about it, how to work around it&#39;s absence in c++11 and how to implement your own version."}, {"owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 1, "creation_date": 1513181407, "post_id": 47797369, "comment_id": 82555818, "body": "In C++11 you can use: <code>v_ct_Threads[i] = std::unique_ptr&lt;CaptureThread&gt;(new CaptureThread(i, qsb_Duration-&gt;value()));</code>"}], "tags": [], "owner": {"reputation": 833, "user_id": 8047760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4420b0b735bf473e56fb2996ae53d39?s=128&d=identicon&r=PG&f=1", "display_name": "Christian G", "link": "https://stackoverflow.com/users/8047760/christian-g"}, "is_accepted": true, "score": 4, "last_activity_date": 1513180861, "creation_date": 1513180861, "answer_id": 47797369, "question_id": 47797277, "link": "https://stackoverflow.com/questions/47797277/vector-of-qthreads/47797369#47797369", "title": "Vector of QThreads", "body": "<p>The copy constructor of the CaptureThread is deleted, probably because the QThread cannot be copied. </p>\n\n<p>You couldput pointers of your CaptureThreads into the vector of threads.</p>\n\n<pre><code>vector&lt;std::unique_ptr&lt;CaptureThread&gt;&gt; v_ct_Threads(i_SelectedCameras);\n\nfor(int i = 0; i &lt; i_SelectedCameras; i++) {\n    v_ct_Threads[i] = std::make_unique&lt;CaptureThread&gt;(i, qsb_Duration-&gt;value());\n    v_ct_Threads[i]-&gt;start();\n}\n\nfor(int i = 0; i &lt; i_SelectedCameras; i++) {\n    v_ct_Threads[i]-&gt;wait();\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4853625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef3c0539803267df00afb9b5041a45d?s=128&d=identicon&r=PG", "display_name": "R&#233;mi", "link": "https://stackoverflow.com/users/4853625/r%c3%a9mi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "closed_date": 1513184521, "accepted_answer_id": 47797369, "answer_count": 1, "score": 1, "last_activity_date": 1513180861, "creation_date": 1513180581, "question_id": 47797277, "link": "https://stackoverflow.com/questions/47797277/vector-of-qthreads", "closed_reason": "Duplicate", "title": "Vector of QThreads", "body": "<p>I am trying to multithread my image recording application in order to optimize performances and prevent the GUI from freezing.\nI tried to create a vector of CaptureThread (my class which extends QThread) but it does not compile...</p>\n\n<p>here is my code:</p>\n\n<pre><code>vector&lt;CaptureThread&gt; v_ct_Threads(i_SelectedCameras);\n\nfor(int i = 0; i &lt; i_SelectedCameras; i++) {\n    v_ct_Threads[i] = CaptureThread(i, qsb_Duration-&gt;value());\n    v_ct_Threads[i].start();\n}\n\nfor(int i = 0; i &lt; i_SelectedCameras; i++) {\n    v_ct_Threads[i].wait();\n}\n</code></pre>\n\n<p>And the error:</p>\n\n<pre><code>use of deleted function \u2018CaptureThread&amp; CaptureThread::operator=(CaptureThread&amp;&amp;)\u2019\nv_ct_Threads[i] = CaptureThread(i, qsb_Duration-&gt;value());\n</code></pre>\n\n<p>I guess it's a stupid mistake but I am a beginner in C++ and Qt...</p>\n"}, {"tags": ["c++", "network-programming", "winsock"], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 7690982, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3391858e255d5aa7f209ecfb3029526c?s=128&d=identicon&r=PG&f=1", "display_name": "danieltakeshi", "link": "https://stackoverflow.com/users/7690982/danieltakeshi"}, "edited": false, "score": 0, "creation_date": 1513187944, "post_id": 47797689, "comment_id": 82559999, "body": "I edited with the result, although already made a test with telnet on that port"}], "tags": [], "owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "is_accepted": false, "score": 2, "last_activity_date": 1513189245, "last_edit_date": 1592644375, "creation_date": 1513181828, "answer_id": 47797689, "question_id": 47797113, "link": "https://stackoverflow.com/questions/47797113/error-11004-on-local-network-with-winsock-client/47797689#47797689", "title": "Error 11004 on Local NetWork with Winsock Client", "body": "<p>From <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740668(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms740668(v=vs.85).aspx</a></p>\n<blockquote>\n<p><strong>WSANO_DATA 11004</strong></p>\n<p>Valid name, no data record of requested type.\nThe requested name is valid and was found in the database, but it does not have the correct associated data being resolved for. The usual example for this is a host name-to-address translation attempt (using gethostbyname or WSAAsyncGetHostByName) which uses the DNS (Domain Name Server). An MX record is returned but no A record\u2014indicating the host itself exists, but is not directly reachable.</p>\n</blockquote>\n<p>Your code is failing at <code>gethostbyaddr(...)</code>. This is because the DNS on your router has no DNS record for your computer.</p>\n<p>Having address, port, and protocol, you should directly attempt to connect to the server with it.</p>\n<p>Also, gethostbyaddr has been deprecated: see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738521(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms738521(v=vs.85).aspx</a></p>\n<p>For reference on how to set up your socket to connect see <a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#connect\" rel=\"nofollow noreferrer\">http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#connect</a></p>\n<p>in beej's code you'll see a getaddrinfo call. That supports hostnames as shown, or dotted ip strings, so you should be able to nuke the following code from your sample:</p>\n<pre><code>if (isalpha(server_name[0]))\n{   // server address is a name\n    hp = gethostbyname(server_name);\n}\nelse\n{ // Convert nnn.nnn address to a usable one\n    addr = inet_addr(server_name);\n    hp = gethostbyaddr((char *)&amp;addr, 4, AF_INET);\n}\n</code></pre>\n"}], "owner": {"reputation": 895, "user_id": 7690982, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3391858e255d5aa7f209ecfb3029526c?s=128&d=identicon&r=PG&f=1", "display_name": "danieltakeshi", "link": "https://stackoverflow.com/users/7690982/danieltakeshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513189245, "creation_date": 1513180064, "last_edit_date": 1513186563, "question_id": 47797113, "link": "https://stackoverflow.com/questions/47797113/error-11004-on-local-network-with-winsock-client", "title": "Error 11004 on Local NetWork with Winsock Client", "body": "<h2>Problem</h2>\n\n<p>I am using the code to connect to localhost on Hercules HW terminal as Server and it works.</p>\n\n<p>Then i tried to set the Server on another computer on the local network on other computer.</p>\n\n<p>The message error is given for WSAGetLastError() <code>11004</code></p>\n\n<p>What is wrong? I just can't figure out.</p>\n\n<h2>Code</h2>\n\n<p>The code for a client with Winsock is:</p>\n\n<pre><code>#ifndef WIN32_LEAN_AND_MEAN\n#define WIN32_LEAN_AND_MEAN\n#endif\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n#include &lt;time.h&gt;\n\n\n// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib\n#pragma comment (lib, \"Ws2_32.lib\")\n#pragma comment (lib, \"Mswsock.lib\")\n#pragma comment (lib, \"AdvApi32.lib\")\n\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"2112\"\n#define DEFAULT_PROTO SOCK_STREAM\n\nint main()\n{\n    char Buffer[128];\n    // default to localhost\n    char *server_name = \"localhost\";\n    unsigned short port = atoi(DEFAULT_PORT);\n    int retval, loopflag = 0;\n    int i, loopcount, maxloop = -1;\n    unsigned int addr;\n    int socket_type = DEFAULT_PROTO;\n    struct sockaddr_in server;\n    struct hostent *hp;\n    int first = 1;\n    WSADATA wsaData;\n    SOCKET  conn_socket;\n\n    //    srand(time(NULL));\n    if ((retval = WSAStartup(0x202, &amp;wsaData)) != 0)\n    {\n        fprintf(stderr, \"Client: WSAStartup() failed: Error %d\\n\", retval);\n        WSACleanup();\n        return -1;\n    }\n    else\n        printf(\"Client: WSAStartup() is OK.\\n\");\n\n    printf(\"Defina o nome ou IP do servidor[default = localhost]:\\n\");\n    //    scanf( \"%s\" , Buffer );\n    gets_s(Buffer);\n    if (Buffer[0] != 0)\n        server_name = Buffer;\n\n    //    server_name = &amp;Buffer;\n\n    if (isalpha(server_name[0]))\n    {   // server address is a name\n        hp = gethostbyname(server_name);\n    }\n    else\n    { // Convert nnn.nnn address to a usable one\n        addr = inet_addr(server_name);\n        hp = gethostbyaddr((char *)&amp;addr, 4, AF_INET);\n    }\n\n    if (hp == NULL)\n    {\n        fprintf(stderr, \"Client: Endereco IP nao identificado \\\"%s\\\": Error %d\\n\", server_name, WSAGetLastError());\n        WSACleanup();\n        exit(1);\n    }\n    else\n        printf(\"Client: gethostbyaddr() esta OK.\\n\");\n    memset(Buffer, 0, 128);\n    printf(\"Defina a porta do server[default = 2112]:\\n\");\n    gets_s(Buffer);\n    if (Buffer[0] != 0)\n        port = atoi(Buffer);\n\n    memset(&amp;server, 0, sizeof(server));\n    memcpy(&amp;(server.sin_addr), hp-&gt;h_addr, hp-&gt;h_length);\n    server.sin_family = hp-&gt;h_addrtype;\n    server.sin_port = htons(port);\n\n    conn_socket = socket(AF_INET, socket_type, 0); /* Open a socket */\n    if (conn_socket &lt;0)\n    {\n        fprintf(stderr, \"Client: Erro ao abrir o socket: Error %d\\n\", WSAGetLastError());\n        WSACleanup();\n        return -1;\n    }\n    else\n        printf(\"Client: socket() esta OK.\\n\");\n\n    printf(\"Client: Cliente conectando com: %s.\\n\", hp-&gt;h_name);\n\n    conn_socket = socket(AF_INET, socket_type, 0); /* Open a socket */\n    if (connect(conn_socket, (struct sockaddr*)&amp;server, sizeof(server)) == SOCKET_ERROR)\n    {\n        fprintf(stderr, \"Client: connect() falhou: Error %d\\n\", WSAGetLastError());\n        WSACleanup();\n        return -1;\n    }\n    else\n        printf(\"Client: connect() esta OK.\\n\");\n\n    loopcount = 0;\n    return 0;\n}\n</code></pre>\n\n<p>Using Visual Basic 2015 to compile, with: <code>Project &gt; Properties &gt; Configuration Properties &gt; C/C++ &gt; Preprocessor &gt; Preprocessor Definitions</code></p>\n\n<pre><code>_WINSOCK_DEPRECATED_NO_WARNINGS\n_CRT_SECURE_NO_WARNINGS\n</code></pre>\n\n<h2>Tests</h2>\n\n<ul>\n<li>Using <code>telnet</code> and <code>ping</code> works on the other server created using Hercules HW terminal.</li>\n<li>Using the Hercules HW terminal as Client on computer A and as Server on computer B also works, so i think it is somthing with my code.</li>\n<li>Using <code>nmap -p 2112 192.168.1.134</code></li>\n</ul>\n\n<p>The result is:</p>\n\n<pre><code>Nmap scan report for 192.168.1.134\n\nHost is up (0.00s latency).\n\n\n\nPORT     STATE SERVICE\n\n2112/tcp open  kip\n\nMAC Address: 00:19:BB:F7:48:29 (Hewlett Packard)\n\n\n\nNmap done: 1 IP address (1 host up) scanned in 3.31 seconds\n</code></pre>\n"}, {"tags": ["c++", "metaprogramming", "language-lawyer", "crtp"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1513180260, "post_id": 47797105, "comment_id": 82555097, "body": "afaik it is well defined. No grey area."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1513180272, "post_id": 47797105, "comment_id": 82555106, "body": "CRTP is fully supported by the standard, to the point that standard library features use it. For example, see <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">std::enable_shared_from_this</a>. Perhaps someone with better knowledge of the standard could indicate which parts of the standard guarantee that it works."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 4, "creation_date": 1513180767, "post_id": 47797105, "comment_id": 82555393, "body": "Strictly speaking, it works because the <i>injected class name</i> exists before the <i>base clause</i>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 8, "creation_date": 1513181052, "post_id": 47797105, "comment_id": 82555589, "body": "The use of the word &quot;exploit&quot; isn&#39;t helpful. Do you have a specific example where you&#39;re confused as to how something compiles? There really isn&#39;t anything special about how CRTP compiles vs any other template."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 2, "creation_date": 1513181373, "post_id": 47797105, "comment_id": 82555799, "body": "What do you mean by an &quot;exploit&quot;?  Making use of an implementation artifact? It <i>definitely</i> isn&#39;t that.  Making use of an unintended feature of the language as defined?  Not really."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 4, "creation_date": 1513181409, "post_id": 47797105, "comment_id": 82555821, "body": "&quot;Exploit&quot; usually means &quot;a bug abused for malevolent purposes&quot;.  CRTP is definitely not that."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1513182404, "post_id": 47797105, "comment_id": 82556488, "body": "<i>&quot;1. Defines the space required for each Class Template&quot;</i> Your supposed first step already makes no sense. Class templates don&#39;t require space - concrete classes (instantiations of a class template among them) require space (or to be precise, objects of those classes do). If you have <code>template &lt;typename T&gt; class C { T m; };</code>, you can&#39;t write <code>sizeof(C)</code>, but you can, say, <code>sizeof(C&lt;int&gt;)</code>. You seem to labor under misconceptions of how templates and template instantiations work."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1513182639, "post_id": 47797105, "comment_id": 82556647, "body": "@MartinBonner I&#39;ve tried to clarify what I meant by exploit. I&#39;m really asking is CRTP implementation dependent."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1513182927, "post_id": 47797105, "comment_id": 82556853, "body": "@IgorTandetnik I&#39;d tried to make it more clear that I <i>did</i> understand this by saying Class Template. How would you have phrased that? I&#39;m trying to say the object is defined at a sufficiently to allow compilation of methods to begin."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1513183013, "post_id": 47797105, "comment_id": 82556913, "body": "@Passer By so this is the closest I&#39;ve gotten to an answer. What do you mean by &quot;base clause&quot;?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1513183065, "post_id": 47797105, "comment_id": 82556961, "body": "JonathanMee In @IgorTandetnik&#39;s example, <code>C</code> is a class template (a template for generating classes), <code>C&lt;int&gt;</code> is a template class (a class generated from a template).  The order matters!"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1513186857, "post_id": 47797105, "comment_id": 82559424, "body": "The standard does not care what the compiler does. It just says, &quot;this code is well-defined, so you should compile it to let it run as what I say, in whatever way!&quot;"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1513188204, "post_id": 47797105, "comment_id": 82560126, "body": "@xskxzr Um... no, the standard defines how the compiler operates. Literally everything in the standard is defining allowable compiler inputs and expected outputs. The standard does not care <i>how</i> the compiler accomplishes this is probably what you meant to say."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 2, "creation_date": 1513221977, "post_id": 47797105, "comment_id": 82572356, "body": "Yes. It seems that you are considering template instantiation rather than compilation, where how instantiation works is defined by the standard. Maybe <a href=\"http://www.eel.is/c++draft/temp.inst#2\" rel=\"nofollow noreferrer\">this paragraph</a> is what you are seeking for, which says an instantiation of a class template does not cause the implicit instantiation of the <b>definitions</b> of its member functions."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1513259674, "post_id": 47797105, "comment_id": 82591402, "body": "@xskxzr That may be the exact section that I need... But I just can&#39;t understand the example. Can you help me? I&#39;ve asked a question here: <a href=\"https://stackoverflow.com/q/47815028/2642059\">stackoverflow.com/q/47815028/2642059</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 2, "creation_date": 1513279211, "post_id": 47798068, "comment_id": 82603575, "body": "I thought proving it will be hideous too, but some experimenting and helpful compiler errors later, it is actually <a href=\"https://stackoverflow.com/a/47820588/4832499\">pretty straightforward</a>."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1513247297, "last_edit_date": 1513247297, "creation_date": 1513182949, "answer_id": 47798068, "question_id": 47797105, "link": "https://stackoverflow.com/questions/47797105/is-curiously-recurring-template-pattern-implementation-specific/47798068#47798068", "title": "Is Curiously Recurring Template Pattern Implementation Specific?", "body": "<p>No.  The CRTP is not implementation specific.  It must be supported by any standard compliant compiler.</p>\n\n<p>Proving this from the words of the standard is quite a laborious task.  I'll delete this answer if someone comes along with an answer with references (and makes a comment here to remind me to do so).</p>\n\n<hr>\n\n<p>As <a href=\"https://stackoverflow.com/users/4832499/passer-by\">PasserBy</a> say:</p>\n\n<blockquote>\n  <p>Strictly speaking, it works because the <em>injected class name</em> exists before the <em>base clause</em></p>\n</blockquote>\n\n<p>The <em>base clause</em> is everything after the colon in:</p>\n\n<pre><code>class Derived : CRTP&lt;Derived&gt;\n</code></pre>\n\n<hr>\n\n<p>As <a href=\"https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux\">Fran\u00e7ois Andrieux</a> and <a href=\"https://stackoverflow.com/users/2757035/underscore-d\">underscore_d</a> points out, we can indirectly prove that the standard requires CRTP to work, because it defines <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\"><code>std::enable_shared_from_this</code></a> which uses the CRTP.  (However, it was well defined in C++89, and <code>enable_shared_from_this</code> wasn't added until C++11).</p>\n"}, {"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1513184790, "last_edit_date": 1513184790, "creation_date": 1513183887, "answer_id": 47798366, "question_id": 47797105, "link": "https://stackoverflow.com/questions/47797105/is-curiously-recurring-template-pattern-implementation-specific/47798366#47798366", "title": "Is Curiously Recurring Template Pattern Implementation Specific?", "body": "<p>This is well-defined. As noted in comments, even the standard utilizes the functionality.</p>\n\n<p>The way to think about it is that as soon as you write <code>class Child</code> the compiler considers that effectively a forward declaration of the type. So as long as the parent class template definition doesn't depend on the complete type of <code>Child</code> the parent it will compile successfully. [I believe that the size of the parent template class cannot depend on the definition of <code>Child</code> but I can't prove that to myself] Note that the parent template <em>method bodies</em> are free to rely on the complete type of child because they will be dependent types and thus their instantiation is delayed to the second phase of template compilation when the full definition of <code>Child</code> is available.</p>\n"}, {"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": true, "score": 5, "last_activity_date": 1513279318, "last_edit_date": 1513279318, "creation_date": 1513278855, "answer_id": 47820588, "question_id": 47797105, "link": "https://stackoverflow.com/questions/47797105/is-curiously-recurring-template-pattern-implementation-specific/47820588#47820588", "title": "Is Curiously Recurring Template Pattern Implementation Specific?", "body": "<p>CRTP was never implementation defined or conditionally supported, IIRC it was a pleasant surprise at the time of invention and has been accepted ever since.</p>\n\n<p>From <a href=\"https://timsong-cpp.github.io/cppwp/class#2\" rel=\"nofollow noreferrer\">[class]</a></p>\n\n<blockquote>\n  <p>A <em>class-name</em> is inserted into the scope in which it is declared immediately after the <em>class-name</em> is seen. The <em>class-name</em> is also inserted into the scope of the class itself; this is known as the <em>injected-class-name</em>.</p>\n</blockquote>\n\n<p>Where <em>class-name</em> is the name of the class being declared. Therefore the <em>class-name</em> is already visible before the <em>base-clause</em>, which is the list of bases, but the class is complete only after its full definition.</p>\n\n<p>However, templates are allowed to use incomplete types as its type-arguments, from <a href=\"https://timsong-cpp.github.io/cppwp/temp#arg.type-2\" rel=\"nofollow noreferrer\">[temp]</a></p>\n\n<blockquote>\n  <p>A template type argument may be an incomplete type.</p>\n</blockquote>\n\n<p>Note the template is complete even if its type arguments aren't.</p>\n\n<pre><code>template&lt;typename&gt;\nstruct S {};\n\nstruct U     // U is visible after this line\n    : S&lt;U&gt;   // S&lt;U&gt; is a complete type\n{\n    S&lt;U&gt; s;  // well-formed\n};           // U is complete after this line\n</code></pre>\n\n<p>The reason the instantiated template can be complete is because the template type arguments may themselves be incomplete within the template, thereby avoiding cyclic logic</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct A\n{\n    T t;  // ill-formed, incomplete type T in instantiation of A&lt;B&gt; from below\n};\n\nstruct B : A&lt;B&gt;  // implicit instantiation of the specialization A&lt;B&gt;\n{\n};\n</code></pre>\n\n<p>We conclude the pattern is valid. <em>How</em> the compiler manages to compile it is irrelevant, if it is standard conformant, it will compile that code.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 1, "accepted_answer_id": 47820588, "answer_count": 3, "score": 3, "last_activity_date": 1514638801, "creation_date": 1513180046, "last_edit_date": 1514638801, "question_id": 47797105, "link": "https://stackoverflow.com/questions/47797105/is-curiously-recurring-template-pattern-implementation-specific", "title": "Is Curiously Recurring Template Pattern Implementation Specific?", "body": "<p>So I've read through this: <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern</a></p>\n\n<p>And understand how Curiously Recurring Template Pattern (CRTP) works. But it seems like it depends upon the compiler implementation, specifically that the compiler:</p>\n\n<ol>\n<li>Defines the space required for each Template Class</li>\n<li>Then compiles the child class's methods</li>\n<li>Then compiles the parent class's methods</li>\n</ol>\n\n<p>While I can see how this order allows compilation I feel like it's an leveraging compiler construction rather than an order of compiler passes required by the standard. But I feel like an equally legitimate set of compiler passes would be to:</p>\n\n<ol>\n<li>Define the space required for the parent class</li>\n<li>Compile the parent classes methods</li>\n<li>Define the space required for the child class</li>\n<li>Compile the child classes methods</li>\n</ol>\n\n<p>If the compiler used these passes CRTP would fail on step 2 when it attempts to evaluate a child type.</p>\n\n<p>So I've just made up these compiler passes, but is there a standard requirement that places constraints on the compiler that it much adhere to the 3 passes of the 1<sup>st</sup>? Or does CRTP exist in a grey area of knowing how compilers are implemented currently?</p>\n\n<hr>\n\n<p>As I see it to allow that the standard would need to require a 1<sup>st</sup> pass that establishes object sizes, followed by a 2<sup>nd</sup> pass that compiles methods. But this 2<sup>nd</sup> pass wold have to be willing to build a child objects methods before the parent objects, which seems backwards.</p>\n"}, {"tags": ["c++", "using", "using-declaration"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513179850, "post_id": 47797007, "comment_id": 82554817, "body": "Is <code>using std::cout,std::cin,std::endl;</code> legal syntax? I&#39;ve never seen this before, and VS doesn&#39;t accept it."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1513179866, "post_id": 47797007, "comment_id": 82554827, "body": "You could post one of these warnings... It might already indicate the answer. Anyway, <a href=\"http://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"nofollow noreferrer\">cppreference</a> states that <code>using declarator-list ;</code> is C++17 only. So that&#39;s probably why."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1513179919, "post_id": 47797007, "comment_id": 82554869, "body": "I never seen this kind of declaration..."}, {"owner": {"reputation": 71, "user_id": 8555635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ce8ccb081f95ded519fce40c3649da?s=128&d=identicon&r=PG&f=1", "display_name": "iambrj", "link": "https://stackoverflow.com/users/8555635/iambrj"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1513179988, "post_id": 47797007, "comment_id": 82554917, "body": "@Fran&#231;oisAndrieux it works with gcc (I&#39;ve tried it), but it issues warnings"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1513180021, "post_id": 47797007, "comment_id": 82554937, "body": "<i>What warnings?</i>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1513180092, "post_id": 47797007, "comment_id": 82554990, "body": "apparently it is a C++17 thing."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1513181688, "post_id": 47797149, "comment_id": 82556016, "body": "Well done. Indeed, the warning might suggest OP to turn on <code>-std=c++17</code> ;)"}], "tags": [], "owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "is_accepted": true, "score": 6, "last_activity_date": 1513180167, "creation_date": 1513180167, "answer_id": 47797149, "question_id": 47797007, "link": "https://stackoverflow.com/questions/47797007/c-comma-separated-list-in-using-declaration/47797149#47797149", "title": "c++ : comma separated list in using declaration", "body": "<p>As documented at <a href=\"http://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"noreferrer\">cppreference</a>, the form</p>\n\n<blockquote>\n  <p><strong>using <em>declarator-list</em>;</strong></p>\n</blockquote>\n\n<p>is available from C++17 onwards only.</p>\n\n<p>Your compiler is probably telling you this, if you'd read the warning!</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513245176, "post_id": 47798185, "comment_id": 82581864, "body": "I was thinking that we could just point readers at the objections given to multi-line variable declarations and cover most of the common ground (though <code>using</code> is not anywhere near so vulnerable to mistakes as that)."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1513270021, "last_edit_date": 1513270021, "creation_date": 1513183313, "answer_id": 47798185, "question_id": 47797007, "link": "https://stackoverflow.com/questions/47797007/c-comma-separated-list-in-using-declaration/47798185#47798185", "title": "c++ : comma separated list in using declaration", "body": "<p>Approaching from the other side, Reasons for disapproving of horizontal lists:</p>\n\n<ol>\n<li><p><code>using std::cout;</code> is about an inch wide on my screen. This allows the eye to read it with very little horizontal movement and the vertical distance traveled to the next line is much shorter than having to read one item and then the next and the next.... Most people can read the vertical scroll faster. </p></li>\n<li><p>Next, lined up vertically you tend to get more easily recognized patterns. A rogue <code>stb::</code> will stand out better in a line-up of <code>std::</code>s to the majority of readers. Not much, but it may save you a compile and that compile might take a long, long time under some circumstances.</p></li>\n<li><p>Inserting, removing, or altering a using declaration will be easier to pick out in file difference output if it's on its own line. If the changes are buried all on line you have to scan both lines and run a Mark 1 Eyeball diff to find out what changed, and the Mark 1 Eyeball and the human CPU can really suck at doing this.</p></li>\n</ol>\n"}], "owner": {"reputation": 71, "user_id": 8555635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ce8ccb081f95ded519fce40c3649da?s=128&d=identicon&r=PG&f=1", "display_name": "iambrj", "link": "https://stackoverflow.com/users/8555635/iambrj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 47797149, "answer_count": 2, "score": 0, "last_activity_date": 1513270021, "creation_date": 1513179763, "question_id": 47797007, "link": "https://stackoverflow.com/questions/47797007/c-comma-separated-list-in-using-declaration", "title": "c++ : comma separated list in using declaration", "body": "<p>Why is it a bad practice to use a comma separated list in a using declaration statement in c++?</p>\n\n<p>For example </p>\n\n<pre><code>using std::cout;\nusing std::cin;\nusing std::endl;\n</code></pre>\n\n<p>is considered better code than</p>\n\n<pre><code>using std::cout,std::cin,std::endl;\n</code></pre>\n\n<p>Some compiliers(gcc, for instance) even issue warnings if the code contains a comma separated list of using declarations. </p>\n\n<p>Ofcourse, the best practice would be to use fully qualified names for identifiers.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 6, "creation_date": 1513179027, "post_id": 47796709, "comment_id": 82554292, "body": "It&#39;s a macro. That means that every place where the compiler sees <code>ERROR</code> it replaces it with <code>0</code>. And, no, it doesn&#39;t &quot;compile with g++&quot;. Something else might compile, but this code won&#39;t."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1513179036, "post_id": 47796709, "comment_id": 82554299, "body": "The main reason is that you&#39;ve adopted a Java/Python convention, namely uppercase for constants, in C++ where it Does Not Make Sense."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1513179155, "post_id": 47796709, "comment_id": 82554366, "body": "<b>\u22121</b> For posting code that is <b>not the real code</b>."}, {"owner": {"reputation": 103, "user_id": 6478369, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gephD-5kSSc/AAAAAAAAAAI/AAAAAAAAAP8/ZVB2Ysg8Lq0/photo.jpg?sz=128", "display_name": "Jordi Adell", "link": "https://stackoverflow.com/users/6478369/jordi-adell"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1513179162, "post_id": 47796709, "comment_id": 82554372, "body": "You are right @Pete Becker,  it does not compile in g++, I just realised the define actually comes from a windows default include wingdi.h that does not exists when compiling with g++. This the preprocessor might even replace variable names, I guess. Thanks."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513179450, "post_id": 47796709, "comment_id": 82554545, "body": "<code>namesspace</code> O RLY? Post the actual code you&#39;re using, which is presumably not that, or you&#39;d be getting a different problem."}, {"owner": {"reputation": 349, "user_id": 6103346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e69362c543ad115bbd596dacfc3fa7?s=128&d=identicon&r=PG&f=1", "display_name": "U. W.", "link": "https://stackoverflow.com/users/6103346/u-w"}, "edited": false, "score": 0, "creation_date": 1607438745, "post_id": 47796709, "comment_id": 115268563, "body": "Hi! Just ran into exactly this problem where a colleague used ALL CAPS for enum values... Some never learn, and some have never learnt."}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1513179915, "post_id": 47796830, "comment_id": 82554865, "body": "@Fran&#231;oisAndrieux Probably worth throwing in that macros are considered evil in general usage with a number of levels of hell reserved for their misuse;  but have an upvote for being able to understand that namesspace was a typo."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 7, "last_activity_date": 1513180235, "last_edit_date": 1513180235, "creation_date": 1513179211, "answer_id": 47796830, "question_id": 47796709, "link": "https://stackoverflow.com/questions/47796709/what-is-the-reason-for-a-define-clashing-with-a-typedef-enum-in-visual-studio/47796830#47796830", "title": "What is the reason for a define clashing with a typedef enum in visual studio?", "body": "<p>Preprocessor <code>#define</code> substitution is one of the first things to happen when you compile your code. These substitutions are made textually and ignore c++ syntax. Your code is equivalent to :</p>\n\n<pre><code>namespace lib{\n    class Logger{\n         public:\n             typedef enum {0 = 1} LogLevel;\n    };\n}\n</code></pre>\n\n<p>It's obvious that, after the substitution of <code>ERROR</code> with <code>0</code> your <code>enum</code> definition is ill-formed.</p>\n\n<p>Using preprocessor marcos is generally seen as a bad idea if any other mechanism can do the same job instead. This question illustrates one of the many risks associated with using them. See the question <a href=\"https://stackoverflow.com/questions/14041453/why-are-preprocessor-macros-evil-and-what-are-the-alternatives\">Why are preprocessor macros evil and what are the alternatives?</a>.</p>\n"}], "owner": {"reputation": 103, "user_id": 6478369, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gephD-5kSSc/AAAAAAAAAAI/AAAAAAAAAP8/ZVB2Ysg8Lq0/photo.jpg?sz=128", "display_name": "Jordi Adell", "link": "https://stackoverflow.com/users/6478369/jordi-adell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1513182756, "answer_count": 1, "score": 0, "last_activity_date": 1513182316, "creation_date": 1513178850, "last_edit_date": 1513182316, "question_id": 47796709, "link": "https://stackoverflow.com/questions/47796709/what-is-the-reason-for-a-define-clashing-with-a-typedef-enum-in-visual-studio", "closed_reason": "Duplicate", "title": "What is the reason for a define clashing with a typedef enum in visual studio?", "body": "<p>I have some code which has some code that looks like this one here (I simplified it, of course)</p>\n\n<pre><code>#define ERROR 0\n\nnamespace lib{\n    class Logger{\n         public:\n             typedef enum {ERROR = 1} LogLevel;\n    };\n}\n</code></pre>\n\n<p>When compiling in visual studio I get the error: <code>syntax error: 'constant'</code>. It is clear that the problem is that I am re-using the word ERROR for the define and the typedef enum.</p>\n\n<p>Does anyone know the logic of the define influencing some variable name that is is fact included inside a namespace and a class. I mean, how can <code>ERROR</code> be confused with <code>lib::Logger::ERROR</code> since my guess is that they have completely different scopes. </p>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1513179029, "post_id": 47796685, "comment_id": 82554294, "body": "Are you sure the paths use the same slash in cygwin and Windows?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1513179308, "post_id": 47796685, "comment_id": 82554460, "body": "Use std::string, don&#39;t use str* functions."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1513179619, "post_id": 47796685, "comment_id": 82554666, "body": "This code looks awfully fragile."}], "answers": [{"tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 1, "last_activity_date": 1513179564, "creation_date": 1513179564, "answer_id": 47796949, "question_id": 47796685, "link": "https://stackoverflow.com/questions/47796685/strcat-3-char-from-char-to-char-works-on-windows-but-gives-segmentation-fau/47796949#47796949", "title": "strcat 3 char from char[] to char * works on Windows, but gives segmentation fault in Cygwin", "body": "<p>I think the problem is in this line:</p>\n\n<pre><code>pscL=strrchr(File1,'\\\\');\n</code></pre>\n\n<p>you should check pscL value against zero, after doing that:</p>\n\n<pre><code>if(pscL == 0)\n{\n  pscL=strrchr(File1,'/'); //unix style file path on cygwin\n}\n</code></pre>\n\n<p>This is because, <a href=\"https://www.gnu.org/software/libtool/manual/html_node/Cygwin_002fWindows-File-Name-Conversion.html\" rel=\"nofollow noreferrer\">as explained here</a>:</p>\n\n<blockquote>\n  <p>Cygwin provides a Unix emulation environment for Windows. As part of\n  that emulation, it provides a file system mapping that presents the\n  Windows file system in a Unix-compatible manner.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 5389211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/436bed32c258babd2405fdca5eb5d9c4?s=128&d=identicon&r=PG&f=1", "display_name": "TomM", "link": "https://stackoverflow.com/users/5389211/tomm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 47796949, "answer_count": 1, "score": 1, "last_activity_date": 1513179564, "creation_date": 1513178784, "question_id": 47796685, "link": "https://stackoverflow.com/questions/47796685/strcat-3-char-from-char-to-char-works-on-windows-but-gives-segmentation-fau", "title": "strcat 3 char from char[] to char * works on Windows, but gives segmentation fault in Cygwin", "body": "<p>I need to update an older application, where now \"Type\" needs to be dynamicly set based on the 2nd till 4th letter of a filename:\nI quickly hacked following code that works perfectly on Windows, but gives a  segmentation fault in Cygwin:\nFirst of \"Type\" is defined in x.h as </p>\n\n<pre><code>private:\n    CHAR* Type;\n</code></pre>\n\n<p>The Code:</p>\n\n<pre><code>INT32   Engine::Run(...)\n{\n    Type = new char[4];\n    strcpy(Type,\"\");\n\n    char FileName[50];\n    char *pscL;\n    char Unit[4];\n    strcpy(Unit,\"\");\n    pscL=strrchr(File1,'\\\\');\n    char *ps = pscL;\n    ps++;\n    ps++;\n    memcpy(Unit,ps,3);\n    Unit[3]=0;\n    if (strcmp(Unit, \"AAA\") == 0)\n    {\n        strcpy(Unit,\"AAA\");\n    }\n    else if (strcmp(Unit, \"BBB\") == 0)\n    {\n        strcpy(Unit,\"CCC\");\n    }\n    else\n    {\n        strcpy(Unit,\"BBB\");\n    }\n    strcat(Type,Unit);\n    printf(\"Type: %s \\n\",Type);\n    ...\n    //furtherdown Type is used in eg.:\n    if (strcmp(Type, \"HCU\") == 0)\n    ...\n    if (!GetFile(calRet,Anal,pC,fcN,Type)) return -1;\n    ...\n</code></pre>\n\n<p>File1 is in the form of \"D:\\tmp\\testing\\yada\\XBBBYYYYY123YYY.ZZZ\"</p>\n\n<p>The strcat(Type,Unit); gives an segmentation fault. I don't want to change the type of \"Type\" since this is used all over the place, code I don't want to touch.\nI'm very limited what I can do in the cygwin installation (where it should run when finished) to debug, which is why it frustrates me that it works on Windows.</p>\n"}, {"tags": ["c++", "dictionary", "vector"], "comments": [{"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1513178982, "post_id": 47796661, "comment_id": 82554261, "body": "Can you provide Allele implementation?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1513179707, "post_id": 47796661, "comment_id": 82554723, "body": "Your code is a mess, can you describe what you are trying to do?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8905766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb695c33cbae4a9bef06576e7d826654?s=128&d=identicon&r=PG&f=1", "display_name": "Myriam Ghali", "link": "https://stackoverflow.com/users/8905766/myriam-ghali"}, "edited": false, "score": 0, "creation_date": 1513180714, "post_id": 47797133, "comment_id": 82555349, "body": "Sorry I realised afterwards, I&#39;ve been trying out so many things it all got messed up. I&#39;ve tried the C++11 solution you&#39;ve proposed and it doesn&#39;t work either. I&#39;ve printed all occurrences and either not all keys were not added and values didnt change."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1513180121, "creation_date": 1513180121, "answer_id": 47797133, "question_id": 47796661, "link": "https://stackoverflow.com/questions/47796661/c-copy-map-into-another-with-same-and-or-different-keys/47797133#47797133", "title": "C++ Copy map into another with same and/or different keys", "body": "<p>Your code is a mess, and would not even compile. ( for example <code>mOccurences.insert(New);</code> is invalid). Looks like you just need this:</p>\n\n<pre><code>void Population::addOccurrences( std::map&lt;Allele, size_t&gt; immigrants )\n{\n     for( std::map&lt;Allele, size_t&gt;::const_iterator it = immigrants.begin(); it!= immigrants.end(); ++it)\n        mOccurrences[ it-&gt;first ] += it-&gt;second;\n}\n</code></pre>\n\n<p>Note: you should change parameter type to const reference, there is no reason to copy it by value and that could be expensive. And if you can use C++11:</p>\n\n<pre><code>void Population::addOccurrences( const std::map&lt;Allele, size_t&gt; &amp;immigrants )\n{\n     for( const auto &amp;im : immigrants )\n        mOccurrences[ im.first ] += im.second;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 8905766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb695c33cbae4a9bef06576e7d826654?s=128&d=identicon&r=PG&f=1", "display_name": "Myriam Ghali", "link": "https://stackoverflow.com/users/8905766/myriam-ghali"}, "is_accepted": false, "score": 0, "last_activity_date": 1513183125, "creation_date": 1513183125, "answer_id": 47798123, "question_id": 47796661, "link": "https://stackoverflow.com/questions/47796661/c-copy-map-into-another-with-same-and-or-different-keys/47798123#47798123", "title": "C++ Copy map into another with same and/or different keys", "body": "<p>I have found a solution ! </p>\n\n<pre><code>void Population::addOccurrences( std::map&lt;Allele, size_t&gt; immigrants ) {\n\nmSize = 0; //number of individuals in the niche in total must be updates \nstd::map&lt;Allele, size_t&gt;::iterator New; \nstd::map&lt;Allele, size_t&gt;::iterator it; \n\nfor(it = mOccurrences.begin(); it != mOccurrences.end(); ++it) {\n\n    Allele temp = it-&gt;first; \n    for(New = immigrants.begin(); New != immigrants.end(); ++New) {\n        if(temp == New-&gt;first) { \n            it-&gt;second += New-&gt;second; \n            immigrants.erase(New); \n        }\n    }\n}\nmOccurrences.insert(immigrants.begin(), immigrants.end()); \n\nfor(it = mOccurrences.begin(); it!= mOccurrences.end(); ++it) {\n\n    mSize+= it-&gt;second; \n}\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8905766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb695c33cbae4a9bef06576e7d826654?s=128&d=identicon&r=PG&f=1", "display_name": "Myriam Ghali", "link": "https://stackoverflow.com/users/8905766/myriam-ghali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 619, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513183125, "creation_date": 1513178715, "last_edit_date": 1513178899, "question_id": 47796661, "link": "https://stackoverflow.com/questions/47796661/c-copy-map-into-another-with-same-and-or-different-keys", "title": "C++ Copy map into another with same and/or different keys", "body": "<p>I'm trying to make a simulation of different populations with each multiple genotypes. Each population has a map (mOccurrences) with key = genotype and value = number of individuals with that genotype. \nThese populations should migrate and when individuals go into another niche, the niche's map should be updated to reflect the genomic distribution of the new population. \nAs such, once I've made my individuals migrate, I try to update mOccurences; now some of the incoming genes can be the same as the current ones in the populations, so they should only be added, while other can be new so they should be created inside the map. \nI have tried to iterate over the incomers' map and then use: </p>\n\n<p>mOccurrences.[New->first] += New->second; </p>\n\n<p>but for some reason, it only adds the non-existing genotypes and for the ones common to both populations, the number of individuals does not change. </p>\n\n<p>I have also tried the find method and the insert but to no avail... </p>\n\n<pre><code>void Population::addOccurrences( std::map&lt;Allele, size_t&gt; immigrants ) {\n\nstd::cout&lt;&lt; \"Size NICHE Initiale \" &lt;&lt; mSize &lt;&lt; std::endl; //shows size before immigrants\nmSize = 0; //number of individuals in the niche in total must be updates \nstd::map&lt;Allele, size_t&gt;::iterator New; \nstd::map&lt;Allele, size_t&gt;::iterator it; \n\nstd::cout &lt;&lt; \"Occurrences initial\" &lt;&lt; std::endl;  //PRINTINT current distribution to check\nfor(it = mOccurrences.begin(); it!= mOccurrences.end(); ++it) {\n    std::cout &lt;&lt; it-&gt;first &lt;&lt; '\\t' &lt;&lt; it-&gt;second &lt;&lt; std::endl; \n\n}\n\nstd::cout &lt;&lt; \"IMMIGRANT\" &lt;&lt; std::endl; \nfor(New = immigrants.begin(), it = mOccurrences.begin(); New != immigrants.end(); ++New, ++it) \n{ \n    std::cout &lt;&lt; New-&gt;first &lt;&lt; '\\t' &lt;&lt; New-&gt;second &lt;&lt; std::endl; //PRINTING Immigrants genotype distribution\n\n    it = mOccurrences.find(New-&gt;first); \n    if(it != mOccurrences.end()) {\n    it-&gt;second += New-&gt;second;  //if the allele is already present in population, only add individuals\n    } else { \n        mOccurences.insert(New); //else, insert the pair\n    }\n}\n\nstd::cout &lt;&lt; \"Occurrences final\" &lt;&lt; std::endl; //PRINTING distribution after migration\nfor(it = mOccurrences.begin(); it!= mOccurrences.end(); ++it) {\n    mSize+= it-&gt;second; \n    std::cout &lt;&lt; it-&gt;first &lt;&lt; '\\t' &lt;&lt; it-&gt;second &lt;&lt; std::endl; \n\n}\n\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "iterator", "boost-python", "boost-iterators"], "owner": {"reputation": 409, "user_id": 2354689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c62c883eeaa01c191719b2f0524376a?s=128&d=identicon&r=PG", "display_name": "charqus", "link": "https://stackoverflow.com/users/2354689/charqus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1513178140, "creation_date": 1513178140, "question_id": 47796460, "link": "https://stackoverflow.com/questions/47796460/boost-python-tuple-iterator", "title": "Boost Python Tuple Iterator", "body": "<p>I am trying to export an iterator over tuples from C++ to Python, using the next code: </p>\n\n<pre><code>class PyContainer\n{\npublic:\n    PyContainer(int maxSize) : maxSize(maxSize) { cout &lt;&lt; \"Constructor called with maxSize = \" &lt;&lt; maxSize &lt;&lt; endl; }\n\n    boost::python::tuple AllocateTuple(int idx)\n    {\n        cout &lt;&lt; \"Allocating pyRecord \" &lt;&lt; idx &lt;&lt; endl;\n        return boost::python::make_tuple(idx);\n    }\n\n    class iterator : public std::iterator&lt;std::input_iterator_tag, boost::python::tuple&gt;\n    {\n    public:\n        iterator(const iterator&amp; rhs) : idx(rhs.idx), currTuple(rhs.currTuple), self(rhs.self) { cout &lt;&lt; \"copy iterator(rhs.idx=\" &lt;&lt; rhs.idx &lt;&lt; \", currTuple=\" &lt;&lt; currTuple.ptr()&lt;&lt; \")\" &lt;&lt; endl; }\n        iterator(PyContainer *self, int idx) : idx(idx), currTuple(), self(self) { cout &lt;&lt; \"iterator(idx=\" &lt;&lt; idx &lt;&lt; \")\" &lt;&lt; endl; }\n        ~iterator() { cout &lt;&lt; \"~iterator \" &lt;&lt; currTuple.ptr()&lt;&lt; endl; }\n\n        boost::python::tuple&amp; operator*() \n        { \n            cout &lt;&lt; \"operator* \" &lt;&lt; currTuple.ptr()&lt;&lt; endl;\n            return currTuple;\n        }\n\n        // Pre-increment\n        iterator&amp; operator++() \n        { \n            cout &lt;&lt; \"preinc \" &lt;&lt; currTuple.ptr()&lt;&lt; endl;\n            ++idx;\n            return *this; \n        }\n\n        // Post-increment.     \n        iterator operator++(int)\n        {\n            currTuple = self-&gt;AllocateTuple(idx);\n\n            cout &lt;&lt; \"postinc \" &lt;&lt; currTuple.ptr()&lt;&lt; endl;\n            iterator tmp(*this);\n            operator++();\n            return tmp;\n        }\n\n        // Comparison.\n        bool operator==(const iterator&amp; rhs) { return this-&gt;idx == rhs.idx; }\n        bool operator!=(const iterator&amp; rhs) { return !this-&gt;operator==(rhs); }\n\n    private:\n        int idx;\n        boost::python::tuple currTuple;\n        PyContainer* self;\n    };\n    iterator begin() { return iterator(this, 0); }\n    iterator end() { return iterator(this, maxSize); }\nprivate:\n    int maxSize;\n};\n\nBOOST_PYTHON_MODULE(hello_ext)\n{\n    using namespace boost::python;\n    class_&lt;PyContainer, boost::noncopyable&gt;(\"PyContainer\", init&lt;int&gt;())\n        .def(\"__iter__\", boost::python::iterator&lt;PyContainer, return_internal_reference&lt;&gt;&gt;())\n        ;\n}\n</code></pre>\n\n<p>In python I use the iterator like this:</p>\n\n<pre><code>import hello_ext as a\nr = a.PyContainer(2)\nfor i in r:\n    print i\n</code></pre>\n\n<p>The output from C++ looks like this one:</p>\n\n<pre>\nConstructor called \niterator(idx=2) \ncopy iterator(rhs.idx=2, currentRecord=005D1030) \n~iterator 005D1030\niterator(idx=0)\ncopy iterator(rhs.idx=0, currentRecord=005D1030)\n~iterator 005D1030\ncopy iterator(rhs.idx=0, currentRecord=005D1030)\ncopy iterator(rhs.idx=2, currentRecord=005D1030)\n~iterator 005D1030\n~iterator 005D1030\ncopy iterator(rhs.idx=0, currentRecord=005D1030)\ncopy iterator(rhs.idx=2, currentRecord=005D1030)\n~iterator 005D1030\n~iterator 005D1030\n0==2\nAllocating pyRecord 0\npostinc 008F7970\ncopy iterator(rhs.idx=0, currentRecord=008F7970)\npreinc 008F7970\ncopy iterator(rhs.idx=0, currentRecord=008F7970)\n~iterator 008F7970\noperator* 008F7970\n~iterator 008F7970\n</pre>\n\n<p>And finally, the error received is this one:\n<a href=\"https://i.stack.imgur.com/oevd6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oevd6.png\" alt=\"Assert Error\"></a></p>\n\n<p>Do I have to manage the object's lifetime from Python?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1513177809, "post_id": 47796309, "comment_id": 82553440, "body": "C functions doesn&#39;t throw C++ exceptions. And there is a difference between C++ exception and hardware and other system exceptions that can lead to crashes. In a C++ program you can only catch C++ exceptions."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1513177819, "post_id": 47796309, "comment_id": 82553449, "body": "I think you&#39;re asking about the syntax <code>catch(...)</code> - but I&#39;m not sure"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1513177839, "post_id": 47796309, "comment_id": 82553463, "body": "I think you are confusing C++ exceptions with system exceptions, which are completely different beasts. system exceptions are OS-specific, so you&#39;ll have to give us a bit more info here."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1513177842, "post_id": 47796309, "comment_id": 82553466, "body": "It is not possible to catch an exception which wasn&#39;t thrown, sorry. And the question in the current form is too broad."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1513177849, "post_id": 47796309, "comment_id": 82553472, "body": "You can&#39;t catch exceptions from a C library because it can&#39;t possibly throw exceptions."}, {"owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1513178117, "post_id": 47796309, "comment_id": 82553664, "body": "ok, even if it is a c++ static library, Can I still catch the exception if something goes wrong in the static library function that doesn&#39;t contain throw clause"}, {"owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1513178187, "post_id": 47796309, "comment_id": 82553711, "body": "On which OS you are?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1513178198, "post_id": 47796309, "comment_id": 82553722, "body": "You should read the comments."}, {"owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "reply_to_user": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1513178269, "post_id": 47796309, "comment_id": 82553774, "body": "@user743414 I am using Ubuntu"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1513178339, "post_id": 47796309, "comment_id": 82553814, "body": "<i>Can I still catch the exception if something goes wrong in the static library function that doesn&#39;t contain throw clause</i> If the called code doesn&#39;t <code>throw</code>, there&#39;s <b>nothing</b> to <code>catch</code>."}, {"owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1513178358, "post_id": 47796309, "comment_id": 82553832, "body": "@Harry On windows exists something called SEH. Maybe there&#39;s something similar on Ubuntu? But I&#39;m not a linux guy."}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1513178385, "post_id": 47796309, "comment_id": 82553855, "body": "If it is a well-developed C function you <i>should</i> be able to safely use it by some combination of vetting the input and inspecting the return value. Perhaps you are asking the wrong question."}, {"owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1513178715, "post_id": 47796309, "comment_id": 82554077, "body": "ok. can somebody tell me what I need to do take care in order to prevent my application from getting crashed in these kind of situations?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1513178854, "post_id": 47796309, "comment_id": 82554175, "body": "@Harry If your application (including a library inside it) does something the OS deems illegal (like accessing unmapped memory), the OS WILL shut it down, and there&#39;s not anything you can do about that generally."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513179073, "post_id": 47796309, "comment_id": 82554321, "body": "Your question is &#39;<i>How can I catch exceptions from something that doesn&#39;t throw exceptions</i>&#39;. Do you see the problem with how you phrased that? Setting that aside, people can&#39;t help you determine how to deal with errors that you haven&#39;t described and which manifest in an unknown way, so it&#39;s too unclear to answer. If you &quot;<i>feel [it] is making [your] application crash</i>&quot;, then explain what happens precisely, why you think it&#39;s the library, and what you did with that library before it crashed."}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1513178865, "creation_date": 1513178865, "answer_id": 47796720, "question_id": 47796309, "link": "https://stackoverflow.com/questions/47796309/how-to-catch-exceptions-from-called-functions/47796720#47796720", "title": "how to catch exceptions from called functions", "body": "<p>You can catch all C++ exceptions using something like</p>\n\n<pre><code>try { fun2(); }\ncatch (...) { std::cout &lt;&lt; \"an unknown exception was caught\\n\"; }\n</code></pre>\n\n<p><code>throw</code> clauses on functions are only restricting the set of exceptions which can escape from a function: if there is no <code>throw</code> clause, all exceptions can escape. If there a <code>throw</code> clause and a different exception is thrown, the program is <code>std::terminate()</code>ed.</p>\n\n<p>When catching all exception there is no indication on what caused the exception. The only meaningful action are swallowing the error entirely or to rethrow the exception (using <code>throw;</code>) to cause it being handled elsewhere.</p>\n\n<p>The description of your problem in the question implies that there actually isn't an exception (C functions cannot throw exceptions) but you rather encountered a signal: Linux, unlike some other operating systems (notably Windows) does not translate signals into exceptions. If you want to handle a signal you'll need to set up a signal handler. However, upon return from the signal handler the execution would normally just continue in the same place the program was, most likely continuing to crash. To prevent a crash from a signal handler you'd need to resolve whatever problematic condition is encountered in the signal handler. For example, memory could be mapped into an accessed location upon encountering a segmentation fault. In practice that is rarely done and in some cases it is actually impossible. Also, most signals are raise due to programming errors which are best addressed.</p>\n"}], "owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "closed_date": 1513196331, "answer_count": 1, "score": -2, "last_activity_date": 1513257286, "creation_date": 1513177736, "last_edit_date": 1513257286, "question_id": 47796309, "link": "https://stackoverflow.com/questions/47796309/how-to-catch-exceptions-from-called-functions", "closed_reason": "Needs details or clarity", "title": "how to catch exceptions from called functions", "body": "<p>I want to know if it is possible to catch exceptions from called functions if the called function doesn't have throw clause. The reason I am asking this question is because every time my application crashes the output statement inside catch block doesn't get printed</p>\n\n<pre><code>void thread11()\n{\n     while(true)\n     {\n          try\n          {\n              ...\n              fun2() //static library function\n              ...\n          }\n          catch(std::exception&amp; e)\n          {\n              std::cout &lt;&lt; \"exception is \" &lt;&lt; e.what() &lt;&lt; std::endl;\n          }\n      }\n}\n</code></pre>\n\n<p>Here, because of <code>fun2()</code>, my application crashes. Is it possible to catch these exceptions by the caller function?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513177523, "post_id": 47796204, "comment_id": 82553240, "body": "Did the code compile? Why do you think member function templates would be different to non-member function templates with respect to how they are declared?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 3, "creation_date": 1513177590, "post_id": 47796204, "comment_id": 82553292, "body": "@DietmarK&#252;hl the fact that code compiled is not sufficient proof that the code is a. correct b. working as intended."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1513177686, "post_id": 47796204, "comment_id": 82553349, "body": "@SergeyA: true. However, using for example two entirely different compilers and seeing if they both swallow the code is fair indication of things being OK. Also, it remains: why would things be different compared to non-member function templates?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513177761, "post_id": 47796204, "comment_id": 82553404, "body": "@DietmarK&#252;hl well, OP had a question. May be they would expect that there is a way to generally define next X functions as templates with the same parameters? Not inconceivable."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513178300, "post_id": 47796204, "comment_id": 82553794, "body": "@DietmarK&#252;hl I often found that people new to a language and often new to programming itself tend to question things we take for granted or things that we consider easily deductible by means of logic. This is caused by a big void in knowledge of the subject that makes you question yourself if maybe there is something there in the big unknown you have that might contradict something you found/believe/deduced."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1513178303, "post_id": 47796204, "comment_id": 82553798, "body": "For instance, when I was first introduced to USB at a friend&#39;s computer I asked &quot;In which of the two USB connection should I plug the mouse?&quot; . That got a laugh from my friends (and me later), but from my perspective that was a perfectly valid concern. I knew absolutly nothing about USB and even though both connections looked the same at first glance there could have been some unknown aspect/reason that differentiated between the two."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1513190952, "post_id": 47796204, "comment_id": 82561425, "body": "@bolov and your question could be valid and very important (depending on when this actually has happened)! I have a laptop where two ports are USB3 and two are USB2. Probably makes no difference for mouse, but makes a lot of difference for USB sticks."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 7, "last_activity_date": 1513177923, "last_edit_date": 1513177923, "creation_date": 1513177518, "answer_id": 47796243, "question_id": 47796204, "link": "https://stackoverflow.com/questions/47796204/multiple-template-functions-inside-non-template-class/47796243#47796243", "title": "Multiple template functions inside non-template class", "body": "<p>Yes, you can use the same name for template parameters in different functions, the same way you can name arguments the same. Those names in different functions are completely unrelated.</p>\n\n<p>And yes, you have to use keyword <code>template</code> as per C++ grammar.</p>\n"}], "owner": {"reputation": 175, "user_id": 3388727, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c798751403ad6ba3704306ba52e004e9?s=128&d=identicon&r=PG&f=1", "display_name": "rajiv", "link": "https://stackoverflow.com/users/3388727/rajiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 47796243, "answer_count": 1, "score": 4, "last_activity_date": 1513177923, "creation_date": 1513177389, "last_edit_date": 1513177485, "question_id": 47796204, "link": "https://stackoverflow.com/questions/47796204/multiple-template-functions-inside-non-template-class", "title": "Multiple template functions inside non-template class", "body": "<p>I have a class <code>foo</code> which contain two template functions <code>Add()</code> and <code>Subtract()</code>. </p>\n\n<pre><code>struct foo\n{\n    template &lt;typename U&gt;\n    U* Add();\n    template &lt;typename U&gt;\n    U* Subtract();\n};\n</code></pre>\n\n<p>Is it correct to use same template parameter <code>U</code> for both of them? Also do I need to write <code>template &lt;typename U&gt;</code> every time before a template function declaration?</p>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1513176982, "post_id": 47796013, "comment_id": 82552821, "body": "you already have half the answer in the title, one is in-place, ie no temporary is created nor are any copies involved, the other first calculates the result and only then assigns that to the variable"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 2, "creation_date": 1513177082, "post_id": 47796013, "comment_id": 82552900, "body": "In C++ you can overload the <code>+=</code> operator independently of the <code>+</code> and <code>=</code> operators and make the sample code do different things. But don&#39;t do that :-)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1513177098, "post_id": 47796013, "comment_id": 82552918, "body": "For c++, the compiler has broad authority to modify your code in the name of optimization, as long as it doesn&#39;t change the observed behavior. As such, you would need to test for yourself, with your setup, with your use case and measure the performance, as it may vary. For fundamental arithmetic types, it generally won&#39;t make a difference. For class types, it depends."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1513177697, "post_id": 47796013, "comment_id": 82553363, "body": "&quot;Premature optimization is root of all evil&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1221, "user_id": 2636044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/YauuW.png?s=128&g=1", "display_name": "Onilol", "link": "https://stackoverflow.com/users/2636044/onilol"}, "is_accepted": true, "score": 3, "last_activity_date": 1513177650, "creation_date": 1513177650, "answer_id": 47796283, "question_id": 47796013, "link": "https://stackoverflow.com/questions/47796013/whats-the-difference-between-in-place-assignment-and-assignment-using-the-varia/47796283#47796283", "title": "What&#39;s the difference between in-place assignment and assignment using the variable&#39;s name again?", "body": "<p>Perhaps this can help you understand better:</p>\n\n<pre><code>import dis\n\ndef a():\n  x = 0\n  x += 20\n  return x\n\ndef b():\n  x = 0\n  x = x + 20\n  return x\n\nprint 'In place add'\ndis.dis(a)\n\nprint 'Binary add'\ndis.dis(b)\n</code></pre>\n\n<p>We get the following outputs:</p>\n\n<pre><code>In place add\n  4           0 LOAD_CONST               1 (0)\n              3 STORE_FAST               0 (x)\n\n  5           6 LOAD_FAST                0 (x)\n              9 LOAD_CONST               2 (20)\n             12 INPLACE_ADD         \n             13 STORE_FAST               0 (x)\n\n  6          16 LOAD_FAST                0 (x)\n             19 RETURN_VALUE        \n\nBinary add\n  9           0 LOAD_CONST               1 (0)\n              3 STORE_FAST               0 (x)\n\n 10           6 LOAD_FAST                0 (x)\n              9 LOAD_CONST               2 (20)\n             12 BINARY_ADD          \n             13 STORE_FAST               0 (x)\n\n 11          16 LOAD_FAST                0 (x)\n             19 RETURN_VALUE        \n</code></pre>\n\n<p>You could do a loop a thousand or so times using a timer to compare perfomance, but the main difference is that one. I suppose binary add should be faster tho.</p>\n"}], "owner": {"reputation": 471, "user_id": 5847147, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0f5a674e2eddc0619552ffea06aee001?s=128&d=identicon&r=PG", "display_name": "Rahul Bohare", "link": "https://stackoverflow.com/users/5847147/rahul-bohare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 47796283, "answer_count": 1, "score": 0, "last_activity_date": 1513177650, "creation_date": 1513176911, "last_edit_date": 1513176983, "question_id": 47796013, "link": "https://stackoverflow.com/questions/47796013/whats-the-difference-between-in-place-assignment-and-assignment-using-the-varia", "title": "What&#39;s the difference between in-place assignment and assignment using the variable&#39;s name again?", "body": "<p>In Python, while assigning a value to a variable, we can either do:</p>\n\n<p><code>variable = variable + 20</code></p>\n\n<p>or</p>\n\n<p><code>variable += 20</code>.</p>\n\n<p>While I do understand that both the operations are semantically same, i.e., they achieve the same goal of increasing the previous value of <code>variable</code> by 20, I was wondering if there are subtle run-time performance differences between the two, or any other slight differences which might deem one better than the other.\nIs there any such difference, or are they exactly the same?\nIf there is any difference, is it the same for other languages such as C++?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "linux"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 2, "creation_date": 1513177068, "post_id": 47795974, "comment_id": 82552882, "body": "Welcome to Stack Overflow! Your code is incomplete; in particular, it seems to be missing at least one <code>#include</code> and/or some function prototypes. Please <a href=\"https://stackoverflow.com/posts/47795974/edit\">edit</a> your code so it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem, then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1513177019, "creation_date": 1513177019, "answer_id": 47796049, "question_id": 47795974, "link": "https://stackoverflow.com/questions/47795974/how-to-send-a-wakeup-signal-to-a-child-from-parent-c/47796049#47796049", "title": "How to send a wakeup signal to a child from parent c++", "body": "<p>From <code>pause</code> manual page:</p>\n\n<blockquote>\n  <p>pause() causes the calling process (or thread) to sleep until a signal is delivered that either terminates the process or causes the\n  invocation of a signal-catching function.</p>\n</blockquote>\n\n<p>Since you do not have any handlers installed for SIGUSR2, the signal terminates the process and you see no output.</p>\n"}], "owner": {"reputation": 1, "user_id": 9094372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaacd249c94505ad371eaf6447a22416?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano", "link": "https://stackoverflow.com/users/9094372/damiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513177019, "creation_date": 1513176825, "last_edit_date": 1513176911, "question_id": 47795974, "link": "https://stackoverflow.com/questions/47795974/how-to-send-a-wakeup-signal-to-a-child-from-parent-c", "title": "How to send a wakeup signal to a child from parent c++", "body": "<pre><code>int main()\n{\n\n    pid_t pid=fork();\n\n    if(pid&gt;0)\n    {\n        int a;\n        cout&lt;&lt;\"do you want to wake up the child? 1=yes/0=no \"&lt;&lt;endl;\n        cin&gt;&gt;a;\n        if(a==1)\n        {\n\n            kill(pid,SIGUSR2);\n            int status;\n            waitpid(pid,&amp;status,0);\n\n\n        }\n        else\n        {\n            cout&lt;&lt;\"i didn't wake up the child\"&lt;&lt;endl;\n\n        }\n        exit(0);\n    }\n    if(pid==0)\n    {\n        pause();\n\n        cout&lt;&lt;\"i'm starting working\"&lt;&lt;endl;\n        int n=0;\n        for(int i=0; i&lt;10; i++)\n        {\n            n+=4;\n            cout&lt;&lt;n&lt;&lt;endl;\n        }\n        exit(0);\n    }\n</code></pre>\n\n<p>i am using these libraries:\nseems like that the pause() in the child is not getting any signal from the parents , and the child does not do the output.\nwhere am i doing wrong?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1513176772, "post_id": 47795929, "comment_id": 82552656, "body": "why should it print 0 to 9? You never assigned anything to the array elements"}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 2, "creation_date": 1513176773, "post_id": 47795929, "comment_id": 82552659, "body": "try <code>num[i] = i;</code>."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513176804, "post_id": 47795929, "comment_id": 82552684, "body": "Why are you using an array at all?"}, {"owner": {"reputation": 21, "user_id": 9057474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3V12d.jpg?s=128&g=1", "display_name": "kepsek", "link": "https://stackoverflow.com/users/9057474/kepsek"}, "edited": false, "score": 0, "creation_date": 1513176902, "post_id": 47795929, "comment_id": 82552764, "body": "Just experimenting, thanks user1810087"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1513177019, "post_id": 47795929, "comment_id": 82552845, "body": "Your code is incomplete; in particular, it seems to be missing a <code>main()</code> function and the initialisation of <code>num[]</code>. Please <a href=\"https://stackoverflow.com/posts/47795929/edit\">edit</a> your code so it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem, then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 21, "user_id": 9057474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3V12d.jpg?s=128&g=1", "display_name": "kepsek", "link": "https://stackoverflow.com/users/9057474/kepsek"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1513177306, "post_id": 47795929, "comment_id": 82553084, "body": "@TobySpeight The code itself was easy enough to understand regardless of the main function. Question, why would I need to initialise the num array? And thanks Ill look into  the link."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1513177694, "post_id": 47795929, "comment_id": 82553358, "body": "&quot;<i>why would I need to initialise the num array</i>&quot; if <code>num</code> was in global scope - you wouldn&#39;t, since it would be default-initialized to <code>0</code>. If it is in local scope (i.e. in a function, like <code>main</code>), it would contain indeterminate values. Such an answer would be answered, in detail, in any <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1513177716, "post_id": 47795929, "comment_id": 82553375, "body": "If you don&#39;t initialise the contents of <code>num[]</code> and it was declared in your function, then the reads from it will be <i>undefined</i> - you might get negative values or nasal demons.  Running your program under Valgrind will help you catch errors such as that; also make sure you&#39;ve enabled as many compiler warnings as you can bear."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1513177835, "post_id": 47795929, "comment_id": 82553460, "body": "It&#39;s possible that you meant <code>num[i] = i;</code> - is that the case?"}, {"owner": {"reputation": 21, "user_id": 9057474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3V12d.jpg?s=128&g=1", "display_name": "kepsek", "link": "https://stackoverflow.com/users/9057474/kepsek"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1513178049, "post_id": 47795929, "comment_id": 82553618, "body": "@TobySpeight There was no error in what I wrote, but what I intended to have happen was solved by doing that. I usually make dumb mistakes. Thanks for your comments"}], "answers": [{"tags": [], "owner": {"reputation": 1630, "user_id": 7699452, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-62_IPk-ZAgI/AAAAAAAAAAI/AAAAAAAAAHw/FsxABteXEdc/photo.jpg?sz=128", "display_name": "Mathews Sunny", "link": "https://stackoverflow.com/users/7699452/mathews-sunny"}, "is_accepted": true, "score": 0, "last_activity_date": 1513176935, "creation_date": 1513176935, "answer_id": 47796020, "question_id": 47795929, "link": "https://stackoverflow.com/questions/47795929/c-inputting-numbers-into-array-and-outputting-them/47796020#47796020", "title": "C++ Inputting numbers into array and outputting them", "body": "<pre><code>int num[10];\n\n    for(int i = 0; i &lt; 10; i++){\n        i = num[i];\n        cout &lt;&lt; num[i];\n    }\n</code></pre>\n\n<p>In the above piece of code you haven't stored anything to the array you declared. So it would print some random values out.</p>\n\n<p>The following would work as you think :</p>\n\n<pre><code>int num[10]={0,1,2,3,4,5,6,7,8,9};\n\n    for(int i = 0; i &lt;= 10; i++){\n\n        cout &lt;&lt; num[i];\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 841, "user_id": 275780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9fda69904fe03f3c3937634042e4ef6?s=128&d=identicon&r=PG", "display_name": "xyious", "link": "https://stackoverflow.com/users/275780/xyious"}, "is_accepted": false, "score": 1, "last_activity_date": 1513176936, "creation_date": 1513176936, "answer_id": 47796021, "question_id": 47795929, "link": "https://stackoverflow.com/questions/47795929/c-inputting-numbers-into-array-and-outputting-them/47796021#47796021", "title": "C++ Inputting numbers into array and outputting them", "body": "<p>You're assigning <code>num[i]</code> which is undefined to <code>i</code>. Then you're incrementing i, and accessing element <code>i</code> (undefined) of <code>num</code> in the next iteration of the loop, which is only 10 items long.</p>\n\n<p>In effect you're trying to access memory at position <code>num[1978253]</code>, which you have no control over.</p>\n"}], "owner": {"reputation": 21, "user_id": 9057474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3V12d.jpg?s=128&g=1", "display_name": "kepsek", "link": "https://stackoverflow.com/users/9057474/kepsek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1513195689, "accepted_answer_id": 47796020, "answer_count": 2, "score": -7, "last_activity_date": 1513177839, "creation_date": 1513176688, "last_edit_date": 1513177839, "question_id": 47795929, "link": "https://stackoverflow.com/questions/47795929/c-inputting-numbers-into-array-and-outputting-them", "closed_reason": "Not suitable for this site", "title": "C++ Inputting numbers into array and outputting them", "body": "<p>I'm trying to understand C++ as I'm new.\nThe below code crashes every time I run it. As far as I know, it should output 0 to 9. \nStating that i = num[i] I know is pointless however adding this extra code makes it crash.\nWhy?</p>\n\n<pre><code>    int num[10];\n\n    for(int i = 0; i &lt; 10; i++){\n        i = num[i];\n        cout &lt;&lt; num[i];\n    }\n</code></pre>\n\n<p>Edit - Thanks, guess I didn't see that little error. Seems obvious now...</p>\n"}, {"tags": ["c++", "header"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1513176760, "post_id": 47795900, "comment_id": 82552642, "body": "Well you <i>do</i> use <code>ssize_t</code> in the <code>socket_client.h</code> header file. And you include that header file <i>before</i> you include the <code>&lt;sys&#47;types.h&gt;</code> file in <code>socket_client.cc</code>. Remember that symbols must be declared <i>before</i> they are used."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1513176895, "post_id": 47795900, "comment_id": 82552757, "body": "What system header are you including complaining about the absence of <code>ssize_t</code>? Some system headers require that <code>&lt;sys&#47;types.h&gt;</code> is included (although I can&#39;t find one right now in the manages on MacOS). Things may still compile, e.g., because the declaration came from somewhere else in on  version of the compiler/standard library."}], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 3162587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/10ca9a304735f6d735447e3ca4278a26?s=128&d=identicon&r=PG&f=1", "display_name": "user3162587", "link": "https://stackoverflow.com/users/3162587/user3162587"}, "edited": false, "score": 0, "creation_date": 1513179287, "post_id": 47795984, "comment_id": 82554445, "body": "Thanks. But why there is someone compile successfully with the same code using lower version gcc?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1513181568, "post_id": 47795984, "comment_id": 82555938, "body": "Because some other header did include <code>&lt;sys&#47;types.h&gt;</code> or some other system header without you noticing that."}, {"owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "reply_to_user": {"reputation": 233, "user_id": 3162587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/10ca9a304735f6d735447e3ca4278a26?s=128&d=identicon&r=PG&f=1", "display_name": "user3162587", "link": "https://stackoverflow.com/users/3162587/user3162587"}, "edited": false, "score": 0, "creation_date": 1513239914, "post_id": 47795984, "comment_id": 82578719, "body": "@user3162587 This might be the case because some other header in 4.4 included &lt;sys/types.h&gt; and that this fact changed in 4.8. Maybe some include order has changed over the versions. There are many different reasons possible."}, {"owner": {"reputation": 233, "user_id": 3162587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/10ca9a304735f6d735447e3ca4278a26?s=128&d=identicon&r=PG&f=1", "display_name": "user3162587", "link": "https://stackoverflow.com/users/3162587/user3162587"}, "edited": false, "score": 0, "creation_date": 1513244551, "post_id": 47795984, "comment_id": 82581430, "body": "Is it always a correct practice to include those system header files before self defined header files? Or should I include necessary system header files in self defined header file?"}, {"owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "reply_to_user": {"reputation": 233, "user_id": 3162587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/10ca9a304735f6d735447e3ca4278a26?s=128&d=identicon&r=PG&f=1", "display_name": "user3162587", "link": "https://stackoverflow.com/users/3162587/user3162587"}, "edited": false, "score": 0, "creation_date": 1513249587, "post_id": 47795984, "comment_id": 82584845, "body": "@user3162587 I think the overall order is personal, mine is: Corresponding hpp -&gt; Headers from the same component -&gt; Headers from other components -&gt; System headers.  For a little discusion check this out: <a href=\"https://stackoverflow.com/questions/2762568/c-c-include-file-order-best-practices\" title=\"c c include file order best practices\">stackoverflow.com/questions/2762568/&hellip;</a>"}], "tags": [], "owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "is_accepted": true, "score": 2, "last_activity_date": 1513176839, "creation_date": 1513176839, "answer_id": 47795984, "question_id": 47795900, "link": "https://stackoverflow.com/questions/47795900/compile-c-file-failed-because-can-not-find-the-definition-of-ssize-t/47795984#47795984", "title": "compile c++ file failed because can not find the definition of `ssize_t`", "body": "<p>The answer is simple, have a look at your include order. You include <code>socket_client.h</code> before you include <code>types.h</code>. This causes your error. Simply change the order and everything should be fine.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1513181389, "last_edit_date": 1513181389, "creation_date": 1513177008, "answer_id": 47796043, "question_id": 47795900, "link": "https://stackoverflow.com/questions/47795900/compile-c-file-failed-because-can-not-find-the-definition-of-ssize-t/47796043#47796043", "title": "compile c++ file failed because can not find the definition of `ssize_t`", "body": "<p><a href=\"https://gcc.gnu.org/gcc-4.8/\" rel=\"nofollow noreferrer\">GCC 4.8</a> is really old (and 4.4 is completely obsolete) since from 2013 and not really supported anymore. You should <strong>upgrade your <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> compiler</strong>, at least to <a href=\"https://gcc.gnu.org/gcc-6/\" rel=\"nofollow noreferrer\">GCC 6</a>, and if possible to <a href=\"https://gcc.gnu.org/gcc-7/\" rel=\"nofollow noreferrer\">GCC 7</a> (and in spring 2018, that would be GCC 8).</p>\n\n<p><sup>(with efforts, you could compile and install GCC 7 from its source code; and you don't always need root access for that)</sup></p>\n\n<p>You need to define for what C++ standard you want to code. I strongly recommend <strong>coding in <a href=\"https://en.wikipedia.org/wiki/C%2B%2B11\" rel=\"nofollow noreferrer\">C++11</a></strong> at least, and if possible C++14. In a few months (e.g. mid 2018), <a href=\"https://en.wikipedia.org/wiki/C%2B%2B17\" rel=\"nofollow noreferrer\">C++17</a> could be convenient. C++11 is really different of its predecessors (so it is not even worthwhile to code for an older standard, unless you are forced to).</p>\n\n<p>If you code for C++11, you want to use at least <a href=\"http://en.cppreference.com/w/cpp/types/size_t\" rel=\"nofollow noreferrer\">std::size_t</a> (instead of the old C-specific <code>size_t</code>) from <code>&lt;cstddef&gt;</code> or <code>&lt;cstdlib&gt;</code> etc... - and that standard header should be included before (or inside) yours, e.g. <code>\"somewhere/socket_client.h\"</code>; with a recent <code>g++</code>, you should compile <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">with</a> <code>g++ -std=c++11 -Wall -Wextra -g</code>  (to get C++11, all warnings, and debug info). Of course, if you want C++14, use <code>-std=c++14</code> ....</p>\n\n<p>C++ is a <em>very difficult</em> programming language; if you are (like most of us, me included) still learning it, be sure to learn at least C++11 (or C++14) with some <a href=\"http://stroustrup.com/Programming/\" rel=\"nofollow noreferrer\">good C++ programming</a> book.</p>\n\n<p>Look also into some good <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">C++ reference website</a> (and even the appropriate C++ standard document).</p>\n\n<p>BTW, you could find many libraries usable from C++ related to networking. Consider perhaps <a href=\"https://curl.haxx.se/libcurl/\" rel=\"nofollow noreferrer\">libcurl</a> (client side) and <a href=\"https://www.coralbits.com/libonion/\" rel=\"nofollow noreferrer\">libonion</a> (server side) if you want to develop or use some <a href=\"https://en.wikipedia.org/wiki/Web_API\" rel=\"nofollow noreferrer\">Web API</a> with <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" rel=\"nofollow noreferrer\">HTTP</a>, or <a href=\"http://pocoproject.org/\" rel=\"nofollow noreferrer\">POCO</a>, or <a href=\"http://qt.io/\" rel=\"nofollow noreferrer\">Qt</a>, or <a href=\"http://boost.org/\" rel=\"nofollow noreferrer\">Boost</a>, or <a href=\"http://zeromq.org/\" rel=\"nofollow noreferrer\">0mq</a> for general messaging (and there are many other libraries).</p>\n\n<p>Most versions of GCC (even very old ones) support the <code>-H</code> and <code>-M</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html\" rel=\"nofollow noreferrer\">preprocessor options</a>. You could use them (at least to understand what system headers get included).</p>\n"}], "owner": {"reputation": 233, "user_id": 3162587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/10ca9a304735f6d735447e3ca4278a26?s=128&d=identicon&r=PG&f=1", "display_name": "user3162587", "link": "https://stackoverflow.com/users/3162587/user3162587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 47795984, "answer_count": 2, "score": 0, "last_activity_date": 1513181389, "creation_date": 1513176615, "question_id": 47795900, "link": "https://stackoverflow.com/questions/47795900/compile-c-file-failed-because-can-not-find-the-definition-of-ssize-t", "title": "compile c++ file failed because can not find the definition of `ssize_t`", "body": "<p>I have a c++ header file <code>socket_client.h</code> together with a c++ source file <code>socket_client.cc</code>. In <code>socket_client.h</code>, I have code samples like this:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;string&gt;\n\nssize_t Send(const void *msg, const size_t msg_size/*send msg size*/);\n...\n</code></pre>\n\n<p>In <code>socket_client.cc</code>, I have code snippet like this:</p>\n\n<pre><code>#include \"somewhere/socket_client.h\"\n#include &lt;sys/types.h&gt;\n...\n</code></pre>\n\n<p>When I compile this with gcc 4.8, the compiler will say \"error\" and complains that it can not find the definition of <code>ssize_t</code>; However, when I add <code>#include &lt;sys/types.h&gt;</code> in <code>socket_client.h</code>, it will compile success.\nThere is someone else compile it successfully without add <code>#include &lt;sys/types.h&gt;</code> with gcc 4.4. </p>\n\n<p>I'm totally confused about this. Is it necessary to add that line? What is the collect way to handle this? </p>\n\n<p>ps:I compile with a tool called blade which is based on scons(and so do those with gcc 4.4).</p>\n"}, {"tags": ["c++", "recursion", "backtracking"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1513176410, "post_id": 47795706, "comment_id": 82552398, "body": "where is line 46 ??"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1513176421, "post_id": 47795706, "comment_id": 82552406, "body": "Please add comments in code to indicate line 46 and 48."}, {"owner": {"reputation": 841, "user_id": 275780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9fda69904fe03f3c3937634042e4ef6?s=128&d=identicon&r=PG", "display_name": "xyious", "link": "https://stackoverflow.com/users/275780/xyious"}, "edited": false, "score": 0, "creation_date": 1513176691, "post_id": 47795706, "comment_id": 82552593, "body": "code is past a return ?"}], "answers": [{"tags": [], "owner": {"reputation": 194, "user_id": 3927474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WZGK1.png?s=128&g=1", "display_name": "code1x1.de", "link": "https://stackoverflow.com/users/3927474/code1x1-de"}, "is_accepted": false, "score": 0, "last_activity_date": 1513177006, "last_edit_date": 1513177006, "creation_date": 1513176649, "answer_id": 47795917, "question_id": 47795706, "link": "https://stackoverflow.com/questions/47795706/n-queen-backtracking-in-c-weird/47795917#47795917", "title": "N-Queen backtracking in C++ weird", "body": "<p>You return 1 + f(g,n,m); in line 45 int the if scope. so the line 46 will never be reached.</p>\n\n<p>if you place line 46 to 48 you get out of the scope where the return blocks its execution.</p>\n\n<p>you should never place code between a return and the scope ending bracket.</p>\n\n<p>ylso in many IDEs you would get a response that there is unreachable code.</p>\n\n<p>thats pretty much all :)</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zaf8T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zaf8T.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513181212, "creation_date": 1513176135, "last_edit_date": 1513181212, "question_id": 47795706, "link": "https://stackoverflow.com/questions/47795706/n-queen-backtracking-in-c-weird", "title": "N-Queen backtracking in C++ weird", "body": "<p>So I have this code, and I'm trying to create my own n-queen program in c++ to learning the algorithm and backtracking. </p>\n\n<p>But there's some weird behavior that I don't understand in the line 46, it's not setting back the 2D char array of specified index to '0', but if I move the code in line 46 to line 48, it worked. Any explanation why this is happen?</p>\n\n<p>And second question, when I move the code in line 46 to line 48, it worked fine, the output of the array 2d correct. But the final return of function f isn't like what I expected, instead prints 4, it prints out 62.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nbool check(char g[][4],int x, int y){\n    for (int i=x,j=y; i&gt;-1 &amp;&amp; y&gt;-1; i--,j--)\n        if (g[i][j]=='1')\n            return false;\n    for (int i=0; i&lt;4; i++)\n        if (g[i][y]=='1')\n            return false;\n    for (int i=x,j=y; i&gt;-1 &amp;&amp; j&lt;4; i--, j++)\n        if (g[i][j]=='1')\n            return false;\n    for (int j=0; j&lt;4; j++)\n        if (g[x][j]=='1')\n            return false;\n    for (int i=x,j=y; i&lt;4 &amp;&amp; j&lt;4; i++, j++)\n        if (g[i][j]=='1')\n            return false;\n    for (int i=x,j=y; i&lt;4 &amp;&amp; j&gt;-1; i++, j--)\n        if (g[i][j]=='1')\n            return false;\n    return true;\n}\nbool done(char g[][4]){\n    int counts=0;\n    for (int i=0; i&lt;4 ; i++){\n        for (int j=0; j&lt;4; j++){\n            if (g[i][j]=='1')\n                counts++;\n        }\n    }\n    if (count==4)\n        return true;\n    else\n        return false;\n}\nint f(char g[][4],int n, int m){\n    if (done(g)){\n        return 1;\n    }\n    for (int i=0; i&lt;n; i++){\n        for (int j=0; j&lt;m; j++){\n                if (check(g,i,j)){\n                    g[i][j]='1';\n                    return 1 + f(g,n,m);\n                    g[i][j]='0'; //Backtracking\n                }\n\n        }\n    }\n\n    return -1;\n}\nint main(){\n    char gr[4][4]={\n    {'0','0','0','0'},\n    {'0','0','0','0'},\n    {'0','0','0','0'},\n    {'0','0','0','0'}\n    };\n\n    cout &lt;&lt; f(gr,4,4) &lt;&lt; endl &lt;&lt; endl;\n    for (int i=0; i&lt;4; i++){\n        for (int j=0; j&lt;4; j++){\n            cout &lt;&lt; gr[i][j] &lt;&lt; \" \";\n\n        }\n        cout &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix-multiplication", "glm-math"], "comments": [{"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1513175892, "post_id": 47795544, "comment_id": 82552038, "body": "There is no OpenGL code here. Can you show us minimal (but preferably complete) code that demonstrates the problem you&#39;re having? What matrix/vector classes are you using (they are defining the multiplication operators)?"}, {"owner": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 1, "creation_date": 1513175944, "post_id": 47795544, "comment_id": 82552073, "body": "glm::mat2 and glm::vec2 as commented in the first line. Even the (*) operator is from glm"}, {"owner": {"reputation": 123, "user_id": 6224999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9022720d4a4185f819eb5bb9abce7e43?s=128&d=identicon&r=PG&f=1", "display_name": "Labonneguigue", "link": "https://stackoverflow.com/users/6224999/labonneguigue"}, "edited": false, "score": 0, "creation_date": 1513176201, "post_id": 47795544, "comment_id": 82552232, "body": "Did you <i>actually</i> check the sizes of your vectors and matrices ?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1513176304, "post_id": 47795544, "comment_id": 82552313, "body": "Could you please define &quot;output&quot; a bit more specifically? Were you matrix printouts generated by using <code>ostream&lt;&lt;</code>, or by you inspecting the memory by hand?"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1513176317, "post_id": 47795544, "comment_id": 82552319, "body": "glm != OpenGL. OpenGL is a widely supported and stable library. GLM hasn&#39;t even hit version 1.0. Is your question really about GLM then, not OpenGL?"}, {"owner": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1513176701, "post_id": 47795544, "comment_id": 82552605, "body": "@metal you are right. I will edit the header. My mistake."}, {"owner": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1513176849, "post_id": 47795544, "comment_id": 82552721, "body": "@Frank I am printing the output using the to_string() method"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "edited": false, "score": 0, "creation_date": 1513176812, "post_id": 47795838, "comment_id": 82552688, "body": "Thank you for the quick answer. If I understood you correctly testMat[0] will give the first column, not the first row as expected, right?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "edited": false, "score": 0, "creation_date": 1513177099, "post_id": 47795838, "comment_id": 82552920, "body": "@surveyCorps What do you mean by &quot;as expected?&quot; GLSL&#39;s documentation is pretty clear about this. <a href=\"https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)#Matrices\" rel=\"nofollow noreferrer\">khronos.org/opengl/wiki/Data_Type_(GLSL)#Matrices</a>"}, {"owner": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "edited": false, "score": 0, "creation_date": 1513177352, "post_id": 47795838, "comment_id": 82553120, "body": "In C++, if I want to access the elements of the first row of a 3x3 matrix, I have to write matrix[0][0]; matrix[0][1]; matrix[0][2]. But in GLM to access the elements of the first row of a 3x3 matrix I have to write matrix[0][0]; matrix[1][0]; matrix[2][0]. Is this correct?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "edited": false, "score": 1, "creation_date": 1513177548, "post_id": 47795838, "comment_id": 82553261, "body": "@surveyCorps It&#39;s not correct in the sense that C++ arrays of arrays have no notion of rows or columns. matrix[n] is just &quot;the n&#39;th sub-array&quot;. There is no mathematical meaning attached, just a memory storage one."}, {"owner": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "edited": false, "score": 0, "creation_date": 1513177637, "post_id": 47795838, "comment_id": 82553313, "body": "true. Thank you!"}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 2, "last_activity_date": 1513176435, "creation_date": 1513176435, "answer_id": 47795838, "question_id": 47795544, "link": "https://stackoverflow.com/questions/47795544/is-glm-matrix-multiplication-left-or-right/47795838#47795838", "title": "Is GLM matrix multiplication Left or Right", "body": "<p>The following is wrong:</p>\n\n<p><code>testMat[row][col] = blabla;</code></p>\n\n<p>glm's <code>[]</code> operator on matrices returns a column, not a row. The math is fine, but you are initializing your matrix in a transposed manner.</p>\n"}], "owner": {"reputation": 183, "user_id": 5500738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gGJ5A.jpg?s=128&g=1", "display_name": "mjeshtri", "link": "https://stackoverflow.com/users/5500738/mjeshtri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2154, "favorite_count": 0, "accepted_answer_id": 47795838, "answer_count": 1, "score": 1, "last_activity_date": 1516198290, "creation_date": 1513175687, "last_edit_date": 1516198290, "question_id": 47795544, "link": "https://stackoverflow.com/questions/47795544/is-glm-matrix-multiplication-left-or-right", "title": "Is GLM matrix multiplication Left or Right", "body": "<p>I am having some confusion regarding matrix multiplication in GLM, using C++.</p>\n\n<p>Yes, I know that </p>\n\n<ul>\n<li>OpenGL uses <em>column-major</em> matrices</li>\n<li><em>row-major</em> vs. <em>column-major</em> is purely <a href=\"https://stackoverflow.com/questions/17717600/confusion-between-c-and-opengl-matrix-order-row-major-vs-column-major\">a notional convention</a></li>\n</ul>\n\n<p>However, the output is confusing. I am posting the code for clarity.</p>\n\n<pre><code>//Initialize two empty 2dim vectors, and two empty 2x2 glm matrices\nmat2 testMat (0.0f);\nmat2 idMat(0.0f);\nvec2 testVec (0.0f);\nvec2 resultVec (0.0f);\n\n\n//testVec: ( 1)\n//         (-1)\ntestVec[0] = 1.0f;\ntestVec[1] = -1.0f;\n\n// idMat: (1  0)\n//        (0 -1)\nidMat[0][0] = 1.0f;\nidMat[1][1] = -1.0f;\n\n// testMat: (2  3)\n//          (4  5)\nint blabla = 2;\nfor (int row = 0; row &lt; testMat[0].length(); row++){\n    for (int col = 0; col &lt; testMat[0].length(); col++){\n        testMat[row][col] = blabla;\n        blabla += 1;\n    }\n}\n\n//                     REAL RESULT   EXPECTED RESULT\n// (2  3)      ( 1)       (-2)             (-1)\n// (4  5)  *   (-1)   =   (-2)             (-1)\nresultVec = testMat * testVec;\n\n\n//                        REAL RESULT   EXPECTED RESULT\n// (2  3)      (1   0)       ( 2  3)        (2  -3)\n// (4  5)  *   (0  -1)   =   (-4 -5)        (4  -5)\nmat2 resultMat = testMat * idMat;\n\n\n//                        REAL RESULT   EXPECTED RESULT\n// (2  3)      (1   0)       (2  -3)        ( 2   3)\n// (4  5)  *   (0  -1)   =   (4  -5)        (-4  -5)\nmat2 result2Mat = idMat * testMat;\n</code></pre>\n\n<p>I checked the library code that defined the (*) operator (for mat2 * mat2), and it seems that OpenGL is doing <em>left-multiplication</em>, i.e A multiply B is producing the result of (B * A).</p>\n\n<p>Whereas the (*) operator (for mat2 * vec2) is multiplying the columns of the matrix with the vector elements instead of multiplying the rows of the matrix with the vector elements.</p>\n\n<p>Question:</p>\n\n<ol>\n<li>Is the (*) operator behaving in this way because OpenGL matrices are column-major?</li>\n</ol>\n"}, {"tags": ["c++", "json", "dynamic", "poco-libraries"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 9063825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbd51499c2b1c0c3f0c237e0ce69362?s=128&d=identicon&r=PG&f=1", "display_name": "ahmed fcis", "link": "https://stackoverflow.com/users/9063825/ahmed-fcis"}, "is_accepted": true, "score": 1, "last_activity_date": 1513197858, "creation_date": 1513197858, "answer_id": 47801817, "question_id": 47795404, "link": "https://stackoverflow.com/questions/47795404/iterate-on-json-structure-with-poco/47801817#47801817", "title": "Iterate on json structure with Poco", "body": "<p>use for <em>collection</em> variable <em>DynamicStruct</em> instead of <em>Var</em></p>\n\n<pre><code>Poco::DynamicStruct collection = ds[\"parameters\"].extract&lt;Poco::DynamicStruct&gt;();\n\nfor (auto it = collection.begin(); it != collection.end(); ++it)\n{\n    LOG_F(\"item : %s\", it-&gt;second.toString().c_str());\n}\n</code></pre>\n"}], "owner": {"reputation": 471, "user_id": 856355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2d935d00fa0cb11b903d4ef5c5b55b37?s=128&d=identicon&r=PG", "display_name": "lgm42", "link": "https://stackoverflow.com/users/856355/lgm42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1484, "favorite_count": 0, "accepted_answer_id": 47801817, "answer_count": 1, "score": 1, "last_activity_date": 1513197858, "creation_date": 1513175281, "last_edit_date": 1513177916, "question_id": 47795404, "link": "https://stackoverflow.com/questions/47795404/iterate-on-json-structure-with-poco", "title": "Iterate on json structure with Poco", "body": "<p>I'm using Poco library for C++ code</p>\n\n<p>Here is an example of the json tree I have to parse</p>\n\n<pre><code>{\n    \"name\" : \"actionToDo\",\n    \"description\" : \"\",\n    \"version\" : \"1\",\n    \"parameters\" : {\n        \"inputDirectory\" : \"string\",\n        \"workingDir\" : \"string\",\n        \"tempDir\" : \"string\",\n        \"size\" : \"integer\"\n    }\n}\n</code></pre>\n\n<p>The amount of data into \"parameters\" field can change.\nI have to put all items into a map</p>\n\n<p>Here my code today</p>\n\n<pre><code>std:: map&lt;std::string, std::string&gt; output;\n\nPoco::JSON::Parser sparser;\nPoco::Dynamic::Var result = sparser.parse(jsonStr);\nPoco::JSON::Object::Ptr object = result.extract&lt;Poco::JSON::Object::Ptr&gt;();\nPoco::DynamicStruct ds = *object;\n\nPoco::Dynamic::Var collection(ds[\"parameters\"]);\n\nif (collection.isStruct())\n{\n     LOG(\"STRUCT\"); //it's logged !!\n}\n\nfor (Poco::Dynamic::VarIterator it = collection.begin(); it != collection.end(); ++it)\n{\n    LOG_F(\"item : %s\", it-&gt;toString()); //never logged\n    //here I would like to have something like\n    //output[it-&gt;first()] = it-&gt;second();\n\n}\n</code></pre>\n\n<p>And the output I got</p>\n\n<blockquote>\n  <p>14:13:00'900 :  : [Notice] : STRUCT </p>\n  \n  <p>14:13:00'900 :  : [Critical] : Exception : Exception: Unable to load Run from file :\n  /opt/.../file.json Exception:\n  Unable to parse field 'parameters' or its children  </p>\n  \n  <p>Invalid access: Not a struct.</p>\n</blockquote>\n\n<p>The \"Unable to parse field 'parameters' or its children\" is generated by a catch below but the \"Invalid access: Not a struct.\" comes from Poco</p>\n"}, {"tags": ["c++", "gmock"], "comments": [{"owner": {"reputation": 123, "user_id": 6224999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9022720d4a4185f819eb5bb9abce7e43?s=128&d=identicon&r=PG&f=1", "display_name": "Labonneguigue", "link": "https://stackoverflow.com/users/6224999/labonneguigue"}, "edited": false, "score": 0, "creation_date": 1513175367, "post_id": 47795293, "comment_id": 82551660, "body": "What is <code>Helper</code> ? Might want to have a look at <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 39, "user_id": 3699160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6258ece03a755f3f38c73c7900705394?s=128&d=identicon&r=PG&f=1", "display_name": "Ronak Doshi", "link": "https://stackoverflow.com/users/3699160/ronak-doshi"}, "reply_to_user": {"reputation": 123, "user_id": 6224999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9022720d4a4185f819eb5bb9abce7e43?s=128&d=identicon&r=PG&f=1", "display_name": "Labonneguigue", "link": "https://stackoverflow.com/users/6224999/labonneguigue"}, "edited": false, "score": 0, "creation_date": 1513175479, "post_id": 47795293, "comment_id": 82551751, "body": "class Helper {     public:         MOCK_METHOD1(run, int(int ** a));     };"}, {"owner": {"reputation": 123, "user_id": 6224999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9022720d4a4185f819eb5bb9abce7e43?s=128&d=identicon&r=PG&f=1", "display_name": "Labonneguigue", "link": "https://stackoverflow.com/users/6224999/labonneguigue"}, "edited": false, "score": 0, "creation_date": 1513175638, "post_id": 47795293, "comment_id": 82551854, "body": "You can&#39;t use <code>vector&lt;int&gt;</code> ?"}, {"owner": {"reputation": 39, "user_id": 3699160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6258ece03a755f3f38c73c7900705394?s=128&d=identicon&r=PG&f=1", "display_name": "Ronak Doshi", "link": "https://stackoverflow.com/users/3699160/ronak-doshi"}, "reply_to_user": {"reputation": 123, "user_id": 6224999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9022720d4a4185f819eb5bb9abce7e43?s=128&d=identicon&r=PG&f=1", "display_name": "Labonneguigue", "link": "https://stackoverflow.com/users/6224999/labonneguigue"}, "edited": false, "score": 0, "creation_date": 1513176037, "post_id": 47795293, "comment_id": 82552141, "body": "No, it has to be a raw double pointer,i.e int**"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513178710, "post_id": 47795293, "comment_id": 82554072, "body": "Post all your code. A type mismatch is the least of the problems with the incomplete fragments you&#39;ve pasted."}], "answers": [{"tags": [], "owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "is_accepted": true, "score": 0, "last_activity_date": 1513178234, "creation_date": 1513178234, "answer_id": 47796487, "question_id": 47795293, "link": "https://stackoverflow.com/questions/47795293/mock-a-function-which-has-double-pointer-as-argument/47796487#47796487", "title": "mock a function which has double pointer as argument", "body": "<p>This is not a complete answer but I will post it, because it is too long for a comment.</p>\n\n<p>First of all, you should probably explain what are you trying to achieve, because usually there is no justification for setting the called mock function arguments (at least, if you do not plan to do anything else with modified arg).</p>\n\n<p><code>SetArgPointee</code> only allows you to set the value at <code>a[0]</code>, because this the memory your pointer is pointing at:</p>\n\n<pre><code>int** mockInput1 = new int*[2];\nint** mockInput2 = new int*[2];\nEXPECT_CALL(helper, run(_))\n    .Times(1)\n    // this will set value pointed by mockInput2[0] to mockInput1[0]\n    .WillOnce(DoAll(SetArgPointee&lt;0&gt;(mockInput1[0]), Return(99)));\nhelper.run(mockInput2);\n</code></pre>\n\n<p>However, I am almost sure that this not what you are looking for. Note that gmock allows you to define custom actions that can be invoked after your call is matched:</p>\n\n<pre><code>auto action = [](int** a) {\n    int** test = new int*[2];\n    test[0] = new int[1];\n    test[0][0] = 5;\n    test[1] = new int[1];\n    test[1][0] = 55;\n    a[0] = test[0];\n    a[1] = test[1];  // or whatever\n    std::cout &lt;&lt; \"Executed custom action\" &lt;&lt; std::endl;\n};\nEXPECT_CALL(helper, run(_))\n    .Times(1)\n    .WillOnce(DoAll(Invoke(action), Return(99)));\nhelper.run(mockInput2);\n</code></pre>\n\n<p>Inside the action you can do whatever you want. Anyway, try to explain what do you actually try to achieve.</p>\n\n<p>Also, please not the memory leaks possibility if you do not delete your memory appropriately.</p>\n"}], "owner": {"reputation": 39, "user_id": 3699160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6258ece03a755f3f38c73c7900705394?s=128&d=identicon&r=PG&f=1", "display_name": "Ronak Doshi", "link": "https://stackoverflow.com/users/3699160/ronak-doshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 1, "closed_date": 1513178428, "accepted_answer_id": 47796487, "answer_count": 1, "score": -1, "last_activity_date": 1513178234, "creation_date": 1513174970, "last_edit_date": 1513175978, "question_id": 47795293, "link": "https://stackoverflow.com/questions/47795293/mock-a-function-which-has-double-pointer-as-argument", "closed_reason": "Needs details or clarity", "title": "mock a function which has double pointer as argument", "body": "<p>Mock a method which has raw double pointer, for example below class Helper has a method int run(int** a). I am trying to set expectations using SetArgPointee, but it is not working. giving compiler error can not convert int** const to int*.</p>\n\n<pre><code>  class Helper {\n  public:\n       MOCK_METHOD1(run, int(int ** a));\n   };\n\n    int** test = new int*[2];\n\n    test[0] = new int[1];\n    test[0][0] = 5;\n\n    test[1] = new int[1];\n    test[1][0] = 55;\n\n    int** test2 = new int*[2];\n\n    test2[0] = new int[1];\n    test2[0][0] = 10;\n\n    test2[1] = new int[1];\n    test2[1][0] = 110;\n\n    Helper helper;\n    EXPECT_CALL(helper, run(_))\n        .Times(1)\n        .WillOnce(DoAll(SetArgPointee&lt;0&gt;(test2), Return(99)));\n\n    int rc = helper.run(test);\n</code></pre>\n\n<p>I am not able to replace test double pointer with test2. want to know how it can be done.</p>\n"}, {"tags": ["c++", "sorting", "vector", "unique-ptr", "const-iterator"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 6, "creation_date": 1513175051, "post_id": 47795274, "comment_id": 82551455, "body": "To sort container you need to modify it, why you are surprised?"}, {"owner": {"reputation": 73, "user_id": 3764002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288b1859819f807b5c4b5e84db5ac452?s=128&d=identicon&r=PG&f=1", "display_name": "pkerts", "link": "https://stackoverflow.com/users/3764002/pkerts"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1513175119, "post_id": 47795274, "comment_id": 82551487, "body": "So should I use shared_ptr instead? Why does begin/end work though?"}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 1, "creation_date": 1513175176, "post_id": 47795274, "comment_id": 82551522, "body": "It uses moves. If it is const, it cannot be moved from. cbegin gives references const objects"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1513175213, "post_id": 47795274, "comment_id": 82551549, "body": "You should use one that has necessary semantic. How cbegin()/cend() is related to unique_ptr vs shared_ptr?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1513175600, "post_id": 47795274, "comment_id": 82551830, "body": "<a href=\"https://www.ideone.com/tQhJp3\" rel=\"nofollow noreferrer\">Doesn&#39;t work with std::vector&lt;int&gt;</a>.  And <a href=\"http://rextester.com/BYAG65358\" rel=\"nofollow noreferrer\">here is Visual Studio output</a>"}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 2, "last_activity_date": 1513175505, "last_edit_date": 1513175505, "creation_date": 1513175097, "answer_id": 47795345, "question_id": 47795274, "link": "https://stackoverflow.com/questions/47795274/sorting-a-vector-of-unique-pointers-using-constant-iterators/47795345#47795345", "title": "Sorting a vector of unique pointers using constant iterators", "body": "<p>Because <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code></a> sorts the elements in the range by <em>moving</em> them. That means the elements will be modified via the iterator; it won't work with iterator to <code>const</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 3764002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288b1859819f807b5c4b5e84db5ac452?s=128&d=identicon&r=PG&f=1", "display_name": "pkerts", "link": "https://stackoverflow.com/users/3764002/pkerts"}, "edited": false, "score": 0, "creation_date": 1513175694, "post_id": 47795374, "comment_id": 82551901, "body": "That makes a lot more sense. Thank you. So with the way it is written, without const iterators, it will work but is it considered good style? New to this and want to get some ideas"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 73, "user_id": 3764002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288b1859819f807b5c4b5e84db5ac452?s=128&d=identicon&r=PG&f=1", "display_name": "pkerts", "link": "https://stackoverflow.com/users/3764002/pkerts"}, "edited": false, "score": 0, "creation_date": 1513176491, "post_id": 47795374, "comment_id": 82552454, "body": "@pkerts Yes the way it is written is fine. I think, these days, it is more generic to use <code>std::sort(std::begin(teachers), std::end(teachers), compare_by_uniqptr);</code> and there is no need in your comparator to call <code>a.get()-&gt;...</code> on your <i>unique pointers</i>, you can just do <code>a-&gt;...</code>."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 2, "last_activity_date": 1513175195, "creation_date": 1513175195, "answer_id": 47795374, "question_id": 47795274, "link": "https://stackoverflow.com/questions/47795274/sorting-a-vector-of-unique-pointers-using-constant-iterators/47795374#47795374", "title": "Sorting a vector of unique pointers using constant iterators", "body": "<p>Unique pointers can not be copied (otherwise they would lose their uniqueness). For that reason when they are sorted, they will need to be <em>moved</em> (or <em>swapped</em>). Those operations need to change the <em>internals</em> of the unique pointers. Of course you can't change the internals of an object through a const reference.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1513176099, "creation_date": 1513176099, "answer_id": 47795693, "question_id": 47795274, "link": "https://stackoverflow.com/questions/47795274/sorting-a-vector-of-unique-pointers-using-constant-iterators/47795693#47795693", "title": "Sorting a vector of unique pointers using constant iterators", "body": "<p>Why <code>cbegin()</code> and <code>cend()</code> does not work? <code>std::sort()</code> as stated in <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">documentation</a> has following type requirements:</p>\n\n<blockquote>\n  <p>-RandomIt must meet the requirements of ValueSwappable and RandomAccessIterator.</p>\n  \n  <p>-The type of <strong>dereferenced RandomIt must meet the requirements of MoveAssignable and MoveConstructible</strong>.</p>\n  \n  <p>-Compare must meet the requirements of Compare.</p>\n</blockquote>\n\n<p>emphasis is mine. So <code>std::vector::const_iterator</code> does not satisfy those requirements. So even if you have <code>std::vector&lt;int&gt;</code> and try to use them that would not work either. If you ask why it works on <code>begin()</code>/<code>end()</code> with <code>std::unique_ptr</code> then you can see that in <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">documentation</a> as well:</p>\n\n<blockquote>\n  <p>std::swap(std::unique_ptr) (C++11) specializes the std::swap algorithm \n  (function template)</p>\n</blockquote>\n\n<p>so <code>std::unique_ptr</code> as value satisfies <a href=\"http://en.cppreference.com/w/cpp/concept/ValueSwappable\" rel=\"nofollow noreferrer\">ValueSwappable</a> concept.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1513177687, "creation_date": 1513177687, "answer_id": 47796293, "question_id": 47795274, "link": "https://stackoverflow.com/questions/47795274/sorting-a-vector-of-unique-pointers-using-constant-iterators/47796293#47796293", "title": "Sorting a vector of unique pointers using constant iterators", "body": "<p>here's a solution. Compatible down to c++11:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;memory&gt;\n#include &lt;algorithm&gt;\n\nstruct Person {\n    Person(std::string name);\n};\n\nstruct Student : Person {\n\n};\n\nclass Teacher : public Person {\nprivate:\n  std::vector&lt;std::unique_ptr&lt;Student&gt;&gt; students;\npublic:\n  Teacher(std::string name) : Person(name) {}\n  void insert(std::string name);\n  int num_students() const { return students.size(); }\n};\n\nstd::vector&lt;std::unique_ptr&lt;Teacher&gt;&gt; teachers;\n\nstruct by_num_students\n{\n    bool operator()(Teacher const&amp; l, Teacher const&amp; r) const\n    {\n        return l.num_students() &lt; r.num_students();\n    }\n};\n\ntemplate&lt;class Comp&gt;\nstruct by_pointee_impl\n{\n    template&lt;class L, class R&gt;\n    bool operator()(L&amp;&amp; l, R&amp;&amp; r) const \n    {\n        return comp(*l, *r);\n    }\n\n    Comp comp;\n};\ntemplate&lt;class Comp&gt;\nauto by_pointee(Comp comp) -&gt; by_pointee_impl&lt;Comp&gt;\n{\n    return by_pointee_impl&lt;Comp&gt;{comp};\n};\n\nint main()\n{\n    std::sort(begin(teachers), end(teachers), by_pointee(by_num_students()));\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3764002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288b1859819f807b5c4b5e84db5ac452?s=128&d=identicon&r=PG&f=1", "display_name": "pkerts", "link": "https://stackoverflow.com/users/3764002/pkerts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 47795374, "answer_count": 4, "score": 1, "last_activity_date": 1513177687, "creation_date": 1513174906, "question_id": 47795274, "link": "https://stackoverflow.com/questions/47795274/sorting-a-vector-of-unique-pointers-using-constant-iterators", "title": "Sorting a vector of unique pointers using constant iterators", "body": "<p>My question is about why I can sort a vector of unique pointers with begin/end but not with cbegin/cend</p>\n\n<p>This compiles:</p>\n\n<pre><code>std::sort(teachers.begin(), teachers.end(), compare_by_uniqptr);\n</code></pre>\n\n<p>But this for some reason gives me a C2280 attempting to reference a deleted function.</p>\n\n<pre><code>std::sort(teachers.cbegin(), teachers.cend(), compare_by_uniqptr);\n</code></pre>\n\n<p>Here is some context. 'teachers' is a vector of unique pointers of Teacher objects. </p>\n\n<pre><code>class Teacher : public Person {\nprivate:\n  std::vector&lt;std::unique_ptr&lt;Student&gt;&gt; students;\npublic:\n  Teacher(std::string name) : Person(name) {}\n  void insert(std::string name);\n  int num_students() { return students.size(); }\n};\n\nstd::vector&lt;std::unique_ptr&lt;Teacher&gt;&gt; teachers;\n\nbool compare_by_uniqptr(const std::unique_ptr&lt;Teacher&gt;&amp; a,\n                        const std::unique_ptr&lt;Teacher&gt;&amp; b) \n{\n  return a.get()-&gt;num_students() &gt; b.get()-&gt;num_students();\n}\n</code></pre>\n\n<p>I am sorting them by the amount of students each one has in descending order. The begin/end compiles but cbegin/cend does not. Why?</p>\n"}, {"tags": ["c++", "undefined-behavior", "integer-overflow"], "comments": [{"owner": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "edited": false, "score": 0, "creation_date": 1513174237, "post_id": 47794983, "comment_id": 82550939, "body": "The code you posted is not C++, there is no &quot;.h&quot; in C++, tag correctly"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1513174253, "post_id": 47794983, "comment_id": 82550953, "body": "This works and does not have any errors?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 14, "creation_date": 1513174274, "post_id": 47794983, "comment_id": 82550970, "body": "You can&#39;t talk about undefined behavior in the <i>language</i> sense and conflate it with a CPU&#39;s view. No, it&#39;s not undefined behavior since there is no overflow."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "edited": false, "score": 0, "creation_date": 1513174405, "post_id": 47794983, "comment_id": 82551055, "body": "@joemartin94 Actually, older versions of C++ utlizes .h files."}, {"owner": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1513174464, "post_id": 47794983, "comment_id": 82551092, "body": "@klutt Personally I have never seen one"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "edited": false, "score": 2, "creation_date": 1513174486, "post_id": 47794983, "comment_id": 82551114, "body": "@joemartin94 Ever heard of turbo?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "edited": false, "score": 0, "creation_date": 1513174499, "post_id": 47794983, "comment_id": 82551125, "body": "@joemartin94 - Then your development career must have been a very sheltered existence"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "edited": false, "score": 1, "creation_date": 1513174510, "post_id": 47794983, "comment_id": 82551137, "body": "@joemartin94, The <a href=\"http://en.cppreference.com/w/cpp/header\" rel=\"nofollow noreferrer\">deprecated C headers</a> still use .h. They&#39;re still perfectly standard."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 6, "creation_date": 1513174564, "post_id": 47794983, "comment_id": 82551168, "body": "2,147,483,647 + (-1) = 2,147,483,646, just like 5 + (-1) = 4."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "edited": false, "score": 2, "creation_date": 1513174573, "post_id": 47794983, "comment_id": 82551173, "body": "@joemartin94 However, you&#39;re completely right that OP should pick one."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1513174703, "post_id": 47794983, "comment_id": 82551242, "body": "why do you think there is an overflow / ub ?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 6, "creation_date": 1513174877, "post_id": 47794983, "comment_id": 82551359, "body": "I just don&#39;t understand this question, why would this be UB. You could even ask, whether <code>-1 + -1</code> is UB? It is <code>0xffffffff + 0xffffffff</code> after all. Of course it is not UB."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1513176387, "post_id": 47794983, "comment_id": 82552376, "body": "@tobi303 I don&#39;t think the OP <i>think[s] there is an overflow</i>; they&#39;re just checking/confirming there isn&#39;t, and kudos to them for checking rather than assuming one way or the other."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1513176655, "post_id": 47794983, "comment_id": 82552570, "body": "@TripeHound dont want to say that the question is non-sense. Completely agree that double checking is better than blind faith. Nevertheless imho the question would be nicer if OP would more clearly state why they are worrying. Read my last comment as &quot;why are you worried that there might be an overflow?&quot;"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513177337, "post_id": 47794983, "comment_id": 82553110, "body": "C is not C++ is not C, please don&#39;t tag both language for no reason if you want the answer for C and C++, made two questions. Let expert choose if your question need to be tagged for more than one language. I choose to let C++ tag because in C <code>int f();</code> is not a correct declaration of function. (<code>int f(void);</code>, this is of course arbitrary feel free to only tag C if you want)"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1513177903, "post_id": 47794983, "comment_id": 82553514, "body": "@tobi303 I guess because of the juxtaposition of <code>INT_MAX</code> and <code>+</code>... there&#39;s no sane way that adding a negative <i>should</i> give UB, but then \u2013 while many rules of UB make sense \u2013 for <i>some</i> of the things defined as UB to <i>not</i> reliably give what &quot;common sense&quot; would say is the &quot;obviously correct&quot; answer would seem to demand deliberate perversity on the part of a compiler-writer or chip-maker."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513177920, "post_id": 47794983, "comment_id": 82553523, "body": "@Stargateur -- In C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.6.3p14\" rel=\"nofollow noreferrer\">empty parenthesis are fine for function declarators that are part of the function definition</a>, as is the case in OP code."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513178175, "post_id": 47794983, "comment_id": 82553703, "body": "@Stargateur And while conflating C/C++ would be wrong/unhelpful on many occasions, for straightforward questions where the answers are simple/short (e.g. not much more than a simple <i>yes/no</i>), I&#39;d rather have one question with answer(s) covering both C and C++ (and standards-variants of each, if applicable) rather than hunt around multiple questions."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1513178359, "post_id": 47794983, "comment_id": 82553835, "body": "@DavidBowling This is why I said &quot;declaration&quot; I didn&#39;t use OP code for this reason, sorry it was arbitrary like I said."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1513178599, "post_id": 47794983, "comment_id": 82553999, "body": "@TripeHound On contrary this kind of question can easily produce VERY long answer, <a href=\"https://stackoverflow.com/a/18721336/7076153\">stackoverflow.com/a/18721336/7076153</a>. Whatever, it&#39;s not to the OP to know that the answer will be short enough to cover C and C++ and it&#39;s not to the OP to know if the answer is the same for C and C++. Please to do increase the number of question too broad to be answer. C and C++ are now really different in a lot of behavior such as overflow and in code practice. So, no there is no good reason to tag this question with C and C++. Made two different questions if the languages are not the same."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513180047, "post_id": 47794983, "comment_id": 82554962, "body": "@Stargateur I think we&#39;ll have to agree to disagree on this one \u2013 to me that&#39;s almost a perfect case for combining the two tags. The top two answers give fairly succinct answers to the level most people will need; one for C++, one for C. The third answer (the one you linked) goes into all the gory details for all variants of both languages, for the language-lawyers or those just curious. <i>To me</i>, it seems preferable to have all that in one place rather than spread across two or more questions. (I <b>do</b> accept that using both tags <i>can</i> often be wrong; just not in these two instances)."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1513180929, "post_id": 47794983, "comment_id": 82555491, "body": "@TripeHound Don&#39;t worry, I accept that we disagree. But consider this exemple, made two questions, one tag with C, one tag with C++, and made one question duplicate of the other, in this way, we don&#39;t need to answer two times and if in the future answer of the duplicate question is not anymore correct for the question, we break the duplicate and answer the question without problem. With your solution, we will have a problem because all answer will become outdated and updated them with be hard cause the question will be too broad <a href=\"https://meta.stackoverflow.com/a/358599/7076153\">perfect answer</a>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513181704, "post_id": 47794983, "comment_id": 82556030, "body": "@Stargateur -- that is the best reason to avoid combining C and C++ tags unless explicitly comparing the two, in my opinion. Answers which are the same for C and C++ today may not be the same tomorrow."}], "answers": [{"tags": [], "owner": {"reputation": 12703, "user_id": 584597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d519ba6b69a89cc8ec99001eea2059b?s=128&d=identicon&r=PG", "display_name": "payne", "link": "https://stackoverflow.com/users/584597/payne"}, "is_accepted": false, "score": 10, "last_activity_date": 1513174657, "creation_date": 1513174657, "answer_id": 47795191, "question_id": 47794983, "link": "https://stackoverflow.com/questions/47794983/is-int-max-1-an-undefined-behavior/47795191#47795191", "title": "Is INT_MAX + (-1) an undefined behavior?", "body": "<p>The example you give is not an overflow.  </p>\n\n<p>From Wikipedia (<a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/Integer_overflow</a>):</p>\n\n<blockquote>\n  <p>... an integer overflow occurs when an arithmetic operation <strong>attempts to\n  create a numeric value that is outside of the range</strong> that can be\n  represented with a given number of bits \u2013 either larger than the\n  maximum or lower than the minimum representable value.</p>\n</blockquote>\n\n<p>INT_MAX + (-1) is not outside of the range representable by the int type, and the result is defined.</p>\n"}, {"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": false, "score": 8, "last_activity_date": 1513175318, "last_edit_date": 1513175318, "creation_date": 1513174788, "answer_id": 47795238, "question_id": 47794983, "link": "https://stackoverflow.com/questions/47794983/is-int-max-1-an-undefined-behavior/47795238#47795238", "title": "Is INT_MAX + (-1) an undefined behavior?", "body": "<p>Since the result of <code>INT_MAX + (-1)</code> is within the range of representable values of <code>int</code>, it is well defined</p>\n\n<p>You should stop viewing the language as a thin layer over assembly or machine code.</p>\n\n<p>In regards to undefined-ness of a program, there is no CPU, there is only the <a href=\"https://timsong-cpp.github.io/cppwp/intro.abstract#1\" rel=\"nofollow noreferrer\">abstract machine</a> on which the program runs.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1513268942, "creation_date": 1513268942, "answer_id": 47818056, "question_id": 47794983, "link": "https://stackoverflow.com/questions/47794983/is-int-max-1-an-undefined-behavior/47818056#47818056", "title": "Is INT_MAX + (-1) an undefined behavior?", "body": "<p>On two's-complement systems, carry and overflow are distinct concepts.  Many such systems are designed to support multi-word arithmetic.  A carry will be reported if the arithmetic sum, interpreting the values as unsigned, would exceed the range of the type.  An overflow will be reported after any computation where the carry into the upper bit differs from the carry out, but will only be meaningful following the computation of the upper byte.</p>\n\n<p>On an 8-bit system, for example, \"int\" would typically be two bytes, INT_MAX would be 0x7F:0xFF and -1 would be 0xFF:FF.  Addition is performed by adding the two lower bytes, and then adding the two upper bytes with a carry from the lower.</p>\n\n<ul>\n<li><p>Adding 0xFF to 0xFF yields 0xFE and carry but no overflow (carry both into and out of the upper bit).</p></li>\n<li><p>Adding 0x7F to 0xFF yields 0x7E with no carry nor overflow (carry neither into nor out of the upper bit).</p></li>\n</ul>\n\n<p>Such details typically shouldn't matter to a C programmer, since compilers typically provide no way to access the overflow flag, nor any way of ensuring that calculations are performed in a way that would make the flag meaningful at any particular point in the code.  Nonetheless, the C89 rationale notes:</p>\n\n<blockquote>\n  <p><strong>C code can be non-portable</strong>.<br>\n  Although it strove to give programmers the opportunity to write truly portable programs, the  C89 Committee did not want to  force programmers into writing \n  portably, to preclude the use of C as a \u201chigh-level assembler\u201d: the ability to write machine- specific code is one of the strengths of C.  It is this principle which largely motivates drawing the distinction between strictly conforming program and conforming program  (\u00a74).</p>\n</blockquote>\n\n<p>Note, btw, that the rationale for making small unsigned types promote to signed <code>int</code> strongly implies that authors of the C89 expected that something\nlike the following should be safe on commonplace platforms:</p>\n\n<pre><code>unsigned mul_mod_65536(unsigned short x, unsigned short y)\n{ return (x*y) &amp; 0xFFFF; }\n</code></pre>\n\n<p>Nonetheless, such code may malfunction when processed on commonplace 32-bit platforms when processed by excessively-\"clever\" optimizing compilers like gcc.  There is no reason that machine code generated for such a function should care about whether the value of <code>x*y</code> exceeds <code>INT_MAX</code>, since the upper bits of the result are going to get chopped off and the lower bits would be correct in any case.  In some cases, however, if gcc knows e.g. that y will be 65535, it may decide that since <code>x*y</code> \"can't\" exceed INT_MAX, <code>x</code> \"can't\" exceed 0x8000.  The authors of the Standard may not have wanted to preclude the possibility of C being used as a high-level assembler, but that doesn't meant that compiler writers share such feeling.</p>\n"}], "owner": {"reputation": 2717, "user_id": 725174, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/fff0bcbc94ad04659527dcd14e7b0442?s=128&d=identicon&r=PG", "display_name": "Pawe\u0142 Bylica", "link": "https://stackoverflow.com/users/725174/pawe%c5%82-bylica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1513268942, "creation_date": 1513174056, "last_edit_date": 1513177203, "question_id": 47794983, "link": "https://stackoverflow.com/questions/47794983/is-int-max-1-an-undefined-behavior", "title": "Is INT_MAX + (-1) an undefined behavior?", "body": "<p>In C++ an overflow of signed types is undefined behavior. Is the following example an undefined behavior as well?</p>\n\n<pre><code>#include &lt;limits.h&gt;\n\nint f() {\n  int a = INT_MAX;\n  int b = -1;\n  return a + b;\n}\n</code></pre>\n\n<p>It is not an overflow in math context, but a CPU will see it probably like\n<code>add 0x7fffffff 0xffffffff</code>.</p>\n"}, {"tags": ["c++", "visual-studio", "winapi", "mfc"], "comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1513175532, "post_id": 47794934, "comment_id": 82551787, "body": "Have you tried the PROOF_QUALITY flag?  Also, why use GM_ADVANCED, when your escapement is zero?"}, {"owner": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1513242628, "post_id": 47794934, "comment_id": 82580262, "body": "PROOF_QUALITY does not help.."}, {"owner": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1513246815, "post_id": 47794934, "comment_id": 82583002, "body": "I use m_secondCaptionFont.CreateFont(50, 0, 0, 0, FW_EXTRABOLD, FALSE, FALSE, FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, PROOF_QUALITY, FF_ROMAN, _T(&quot;Segoe UI&quot;));    and it is ok, but for 50 still sharpeness is visible"}, {"owner": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1513249264, "post_id": 47794934, "comment_id": 82584654, "body": "Thanks, it was good way. I tried ANTIALIASED_QUALITY for bigger fonts."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "edited": false, "score": 0, "creation_date": 1513242743, "post_id": 47799525, "comment_id": 82580323, "body": "Hi. Thanks, but , I do not know exactly what do You mean, Where I should this value? Instead of GM_ADVANCED should be 0 right?"}, {"owner": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "edited": false, "score": 0, "creation_date": 1513247161, "post_id": 47799525, "comment_id": 82583225, "body": "I used :m_secondCaptionFont.CreateFont(50, 0, 0, 0, FW_EXTRABOLD, FALSE, FALSE, FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, PROOF_QUALITY, FF_ROMAN, _T(&quot;Segoe UI&quot;)); but for font 50 sharpeness is still visible. For 19 for example, it looks good"}, {"owner": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "edited": false, "score": 0, "creation_date": 1513249215, "post_id": 47799525, "comment_id": 82584630, "body": "ANTIALIASED_QUALITY flag helps , for bigger fonts. Thank You"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "edited": false, "score": 0, "creation_date": 1513271301, "post_id": 47799525, "comment_id": 82599275, "body": "In your original post, you wrote: <code>m_secondCaptionFont.CreateFont(15, 0, GM_ADVANCED,  ...</code>.  That GM_ADVANCED does not belong there--it should be 0.  My answer explains how it could cause the normal antialiasing to be turned off."}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 3, "last_activity_date": 1513188186, "creation_date": 1513188186, "answer_id": 47799525, "question_id": 47794934, "link": "https://stackoverflow.com/questions/47794934/how-can-i-do-smooth-letter-in-text-boxantialiasing/47799525#47799525", "title": "How can I do smooth letter in text box(antialiasing)", "body": "<p>The nEscapement parameter specifies the angle in 0.1 degree units.  <code>GM_ADVANCED</code> is for use with a different API (specifically SetGraphicsMode).  It's value happens to be 2, so you've created a font that has a very, very slight slant to it.  This can defeat ClearType and other types of antialiasing.</p>\n\n<p>Change that value to 0, and you should be all set.</p>\n"}], "owner": {"reputation": 31, "user_id": 8579217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1758b1abddc98d72bcd7f30d8e8d43c?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8579217/karol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513188186, "creation_date": 1513173909, "last_edit_date": 1513180796, "question_id": 47794934, "link": "https://stackoverflow.com/questions/47794934/how-can-i-do-smooth-letter-in-text-boxantialiasing", "title": "How can I do smooth letter in text box(antialiasing)", "body": "<p>I have Text Control in our startpage. There is text in it. The problem is, that if we run the application , the text is sharp, not smooth.</p>\n\n<p>For example, we create the font like this</p>\n\n<pre><code>CFont  m_secondCaptionFont;\n\nm_secondCaptionFont.CreateFont(15, 0, GM_ADVANCED, 0, FW_EXTRABOLD, FALSE, FALSE, FALSE, DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, CLEARTYPE_QUALITY, FF_ROMAN, _T(\"Segoe UI\"));\n\n\nCBCGPStatic   m_labelProject;      // our static text control\nm_labelProject.SetFont(&amp;m_secondCaptionFont);\n</code></pre>\n\n<p>Is there any way to create smooth font ? Some kind of Antialiasing for fonts?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1513173928, "post_id": 47794882, "comment_id": 82550719, "body": "Please write in English on Stack Overflow (sadly there is no French SO), otherwise this will probably get closed, so you probably want to <a href=\"https://stackoverflow.com/posts/47794882/edit\">edit</a> it with a translation. Also, the code you are writing is C++, not C."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1513174773, "post_id": 47794882, "comment_id": 82551287, "body": "Where / how are these 4 arguments generated? I think you want to connect your signal to a different slot (with the same signature of the signal) that adds the arguments and calls your function."}, {"owner": {"reputation": 1, "user_id": 9094184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P30v-rmwP7Y/AAAAAAAAAAI/AAAAAAAAAAs/ANy8zQ2tzUw/photo.jpg?sz=128", "display_name": "Mohamed Amine JARDAK", "link": "https://stackoverflow.com/users/9094184/mohamed-amine-jardak"}, "edited": false, "score": 0, "creation_date": 1513174963, "post_id": 47794882, "comment_id": 82551403, "body": "in the same function where the connect line is"}, {"owner": {"reputation": 1, "user_id": 9094184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P30v-rmwP7Y/AAAAAAAAAAI/AAAAAAAAAAs/ANy8zQ2tzUw/photo.jpg?sz=128", "display_name": "Mohamed Amine JARDAK", "link": "https://stackoverflow.com/users/9094184/mohamed-amine-jardak"}, "edited": false, "score": 0, "creation_date": 1513175033, "post_id": 47794882, "comment_id": 82551441, "body": "so how can i connect my signal to a different slot"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513175156, "post_id": 47794882, "comment_id": 82551509, "body": "Please add that code (code for the function that has the data for the parameters) so we can understand what you are trying to do."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513175301, "post_id": 47794882, "comment_id": 82551618, "body": "<b><i>so how can i connect my signal to a different slot</i></b> Its not that different from how you connected the <code>inserer_art()</code> slot. Add a function that takes a bool and connect that to your signal."}, {"owner": {"reputation": 1, "user_id": 9094184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P30v-rmwP7Y/AAAAAAAAAAI/AAAAAAAAAAs/ANy8zQ2tzUw/photo.jpg?sz=128", "display_name": "Mohamed Amine JARDAK", "link": "https://stackoverflow.com/users/9094184/mohamed-amine-jardak"}, "edited": false, "score": 0, "creation_date": 1513175339, "post_id": 47794882, "comment_id": 82551638, "body": "void Accueil::add_article() {     int nbrows = ui-&gt;tv_art-&gt;model()-&gt;rowCount();     ui-&gt;tv_art-&gt;model()-&gt;insertRow(nbrows) ;     QString elm1 = ui-&gt;tv_art-&gt;model()-&gt;data(ui-&gt;tv_art-&gt;model()-&gt;index(nbrows,&zwnj;&#8203;1)).toString() ;     QString elm2 = ui-&gt;tv_art-&gt;model()-&gt;data(ui-&gt;tv_art-&gt;model()-&gt;index(nbrows,&zwnj;&#8203;2)).toString() ;     QString elm3 = ui-&gt;tv_art-&gt;model()-&gt;data(ui-&gt;tv_art-&gt;model()-&gt;index(nbrows,&zwnj;&#8203;3)).toString() ;      }"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513176356, "post_id": 47794882, "comment_id": 82552350, "body": "How is add_article() being called?"}, {"owner": {"reputation": 1, "user_id": 9094184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P30v-rmwP7Y/AAAAAAAAAAI/AAAAAAAAAAs/ANy8zQ2tzUw/photo.jpg?sz=128", "display_name": "Mohamed Amine JARDAK", "link": "https://stackoverflow.com/users/9094184/mohamed-amine-jardak"}, "edited": false, "score": 0, "creation_date": 1513176662, "post_id": 47794882, "comment_id": 82552578, "body": "add_article() is called via a connect : -&gt; connect(ui-&gt;pb_add_art,SIGNAL(clicked(bool)),this,SLOT(add_a&zwnj;&#8203;rticle()));"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513178157, "post_id": 47794882, "comment_id": 82553689, "body": "Can&#39;t you just call inserer_art() in add_article()?"}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513178728, "post_id": 47796589, "comment_id": 82554084, "body": "This will require Qt5. Not sure if the OP is still using Qt4."}, {"owner": {"reputation": 1, "user_id": 9094184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P30v-rmwP7Y/AAAAAAAAAAI/AAAAAAAAAAs/ANy8zQ2tzUw/photo.jpg?sz=128", "display_name": "Mohamed Amine JARDAK", "link": "https://stackoverflow.com/users/9094184/mohamed-amine-jardak"}, "edited": false, "score": 0, "creation_date": 1513180115, "post_id": 47796589, "comment_id": 82554999, "body": "it doesn&#39;t work ,"}, {"owner": {"reputation": 46, "user_id": 9094499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1694b1604748a13f8a5d888c09aac22a?s=128&d=identicon&r=PG&f=1", "display_name": "AndyJ", "link": "https://stackoverflow.com/users/9094499/andyj"}, "edited": false, "score": 1, "creation_date": 1513185211, "post_id": 47796589, "comment_id": 82558388, "body": "What version of QT are you using? What doesn&#39;t work? Do you get error messages when compiling regarding this code? More information is required."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1513191835, "post_id": 47796589, "comment_id": 82561865, "body": "I still don&#39;t understand why the OP can&#39;t call inserer_art() from add_article()."}], "tags": [], "owner": {"reputation": 46, "user_id": 9094499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1694b1604748a13f8a5d888c09aac22a?s=128&d=identicon&r=PG&f=1", "display_name": "AndyJ", "link": "https://stackoverflow.com/users/9094499/andyj"}, "is_accepted": false, "score": 1, "last_activity_date": 1513185812, "last_edit_date": 1513185812, "creation_date": 1513178503, "answer_id": 47796589, "question_id": 47794882, "link": "https://stackoverflow.com/questions/47794882/signal-and-slot-slots-with-arguments/47796589#47796589", "title": "signal and slot slots with arguments", "body": "<p>The slot takes the arguments that the signal emits. You seem to be trying to insert external arguments into your slot like a normal function. You cannot do this.</p>\n\n<p>Try instead a Lambda style connect. With this you emit the signal but instead of calling a slot you just execute enclosed code instead (this code would be your slot!).</p>\n\n<pre><code>connect(ui-&gt;pb_add_art, &amp;QPushButton::clicked, [int &amp;row , QString &amp;el1, QString &amp;el2, QString &amp;el3, this]()\n{\n    qDebug()&lt;&lt; el1 &lt;&lt; el2 &lt;&lt; el3 ;\n    ui-&gt;tv_art-&gt;model()-&gt;setData(ui-&gt;tv_art-&gt;model()-&gt;index(row,1),el1);\n    ui-&gt;tv_art-&gt;model()-&gt;setData(ui-&gt;tv_art-&gt;model()-&gt;index(row,2),el2);\n    ui-&gt;tv_art-&gt;model()-&gt;setData(ui-&gt;tv_art-&gt;model()-&gt;index(row,3),el3);\n    ui-&gt;tv_art-&gt;model()-&gt;submit();\n});\n</code></pre>\n\n<p>In this example code when the push button ui->pb_add_art is clicked the enclosed code is executed which references your arguments.</p>\n"}], "owner": {"reputation": 1, "user_id": 9094184, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P30v-rmwP7Y/AAAAAAAAAAI/AAAAAAAAAAs/ANy8zQ2tzUw/photo.jpg?sz=128", "display_name": "Mohamed Amine JARDAK", "link": "https://stackoverflow.com/users/9094184/mohamed-amine-jardak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1513186767, "answer_count": 1, "score": -3, "last_activity_date": 1513185812, "creation_date": 1513173752, "last_edit_date": 1513174562, "question_id": 47794882, "link": "https://stackoverflow.com/questions/47794882/signal-and-slot-slots-with-arguments", "closed_reason": "Needs details or clarity", "title": "signal and slot slots with arguments", "body": "<p>i have this function :</p>\n\n<pre><code>void Accueil::inserer_art(int &amp;row , QString &amp;el1, QString &amp;el2, QString &amp;el3)\n{\n    qDebug()&lt;&lt; el1 &lt;&lt; el2 &lt;&lt; el3 ;\n    ui-&gt;tv_art-&gt;model()-&gt;setData(ui-&gt;tv_art-&gt;model()-&gt;index(row,1),el1);\n    ui-&gt;tv_art-&gt;model()-&gt;setData(ui-&gt;tv_art-&gt;model()-&gt;index(row,2),el2);\n    ui-&gt;tv_art-&gt;model()-&gt;setData(ui-&gt;tv_art-&gt;model()-&gt;index(row,3),el3);\n    ui-&gt;tv_art-&gt;model()-&gt;submit();\n}\n</code></pre>\n\n<p>so it allows the insertion of an article in a database, it takes 4 arguments,\nI want to attach it to a signal as follows:\n    connect(ui<code>&gt;pb_add_art,SIGNAL(clicked(bool)),this,SLOT(inserer_art(int,QString,QString,QString)));</code></p>\n\n<p>t does not work since the signal does not take the same arguments as the slot, how could I do so, I think there is a mapping trick (Qsignalmapper) but I'm not sure.</p>\n"}, {"tags": ["c++", "opengl", "opencl"], "owner": {"reputation": 75, "user_id": 2262941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e956b0df7b3cbe7671033a791289b0e?s=128&d=identicon&r=PG", "display_name": "Hossein", "link": "https://stackoverflow.com/users/2262941/hossein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1513236093, "creation_date": 1513173638, "last_edit_date": 1513236093, "question_id": 47794843, "link": "https://stackoverflow.com/questions/47794843/how-to-draw-cvumat-data-with-opengl", "title": "How to draw cv::UMat data with opengl?", "body": "<p>I have found a function in order to convert cv::Mat To Texture and it is worked:</p>\n\n<pre><code>GLuint matToTexture(cv::Mat &amp;mat, GLenum minFilter, GLenum magFilter, GLenum wrapFilter)\n{\n    // Generate a number for our textureID's unique handle\n    GLuint textureID;\n    glGenTextures(1, &amp;textureID);\n\n    // Bind to our texture handle\n    glBindTexture(GL_TEXTURE_2D, textureID);\n\n    // Set texture interpolation methods for minification and magnification\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, minFilter);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, magFilter);\n\n    // Set texture clamping method\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, wrapFilter);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, wrapFilter);\n\n    // Create the texture\n    glTexImage2D(GL_TEXTURE_2D,     // Type of texture\n             0,                 // Pyramid level (for mip-mapping) - 0 is the top level\n             GL_RGB,            // Internal colour format to convert to\n             mat.cols,          // Image width  i.e. 640 for Kinect in standard mode\n             mat.rows,          // Image height i.e. 480 for Kinect in standard mode\n             0,                 // Border width in pixels (can either be 1 or 0)\n             GL_BGR, // Input image format (i.e. GL_RGB, GL_RGBA, GL_BGR etc.)\n             GL_UNSIGNED_BYTE,  // Image data type\n             mat.data);        // The actual image data itself\n\n    glBindFramebuffer(GL_TEXTURE_2D, textureID);\n\n    return textureID;\n}\n\n// example of usage\nGLuint tex = matToTexture(mat, GL_NEAREST, GL_NEAREST, GL_CLAMP);\nglBindTexture(GL_TEXTURE_2D, tex);\n</code></pre>\n\n<p>Is there any way to convert <strong>cv::UMat</strong> data to opengl texture directly (without converting to cv::Mat)?</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 388, "user_id": 1430726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f7a033b4746b303570c75984c23640?s=128&d=identicon&r=PG", "display_name": "sluki", "link": "https://stackoverflow.com/users/1430726/sluki"}, "is_accepted": false, "score": 0, "last_activity_date": 1513172861, "creation_date": 1513172861, "answer_id": 47794569, "question_id": 47794568, "link": "https://stackoverflow.com/questions/47794568/boost-di-decorator-pattern/47794569#47794569", "title": "[Boost].DI decorator pattern", "body": "<p>I found solution using annotated constructor injection and named parameters, but there may be a more elegant solution that I am missing.</p>\n\n<pre><code>auto decoratee = [] {};\n\nnamespace boost {\n    namespace di {\n        template&lt;&gt;\n        struct ctor_traits&lt;Decorator&gt;\n        {\n            BOOST_DI_INJECT_TRAITS((named = decoratee) std::shared_ptr&lt;IFoo&gt;);\n        };\n    }\n}\n\nnamespace di = boost::di;\n\nauto injector = di::make_injector(\n    di::bind&lt;IFoo&gt;().named(decoratee).to&lt;Foo&gt;(),\n    di::bind&lt;IFoo&gt;().to&lt;Decorator&gt;());\n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 1430726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f7a033b4746b303570c75984c23640?s=128&d=identicon&r=PG", "display_name": "sluki", "link": "https://stackoverflow.com/users/1430726/sluki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513172861, "creation_date": 1513172861, "question_id": 47794568, "link": "https://stackoverflow.com/questions/47794568/boost-di-decorator-pattern", "title": "[Boost].DI decorator pattern", "body": "<p>Is it possible to create decorator pattern with [Boost].DI library? </p>\n\n<pre><code>struct IFoo {};\nstruct Foo : IFoo { };\n\nstruct Decorator : IFoo\n{\n    explicit Decorator(shared_ptr&lt;IFoo&gt; foo) : foo(foo) {}\n\n    shared_ptr&lt;IFoo&gt; foo;\n};\n\nauto injector = boost::di::make_injector(???);\n</code></pre>\n\n<p>How to setup injector so that injector.create() returns a valid instance of Decorator?</p>\n"}, {"tags": ["c++", "oop", "enums", "operator-overloading"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1513176476, "post_id": 47794504, "comment_id": 82552443, "body": "Use <code>enum class days</code> instead of <code>enum days</code> : the use of <code>enum class</code> inhibits implicit conversions to an integral type. This way you&#39;d get an error instead of the compiler circumventing your overloaded operator as it doesn&#39;t match a temporary object (you&#39;d need to take <code>days const&amp;</code> as parameter instead of <code>days&amp;</code>: the latter only binds to a [modifyable] lvalue."}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 5, "last_activity_date": 1513176724, "last_edit_date": 1513176724, "creation_date": 1513173315, "answer_id": 47794737, "question_id": 47794504, "link": "https://stackoverflow.com/questions/47794504/overloading-with-ostream-and-an-enum-type/47794737#47794737", "title": "Overloading &lt;&lt; with ostream and an enum type", "body": "<p>Note that <code>operator&lt;&lt;</code> is taking parameter <code>day</code> by reference to non-const. <code>dayaftertomorrow</code> returns by value; what <code>dayaftertomorrow</code> returns is a temporary which can't be bound to reference to non-const. Then for <code>cout &lt;&lt; dayaftertomorrow(d)</code>, your <code>operator&lt;&lt;</code> won't be invoked, the enumerator will be <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion#Integral_promotion\" rel=\"nofollow noreferrer\">implicitly converted</a> to <code>int</code> and then printed out via <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"nofollow noreferrer\">std::basic_ostream::operator&lt;&lt;</a> instead; that's why you got <code>3</code>.</p>\n\n<p>To solve the issue you could change the parameter type to reference to <code>const</code>; which could bind to the temporary. Or change it to pass-by-value. e.g.</p>\n\n<pre><code>ostream&amp; operator&lt;&lt; (ostream&amp; out, const days&amp; day)\n//                                 ~~~~~\n\nostream&amp; operator&lt;&lt; (ostream&amp; out, days day)\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/vmEnn1AoZVFoaFtM\" rel=\"nofollow noreferrer\">LIVE</a></p>\n"}], "owner": {"reputation": 850, "user_id": 1799674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7NPwI.png?s=128&g=1", "display_name": "noufal", "link": "https://stackoverflow.com/users/1799674/noufal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 1, "accepted_answer_id": 47794737, "answer_count": 1, "score": 2, "last_activity_date": 1513176724, "creation_date": 1513172722, "last_edit_date": 1513174016, "question_id": 47794504, "link": "https://stackoverflow.com/questions/47794504/overloading-with-ostream-and-an-enum-type", "title": "Overloading &lt;&lt; with ostream and an enum type", "body": "<p>Following is my code. I am trying to print an enumerated data type variable, one directly which its name and another with a function with returns the same data type as the original variable.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nenum days{SUN, MON, TUE, WED, THU, FRI, SAT};\n\n\ninline days dayaftertomorrow(days d)\n{\n  return static_cast&lt;days&gt;((static_cast&lt;int&gt;(d) + 2) % 7);\n}\n\nostream&amp; operator&lt;&lt; (ostream&amp; out, days&amp; day)\n{\n  switch(day)\n  {\n    case SUN: out &lt;&lt; \"SUN\"; break;\n    case MON: out &lt;&lt; \"MON\"; break;\n    case TUE: out &lt;&lt; \"TUE\"; break;\n    case WED: out &lt;&lt; \"WED\"; break;\n    case THU: out &lt;&lt; \"THU\"; break;\n    case FRI: out &lt;&lt; \"FRI\"; break;\n    case SAT: out &lt;&lt; \"SAT\"; break;\n  }\n  return out;\n}\n\n\nint main(int argc, char const *argv[]) {\n  days d = MON, e;\n  e = dayaftertomorrow(d);\n  cout &lt;&lt; d &lt;&lt; \"\\t\" &lt;&lt; e &lt;&lt; endl;\n  cout &lt;&lt; d &lt;&lt; \"\\t\" &lt;&lt; dayaftertomorrow(d) &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>I expect the result as </p>\n\n<pre><code>MON     WED\nMON     WED\n</code></pre>\n\n<p>But I am getting </p>\n\n<pre><code>MON     WED\nMON     3\n</code></pre>\n\n<p>How would I fix this?</p>\n"}, {"tags": ["c++", "node.js", "atom-editor", "spawn"], "answers": [{"comments": [{"owner": {"reputation": 709, "user_id": 3053216, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/332a16581a0c1f65d86f19f57d017af0?s=128&d=identicon&r=PG&f=1", "display_name": "user3053216", "link": "https://stackoverflow.com/users/3053216/user3053216"}, "edited": false, "score": 0, "creation_date": 1513243062, "post_id": 47795605, "comment_id": 82580518, "body": "If someone has the same problem, i contacted the author and it is patched. Just update your plugin"}], "tags": [], "owner": {"reputation": 709, "user_id": 3053216, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/332a16581a0c1f65d86f19f57d017af0?s=128&d=identicon&r=PG&f=1", "display_name": "user3053216", "link": "https://stackoverflow.com/users/3053216/user3053216"}, "is_accepted": true, "score": 0, "last_activity_date": 1513175852, "creation_date": 1513175852, "answer_id": 47795605, "question_id": 47794301, "link": "https://stackoverflow.com/questions/47794301/atom-gpp-compiling-error-nodejs-child-process-spawn-whitespace-in-cwd/47795605#47795605", "title": "Atom gpp compiling error : Nodejs child_process.spawn whitespace in cwd", "body": "<p>I found the fix. In index.js of the gpp plugin, change </p>\n\n<pre><code>const options = (file.path + ' -o ' + compiledPath + ' ' + atom.config.get('gpp.compilerOptions')).replace(/[\\s{2,}]+/g, ' ').trim();\n\npath.join(filePath.dir, filePath.name);\nconsole.log(options.split(' '));\nconst child = child_process.spawn('g++', options.split(' '), {\n  cwd: filePath.dir\n});\n</code></pre>\n\n<p>To</p>\n\n<pre><code>  const options = atom.config.get('gpp.compilerOptions').replace(/[\\s{2,}]+/g, ' ').trim();\n\n  path.join(filePath.dir, filePath.name);\n  var new_options = [file.path,'-o',compiledPath]\n  if (options != \"\"){\n    new_options = new_options.concat(options.split(' '));\n  }\n  const child = child_process.spawn('g++', new_options, {\n    cwd: filePath.dir\n  });\n</code></pre>\n"}], "owner": {"reputation": 709, "user_id": 3053216, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/332a16581a0c1f65d86f19f57d017af0?s=128&d=identicon&r=PG&f=1", "display_name": "user3053216", "link": "https://stackoverflow.com/users/3053216/user3053216"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 47795605, "answer_count": 1, "score": 0, "last_activity_date": 1513175852, "creation_date": 1513172045, "last_edit_date": 1513175153, "question_id": 47794301, "link": "https://stackoverflow.com/questions/47794301/atom-gpp-compiling-error-nodejs-child-process-spawn-whitespace-in-cwd", "title": "Atom gpp compiling error : Nodejs child_process.spawn whitespace in cwd", "body": "<p>I just installed the editor Atom and the package gpp <a href=\"https://github.com/livace/atom-gpp\" rel=\"nofollow noreferrer\">https://github.com/livace/atom-gpp</a> to compile and run c++. When i run i get an error saying there is no such file or directory.</p>\n\n<p>I think this is because of the fact that there is a whitespace in my directory path. I checked the source code of the gpp plugin and found this:</p>\n\n<pre><code>const options = (file.path + ' -o ' + compiledPath + ' ' + atom.config.get('gpp.compilerOptions')).replace(/[\\s{2,}]+/g, ' ').trim();\n\npath.join(filePath.dir, filePath.name);\n\nconst child = child_process.spawn('g++', options.split(' '), {\n  cwd: filePath.dir\n});\n</code></pre>\n\n<p>I have never worked with nodeJs before, but i think that this causes the bug. Any idea how to make this work with a whitespace in the directory path (cwd)? </p>\n"}, {"tags": ["c++", "pointers", "iterator", "overloading", "const-iterator"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1513171920, "post_id": 47794223, "comment_id": 82549442, "body": "Why do you expect it to work? Different types, and all. It doesn&#39;t happen magically for <code>vector</code>. The iterators are designed to have conversions available."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1513172014, "post_id": 47794223, "comment_id": 82549498, "body": "What do I have to change in my iterator and const_iterator classes to get this to work like <code>std::vector&lt;int&gt;::const_iterator</code>?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1513172133, "post_id": 47794223, "comment_id": 82549586, "body": "Add a converting c&#39;tor, or a conversion operator."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1513172450, "post_id": 47794223, "comment_id": 82549773, "body": "So define in the <code>const_iterator</code> class the operator <code>const_iterator&amp; operator=(const iterator&amp; other)</code>, or the analogous copy constructor?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1513172554, "post_id": 47794223, "comment_id": 82549838, "body": "No, not an assignment operator. A conversion operator. Just gimme a sec"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1513172892, "post_id": 47794223, "comment_id": 82550027, "body": "@prestokeys that isn&#39;t a copy constructor. It is a <i>normal</i> constructor, that takes a parameter of <i>some other type</i>"}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1513172778, "creation_date": 1513172778, "answer_id": 47794524, "question_id": 47794223, "link": "https://stackoverflow.com/questions/47794223/getting-const-iterator-from-begin-instead-of-cbegin/47794524#47794524", "title": "Getting const_iterator from begin() instead of cbegin()", "body": "<p>It works for <code>std::vector</code> because the iterators of all standard library containers are <em>designed</em> to support the <code>iterator</code> --> <code>const_iterator</code> conversion. It's meant to mimic how pointer conversions work.</p>\n\n<p>Whenever your two iterators are user defined classes, you need to add it explicitly. You have two options:</p>\n\n<p>A converting constructor:</p>\n\n<pre><code>struct iterator : base_iterator { using base_iterator::base_iterator; };\n\nstruct const_iterator : base_iterator {\n   using base_iterator::base_iterator;\n   const_iterator(const iterator&amp; other) : base_iterator(other) {}\n};\n</code></pre>\n\n<p>A conversion operator:</p>\n\n<pre><code>struct const_iterator : base_iterator { using base_iterator::base_iterator; };\n\nstruct iterator : base_iterator {\n  using base_iterator::base_iterator; \n  operator const_iterator() const { /* ... */ }\n};\n</code></pre>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 1, "accepted_answer_id": 47794524, "answer_count": 1, "score": 2, "last_activity_date": 1513172778, "creation_date": 1513171792, "question_id": 47794223, "link": "https://stackoverflow.com/questions/47794223/getting-const-iterator-from-begin-instead-of-cbegin", "title": "Getting const_iterator from begin() instead of cbegin()", "body": "<p>Can someone explain why the following will not compile if I uncomment the line\n<code>foo::const_iterator j = f.begin();</code>, but if I use the line <code>foo::const_iterator j = f.cbegin();</code> it will compile?  I'm trying to get that line to work just as it works with my <code>std::vector</code> example.</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct foo {\n    struct node { };\n    node *first = nullptr, *last = nullptr;\n\n    struct base_iterator {\n        node* ptr;\n        base_iterator (node* n) : ptr(n) { }\n    };\n\n    struct iterator : base_iterator { using base_iterator::base_iterator; };\n\n    struct const_iterator : base_iterator { using base_iterator::base_iterator; };\n\n    iterator begin() { return iterator(first); }\n    const_iterator begin() const { return const_iterator(first); }\n    const_iterator cbegin() const { return const_iterator(first); }\n};\n\n// Test\n\nint main() {\n    foo f;\n    foo::iterator i = f.begin();\n//  foo::const_iterator j = f.begin();  // Won't compile because f is not const.\n//  foo::const_iterator j = f.cbegin();  // Will compile fine.\n\n    std::vector&lt;int&gt; v;\n    std::vector&lt;int&gt;::const_iterator it = v.begin();  // Compiles even though v is not const.\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2017", "static-libraries", "linker-errors", "static-linking"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1513172103, "post_id": 47794218, "comment_id": 82549566, "body": "You do link with the library?"}, {"owner": {"reputation": 12976, "user_id": 1758762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Nt89f.jpg?s=128&g=1", "display_name": "Leo Chapiro", "link": "https://stackoverflow.com/users/1758762/leo-chapiro"}, "edited": false, "score": 0, "creation_date": 1513172237, "post_id": 47794218, "comment_id": 82549649, "body": "Missing #pragma comment(lib, &quot;library.lib&quot;) ?"}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1513172401, "post_id": 47794218, "comment_id": 82549744, "body": "I added the library to Linker-&gt;Input, <code>#pragma comment(lib, &quot;library.lib&quot;) </code> shouldn&#39;t be necessary, but I&#39;ve tried with it - same problem"}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1513175911, "post_id": 47794218, "comment_id": 82552050, "body": "@KennyOstrom - adding <code>#include &quot;staticLib.h&quot;</code> in the &quot;minimal example&quot; <code>staticLib.cpp</code> file fixed it. I removed the example as it doesn&#39;t reproduce the original problem"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1513176219, "post_id": 47794218, "comment_id": 82552244, "body": "what function linkage are you using? a leading underscore indicates <a href=\"https://msdn.microsoft.com/en-us/library/56h2zst2.aspx\" rel=\"nofollow noreferrer\">cdecl usually...</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1513180494, "post_id": 47794218, "comment_id": 82555238, "body": "The leading underscore is standard <i>identifier decoration</i> in 32-bit code.  It helps the linker recognize calling convention mismatches.  This is a <code>__cdecl</code> function, nothing special.  The dumpbin output is for a DLL, not a static library, probably has something to do with the linker error.  Not enough bread crumbs.  Use a telephone, talk to the library owner."}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1517574011, "post_id": 47794218, "comment_id": 84161495, "body": "@HansPassant Yes, the problem was with a 32bit version vs 64 bit version of the lib. Can you please turn your comment into an answer?"}], "owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 932, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513667617, "creation_date": 1513171772, "last_edit_date": 1513667617, "question_id": 47794218, "link": "https://stackoverflow.com/questions/47794218/visual-studio-2017-expects-extra-underscore-in-function-names", "title": "Visual Studio 2017 expects extra underscore in function names", "body": "<p>I have a static library from a 3rd party and the header. The functions are declared as <code>extern \"C\"</code> in the header and they are exported in the library - I checked with <code>dumpbin /exports library.lib</code>. </p>\n\n<p>When trying to use the library I included the header and added the library to Linker->Input. The code compiles, but it doesn't link because the linker expects an extra underscore for the functions defined in the library. For example if in the header I have:</p>\n\n<pre><code>extern \"C\"\n{\n    int serialInit();\n}\n</code></pre>\n\n<p><code>dumpbin</code> shows me:</p>\n\n<pre><code>Exports\n   ordinal    name\n         6    serialInit\n</code></pre>\n\n<p>and the linker gives me:</p>\n\n<pre><code>error LNK2019: unresolved external symbol _serialInit referenced in function _main\n</code></pre>\n\n<p>Do you know why Visual Studio expects the extra underscore in the function name? Any ideas on how to solve this?</p>\n"}, {"tags": ["c++", "qt", "qt4"], "comments": [{"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1513169911, "post_id": 47793535, "comment_id": 82548078, "body": "You should paint on some <code>QImage</code>. And output this image on <code>paintEvent</code>."}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "edited": false, "score": 0, "creation_date": 1513172153, "post_id": 47793535, "comment_id": 82549597, "body": "You should use <code>setColors</code> only to update the color used to draw your ellipse ( assuming that color is a member of your class) and then call <code>QWidget::update()</code> that will eventually trigger a <code>paintEvent</code>. Then in your<code>paintEvent</code> method, just add the drawing of your ellipse that use your member &quot;color&quot; recently updated."}], "answers": [{"comments": [{"owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "edited": false, "score": 0, "creation_date": 1513231924, "post_id": 47798454, "comment_id": 82575081, "body": "Is there any way to keep line edit beside ellipse, horizontal layout so that user can enter some text for each color. User should able to edit and change text anytime"}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1513184145, "creation_date": 1513184145, "answer_id": 47798454, "question_id": 47793535, "link": "https://stackoverflow.com/questions/47793535/painting-the-widget-on-calling-slot/47798454#47798454", "title": "painting the widget on calling slot", "body": "<p>All painting work should happen in <code>paintEvent</code>. You have to keep state, and paint items accordingly. Have methods that take <code>QPainter</code> as an argument and call them from within paintEvent method, passing to them the <code>QPainter</code> object you created there.</p>\n\n<p><strong>Example:</strong></p>\n\n<p>In your widget header have:</p>\n\n<pre><code>private:\n    void setColors(QColor c) { color = c; }\n    void drawEllipse(QPainter &amp; painter);\n    QColor color;\n    bool draw_ellipse;\n</code></pre>\n\n<p>As you can see, the setColors method only sets a color and you keep that color in a private instance variable <code>color</code>.</p>\n\n<p>A new method hosts the painting job (previously in setColors):</p>\n\n<pre><code>void CascadeColorHighlightWidget::drawEllipse(QPainter &amp;painter)\n{\n    painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);\n    QRectF contRect = contentsRect().adjusted(1, 1, -1, -1);\n\n    int rectYPos = contRect.y() + 55;\n\n    painter.setPen(Qt::NoPen);\n    QRectF ellipseRect = QRectF(contRect.x() + 18, rectYPos, 16, 16);\n\n    painter.setPen(Qt::NoPen);\n    painter.setBrush(color);\n    painter.drawEllipse(ellipseRect);\n    /*After this ellipse I need to draw a line edit where user can edit anytime*/\n}\n</code></pre>\n\n<p>The variable <code>color</code> in this line</p>\n\n<pre><code>painter.setBrush(color);\n</code></pre>\n\n<p>is the one you set using the <code>setColors</code> method.</p>\n\n<p>The <code>paintEvent</code> method should be like:</p>\n\n<pre><code>void CascadeColorHighlightWidget::paintEvent(QPaintEvent *event)\n{\n    Q_UNUSED(event);\n\n    QPainter painter(this);\n    painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);\n    QRectF contRect = contentsRect().adjusted(1, 1, -1, -1);\n    painter.setPen(QPen(QColor(176, 176, 176),1));\n    painter.setBrush(QColor(255,255,255));\n    painter.drawRect(contRect);\n\n    painter.setPen(QPen(QColor(51,51,51),1));\n    QFont font( \"Calibri\" );\n    font.setPixelSize(14);\n    painter.setFont( font );\n\n    painter.drawText(QPointF(contRect.x() + 18, contRect.y() + 28), \"Color Highlight\");\n\n    if(draw_ellipse)\n    {\n        drawEllipse(painter);\n    }\n}\n</code></pre>\n\n<p>At the end of it, you test <code>draw_ellipse</code> (don't forget to initialize it to <code>false</code> in the constructor) and call the <code>drawEllipse</code> method if it's <code>true</code>. </p>\n\n<p>Let's draw the ellipse, for example using <code>QWidget</code>'s <code>mousePressEvent</code>:</p>\n\n<pre><code>void CascadeColorHighlightWidget::mousePressEvent(QMouseEvent *event)\n{\n    setColors(QColor(Qt::red));\n    draw_ellipse = true;\n    update();\n}\n</code></pre>\n\n<p>Here, you set a color, first, then set <code>draw_ellipse</code> to <code>true</code>, then (and it matters a lot) you call the <a href=\"http://doc.qt.io/qt-5/qwidget.html#update\" rel=\"nofollow noreferrer\">update slot</a> of QWidget:</p>\n\n<blockquote>\n  <p>[...] it schedules a paint event for processing when Qt returns to the\n  main event loop.</p>\n</blockquote>\n\n<p>So the paintEvent method will be called, and your paintings updated accordingly to your class's state (<code>color</code> and <code>draw_ellipse</code> variables).</p>\n"}], "owner": {"reputation": 3112, "user_id": 278521, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/95147ce6f08f5039d98a2fd334c38b91?s=128&d=identicon&r=PG", "display_name": "Sijith", "link": "https://stackoverflow.com/users/278521/sijith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 47798454, "answer_count": 1, "score": 1, "last_activity_date": 1513445453, "creation_date": 1513169609, "last_edit_date": 1513445453, "question_id": 47793535, "link": "https://stackoverflow.com/questions/47793535/painting-the-widget-on-calling-slot", "title": "painting the widget on calling slot", "body": "<p>I want to paint a circle with user provided color and keep a line edit adjustment on it on horizontal alignment.</p>\n\n<p>Used painter function call on slot, but its not working</p>\n\n<pre><code>#include &lt;QPainter&gt;\n#include \"cascadeColorHighlightWidget.h\"\n\nCascadeColorHighlightWidget::CascadeColorHighlightWidget(QWidget *parent) : QWidget(parent)\n{\n    setWindowFlags(Qt::FramelessWindowHint | Qt::Widget);\n    setAttribute( Qt::WA_DeleteOnClose, true );\n    setFixedSize(187,164);\n    setContentsMargins(0,0,0,0);\n}\n\nvoid CascadeColorHighlightWidget::paintEvent(QPaintEvent *event)\n{\n    Q_UNUSED(event);\n\n    QPainter painter(this);\n    painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);\n    QRectF contRect = contentsRect().adjusted(1, 1, -1, -1);\n    painter.setPen(QPen(QColor(176, 176, 176),1));\n    painter.setBrush(QColor(255,255,255));\n    painter.drawRect(contRect);\n\n    painter.setPen(QPen(QColor(51,51,51),1));\n    QFont font( \"Calibri\" );\n    font.setPixelSize(14);\n    painter.setFont( font );\n\n    painter.drawText(QPointF(contRect.x() + 18, contRect.y() + 28), \"Color Highlight\");\n}\n\nvoid CascadeColorHighlightWidget::focusOutEvent(QFocusEvent *event)\n{\n   Q_UNUSED(event);\n   close();\n}\nvoid CascadeColorHighlightWidget::setColors(QColor color)\n{\n    QPainter painter(this);\n    painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);\n    QRectF contRect = contentsRect().adjusted(1, 1, -1, -1);\n\n    int rectYPos = contRect.y() + 55;\n\n    painter.setPen(Qt::NoPen);\n    QRectF ellipseRect = QRectF(contRect.x() + 18, rectYPos, 16, 16);\n\n    painter.setPen(Qt::NoPen);\n    painter.setBrush(color);\n    painter.drawEllipse(ellipseRect);\n    /*After this ellipse I need to draw a line edit where user can edit anytime*/\n\n    }\n</code></pre>\n\n<p>But by calling setcolot its not drawing the ellipse on the widget. Only the items in paintEvent worked. </p>\n\n<p>Is it possible to do with painter or I need to keep widgetItems and insert in this wideget. please give some suggestions</p>\n"}, {"tags": ["c++", "templates", "inheritance", "stl", "std-pair"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 4, "creation_date": 1513168443, "post_id": 47793117, "comment_id": 82547146, "body": "It looks like the type is just <code>MyIterator</code>, not a pointer."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513168579, "post_id": 47793117, "comment_id": 82547231, "body": "+1 for creating a (relatively) minimal test case that actually reproduces the issue (so rare in questions nowadays :)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1513169611, "post_id": 47793117, "comment_id": 82547880, "body": "@OliverCharlesworth unfortunately you were too fast with praising the example. After the edit it isnt complete anymore"}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 0, "creation_date": 1513170690, "post_id": 47793117, "comment_id": 82548615, "body": "It is not clear what your question is, perhaps it was clear before the edit, but not any longer."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 4, "creation_date": 1513170797, "post_id": 47793117, "comment_id": 82548692, "body": "Please revert your edit.  The question was answerable without it, but not with it."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 0, "creation_date": 1513168669, "post_id": 47793182, "comment_id": 82547276, "body": "Thanks a lot.I worked it on 2-3 hours."}, {"owner": {"reputation": 2735, "user_id": 446252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/3fWRI.jpg?s=128&g=1", "display_name": "Adam Trhon", "link": "https://stackoverflow.com/users/446252/adam-trhon"}, "reply_to_user": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 1, "creation_date": 1513168801, "post_id": 47793182, "comment_id": 82547337, "body": "@EasterGamer You&#39;re welcome. If it solves your problem, please accept the answer. If another problem appears, please start a new question."}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "reply_to_user": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "edited": false, "score": 2, "creation_date": 1513168896, "post_id": 47793182, "comment_id": 82547399, "body": "@EasterGamer, after you\u2019ll make it complete, I recommend <a href=\"https://codereview.stackexchange.com\">Code Review</a> to make it better."}], "tags": [], "owner": {"reputation": 2735, "user_id": 446252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/3fWRI.jpg?s=128&g=1", "display_name": "Adam Trhon", "link": "https://stackoverflow.com/users/446252/adam-trhon"}, "is_accepted": true, "score": 6, "last_activity_date": 1513168530, "creation_date": 1513168530, "answer_id": 47793182, "question_id": 47793117, "link": "https://stackoverflow.com/questions/47793117/base-operand-of-has-non-pointer-type-but-it-is-pointer/47793182#47793182", "title": "&quot;base operand of \u2018-&gt;\u2019 has non-pointer type&quot; But It is pointer", "body": "<p>You need to provide the <code>-&gt;</code> operator to <code>MyIterator</code> class, something as this:</p>\n\n<pre><code>T *operator-&gt;() {\n    return data;\n}\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 9093787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0836609c8efb77c82494e4c123f29509?s=128&d=identicon&r=PG&f=1", "display_name": "javac", "link": "https://stackoverflow.com/users/9093787/javac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1473, "favorite_count": 0, "closed_date": 1513196550, "accepted_answer_id": 47793182, "answer_count": 1, "score": 0, "last_activity_date": 1513168785, "creation_date": 1513168310, "last_edit_date": 1513168785, "question_id": 47793117, "link": "https://stackoverflow.com/questions/47793117/base-operand-of-has-non-pointer-type-but-it-is-pointer", "closed_reason": "Needs details or clarity", "title": "&quot;base operand of \u2018-&gt;\u2019 has non-pointer type&quot; But It is pointer", "body": "<p>This is my code.(I simplified this,Normally there were a lot of member functions,but error still same,So I simplified it.)</p>\n\n<pre><code>template &lt;class K,class V&gt;\nclass MyMap:public MySet&lt;pair&lt;K, V&gt; &gt;{};\n\nint main(void){\n\n    MyMap&lt;int,int&gt; map1;\n\n    MyMap&lt;int,int&gt;::MyIterator it;\n\n    it=map1.begin();\n\n    cout&lt;&lt;it-&gt;first&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "windows-7-x64"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1513168382, "post_id": 47793096, "comment_id": 82547104, "body": "Is your memory usage stable ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513168468, "post_id": 47793096, "comment_id": 82547162, "body": "You do release all resources once you&#39;re done with them? Not only free memory you allocate, but also close all files and other handles?"}, {"owner": {"reputation": 185, "user_id": 3895476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f60ebc7468b5f90f67d1a0828fac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederik", "link": "https://stackoverflow.com/users/3895476/frederik"}, "edited": false, "score": 0, "creation_date": 1513168922, "post_id": 47793096, "comment_id": 82547419, "body": "See edit. I think so, yes."}, {"owner": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 0, "creation_date": 1513172120, "post_id": 47793096, "comment_id": 82549578, "body": "There could be many reasons. Here are some that come to mind. (1) Does this occur on other OSs? This would prove it is a problem with your code or Windows. (2) How do you start the simulations? What is the scheduling priority shown in the Task Manager? Does it change? Have you tried &quot;start /hi ....&quot; or &quot;start /realtime ...&quot; to set the priority? (3) Have you installed Windows as a server or as a standard desktop installion? Have you used the control panel to configure the desktop installation to be more server-like?"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1513172815, "post_id": 47793096, "comment_id": 82549990, "body": "are simulations <i>truly</i> indipendent ? or they use (either directly or indirectly) some common data structure instances ?"}, {"owner": {"reputation": 185, "user_id": 3895476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f60ebc7468b5f90f67d1a0828fac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederik", "link": "https://stackoverflow.com/users/3895476/frederik"}, "reply_to_user": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 0, "creation_date": 1513182585, "post_id": 47793096, "comment_id": 82556604, "body": "@JustinFinnerty (1) I do not know. (2) there is a c++ compiled (.exe) file which takes as an argument the simulation-configuration to load. I start this via a cmd batch (using start) 32 times, each time using a different configuration file. The scheduling priority is normal. Changing priorities seems to have no (visible) effect on cpu load. (3) Windows 7 Enterprise edition is installed and I have some tweaks (like no automatic restart / updates), but besides this it is still a standard desktop OS."}, {"owner": {"reputation": 185, "user_id": 3895476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f60ebc7468b5f90f67d1a0828fac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederik", "link": "https://stackoverflow.com/users/3895476/frederik"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1513182779, "post_id": 47793096, "comment_id": 82556749, "body": "@MassimilianoJanes I guess they are truly independent, as I start each one individually. Although, they are instances of the same executable. They also read the same input file, but only once at the beginning (i.e. in the first simulation of each set). Thereafter everything is storred in the memory throughout. The size in Memory between the simulations is exactly the same in the task-manager, as it should (only computational load can vary, but also only a bit)."}, {"owner": {"reputation": 185, "user_id": 3895476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f60ebc7468b5f90f67d1a0828fac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederik", "link": "https://stackoverflow.com/users/3895476/frederik"}, "edited": false, "score": 0, "creation_date": 1514410480, "post_id": 47793096, "comment_id": 82966233, "body": "I have a potential answer... As I am saving the data to disk in several files and also create files to mark a simulation as in progress and done (deleting the &quot;in progress&quot; marker) the ssd might cause the problems, because the cache is filled. And in case of the python script it is even worse. I am reading data from the ssd and writing to a hd, including a &quot;consolidated&quot; marker filed for each run such processed. I got the idea from: <a href=\"https://stackoverflow.com/q/3031582/3895476\">https://stackoverflow.com/q/3031582/3895476</a>"}], "owner": {"reputation": 185, "user_id": 3895476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f60ebc7468b5f90f67d1a0828fac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederik", "link": "https://stackoverflow.com/users/3895476/frederik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1513168723, "creation_date": 1513168247, "last_edit_date": 1513168723, "question_id": 47793096, "link": "https://stackoverflow.com/questions/47793096/time-needed-of-simulations-in-loop-c-app-but-also-python-increases-in-time", "title": "Time needed of simulations in loop (c++ app, but also python) increases in time", "body": "<p>I have a xeon workstation with 16 cores and 32 threads. On that machine I run a large set of simulations in parellel, split on 32 processes that each involve 68,750 (total 2,2 Milion) simulations in a loop. </p>\n\n<p>Data is written on a ssd drive and a python process (while loop with waiting time) gathers the output, consolidates it and stores it away at another regular harddisk, continuously. </p>\n\n<p>Now, at when I start everything and for about the first day, a single simulation only takes a few seconds (all simulations have very similar complexity/load). But then, the time the single simulations take gets longer and longer, up to a hundred-folth after about a week. The cpu temperatures are fine, the disk-tempratures are fine, etc. </p>\n\n<p>However, whereas at the beginning Windows uses all CPU power at 100% is throttles the power a lot when it gets slow (I have a tool running that shows the load of all 32 threads). I tried to hybernate and restart, just to check if it is something with the hardware, but this does not change it, or not very much. </p>\n\n<p>Has anybody any explanation? Is there a tweak to apply to windows to change this behaviour? I can of course do some work around, like splitting the simulations further appart and restarting the machine completely every now and then, starting a new set of simulations again. But I am interested in experience and hopefully solutions to this problem, instead.</p>\n\n<p><strong>On comments 1,2</strong>: Yes, there are no leaks (tested the c++ code with valgrind) and the usage is stable. The system has 192 GB of Ram available and it only uses a small proportion of it (the 32 simulations each about 190MB), <strong>and</strong> in the c++ everything is closed. For python I guess too (leaving scope there closes handles, if I am not mistaken). However, closing the python programe doesn't change a thing.</p>\n\n<p>Thanks!\nFrederik</p>\n"}, {"tags": ["c++", "console", "locale", "cin", "setlocale"], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 0, "last_activity_date": 1513261642, "creation_date": 1513261642, "answer_id": 47815707, "question_id": 47792566, "link": "https://stackoverflow.com/questions/47792566/how-to-change-locale-for-cin/47815707#47815707", "title": "How to change locale for cin", "body": "<p>It seems that what you're after is changing the keyboard layout.  Unfortunately the C++ locale won't affect this.  You need to interact with the operating system, specifically the <a href=\"https://en.wikipedia.org/wiki/Input_method\" rel=\"nofollow noreferrer\">IME</a> subsystem.  There are some instructions here for Ubuntu which you've said you are using: <a href=\"https://askubuntu.com/questions/813094/how-to-change-uim-ime-input-method-using-command-line-or-programmatically/967787\">https://askubuntu.com/questions/813094/how-to-change-uim-ime-input-method-using-command-line-or-programmatically/967787</a></p>\n\n<p>The gist is that you need to open a Unix Domain Socket <code>$XDG_RUNTIME_DIR/uim/socket/uim-helper</code> and write a specific message like this:</p>\n\n<pre><code>im_change_whole_desktop\nanthy\n&lt;one blank line with trailing newline&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 5581909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e018072a0b0667343b21948c72286b?s=128&d=identicon&r=PG&f=1", "display_name": "D. Alex", "link": "https://stackoverflow.com/users/5581909/d-alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1513338396, "creation_date": 1513338396, "answer_id": 47831739, "question_id": 47792566, "link": "https://stackoverflow.com/questions/47792566/how-to-change-locale-for-cin/47831739#47831739", "title": "How to change locale for cin", "body": "<p>finally, found the solution with <code>setxkbmap</code> utility.\nI've created two scripts where the command is called</p>\n\n<ul>\n<li>de.sh file <code>setxkbmap de</code> </li>\n<li>en.sh file <code>setxkbmap en</code></li>\n</ul>\n\n<p>and then call it from the source code</p>\n\n<pre><code>#include &lt;locale&gt;\n#include &lt;clocale&gt;\nvoid change_locale(bool lang)\n{\n    std::locale delocale(\"de_DE.utf8\");\n    std::locale enlocale(\"en_AG\");\n\n    if (lang == true){\n        setlocale(LC_ALL,\"de_DE.utf8\");\n        std::locale::global(delocale);\n        std::cin.imbue(delocale);\n        system(\"de.sh\");\n    }\n    else {\n        setlocale(LC_ALL,\"en_AG\");\n        std::locale::global(enlocale);\n        std::cin.imbue(enlocale);\n        system(\"en.sh\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5581909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e018072a0b0667343b21948c72286b?s=128&d=identicon&r=PG&f=1", "display_name": "D. Alex", "link": "https://stackoverflow.com/users/5581909/d-alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 47831739, "answer_count": 2, "score": 0, "last_activity_date": 1513338396, "creation_date": 1513166627, "last_edit_date": 1513260742, "question_id": 47792566, "link": "https://stackoverflow.com/questions/47792566/how-to-change-locale-for-cin", "title": "How to change locale for cin", "body": "<p>I have two languages in my Ubuntu. And I want to start my simple program but need to enter the data in different languages. I am tired to switch global toggle from one lang to another. And now I am trying to automate this process by following code:</p>\n\n<pre><code>#include &lt;locale&gt;\n#include &lt;clocale&gt;\nvoid change_locale(bool lang)\n{\n    std::locale delocale(\"de_DE.utf8\");\n    std::locale enlocale(\"en_AG\");\n\n    if (lang == true){\n        std::cout &lt;&lt; \"set DE locale\" &lt;&lt; '\\n';\n        setlocale(LC_ALL,\"de_DE.utf8\");\n        std::locale::global(delocale);\n        std::cin.imbue(delocale);\n    }\n    else {\n        std::cout &lt;&lt; \"set Eng locale\" &lt;&lt; '\\n';\n        setlocale(LC_ALL,\"en_AG\");\n        std::locale::global(enlocale);\n        std::cin.imbue(enlocale);\n    }\n}\n</code></pre>\n\n<p>but it doesn't work. Please pay attention it is applied for cin only. How to make it workable?</p>\n"}, {"tags": ["c++", "terminal", "readline", "tmux", "backspace"], "comments": [{"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 1, "creation_date": 1513166844, "post_id": 47792556, "comment_id": 82546153, "body": "I don\u2019t see any C++ here except <code>nullptr</code>. You could tweak locales to match your needs"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1513166953, "post_id": 47792556, "comment_id": 82546216, "body": "Unrelated to your question, but that&#39;s not the way to detect if your compiler supports <a href=\"http://en.cppreference.com/w/cpp/language/nullptr\" rel=\"nofollow noreferrer\"><code>nullptr</code></a>. It&#39;s a keyword and not a preprocessor macro. You should check the <code>__cplusplus</code> macro to see that it&#39;s greater or equal to <code>201103L</code> (which is the value for C++11)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513167253, "post_id": 47792556, "comment_id": 82546405, "body": "Can you use the backspace key in other programs running it tmux, like e.g. bash?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513167447, "post_id": 47792556, "comment_id": 82546525, "body": "Also look for strange things in your <code>~&#47;.inputrc</code>."}, {"owner": {"reputation": 570, "user_id": 4647710, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/af725ad4de55f6eb0ecf2284464d3545?s=128&d=identicon&r=PG&f=1", "display_name": "rnels12", "link": "https://stackoverflow.com/users/4647710/rnels12"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1513167635, "post_id": 47792556, "comment_id": 82546646, "body": "@Someprogrammerdude sorry about that <code>nullptr</code>, it&#39;s removed now!"}, {"owner": {"reputation": 570, "user_id": 4647710, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/af725ad4de55f6eb0ecf2284464d3545?s=128&d=identicon&r=PG&f=1", "display_name": "rnels12", "link": "https://stackoverflow.com/users/4647710/rnels12"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513167753, "post_id": 47792556, "comment_id": 82546728, "body": "@n.m. <code>backspace</code> behaves normally anywhere except for any codes using <code>readline</code>. could you be a bit more specific what we&#39;re looking for in <code>.bashrc</code>/<code>.inputrc</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513168711, "post_id": 47792556, "comment_id": 82547290, "body": "No idea but try <code>INPUTRC=&#47;dev&#47;null .&#47;yourprogram</code>"}, {"owner": {"reputation": 570, "user_id": 4647710, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/af725ad4de55f6eb0ecf2284464d3545?s=128&d=identicon&r=PG&f=1", "display_name": "rnels12", "link": "https://stackoverflow.com/users/4647710/rnels12"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513169110, "post_id": 47792556, "comment_id": 82547537, "body": "@n.m. <code>INPUTRC=&#47;dev&#47;null .&#47;myprogram</code> didn&#39;t work, but thanks for the suggestion"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513169578, "post_id": 47792556, "comment_id": 82547860, "body": "So it&#39;s something else, not inputrc. Does readline work without tmux?"}, {"owner": {"reputation": 570, "user_id": 4647710, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/af725ad4de55f6eb0ecf2284464d3545?s=128&d=identicon&r=PG&f=1", "display_name": "rnels12", "link": "https://stackoverflow.com/users/4647710/rnels12"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513169729, "post_id": 47792556, "comment_id": 82547970, "body": "@n.m. the code is compiled and works perfectly in <code>tcsh</code> without tmux but the <code>backspace</code> behavior persists."}], "owner": {"reputation": 570, "user_id": 4647710, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/af725ad4de55f6eb0ecf2284464d3545?s=128&d=identicon&r=PG&f=1", "display_name": "rnels12", "link": "https://stackoverflow.com/users/4647710/rnels12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1513168364, "creation_date": 1513166606, "last_edit_date": 1513168364, "question_id": 47792556, "link": "https://stackoverflow.com/questions/47792556/strange-behavior-of-backspace-in-a-running-readline-code", "title": "strange behavior of backspace in a running readline code", "body": "<p>I wrote a c++ code with the <code>readline</code> library:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string&gt;\n#include &lt;readline/readline.h&gt;\n#include &lt;readline/history.h&gt;\n\nint main(int argc, char** argv) {\n\n  char* buf;\n  while ((buf = readline(\"&gt;&gt; \")) != nullptr) {\n    if (strlen(buf) &gt; 0) add_history(buf);\n\n    printf(\"[%s]\\n\", buf);\n    free(buf);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>The code runs OK, but the problem is with the <code>backspace</code> key. When I make a mistake with the input and trying to remove a character with the key, instead of removing the last character, it gives a space. Originally</p>\n\n<pre><code>&gt;&gt; Hellow\n</code></pre>\n\n<p>After hitting <code>backspace</code>, it gives me a space instead of removing <code>w</code>:</p>\n\n<pre><code>&gt;&gt; Hellow(there_is_a_space_here!) \n</code></pre>\n\n<p>I'm working in bash using tmux and this strange behavior only appears when running this code with <code>readline</code>. Could anyone tell me how to fix this strange behavior of <code>backspace</code>?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The same behavior also appears when running the code on <code>tcsh</code>.</p>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1513166199, "post_id": 47792346, "comment_id": 82545790, "body": "First of all, you create a vector of C-style <i>strings</i>, not a vector of characters. As for your problem, it seems like you want a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string_view\" rel=\"nofollow noreferrer\"><code>std::string_view</code></a>. It&#39;s easy to create a <code>string_view</code>-like wrapper if you don&#39;t have <code>std::string_view</code> yet."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513166207, "post_id": 47792346, "comment_id": 82545797, "body": "Then you can&#39;t use a <code>vector</code>, since you&#39;d need to give it a different allocator type, and that&#39;s a template argument, which thus changes signatures."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1513166213, "post_id": 47792346, "comment_id": 82545803, "body": "you cant. containers manage their own memory by design. You want a view rather than a container"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1513166220, "post_id": 47792346, "comment_id": 82545808, "body": "Short answer:  you don&#39;t.  You create your vector and if you need access to the raw pointer then you can do <code>data()</code>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513166630, "post_id": 47792346, "comment_id": 82546038, "body": "As currently written, the question seems like an exact duplicate of <a href=\"https://stackoverflow.com/questions/354442/looking-for-c-stl-like-vector-class-but-using-stack-storage\">Looking for C++ STL-like vector class but using stack storage</a>, particularly the first hypothetical piece of code"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1513166638, "post_id": 47792346, "comment_id": 82546047, "body": "The only way a vector will allocate memory is if your code does something which resizes or reserves a new capacity.   If you are doing such operations, it&#39;s not reasonable to expect it to not allocate memory."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1513167117, "post_id": 47792346, "comment_id": 82546325, "body": "@Someprogrammerdude Update code to fix the issue. Is there any std:;vector_view or something such as this?"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513167350, "post_id": 47792346, "comment_id": 82546463, "body": "@underscore_d It is not as that function asked for a container that allocate on stack, here I want a vector that doesn&#39;t allocate memory and don&#39;t manage memory by itself, but wrap around a memory which is already allocated."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1513167757, "post_id": 47792346, "comment_id": 82546731, "body": "By default there is no such thing for vector. What you can do is to create a custom allocator to manage your memory."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1513167826, "post_id": 47792346, "comment_id": 82546771, "body": "@Logman Any information about how I can do this?"}, {"owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1513168060, "post_id": 47792346, "comment_id": 82546911, "body": "Don&#39;t go the way with the custom allocator. It gets too messy."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1513168308, "post_id": 47792346, "comment_id": 82547062, "body": "As @OutOfBound said it&#39;s difficult path but I think it&#39;s the only way. Try read <a href=\"http://en.cppreference.com/w/cpp/memory/allocator\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 2, "creation_date": 1513168329, "post_id": 47792346, "comment_id": 82547080, "body": "@Logman the custom allocator changes the type. <code>std::vector&lt;char&gt;</code> is incompatible with <code>std::vector&lt;char, AllocatorThatDoesntAllocate&gt;</code>, at which point you may as well use <code>string_view</code>"}, {"owner": {"reputation": 122, "user_id": 8608529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a872f435322c5d067ff5b20a73bc650?s=128&d=identicon&r=PG&f=1", "display_name": "Matthieu.V", "link": "https://stackoverflow.com/users/8608529/matthieu-v"}, "edited": false, "score": 0, "creation_date": 1513168643, "post_id": 47792346, "comment_id": 82547266, "body": "Is memory really that critical in this program? It seems kind of overkill to try to achieve such a tiny optimization... you will have to allocate memory anyway, since a vector contains overhead that makes it larger than a simple buffer for the same data."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 122, "user_id": 8608529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a872f435322c5d067ff5b20a73bc650?s=128&d=identicon&r=PG&f=1", "display_name": "Matthieu.V", "link": "https://stackoverflow.com/users/8608529/matthieu-v"}, "edited": false, "score": 0, "creation_date": 1513169557, "post_id": 47792346, "comment_id": 82547846, "body": "@Matthieu.V The buffer size is very big, it is around 500Mbyte. and during my process I need to create different vectors from different part of the buffer to be able to process them via myLibFunc."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1513169902, "post_id": 47792346, "comment_id": 82548069, "body": "@WernerHenze I am getting it as parameter to my function."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1513170709, "post_id": 47792346, "comment_id": 82548637, "body": "@Caleth I was thinking to combine it with std::swap. I expect library will not modify container itself it will modify only elements, but if it&#39;s not true the whole idea is not valid."}, {"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513177411, "post_id": 47792346, "comment_id": 82553157, "body": "If you want horrendous UB code, <a href=\"https://gist.github.com/YashasSamaga/88a1368dbf26b0ffd051764b57f630fa\" rel=\"nofollow noreferrer\">here</a> it is. It works on my PC but it needn&#39;t on yours, HAHA."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 0, "creation_date": 1513189709, "post_id": 47792346, "comment_id": 82560810, "body": "@JustinFinnerty instead you prefer to assume that OP is not qualified to ask proper question."}], "answers": [{"tags": [], "owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "is_accepted": false, "score": 0, "last_activity_date": 1513243961, "last_edit_date": 1513243961, "creation_date": 1513167944, "answer_id": 47792994, "question_id": 47792346, "link": "https://stackoverflow.com/questions/47792346/how-to-create-a-vector-around-a-buffer/47792994#47792994", "title": "How to create a vector around a buffer?", "body": "<p>If you can not change the signature of your function it is not possible without the copy.</p>\n\n<p>But a better way is to think about your interface. If you build <code>myLibFunc</code> on random access iterators, your problem is solved:</p>\n\n<pre><code>template &lt;class CharRandomAccessIterator&gt;\n myLibFunc(CharRandomAccessIterator&amp; begin, CharRandomAccessIterator&amp; end )\n {\n     // dosomthing with data\n     size = end - begin;\n     begin[xyz]; // access elements\n }\n myFunc(char *buffer,int bufferSize)\n {\n       std::vector&lt;char &gt; mydata(buffer,buffer+bufferSize);\n       myLibFunc(mydata.begin(), mydata.end()); // This will work\n       myLibFunc(buffer, buffer+size); // This will work too\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513177343, "post_id": 47796005, "comment_id": 82553115, "body": "Here&#39;s my version too: <a href=\"https://gist.github.com/YashasSamaga/88a1368dbf26b0ffd051764b57f630fa\" rel=\"nofollow noreferrer\">this</a>  (no offense to those who take this as brutal treatment of C++)"}], "tags": [], "owner": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "is_accepted": false, "score": 0, "last_activity_date": 1513642992, "last_edit_date": 1513642992, "creation_date": 1513176889, "answer_id": 47796005, "question_id": 47792346, "link": "https://stackoverflow.com/questions/47792346/how-to-create-a-vector-around-a-buffer/47796005#47796005", "title": "How to create a vector around a buffer?", "body": "<p>std::vector is designed to exclusively own the data it holds so doing the memory copy is the only safe way for std::vector to work.  That leaves only unsafe hacks.  If we can assume the function does not change the vector size, you can abuse std::vector.  In my compiler (tested on g++4.8 and cpp.sh) std::vector is implemented as three pointers (to begin data, end used data and end alloc) therefore I can abuse the vector as:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nvoid myLibFunc( std::vector&lt; char &gt; &amp; a )\n{\n    for( char c : a )\n    {\n        std::cout &lt;&lt; '[' &lt;&lt; c &lt;&lt; ']';\n    }\n    a[0] = 'B'\n    std::cout &lt;&lt; '\\n';\n}\n\nvoid myFunc(char *buffer,int bufferSize)\n{\n   std::vector&lt;char &gt; mydata;\n   // cast to alterable pointers, cast should also keep \n   // mydata in scope until after the last assignment.\n   char ** abuser = (char**)&amp;mydata;\n   // save old values and substitute new values\n   char *tmp0 = abuser[0];\n   abuser[0] = buffer;\n   char *tmp1 = abuser[1];\n   abuser[1] = buffer+bufferSize;\n   char *tmp2 = abuser[2];\n   abuser[2] = buffer+bufferSize;\n   myLibFunc(mydata);\n   // return old values to avoid crash when mydata goes out of scope.\n   abuser[0] = tmp0;\n   abuser[1] = tmp1;\n   abuser[2] = tmp2;\n}\n\nint main()\n{\n    char p[] = \"Hello World\";\n    myFunc( &amp;p[0] + 2, 5 );\n    std::cout &lt;&lt; p &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>Note this abuse is likely to be non-portable and lead to unexplained crashes.</p>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1595350036, "creation_date": 1513165926, "last_edit_date": 1595350036, "question_id": 47792346, "link": "https://stackoverflow.com/questions/47792346/how-to-create-a-vector-around-a-buffer", "title": "How to create a vector around a buffer?", "body": "<p>I have a code which is similar to the following:</p>\n<pre><code> myLibFunc(std::vector&lt;char &gt; &amp;data)\n {\n     // dosomthing with data\n }\n myFunc(char *buffer,int bufferSize)\n {\n       std::vector&lt;char &gt; mydata(buffer,buffer+bufferSize);\n       myLibFunc(mydata);\n }\n</code></pre>\n<p>The code works, but the vector allocates memory for itself and not using a memory that is already available.</p>\n<p>How can I change the code in such a way that the vector uses the memory that already available and not allocating an extra memory?</p>\n<p>Note that I can not change the signature of functions.</p>\n<h1>Update</h1>\n<p>I have two functions:<br />\nIn one of them, I receive a buffer and I need to manipulate the memory and pass it to the next function as a vector. The function that I am trying to implement is part of an interface so I can not change it. Another function is a library that I need to call, so I can not change the signature of functions.<br />\nThe problem is that the above code allocates new memory and copies the data from the buffer to it which is not optimal.</p>\n"}, {"tags": ["c++", "arrays", "constructor"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1513165924, "post_id": 47792281, "comment_id": 82545635, "body": "any reason you can&#39;t use std::vector?"}, {"owner": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 0, "creation_date": 1513178824, "post_id": 47792281, "comment_id": 82554158, "body": "C++ does not have runtime variable length array except through memory allocation.  Your choices are therefore to use allocation or use an array that is large enough for the maximum possible value of SIZE and storing the actual number used in each object."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8928360, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/056d4d993f6d529834a4e0875558ceca?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dara", "link": "https://stackoverflow.com/users/8928360/tom-dara"}, "edited": false, "score": 0, "creation_date": 1513172114, "post_id": 47792554, "comment_id": 82549576, "body": "are you not are creating an array of 5 objects here each with their own value? I was asking how to create one object that has a variable called grades which is an array that stores 5 values. So I was wondering is it possible to initialize the values of that array with a construct initialization list?"}], "tags": [], "owner": {"reputation": 3624, "user_id": 8013471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh4jO.jpg?s=128&g=1", "display_name": "cse", "link": "https://stackoverflow.com/users/8013471/cse"}, "is_accepted": true, "score": 1, "last_activity_date": 1513230841, "last_edit_date": 1513230841, "creation_date": 1513166603, "answer_id": 47792554, "question_id": 47792281, "link": "https://stackoverflow.com/questions/47792281/constructor-initialization-list-for-an-array-in-c/47792554#47792554", "title": "constructor initialization list for an array in c++", "body": "<p>Yes you can. Following is an example. <a href=\"https://ideone.com/QWwgqW\" rel=\"nofollow noreferrer\">Here you can see it working</a>:</p>\n\n<pre><code>class A\n{\n        int valLen;\n        int* values;\n        vector&lt;int&gt; vect;\n\n    public:\n        A(int len, ...)\n        {\n            va_list args;\n            va_start(args, len);\n            valLen = len;\n            for(int i=0; i&lt;valLen; i++)\n            {\n                vect.push_back(va_arg(args, int));  \n            }\n            values = &amp;vect[0];\n            va_end(args);\n        }\n\n        void print()\n        {\n            for(int i=0; i&lt;valLen; i++)\n                cout &lt;&lt; values[i]&lt;&lt;endl;\n        }\n};\n\nint main()\n{\n    A aVals[] ={A(3, 50,6,78), A(5, 67,-10,89,32,12)};\n\n    for(int i=0; i&lt;2; i++)\n    {\n        aVals[i].print();\n        cout&lt;&lt;\"\\n\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>Note:</strong> Very first argument of constructor is the number <code>count</code> i.e. number of values to be passed. If <code>count</code> is fixed, then you can skip and make appropriate change in <code>constructor</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 8928360, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/056d4d993f6d529834a4e0875558ceca?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dara", "link": "https://stackoverflow.com/users/8928360/tom-dara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 47792554, "answer_count": 1, "score": 0, "last_activity_date": 1513230841, "creation_date": 1513165727, "question_id": 47792281, "link": "https://stackoverflow.com/questions/47792281/constructor-initialization-list-for-an-array-in-c", "title": "constructor initialization list for an array in c++", "body": "<p>I've a class below that creates records of students grades. The constructor allocates memory for the array and sets a default value to each element in the array. I have to pass in the value of this default value. My question is, can I allocate the memory and initialize the values of an array with a construct initialization list or in any other way. I don't what to use dynamic allocation <code>new</code> and <code>delete</code>.        </p>\n\n<pre><code> //header file for main.cpp\n\n#include&lt;iostream&gt;\n\nusing namespace std;\n\nconst int SIZE = 5;\ntemplate &lt;class T&gt;\nclass StudentRecord\n{\n    private:\n        const int size = SIZE;\n        T grades[SIZE];\n        int studentId;\n    public:\n        StudentRecord(T defaultInput);//A default constructor with a default value\n        void setGrades(T* input);\n        void setId(int idIn);\n        void printGrades();\n};\n\ntemplate&lt;class T&gt;\nStudentRecord&lt;T&gt;::StudentRecord(T defaultInput)\n{\n    //we use the default value to allocate the size of the memory\n    //the array will use\n    for(int i=0; i&lt;SIZE; ++i)\n        grades[i] = defaultInput;\n\n}\n\n\ntemplate&lt;class T&gt;\nvoid StudentRecord&lt;T&gt;::setGrades(T* input)\n{\n    for(int i=0; i&lt;SIZE;++i)\n    {\n        grades[i] = input[i];\n    }\n}\n\ntemplate&lt;class T&gt;\nvoid StudentRecord&lt;T&gt;::setId(int idIn)\n{\n    studentId = idIn;\n}\n\ntemplate&lt;class T&gt;\nvoid StudentRecord&lt;T&gt;::printGrades()\n{\n    std::cout&lt;&lt;\"ID# \"&lt;&lt;studentId&lt;&lt;\": \";\n    for(int i=0;i&lt;SIZE;++i)\n        std::cout&lt;&lt;grades[i]&lt;&lt;\"\\n \";\n    std::cout&lt;&lt;\"\\n\";\n}\n\n\n#include \"main.hpp\"\n\nint main()\n{\n    //StudentRecord is the generic class\n    StudentRecord&lt;int&gt; srInt();\n    srInt.setId(111111);\n    int arrayInt[SIZE]={4,3,2,1,4};\n    srInt.setGrades(arrayInt);\n    srInt.printGrades();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "priority-queue", "unordered-map", "std-pair"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513165968, "post_id": 47792252, "comment_id": 82545664, "body": "First of all you need two loops, one to put into the map and make it all unique (why not simply <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">sort</a> the vector and calling <a href=\"http://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\"><code>std::unique</code></a> to remove duplicates?) and another loop to push into the queue. Because right now you can still push duplicates. Then for your problem: <code>no_dupes[dictionary[k]]</code> is not a pair! It&#39;s a single <code>int</code> value."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1513209686, "post_id": 47792252, "comment_id": 82569370, "body": "How do you expect this code to compile? You have <code>computeEditDistance(words[j], dictionary[k])</code>, but you haven&#39;t defined <code>j</code>. Come to think of it, your code makes little sense overall. What, exactly, are you trying to build here?"}], "owner": {"reputation": 1, "user_id": 6851845, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af5b62d84e13e5c0f843a7d7e5707ea5?s=128&d=identicon&r=PG&f=1", "display_name": "cec526", "link": "https://stackoverflow.com/users/6851845/cec526"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513165652, "creation_date": 1513165652, "question_id": 47792252, "link": "https://stackoverflow.com/questions/47792252/c-expression-must-have-class-type-with-unordered-map", "title": "C++: expression must have class type with unordered_map", "body": "<p>I am trying to build a priority queue of pairs with type <code>&lt;string, int&gt;</code>. I have a dictionary file of strings that I am using and then calculating an edit distance for these strings. I am building the queue just fine, but the issue is that if there are any duplicate strings in the file, it will create two instances in my queue, and this will be a problem for my ultimate goal. To get around this, I thought I might put the values into an unordered_map, and then into a pair. Here is my code</p>\n\n<pre><code>class CompareDist\n{\npublic:\n    bool operator()(pair&lt;string, int&gt; n1, pair&lt;string, int&gt; n2)\n    {\n        return n1.second &gt; n2.second;\n    }\n};\n\nint main()\n{\n    vector&lt;string&gt; words;\n    vector&lt;string&gt; dictionary;\n    unordered_map&lt;string, int&gt; no_dupes;\n    priority_queue&lt;pair&lt;string, int&gt;, vector&lt;pair&lt;string, int&gt;&gt;, CompareDist&gt; distances;\n\n    //there is some other code up here that is not important\n\n    for (int k = 0; k &lt; dictionary.size(); k++)\n    {\n        int edit_distance = computeEditDistance(words[j], dictionary[k]);\n        no_dupes[dictionary[k]] = edit_distance;\n        distances.push(make_pair(no_dupes[dictionary[k]].first, \n            no_dupes[dictionary[k]].second));\n    }\n}\n</code></pre>\n\n<p>I get an \"expression must have class type\" error when trying to use no_dupes[dictionary[k]].first and .second. It does seem sloppy, but I'm not sure how else to make a pair of the key and value of my unordered_map. Any help is greatly appreciated. Thanks.</p>\n"}, {"tags": ["c++", "qt", "qtconcurrent"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513165926, "post_id": 47792153, "comment_id": 82545638, "body": "<i>&quot;It does not recognise the function&quot;</i> Yes, it does. How could it tell you that you used the wrong syntax for that function, if it did not recognise it?"}, {"owner": {"reputation": 1460, "user_id": 4228398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qLCBK.jpg?s=128&g=1", "display_name": "Majid Hojati", "link": "https://stackoverflow.com/users/4228398/majid-hojati"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513166971, "post_id": 47792153, "comment_id": 82546227, "body": "@underscore_d Hi, thanks, so where am I doing wrong?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513167179, "post_id": 47792153, "comment_id": 82546365, "body": "Did you look at the linked duplicate at all?"}, {"owner": {"reputation": 1460, "user_id": 4228398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qLCBK.jpg?s=128&g=1", "display_name": "Majid Hojati", "link": "https://stackoverflow.com/users/4228398/majid-hojati"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513167568, "post_id": 47792153, "comment_id": 82546587, "body": "@underscore_d yes but could not understand my mistake"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513167637, "post_id": 47792153, "comment_id": 82546649, "body": "Prepend <code>&amp;YourClassName::</code> to the member function name and try that."}, {"owner": {"reputation": 1460, "user_id": 4228398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qLCBK.jpg?s=128&g=1", "display_name": "Majid Hojati", "link": "https://stackoverflow.com/users/4228398/majid-hojati"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513167747, "post_id": 47792153, "comment_id": 82546723, "body": "@underscore_d I tried but it gives me the same error:= invalid use of non-static member function \u2018void MainWindow::RunProcess()\u2019      QFuture&lt;void&gt; f1 = run(MainWindow::RunProcess,dir);                                                       ^"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513167972, "post_id": 47792153, "comment_id": 82546866, "body": "Right, I think, as in the dupe, you need to also pass the instance whose member function you want to be called, as the first argument followed by the pointer-to-member. Reading the documentation would make this clear. Here&#39;s a better duplicate: <a href=\"https://stackoverflow.com/questions/2152355/is-it-possible-to-use-qtconcurrentrun-with-a-function-member-of-a-class\">is it possible to use QtConcurrent::run() with a function member of a class</a>"}, {"owner": {"reputation": 1460, "user_id": 4228398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qLCBK.jpg?s=128&g=1", "display_name": "Majid Hojati", "link": "https://stackoverflow.com/users/4228398/majid-hojati"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513259187, "post_id": 47792153, "comment_id": 82591091, "body": "@underscore_d none of them worked."}], "owner": {"reputation": 1460, "user_id": 4228398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qLCBK.jpg?s=128&g=1", "display_name": "Majid Hojati", "link": "https://stackoverflow.com/users/4228398/majid-hojati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 914, "favorite_count": 0, "closed_date": 1513165873, "answer_count": 0, "score": 0, "last_activity_date": 1513165293, "creation_date": 1513165293, "question_id": 47792153, "link": "https://stackoverflow.com/questions/47792153/invalid-use-of-non-static-member-function-qtconcurrent", "closed_reason": "Duplicate", "title": "invalid use of non-static member function QtConcurrent", "body": "<p>I have a function which is named RunProcess. I want to use it in a concurrent process to make GUI responsiveness, So I tried to run my function in concurrent process but It does not recognize the function. here is my class</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include \"gdal_priv.h\"\n#include \"cpl_conv.h\" // for CPLMalloc()\n#include \"ogr_srs_api.h\"\n#include &lt;QDir&gt;\n#include &lt;QFile&gt;\n#include &lt;QDebug&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;string&gt;\n#include &lt;QFileDialog&gt;\n#include &lt;QThread&gt;\n#include &lt;QtConcurrent/QtConcurrent&gt;\n\n\nusing namespace QtConcurrent;\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n\n\n    ui-&gt;setupUi(this);\n    connect(ui-&gt;startProcess, SIGNAL (released()), this, SLOT (StartProcess()));\n\n}\n\n\n\n\nvoid MainWindow::StartProcess(){\n\n\n    sendinfo(\"Starting Process... Note that the input images &lt;b&gt;must&lt;\\b&gt; be in ESPG:3857.\");\n\n    QString dir = QFileDialog::getExistingDirectory(this, tr(\"Open Directory\"),\n                                                    \"/home\",\n                                                    QFileDialog::ShowDirsOnly\n                                                    | QFileDialog::DontResolveSymlinks);\n\n\n    if(dir==\"\"){\n        sendwarning(\"nothing is selected.\");\n            return;\n    }\n    sendinfo(\"The selected folder is: \"+dir);\n\n\n    QFuture&lt;void&gt; f1 = run(RunProcess,dir);\n    f1.waitForFinished();\n\n}\n\n\nvoid MainWindow::RunProcess( QString dir){\n\n    if(dir==\"\"){\n        sendwarning(\"nothing is selected.\");\n            return;\n    }\n    sendinfo(\"The selected folder is: \"+dir);\n    QString path(dir);\n    QDir directory(path);\n\n    if(directory.exists()){\n        ....\n    }else{\n\n        //directory does not exist\n        senderror(\"directory does not exist\");\n\n    }\n\n}\n</code></pre>\n\n<p>here is my header</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include \"gdal_priv.h\"\n#include \"ogr_spatialref.h\"\n#include \"gdal_utils_priv.h\"\n#include \"cpl_error.h\"\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    void RunProcess();\n\n    ~MainWindow();\npublic slots:\n    void StartProcess();\nprivate:\n    Ui::MainWindow *ui;\n    void senderror(QString msg);\n    void sendinfo(QString msg);\n    void sendwarning(QString msg);\n    void gettext(QString msg,QString color);\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>The above code returns </p>\n\n<pre><code> mainwindow.cpp:180: error: invalid use of non-static member function \u2018void MainWindow::RunProcess()\u2019\n     QFuture&lt;void&gt; f1 = run(RunProcess,dir);\n                                         ^\n</code></pre>\n\n<p>Can you please help me find my mistake?\nthanks</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2017", "registry", "detect"], "owner": {"reputation": 328, "user_id": 3870437, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/b945366fca3e389c00772a4009760062?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Escobar", "link": "https://stackoverflow.com/users/3870437/frank-escobar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "closed_date": 1528359632, "answer_count": 0, "score": 1, "last_activity_date": 1513164437, "creation_date": 1513164437, "question_id": 47791908, "link": "https://stackoverflow.com/questions/47791908/check-if-vc-2017-redist-has-been-installed", "closed_reason": "Duplicate", "title": "Check if VC 2017 redist has been installed", "body": "<p>Checking previous versions was trivial \n<a href=\"https://blogs.msdn.microsoft.com/astebner/2010/05/05/mailbag-how-to-detect-the-presence-of-the-visual-c-2010-redistributable-package/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/astebner/2010/05/05/mailbag-how-to-detect-the-presence-of-the-visual-c-2010-redistributable-package/</a></p>\n\n<p>if you need 2010 you should use 10.0 for the next release 11.0... 14.0</p>\n\n<p>Everything works as it was expected until VS 2017 where the entry 15.0 exists but there is no VC folder inside it and of course there is no such key as \"installed\"</p>\n\n<p>Anyone had to deal with this?</p>\n\n<p>Thank you in advance</p>\n"}]