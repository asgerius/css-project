[{"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1443486516, "post_id": 32751249, "comment_id": 53503387, "body": "<i>&quot;if <code>stuff.h</code> introduces a <code>string</code> identifier to the anonymous namespace then use of <code>string</code> from inside the <code>proj</code> namespace will be ambiguous.&quot;</i> No it won&#39;t. Besides, anonymous namespaces in headers are rare anyway."}, {"owner": {"reputation": 1874, "user_id": 1651000, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/be6ee9bebde05dc29f6232407088a939?s=128&d=identicon&r=PG", "display_name": "marack", "link": "https://stackoverflow.com/users/1651000/marack"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1443487686, "post_id": 32751249, "comment_id": 53503645, "body": "@JonathanWakely Hmm, interesting.  I assumed that <code>using std::string</code> would have the same ambiguity problem as <code>using namespace std</code>.  It seems that identifiers included individually are much stronger than members included as part of a namespace.  Do you know why this is?  The inconsistency seems a bit painful."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1443518874, "post_id": 32751249, "comment_id": 53515461, "body": "Because they&#39;re not the same. Why should two different features with different uses be consistent? That would be redundant."}, {"owner": {"reputation": 1874, "user_id": 1651000, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/be6ee9bebde05dc29f6232407088a939?s=128&d=identicon&r=PG", "display_name": "marack", "link": "https://stackoverflow.com/users/1651000/marack"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1443562627, "post_id": 32751249, "comment_id": 53542095, "body": "@JonathanWakely I don&#39;t agree with that reasoning.  From the programmer&#39;s point of view the two uses are &quot;I want to make this name visible&quot; and &quot;I want to make all names from this namespace visible&quot;.  Assigning different semantics to the two &#39;make visible&#39; actions is misleading."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1443606627, "post_id": 32751249, "comment_id": 53558450, "body": "That programmer&#39;s point of view is not what what the language says, I can&#39;t help it if a mistaken understanding doesn&#39;t match reality :-)"}], "answers": [{"tags": [], "owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "is_accepted": false, "score": 1, "last_activity_date": 1443487940, "last_edit_date": 1443487940, "creation_date": 1443486720, "answer_id": 32833843, "question_id": 32751249, "link": "https://stackoverflow.com/questions/32751249/c-using-declaration-vs-type-aliases-in-headers/32833843#32833843", "title": "C++ using declaration vs type aliases in headers", "body": "<p>Both ways are equal and you can proove that by using a <code>static_assert</code> in your namespace.</p>\n\n<pre><code>static_assert(std::is_same&lt;std::string, string&gt;::value, \"types are not the same\"); // succeeds and does NOT complain\n</code></pre>\n\n<blockquote>\n  <p>string identifier to the anonymous namespace then use of string from inside the proj namespace will be ambiguous.</p>\n</blockquote>\n\n<p>In that case you write only <code>::string</code> to specify which string you want to use.</p>\n\n<pre><code>::string s1;\n\nstring s2;\n</code></pre>\n\n<p>What you can't do is to introduce a new type or typedef-name in namespace <code>proj</code>. I prefer to use the <code>using declaration</code> to indicate it's still the same type. Although the alias-declaration does NOT introduce a new type it feels like a new one for semantics - but that's just a personal thing.</p>\n"}], "owner": {"reputation": 1874, "user_id": 1651000, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/be6ee9bebde05dc29f6232407088a939?s=128&d=identicon&r=PG", "display_name": "marack", "link": "https://stackoverflow.com/users/1651000/marack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2450, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1443487940, "creation_date": 1443052139, "last_edit_date": 1443485669, "question_id": 32751249, "link": "https://stackoverflow.com/questions/32751249/c-using-declaration-vs-type-aliases-in-headers", "title": "C++ using declaration vs type aliases in headers", "body": "<p>In a C++11 project I would like to introduce a few identifiers from the standard library namespace (<code>std</code>) into the project's namespace (<code>proj</code>) to enhace readability.  For example I would prefer to be able to use <code>string</code> everywhere instead of <code>std::string</code>.</p>\n\n<p>Note that this project is an application, not a library whose code will be subsequently included by other projects.</p>\n\n<p>This could be achieved by adding code to a common header included everywhere in the project.  Two methods of actually introducing the identifier are shown below:</p>\n\n<pre><code>#ifndef PROJ_H\n#define PROJ_H\n\n#include \"stuff.h\"\n#include &lt;string&gt;\n\nnamespace proj\n{\n  // method 1 - using declaration\n  using std::string;\n\n  // method 2 - type alias\n  using string = std::string;\n}\n\n#endif\n</code></pre>\n\n<p>I have a feeling that method 2 is superior to method 1.  The reason being that if <code>stuff.h</code> introduces a <code>string</code> identifier to the anonymous namespace then use of <code>string</code> from inside the <code>proj</code> namespace will be ambiguous.</p>\n\n<p>My questions:</p>\n\n<ol>\n<li>Is method 2 really superior as I suggest or are they strictly equivalent?</li>\n<li>If method 2 is better, how can I achieve the same level of safety for a non-type identifier (such as a function like <code>std::make_unique</code>).</li>\n</ol>\n"}, {"tags": ["c++", "shared-ptr", "smart-pointers", "doubly-linked-list", "reference-counting"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1443053102, "post_id": 32751155, "comment_id": 53343309, "body": "Not a dupe of this, but still well worth the reading: <a href=\"http://stackoverflow.com/questions/14291744/why-doesnt-stdshared-ptr-use-reference-linking\" title=\"why doesnt stdshared ptr use reference linking\">stackoverflow.com/questions/14291744/&hellip;</a>"}, {"owner": {"reputation": 33, "user_id": 4982142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1158e939620e7cb380087ff90e1eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/4982142/peng"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443054140, "post_id": 32751155, "comment_id": 53343546, "body": "The link you provided says &quot;allocate a control block on the heap which holds the reference count&quot; also confirms @legends2k&#39; answer."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443054491, "post_id": 32751155, "comment_id": 53343625, "body": "Yes, but pay heed to Jonathan Wakely&#39;s warning of how hard it is to protect the reference linked smart pointer in a multithreaded environment. <i>creating</i> the reference liked pointer is safer, but <i>using</i> safely it is another matter."}, {"owner": {"reputation": 33, "user_id": 4982142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1158e939620e7cb380087ff90e1eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/4982142/peng"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443054657, "post_id": 32751155, "comment_id": 53343672, "body": "Probably that&#39;s why reference counting smart pointer is much more popular and I cannot just google out the answer."}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1443054776, "post_id": 32751155, "comment_id": 53343695, "body": "@Peng That&#39;s true, I&#39;ve not seen any reference linked smart pointers used in any serious projects or offered by libraries."}, {"owner": {"reputation": 33, "user_id": 4982142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1158e939620e7cb380087ff90e1eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/4982142/peng"}, "edited": false, "score": 0, "creation_date": 1443055663, "post_id": 32751155, "comment_id": 53343911, "body": "But I like the idea of reference linking smart pointer, essentially we do not need to keep track the count, we only need know whether it is the last pointer or not. This is solved nicely by introducing a doubled linked list without extra storage, although it may become impractical when multithreading gets in.."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4982142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1158e939620e7cb380087ff90e1eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/4982142/peng"}, "edited": false, "score": 0, "creation_date": 1443053979, "post_id": 32751382, "comment_id": 53343505, "body": "This is kind of clarity I expect~ Great answer!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443054850, "post_id": 32751382, "comment_id": 53343714, "body": "Except it says &quot;on the stack&quot; and &quot;on the heap&quot; which are implementation details and may not be true. So not so much clarity really."}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1443055282, "post_id": 32751382, "comment_id": 53343811, "body": "Fixed! However, Andrei&#39;s comment on reliability shows that he&#39;s banking on the fact that automatic storage almost always comes from a stack implementation, no?"}], "tags": [], "owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "is_accepted": true, "score": 2, "last_activity_date": 1443055071, "last_edit_date": 1495541200, "creation_date": 1443053291, "answer_id": 32751382, "question_id": 32751155, "link": "https://stackoverflow.com/questions/32751155/the-advantage-of-reference-linking-over-reference-counting-when-implementing-sma/32751382#32751382", "title": "The advantage of reference linking over reference counting when implementing smart pointer?", "body": "<p>When you declare a reference counted smart pointer as an automatic variable and allocate storage from free store for it to manage, even though the pointer's member variables will be on automatic storage, the control block created for book keeping and managing the object would be on the free store. A trivial example:</p>\n\n<pre><code>class RefCountIntPtr {\n    int *pointee;\n    int *count;\n\npublic:\n    RefCountIntPtr(int *x) {\n        if (x) {\n            pointee = x;\n            // allocate an int from free store and assign 1 to it\n            count = new int(1);\n        }\n    }\n};\n\nint main() {\n    RefCountIntPtr sp;\n}\n</code></pre>\n\n<p>Here, <code>sp</code>'s <code>pointee</code> and <code>count</code> would get allocated on the stack while what <code>count</code> is going to point to will be allocated on the heap. Assuming that the implementation (compiler) uses a heap for free store and stack for automatic storage.</p>\n\n<p>On the other hand, reference linked smart pointers have no control block allocation from free store, all they have are three pointers as member variables, all of them are allocated on auto storage. Creating more of them? No problem, they will all be in auto storage, acting as a linked list when you make them point to the same pointee. The difference is that instead of having an explicit count, the linked list acts as an implicit one, when all links vanish, we know that the count is 0 and the pointee needs to be freed.</p>\n\n<p>The reason for the comment on reliability is that when you allocate from free store there's higher probability that it'll leak during an exceptional scenario. However automatic variable allocation is much more reliable as deallocation is automatically handled by the compiler. See <a href=\"https://stackoverflow.com/q/6500313/183120\">Why should C++ programmers minimize use of &#39;new&#39;?</a> for details.</p>\n"}], "owner": {"reputation": 33, "user_id": 4982142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1158e939620e7cb380087ff90e1eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/4982142/peng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 32751382, "answer_count": 1, "score": 3, "last_activity_date": 1443166555, "creation_date": 1443051473, "last_edit_date": 1443166555, "question_id": 32751155, "link": "https://stackoverflow.com/questions/32751155/the-advantage-of-reference-linking-over-reference-counting-when-implementing-sma", "title": "The advantage of reference linking over reference counting when implementing smart pointer?", "body": "<blockquote>\n  <p>The advantage of reference linking over reference counting is that the\n  former does not use extra free store, which makes it more reliable:\n  Creating a reference-linked smart pointer cannot fail. The\n  disadvantage is that reference linking needs more memory for its\n  bookkeeping (three pointers versus only one pointer plus one integer).\n  Also, reference counting should be a bit speedier\u2014when you copy smart\n  pointers, only an indirection and an increment are needed. The list\n  management is slightly more elaborate. In conclusion, you should use\n  reference linking only when the free store is scarce. Otherwise,\n  prefer reference counting.</p>\n</blockquote>\n\n<p>This is a quote from Modern C++ Design: Generic Programming and Design Pattern Applied. I do not understand why reference linking based smart pointer does not use extra free store and then become more reliable i.e. never fail? Could anyone provide a bit explanation on this? Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4863, "user_id": 332528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc1cf00b47308ea716fb26c46cde8cf?s=128&d=identicon&r=PG", "display_name": "torvin", "link": "https://stackoverflow.com/users/332528/torvin"}, "edited": false, "score": 0, "creation_date": 1443051704, "post_id": 32751148, "comment_id": 53342946, "body": "Move your <code>add_rect</code> outside of <code>Graph</code>"}, {"owner": {"reputation": 13, "user_id": 5369887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1070329219b9fda1bd3d1d214e9ecf?s=128&d=identicon&r=PG&f=1", "display_name": "Droid 347", "link": "https://stackoverflow.com/users/5369887/droid-347"}, "reply_to_user": {"reputation": 4863, "user_id": 332528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc1cf00b47308ea716fb26c46cde8cf?s=128&d=identicon&r=PG", "display_name": "torvin", "link": "https://stackoverflow.com/users/332528/torvin"}, "edited": false, "score": 0, "creation_date": 1443051932, "post_id": 32751148, "comment_id": 53343008, "body": "Tried that, it gives a bunch of new errors."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 4863, "user_id": 332528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc1cf00b47308ea716fb26c46cde8cf?s=128&d=identicon&r=PG", "display_name": "torvin", "link": "https://stackoverflow.com/users/332528/torvin"}, "edited": false, "score": 1, "creation_date": 1443052595, "post_id": 32751148, "comment_id": 53343178, "body": "But are they better errors? One error could be hiding a hundred more, so fixing problem X may look like it caused even more error messages. @torvin looks to be right. Add_rect appears to be part of the Graph struct. Either make it static and prefix calls to it with Graph:: to satisfy the namespacing or remove it from the struct."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5369887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1070329219b9fda1bd3d1d214e9ecf?s=128&d=identicon&r=PG&f=1", "display_name": "Droid 347", "link": "https://stackoverflow.com/users/5369887/droid-347"}, "edited": false, "score": 0, "creation_date": 1443052618, "post_id": 32751204, "comment_id": 53343188, "body": "Oops, I forgot to paste the template into my question, sorry."}], "tags": [], "owner": {"reputation": 21930, "user_id": 1760345, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/5X1PZ.jpg?s=128&g=1", "display_name": "taocp", "link": "https://stackoverflow.com/users/1760345/taocp"}, "is_accepted": false, "score": 1, "last_activity_date": 1443051793, "creation_date": 1443051793, "answer_id": 32751204, "question_id": 32751148, "link": "https://stackoverflow.com/questions/32751148/add-rect-identifier-not-found-c/32751204#32751204", "title": "add_rect identifier not found c++", "body": "<p>There are multiple errors in the shown code:</p>\n\n<pre><code>add_rect(grid, 0, 0, 1, 10);  \n</code></pre>\n\n<p><code>add_rect</code> is a inline member function of the <code>Graph</code> class, it needs to be called with an instance of your class since it is not static. If it is static, you need  to call it with <code>Graph::add_rect(...)</code></p>\n\n<p>Meanwhile, your <code>Graph</code> class is <strong>NOT</strong> a class template, while you are using it as it is: <code>Graph&lt;int&gt;</code>. </p>\n\n<p>The solution is either of the following:</p>\n\n<ol>\n<li>Move <code>add_rect</code> outside of your class and define it as a utility function that is not belonging to the <code>Graph</code> class</li>\n<li>Create an instance of <code>Graph</code> at first, then call it with <code>.</code> operator</li>\n<li>Change <code>Graph&lt;int&gt;</code> to <code>Graph</code> or make a real class template</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 4863, "user_id": 332528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc1cf00b47308ea716fb26c46cde8cf?s=128&d=identicon&r=PG", "display_name": "torvin", "link": "https://stackoverflow.com/users/332528/torvin"}, "is_accepted": true, "score": 0, "last_activity_date": 1443052075, "creation_date": 1443052075, "answer_id": 32751246, "question_id": 32751148, "link": "https://stackoverflow.com/questions/32751148/add-rect-identifier-not-found-c/32751246#32751246", "title": "add_rect identifier not found c++", "body": "<p>Your <code>add_rect</code> method belongs to a struct, so it should operate on <code>this</code> rather then on externally passed object. It should look like this:</p>\n\n<pre><code>inline void add_rect(int x1, int y1, int x2, int y2) { //create walls (this part doesn't work atm)\n    for (int x = x1; x &lt; x2; ++x) {\n        for (int y = y1; y &lt; y2; ++y) {\n            walls.insert(Graph::Location{ x, y });\n        }\n    }\n}\n</code></pre>\n\n<p>And should be called like this:</p>\n\n<pre><code>Graph&lt;int&gt; grid(30, 10);\ngrid.add_rect(0, 0, 1, 10);\ngrid.add_rect(1, 0, 30, 1);\n// etc\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5369887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1070329219b9fda1bd3d1d214e9ecf?s=128&d=identicon&r=PG&f=1", "display_name": "Droid 347", "link": "https://stackoverflow.com/users/5369887/droid-347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 32751246, "answer_count": 2, "score": 0, "last_activity_date": 1443052652, "creation_date": 1443051421, "last_edit_date": 1443052652, "question_id": 32751148, "link": "https://stackoverflow.com/questions/32751148/add-rect-identifier-not-found-c", "title": "add_rect identifier not found c++", "body": "<p>I am getting an error in my C++ code. </p>\n\n<p>Here is part of the relevant code, it is located in pathfinding.h file. (GitHub link to full project is at the bottom):\n    template \n    struct Graph{   //this will be the map\n        typedef tuple Location;   //basically an (x,y) coordinate\n        static array DIRS;</p>\n\n<pre><code>    unordered_set&lt;Location&gt;walls;\n\n    int width, height;\n    Graph(int width_, int height_) :width(width_), height(height_){}    //constructor\n\n    inline bool in_bounds(Location id){ //make sure in bounds\n        int x, y;\n        tie(x, y) = id;\n        return 0 &lt;= x&lt;width &amp;&amp; 0 &lt;= y&lt;height;\n    }\n\n    inline bool passable(Location id){  //check if wall\n        return !walls.count(id);\n    }\n\n    vector&lt;Location&gt; neighbors(Location id){    //return 4 neighbors\n        int x, y, dx, dy;\n        tie(x, y) = id;\n        bool possible;\n        vector&lt;Location&gt; results;\n        for (auto dir : DIRS) {\n            tie(dx, dy) = dir;\n            Location next(x + dx, y + dy);\n            if (in_bounds(next) &amp;&amp; passable(next)) {\n                results.push_back(next);\n            }\n        }\n        if ((x + y) % 2 == 0) {\n            // aesthetic improvement on square grids\n            std::reverse(results.begin(), results.end());\n        }\n        return results;\n    }\n    inline void add_rect(Graph&amp; grid, int x1, int y1, int x2, int y2) { //create walls (this part doesn't work atm)\n        for (int x = x1; x &lt; x2; ++x) {\n            for (int y = y1; y &lt; y2; ++y) {\n                grid.walls.insert(Graph::Location{ x, y });\n            }\n        }\n    }\n};\n</code></pre>\n\n<p>Actually it's mostly the add_rect function that is relevant and the unordered_set. </p>\n\n<p>Here is the code in the main:</p>\n\n<pre><code>Graph&lt;int&gt; grid(30, 10);    //all \n    add_rect(grid, 0, 0, 1, 10);    //of \n    add_rect(grid, 1, 0, 30, 1);\n    add_rect(grid, 12, 1, 13, 2);\n    add_rect(grid, 16, 1, 17, 2);\n    add_rect(grid, 12, 2, 13, 3);\n    add_rect(grid, 16, 2, 17, 3);   //this\n    add_rect(grid, 12, 3, 17, 4);   //doesn't\n    add_rect(grid, 1, 9, 30, 10);   //work\n    add_rect(grid, 29, 1, 30, 9);   //right\n    add_rect(grid, 4, 5, 25, 6); // now\n</code></pre>\n\n<p>Here is the list of errors:</p>\n\n<pre><code>error C3861: 'add_rect': identifier not found (all of the lines with add_rect in the main)\nerror C2338: The C++ Standard doesn't provide a hash for this type.     \n</code></pre>\n\n<p>Basically the add_rect is supposed to create walls and add them to the unordered_set named walls in the Graph class. I have included \"pathfinding.h\". I tried forward declaration but it just caused more errors. I don't know how to make a suitable hash function for unordered_set, any help on that?</p>\n\n<p>Also, please tell me how to make my questions better, first timer here.</p>\n\n<p>Github link: <a href=\"https://github.com/Aopser101/pacman\" rel=\"nofollow\">https://github.com/Aopser101/pacman</a></p>\n\n<p>thanks for your time.</p>\n"}, {"tags": ["c++", "recursion", "counter"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 1, "creation_date": 1443050533, "post_id": 32751005, "comment_id": 53342618, "body": "Have you tried the debugger yet?"}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443050587, "post_id": 32751005, "comment_id": 53342642, "body": "You are not resetting <code>call_count</code> to zero on each loop iteration."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1443050701, "post_id": 32751005, "comment_id": 53342687, "body": "Also, you need to print <code>call_count</code> on a separate statement from the call to <code>fibo</code> since it could be evaluated at the call point. And you need to subtract 1 for the initial call!"}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443050750, "post_id": 32751005, "comment_id": 53342699, "body": "@rlbond i have not reset it in the code i pasted but i tried it as described in the details, it gave me wrong call_counts....either zero or the calls reduced to less than half the values as opposed to the present"}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1443050836, "post_id": 32751005, "comment_id": 53342727, "body": "@DOUGLASO.MOEN yes i tried a bit, but i am not sure if i am using the debugger correctly or not using dev cpp as i am very new to c++. learner here."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1443050968, "post_id": 32751005, "comment_id": 53342773, "body": "By resetting <code>call_count</code> and subtracting 1, it matches exactly... <a href=\"http://ideone.com/8EWjOC\" rel=\"nofollow noreferrer\">ideone.com/8EWjOC</a>"}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443051118, "post_id": 32751005, "comment_id": 53342803, "body": "@rlbond i tried doing call_count as a seperate statement for printing call count but it still did not match, i am trying the subtraction now"}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1443051263, "post_id": 32751005, "comment_id": 53342840, "body": "@CodeMan Dev Cpp is outdated and its debugger was broken the last time I used it. If you are looking for a free IDE, might I recommend Visual Studio 2015 Community Edition: <a href=\"https://www.visualstudio.com/downloads/download-visual-studio-vs\" rel=\"nofollow noreferrer\">visualstudio.com/downloads/download-visual-studio-vs</a> it is completely free and up-to-date with C++14."}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "reply_to_user": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1443051408, "post_id": 32751005, "comment_id": 53342868, "body": "@Casey well thanks casey for the ups. i will try in visual studio too.....but even codeblocks is behaving same way"}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443053332, "post_id": 32751005, "comment_id": 53343361, "body": "@rlbond I got it now, there was a small extra syntax that was misbehaving......but now it works Your suggestion. i wrote cout in a seperate statement and reset it to add a negative 1 and it works perfect HUGE THANX TO rlbond!!!"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "edited": false, "score": 0, "creation_date": 1443051037, "post_id": 32751080, "comment_id": 53342790, "body": "ok am trying this right away and will be back with what the result is thanks."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1443051164, "post_id": 32751080, "comment_id": 53342813, "body": "You need to split the stream operator for <code>call_count</code> to another line."}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "edited": false, "score": 0, "creation_date": 1443051227, "post_id": 32751080, "comment_id": 53342827, "body": "So Nope it did not work, when i tried your code , the function calls went down to zero for each call..... all the calls are zero6th number         8            0 calls &lt;br/&gt; 7th number         13           0 calls  8th number         21           0 calls  9th number         34           0 calls  10th number        55           0 calls  11th number        89           0 calls  12th number        144          0 calls  13th number        233          0 calls  14th number        377          0 calls  15th number        610          0 calls   the total number of recursive calls made were 1219"}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "edited": false, "score": 0, "creation_date": 1443051320, "post_id": 32751080, "comment_id": 53342851, "body": "the total number somehow matches now but the individual call print statement not yeilding right results"}, {"owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443053453, "post_id": 32751080, "comment_id": 53343392, "body": "@rlbond your earlier suggestion worked perfectly, it was just some random extra syntax character that was misbehaving with the code output. thanks. a lot will answer my own question in an hour, i got some meeting rt now"}], "tags": [], "owner": {"reputation": 454, "user_id": 3859419, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/50f19cd841009b448ea20a1bfb4a6357?s=128&d=identicon&r=PG&f=1", "display_name": "DivideByzero", "link": "https://stackoverflow.com/users/3859419/dividebyzero"}, "is_accepted": true, "score": 3, "last_activity_date": 1443050922, "creation_date": 1443050922, "answer_id": 32751080, "question_id": 32751005, "link": "https://stackoverflow.com/questions/32751005/number-of-recursion-calls-for-each-fibonacci-number/32751080#32751080", "title": "Number of recursion calls for each Fibonacci number", "body": "<p>Reset the call_count to zero before making call to fibo() method.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"math.h\"\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint call_count = 0;\n\nint fibo(int n)\n{\n    call_count+=1;\n    if(n&lt;=2)\n    {\n        return 1;\n    }\n    else {\n            //call_count += 1;\n            return fibo(n-1) + fibo(n-2);\n         }\n    return n;\n}\n\nint main()\n{\n    int num;\n    cout&lt;&lt;\"\\nenter the number of integers to be printed in the fibonacci series\\n\";\n    cin&gt;&gt;num;\n    cout&lt;&lt;\"\\nfibonacci series for first \"&lt;&lt;num&lt;&lt;\" numbers is\\n\";\n    cout&lt;&lt;\"\\n\\nSerial Number\\t\"&lt;&lt;\"FIBO_NUMBER\\t\"&lt;&lt;\" NO_OF_CALLS MADE\\n\\n\";\n    for(int i=1;i&lt;=num;i++)\n    {\n        call_count = 0; \n        cout&lt;&lt;endl&lt;&lt;i&lt;&lt;\"th number\\t   \"&lt;&lt;fibo(i)&lt;&lt;\"\\t\\t\"&lt;&lt;call_count&lt;&lt;\" calls\\n\";\n    }\n    cout&lt;&lt;endl&lt;&lt;\"\\n the total number of recursive calls made were \"    &lt;&lt;call_count&lt;&lt;endl&lt;&lt;endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1443074186, "creation_date": 1443074186, "answer_id": 32754317, "question_id": 32751005, "link": "https://stackoverflow.com/questions/32751005/number-of-recursion-calls-for-each-fibonacci-number/32754317#32754317", "title": "Number of recursion calls for each Fibonacci number", "body": "<p>Collectively summarizing from the pin-point inputs of @rlbond and @zeroCool, along with a tiny change to both to form a single answer:-<br/></p>\n\n<p>resetting call_count to zero on each loop iteration, and printing the call_count on a separate statement from the call to fibo (since it could be evaluated at the call point), will yield the expected output. \nAlso one needs to subtract 1 from call_count (for the initial call), while printing out the count statement for each fibonacci number to get the expected count.<br/>\n<br/>\nFollowing Code reduces the need of an extra variable and splits the print statement evaluating to expected output. (alternatively one could refer to the link from rlbond's comment on the question above. <a href=\"http://ideone.com/8EWjOC\" rel=\"nofollow\">ideone.com/8EWjOC</a> )\n<br/></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"math.h\"\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint call_count = 0;\n\nint fibo(int n)\n{\n    call_count+=1;\n    if(n&lt;=2)\n    {\n        return 1;\n    }\n    else {\n            return fibo(n-1) + fibo(n-2);\n         }\n    return n;\n}\n\nint main()\n{\n    int num;\n    cout&lt;&lt;\"\\nenter the number of integers to be printed in the fibonacci series\\n\";\n    cin&gt;&gt;num;\n    cout&lt;&lt;\"\\nfibonacci series for first \"&lt;&lt;num&lt;&lt;\" numbers is\\n\";\n    cout&lt;&lt;\"\\n\\nSerial Number\\t\"&lt;&lt;\"FIBO_NUMBER\\t\"&lt;&lt;\" NO_OF_CALLS MADE\\n\\n\";\n    for(int i=1;i&lt;=num;i++)\n    {\n        call_count = 0;\n        cout&lt;&lt;endl&lt;&lt;i&lt;&lt;\"th number\\t   \"&lt;&lt;fibo(i)&lt;&lt;\"\\t\\t\";\n        cout&lt;&lt;call_count-1&lt;&lt;\" calls\\n\";\n    }\ncout&lt;&lt;endl&lt;&lt;\"\\n the total number of recursive calls made were \"&lt;&lt;call_count-1&lt;&lt;endl&lt;&lt;endl;\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p><br/></p>\n\n<p><strong>Works fine, output as follows:-</strong><br/>\n<br/>\nenter the number of integers to be printed in the fibonacci series\n15</p>\n\n<p>fibonacci series for first 15 numbers is</p>\n\n<p>Serial Number   FIBO_NUMBER      NO_OF_CALLS MADE</p>\n\n<p>1th number         1            0 calls</p>\n\n<p>2th number         1            0 calls</p>\n\n<p>3th number         2            2 calls</p>\n\n<p>4th number         3            4 calls</p>\n\n<p>5th number         5            8 calls</p>\n\n<p>6th number         8            14 calls</p>\n\n<p>7th number         13           24 calls</p>\n\n<p>8th number         21           40 calls</p>\n\n<p>9th number         34           66 calls</p>\n\n<p>10th number        55           108 calls</p>\n\n<p>11th number        89           176 calls</p>\n\n<p>12th number        144          286 calls</p>\n\n<p>13th number        233          464 calls</p>\n\n<p>14th number        377          752 calls</p>\n\n<p>15th number        610          1218 calls</p>\n\n<p>the total number of recursive calls made were 1218</p>\n\n<p>Press any key to continue . . .</p>\n\n<p><br/><br/> gratitude to everyone's contribution.</p>\n"}], "owner": {"reputation": 107, "user_id": 2825656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a80d77404c035a41fe0dda28be1910d?s=128&d=identicon&r=PG&f=1", "display_name": "Code Man", "link": "https://stackoverflow.com/users/2825656/code-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2246, "favorite_count": 1, "accepted_answer_id": 32751080, "answer_count": 2, "score": 0, "last_activity_date": 1486104881, "creation_date": 1443050280, "last_edit_date": 1495541330, "question_id": 32751005, "link": "https://stackoverflow.com/questions/32751005/number-of-recursion-calls-for-each-fibonacci-number", "title": "Number of recursion calls for each Fibonacci number", "body": "<p><strong>Why is there a variation between the numbers in the output of my code, versus the expected output result (as pasted at the end)?</strong> </p>\n\n<p>I went through these questions related to the calculation of the number of recursive calls:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1738923/number-of-calls-for-nth-fibonacci-number\">Number of calls for nth Fibonacci number</a></li>\n<li><a href=\"https://stackoverflow.com/questions/22237930/count-number-of-recursive-calls-in-fibonacci\">Count number of recursive calls in fibonacci</a></li>\n</ul>\n\n<p>I could not form a proper answer or a solution to my question.</p>\n\n<p>I even tried re-initializing the count by writting <code>call_count = 0;</code> in the main() function after the for loop or also in the function definitions (as suggested in the answers of the second link above) but, it did not work or give me the expected output.</p>\n\n<p>I have pasted my code below and its output below the code, and the expected output below my code output.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"math.h\"\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint call_count = 0;\n\nint fibo(int n)\n{\n    call_count+=1;\n    if(n&lt;=2)\n    {\n        return 1;\n    }\n    else {\n            //call_count += 1;\n            return fibo(n-1) + fibo(n-2);\n         }\n    return n;\n}\n\nint main()\n{\n    int num;\n    cout&lt;&lt;\"\\nenter the number of integers to be printed in the fibonacci series\\n\";\n    cin&gt;&gt;num;\n    cout&lt;&lt;\"\\nfibonacci series for first \"&lt;&lt;num&lt;&lt;\" numbers is\\n\";\n    cout&lt;&lt;\"\\n\\nSerial Number\\t\"&lt;&lt;\"FIBO_NUMBER\\t\"&lt;&lt;\" NO_OF_CALLS MADE\\n\\n\";\n    for(int i=1;i&lt;=num;i++)\n    {\n        cout&lt;&lt;endl&lt;&lt;i&lt;&lt;\"th number\\t   \"&lt;&lt;fibo(i)&lt;&lt;\"\\t\\t\"&lt;&lt;call_count&lt;&lt;\" calls\\n\";\n    }\ncout&lt;&lt;endl&lt;&lt;\"\\n the total number of recursive calls made were \"&lt;&lt;call_count&lt;&lt;endl&lt;&lt;endl;\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p><strong>The Output for My Code:</strong></p>\n\n<pre><code>enter the number of integers to be printed in the fibonacci series\n15\n\nfibonacci series for first 15 numbers is\n\nSerial Number   FIBO_NUMBER      NO_OF_CALLS MADE\n\n\n1th number         1            0 calls\n\n2th number         1            1 calls\n\n3th number         2            2 calls\n\n4th number         3            5 calls\n\n5th number         5            10 calls\n\n6th number         8            19 calls\n\n7th number         13           34 calls\n\n8th number         21           59 calls\n\n9th number         34           100 calls\n\n10th number        55           167 calls\n\n11th number        89           276 calls\n\n12th number        144          453 calls\n\n13th number        233          740 calls\n\n14th number        377          1205 calls\n\n15th number        610          1958 calls\n\n\n the total number of recursive calls made were 3177\n\nPress any key to continue . . .\n</code></pre>\n\n<p><strong>Whereas the EXPECTED output numbers are as follows:</strong></p>\n\n<pre><code>1 th integer of fibonacci series is 1 and it needed 0 recursive calls\n2 th integer of fibonacci series is 1 and it needed 0 recursive calls\n3 th integer of fibonacci series is 2 and it needed 2 recursive calls\n4 th integer of fibonacci series is 3 and it needed 4 recursive calls\n5 th integer of fibonacci series is 5 and it needed 8 recursive calls\n6 th integer of fibonacci series is 8 and it needed 14 recursive calls\n7 th integer of fibonacci series is 13 and it needed 24 recursive calls\n8 th integer of fibonacci series is 21 and it needed 40 recursive calls\n9 th integer of fibonacci series is 34 and it needed 66 recursive calls\n10 th integer of fibonacci series is 55 and it needed 108 recursive calls\n11 th integer of fibonacci series is 89 and it needed 176 recursive calls\n12 th integer of fibonacci series is 144 and it needed 286 recursive calls\n13 th integer of fibonacci series is 233 and it needed 464 recursive calls\n14 th integer of fibonacci series is 377 and it needed 752 recursive calls\n15 th integer of fibonacci series is 610 and it needed 1218 recursive calls\nPress any key to continue . . .\n</code></pre>\n\n<p>How do I resolve this mismatch?</p>\n"}, {"tags": ["c++", "multithreading", "shared-ptr"], "comments": [{"owner": {"reputation": 343, "user_id": 4461183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0845621997a766ae7c7e8a6122b85b?s=128&d=identicon&r=PG", "display_name": "Karlis Olte", "link": "https://stackoverflow.com/users/4461183/karlis-olte"}, "edited": false, "score": 0, "creation_date": 1443050948, "post_id": 32750945, "comment_id": 53342763, "body": "1) &quot;control block is thread-safe.&quot; <a href=\"http://stackoverflow.com/questions/14482830/stdshared-ptr-thread-safety\" title=\"stdshared ptr thread safety\">stackoverflow.com/questions/14482830/&hellip;</a> 2) You should take a look at how race condition is defined"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1443051052, "post_id": 32750945, "comment_id": 53342795, "body": "<code>operator-&gt;</code> is a const member: <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator%2A\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/memory/shared_ptr/operator*</a>"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 343, "user_id": 4461183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0845621997a766ae7c7e8a6122b85b?s=128&d=identicon&r=PG", "display_name": "Karlis Olte", "link": "https://stackoverflow.com/users/4461183/karlis-olte"}, "edited": false, "score": 0, "creation_date": 1443051200, "post_id": 32750945, "comment_id": 53342820, "body": "@KarlisOlte It looks like a typo given the quote from cpp-reference."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1443051522, "post_id": 32750945, "comment_id": 53342897, "body": "And, OP, 1st is also true. So basically your code is fine as long as Foo::bar being race-free stands true."}], "answers": [{"tags": [], "owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "is_accepted": true, "score": 3, "last_activity_date": 1443052229, "creation_date": 1443052229, "answer_id": 32751255, "question_id": 32750945, "link": "https://stackoverflow.com/questions/32750945/is-shared-ptr-destruction-safe-with-multiple-threads/32751255#32751255", "title": "Is shared_ptr destruction safe with multiple threads?", "body": "<p>To sum up my comments.</p>\n\n<ol>\n<li>Yes, this is thread safe as you operate separate copies of <code>shared_ptr</code>s in different threads. Which is one of the few cases where passing copies of <code>shared_ptr</code>s is actually reasonable.</li>\n<li><code>operator-&gt;</code> is a <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator%2A\" rel=\"nofollow\">const member</a>. So basically your code is fine as long as Foo::bar being race-free stands true (which it clearly is now).</li>\n</ol>\n"}], "owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 32751255, "answer_count": 1, "score": 4, "last_activity_date": 1443083003, "creation_date": 1443049886, "last_edit_date": 1443083003, "question_id": 32750945, "link": "https://stackoverflow.com/questions/32750945/is-shared-ptr-destruction-safe-with-multiple-threads", "title": "Is shared_ptr destruction safe with multiple threads?", "body": "<p>I have two classes similar to this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Foo {\n public:\n  void bar() {\n    std::lock_guard&lt;std::mutex&gt; lock(m_mutex);\n    m_data.push_back('x');\n  }\n private:\n  std::string m_data;\n  std::mutex m_mutex;\n};\n\nclass Pool {\n public:\n   static std::shared_ptr&lt;Foo&gt; Create(int index) {\n     std::lock_guard&lt;std::mutex&gt; lock(m_mutex);\n     if (m_pool.size() &gt; 10) {\n       m_pool.erase(m_pool.begin());\n     }\n     std::shared_ptr&lt;Foo&gt;&amp; ptr = m_pool[index];\n     if (!ptr) ptr.reset(new Foo);\n     return ptr;\n   }\n private:\n   static std::mutex m_mutex;\n   static std::map&lt;int, std::shared_ptr&lt;Foo&gt;&gt; m_pool;\n};\n</code></pre>\n\n<p>and several threads running this code:</p>\n\n<pre><code>void parallel_function(int index) {\n  // several threads can get the same index\n  std::shared_ptr&lt;Foo&gt; foo = Pool::Create(index);\n  foo-&gt;bar();\n}\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow\">Cppreference</a> says</p>\n\n<blockquote>\n  <p>All member functions (including copy constructor and copy assignment) can be called by multiple threads on different instances of shared_ptr without additional synchronization even if these instances are copies and share ownership of the same object. If multiple threads of execution access the same shared_ptr without synchronization and any of those accesses uses a non-const member function of shared_ptr then a data race will occur; the shared_ptr overloads of atomic functions can be used to prevent the data race. </p>\n</blockquote>\n\n<p>Two questions:</p>\n\n<ol>\n<li><p>Since <code>Pool::Create</code> always returns copies of the <code>shared_ptr</code>, I assume that the copy and destruction of each <code>shared_ptr</code> is thread-safe, either if it happens in <code>m_pool.erase</code> or at the end of <code>parallel_function</code>. Is this correct?</p></li>\n<li><p>I call <code>shared_ptr::operator-&gt;</code>, which is a const member function, and the function <code>Foo::bar</code> is thread-safe. Is there a data race here?</p></li>\n</ol>\n"}, {"tags": ["c++", "glut"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5369850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2e903b365d6c2e337ff21fd518d636?s=128&d=identicon&r=PG&f=1", "display_name": "uNkeLo", "link": "https://stackoverflow.com/users/5369850/unkelo"}, "edited": false, "score": 0, "creation_date": 1443050458, "post_id": 32750982, "comment_id": 53342587, "body": "You mena these glutDisplayFunc(renderScene); but if i dra two text layers they are appears all same time and not with delay. can i try the delay with windows  sleep and wait ? or should i take another way ? Thanks for your time-  i tried the delay inside the renderscene callback but now it delays 2 sec for the first draw not between the draws."}, {"owner": {"reputation": 64, "user_id": 4594794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e24296d6032cac19a6431c209382568?s=128&d=identicon&r=PG&f=1", "display_name": "funkysidd", "link": "https://stackoverflow.com/users/4594794/funkysidd"}, "edited": false, "score": 0, "creation_date": 1443059606, "post_id": 32750982, "comment_id": 53344739, "body": "Isn&#39;t the problem here that when glutSwapBuffers() is called, both the text are drawn to the scene at the same time? That&#39;s why the delay is just noticed between successive draws, at which point both the text are rendered."}, {"owner": {"reputation": 1725, "user_id": 1351828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351d561f75641e458ce8f6dfd5b5227?s=128&d=identicon&r=PG", "display_name": "Adrian Krupa", "link": "https://stackoverflow.com/users/1351828/adrian-krupa"}, "reply_to_user": {"reputation": 64, "user_id": 4594794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e24296d6032cac19a6431c209382568?s=128&d=identicon&r=PG&f=1", "display_name": "funkysidd", "link": "https://stackoverflow.com/users/4594794/funkysidd"}, "edited": false, "score": 0, "creation_date": 1443075075, "post_id": 32750982, "comment_id": 53348878, "body": "@funkysidd Do you see delayTime? For some period of time we&#39;ll render only text 1, after that both texts."}, {"owner": {"reputation": 64, "user_id": 4594794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e24296d6032cac19a6431c209382568?s=128&d=identicon&r=PG&f=1", "display_name": "funkysidd", "link": "https://stackoverflow.com/users/4594794/funkysidd"}, "edited": false, "score": 0, "creation_date": 1443100064, "post_id": 32750982, "comment_id": 53363377, "body": "@AdrianKrupa you are right! I somehow missed <code>delayTime</code>. This should work."}, {"owner": {"reputation": 3, "user_id": 5369850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2e903b365d6c2e337ff21fd518d636?s=128&d=identicon&r=PG&f=1", "display_name": "uNkeLo", "link": "https://stackoverflow.com/users/5369850/unkelo"}, "reply_to_user": {"reputation": 64, "user_id": 4594794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e24296d6032cac19a6431c209382568?s=128&d=identicon&r=PG&f=1", "display_name": "funkysidd", "link": "https://stackoverflow.com/users/4594794/funkysidd"}, "edited": false, "score": 0, "creation_date": 1443121571, "post_id": 32750982, "comment_id": 53377153, "body": "@funkysidd , yes i played around with the glutSwapBuffers. And now i can draw text 1 and 3 same time and 2 alone continously."}, {"owner": {"reputation": 3, "user_id": 5369850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2e903b365d6c2e337ff21fd518d636?s=128&d=identicon&r=PG&f=1", "display_name": "uNkeLo", "link": "https://stackoverflow.com/users/5369850/unkelo"}, "edited": false, "score": 0, "creation_date": 1443121674, "post_id": 32750982, "comment_id": 53377216, "body": "Eventually is a frame rendering bette i want ry out a demonstration opengl/with music. and the target is animations effects for example fade in text .Other ways are welcome ."}, {"owner": {"reputation": 1725, "user_id": 1351828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351d561f75641e458ce8f6dfd5b5227?s=128&d=identicon&r=PG", "display_name": "Adrian Krupa", "link": "https://stackoverflow.com/users/1351828/adrian-krupa"}, "reply_to_user": {"reputation": 3, "user_id": 5369850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2e903b365d6c2e337ff21fd518d636?s=128&d=identicon&r=PG&f=1", "display_name": "uNkeLo", "link": "https://stackoverflow.com/users/5369850/unkelo"}, "edited": false, "score": 0, "creation_date": 1443121839, "post_id": 32750982, "comment_id": 53377314, "body": "@uNkeLo If the answer helped you, accept it. If you have another question not related to this one ask another question and show us what have you tried."}], "tags": [], "owner": {"reputation": 1725, "user_id": 1351828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a351d561f75641e458ce8f6dfd5b5227?s=128&d=identicon&r=PG", "display_name": "Adrian Krupa", "link": "https://stackoverflow.com/users/1351828/adrian-krupa"}, "is_accepted": true, "score": 1, "last_activity_date": 1443050908, "last_edit_date": 1443050908, "creation_date": 1443050114, "answer_id": 32750982, "question_id": 32750913, "link": "https://stackoverflow.com/questions/32750913/c-update-opengl-glut-window/32750982#32750982", "title": "C++ update OpenGL/Glut window", "body": "<p>You should render in renderScene callback. It will be called automatically in you screen refresh rate. If you want some delay you need to implement it inside this callback (functions called from this callback). </p>\n\n<p>So basically you need to re-render everything every 1/60 second.</p>\n\n<p>If you want to implement easy delay you can do something like this:</p>\n\n<pre><code>void renderScene() {\n    time += deltaTime;\n    RenderText1();\n    if (time &gt; delayTime) \n        RenderText2();\n    glutSwapBuffers();\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5369850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2e903b365d6c2e337ff21fd518d636?s=128&d=identicon&r=PG&f=1", "display_name": "uNkeLo", "link": "https://stackoverflow.com/users/5369850/unkelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 32750982, "answer_count": 1, "score": 0, "last_activity_date": 1443059470, "creation_date": 1443049778, "last_edit_date": 1443053763, "question_id": 32750913, "link": "https://stackoverflow.com/questions/32750913/c-update-opengl-glut-window", "title": "C++ update OpenGL/Glut window", "body": "<p>I've tried some OpenGL C++ training.\nBut I have a logic problem, how can I update my OpenGL Windows window.\nIt should draw text one, then delay 1-2sec, then draw text 2, but now it draws same time. Can anyone help or give a hint.</p>\n\n<pre><code>void text () {  \n    wait(1);\n    Sleep(1000);\n    std::string text_one;                                                                    \n    text_one = \"Text 1\";                                                           \n    glColor3f(1,01, 0);                                                                \n    drawText(text_one.data(), text_one.size(), 050, 150);\n\n    glutPostRedisplay();\n\n    wait (1)\n    std::string text_two;                                                                    \n    text_two = \"Text 2\";                                                           \n    glColor3f(1,0, 0);                                                                \n    drawText(text_two.data(), text_two.size(), 250, 150);\n}\n</code></pre>\n\n<p>and here the main</p>\n\n<pre><code>int main(int argc, char **argv) {\n\n    // init GLUT and create Window\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);\n    glutInitWindowPosition(100,100);\n    glutInitWindowSize(640,640);\n    glutCreateWindow(\"Test 001\");\n\n    // register callbacks\n\n    glutDisplayFunc(renderScene);\n    glutIdleFunc(text);\n\n    // enter GLUT event processing cycle\n    glutMainLoop();\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "types", "header"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1443049860, "post_id": 32750842, "comment_id": 53342420, "body": "<code>error: &#39;istream&#39; does not name a type</code> try using <code>std::istream</code> instead of <code>istream</code>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1443049931, "post_id": 32750842, "comment_id": 53342436, "body": "@drescherjm: You&#39;re barking up the wrong tree there.  Think <code>include</code>"}, {"owner": {"reputation": 21, "user_id": 4272254, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9076543383ada160b1df5d68daa43fe6?s=128&d=identicon&r=PG&f=1", "display_name": "minusila", "link": "https://stackoverflow.com/users/4272254/minusila"}, "edited": false, "score": 0, "creation_date": 1443050583, "post_id": 32750842, "comment_id": 53342637, "body": "Include what? iostream? I have it in my main, I tried to move it to .h and that still didn&#39;t solve it..."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4272254, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9076543383ada160b1df5d68daa43fe6?s=128&d=identicon&r=PG&f=1", "display_name": "minusila", "link": "https://stackoverflow.com/users/4272254/minusila"}, "edited": false, "score": 0, "creation_date": 1443050904, "post_id": 32750904, "comment_id": 53342753, "body": "So would changing it to Rational do it? I want it to take an integer n and initialize the object to n / 1.."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1443049667, "creation_date": 1443049667, "answer_id": 32750904, "question_id": 32750842, "link": "https://stackoverflow.com/questions/32750842/header-file-for-rational-class-no-type-error/32750904#32750904", "title": "header file for rational class : no type error", "body": "<p>Constructors have the same name as the class and have no return type.  </p>\n\n<p>Your function <code>Rations</code> is spelled differently and either needs a return type of <code>void</code> (not returning a value) or it needs to return a value.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4272254, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9076543383ada160b1df5d68daa43fe6?s=128&d=identicon&r=PG&f=1", "display_name": "minusila", "link": "https://stackoverflow.com/users/4272254/minusila"}, "edited": false, "score": 0, "creation_date": 1443052125, "post_id": 32751027, "comment_id": 53343057, "body": "After making the chages, I am now getting these errors for my implementation file: error: &#39;istream&#39; in &#39;class Rational&#39; does not name a type| AND error: &#39;ostream&#39; in &#39;class Rational&#39; does not name a type|,"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 21, "user_id": 4272254, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9076543383ada160b1df5d68daa43fe6?s=128&d=identicon&r=PG&f=1", "display_name": "minusila", "link": "https://stackoverflow.com/users/4272254/minusila"}, "edited": false, "score": 0, "creation_date": 1443052858, "post_id": 32751027, "comment_id": 53343249, "body": "@minusila: That&#39;s strange; could you edit your question to show the new header file? You can omit just about everything inside the class definition except the <code>friend</code> lines."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 21, "user_id": 4272254, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9076543383ada160b1df5d68daa43fe6?s=128&d=identicon&r=PG&f=1", "display_name": "minusila", "link": "https://stackoverflow.com/users/4272254/minusila"}, "edited": false, "score": 0, "creation_date": 1443058021, "post_id": 32751027, "comment_id": 53344377, "body": "@minusila: That compiles for me without error (once I write a few function definitions). This will probably turn out to be something small. I suggest you simplify the code as much as you can; remove all of the members but keep one of the <code>friend</code> lines, then include that header in a minimal main file (<code>HelloWorld.cc</code>). Change <code>operator&lt;&lt;</code> to <code>foo</code>, and simplify the signature. When you get down to the simplest code that produces the error, the bug may be obvious."}], "tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": true, "score": 0, "last_activity_date": 1443050456, "creation_date": 1443050456, "answer_id": 32751027, "question_id": 32750842, "link": "https://stackoverflow.com/questions/32750842/header-file-for-rational-class-no-type-error/32751027#32751027", "title": "header file for rational class : no type error", "body": "<p>You seem to intend that <code>Rations(int)</code> should be a constructor for you class, but the name of the constructor must be the same as the name of the class:</p>\n\n<pre><code>Rational::Rational(int n)\n</code></pre>\n\n<p>If it was not a typo then I have no idea why you changed <code>Rational</code> to <code>Rations</code>.</p>\n\n<p>As for <code>istream</code> and <code>ostream</code>, your class refers to them, but you haven't declared them-- the compiler has no idea what you're talking about. You must either include the proper headers in your header file (<em>above</em> the class definition):</p>\n\n<pre><code>#include &lt;istream&gt;\nusing std::istream;\nusing std::ostream;\n</code></pre>\n\n<p>or, if you're going to be really strict about it, use forward declaration above the class definition:</p>\n\n<pre><code>class istream;\nclass ostream;\n</code></pre>\n\n<p>and then put the <code>#include</code> directives in your source code, above the function definitions.</p>\n"}], "owner": {"reputation": 21, "user_id": 4272254, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9076543383ada160b1df5d68daa43fe6?s=128&d=identicon&r=PG&f=1", "display_name": "minusila", "link": "https://stackoverflow.com/users/4272254/minusila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 32751027, "answer_count": 2, "score": 0, "last_activity_date": 1443055379, "creation_date": 1443049279, "last_edit_date": 1443055379, "question_id": 32750842, "link": "https://stackoverflow.com/questions/32750842/header-file-for-rational-class-no-type-error", "title": "header file for rational class : no type error", "body": "<p>I have built a rational class, here is my .h file: </p>\n\n<pre><code>    #ifndef RATIONAL_H\n#define RATIONAL_H\n#include &lt;iostream&gt;\n\nusing std::istream;\nusing std::ostream;\n\nclass Rational\n{\n    public:\n        Rational();\n        Rational(int n);\n        Rational(int n, int d); \n        Rational(const Rational&amp; other); \n\n        ~Rational();\n\n        Rational operator+(const Rational&amp; other);\n        Rational operator-(const Rational&amp; other);\n        Rational operator*(const Rational&amp; other);\n        Rational operator/(const Rational&amp; other);\n\n        Rational operator+(int n);\n        Rational operator-(int n);\n        Rational operator*(int n);\n        Rational operator/(int n);\n\n        Rational&amp; operator=(const Rational&amp; other);\n\n        bool operator==(const Rational&amp; other);\n        bool operator!=(const Rational&amp; other);\n        bool operator&gt;=(const Rational&amp; other);\n        bool operator&lt;=(const Rational&amp; other);\n        bool operator&lt;(const Rational&amp; other);\n        bool operator&gt;(const Rational&amp; other);\n\n        bool operator==(int n);\n        bool operator!=(int n);\n        bool operator&gt;=(int n);\n        bool operator&lt;=(int n);\n        bool operator&lt;(int n);\n        bool operator&gt;(int n);\n\n\n        friend istream&amp; operator&gt;&gt;(istream&amp; is, Rational &amp;r);\n        friend ostream&amp; operator&lt;&lt;(ostream&amp; is, Rational &amp;r);\n\n    private:\n        int\n            num,\n            den;\n};\n\n#endif // RATIONAL_H\n</code></pre>\n\n<p>I am getting multiple errors, my main being:</p>\n\n<blockquote>\n  <p>include\\Rational.h|8|error: ISO C++ forbids declaration of 'Rations'\n  with no type [-fpermissive]|</p>\n  \n  <p>include\\Rational.h|41|error: 'istream' does not name a type|</p>\n  \n  <p>include\\Rational.h|42|error: 'ostream' does not name a type|</p>\n</blockquote>\n\n<p>and the rest in my main file (which are all cause because I tried to use >> and &lt;&lt;). I have searched for hours now, found similar problems, tried multiple solutions I don't want to shoot in the dark, I want to know what the problem is and why. For the record here is what I have for Rations in my implementation file: </p>\n\n<pre><code>Rational::Rations(int n)\n{\n    num = n;\n    den = 1;\n}\n</code></pre>\n\n<p>Let me know if my  complete cpp implementation file or main is needed to solve this.. Also, I am using codeblocks, I have added include into my compiler in build options.</p>\n"}, {"tags": ["c++", "binaryfiles", "dynamic-arrays"], "comments": [{"owner": {"reputation": 6098, "user_id": 898142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d20bd94e90a02a2e4bc29c361a6c3752?s=128&d=identicon&r=PG", "display_name": "alexm", "link": "https://stackoverflow.com/users/898142/alexm"}, "edited": false, "score": 0, "creation_date": 1443056018, "post_id": 32750825, "comment_id": 53343979, "body": "consider writing the size of the array first. It would greatly simplify the read code."}, {"owner": {"reputation": 215, "user_id": 1632705, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d614a5f8330c9efa110f3796fbac05?s=128&d=identicon&r=PG", "display_name": "Justin Tennant", "link": "https://stackoverflow.com/users/1632705/justin-tennant"}, "reply_to_user": {"reputation": 6098, "user_id": 898142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d20bd94e90a02a2e4bc29c361a6c3752?s=128&d=identicon&r=PG", "display_name": "alexm", "link": "https://stackoverflow.com/users/898142/alexm"}, "edited": false, "score": 0, "creation_date": 1443113621, "post_id": 32750825, "comment_id": 53372918, "body": "To add a note here, I cannot use vector. I have a separate class that creates dynamic arrays for me with a given size passed to it, and that class is working properly. I can also determine the size based on the information I send to these arrays."}], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 1632705, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d614a5f8330c9efa110f3796fbac05?s=128&d=identicon&r=PG", "display_name": "Justin Tennant", "link": "https://stackoverflow.com/users/1632705/justin-tennant"}, "edited": false, "score": 0, "creation_date": 1443113465, "post_id": 32751825, "comment_id": 53372814, "body": "I&#39;m guessing now that my write is just completely wrong. First off, the &amp;size in the write fails because it says its expecting a char, but overall, when i take in my packedBcd Array (which I know has the correct values in it) the values are not being written into the .bin file in any way that I understand, if at all."}], "tags": [], "owner": {"reputation": 6098, "user_id": 898142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d20bd94e90a02a2e4bc29c361a6c3752?s=128&d=identicon&r=PG", "display_name": "alexm", "link": "https://stackoverflow.com/users/898142/alexm"}, "is_accepted": true, "score": -1, "last_activity_date": 1443057172, "last_edit_date": 1443057172, "creation_date": 1443056866, "answer_id": 32751825, "question_id": 32750825, "link": "https://stackoverflow.com/questions/32750825/reading-binary-files-into-an-array-of-ints-c/32751825#32751825", "title": "Reading Binary Files into an array of ints c++", "body": "<p>To simplify read operation consider storing <code>size</code> (i.e the number of elements in the array) before the data:</p>\n\n<pre><code>void bcdEncoder::writeBinaryFile(unsigned int packedBcdArray[], int size)\n{\n   fstream binaryIo;\n   binaryIo.open(\"PridePrejudice.bin\", ios::out| ios::binary | ios::trunc);\n   binaryIo.seekp(0);\n   binaryIo.write(&amp;size, sizeof(size));\n   binaryIo.write((char*)packedBcdArray, size * sizeof(packedBcdArray[0]));\n   binaryIo.close();\n}\n</code></pre>\n\n<p>The read would look something like:</p>\n\n<pre><code>void bcdEncoder::readBinaryFile(string fileName)\n{\n    std::vector&lt;unsigned int&gt; myData;\n    int size;\n\n    fstream binaryIo;\n    binaryIo.open(fileName, ios::in | ios::binary | ios::trunc);\n\n    binaryIo.read(&amp;size, sizeof(size)); // read the number of elements \n\n    myData.resize(size); // allocate memory for an array \n    binaryIo.read(myData.data(), size * sizeof(myData.value_type));\n    binaryIo.close();\n\n   // todo: do something with myData\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 215, "user_id": 1632705, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d614a5f8330c9efa110f3796fbac05?s=128&d=identicon&r=PG", "display_name": "Justin Tennant", "link": "https://stackoverflow.com/users/1632705/justin-tennant"}, "edited": false, "score": 0, "creation_date": 1443113787, "post_id": 32751987, "comment_id": 53373021, "body": "I can&#39;t figure out a way to implement a similar read method without vectors, which I am not able to use in this project."}, {"owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "reply_to_user": {"reputation": 215, "user_id": 1632705, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d614a5f8330c9efa110f3796fbac05?s=128&d=identicon&r=PG", "display_name": "Justin Tennant", "link": "https://stackoverflow.com/users/1632705/justin-tennant"}, "edited": false, "score": 0, "creation_date": 1443121100, "post_id": 32751987, "comment_id": 53376892, "body": "Are you completely and utterly banned from using a <code>vector</code>, or you&#39;re just required to return an <code>int[]</code>?"}, {"owner": {"reputation": 215, "user_id": 1632705, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d614a5f8330c9efa110f3796fbac05?s=128&d=identicon&r=PG", "display_name": "Justin Tennant", "link": "https://stackoverflow.com/users/1632705/justin-tennant"}, "edited": false, "score": 0, "creation_date": 1443146189, "post_id": 32751987, "comment_id": 53386121, "body": "part of the project goal was to apply previously made custom dynamic array class file to a new project."}], "tags": [], "owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "is_accepted": false, "score": 4, "last_activity_date": 1443058647, "last_edit_date": 1443058647, "creation_date": 1443058266, "answer_id": 32751987, "question_id": 32750825, "link": "https://stackoverflow.com/questions/32750825/reading-binary-files-into-an-array-of-ints-c/32751987#32751987", "title": "Reading Binary Files into an array of ints c++", "body": "<p>If you're using C++, use the nice std library.</p>\n\n<pre><code>vector&lt;unsigned int&gt; bcdEncoder::readBinaryFile(string fileName)\n{\n    vector&lt;unsigned int&gt; ret; //std::list may be preferable for large files\n    ifstream in{ fileName };\n    unsigned int current;\n    while (in.good()) {\n        in &gt;&gt; current;\n        ret.emplace_back(current);\n    }\n    return ret;\n }\n</code></pre>\n\n<p>Writing is just as simple (for this we'll accept an <code>int[]</code> but an std library would be preferable):</p>\n\n<pre><code>void bcdEncoder::writeBinaryFile(string fileName, unsigned int arr[], size_t len)\n{\n    ofstream f { fileName };\n    for (size_t i = 0; i &lt; len; i++)\n        f &lt;&lt; arr[i];\n}\n</code></pre>\n\n<p>Here's the same thing but with an <code>std::vector</code></p>\n\n<pre><code>void bcdEncoder::writeBinaryFile(string fileName, vector&lt;unsigned int&gt; arr)\n{\n    ofstream f { fileName };\n    for (auto&amp;&amp; i : arr)\n        f &lt;&lt; i;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 215, "user_id": 1632705, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d614a5f8330c9efa110f3796fbac05?s=128&d=identicon&r=PG", "display_name": "Justin Tennant", "link": "https://stackoverflow.com/users/1632705/justin-tennant"}, "is_accepted": false, "score": 0, "last_activity_date": 1443201797, "creation_date": 1443201797, "answer_id": 32787527, "question_id": 32750825, "link": "https://stackoverflow.com/questions/32750825/reading-binary-files-into-an-array-of-ints-c/32787527#32787527", "title": "Reading Binary Files into an array of ints c++", "body": "<p>Thanks for the tips guys, looks like I worked it out!! A major part of my problem was that half the arguments and syntax I added to the methods were not required, and actually messed things up. Here are my working methods.</p>\n\n<pre><code>void bcdEncoder::writeBinaryFile(unsigned int packedBcdArray[], int size, string fileName)\n{\n    ofstream binaryIo;\n    binaryIo.open(fileName.substr(0, fileName.length() - 4) + \".bin\", ios::binary);\n    if (binaryIo.is_open()) {\n        binaryIo.write((char*)packedBcdArray, size * sizeof(packedBcdArray[0]));\n        binaryIo.close();\n\n        // Send binary file to reader\n        readBinaryFile(fileName.substr(0, fileName.length() - 4) + \".bin\", size);\n    }\n    else\n        cout &lt;&lt; \"Error writing bin file...\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>And the read:</p>\n\n<pre><code>void bcdEncoder::readBinaryFile(string fileName, int size)\n{\n    AllocateArray packedData(size);\n    unsigned int *packedArray = packedData.createIntArray();\n\n    ifstream binaryIo;\n    binaryIo.open(fileName, ios::binary);\n    if (binaryIo.is_open()) {\n        binaryIo.read((char*)packedArray, size * sizeof(packedArray[0]));\n        binaryIo.close();\n\n        decodeBCD(packedArray, size * 5, fileName);\n    }\n    else\n        cout &lt;&lt; \"Error reading bin file...\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>With the AllocateArray being my class that creates dynamic arrays without vectors somewhat safely with destructors included.</p>\n"}], "owner": {"reputation": 215, "user_id": 1632705, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2d614a5f8330c9efa110f3796fbac05?s=128&d=identicon&r=PG", "display_name": "Justin Tennant", "link": "https://stackoverflow.com/users/1632705/justin-tennant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12987, "favorite_count": 2, "accepted_answer_id": 32751825, "answer_count": 3, "score": 2, "last_activity_date": 1443201797, "creation_date": 1443049185, "last_edit_date": 1443055900, "question_id": 32750825, "link": "https://stackoverflow.com/questions/32750825/reading-binary-files-into-an-array-of-ints-c", "title": "Reading Binary Files into an array of ints c++", "body": "<p>I have a method which writes a binary file from an <code>int</code> array. (it could be wrong too)</p>\n\n<pre><code>void bcdEncoder::writeBinaryFile(unsigned int packedBcdArray[], int size)\n{\n    fstream binaryIo;\n    binaryIo.open(\"PridePrejudice.bin\", ios::out| ios::binary | ios::trunc);\n    binaryIo.seekp(0);\n    binaryIo.write((char*)packedBcdArray, size * sizeof(packedBcdArray[0]));\n    binaryIo.seekp(0);\n\n    binaryIo.close();\n}\n</code></pre>\n\n<p>I need to now read that binary file back. And preferably have it read it back into another array of <code>unsigned int</code>s without any information loss.</p>\n\n<p>I have something like the following code, but I have no idea on how reading binary files really works, and no idea how to read it into an array of <code>int</code>s.</p>\n\n<pre><code>void bcdEncoder::readBinaryFile(string fileName)\n{\n    // myArray = my dnynamic int array\n\n    fstream binaryIo;\n    binaryIo.open(fileName, ios::in | ios::binary | ios::trunc);\n\n    binaryIo.seekp(0);\n\n    binaryIo.seekg(0);\n    binaryIo.read((int*)myArray, size * sizeof(myFile));\n\n    binaryIo.close();\n}\n</code></pre>\n\n<h2>Question:</h2>\n\n<p>How to complete the implementation of the function that reads binary files?</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array", "smart-pointers"], "answers": [{"comments": [{"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1443053502, "post_id": 32751112, "comment_id": 53343400, "body": "While I&#39;m not arguing against your point, it&#39;s true that shared_ptr from TR1 was not so equipped, the current C++11/C++14 std::shared_ptr has a provision for it (a customer deleter), it just takes an extra bit of effort."}, {"owner": {"reputation": 46, "user_id": 5335028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvwA3.jpg?s=128&g=1", "display_name": "Daniel Chabrowski", "link": "https://stackoverflow.com/users/5335028/daniel-chabrowski"}, "reply_to_user": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1443081208, "post_id": 32751112, "comment_id": 53351739, "body": "@JVene You can find it in the link I provided."}], "tags": [], "owner": {"reputation": 46, "user_id": 5335028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvwA3.jpg?s=128&g=1", "display_name": "Daniel Chabrowski", "link": "https://stackoverflow.com/users/5335028/daniel-chabrowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1443051124, "last_edit_date": 1495540702, "creation_date": 1443051124, "answer_id": 32751112, "question_id": 32750820, "link": "https://stackoverflow.com/questions/32750820/accessing-methods-of-objects-held-in-multidimensional-vectors-of-unique-ptrs/32751112#32751112", "title": "Accessing methods of objects held in multidimensional vectors of unique_ptr&#39;s", "body": "<p>First of all, <code>shared_ptr</code> is not designed to work with arrays. When there is no more references, it calls <code>delete</code> instead of <code>delete[]</code> which results in undefined behaviour if managed object is an array. You can read about it <a href=\"https://stackoverflow.com/a/13062069/5335028\">here</a>.</p>\n\n<p>As for accessing <code>shared_ptr</code> object, you can use <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator*\" rel=\"nofollow noreferrer\">operator*</a> to dereference it.</p>\n\n<p>Also, if you know vector's final size, you may want to <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\">reserve</a> some space to avoid reallocation.</p>\n"}, {"tags": [], "owner": {"reputation": 1230, "user_id": 3958860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iLugv.jpg?s=128&g=1", "display_name": "Fibbles", "link": "https://stackoverflow.com/users/3958860/fibbles"}, "is_accepted": true, "score": 1, "last_activity_date": 1443052828, "last_edit_date": 1443052828, "creation_date": 1443052335, "answer_id": 32751269, "question_id": 32750820, "link": "https://stackoverflow.com/questions/32750820/accessing-methods-of-objects-held-in-multidimensional-vectors-of-unique-ptrs/32751269#32751269", "title": "Accessing methods of objects held in multidimensional vectors of unique_ptr&#39;s", "body": "<p>You can use the -> operator to access members of the object managed by the shared_ptr. It's the same syntax you use with raw pointers.</p>\n\n<p>However, you're going to run into problems with delete as mentioned in Dantez's answer. </p>\n\n<p>Also, it looks like you're building some sort of board of tiles, perhaps for a game? Have you considered replacing the multidimensional array with with a 1D vector and some accessor functions?</p>\n\n<pre><code>// board_width and height should be integers\nstd::vector&lt;Tile&gt; board;\nboard.reserve(board_width * board_height);\nfor (unsigned y_axis = 0; y_axis &lt; board_height; ++y_axis)\n{\n    for (unsigned x_axis = 0; x_axis &lt; board_width; ++x_axis)\n    {\n        board.push_back(Tile());\n    }\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>vec2 index_to_coords(unsigned index)\n{\n    return vec2(index % board_width, index / board_width);\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>unsigned coords_to_index(const vec2&amp; coords)\n{\n    return (static_cast&lt;unsigned&gt;(coords.y) * board_width) + static_cast&lt;unsigned&gt;(coords.x);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "is_accepted": false, "score": 0, "last_activity_date": 1443056455, "last_edit_date": 1443056455, "creation_date": 1443054501, "answer_id": 32751528, "question_id": 32750820, "link": "https://stackoverflow.com/questions/32750820/accessing-methods-of-objects-held-in-multidimensional-vectors-of-unique-ptrs/32751528#32751528", "title": "Accessing methods of objects held in multidimensional vectors of unique_ptr&#39;s", "body": "<p>I agree with Fibbles, but have an alternate idea to provide. Fibble's approach is actually quite common even in C, because multidimensional structures (matrices) are just much easier that way. </p>\n\n<p>However, if you do insist on the two dimensional concept, you can nest vectors. Consider:</p>\n\n<pre><code>typedef std::vector&lt; tile &gt;     TileRow;\ntypedef std::vector&lt; TileRow &gt;  Tiles;\n</code></pre>\n\n<p>At first, this may be a bit confusing, so to be clear that creates:</p>\n\n<pre><code>std::vector&lt; std::vector&lt; tile &gt; &gt; t;\n</code></pre>\n\n<p>However, with the typedef, thats</p>\n\n<pre><code>Tiles t;\n</code></pre>\n\n<p>Now, that's empty. To use it you'd need to push in some rows, and for each row push in some columns. You might not like that, so...you can use the assign function to set some rows. If, for example, you needed a matrix of 10 rows by 10 columns, you might</p>\n\n<pre><code>t.assign( 10, TileRow( 10, tile() ) ); \n</code></pre>\n\n<p>This assume tile has a default constructor, pushing 10 rows of TileRow, each with 10 columns of default constructed tiles.</p>\n\n<p>Now, <code>t[ 1 ]</code> returns a reference to the row 1. As such, <code>t[ 1 ][ 1 ]</code> is a reference to the tile at location 1,1, much like an array.</p>\n\n<p>Yet, now you have no allocation/deallocation issues.</p>\n\n<p>Something similar can be done with std::array, even better.</p>\n\n<pre><code>typedef std::array&lt; tile, 10 &gt;     TileRow;\ntypedef std::array&lt; TileRow, 10 &gt;  Tiles;\n\nTiles t;\n</code></pre>\n\n<p>At which point, t is ready with default initialized tiles.</p>\n"}], "owner": {"reputation": 75, "user_id": 5233567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/790fca75ef7b9d4f5d3243231fb31f2f?s=128&d=identicon&r=PG&f=1", "display_name": "destrovel", "link": "https://stackoverflow.com/users/5233567/destrovel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 32751269, "answer_count": 3, "score": 0, "last_activity_date": 1443056455, "creation_date": 1443049153, "question_id": 32750820, "link": "https://stackoverflow.com/questions/32750820/accessing-methods-of-objects-held-in-multidimensional-vectors-of-unique-ptrs", "title": "Accessing methods of objects held in multidimensional vectors of unique_ptr&#39;s", "body": "<p>I have a 2 dimensional structure of objects initialized as thus:</p>\n\n<pre><code>std::vector&lt;std::shared_ptr&lt;tile&gt; &gt; appearance;\nfor (int x = 0; x &lt; building_data.x_width; x++)\n    {\n            appearance.push_back\n            (std::shared_ptr&lt;tile&gt;(new tile[building_data.y_length]));\n    }\n</code></pre>\n\n<p>now, as far as I can figure out, the only way to access a member function of a tile in this is to use</p>\n\n<pre><code>appearance.at(x).get()[y].member_function()\n</code></pre>\n\n<p>which is confusing and cumbersome, and I feel like I'm missing something.</p>\n\n<p>Previously, I had used <code>tile**</code> for the same structure, and the syntax of\n<code>tile[x][y]</code> was nice but the raw pointers were a headache.</p>\n\n<p>So, is there a better way access functions of an object held in an array, where the first element in the array is pointed to by a smart pointer held in a vector? Wordy but its the best I have.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 2, "creation_date": 1443048616, "post_id": 32750674, "comment_id": 53342055, "body": "@Buddy What is the connection between the linked question and this one?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 2, "creation_date": 1443048624, "post_id": 32750674, "comment_id": 53342057, "body": "@Buddy: As far as I can see, it doesn&#39;t look like that link discusses the overhead of call vs inline."}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 1, "creation_date": 1443048760, "post_id": 32750674, "comment_id": 53342102, "body": "From the part you cite, I can only assume that the paper&#39;s author had no idea of what he was talking about. An overloaded operator is pretty much a function with a different syntax, and like every function can be defined inline."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1443052508, "post_id": 32750674, "comment_id": 53343154, "body": "This question pertains to specific compilers . A bad compiler might do what the author says."}], "answers": [{"comments": [{"owner": {"reputation": 2597, "user_id": 1715055, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b29b29364de300edef57e8579ec8780?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1715055/john"}, "edited": false, "score": 0, "creation_date": 1443050993, "post_id": 32750729, "comment_id": 53342779, "body": "Makes sense. Can you explain why a compiler wouldn&#39;t be able to inline the overloaded operator function?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 2597, "user_id": 1715055, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b29b29364de300edef57e8579ec8780?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1715055/john"}, "edited": false, "score": 0, "creation_date": 1443051945, "post_id": 32750729, "comment_id": 53343010, "body": "The TYPICAL cases for &quot;not inlining&quot; is either that the source is in a different source file (different translation unit), or that the function is called many times and large enough that the compiler doesn&#39;t think it&#39;s &quot;makes it better&quot; to inline the function."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 6, "last_activity_date": 1443051878, "last_edit_date": 1443051878, "creation_date": 1443048525, "answer_id": 32750729, "question_id": 32750674, "link": "https://stackoverflow.com/questions/32750674/operator-overloading-performance/32750729#32750729", "title": "Operator overloading performance", "body": "<p>There will be a large difference between:</p>\n\n<pre><code>Complex a(1.0, 2.0), b(1.1, 2.2);\nComplex c;\n\nc = a + b;\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>Complex a(1.0, 2.0), b(1.1, 2.2);\nComplex c;\n\nc.re = a.re + b.re;\nc.im = a.im + b.im;\n</code></pre>\n\n<p>if the <code>Complex operator+(Complex lhs, Complex rhs);</code> function is not possible to inline. However, if the compile can inline the code, there would be no difference at all. </p>\n\n<p>So it's very much dependent on the relative overhead of the call to the operator and the complexity of the actual call. Doing <code>std::string operator+(const std::string&amp; lhs, const std::string&amp; rhs);</code> with a pair of strings that is several kilobytes will have very little overhead in the call to the <code>operator+</code> , compared to the adding of <code>double</code> or <code>float</code> numbers in the complex math case above. For short strings, the overhead is much larger, in relative terms.</p>\n\n<p>Here is an example:</p>\n\n<p>oper.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include \"Complex.h\"\n#include \"Complex2.h\"\n\nconst int SIZE = 80000;\n\ntemplate&lt;typename CPLX&gt; \nvoid Fill(CPLX* arr)\n{\n    for(int i = 0; i &lt; SIZE; i++)\n    {\n        arr[i] = CPLX(rand(), rand());\n    }\n}\n\ntemplate&lt;typename CPLX&gt; \nvoid DummyFunc(CPLX* arr)\n{\n    double sum;\n    for(int i = 0; i &lt; SIZE; i++)\n    {\n        sum = arr[i].re + arr[i].im;\n    }\n    std::cout &lt;&lt; \"Sum:\" &lt;&lt; sum &lt;&lt; std::endl;\n}\n\nstatic __inline__ unsigned long long rdtsc(void)\n{\n    unsigned hi, lo;\n    __asm__ __volatile__ (\"rdtsc\" : \"=a\"(lo), \"=d\"(hi));\n    return ( (unsigned long long)lo)|( ((unsigned long long)hi)&lt;&lt;32 );\n}\n\nvoid RunFunc1()\n{\n    Complex arr1[SIZE];\n    Complex arr2[SIZE];\n    Complex arr3[SIZE];\n\n    Fill(arr1);\n    Fill(arr2);\n\n    unsigned long long t = rdtsc();\n    for(int i = 0; i &lt; SIZE; i++)\n    {\n        arr3[i] = arr2[i] + arr1[i];\n    }\n    t = rdtsc() - t;\n    std::cout &lt;&lt; \"Time=\" &lt;&lt; t &lt;&lt; std::endl;\n    DummyFunc(arr3);\n}\n\nvoid RunFunc2()\n{\n    Complex2 arr1[SIZE];\n    Complex2 arr2[SIZE];\n    Complex2 arr3[SIZE];\n\n    Fill(arr1);\n    Fill(arr2);\n\n    unsigned long long t = rdtsc();\n    for(int i = 0; i &lt; SIZE; i++)\n    {\n        arr3[i] = arr2[i] + arr1[i];\n    }\n    t = rdtsc() - t;\n    std::cout &lt;&lt; \"Time=\" &lt;&lt; t &lt;&lt; std::endl;\n    DummyFunc(arr3);\n}\n\nvoid RunFunc3()\n{\n    Complex2 arr1[SIZE];\n    Complex2 arr2[SIZE];\n    Complex2 arr3[SIZE];\n\n    Fill(arr1);\n    Fill(arr2);\n\n    unsigned long long t = rdtsc();\n    for(int i = 0; i &lt; SIZE; i++)\n    {\n        arr3[i].im = arr2[i].im + arr1[i].im;\n        arr3[i].re = arr2[i].re + arr1[i].re;\n    }\n    t = rdtsc() - t;\n    std::cout &lt;&lt; \"Time=\" &lt;&lt; t &lt;&lt; std::endl;\n    DummyFunc(arr3);\n}\n\n\nint main(int argc, char **argv)\n{\n    RunFunc1();\n    RunFunc2();\n    RunFunc3();\n}\n</code></pre>\n\n<p>Complex.h:</p>\n\n<pre><code>class Complex\n{\npublic:\n    Complex(double r, double i) : re(r), im(i) {}\n    Complex() {};\n    double re;\n    double im;\n};\n\nComplex operator+(Complex lhs, Complex rhs);\n</code></pre>\n\n<p>Complex2.h:</p>\n\n<pre><code>class Complex2\n{\npublic:\n    Complex2(double r, double i) : re(r), im(i) {}\n    Complex2() {};\n    double re;\n    double im;\n};\n\n\nComplex2 operator+(Complex2 lhs, Complex2 rhs) \n{\n    return Complex2(lhs.re + rhs.re, lhs.im + rhs.im);\n}\n</code></pre>\n\n<p>Complex.cpp:</p>\n\n<pre><code>#include \"Complex.h\"\n\nComplex operator+(Complex lhs, Complex rhs) \n{\n    return Complex(lhs.re + rhs.re, lhs.im + rhs.im);\n}\n</code></pre>\n\n<p>Build with:</p>\n\n<pre><code>clang++ -O2 -c Complex.cpp\nclang++ -O2 oper.cpp Complex.o -std=c++11\n</code></pre>\n\n<p>Results look something like this:</p>\n\n<pre><code>Time=3265033\nSum:7.09575e+09\nTime=1728941\nSum:6.72663e+09\nTime=1705123\nSum:2.92692e+09\n</code></pre>\n\n<p>As you can see, the first time is about 2x that of the two other solutions. This is because the compiler can not inline the <code>Complex.cpp</code> code when it is in a separate translation unit (compiled separately)</p>\n"}], "owner": {"reputation": 2597, "user_id": 1715055, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b29b29364de300edef57e8579ec8780?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1715055/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1608, "favorite_count": 2, "closed_date": 1443057549, "accepted_answer_id": 32750729, "answer_count": 1, "score": 2, "last_activity_date": 1443051878, "creation_date": 1443048138, "question_id": 32750674, "link": "https://stackoverflow.com/questions/32750674/operator-overloading-performance", "closed_reason": "Duplicate", "title": "Operator overloading performance", "body": "<p>I was reading a paper on automatic differentiation and the authors mention: \"Likewise, using operator overloading may introduce method dispatches with attendant costs, which, compared to raw numerical computation of the original function, can easily amount to a slow down of an order of magnitude.\" </p>\n\n<p>Basically, can you explain the first part of this quote regarding operator overloading and whether it applies to C++? I don't really have an understanding of the language's internals. </p>\n\n<p>The surrounding text doesn't add any further explanation. </p>\n"}, {"tags": ["c++", "windows", "visual-c++"], "comments": [{"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "edited": false, "score": 0, "creation_date": 1443048335, "post_id": 32750639, "comment_id": 53341969, "body": "Can you include the code where you&#39;re starting the second application?"}, {"owner": {"reputation": 1784, "user_id": 2754507, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4k0D3.jpg?s=128&g=1", "display_name": "Mario Trucco", "link": "https://stackoverflow.com/users/2754507/mario-trucco"}, "edited": false, "score": 0, "creation_date": 1443048513, "post_id": 32750639, "comment_id": 53342023, "body": "Welcome to SO. You shouldn&#39;t post duplicates of other questions, just because the original ones don&#39;t have an answer which is suitable for you. If someone finds an answer, they should answer there, not here. On the other hand, if this question is not a duplicate, please edit it , link the similare questions and explain how yours is different"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 3130514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50ac9f841611465b9c9724ad8b66cb8?s=128&d=identicon&r=PG&f=1", "display_name": "ATN_LR_boom", "link": "https://stackoverflow.com/users/3130514/atn-lr-boom"}, "is_accepted": true, "score": 1, "last_activity_date": 1443048339, "creation_date": 1443048339, "answer_id": 32750703, "question_id": 32750639, "link": "https://stackoverflow.com/questions/32750639/how-to-pass-a-path-as-a-parameter-into-a-second-application-in-vc/32750703#32750703", "title": "How to pass a path as a parameter into a second application in vc++?", "body": "<p>If you use the UNICODE version of PathQuoteSpaces , MAX_PATH has a value of 32,767 which should be more than enough.</p>\n"}], "owner": {"reputation": 107, "user_id": 1919504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2fe05927d4d8a3c617a10f5437b13aa7?s=128&d=identicon&r=PG", "display_name": "W\u0142odzimierz O. Kubera", "link": "https://stackoverflow.com/users/1919504/w%c5%82odzimierz-o-kubera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 32750703, "answer_count": 1, "score": 0, "last_activity_date": 1444031682, "creation_date": 1443047963, "last_edit_date": 1444031682, "question_id": 32750639, "link": "https://stackoverflow.com/questions/32750639/how-to-pass-a-path-as-a-parameter-into-a-second-application-in-vc", "title": "How to pass a path as a parameter into a second application in vc++?", "body": "<p><strong>Hi!</strong></p>\n\n<p>Could someone answer my question, please?</p>\n\n<p>I have an application, which is being developed in the Visual C++.\nThis application calls a second executable.\nIt passes a file path as a parameter.\nHow to do it correctly?\nI mean double quotes, spaces and other special characters or their combinations.\nFor example, file My Doc.doc should be \"My Doc.doc\" (with double quotes).\n<code>PathQuoteSpaces</code> is not a solution for me.\nI need long paths (longer than MAX_PATH) and always well-formed parameter.\nI call a MS's application, and their standard is important.</p>\n\n<p>P. S.\nI know, that there are answers for similar questions, but they do not solve my problem.</p>\n\n<p><em>Thank you very much</em></p>\n\n<p><strong>Continuation:</strong></p>\n\n<p>Thank you for the answers.</p>\n\n<p>I have posted the code.\nIt looks a bit like a pseudo-code,\nbecause of objects and functions.\nI need a well-formed parameter (Script).\nThe drag and drop on Windows produce such literals.</p>\n\n<pre><code>ShellExecute(\n0,\nL\"open\",\n(GetPathQuoted(Monad::File::GetFolder(FOLDERID_System) + L\"\\\\WindowsPowerShell\\\\v1.0\\\\PowerShell.exe\")).c_str(),\n(L\"-ExecutionPolicy Bypass -File \" + GetPathQuoted(Script)).c_str(),\nnullptr,\n0);\n</code></pre>\n\n<p>I am sorry for posting a duplicate question.\nI didn't know, that \" can not be in Windows file paths.</p>\n\n<p>I highly appreciate helpful answers</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 2, "creation_date": 1443047822, "post_id": 32750598, "comment_id": 53341785, "body": "You expect your program that you wrote in probably a couple days to be faster than a 38 year old piece of software?"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1443048019, "post_id": 32750598, "comment_id": 53341854, "body": "@self ja ja ja, if maybe that&#39;s my problem ..... I thought, I could be a problem with my handling of <code>C++</code>"}, {"owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "edited": false, "score": 2, "creation_date": 1443048119, "post_id": 32750598, "comment_id": 53341890, "body": "Regarding the C++ code, there are a few variables declared inside the while loop (like the vector), this is constant memory allocation. If you can move some out of the loop and reuse them then it may speed things up."}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1443048123, "post_id": 32750598, "comment_id": 53341892, "body": "maybe prejudice with scripted and compilate ...."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1443048126, "post_id": 32750598, "comment_id": 53341894, "body": "C++ is not automagically faster. I think you&#39;ve got some performance bottlenecks in your code here, like how you call replace four times, each time scanning the entire string, and a whole lot of other repeated scanning and general flailing. Why not load in a good regular expression library? If you need absolute speed, you should write a state machine that iterates character by character."}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443048972, "post_id": 32750598, "comment_id": 53342174, "body": "@tadman thanks a lot .... &quot;state machine&quot; is out of my background, I do not know how to start ..... I belive, I copy a lot of string (user2333757 response) and it&#39;s expensive ..... jokes aside, thanks for guiding me"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1443049142, "post_id": 32750598, "comment_id": 53342217, "body": "c code usually run faster then c++. and your code is not so efficient. For example: you have 4 replaces, you should try to use 1 loop instead, with <code>cur_pos = find_first_of(&quot;ACGT&quot;, cur_pos);</code> with all the options."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1443050671, "post_id": 32750598, "comment_id": 53342675, "body": "The first thing to do is to move the first <code>istringstream</code> outside of the loop (reset and clear it inside the loop each time). Then, stop using the second instringstream.  It is one of the slowest ways to do int-string conversion. See <a href=\"http://stackoverflow.com/questions/16826422/c-most-efficient-way-to-convert-string-to-int-faster-than-atoi\">here</a> or <a href=\"http://stackoverflow.com/questions/194465/how-to-parse-a-string-to-an-int-in-c\">here</a>. <code>cout</code> is probably slower than <code>printf</code>. Make sure you use <code>-O3</code>. Also, the ACGT replacement seems redundant, you could leave that out and just read ints"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1443050740, "post_id": 32750598, "comment_id": 53342695, "body": "where is the ACGT bit in the awk program?"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1443050904, "post_id": 32750598, "comment_id": 53342752, "body": "@M.M <code>nmatch = split(v[3],vmatch, &#47;[^0-9]&#47;); </code> split with regular expression <code>&#47;[^0-9]&#47;</code>"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1443053699, "post_id": 32750598, "comment_id": 53343445, "body": "@M.M thanks for advices .... in answer my solution improve"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1443063265, "post_id": 32750598, "comment_id": 53345573, "body": "performance questions getting much love ;-) &lt;3 thanks a lot everybody"}, {"owner": {"reputation": 21, "user_id": 408753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef38a88adcf317bdb7b465e8b29d0a27?s=128&d=identicon&r=PG", "display_name": "Denis Cheremisov", "link": "https://stackoverflow.com/users/408753/denis-cheremisov"}, "edited": false, "score": 1, "creation_date": 1500756595, "post_id": 32750598, "comment_id": 77490112, "body": "Too much memory allocations. They are slow. Try to use existing memory buffers, do not allocate at each step of the loop."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443111690, "post_id": 32750700, "comment_id": 53371728, "body": "This is basically a long-form comment and doesn&#39;t actually propose a solution. Helpful, but there are two other answers that are more comprehensive."}], "tags": [], "owner": {"reputation": 1, "user_id": 2333757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/155dcd4c08b448b2721c635ac8efa133?s=128&d=identicon&r=PG", "display_name": "user2333757", "link": "https://stackoverflow.com/users/2333757/user2333757"}, "is_accepted": false, "score": 0, "last_activity_date": 1443048332, "creation_date": 1443048332, "answer_id": 32750700, "question_id": 32750598, "link": "https://stackoverflow.com/questions/32750598/why-awk-script-is-faster-than-c-program/32750700#32750700", "title": "why awk script is faster than C++ program?", "body": "<p>I always suggest using a profiler when trying to answer performance questions.</p>\n\n<p>Doing a quick review of your code... it's likely poor performance with the string handling in your C++ code. </p>\n\n<p>You're doing a ton of string copying...</p>\n\n<pre><code>getline()\niss()\ncopy()\nsubstr()\n</code></pre>\n\n<p>You then do four replaces on smatch.</p>\n"}, {"comments": [{"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1443053545, "post_id": 32751206, "comment_id": 53343407, "body": "thanks a lot ..... your time with 1 millon of line is 0m1.578s ..... I also improve my code (view answers) ..... I belive <code>scanf</code> does a big difference"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1443053797, "post_id": 32751206, "comment_id": 53343470, "body": "Note: 1.5s with first algorithm"}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1443053957, "post_id": 32751206, "comment_id": 53343502, "body": "0m1.671s second algorithm"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1443055700, "post_id": 32751206, "comment_id": 53343919, "body": "@JoseRicardoBustosM.: I have added one more bit that might give a little more improvement--though in all honesty, if you&#39;re already in the 1.x second range at processing a file of ~200 megabytes, I&#39;d be a little surprised to see a really huge improvement (but I&#39;m seeing another ~20% or so, which is probably worthwhile, considering it&#39;s only one more line of code)."}, {"owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "edited": false, "score": 0, "creation_date": 1443057711, "post_id": 32751206, "comment_id": 53344318, "body": "with <code>setvbuf(stdin, NULL, _IOFBF, 65536);</code> exits improvement, this is little difference .... may be, I still do not use it well ..... I&#39;ll read about it .... once again thank a lot"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 4, "last_activity_date": 1443055376, "last_edit_date": 1443055376, "creation_date": 1443051815, "answer_id": 32751206, "question_id": 32750598, "link": "https://stackoverflow.com/questions/32750598/why-awk-script-is-faster-than-c-program/32751206#32751206", "title": "why awk script is faster than C++ program?", "body": "<p>C++ iostreams don't really provide a good way of checking that a column exists in some input, but otherwise ignoring it. C++ iostreams have an <code>ignore</code>, but it doesn't fit this particular case very well, so it probably won't help.</p>\n\n<p>That being the case, I'd at least consider using <code>scanf</code> instead, possibly something on this general order:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n\nint main() {\n    char column4[256];\n    char column17[256];\n\n    while (2 == scanf(\"%*s %*s %*s %255s %*s %*s %*s %*s %*s %*s %*s %*s %*s %*s %*s %*s %*s %255s %*s\", column4, column17)) {\n        char *beg = strrchr(column17, ':') + 1;\n        char *end = strchr(column17, '^');\n\n        *end = '\\0';\n\n        int nums[5];\n\n        int count = sscanf(beg, \"%d%*[A-Z]%d%*[A-Z]%d%*[A-Z]%d%*[A-Z]%d\", nums, nums + 1, nums + 2, nums + 3, nums + 4);\n\n\n        int sum = std::accumulate(nums, nums + count, 0);\n\n        double result = (sum*100.0) / (sum + count-1);\n        printf(\"%s %2.2f\\n\", column4, result);\n    }\n}\n</code></pre>\n\n<p>For the moment, this assumes (perhaps incorrectly, but I had to guess at something) that the 17th (or, I count it as 18th, but whatever) column can be ignored from the beginning up to the last colon (<code>:</code>). Then there's some arbitrary number of repetitions of number, then letter, another number, another letter, and so on (presumed for the moment to start and end with numbers). For the moment, I've allowed for up to 5 numbers, but allowing more would be trivial. Allowing for more variation in the pattern might take a little more work (depending on what sort of variation can happen.</p>\n\n<p>For a little more speed improvement, you could use a somewhat larger input buffer, something like this:</p>\n\n<pre><code>setvbuf(stdin, NULL, _IOFBF, 65536);\n</code></pre>\n\n<p>You need/want to do this before reading anything, so it would go before the <code>while</code> loop. Exactly how much good this will do (if any) seems to vary, but it's easy enough to do that it's worth at least trying it to see if it makes any difference.</p>\n"}, {"tags": [], "owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1443053422, "creation_date": 1443053422, "answer_id": 32751399, "question_id": 32750598, "link": "https://stackoverflow.com/questions/32750598/why-awk-script-is-faster-than-c-program/32751399#32751399", "title": "why awk script is faster than C++ program?", "body": "<p>My code improve, time 8s</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nint main(){\n  string record, col4;\n  int sum, count, c_garbage, i, n;\n  char garbage;\n  while(cin &gt;&gt; record){\n    if(i%19 == 3) col4 = record;\n    else if(i%19 == 16){\n      sum = 0;\n      count = 0;\n      c_garbage = 0;\n      while(1){\n        if(c_garbage == 2){\n          cin &gt;&gt; n;\n          sum += n;\n          count++;\n        }\n        cin &gt;&gt; garbage;\n        if(garbage==':') c_garbage++;\n        else if(garbage=='^') break;\n      }\n      printf(\"%s %2.2f\\n\", col4.c_str(), (float)sum*100 / (sum+count-1));\n    }\n    i++;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 7240, "user_id": 4767343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Buw_Ds08SUU/AAAAAAAAAAI/AAAAAAAAAAA/y9p3p3MOmHE/photo.jpg?sz=128", "display_name": "Jose Ricardo Bustos M.", "link": "https://stackoverflow.com/users/4767343/jose-ricardo-bustos-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 1, "accepted_answer_id": 32751206, "answer_count": 3, "score": -1, "last_activity_date": 1500756595, "creation_date": 1443047666, "question_id": 32750598, "link": "https://stackoverflow.com/questions/32750598/why-awk-script-is-faster-than-c-program", "title": "why awk script is faster than C++ program?", "body": "<p><strong>Background:</strong> I'm rockie in C++</p>\n\n<p><strong>Input file:</strong> 1 millon lines like to</p>\n\n<pre>\nFCC5G2YACXX:5:1101:1224:2059#NNNNNNNN   97  genome  96003934    24  118M4D11M   =   96004135    0   GCA....ACG  P\\..GW^EO   AS:i:-28    XN:i:0  XM:i:2  XO:i:1  XG:i:4  NM:i:6  MD:Z:54G53T9^TACA11 YT:Z:UP\n</pre>\n\n<p><strong>Output expected</strong></p>\n\n<pre>\n96003934 98.31\n</pre>\n\n<p><strong>Explanation output</strong></p>\n\n<p>Column 4: <code>96003934</code></p>\n\n<p>Column 18: <code>MD:Z:54G53T9^TACA11</code></p>\n\n<p>match = 54+53+9 = 116</p>\n\n<p>mismatch = count_letter(54G53T9) = 2</p>\n\n<p>id = 116*100 / (116+2) = 98.30508474576272</p>\n\n<p><strong>awk script</strong></p>\n\n<pre><code>awk '{\n    split($18,v,/[\\^:]/); \n    nmatch = split(v[3],vmatch, /[^0-9]/); \n    cmatch=0; \n    for(i=1; i&lt;=nmatch; i++) cmatch+=vmatch[i]; \n    printf(\"%s\"OFS\"%.2f\\n\", $4, cmatch*100/(cmatch+nmatch-1));\n}' file.sam\n</code></pre>\n\n<p><strong>C++</strong>, I thought would be faster</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main(){\n  string line;\n  while(getline(cin, line)){\n    istringstream iss(line);\n    vector&lt;string&gt; columns;\n    copy(istream_iterator&lt;string&gt;(iss),    //Split line by spaces\n         istream_iterator&lt;string&gt;(),\n         back_inserter(columns));\n    //I extract information from column 18\n    int start = columns[17].find_last_of(':');\n    int end = columns[17].find_first_of('^');\n    string smatch = columns[17].substr(start+1, end-start-1);\n    // I get for example \"54G53T9\"\n    replace( smatch.begin(), smatch.end(), 'A', ' ');\n    replace( smatch.begin(), smatch.end(), 'C', ' ');\n    replace( smatch.begin(), smatch.end(), 'G', ' ');\n    replace( smatch.begin(), smatch.end(), 'T', ' ');\n    // I get for example \"54 53 9\"\n    istringstream iss_sum(smatch);\n    int n=0, sum=0, count=0;\n    while(iss_sum &gt;&gt; n){\n      sum += n;\n      count++;\n    }\n    cout &lt;&lt; columns[3] &lt;&lt; ' ' &lt;&lt; fixed &lt;&lt; setprecision(2) \n         &lt;&lt; (float)sum*100 / (sum+count-1) &lt;&lt; endl;\n  }\n}\n</code></pre>\n\n<p><strong>Benchmark</strong></p>\n\n<p>with 1 millon of lines in input ....</p>\n\n<ul>\n<li>awk: 0m6.102s</li>\n<li>C++: 0m15.814s</li>\n</ul>\n\n<p><strong>Question</strong></p>\n\n<p>what am I doing wrong so that <code>C++</code> works slowly ? ..... can I improve C++ program? if yes, how? ..... should I write in <code>C</code> ? ....</p>\n\n<p>thank in advance</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 2644184, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/af2fe183a1440918faccf03b2afd839e?s=128&d=identicon&r=PG", "display_name": "TheNeosrb", "link": "https://stackoverflow.com/users/2644184/theneosrb"}, "edited": false, "score": 0, "creation_date": 1443048817, "post_id": 32750629, "comment_id": 53342120, "body": "That solved my problem, but I got another one which I can&#39;t even understand. Thanks, though, for helping me with this matter @pinkboi"}], "tags": [], "owner": {"reputation": 259, "user_id": 2800158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d614da119e4d1e9c568c93ef7b8de02?s=128&d=identicon&r=PG", "display_name": "pinkboi", "link": "https://stackoverflow.com/users/2800158/pinkboi"}, "is_accepted": true, "score": 1, "last_activity_date": 1443047884, "creation_date": 1443047884, "answer_id": 32750629, "question_id": 32750532, "link": "https://stackoverflow.com/questions/32750532/demoprojectlogger-class-type-redefinition/32750629#32750629", "title": "&#39;DemoProject::Logger&#39; : &#39;class&#39; type redefinition", "body": "<p>There are a couple of things you're doing weird. But the most important is you don't need to declare the class again in the .cpp file. You just implement the functions:</p>\n\n<pre><code>namespace DemoProject {\n\n    void Logger::printm(CEGUI::String Message) {\n        std::cout &lt;&lt; currentDateTime() &lt;&lt; \" &gt;&gt; \" &lt;&lt; Message &lt;&lt; std::endl;\n    }\n\n    static const std::string currentDateTime() {\n        ...\n    }\n\n}\n</code></pre>\n\n<p>You also didn't declare currentDateTime in the header, so that won't compile right. You also don't need to scope the class in the declaration since you're already in the class, so your header should look like:</p>\n\n<pre><code>namespace DemoProject {\n    class Logger {\n    public:\n        static void printm(CEGUI::String Message);\n        static const std::string currentDateTime();\n    };\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 2644184, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/af2fe183a1440918faccf03b2afd839e?s=128&d=identicon&r=PG", "display_name": "TheNeosrb", "link": "https://stackoverflow.com/users/2644184/theneosrb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 32750629, "answer_count": 1, "score": 0, "last_activity_date": 1443047884, "creation_date": 1443047226, "question_id": 32750532, "link": "https://stackoverflow.com/questions/32750532/demoprojectlogger-class-type-redefinition", "title": "&#39;DemoProject::Logger&#39; : &#39;class&#39; type redefinition", "body": "<p>I've read a lot of questions regarding this matter, but none of them seem to solve my issue. Code below:</p>\n\n<p><code>Logger.cpp</code></p>\n\n<pre><code>#include \"Includes.h\"\n\nnamespace DemoProject {\n    class Logger {\n    public:\n        static void Logger::printm(CEGUI::String Message) {\n            std::cout &lt;&lt; currentDateTime() &lt;&lt; \" &gt;&gt; \" &lt;&lt; Message &lt;&lt; std::endl;\n        }\n\n    private:\n        static const std::string currentDateTime() {\n            time_t     now = time(0);\n            struct tm  tstruct;\n            char       buf[80];\n            tstruct = *localtime(&amp;now);\n            strftime(buf, sizeof(buf), \"%d-%m-%Y %X\", &amp;tstruct);\n\n            return buf;\n        }\n    };\n}\n</code></pre>\n\n<p><code>logger.h</code></p>\n\n<pre><code>#ifndef LOGGER_H\n#define LOGGER_H\n#pragma once\n\n#include \"Includes.h\"\n\nnamespace DemoProject {\n    class Logger {\n    public:\n        static void Logger::printm(CEGUI::String Message);\n    };\n}\n\n#endif\n</code></pre>\n\n<p><code>Includes.h</code></p>\n\n<pre><code>#ifndef INCLUDES_H\n#define INCLUDES_H\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\n#include &lt;CEGUI/CEGUI.h&gt;\n#include &lt;CEGUI/RendererModules/OpenGL/GLRenderer.h&gt;\n\n#include &lt;SDL.h&gt;\n#include &lt;SDL_opengl.h&gt;\n\n#include \"Logger.h\"\n\n#endif\n</code></pre>\n\n<p>Sorry for bad formating of the post, but that's the best I could do. I am mostly a C# developer, but I am trying to learn C++ through doing different exercises I create on my own. From a C# developers view, this code is okay, but I don't know, I'm still a beginner.</p>\n"}, {"tags": ["c++", "templates", "operator-overloading"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1443047038, "post_id": 32750432, "comment_id": 53341527, "body": "Aside: <code>^</code> is not the exponentiation operator in C++. (and for precedence reasons, it is a bad idea to provide an overload that acts like exponentiation)"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1443047104, "post_id": 32750432, "comment_id": 53341544, "body": "Am I missing something obvious here? <code>double tmp = foo.bar; double a = tmp + 3; double b = tmp * 3; \u2026</code>"}, {"owner": {"reputation": 149, "user_id": 5302415, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e4aa40f04c8961f3061d5a9fbdce880?s=128&d=identicon&r=PG&f=1", "display_name": "guivenca", "link": "https://stackoverflow.com/users/5302415/guivenca"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1443049742, "post_id": 32750432, "comment_id": 53342386, "body": "@Konrad That is indeed possible, but I have many such structures in rather long equations and then would have to manage several temporary variables. Also, in the context, preserving their names improves readability ( say, using F for a force, m for mass and a for acceleration to get F=m*a)"}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 1, "last_activity_date": 1443047249, "creation_date": 1443047249, "answer_id": 32750537, "question_id": 32750432, "link": "https://stackoverflow.com/questions/32750432/combining-or-substituting-multiple-similar-overloads/32750537#32750537", "title": "Combining or substituting multiple similar overloads", "body": "<p>Since you simply want to get back a <code>double</code> (rather than whatever <code>foo</code> is) you could just define a conversion operator to <code>double</code>:</p>\n\n<pre><code>struct foo {\n    double bar;\n    operator double() const { return this-&gt;bar; }\n};\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 5302415, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e4aa40f04c8961f3061d5a9fbdce880?s=128&d=identicon&r=PG&f=1", "display_name": "guivenca", "link": "https://stackoverflow.com/users/5302415/guivenca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 1, "accepted_answer_id": 32750537, "answer_count": 1, "score": 0, "last_activity_date": 1443048358, "creation_date": 1443046646, "last_edit_date": 1443048358, "question_id": 32750432, "link": "https://stackoverflow.com/questions/32750432/combining-or-substituting-multiple-similar-overloads", "title": "Combining or substituting multiple similar overloads", "body": "<p>I have structure \"foo\" with many members, one of which (double bar) is accessed several times in basic operations. So instead of writing, for example:</p>\n\n<pre><code>double a=foo.bar+3;\ndouble b=foo.bar*5;\nbool c=foo.bar==2;\n</code></pre>\n\n<p>I wanted to write:</p>\n\n<pre><code>double a=foo+3;\ndouble b=foo*5;\nbool c=foo==2;\n</code></pre>\n\n<p>One approach would be overloading all desired operators in free functions:</p>\n\n<pre><code>template&lt; class T&gt;\ndouble operator@(foo a,T b){\n    return a.bar@b;\n}\ntemplate&lt; class T&gt;\ndouble operator@(T b,foo a){\n    return a.bar@b;\n}\n</code></pre>\n\n<p>I would then have to copy and paste this snippet and substitute @ by +, *, == and other operations I wanted. </p>\n\n<p>Is there a better (more readable, less repetitive, shorter and/or safer) way to do it ? For instance, using templates or guiding the compiler to try substituting \"foo\" by \"foo.bar\" whenever it does not find a match for a function involving \"foo\".</p>\n"}, {"tags": ["c++", "io"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1443046694, "post_id": 32750401, "comment_id": 53341415, "body": "Do you know in advance the layout of the file (the order of numbers, text, etc) or do you need to detect this at run-time?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 2, "creation_date": 1443046984, "post_id": 32750401, "comment_id": 53341517, "body": "What exactly is the problem? Skip spaces (<code>std::ws</code>), then <code>peek()</code> at the next character, and decide which format to use and whether it needs to be <code>ignore()</code>ed. These should be enough hints to finish the assignment."}, {"owner": {"reputation": 43, "user_id": 5290812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdc685017e16fcafff6f93e41f5c2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Aikman TD", "link": "https://stackoverflow.com/users/5290812/aikman-td"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1443053094, "post_id": 32750401, "comment_id": 53343306, "body": "@NeilKirk I know that in advance"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5290812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdc685017e16fcafff6f93e41f5c2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Aikman TD", "link": "https://stackoverflow.com/users/5290812/aikman-td"}, "edited": false, "score": 0, "creation_date": 1443058602, "post_id": 32750911, "comment_id": 53344498, "body": "Does this using any STL stuff?  I mean as long as I include iostream fstream and stringstream this can be used and requires no more right? Thank you."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 43, "user_id": 5290812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdc685017e16fcafff6f93e41f5c2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Aikman TD", "link": "https://stackoverflow.com/users/5290812/aikman-td"}, "edited": false, "score": 0, "creation_date": 1443078579, "post_id": 32750911, "comment_id": 53350399, "body": "@Goodrich Clint yes, that is right! You can always use <i>try and error method</i> on your compiler, i.e. write the code and try to compile it without including standard headers and then, depending on the error message make the respective corrections."}, {"owner": {"reputation": 43, "user_id": 5290812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdc685017e16fcafff6f93e41f5c2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Aikman TD", "link": "https://stackoverflow.com/users/5290812/aikman-td"}, "edited": false, "score": 0, "creation_date": 1443120816, "post_id": 32750911, "comment_id": 53376746, "body": "so actually there are lots of errors and also someone else suggested that this is just operator overloading.. I&#39;m really not so good at c++ so can you give me some more detailed analysis? Thank you very much! @simplicis veritatis"}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 43, "user_id": 5290812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdc685017e16fcafff6f93e41f5c2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Aikman TD", "link": "https://stackoverflow.com/users/5290812/aikman-td"}, "edited": false, "score": 0, "creation_date": 1443123000, "post_id": 32750911, "comment_id": 53377929, "body": "@Goodrich Clint I&#39;m afraid that you should wait till you acquire a critical amount of knowledge to implement a proper program. SO is about dealing  with specific problems, rather than tutorial-like place. You should check: <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>  and start from somewhere. That is all I can do for you on this stage :)"}], "tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 0, "last_activity_date": 1443079113, "last_edit_date": 1443079113, "creation_date": 1443049759, "answer_id": 32750911, "question_id": 32750401, "link": "https://stackoverflow.com/questions/32750401/questions-related-to-reading-in-different-format-of-numbers-characters/32750911#32750911", "title": "Questions related to reading in different format of numbers characters", "body": "<p>To specify your format and read only specific elements you could overload the <code>operator &gt;&gt;</code>. For example, the first format: <code>&lt; int_value &gt;</code>, could be implemented with:</p>\n\n<pre><code>istream&amp; operator&gt;&gt;(istream&amp; is, class_name&amp; array_name){\n   char par2, par2;\n   int  int_value;\n   is &gt;&gt; par1 &gt;&gt; int_value &gt;&gt; par2;\n   // check if any input\n   if(!is) return is;\n   // check for valid input format\n   if (par1 != '&lt;' || par2 != '&gt;'){\n       // set failbit to indicate invalid input format\n       is.clear(ios_base::failbit);\n       return is;\n   }\n   // assign input values to second argument\n   array_name(int_value);\n   // chain for consecutive use\n   return is;\n} \n</code></pre>\n\n<p>and the second format: <code>[ string_value ]</code> with:</p>\n\n<pre><code>istream&amp; operator&gt;&gt;(istream&amp; is, class_name&amp; separate_array_name){\n   char par2, par2;\n   string string_value;\n   is &gt;&gt; par1 &gt;&gt; int_value &gt;&gt; par2;\n   if(!is) return is;\n   if (par1 != '[' || par2 != ']'){\n       is.clear(ios_base::failbit);\n       return is;\n   }\n   separate_array_name(string_value);\n   return is;\n} \n</code></pre>\n\n<h2>Note:</h2>\n\n<p>The second parameter in both examples: <code>class_name&amp; array_name</code> and <code>class_name&amp; separate_array_name</code> are not real types and are left for you to decide/ implement.</p>\n\n<h2>Edit:</h2>\n\n<ol>\n<li>The function you've defined is not used in your <code>main()</code>.</li>\n<li>The function needs to be either defined before the <code>main()</code> or forward declared.</li>\n<li>Limit the excessive use of pointers and dynamically allocated memory, as it needs to be taken care of (freed) at the end.</li>\n<li>Look up how to use <code>istream</code>: file name, modes, etc. </li>\n<li>Prefer simple functions, i.e. doing one single process. It is much more easier to implement and detect errors.</li>\n</ol>\n"}], "owner": {"reputation": 43, "user_id": 5290812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdc685017e16fcafff6f93e41f5c2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Aikman TD", "link": "https://stackoverflow.com/users/5290812/aikman-td"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1443080616, "creation_date": 1443046496, "last_edit_date": 1443080616, "question_id": 32750401, "link": "https://stackoverflow.com/questions/32750401/questions-related-to-reading-in-different-format-of-numbers-characters", "title": "Questions related to reading in different format of numbers characters", "body": "<p>How I can read in those elements and store them into two different arrays., i.e. : the number in <code>&lt;?&gt;</code> and the word in <code>[?]</code> to be separately read in and stored.</p>\n\n<pre><code>&lt;98&gt;\nAvs [adadada]\n&lt;45&gt;\n[adafaf] BBBHADA\nasdadqd aada [Mammoth]\n&lt;-1&gt; // ends the read\n</code></pre>\n\n<p>The rest of the info in the file is useless which do not require to be stored.</p>\n\n<h2>Edit:</h2>\n\n<p>Following the advice of one of the answers, here is my first attempt:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;string.h&gt;\n\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    if(argc != 3)\n        cout&lt;&lt; \"Error! Not enough file!\"&lt;&lt;endl;\n    int** page = new int*[];\n    char** words = new char*[];\n\n}\n//--------------------------------------------------------- \nvoid readInput(int** page1, char** name1){\n    istream is;\n    char par1, par2;\n    int  usefulVal;\n    is &gt;&gt; par1 &gt;&gt; usefulVal &gt;&gt; par2;\n\n    // check if any input\n    if(!is) return is;\n\n    // check for valid input format\n    if (par1 != '&lt;' || par2 != '&gt;'){\n    // set failbit to indicate invalid input format\n       is.clear(ios_base::failbit);\n\n    // assign input values to second argument\n    page1(usefulVal);\n\n    char par_1, par_2;\n    string string_value;\n    is &gt;&gt; par1 &gt;&gt; string_value &gt;&gt; par2;\n    if(!is) return is;\n    if (par_1 != '[' || par_2 != ']')\n    {\n       is.clear(ios_base::failbit);\n       return is;\n    }\n    name1(string_value);\n    return is;\n}\n</code></pre>\n\n<h2>Question:</h2>\n\n<p><strike>1. Is there a way to read and store the above elements separately? </strike><br>\n2. What am I doing wrong?</p>\n\n<p>P.S.: I'm just trying out some C++. Hope someone can shed some light on it, thanks!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1443045553, "post_id": 32750191, "comment_id": 53340996, "body": "Can you show (a minimal example of) the code that crashes on some platforms? <code>std::function</code>&#39;s destructor shouldn&#39;t call the function, so I see no problem."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 2, "creation_date": 1443046839, "post_id": 32750191, "comment_id": 53341456, "body": "Is it possible that the <code>std::function</code> has some object(s) attached to it, which in turn has a destructor in the shared library? As Brian says, I don&#39;t see how the destructor of the <code>std::function</code> itself could cause a problem, but some stuff that is bound to the <code>std::function</code>, could be a problem."}], "owner": {"reputation": 1347, "user_id": 849856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6342430a01dc2a13ff40b8267216bc42?s=128&d=identicon&r=PG", "display_name": "goneskiing", "link": "https://stackoverflow.com/users/849856/goneskiing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443045466, "creation_date": 1443045466, "question_id": 32750191, "link": "https://stackoverflow.com/questions/32750191/stdfunction-and-dynamic-library-unload", "title": "std::function and dynamic library unload", "body": "<p>If I create a std::function that contains a function in a library that I have dynamically loaded what should the behavior be if I first dynamically unload the library then let the std::function destructor run.</p>\n\n<p>I ask as I have seen different behaviors on different platforms, running the destructor with no problems, throwing and exception and terminating. I'm not a fan of undefined behavior where it seems easily avoidable as in this case. </p>\n\n<p>So are there strong reasons to favour one behaviour over another? Has anyone heard any discussion on this topic? I know the standard doesn't talk about dynamic loading much although there are a few papers such as <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2407.html\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2407.html</a> but they don't really address this issue.</p>\n"}, {"tags": ["c++", "opengl", "glsl", "fragment-shader", "opengl-4"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 2, "creation_date": 1443046173, "post_id": 32750181, "comment_id": 53341219, "body": "<code>uTime</code> seems to be a uniform but you query an attribute location. Try using <code>glGetUniformLocation</code> instead."}, {"owner": {"reputation": 55, "user_id": 3474409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa9836636f322c5836f904862c027e3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3474409", "link": "https://stackoverflow.com/users/3474409/user3474409"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1443046581, "post_id": 32750181, "comment_id": 53341369, "body": "That worked! Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 2, "last_activity_date": 1443047039, "creation_date": 1443047039, "answer_id": 32750493, "question_id": 32750181, "link": "https://stackoverflow.com/questions/32750181/warn-variable-cannot-be-bound-it-either-doesnt-exist-or-has-been-optimized-aw/32750493#32750493", "title": "WARN: Variable cannot be bound (it either doesn&#39;t exist or has been optimized away)", "body": "<p>Since <code>uTime</code> is a uniform and not an attribute, using <code>glGetAttribLocation</code> will always result in an error. One has to use <code>glGetUniformLocation</code> instead.</p>\n"}], "owner": {"reputation": 55, "user_id": 3474409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa9836636f322c5836f904862c027e3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3474409", "link": "https://stackoverflow.com/users/3474409/user3474409"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 32750493, "answer_count": 1, "score": 0, "last_activity_date": 1443047039, "creation_date": 1443045422, "question_id": 32750181, "link": "https://stackoverflow.com/questions/32750181/warn-variable-cannot-be-bound-it-either-doesnt-exist-or-has-been-optimized-aw", "title": "WARN: Variable cannot be bound (it either doesn&#39;t exist or has been optimized away)", "body": "<p>I am trying to pass a variable timeVar (a float initially set to 0.0) that changes in my display() method with the line </p>\n\n<pre><code>timeVar = time(0);\n</code></pre>\n\n<p>to my fragment shader. Then I do this </p>\n\n<pre><code>safe_glUniform1f(h_uTime, timeVar); \n</code></pre>\n\n<p>and pass it to my shader program like so</p>\n\n<pre><code>h_uTime = safe_glGetAttribLocation(h_program, \"uTime\");\n</code></pre>\n\n<p>But I keep getting this error. Please help!</p>\n\n<pre><code>WARN: uTime cannot be bound (it either doesn't exist or has been optimized \naway). safe_glAttrib calls will silently ignore it.\n</code></pre>\n"}, {"tags": ["c++", "methods"], "comments": [{"owner": {"reputation": 2010, "user_id": 602469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/577ef2c1e38566f8d73a6fe3716dd4bc?s=128&d=identicon&r=PG&f=1", "display_name": "wKavey", "link": "https://stackoverflow.com/users/602469/wkavey"}, "reply_to_user": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1443045131, "post_id": 32750102, "comment_id": 53340828, "body": "So I do not need to re-define <code>lexStr</code> in the .cc file?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443045144, "post_id": 32750102, "comment_id": 53340833, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as usual please. Your question lacks essential information/debugging efforts."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4651282"}, "edited": false, "score": 1, "creation_date": 1443045499, "post_id": 32750102, "comment_id": 53340976, "body": "or so: <a href=\"http://ideone.com/1PrZZm\" rel=\"nofollow noreferrer\">ideone.com/1PrZZm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1443046596, "post_id": 32750320, "comment_id": 53341376, "body": "The right way to so it would be to <i>initialize</i> the data members in the constructor&#39;s initialization list."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1443054148, "post_id": 32750320, "comment_id": 53343548, "body": "@juanchopanza is right. knkp, you are that little step away from having an answer that is both correct and good. Right now it is correct."}, {"owner": {"reputation": 914, "user_id": 1409408, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/q9qsP.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/1409408/david"}, "edited": false, "score": 0, "creation_date": 1443070171, "post_id": 32750320, "comment_id": 53347218, "body": "It&#39;s a good answer. It will fix the problem. Not the best coding style, but then again the author is already using printf so perhaps that&#39;s a lesson for another day."}], "tags": [], "owner": {"reputation": 11, "user_id": 4044363, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4c9gt-WR3t8/AAAAAAAAAAI/AAAAAAAAABo/Wimn9zjuesU/photo.jpg?sz=128", "display_name": "knkp", "link": "https://stackoverflow.com/users/4044363/knkp"}, "is_accepted": false, "score": 1, "last_activity_date": 1443046126, "creation_date": 1443046126, "answer_id": 32750320, "question_id": 32750102, "link": "https://stackoverflow.com/questions/32750102/cannot-correctly-print-integers-that-are-returned-from-a-function-in-c/32750320#32750320", "title": "Cannot correctly print integers that are returned from a function in C++", "body": "<p>I believe that in your constructor, because you are redefining all of your variables, you are limiting their scope to the constructor. What this amounts too is that the member variables of the Token class end up not being set to the values you passed to the constructor. So you end up with uninitialized data as a result of type().</p>\n\n<p>Just try removing the datatypes in the constructor like so:</p>\n\n<pre><code>Token::Token(int t, string str, int l, int c) {\n    tokType = t;\n\n    lexStr = str;\n\n    lineNum = l;\n\n    charPos = c;\n}\n</code></pre>\n\n<p>And see if that helps.</p>\n"}], "owner": {"reputation": 2010, "user_id": 602469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/577ef2c1e38566f8d73a6fe3716dd4bc?s=128&d=identicon&r=PG&f=1", "display_name": "wKavey", "link": "https://stackoverflow.com/users/602469/wkavey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1443046126, "creation_date": 1443044998, "question_id": 32750102, "link": "https://stackoverflow.com/questions/32750102/cannot-correctly-print-integers-that-are-returned-from-a-function-in-c", "title": "Cannot correctly print integers that are returned from a function in C++", "body": "<p>I am trying to program something for a class that involves creating an object using a <code>Token</code> class and printing it out. Here is my main method:</p>\n\n<pre><code>int main(int argc, char** argv) {\n\n    Token tok(10, \"test\", 1, 2);\n\n    printf(\"%d\\n\", tok.type());\n}\n</code></pre>\n\n<p>This is my <code>Token.cc</code> file with relevant methods:</p>\n\n<pre><code>Token::Token(int t, string str, int l, int c) {\n    int tokType = t;\n\n    string lexStr = str;\n\n    int lineNum = l;\n\n    int charPos = c;\n}\n\nint Token::type() {\n    return tokType;\n}\n</code></pre>\n\n<p>And this is my <code>Token.h</code> file:</p>\n\n<pre><code>#ifndef TOKEN_H\n#define TOKEN_H\n\nusing namespace std;\n#include &lt;string&gt;\n\nclass Token{\nprivate:\n\npublic:\n\n    Token(int t, string str, int l, int c);\n    ~Token();\n\n    int type();\n\n    int tokType;\n    string lexStr;\n    int lineNum;\n    int charPos;\n};\n\n#endif\n</code></pre>\n\n<p>Program compiles fine, however when I run it prints a seemingly random number such as <code>1475212264</code> or <code>-258154088</code> or some other random number of that length.</p>\n\n<p>Any ideas what could be going wrong? This is driving me crazy.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1443044919, "post_id": 32750047, "comment_id": 53340743, "body": "<code>MainWindow::handsRead</code> Static variable?"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "edited": false, "score": 0, "creation_date": 1443046617, "post_id": 32750047, "comment_id": 53341386, "body": "Do you connect the signal <code>hChanged()</code> with the slot <code>setH()</code>? When is the slot <code>setH()</code> triggered?"}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443046972, "post_id": 32750047, "comment_id": 53341510, "body": "connect(this, SIGNAL(hChanged(const QString)), this, SLOT(setH(const QString)));"}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1443047074, "post_id": 32750047, "comment_id": 53341538, "body": "@drescherjm: It is not static"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443047456, "post_id": 32750545, "comment_id": 53341668, "body": "Thank you for the answer, I tried updating the Lineedit with a loop but the windows only show up when the loop has finished, is there a way to update the text on the lineedit of the mainwindow as I get it."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443047645, "post_id": 32750545, "comment_id": 53341727, "body": "@David Do you really need such cross reference between those functions? I guess that there is also some external caller that triggers that loop calling either <code>hChanged()</code> or <code>setH()</code>."}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443048005, "post_id": 32750545, "comment_id": 53341847, "body": "How would you do it, I get a frame and get what I want from the frame and want to show that info in the LinEdit."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443048199, "post_id": 32750545, "comment_id": 53341922, "body": "@David Please clarify your task. Why do you call <code>updatehand()</code> in <code>setH()</code>, what is the object <code>frame</code>?"}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443048298, "post_id": 32750545, "comment_id": 53341957, "body": "To create a new frame and get the information from that frame. Does QT allow to modify LineEdit once that Mainwindow is shown?"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443048360, "post_id": 32750545, "comment_id": 53341979, "body": "@David How often those frames should be created? Immediately one by one or with some time interval?"}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443048564, "post_id": 32750545, "comment_id": 53342045, "body": "Aproximately 60/s and every frame is in a different Thread, I am working with LeapMotion."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443048594, "post_id": 32750545, "comment_id": 53342050, "body": "@David If you want new frames with some time interval the <code>QTimer</code> can be used, for example its static member <code>QTimer::singleShot(1000 &#47; 60, this, SLOT(updatehand()));</code> instead of direct call from <code>setH</code>."}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443048747, "post_id": 32750545, "comment_id": 53342099, "body": "But how I update what i need to the lineedit, Signal does not do the job, As i say before the window is shown after the loop finish, once the mainwindow is shown no text can be added to LineEdit"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443049122, "post_id": 32750545, "comment_id": 53342210, "body": "@David I updated the answer. There is no direct loop with timer. The event loop dispatches messages while timer is activated."}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443049305, "post_id": 32750545, "comment_id": 53342260, "body": "Thank you so much I will try  right now and let you know."}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443050257, "post_id": 32750545, "comment_id": 53342533, "body": "Thank you it works, but i didn&#39;t get the info updated into LineEdit"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443050488, "post_id": 32750545, "comment_id": 53342602, "body": "@David What do you mean about updated info? If <code>handsRead</code> is the <code>QLineEdit</code> object the <code>setH()</code> must set it correctly. Maybe something wrong in <code>updatehand()</code>?"}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443050818, "post_id": 32750545, "comment_id": 53342723, "body": "Yes you are correct handsRead is the LineEdit object, I tried running after the modification you subject, I use qDebug to see if what I need was updating correctly, and it is, but is not showing in QLineEdit. Thank You."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443051003, "post_id": 32750545, "comment_id": 53342782, "body": "@David Are you sure that <code>frame</code> corresponds to the last frame? Do you need to call <code>controller.frame();</code> to get the last frame? By whe way, I see that it is possible to create a listener in LeapMotion that will automatically call your given function for each new frame. You shoudd be also careful with threads."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443051253, "post_id": 32750545, "comment_id": 53342834, "body": "@David Do you mean that you see that <code>setH()</code> is called with correct updated value, but that value is not displayed after <code>handsRead-&gt;setText(hndc);</code>?"}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443051267, "post_id": 32750545, "comment_id": 53342841, "body": "I Use Listener, before but had the same problem that I have now, the good think about using controller.frame() is that you get the frame when you need it."}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443051377, "post_id": 32750545, "comment_id": 53342861, "body": "Yes. this is the case."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443051762, "post_id": 32750545, "comment_id": 53342962, "body": "@David If <code>handsRead-&gt;setText(hndc);</code> does not update UI while the UI thread is not blocked (window can be resized,...) it is very strange. You should debug it deeper and provide more information. For example, you can check in a new empty project that <code>lineedit-&gt;setText()</code> indeed updates the field and look for the differences with current project. You can even try in that test project that lineedit can be updated periodically by <code>QTimer</code>."}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443145004, "post_id": 32750545, "comment_id": 53385858, "body": "I was able to pull the text from the text() function of LineEdit but it did not show in the UI, however when I tried the setText() function with the timer the text was shown. It is possible that because the speed of which the frames were received caused the text not been displayed in the UI?"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443164721, "post_id": 32750545, "comment_id": 53391778, "body": "@David Does it work already with timer in your main project or it works only in empty test project?"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443215728, "post_id": 32750545, "comment_id": 53420497, "body": "@David That is good. So do you need more clarificaions for that question or the issue is resolved?"}, {"owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443216804, "post_id": 32750545, "comment_id": 53420882, "body": "with the timer I was able to get the string I was supposed to show in the UI using the text() function but still don&#39;t show in the UI, I am starting from scratch using the timer as base. Thank you."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "edited": false, "score": 0, "creation_date": 1443228355, "post_id": 32750545, "comment_id": 53423655, "body": "@David Glad to have been of help! You have an option to accept the answer if you feel it was useful to you <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a> :-)"}], "tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": false, "score": 1, "last_activity_date": 1443050358, "last_edit_date": 1443050358, "creation_date": 1443047305, "answer_id": 32750545, "question_id": 32750047, "link": "https://stackoverflow.com/questions/32750047/qt-update-linedit-at-runtime/32750545#32750545", "title": "QT update Linedit at runtime", "body": "<p>It is the reason for the crash:</p>\n\n<pre><code>connect(this, SIGNAL(hChanged(const QString)), this, SLOT(setH(const QString)));\n</code></pre>\n\n<p>Such connection is acutally a direct function call. The function <code>setH()</code> is called in place of <code>emit hChanged(hndc);</code>. Then the function <code>updatehand()</code> is called from <code>setH()</code>.</p>\n\n<p>It is an infinite loop with the stack overflow crash.</p>\n\n<hr>\n\n<p>If you want to call <code>updatehand()</code> 60 times per seconds it is possible to called using <code>QTimer</code>, for example with <code>QTimer</code> statics memember:</p>\n\n<pre><code>void MainWindow::setH(const QString hndc){\n    handsRead-&gt;setText(hndc);\n    QTimer::singleShot(1000 / 60, this, SLOT(updatehand()));\n}\n</code></pre>\n\n<p>Here <code>updatehand()</code> is also a slot.</p>\n\n<p>In that case the even loop continues to dispatch UI messages after return from <code>setH()</code>.</p>\n\n<p>Approximately after 16 ms the timer will call <code>updatehand()</code>.</p>\n\n<hr>\n\n<p>The above solution technically breaks the infinite cross-refernce loop. However, it can be done better. There is a risk that <code>setH()</code> will be triggered many times from the external caller. In that case many timers will be activated.\nIt looks that you need just one <code>QTimer</code> instance to call periodiacally <code>updatehand()</code> independently of <code>setH()</code>. So, <code>updatehand()</code> can be pooled with given period to updated data. It can call <code>setH()</code> directly, the <code>setH()</code> function only sets the <code>QLineEdit</code> text:</p>\n\n<pre><code>void MainWindow::setH(const QString hndc){\n    handsRead-&gt;setText(hndc);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5369691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e542d791620967d39d18385193e2175c?s=128&d=identicon&r=PG&f=1", "display_name": "David ", "link": "https://stackoverflow.com/users/5369691/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443218069, "creation_date": 1443044746, "last_edit_date": 1443047031, "question_id": 32750047, "link": "https://stackoverflow.com/questions/32750047/qt-update-linedit-at-runtime", "title": "QT update Linedit at runtime", "body": "<p>I am trying to update the text on my linedit every time I get a frame, but my program crash. I tried doing the same with a loop, but the window shows only after the loop has finished. setH() is my slot, in Debug mode it run perfectly, the problem is when trying to update the text in LineEdit while the programm is running(the mainwindow is on the screen) . Thank you</p>\n\n<pre><code>void MainWindow::updatehand(){\n    if (controller.isConnected()){\n    int hc =frame.hands().count();\n    QString hndc= QString::number(hc);\n    emit hChanged(hndc);\n}\nvoid MainWindow::setH(const QString hndc){\n    handsRead-&gt;setText(hndc);\n    updatehand();\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "fortran", "intel-fortran"], "comments": [{"owner": {"reputation": 1933, "user_id": 4872873, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99040d0375c159c2972700d08a794c22?s=128&d=identicon&r=PG&f=1", "display_name": "Ross", "link": "https://stackoverflow.com/users/4872873/ross"}, "edited": false, "score": 1, "creation_date": 1443047667, "post_id": 32749985, "comment_id": 53341735, "body": "Does this help? <a href=\"https://software.intel.com/en-us/forums/intel-visual-fortran-compiler-for-windows/topic/394201\" rel=\"nofollow noreferrer\">software.intel.com/en-us/forums/&hellip;</a>"}, {"owner": {"reputation": 53, "user_id": 5365947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54bddca41eb1495a36042f43896901a6?s=128&d=identicon&r=PG&f=1", "display_name": "bjdesa", "link": "https://stackoverflow.com/users/5365947/bjdesa"}, "reply_to_user": {"reputation": 1933, "user_id": 4872873, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99040d0375c159c2972700d08a794c22?s=128&d=identicon&r=PG&f=1", "display_name": "Ross", "link": "https://stackoverflow.com/users/4872873/ross"}, "edited": false, "score": 0, "creation_date": 1444271037, "post_id": 32749985, "comment_id": 53835790, "body": "No I copied all the LIB files into the folder where I had my source code then the linking problem went away"}], "answers": [{"tags": [], "owner": {"reputation": 114, "user_id": 2232100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e25000c05a52d78f86db2514310c619f?s=128&d=identicon&r=PG", "display_name": "Neveroldmilk", "link": "https://stackoverflow.com/users/2232100/neveroldmilk"}, "is_accepted": false, "score": 1, "last_activity_date": 1485685288, "creation_date": 1485685288, "answer_id": 41919800, "question_id": 32749985, "link": "https://stackoverflow.com/questions/32749985/fatal-error-lnk1104-lib-file-not-found-when-linking-ms-c-with-intel-fortran/41919800#41919800", "title": "fatal error LNK1104 (.lib file not found) when linking MS C++ with Intel Fortran", "body": "<p>Generally speaking, you miss the setting of the mixed programming environment in Visual studios. Just follow this link provided by intel:\n<a href=\"https://software.intel.com/en-us/articles/configuring-visual-studio-for-mixed-language-applications\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/articles/configuring-visual-studio-for-mixed-language-applications</a>.</p>\n\n<p>Or in short, add the fortran compiler include directory and library directory in the project configuration tab. In my case, the fortran compiler directory is \"g:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries\\windows\\compiler\\include\\intel64\", and the library directory is \"g:\\Program Files (x86)\\IntelSWTools\\compilers_and_libraries\\windows\\compiler\\lib\\intel64_win\".</p>\n"}], "owner": {"reputation": 53, "user_id": 5365947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54bddca41eb1495a36042f43896901a6?s=128&d=identicon&r=PG&f=1", "display_name": "bjdesa", "link": "https://stackoverflow.com/users/5365947/bjdesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1991, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485695224, "creation_date": 1443044465, "last_edit_date": 1485695224, "question_id": 32749985, "link": "https://stackoverflow.com/questions/32749985/fatal-error-lnk1104-lib-file-not-found-when-linking-ms-c-with-intel-fortran", "title": "fatal error LNK1104 (.lib file not found) when linking MS C++ with Intel Fortran", "body": "<p>I have two files <code>source1.f90</code> and <code>main.cpp</code>. The Fortran file has a subroutine and the cpp file has a program that calls the Fortran subroutine</p>\n\n<p>I compiled the Fortran file and the built a static library file using the following command line options</p>\n\n<pre><code>ifort source1.f90 /nologo /debug:full /Od /gen-interfaces /warn:interfaces /traceback /check:bounds /libs:static /threads /dbglibs /c\n\nlib /out:lib1.lib source1.obj\n</code></pre>\n\n<p>But when I compiled the cpp file using </p>\n\n<pre><code>CL main.cpp /link LIB1.LIB\n</code></pre>\n\n<p>I get the following error </p>\n\n<pre><code>D:\\temp&gt;CL main.cpp /EHsc /link LIB1.LIB\nMicrosoft (R) C/C++ Optimizing Compiler Version 17.00.60610.1 for x64\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\nmain.cpp\nMicrosoft (R) Incremental Linker Version 11.00.60610.1\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n/out:main.exe\nLIB1.LIB\nmain.obj\nLINK : fatal error LNK1104: cannot open file 'ifmodintr.lib'\n</code></pre>\n\n<p>How do I fix this problem so that my program compiles?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1443044097, "post_id": 32749815, "comment_id": 53340418, "body": "Try creating a base class, such as <code>class Furnature</code>, and have the function return a pointer to the base class."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1443044330, "post_id": 32749815, "comment_id": 53340510, "body": "<code>template&lt;class FurnitureType&gt; FurnitureType get_contents()</code>"}, {"owner": {"reputation": 812, "user_id": 5330834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Up5x.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/5330834/jake"}, "edited": false, "score": 0, "creation_date": 1443044472, "post_id": 32749815, "comment_id": 53340568, "body": "You can return a vector of parent objects (e.g. of a Furniture class from which the Table and Chair classes extend), and cast the results manually. I would personally decide against this, as would many people who are reading this, banging their heads on their desks for even mentioning it. Please, please do not do this. A templating approach makes more sense. Separated methods make even more sense - I would have to question the structural integrity of a program that requires this (it&#39;s something you may see a lot in dynamically-typed languages - C++ is a different animal entirely)"}], "answers": [{"comments": [{"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1443046457, "post_id": 32749908, "comment_id": 53341331, "body": "I would more correctly state that allowing it requires solving the Halting Problem so can never be allowed by any statically-typed language."}], "tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": false, "score": 0, "last_activity_date": 1443044062, "creation_date": 1443044062, "answer_id": 32749908, "question_id": 32749815, "link": "https://stackoverflow.com/questions/32749815/c-return-type-of-function-to-be-a-function-of-its-input/32749908#32749908", "title": "c++ return type of function to be a function of it&#39;s input", "body": "<p>The language doesn't allow you to do that.</p>\n\n<p>Think about it, the input for your function could be a variable, whose value is not known at compile time. The compiler won't be able to deduce the return type.</p>\n\n<p>What you can do:</p>\n\n<ul>\n<li>Use two different functions and call the appropriate one.</li>\n<li>Have a common return type, e.g. a base class pointer or reference.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": true, "score": 6, "last_activity_date": 1443044333, "creation_date": 1443044333, "answer_id": 32749965, "question_id": 32749815, "link": "https://stackoverflow.com/questions/32749815/c-return-type-of-function-to-be-a-function-of-its-input/32749965#32749965", "title": "c++ return type of function to be a function of it&#39;s input", "body": "<p>This looks to me like <code>room.get</code> just needs to be a template, and forget the enum.</p>\n\n<pre><code>std::vector&lt;Table&gt; tables = room.get&lt;Table&gt;();`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "is_accepted": false, "score": 0, "last_activity_date": 1443044430, "creation_date": 1443044430, "answer_id": 32749978, "question_id": 32749815, "link": "https://stackoverflow.com/questions/32749815/c-return-type-of-function-to-be-a-function-of-its-input/32749978#32749978", "title": "c++ return type of function to be a function of it&#39;s input", "body": "<p>You can use templating for a function, but you will have to explicitly pass the type as the template parameter, it always has to be known at compile-time can't be inferred from the input automatically:</p>\n\n<pre><code>template &lt;typename T&gt;\nT product(T x, T y) { x * y; }\n</code></pre>\n\n<p>and call it as:</p>\n\n<pre><code>product&lt;int&gt;(3,2);\n</code></pre>\n\n<p>(abstract example, may be less useful in what you are doing)</p>\n"}], "owner": {"reputation": 2857, "user_id": 997527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8d85e69468a00b418516425577e313d0?s=128&d=identicon&r=PG", "display_name": "Mac", "link": "https://stackoverflow.com/users/997527/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 32749965, "answer_count": 3, "score": 1, "last_activity_date": 1443044773, "creation_date": 1443043743, "question_id": 32749815, "link": "https://stackoverflow.com/questions/32749815/c-return-type-of-function-to-be-a-function-of-its-input", "title": "c++ return type of function to be a function of it&#39;s input", "body": "<p>I am learning c++ I am wondering if there is a way to define a template where the return type would actually be a function of the input of the function.</p>\n\n<p>For example:</p>\n\n<pre><code>calling fun(1) would return me an int\ncalling fun(2) would return me a float\n</code></pre>\n\n<p>I guess this could be done using some kind of map?</p>\n\n<pre><code>1 &lt;&gt; int\n2 &lt;&gt; float\n</code></pre>\n\n<p>The problem I was trying to solve is, for example, if I have an object called room I wanted to have a function called get_contents on which I would pass an enum to define the return type. For example:</p>\n\n<pre><code>std::vector&lt;Table&gt; tables = room.get_contents(Room::TABLE);\nstd::vector&lt;Chair&gt; chairs = room.get_contents(Room::CHAIR);\n</code></pre>\n\n<p>The first question probably isn't the best solution to this problem, nevertheless I wanted to know if it possible. Also, what is the best pattern to do what I want?</p>\n"}, {"tags": ["javascript", "c++", "html"], "owner": {"reputation": 11, "user_id": 4191929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4cc73c33d9331c0b744788712e314f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sim0", "link": "https://stackoverflow.com/users/4191929/sim0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443043704, "creation_date": 1443043704, "question_id": 32749801, "link": "https://stackoverflow.com/questions/32749801/how-to-use-c-library-in-intel-xdk-html5-js", "title": "How to use C library in Intel XDK HTML5 + JS?", "body": "<p>is there any way to call a C library within Intel XDK using HTML5 + JS?\nI would use Kiss FFT for a hybrid app.\nThank you</p>\n"}, {"tags": ["c++", "algorithm", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1443047874, "post_id": 32749749, "comment_id": 53341807, "body": "okay, we know what the haystack looks like. What does the needle look like? You are very vague about that. You mention &quot;find <code>.ident</code>&quot; but also <code>time_t</code> - what exactly is the search <i>pattern</i>?"}, {"owner": {"reputation": 1310, "user_id": 1718761, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3a981d1625c3419e383fd57633c4e5a1?s=128&d=identicon&r=PG", "display_name": "Ender", "link": "https://stackoverflow.com/users/1718761/ender"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1443119682, "post_id": 32749749, "comment_id": 53376148, "body": "The search pattern was MyObj.data.ident, I&#39;m comparing that w/ the same in the haystack. Thanks, I think I can eventually figure this out."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1443130180, "post_id": 32749749, "comment_id": 53381480, "body": "@Einder trhat really says nothing about what the needle (a) is (b) means. It it a full <code>ident</code> (of <code>BYTE_COUNT</code> positions)? Is it a fragment? Should it match across different map entries (is it logically a consecutive stream)? If not, why were you ever looking at KMP? I&#39;m happy to see my answer helped, but really this question smells like <b><a href=\"http://meta.stackoverflow.com/questions/66377/what-is-the-xy-problem\">X/Y problem</a></b> from start to end."}, {"owner": {"reputation": 1310, "user_id": 1718761, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3a981d1625c3419e383fd57633c4e5a1?s=128&d=identicon&r=PG", "display_name": "Ender", "link": "https://stackoverflow.com/users/1718761/ender"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1443152770, "post_id": 32749749, "comment_id": 53387606, "body": "I have a function that convertes bytes to hex, so I end up with a hex string of characters. So basically, this is the string I&#39;m using to compare between MyObj&#39;s. If this string is the same (i.e., if it&#39;s in the container I&#39;m searching, or not), then that should tell me what action I need to take. I&#39;m not certain KMP is the best way to go as I&#39;m still trying to figure out what is the best way to go."}, {"owner": {"reputation": 1310, "user_id": 1718761, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3a981d1625c3419e383fd57633c4e5a1?s=128&d=identicon&r=PG", "display_name": "Ender", "link": "https://stackoverflow.com/users/1718761/ender"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1443152919, "post_id": 32749749, "comment_id": 53387640, "body": "Could be the XY prob. I like trying to solve it myself first and then refactoring with or without help after."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1443818848, "last_edit_date": 1443818848, "creation_date": 1443053139, "answer_id": 32751366, "question_id": 32749749, "link": "https://stackoverflow.com/questions/32749749/how-to-make-range-iterators-of-objects-to-use-with-boost-kmp/32751366#32751366", "title": "How to make range iterators of objects to use with boost KMP?", "body": "<p>Assuming the needle is a pattern that occurs in <code>ident</code>, here's a sketch:</p>\n\n<ul>\n<li>Hardcoded random seed for generating random binary data</li>\n<li>Hardcoded \"needle\" pattern: 0x1e 0x9a</li>\n<li>Looks in last 2 seconds (assuming increasing clock values)</li>\n<li>the <code>std::search</code> call can be easily replaced by a KMP call</li>\n</ul>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2839e87db6084674\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/circular_buffer.hpp&gt;\n#include &lt;ctime&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n\nstd::mt19937 prng{ 0x4e9d45ad };\n\nnamespace {\n    static constexpr auto BYTE_COUNT = 32;\n\n    struct MyData { uint8_t ident[BYTE_COUNT]; };\n    struct MyObj { MyData data; };\n}\n\nusing Buf = boost::circular_buffer&lt;std::pair&lt;std::time_t, MyObj&gt; &gt;;\n\nBuf generate();\ntime_t time_offset(int offset_seconds);\n\ntemplate &lt;typename Needle&gt; auto search_for(Buf const&amp; haystack, Needle const&amp; needle) {\n    auto const threshold = time_offset(-2);\n\n    auto ubound = std::upper_bound(haystack.begin(), haystack.end(), threshold, [] (auto&amp; a, auto&amp; b) { return a &lt;= b.first; });\n\n    auto match  = std::find_if(ubound, haystack.end(), [&amp;needle](auto&amp; entry) {\n            auto&amp; ident = entry.second.data.ident;\n            return std::end(ident) != std::search(\n                    std::begin(ident), std::end(ident),\n                    std::begin(needle), std::end(needle)\n                );\n            });\n\n    return match;\n}\n\nint main() {\n    auto haystack = generate();\n\n    uint8_t needle[2] = { 0x1e, 0x9a };\n    auto match = search_for(haystack, needle);\n\n    if (haystack.end() != match)\n    {\n        auto tp = match-&gt;first;\n        std::cout &lt;&lt; \"Matching entry at \" &lt;&lt; ctime(&amp;tp);\n\n        for (int ch : match-&gt;second.data.ident)\n            std::cout &lt;&lt; std::hex &lt;&lt; std::showbase &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; ch &lt;&lt; \" \";\n\n        std::cout &lt;&lt; \"\\n\";\n    }\n}\n\n#include &lt;thread&gt;\n#include &lt;random&gt;\n#include &lt;functional&gt;\n\nBuf generate() {\n    Buf cb(512);\n    auto randchar = std::bind(std::uniform_int_distribution&lt;&gt;(0, 255), prng);\n\n    for (auto i = 0u; i &lt; 32; i++) {\n        std::this_thread::sleep_for(std::chrono::milliseconds(prng() % 500));\n\n        cb.push_back({ time(NULL), {} });\n\n        auto &amp;ident = cb.back().second.data.ident;\n        std::generate(std::begin(ident), std::end(ident), randchar);\n    }\n\n    return cb;\n}\n\ntime_t time_offset(int offset_seconds) {\n    time_t now = time(NULL);\n    struct tm now_tm = *localtime(&amp;now);\n    struct tm then_tm = now_tm;\n    then_tm.tm_sec += offset_seconds;\n\n    return mktime(&amp;then_tm); // normalize it\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Matching entry at Thu Sep 24 00:03:56 2015\n0xb 0x5e 0xa3 0x5d 0x28 0x27 0xa5 0x34 0xa9 0x90 0x97 0x91 0xb2 0x8f 0x74 0xda 0x18 0xc 0x81 0x78 0xe 0x22 0x1e 0x9a 0xcf 0xa3 0x21 0x10 0xa9 0xfa 0xd1 0xe5 \n</code></pre>\n\n<p>Note that the matching subsequence <code>0x1e 0x9a</code> appears.</p>\n"}], "owner": {"reputation": 1310, "user_id": 1718761, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3a981d1625c3419e383fd57633c4e5a1?s=128&d=identicon&r=PG", "display_name": "Ender", "link": "https://stackoverflow.com/users/1718761/ender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 32751366, "answer_count": 1, "score": 2, "last_activity_date": 1443818848, "creation_date": 1443043472, "question_id": 32749749, "link": "https://stackoverflow.com/questions/32749749/how-to-make-range-iterators-of-objects-to-use-with-boost-kmp", "title": "How to make range iterators of objects to use with boost KMP?", "body": "<p>I've seen the examples using strings, but am unsure of how to pass in objects using the KMP algorithm. I have a circular buffer defined as circular_buffer&lt; pair&lt; time_t, MyObj>> where MyObj is:</p>\n\n<pre><code>typedef struct MyObj \n{\n    MyData data;\n}\n\ntypedef struct MyData\n{\n    uint8_t ident[BYTE_COUNT];\n}\n</code></pre>\n\n<p>I'm looking for a way to use the KMP algorithm to find MyObj.data.ident within the circulur_buffer of MyObj's. The time_t value is a timestamp where I only wish to search from the back of the CB to a given number of seconds backwards in the buffer (so not the entire buffer).</p>\n\n<pre><code>boost::algorithm::knuth_morris_pratt_search ( cb.rbegin (), \n    cb.rend (), unknown, unknown);\n</code></pre>\n\n<p>Any help much appreciated.</p>\n"}, {"tags": ["c++", "opencv", "file-io", "opencv3.0"], "comments": [{"owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443043184, "post_id": 32749516, "comment_id": 53339998, "body": "Looks like some file in the folder is not a valid image or it&#39;s already a grey-scale image. Try to check all the files and make sure all of them are colored images (RGB or RGBA)."}, {"owner": {"reputation": 63, "user_id": 5111494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b989832534f4331571b550cd59c5b2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice Programmer", "link": "https://stackoverflow.com/users/5111494/novice-programmer"}, "reply_to_user": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443043754, "post_id": 32749516, "comment_id": 53340272, "body": "What do you mean by a valid image?  The images that I use is just one image, replicated over and over again.  It&#39;s just the same file content with a different file name.  The image I use is definitely a color image."}, {"owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443044222, "post_id": 32749516, "comment_id": 53340471, "body": "I mean, since you are replicating the image (and I imagine, you are using some loop to go through all of them) maybe the loop (or whatever you are using) is reading some unexpected file that&#39;s not a valid image. You say that it stops on a specific frame, is this frame equal to the others or it has  some difference? you could try to use commands like file, identify to see wither if this file is a valid image and if it has the same md5sum as the others (just to make sure it&#39;s a copy of the original image)."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1443046632, "post_id": 32749516, "comment_id": 53341395, "body": "Check that the images are loaded correctly, try to imshow them"}, {"owner": {"reputation": 63, "user_id": 5111494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b989832534f4331571b550cd59c5b2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice Programmer", "link": "https://stackoverflow.com/users/5111494/novice-programmer"}, "edited": false, "score": 0, "creation_date": 1443050896, "post_id": 32749516, "comment_id": 53342750, "body": "I did what you said and verified that they are valid files.  There is still the same error.  Just to be sure, I took a video from YouTube and used avconv to convert the video into frames and it still gives me the same error, just on a different frame now, frame 1038.  Am I doing something wrong?  Instead of imshow, I just use display (ImageMagick) and the image opens up fine."}, {"owner": {"reputation": 63, "user_id": 5111494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b989832534f4331571b550cd59c5b2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice Programmer", "link": "https://stackoverflow.com/users/5111494/novice-programmer"}, "edited": false, "score": 0, "creation_date": 1443051527, "post_id": 32749516, "comment_id": 53342900, "body": "I also verified that the image is valid and it is not a grayscale image as well, it is a color image taken from the YouTube video with avconv."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1443083111, "post_id": 32749516, "comment_id": 53352723, "body": "1) The image path is wrong and you&#39;re not loading any image or 2) it&#39;s not 3 channel. No other options.."}, {"owner": {"reputation": 63, "user_id": 5111494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b989832534f4331571b550cd59c5b2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice Programmer", "link": "https://stackoverflow.com/users/5111494/novice-programmer"}, "edited": false, "score": 0, "creation_date": 1443098408, "post_id": 32749516, "comment_id": 53362162, "body": "You were right!  I ran a simple C program and confirmed that I had too many open files using errno - does imread close the file after opening it?"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 5111494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b989832534f4331571b550cd59c5b2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice Programmer", "link": "https://stackoverflow.com/users/5111494/novice-programmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1443105621, "last_edit_date": 1443105621, "creation_date": 1443100655, "answer_id": 32762407, "question_id": 32749516, "link": "https://stackoverflow.com/questions/32749516/opencv-3-0-error-215-scn-3-scn-4-in-function-ipp-cvtcolor/32762407#32762407", "title": "OpenCV 3.0 - error: (-215) scn == 3 || scn == 4 in function ipp_cvtColor", "body": "<p>The problem was not with the OpenCV code, but with the C code I was using to iterate through the files.  I had too many files open and that caused the program to fail. This was confirmed with the errno code I received upon program termination.</p>\n"}], "owner": {"reputation": 63, "user_id": 5111494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b989832534f4331571b550cd59c5b2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Novice Programmer", "link": "https://stackoverflow.com/users/5111494/novice-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2980, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443105677, "creation_date": 1443042540, "last_edit_date": 1443105677, "question_id": 32749516, "link": "https://stackoverflow.com/questions/32749516/opencv-3-0-error-215-scn-3-scn-4-in-function-ipp-cvtcolor", "title": "OpenCV 3.0 - error: (-215) scn == 3 || scn == 4 in function ipp_cvtColor", "body": "<p>I have simple OpenCV code that I am using to load an image and convert it to grayscale.  I have a folder with images that I have replicated.  It's just the same frame over and over again with different file names, the content of the files are exactly the same. </p>\n\n<p>I run a loop and try to convert the images and it runs for 1020 frames and stops on that specific frame every time with the error:</p>\n\n<blockquote>\n  <p>\"error: (-215) scn == 3 || scn == 4 in function ipp_cvtColor\" </p>\n</blockquote>\n\n<p>popping up every time.  I don't understand this, if the code works for the first image, in theory it should work for all the other images in the folder as they are the same file just with different file names.  I am running OpenCV 3.0 and also receive the specific error that says:</p>\n\n<blockquote>\n  <p>\"OpenCV Error: Assertion failed (scn == 3 || scn == 4) in ipp_cvtColor,file/home/blah/OpenCV3.0/opencv/modules/imgproc/src/color.cpp, line 7453\" </p>\n</blockquote>\n\n<p>when the program stops.</p>\n\n<p>My code is:</p>\n\n<pre><code>char * baseImagePath; //these are updated as the program iterates\nchar * nextImagePath; //they contain the full path of the image\n\nMat baseImage, nextImage;\nMat grayImage1,grayImage2;\n\nbaseImage = imread(baseImagePath, CV_LOAD_IMAGE_COLOR);\n\nif(baseImage.empty()){\n\n    printf(\"%s EMPTY!\\n\", baseImagePath);\n\n}\n\ncvtColor(baseImage, grayImage1, COLOR_BGR2GRAY);\n\nnextImage = imread(nextImagePath, CV_LOAD_IMAGE_COLOR);\n\nif(nextImage.empty()){\n\n    printf(\"%s EMPTY!\\n\", nextImagePath);\n\n}\n\ncvtColor(nextImage, grayImage2, COLOR_BGR2GRAY);\n</code></pre>\n\n<p>So, this is very odd.  When I run my code, I confirm that my program thinks the image at a specific frame is empty, but when I run:</p>\n\n<pre><code>display frame.jpg\n</code></pre>\n\n<p>were frame.jpg is the frame that my program claims is empty, imageMagick displays the video just fine. </p>\n"}, {"tags": ["c++", "qt", "qtreeview", "qabstractitemmodel"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1443049921, "post_id": 32749504, "comment_id": 53342433, "body": "It&#39;s certainly possible by having extra elements in the tree, and not using a header view. You might do it by a viewmodel proxy - a proxy that&#39;s used only for the purposes of viewing the data the way you want it viewed."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1443050476, "post_id": 32749504, "comment_id": 53342594, "body": "Wouldn&#39;t extra elements be shown as additional rows rather than part of the already existing rows?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1443050508, "post_id": 32749504, "comment_id": 53342608, "body": "I don&#39;t know anything about view model proxy, I&#39;ll read up on that. Thanks for the suggestion"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1443097606, "post_id": 32749504, "comment_id": 53361619, "body": "There is no Qt documentation on that per se. The viewmodel is an abstract concept, with multiple possible implementations, and even multiple classes of implementations. One is when the viewmodel provides data to lay out controls. Another is when the viewmodel adapts the data from another model for a particular display scenario."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1443110322, "post_id": 32749504, "comment_id": 53370791, "body": "Thanks for the suggestion - I have pretty much managed exactly what I was looking for - kudos to you! I&#39;ve added an answer with the details of putting your suggestions to work, for posterity"}], "answers": [{"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 5, "last_activity_date": 1443110253, "last_edit_date": 1495539981, "creation_date": 1443110253, "answer_id": 32765867, "question_id": 32749504, "link": "https://stackoverflow.com/questions/32749504/qtreeview-hierarchical-context-for-multi-level-columns/32765867#32765867", "title": "QTreeView: hierarchical context for multi-level columns", "body": "<p>At the suggestion of <a href=\"https://stackoverflow.com/users/1329652/kuba-ober\">@Kuba Ober</a> I added an extra row at position 0 in each hierarchy of the tree. It has no children.</p>\n\n<p>The model is then configured to special case for <code>index.row() == 0</code>, knowing that this row is a header row rather than a data row.</p>\n\n<p>eg: in <code>Model::flags</code> the header row is not editable</p>\n\n<pre><code>Qt::ItemFlags Model::flags(const QModelIndex&amp; index) const\n{\n    Qt::ItemFlags item_flags = Qt::ItemIsEnabled | Qt::ItemIsSelectable;\n\n    // header row is not editable\n    if (index.row() != 0)\n        item_flags |= Qt::ItemIsEditable;\n\n    return item_flags;\n}\n</code></pre>\n\n<p>I now return empty strings for <code>headerData</code> as the headers are in the tree itself</p>\n\n<pre><code>QVariant Model::headerData(int i, Qt::Orientation orientation, int role) const\n{\n    if (role == Qt::DisplayRole)\n    {\n        switch (orientation)\n        {\n            case Qt::Horizontal:\n                return QVariant(); // no column header, it's already in the tree\n            ...\n</code></pre>\n\n<p>I also change the background color for the header so it stands out</p>\n\n<pre><code>QVariant Model::data(const QModelIndex&amp; index, int role)  const\n{\n    switch (role)\n    {\n        case Qt::BackgroundColorRole:\n            if (index.row() == 0) // header row\n                return QColor(Qt::darkGray);\n            break;\n        ...\n</code></pre>\n\n<p>The result is almost exactly what I was looking for</p>\n\n<p><a href=\"https://i.stack.imgur.com/GaWDZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GaWDZ.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1712, "favorite_count": 3, "accepted_answer_id": 32765867, "answer_count": 1, "score": 4, "last_activity_date": 1443110253, "creation_date": 1443042497, "last_edit_date": 1443046106, "question_id": 32749504, "link": "https://stackoverflow.com/questions/32749504/qtreeview-hierarchical-context-for-multi-level-columns", "title": "QTreeView: hierarchical context for multi-level columns", "body": "<p>I'm looking for a better way to display multi-level hierarchical data in a tree where <strong>the meaning of each column changes depending on the level in the tree</strong>.</p>\n\n<p>I am using <code>QTreeView</code> and <code>QAbstractItemModel</code> to display my model data.</p>\n\n<p>Each model row has a <strong>different number of columns</strong> and <strong>different column names</strong> depending on its level in the hierarchy.</p>\n\n<p>In order to give context to the data displayed in the tree, I need to have column headers for each level in the hierarchy.</p>\n\n<p>The problem is that <code>QTreeView</code> only has 1 set of column headers.</p>\n\n<p><strong>Current method</strong></p>\n\n<p>At the moment I'm changing the headers each time the selected row changes.</p>\n\n<p>I do this by connecting to the tree view's <code>selectionModel</code>, and emitting a signal with the new <code>QModelIndex</code> each time the selection changes</p>\n\n<pre><code>void Window::slotOnSelectionChanged(const QItemSelection&amp; new_selection, const QItemSelection&amp; old_selection)\n{\n    QItemSelectionModel* selection_model = _view-&gt;selectionModel();\n    QModelIndex index = selection_model-&gt;currentIndex();\n    if (index.isValid())\n        emit selectedIndexChanged(index);\n}\n</code></pre>\n\n<p>In my model I connect to this signal, and when its fires, store the selected row, and force a column header update</p>\n\n<pre><code>void Model::slotOnSelectedIndexChanged(QModelIndex index)\n{\n    assert(index.isValid());\n    _selected_row = modelRow(index);\n    emit headerDataChanged(Qt::Horizontal, 0, _root-&gt;numColumns());\n}\n</code></pre>\n\n<p>In the <code>QAbstrateItemModel::headerData</code> callback I then use <code>selected_row</code> to get the header for the currently selected row</p>\n\n<pre><code>QVariant Model::headerData(int i, Qt::Orientation orientation, int role) const\n{\n    if (role == Qt::DisplayRole)\n    {\n        switch (orientation)\n        {\n            case Qt::Horizontal:\n                return QVariant(_selected_row-&gt;header(i));\n            ...\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<p>The result can be seen below - notice how the column headers change as the selected row changes.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PzTUR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PzTUR.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/E6WoL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E6WoL.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/Mj3FP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mj3FP.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Problem</strong></p>\n\n<p>It's not immediately obvious by just looking at the view what each datum is, and therefore the user is required to change rows in order to see what each column actually means.</p>\n\n<p>What I'd like is to have some sort of embedded column header row, 1 per level in the hierarchy.</p>\n\n<p>Something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0StCY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0StCY.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Questions</strong></p>\n\n<ul>\n<li>Is this possible? </li>\n<li>If there is a better way to give context to the data in the tree, please do offer a suggestion.</li>\n</ul>\n"}, {"tags": ["c++", "winapi", "directx"], "answers": [{"tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": false, "score": 3, "last_activity_date": 1443044500, "creation_date": 1443044500, "answer_id": 32749994, "question_id": 32749215, "link": "https://stackoverflow.com/questions/32749215/how-to-get-hmonitor-information-in-msdn-windows/32749994#32749994", "title": "How to get HMONITOR information in MSDN Windows?", "body": "<p>Raymond Chen gives the answer <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2007/08/09/4300545.aspx\" rel=\"nofollow\">on his blog</a>.</p>\n\n<p>Here's the most important part:</p>\n\n<blockquote>\n  <p>The primary monitor by definition has its upper left corner at (0, 0). Therefore, you can use this function:</p>\n\n<pre><code>HMONITOR GetPrimaryMonitorHandle()\n{\n    const POINT ptZero = { 0, 0 };\n    return MonitorFromPoint(ptZero, MONITOR_DEFAULTTOPRIMARY);\n}\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 571, "user_id": 4794952, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/5MCUi.jpg?s=128&g=1", "display_name": "newbie2015", "link": "https://stackoverflow.com/users/4794952/newbie2015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2059, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1443815106, "creation_date": 1443041359, "last_edit_date": 1443815106, "question_id": 32749215, "link": "https://stackoverflow.com/questions/32749215/how-to-get-hmonitor-information-in-msdn-windows", "title": "How to get HMONITOR information in MSDN Windows?", "body": "<p>What I require to do is pass a handle to the primary monitor to the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb173068%28v=vs.85%29.aspx\" rel=\"nofollow\">DXGI_OUTPUT_DESC structure</a> in Windows so that the RECT of DesktopCoordinates has only the primary monitor dimensions even if multiple monitors are connected.</p>\n\n<p>Here is the structure of DXGI_OUTPUT_DESC:</p>\n\n<pre><code>typedef struct DXGI_OUTPUT_DESC {\n  WCHAR              DeviceName[32];\n  RECT               DesktopCoordinates;\n  BOOL               AttachedToDesktop;\n  DXGI_MODE_ROTATION Rotation;\n  HMONITOR           Monitor;\n} DXGI_OUTPUT_DESC;\n</code></pre>\n\n<p>However I referred to almost all <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd144901%28v=vs.85%29.aspx\" rel=\"nofollow\">GetMonitorInfo</a> functions in the MSDN directory which have HMONITOR parameter but all are <em>In</em> and none of them return a Handle to the monitor. </p>\n\n<p>So basically my question is what function or command do I use so that a handle to the primary monitor is returned which then I can modify in the DXGI_OUTPUT_DESC in order to modify the RECT of DesktopCoordinates to match the dimensions of the primary monitor.</p>\n\n<p>This question is obviously for the case when there are multiple monitors connected to the system but I require the dimensions only of the primary monitor.</p>\n"}, {"tags": ["c++", "g++", "undefined-reference"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1443041422, "post_id": 32749188, "comment_id": 53339133, "body": "Related ? <a href=\"http://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\" title=\"why can templates only be implemented in the header file\">stackoverflow.com/questions/495021/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1443041532, "post_id": 32749188, "comment_id": 53339188, "body": "<i>@tomtom</i> It&#39;s not linking order in this particular case, but otherwise it matters, yes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4833046"}, "edited": false, "score": 0, "creation_date": 1443042676, "post_id": 32749188, "comment_id": 53339750, "body": "Solution: At the end of each *.h file I included related *.cpp file. And then in compilation I omitted vector.cpp and vector_base.cpp files: g++ 5.cpp -o 5"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443042809, "post_id": 32749188, "comment_id": 53339812, "body": "@tomtom Refer to the duplicate marked answers. These actually solve your problem. Including <code>.cpp</code> files from template headers confuse your build system. Choose a different source file extension for these."}], "owner": {"user_type": "does_not_exist", "display_name": "user4833046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1443041387, "answer_count": 0, "score": 0, "last_activity_date": 1443041769, "creation_date": 1443041273, "last_edit_date": 1443041769, "question_id": 32749188, "link": "https://stackoverflow.com/questions/32749188/g-undefined-reference-to-classfunction-when-using-templates", "closed_reason": "Duplicate", "title": "g++ undefined reference to class::function when using templates", "body": "<p>Some \"undefined reference error\" questions are already posted on StackOverflow but I couldn't find solution to my problem.</p>\n\n<p>My project contains 5 files: 5.cpp vector_base.h vector_base.cpp vector.h vector.cpp</p>\n\n<p>I compile it with:</p>\n\n<pre><code>g++ -std=c++11 vector_base.cpp vector.cpp 5.cpp -o 5\n</code></pre>\n\n<p>And get the following error:</p>\n\n<pre><code>/tmp/ccO8NeGJ.o: In function `main':\n5.cpp:(.text.startup+0x21): undefined reference to `Vector&lt;int, std::allocator&lt;int&gt; &gt;::Vector(unsigned int, int const&amp;, std::allocator&lt;int&gt; const&amp;)'\n5.cpp:(.text.startup+0x2b): undefined reference to `Vector&lt;int, std::allocator&lt;int&gt; &gt;::destroy_elements()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>well, code looks fine for me. Where did I mess up?</p>\n\n<p>The code is as follows: </p>\n\n<p>5.cpp</p>\n\n<pre><code>#include \"vector.h\"\n\nint main() {\n    Vector&lt;int&gt; a{10, 0};\n}\n</code></pre>\n\n<p>vector.h</p>\n\n<pre><code>#ifndef VECTOR_H\n#define VECTOR_H\n\n#include \"vector_base.h\"\n\ntemplate&lt;class T, class A = std::allocator&lt;T&gt;&gt;\nclass Vector {\nprivate:\n    vector_base&lt;T,A&gt; vb;\n    void destroy_elements();\n\npublic:\n    using size_type = unsigned int;\n\n    explicit Vector(size_type n, const T&amp; val = T(), const A&amp; a = A());\n    ~Vector() { destroy_elements(); }\n};\n\n#endif //VECTOR_H\n</code></pre>\n\n<p>vector.cpp</p>\n\n<pre><code>#include \"vector.h\"\n\n#include &lt;algorithm&gt;\n#include &lt;memory&gt;\n\ntemplate&lt;class T, class A&gt;\nVector&lt;T,A&gt;::Vector(size_type n, const T&amp; val, const A&amp; a)\n    :vb{a, n}\n{\n    std::uninitialized_fill(vb.elem, vb.elem + n, val);\n}\n\ntemplate&lt;class T, class A&gt;\nvoid Vector&lt;T,A&gt;::destroy_elements()\n{\n    for(T* p = vb.elem; p!=vb.space; ++p){\n        p-&gt;~T();\n    }\n    vb.space=vb.elem;\n}\n</code></pre>\n\n<p>vector_base.h</p>\n\n<pre><code>#ifndef VECTOR_BASE_H\n#define VECTOR_BASE_H\n\n#include &lt;memory&gt;\n\ntemplate&lt;class T, class A = std::allocator&lt;T&gt;&gt;\nstruct vector_base {\n\n    T* elem;\n    T* space;\n    T* last;\n    A alloc;\n\n    using size_type = unsigned int;\n\n    vector_base(const A&amp; a, typename A::size_type n)\n        :alloc{a}, elem{alloc.allocate(n)}, space{elem+n}, last{elem+n} {}\n\n    ~vector_base() { alloc.deallocate(elem, last-elem); }\n};\n#endif //VECTOR_BASE_H\n</code></pre>\n\n<p>vector_base.cpp</p>\n\n<pre><code>#include \"vector_base.h\"\n#include &lt;algorithm&gt;\n\ntemplate&lt;class T, class A&gt;\nvector_base&lt;T,A&gt;::vector_base(const vector_base&amp;&amp; a)\n    :alloc{a.alloc}, elem{a.elem}, space{a.space}, last{a.last}\n{\n    a.elem = a.space = a.last = nullptr;\n}\n\ntemplate&lt;class T, class A&gt;\nvector_base&lt;T,A&gt;&amp; vector_base&lt;T,A&gt;::operator=(const vector_base&amp;&amp; a)\n{\n    swap(*this, a);\n    return *this;\n}\n</code></pre>\n\n<p>I tried compile every cpp file separately and then link all but it didn't work also. </p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010", "iterator", "initialization"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1443040881, "post_id": 32748870, "comment_id": 53338855, "body": "@JamesAdkison, you clearly do. There is nothing wrong in HAVING unititialized iterator, as long as it is not dereferenced. As for why, it is easy to see how this can happen when iterators are members of some objects, and one object (which was initialized in a certain way) is assigned to another, which was not."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1443041386, "post_id": 32748870, "comment_id": 53339109, "body": "@JamesAdkison, I am not an OP, so I am not sure what he is trying to do. But, taking the post at the face value (I have no means to verify it) the code provided should not crash program. If it does, it is a bad implementation bug. I was trying to see when this might happen in real life, as obviously code posted is demonstrational. And I am not sure what you mean by &#39;mixing&#39;. You are not supposed to compare those iterators, of course. But there is nothing wrong in assigning them to each other."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443042570, "post_id": 32748870, "comment_id": 53339690, "body": "@SergeyA Well said. In my actual code the <code>const_iterator</code> is an object member. So assignment of one of my default constructed objects will cause this assignment to happen. As you say there&#39;s nothing wrong with this, but I can&#39;t get my hands on a patch. And I&#39;m loathe to say that I am considering stomping the non-working files with working files. Which is a truly terrible plan."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443042944, "post_id": 32748870, "comment_id": 53339887, "body": "Sorry, can&#39;t be of any help here. Know almost nothing of Windows compilers. You might want to reach out to folks working for Microsoft and having blogs and as this in comments to unrelated posts :). Probably, <a href=\"http://blogs.msdn.com/b/vcblog/\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/vcblog</a> would be a place to start?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1443043188, "post_id": 32748870, "comment_id": 53340001, "body": "I&#39;m fairly sure this is technically UB. <code>uninitialized</code> is singular, and [iterator.requirements.general]/p6 makes clear that &quot;Results of most expressions are undefined for singular values; the only exceptions are destroying an iterator that holds a singular value, the assignment of a non-singular value to an iterator that holds a singular value, and, for iterators that satisfy the <code>DefaultConstructible</code> requirements, using a value-initialized iterator as the source of a copy or move operation.&quot;"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1443043547, "post_id": 32748870, "comment_id": 53340167, "body": "This appears to be <a href=\"https://support.microsoft.com/en-us/kb/2545588\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/kb/2545588</a>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443058269, "post_id": 32748870, "comment_id": 53344431, "body": "@T.C. Can you help me understand what is meant here by &quot;singular value.&quot; The linked hot fix and your comment both use the term and I&#39;m not sure what that means. That hot fix is very promising though. I&#39;m gonna try it tomorrow morning."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1443058738, "post_id": 32748870, "comment_id": 53344535, "body": "@JonathanMee A singular value is one that&#39;s not associated with any sequence. For instance, null or uninitialized pointers."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443063058, "post_id": 32748870, "comment_id": 53345523, "body": "@T.C. Wow, that hot fix is exactly what I need then. Your quote also makes my assignment seem terrifyingly illegal."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443097774, "post_id": 32748870, "comment_id": 53361734, "body": "@T.C. Wonderful! You are correct that that hotfix solved my issue. Could you put that in an answer that I can accept? Incidentally the page you linked is only the knowledge base article. A download link can be requested here: <a href=\"http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2545588&amp;kbln=en-us\" rel=\"nofollow noreferrer\">support.microsoft.com/hotfix/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1443438350, "post_id": 32789107, "comment_id": 53478346, "body": "Incidentally the page you linked is only the knowledge base article. A download link can be requested here: <a href=\"http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2545588&amp;kbln=en-us\" rel=\"nofollow noreferrer\">support.microsoft.com/hotfix/&hellip;</a>"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1443208319, "creation_date": 1443208319, "answer_id": 32789107, "question_id": 32748870, "link": "https://stackoverflow.com/questions/32748870/visual-studio-const-iterator-assignment-error/32789107#32789107", "title": "Visual Studio const_iterator Assignment Error", "body": "<p>This code has undefined behavior. [iterator.requirements.general]/p6:</p>\n\n<blockquote>\n  <p>Iterators can also have singular values that are not associated with\n  any sequence. [ <em>Example</em>: After the declaration of an uninitialized\n  pointer <code>x</code> (as with <code>int* x;</code>), <code>x</code> must always be assumed to have a\n  singular value of a pointer. \u2014<em>end example</em> ] Results of most\n  expressions are undefined for singular values; the only exceptions are\n  destroying an iterator that holds a singular value, the assignment of\n  a non-singular value to an iterator that holds a singular value, and,\n  for iterators that satisfy the <code>DefaultConstructible</code> requirements,\n  using a value-initialized iterator as the source of a copy or move\n  operation. [ <em>Note</em>: This guarantee is not offered for default\n  initialization, although the distinction only matters for types with\n  trivial default constructors such as pointers or aggregates holding\n  pointers. \u2014<em>end note</em> ] In these cases the singular value is\n  overwritten the same way as any other value. Dereferenceable values\n  are always non-singular.</p>\n</blockquote>\n\n<p><code>uninitialized</code> is singular, and its use doesn't fall within any of the exceptions listed in the paragraph.</p>\n\n<p>However, given the snippets you post, I suspect that your code wouldn't work either even if you value-initialize <code>uninitialized</code>, which is a bug in Microsoft's implementation, and which they fixed in a <a href=\"https://support.microsoft.com/en-us/kb/2545588\" rel=\"nofollow\">later hotfix</a>.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 32789107, "answer_count": 1, "score": 2, "last_activity_date": 1443208319, "creation_date": 1443040098, "question_id": 32748870, "link": "https://stackoverflow.com/questions/32748870/visual-studio-const-iterator-assignment-error", "title": "Visual Studio const_iterator Assignment Error", "body": "<p>The assignment of a default constructed <code>vector&lt;int*&gt;::const_iterator</code> errors on Visual Studio 2010. I've tried this on 5 Visual Studio 2010 systems that all have Service Pack 1. It fails on 3/5 machines, I've been able to identify what is causing the failure on the 3 systems but I cannot seem to find a bug report.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main() {\n    vector&lt;int*&gt; vec;\n    int arr[3] = {};\n\n    for(int i = 0; i &lt; sizeof(arr) / sizeof(arr[0]); ++i) vec.push_back(arr + i);\n\n    vector&lt;int*&gt;::const_iterator initialized = vec.cbegin();\n    vector&lt;int*&gt;::const_iterator uninitialized;\n\n    initialized = uninitialized;\n\n    cout &lt;&lt; \"Hello World\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Clearly everything but the <code>cout &lt;&lt; \"Hello World\" &lt;&lt; endl;</code> is optimized out in Release so this minimal example will only fail in Debug. But in Debug the error it gives is:</p>\n\n<blockquote>\n  <p>Unhandled exception at 0x01071e14 in test.exe: 0xC0000005: Access violation reading location 0x00000000.</p>\n</blockquote>\n\n<p>Comparing the working and non-working MSVCP100D.dlls that were linked shows that there is a slight discrepancy, the working .dll is Product Version: 10.0.40219.325 and the non-working .dll is Product Version: 10.0.40219.1.</p>\n\n<p>The actual error occurs in</p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\xutility</p>\n</blockquote>\n\n<p>And again diffing the working and non-working version shows that a change has been made to the working version. The non-working code simply says:</p>\n\n<pre><code>if (_Myproxu != _Right._Myproxy)\n    _Adopt(_Right._Myproxy-&gt;_Mycont);\n</code></pre>\n\n<p>The working code says:</p>\n\n<pre><code>if (_Myproxy == _Right._Myproxy)\n    ;\nelse if (_Right._Myproxy != 0)\n    _Adopt(_Right._Myproxy-&gt;_Mycont);\nelse\n    {   // becoming invalid, disown current parent\n    _Lockit _Lock(_LOCK_DEBUG);\n    _Orphan_me();\n    }\n</code></pre>\n\n<p>All that to say, here's my actual question. How do I get this update? I've updated to the latest using Windows Update, but the problem has not been resolved. Is there some hidden patch that I need to go somewhere to get? I can't find this issue written up anywhere, so I also can't find information about the patch.</p>\n"}, {"tags": ["c++", "c++11", "gcc", "embedded-linux"], "comments": [{"owner": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "edited": false, "score": 0, "creation_date": 1443040164, "post_id": 32748823, "comment_id": 53338477, "body": "what is the latest gcc version you can upgrade to on your board ? What are the potential problems if you update with this version ?"}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "edited": false, "score": 0, "creation_date": 1443040286, "post_id": 32748823, "comment_id": 53338536, "body": "In fact I don&#180;t know. This is the version available and it does not seem to have a newer compiler. My idea is to build the gcc compiler locally in the board. I&#180;m using XLinux from <code>http:&#47;&#47;www.dmp.com.tw&#47;tech&#47;os-xlinux&#47;</code>"}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 1, "creation_date": 1443040726, "post_id": 32748823, "comment_id": 53338773, "body": "Consider <a href=\"http://www.linuxfromscratch.org/blfs/view/svn/general/gcc.html\" rel=\"nofollow noreferrer\">linuxfromscratch.org/blfs/view/svn/general/gcc.html</a>, which details the procedure independent of which version of Linux one is using. It discusses the care to be taken regarding the standard library on your version of linux (i.e. not XLinux specifically, but whatever version of Linux one may have). It&#39;s aimed, it SEEMS, to those on unusual flavors lacking &#39;mainstream&#39; support for upgrading GCC."}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 1, "creation_date": 1443041018, "post_id": 32748823, "comment_id": 53338906, "body": "Further, you have asked for a large range of potential answers. C++0x and C++11 support have come incrementally in GCC, where, say, 4.4 is possibly sufficient for your code, but perhaps you require ranged based for, which started around 4.6 (see <a href=\"https://gcc.gnu.org/projects/cxx0x.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/projects/cxx0x.html</a> and similar for a chart). It seems deprecation of i386 began around 4.8, and I don&#39;t yet find info on i486, but by 4.8 or 4.9, which has i486 support, there is significant C++11 coverage"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1457013713, "creation_date": 1443039900, "last_edit_date": 1457013713, "question_id": 32748823, "link": "https://stackoverflow.com/questions/32748823/c11-std-c0x-support-on-vortex86dx-i486-hardware-and-gcc", "title": "C++11 (std=c++0x) support on Vortex86DX i486 hardware and gcc", "body": "<p>I\u00b4m building a project that I need to run in a Vortex86DX i486 embedded system. It comes with a so called D&amp;P XLinux (<a href=\"http://www.dmp.com.tw/tech/os-xlinux/\" rel=\"nofollow\">http://www.dmp.com.tw/tech/os-xlinux/)</a>.</p>\n\n<p>There I need support for C++11 (std=c++0x), where the compiler that comes with the board does not support - gcc version 3.2.3.</p>\n\n<p>I was checking the GCC page to check how shall I upgrade my current compiler and I have my doubts about how to upgrade the compiler and choose the correct version:</p>\n\n<p>a) Which is the first GCC version that supported C++11 ? \nb) Does that version has support for i486 ? Can I built it for my Vortex hardware ?\nc) Is there a better approach to support C++11 on this hardaware ?</p>\n\n<p>In fact, my other alternative is to change the code <em>not</em> to use C++11. That will be a huge effort and some libraries (like cryptopp) may make this very problematic.</p>\n\n<p>Thanks for hints and help.</p>\n"}, {"tags": ["c++", "r", "rcpp"], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1443058113, "post_id": 32750684, "comment_id": 53344395, "body": "Another nice and patient answer-- well done, @nrussell"}], "tags": [], "owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "is_accepted": true, "score": 2, "last_activity_date": 1443048853, "last_edit_date": 1443048853, "creation_date": 1443048197, "answer_id": 32750684, "question_id": 32748796, "link": "https://stackoverflow.com/questions/32748796/rcpp-dataframe-not-contextually-convertible-to-bool/32750684#32750684", "title": "Rcpp dataframe not contextually convertible to bool", "body": "<p>There are a couple of syntax issues worth pointing out in your code. First, <code>NULL</code> has a <em>very</em> <a href=\"http://en.cppreference.com/w/cpp/types/NULL\" rel=\"nofollow\">different meaning in C/C++</a> than it does in R - don't use it in the way that you did above. You can use <code>R_NilValue</code> in your Rcpp code to represent R's <code>NULL</code>. Additionally, your function parameters aren't declared correctly. Syntactically, this statement - </p>\n\n<pre><code>Rcpp::DataFrame(masslist)\n</code></pre>\n\n<p>is calling the constructor / copy constructor for the <code>DataFrame</code> class on (presumably) another <code>DataFrame</code> object named <code>masslist</code>, but that's not what you want and it would not compile anyways. Your function signatures (broadly speaking) need to be more like </p>\n\n<p><code>ReturnType function_name(ParamType1 param1, ParamType2 param2, ...)</code> </p>\n\n<p>or, with default arguments, </p>\n\n<p><code>ReturnType function_name(ParamType1 param1 = p1, ParamType2 param2 = p2, ...)</code> </p>\n\n<p>where <code>p1</code> and <code>p2</code> are actual values, not variables. </p>\n\n<hr>\n\n<p>In your case, I really think it's much simpler to write an Rcpp function that <em>does not</em> have default arguments, and call it from a simple wrapper function in R that specifies defaults. For example, </p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\n// [[Rcpp::export]]\nRcpp::DataFrame FindFormulaCpp(Rcpp::DataFrame masslist_,\n                             Rcpp::DataFrame params_,\n                             Rcpp::DataFrame isotope_) {\n  // do whatever\n\n  return Rcpp::DataFrame::create(Rcpp::Named(\"Result\") = Rcpp::rnorm(5));\n}\n\n\n/*** R\n\nmasslist &lt;- data.frame(x = 1:5, y = 6:10)\nparams &lt;- data.frame(a = rnorm(5), b = 1:5)\nisotope &lt;- data.frame(e = letters[1:5])\n\nRFindFormula &lt;- function(arg1 = masslist, arg2 = params, arg3 = isotope) {\n  FindFormulaCpp(arg1, arg2, arg3)\n}\n\nR&gt; RFindFormula()\n# Result\n# 1  0.84583003\n# 2 -0.65687178\n# 3 -1.05891172\n# 4 -0.06872972\n# 5 -0.19695890\n\n*/\n</code></pre>\n\n<hr>\n\n<p>However, if you <em>insist</em> on handling this from C++, you could do something to this effect: </p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\nstruct my_defaults {\n  Rcpp::DataFrame masslist, params, isotope;\n  my_defaults() {\n    masslist = Rcpp::Environment::global_env()[\"masslist\"];\n    params = Rcpp::Environment::global_env()[\"params\"];\n    isotope = Rcpp::Environment::global_env()[\"isotope\"];\n  }\n};\n\n// [[Rcpp::export]]\nRcpp::DataFrame FindFormula(Rcpp::DataFrame masslist_ = R_NilValue,\n                            Rcpp::DataFrame params_ = R_NilValue,\n                            Rcpp::DataFrame isotope_ = R_NilValue) {\n  Rcpp::DataFrame masslist, params, isotope;\n  my_defaults defaults;\n\n  if (masslist_.size() == 0) {\n    masslist = defaults.masslist;\n  } else {\n    masslist = masslist_;\n  }\n  // likewise for the others\n  return masslist;\n}\n</code></pre>\n\n<hr>\n\n<p>It's not necessary to define your default arguments in a <code>struct</code> like I did above, you could just as well call, e.g. <code>masslist = Rcpp::Environment::global_env()[\"masslist\"];</code> inside your function, but the former approach feels a little more organized IMO. Regardless, I would strongly recommend taking the first approach if at all possible.</p>\n"}], "owner": {"reputation": 23, "user_id": 5364807, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102567701462651/picture?type=large", "display_name": "ngreen08", "link": "https://stackoverflow.com/users/5364807/ngreen08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 32750684, "answer_count": 1, "score": 1, "last_activity_date": 1443048853, "creation_date": 1443039764, "question_id": 32748796, "link": "https://stackoverflow.com/questions/32748796/rcpp-dataframe-not-contextually-convertible-to-bool", "title": "Rcpp dataframe not contextually convertible to bool", "body": "<p>How would you normally handle default values when using dataframes (from Rcpp)?</p>\n\n<p>Here is what I've attempted:</p>\n\n<pre><code>// [[Rcpp::export]]\nRcpp::DataFrame FindFormula(Rcpp::DataFrame(masslist),Rcpp::DataFrame(params)=NULL\n  ,Rcpp::DataFrame(isotope)=NULL) {\n\n  // access masslist by column\n  Rcpp::NumericVector mass = masslist[\"exp mass\"];\n  Rcpp::IntegerVector  mag = masslist[\"intensity\"];\n\n  // default params, if no entry\n  if (params==NULL)\n  {\n    // access params by column\n    Rcpp::StringVector param = params[\"value\"];\n\n    // assign param variables (string to value)\n    double tol = std::stod(param[0]);\n    int charge = std::stoi(param[1]);\n  }\n  else\n  {\n    // default params\n    double tol = 0.4;\n    int charge =   0;\n  }\n</code></pre>\n\n<p>The params==NULL expression is where I get the error.  This seems to work if I define params as an int or array.  I haven't written much C++ and am new to Rcpp, so I'd appreciate anyone who knows more about dataframe.</p>\n"}, {"tags": ["c++", "opencv", "if-statement", "compare", "point"], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 2836175, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0xZKP.jpg?s=128&g=1", "display_name": "avidreader610", "link": "https://stackoverflow.com/users/2836175/avidreader610"}, "edited": false, "score": 0, "creation_date": 1443040008, "post_id": 32748817, "comment_id": 53338396, "body": "Ah. That was stupid. Thanks. Should I delete the question? It&#39;s not really worth anything and is totally useless to anyone else."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 465, "user_id": 2836175, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0xZKP.jpg?s=128&g=1", "display_name": "avidreader610", "link": "https://stackoverflow.com/users/2836175/avidreader610"}, "edited": false, "score": 0, "creation_date": 1443040045, "post_id": 32748817, "comment_id": 53338417, "body": "It&#39;s a pretty common mistake. Fine with me if you delete the question."}, {"owner": {"reputation": 465, "user_id": 2836175, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0xZKP.jpg?s=128&g=1", "display_name": "avidreader610", "link": "https://stackoverflow.com/users/2836175/avidreader610"}, "edited": false, "score": 0, "creation_date": 1443040091, "post_id": 32748817, "comment_id": 53338440, "body": "ok. Thanks for your help. Cheers!"}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": false, "score": 3, "last_activity_date": 1443039871, "creation_date": 1443039871, "answer_id": 32748817, "question_id": 32748672, "link": "https://stackoverflow.com/questions/32748672/comparing-two-points-if-pointa-pointb-opencv/32748817#32748817", "title": "Comparing two points: if (pointa == pointb) (OpenCV)", "body": "<pre><code>if (ptA == ptB);\n            // ^ This is the problem\n{  \n    // Do something\n}\n</code></pre>\n\n<p>The trailing semi-colon ends the body of the if-statement therefore the subsequent code is always executed.</p>\n\n<p>In other words you want this:</p>\n\n<pre><code>if (ptA == ptB)\n            // ; - removed\n{  \n    // Do something\n}\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 2836175, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0xZKP.jpg?s=128&g=1", "display_name": "avidreader610", "link": "https://stackoverflow.com/users/2836175/avidreader610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1794, "favorite_count": 0, "closed_date": 1443634401, "answer_count": 1, "score": -2, "last_activity_date": 1443039871, "creation_date": 1443039290, "question_id": 32748672, "link": "https://stackoverflow.com/questions/32748672/comparing-two-points-if-pointa-pointb-opencv", "closed_reason": "Not suitable for this site", "title": "Comparing two points: if (pointa == pointb) (OpenCV)", "body": "<p>I'm trying to catch when two points match (ie x co-ordinates the same, <code>ptA.x == ptB.x</code>, and the same for y). OpenCV docs say I should be able to do this just by comparing the points:</p>\n\n<pre><code>Point2i ptA = Point(0,0);\nPoint2i ptB = Point(160,120);\n\nif(ptA == ptB);\n{  \n    // Do something\n}\n</code></pre>\n\n<p>However, my code in the <code>if</code> loop always executes, which means that <code>ptA == ptB</code> is always true, even if I know it's not.</p>\n\n<p>What am I doing wrong? What can I do to compare whether two points are the same?</p>\n"}, {"tags": ["c++", "double"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 3, "creation_date": 1443038671, "post_id": 32748488, "comment_id": 53337705, "body": "change <code>int value;</code> to <code>double value;</code>"}, {"owner": {"reputation": 11651, "user_id": 135078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1e0094a4b0e705a0fe607e4a1a8ff426?s=128&d=identicon&r=PG", "display_name": "Kelly S. French", "link": "https://stackoverflow.com/users/135078/kelly-s-french"}, "edited": false, "score": 1, "creation_date": 1443038795, "post_id": 32748488, "comment_id": 53337759, "body": "&#39;value&#39; is an int and probably isn&#39;t automatically being cast to a reference to a double but that is a shot in the dark.  Please provide the error."}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1443038815, "post_id": 32748488, "comment_id": 53337771, "body": "You&#39;re passing an int, instead of a double to simplex.  Cast it, change it or overload the function.  @PiotrSkotnicki is right on the money."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1443039370, "post_id": 32748488, "comment_id": 53338064, "body": "@MrPickles Casting isn&#39;t a good idea as the sizes of int and double are most likely different."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 11651, "user_id": 135078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1e0094a4b0e705a0fe607e4a1a8ff426?s=128&d=identicon&r=PG", "display_name": "Kelly S. French", "link": "https://stackoverflow.com/users/135078/kelly-s-french"}, "edited": false, "score": 0, "creation_date": 1443039379, "post_id": 32748488, "comment_id": 53338066, "body": "@KellyS.French actually, the compiler could apply here a floating-integral conversion, but it produces an rvalue, while the function expects a modifiable lvalue"}], "answers": [{"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": false, "score": 2, "last_activity_date": 1443038742, "creation_date": 1443038742, "answer_id": 32748547, "question_id": 32748488, "link": "https://stackoverflow.com/questions/32748488/how-to-call-function-having-double/32748547#32748547", "title": "How to call function having double&amp;", "body": "<p><code>value</code> is an <code>int</code>, but <code>simplex</code> wants a reference to a <code>double</code>, not to an <code>int</code>. Just change the type of <code>value</code> to <code>double</code> and it will work.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1443038745, "creation_date": 1443038745, "answer_id": 32748549, "question_id": 32748488, "link": "https://stackoverflow.com/questions/32748488/how-to-call-function-having-double/32748549#32748549", "title": "How to call function having double&amp;", "body": "<p>Instead of </p>\n\n<pre><code>int value;\nint value_F = simplex(row,col, A,B, value);\n</code></pre>\n\n<p>use</p>\n\n<pre><code>double value;\n// ^^^ a double not an int\nint value_F = simplex(row,col, A,B, value);\n</code></pre>\n\n<p>An <code>int</code> can be converted to a <code>double</code> but not to a <code>double&amp;</code>.</p>\n"}], "owner": {"reputation": 2657, "user_id": 1282443, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f387343b87e10c08401bf123d7709be0?s=128&d=identicon&r=PG", "display_name": "osimer pothe", "link": "https://stackoverflow.com/users/1282443/osimer-pothe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 32748549, "answer_count": 2, "score": -1, "last_activity_date": 1443038745, "creation_date": 1443038506, "question_id": 32748488, "link": "https://stackoverflow.com/questions/32748488/how-to-call-function-having-double", "title": "How to call function having double&amp;", "body": "<p>I have read arguments by the following code : </p>\n\n<pre><code>int row,col;\ndouble A[maxm][maxn];\ndouble B[maxn];\ndouble N[maxn];\n\nvoid read_file()\n{\n    freopen(\"Dimen.txt\",\"r\",stdin);\n\n    scanf(\"%d\",&amp;row);\n    scanf(\"%d\",&amp;col);\n\n    freopen(\"A.txt\",\"r\",stdin);\n    for(int i=0;i&lt;row;i++)\n       for(int j=0;j&lt;col;j++)\n         scanf(\"%lf\",&amp;A[i][j]);\n\n    freopen(\"B.txt\",\"r\",stdin);\n    for(int i=0;i&lt;row;i++)\n       scanf(\"%lf\",&amp;A[i][col]);\n\n    freopen(\"F.txt\",\"r\",stdin);\n    for(int i=0;i&lt;row;i++)\n        scanf(\"%lf\",&amp;B[i]);\n\n    int value;\n    int value_F = simplex(row,col, A,B, value);\n\n}\n</code></pre>\n\n<p>But I have got the error in this line . </p>\n\n<pre><code>int value_F = simplex(row,col, A,B, value);\n</code></pre>\n\n<p>The prototype of the simplex function is as following : </p>\n\n<pre><code>int simplex(int m, int n, double a[maxm][maxn], double b[maxn], double&amp; ret)\n</code></pre>\n\n<p>How can I call the function simplex ? What is the way ? </p>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 1, "creation_date": 1443038373, "post_id": 32748419, "comment_id": 53337544, "body": "Compile with <code>g++ nstest1.cpp nstest2.cpp nstest.cpp</code>. You need to compile all source files."}, {"owner": {"reputation": 275, "user_id": 3336409, "user_type": "registered", "profile_image": "https://graph.facebook.com/1777701295/picture?type=large", "display_name": "Chandrahas", "link": "https://stackoverflow.com/users/3336409/chandrahas"}, "reply_to_user": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1443038902, "post_id": 32748419, "comment_id": 53337819, "body": "Thanks :). It works fine for this case. But is it possible to avoid compiling declarations and definitions every-time ?"}, {"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1443039154, "post_id": 32748419, "comment_id": 53337953, "body": "The only way would be to include the definition inside the header file. The compiler needs to see the implementation. You can also use a makefile to automatically compile source files, <a href=\"http://stackoverflow.com/questions/231229/how-to-generate-a-makefile-with-source-in-sub-directories-using-just-one-makefil/2484343#2484343\">example</a>, then all you have to do is call <code>make</code> to compile everything."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1443039325, "post_id": 32748419, "comment_id": 53338037, "body": "You can make a library from your definitions and link to it rather than compiling it every time. Or even just link to the <code>.o</code> files."}, {"owner": {"reputation": 275, "user_id": 3336409, "user_type": "registered", "profile_image": "https://graph.facebook.com/1777701295/picture?type=large", "display_name": "Chandrahas", "link": "https://stackoverflow.com/users/3336409/chandrahas"}, "edited": false, "score": 0, "creation_date": 1443039382, "post_id": 32748419, "comment_id": 53338069, "body": "Thanks James :) It seems writing a makefile will be helpful here."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1443038543, "creation_date": 1443038543, "answer_id": 32748501, "question_id": 32748419, "link": "https://stackoverflow.com/questions/32748419/using-same-namespace-in-c-for-two-classes-declared-and-defined-in-separate-fil/32748501#32748501", "title": "Using same namespace in C++ for two classes declared and defined in separate files", "body": "<p>You need to include the other .cpp files when building the program.</p>\n\n<p>Option 1: Compile all the files and build the executable in one command</p>\n\n<pre><code>g++ nstest.cpp nstest1.cpp nstest2.cpp -o nstest\n</code></pre>\n\n<p>Option 2: Compile each file separately and then build the executable after that</p>\n\n<pre><code>g++ -c nstext1.cpp\ng++ -c nstest2.cpp\ng++ -c nstest.cpp\ng++ nstest.o nstest1.o nstext2.o -o nstest\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1283, "user_id": 2747160, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xE6Dt.png?s=128&g=1", "display_name": "m8mble", "link": "https://stackoverflow.com/users/2747160/m8mble"}, "is_accepted": false, "score": 1, "last_activity_date": 1443038613, "creation_date": 1443038613, "answer_id": 32748515, "question_id": 32748419, "link": "https://stackoverflow.com/questions/32748419/using-same-namespace-in-c-for-two-classes-declared-and-defined-in-separate-fil/32748515#32748515", "title": "Using same namespace in C++ for two classes declared and defined in separate files", "body": "<p>Your problem happens at link time. Your headers are fine. But you should compile the other cpp files aswell.</p>\n"}], "owner": {"reputation": 275, "user_id": 3336409, "user_type": "registered", "profile_image": "https://graph.facebook.com/1777701295/picture?type=large", "display_name": "Chandrahas", "link": "https://stackoverflow.com/users/3336409/chandrahas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2158, "favorite_count": 0, "accepted_answer_id": 32748501, "answer_count": 2, "score": 0, "last_activity_date": 1443038613, "creation_date": 1443038265, "last_edit_date": 1443038412, "question_id": 32748419, "link": "https://stackoverflow.com/questions/32748419/using-same-namespace-in-c-for-two-classes-declared-and-defined-in-separate-fil", "title": "Using same namespace in C++ for two classes declared and defined in separate files", "body": "<p>I am trying to declare two classes <em>C1</em> and <em>C2</em> in files <em>nstest1.h</em> and <em>nstest2.h</em> which are defined in files <em>nstest1.cpp</em> and <em>nstest2.cpp</em> respectively. Both the classes are defined under same namespace.</p>\n\n<p>Following are the files :</p>\n\n<pre><code>//nstest1.h\nnamespace Mine{\n    class C1{\n        public:\n        void callme();\n    };\n}\n\n//nstest2.h\nnamespace Mine {\n    class C2 {\n        public:\n            void callme();\n    };\n}\n\n//nstest1.cpp\n#include&lt;iostream&gt;\n#include \"nstest1.h\"\n\nusing namespace std;\nusing namespace Mine;\n\nvoid Mine::C1::callme(){\n    std::cout &lt;&lt; \"Please call me \" &lt;&lt; std::endl;\n}\n\n//nstest2.cpp\n#include&lt;iostream&gt;\n#include \"nstest2.h\"\n\nusing namespace std;\nusing namespace Mine;\n\nvoid Mine::C2::callme(){\n    std::cout &lt;&lt; \"Please call me too\" &lt;&lt; std::endl ;\n}\n</code></pre>\n\n<p>Following file tries to use this classes using namespace <em>Mine</em>.</p>\n\n<pre><code>//nstest.cpp\n#include&lt;iostream&gt;\n#include \"nstest1.h\"\n#include \"nstest2.h\"\n\nusing namespace std;\nusing namespace Mine;\n\nint main(){\n    Mine::C1 c1;\n    Mine::C2 c2;\n    c1.callme();\n    c2.callme();\n    return 0;\n}\n</code></pre>\n\n<p>When I compile using command \"g++ nstest.cpp\", I get following error :</p>\n\n<pre><code>/tmp/cc2y4zc6.o: In function `main':\nnstest.cpp:(.text+0x10): undefined reference to `Mine::C1::callme()'\nnstest.cpp:(.text+0x1c): undefined reference to `Mine::C2::callme()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>If the definitions are moved to the declaration files (nstest1.h and nstest2.h), it works fine. Not sure whats happening here. Am I missing something ?\nThanks in advance :) .</p>\n"}, {"tags": ["python", "c++", "python-3.x", "for-loop"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 1, "creation_date": 1443037531, "post_id": 32748164, "comment_id": 53337058, "body": "dont use raw_input, just do open(&quot;eng.txt&quot;,&quot;r&quot;)"}, {"owner": {"reputation": 3255, "user_id": 2754197, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/V1LoG.jpg?s=128&g=1", "display_name": "Prime", "link": "https://stackoverflow.com/users/2754197/prime"}, "reply_to_user": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1443037821, "post_id": 32748164, "comment_id": 53337220, "body": "I have tried the same, but it doesn&#39;t show any output"}], "answers": [{"tags": [], "owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "is_accepted": false, "score": 1, "last_activity_date": 1443037560, "last_edit_date": 1495540789, "creation_date": 1443037560, "answer_id": 32748239, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output/32748239#32748239", "title": "How to read the data from a file and get the concordance output", "body": "<p><code>f</code> is a file resource in your example, not a string. You need to read from <code>f</code>. See here for example: <a href=\"https://stackoverflow.com/questions/8369219/how-do-i-read-a-text-file-into-a-string-variable-in-python\">How do I read a text file into a string variable in Python</a></p>\n\n<p>Do something like the following to also deal with <code>newline</code> characters: </p>\n\n<pre><code>with open (\"data.txt\", \"r\") as myfile:\n    f=myfile.read().replace('\\n', '')\n</code></pre>\n\n<p>Also <code>raw_input</code> is for command prompt and is not useful in this situation. </p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1443042816, "creation_date": 1443042816, "answer_id": 32749592, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output/32749592#32749592", "title": "How to read the data from a file and get the concordance output", "body": "<p>Since you have <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> there:</p>\n\n<pre><code>std::istringstream inputdata(\"HELLO HELLO HELLO BOBBY WHAT ARE YOU DOING\");\n\nstd::string word;\nstd::map&lt;std::string, size_t&gt; counts;\n\nwhile (inputdata &gt;&gt; word)\n    ++counts[word];\n\nfor (auto const &amp;w : counts)\n    std::cout &lt;&lt; std::setw(15) &lt;&lt; w.first &lt;&lt; \": \" &lt;&lt; w.second &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Note that I've skipped producing/storing the line numbers since you didn't use them anyway. :-)</p>\n"}, {"tags": [], "owner": {"reputation": 7013, "user_id": 4251775, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/abmgy.jpg?s=128&g=1", "display_name": "The6thSense", "link": "https://stackoverflow.com/users/4251775/the6thsense"}, "is_accepted": true, "score": 1, "last_activity_date": 1443072606, "last_edit_date": 1495542677, "creation_date": 1443071218, "answer_id": 32753761, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output/32753761#32753761", "title": "How to read the data from a file and get the concordance output", "body": "<p><strong>Notes:</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5563089/raw-input-function-in-python\">raw_input method</a> is used to get user input from prompt</p>\n\n<p><strong>Changes to your own code:</strong></p>\n\n<pre><code>f = open(\"eng.txt\", \"r\")\nmyDict = {}\nlinenum = 0\n\nfor word in f.read().split():\n    if not word in myDict:\n        myDict[word] = []\n    myDict[word].append(linenum)\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n\n<p>Simplified code using set <a href=\"http://www.tutorialspoint.com/python/dictionary_setdefault.htm\" rel=\"nofollow noreferrer\">default method</a> of dictionary </p>\n\n<p><strong>Code1:</strong></p>\n\n<pre><code>myDict = {}\nlinenum = 0\nwith open(\"eng.txt\", \"r\") as f:\n    for word in f.read().split():\n        myDict.setdefault(word,[]).append(linenum)\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n\n<p><strong>Sample input:</strong></p>\n\n<pre><code>was very very afraid can you help\nme\nme\nme\n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<pre><code>Word            Frequency      \nafraid         : 1              \ncan            : 1              \nhelp           : 1              \nme             : 3              \nvery           : 2              \nwas            : 1              \nyou            : 1  \n</code></pre>\n"}], "owner": {"reputation": 3255, "user_id": 2754197, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/V1LoG.jpg?s=128&g=1", "display_name": "Prime", "link": "https://stackoverflow.com/users/2754197/prime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 32753761, "answer_count": 3, "score": 0, "last_activity_date": 1443072606, "creation_date": 1443037279, "question_id": 32748164, "link": "https://stackoverflow.com/questions/32748164/how-to-read-the-data-from-a-file-and-get-the-concordance-output", "title": "How to read the data from a file and get the concordance output", "body": "<p>I have the code which will throw the output from the given string.</p>\n\n<pre><code>inputdata = \"HELLO HELLO HELLO BOBBY WHAT ARE YOU DOING\"\nmyDict = {}\nlinenum = 0\n\nfor word in inputdata.split():\n    if not word in myDict:\n        myDict[word] = []\n\n    myDict[word].append(linenum)\n\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n\n<p>the output would be </p>\n\n<pre><code>   Word            Frequency     \n ARE           : 1              \n BOBBY         : 1              \n DOING         : 1              \n HELLO         : 3              \n WHAT          : 1              \n YOU           : 1   \n</code></pre>\n\n<p>But when I tried to replace the string with .txt file, Script was prompting the popup to enter the text instead of reading the data from the .txt file.</p>\n\n<pre><code>f = open(raw_input(\"eng.txt\"), \"r\")\nmyDict = {}\nlinenum = 0\n\nfor word in f.split():\n    if not word in myDict:\n        myDict[word] = []\n\n    myDict[word].append(linenum)\n\n\nprint \"%-15s %-15s\" %(\"Word\", \"Frequency\")\nfor key in sorted(myDict):\n    print '%-15s: %-15d' % (key, len(myDict[key]))\n</code></pre>\n"}, {"tags": ["c++", "dll", "struct", "linker", "unresolved-external"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1443037405, "post_id": 32748148, "comment_id": 53336999, "body": "Is the definition actually being exported? I ask because I don&#39;t see any macro machinery (or similar) in the <code>Vector</code> struct of your question."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1443038015, "post_id": 32748148, "comment_id": 53337353, "body": "If you creating a DLL with VS, check &quot;Export Symbols&quot;.  It will create the relevant __declspec entries.  Have a look at <a href=\"https://msdn.microsoft.com/en-us/library/a90k134d.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/a90k134d.aspx</a> if you are not using Visual Studio"}, {"owner": {"reputation": 837, "user_id": 3776710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51c436e2060f5367c029d72d6d3c5318?s=128&d=identicon&r=PG&f=1", "display_name": "pseudomarvin", "link": "https://stackoverflow.com/users/3776710/pseudomarvin"}, "edited": false, "score": 0, "creation_date": 1443085678, "post_id": 32748148, "comment_id": 53354201, "body": "Okay I see, I was exporting the DLLfunctions being called from the platform layer(Init, Update and Release) by using &quot;__declspec(dllexport)&quot; semantic but that was it. So I either define the constructor in the header file which does it since the header file is inlined in th executable or I export it explicitly from the module, that means that the linker goes into the obj and searches for the definition and brings that to the executable. Am I understanding correctly? Thanks."}], "owner": {"reputation": 837, "user_id": 3776710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51c436e2060f5367c029d72d6d3c5318?s=128&d=identicon&r=PG&f=1", "display_name": "pseudomarvin", "link": "https://stackoverflow.com/users/3776710/pseudomarvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1443037460, "answer_count": 0, "score": 0, "last_activity_date": 1443037229, "creation_date": 1443037229, "question_id": 32748148, "link": "https://stackoverflow.com/questions/32748148/defining-a-struct-imported-from-dll-works-only-when-its-constructor-is-defined-i", "closed_reason": "Duplicate", "title": "Defining a struct imported from DLL works only when its constructor is defined in the header file", "body": "<p><strong>Problem</strong>:</p>\n\n<p>error LNK2019: unresolved external symbol \"public: __thiscall Vector3::Vector3(void)\" (??0Vector3@@QAE@XZ) referenced in function _WinMain@16</p>\n\n<p><strong>Details</strong>:</p>\n\n<p>I have a custom Vector3 class with its basic constructor Vector3() which is declared in the Maths.h file:</p>\n\n<pre><code>    struct Vector3\n    {\n        float x;\n        float y;\n        float z;\n\n        Vector3();\n     ...\n     }\n</code></pre>\n\n<p>and defined in Maths.cpp:</p>\n\n<pre><code>    Vector3::Vector3()\n    {\n        this-&gt;x = 0;\n        this-&gt;y = 0;\n        this-&gt;z = 0;\n    }\n</code></pre>\n\n<p>Module \"Maths\" is a part of a DLL. As long as I use the Vector3 class within the modules of the DLL it's business as usual. <em>However</em> in the specific case when I try to define it in the executable which links with the DLL, I get unresolved external symbol. E.g.:</p>\n\n<pre><code>    int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)\n    {\n        ...\n        Vector3 a = Vector3();\n        ...\n    }\n</code></pre>\n\n<p><strong>I have found a workaround</strong>. If I perform the definition in the Maths.h itself and ommit it in Maths.cpp entirely, like this:</p>\n\n<pre><code>    struct Vector3\n    {\n        float x;\n        float y;\n        float z;\n\n        Vector3()\n        {\n           this-&gt;x = 0;\n           this-&gt;y = 0;\n           this-&gt;z = 0;\n        }\n     ...\n     }\n</code></pre>\n\n<p>it works. But I have no idea what the problem was and why it manifested itself only in this specific case.</p>\n"}, {"tags": ["c++", "c++11", "heap", "priority-queue", "min-heap"], "comments": [{"owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "edited": false, "score": 1, "creation_date": 1443037306, "post_id": 32748069, "comment_id": 53336951, "body": "Where are you looking? I am reading cppreference.com right now and they specify std::less as the default and say substituting std::greater would cause the smallest element to appear as the &#39;top&#39; rather than the greatest. Just seems to be a matter of convention, no?"}, {"owner": {"reputation": 348, "user_id": 1593842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5fcd52fd9bf86b11c2df92f6ce3c011?s=128&d=identicon&r=PG", "display_name": "user1593842", "link": "https://stackoverflow.com/users/1593842/user1593842"}, "edited": false, "score": 2, "creation_date": 1521308848, "post_id": 32748069, "comment_id": 85680159, "body": "I think this is an excellent question. I find it odd I found so few people questioning this specific design decision. So far, you were the only one that, like me, seems to find it very counter-intuitive this &quot;reverse&quot; usage of the comparator. I won&#39;t question the performance reasons behind the decision, but it does not fell natural to me."}, {"owner": {"reputation": 191, "user_id": 11269351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LMXIs.jpg?s=128&g=1", "display_name": "EnigmaticBacon", "link": "https://stackoverflow.com/users/11269351/enigmaticbacon"}, "edited": false, "score": 0, "creation_date": 1607639207, "post_id": 32748069, "comment_id": 115343745, "body": "I just ran into this myself while answering another question and it feels especially unnatural when writing your own comparators."}], "answers": [{"comments": [{"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1443037364, "post_id": 32748145, "comment_id": 53336981, "body": "This doesn&#39;t answer the question why using <code>less</code> induces a max-heap, while <code>greater</code> induces a min-heap."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1443037551, "post_id": 32748145, "comment_id": 53337073, "body": "See my edits, but the TL;DR is max-heaps are used elsewhere in C++ so they are the default."}, {"owner": {"reputation": 410, "user_id": 4241727, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/976ad3d15dc36e461d3696f51cec4bf1?s=128&d=identicon&r=PG&f=1", "display_name": "Vahid Noormofidi", "link": "https://stackoverflow.com/users/4241727/vahid-noormofidi"}, "edited": false, "score": 0, "creation_date": 1443037869, "post_id": 32748145, "comment_id": 53337252, "body": "So, lemme see if I understood you correctly. You meant since <code>less</code> is the default comparator and since <code>max_heap</code> is more useful, we ended up having a <code>max_heap</code> that implemented via <code>less</code> instead of <code>greater</code>?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1443038214, "post_id": 32748145, "comment_id": 53337470, "body": "I don&#39;t think a max-heap is any easier to implement than a min-heap using less. However, it is certainly easier (and more efficient) to implement <code>std::sort_heap</code> from a max-heap, assuming you want the same ordering you would get from <code>std::sort</code>, using the same comparison operator. That fact may have contributed to the reasoning."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 2, "creation_date": 1443038582, "post_id": 32748145, "comment_id": 53337652, "body": "@TemplateRex: Because when you pop an element off the heap, you are left with a space at the end, where you can place the element you just popped off (which is the greatest element). In order to get the correct order if you started with a min-heap, you would have to reverse the range when you were done."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1443039681, "post_id": 32748145, "comment_id": 53338230, "body": "@TemplateRex: It seems to me that implementing <code>push_heap</code> and <code>pop_heap</code> would be very inefficient with that configuration, unless you used <code>push&#47;pop_front</code> instead of <code>push&#47;pop_back</code>. But then you couldn&#39;t use a <code>vector</code> as the underlying container."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1443041217, "post_id": 32748145, "comment_id": 53339015, "body": "@BenjaminLindley summarized this comment conversation into a new answer."}], "tags": [], "owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "is_accepted": false, "score": 8, "last_activity_date": 1443037535, "last_edit_date": 1443037535, "creation_date": 1443037223, "answer_id": 32748145, "question_id": 32748069, "link": "https://stackoverflow.com/questions/32748069/the-reason-of-using-stdgreater-for-creating-min-heap-via-priority-queue/32748145#32748145", "title": "The reason of using `std::greater` for creating min heap via `priority_queue`", "body": "<p>The C++ heap functions <code>make_heap</code>, <code>push_heap</code>, and <code>pop_heap</code> operate on a <a href=\"https://en.wikipedia.org/wiki/Min-max_heap\" rel=\"noreferrer\">max heap</a>, meaning the top element is the <em>maximum</em> when using the default comparator. So, to create a min-heap, you need to use <code>greater&lt;T&gt;</code> instead of <code>less&lt;T&gt;</code>. </p>\n\n<p>I suspect that a max heap is used instead of a min heap is that it is easier to implement with the <code>less</code> operation. In C++, <code>less</code> has the special privilege of being the sort of \"default\" comparator for all STL algorithms; if you only are going to implement one comparison operation (other than <code>==</code>), it should be <code>&lt;</code>. This leads to the unfortunate quirk that <code>priority_queue&lt;T, C&lt;T&gt;, less&lt;T&gt;&gt;</code> means a max-queue and <code>priority_queue&lt;T, C&lt;T&gt;, greater&lt;T&gt;&gt;</code> means a min-queue.</p>\n\n<p>Also, certain algorithms like <code>nth_element</code> need a max-heap.</p>\n"}, {"comments": [{"owner": {"reputation": 410, "user_id": 4241727, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/976ad3d15dc36e461d3696f51cec4bf1?s=128&d=identicon&r=PG&f=1", "display_name": "Vahid Noormofidi", "link": "https://stackoverflow.com/users/4241727/vahid-noormofidi"}, "edited": false, "score": 2, "creation_date": 1443037940, "post_id": 32748195, "comment_id": 53337305, "body": "But why should I use <code>less</code> instead of <code>greater</code> for putting the largest value at the top?"}], "tags": [], "owner": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "is_accepted": false, "score": -1, "last_activity_date": 1443037396, "creation_date": 1443037396, "answer_id": 32748195, "question_id": 32748069, "link": "https://stackoverflow.com/questions/32748069/the-reason-of-using-stdgreater-for-creating-min-heap-via-priority-queue/32748195#32748195", "title": "The reason of using `std::greater` for creating min heap via `priority_queue`", "body": "<p>See <a href=\"http://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/container/priority_queue</a>. A <code>priority_queue</code> is designed to put the largest value at the top. This happens if you use the default <code>std::less</code> comparator. So if you want the reverse behavior, you need to use the reverse comparator, <code>std::greater</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443042388, "post_id": 32749094, "comment_id": 53339603, "body": "The <code>meow_heap</code> algorithms are definitely in C++98."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443042474, "post_id": 32749094, "comment_id": 53339638, "body": "@T.C. you are right, updated, only <code>is_heap</code> and <code>is_heap_until</code> were added"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443042823, "post_id": 32749094, "comment_id": 53339820, "body": "Also, you can&#39;t negate the comparator; you need a wrapper that swaps the order of arguments. Given how primitive C++ TMP was at the time this was originally designed (think all the <code>ptr_fun&#47;bind1st&#47;bind2nd</code> fun), I&#39;m not really surprised they didn&#39;t do it."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443069808, "post_id": 32749094, "comment_id": 53347099, "body": "@T.C. yes, easy to forget the pain of the old binders and also having to extract <code>first_argument_type</code> and <code>second_argument_type</code>"}, {"owner": {"reputation": 621, "user_id": 2156877, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ed4fc7230a8d875216edc447c8c5d99?s=128&d=identicon&r=PG", "display_name": "Viraj", "link": "https://stackoverflow.com/users/2156877/viraj"}, "edited": false, "score": 0, "creation_date": 1443974783, "post_id": 32749094, "comment_id": 53696303, "body": "Can someone explain point 5 again ? From what I understood, popping the element from the max_heap is done from the back. So as less orders the elements in ascending order, getting the top element removes the element from the back ? Have I understood it correctly ?"}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 621, "user_id": 2156877, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ed4fc7230a8d875216edc447c8c5d99?s=128&d=identicon&r=PG", "display_name": "Viraj", "link": "https://stackoverflow.com/users/2156877/viraj"}, "edited": false, "score": 0, "creation_date": 1443983774, "post_id": 32749094, "comment_id": 53699192, "body": "@Viraj no, as point 3 indicates (and see <a href=\"http://en.cppreference.com/w/cpp/algorithm/pop_heap\" rel=\"nofollow noreferrer\">this documentation</a>), <code>pop_heap</code> will take the front and place it at the back."}, {"owner": {"reputation": 621, "user_id": 2156877, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ed4fc7230a8d875216edc447c8c5d99?s=128&d=identicon&r=PG", "display_name": "Viraj", "link": "https://stackoverflow.com/users/2156877/viraj"}, "edited": false, "score": 0, "creation_date": 1443988664, "post_id": 32749094, "comment_id": 53700853, "body": "@TemplateRex So how does <code>less</code> order it in decreasing order such that the max element is a the top ?"}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 621, "user_id": 2156877, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ed4fc7230a8d875216edc447c8c5d99?s=128&d=identicon&r=PG", "display_name": "Viraj", "link": "https://stackoverflow.com/users/2156877/viraj"}, "edited": false, "score": 0, "creation_date": 1444075405, "post_id": 32749094, "comment_id": 53738831, "body": "@Viraj the implementation of <code>pop_heap</code> uses something called <code>sift_down</code> (and <code>push_heap</code> uses <code>sift_up</code>). You can go look at the <a href=\"https://github.com/llvm-mirror/libcxx/blob/master/include/algorithm\" rel=\"nofollow noreferrer\">libc++ implementation on GitHub</a> or for a more <a href=\"http://www.diku.dk/forskning/performance-engineering/Jesper/heaplab/heapsurvey_html/node7.html#SECTION00322000000000000000\" rel=\"nofollow noreferrer\">didacted explanation here</a>."}], "tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": true, "score": 9, "last_activity_date": 1443076428, "last_edit_date": 1495540954, "creation_date": 1443040894, "answer_id": 32749094, "question_id": 32748069, "link": "https://stackoverflow.com/questions/32748069/the-reason-of-using-stdgreater-for-creating-min-heap-via-priority-queue/32749094#32749094", "title": "The reason of using `std::greater` for creating min heap via `priority_queue`", "body": "<p>The logical argument is as follows</p>\n\n<ol>\n<li><code>std::priority_queue</code> is a container adaptor; basic memory considerations make the back the preferred place for modifications (with <code>pop_back()</code> and <code>push_back()</code>) for sequence containers such as <code>std::vector</code>.  </li>\n<li>the <code>priority_queue</code> primitives are based on <code>std::make_heap</code> (constructor), <code>std::pop_heap</code> + <code>container::pop_back</code> (<code>priority_queue::pop</code>) and on <code>container::push_back</code> + <code>std::push_heap</code> (<code>priority_queue::push</code>)</li>\n<li><code>pop_heap</code> will take the <em>front</em> of the underlying storage, and put it at the <em>back</em>, restoring the heap invariant afterwards. The reverse goes for <code>push_heap</code>.</li>\n<li>doing <code>sort_heap</code> on a <code>max_heap</code> (with the max at the front initially) will <a href=\"https://stackoverflow.com/a/24650627/819272\">repeatedly pop the front to the back</a> and sort the range according to <code>less</code> (which is the default comparison operator)</li>\n<li>hence, the preferred implementation of a <code>max_heap</code> is to have the max element w.r.t. <code>less</code> at the front, accessed through <code>priority_queue::top</code> (underlying <code>container::front</code>). </li>\n<li>one can still debate whether it is intuitive that <code>priority_queue</code> with a <code>std::less</code> comparator is representing a <code>max_heap</code>. It could have been defined as a <code>min_heap</code> by reversing the comparator's arguments (but see the comment by @T.C. that with C++98 binders this is rather verbose) everywhere in the calls to the various heap functions. The one (for me) counter-intuitive result would have been that <code>top()</code> would then not have given the element with <em>top</em> priority</li>\n</ol>\n"}], "owner": {"reputation": 410, "user_id": 4241727, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/976ad3d15dc36e461d3696f51cec4bf1?s=128&d=identicon&r=PG&f=1", "display_name": "Vahid Noormofidi", "link": "https://stackoverflow.com/users/4241727/vahid-noormofidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3939, "favorite_count": 9, "accepted_answer_id": 32749094, "answer_count": 3, "score": 19, "last_activity_date": 1443076428, "creation_date": 1443036961, "last_edit_date": 1443037783, "question_id": 32748069, "link": "https://stackoverflow.com/questions/32748069/the-reason-of-using-stdgreater-for-creating-min-heap-via-priority-queue", "title": "The reason of using `std::greater` for creating min heap via `priority_queue`", "body": "<p>I am wondering why for creating a min heap using the <code>priority_queue</code>, the <code>std::greater</code> should be used?</p>\n\n<pre><code>std::priority_queue&lt;T, std::vector&lt;T&gt;, std::greater&lt;T&gt; &gt; min_heap;\n</code></pre>\n\n<p>To me, since the smallest value is always located at the top of the heap, the employed class should be <code>std::less</code></p>\n\n<p><strong>Update:</strong>\nOn the other hand, since the default behavior of <code>priority_queue</code> (max heap) is to hold the greatest value at the top, it looks to me that the <code>std::greater</code> should be used for the max heap creation and not for min heap creation</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44, "user_id": 4591910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6M70W.jpg?s=128&g=1", "display_name": "Nicol&#225;s Videla", "link": "https://stackoverflow.com/users/4591910/nicol%c3%a1s-videla"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1443036699, "post_id": 32747958, "comment_id": 53336615, "body": "Yeah, what purpose does it serve in this case?"}, {"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 2, "creation_date": 1443036730, "post_id": 32747958, "comment_id": 53336632, "body": "It&#39;s a predicate. It means you could pass a different algorithm for checking if it&#39;s contained in the same form without changing sameFormOcurrences."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 6, "creation_date": 1443036739, "post_id": 32747958, "comment_id": 53336638, "body": "It lets you use your own function instead of hardcoded to <code>isContainedSameForm</code> as it would be with a normal function call. The fact the parameter has the same name is inconsequential."}], "answers": [{"comments": [{"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 0, "creation_date": 1443037222, "post_id": 32748107, "comment_id": 53336906, "body": "How is that an answer to the question?"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 2, "last_activity_date": 1443037241, "last_edit_date": 1443037241, "creation_date": 1443037075, "answer_id": 32748107, "question_id": 32747958, "link": "https://stackoverflow.com/questions/32747958/c-c-function-as-parameter/32748107#32748107", "title": "C/C++ function as parameter", "body": "<p>This code isn't written in the best style, the function pointer parameter, and the function implementing that, really should have different names.  Right now if there were a typo in the parameter declaration, the code inside the function would refer directly to another function, and the parameter would silently become useless.</p>\n\n<p>This would be much better:</p>\n\n<pre><code>int countMatchingDescendants(AG ag1,AG ag2,bool (*matchCondition)(AG,AG))\n{\n    if(isEmpty(ag2)) return 0;\n    int ret=0;\n    if(matchCondition(ag1,ag2)) ret=1;\n    return ret + countMatchingDescendants(ag1,ag2-&gt;pH,matchCondition) + countMatchingDescendants(ag1,ag2-&gt;sH,matchCondition);\n}\n\nbool isContainedSameForm(AG ag1, AG ag2)\n{\n    if(isEmpty(ag2)) return false; \n    return isContainedSameForm(ag1-&gt;pH,ag2-&gt;pH) &amp;&amp; isContainedSameForm(ag1-&gt;sH,ag2-&gt;sH);\n}\n\nint sameFormOcurrences( AG ag1, AG ag2)\n{\n    return countMatchingDescendants(ag1,ag2,isContainedSameForm);\n}\n</code></pre>\n\n<p>Note that I've only changed identifier names, not the structure of the code (I also removed extraneous semicolons outside the function bodies).  But now the counting code has a generic name indicating how flexible it actually is.</p>\n\n<p>By changing the order, I prevent any possibility of the generic counting code accidentally referring to a concrete implementation.</p>\n"}], "owner": {"reputation": 44, "user_id": 4591910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6M70W.jpg?s=128&g=1", "display_name": "Nicol&#225;s Videla", "link": "https://stackoverflow.com/users/4591910/nicol%c3%a1s-videla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 32748107, "answer_count": 1, "score": 0, "last_activity_date": 1443037241, "creation_date": 1443036567, "question_id": 32747958, "link": "https://stackoverflow.com/questions/32747958/c-c-function-as-parameter", "title": "C/C++ function as parameter", "body": "<pre><code>bool isContainedSameForm(AG ag1, AG ag2){\n    if(isEmpty(ag2)) return false; \n    return isContainedSameForm(ag1-&gt;pH,ag2-&gt;pH) &amp;&amp; isContainedSameForm(ag1-&gt;sH,ag2-&gt;sH);\n};\nint sameFormOcurrences(AG ag1,AG ag2,bool (*isContainedSameForm)(AG,AG)){\n    if(isEmpty(ag2)) return 0;\n    int ret=0;\n    if(isContainedSameForm(ag1,ag2)) ret=1;\n    return ret + sameFormOcurrences(ag1,ag2-&gt;pH,isContainedSameForm) + sameFormOcurrences(ag1,ag2-&gt;sH,isContainedSameForm);\n};\n\nint sameFormOcurrences( AG ag1, AG ag2){\n    return sameFormOcurrences(ag1,ag2,isContainedSameForm);\n}\n</code></pre>\n\n<p>AG being a general tree, this counts how many times a tree of the same form appears in the second tree</p>\n\n<p><a href=\"https://i.stack.imgur.com/lfmFh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lfmFh.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I don't understand is the purpose of the first <strong>sameFormOcurrences</strong> function receiving a <strong>isContainedSameForm</strong> in parameters. </p>\n\n<p>Is is just a way to change the signature without changing the name of it? \nIsn't it redundant with the function being declared above already if it's trying to avoid a non defined method?</p>\n"}, {"tags": ["c++", "arraylist"], "comments": [{"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1443036237, "post_id": 32747813, "comment_id": 53336346, "body": "Your <code>remove()</code> member function does not even use its <code>item</code> argument... Why don&#39;t you just take the position as an input instead of a &quot;fence&quot; member variable? (Or better yet, accept an iterator...)"}, {"owner": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443036290, "post_id": 32747813, "comment_id": 53336373, "body": "The remove function has an argument as courtesy of the coder to the person interacting with the list. It returns the element to be deleted, that is why is it passed by reference."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1443036400, "post_id": 32747813, "comment_id": 53336422, "body": "But your code now does not touch it...  Have you looked at the C++ standard library <code>&lt;algorithm&gt;</code> header? It has a lot of functions for this sort of thing already."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1443106998, "last_edit_date": 1443106998, "creation_date": 1443106122, "answer_id": 32764419, "question_id": 32747813, "link": "https://stackoverflow.com/questions/32747813/remove-function-array-based-list/32764419#32764419", "title": "Remove Function - Array Based List", "body": "<p>I would suggest creating a function, <code>find</code>:</p>\n\n<pre><code>template &lt;class Elem&gt;\nint AList&lt;Elem&gt;::find(Elem&amp; item) \n{\n   for (int i = fence + 1; i &lt;= listSize; i++)\n   {\n      if ( listArray[i] == item )\n      {\n         return i;\n      }\n   }\n\n   return -1;\n}\n</code></pre>\n\n<p>and then, using it in the implementation of <code>remove</code>.</p>\n\n<pre><code>template &lt;class Elem&gt;\nbool AList&lt;Elem&gt;::remove(Elem&amp; item) \n{\n   int index = this-&gt;find(item);\n   if ( index == -1 )\n   {\n      return false;\n   }\n\n    for (int i = index; i &lt;= listSize; i++)\n    {\n        listArray[i] = listArray[i + 1]; \n    }\n\n    listSize--;\n    return true;\n}\n</code></pre>\n\n<p>In both the functions, I am using <code>i &lt;= listSize</code> since you have the \"fence\" item.</p>\n\n<p>Please note that if there are multiple items that are equal to <code>item</code>, the function will remove only the first one. You'll have to make sure that rest of your code does not have a problem with that behavior.</p>\n"}], "owner": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 32764419, "answer_count": 1, "score": 0, "last_activity_date": 1443106998, "creation_date": 1443036063, "question_id": 32747813, "link": "https://stackoverflow.com/questions/32747813/remove-function-array-based-list", "title": "Remove Function - Array Based List", "body": "<p>I have an array-based list class called Alist with the following remove function. Note that everything is done with respect to the fence, so removing item is done to the right of the fence. This means if I want to delete a specific item, I should set the value of fence to the index of that item, then call the remove function.</p>\n\n<pre><code>template &lt;class Elem&gt;\nbool AList&lt;Elem&gt;::remove(Elem&amp; item) \n{\n    if (rightLength() == 0) return false;\n\n    it = listArray[fence + 1]; // Copy element\n\n    for (int i = fence + 1; i &lt; listSize; i++)\n    {\n        listArray[i] = listArray[i + 1]; \n    }\n\n    listSize--;\n    return true;\n</code></pre>\n\n<p>Now I have created a list of majors and have implemented the following function:</p>\n\n<pre><code>void removeMajor(AList&lt;Major&gt; &amp;t, Major &amp;m)\n{\n   if (t.find(m))\n   {\n       t.setPos() // ??? Not sure \n       t.remove(m); //inserting major\n   }\n}\n</code></pre>\n\n<p>My removeMajor function is wrong, I don't know how to set the position of the fence to the element I want to delete. Could anyone help me?</p>\n\n<p>Side Note: (setPos() function is as follows)</p>\n\n<pre><code>bool setPos(int pos)\n{\n    if ((pos &gt;= 0) &amp;&amp; (pos &lt; listSize))\n        fence = pos;\n    return (pos &gt;= 0) &amp;&amp; (pos &lt; listSize);\n}\n</code></pre>\n\n<p>Help would be very much appreciated!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 2, "creation_date": 1443035065, "post_id": 32747480, "comment_id": 53335695, "body": "Are you familiar with inheritance and polymorphism?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1443035448, "post_id": 32747480, "comment_id": 53335905, "body": "Are you familiar with <code>std::vector</code> or arrays?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1443035449, "post_id": 32747480, "comment_id": 53335906, "body": "Can you tell us a bit more about what you want? Somehow, I don&#39;t think the answer you are looking for is &quot;Yes, create a <code>Command&amp;</code> and call it <code>type</code>&quot;..."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443035471, "post_id": 32747480, "comment_id": 53335914, "body": "I have no idea what you&#39;re trying to do here, but it looks like you want to use a polymorphic class..."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1443035515, "post_id": 32747480, "comment_id": 53335938, "body": "It&#39;s funny how this vague problem statement has immediately resulted in several different interpretations of the question."}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 1, "creation_date": 1443035551, "post_id": 32747480, "comment_id": 53335964, "body": "Even though he&#39;s using the term &quot;type&quot;, they are of the same type so polymorphism doesn&#39;t necessarily apply.  Not sure inheritance applies either.  A simple array might be the easiest if the types are sequential... <code>type[x].parse(cmd)</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443035586, "post_id": 32747480, "comment_id": 53335986, "body": "There is clearly an error in the code. type1 is an object, type has to be a pointer (type-&gt;), so type == type1 is deemed to produce compilation error."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1443035592, "post_id": 32747480, "comment_id": 53335987, "body": "@ChristianHackl Regarding the simplicity I&#39;d say <i>@Thomas</i> is on the right track."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443035608, "post_id": 32747480, "comment_id": 53335996, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Yeah, I think so, too."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1443035685, "post_id": 32747480, "comment_id": 53336039, "body": "I was interpreting it to mean different command types would require a different <code>parse</code> function implementation and hence the polymorphism but I agree the OP needs to clarify the question/problem."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1443035767, "post_id": 32747480, "comment_id": 53336079, "body": "@ChristianHackl /OT You&#39;re a good companion here BTW. I like most of your answers. Best greetings from Oktoberfest mad Bavaria ;-)."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443037000, "post_id": 32747480, "comment_id": 53336779, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Why, thanks :) Have fun and behave like a good Stackoverflow citizen over there! ;)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1443037412, "post_id": 32747480, "comment_id": 53337005, "body": "@ChristianHackl <i>&quot;Why&quot;</i> Just to encourage you at the track you&#39;re on, and because I love to see my Austrian <i>neighborhood</i> here :-)."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1443035883, "post_id": 32747708, "comment_id": 53336148, "body": "While I don&#39;t see need for (raw) pointers, I think your answer is down the right track, regardless uncleanness of the question."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443036128, "post_id": 32747708, "comment_id": 53336284, "body": "Raw pointers is simple.  The issue I saw was the three different constructions (parameters to the constructor).  I wasn&#39;t sure whether to use the copy construction (of an item on the <i>stack</i>) or go with a smart pointer.  Anyway, this gets the point across."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 3, "creation_date": 1443036435, "post_id": 32747708, "comment_id": 53336449, "body": "I also think that simple objects would be better. And the example misses the necessary <code>delete</code>s, which the OP is likely not aware of. And there is a typo (<code>push_back</code>, not <code>pushback</code>)."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1443036909, "last_edit_date": 1443036909, "creation_date": 1443035677, "answer_id": 32747708, "question_id": 32747480, "link": "https://stackoverflow.com/questions/32747480/invoke-multiple-instance-of-class/32747708#32747708", "title": "Invoke multiple instance of class", "body": "<p>You can use std::vector (with pointers):  </p>\n\n<pre><code>std::vector&lt;Command *&gt; types;\ntypes.push_back(new Command(2,3));\ntypes.push_back(new Command(6,5));\ntypes.push_back(new Command(7,3));\n//...\nunsigned int i = 2;\ntypes[i]-&gt;parse(cmd);\n</code></pre>\n\n<p>At some point, you will need to delete the objects pointed to:  </p>\n\n<pre><code>delete types[i];\n</code></pre>\n\n<p><strong>Edit 1:</strong><br>\nYou can also use the <code>std::vector</code> without pointers, saving the need for deletion:  </p>\n\n<pre><code>    std::vector&lt;Command&gt; types;\n    types.push_back(Command(2,3));\n    types.push_back(Command(6,5));\n    types.push_back(Command(7,3));\n//...\n    types[i].parse(cmd);\n</code></pre>\n\n<p>With disclosure of details of purpose, we could present other options as well.  </p>\n\n<p><em>Note:  per comments, added usage of <code>std::vector</code> without using pointers</em>.  </p>\n"}], "owner": {"reputation": 73, "user_id": 779138, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/34aa9335daa84f6060f0470c63daf0ab?s=128&d=identicon&r=PG", "display_name": "hmb", "link": "https://stackoverflow.com/users/779138/hmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 32747708, "answer_count": 1, "score": -3, "last_activity_date": 1443036909, "creation_date": 1443034882, "last_edit_date": 1443035076, "question_id": 32747480, "link": "https://stackoverflow.com/questions/32747480/invoke-multiple-instance-of-class", "title": "Invoke multiple instance of class", "body": "<p>I have a class</p>\n\n<pre><code>class Command\n{\n public:\n  Command (uint32_t _count, uint32_t _pre)\n    {\n      count = _count;\n      pre = _pre;\n    }\n\n  int parse (string command)\n  {\n         // Some action on the base of given string and pre initialized member\n         // varaiable\n  }\n\n protected:\n  uint32_t pre;\n  uint32_t pre;\n};\n</code></pre>\n\n<p>Now I have multiple instance of Command class for different 'Command' type. i.e for simplicity I create instance name on the command type.</p>\n\n<pre><code>Command type1 (2,3);\nCommand type2 (6,5);\nCommand type3 (7,3);\n</code></pre>\n\n<p>Now, how can I call the 'parse' function of given 'type' in single line.</p>\n\n<p>I can handle it with if else-if structure like</p>\n\n<pre><code>if (type == type1)\n type1-&gt;parse (cmd);\nelse if (type == type2)\n  type-&gt;parse (cmd);\n..\n..\n</code></pre>\n\n<p>But can I handle this in a generic way? like</p>\n\n<pre><code>'type'-&gt;parse (cmd);\n</code></pre>\n"}, {"tags": ["c++", "global-variables", "main"], "comments": [{"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 1, "creation_date": 1443034499, "post_id": 32747323, "comment_id": 53335335, "body": "passing a pointer or reference is a much better way to approach this. If you want an actual global variable, it would have to be defined <i>outside</i> the main function. That said, don&#39;t do it!"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 7, "creation_date": 1443034533, "post_id": 32747323, "comment_id": 53335356, "body": "&quot;I feel it problematic to pass the pointer and then using the pointer in other functions.&quot; Please explain why you think so."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1443035414, "post_id": 32747323, "comment_id": 53335887, "body": "And also put some concise sample code in your post, to better explain what you actually want to do, please."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 1, "creation_date": 1443035660, "post_id": 32747323, "comment_id": 53336023, "body": "The problem here is that you don&#39;t want to just pass the array. There&#39;s no reason to not pass the array."}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 4, "last_activity_date": 1443035290, "last_edit_date": 1443035290, "creation_date": 1443034592, "answer_id": 32747382, "question_id": 32747323, "link": "https://stackoverflow.com/questions/32747323/is-it-possible-to-declare-a-global-variable-inside-main-function-in-c-if-poss/32747382#32747382", "title": "Is it possible to declare a global variable inside main function in c++? If possible how?", "body": "<p>In C++, if you need an array of variable size, 99% of the time, you should be using a <code>std::vector</code>.</p>\n\n<p>I agree that you <em>should</em> be passing a pointer. Let's suppose you have some very good reason for not doing this. Then, declare the <code>std::vector</code> at global scope and give it the desired size inside <code>main</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 5031993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f354e0477c23b0e546964069c079d630?s=128&d=identicon&r=PG&f=1", "display_name": "Selie", "link": "https://stackoverflow.com/users/5031993/selie"}, "is_accepted": false, "score": 0, "last_activity_date": 1443038413, "creation_date": 1443038413, "answer_id": 32748460, "question_id": 32747323, "link": "https://stackoverflow.com/questions/32747323/is-it-possible-to-declare-a-global-variable-inside-main-function-in-c-if-poss/32748460#32748460", "title": "Is it possible to declare a global variable inside main function in c++? If possible how?", "body": "<p>You can always use pointer to <strong>std::vector</strong> for this. Here is an example code,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nvector&lt;int&gt;* v;\n\nint main(){\nint n;\ncin &gt;&gt; n;\nv = new vector&lt;int&gt;(n);\n// now you can simply pass the vector to any function\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443039487, "post_id": 32748566, "comment_id": 53338136, "body": "You have declared your vector as <code>myArray</code> but then you are resizing <code>myVector</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443039573, "post_id": 32748566, "comment_id": 53338181, "body": "@FabioTurati Oops, fixed that."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1443040007, "last_edit_date": 1495542222, "creation_date": 1443038817, "answer_id": 32748566, "question_id": 32747323, "link": "https://stackoverflow.com/questions/32747323/is-it-possible-to-declare-a-global-variable-inside-main-function-in-c-if-poss/32748566#32748566", "title": "Is it possible to declare a global variable inside main function in c++? If possible how?", "body": "<p>As from your question title</p>\n\n<blockquote>\n  <p>Is it possible to declare a global variable inside main function in c++? If possible how?</p>\n</blockquote>\n\n<p>No, it's not possible to <strong>declare</strong> global variables inside the <code>main()</code> , or any other functions' scope. Global variables must be declared outside of any functions scope.</p>\n\n<p>As you mentioned an array with variable size depending on runtime input, the arrays size can't be determined at compile time.</p>\n\n<p>Even if your compiler supports <a href=\"https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c/1887178?s=1|0.0000#1887178\">VLA</a>'s, these can't be used at global scope.</p>\n\n<p>As @Brian already pointed out, you need some dynamic memory allocation at runtime like it's provided by e.g. a <code>std::vector</code>:</p>\n\n<pre><code> std::vector&lt;int&gt; myArray;\n\n void initArray() {\n      int arraySize;\n      std::cout &lt;&lt; \"Enter array size: \"; \n      std::cout.flush();\n      if(std::cin &gt;&gt; arraySize) {\n          myArray.resize(arraySize);\n      }\n }\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5178002, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/9kfao.jpg?s=128&g=1", "display_name": "naimul64", "link": "https://stackoverflow.com/users/5178002/naimul64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3787, "favorite_count": 0, "answer_count": 3, "score": -6, "last_activity_date": 1443040007, "creation_date": 1443034407, "question_id": 32747323, "link": "https://stackoverflow.com/questions/32747323/is-it-possible-to-declare-a-global-variable-inside-main-function-in-c-if-poss", "title": "Is it possible to declare a global variable inside main function in c++? If possible how?", "body": "<p>To solve a problem I need a 2D array which should be accessed by other functions. I feel it problematic to pass the pointer and then using the pointer in other functions. As the dimension of the array is input dependent so I don't want to declare a huge 2D global array.<br>\nSo I want to declare a 2D array in main as a global array and access it from other functions. </p>\n"}, {"tags": ["c++", "c", "bit-manipulation", "xor"], "comments": [{"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443035235, "post_id": 32747229, "comment_id": 53335795, "body": "What exactly are you trying to do? Can you write an equation that is more clear?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443035246, "post_id": 32747229, "comment_id": 53335800, "body": "You want <code>(VALUE ^ XOR) &amp; MASK</code>? Please be more specific. As given now, it is unclear what you want to accomplish."}], "answers": [{"comments": [{"owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 0, "creation_date": 1443034485, "post_id": 32747308, "comment_id": 53335326, "body": "Maybe I misunderstood you, but XOR 0 is not a no-op."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 2, "creation_date": 1443034595, "post_id": 32747308, "comment_id": 53335401, "body": "@ChronoTrigger why not?"}, {"owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "edited": false, "score": 0, "creation_date": 1443034641, "post_id": 32747308, "comment_id": 53335429, "body": "1 xor 0 = 1; 0 xor 0 = 0."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": false, "score": 1, "last_activity_date": 1443034376, "creation_date": 1443034376, "answer_id": 32747308, "question_id": 32747229, "link": "https://stackoverflow.com/questions/32747229/fastest-way-to-xor-all-bits-from-value-based-on-bitmask/32747308#32747308", "title": "Fastest Way to XOR all bits from value based on bitmask?", "body": "<p>Using that the XOR with 0 doesn't change anything, it's OK to apply the mask and then unconditionally XOR all bits together, which can be done in a parallel-prefix way. So something like this (not tested):</p>\n\n<pre><code>x = m &amp; v;\nx ^= x &gt;&gt; 16;\nx ^= x &gt;&gt; 8;\nx ^= x &gt;&gt; 4;\nx ^= x &gt;&gt; 2;\nx ^= x &gt;&gt; 1;\nresult = x &amp; 1\n</code></pre>\n\n<p>You can use more (or fewer) steps as needed, this is for 32 bits.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1443037806, "post_id": 32747500, "comment_id": 53337214, "body": "Actually you can save another operation by changing the loop to <code>for (c = 0; v; c^=1)</code> then you do not need to do <code>&amp;1</code> at the end :)"}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 5, "last_activity_date": 1443038760, "last_edit_date": 1495539865, "creation_date": 1443034937, "answer_id": 32747500, "question_id": 32747229, "link": "https://stackoverflow.com/questions/32747229/fastest-way-to-xor-all-bits-from-value-based-on-bitmask/32747500#32747500", "title": "Fastest Way to XOR all bits from value based on bitmask?", "body": "<p>If I'm understanding you right, you have</p>\n\n<pre><code>result = value &amp; mask\n</code></pre>\n\n<p>and you want to XOR the 1 bits of <code>mask &amp; result</code> together. The XOR of a series of bits is the same as counting the number of bits and checking if that count is even or odd. If it's odd, the XOR would be 1; if even, XOR would give 0.</p>\n\n<pre><code>count_bits(mask &amp; result) % 2 != 0\n</code></pre>\n\n<p><code>mask &amp; result</code> can be simplified to simply <code>result</code>. You don't need to AND it with <code>mask</code> again. The <code>% 2 != 0</code> can be alternately written as <code>&amp; 1</code>.</p>\n\n<pre><code>count_bits(result) &amp; 1\n</code></pre>\n\n<p>As far as how to count bits, the <a href=\"https://graphics.stanford.edu/~seander/bithacks.html\" rel=\"nofollow noreferrer\">Bit Twiddling Hacks</a> web page gives a number of <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive\" rel=\"nofollow noreferrer\">bit counting algorithms</a>.</p>\n\n<blockquote>\n  <h3>Counting bits set, Brian Kernighan's way</h3>\n\n<pre><code>unsigned int v; // count the number of bits set in v\nunsigned int c; // c accumulates the total bits set in v\nfor (c = 0; v; c++)\n{\n  v &amp;= v - 1; // clear the least significant bit set\n}\n</code></pre>\n  \n  <p>Brian Kernighan's method goes through as many iterations as there are\n  set bits. So if we have a 32-bit word with only the high bit set, then\n  it will only go once through the loop.</p>\n</blockquote>\n\n<p>If you were to use that implementation, you could optimize it a bit further. If you think about it, you don't need the full count of bits. You only need to track their parity. Instead of counting bits you could just flip <code>c</code> each iteration.</p>\n\n<pre><code>unsigned bit_parity(unsigned v) {\n  unsigned c;\n  for (c = 0; v; c ^= 1) {\n    v &amp;= v - 1;\n  }\n}\n</code></pre>\n\n<p><sup>(Thanks to <a href=\"https://stackoverflow.com/users/432358/slava\">Slava</a> for the suggestion.)</sup></p>\n"}, {"tags": [], "owner": {"reputation": 23451, "user_id": 32775, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/853ea0ee58ffef56c0b32e34d0a935c2?s=128&d=identicon&r=PG", "display_name": "luiscubal", "link": "https://stackoverflow.com/users/32775/luiscubal"}, "is_accepted": true, "score": 5, "last_activity_date": 1443036858, "last_edit_date": 1495540702, "creation_date": 1443034941, "answer_id": 32747502, "question_id": 32747229, "link": "https://stackoverflow.com/questions/32747229/fastest-way-to-xor-all-bits-from-value-based-on-bitmask/32747502#32747502", "title": "Fastest Way to XOR all bits from value based on bitmask?", "body": "<p>If I understood this question correctly, what you want is to get every bit from VALUE that is set in the MASK, and compute the XOR of those bits.</p>\n\n<p>First of all, note that XOR'ing a value with 0 will not change the result. So, to ignore some bits, we can treat them as zeros.</p>\n\n<p>So, XORing the bits set in VALUE that are in MASK is equivalent to XORing the bits in VALUE&amp;MASK.</p>\n\n<p>Now note that the result is 0 if the number of set bits is even, 1 if it is odd.</p>\n\n<p>That means we want to count the number of set bits. Some architectures/compilers have ways to quickly compute this value. For instance, on GCC this can be obtained with <code>__builtin_popcount</code>.</p>\n\n<p>So on GCC, this can be computed with:</p>\n\n<pre><code>int set_bits = __builtin_popcount(value &amp; mask);\n\nreturn set_bits % 2;\n</code></pre>\n\n<p>If you want the code to be portable, then this won't do. However, a comment in <a href=\"https://stackoverflow.com/a/109069/32775\">this answer</a> suggests that some compilers can inline <code>std::bitset::count</code> to efficiently obtain the same result.</p>\n"}, {"comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1443039697, "post_id": 32748221, "comment_id": 53338243, "body": "That&#39;s great (it is, really, nice method to count 1&#39;s) but why do that extra stuff to get the bit count when the full count isn&#39;t necessary?"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1443037490, "creation_date": 1443037490, "answer_id": 32748221, "question_id": 32747229, "link": "https://stackoverflow.com/questions/32747229/fastest-way-to-xor-all-bits-from-value-based-on-bitmask/32748221#32748221", "title": "Fastest Way to XOR all bits from value based on bitmask?", "body": "<p>One significant issue to be aware of if using <code>v &amp;= v - 1</code> in the main body of your code is it will change the value of <code>v</code> to <code>0</code> in conducting the count. With other methods, the value is changed to the number of <code>1</code>'s. While count logic is generally wrapped as a function, where that is no longer a concern, if you are required to present your counting logic in the main body of your code, you must preserve a copy of <code>v</code> if that value is needed again.</p>\n\n<p>In addition to the other two methods presented, the following is another favorite from bit-twiddling hacks that generally has a bit better performance than the loop method for larger numbers:</p>\n\n<pre><code>/* get the population 1's in the binary representation of a number */\nunsigned getn1s (unsigned int v)\n{\n    v = v - ((v &gt;&gt; 1) &amp; 0x55555555);\n    v = (v &amp; 0x33333333) + ((v &gt;&gt; 2) &amp; 0x33333333);\n    v = (v + (v &gt;&gt; 4)) &amp; 0x0F0F0F0F;\n    v = v + (v &lt;&lt; 8);\n    v = v + (v &lt;&lt; 16);\n    return v &gt;&gt; 24;\n}\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 1088363, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7bceaf8bad7c44a0fcb338ee92343245?s=128&d=identicon&r=PG", "display_name": "pantaryl", "link": "https://stackoverflow.com/users/1088363/pantaryl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1963, "favorite_count": 1, "accepted_answer_id": 32747502, "answer_count": 4, "score": 0, "last_activity_date": 1443038760, "creation_date": 1443034107, "question_id": 32747229, "link": "https://stackoverflow.com/questions/32747229/fastest-way-to-xor-all-bits-from-value-based-on-bitmask", "title": "Fastest Way to XOR all bits from value based on bitmask?", "body": "<p>I've got an interesting problem that has me looking for a more efficient way of doing things.</p>\n\n<p>Let's say we have a value (in binary)</p>\n\n<pre><code>(VALUE) 10110001\n(MASK)  00110010\n----------------\n(AND)   00110000\n</code></pre>\n\n<p>Now, I need to be able to XOR any bits from the <code>(AND)</code> value that are set in the <code>(MASK)</code> value (always lowest to highest bit):</p>\n\n<pre><code>(RESULT) AND<sub>1</sub>(0) xor AND<sub>4</sub>(1) xor AND<sub>5</sub>(1) = 0</code></pre>\n\n<p>Now, on paper, this is certainly quick since I can see which bits are set in the mask. It seems to me that programmatically I would need to keep right shifting the MASK until I found a set bit, XOR it with a separate value, and loop until the entire byte is complete.</p>\n\n<p>Can anyone think of a faster way? I'm looking for the way to do this with the least number of operations and stored values.</p>\n"}, {"tags": ["c++", "linux", "mutex", "strace"], "comments": [{"owner": {"reputation": 1880, "user_id": 798549, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1719127747f65b82d73637f9006590de?s=128&d=identicon&r=PG", "display_name": "Matt Joyce", "link": "https://stackoverflow.com/users/798549/matt-joyce"}, "edited": false, "score": 2, "creation_date": 1443034348, "post_id": 32747152, "comment_id": 53335243, "body": "you might try working with gdb for this instead.  strace does have a threaded output toggle as well to give strace output broken out by pid."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "reply_to_user": {"reputation": 1880, "user_id": 798549, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1719127747f65b82d73637f9006590de?s=128&d=identicon&r=PG", "display_name": "Matt Joyce", "link": "https://stackoverflow.com/users/798549/matt-joyce"}, "edited": false, "score": 0, "creation_date": 1443034395, "post_id": 32747152, "comment_id": 53335265, "body": "How would I use gdb to find this? Can it detect this condition somehow and break automatically? (I don&#39;t want to watch for hours on end for the problem to start...)"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "reply_to_user": {"reputation": 1880, "user_id": 798549, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1719127747f65b82d73637f9006590de?s=128&d=identicon&r=PG", "display_name": "Matt Joyce", "link": "https://stackoverflow.com/users/798549/matt-joyce"}, "edited": false, "score": 0, "creation_date": 1443034681, "post_id": 32747152, "comment_id": 53335454, "body": "Ok, it looks like <code>catch syscall 240</code> will work for this in gdb. I&#39;ll give that a shot."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "reply_to_user": {"reputation": 1880, "user_id": 798549, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1719127747f65b82d73637f9006590de?s=128&d=identicon&r=PG", "display_name": "Matt Joyce", "link": "https://stackoverflow.com/users/798549/matt-joyce"}, "edited": false, "score": 0, "creation_date": 1443034874, "post_id": 32747152, "comment_id": 53335586, "body": "<code>The feature &#39;catch syscall&#39; is not supported on this architecture yet.</code> Doh!"}, {"owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "edited": false, "score": 0, "creation_date": 1443042582, "post_id": 32747152, "comment_id": 53339698, "body": "The question of how to find code fails to acquire a mutex brings me to Herb Sutter&#39;s GotW thread on the subject of why that paradigm promotes brittle code. If app code is first required to get a lock, then access the data, then release...don&#39;t expect app code to do that repeatedly. Provide (i.e. replace with) an object that wraps the data being protected, so there&#39;s no option. Doing this now will drive editing by compiler complaint, but ultimately you&#39;ll have two benefits. One, app code can&#39;t skip mutex acquisition, and you have code you can intercept with a debugger for all occurrences."}], "answers": [{"tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1443038543, "creation_date": 1443038543, "answer_id": 32748502, "question_id": 32747152, "link": "https://stackoverflow.com/questions/32747152/how-do-i-determine-from-strace-output-what-part-of-my-program-is-failing-to-acqu/32748502#32748502", "title": "How do I determine from strace output what part of my program is failing to acquire a mutex", "body": "<p>If you perpetually and often lock a mutex for a short time from different threads, like e.g. one protecting a global logger, you might cause a so-called thread convoy. The problem doesn't occur until two threads compete for the lock. The first gets the lock and holds it for a short time, then, when it needs the lock a second time, it gets preempted because the second one is waiting already. The second one does the same. The timeslice available to each thread is suddenly reduced to the time between two lock attempts, causing many context switches and the according slowdown. Further, all but one thread is always blocked on the mutex, effectively disabling any parallel execution.</p>\n\n<p>In order to fix this, make your threads cooperate instead of competing for resources. For above example of a logger, consider e.g. a lock-free queue for the entries or separate queues for each thread using thread-local storage.</p>\n\n<p>Concerning the futex() calls, the idea is to poll an atomic flag and after some rotations use the actual OS mutex. The atomic flag is available without the expensive switch between user-space and kernel-space. For longer breaks, using the kernel preemption (with <code>futex()</code>) avoids blocking the CPU with polling. This explains why the program doesn't need any <code>futex()</code> calls in normal operation.</p>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 0, "last_activity_date": 1443039097, "creation_date": 1443039097, "answer_id": 32748634, "question_id": 32747152, "link": "https://stackoverflow.com/questions/32747152/how-do-i-determine-from-strace-output-what-part-of-my-program-is-failing-to-acqu/32748634#32748634", "title": "How do I determine from strace output what part of my program is failing to acquire a mutex", "body": "<p>You, basically need to generate core file at this moment.</p>\n\n<p>Then you could load program+core in GDB and look at it</p>\n\n<p><code>man gcore</code></p>\n\n<p>or </p>\n\n<p><code>generate-core-file</code></p>\n\n<blockquote>\n  <p>During that time, there are zero futex syscalls happening. Why do they suddenly start? </p>\n</blockquote>\n\n<p>This is due to the fact that uncontested mutex, implemented via futex, doesn't make a system call, only atomic increment, purely in user space. Only CONTESTED lock is visible as system call</p>\n"}], "owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1443039097, "creation_date": 1443033862, "last_edit_date": 1443034350, "question_id": 32747152, "link": "https://stackoverflow.com/questions/32747152/how-do-i-determine-from-strace-output-what-part-of-my-program-is-failing-to-acqu", "title": "How do I determine from strace output what part of my program is failing to acquire a mutex", "body": "<p>I'm working on an embedded Linux system (3.12.something), and our application, after some random amount of time, starts hogging the CPU. I've run <code>strace</code> on our application, and right when the problem happens, I see a lot of lines similar to this in the <code>strace</code> output:</p>\n\n<pre><code>[48530666] futex(0x485f78b8, FUTEX_WAIT_PRIVATE, 2, NULL) = -1 EAGAIN (Resource temporarily unavailable) &lt;0.009002&gt;\n</code></pre>\n\n<p>I'm pretty sure this is the smoking gun I'm looking for and there is a race of some sort. However, I now need to figure out how to identify the place in the code that's trying to get this mutex. How can I do that? Our code is compiled with GCC and has debugging symbols in it.</p>\n\n<p>My current thinking (that I haven't tried yet) is to print out a string to stdout and flush before trying to grab any mutex in our system, with the expectation that the string will print right before strace complains about getting the lock ... but there are a LOT of places in the code that would have to be instrumented like this.</p>\n\n<p>EDIT: Another strange thing that I just realized is that our program doesn't start hogging the CPU until some random time has passed since it was run (5 minutes to 5 hours and anywhere in between). During that time, there are <em>zero</em> <code>futex</code> syscalls happening. Why do they suddenly start? From what I've read, I think maybe they are being used properly in userspace until something fails and falls back to making a <code>futex()</code> syscall...</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1443033505, "post_id": 32747016, "comment_id": 53334809, "body": "What makes you think <code>summer.display(char[][DAYS_IN_MONTH])</code> is a valid syntax?"}, {"owner": {"reputation": 183, "user_id": 4664477, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd0d8aa40728427785c879da725af7c7?s=128&d=identicon&r=PG&f=1", "display_name": "still2blue", "link": "https://stackoverflow.com/users/4664477/still2blue"}, "edited": false, "score": 0, "creation_date": 1443033642, "post_id": 32747016, "comment_id": 53334882, "body": "I just cannot figure out another way to access it. Again I am sorry I am new to this. I tried calling with <code>summer.display();</code> but it said I had too few arguments."}, {"owner": {"reputation": 183, "user_id": 4664477, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd0d8aa40728427785c879da725af7c7?s=128&d=identicon&r=PG&f=1", "display_name": "still2blue", "link": "https://stackoverflow.com/users/4664477/still2blue"}, "edited": false, "score": 0, "creation_date": 1443034635, "post_id": 32747016, "comment_id": 53335425, "body": "@DieterL&#252;cking i changed a few things, I can now compile my program but all my totals are showing <code>0</code> do you see my problem?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1443035155, "post_id": 32747016, "comment_id": 53335743, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443035986, "post_id": 32747016, "comment_id": 53336212, "body": "You could research first by searching stackoverflow for &quot;c++ weather&quot;.  This is a common assignment."}, {"owner": {"reputation": 183, "user_id": 4664477, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd0d8aa40728427785c879da725af7c7?s=128&d=identicon&r=PG&f=1", "display_name": "still2blue", "link": "https://stackoverflow.com/users/4664477/still2blue"}, "edited": false, "score": 0, "creation_date": 1443036101, "post_id": 32747016, "comment_id": 53336268, "body": "Not common with classes. My only problem now seems to be initializing my name array. It does not allow you to initialize the array in the class for some reason in VS2013. I cannot figure out a workaround"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443036261, "post_id": 32747016, "comment_id": 53336357, "body": "A lot of initialization can be performed outside the class, try initializing in source code."}, {"owner": {"reputation": 183, "user_id": 4664477, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd0d8aa40728427785c879da725af7c7?s=128&d=identicon&r=PG&f=1", "display_name": "still2blue", "link": "https://stackoverflow.com/users/4664477/still2blue"}, "edited": false, "score": 0, "creation_date": 1443036633, "post_id": 32747016, "comment_id": 53336566, "body": "Um, what? I don&#39;t believe you can on a private member variable as in this case.."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443037043, "post_id": 32747016, "comment_id": 53336803, "body": "Your constructor&#39;s initialization list is completely wrong... you want <code>Weather::Weather() : name({ &quot;June&quot;, &quot;July&quot;, &quot;August&quot;}) {}</code>"}, {"owner": {"reputation": 183, "user_id": 4664477, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd0d8aa40728427785c879da725af7c7?s=128&d=identicon&r=PG&f=1", "display_name": "still2blue", "link": "https://stackoverflow.com/users/4664477/still2blue"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443037209, "post_id": 32747016, "comment_id": 53336898, "body": "@rlbond that doesn&#39;t work either. I think this is just a VisualStudio2013 deal."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1443043584, "post_id": 32747016, "comment_id": 53340185, "body": "The fact that some of the months have more than 30 days is not a problem?"}], "owner": {"reputation": 183, "user_id": 4664477, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd0d8aa40728427785c879da725af7c7?s=128&d=identicon&r=PG&f=1", "display_name": "still2blue", "link": "https://stackoverflow.com/users/4664477/still2blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443034723, "creation_date": 1443033359, "last_edit_date": 1443034592, "question_id": 32747016, "link": "https://stackoverflow.com/questions/32747016/cannot-access-function-in-class-c", "title": "Cannot access function in class C++", "body": "<p>I am working on a program that reads weather data and reports statistics back to the user. If I run everything inside of main (not using a class), I know that my program does what I need it to do. I am having a problem accessing my <code>display()</code> function by calling it with the object.</p>\n\n<p>I am pretty new to all of this, so if anyone could help me understand where my error(s) are, I'd really appreciate any help. Thanks!</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass Weather\n{\nprivate:\n    static const int NUM_MONTHS = 3,\n        DAYS_IN_MONTH = 30;\n\n    const string name[NUM_MONTHS] = { \"June\", \"July\", \"August\" };\n    char dayType[NUM_MONTHS][DAYS_IN_MONTH];\n\n    int rainy;                 // Counts number of days of each type\n    int cloudy;                 // during one particular month\n    int sunny;\n    int rainyTotal = 0;        // Counts number of days of each type\n    int cloudyTotal = 0;        // during 3-month period\n    int sunnyTotal = 0;\n    int wettestMonth;           // Index of rainiest month\n    int wettestMonthsRain = -1; // Number of rainy days in rainiest month\n    int cloudiestMonth;\n    int cloudiestMonthClouds = -1;\n    int sunniestMonth;\n    int sunniestMonthSun = -1;\npublic:\n    void readFileData(char[][DAYS_IN_MONTH]); \n    void display();\n\n\n};\n\nWeather::Weather()\n{\nname: { \"June\", \"July\", \"August\"; }\n}\n\nvoid Weather::readFileData(char dayType[][DAYS_IN_MONTH])\n{\n    ifstream weatherData;\n\n    //Open data file\n    weatherData.open(\"weather.txt\");\n    if (!weatherData)\n    {\n        cout &lt;&lt; \"Could not open the data file.\\n\";\n    }\n\n    // Else, if file was opened correctly, read weather data into the array\n    for (int month = 0; month &lt; NUM_MONTHS; month++)\n    {\n        for (int day = 0; day &lt; DAYS_IN_MONTH; day++)\n            weatherData &gt;&gt; dayType[month][day];\n    }\n    // Close the data file\n    weatherData.close();\n}\n\nvoid Weather::display()\n{\n    // Print report heading\n    cout &lt;&lt; \"    Summer Weather Report\\n\\n\"\n        &lt;&lt; \"Month    Rainy  Cloudy  Sunny\\n\"\n        &lt;&lt; \"_____________________________\\n\";\n\n    // Accumulate and display weather statistics \n    for (int month = 0; month &lt; NUM_MONTHS; month++)\n    {\n        // Reset accumulators\n        rainy = cloudy = sunny = 0;\n\n        // Accumulate weather statistics for current month \n        for (int day = 0; day &lt; DAYS_IN_MONTH; day++)\n        {\n            if (dayType[month][day] == 'R')\n                rainy++;\n            else if (dayType[month][day] == 'C')\n                cloudy++;\n            else\n                sunny++;\n        }\n        // Add monthly totals to grand totals\n        rainyTotal += rainy;\n        cloudyTotal += cloudy;\n        sunnyTotal += sunny;\n\n        // Determine if this month is the rainiest so far\n        if (rainy &gt; wettestMonthsRain)\n        {\n            wettestMonthsRain = rainy;\n            wettestMonth = month;\n        }\n        // check if this month is the cloudiest month\n        if (cloudy &gt; cloudiestMonthClouds)\n        {\n            cloudiestMonthClouds = cloudy;\n            cloudiestMonth = month;\n        }\n        //check if this month is the sunniest month\n        if (sunny &gt; sunniestMonthSun)\n        {\n            sunniestMonthSun = sunny;\n            sunniestMonth = month;\n        }\n{\n\n}\n// Display this month's results \ncout &lt;&lt; left &lt;&lt; setw(6) &lt;&lt; name[month]\n&lt;&lt; right &lt;&lt; setw(6) &lt;&lt; rainy &lt;&lt; setw(8) &lt;&lt; cloudy\n&lt;&lt; setw(7) &lt;&lt; sunny &lt;&lt; endl;\n    }\n    // Display summary data\n    cout &lt;&lt; \"_____________________________\\n\";\n    cout &lt;&lt; \"Totals\" &lt;&lt; setw(6) &lt;&lt; rainyTotal &lt;&lt; setw(8)\n        &lt;&lt; cloudyTotal &lt;&lt; setw(7) &lt;&lt; sunnyTotal &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; \"The month with the most rainy days was \"\n        &lt;&lt; name[wettestMonth] &lt;&lt; \".\\n\";\n    cout &lt;&lt; \"The month with the most cloudy days was \"\n        &lt;&lt; name[cloudiestMonth] &lt;&lt; \".\\n\";\n    cout &lt;&lt; \"The month with the most sunny days was \"\n        &lt;&lt; name[sunniestMonth] &lt;&lt; \".\\n\";\n}\n\n\nint main()\n{\n    //create object\n    Weather summer;\n    summer.display();\n\n    return 0;\n}\n</code></pre>\n\n<p>Editing as I figure things out. added constructor which allows my program to compile but now my totals for the months are all showing zero. Any help is greatly appreciated!</p>\n"}, {"tags": ["c++", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 3813662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6da3058d1f5b7228b37bcf98b7dbf749?s=128&d=identicon&r=PG&f=1", "display_name": "KnightsValour", "link": "https://stackoverflow.com/users/3813662/knightsvalour"}, "edited": false, "score": 0, "creation_date": 1443195100, "post_id": 32775394, "comment_id": 53410106, "body": "Thanks Kenton - I figured this was the case. I&#39;m currently doing the second option you mentioned.   So I guess whatever a <code>ZeroCopyInputStream</code> has read in the past is not accessible anymore? As in, we need to seek its underlying file and re-create as opposed to dealing with the same <code>ZeroCopyInputStream</code>?"}, {"owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "reply_to_user": {"reputation": 113, "user_id": 3813662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6da3058d1f5b7228b37bcf98b7dbf749?s=128&d=identicon&r=PG&f=1", "display_name": "KnightsValour", "link": "https://stackoverflow.com/users/3813662/knightsvalour"}, "edited": false, "score": 0, "creation_date": 1443573634, "post_id": 32775394, "comment_id": 53545460, "body": "@KnightsValour Yes, basically."}], "tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": true, "score": 1, "last_activity_date": 1443158783, "creation_date": 1443158783, "answer_id": 32775394, "question_id": 32747013, "link": "https://stackoverflow.com/questions/32747013/is-it-possible-to-implement-fileinputstreambackup-like-functionality-with/32775394#32775394", "title": "Is it possible to implement &#39;FileInputStream::BackUp()&#39;-like functionality with Varint32 size-prefixed Protocol Buffer messages?", "body": "<p><code>ZeroCopyInputStream::Backup()</code> can only back up over the last <em>buffer</em> received. A single message may span multiple buffers, therefore there's no general way to do what you want given the <code>ZeroCopyInputStream</code> interface. </p>\n\n<p>Some options:</p>\n\n<ul>\n<li>Call <code>rawInput-&gt;ByteCount()</code> before parsing each message, in order to determine exactly the byte position where the message started. If you need to roll back, seek the underlying file backwards and recreate the <code>ZeroCopyInputStream</code> on top of it. This only works if you are reading from a file, of course.</li>\n<li>When you encounter a message in a new batch, store it off to the side, and then bring it back out when the caller asks to start reading the next batch.</li>\n</ul>\n"}], "owner": {"reputation": 113, "user_id": 3813662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6da3058d1f5b7228b37bcf98b7dbf749?s=128&d=identicon&r=PG&f=1", "display_name": "KnightsValour", "link": "https://stackoverflow.com/users/3813662/knightsvalour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 32775394, "answer_count": 1, "score": 0, "last_activity_date": 1443158783, "creation_date": 1443033350, "last_edit_date": 1495535220, "question_id": 32747013, "link": "https://stackoverflow.com/questions/32747013/is-it-possible-to-implement-fileinputstreambackup-like-functionality-with", "title": "Is it possible to implement &#39;FileInputStream::BackUp()&#39;-like functionality with Varint32 size-prefixed Protocol Buffer messages?", "body": "<p>I am trying to parse delimited protobuf messages (from a file) in C++ using the <a href=\"https://stackoverflow.com/a/22927149/3813662\">following implementation</a> of <code>readDelimitedFrom()</code> - also copied below:</p>\n\n<pre><code>bool readDelimitedFrom(\n    google::protobuf::io::ZeroCopyInputStream* rawInput,\n    google::protobuf::MessageLite* message) {\n  // We create a new coded stream for each message.  Don't worry, this is fast,\n  // and it makes sure the 64MB total size limit is imposed per-message rather\n  // than on the whole stream.  (See the CodedInputStream interface for more\n  // info on this limit.)\n  google::protobuf::io::CodedInputStream input(rawInput);\n\n  // Read the size.\n  uint32_t size;\n  if (!input.ReadVarint32(&amp;size)) return false;\n\n  // Tell the stream not to read beyond that size.\n  google::protobuf::io::CodedInputStream::Limit limit =\n      input.PushLimit(size);\n\n  // Parse the message.\n  if (!message-&gt;MergeFromCodedStream(&amp;input)) return false;\n  if (!input.ConsumedEntireMessage()) return false;\n\n  // Release the limit.\n  input.PopLimit(limit);\n\n  return true;\n}\n</code></pre>\n\n<p>My issue is that I need to group messages and process them in batches based on a <code>uint32_t</code> field contained within the message - let's call it <code>id</code>.</p>\n\n<p>Currently, I have the following code in my main loop:</p>\n\n<pre><code>...\nint infd = -1;\n_sopen_s(&amp;infd, argv[1], _O_RDONLY | _O_BINARY, _SH_DENYWR, _S_IREAD);\n\ngoogle::protobuf::io::ZeroCopyInputStream *input = \n    new google::protobuf::io::FileInputStream(infd);\n\nstd::vector&lt;ProtoMessage&gt; msgList;\nbool readMore = true;\n\ndo {\n    ProtoMessage msg;\n    readMore = readNextMessage(input, msg, msgList);\n\n    if (!msgList.empty()) {\n        std::cout &lt;&lt; \"Processing Message Batch - ID: \" &lt;&lt; msgList[0].id();\n        /* some processing done here */\n    }\n} while (readMore);\n</code></pre>\n\n<p>The implementation of <code>readNextMessage()</code> is as follows:</p>\n\n<pre><code>bool readNextMessage(\n    google::protobuf::io::ZeroCopyInputStream* rawInput,\n    ProtoMessage&amp; nextMsg,\n    std::vector&lt;ProtoMessage&gt;&amp; batchList) {\n\n    bool sameBatch = false;\n    uint32_t msgID = 0;\n    do {\n        if (readDelimitedFrom(rawInput, &amp;scan) == -1)\n            return false;\n        if (nextMsg.id() == 0)\n            msgID = nextMsg.id();    // guaranteed to be non-zero\n        if (sameBatch = (msgID == nextMsg.id()))\n            batchList.push_back(nextMsg); \n    } while (sameBatch); \n\n    // need a way to roll-back here as nextMsg is now the first new\n    // ProtoMessage belonging to a new batch.\n\n    return true;\n}\n</code></pre>\n\n<p>The logic of this function is fairly simple: take a <code>ZeroCopyInputStream</code> and parse it using <code>readDelimitedFrom()</code> to group <code>ProtoMessage</code> messages into a vector based on their <code>id</code> field. If it encounters a message with a new id, stop and return control back to <code>main</code> for processing on the message batch.</p>\n\n<p>This leads to the undesired requirement of having to consume/read the first message (including its Varint32-encoded size) that <em>does not</em> belong to the previous batch without having a way to 'backup' the stream. I would like to be able to point the <code>ZeroCopyInputStream</code> to the location before the last <code>readDelimitedFrom()</code>.</p>\n\n<p>Is there any way for me to modify <code>readDelimitedFrom()</code> to also return the number of bytes consumed during its call, and then use pointer arithmetic on the <code>ZeroCopyInputStream</code> to achieve the desired functionality?</p>\n\n<p>The provided function <code>ZeroCopyInputStream::Backup()</code> has a precondition that <code>ZeroCopyInputStream::Next()</code> be the last method call. Obviously, this is not the case when using the <code>CodedInputStream</code> wrapper to parse delimited messages.</p>\n"}, {"tags": ["c++", "arraylist"], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "edited": false, "score": 0, "creation_date": 1443033691, "post_id": 32747069, "comment_id": 53334904, "body": "Hey coincoin, I have chosen and have been taught to keep the first element of the list empty so that with the fence method, I am able to insert an element at the head, else it would be impossible to do! When I do put the index to 0, I get empty strings for description and code!"}, {"owner": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "reply_to_user": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "edited": false, "score": 0, "creation_date": 1443033949, "post_id": 32747069, "comment_id": 53335026, "body": "As said in R Sahu&#39;s answer you should maybe print listArray[listSize] since you use your index 0 is reserved."}], "tags": [], "owner": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "is_accepted": false, "score": 1, "last_activity_date": 1443033614, "creation_date": 1443033614, "answer_id": 32747069, "question_id": 32747001, "link": "https://stackoverflow.com/questions/32747001/array-based-list-insert-function/32747069#32747069", "title": "Array-Based List - Insert Function", "body": "<p>You print function starts at index 1 of your list. </p>\n\n<p>I am pretty sure you meant <strong><code>for (int i = 0; i &lt; listSize; i++)</code></strong></p>\n\n<pre><code>void print()\n{\n    for (int i = 0; i &lt; listSize; i++)\n        listArray[i].print();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "edited": false, "score": 0, "creation_date": 1443034468, "post_id": 32747158, "comment_id": 53335317, "body": "Thank you so much! Could you help me implement the remove function as well? Here is what I wrote but since you had me change insert, I should change remove as well: <code>bool remove(Elem &amp;it) \t{ \t\tif (rightLength() == 0) return false;  \t\tit = listArray[fence];   \t\tfor (int i = fence; i &lt; listSize - 1; i++) \t\t{ \t\t\tlistArray[i] = listArray[i + 1];  \t\t}  \t\tlistSize--; \t\treturn true; \t}</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "edited": false, "score": 0, "creation_date": 1443034646, "post_id": 32747158, "comment_id": 53335431, "body": "@kevin001, it will be better to create another post, with an MCVE, to address that question."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "edited": false, "score": 0, "creation_date": 1443035210, "post_id": 32747158, "comment_id": 53335781, "body": "<a href=\"http://stackoverflow.com/help/mcve\">A Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "edited": false, "score": 0, "creation_date": 1443081759, "post_id": 32747158, "comment_id": 53352002, "body": "Hey man, I posted my question to remove function, no one seems to have come up with an answer. Could you help me figure it out?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1443033877, "creation_date": 1443033877, "answer_id": 32747158, "question_id": 32747001, "link": "https://stackoverflow.com/questions/32747001/array-based-list-insert-function/32747158#32747158", "title": "Array-Based List - Insert Function", "body": "<p>In <code>print</code>, you have to use:</p>\n\n<pre><code>void print()\n{\n    for (int i = 0; i &lt; listSize; i++)\n        listArray[i].print();\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void print()\n{\n    for (int i = 1; i &lt;= listSize; i++)\n        listArray[i].print();\n}\n</code></pre>\n\n<p>Otherwise, you are going to miss an element.</p>\n\n<p>Since you indicated that the first element is not used. It is used as a \"fence\", you will need to use:</p>\n\n<pre><code>void print()\n{\n    for (int i = 1; i &lt;= listSize; i++)\n        listArray[i].print();\n}\n</code></pre>\n\n<p>but then, you'll need to change:</p>\n\n<pre><code>for (int i = listSize; i &gt; fence; i--)\n{\n    listArray[i] = listArray[i - 1];\n}\n</code></pre>\n\n<p>in <code>insert</code> to</p>\n\n<pre><code>for (int i = listSize; i &gt; fence; i--)\n{\n    listArray[i+1] = listArray[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 4875916, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Uir1D.jpg?s=128&g=1", "display_name": "Kevin Zakka", "link": "https://stackoverflow.com/users/4875916/kevin-zakka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "accepted_answer_id": 32747158, "answer_count": 2, "score": 0, "last_activity_date": 1443033877, "creation_date": 1443033302, "question_id": 32747001, "link": "https://stackoverflow.com/questions/32747001/array-based-list-insert-function", "title": "Array-Based List - Insert Function", "body": "<p>I have implemented the following insert function in my code along with a find function, </p>\n\n<pre><code>template &lt;class Elem&gt;\nbool AList&lt;Elem&gt;::insert(const Elem&amp; item) \n{\n    if (listSize == maxSize) return false;\n\n    for (int i = listSize; i &gt; fence; i--)\n    {\n        listArray[i] = listArray[i - 1];\n    }\n\n    listArray[fence + 1] = item;\n    listSize++; \n    return true;\n}\nbool find(const Elem&amp; item) \n{\n    for (int i = 0; i &lt; getSize(); i++)\n        if (listArray[i].getCode() == item.getCode()) \n            return true;\n  return false;       \n}\nvoid print()\n{\n    for (int i = 1; i &lt; listSize; i++)\n        listArray[i].print();\n}\nvoid insertMajor(AList&lt;Major&gt; &amp;t, Major &amp;m)\n{\n    if (t.find(m))\n       cout &lt;&lt; \"The major already exists!\" &lt;&lt; endl;\n    else\n       t.insert(m); //inserting major\n}\n</code></pre>\n\n<p>I have then created 3 objects of a class major, and made a list of those majors, however when I \"cout\" the list, M1 is missing.</p>\n\n<pre><code>AList&lt;Major&gt; list(5);\nMajor M1(\"ECE\", \"Electrical Engineering\");\nMajor M2(\"CCE\", \"Computer Engineering\");\nMajor M3(\"MATH\", \"Mathematics\");\n\ninsertMajor(list, M1);\ninsertMajor(list, M2);\ninsertMajor(list, M3);\n\ncout &lt;&lt; \"The list contains \" &lt;&lt; list.getSize() &lt;&lt; \" majors.\" &lt;&lt; endl;\ncout &lt;&lt; \"--------------- \\n\";\nlist.print();\ncout &lt;&lt; \"--------------- \\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The list contains 3 majors.\n--------------- \n\nMajor Code: MATH\nMajor Description: Mathematics\nMajor Code: CCE\nMajor Description: Computer Engineering\n--------------- \n</code></pre>\n\n<p>I tried finding out why it seems to swallow the first element in the list, but I can't seem to figure it out. Could anyone enlighten me?</p>\n\n<p>Kind Regards</p>\n"}, {"tags": ["c++", "dictionary", "struct"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1443033243, "post_id": 32746903, "comment_id": 53334682, "body": "Is the declaration of the <code>operator&lt;</code> function available at the point of creation of the <code>map</code>? Please post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1443033307, "post_id": 32746903, "comment_id": 53334724, "body": "There is no &#39;map&#39; in your sample code - provide a proper test case"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1443033328, "post_id": 32746903, "comment_id": 53334729, "body": "I think it might be a namespace thing.  There&#39;s <code>png::basic_rgba_pixel</code>, <code>std::map</code>, and <code>::operator&lt;</code>.  Three different namespaces."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3818296"}, "edited": false, "score": 0, "creation_date": 1443037546, "post_id": 32747026, "comment_id": 53337069, "body": "Thanks for the explanation. For people that does not what is ADL, like it was my case : <a href=\"https://en.wikipedia.org/wiki/Argument-dependent_name_lookup\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Argument-dependent_name_lookup</a>  For people that have the same problem, I follow method 3 of <a href=\"https://stackoverflow.com/questions/9849429/how-to-use-overloaded-stdless-for-stdmap\" title=\"how to use overloaded stdless for stdmap\">stackoverflow.com/questions/9849429/&hellip;</a>"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1443033394, "creation_date": 1443033394, "answer_id": 32747026, "question_id": 32746903, "link": "https://stackoverflow.com/questions/32746903/using-implicit-comparator-with-a-map-that-has-a-struct-as-key-in-c/32747026#32747026", "title": "Using implicit comparator with a map that has a struct as key in C++", "body": "<p>Your <code>operator&lt;</code> isn't in the template definition context of <code>std::less</code>, the default comparator of <code>std::map</code>, and in any event is likely hidden by the gazillion <code>operator&lt;</code>s in <code>std</code> for ordinary unqualified lookup, so if it is to be used, it must be found by ADL. But it's not in the <code>png</code> namespace, the only associated namespace of <code>png::basic_rgba_pixel&lt;unsigned char&gt;</code>, so ADL doesn't find it either.</p>\n\n<p>Write a comparator function object and pass that to <code>map</code>. You can also try putting it into the <code>png</code> namespace, but that feels more icky.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3818296"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 32747026, "answer_count": 1, "score": 0, "last_activity_date": 1443033394, "creation_date": 1443032950, "question_id": 32746903, "link": "https://stackoverflow.com/questions/32746903/using-implicit-comparator-with-a-map-that-has-a-struct-as-key-in-c", "title": "Using implicit comparator with a map that has a struct as key in C++", "body": "<p>I want to use a map of the standard libc++. So defining operator&lt; for the key type is one solution to instante a map. I did it but it does not work.</p>\n\n<p>I checked that operator&lt; works (compilation and execution).</p>\n\n<pre><code>png_pixel p1, p2;\np1.red = 5; p2.red = 20; // init\nif(p1 &lt; p2)\n  puts(\"true\");\nelse\n  puts(\"false\");\n</code></pre>\n\n<p>That is the definition of operator&lt;:</p>\n\n<pre><code>#include &lt;tuple&gt; // C++11\n\nbool\noperator&lt;(const png_pixel&amp; a, const png_pixel&amp; b)\n{\n  return std::tie(a.red, a.green, a.blue, a.alpha) &lt; std::tie(b.red, b.green, b.blue, b.alpha);\n}\n</code></pre>\n\n<p>png_pixel is a struct defined like this:</p>\n\n<pre><code>// My source code code\ntypedef png::rgba_pixel png_pixel;\n\n// libpng++ rgba_pixel.hpp http://www.nongnu.org/pngpp/\nnamespace png\n{\n    template&lt; typename T &gt;\n    struct basic_rgba_pixel\n    {\n        typedef pixel_traits&lt; basic_rgba_pixel&lt; T &gt; &gt; traits;\n\n        basic_rgba_pixel()\n            : red(0), green(0), blue(0), alpha(0)\n        {\n        }\n\n        /**\n         * \\brief Constructs rgba_pixel object from \\a red, \\a green,\n         * \\a blue and \\a alpha components passed as parameters.\n         * Alpha defaults to full opacity.\n         */\n        basic_rgba_pixel(T red, T green, T blue,\n                         T alpha = traits::get_alpha_filler())\n            : red(red), green(green), blue(blue), alpha(alpha)\n        {\n        }\n\n        T red;\n        T green;\n        T blue;\n        T alpha;\n    };\n\n    typedef basic_rgba_pixel&lt; byte &gt; rgba_pixel;\n\n    // other things\n}\n</code></pre>\n\n<p>But when I try to use png_pixel as a key in a C++ map, GCC and Clang are not happy.</p>\n\n<pre><code># GCC 4.9\nerror: no match for \u2018operator&lt;\u2019\n       (operand types are \u2018const png::basic_rgba_pixel&lt;unsigned char&gt;\u2019\n       and \u2018const png::basic_rgba_pixel&lt;unsigned char&gt;\u2019)\n\n# Clang 3.5\nerror: invalid operands to binary expression\n      ('const png::basic_rgba_pixel&lt;unsigned char&gt;'\n      and 'const png::basic_rgba_pixel&lt;unsigned char&gt;')\n</code></pre>\n\n<p>If needed, the full source code is available in branch map-converter of <a href=\"https://gitlab.com/RyDroid/Libre2DCarRacingsSimulator\" rel=\"nofollow\">https://gitlab.com/RyDroid/Libre2DCarRacingsSimulator</a>\nlibpng++ is packaged at least in Debian as libpng++-dev.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["c++", "templates", "alias", "c++14"], "comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1443034503, "post_id": 32746784, "comment_id": 53335337, "body": "you should put this in another namespace, e.g. <code>xstd</code>, and upgrade to <code>std</code> when this becomes standardized"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1443033808, "last_edit_date": 1443033808, "creation_date": 1443032839, "answer_id": 32746870, "question_id": 32746784, "link": "https://stackoverflow.com/questions/32746784/writing-custom-c14-style-type-aliases/32746870#32746870", "title": "Writing custom c++14-style type aliases", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow\"><code>std::enable_if</code></a> is defined thusly:</p>\n\n<pre><code>template&lt; bool B, class T = void &gt;\nstruct enable_if;\n</code></pre>\n\n<p>The first argument is a <em>value</em>, not a type. You need to pass in <code>std::is_base_of&lt;Space,SpaceT&gt;::value</code> as the first argument. With C++14, the correct alias would be a <em>variable</em> template:</p>\n\n<pre><code>template &lt;class Base, class Derived&gt;\nconstexpr bool is_base_of_v = std::is_base_of&lt;Base, Derived&gt;::value;\n</code></pre>\n\n<p>that you'd use the same way:</p>\n\n<pre><code>template &lt;typename SpaceT, typename TagT,\n          typename = std::enable_if_t&lt;is_base_of_v&lt;Space,SpaceT&gt;&gt;&gt;\n                                                ^^^\nclass SpatialTree : public SpaceT {\n};\n</code></pre>\n\n<p>The latter currently exists in <a href=\"http://en.cppreference.com/w/cpp/experimental/type_trait_variable_templates#is_base_of\" rel=\"nofollow\"><code>&lt;experimental/type_traits&gt;</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 3, "last_activity_date": 1443033536, "last_edit_date": 1443033536, "creation_date": 1443032854, "answer_id": 32746872, "question_id": 32746784, "link": "https://stackoverflow.com/questions/32746784/writing-custom-c14-style-type-aliases/32746872#32746872", "title": "Writing custom c++14-style type aliases", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow\"><code>enable_if</code>[<code>_t</code>]</a> wants a <code>bool</code> as its first argument. You have to write <code>std::enable_if_t&lt;std::is_base_of_t&lt;Space,SpaceT&gt;::value&gt;</code> or <code>std::enable_if_t&lt;std::is_base_of_t&lt;Space,SpaceT&gt;{}&gt;</code>, otherwise you pass a type where a <code>bool</code> is required.</p>\n\n<p>However, you might want to define a counterpart of <a href=\"http://en.cppreference.com/w/cpp/experimental/type_trait_variable_templates#is_base_of\" rel=\"nofollow\"><code>std::experimental::is_base_of_v</code></a> instead:</p>\n\n<pre><code>template &lt;class Base, class Derived&gt;\nconstexpr bool is_base_of_v = std::is_base_of&lt;Base, Derived&gt;{};\n</code></pre>\n\n<p>and use as <code>std::enable_if_t&lt;is_base_of_v&lt;Space, SpaceT&gt;&gt;</code>.</p>\n\n<p>That said, I wouldn't define either of these templates in namespace <code>std</code>, since that invokes UB as per [namespace.std]/1.</p>\n"}, {"tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": false, "score": 2, "last_activity_date": 1443034943, "creation_date": 1443034943, "answer_id": 32747503, "question_id": 32746784, "link": "https://stackoverflow.com/questions/32746784/writing-custom-c14-style-type-aliases/32747503#32747503", "title": "Writing custom c++14-style type aliases", "body": "<p>Available already as of Clang 3.6 and g++ 5.1</p>\n\n<pre><code>#include &lt;experimental/type_traits&gt;\n\nusing namespace std::experimental;\n\nstruct B {}; struct D : B {};\n\nint main() \n{\n    static_assert(is_base_of_v&lt;B, D&gt;, \"\");\n}\n</code></pre>\n"}], "owner": {"reputation": 6845, "user_id": 258809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b5b6d76b1340c285fe9d0caeaed0711b?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/258809/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 1, "accepted_answer_id": 32746870, "answer_count": 3, "score": 1, "last_activity_date": 1443054902, "creation_date": 1443032550, "last_edit_date": 1443054902, "question_id": 32746784, "link": "https://stackoverflow.com/questions/32746784/writing-custom-c14-style-type-aliases", "title": "Writing custom c++14-style type aliases", "body": "<p>I wanted to create a <code>_t</code> alias for <code>std::is_base_of</code>, similar to how <code>std::enable_if_t</code> is an alias for <code>std::enable_if</code>. So I added the following to my standard header:</p>\n\n<pre><code>namespace std {\n  template&lt;typename T, typename U&gt;\n  using is_base_of_t = typename is_base_of&lt;T,U&gt;::type;\n}\n</code></pre>\n\n<p>I'm using this new alias in the following context:</p>\n\n<pre><code>template &lt;typename SpaceT,\n          typename TagT,\n          typename = std::enable_if_t&lt;std::is_base_of_t&lt;Space,SpaceT&gt;&gt;&gt;\nclass SpatialTree : public SpaceT {\n};\n</code></pre>\n\n<p>And I'm getting the following gcc error:</p>\n\n<pre><code>SpatialTree.h:48:101: error: type/value mismatch at argument 1 in template parameter list for \u2018template&lt;bool _Cond, class _Tp&gt; using enable_if_t = typename std::enable_if::type\u2019\n template &lt;typename SpaceT, typename TagT, typename = std::enable_if_t&lt;std::is_base_of_t&lt;Space,SpaceT&gt;&gt;&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "xcode", "multithreading", "macos", "boost"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1443033109, "post_id": 32746746, "comment_id": 53334606, "body": "Why do you think that people prefer boost threads to the threads in standard library? ps. there are no threads in the STL, you&#39;re probably thinking of the standard library."}, {"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 1, "creation_date": 1443033198, "post_id": 32746746, "comment_id": 53334660, "body": "Before <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow noreferrer\">C++ 11 thread</a>, I&#39;ve opted for <a href=\"http://stackoverflow.com/questions/2170222/pthread-vs-boostthread\">boost threads over pthread</a> because I though it was simpler. Since <a href=\"http://www.cplusplus.com/reference/thread/thread/\" rel=\"nofollow noreferrer\">C++ 11</a>, I&#39;ve always used the thread from the standard library. BTW, which error did you get when you tried to install boost? how did you tried to install?"}, {"owner": {"reputation": 1, "user_id": 3606538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a13f7d2701ec57dd41742eefc13e43?s=128&d=identicon&r=PG&f=1", "display_name": "user3606538", "link": "https://stackoverflow.com/users/3606538/user3606538"}, "edited": false, "score": 0, "creation_date": 1443034973, "post_id": 32746746, "comment_id": 53335642, "body": "install brew  and then  run command  line --brew install boost. I failed in the first  step. The way to install brew is like this:  ruby -e &quot;$(curl -fsSL <a href=\"https://raw.githubusercontent.com/Homebrew/install/master/install\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/Homebrew/install/master/install</a>)&quot;.  Failed during: /usr/bin/sudo /usr/bin/xcode-select --install"}, {"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1443037499, "post_id": 32746746, "comment_id": 53337044, "body": "<a href=\"http://stackoverflow.com/questions/7298289/how-to-install-boost-via-homebrew\">How to Install boost via Homebrew?</a>"}], "owner": {"reputation": 1, "user_id": 3606538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a13f7d2701ec57dd41742eefc13e43?s=128&d=identicon&r=PG&f=1", "display_name": "user3606538", "link": "https://stackoverflow.com/users/3606538/user3606538"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1443032394, "creation_date": 1443032394, "question_id": 32746746, "link": "https://stackoverflow.com/questions/32746746/how-to-install-boost-on-mac", "title": "How to install boost on Mac", "body": "<p>Recently, I am learning multithreading in C++. And I use xcode to write c++.But how to install boost in latest version Xcode 7.0. I tried many ways but all of them failed. Besides,Why people prefer using thread library in boost, instead of thread library included in STL.</p>\n"}, {"tags": ["c++", "web-services", "soap", "exchangewebservices", "gsoap"], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 3901897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AbGAu.png?s=128&g=1", "display_name": "Tushar Soni", "link": "https://stackoverflow.com/users/3901897/tushar-soni"}, "is_accepted": true, "score": 1, "last_activity_date": 1443091098, "creation_date": 1443091098, "answer_id": 32759234, "question_id": 32746729, "link": "https://stackoverflow.com/questions/32746729/http-401-unauthorized-error-in-sending-getitem-request/32759234#32759234", "title": "HTTP 401 Unauthorized error in sending GetItem Request", "body": "<p>I got it!!, it's error occurs just because of my second request not able to login on the exchange server. since i've provided my credentials only once, So when findItem Response come, connection with the server is 'closed' and my next subsequent request not able to login. so i've to login once again to the server.</p>\n"}], "owner": {"reputation": 115, "user_id": 3901897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AbGAu.png?s=128&g=1", "display_name": "Tushar Soni", "link": "https://stackoverflow.com/users/3901897/tushar-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 1, "accepted_answer_id": 32759234, "answer_count": 1, "score": 1, "last_activity_date": 1443091098, "creation_date": 1443032330, "last_edit_date": 1443033272, "question_id": 32746729, "link": "https://stackoverflow.com/questions/32746729/http-401-unauthorized-error-in-sending-getitem-request", "title": "HTTP 401 Unauthorized error in sending GetItem Request", "body": "<p>I'm using EWS GetItem operation to fetch data from exchange server, but i've got following error</p>\n\n<p><code>Error 401 fault: SOAP-ENV:Server[no subcode]\n\"HTTP Error\"\nDetail: HTTP/1.1 401 Unauthorized\n</code></p>\n\n<p>However my login credential are correct, since those are works well with findItem request and response, but when GetItem request goes to server it give above error. My credentials are like:</p>\n\n<pre><code>soap *pSoap = proxy-&gt;soap;\nproxy-&gt;soap_endpoint = \"https://outlook.office365.com/ews/exchange.asmx\";\npSoap-&gt;userid = \"abcd@abcd.onmicrosoft.com\";\npSoap-&gt;passwd = \"abcd1234\";\n</code></pre>\n\n<p>And Received log are like</p>\n\n<pre><code>HTTP/1.1 200 OK\nCache-Control: private\nTransfer-Encoding: chunked\nContent-Type: text/xml; charset=utf-8\nServer: Microsoft-IIS/8.0\nrequest-id: b66330dd-37a5-40c0-946f-12a204b2eacb\nSet-Cookie: ClientId=OVJLSVEMECIIUMMAXM9JA; expires=Thu, 22-Sep-2016 18:00:57 GMT; path=/; secure; HttpOnly\nX-CalculatedBETarget: SG2PR06MB1165.apcprd06.prod.outlook.com\nX-BackEndHttpStatus: 200\nSet-Cookie: exchangecookie=fa26578c8e659cf1ccc3f50b3a83; expires=Fri, 23-Sep-2016 18:00:58 GMT; path=/; HttpOnly\nx-EwsHandler: FindItem\nX-AspNet-Version: 4.0.30319\nX-DiagInfo: SG2PR06MB1165\nX-BEServer: SG2PR06MB1165\nSet-Cookie: ClientId=OVJLSVEIIUMMAXM9JA; expires=Thu, 22-Sep-2016 18:00:57 GMT; path=/; secure; HttpOnly\nX-Powered-By: ASP.NET\nX-FEServer: SG2PR03CA0031\nDate: Wed, 23 Sep 2015 18:00:58 GMT\nConnection: close\n\n17d\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;s:Header&gt;&lt;h:ServerVersionInfo MajorVersion=\"15\" MinorVersion=\"1\" MajorBuildNumber=\"268\" MinorBuildNumber=\"21\" xmlns:h=\"http://schemas.microsoft.com/exchange/services/2006/types\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"/&gt;\n1e8\n&lt;/s:Header&gt;&lt;s:Body&gt;&lt;m:FindItemResponse xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"&gt;&lt;m:ResponseMessages&gt;&lt;m:FindItemResponseMessage ResponseClass=\"Success\"&gt;&lt;m:ResponseCode&gt;NoError&lt;/m:ResponseCode&gt;&lt;m:RootFolder TotalItemsInView=\"2\" IncludesLastItemInRange=\"true\"&gt;&lt;t:Items&gt;&lt;t:Message&gt;&lt;t:ItemId Id=\"\nedAQAfAGNvObtNFsAAAA==\" ChangeKey=\"CQfwjm7TRbAAAAAAWl\"/&gt;&lt;/t:Message&gt;&lt;t:Message&gt;&lt;t:ItemId Id=\"\n133AQAfAGCObtNFsAAAIFUAAAAA==\" ChangeKey=\"CQAAABYAAACZNImAAAAAWT\"/&gt;&lt;/t:Message&gt;&lt;/t:Items&gt;&lt;/m:RootFolder&gt;&lt;/m:FindItemResponseMessage&gt;&lt;/m:ResponseMessages&gt;&lt;/m:FindItemResponse&gt;\n&lt;/s:Body&gt;&lt;/s:Envelope&gt;\n\n\n/*  This below log for getItem Request*/\n\nHTTP/1.1 401 Unauthorized\nServer: Microsoft-IIS/8.0\nrequest-id: 7a1a654c-fa72-46b0-ab76-a6045c576d9f\nSet-Cookie: ClientId=H8THXUH0BECF9HJMTXHEW; expires=Thu, 22-Sep-2016 18:01:01 GMT; path=/; secure; HttpOnly\nX-Powered-By: ASP.NET\nX-FEServer: SG2PR03CA0003\nWWW-Authenticate: Basic Realm=\"\"\nDate: Wed, 23 Sep 2015 18:01:00 GMT\nConnection: close\nContent-Length: 0\n</code></pre>\n\n<p>What could be possibly wrong here, why one request pass and another fail? any idea? thank you. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1443032589, "post_id": 32746724, "comment_id": 53334305, "body": "Search the internet for &quot;factory design pattern c++&quot;."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443032728, "post_id": 32746724, "comment_id": 53334376, "body": "You may want to take some keyboarding / typing class so you can get rid of the evil macros."}, {"owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443033471, "post_id": 32746724, "comment_id": 53334792, "body": "I do not like the clone() method strategy, because I won&#39;t have any instances created prior to reading the file. I also don&#39;t know how many classes there are going to be."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "edited": false, "score": 0, "creation_date": 1443033063, "post_id": 32746838, "comment_id": 53334575, "body": "I am sorry about that, I had shortened the code and forgot to add those. Now the code above is correct, yet I still get the error."}, {"owner": {"reputation": 132, "user_id": 5339558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1740afc606f76a0a33ce457380b4ed59?s=128&d=identicon&r=PG&f=1", "display_name": "Shyamal Desai", "link": "https://stackoverflow.com/users/5339558/shyamal-desai"}, "reply_to_user": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "edited": false, "score": 0, "creation_date": 1443037078, "post_id": 32746838, "comment_id": 53336824, "body": "if you change the PROTOTYPE_CREATE to #define PROTOTYPE_CREATE(BASE, CLASS) \\     static BASE* createInstance() { return new CLASS(); } it should work"}], "tags": [], "owner": {"reputation": 132, "user_id": 5339558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1740afc606f76a0a33ce457380b4ed59?s=128&d=identicon&r=PG&f=1", "display_name": "Shyamal Desai", "link": "https://stackoverflow.com/users/5339558/shyamal-desai"}, "is_accepted": false, "score": 0, "last_activity_date": 1443037390, "last_edit_date": 1592644375, "creation_date": 1443032716, "answer_id": 32746838, "question_id": 32746724, "link": "https://stackoverflow.com/questions/32746724/c-instantiate-class-from-string-read-from-a-file/32746838#32746838", "title": "C++ Instantiate class from string, read from a file", "body": "<p>You have not defined a static instance() member function in class RTTI. But you are accessing it in the macro:</p>\n<pre><code>#define PROTOTYPE_REGISTER(NAME, CLASS) \\\nRTTI::instance()-&gt;registerClass(NAME, &amp;CLASS::createInstance);\n</code></pre>\n<p><code>PROTOTYPE_REGISTER</code> also takes 2 args.</p>\n<h1>define PROTOTYPE_CREATE(BASE, CLASS) \\</h1>\n<pre><code>static BASE* createInstance() { return new CLASS(); }\n</code></pre>\n<p>in the player class replace your call to PROTOTYPE_CREATE\nwith\nPROTOTYPE_CREATE(GameObject, Player)</p>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "edited": false, "score": 0, "creation_date": 1443042632, "post_id": 32747218, "comment_id": 53339730, "body": "A lookup table is exactly what I am going for."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1443034081, "creation_date": 1443034081, "answer_id": 32747218, "question_id": 32746724, "link": "https://stackoverflow.com/questions/32746724/c-instantiate-class-from-string-read-from-a-file/32747218#32747218", "title": "C++ Instantiate class from string, read from a file", "body": "<p>One of your hurdles is the return type from the creation function.  Most <em>factory</em> patterns return a pointer to a base class object, in other words a single return type.  </p>\n\n<p>A factory can be as simple as a bunch of switch statements, to using a <em>lookup</em> table.  </p>\n\n<p>The Lookup Table will consist of a key or string in one column and a pointer to a creation function in the second column.  Search the key column for the matching string, then use the function pointer (in the same row) to create that instance.  Again, same hurdle:  The creation functions must have the same signature in the tables (same return type).</p>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "edited": false, "score": 0, "creation_date": 1443078642, "post_id": 32748292, "comment_id": 53350430, "body": "Is there a way to call PROTOTYPE_REGISTER inside the cpp file, where the Player class is implemented, i.e.:  <code>&#47;&#47;Player.cpp PROTOTYPE_REGISTER(&quot;Player&quot;, Player)  Player::Player(){}</code>?"}], "tags": [], "owner": {"reputation": 132, "user_id": 5339558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1740afc606f76a0a33ce457380b4ed59?s=128&d=identicon&r=PG&f=1", "display_name": "Shyamal Desai", "link": "https://stackoverflow.com/users/5339558/shyamal-desai"}, "is_accepted": false, "score": 0, "last_activity_date": 1443037718, "creation_date": 1443037718, "answer_id": 32748292, "question_id": 32746724, "link": "https://stackoverflow.com/questions/32746724/c-instantiate-class-from-string-read-from-a-file/32748292#32748292", "title": "C++ Instantiate class from string, read from a file", "body": "<pre><code>try this: Very small difference from your code:\n\nstruct GameObject {\n\n};\ntypedef GameObject* (*createFunc)(void);\nclass RTTI\n{\n\npublic:\n    static RTTI* instance();\n    void registerClass(const std::string&amp; className, createFunc instantiate);\n    GameObject* createGameObject(const std::string&amp; className);\nprivate:\n    static RTTI* s_instance;\n    std::map&lt;std::string, createFunc&gt; s_registeredClases;\n};\n\nRTTI* RTTI::s_instance = nullptr;\n\nRTTI* RTTI::instance()\n{\n    if (!s_instance)\n    {\n        s_instance = new RTTI();\n    }\n    return s_instance;\n}\nvoid RTTI::registerClass(const std::string&amp; className, createFunc instantiate)\n{\n    s_registeredClases.insert(std::make_pair (className, instantiate));\n}\nGameObject* RTTI::createGameObject(const std::string&amp; className)\n{\n    return nullptr;\n}\n\n**#define PROTOTYPE_CREATE(BASE, CLASS) \\\n    static BASE* createInstance() { return new CLASS(); }**\n\n#define PROTOTYPE_REGISTER(NAME, CLASS) \\\n    RTTI::instance()-&gt;registerClass(NAME, CLASS::createInstance);\n\n\n//Player.h\nclass Player : public GameObject\n{\npublic:\n    //static GameObject* createInstance() { return new Player(); }\n    PROTOTYPE_CREATE(GameObject, Player);\n};\n//Player.cpp\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    PROTOTYPE_REGISTER(\"Player\", Player)\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 5009031, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c38c6871d62d749f7bb5df34f4998c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Dortulov", "link": "https://stackoverflow.com/users/5009031/ivan-dortulov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 966, "favorite_count": 0, "closed_date": 1443043832, "answer_count": 3, "score": 0, "last_activity_date": 1443080598, "creation_date": 1443032307, "last_edit_date": 1443080598, "question_id": 32746724, "link": "https://stackoverflow.com/questions/32746724/c-instantiate-class-from-string-read-from-a-file", "closed_reason": "Duplicate", "title": "C++ Instantiate class from string, read from a file", "body": "<p><strong>EDIT</strong>: The problem was that I was trying to call a static function in the global scope of my cpp files, which didn't work for some reason: </p>\n\n<pre><code>//Player.cpp\nRTTI::instance()-&gt;registerClass(...) // ERROR\nPlayer::Player() {}\nPlayer::~Player() {}\n</code></pre>\n\n<p>To solve the problem I changed my code as follows:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct RTTIRegister {   \n    RTTIRegister&lt;T&gt;(const std::string&amp; name) { \n        RTTI::instance()-&gt;registerClass(name, &amp;T::createInstance); \n    } \n};\n\n#define PROTOTYPE_CREATE(CLASS, BASE) \\     \n    static BASE* createInstance() { return new CLASS(); }\n\n#define PROTOTYPE_REGISTER(NAME, CLASS) \\   \n    RTTIRegister&lt;CLASS&gt; __rtti__(NAME);\n</code></pre>\n\n<p><strong>&lt;------------------- END OF EDIT ----------------------></strong></p>\n\n<p>I am tryting to write a class / macro which will enable me to create instances of classes, whose name I have stored in strings, read from files. I have lots of derived classes of the class GameObject. When I use the code bellow it gives me an error in Visual Studio C++ 2012 Express:</p>\n\n<pre><code>Error   2   IntelliSense: a trailing return type requires the 'auto' type specifier Player.cpp\nError   1   error C2061: syntax error : identifier 'registerClass'  player.cpp\n</code></pre>\n\n<p><strong>Why am I receiving this error and what can I do to fix it?</strong></p>\n\n<p>Code:</p>\n\n<pre><code>// JSON \n{\n    \"GameObjects\" : [\n        {\n            \"Class\" : \"Player\",\n            \"Health\" : 15\n        }\n    ]\n}\n</code></pre>\n\n<p>Now when my program reads the file it should create an instance of the class Player. What I currently have is the following:</p>\n\n<pre><code>class RTTI\n{\n    typedef GameObject* (*createFunc)(void);\n\n    public:\n        static RTTI* instance();\n        void registerClass(const std::string&amp; className, createFunc instantiate);\n        GameObject* createGameObject(const std::string&amp; className);\n    private:\n        static RTTI* s_instance;\n        std::map&lt;std::string, createFunc&gt; s_registeredClases;\n};\n\n#define PROTOTYPE_CREATE(CLASS) \\\n    static CLASS* createInstance() { return new CLASS(); }\n\n#define PROTOTYPE_REGISTER(NAME, CLASS) \\\n    RTTI::instance()-&gt;registerClass(NAME, &amp;CLASS::createInstance);\n</code></pre>\n\n<p>Now my player class is defined as:</p>\n\n<pre><code>//Player.h\nclass Player : public GameObject\n{\n    PROTOTYPE_CREATE(Player)\n}\n\n//Player.cpp\nPROTOTYPE_REGISTER(\"Player\", Player) /* **THIS IS WHERE IT GIVES ME AN ERROR */\nPlayer::Player() {}\nPlayer::~Player() {}\n</code></pre>\n\n<p>After a class has been registered I should be able to create instances by saying RTTI::createGameObject(\"Player\");</p>\n"}, {"tags": ["c++", "arrays", "dictionary", "key"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1443032165, "post_id": 32746644, "comment_id": 53334034, "body": "Try <code>map&lt;std::array&lt;int,27&gt; ,int&gt; mapa;</code> instead."}, {"owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443032295, "post_id": 32746644, "comment_id": 53334109, "body": "It says mapa was not declared in this scope."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443032710, "post_id": 32746644, "comment_id": 53334365, "body": "Add <code>#include &lt;array&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443033773, "post_id": 32746739, "comment_id": 53334945, "body": "<i>@MtCS</i> <i>&quot;... therfore you cannot build a map of arrays.&quot;</i> Well, you were proven wrong here."}], "tags": [], "owner": {"reputation": 185, "user_id": 3784688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120785cdb10fe6639b0e149d93f4ca01?s=128&d=identicon&r=PG", "display_name": "MtCS", "link": "https://stackoverflow.com/users/3784688/mtcs"}, "is_accepted": false, "score": 0, "last_activity_date": 1443032372, "creation_date": 1443032372, "answer_id": 32746739, "question_id": 32746644, "link": "https://stackoverflow.com/questions/32746644/is-it-possible-for-the-keys-of-a-map-to-be-arrays-map-array-error/32746739#32746739", "title": "Is it possible for the Keys of a map to be arrays? (Map array error)", "body": "<p>This would compile:</p>\n\n<pre><code>map&lt;int *,int&gt; mapa\n</code></pre>\n\n<p>But it is not what you want...\nArrays are almost the same as pointers, therefore you cannot build a map of arrays. It would only compare the pointer in memory when retrieving/setting its value, not its content.</p>\n"}, {"comments": [{"owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1443032714, "post_id": 32746798, "comment_id": 53334366, "body": "Thank you very much! But when I run the code that I just added recently to the body of my question it marks an error in the line mapa[n]++ saying mapa  was not declared in this scope, can this be fixed?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1443032843, "post_id": 32746798, "comment_id": 53334442, "body": "Look at my comment on your question, you have to include the corresponding header of course."}, {"owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1443034137, "post_id": 32746798, "comment_id": 53335133, "body": "Okay, I got it to work, I just have a couple of more questions, thank you for your help, it has been awesome. So apparently I am using a different kind of array now? to get it to work I had to make n an array of the new kind."}, {"owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1443034256, "post_id": 32746798, "comment_id": 53335199, "body": "I uploaded the final version that worked, It didn&#39;t work when I used int n[27]. I had to declare a new object of type array, are they different things? Also, I had to compile using a modified g++. These objects only exist in c++11 right?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1443034466, "post_id": 32746798, "comment_id": 53335313, "body": "@dREaM <i>&quot;These objects only exist in c++11 right?&quot;</i> Yes, that&#39;s already pointed out in the reference documentation link."}, {"owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1443034681, "post_id": 32746798, "comment_id": 53335456, "body": "One last question: would int n[27]; work or would I need array&lt;int,27&gt; n;  ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 1, "creation_date": 1443034846, "post_id": 32746798, "comment_id": 53335565, "body": "I&#39;ve already pointed out in my answer, there&#39;s no automatic conversion, you would need it."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 3, "last_activity_date": 1443034346, "last_edit_date": 1443034346, "creation_date": 1443032572, "answer_id": 32746798, "question_id": 32746644, "link": "https://stackoverflow.com/questions/32746644/is-it-possible-for-the-keys-of-a-map-to-be-arrays-map-array-error/32746798#32746798", "title": "Is it possible for the Keys of a map to be arrays? (Map array error)", "body": "<blockquote>\n  <p>But I get an error, is it because arrays can't be a map? </p>\n</blockquote>\n\n<p>I think you actually mean <em>map key type</em>. No, raw arrays can't be used as keys, because there's no intrinsic less operator declared for them.</p>\n\n<blockquote>\n  <p>What can I do in this case? Would it work if I used a vector instead of an array?</p>\n</blockquote>\n\n<p>Yes, you can use <code>std::vector&lt;int&gt;</code> as key. Even better yet <code>std::array&lt;int,27&gt;</code>, if you know it's a fixed size of 27.</p>\n\n<p>The exact documentation how <code>std::less()</code> works with <code>std::array</code> can be found <a href=\"http://en.cppreference.com/w/cpp/container/array/operator_cmp\" rel=\"nofollow\">here</a>.</p>\n\n<p>Alternatively you can provide your own comparison algorithm as @NathanOliver was pointing out.</p>\n\n<hr>\n\n<blockquote>\n  <p>Is this the suggestion?</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;map&gt;\nusing namespace std;\nmap&lt;array&lt;int,27&gt; ,int&gt; mapa;\nint n[27];\nint main(){\n    mapa[n]++;\n}\n</code></pre>\n</blockquote>\n\n<p>Almost. You need</p>\n\n<pre><code>std::array&lt;int,27&gt; n;\n</code></pre>\n\n<p>there of course, there's no automatic conversion.</p>\n"}], "owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 32746798, "answer_count": 2, "score": 1, "last_activity_date": 1443034346, "creation_date": 1443031975, "last_edit_date": 1443034177, "question_id": 32746644, "link": "https://stackoverflow.com/questions/32746644/is-it-possible-for-the-keys-of-a-map-to-be-arrays-map-array-error", "title": "Is it possible for the Keys of a map to be arrays? (Map array error)", "body": "<p>I want to make a map which has arrays of the form int[27] as Keys, So I tried the following:</p>\n\n<pre><code>#include &lt;map&gt;\nusing namespace std;\nmap&lt;int[27] ,int&gt; mapa;\nint n[27];\nint main(){\n    mapa[n]++;\n}\n</code></pre>\n\n<p>But I get an error, is it because arrays can't be used as key type for a map?<br>\nWhat can I do in this case? Would it work if I used a vector instead of an array?</p>\n\n<hr>\n\n<p>Is this the suggestion?</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;map&gt;\nusing namespace std;\nmap&lt;array&lt;int,27&gt; ,int&gt; mapa;\nint n[27];\nint main(){\n    mapa[n]++;\n}\n</code></pre>\n\n<hr>\n\n<p>This is the version that works:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;map&gt;\n#include &lt;array&gt;\nusing namespace std;\nmap&lt;array&lt;int,27&gt;, int&gt; mapa;\narray&lt;int,27&gt; v;\nint main(){\n    mapa[v]++;\n    printf(\"%d\\n\",mapa[v]);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1443031841, "post_id": 32746584, "comment_id": 53333819, "body": "Close all applications and try again - if failing, reboot."}, {"owner": {"reputation": 11, "user_id": 5368985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e42c20ee9041d3149643eab713323ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sasuke896", "link": "https://stackoverflow.com/users/5368985/sasuke896"}, "edited": false, "score": 0, "creation_date": 1443032496, "post_id": 32746584, "comment_id": 53334244, "body": "It&#39;s still not working"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1443032888, "post_id": 32746584, "comment_id": 53334471, "body": "Write the simplest program you can to write the file (<code>g &lt;&lt; &quot;hello&quot;;</code>) and try it. If it writes nothing, test the stream (<code>if(!g.good()) cout &lt;&lt; &quot;not good&quot; &lt;&lt; endl;</code>) and tell us the result."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1443032992, "post_id": 32746584, "comment_id": 53334529, "body": "Does your program have permission to create and write files in the directory of your executable?"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1443036187, "post_id": 32746584, "comment_id": 53336320, "body": "Why do you say that the file is not opening? Is it because it doesn&#39;t have the contents you expect it to? Is it because it&#39;s not being created on disk (and it didn&#39;t exist before you ran your program)? You need to provide more detail..."}], "answers": [{"comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 2, "creation_date": 1443033616, "post_id": 32746924, "comment_id": 53334864, "body": "Even assuming that <code>fwrite</code> is an acceptable substitute for everything that can be done with an <code>ofstream</code>, how can you be sure that <code>fwrite</code> would work at all? It might be a problem with the file system, or the code that calls the write operations."}], "tags": [], "owner": {"reputation": 11, "user_id": 5269864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IT76mmYNzjA/AAAAAAAAAAI/AAAAAAAAAEo/iRCxuFx16PM/photo.jpg?sz=128", "display_name": "Kaustubh Yadav", "link": "https://stackoverflow.com/users/5269864/kaustubh-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1443033039, "creation_date": 1443033039, "answer_id": 32746924, "question_id": 32746584, "link": "https://stackoverflow.com/questions/32746584/can-not-open-output-file/32746924#32746924", "title": "Can not open output file", "body": "<p>You haven't specified what problem exactly are you having. You are alsoo required to share the code to help us help you better.</p>\n\n<p>There's other ways you could do this.\nFirst, if you are trying algorithmic questions of competitive type, you can use input redirection.</p>\n\n<p>In windows openn command prompt <code>\"your_program &lt; psp.in &gt; psp.out\"</code>. This way you won't be needing to use file handling at all. You could also </p>\n\n<p>Or you could simply use the functions fread and fwrite which works for both linux and windows.</p>\n\n<blockquote>\n  <p>FILE *f = fopen(\"psp.in\",O_RDWR | O_CREAT);\n  fread(&amp;buffer,size_of_data_type_to_be_read,no_of_such_data_items_to_be_read,fd);</p>\n</blockquote>\n\n<p>Similarly you can use fwrite to write to a file.</p>\n"}], "owner": {"reputation": 11, "user_id": 5368985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e42c20ee9041d3149643eab713323ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sasuke896", "link": "https://stackoverflow.com/users/5368985/sasuke896"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1443033039, "creation_date": 1443031707, "last_edit_date": 1443031981, "question_id": 32746584, "link": "https://stackoverflow.com/questions/32746584/can-not-open-output-file", "title": "Can not open output file", "body": "<p>So I am a very very new to programming. like, solving for problems and while and things like that. I was using include  for working with files.</p>\n\n<pre><code>ifstream f(\"psp.in\");\nofstream g(\"psp.out);\n</code></pre>\n\n<p>I have worked like that before and I didn't have any problems, but for some reasons, now, everytime I try to open the psp.out file, it doesn't do anything.\nI ussually write the information in the .in file which I create and then the program solves the problem and I open the .out file to see the answer. But now I don't know why it is not opening.</p>\n"}, {"tags": ["c++", "serialization", "mpi", "boost-mpi"], "owner": {"reputation": 7427, "user_id": 293195, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/seTSX.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/293195/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443031571, "creation_date": 1443031571, "question_id": 32746544, "link": "https://stackoverflow.com/questions/32746544/mpi-content-skeleton-for-variable-mechanism", "title": "MPI content/skeleton for variable mechanism?", "body": "<p>I am wondering what the benefits are for the skelton &amp; content implementation of MPI functionalities such as provided in Boost.MPI.\nAs far as I understood is the skeleton&amp;content approach ONLY beneficial if\na message has a fixed size of arbitrary type and this message needs to be sent several times with different content.</p>\n\n<p>So skeleton&amp;content does not work in the following case:</p>\n\n<pre><code>std::list&lt;int&gt; l;\n\n// Exchange Skeleton mpi::skeleton(l)\n\n// Send Content mpi::content(l) (but modify the size of the list, so sending once 10 element and in the next time 2 elements, for example)\n</code></pre>\n\n<p>Boost sends the content by serializing the data, and deserializing it on the other end. ( I assume it will send the data with type MPI_BYTE and handling the endianess with flags somehow ?)</p>\n\n<p>Two questions:</p>\n\n<ol>\n<li>Why the need for sending the skeleton for any serializable type (can also be a serialization wrapper object): Can Boost not just deserialize (given the same serialization wrapper which provides deserialization) the received data without the need of the skeleton?</li>\n</ol>\n\n<p>So the skelton&amp;content approach is beneficial in the sense that dynamic sizes of lists etc.. do NOT need to be serialized again in subsequent calls. So the real benefit is that the serialized message (sending content) is smaller with the skeleton&amp;content approach. And if the message is sent several times this is beneficial.</p>\n\n<p>So to conclude, if the message is highly dynamic (shape changes) and only one message is sent skeleton&amp;content should not be applied.</p>\n\n<p>Is that correct?</p>\n"}, {"tags": ["c++", "c", "floating-point", "ieee-754", "bankers-rounding"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1443032009, "post_id": 32746523, "comment_id": 53333936, "body": "They are compliant with the standard, but do not implement all of it.  &quot;Round to nearest, ties away from zero&quot; is one of the IEEE-754 rounding modes."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1443032252, "post_id": 32746523, "comment_id": 53334082, "body": "IEEE-754 notes that the schoolbook rounding mode exists, but is only intended for decimal floats. <code>An implementation of this standard shall provide roundTiesToEven and the three directed rounding attributes. A decimal format implementation of this standard shall provide roundTiesToAway as a userselectable rounding-direction attribute. The rounding attribute roundTiesToAway is not required for a binary format implementation.</code> Rounding of ties to even is the only portable (and sensible) mode."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 4, "creation_date": 1443033137, "post_id": 32746523, "comment_id": 53334619, "body": "Instead of at <code>round()</code> look at <code>rint()</code> used with a default rounding mode of &quot;round to nearest or even&quot;."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1443033192, "post_id": 32746523, "comment_id": 53334659, "body": "You might be interested in CPython&#39;s solution to this, <a href=\"https://github.com/python/cpython/blob/3.5/Objects/floatobject.c#L955-L958\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1443035352, "post_id": 32746523, "comment_id": 53335860, "body": "@njuffa Thanks a lot for the pointer to <code>rint</code> (extremely unintuitive name). I had to double check the C standard, but it appears to indeed do the right thing when <code>__STDC_IEC_559__</code> is set. The real mystery is why <code>round</code> does something different from <code>rint</code> and <code>FE_TONEAREST</code>."}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1443032380, "post_id": 32746649, "comment_id": 53334163, "body": "Is it guaranteed that <code>(round(x) - x)</code> will return 0.5/-0.5 if the fractional component of x is exactly half, i.e. is this an exact operation?"}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 2, "creation_date": 1443032484, "post_id": 32746649, "comment_id": 53334237, "body": "Yes.  The result of <code>round(x) - x</code> will be exactly representable (assuming  an IEEE 754 format)."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 2, "creation_date": 1443032653, "post_id": 32746649, "comment_id": 53334339, "body": "An evil trick is to use <code>2.0 * round(0.5 * x)</code> in the case where <code>fabs(x - round(x)) == 0.5</code>, which saves the somewhat messy task of figuring out whether <code>round(x)</code> is even or odd."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 5, "last_activity_date": 1443032007, "creation_date": 1443032007, "answer_id": 32746649, "question_id": 32746523, "link": "https://stackoverflow.com/questions/32746523/ieee-754-compliant-round-half-to-even/32746649#32746649", "title": "IEEE-754 compliant round-half-to-even", "body": "<p>Round the number x, and if the difference between x and round (x) is exactly +0.5 or -0.5, and round (x) is odd, then round (x) was rounded in the wrong direction, so you subtract the difference from x. </p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1443070029, "last_edit_date": 1443070029, "creation_date": 1443051133, "answer_id": 32751115, "question_id": 32746523, "link": "https://stackoverflow.com/questions/32746523/ieee-754-compliant-round-half-to-even/32751115#32751115", "title": "IEEE-754 compliant round-half-to-even", "body": "<p>Use <code>remainder(double x, 1.0)</code> from the C standard library.  This is independent of the current rounding mode.</p>\n\n<blockquote>\n  <p>The remainder functions compute the remainder x REM y required by <a href=\"https://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow\">IEC 60559</a></p>\n</blockquote>\n\n<p><code>remainder()</code> is useful here as is meets OP's ties to even requirement.</p>\n\n<hr>\n\n<pre><code>double round_to_nearest_ties_to_even(double x) {\n  x -= remainder(x, 1.0);\n  return x;\n}\n</code></pre>\n\n<p>Test code</p>\n\n<pre><code>void rtest(double x) {\n  double round_half_to_even = round_to_nearest_ties_to_even(x);\n  printf(\"x:%25.17le   z:%25.17le \\n\", x, round_half_to_even);\n}\n\nvoid rtest3(double x) {\n  rtest(nextafter(x, -1.0/0.0));\n  rtest(x);\n  rtest(nextafter(x, +1.0/0.0));\n}\n\nint main(void) {\n  rtest3(-DBL_MAX);\n  rtest3(-2.0);\n  rtest3(-1.5);\n  rtest3(-1.0);\n  rtest3(-0.5);\n  rtest(nextafter(-0.0, -DBL_MAX));\n  rtest(-0.0);\n  rtest(0.0);\n  rtest(nextafter(0.0, +DBL_MAX));\n  rtest3(0.5);\n  rtest3(1.0);\n  rtest3(1.5);\n  rtest3(2.0);\n  rtest3(DBL_MAX);\n  rtest3(0.0/0.0);\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>x:                     -inf   z:                     -inf \nx:-1.79769313486231571e+308   z:-1.79769313486231571e+308 \nx:-1.79769313486231551e+308   z:-1.79769313486231551e+308 \nx: -2.00000000000000044e+00   z: -2.00000000000000000e+00 \nx: -2.00000000000000000e+00   z: -2.00000000000000000e+00 \nx: -1.99999999999999978e+00   z: -2.00000000000000000e+00 \nx: -1.50000000000000022e+00   z: -2.00000000000000000e+00 \nx: -1.50000000000000000e+00   z: -2.00000000000000000e+00 tie to even\nx: -1.49999999999999978e+00   z: -1.00000000000000000e+00 \nx: -1.00000000000000022e+00   z: -1.00000000000000000e+00 \nx: -1.00000000000000000e+00   z: -1.00000000000000000e+00 \nx: -9.99999999999999889e-01   z: -1.00000000000000000e+00 \nx: -5.00000000000000111e-01   z: -1.00000000000000000e+00 \nx: -5.00000000000000000e-01   z:  0.00000000000000000e+00 tie to even \nx: -4.99999999999999944e-01   z:  0.00000000000000000e+00 \nx:-4.94065645841246544e-324   z:  0.00000000000000000e+00 \nx: -0.00000000000000000e+00   z:  0.00000000000000000e+00 \nx:  0.00000000000000000e+00   z:  0.00000000000000000e+00 \nx: 4.94065645841246544e-324   z:  0.00000000000000000e+00 \nx:  4.99999999999999944e-01   z:  0.00000000000000000e+00 \nx:  5.00000000000000000e-01   z:  0.00000000000000000e+00 tie to even \nx:  5.00000000000000111e-01   z:  1.00000000000000000e+00 \nx:  9.99999999999999889e-01   z:  1.00000000000000000e+00 \nx:  1.00000000000000000e+00   z:  1.00000000000000000e+00 \nx:  1.00000000000000022e+00   z:  1.00000000000000000e+00 \nx:  1.49999999999999978e+00   z:  1.00000000000000000e+00 \nx:  1.50000000000000000e+00   z:  2.00000000000000000e+00 tie to even \nx:  1.50000000000000022e+00   z:  2.00000000000000000e+00 \nx:  1.99999999999999978e+00   z:  2.00000000000000000e+00 \nx:  2.00000000000000000e+00   z:  2.00000000000000000e+00 \nx:  2.00000000000000044e+00   z:  2.00000000000000000e+00 \nx: 1.79769313486231551e+308   z: 1.79769313486231551e+308 \nx: 1.79769313486231571e+308   z: 1.79769313486231571e+308 \nx:                      inf   z:                      inf \nx:                      nan   z:                      nan \nx:                      nan   z:                      nan \nx:                      nan   z:                      nan \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1443116680, "post_id": 32759457, "comment_id": 53374640, "body": "I agree that (int)(x + 0.5f) is wrong for many reasons. However, MSVC in particular detects this idiom and replaces it with cvtss2si, which I would guess is why it is commonly used."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1443117985, "post_id": 32759457, "comment_id": 53375285, "body": "@68ejxfcj5669: I doubt that&#39;s the case, but I would love to be proved wrong.  I don&#39;t have a windows machine to test on, and searching the web doesn&#39;t turn up any accounts of this transformation.  Do you have an actual example of a program where MSVC did that?"}], "tags": [], "owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "is_accepted": false, "score": 5, "last_activity_date": 1443092692, "last_edit_date": 1443092692, "creation_date": 1443091752, "answer_id": 32759457, "question_id": 32746523, "link": "https://stackoverflow.com/questions/32746523/ieee-754-compliant-round-half-to-even/32759457#32759457", "title": "IEEE-754 compliant round-half-to-even", "body": "<blockquote>\n  <p>The C standard library provides the <code>round</code>, <code>lround</code>, and <code>llround</code> family of functions in C99. However, these functions are not IEEE-754 compliant, because they do not implement the \"banker's rounding\" of half-to-even as mandated by IEEE...</p>\n</blockquote>\n\n<p>It doesn't make sense to talk about whether or not an individual function is \"IEEE-754 compliant\".  IEEE-754 compliance requires that a set of data types operations with defined semantics be available.  It does not require that those types or operations have specific names, nor does it require that <em>only</em> those operations be available.  An implementation can provide whatever additional functions it wants and still be compliant.  If an implementation wants to provide round-to-odd, round-random, round-away-from-zero, and trap-if-inexact, it can do so.</p>\n\n<p>What IEEE-754 actually requires for rounding is that the following six operations <em>are</em> provided:</p>\n\n<blockquote>\n  <p><strong>convertToIntegerTiesToEven</strong>(x)</p>\n  \n  <p><strong>convertToIntegerTowardZero</strong>(x)</p>\n  \n  <p><strong>convertToIntegerTowardPositive</strong>(x)</p>\n  \n  <p><strong>convertToIntegerTowardNegative</strong>(x)</p>\n  \n  <p><strong>convertToIntegerTiesToAway</strong>(x)</p>\n  \n  <p><strong>convertToIntegerExact</strong>(x)</p>\n</blockquote>\n\n<p>In C and C++, the last five of these operations are bound to the <code>trunc</code>, <code>ceil</code>, <code>floor</code>, <code>round</code>, and <code>rint</code> functions, respectively.  C11 and C++14 do not have a binding for the first, but future revisions will use <code>roundeven</code>.  As you can see, <code>round</code> actually is one of the required operations.</p>\n\n<p>However, <code>roundeven</code> is not available in current implementations, which brings us to the next part of your question:</p>\n\n<blockquote>\n  <p>The usual ad-hoc way to implement rounding in C is the expression <code>(int)(x + 0.5f)</code> which, despite being incorrect in strict IEEE-754 math, is usually translated by compilers into the correct <code>cvtss2si</code> instruction. However, this is certainly not a portable assumption.</p>\n</blockquote>\n\n<p>The problems with that expression extend well-beyond \"strict IEEE-754 math\".  It's totally incorrect for negative <code>x</code>, gives the wrong answer for <code>nextDown(0.5)</code>, and turns all odd integers in the 2**23 binade into even integers.  Any compiler that translates it into <code>cvtss2si</code> is horribly, horribly broken.  If you have an example of that happening, I would love to see it.</p>\n\n<blockquote>\n  <p>How can I implement a function that will round any floating point value with half-to-even semantics?</p>\n</blockquote>\n\n<p>As <strong>njuffa</strong> noted in a comment, you can ensure that the default rounding mode is set and use <code>rint</code> (or <code>lrint</code>, as it sounds like you actually want an integer result), or you can implement your own rounding function by calling <code>round</code> and then fixing up halfway cases like <strong>gnasher729</strong> suggests.  Once the n1778 bindings for C are adopted, you'll be able to use the <code>roundeven</code> or <code>fromfp</code> functions to do this operation without needing to control the rounding mode.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1443221081, "creation_date": 1443221081, "answer_id": 32791681, "question_id": 32746523, "link": "https://stackoverflow.com/questions/32746523/ieee-754-compliant-round-half-to-even/32791681#32791681", "title": "IEEE-754 compliant round-half-to-even", "body": "<p>The <code>float</code> data type can represent all whole numbers, but no fractions, within the range 8388608.0f to 16777216.0f.  Any <code>float</code> numbers which are larger than 8388607.5f are whole numbers, and no rounding will be necessary.  Adding 8388608.0f to any non-negative <code>float</code> which is smaller than that will yield a whole number which will be rounded according to the current rounding mode (typically round-half-to-even).  Subtracting 8388608.0f will then yield a properly-rounded version of the original (assuming it was in a suitable range).</p>\n\n<p>Thus, it should be possible to do something like:</p>\n\n<pre><code>float round(float f)\n{\n  if (!(f &gt; -8388608.0f &amp;&amp; f &lt; 8388608.0f)) // Return true for NaN\n    return f;\n  else if (f &gt; 0)\n    return (float)(f+8388608.0f)-8388608.0f;\n  else\n    return (float)(f-8388608.0f)+8388608.0f;\n}\n</code></pre>\n\n<p>and take advantage of the natural rounding behavior of addition, without having to use any other \"round-to-integer\" facility.</p>\n"}, {"comments": [{"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 1, "creation_date": 1514019038, "post_id": 47950887, "comment_id": 82871681, "body": "If 2.500001 rounds to 2 instead of 3, then this isn&#39;t a standards-conforming round."}, {"owner": {"reputation": 1101, "user_id": 7870957, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/jG6LK.jpg?s=128&g=1", "display_name": "Shivansh Jagga", "link": "https://stackoverflow.com/users/7870957/shivansh-jagga"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1514019317, "post_id": 47950887, "comment_id": 82871719, "body": "The program is written for someone who wants this implemented in their own code. The error can be changed to any precision point needed in the code,i.e, it can even be the smallest float value possible.  <code>error = sys.float_info.min</code> (for Python) , and a smiliar equivalent for C++"}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1514020479, "post_id": 47950887, "comment_id": 82871952, "body": "Okay, but it doesn&#39;t answer the question: the OP is looking for an IEEE 754-compliant rounding operation. The code in this answer doesn&#39;t give that. And using <code>error = sys.float_info.min</code> isn&#39;t a solution. If you test your code, you&#39;ll find that even the current code doesn&#39;t give <code>4</code> from an input of <code>3.5</code>; it gives <code>3</code>."}], "tags": [], "owner": {"reputation": 1101, "user_id": 7870957, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/jG6LK.jpg?s=128&g=1", "display_name": "Shivansh Jagga", "link": "https://stackoverflow.com/users/7870957/shivansh-jagga"}, "is_accepted": false, "score": 1, "last_activity_date": 1514019565, "last_edit_date": 1592644375, "creation_date": 1514016435, "answer_id": 47950887, "question_id": 32746523, "link": "https://stackoverflow.com/questions/32746523/ieee-754-compliant-round-half-to-even/47950887#47950887", "title": "IEEE-754 compliant round-half-to-even", "body": "<p>The following is a simple implementation of <strong>round-half to even</strong> program which follows the IEEE standard of rounding.</p>\n<blockquote>\n<p><strong>Logic :</strong>\nerror = 0.00001</p>\n<ol>\n<li>number=2.5</li>\n<li>temp = floor(2.5)%2 = 2%2 = 0</li>\n<li><strong>x</strong> = -1 + temp = -1</li>\n<li>x*error + number = 2.40009</li>\n<li>round(2.40009) = 2</li>\n</ol>\n<p><strong>Note:</strong> The error here is of  0.00001, i.e, if 2.500001 occurs, then it will round off to 2 instead of 3</p>\n</blockquote>\n<p><strong>Python 2.7 implementation:</strong></p>\n<pre><code>temp = (number)     \nrounded_number = int( round(-1+ temp%2)*0.00001 + temp )\n</code></pre>\n<p><strong>C++ implementation:</strong> (Use <em>math.h</em> for floor function)</p>\n<pre><code>float temp = (number)     \nint rounded_number = (int)( (-1+ temp%2)*0.00001 + temp + 0.5)\n</code></pre>\n<p>The output this would give would be as follows acc. to standards :</p>\n<blockquote>\n<p>(3.5) -&gt; 4</p>\n<p>(2.5) -&gt; 2</p>\n</blockquote>\n<hr />\n<p><strong>Edit 1 :</strong> As pointed out by @Mark Dickinson in the comments. The error can be modified as required in your code to standardize it. For python, to turn it into the smallest float value possible , you may do the following.</p>\n<pre><code>import sys\nerror = sys.float_info.min\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4108, "user_id": 1435420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d13273e7c2c92c5d6e3bb6291854d3e7?s=128&d=identicon&r=PG", "display_name": "David G", "link": "https://stackoverflow.com/users/1435420/david-g"}, "is_accepted": false, "score": 2, "last_activity_date": 1563220100, "creation_date": 1563220100, "answer_id": 57046307, "question_id": 32746523, "link": "https://stackoverflow.com/questions/32746523/ieee-754-compliant-round-half-to-even/57046307#57046307", "title": "IEEE-754 compliant round-half-to-even", "body": "<p>Since C++11, there has a been a function in the STL that does half-even rounding. If the floating-point rounding mode is set to <code>FE_TONEAREST</code> (the default), then <code>std::nearbyint</code> will do the trick.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/numeric/math/nearbyint\" rel=\"nofollow noreferrer\">C++ Reference for std::nearbyint</a></p>\n"}], "owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3605, "favorite_count": 2, "answer_count": 6, "score": 7, "last_activity_date": 1563220100, "creation_date": 1443031505, "last_edit_date": 1518664021, "question_id": 32746523, "link": "https://stackoverflow.com/questions/32746523/ieee-754-compliant-round-half-to-even", "title": "IEEE-754 compliant round-half-to-even", "body": "<p>The C standard library provides the <code>round</code>, <code>lround</code>, and <code>llround</code> family of functions in C99. However, these functions are not IEEE-754 compliant, because they do not implement the \"banker's rounding\" of half-to-even as mandated by IEEE. Half-to-even rounding requires the result to be rounded to the nearest even value if the fractional component is exactly 0.5. The C99 standard instead mandates half-away-from-zero as noted on <a href=\"http://en.cppreference.com/w/c/numeric/math/round\" rel=\"noreferrer\">cppreference.com</a></p>\n\n<blockquote>\n  <p>1-3) Computes the nearest integer value to arg (in floating-point format), rounding halfway cases away from zero, regardless of the current rounding mode.</p>\n</blockquote>\n\n<p>The usual ad-hoc way to implement rounding in C is the expression <code>(int)(x + 0.5f)</code> which, despite being <a href=\"http://blog.frama-c.com/index.php?post/2013/05/02/nearbyintf1\" rel=\"noreferrer\">incorrect</a> in strict IEEE-754 math, is usually translated by compilers into the correct <code>cvtss2si</code> instruction. However, this is certainly not a portable assumption.</p>\n\n<p>How can I implement a function that will round any floating point value with half-to-even semantics? If possible, the function should only rely upon language and standard library semantic, so that it can operate on non-IEEE floating point types. If this is not possible, an answer defined in terms of IEEE-754 bit representations is also acceptable. Please characterize any constants in terms of <code>&lt;limits.h&gt;</code> or <code>&lt;limits&gt;</code>.</p>\n"}, {"tags": ["c++", "templates", "c++11", "stl", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1443033355, "post_id": 32746626, "comment_id": 53334740, "body": "Might want to note why you want <code>std::array</code>?"}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 7, "last_activity_date": 1443081169, "last_edit_date": 1443081169, "creation_date": 1443031905, "answer_id": 32746626, "question_id": 32746507, "link": "https://stackoverflow.com/questions/32746507/compile-time-array-from-c-template-parameter-pack/32746626#32746626", "title": "Compile time array from C++ template parameter pack", "body": "<pre><code>template &lt;typename... Ts&gt;\nstruct ToInfoArray\n{\n    static constexpr std::array&lt;Info, sizeof...(Ts)&gt; value = { { Ts::info... } };\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c4071f61caa25638\" rel=\"nofollow\"><strong>DEMO</strong></a></p>\n\n<blockquote>\n  <p><em>Would you use std::array, array[] or std::initializer_list as type for InfoArray?</em></p>\n</blockquote>\n\n<p><code>std::array&lt;T,N&gt;</code>. It's an aggregate that behaves (with comparable performance) just like a regular array, but provides an additional interface for operating on its elements; itself, it's a copyable type.</p>\n\n<p><code>std::initializer_list</code> is not an option here for numerous reasons. Once it's used as a data member (with an in-class initializer), the elements it stores are invalidated after any of constructors' execution. It's not guaranteed to be a literal type, thus it can't be marked as <code>constexpr</code>. Its size is not usable (accessible) in constant expressions. It doesn't provide random access logic (without resorting to pointer arithmetic); the only way to enumerate its elements is to iterate from <code>begin()</code> to <code>end()</code>, which in addition yields pointers to constant items. <code>std::initializer_list</code> was designed to serve primarily as a function parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1443032468, "last_edit_date": 1443032468, "creation_date": 1443031911, "answer_id": 32746630, "question_id": 32746507, "link": "https://stackoverflow.com/questions/32746507/compile-time-array-from-c-template-parameter-pack/32746630#32746630", "title": "Compile time array from C++ template parameter pack", "body": "<p>With C++14, you can simply make it a variable template:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nconstexpr std::array&lt;Info, sizeof...(Ts)&gt; value{{Ts::info...}};\n</code></pre>\n\n<p>Otherwise, the correct syntax for your usage is:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nstruct ToInfoArray\n{\n    static constexpr std::array&lt;Info, sizeof...(Ts)&gt; value{{Ts::info...}};\n};\n</code></pre>\n\n<p>And strongly prefer <code>std::array&lt;&gt;</code> to raw arrays or an <code>initializer_list</code>. </p>\n"}], "owner": {"reputation": 1256, "user_id": 212010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8019a9fde70ba696125db5e0315e24d9?s=128&d=identicon&r=PG", "display_name": "Mathias", "link": "https://stackoverflow.com/users/212010/mathias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4276, "favorite_count": 2, "accepted_answer_id": 32746626, "answer_count": 2, "score": 7, "last_activity_date": 1443421777, "creation_date": 1443031471, "last_edit_date": 1443421777, "question_id": 32746507, "link": "https://stackoverflow.com/questions/32746507/compile-time-array-from-c-template-parameter-pack", "title": "Compile time array from C++ template parameter pack", "body": "<p>How can I at compile time create for example an std::array from a template parameter pack?</p>\n\n<p>This shows what I need, but without a parameter pack.</p>\n\n<pre><code>template&lt;typename T1, typename T2, typename T3&gt;\nstruct ToInfoArray\n{\n    static constexpr std::array&lt;Info, 3&gt; value = { { T1::info, T2::info, T3::info } };\n};\n</code></pre>\n\n<p><a href=\"http://cpp.sh/4rh5q\" rel=\"nofollow\">Live demo demonstrating the intended usage</a></p>\n\n<p><strong>Bonus question:</strong>\nWould you use <code>std::array</code>, <code>array[]</code> or <code>std::initializer_list</code> as type for InfoArray?</p>\n"}, {"tags": ["c++", "regex", "boost"], "answers": [{"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1443037496, "post_id": 32748026, "comment_id": 53337040, "body": "<code>[A-Z^\\\\d]</code> is a character class that contains uppercase ascii letters, a literal <code>^</code> and digits."}, {"owner": {"reputation": 97, "user_id": 5019077, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152774845152583/picture?type=large", "display_name": "Mercyful", "link": "https://stackoverflow.com/users/5019077/mercyful"}, "edited": false, "score": 0, "creation_date": 1443052462, "post_id": 32748026, "comment_id": 53343139, "body": "Thanks NuSkooler for your help.  That did the trick on removing the extra check which wasn&#39;t needed."}], "tags": [], "owner": {"reputation": 5045, "user_id": 132064, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/19dc0f72e139d6e8b44bbff8a7be0c29?s=128&d=identicon&r=PG", "display_name": "NuSkooler", "link": "https://stackoverflow.com/users/132064/nuskooler"}, "is_accepted": true, "score": 1, "last_activity_date": 1443040250, "last_edit_date": 1443040250, "creation_date": 1443036842, "answer_id": 32748026, "question_id": 32746416, "link": "https://stackoverflow.com/questions/32746416/c-boostregex-search-expression-issue-combining-expressions-to-catch-all-seq/32748026#32748026", "title": "C++ Boost:regex_search expression - Issue combining expressions to catch all sequences", "body": "<p>I <em>believe</em> this is what you want:</p>\n\n<pre><code>const boost::regex expr {\"(\\\\|[0-9]{2})|(\\\\|[A-Z]{1,2}+[0-9]{1,2})|(\\\\|[A-Z]{2})\"}; // basically, remove the constraint on the last sub\n</code></pre>\n\n<p>I also suggest being explicit in your flags for <code>expr</code> and passed to <code>regex_search</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 5019077, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152774845152583/picture?type=large", "display_name": "Mercyful", "link": "https://stackoverflow.com/users/5019077/mercyful"}, "is_accepted": false, "score": 1, "last_activity_date": 1443052968, "creation_date": 1443052968, "answer_id": 32751345, "question_id": 32746416, "link": "https://stackoverflow.com/questions/32746416/c-boostregex-search-expression-issue-combining-expressions-to-catch-all-seq/32751345#32751345", "title": "C++ Boost:regex_search expression - Issue combining expressions to catch all sequences", "body": "<p>I also fond that by added an extra check for matches on matched, this removes half-matched patterns which was throwing me off.</p>\n\n<pre><code>for(size_t s = 1; s &lt; matches.size(); ++s)\n{\n    if (matches[s].matched)  // Check for bool True/False\n    {\n        std::cout &lt;&lt; \"+ Matched Sub \" &lt;&lt; matches[s].str()\n              &lt;&lt; \" at offset \" &lt;&lt; matches[s].first - str.begin()\n              &lt;&lt; \" of length \" &lt;&lt; matches[s].length()\n              &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Without it, matches where showing with an offset at the end of the string showing length 0.  So I hope this helps anyone else who runs into this.</p>\n\n<p>Another Tip is, in the loop,  checking s == 1, 2, 3 refers back to the match on the expressions.  Since I have (3) expressions, if it matched on the first part of the expression, s will have a 1 value when matched is a true value, otherwise it will have 2 or 3.  Pretty nice!</p>\n"}], "owner": {"reputation": 97, "user_id": 5019077, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152774845152583/picture?type=large", "display_name": "Mercyful", "link": "https://stackoverflow.com/users/5019077/mercyful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 32748026, "answer_count": 2, "score": 0, "last_activity_date": 1443052968, "creation_date": 1443031140, "question_id": 32746416, "link": "https://stackoverflow.com/questions/32746416/c-boostregex-search-expression-issue-combining-expressions-to-catch-all-seq", "title": "C++ Boost:regex_search expression - Issue combining expressions to catch all sequences", "body": "<p>I'm trying to write a template parser and need to pickup (3) distinct sets of sequences for string replacement.</p>\n\n<pre><code>// Each of These Expressions Work Perfect Separately!\n// All Sequences start with | pipe. Followed by \n\nboost::regex expr {\"(\\\\|[0-9]{2})\"};               // 2 Digits only.\nboost::regex expr {\"(\\\\|[A-Z]{1,2}+[0-9]{1,2})\"};  // 1 or 2 Uppercase Chars and 1 or 2 Digits.\nboost::regex expr {\"(\\\\|[A-Z]{2})(?!\\\\d)\"};        // 2 Uppercase Chars with no following digits.\n</code></pre>\n\n<p>However, once I try to combine them into a single statement, I get can't them to work properly to catch all sequences.  I must be missing something.  Can anyone shed some light on what I'm missing?  </p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>// Each sequence is separated with a | for or between parenthesis. \nboost::regex expr {\"(\\\\|[0-9]{2})|(\\\\|[A-Z]{1,2}+[0-9]{1,2})|(\\\\|[A-Z]{2})(?!\\\\d)\"};\n</code></pre>\n\n<p>I'm using the follow string for testing, and probably little more then needed here is the code as well.</p>\n\n<pre><code>#include &lt;boost/regex.hpp&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n\nstd::string str = \"|MC01 |U1 |s |A22 |12 |04 |2 |EW |SSAADASD |15\";\n\nboost::regex expr {\"(\\\\|[0-9]{2})|(\\\\|[A-Z]{1,2}+[0-9]{1,2})|(\\\\|[A-Z]{2})(?!\\\\d)\"};\n\nboost::smatch matches;\nstd::string::const_iterator start = str.begin(), end = str.end();\nwhile(boost::regex_search(start, end, matches, expr))\n{\n    std::cout &lt;&lt; \"Matched Sub '\" &lt;&lt; matches.str()\n              &lt;&lt; \"' following ' \" &lt;&lt; matches.prefix().str()\n              &lt;&lt; \"' preceeding ' \" &lt;&lt; matches.suffix().str()\n              &lt;&lt; std::endl;\n\n    start = matches[0].second;\n    for(size_t s = 1; s &lt; matches.size(); ++s)\n    {\n        std::cout &lt;&lt; \"+ Matched Sub \" &lt;&lt; matches[s].str()\n                  &lt;&lt; \" at offset \" &lt;&lt; matches[s].first - str.begin()\n                  &lt;&lt; \" of length \" &lt;&lt; matches[s].length()\n                  &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1443040022, "post_id": 32746386, "comment_id": 53338407, "body": "The storage of the inner vectors are not contiguous in memory, so there is no way you can not loop over the outer vector."}], "answers": [{"comments": [{"owner": {"reputation": 1493, "user_id": 1021388, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ce980146ababbf3d21d52368995f29d8?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/1021388/rich"}, "edited": false, "score": 1, "creation_date": 1443031884, "post_id": 32746554, "comment_id": 53333855, "body": "did u mean <code>sizeof(int)*x.size()</code> ?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1443032033, "post_id": 32746554, "comment_id": 53333952, "body": "What happens if the code changes to use a different data structure?"}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1443032111, "post_id": 32746554, "comment_id": 53334000, "body": "Here&#39;s your flak jacket. :)"}, {"owner": {"reputation": 1493, "user_id": 1021388, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ce980146ababbf3d21d52368995f29d8?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/1021388/rich"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1443032688, "post_id": 32746554, "comment_id": 53334357, "body": "@NeilKirk what do you mean here? You mean what if I change my vector of vector to something else? I guess it is best to encapsulate my data structure and the desired operations into a class?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 1493, "user_id": 1021388, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ce980146ababbf3d21d52368995f29d8?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/1021388/rich"}, "edited": false, "score": 0, "creation_date": 1443033206, "post_id": 32746554, "comment_id": 53334665, "body": "@Rich I mean this solution won&#39;t work if you change the inner vector to something else such as list, so it&#39;s not as robust."}, {"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1443039928, "post_id": 32746554, "comment_id": 53338353, "body": "@NeilKirk - there are always trade offs between efficiency and managing code. I agree, if code management is a priority, this is not the best answer."}], "tags": [], "owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "is_accepted": false, "score": 1, "last_activity_date": 1443039831, "last_edit_date": 1443039831, "creation_date": 1443031593, "answer_id": 32746554, "question_id": 32746386, "link": "https://stackoverflow.com/questions/32746386/reset-vector-of-vector-2d-array-to-zero/32746554#32746554", "title": "Reset vector of vector (2D array) to zero", "body": "<p>I know I am going to get flack for this answer, but I am sure there is nothing faster:</p>\n\n<pre><code>for(auto&amp; x : v) memset(&amp;x[0],0,sizeof(int)*x.size());\n</code></pre>\n\n<p><code>memset</code> is highly optimized for setting to 0.</p>\n"}, {"comments": [{"owner": {"reputation": 1493, "user_id": 1021388, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ce980146ababbf3d21d52368995f29d8?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/1021388/rich"}, "edited": false, "score": 0, "creation_date": 1443240716, "post_id": 32746579, "comment_id": 53425536, "body": "Is <code>(auto&amp; sub)</code> part in the lambda valid for c++11 ? or c++14? How do I check?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1493, "user_id": 1021388, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ce980146ababbf3d21d52368995f29d8?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/1021388/rich"}, "edited": false, "score": 0, "creation_date": 1443270477, "post_id": 32746579, "comment_id": 53432045, "body": "@Rich generic lambda are a C++14 feature"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1443031671, "creation_date": 1443031671, "answer_id": 32746579, "question_id": 32746386, "link": "https://stackoverflow.com/questions/32746386/reset-vector-of-vector-2d-array-to-zero/32746579#32746579", "title": "Reset vector of vector (2D array) to zero", "body": "<blockquote>\n  <p>I hope to find a solution without using for loops ...</p>\n</blockquote>\n\n<p>Well, either you do a loop explicitly or use something that loops implicitly. Nothing wrong with explicit loops:</p>\n\n<pre><code>for (auto&amp; sub : v) {\n    std::fill(sub.begin(), sub.end(), 0);\n}\n</code></pre>\n\n<p>I guess technically if you want to avoid a loop you could use:</p>\n\n<pre><code>std::for_each(v.begin(), v.end(),\n              [](auto&amp; sub) {\n                  std::fill(sub.begin(), sub.end(), 0);\n              });\n</code></pre>\n"}], "owner": {"reputation": 1493, "user_id": 1021388, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ce980146ababbf3d21d52368995f29d8?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/1021388/rich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "accepted_answer_id": 32746579, "answer_count": 2, "score": 1, "last_activity_date": 1443039831, "creation_date": 1443031041, "last_edit_date": 1443031825, "question_id": 32746386, "link": "https://stackoverflow.com/questions/32746386/reset-vector-of-vector-2d-array-to-zero", "title": "Reset vector of vector (2D array) to zero", "body": "<p>I am using vector of vector to simulate a 2D array. In order to reuse this 2D array, sometimes I need to reset all its elements to zero or some default value. I know for a simple 1D vector I can do:</p>\n\n<pre><code>std::fill(v.begin(), v.end(), 0);\n</code></pre>\n\n<p>How to do that efficiently for a <code>vector&lt;vector&lt;int&gt;&gt;</code>? I hope to find a solution without using for loops but more akin to some <code>memset</code> variant. I also don't want to incur any memory allocation and deallocation since my intent was to reuse the existing allocated memory.</p>\n\n<p>Note that I am assuming each vector's size is fixed and known to me: <code>vector&lt;vector&lt;int&gt;&gt; v(const_max_size, vector&lt;int&gt; (const_max_size, 0));</code>. How to reset <code>v</code>'s elements to zero?</p>\n\n<p><strong>NOTE</strong>: What I mean by not using <code>for</code> loops is that I don't want to iterate over all the 2D elements using subscripts like v[i][j] to assign them the value.</p>\n"}, {"tags": ["c++", "histogram", "logarithm", "binning"], "comments": [{"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1443032484, "post_id": 32746337, "comment_id": 53334236, "body": "Don&#39;t use [float/double] == [value]. Because computers cannot represent exact values. Use an epsilon instead: <code>if(std::abs(in - x) &lt; 0.00001)</code> (or some other acceptable small value)."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1605834929, "post_id": 32746337, "comment_id": 114781204, "body": "<a href=\"http://coliru.stacked-crooked.com/a/2bf7eaa25bcf1b9b\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/2bf7eaa25bcf1b9b</a> ?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1605835816, "post_id": 32746337, "comment_id": 114781404, "body": "If you&#39;re willing to sacrifice significant accuracy, frexp and ldexp can make this <i>really</i> fast. <a href=\"http://coliru.stacked-crooked.com/a/5f7477995f36930f\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/5f7477995f36930f</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2193, "user_id": 613617, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b70de96ff1028f015bd0d1db2067b487?s=128&d=identicon&r=PG", "display_name": "Boumbles", "link": "https://stackoverflow.com/users/613617/boumbles"}, "is_accepted": true, "score": 0, "last_activity_date": 1444134091, "creation_date": 1444134091, "answer_id": 32969848, "question_id": 32746337, "link": "https://stackoverflow.com/questions/32746337/how-to-do-logarithmic-binning-on-a-histogram/32969848#32969848", "title": "How to do logarithmic binning on a histogram?", "body": "<p>I found a solution by reimplementing an <a href=\"https://github.com/jfhbrook/node-linspace/blob/master/index.js\" rel=\"nofollow\">opensource version of Matlab's logspace function</a>. </p>\n\n<p>Given a range and a number of bins you need to create an evenly spaced numerical sequence </p>\n\n<pre><code>module.exports = function linspace(a,b,n) {\n  var every = (b-a)/(n-1),\n      ranged = integers(a,b,every);\n\n  return ranged.length == n ? ranged : ranged.concat(b);\n}\n</code></pre>\n\n<p>After that you need to loop through each value and with your base (e, 2 or 10 most likely) store the power and you get your bin ranges.</p>\n\n<pre><code>module.exports.logspace = function logspace(a,b,n) {\n  return linspace(a,b,n).map(function(x) { return Math.pow(10,x); });\n}\n</code></pre>\n\n<p>I rewrote this in C++ and it's able to support ranges > 0.</p>\n"}, {"tags": [], "owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "is_accepted": false, "score": 0, "last_activity_date": 1605833791, "creation_date": 1605833791, "answer_id": 64922230, "question_id": 32746337, "link": "https://stackoverflow.com/questions/32746337/how-to-do-logarithmic-binning-on-a-histogram/64922230#64922230", "title": "How to do logarithmic binning on a histogram?", "body": "<p>You can do something like the following</p>\n<pre><code>// Create isolethargic binning\n    int     T_MIN   = 0;                    //The lower limit i.e. 1.e0\n    int     T_MAX   = 8;                    //The uper limit   i.e. 1.e8\n    int     ndec    = T_MAX - T_MIN;        //Number of decades\n    int     N_BPDEC = 1000;                 //Number of bins per decade\n    int     nbins   = (int) ndec*N_BPDEC;   //Total number of bins\n    double  step    = (double) ndec / nbins;//The increment \n    double  tbins[nbins+1];                 //The array to store the bins\n\n    for(int i=0; i &lt;= nbins; ++i)\n        tbins[i] = (float) pow(10., step * (double) i + T_MIN);\n</code></pre>\n"}], "owner": {"reputation": 2193, "user_id": 613617, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b70de96ff1028f015bd0d1db2067b487?s=128&d=identicon&r=PG", "display_name": "Boumbles", "link": "https://stackoverflow.com/users/613617/boumbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1818, "favorite_count": 2, "accepted_answer_id": 32969848, "answer_count": 2, "score": 2, "last_activity_date": 1605833791, "creation_date": 1443030888, "question_id": 32746337, "link": "https://stackoverflow.com/questions/32746337/how-to-do-logarithmic-binning-on-a-histogram", "title": "How to do logarithmic binning on a histogram?", "body": "<p>I'm looking for a technique to logarithmically bin some data sets. We've got data with values ranging from <em>_min</em> to <em>_max</em> (floats >= 0) and the user needs to be able to specify a varying number of bins <em>_num_bins</em> (some int n). </p>\n\n<p>I've implemented a solution taken from <a href=\"https://stackoverflow.com/questions/19472747/convert-linear-scale-to-logarithmic\">this question</a> and some help on scaling <a href=\"https://stackoverflow.com/questions/5294955/how-to-scale-down-a-range-of-numbers-with-a-known-min-and-max-value\">here</a> but my solution stops working when my data values lie below 1.0. </p>\n\n<pre><code>class Histogram {\ndouble _min, _max;\nint _num_bins;\n......\n};\n\ndouble Histogram::logarithmicValueOfBin(double in) const {\n    if (in == 0.0)\n        return _min;\n\n    double b = std::log(_max / _min) / (_max - _min);\n    double a = _max / std::exp(b * _max);\n\n    double in_unscaled = in * (_max - _min) / _num_bins + _min;\n    return a * std::exp(b * in_unscaled) ;\n}\n</code></pre>\n\n<p>When the data values are all greater than 1 I get nicely sized bins and can plot properly. When the values are less than 1 the bins come out more or less the same size and we get way too many of them. </p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 4, "creation_date": 1443030238, "post_id": 32746092, "comment_id": 53332867, "body": "Why do you expect diffrerent implementations of <i>random number generation</i> to produce equal values?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 6, "creation_date": 1443030241, "post_id": 32746092, "comment_id": 53332869, "body": "Explain <i>what</i>? Consistency between runs? Or inconsistency between implementations? Different implementations are allowed to produce different pseudo-random sequences from the same seed. This is exactly what you observed."}, {"owner": {"reputation": 53, "user_id": 5368921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeffa3697f1f531fe68f55a0055c28c9?s=128&d=identicon&r=PG&f=1", "display_name": "user5368921", "link": "https://stackoverflow.com/users/5368921/user5368921"}, "edited": false, "score": 0, "creation_date": 1443030652, "post_id": 32746092, "comment_id": 53333141, "body": "The exact same algorithm should produce the same values given the same seed, should it not? Your arguments don&#39;t make sense."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1443030658, "post_id": 32746092, "comment_id": 53333146, "body": "This is a really good question. The difference means you can&#39;t use the library as a random source for things like Minecraft world seeds. Your program would need to include its own random generator. But, as it is obviously true, we just have to live with it."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1443030688, "post_id": 32746092, "comment_id": 53333163, "body": "@user5368921: You may be seeing differences in the distribution implementations, not the engines."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443031087, "post_id": 32746092, "comment_id": 53333383, "body": "I&#39;m not sure the above comments are correct. The Mersenne Twister is a pretty well-known algorithm. If all the parameters are the same, and the seed is the same, the output should be the same as well. It&#39;s possible, however, that the different implementations have different default template arguments, or that they are using one of the &quot;fast&quot; MT variants.  <a href=\"https://en.wikipedia.org/wiki/Mersenne_Twister\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Mersenne_Twister</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 2, "creation_date": 1443031147, "post_id": 32746092, "comment_id": 53333421, "body": "@rlbond It is not the Mersenne Twister  but rather <code>std::uniform_int_distribution</code>"}, {"owner": {"reputation": 53, "user_id": 5368921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeffa3697f1f531fe68f55a0055c28c9?s=128&d=identicon&r=PG&f=1", "display_name": "user5368921", "link": "https://stackoverflow.com/users/5368921/user5368921"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1443031233, "post_id": 32746092, "comment_id": 53333469, "body": "@Blastfurnace Correct. The first two comments surprise me that people believe that the exact same algorithm should produce different results."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443031268, "post_id": 32746092, "comment_id": 53333486, "body": "In fact, the standard even says: &quot;Required behavior: The 10000 th consecutive invocation of a default-constructed object of type mt19937 shall produce the value 4123659995.&quot; in section 26.5.5.3."}, {"owner": {"reputation": 53, "user_id": 5368921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeffa3697f1f531fe68f55a0055c28c9?s=128&d=identicon&r=PG&f=1", "display_name": "user5368921", "link": "https://stackoverflow.com/users/5368921/user5368921"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1443031330, "post_id": 32746092, "comment_id": 53333524, "body": "@rlbond If the implementation is conforming, it will use the parameters defined by the standard. I&#39;m not sure on the legality of it providing variants though, but with <code>std::mt19937</code> it should be exactly the same."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443031370, "post_id": 32746092, "comment_id": 53333553, "body": "@NathanOliver ah, I overlooked that. You are correct, there has to be a difference in implementation. If OP called <code>operator()</code> for <code>rand</code> he would see the same sequence."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1443031490, "post_id": 32746092, "comment_id": 53333632, "body": "Personally I think it would be funny if someone implemented <code>mt19937</code> in such a way that it counted the number of invocations and simply returned 4123659995 if the count was 10,000, and the rest of the time just used a different algorithm."}], "answers": [{"comments": [{"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 0, "creation_date": 1443030864, "post_id": 32746283, "comment_id": 53333261, "body": "Wow. This is extremely unintuitive. I would have also expected given the same seed the value of every consecutive call is well defined. Which C++11 random number algorithm defines that behavior (if any)?"}, {"owner": {"reputation": 53, "user_id": 5368921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeffa3697f1f531fe68f55a0055c28c9?s=128&d=identicon&r=PG&f=1", "display_name": "user5368921", "link": "https://stackoverflow.com/users/5368921/user5368921"}, "edited": false, "score": 0, "creation_date": 1443030974, "post_id": 32746283, "comment_id": 53333324, "body": "The standard defines how mersenne twister should be implemented in <code>[rand.eng.mers]</code>."}, {"owner": {"reputation": 53, "user_id": 5368921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeffa3697f1f531fe68f55a0055c28c9?s=128&d=identicon&r=PG&f=1", "display_name": "user5368921", "link": "https://stackoverflow.com/users/5368921/user5368921"}, "edited": false, "score": 0, "creation_date": 1443031125, "post_id": 32746283, "comment_id": 53333406, "body": "Yes, the first part of your answer is the key. If I get rid of the <code>uniform_int_distribution</code>, the results are identical across implementations."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 0, "creation_date": 1443031204, "post_id": 32746283, "comment_id": 53333446, "body": "@David yes there is <a href=\"http://www.cplusplus.com/reference/random/linear_congruential_engine/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/random/linear_congruential_engine</a>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 8, "last_activity_date": 1443030992, "last_edit_date": 1443030992, "creation_date": 1443030725, "answer_id": 32746283, "question_id": 32746092, "link": "https://stackoverflow.com/questions/32746092/random-output-different-between-implementations/32746283#32746283", "title": "Random output different between implementations", "body": "<p>There is <strong>no</strong> required implementation for <code>uniform_int_distribution&lt;&gt;</code>. [rand.dist.general] specifies that:</p>\n\n<blockquote>\n  <p>The algorithms for producing each of the specified distributions are implementation-defined.</p>\n</blockquote>\n\n<p>All that [rand.dist.uni.int] states is:</p>\n\n<blockquote>\n  <p>A uniform_int_distribution random number distribution produces random integers <code>i</code>, <code>a &lt;= i &lt;= b</code>, distributed\n  according to the constant discrete probability function\n  <code>P(i | a, b) = 1/(b \u2212 a + 1)</code> .</p>\n</blockquote>\n\n<p>Each implementation is free to achieve this distribution how it wishes. What you are seeing is apparently three different implementations.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1443031668, "last_edit_date": 1495542661, "creation_date": 1443031668, "answer_id": 32746578, "question_id": 32746092, "link": "https://stackoverflow.com/questions/32746092/random-output-different-between-implementations/32746578#32746578", "title": "Random output different between implementations", "body": "<p>To be clear: the random number generators themselves are specified quite tightly--including the input parameters and results. To be technical, what's specified is the 10000<sup>th</sup> result from a default-constructed generator, but for any practical purpose a match on this result from a generator that's at least reasonably close to correct otherwise essentially guarantees that the generator is working correctly, and its outputs will match ever other similar generator for a given seed.</p>\n\n<p>For example, a quick test:</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;iostream&gt;\n\nint main() { \n    std::mt19937 r;\n\n    for (int i=0; i&lt;10000-2; i++)\n        r();\n    for (int i=0; i&lt;3; i++)\n        std::cout &lt;&lt; r() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>...shows identical results with every (recent) compiler I have handy:</p>\n\n<pre><code>1211010839\n4123659995\n725333953\n</code></pre>\n\n<p>The second of those three is the value required by the standard.</p>\n\n<p>More leeway is given, however, in the distribution templates. A <code>uniform_int_distribution</code> has to map inputs to outputs uniformly, but there are different ways of doing that, and no requirement about which of those ways to use.</p>\n\n<p>If you really need to produce a sequence of integers within a range that's not only uniformly distributed, but consistent between implementations, you'll probably have to implement your own distribution code. Doing this well isn't quite as trivial as most people initially think. You might want to look at one of my <a href=\"https://stackoverflow.com/a/10219422/179910\">previous answers</a> for a working implementation along with some explanation and a bit of test code.</p>\n"}], "owner": {"reputation": 53, "user_id": 5368921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeffa3697f1f531fe68f55a0055c28c9?s=128&d=identicon&r=PG&f=1", "display_name": "user5368921", "link": "https://stackoverflow.com/users/5368921/user5368921"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 1, "accepted_answer_id": 32746283, "answer_count": 2, "score": 5, "last_activity_date": 1443031668, "creation_date": 1443030113, "last_edit_date": 1443031180, "question_id": 32746092, "link": "https://stackoverflow.com/questions/32746092/random-output-different-between-implementations", "title": "Random output different between implementations", "body": "<p>I've tried this program with libstdc++, libc++ and dinkumware:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;functional&gt;\n#include &lt;limits&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; v(10);\n\n    std::mt19937 rand{0};\n    std::uniform_int_distribution&lt;&gt; dist(\n        1, 10\n    );\n\n    std::generate_n(v.begin(), v.size(),\n        std::bind(dist, rand));\n\n    for (auto i : v)\n        std::cout &lt;&lt; i &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Output respectively is:</p>\n\n<pre><code>6 6 8 9 7 9 6 9 5 7 \n\n6 1 4 4 8 10 4 6 3 5 \n\n5 10 4 1 4 10 8 4 8 4 \n</code></pre>\n\n<p>The output is consistent for each run but as you can see, they're different. Explain?</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 3730, "user_id": 2438446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58806b975f85de166828c97ab4536364?s=128&d=identicon&r=PG", "display_name": "Kent Munthe Caspersen", "link": "https://stackoverflow.com/users/2438446/kent-munthe-caspersen"}, "edited": false, "score": 0, "creation_date": 1443039796, "post_id": 32745493, "comment_id": 53338295, "body": "Great to hear. If you leave the question as it is, it may help other people with the same or similar problems."}], "answers": [{"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": false, "score": 0, "last_activity_date": 1443028257, "creation_date": 1443028257, "answer_id": 32745543, "question_id": 32745493, "link": "https://stackoverflow.com/questions/32745493/magic-square-algorithm-issue/32745543#32745543", "title": "Magic Square Algorithm Issue", "body": "<pre><code>if (magicSq != 0 || (i &lt; 0 &amp;&amp; j ==n )){//If the magic square has a number in it\n</code></pre>\n\n<p>Your code doesn't match your comment here.  <code>magicSq</code> is always going to be non-zero. you want <code>magicSq[i][j]!=0</code>.  </p>\n\n<p>But before you can do that test, or any test, first check that <code>i</code> and <code>j</code> are in bounds, and adjust if needed.</p>\n"}, {"tags": [], "owner": {"reputation": 3730, "user_id": 2438446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58806b975f85de166828c97ab4536364?s=128&d=identicon&r=PG", "display_name": "Kent Munthe Caspersen", "link": "https://stackoverflow.com/users/2438446/kent-munthe-caspersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1443032578, "last_edit_date": 1443032578, "creation_date": 1443030230, "answer_id": 32746135, "question_id": 32745493, "link": "https://stackoverflow.com/questions/32745493/magic-square-algorithm-issue/32746135#32746135", "title": "Magic Square Algorithm Issue", "body": "<p>What seems to be the problem is that you move 1 step up and to the right first, and then move 1 step down if you hit another number. With that approach, you should actually move 2 steps down and 1 step left, to end up 1 step below your original position. I have modified the logic a bit, and this seems to be working:</p>\n\n<pre><code>for (indexer = 1; indexer &lt;= sizeSquared; indexer++){\n    //If the magic square has a number in it, redo move and go one down\n    if (magicSq[i][j] != 0){            \n        i += 2;\n        j -= 1;\n    }\n    magicSq[i][j] = indexer;\n    if (i == 0 &amp;&amp; j == n - 1) //if in top right corner, move down\n        i++;\n    else{\n        i--; //Decrement the row (one row up)\n        j++; //Increment the column (One column to the right)\n    }\n    if (i &lt; 0){//If row goes higher than top row\n        i += n; //i is set to bottom row\n    }\n    else if (j == n){//If number placement is outside of rightmost column\n        j -= n; //Maintain row and place # in leftmost column.\n    }\n}\n</code></pre>\n\n<p>On a 3x3 square, I get the result:</p>\n\n<pre><code>8 1 6\n3 5 7\n4 9 2\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4276397, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9ecfadd6a989b36206e39e0e9db5994c?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Malcom", "link": "https://stackoverflow.com/users/4276397/johnny-malcom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1443759586, "creation_date": 1443028079, "last_edit_date": 1443759586, "question_id": 32745493, "link": "https://stackoverflow.com/questions/32745493/magic-square-algorithm-issue", "title": "Magic Square Algorithm Issue", "body": "<p>I am following de la Loubere's algorithm and am attempting to code it into a successful algorithm for my Magic Square program. I am following these steps: </p>\n\n<p>1) The number '1' goes in the middle of the top row.</p>\n\n<p>2) All numbers are then placed one column to the right and one row up from the previous number.</p>\n\n<p>3) Whenever the next number placement is above the top row, stay in that column and place the number in the bottom row.</p>\n\n<p>4) Whenever the next number placement is outside of the rightmost column, stay in that row and place the number in the leftmost column.</p>\n\n<p>5) When encountering a filled-in square, place the next number directly below the previous number.</p>\n\n<p>6) When the next number position is outside both a row and a column, place the number directly beneath the previous number.</p>\n\n<p>However, I am not getting the desired output of numbers. (That is, the numbers are not in the correct places or are registering as zeros.)</p>\n\n<p>Any help would be appreciated.(For some reason in the above code the last angle bracket is outside the code block. However this is not the issue.)</p>\n\n<p>Edit: I have edited the code based on suggestion, however I am still finding the same error:</p>\n\n<pre><code>void magic(unsigned int n){//Takes in size of square (User input)\nunsigned int magicSq[15][15];\nunsigned int sizeSquared = n * n; \nint i = 0, j = n/2; //the initial position according to de la Loubere's algorithm\nunsigned int indexer; //What we are going to use to iterate through\n\n//Using de la Loubere's algorithm for odd # magic squares\nfor (indexer = 1; indexer &lt;= sizeSquared; indexer++){\n    magicSq[i][j] = indexer;\n    i--; //Decrement the row (one row up)\n    j++; //Increment the column (One column to the right)\n\n    //First ensure with if and else if that i and j are in bounds.\n    if (i &lt; 0){//If row goes higher than top row\n        i += n; //i is set to bottom row\n    }\n\n    else if(j == n){//If number placement is outside of rightmost column\n        j -= n; //Maintain row and place # in leftmost column.\n    }\n\n    else{\n        if (magicSq[i][j] != 0 || (i &lt; 0 &amp;&amp; j ==n )){//If the magic square has a number in it\n                                            //Or is outside both row and column\n            i++; //Place the number one below the previous number \n        }\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "guid"], "comments": [{"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 1, "creation_date": 1443028125, "post_id": 32745372, "comment_id": 53331782, "body": "Look at this SO post, it looks like it has the answer you are looking for: <a href=\"http://stackoverflow.com/questions/1128188/how-do-i-convert-a-lpwstr-to-a-guid\" title=\"how do i convert a lpwstr to a guid\">stackoverflow.com/questions/1128188/&hellip;</a>"}, {"owner": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1443032894, "post_id": 32745372, "comment_id": 53334478, "body": "@DavidHaim This comment is absolutely unnecessary and not helpful. In VC++, the problem would be the same. And about Dev-C++ : It is a nice tool for small projects, especially plugins, which are only 1 small DLL file. And in comparison to VC++, Dev-C++ always runs&amp;compiles out-of-the-box (thanks to the MinGW GCC compiler)."}, {"owner": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "reply_to_user": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 0, "creation_date": 1443038585, "post_id": 32745372, "comment_id": 53337655, "body": "@YePhIcK Although this function works on my computer (Win10), Microsoft states that this is for CLSIDs, but my GUIDs are not related to COM, thus not registered. The method might fail. The function which would help would be GUIDFromString, but Microsoft deprecated it for some reasons."}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1443203304, "post_id": 32745372, "comment_id": 53414555, "body": "Converting code from the Delphi format to the new C++ format can be accomplished with a basic, albeit long, regular expression find and replace.  Let me see if I can create it and post as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "edited": false, "score": 0, "creation_date": 1443034287, "post_id": 32746189, "comment_id": 53335220, "body": "I don&#39;t quite understand what the operator <code>_guid</code> does. The GUID which I want to convert , is already written in this method. So the GUID is in the code 3 times, 2 times as string and 1 time as splitted struct (which I want to avoid). So, this method converts something, that is already converted hardcoded?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "edited": false, "score": 0, "creation_date": 1443034666, "post_id": 32746189, "comment_id": 53335444, "body": "The code allows you to copy and paste Delphi-Guids , however you have to replace &#39; by &quot; and append _guid"}, {"owner": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "edited": false, "score": 0, "creation_date": 1443034998, "post_id": 32746189, "comment_id": 53335652, "body": "The actual problem is that I don&#39;t want to manually write things like <code>result.a = 0x6C26245E;</code> by hand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "edited": false, "score": 1, "creation_date": 1443035193, "post_id": 32746189, "comment_id": 53335771, "body": "@rinntech you have to parse the string, I omitted that in the example above"}, {"owner": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "edited": false, "score": 0, "creation_date": 1443048864, "post_id": 32746189, "comment_id": 53342130, "body": "I tried to use your function for the actual datatype GUID (defined in guiddef.h of the WinAPI), which is defined this way: <a href=\"http://pastebin.com/vwYJYZBQ\" rel=\"nofollow noreferrer\">pastebin.com/vwYJYZBQ</a> . So I changed the signature to <code>GUID operator &quot;&quot; _guid (const char* s, std::size_t n)</code> , but I get the compiler error <b>[Error] no match for &#39;operator=&#39; (operand types are &#39;GUID {aka _GUID}&#39; and &#39;const char [39]&#39;)</b>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 3, "last_activity_date": 1443204558, "last_edit_date": 1443204558, "creation_date": 1443030410, "answer_id": 32746189, "question_id": 32745372, "link": "https://stackoverflow.com/questions/32745372/guid-constants-in-c-in-specific-orwell-dev-c/32746189#32746189", "title": "GUID constants in C++ (in specific Orwell Dev-C++)", "body": "<p>You may use user defined literals:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n\nstruct Guid\n{\n    uint32_t a = 0;\n    uint16_t b = 0;\n    uint16_t c = 0;\n    uint16_t d = 0;\n    std::array&lt;uint8_t, 6&gt; e;\n};\n\nGuid operator \"\" _guid (const char* s, std::size_t n)\n{\n    if(n == 38)\n    {\n        // Parse and consider byte order (endian).              \n        // Provide something reasonable to replace this:\n        if(std::strncmp(s, \"{6C26245E-F79A-416C-8C73-BEA3EC18BB6E}\", 36) == 0)\n        {\n            Guid result;\n            result.a = 0x6C26245E;\n            result.b = 0xF79A;\n            result.c = 0x416C;\n            result.d = 0x8C73;\n            result.e = { 0xBE, 0xA3, 0xEC, 0x18, 0xBB, 0x6E };\n            return result;\n        }\n    }\n    // Invalid\n    return Guid();\n}\n\nint main()\n{\n    Guid guid = \"{6C26245E-F79A-416C-8C73-BEA3EC18BB6E}\"_guid;\n    std::cout &lt;&lt; std::hex\n        &lt;&lt; guid.a &lt;&lt; \"-\"\n        &lt;&lt; guid.b &lt;&lt; \"-\"\n        &lt;&lt; guid.c &lt;&lt; \"-\"\n        &lt;&lt; guid.d &lt;&lt; \"-\"\n        &lt;&lt; \"array\\n\";\n}\n</code></pre>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/user_literal</a></p>\n\n<p>Edit: Parsing</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;cctype&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n\n#pragma pack(push, 0)\nstruct Guid\n{\n  std::uint32_t data1;\n  std::uint16_t data2;\n  std::uint16_t data3;\n  std::array&lt;uint8_t, 8&gt; data4;\n};\n#pragma pack(pop)\n\n// A guid with the format \"01234567-89ab-cdef-0123-456789abcdef\"\n// If the guid string is invalid the resulting guid is an empty guid.\n// Note: The first three fields of the guid are stored in a host byte order.\n//       and the last two fields are stored in a single array (big endian)\nGuid operator \"\" _guid (const char* s, std::size_t n)\n{\n    // Hexadecimal character test.\n    struct IsXDigit\n    {\n        bool result = true;\n        IsXDigit(const char*&amp; p, unsigned n)\n        {\n            while(n--) {\n                char c =  *p++;\n                // char may be signed or unsigned\n                if(c &lt; 0 || 128 &lt;= c || ! std::isxdigit(c)) {\n                    result = false;\n                    break;\n                }\n            }\n        }\n        operator bool () const { return result; }\n    };\n\n    Guid result;\n\n    // Syntax\n    const char* p = s;\n    if( ! IsXDigit(p,  8)) goto Failure;\n    if(*p++ != '-') goto Failure;\n    if( ! IsXDigit(p,  4)) goto Failure;\n    if(*p++ != '-') goto Failure;\n    if( ! IsXDigit(p,  4)) goto Failure;\n    if(*p++ != '-') goto Failure;\n    if( ! IsXDigit(p,  4)) goto Failure;\n    if(*p++ != '-') goto Failure;\n    if( ! IsXDigit(p, 12)) goto Failure;\n    if(*p)  goto Failure;\n\n    // Data\n    result.data1 = std::uint32_t(std::strtoul(s, nullptr, 16));\n    result.data2 = std::uint16_t(std::strtoul(s + 9, nullptr, 16));\n    result.data3 = std::uint16_t(std::strtoul(s + 14, nullptr, 16));\n    char buffer[3];\n    buffer[2] = 0;\n    for(unsigned dst = 0, src = 19; src &lt; 23; ++dst, src += 2)\n    {\n        buffer[0] = s[src];\n        buffer[1] = s[src + 1];\n        result.data4[dst] =  std::uint8_t(std::strtoul(buffer, nullptr, 16));\n    }\n    for(unsigned dst = 2, src = 24; src &lt; 36; ++dst, src += 2)\n    {\n        buffer[0] = s[src];\n        buffer[1] = s[src + 1];\n        result.data4[dst] =  std::uint8_t(std::strtoul(buffer, nullptr, 16));\n    }\n    return result;\n\n    Failure:\n    std::memset(&amp;result, 0, sizeof(result));\n    return result;\n}\n\n\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nint main()\n{\n    const Guid guid = \"6C26245E-F79A-416C-8C73-BEA3EC18BB6E\"_guid;\n    std::cout.fill('0');\n    std::cout\n        &lt;&lt; std::hex\n        &lt;&lt; \"6C26245E-F79A-416C-8C73-BEA3EC18BB6E\\n\"\n        &lt;&lt; std::setw(8) &lt;&lt; guid.data1 &lt;&lt; \"-\"\n        &lt;&lt; std::setw(4) &lt;&lt; guid.data2 &lt;&lt; \"-\"\n        &lt;&lt; std::setw(4) &lt;&lt; guid.data3 &lt;&lt; \"-\";\n    for(unsigned i = 0; i &lt; 2; ++i)\n        std::cout &lt;&lt; std::setw(2) &lt;&lt; unsigned(guid.data4[i]);\n    std::cout &lt;&lt; \"-\";\n    for(unsigned i = 2; i &lt; 8; ++i)\n        std::cout &lt;&lt; std::setw(2) &lt;&lt; unsigned(guid.data4[i]);\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "is_accepted": false, "score": 0, "last_activity_date": 1443205121, "creation_date": 1443205121, "answer_id": 32788345, "question_id": 32745372, "link": "https://stackoverflow.com/questions/32745372/guid-constants-in-c-in-specific-orwell-dev-c/32788345#32788345", "title": "GUID constants in C++ (in specific Orwell Dev-C++)", "body": "<p>Since your just transposing from text to text in a different format, Regex find and replace will work great for this.  The following was developed and tested in Notepad++.  Different editors (like Visual Studio) may have different regex rules, but the basics will be the same.</p>\n\n<p>Search for:</p>\n\n<pre><code>const ([\\w]+)\\: TGUID = '\\{(.{8})-(.{4})-(.{4})-(..)(..)-(..)(..)(..)(..)(..)(..)\\}';\n</code></pre>\n\n<p>Replace with:</p>\n\n<pre><code>static const GUID $1 = {0x$2, 0x$3, 0x$4, { 0x$5, 0x$6, 0x$7, 0x$8, 0x$9, 0x$10, 0x$11, 0x$12} };\n</code></pre>\n\n<p>I can't explain all the details about using regex searches, but the basic thing to understand is that parenthesis in the search string \"capture\" a matched area of the line, and in the replace string $1, $2, etc insert what was captured.</p>\n\n<p>For instance, the first set of parenthesis is <code>([\\w]+)</code>.  This is used to capture the name of the GUID (<code>GUID_PLUGIN_ABC_V1</code> in your example).  To break it down, <code>[\\w]</code> says \"Match all word characters\" and the <code>+</code> means \"Match one or more of the preceeding character\".  The parenthesis capture it , and $1 adds the name to the replace string.  The group <code>(.{8})</code> is \"Match any character 8 times\" and <code>(..)</code> is a pig nose...  But seriously, the <code>.</code> means \"Any character\", so <code>(..)</code> just matches two characters.</p>\n\n<p>Note that this regex find and replace option assumes that all your incoming GUID strings are valid and follow the form of:</p>\n\n<pre><code>const &lt;GUID NAME&gt;: TGUID = '{&lt;GUID STRING&gt;}';\n</code></pre>\n\n<p>If there is any variation, slight changes to the regex can account for them.  Worst case is that you have a few different search and replace strings based on your various GUID formats.</p>\n"}], "owner": {"reputation": 3500, "user_id": 488539, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RHurx.jpg?s=128&g=1", "display_name": "Daniel Marschall", "link": "https://stackoverflow.com/users/488539/daniel-marschall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1443205121, "creation_date": 1443027662, "last_edit_date": 1443038509, "question_id": 32745372, "link": "https://stackoverflow.com/questions/32745372/guid-constants-in-c-in-specific-orwell-dev-c", "title": "GUID constants in C++ (in specific Orwell Dev-C++)", "body": "<p>I am translating a lot of plugins from Delphi into C++, and each plugin is identified by a GUID.</p>\n\n<p>In Delphi, this constant looks very nice:</p>\n\n<pre><code>const\n  GUID_PLUGIN_ABC_V1: TGUID = '{6C26245E-F79A-416C-8C73-BEA3EC18BB6E}';\n</code></pre>\n\n<p>In my C++ translation, I would need to do following:</p>\n\n<pre><code>static const GUID GUID_PLUGIN_ABC_V1 =\n  {0x6C26245E, 0xF79A, 0x416C, { 0x8C, 0x73, 0xBE, 0xA3, 0xEC, 0x18, 0xBB, 0x6E} };\n</code></pre>\n\n<p>This is annoying because of 2 things:</p>\n\n<ol>\n<li><p>It is hard for me to translate, because I need to split my GUIDs by hand, and there is a risk that I do mistakes (and therefore provide a wrong GUID).</p></li>\n<li><p>Since the source is public, I do want that people use the human-readable GUID, e.g. to use it for research on the web etc.\nSo I would need to add a comment above the constant:</p>\n\n<pre><code>// {6C26245E-F79A-416C-8C73-BEA3EC18BB6E}\nstatic const GUID GUID_PLUGIN_ABC_V1 =\n  {0x6C26245E, 0xF79A, 0x416C, { 0x8C, 0x73, 0xBE, 0xA3, 0xEC, 0x18, 0xBB, 0x6E} };\n</code></pre></li>\n</ol>\n\n<p>Now I have following questions:</p>\n\n<ol>\n<li>Is there a good <strong>converter</strong> for this task (for existing GUIDs)?</li>\n<li>Is there a tool that can <strong>create</strong> new GUIDs in this constant notation?</li>\n<li><p>Is there a possibility that I can use a Macro, like</p>\n\n<pre><code>static const GUID GUID_PLUGIN_ABC_V1 =\n  GUIDMACRO('{6C26245E-F79A-416C-8C73-BEA3EC18BB6E}')\n</code></pre>\n\n<p>?</p></li>\n</ol>\n\n<p>The GUIDs are not in relation with COM.</p>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1443027534, "post_id": 32745282, "comment_id": 53331446, "body": "If it is of fixed size <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a> with your own pop logic, or <a href=\"http://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\">std::deque</a> but you&#39;d have to do the size checks."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1443028754, "post_id": 32745282, "comment_id": 53332093, "body": "If efficiency is important you could look into a circular buffer using vector as a base. For most purposes, deque is ok."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1443029798, "post_id": 32745282, "comment_id": 53332639, "body": "Seems a bit strange for the producer of the data to determine when data in the shared data area is to be removed. Normally that would be the consumer&#39;s role since the consumer knows when it has read the data. And since your consumer may read more than one entry at a time, how do you prevent duplicated data being read?"}, {"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "edited": false, "score": 0, "creation_date": 1443031889, "post_id": 32745282, "comment_id": 53333864, "body": "The caller (consumer) asynchronously requests data at a rate of about once every couple of seconds.  The device streams much faster and when a request comes in, I need the freshest data."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1443033754, "post_id": 32745282, "comment_id": 53334932, "body": "If you always want the freshest data for the consumer, is a FIFO really the data structure you want? Or perhaps the incoming data rate along with a limited FIFO size will cause the data in the FIFO read by the consumer to be reasonably fresh?"}], "answers": [{"tags": [], "owner": {"reputation": 2879, "user_id": 1624629, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/28cf9a21f11f48c5dad051dd40260972?s=128&d=identicon&r=PG", "display_name": "DaBrain", "link": "https://stackoverflow.com/users/1624629/dabrain"}, "is_accepted": true, "score": 1, "last_activity_date": 1443032038, "creation_date": 1443032038, "answer_id": 32746661, "question_id": 32745282, "link": "https://stackoverflow.com/questions/32745282/choosing-an-appropriate-fifo-data-structure/32746661#32746661", "title": "Choosing an Appropriate FIFO Data Structure", "body": "<p>I would suggest you to use <code>boost::circular_buffer</code> which is a fixed size container that supports random access iteration, constant time insert and erase at the beginning and end. You can use it as a FIFO with <code>push_back()</code>, read <code>back()</code> for the latest data saved and iterate over the whole container via <code>begin(), end()</code> or using <code>operator[]</code>. </p>\n\n<p>But at start-up the elements are not zeroed out. It has in my opinion an even more convenient interface. The container is empty at first and insertion will increase size until it reaches max size.</p>\n"}, {"tags": [], "owner": {"reputation": 1471, "user_id": 2745183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb5d7f7a643300cb7783dfb12139c07?s=128&d=identicon&r=PG&f=1", "display_name": "JVene", "link": "https://stackoverflow.com/users/2745183/jvene"}, "is_accepted": false, "score": 2, "last_activity_date": 1443041780, "last_edit_date": 1443041780, "creation_date": 1443036711, "answer_id": 32747993, "question_id": 32745282, "link": "https://stackoverflow.com/questions/32745282/choosing-an-appropriate-fifo-data-structure/32747993#32747993", "title": "Choosing an Appropriate FIFO Data Structure", "body": "<p>One point not clear in the question is the compiler target, whether or not the solution is restricted to partial C++11 support (like VS2012), or full support (like VS2015). You mentioned boost dependency, which lends similar features to older compilers, so I'll rely on that and speak generally about options on the assumption that boost may provide what a pre-C++11 compiler may not, or you may elect C++11 features like the now standardized mutex, lock, threads and shared_ptr.</p>\n\n<p>There's no doubt in my mind that the primary tool for the FIFO (which, as you stated, may occasionally need LIFO operation) is the <code>std::deque</code>. Even though the deque supports reasonably efficient dynamic expansion and shrinking of storage, contrary to your primary requirement of a static size, it's main feature is the ability to function as both FIFO and LIFO with good performance in ways vectors can't as easily manage. Internally most implementations provide what may be analogized as a collection of smaller vectors which are marshalled by the deque to function as if a single vector container (for subscripting) while allowing for double ended pushing and popping with efficient memory management. It can be tempting to use a vector, employing a circular buffer technique for fixed sizes, but any performance improvement is minimal, and deque is known to be reliable.</p>\n\n<p>Your point regarding destructive pops isn't entirely clear to me. That could mean several things. <code>std::deque</code> offers <code>back</code> and <code>front</code> as a peek to what's at the ends of the deque, without destruction. In fact, they're required to look because deque's <code>pop_front</code> and <code>pop_back</code> only remove elements, they don't provide access to the element being popped. Taking an element and popping it is a two step process on <code>std::deque</code>. An alternate meaning, however, is that a read only requester needs to pop strictly as a means of navigation, not destruction, which is not really a pop, but a traversal. As long as the structure is under lock, that is easily managed with iterators or indexes. Or, it could also mean you need a independent copy of the queue. </p>\n\n<p>Assuming some structure representing device data:</p>\n\n<pre><code>struct DevDat { .... };\n</code></pre>\n\n<p>I'm immediately faced with that curious question, should this not be a generic solution? It doesn't matter for the sake of discussion, but it seems the intent is an odd combination of application specific operation and a generalized thread-safe stack \"machine\", so I'll suggest a generic solution which is easily translated otherwise (that is, I suggest  template classes, but you could easily choose non-templates if preferred). These psuedo code examples are sparse, just illustrating container layout ideas and proposed concepts.</p>\n\n<pre><code>class SafeStackBase\n{ protected: std::mutex sync;\n};\n\ntemplate &lt;typename Element&gt;\nclass SafeStack : public SafeStackBase\n{ public:  \n  typedef std::deque&lt; Element &gt; DeQue;\n\n  private:\n  DeQue    que;\n\n};\n</code></pre>\n\n<p>SafeStack could handle any kind of data in the stack, so that detail is left for Element declaration, which I illustrate with typedefs:</p>\n\n<pre><code>typedef std::vector&lt; DevDat &gt;         DevArray;\ntypedef std::shared_ptr&lt; DevArray &gt;   DevArrayPtr;\n\ntypedef SafeStack&lt; DevArrayPtr &gt;      DeviceQue;\n</code></pre>\n\n<p>Note I'm proposing vector instead of array because I don't like the idea of having to choose a fixed size, but std::array is an option, obviously.</p>\n\n<p>The SafeStackBase is intended for code and data that isn't aware of the users data type, which is why the mutex is stored there. It could easily part of the template class, but the practice of placing non-type aware data and code in a non-template base helps reduce code bloat when possible (functions which don't use Element, for example, need not be expanded in template instantiations). I suggest the DevArrayPtr so that the arrays can be \"plucked out\" of the queue without copying the arrays, then shared and distributed outside the structure under shared_ptr's shared ownership. This is a matter of illustration, and does not adequately deal with questions regarding content of those arrays. That could be managed by DevDat, which could marshal reading of the array data, while limiting writing of the array data to an authorized friend (a write accessor strategy), such that Thread B (a reader only) is not carelessly able to modify the content. In this way it's possible to provide these arrays without copying data..just return a copy of the DevArrayPtr for communal access to the entire array. This also supports returning a container of DevArrayPtr's supporting ThreadB point 4 (copy the whole FIFO to the user), as in:</p>\n\n<pre><code>typedef std::vector&lt; DevArrayPtr &gt;    QueArrayVec;\ntypedef std::deque&lt; DevArrayPtr &gt;     QueArrayDeque;\ntypedef std::array&lt; DevArrayPtr, 12 &gt; QueArrays;\n</code></pre>\n\n<p>The point is that you can return any container you like, which is merely an array of pointers to the internal <code>std::array&lt; DevDat &gt;</code>, letting <code>DevDat</code> control read/write authorization by requiring some authorization object for writing, and if this copy should be operable as a FIFO without potential interference with Thread A's write ownership, <code>QueArrayDeque</code> provides the full feature set as an independent FIFO/LIFO structure.</p>\n\n<p>This brings up an observation about Thread A. There you state lock is step 1, while unlock is step 5, but I submit that only steps 2 and 4 are really required under lock. Step 3 can take time, and even if you assume that is a short time, it's not as short as a pop followed by a push. The point is that the lock is really about controlling the FIFO/LIFO queue structure, and not about reading data from the device. As such, that data can be fashioned into DevArray, which is THEN provided to SafeStack to be pop/pushed under lock. </p>\n\n<p>Assume code inside SafeStack:</p>\n\n<pre><code>typedef std::lock_guard&lt; std::mutex &gt;  Lock; // I use typedefs a lot\n\nvoid StuffIt( const Element &amp; e ) \n{ Lock l( sync );\n  que.pop_front();\n  que.push_back( e );    \n}\n</code></pre>\n\n<p><code>StuffIt</code> does that simple, generic job of popping the front, pushing the back, under lock. Since it takes an <code>const Element &amp;</code>, step 3 of Thread A is already done. Since Element, as I suggest, is a DevArrayPtr, this is used with:</p>\n\n<pre><code>DeviceQue  dq;\n\nauto p = std::make_shared&lt;DevArray&gt;();\n\ndq.StuffIt( p );\n</code></pre>\n\n<p>How the <code>DevArray</code> is populated is up to it's constructor or some function, the point is that a <code>shared_ptr</code> is used to transport it.</p>\n\n<p>This brings up a more generic point about SafeStack. Obviously there is some potential for standard access functions, which could mimic std::deque, but the primary job for SafeStack is to lock/unlock for access control, and do something while under lock. To that end, I submit a generic functor is sufficient to generalize the notion. The preferred mechanics, especially with respect to boost, is up to you, but something like (code inside SafeStack):</p>\n\n<pre><code>bool LockedFunc( std::function&lt; bool(DevQue &amp;)&gt; f )\n{\n Lock l( sync );\n f( que );\n}\n</code></pre>\n\n<p>Or whatever mechanics you like for calling a functor taking a DevQue as a parameter. This means you could fashion callbacks with complete access to the deque (and it's interface) while under lock, or provide functors or lambdas which perform specific tasks under lock.</p>\n\n<p>The design point is to make SafeStack small, focused on that minimal task of doing a few things under lock, taking most any kind of data in the queue. Then, using that last point, provide the array under shared_ptr to provide the service of Thread B steps 3 and 4. </p>\n\n<p>To be clear about that, keep in mind that whatever is done to the shared_ptr to copy it is similar to what can be done to simple POD types, like ints, with respect to containers. That is, one could loop through the elements of the DevQue fashioning a copy of those elements into another container in the same code which would do that for a container of integers (remember, it's a member function of a template - that type is generic). The resulting work is only copying pointers, which is less effort than copying entire arrays of data.</p>\n\n<p>Now, step 4 isn't QUITE clear to me. It appears to say that you need to return a DevArray which is the accumulated content of all entries in the queue. That's trivial to arrange, but it might work a little better with a vector (as that's dynamically expandable), but as long as the std::array has sufficient room, it's certainly possible.</p>\n\n<p>However, the only real difference between such an array and the queue's native \"array of arrays\" is how it is traversed (and counted). Returning one Element (step 3) is quick, but since step 4 is indicated under lock, that's a bit more than most locked functions should really do if they don't have to. </p>\n\n<p>I'd suggest SafeStack should be able to provide a copy of que (a DeQue typedef), which is quick. Then, outside of the lock, Thread B has a copy of the DeQue ( a std::deque&lt; DevArrayPtr > ) to fashion into it's own \"giant array\". </p>\n\n<p>Now, more about that array. To this point I've not adequately dealt with marshalling it. I've just suggested that DevDat does that, but this may not be adequate. Certainly the content of the std::array or std::vector conveying a collection of DevDats could be written. Perhaps that deserves it's own outer structure. I'll leave that to you, because the point I've made is that SafeStack is now focused on it's small task (lock/access/unlock) and can take anything which can be owned by a share_ptr (or POD's and copyable objects). In the same way SafeStack is an outer shell marshalling a std::deque with a mutex, some similar outer shell could marshal read only access to the std::vector or std::array of DevDats, with a kind of write accessor used by Thread A. That could be a simple as something that only allows construction of the std::array to create it's content, after which read only access could be all that's provided.</p>\n"}], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 32746661, "answer_count": 2, "score": 0, "last_activity_date": 1443041780, "creation_date": 1443027384, "last_edit_date": 1443029318, "question_id": 32745282, "link": "https://stackoverflow.com/questions/32745282/choosing-an-appropriate-fifo-data-structure", "title": "Choosing an Appropriate FIFO Data Structure", "body": "<p>I need a FIFO structure that supports indexing.  Each element is an array of data that is saved off a device I'm reading from.  The FIFO has a constant size, and at start-up each element is zeroed out.</p>\n\n<p>Here's some pseudo code to help understand the issue:</p>\n\n<pre><code>Thread A (Device Reader):\n1. Lock the structure.\n2. Pop oldest element off of FIFO (don't need it).\n3. Read next array of data (note this is a fixed size array) from the device.\n4. Push new data array onto the FIFO.\n5. Unlock.\n\nThread B (Data Request From Caller):\n1. Lock the structure.\n2. Determine request type.\n3. if (request = one array) memcpy over the latest array saved (LIFO).\n4. else memcpy over the whole FIFO to the user as a giant array (caller uses arrays).\n5. Unlock.\n</code></pre>\n\n<p>Note that the FIFO shouldn't be changed in Thread B, the caller should just get a copy, so data structures where pop is destructive wouldn't necessarily work without an intermediate copy.</p>\n\n<p>My code also has a boost dependency already and I am using a lockfree spsc_queue elsewhere.  With that said, I don't see how this queue would work for me here given the need to work as a LIFO in some cases and also the need to memcpy over the entire FIFO at times.</p>\n\n<p>I also considered a plain  <code>std::vector</code>, but I'm worried about performance when I'm constantly pushing and popping.</p>\n"}, {"tags": ["c++", "opengl", "mfc", "rotation"], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1443033898, "creation_date": 1443033898, "answer_id": 32747168, "question_id": 32745081, "link": "https://stackoverflow.com/questions/32745081/opengl-chained-translations-rotations/32747168#32747168", "title": "OpenGL chained translations/rotations", "body": "<p>To translate around a point <code>(x,y)</code>, first translate by <code>(x,y)</code>, then rotate, then translate by <code>-(x,y)</code>.</p>\n\n<p>Now, if your world has been transformed by <code>M</code> (some matrix), then the origin of the world <em>before</em> that transformation is located at <code>M^-1 (0,0)</code>.</p>\n\n<p>Suppose your world transformation from the original is <code>M</code>, and you want to perform some rotation <code>R</code>, but that rotation should be around the <em>original</em> origin, but the rotation matrix <code>R</code> is expressed in terms rotation around the point <code>(0,0)</code> (as is the style).</p>\n\n<p>Then <code>R' = M R M^-1</code> will generate a new matrix <code>R'</code> that consists of rotating by <code>R</code> around the <em>original</em> <code>(0,0)</code>.  Then <code>M' = R' M</code> is the matrix that represents starting with nothing, and then doing <code>M</code>, then doing <code>R</code> around the origin.</p>\n\n<p>If you are doing cumulative transformations on some model, simply keep track of the product of said transformations, along side modifying the scene.</p>\n\n<p>Alternatively, store the original scene, and instead of doing cumulative transformations on it, always apply <code>M</code> to get the current scene.</p>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 32747168, "answer_count": 1, "score": 1, "last_activity_date": 1443033898, "creation_date": 1443026732, "last_edit_date": 1443027082, "question_id": 32745081, "link": "https://stackoverflow.com/questions/32745081/opengl-chained-translations-rotations", "title": "OpenGL chained translations/rotations", "body": "<p>I have a generic OpenGL 3D world, centered on (0,0,0) at start. I implemented a standard trackball, based on <a href=\"http://web.cse.ohio-state.edu/~crawfis/Graphics/VirtualTrackball.html\" rel=\"nofollow\">this code</a>. This implements rotations as small increments/transformations to the current modelview matrix,</p>\n\n<pre><code>// We need to apply the rotation as the last transformation.\n//   1. Get the current matrix and save it.\n//   2. Set the matrix to the identity matrix (clear it).\n//   3. Apply the trackball rotation.\n//   4. Pre-multiply it by the saved matrix.\nglGetFloatv(GL_MODELVIEW_MATRIX, (GLfloat *)objectXform);\nglLoadIdentity();\nglRotatef(rot_angle, rotAxis.x, rotAxis.y, rotAxis.z);\nglMultMatrixf((GLfloat *)objectXform);\n</code></pre>\n\n<p>This part works perfectly. But then I wantes to implement translations, and I am doing this also as small increments to the modelview matrix,</p>\n\n<pre><code>glTranslatef(-dx, -dy, 0.f);\n</code></pre>\n\n<p>This also works as expected (no matter how the world is rotated, the translation goes along with the mouse, i.e., the model goes behind the mouse. </p>\n\n<p>The problem comes when I try to rotate after the translation: I want the rotation to be around the world center, but that will not happen after user translations. I tried to store the absolute translation and compensate for it, but obviously it does not work. I did it as folows:</p>\n\n<pre><code>// Translation part, store absolute translation\nm_mouseInfo.m_fTotalTranslationX -= dx;\nm_mouseInfo.m_fTotalTranslationY -= dy;\nglTranslatef(-dx, -dy, 0.f);\n\n...\n\n// Rotation, try to apply the rotation around (0,0,0)\nglGetFloatv(GL_MODELVIEW_MATRIX, (GLfloat *)objectXform);\nglLoadIdentity();\n// Try to compensate for the translation and do the rotation aroun (0,0,0) but won't work\nglTranslatef(m_mouseInfo.m_fTotalTranslationX, m_mouseInfo.m_fTotalTranslationY, 0.f);\nglRotatef(rot_angle, rotAxis.x, rotAxis.y, rotAxis.z);\nglTranslatef(-m_mouseInfo.m_fTotalTranslationX, -m_mouseInfo.m_fTotalTranslationY, 0.f);\nglMultMatrixf((GLfloat *)objectXform);\n</code></pre>\n\n<p>How can I store the absolute translation to compensate for it when I apply the rotation and therefore rotate the scene around the origin?</p>\n\n<p>Or, in other words, how can I just rotate the world around the origin when I have cumulative transfromations?</p>\n"}, {"tags": ["c++", "mfc", "cdialog"], "comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 1, "creation_date": 1443027035, "post_id": 32745075, "comment_id": 53331143, "body": "You are doing it wrong. You should use base class pointer, that&#39;s a common scernario. I don&#39;t know why you are using derived class pointer for base class object, sound fishy to me."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1443027320, "post_id": 32745075, "comment_id": 53331321, "body": "There is no CDialog::Display"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1443027906, "post_id": 32745075, "comment_id": 53331671, "body": "Yest, it&#39;s necessary.  Post the OnInitDialog for CNotificationDialog."}, {"owner": {"reputation": 2064, "user_id": 761184, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7a13f44e38c5de4e9d85ef07ec7e30e?s=128&d=identicon&r=PG", "display_name": "conectionist", "link": "https://stackoverflow.com/users/761184/conectionist"}, "edited": false, "score": 0, "creation_date": 1443029018, "post_id": 32745075, "comment_id": 53332221, "body": "I&#39;ve updated the description."}], "answers": [{"comments": [{"owner": {"reputation": 2064, "user_id": 761184, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7a13f44e38c5de4e9d85ef07ec7e30e?s=128&d=identicon&r=PG", "display_name": "conectionist", "link": "https://stackoverflow.com/users/761184/conectionist"}, "edited": false, "score": 0, "creation_date": 1443029543, "post_id": 32745783, "comment_id": 53332506, "body": "I don&#39;t understand. How am I supposed to do it?"}, {"owner": {"reputation": 2064, "user_id": 761184, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7a13f44e38c5de4e9d85ef07ec7e30e?s=128&d=identicon&r=PG", "display_name": "conectionist", "link": "https://stackoverflow.com/users/761184/conectionist"}, "edited": false, "score": 0, "creation_date": 1443030295, "post_id": 32745783, "comment_id": 53332903, "body": "That&#39;s not how it works. CWebNotificationDialog is derived from CNotificationDialog. CNotificationDialog does not know anything about its descendants. What if I derive another class from C1NotificationDialog? How will the code for C1NotificationDialog::OnInitDialog() look then? The idea is for the proper OnInitDialog to be called based on what dlg is pointing to. That&#39;s polymorphism."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "reply_to_user": {"reputation": 2064, "user_id": 761184, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7a13f44e38c5de4e9d85ef07ec7e30e?s=128&d=identicon&r=PG", "display_name": "conectionist", "link": "https://stackoverflow.com/users/761184/conectionist"}, "edited": false, "score": 0, "creation_date": 1443030882, "post_id": 32745783, "comment_id": 53333270, "body": "@conectionist The code sample you posted does not seem to correlate with <i>&quot;This is what <b>CNotificationDialog</b>::OnInitDialog looks like&quot;</i>.  Hence, the confusion on my part.  Is that code correct?"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "reply_to_user": {"reputation": 2064, "user_id": 761184, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7a13f44e38c5de4e9d85ef07ec7e30e?s=128&d=identicon&r=PG", "display_name": "conectionist", "link": "https://stackoverflow.com/users/761184/conectionist"}, "edited": false, "score": 0, "creation_date": 1443032374, "post_id": 32745783, "comment_id": 53334155, "body": "@conectionist  Can you post the class definitions (from the header files), so that an accurate picture of the class derivation can be made?  You say...&quot;<i>I also have another class that&#39;s derived from CNotificationDialog (CWebNotificationDialog).</i>&quot;  But, the code sample shows CNotificationDialog being used as a pointer."}], "tags": [], "owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "is_accepted": false, "score": 0, "last_activity_date": 1443029630, "last_edit_date": 1443029630, "creation_date": 1443029106, "answer_id": 32745783, "question_id": 32745075, "link": "https://stackoverflow.com/questions/32745075/oninitdialog-not-called-in-descendant-of-cdialog/32745783#32745783", "title": "OnInitDialog not called in descendant of CDialog", "body": "<p>You're calling the base class of CDialog and <strong>not</strong> the derived OnInitDialog from CWebNotificationDialog.  Try...</p>\n\n<pre><code>BOOL C1NotificationDialog::OnInitDialog()\n{\n   CWebNotificationDialog::OnInitDialog();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 5574755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40bbadf5df8c0d886d4e648d98ad4eb?s=128&d=identicon&r=PG&f=1", "display_name": "lequinne", "link": "https://stackoverflow.com/users/5574755/lequinne"}, "is_accepted": true, "score": 1, "last_activity_date": 1463019336, "last_edit_date": 1495541764, "creation_date": 1463019336, "answer_id": 37176149, "question_id": 32745075, "link": "https://stackoverflow.com/questions/32745075/oninitdialog-not-called-in-descendant-of-cdialog/37176149#37176149", "title": "OnInitDialog not called in descendant of CDialog", "body": "<p>I just had this very same problem, was very perplexed, and found that in my case, the problem was this: </p>\n\n<p>If you are calling the member function Create() function inside the class constructor, as recommended in MSDN, it must go in the derived class constructor. Calling a virtual function from within a base-class constructor is to be avoided, per this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/962132/calling-virtual-functions-inside-constructors\">Calling virtual functions inside constructors</a></p>\n\n<p>I found that in the following code, the derived class OnInitDialog() was not called when an object of the derived class was instantiated:</p>\n\n<pre><code>class BaseDialog : public CDialog{\npublic:\n    BaseDialog(UINT resourceID, CWnd *pParent) : CDialog(resourceID, pParent){\n        Create(resourceID, pParent);\n    };\n};\n\nclass DerivedDialog : public BaseDialog{\npublic:\n   DerivedDialog(UINT resourceID, CWnd *pParent) : BaseDialog(resourceID, pParent){};\n\n    BOOL OnInitDialog(){ /* NOT CALLED */};\n};\n</code></pre>\n\n<p>With Create() being called from the derived class constructor, the derived class OnInitDialog() was called as intended:</p>\n\n<pre><code>class BaseDialog : public CDialog{\npublic:\n    BaseDialog(UINT resourceID, CWnd *pParent) : CDialog(resourceID, pParent){\n      //  Create(resourceID, pParent);\n    };\n};\n\nclass DerivedDialog : public BaseDialog{\npublic:\n   DerivedDialog(UINT resourceID, CWnd *pParent) : BaseDialog(resourceID, pParent){\n        Create(resourceID, pParent);\n    };\n\n    BOOL OnInitDialog(){ /* This was called */ };\n};\n</code></pre>\n"}], "owner": {"reputation": 2064, "user_id": 761184, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e7a13f44e38c5de4e9d85ef07ec7e30e?s=128&d=identicon&r=PG", "display_name": "conectionist", "link": "https://stackoverflow.com/users/761184/conectionist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2825, "favorite_count": 0, "accepted_answer_id": 37176149, "answer_count": 2, "score": 1, "last_activity_date": 1463019336, "creation_date": 1443026711, "last_edit_date": 1443029004, "question_id": 32745075, "link": "https://stackoverflow.com/questions/32745075/oninitdialog-not-called-in-descendant-of-cdialog", "title": "OnInitDialog not called in descendant of CDialog", "body": "<p>I have a class Derived from CDialog (CNotificationDialog) which is auto-generated by Visual Studio when selecting the Add Class option.</p>\n\n<p>I also have another class that's derived from CNotificationDialog (CWebNotificationDialog).</p>\n\n<p>My code is something like:</p>\n\n<pre><code>CNotificationDialog* dlg = new CWebNotificationDialog();\ndlg-&gt;Display();\n</code></pre>\n\n<p>The dialog is displayed but the CWebNotificationDialog::OnInitDialog method is not called. Only the CNotificationDialog::OnInitDialog method is called.</p>\n\n<p>And before you ask, YES it is declared virtual.\nI've alos tried adding DECLARE_DYNAMIC, BEGIN_MESSAGE_MAP and all the other macros that are auto-generated, but no luck.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>This is what CNotificationDialog::OnInitDialog looks like.</p>\n\n<pre><code>BOOL C1NotificationDialog::OnInitDialog()\n{\n   CDialog::OnInitDialog();\n\n   HICON hIconBig = (HICON)LoadImage(AfxGetResourceHandle(), MAKEINTRESOURCE(IDR_MAINFRAME), IMAGE_ICON, 32, 32, LR_SHARED); \n   CStatic *pPictureCtrl = (CStatic*)GetDlgItem(IDS_NOTIFICATION_DLG_LOGO);\n   pPictureCtrl-&gt;SetIcon(hIconBig);\n\n   return TRUE;\n}\n</code></pre>\n\n<p>It's declared like this:</p>\n\n<pre><code>protected:\nvirtual BOOL OnInitDialog();\n</code></pre>\n"}, {"tags": ["c++", "cin"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1443029320, "post_id": 32745038, "comment_id": 53332374, "body": "Consult a C++ reference to look at how the various <code>operators</code> are overloaded within <code>cin</code>. If you don&#39;t know what operator overloading is yet, then start by searching for a definition of that."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1443029787, "post_id": 32745038, "comment_id": 53332631, "body": "See <a href=\"http://stackoverflow.com/a/20962046/597607\">Purpose of if(cin)</a>"}], "owner": {"reputation": 21, "user_id": 5190451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07922837cc86a15e8ee833ff39aca00c?s=128&d=identicon&r=PG&f=1", "display_name": "Jon M. Kenny", "link": "https://stackoverflow.com/users/5190451/jon-m-kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "closed_date": 1443030633, "answer_count": 0, "score": 1, "last_activity_date": 1443029038, "creation_date": 1443026587, "last_edit_date": 1443029038, "question_id": 32745038, "link": "https://stackoverflow.com/questions/32745038/what-if-cin-do", "closed_reason": "Duplicate", "title": "What if ( !cin ) do", "body": "<p>I have this code:</p>\n\n<pre><code>int temp;\ncin &gt;&gt; temp;\nif(!cin){\n    cout &lt;&lt; \"a\";\n}else{\n    cout &lt;&lt; \"b\";\n}        \n</code></pre>\n\n<p>When I put a number, it printed <code>b</code>, but when I put a character, it printed <code>a</code>. What is happening here?</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "swap", "make-shared"], "answers": [{"comments": [{"owner": {"reputation": 1490, "user_id": 2752221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ooTdK.jpg?s=128&g=1", "display_name": "bhaller", "link": "https://stackoverflow.com/users/2752221/bhaller"}, "edited": false, "score": 0, "creation_date": 1443026985, "post_id": 32745124, "comment_id": 53331119, "body": "Yep, I figured that out just after I clicked post.  See the addendum I just put up.  The question remains how to make my code work."}, {"owner": {"reputation": 2882, "user_id": 280758, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/196439db37b40bbd20479e11606b78d2?s=128&d=identicon&r=PG", "display_name": "qehgt", "link": "https://stackoverflow.com/users/280758/qehgt"}, "edited": false, "score": 2, "creation_date": 1443027402, "post_id": 32745124, "comment_id": 53331367, "body": "just <code>result = int_result_SP;</code>. No swap is needed"}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 0, "creation_date": 1443027517, "post_id": 32745124, "comment_id": 53331434, "body": "&quot;while keeping the code fast&quot; - what makes you think the assignment is making your code <b>not</b> fast?"}, {"owner": {"reputation": 1490, "user_id": 2752221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ooTdK.jpg?s=128&g=1", "display_name": "bhaller", "link": "https://stackoverflow.com/users/2752221/bhaller"}, "reply_to_user": {"reputation": 2882, "user_id": 280758, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/196439db37b40bbd20479e11606b78d2?s=128&d=identicon&r=PG", "display_name": "qehgt", "link": "https://stackoverflow.com/users/280758/qehgt"}, "edited": false, "score": 0, "creation_date": 1443027775, "post_id": 32745124, "comment_id": 53331599, "body": "@qehgt, result = int_result_SP would cause a refcount increment/decrement, would it not?  After the assignment, both result and int_result_SP would point to the object, and that would remain true until int_result_SP went out of scope and the refcount decremented again.  Am I mistaken in how that works?"}, {"owner": {"reputation": 2882, "user_id": 280758, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/196439db37b40bbd20479e11606b78d2?s=128&d=identicon&r=PG", "display_name": "qehgt", "link": "https://stackoverflow.com/users/280758/qehgt"}, "reply_to_user": {"reputation": 1490, "user_id": 2752221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ooTdK.jpg?s=128&g=1", "display_name": "bhaller", "link": "https://stackoverflow.com/users/2752221/bhaller"}, "edited": false, "score": 1, "creation_date": 1443029117, "post_id": 32745124, "comment_id": 53332271, "body": "@bhaller, you can assume that this increments/decrements are <i>very</i> cheap operations vs dynamic allocation of your object in heap."}, {"owner": {"reputation": 1490, "user_id": 2752221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ooTdK.jpg?s=128&g=1", "display_name": "bhaller", "link": "https://stackoverflow.com/users/2752221/bhaller"}, "reply_to_user": {"reputation": 2882, "user_id": 280758, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/196439db37b40bbd20479e11606b78d2?s=128&d=identicon&r=PG", "display_name": "qehgt", "link": "https://stackoverflow.com/users/280758/qehgt"}, "edited": false, "score": 0, "creation_date": 1443029540, "post_id": 32745124, "comment_id": 53332505, "body": "@qehgt, sure, but that could be like saying that elephants are very small compared to blue whales.  :-&gt;  David Schwartz seems to hit the nail on the head with his answer, which avoids the overhead of the increment/decrement entirely.  (Although it would be interesting to profile both and compare; perhaps once I&#39;ve got my code running I will do that.)"}, {"owner": {"reputation": 2882, "user_id": 280758, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/196439db37b40bbd20479e11606b78d2?s=128&d=identicon&r=PG", "display_name": "qehgt", "link": "https://stackoverflow.com/users/280758/qehgt"}, "reply_to_user": {"reputation": 1490, "user_id": 2752221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ooTdK.jpg?s=128&g=1", "display_name": "bhaller", "link": "https://stackoverflow.com/users/2752221/bhaller"}, "edited": false, "score": 0, "creation_date": 1443046970, "post_id": 32745124, "comment_id": 53341507, "body": "@bhaller, it&#39;s literally just a few CPU instructions if optimizations are enabled."}, {"owner": {"reputation": 1490, "user_id": 2752221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ooTdK.jpg?s=128&g=1", "display_name": "bhaller", "link": "https://stackoverflow.com/users/2752221/bhaller"}, "edited": false, "score": 0, "creation_date": 1443056825, "post_id": 32745124, "comment_id": 53344126, "body": "Unless the compiler decides not to inline the operator= function call, in which case it&#39;s a function call.  In any case, this code is hot enough that a few CPU instructions matter.  Why would you use a solution that causes a refcount inc/dec if there is an equally good solution that avoids that?"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 5, "last_activity_date": 1443026882, "creation_date": 1443026882, "answer_id": 32745124, "question_id": 32745034, "link": "https://stackoverflow.com/questions/32745034/strange-error-trying-to-do-a-shared-ptr-swap/32745124#32745124", "title": "Strange error trying to do a shared_ptr swap()", "body": "<p>You can't <code>swap</code> because, although <code>EidosValue_Int_vector</code> <em>is a</em> <code>EidosValue</code> the converse isn't true.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 4, "last_activity_date": 1443028989, "creation_date": 1443028989, "answer_id": 32745745, "question_id": 32745034, "link": "https://stackoverflow.com/questions/32745034/strange-error-trying-to-do-a-shared-ptr-swap/32745745#32745745", "title": "Strange error trying to do a shared_ptr swap()", "body": "<p>This is exactly what <code>std::move</code> is for. Use:</p>\n\n<pre><code>    result = std::move (int_result_SP);\n</code></pre>\n"}], "owner": {"reputation": 1490, "user_id": 2752221, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ooTdK.jpg?s=128&g=1", "display_name": "bhaller", "link": "https://stackoverflow.com/users/2752221/bhaller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 32745745, "answer_count": 2, "score": 5, "last_activity_date": 1443029134, "creation_date": 1443026568, "last_edit_date": 1443026938, "question_id": 32745034, "link": "https://stackoverflow.com/questions/32745034/strange-error-trying-to-do-a-shared-ptr-swap", "title": "Strange error trying to do a shared_ptr swap()", "body": "<p>I'm a relative C++ newbie trying to convert an existing project from raw pointers, with a convoluted memory-management protocol, over to using C++11's <code>shared_ptr</code>.  Overall it is going very smoothly, and I <em>think</em> I understand how <code>shared_ptr</code> works in terms of move semantics, rvalue references, etc.  Good stuff.</p>\n\n<p>However, I have hit a weird error that I don't understand and don't know how to fix.  A little background first.  I have a class hierarchy rooted in an abstract base class named <code>EidosValue</code>, and a class named <code>EidosValue_Int_vector</code> is (indirectly) a concrete subclass of that:</p>\n\n<pre><code>class EidosValue\nclass EidosValue_Int : public EidosValue\nclass EidosValue_Int_vector : public EidosValue_Int\n</code></pre>\n\n<p>My code generally traffics in <code>EidosValue</code>, but sometimes, especially when creating a new value, I need to handle a specific subclass.</p>\n\n<p>I have done typedefs for the <code>shared_ptr</code>s for these classes, so I have:</p>\n\n<pre><code>typedef std::shared_ptr&lt;EidosValue&gt; EidosValue_SP;\ntypedef std::shared_ptr&lt;EidosValue_Int_vector&gt; EidosValue_Int_vector_SP;\n</code></pre>\n\n<p>among others.  OK, so now to the core of the problem.  I have a function that returns an <code>EidosValue_SP</code> that it creates.  Depending on the logic within the function, it might create one of several different concrete subclasses of <code>EidosValue</code>.  So I do something like this:</p>\n\n<pre><code>EidosValue_SP MyClass::MyMethod(...)\n{\n    EidosValue_SP result;\n\n    if (...)\n    {\n        EidosValue_Int_vector_SP int_result_SP = make_shared&lt;EidosValue_Int_vector&gt;();\n        ... do subclass-specific stuff with int_result_SP...\n        result.swap(int_result_SP);\n    }\n    else (...)\n    {\n        ...similar logic for other subclasses...\n    }\n\n    ...other shared logic...\n    return result;\n}\n</code></pre>\n\n<p>The problem is with the <code>swap()</code> call.  I get an error: \"<code>Non-const lvalue reference to type 'shared_ptr&lt;EidosValue&gt;' cannot bind to a value of unrelated type 'shared_ptr&lt;EidosValue_Int_vector&gt;'</code>\".  This is puzzling since <code>EidosValue_Int_vector</code> is not an \"unrelated type\", it's a public subclass of EidosValue, and the code here knows it.  If I type <code>result = make_shared&lt;EidosValue_Int_vector&gt;();</code> the compiler has no problem whatsoever with that, so it clearly knows that the types are related and compatible.  It just doesn't like it in the context of <code>swap()</code> for some reason.  In other places in my project I have been able to simply do a <code>return int_result_SP;</code>, with a declared return type of EidosValue_SP, and that has worked fine \u2013 the compiler is happy to consider an EidosValue_Int_vector_SP to be an EidosValue_SP in that context \u2013 but I can't do that here because of the shared logic at the bottom of the function.</p>\n\n<p>I am somewhat constrained in my implementation here because this code is a bottleneck and needs to run fast (and yes, I know that from actually instrumenting the code, and yes, it really does matter).  So it is essential to use <code>make_shared</code> to avoid a double allocation, and I would also strongly prefer to avoid a refcount increment/decrement when I hand the pointer from <code>int_result_SP</code> to result; I don't want there to be a moment in time when there are two shared_ptrs pointing to the new instance.  So <code>swap()</code> seems like the obvious way to go; but I'm blocked by this compiler error.  Why is it happening and how can I fix it?  Thanks!</p>\n\n<p>ADDENDUM:</p>\n\n<p>Oh, pondering this further I bet I know why the error is happening.  <code>swap()</code> has no objection to putting the <code>EidosValue_Int_vector</code> into the <code>EidosValue_SP</code>, but it <strong>does</strong> have a problem with putting the <code>EidosValue</code> into the <code>EidosValue_Int_vector_SP</code>; in that direction the types are not compatible.  I hadn't thought about it that way since <code>result</code> has no value (i.e. has <code>nullptr</code>, I guess) in it; but of course <code>swap()</code> doesn't know that.  OK, so if that is the problem, the question remains: how can I effect the transfer while keeping the code fast \u2013 not doing a refcount inc/dec and not moving away from using <code>make_shared</code>?  Now that I understand the problem (I think) it seems likely that there is just some API or trick that I have overlooked...</p>\n"}, {"tags": ["c++", "vector", "tostring"], "comments": [{"owner": {"reputation": 7598, "user_id": 734691, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/QywkD.jpg?s=128&g=1", "display_name": "Jonathan Henson", "link": "https://stackoverflow.com/users/734691/jonathan-henson"}, "edited": false, "score": 4, "creation_date": 1443026119, "post_id": 32744866, "comment_id": 53330689, "body": "There is so much going on here that we couldn&#39;t possibly know what in particular the problem is. Have you verified that you are actually iterating over the xml doc? Do you know it actually contains data? Try printing something out inside your iterator that should always print e.g. std::cout &lt;&lt; &quot;iterating&quot; &lt;&lt; std::endl;"}, {"owner": {"reputation": 29116, "user_id": 382471, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/804ee314e1022f48ddd7d9cebe329afc?s=128&d=identicon&r=PG", "display_name": "robert", "link": "https://stackoverflow.com/users/382471/robert"}, "edited": false, "score": 1, "creation_date": 1443026471, "post_id": 32744866, "comment_id": 53330870, "body": "<a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1443026493, "post_id": 32744866, "comment_id": 53330879, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 1, "creation_date": 1443029063, "post_id": 32744866, "comment_id": 53332243, "body": "You&#39;re pushing a local stack object into the container."}, {"owner": {"reputation": 1, "user_id": 5368597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbde3187396f7aee7867f3a9ad72a38?s=128&d=identicon&r=PG&f=1", "display_name": "bradm77", "link": "https://stackoverflow.com/users/5368597/bradm77"}, "edited": false, "score": 0, "creation_date": 1443031935, "post_id": 32744866, "comment_id": 53333893, "body": "I figured it out, thanks for the replies. It was the way I was creating my vector."}], "answers": [{"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 0, "last_activity_date": 1443071502, "creation_date": 1443071502, "answer_id": 32753814, "question_id": 32744866, "link": "https://stackoverflow.com/questions/32744866/how-to-call-tostring-on-iterator-c/32753814#32753814", "title": "How to call toString on iterator c++", "body": "<pre><code>XMLItem localxml = XMLItem();\nwhile (inStream.hasNext()) {\n  string input = inStream.nextLine();\n  if(input.find(\"&lt;\") != std::string::npos) {\n    XMLItem localxml = XMLItem(tag, input);\n  } else {\n    XMLItem localxml = XMLItem(data, input);\n  }    \n  this-&gt;theInput.push_back(localxml);\n}\n</code></pre>\n\n<p>In both the block for the <code>if</code> and the one for the <code>else</code> case you have a new local (to that respective block) variable named <code>localxml</code>. They shadow the variable defined before the <code>while</code> loop, leaving it unchanged. So you basically could run</p>\n\n<pre><code>theInput.push_back(XMLItem());\n</code></pre>\n\n<p>inside that loop. So later, when you try to convert the elements of the vector to a string these \"empty\" elements get converted, probably leading to some empty strings being concatenated.</p>\n\n<p>To fix that change the variable declarations to assignments by removing the type in front of the variable name:</p>\n\n<pre><code>localxml = XMLItem(tag, input);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5368597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbbde3187396f7aee7867f3a9ad72a38?s=128&d=identicon&r=PG&f=1", "display_name": "bradm77", "link": "https://stackoverflow.com/users/5368597/bradm77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443071502, "creation_date": 1443025888, "question_id": 32744866, "link": "https://stackoverflow.com/questions/32744866/how-to-call-tostring-on-iterator-c", "title": "How to call toString on iterator c++", "body": "<p>hello I am new to coding so sorry for any misunderstandings I might have and how awful it looks. I have spent hours on this problem and cannot fix it. I have a vector of XMLItems and a constant toString method. When I try to call the toString with the iterator, it prints out nothing.</p>\n\n<pre><code>string XMLParser::toStringInput() const\n{\n\nstring inputret = \"\";\n\n  for(std::vector&lt;XMLItem&gt;::const_iterator iter = theInput.begin(); iter != theInput.end(); ++iter)\n  {\n  inputret += (*iter).toString();\n  }\nreturn inputret;\n}\n</code></pre>\n\n<p>this returns nothing. Am I using the Iterator wrong? have I saved the string wrong when I created my vectors? Here's the toString in the XMLItem class</p>\n\n<pre><code>string XMLItem::toString() const\n{\ncout &lt;&lt; this-&gt;theItem; //the item is a private string\nreturn this-&gt;theItem;\n}\n</code></pre>\n\n<p>here's where I created the vector just in case.</p>\n\n<pre><code>void XMLParser::readXML(Scanner&amp; inStream)\n{\nstring tmp = \"\";\nstring tag = \"tag\";\nstring data = \"data\";\nXMLItem localxml = XMLItem();\n\nwhile (inStream.hasNext())\n{\nstring input = inStream.nextLine();\n\nif(input.find(\"&lt;\") != std::string::npos)\n{\n  XMLItem localxml = XMLItem(tag, input);\n}\nelse\n{\n  XMLItem localxml = XMLItem(data, input);\n}\n\nthis-&gt;theInput.push_back(localxml);\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "application-design", "code-design"], "answers": [{"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1443036831, "post_id": 32746262, "comment_id": 53336686, "body": "You&#39;d encourage me to implement the solution I&#39;ve presented in the question, I take it? Note that I haven&#39;t coded it yet, so it&#39;s quite likely that I was simply exaggerating about its complexity."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1443037395, "post_id": 32746262, "comment_id": 53336996, "body": "@szczurcio Yes :) Feel grep my <a href=\"https://github.com/KubaO/stackoverflown\" rel=\"nofollow noreferrer\">so github repo</a> for <code>QNetworkReply</code> etc."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1443030996, "last_edit_date": 1495541654, "creation_date": 1443030651, "answer_id": 32746262, "question_id": 32744665, "link": "https://stackoverflow.com/questions/32744665/synchronous-single-file-download-is-it-the-right-approach-in-a-gui-qt-applicat/32746262#32746262", "title": "Synchronous single file download - is it the right approach in a GUI Qt application?", "body": "<p>TL;DR: It's the wrong approach in <em>any</em> GUI application.</p>\n\n<blockquote>\n  <p>how inconvenient something like that is to implement in Qt</p>\n</blockquote>\n\n<p>It's not meant to be convenient, since whenever I see a shipping product that behaves that way, I have an urge to have a stern talk with the developers. Blocking the GUI is a usability nightmare. You never want to code that way.</p>\n\n<blockquote>\n  <p>coming from a procedural/C background, I'd initiate a synchronous download, set a timeout of maybe 3 seconds, then see what happens</p>\n</blockquote>\n\n<p>If you write any sort of machine or interface control code in C, you probably don't want it to be synchronous <strong>either</strong>. You'd set up a state machine and process everything asynchronously. When coding embedded C applications, state machines make hard things downright trivial. There are several solutions out there, <a href=\"http://www.state-machine.com/qpc/index.html\" rel=\"nofollow noreferrer\">QP/C</a> would be a first class example.</p>\n\n<blockquote>\n  <p>was thinking about initiating an asynchronous download in, say, InitVersionInfoDownload, and then connecting QNetworkReply's finished signal to a slot called VersionInfoDownloadComplete, or something along these lines. I'd also need a timer somewhere to implement timeout checks - if the slot is not invoked after say 3 seconds, the update should be aborted. However, this approach seems overly complicated</p>\n</blockquote>\n\n<p>It is trivial. You can't discuss such things without showing your code: perhaps you've implemented it in some horribly verbose manner. When done correctly, it's supposed to look lean and sweet. For some inspiration, see <a href=\"https://stackoverflow.com/a/32595398/1329652\">this answer</a>.</p>\n\n<blockquote>\n  <p>I cannot proceed without retrieving this file from the server, or indeed do anything while waiting for it to be downloaded</p>\n</blockquote>\n\n<p>That's patently false. Your user might wish to cancel the update and exit your application, or resize its window, or minimize/maximize it, or check the existing version, or the OS might require a window repaint, or ...</p>\n\n<p>Remember: Your user and the environment are in control. An application unresponsive by design is not only horrible user experience, but also makes your code harder to comprehend and test. Pseudo-synchronous spaghetti gets out of hand real quick. With async design, it's trivial to use signal spy or other products to introspect what the application is doing, where it's stuck, etc.</p>\n"}], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 32746262, "answer_count": 1, "score": 1, "last_activity_date": 1443030996, "creation_date": 1443025139, "question_id": 32744665, "link": "https://stackoverflow.com/questions/32744665/synchronous-single-file-download-is-it-the-right-approach-in-a-gui-qt-applicat", "title": "Synchronous single file download - is it the right approach in a GUI Qt application?", "body": "<p>I'm developing an updater for my application in Qt, primarily to get to know the framework (I realize there are multiple ready-made solutions available, that's not relevant here). It is a basic GUI application using a <code>QMainWindow</code> subclass for its main window and an <code>MyAppUpdater</code> class to perform the actual program logic.</p>\n\n<p>The update information (version, changelog, files to be downloaded) is stored on my server as an XML file. The first thing the updater should do after it sets up the UI is query that server, get the XML file, parse it and display info to the user. Here's where I have a problem though; coming from a procedural/C background, I'd initiate a synchronous download, set a timeout of maybe 3 seconds, then see what happens - if I manage to download the file correctly, I'll parse it and carry on, otherwise display an error. </p>\n\n<p>However, seeing how inconvenient something like that is to implement in Qt, I've come to believe that its network classes are designed in a different way, with a different approach in mind. </p>\n\n<p>I was thinking about initiating an asynchronous download in, say, <code>InitVersionInfoDownload</code>, and then connecting <code>QNetworkReply's</code> <code>finished</code> signal to a slot called <code>VersionInfoDownloadComplete</code>, or something along these lines. I'd also need a timer somewhere to implement timeout checks - if the slot is not invoked after say 3 seconds, the update should be aborted. However, this approach seems overly complicated and in general inadequate to the situation; I cannot proceed without retrieving this file from the server, or indeed do anything while waiting for it to be downloaded, so an asynchronous approach seems inappropriate in general. \nAm I mistaken about that, or is there a better way?</p>\n"}, {"tags": ["c++", "c", "cuda"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1443030751, "post_id": 32744632, "comment_id": 53333190, "body": "Your use of the three <code>__constant__</code> pointers is totally broken in several ways."}, {"owner": {"reputation": 443, "user_id": 886133, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/82833a4d160cc2427d6bee7df1d8d3ef?s=128&d=identicon&r=PG", "display_name": "Castrona", "link": "https://stackoverflow.com/users/886133/castrona"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1443032761, "post_id": 32744632, "comment_id": 53334396, "body": "@talonmies Can you please explain?  Is it because they are declared as <code>double*</code> rather than something like <code>double[N]</code> ?"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1443033191, "post_id": 32744632, "comment_id": 53334657, "body": "Nowhere do you allocate any memory for them. You just copy an (illegal) host address to the symbols"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1445071796, "post_id": 32744632, "comment_id": 54175516, "body": "I have added a community wiki answer to this question to get it off the unanswered list. If you are satisfied with it, perhaps you could accept it, just to get this question off the unanswered list. Otherwise, add you own answer if you found a better solution yourself, or perhaps delete the question"}], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": false, "score": 1, "last_activity_date": 1443340170, "creation_date": 1443340170, "answer_id": 32805726, "question_id": 32744632, "link": "https://stackoverflow.com/questions/32744632/cuda-simple-array-search-shared-memory/32805726#32805726", "title": "CUDA Simple Array Search - Shared Memory", "body": "<p>The core problem is this:</p>\n\n<pre><code>cudaMemcpyToSymbol(cx, &amp;circlex, sizeof(circlex), 0, cudaMemcpyHostToDevice);\n</code></pre>\n\n<p><code>cx</code> is a unintialised pointer to which you are copying <code>sizeof(double *)</code> bytes from a source array of double values, leaving it containing a nonsense address which results in an illegal memory operation in your kernel.</p>\n\n<p>Do something like this instead:</p>\n\n<pre><code> double * _cx; cudaMalloc((void **)&amp;_cx, sizeof(double) * count);\n cudaMemcpy(_cx, circlex, sizeof(double) * count, cudaMemcpyHostToDevice);\n cudaMemcpyToSymbol(cx, &amp;_cx, sizeof(_cx));\n</code></pre>\n\n<p>i.e. allocate a device memory buffer, copy the host source data to that buffer, then copy the address of that buffer to the constant memory pointer.</p>\n"}], "owner": {"reputation": 443, "user_id": 886133, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/82833a4d160cc2427d6bee7df1d8d3ef?s=128&d=identicon&r=PG", "display_name": "Castrona", "link": "https://stackoverflow.com/users/886133/castrona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443340170, "creation_date": 1443025028, "question_id": 32744632, "link": "https://stackoverflow.com/questions/32744632/cuda-simple-array-search-shared-memory", "title": "CUDA Simple Array Search - Shared Memory", "body": "<p>I am writing a function to search for the first occurrence that matches a specific criteria.  In my particular problem, I am interested in finding the array index corresponding to a circle that intersects with a given point.  I have three arrays that collectively describe the circles: x coordinates, y coordinates, and radii (<code>cx</code>, <code>cy</code>, <code>cz</code>).  Given an input point I calculate whether or not it will intersect each of the circles defined by the 3 arrays.  I chose to declare the x, y, radii arrays in global memory because my <code>search</code> function will be called often and these arrays will not change.  </p>\n\n<p>This function seems pretty straight forward, but I'm getting the following error:  </p>\n\n<p><code>cudaMemcpy(&amp;res, dev_idx, sizeof(int), cudaMemcpyDeviceToHost) returned the launch timed out and was terminated(6)</code></p>\n\n<pre><code>static void CheckCudaErrorAux (const char *, unsigned, const char *, cudaError_t);\n#define HANDLE_ERROR(value) CheckCudaErrorAux(__FILE__,__LINE__, #value, value)\n\n// global memory arrays on the device\n__device__ __constant__ double* cx;\n__device__ __constant__ double* cy;\n__device__ __constant__ double* cr;\n\n__global__ void _cuda_find_containing_circle(double px, double py, int* fidx, int count){\n    // px, py: x and y coordinates of the search point\n    // fidx:   a device variable to return the index of the matching circle\n    // count:  total number of circle elements in the device arrays\n\n    // get the current thread id\n    int tid = threadIdx.x + blockIdx.x * blockDim.x;\n\n    if(tid &lt; count){\n        // calculate the hypotenuse of the point and grab the radius\n        float hypot = (float)hypot(cx[tid] - px, cy[tid] - py);\n        float radius = (float)cr[tid];\n\n        // if the hypotenuse is within the radius, return the current index\n        // this looks like the problem, i.e. hardcoding to \"if(tid = 10){\" does not result in an error\n        if (hypot &lt;= radius){  \n            atomicMin(fidx, tid);\n\n            // I've also tried setting the idx directly\n            //*fidx = tid;\n        }\n\n        // increment thread id\n        tid += blockDim.x * gridDim.x;\n    }\n}\n\n\n\n\n\nvoid main(){\n    // define a search point for testing\n    int px = 100;\n    int py = 150;\n\n    // initialize cx, cy, cz device values using the following arrays\n    double *circlex;\n    double *circley;\n    double *circler;\n    int count = 100;\n\n    circlex = (double *) malloc(sizeof(double) * count);\n    circley = (double *) malloc(sizeof(double) * count);\n    circler = (double *) malloc(sizeof(double) * count);\n\n    // populate arrays with values that will not pass the search criteria\n    for (int i = 0; i &lt; count; i++) {\n        circlex[i] = 2.1;\n        circley[i] = 3.2;\n        circler[i] = 0.0;\n    }\n\n    // add a single value that will pass the search criteria (for testing)\n    circlex[count - 5] = 101.0;\n    circley[count - 5] = 160.0;\n    circler[count - 5] = 11.0;  //hypot should result in 10.0498 &lt; 11\n\n    // copy these data onto the device \n    HANDLE_ERROR(cudaMemcpyToSymbol(cx, &amp;circlex, sizeof(circlex), 0, cudaMemcpyHostToDevice));\n    HANDLE_ERROR(cudaMemcpyToSymbol(cy, &amp;circley, sizeof(circley), 0, cudaMemcpyHostToDevice));\n    HANDLE_ERROR(cudaMemcpyToSymbol(cr, &amp;circler, sizeof(circler), 0, cudaMemcpyHostToDevice));\n\n    // create an object on the device to store the search index result\n    int* dev_idx;\n    int idx = 999;  // initial condition.  If -999 is returned then I know that a match was not found\n    HANDLE_ERROR(cudaMalloc((void **) &amp;dev_idx, sizeof(int)));\n    HANDLE_ERROR(cudaMemcpy(dev_idx, &amp;idx, sizeof(int), cudaMemcpyHostToDevice));\n\n    // call the search function\n    _cuda_find_containing_circle &lt;&lt;&lt;128, 128&gt;&gt;&gt; (px, py, dev_idx, count);\n\n    // get the search result\n    // this line throws the following error: cudaMemcpy(&amp;res, dev_idx, sizeof(int), cudaMemcpyDeviceToHost) returned the launch timed out and was terminated(6) \n    int res;\n    HANDLE_ERROR(cudaMemcpy(&amp;res, dev_idx, sizeof(int), cudaMemcpyDeviceToHost));\n\n    cout &lt;&lt; \"IDX = \" &lt;&lt; res &lt;&lt; endl;\n\n\n\n\n\nstatic void CheckCudaErrorAux (const char *file, unsigned line, const char *statement, cudaError_t err)\n{\n    if (err == cudaSuccess)\n        return;\n    std::cerr &lt;&lt; statement&lt;&lt;\" returned \" &lt;&lt; cudaGetErrorString(err) &lt;&lt; \"(\"&lt;&lt;err&lt;&lt; \") at \"&lt;&lt;file&lt;&lt;\":\"&lt;&lt;line &lt;&lt; std::endl;\n    exit (1);\n}\n</code></pre>\n\n<p>Is there something fundamentally incorrect with my approach?  </p>\n"}, {"tags": ["c++", "boost", "network-programming", "boost-asio"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443657609, "post_id": 32744557, "comment_id": 53586014, "body": "The linger option has nothing to do with reads whatsoever. It is about what happens when you close."}], "answers": [{"comments": [{"owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "edited": false, "score": 0, "creation_date": 1443058594, "post_id": 32749777, "comment_id": 53344495, "body": "Thanks for the response. But not chaining more reads does not actually help. The question lies in interrupting or breaking an already chained read ~&gt;_&lt;~"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1443043579, "creation_date": 1443043579, "answer_id": 32749777, "question_id": 32744557, "link": "https://stackoverflow.com/questions/32744557/force-asynchronous-socket-read-to-finish-early-using-boost-asio/32749777#32749777", "title": "Force asynchronous socket read to finish early using Boost.Asio", "body": "<p>In my opinion you've summed it up pretty nicely.</p>\n\n<p>You cannot really do better than fullblown cancel. Indeed you may resume any canceled writes.</p>\n\n<p>I don't think there is anything more elegant. I would not say the design is flawed, but you might want to consider not actually canceling pending operations, but instead just keeping a flag to indicate whether a \"logical read cancel\" is pending and prevent chaining more reads in that case</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 5019077, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152774845152583/picture?type=large", "display_name": "Mercyful", "link": "https://stackoverflow.com/users/5019077/mercyful"}, "is_accepted": false, "score": 0, "last_activity_date": 1443654369, "creation_date": 1443654369, "answer_id": 32876942, "question_id": 32744557, "link": "https://stackoverflow.com/questions/32744557/force-asynchronous-socket-read-to-finish-early-using-boost-asio/32876942#32876942", "title": "Force asynchronous socket read to finish early using Boost.Asio", "body": "<p>When you used shutdown.. eg.. socket.shutdown  did you use the shutdown_both?</p>\n\n<p>(boost::asio::ip::tcp::socket::shutdown_both, ec) </p>\n\n<p>The shutdown_both option.  That should handle read and write closures.</p>\n\n<pre><code>socket.shutdown(boost::asio::ip::tcp::socket::shutdown_both, errorcode);\nif (errorcode)\n{\n    cerr &lt;&lt; \"socket.shutdown error: \" &lt;&lt; errorcode.message() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Also.. If you have the io_service handle.  you can call io_service.stop() as a last resort which will shutdown all operations.</p>\n"}, {"comments": [{"owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "edited": false, "score": 0, "creation_date": 1443659445, "post_id": 32877466, "comment_id": 53586416, "body": "<i>cause all pending reads to encounter end of stream and return accordingly</i>. On my friend&#39;s Mac OS, yes. On my Windows 7 64bit, No."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1443657739, "creation_date": 1443657739, "answer_id": 32877466, "question_id": 32744557, "link": "https://stackoverflow.com/questions/32744557/force-asynchronous-socket-read-to-finish-early-using-boost-asio/32877466#32877466", "title": "Force asynchronous socket read to finish early using Boost.Asio", "body": "<p>Shutdown the socket for input. That will cause all pending reads to encounter end of stream and return accordingly.</p>\n\n<blockquote>\n  <p>And although shutdown() can be applied to the read loop only, it prevents future async_read_some() calls only, and has no effect on what is already done. </p>\n</blockquote>\n\n<p>I don't know where you got this misinformation from. I don't even know what it means. Shutdown applies to the socket, not a read loop.</p>\n"}], "owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 1, "accepted_answer_id": 32749777, "answer_count": 3, "score": 0, "last_activity_date": 1443657739, "creation_date": 1443024754, "last_edit_date": 1443657568, "question_id": 32744557, "link": "https://stackoverflow.com/questions/32744557/force-asynchronous-socket-read-to-finish-early-using-boost-asio", "title": "Force asynchronous socket read to finish early using Boost.Asio", "body": "<p>I have a <code>tcp::socket</code> for reading and writing data. There is a read loop made up by chaining <code>async_read_some()</code> and the handler <code>on_data_read()</code> that calls <code>async_read_some()</code> again after dealing with the data read. A relevant <code>shared_ptr&lt;tcp::socket&gt;</code> is passed along the loop. The loop ends when <code>on_data_read()</code> is called with a non-success <code>error_code</code> such as <code>asio::error::eof</code>, in which case <code>async_read_some()</code> is not called.</p>\n\n<p>There may also be asynchronous writes on the socket, which is done by repeated calls to <code>async_write_some()</code> until all data is written. That is, the handler <code>on_data_written()</code> for <code>async_write_some()</code> calls <code>async_write_some()</code> again if the data is only partially written. The relevant <code>shared_ptr&lt;tcp::socket&gt;</code> is also passed along the call-chain.</p>\n\n<p>Now, I want to close the socket in a safe manner. Specifically, I want to force the asynchronous read to finish early with a non-success error code to ends the read loop. If there is no pending write call-chain, the only <code>shared_ptr&lt;tcp::socket&gt;</code> (the one passed along the read loop) gets destroyed with its managed <code>tcp::socket</code> closed and destroyed. If there is a pending write call-chain, it continues until all data is written. At the time the write call-chain goes to its end, the last <code>shared_ptr&lt;tcp::socket&gt;</code> (the one passed along the write call-chain) gets destroyed. This procedure is safe in the sense that the socket is closed after pending writes, if any.</p>\n\n<p>The problem is</p>\n\n<ul>\n<li>how can I force the asynchronous socket read to finish with a non-success error code?</li>\n</ul>\n\n<p>I've checked the <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/basic_stream_socket/linger.html\" rel=\"nofollow\">linger</a> option. But it won't work since I'm using chained-up <code>async_write_some()</code> instead of a single <code>async_write()</code>. So, the socket may be closed while <code>on_data_written()</code> is being called. <code>cancel()</code> and <code>close()</code> won't work either, since they interrupt not only the read loop but also the write call-chain. And although <code>shutdown()</code> can be applied to the read loop only, it prevents future <code>async_read_some()</code> calls only, and has no effect on what is already done. I've worked out a workaround solution. That is, call <code>cancel()</code>, but have <code>on_data_written()</code> ignore the the error code caused by <code>cancel()</code> and continue the write call-chain. I'm not satisfied with this solution (see the remarks section <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/basic_stream_socket/cancel/overload2.html\" rel=\"nofollow\">here</a>). I'm wondering if there is a more direct and elegant way to achieve what I want, or the whole design is just flawed?</p>\n"}, {"tags": ["c++", "class", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 1, "last_activity_date": 1443036131, "creation_date": 1443036131, "answer_id": 32747832, "question_id": 32747814, "link": "https://stackoverflow.com/questions/32747814/printing-a-2d-int-vector-from-an-object/32747832#32747832", "title": "Printing a 2D int vector from an object", "body": "<p>The <code>vect2d</code> member is a pointer to a vector of vectors of ints. You don't really need a pointer here, just use a vector of vectors of ints.</p>\n\n<p>Your usage of this pointer does not produce any immediate errors because the subscript operator <code>array[index]</code> can be used on pointers. If you are not sure that your code is correct, prefer to use the range-checked <code>.at(index)</code> method for <code>std::vector</code> instances. Using an explicit method would have pointed you to your error, since there is no <code>.at(index)</code> method for pointers.</p>\n\n<p>What the compiler currently sees when you call <code>this-&gt;vect2d[i].size()</code> is:</p>\n\n<ul>\n<li><code>this-&gt;vect2d</code> of type <code>vector&lt;vector&lt;int&gt;&gt;*</code>, a complicated way of spelling <code>vect2d</code>. Note that this is a pointer type.</li>\n<li><code>this-&gt;vect2d[i]</code> of type <code>vector&lt;vector&lt;int&gt;&gt;</code>, which is equivalent to <code>*(vect2d + i)</code>, but not to <code>(*vect2d)[i]</code> or <code>vect2d-&gt;at(i)</code>! Note that this is not a pointer type, but still two nested vectors.</li>\n<li>Therefore, the <code>.size()</code> is called on the vector that is <code>i</code> vector sizes away from your outer <code>*vect2d</code> container. Quite likely, this is invalid memory and could segfault.</li>\n</ul>\n\n<p>When you later do <code>vect2d[i][j]</code>, that is actually equivalent to <code>*(vect2d + i)[j]</code> which should behave the same as <code>(vect2d + i)-&gt;at(j)</code>. But it is not <code>vect2d-&gt;at(i).at(j)</code>! Notably, it is of type <code>vector&lt;int&gt;</code> rather than <code>int</code>. That is the cause of your error message: there's no available <code>operator&lt;&lt;</code> to print vectors, so the compiler produces that quite incomprehensible error.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1443036044, "question_id": 298061}, "owner": {"reputation": 37, "user_id": 3638890, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/611d1bc2f5a17dbb685be7f10113e9a5?s=128&d=identicon&r=PG&f=1", "display_name": "user3638890", "link": "https://stackoverflow.com/users/3638890/user3638890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 32747832, "answer_count": 1, "score": -1, "last_activity_date": 1443055572, "creation_date": 1443024587, "last_edit_date": 1443055572, "question_id": 32747814, "link": "https://stackoverflow.com/questions/32747814/printing-a-2d-int-vector-from-an-object", "title": "Printing a 2D int vector from an object", "body": "<p>So I'm pretty sure it's having issues because it's trying to print the pointer instead of the value, but I don't know how to fix it.  </p>\n\n<pre><code>class cName {\nprivate:\n    std::vector&lt; std::vector&lt;int&gt;&gt; *vect2d;\npublic:\n    // initializes vector that contains x number of vectors\n    // that each contain y number of ints\n    cName(int x,int y); \n    void printVector(int);\n}\n\nvoid cName::printVector(int x) {\n    for(int i=0; i&lt;x; i++) {\n        //have to get size because \n        // the number of ints in the vector will change\n        for(int j=0; j&lt; this-&gt;vect2d[i].size(); j++) \n            std::cout &lt;&lt; this-&gt;vect2d[i][j]&lt;&lt;\" \";\n        std::cout&lt;&lt;\"\\n\";\n    }\n}\n</code></pre>\n\n<p>I'm having issues printing a 2d vector I use in a class I'm making.  I get an error that says:</p>\n\n<pre><code>cannot bind 'std::ostream {aka std::basic_ostream&lt;char&gt;' \nlvalue to 'std::basic_ostream&lt;char&gt;&amp;&amp;'\n</code></pre>\n\n<h2>Question:</h2>\n\n<p>Could someone explain me why is throwing me that error and help me fix it?   </p>\n"}, {"tags": ["c++", "templates", "virtual", "c++98"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 3, "creation_date": 1443024947, "post_id": 32744494, "comment_id": 53329993, "body": "Since you&#39;re already using Boost, you should be able to use Boost&#39;s <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/range/doc/html/range/reference/ranges/any_range.html\" rel=\"nofollow noreferrer\"><code>any_range</code></a> or just its accompanying <code>any_iterator</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443025215, "post_id": 32744494, "comment_id": 53330160, "body": "As a general rule, do not mix compile-time polymorphism (templates) with run-time polymorphism (virtual calls). They do not play well together."}, {"owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1443026275, "post_id": 32744494, "comment_id": 53330787, "body": "@Angew : If I well understand this tool, I can use a <code>boost::range_detail::any_iterator&lt;Food,Something&gt;</code> instead of my template type <code>FoodListIterator</code> ? But I don&#39;t well understand what I have to use as second template type... :-/"}], "answers": [{"comments": [{"owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 0, "creation_date": 1443026837, "post_id": 32745002, "comment_id": 53331046, "body": "It&#39;s not really a solution because my algorithm use global information about all the elements in the range."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 0, "creation_date": 1443027243, "post_id": 32745002, "comment_id": 53331270, "body": "@Caduchon I... don&#39;t know what that means."}, {"owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 0, "creation_date": 1443027718, "post_id": 32745002, "comment_id": 53331559, "body": "It doesn&#39;t work if the dog counts the items he has to eat and add a comment if it&#39;s less than 5 ; or the cat check if it&#39;s ordered with a specific criteria before eating it. The virtual eat function needs all the elements to do the job."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 0, "creation_date": 1443030397, "post_id": 32745002, "comment_id": 53332972, "body": "@Caduchon Well then you really want <code>any_range</code>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1443030383, "last_edit_date": 1443030383, "creation_date": 1443026407, "answer_id": 32745002, "question_id": 32744494, "link": "https://stackoverflow.com/questions/32744494/virtual-template-design/32745002#32745002", "title": "Virtual template design", "body": "<p>You could reorganize your interface such that each <code>Animal</code> is fed one single <code>Food</code> virtually and a range of <code>Food</code>s non-virtually:</p>\n\n<pre><code>class Animal\n{\n  public:\n    virtual ~Animal() {}\n    virtual void eat(Food&amp; ) = 0; // or Food const&amp;\n\n    template &lt;typename Iterator&gt;\n    void eat(Iterator begin, Iterator end) {\n        for (; begin != end; ++begin) {\n            eat(*begin);\n        }\n    }\n};\n</code></pre>\n\n<hr />\n\n<p>Though if you really need the whole range, you could use something like <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/range/doc/html/range/reference/ranges/any_range.html\" rel=\"nofollow\"><code>boost::any_range</code></a>:</p>\n\n<pre><code>class Animal\n{\npublic:\n    using FoodRange = boost::any_range&lt;Food, boost::forward_traversal_tag,\n                                       Food&amp;, std::ptrdiff_t&gt;;\n\n    virtual ~Animal() {}\n    virtual void eat(FoodRange ) = 0;\n\n    template &lt;typename Iterator&gt;\n    void eat(Iterator begin, Iterator end) {\n        eat(FoodRange{begin, end});\n    }\n};    \n</code></pre>\n"}], "owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443030383, "creation_date": 1443024557, "question_id": 32744494, "link": "https://stackoverflow.com/questions/32744494/virtual-template-design", "title": "Virtual template design", "body": "<p>In order to work with a simplified example, let's consider some animals eating some items in a food list. The food list has a lot of different iterators for different situations.</p>\n\n<pre><code>class contains_fish\n{\n  public:\n    bool operator () (const Food&amp; food) const;\n};\nclass is_vegetarian\n{\n  public:\n    bool operator () (const Food&amp; food) const;\n};\nclass FoodList\n{\n  private:\n    std::vector&lt;Food&gt; foodItems;\n  public:\n    typedef std::vector&lt;Food&gt;::iterator iterator;\n    typedef std::vector&lt;Food&gt;::const_iterator const_iterator;\n    typedef std::vector&lt;Food&gt;::reverse_iterator reverse_iterator;\n    typedef std::vector&lt;Food&gt;::const_reverse_iterator const_reverse_iterator;\n    typedef boost::filter_iterator&lt;contains_fish,FoodList::iterator&gt; fish_iterator;\n    typedef boost::filter_iterator&lt;contains_fish,FoodList::const_iterator&gt; fish_const_iterator;\n    typedef boost::filter_iterator&lt;contains_fish,FoodList::reverse_iterator&gt; fish_reverse_iterator;\n    typedef boost::filter_iterator&lt;contains_fish,FoodList::const_reverse_iterator&gt; fish_const_reverse_iterator;\n    typedef boost::filter_iterator&lt;is_vegetarian,FoodList::iterator&gt; vegetarian_iterator;\n    typedef boost::filter_iterator&lt;is_vegetarian,FoodList::const_iterator&gt; vegetarian_const_iterator;\n    typedef boost::filter_iterator&lt;is_vegetarian,FoodList::reverse_iterator&gt; vegetarian_reverse_iterator;\n    typedef boost::filter_iterator&lt;is_vegetarian,FoodList::const_reverse_iterator&gt; vegetarian_const_reverse_iterator;\n    //...\n    //... with corresponding begin/end functions :\n    FoodList::iterator begin() { return this-&gt;foodItems.begin(); }\n    FoodList::const_iterator begin() const { return this-&gt;foodItems.begin(); }\n    //...\n    FoodList::vegetarian_const_reverse_iterator begin_vegetarian_const_reverse() const { return boost::make_filter_iterator&lt;is_vegetarian&gt;(this-&gt;foodItems.rbegin(), this-&gt;foodItems.rend()); }\n};\n</code></pre>\n\n<p>Now I want to give food (a virtual function) to each animal with iterators on the food list. Something like this code (not working due to virtual template function) :</p>\n\n<pre><code>class Animal\n{\n  public:\n    virtual ~Animal() {}\n    template &lt;typename FoodListIterator&gt;\n    virtual void eat(FoodListIterator begin, FoodListIterator end) = 0;\n};\n\nclass Dog : public Animal\n{\n  public:\n    virtual ~Dog() {}\n    template &lt;typename FoodListIterator&gt;\n    virtual void eat(FoodListIterator begin, FoodListIterator end)\n    {\n      if(begin == end)\n        std::cout &lt;&lt; \"Sad day ! Nothing for me...\" &lt;&lt; std::endl;\n      else\n      {\n        std::cout &lt;&lt; \"I'm a dog and I'm going to eat :\" &lt;&lt; std::endl;\n        for(FoodListIterator it = begin; it != end; ++it)\n          std::cout &lt;&lt; it-&gt;toString() &lt;&lt; std::endl;\n      }\n    }\n};\n\nvoid give_fish(std::vector&lt;Animal*&gt;&amp; animals, const FoodList&amp; food_list)\n{\n  for(unsigned long int i = 0; i &lt; animals.size(); ++i)\n    animals[i]-&gt;eat(food_list.fish_begin(), food_list.fish_end());\n}\n</code></pre>\n\n<p>I have too many different iterator to implement a virtual function for each signature. </p>\n\n<p><strong>How can I do that elegantly, without C++11 ?</strong> If it can help, I know the list of types eligible (the list of iterators described in FoodList).</p>\n"}, {"tags": ["c++", "qt", "qnetworkaccessmanager"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5368313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61c0d7a9947c7f4dd327c81f7d655c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsinghua Woo", "link": "https://stackoverflow.com/users/5368313/tsinghua-woo"}, "is_accepted": false, "score": 1, "last_activity_date": 1443075292, "last_edit_date": 1443075292, "creation_date": 1443074318, "answer_id": 32754352, "question_id": 32744425, "link": "https://stackoverflow.com/questions/32744425/qt5-get-mjpeg-stream-from-lan/32754352#32754352", "title": "Qt5 get mjpeg stream from LAN", "body": "<p>Finally, I use QTcpSocket solve the problem.</p>\n\n<pre><code>    #include \"mainwindow.h\"\n    #include \"ui_mainwindow.h\"\n\n    MainWindow::MainWindow(QWidget *parent) :\n        QMainWindow(parent),\n        ui(new Ui::MainWindow)\n    {\n        ui-&gt;setupUi(this);\n        tcpSocket = new QTcpSocket(this);\n        tcpSocket-&gt;connectToHost(\"192.168.1.1\",8080);\n        connect(tcpSocket,SIGNAL(readyRead()),this,SLOT(tcpDataReceive()));\n\n    }\n\n    MainWindow::~MainWindow()\n    {\n        delete ui;\n    }\n\n\n    void MainWindow::tcpDataReceive()\n    {\n        QByteArray data = QByteArray::fromHex(tcpSocket-&gt;readAll());\n        qDebug() &lt;&lt; data;\n    }\n\n    void MainWindow::on_pushButton_clicked()\n    {\n        tcpSocket-&gt;write(\"GET /?action=stream\\r\\n\\r\\n\");\n    }\n</code></pre>\n\n<p>I think the mjpeg stream can not trigger SIGNAL finished,because the mjpeg data allways transfer.So, I choice use SIGNAL readyRead(). :)</p>\n"}], "owner": {"reputation": 21, "user_id": 5368313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d61c0d7a9947c7f4dd327c81f7d655c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsinghua Woo", "link": "https://stackoverflow.com/users/5368313/tsinghua-woo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1500, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443075292, "creation_date": 1443024349, "last_edit_date": 1443028756, "question_id": 32744425, "link": "https://stackoverflow.com/questions/32744425/qt5-get-mjpeg-stream-from-lan", "title": "Qt5 get mjpeg stream from LAN", "body": "<p>I want to use QNetworkAccessManager get mjpeg stream from specify URL but I am failed.</p>\n\n<p>This is my code :</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    webCam = new QNetworkAccessManager(this);\n    connect(webCam,SIGNAL(finished(QNetworkReply*)),this,SLOT(replySteamFinish(QNetworkReply*)));\n    QString cam = \"http://192.168.1.1:8080/?action=stream\";\n    QNetworkRequest req;\n    req.setUrl(cam);\n    webCam-&gt;get(req);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::replySteamFinish(QNetworkReply *reply)\n{\n    if(reply-&gt;error() == QNetworkReply::NoError){\n        QByteArray data = reply-&gt;readAll();\n        qDebug() &lt;&lt; data;\n    /*I just test whether receive the mjpeg stream data.*/\n    }\n    else{\n        qDebug() &lt;&lt; reply-&gt;error();\n    }\n}\n</code></pre>\n\n<p>I am trying to receive mjpeg stream data,but qDebug() did't work,nothing output.\nWhen I put \"<a href=\"http://192.168.1.1:8080/?action=stream\" rel=\"nofollow\">http://192.168.1.1:8080/?action=stream</a>\" in chrome, the web display the mjpeg stream fluent.</p>\n\n<p>How should i fix it? :)</p>\n"}, {"tags": ["c++", "biginteger", "arbitrary-precision", "multiprecision"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1443024532, "post_id": 32744423, "comment_id": 53329726, "body": "There are MP libraries, why not use one of them instead of rolling your own?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443024603, "post_id": 32744423, "comment_id": 53329776, "body": "@Barmar: Because you can&#39;t ask about libraries on SO?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1443024812, "post_id": 32744423, "comment_id": 53329904, "body": "@ScottHunter You can&#39;t ask for recommendations but if the OP picks a library and then has question about how to use it those are OT as long as the are not too broad or opinion based."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1443025172, "post_id": 32744423, "comment_id": 53330130, "body": "Why do you think &quot;approximately the same size&quot; is a useful basis for finding a better algorithm?  It means the result will be small.  But it also means the ordinary algorithm has less work to do."}], "answers": [{"comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1443029048, "post_id": 32745602, "comment_id": 53332237, "body": "&quot;probably&quot; sufficient is not actually sufficient.  Having more &quot;words&quot; both unnecessarily adds cost and fails to guarantee correctness.  So 2/1 is not enough, while 3/2 is both too many and not enough."}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 0, "creation_date": 1443029414, "post_id": 32745602, "comment_id": 53332436, "body": "what kind of &quot;correctness&quot; are you talking about here when (we assume) the division is integer? it will necessarily lose precision. So it is &quot;probably&quot; sufficient in this case."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1443029496, "post_id": 32745602, "comment_id": 53332478, "body": "@JSF: your argument would be much more effective if you pointed to a concrete example of failure."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1443033080, "post_id": 32745602, "comment_id": 53334589, "body": "@Jerry Coffin: Consider 222222/111111 vs 222221/111111 or 222222/111112. To get the correctly rounded result you potentially need to evaluate down to the least significant digit, though you can stop early as long as the error bounds don&#39;t straddle an integer quotient."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1443033579, "post_id": 32745602, "comment_id": 53334842, "body": "@doynax: All your examples have the same number of digits in the numerator and the denominator, which (by the algorithm I suggested) would always evaluate to the least significant digit. to fit with this, we&#39;d need something like <code>222222&#47;11112</code> producing the wrong answer. To decide that, I believe we&#39;d need to know whether he wants the result truncated or rounded."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1443035235, "post_id": 32745602, "comment_id": 53335796, "body": "@Jerry Coffin: Sorry, I was attempting to simplify the example to clarify the issue. Unfortunately whatever round scheme chosen merely shifts the point which the partially evaluated result can&#39;t be allowed to straddle. Consider 1222220/222222 vs 1222221/222222."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1443038496, "post_id": 32745602, "comment_id": 53337609, "body": "@doynax: Yeah, sounds about right. In a lot of cases, you can come up with the right answer pretty quickly by computing both the largest possible value (numerator rounded up, denominator rounded down) and smallest possible value (vice versa). If they agree, you clearly have the right answer. Then carry the computation out to full precision when/if they disagree."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1443029015, "last_edit_date": 1443029015, "creation_date": 1443028474, "answer_id": 32745602, "question_id": 32744423, "link": "https://stackoverflow.com/questions/32744423/big-integer-division-with-operands-aproximately-of-the-same-size/32745602#32745602", "title": "Big integer division with operands aproximately of the same size", "body": "<p>Assuming you want an integer result, you should be able to carry this out fairly fast.</p>\n\n<p>It's probably easiest to think of this in decimal terms with slightly smaller numbers to start with.</p>\n\n<p>Let's consider somewhat smaller numbers, like: 123456789/54321876. One of these has one more digit than the other, so the largest possible result is somewhere around 10.</p>\n\n<p>If we divide both sides so we have (say) three digits left in the larger number and two digits in the smaller one, we get <code>123/54</code>, which yields the same integer result as if we'd done the work to full precision throughout.</p>\n\n<p>In your case, you can do pretty much the same except instead of decimal digits, you'll keep basically three words of precision in your larger item and two words in the smaller (and in actuality, even that's being conservative--2 and 1 words respectively is <em>probably</em> sufficient, but I'm too lazy to prove that right now, and if you do that, you may need to be more careful with rounding as well).</p>\n\n<p>So yes, your idea that this is kind of a special case where you can save work based on the numbers being nearly the same size was correct.</p>\n"}, {"comments": [{"owner": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443194068, "post_id": 32750662, "comment_id": 53409434, "body": "Thank you very much. I implemented this on my code and its working when both operands have the same size. Can this also be adapted to the case where the numerator has 1 more unsigned int than the denominator, but its most significant bit is smaller than the most significant bit or the denominator?"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443199479, "post_id": 32750662, "comment_id": 53412640, "body": "@fc67: It depends, how wide are your integers and is the maximum integer size supported by your compiler? A wider numerator may yield quotients up to two integers in width, requiring 4-integer wide intermediate calculations. In any event I did take a stab at handling the leading-zero case where the quotient is assumed to still fit in a single word."}, {"owner": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443535641, "post_id": 32750662, "comment_id": 53526225, "body": "Thank you again. Regarding our question, the difference between the numerator and the denominator is always such that the quotient fits in an unsigned int. By the way, should this algorithm always compute the exact value of the division or only an approximation? There are cases where I get the value 1 or 2 units above or below the correct result."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443603514, "post_id": 32750662, "comment_id": 53556517, "body": "@fc67: The algorithm is exact, yes, though as mentioned my untested implementation of it is very likely buggy. Can you post the failing cases? The more general point is that the classic long-division algorithm reduces to something rather efficient for this particular special case."}, {"owner": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443622354, "post_id": 32750662, "comment_id": 53568649, "body": "For example in this case: 378273841656300866021230933702218862041759914234946935598451&zwnj;&#8203;3962389661 / 920336366175677376777359893372676601458067846583151108088345 the result is 4110169451, which is the rounded up value of the exact result (I need the truncated values as in a normal integer division). And on this case 700270667927246877705408203999411862919119111886180393420404&zwnj;&#8203;1953 / 14170981619797660398828784523106536754838827785935839608, I get 494158191 which is 2 units below the correct truncated result."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443628621, "post_id": 32750662, "comment_id": 53572976, "body": "@fc67: It seems I had forgotten to truncate the denominator word to 32-bits in the second stage, I also dropped the loop there since it gains us nothing in this specialized case. Beware that it&#39;s still not properly tested though. Oh, and C compilers are generally abysmal at taking advantage of multi-precision arithmetic instructions (carry flags, irregular precision instructions, modular shifts, etc) and so getting decent constant factors will likely requires careful hand-holding and intrinsics or assembly code if you are targeting a 32-bit architecture."}, {"owner": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443707579, "post_id": 32750662, "comment_id": 53608310, "body": "The algorithm is still rounding up on the mentioned case (didn&#39;t test for others yet). Unfortunately I don&#39;t have access to Knuth&#39;s book. Could you be so kind to explain me how the algorithm works exactly, so it would make it easier for me to find such kind of bugs? Additionally, I uploaded my code to pastebin <a href=\"http://pastebin.com/kHi2LkqA\" rel=\"nofollow noreferrer\">link</a>. My numbers are represented in a least significant first fashion, which means that the first value of the array is the least significant. I would appreciate it if you could take a look at it. Thanks."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "edited": false, "score": 0, "creation_date": 1443714217, "post_id": 32750662, "comment_id": 53612937, "body": "@fc67: The <code>norm_den</code> variable needs to be truncated by using the narrow type. Have a go at using the original code as-is, transcribing the numbers into a correctly big-endian buffers as a starting point. As for Knuth I&#39;d suggest checking whether your local library can get hold of it for you, I find they are usually very helpful in these matters. Beyond that I&#39;d also suggest taking a look at the known-good Hacker&#39;s Delight implementation and simplifying it for this case to see whether you end up with the same method."}], "tags": [], "owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "is_accepted": true, "score": 1, "last_activity_date": 1443627998, "last_edit_date": 1443627998, "creation_date": 1443048068, "answer_id": 32750662, "question_id": 32744423, "link": "https://stackoverflow.com/questions/32744423/big-integer-division-with-operands-aproximately-of-the-same-size/32750662#32750662", "title": "Big integer division with operands aproximately of the same size", "body": "<p>I believe a modified version of Knuth's algorithm D (The Art of Computer Programming Vol.2, Section 4.3.1) ought to do the trick in constant average time for random input, with a linear time worst-case. Significant simplifications stem from only requiring the first quotient word produced by the initial iteration.</p>\n\n<p>Below is my attempt at unashamedly adapting the generic <a href=\"http://www.hackersdelight.org/hdcodetxt/divmnu.c.txt\" rel=\"nofollow\">implementation from Hacker's Delight</a>. The implementation assumes 32-bit words and 64-bit intermediates/division but may be naturally extended where wider arithmetic is available.</p>\n\n<p>I do fear that the function is virtually untested however so please treat this more as the germ of an idea as opposed to a fully-fledged implementation. To be honest I don't even remember the subtleties of <em>why</em> the algorithm works.</p>\n\n<pre><code>// A helper function for finding the position of the most significant set bit.\n// Please plug in your intrinsic of choice here\nstatic unsigned int find_first_bit(uint32_t value) {\n#   ifdef _MSC_VER\n    unsigned long index;\n    (void) _BitScanReverse(&amp;index, value);\n    return index + 1;\n#   else\n    unsigned int count = 0;\n    for(count = 0; value; ++count)\n        value &gt;&gt;= 1;\n    return count;\n#   endif\n}\n\n// Multi-word division in 32-bit big-endian segments, returning the most significant\n// word of the quotient.\nuint32_t divide(const uint32_t *num, const uint32_t *den, size_t len) {\n    // Skip past leading zero denominator digits. The quotient must fit in a single\n    // 32-bit word and so only the preceeding numerator digit needs be examined\n    uint32_t norm_den;\n    uint64_t norm_num = 0;\n    size_t top = 0;\n    while(norm_den = den[top], !norm_den)\n        norm_num = num[top++];\n    // Please pad the input to insure at least three denominator words counting from\n    // the first non-zero digit\n    assert(len &gt;= top + 3);\n    // Divide the first two digits of the numerator by the leading digit of the\n    // denominator as an initial quotient digit guess, yielding an upper bound\n    // for the quotient at most two steps above the true value.\n    // Simultaneously normalize the denominator with the MSB in the 31st bit.\n    unsigned int norm = find_first_bit(norm_den);\n    norm_num = norm_num &lt;&lt; (64 - norm);\n    norm_num |= ((uint64_t) num[top + 0] &lt;&lt; 32 | num[top + 1]) &gt;&gt; norm;\n    norm_den = ((uint64_t) norm_den &lt;&lt; 32 | den[top + 1]) &gt;&gt; norm;\n    // We are using a straight 64/64 division where 64/32=32 would suffice. The latter\n    // is available on e.g. x86-32 but difficult to generate short of assembly code.\n    uint32_t quot = (uint32_t) (norm_num / norm_den);\n    // Substitute norm_num - quot * norm_den if your optimizer is too thick-headed to\n    // efficiently extract the remainder\n    uint32_t rem = norm_num % norm_den;\n    // Test the next word of the input, reducing the upper bound to within one step\n    // of the true quotient. See Knuth for proofs of this reduction and the bounds\n    // of the first guess\n    norm_num = ((uint64_t) num[top + 1] &lt;&lt; 32 | num[top + 2]) &gt;&gt; norm;\n    norm_num = (uint64_t) rem &lt;&lt; 32 | (uint32_t) norm_num;\n    norm_den = ((uint64_t) den[top + 1] &lt;&lt; 32 | den[top + 2]) &gt;&gt; norm;\n    if((uint64_t) quot * norm_den &gt; norm_num) {\n        --quot;\n        // There is no \"add-back\" step try to avoid and so there is little point\n        // in looping to refine the guess further since the bound is sufficiently\n        // tight already\n    }\n    // Compare quotient guess multiplied by the denominator to the numerator\n    // across whole numbers to account for the final quotient step.\n    // There is no need to bother with normalization here. Furthermore we can\n    // compare from the most to the least significant and cut off early when the\n    // intermediate result becomes large, yielding a constant average running\n    // time for random input\n    uint64_t accum = 0;\n    do {\n        uint64_t prod = (uint64_t) quot * *den++;\n        accum = accum &lt;&lt; 32 | *num++;\n        // A negative partial result can never recover, so pick the lower\n        // quotient. A separate test is required to avoid 65-bit arithmetic\n        if(accum &lt; prod)\n            return --quot;\n        accum -= prod;\n        // Similarly a partial result which spills into the upper 32-bits can't\n        // recover either, so go with the upper quotient\n        if((uint64_t) accum &gt;= 0x100000000)\n            return quot;\n    } while(--len);\n    return quot;\n}\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 3523344, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/54f71f8e6bae59c2b396b017be3a5df8?s=128&d=identicon&r=PG&f=1", "display_name": "fc67", "link": "https://stackoverflow.com/users/3523344/fc67"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 32750662, "answer_count": 2, "score": 0, "last_activity_date": 1443627998, "creation_date": 1443024346, "question_id": 32744423, "link": "https://stackoverflow.com/questions/32744423/big-integer-division-with-operands-aproximately-of-the-same-size", "title": "Big integer division with operands aproximately of the same size", "body": "<p>I'm trying to implement a function that computes the division between two numbers approximately of the same size. I use an array of <code>unsigned int</code>'s to store the values of each number (see below the class structure). I want to implement an efficient division function for the case when the difference between the number of <code>unsigned int</code>'s of both is not bigger than 1. I've looked into the long division algorithm (as described in wikipedia), but it's too slow. Is there any efficient algorithm that deals with this special case? At the moment, I'm dealing with numbers with up to 100 digits.</p>\n\n<pre><code>class BigInt {\npublic:\n    short sign; //sign of the number\n    unsigned int size; //number of unsigned int's needed to store the number\n    unsigned int* values; //values of the number\n\n    ...\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "exception", "exception-handling", "automation"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1443024640, "post_id": 32744345, "comment_id": 53329792, "body": "You are wrong about the purpose of exceptions if you think that you should put a <code>try</code>...<code>catch</code> around every single call. Exceptions are not used like return values."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443024738, "post_id": 32744345, "comment_id": 53329857, "body": "Regretfully, C++ exception specification is not utterly useful."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443025478, "post_id": 32744345, "comment_id": 53330294, "body": "@SergeyA: In this case, it is. All functions not declared <code>throw()</code> or <code>noexcept</code> may throw exceptions."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443028425, "post_id": 32744345, "comment_id": 53331937, "body": "Exception specification is useful in Java. There, it is checked during compilation and violation of the spec is an error. Basically, every function has exception spec (emty by default) and no function can throw an exception unless it is listed in it&#39;s spec (nothrow is by default, than). It would check for direct throw(), as well is check exception specification of all functions you are calling. This is what I call useful specification."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443034792, "post_id": 32744345, "comment_id": 53335531, "body": "@SergeyA: Not true. In Java, there are checked and unchecked exceptions. Unchecked exceptions are by far the more common and more important ones, <code>NullPointerException</code> being the most prominent example. You don&#39;t specify <code>throws NullPointerException</code> (or <code>IllegalArgumentException</code> etc) for Java methods for the same reasons that C++98 exception specifications have proven useless, except of <code>throw()</code> or its <code>noexcept</code> successor - which Java <i>cannot</i> express..."}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1443026544, "post_id": 32744852, "comment_id": 53330903, "body": "&quot;Potentially throwing&quot; is all you are ever really interested in. That&#39;s the whole purpose of <code>noexcept</code> and the reason why exception specifications have been deprecated in C++11."}, {"owner": {"reputation": 727, "user_id": 1350936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ff7821dfbdb6484287993aa9f8e35fa9?s=128&d=identicon&r=PG", "display_name": "anxieux", "link": "https://stackoverflow.com/users/1350936/anxieux"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1443027034, "post_id": 32744852, "comment_id": 53331142, "body": "@ChristianHackl When I&#39;m surprised why there is no clang-based tool for that yet..."}], "tags": [], "owner": {"reputation": 727, "user_id": 1350936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ff7821dfbdb6484287993aa9f8e35fa9?s=128&d=identicon&r=PG", "display_name": "anxieux", "link": "https://stackoverflow.com/users/1350936/anxieux"}, "is_accepted": true, "score": 1, "last_activity_date": 1443025824, "creation_date": 1443025824, "answer_id": 32744852, "question_id": 32744345, "link": "https://stackoverflow.com/questions/32744345/tool-to-check-whether-all-c-functions-throwing-exception-in-one-program/32744852#32744852", "title": "Tool to check whether all C++ functions throwing exception in one program", "body": "<p>It is impossible to write such a tool which will work with 100% accuracy, because any of your callback / virtual function call might be resolved at run-time (i.e. program decides which function to call from the potentially infinite list of functions based on it's input) and it might either throw exception or not. It is possible to treat all such calls as \"potentially throwing\" but in this case production use of such a tool will be quite questionable...</p>\n"}], "owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1443026332, "accepted_answer_id": 32744852, "answer_count": 1, "score": 0, "last_activity_date": 1443036811, "creation_date": 1443024135, "last_edit_date": 1443036811, "question_id": 32744345, "link": "https://stackoverflow.com/questions/32744345/tool-to-check-whether-all-c-functions-throwing-exception-in-one-program", "closed_reason": "Not suitable for this site", "title": "Tool to check whether all C++ functions throwing exception in one program", "body": "<p>I have a large C++ program. I found that some functions may throw exceptions but others not. If exception happened, the program would crash. So, try-catch is helpful. But there are so many functions. Is there a tool which automatically list all the functions which may throw exception? If so, lots of time will be saved.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>How can I move this question to Programmers? It is off-topic here.</p>\n"}, {"tags": ["c++", "struct", "config", "members"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1443024106, "post_id": 32744273, "comment_id": 53329441, "body": "What does <code>config.pString</code> return? I bet it is a temporary <code>std::string</code>."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1443024593, "post_id": 32744273, "comment_id": 53329764, "body": "First, you need to correct your spelling of &quot;ApiLongstocking&quot;."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1443024964, "post_id": 32744273, "comment_id": 53330009, "body": "Why use <code>#define</code>? What does it add? Just makes code less readable"}, {"owner": {"reputation": 83, "user_id": 4463362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2x84z.jpg?s=128&g=1", "display_name": "David A.", "link": "https://stackoverflow.com/users/4463362/david-a"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1443025868, "post_id": 32744273, "comment_id": 53330544, "body": "@EdHeal I cant really modify it, this is a legacy code ive been given to work with. @DarkFalcon config.pString is defined in config.cpp as: <code>string Config::pString(string name) {..}</code> @JerryCoffin lol i cant find the typo.."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4463362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2x84z.jpg?s=128&g=1", "display_name": "David A.", "link": "https://stackoverflow.com/users/4463362/david-a"}, "edited": false, "score": 0, "creation_date": 1443027199, "post_id": 32744566, "comment_id": 53331240, "body": "Yes, well I&#39;ve assigned values to other objects in other methods like I&#39;m doing in this method without any problems, the problem is when i try to assign values to members of a struct**"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 83, "user_id": 4463362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2x84z.jpg?s=128&g=1", "display_name": "David A.", "link": "https://stackoverflow.com/users/4463362/david-a"}, "edited": false, "score": 0, "creation_date": 1443028797, "post_id": 32744566, "comment_id": 53332116, "body": "@DavidA. - No, if A B&#39;s description is correct, the problem is that the code <i>seems to work</i> sometimes. The value of a <code>c_str()</code> is only valid as long as the <code>std::string</code> that supplied it is unchanged. If the string is modified or destroyed, you end up with a dangling pointer."}, {"owner": {"reputation": 83, "user_id": 4463362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2x84z.jpg?s=128&g=1", "display_name": "David A.", "link": "https://stackoverflow.com/users/4463362/david-a"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1443038094, "post_id": 32744566, "comment_id": 53337396, "body": "@BoPersson I believe I understand what your saying, it&#39;s just that what throws me off is that this only happens with members of data structs. Any suggestions on how to work around this? Maybe assign values to other variables within the scope first and then assign them to the struct members?"}], "tags": [], "owner": {"reputation": 3784, "user_id": 1298874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/102a875e970f7e86f783f682f78e3b65?s=128&d=identicon&r=PG", "display_name": "A B", "link": "https://stackoverflow.com/users/1298874/a-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1443024799, "creation_date": 1443024799, "answer_id": 32744566, "question_id": 32744273, "link": "https://stackoverflow.com/questions/32744273/c-set-values-for-members-of-a-struct/32744566#32744566", "title": "C++ Set values for members of a struct**", "body": "<p>The <code>config</code> object is local to the <code>doSomething</code> function.</p>\n\n<p>The <code>setupOrder</code> pointer points to what appears to be a\nmember of the <code>config</code> object.</p>\n\n<p>The <code>config</code> object will go out of scope at the end of the <code>doSomething</code> function and can be de-allocated at that point.<br>\nAt that point, what the <code>setupOrder</code> pointer \"points\" to \nmight no longer be valid.</p>\n\n<p>It is a good idea to make sure that after the call to  <code>doSomething</code> ends,\nthat all the pointers still point to objects that still exist.</p>\n\n<p>You may have already done this, but I just wanted to check.</p>\n"}], "owner": {"reputation": 83, "user_id": 4463362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2x84z.jpg?s=128&g=1", "display_name": "David A.", "link": "https://stackoverflow.com/users/4463362/david-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1425, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443024799, "creation_date": 1443023923, "last_edit_date": 1495541712, "question_id": 32744273, "link": "https://stackoverflow.com/questions/32744273/c-set-values-for-members-of-a-struct", "title": "C++ Set values for members of a struct**", "body": "<p>I've defined in my <code>foo.h</code> the following variables</p>\n\n<pre><code>#define APILONG          long\n#define APIDOUBLE        double                   \n#define APISTRING        const char*\n</code></pre>\n\n<p>And also the following struct</p>\n\n<pre><code>struct SetupData\n{\n  APISTRING customerName;\n  APIDOUBLE quantity;\n  APILONG startDate;\n\n};\n</code></pre>\n\n<p>Now, in my <code>foo.cpp</code> i have the following method where I need to assign values to the members of the struct that are being pulled from a <code>.config</code> file.</p>\n\n<pre><code>APILONG doSomething(APISTRING* setupOrder, APILONG* setupActive, struct SetupData** setupData)\n{\n//load config file\nConfig config(\"rommel.config\");\n\n//assign a string value to APISTRING* (No issue here.)\n*setupOrder= config.pString(\"setupOrder\").c_str();\n\n//assign a value (No issue here, atleast not that I know of..)\n*setupActive = config.pDouble(\"setupActive\");\n\n//assign values to members of struct**\n(*setupData)-&gt;customerName = config.pString(\"setupDataCustomerName\").c_str();\n(*setupData)-&gt;quantity = config.pDouble(\"setupDataQuantity\");\n(*setupData)-&gt;startDate = config.pDouble(\"setupDataStartDate\");\n\n//do other stuff..\n}\n</code></pre>\n\n<p>When I compile and rebuild it does not give me any error messages. But when I try to run the actual program it crashes. (Am using Dev-C++, Visual Studio was causing problems..)\n I do however get a chance to see the values assigned before it crashes and it looks like the values are not being assigned (Null or strange characters).</p>\n\n<p>I've tried variations of the \n<code>(*setupData)-&gt;startDate ..</code> \nline and also I have tried declaring the struct in the method like the following, but to no avail.</p>\n\n<pre><code>    struct SetupData stpData;\n    *setupData = &amp;stpData;\n</code></pre>\n\n<p>Any help would be greatly appreciated. I previously posted another question which is related to this, it contains some pretty useful information aswell. I'll leave the link in case it helps. <a href=\"https://stackoverflow.com/questions/31775571/c-set-value-for-a-char\">\"C++ Set value for a char**\"</a></p>\n"}, {"tags": ["c++", "visual-studio", "memory-management", "matrix"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1443023725, "post_id": 32744196, "comment_id": 53329184, "body": "What is <code>int **&amp;m</code> ??"}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1443023855, "post_id": 32744196, "comment_id": 53329272, "body": "that&#39;s the integers matrix and I put the ampersand there in order to use the matrix in other funcions"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1443023899, "post_id": 32744196, "comment_id": 53329300, "body": "@EugeneSh.: Looks like c++ damage. Probably unsalvageable."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1443024006, "post_id": 32744196, "comment_id": 53329376, "body": "Is <code>int &amp;i</code> allowed as argument in c ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1443024058, "post_id": 32744196, "comment_id": 53329406, "body": "@AlexPop This syntax is illegal and meaningless in C. If you are thinking C++, it would be a different story."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1443024078, "post_id": 32744196, "comment_id": 53329422, "body": "I may have used some c++ features"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1443024108, "post_id": 32744196, "comment_id": 53329442, "body": "@AlexPop Without knowing that it will work in C or not ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1443024134, "post_id": 32744196, "comment_id": 53329462, "body": "@AlexPop, the <code>&amp;</code> syntax Eugene asked about resembles use of a C++ &quot;feature&quot; that goes by the name of &quot;references&quot;.  C does not have such a feature, hence your code is not valid C.  Possibly you could fix that particular problem by changing <code>int **&amp;m</code> to <code>int ***m</code> in the function declaration, and by changing <code>m</code> to <code>*m</code> everywhere in that function&#39;s body."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1443024144, "post_id": 32744196, "comment_id": 53329471, "body": "Using features you don&#39;t understand, and not knowing why you&#39;ve used them?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1443024177, "post_id": 32744196, "comment_id": 53329487, "body": "@AlexPop, C++ and C are different languages.  If you &quot;use C++ features&quot; then you are writing C++, not C."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1443024319, "post_id": 32744196, "comment_id": 53329572, "body": "sorry for the missunderstanding, it is c++"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1443028384, "post_id": 32745496, "comment_id": 53331917, "body": "I acctually found my mistake. I answered my question... sorry for wasting your time..."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 0, "last_activity_date": 1443028083, "creation_date": 1443028083, "answer_id": 32745496, "question_id": 32744196, "link": "https://stackoverflow.com/questions/32744196/acces-violation-when-printing-matrix-in-c-c/32745496#32745496", "title": "Acces violation when printing matrix in C/C++", "body": "<p>This isn't a real answer, but doesn't fit as a comment.</p>\n\n<p>Sorry, but almost <em>all</em> your uses of <code>malloc</code> are incorrect, both the way you use them and <em>that</em> you use it in the first place.</p>\n\n<p>I would try starting with</p>\n\n<pre><code>int main()\n{\n    int   mat[100][50];\n    int   i;\n    int   v[20];\n</code></pre>\n\n<p>and then try to write the code without the <code>malloc</code>s. You have all the <code>int</code>s you need right here, and don't have to allocate them separately.</p>\n\n<p>Another thing is that <code>feof(f)</code> doesn't tell if the next read will succeed, but tells us if the previous read failed. Not very useful in a <code>while</code>-condition, as it triggers one round too late. Much better to check what <code>fgets</code> returns.</p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "is_accepted": false, "score": 0, "last_activity_date": 1443028212, "creation_date": 1443028212, "answer_id": 32745532, "question_id": 32744196, "link": "https://stackoverflow.com/questions/32744196/acces-violation-when-printing-matrix-in-c-c/32745532#32745532", "title": "Acces violation when printing matrix in C/C++", "body": "<p>I found myself an answer, I put it here</p>\n\n<pre><code>int **mat(int **&amp;m, int &amp;i, int*&amp;v) {\nFILE *f = fopen(\"in.txt\", \"r\");\ni = 0;\nint j;\n\nchar buffer[100];\n\nwhile (!feof(f)) {\n    m = (int**) realloc(m, (i+1) * sizeof (int*)); // Changed aloocation type and saw that i wrote sizeod(int**) instead of int*\n\n    j = 0;\n\n    m[i] = NULL;\n\n    fgets(buffer, 100, f);\n\n    char*tok;\n    tok = strtok(buffer, \" \\n\");\n\n    while (tok) {\n        m[i] = (int*) realoc(m[i], (j+1) * sizeof (int)); // Changed aloocation type and saw that i wrote sizeod(int**) instead of int*\n        m[i][j] = (int) malloc(sizeof (int));\n\n        m[i][j] = atoi(tok);\n        j++;\n        tok = strtok(NULL, \" \\n\");\n    }\n    v[i] = (int) malloc(sizeof (int));\n    v[i] = j;\n    i++;\n}\nreturn m;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1443028212, "creation_date": 1443023673, "last_edit_date": 1443024911, "question_id": 32744196, "link": "https://stackoverflow.com/questions/32744196/acces-violation-when-printing-matrix-in-c-c", "title": "Acces violation when printing matrix in C/C++", "body": "<p>So I wrote this code in order to read a matrix from a file using malloc function. It seems to save the matrix in the memory but when I try to print it, this pop-up with Access violation reading a location appears. I'm new to programming and IDK how to fix this (I left a comment where the program exits)...</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint **mat(int **&amp;m, int &amp;i, int*&amp;v) {\n    FILE *f = fopen(\"in.txt\", \"r\");\n    i = 0;\n    int j;\n\n    char buffer[100];\n\n    while (!feof(f)) {\n        m = (int**) malloc(100 * sizeof (int**));\n\n        j = 0;\n\n        m[i] = NULL;\n\n        fgets(buffer, 100, f);\n\n        char*tok;\n        tok = strtok(buffer, \" \\n\");\n\n        while (tok) {\n            m[i] = (int*) malloc(50 * sizeof (int*));\n            m[i][j] = (int) malloc(sizeof (int));\n\n            m[i][j] = atoi(tok);\n            j++;\n            tok = strtok(NULL, \" \\n\");\n        }\n        v[i] = (int) malloc(sizeof (int));\n        v[i] = j;\n        i++;\n    }\n    return m;\n}\n\nvoid print(int**&amp;m, int &amp;i, int*&amp;v) {\n    for (int k = 0; k &lt; i; k++) {\n        for (int l = 0; l &lt; v[k]; l++) {\n            printf(\"%d \", m[k][l]); // The issue appears here\n        }\n        printf(\"\\n\");\n    }\n}\n\nvoid main() {\n    int**m, i, *v;\n    v = (int*) malloc(20 * sizeof (int));\n    //v = NULL;\n    m = mat(m, i, v);\n\n    print(m, i, v);\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "readability"], "comments": [{"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1443023526, "post_id": 32744112, "comment_id": 53329020, "body": "As a rule of thumb, do not declare variables in all capital letter style. It&#39;s usually intended for macros"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 1, "creation_date": 1443023540, "post_id": 32744112, "comment_id": 53329033, "body": "this is why it is important to have a good IDE. with just a hover you can see the function signature"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1443023565, "post_id": 32744112, "comment_id": 53329053, "body": "the signature of your function is exactly what your IDE is supposed to be telling you - don&#39;t use plain text editors"}, {"owner": {"reputation": 622, "user_id": 4694036, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/XwC8h.jpg?s=128&g=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/4694036/eddie"}, "edited": false, "score": 0, "creation_date": 1443023599, "post_id": 32744112, "comment_id": 53329085, "body": "I use vim with YouCompleteMe. When I do coding, it works pretty good. But when I am reading, oh man.. lol"}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1443023686, "post_id": 32744112, "comment_id": 53329151, "body": "You could consider declaring an <code>enum</code> and using it as a bitmask : <code>enum animaltype { HAS_FOURLEGS = 1, HAS_HEAD = 2, HAS_BODY = 4}</code>, and then just call <code>animal(HAS_FOURLEGS | HAS_BODY)</code>. This feels much more C than C++, though."}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 1, "creation_date": 1443023987, "post_id": 32744112, "comment_id": 53329359, "body": "Why is there no animal class ? Of course the problem would then maybe move to the constructor of that class. But the enum solution is a perfect fit for that."}], "answers": [{"comments": [{"owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443026263, "post_id": 32744212, "comment_id": 53330779, "body": "Then use type-safe, introspection-aware flags like <code>QFlags</code> from the Qt library. Or overload some operator such as <code>operator&lt;&lt;</code> to create a class factory."}, {"owner": {"reputation": 9765, "user_id": 923794, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/39295680c5745451291043469e408c18?s=128&d=identicon&r=PG", "display_name": "cfi", "link": "https://stackoverflow.com/users/923794/cfi"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1443038729, "post_id": 32744212, "comment_id": 53337737, "body": "@SergeyA: In the sense that they are soo fast, short time to code, less lines of code while keeping code readable, keep interfaces stable over time? ;-p"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9765, "user_id": 923794, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/39295680c5745451291043469e408c18?s=128&d=identicon&r=PG", "display_name": "cfi", "link": "https://stackoverflow.com/users/923794/cfi"}, "edited": false, "score": 0, "creation_date": 1443039251, "post_id": 32744212, "comment_id": 53338006, "body": "@cfi, not really. In the sense that they are polluting namespaces (HAS_LEGS  only has meaning for animal(), but will be visible for everybody else (and yes, I know about class enums), they are painful to maintain, they are cryptic when looking at call stack... Enough?"}], "tags": [], "owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "is_accepted": false, "score": 10, "last_activity_date": 1443023716, "creation_date": 1443023716, "answer_id": 32744212, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/32744212#32744212", "title": "Better way to pass bool variable as parameter?", "body": "<p>Use flags:</p>\n\n<pre><code>  enum {\n    HAS_LEGS = 0x01,\n    HAS_HEAD = 0x02,\n    HAS_BODY = 0x04,\n  };\n\n  void animal(int properties);\n\n  animal(HAS_LEGS | HAS_HEAD);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 14, "last_activity_date": 1593184925, "last_edit_date": 1593184925, "creation_date": 1443023736, "answer_id": 32744219, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/32744219#32744219", "title": "Better way to pass bool variable as parameter?", "body": "<p>When I run into issues related to this I sometimes create an <code>enum</code> even when there are only 2 expected choices:</p>\n<p>For example, instead of the following function declaration:</p>\n<pre><code>bool search(..., bool recursive);\n</code></pre>\n<p>I'd go with:</p>\n<pre><code>enum class SearchOpt\n{\n    Recursive,\n    NonRecursive\n};\n\nbool search(..., SearchOpt opt);\n</code></pre>\n<p>Therefore, the calling syntax changes from:</p>\n<pre><code>bool found = search(..., true);\n</code></pre>\n<p>to:</p>\n<pre><code>bool found = search(..., SearchOpt::Recursive);\n</code></pre>\n<p>Note: this avoids you having to create your own constants every time you call the function.</p>\n<h2>Edit</h2>\n<p>As others have suggested, instead of having separate <code>bool</code>s for each option and thereby a separate <code>enum</code> for each it would make sense to have a single <code>enum</code> configured as bit flags.</p>\n"}, {"comments": [{"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 3, "creation_date": 1443023833, "post_id": 32744220, "comment_id": 53329259, "body": "comments like this cannot make up for bad code. Don&#39;t write comment write readable code."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1443024981, "post_id": 32744220, "comment_id": 53330016, "body": "This would make it to leaderboard of my &#39;Worst Comment Ever&#39; competition. While the first place is fixed for &quot;++i; // Increment i&quot; comments and the second is permanently occupied by class A { A(); // Constructor this is also notable example."}, {"owner": {"reputation": 2522, "user_id": 1332468, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/47c408da0aac005a99e87161caf3b903?s=128&d=identicon&r=PG", "display_name": "srm", "link": "https://stackoverflow.com/users/1332468/srm"}, "edited": false, "score": 0, "creation_date": 1499960858, "post_id": 32744220, "comment_id": 77143374, "body": "This is in the same category as /*ref*/ for parameters passed as mutable &amp;. It&#39;s the reason that C# introduced keyword &quot;ref&quot; so that callers would have to be annotated. The problem on the boolean parameters is the same issue -- we want the language to force the call site to be annotated. To me, this seems like an IDE issue, not a language issue."}], "tags": [], "owner": {"reputation": 1463, "user_id": 3703503, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1ca51bdb8bc5906975c4133f0bf4873c?s=128&d=identicon&r=PG&f=1", "display_name": "SlySherZ", "link": "https://stackoverflow.com/users/3703503/slysherz"}, "is_accepted": false, "score": -1, "last_activity_date": 1443023737, "creation_date": 1443023737, "answer_id": 32744220, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/32744220#32744220", "title": "Better way to pass bool variable as parameter?", "body": "<p>Comments are your friends!</p>\n\n<pre><code>animal(   true,   //hasFourLegs\n          false,  //hasHead\n          true    //hasBody\n      );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "is_accepted": false, "score": 0, "last_activity_date": 1443023802, "creation_date": 1443023802, "answer_id": 32744243, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/32744243#32744243", "title": "Better way to pass bool variable as parameter?", "body": "<p>You could use bitwise values, as follows:</p>\n\n<pre><code>const int hasLegs = 0x01;\nconst int noHead = 0x02;\nconst int hasBody = 0x04;\n</code></pre>\n\n<p>Then call <code>animal</code> with any combination of the above, e.g.:\nanimal(hasLegs + hasBody);</p>\n\n<p>Decalre <code>animal</code> with a single <code>int</code> parameter.</p>\n\n<pre><code>inside `animal`, test the bits:\nif (parameter &amp; haasBody)\n{\n    // it has a body....\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1443031781, "post_id": 32744353, "comment_id": 53333790, "body": "With a bit more boilerplate, one can chain the modifications: <code>AnimalOptions().hasHead(false).hasBody(true)</code>"}], "tags": [], "owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "is_accepted": false, "score": 3, "last_activity_date": 1443024144, "creation_date": 1443024144, "answer_id": 32744353, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/32744353#32744353", "title": "Better way to pass bool variable as parameter?", "body": "<p>One other option is to use a class  to hold the parameters where they're closely related:</p>\n\n<pre><code>struct AnimalOptions {\n  bool hasHead, hasBody, hasLegs;\n  AnimalOptions() : hasHead(false), hasBody(false), hasLegs(false);\n}\n\n...\n\nAnimalOptions opt;\n  opt.hasHead = true;\n\n  animal(opt);\n</code></pre>\n\n<p>This technique is useful whenever you have a function which seems to take a bunch of parameters with identical types, whose order isn't easily remembered. It's just as useful when your function take several <code>int</code>s.</p>\n"}, {"comments": [{"owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "edited": false, "score": 0, "creation_date": 1443029730, "post_id": 32744584, "comment_id": 53332599, "body": "To be truly honest, I&#39;ve never seen Boost.parameter in real world code :-}"}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1443084788, "post_id": 32744584, "comment_id": 53353658, "body": "This feels like using an atomic bomb to crack a nut. (And likewise, never seen anyone actually use it)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1443024832, "creation_date": 1443024832, "answer_id": 32744584, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/32744584#32744584", "title": "Better way to pass bool variable as parameter?", "body": "<p>Strange no one suggested named parameters from Boost.parameter: <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/parameter/doc/html/index.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_59_0/libs/parameter/doc/html/index.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 12010, "user_id": 23235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6281820b28d03f98e85bb3d901ae3f39?s=128&d=identicon&r=PG", "display_name": "Shane Powell", "link": "https://stackoverflow.com/users/23235/shane-powell"}, "is_accepted": false, "score": 2, "last_activity_date": 1491944950, "creation_date": 1491944950, "answer_id": 43356241, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/43356241#43356241", "title": "Better way to pass bool variable as parameter?", "body": "<p>As a alternative to the other answers, I liked <a href=\"https://github.com/akrzemi1/explicit/blob/master/include/ak_toolkit/tagged_bool.hpp\" rel=\"nofollow noreferrer\">tagged_bool</a> that <a href=\"https://akrzemi1.wordpress.com/2017/02/16/toggles-in-functions/\" rel=\"nofollow noreferrer\">Andrzej Krzemie\u0144ski</a> came up with on his blog.</p>\n"}, {"tags": [], "owner": {"reputation": 5049, "user_id": 5288316, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bfc9b80e12b12bd4dd8a3953679d0c84?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/5288316/nicolas"}, "is_accepted": false, "score": 0, "last_activity_date": 1609253991, "creation_date": 1609253991, "answer_id": 65494164, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter/65494164#65494164", "title": "Better way to pass bool variable as parameter?", "body": "<p>C++20 has <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization#Designated_initializers\" rel=\"nofollow noreferrer\">designated initializers</a> as part of aggregate initialization. You could make a struct with the boolean parameters and pass the struct by value. You can even have default parameter values.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>struct AnimalParts {\n    bool hasFourLegs = false;\n    bool hasHead = true;\n    bool hasBody = true;\n}\n\nvoid animal(AnimalParts parts);\n</code></pre>\n<p>Then use it like this:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>animal({.hasFourLegs = true, .hasHead = false});\n</code></pre>\n<p>This comes very close to the named parameters idiom you suggested. In terms of compilation both options seem to produce comparable output, see on <a href=\"https://godbolt.org/z/96Wjrd\" rel=\"nofollow noreferrer\">Godbolt</a>.</p>\n"}], "owner": {"reputation": 622, "user_id": 4694036, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/XwC8h.jpg?s=128&g=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/4694036/eddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13720, "favorite_count": 1, "accepted_answer_id": 32744219, "answer_count": 8, "score": 8, "last_activity_date": 1609253991, "creation_date": 1443023438, "last_edit_date": 1443024048, "question_id": 32744112, "link": "https://stackoverflow.com/questions/32744112/better-way-to-pass-bool-variable-as-parameter", "title": "Better way to pass bool variable as parameter?", "body": "<p>I am wondering if there is a better way to write this for better readability.\nIf you have a function like below,</p>\n\n<pre><code>void animal(bool hasFourLegs, bool hasHead, bool hasBody);\n</code></pre>\n\n<p>When you call the function, you will end up with something like</p>\n\n<pre><code>animal(true, false, true);\n</code></pre>\n\n<p>and this makes me go take a look at the definition every time I encounter function like this.</p>\n\n<p>SO...</p>\n\n<p>I do something like this!</p>\n\n<pre><code>const bool HAS_FOURLEGS = true;\nconst bool NO_HEAD = false;\nconst bool HAS_BODY = true;\n\nanimal(HAS_FOURLEGS, NO_HEAD, HAS_BODY);\n</code></pre>\n\n<p>But I do not like to declare <code>const bool</code> every time I call the function.</p>\n\n<p>It seems like CPP does not support something like</p>\n\n<pre><code>animal(bool hasFourlegs = true, bool hasHead = false, bool hasBody = true);\n</code></pre>\n\n<p>Is there any better and shorter way?</p>\n"}, {"tags": ["c++", "vector", "ofstream"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1443023168, "post_id": 32743988, "comment_id": 53328777, "body": "FYI <code>ofstream oDataFile(&quot;randomData.txt&quot;);</code> will already open the file, you don&#39;t need to explicitly <code>open</code> after that"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1443023386, "post_id": 32743988, "comment_id": 53328912, "body": "Your vector could be empty. Post a complete compilable example."}, {"owner": {"reputation": 1566, "user_id": 1008142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7520f6edbe9d53a55a7e64e9f719fb2d?s=128&d=identicon&r=PG", "display_name": "Rory Yorke", "link": "https://stackoverflow.com/users/1008142/rory-yorke"}, "edited": false, "score": 0, "creation_date": 1443023390, "post_id": 32743988, "comment_id": 53328917, "body": "I&#39;d add a check that randomVector.size() isn&#39;t 0; if it is, the file will be blank.  It would help to have a complete example (I appreciate this may not be possible)."}, {"owner": {"reputation": 1185, "user_id": 971343, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/addab9dfc9ecbd0a4190b6eea9955ae5?s=128&d=identicon&r=PG", "display_name": "CppChris", "link": "https://stackoverflow.com/users/971343/cppchris"}, "edited": false, "score": 0, "creation_date": 1443023485, "post_id": 32743988, "comment_id": 53328989, "body": "Maybe you are checking your file content during debugging - the file content might be written just after your oDataFile goes out of scope ..."}, {"owner": {"reputation": 13, "user_id": 5329613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8e796cc05373bb7ba66e188561c82d?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiniius", "link": "https://stackoverflow.com/users/5329613/tarquiniius"}, "reply_to_user": {"reputation": 1566, "user_id": 1008142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7520f6edbe9d53a55a7e64e9f719fb2d?s=128&d=identicon&r=PG", "display_name": "Rory Yorke", "link": "https://stackoverflow.com/users/1008142/rory-yorke"}, "edited": false, "score": 0, "creation_date": 1443024837, "post_id": 32743988, "comment_id": 53329926, "body": "@RoryYorke I&#39;ll see what I can do."}, {"owner": {"reputation": 13, "user_id": 5329613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8e796cc05373bb7ba66e188561c82d?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiniius", "link": "https://stackoverflow.com/users/5329613/tarquiniius"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1443027153, "post_id": 32743988, "comment_id": 53331208, "body": "@MaximEgorushkin This is more complete I believe."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5329613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8e796cc05373bb7ba66e188561c82d?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiniius", "link": "https://stackoverflow.com/users/5329613/tarquiniius"}, "edited": false, "score": 0, "creation_date": 1443027391, "post_id": 32744779, "comment_id": 53331362, "body": "I posted some more complete code. &amp; It isn&#39;t returning empty, it has the data it&#39;s supposed to."}, {"owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "reply_to_user": {"reputation": 13, "user_id": 5329613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8e796cc05373bb7ba66e188561c82d?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiniius", "link": "https://stackoverflow.com/users/5329613/tarquiniius"}, "edited": false, "score": 0, "creation_date": 1443278239, "post_id": 32744779, "comment_id": 53434245, "body": "What is <code>Random</code>? Is it the same as the <code>Account</code> class? Your code like you did it update won&#39;t compile at least not on my system. How did you define <code>Random</code>?"}], "tags": [], "owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "is_accepted": false, "score": 0, "last_activity_date": 1443025554, "creation_date": 1443025554, "answer_id": 32744779, "question_id": 32743988, "link": "https://stackoverflow.com/questions/32743988/in-c-ofstream-and-vector-write-blank-file/32744779#32744779", "title": "In c++ ofstream and vector write blank file", "body": "<p>Does <code>randomVector</code> has any data? Because if not your file will be kept empty, because nothing is going to be written.</p>\n\n<p>Also, is it really necessary to open that file for writing if you don't have any data? I would check first if the vector has any data for example with:</p>\n\n<pre><code>if(!randomVector.empty())\n{ \n    // Your code here!\n}\n</code></pre>\n\n<p>I don't know what <code>getStuff()</code> and <code>getMoreStuff()</code> returns, but at least you should see the defined blank in the file, but only if your vector has some elements.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5329613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8e796cc05373bb7ba66e188561c82d?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiniius", "link": "https://stackoverflow.com/users/5329613/tarquiniius"}, "edited": false, "score": 0, "creation_date": 1443067282, "post_id": 32747196, "comment_id": 53346436, "body": "I&#39;m using Windows and Visual Studio, but your answer steered me in a better direction."}], "tags": [], "owner": {"reputation": 1566, "user_id": 1008142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7520f6edbe9d53a55a7e64e9f719fb2d?s=128&d=identicon&r=PG", "display_name": "Rory Yorke", "link": "https://stackoverflow.com/users/1008142/rory-yorke"}, "is_accepted": true, "score": 0, "last_activity_date": 1443033999, "creation_date": 1443033999, "answer_id": 32747196, "question_id": 32743988, "link": "https://stackoverflow.com/questions/32743988/in-c-ofstream-and-vector-write-blank-file/32747196#32747196", "title": "In c++ ofstream and vector write blank file", "body": "<p>If I apply these changes to your code (the \"-\" are removed lines, the \"+\" are added)</p>\n\n<pre><code>--- a/main.cpp\n+++ b/main.cpp\n@@ -13,7 +13,7 @@ int main()\n     int i = 0;\n\n     // Create a vector of Account objects.\n-    vector &lt;Random&gt; randomVector;\n+    vector &lt;Account&gt; randomVector;\n\n     // Create three person objects.\n     Person bob(\"billy bob\", \"bobsway\");\n@@ -23,12 +23,12 @@ int main()\n     // Create three Account objects, where each account object contains a Person object.\n     Account bobby(bob, 1, 500);\n     Account joseph(joe, 2, 1000);\n-    Account george(george, 3, 1200);\n+    Account georgy(george, 3, 1200);\n\n     // Push these Account objects into the vector.\n     randomVector.push_back(bobby);\n     randomVector.push_back(joseph);\n-    randomVector.push_back(george);\n+    randomVector.push_back(georgy);\n\n     // Create an ofstream object\n     ofstream oDataAccount(\"accountData.txt\");\n@@ -47,7 +47,7 @@ int main()\n     oDataAccount.close();\n\n // Keep the console window open with PAUSE\n-    system(\"PAUSE\");\n+    //system(\"PAUSE\");\n\n     // Return a 0\n     return 0;\n</code></pre>\n\n<p>I end up with an accountData.txt that looks like this:</p>\n\n<pre><code>billy bob bobsway 1 500\njoe joe cityofjoe 2 1000\ngeorge jack georgetown 3 1200\n</code></pre>\n\n<p>So the modified code seems OK.  This is on Ubuntu 14.04, compiler g++ 4.8.4.  What OS and compiler are you using?</p>\n"}], "owner": {"reputation": 13, "user_id": 5329613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8e796cc05373bb7ba66e188561c82d?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiniius", "link": "https://stackoverflow.com/users/5329613/tarquiniius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 32747196, "answer_count": 2, "score": 0, "last_activity_date": 1443033999, "creation_date": 1443023048, "last_edit_date": 1443026906, "question_id": 32743988, "link": "https://stackoverflow.com/questions/32743988/in-c-ofstream-and-vector-write-blank-file", "title": "In c++ ofstream and vector write blank file", "body": "<p>When I run my code the vector below has the correct data stored in it, but for some reason it does not write correctly to the hard-coded file path, it instead leaves the txt file blank. I'm sure it is something simple I'm overlooking.</p>\n\n<p>UPDATED: Here is more complete code.</p>\n\n<pre><code>// Declare the necessary include(s)\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include \"Account.h\"\n\n/* main function\nPurpose: To test the creation of two classes &amp; make sure they output correctly\nParameters: None\nReturns: an int (0) */\nint main()\n{\n    // Declare local variable\n    int i = 0;\n\n    // Create a vector of Account objects.\n    vector &lt;Random&gt; randomVector;\n\n    // Create three person objects.\n    Person bob(\"billy bob\", \"bobsway\");\n    Person joe(\"joe joe\", \"cityofjoe\");\n    Person george(\"george jack\", \"georgetown\");\n\n    // Create three Account objects, where each account object contains a Person object.\n    Account bobby(bob, 1, 500);\n    Account joseph(joe, 2, 1000);\n    Account george(george, 3, 1200);\n\n    // Push these Account objects into the vector.\n    randomVector.push_back(bobby);\n    randomVector.push_back(joseph);\n    randomVector.push_back(george);\n\n    // Create an ofstream object\n    ofstream oDataAccount(\"accountData.txt\");\n\n    // Create a loop to write Account data to a file\n    for (i = 0; i &lt; randomVector.size(); i++)\n    {\n        // Flush the output file\n        oDataAccount.flush();\n\n        // Write the data from each object in the vector\n        randomVector[i].writeData(oDataAccount);\n    }\n\n    // Close the file.\n    oDataAccount.close();\n\n// Keep the console window open with PAUSE\n    system(\"PAUSE\");\n\n    // Return a 0\n    return 0;\n\n}// End main\n</code></pre>\n\n<p>Account Class</p>\n\n<pre><code>// Include pragma once\n#pragma once\n#include \"Person.h\"\n\nclass Account\n{\n\nprivate:\n\n    Person aPerson;\n    int accountNum;\n    double accountBalance;\n\npublic:\n\n    Account();\n\n    Account(const Person, int, double);\n\n    Person getPerson();\n\n    int getAccountNum();\n\n    double getAccountBalance();\n\n    // writeData function\n    void writeData(ofstream&amp;);\n\n};\n\n// Include the Account header file\n#include \"Account.h\"\n\nAccount::Account()\n{\n    // Initializes data members\n}\n\nAccount::Account(const Person p, int accNum, double accBal)\n{\n    aPerson = p;\n    accountNum = accNum;\n    accountBalance = accBal;\n}\n\nPerson Account::getPerson()\n{\n    return aPerson;\n}\n\nint Account::getAccountNum()\n{\n    return accountNum;\n}\n\ndouble Account::getAccountBalance()\n{\n    return accountBalance;\n}\n\n// Implementation for writeData function\nvoid Account::writeData(ofstream&amp; output)\n{\n    // Write class data to the file\n    output &lt;&lt; getPerson().getName() &lt;&lt; ' ' &lt;&lt; getPerson().getAddress() &lt;&lt; ' ' &lt;&lt; getAccountNum() &lt;&lt; ' ' &lt;&lt; getAccountBalance();\n}\n</code></pre>\n\n<p>Person Class</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nclass Person\n{\n\nprivate:\n\n    string name;\n    string address;\n\npublic:\n\n    Person();\n\n    Person(const string, const string);\n\n    string getName();\n\n    string getAddress();\n\n};\n\n#include \"Person.h\"\n\nPerson::Person()\n{\n}\n\nPerson::Person(const string n, const string a)\n{\n    name = n;\n    address = a;\n}\n\nstring Person::getName()\n{\n    // Return the name\n    return name;\n}\n\nstring Person::getAddress()\n{\n    // Return the address\n    return address;\n}\n</code></pre>\n"}, {"tags": ["c++", "compilation", "decimal", "points"], "comments": [{"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 1, "creation_date": 1443023057, "post_id": 32743946, "comment_id": 53328697, "body": "what error does the compiler give you?"}, {"owner": {"reputation": 43, "user_id": 5368465, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153831802405116/picture?type=large", "display_name": "Lucas Brawdy", "link": "https://stackoverflow.com/users/5368465/lucas-brawdy"}, "reply_to_user": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1443023132, "post_id": 32743946, "comment_id": 53328748, "body": "it is citing the &lt;&lt;setprecision(2) line as the error and it says BUILD FAILED (exit value 2, total time: 6s)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1443023564, "post_id": 32743946, "comment_id": 53329051, "body": "@LucasBrawdy That still doesn&#39;t tell us what the error text is."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1443028434, "post_id": 32743946, "comment_id": 53331941, "body": "Welcome to SO! Please include the whole error message to provide more clear picture of your problem (since we can&#39;t use the code to compile it) and visit  <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> , so next time the comment section is more related to the question itself."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1443027795, "creation_date": 1443027795, "answer_id": 32745417, "question_id": 32743946, "link": "https://stackoverflow.com/questions/32743946/c-setprecision-returning-an-error/32745417#32745417", "title": "C++ Setprecision returning an error", "body": "<p>When C++ compiler complains about perfectly fine code, it is often because missing headers. Didn't you forget <code>#include &lt;iomanip&gt;</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5368465, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153831802405116/picture?type=large", "display_name": "Lucas Brawdy", "link": "https://stackoverflow.com/users/5368465/lucas-brawdy"}, "edited": false, "score": 0, "creation_date": 1443032308, "post_id": 32746715, "comment_id": 53334121, "body": "Here is the full code. I am also running netbeans 8.0.2"}], "tags": [], "owner": {"reputation": 43, "user_id": 5368465, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153831802405116/picture?type=large", "display_name": "Lucas Brawdy", "link": "https://stackoverflow.com/users/5368465/lucas-brawdy"}, "is_accepted": false, "score": 0, "last_activity_date": 1443032279, "creation_date": 1443032279, "answer_id": 32746715, "question_id": 32743946, "link": "https://stackoverflow.com/questions/32743946/c-setprecision-returning-an-error/32746715#32746715", "title": "C++ Setprecision returning an error", "body": "<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\n/*\n * \n */\nint main(int argc, char** argv) {\n    int length_room, width_room ;\n    int length_tile, width_tile ;\n    int room_ft;\n    int tile_ft;\n    int tiles_needed;\n    double cost;\n    double cost_room;\n\n\n    cout &lt;&lt;\"Enter the length of the room (in feet) \";\n    cin &gt;&gt; length_room ; \n    cout &lt;&lt; \"Enter the width of the room (in feet) \" ;\n    cin &gt;&gt; width_room ; \n    cout &lt;&lt; \"Enter the length of the tile (in inches) \" ;\n    cin &gt;&gt; length_tile ;\n    cout &lt;&lt; \"Enter the width of the tile (in inches) \";\n    cin &gt;&gt; width_tile ;\n    cout &lt;&lt; \"Enter the amount for each tile \" ;\n    cin &gt;&gt; cost;\n\n        length_tile=(length_tile/12);\n        width_tile=(width_tile/12);\n        tile_ft=(length_tile*width_tile);\n        room_ft=(length_room*width_room);\n        tiles_needed=(room_ft/tile_ft);\n        cost_room=(cost*tiles_needed);\n    cout&lt;&lt;endl;\n    cout&lt;&lt;endl;\n\n    cout &lt;&lt; \"Length of the room \" &lt;&lt;length_room&lt;&lt;\" ft\"&lt;&lt;endl;\n    cout &lt;&lt; \"Width of the room \"&lt;&lt;width_room&lt;&lt;\" ft\"&lt;&lt;endl;\n    cout &lt;&lt; \"Least number of tiles needed \"&lt;&lt;tiles_needed&lt;&lt; \" tiles\"&lt;&lt;endl; /* Need to round up still */\n\n    cout &lt;&lt; fixed &lt;&lt;setprecision(2)\n            &lt;&lt;\"Total Cost: $\" &lt;&lt; cost_room &lt;&lt;endl; /* Need to mod still to 2 decimal places */\n\n\n\n    return 0;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5368465, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10153831802405116/picture?type=large", "display_name": "Lucas Brawdy", "link": "https://stackoverflow.com/users/5368465/lucas-brawdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 32745417, "answer_count": 2, "score": 0, "last_activity_date": 1443048897, "creation_date": 1443022918, "last_edit_date": 1443048897, "question_id": 32743946, "link": "https://stackoverflow.com/questions/32743946/c-setprecision-returning-an-error", "title": "C++ Setprecision returning an error", "body": "<p>This is the majority of my code and I need to set the last <code>cout</code> to have precision of <code>2</code>, so I can get places after the decimal point:  </p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\n/*\n * \n */\nint main(int argc, char** argv) {\n    int length_room, width_room ;\n    int length_tile, width_tile ;\n    int room_ft;\n    int tile_ft;\n    int tiles_needed;\n    double cost;\n    double cost_room;\n\n\n    cout &lt;&lt;\"Enter the length of the room (in feet) \";\n    cin &gt;&gt; length_room ; \n    cout &lt;&lt; \"Enter the width of the room (in feet) \" ;\n    cin &gt;&gt; width_room ; \n    cout &lt;&lt; \"Enter the length of the tile (in inches) \" ;\n    cin &gt;&gt; length_tile ;\n    cout &lt;&lt; \"Enter the width of the tile (in inches) \";\n    cin &gt;&gt; width_tile ;\n    cout &lt;&lt; \"Enter the amount for each tile \" ;\n    cin &gt;&gt; cost;\n\n        length_tile=(length_tile/12);\n        width_tile=(width_tile/12);\n        tile_ft=(length_tile*width_tile);\n        room_ft=(length_room*width_room);\n        tiles_needed=(room_ft/tile_ft);\n        cost_room=(cost*tiles_needed);\n    cout&lt;&lt;endl;\n    cout&lt;&lt;endl;\n\n    cout &lt;&lt; \"Length of the room \" &lt;&lt;length_room&lt;&lt;\" ft\"&lt;&lt;endl;\n    cout &lt;&lt; \"Width of the room \"&lt;&lt;width_room&lt;&lt;\" ft\"&lt;&lt;endl;\n    cout &lt;&lt; \"Least number of tiles needed \"&lt;&lt;tiles_needed&lt;&lt; \" tiles\"&lt;&lt;endl; /* Need to round up still */\n\n    cout &lt;&lt; fixed &lt;&lt;setprecision(2)\n            &lt;&lt;\"Total Cost: $\" &lt;&lt; cost_room &lt;&lt;endl; /* Need to mod still to 2 decimal places */\n\n\n\n    return 0;\n</code></pre>\n\n<p>I cannot figure out why it is not compiling ?</p>\n\n<p>P.S.:Any suggestions would be greatly appreciated.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443023034, "post_id": 32743939, "comment_id": 53328681, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 0, "creation_date": 1443025706, "post_id": 32743939, "comment_id": 53330447, "body": "You should probably check whether <code>m_front</code> is not <code>nullptr</code> when you access it inside your function."}, {"owner": {"reputation": 21467, "user_id": 263895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eca8b59778527fef135cff9f9fa4b200?s=128&d=identicon&r=PG", "display_name": "NG.", "link": "https://stackoverflow.com/users/263895/ng"}, "edited": false, "score": 0, "creation_date": 1443025764, "post_id": 32743939, "comment_id": 53330485, "body": "you may also be leaving a dangling pointer - you need to set next on the element before the last one to nullptr also."}, {"owner": {"reputation": 355, "user_id": 1384271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14ea858324022c7d33be278278070eb?s=128&d=identicon&r=PG", "display_name": "smyatkin_max", "link": "https://stackoverflow.com/users/1384271/smyatkin-max"}, "edited": false, "score": 0, "creation_date": 1443025948, "post_id": 32743939, "comment_id": 53330594, "body": "check if m_front == nullptr and, more important issue: &quot;delete temp&quot; is ALWAYS used on nullptr (see the while-loop condition). And yes, learn how to debug your code."}], "owner": {"reputation": 760, "user_id": 5368448, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0a99517c180eaf6b58e59246fc27b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Marc Fletcher", "link": "https://stackoverflow.com/users/5368448/marc-fletcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443025581, "creation_date": 1443022904, "last_edit_date": 1443025581, "question_id": 32743939, "link": "https://stackoverflow.com/questions/32743939/delete-from-end-of-list-linkedlist-on-c", "title": "Delete from end of list LinkedList on c++", "body": "<p>I am writing a method to delete from the end of my linked list. The program crashes when the method is invoked. </p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>//RemoveBack Method\n\nbool LinkedList::removeBack()\n{\n  if(isEmpty())\n  {\n    return(false);\n  }\n  else \n  {\n    Node* temp = m_front;\n\n    while(temp-&gt;getNext()!=nullptr)\n    {\n      temp=temp-&gt;getNext();\n    }\n\n    delete temp;\n\n    temp=nullptr;\n    m_size--;\n\n    return(true);\n  }\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "gradle", "android-ndk", "eigen"], "comments": [{"owner": {"reputation": 10261, "user_id": 295004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=128&d=identicon&r=PG", "display_name": "Morrison Chang", "link": "https://stackoverflow.com/users/295004/morrison-chang"}, "edited": false, "score": 0, "creation_date": 1443023689, "post_id": 32743896, "comment_id": 53329154, "body": "Looks like it was part of the BLAS integration for Renderscript: <a href=\"http://stackoverflow.com/questions/31620728/renderscript-implementation-of-blas\" title=\"renderscript implementation of blas\">stackoverflow.com/questions/31620728/&hellip;</a>"}, {"owner": {"reputation": 550, "user_id": 1222424, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yESqo.jpg?s=128&g=1", "display_name": "NamLe", "link": "https://stackoverflow.com/users/1222424/namle"}, "reply_to_user": {"reputation": 10261, "user_id": 295004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=128&d=identicon&r=PG", "display_name": "Morrison Chang", "link": "https://stackoverflow.com/users/295004/morrison-chang"}, "edited": false, "score": 0, "creation_date": 1443024622, "post_id": 32743896, "comment_id": 53329782, "body": "Yes, Can I use it in my project?"}, {"owner": {"reputation": 10261, "user_id": 295004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=128&d=identicon&r=PG", "display_name": "Morrison Chang", "link": "https://stackoverflow.com/users/295004/morrison-chang"}, "edited": false, "score": 0, "creation_date": 1443025174, "post_id": 32743896, "comment_id": 53330131, "body": "You might want to explain how you want to use Eigen or see if you can use the Renderscript BLAS functions which are in the Renderscript Support Library <a href=\"http://developer.android.com/reference/android/support/v8/renderscript/ScriptIntrinsicBLAS.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/support/v8/renderscr&zwnj;&#8203;ipt/&hellip;</a>"}, {"owner": {"reputation": 550, "user_id": 1222424, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yESqo.jpg?s=128&g=1", "display_name": "NamLe", "link": "https://stackoverflow.com/users/1222424/namle"}, "reply_to_user": {"reputation": 10261, "user_id": 295004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=128&d=identicon&r=PG", "display_name": "Morrison Chang", "link": "https://stackoverflow.com/users/295004/morrison-chang"}, "edited": false, "score": 0, "creation_date": 1443025236, "post_id": 32743896, "comment_id": 53330170, "body": "Yes, thank you! I want to use Eigen in my JNI code, too."}, {"owner": {"reputation": 159, "user_id": 6340420, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3d13167dbee81f3cb21ea22efe70f512?s=128&d=identicon&r=PG&f=1", "display_name": "edusan1213", "link": "https://stackoverflow.com/users/6340420/edusan1213"}, "edited": false, "score": 0, "creation_date": 1516292599, "post_id": 32743896, "comment_id": 83637168, "body": "See this link <a href=\"https://stackoverflow.com/questions/48317701/add-eigen-library-to-android-ndk?noredirect=1#comment83628176_48317701\">Eigen in Android</a>"}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 6340420, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3d13167dbee81f3cb21ea22efe70f512?s=128&d=identicon&r=PG&f=1", "display_name": "edusan1213", "link": "https://stackoverflow.com/users/6340420/edusan1213"}, "is_accepted": false, "score": 0, "last_activity_date": 1516292833, "creation_date": 1516292833, "answer_id": 48325964, "question_id": 32743896, "link": "https://stackoverflow.com/questions/32743896/eigen-library-for-android-ndk-from-googlesource/48325964#48325964", "title": "Eigen library for Android NDK from GoogleSource", "body": "<p>it migth be late for you but it could be useful for other developers. You can use Eigen headers (download them o the official site) and change CMakeList.txt to include them adding this line:\n    <code>include_directories(path to Eigen headers)</code>\n<strong><p>See this link for futher information:</p></strong>\n<a href=\"https://stackoverflow.com/questions/48317701/add-eigen-library-to-android-ndk?noredirect=1#comment83628176_48317701\">Eigen in Android</a></p>\n"}], "owner": {"reputation": 550, "user_id": 1222424, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yESqo.jpg?s=128&g=1", "display_name": "NamLe", "link": "https://stackoverflow.com/users/1222424/namle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516292833, "creation_date": 1443022780, "question_id": 32743896, "link": "https://stackoverflow.com/questions/32743896/eigen-library-for-android-ndk-from-googlesource", "title": "Eigen library for Android NDK from GoogleSource", "body": "<p>I need Eigen C++ library to build my Android app.\nSo, I google and find a great library here\n<a href=\"https://android.googlesource.com/platform/external/eigen\" rel=\"nofollow\">https://android.googlesource.com/platform/external/eigen</a></p>\n\n<p>But, I don't know how to use this library, how to compile and include them into my project.</p>\n\n<p>I'm using Android Studio with Grade-experimental 2.1.0</p>\n\n<p>Anybody have experience about this? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "memory-mapped-files"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1443023077, "post_id": 32743714, "comment_id": 53328713, "body": "<code>std::string</code> can be so much more than a constant string literal - so generally the answer is no. Why not use a pointer where a pointer is due? If you need to actually do string stuffs on your Key (like comparison), you&#39;d have to implement them yourself (i.e. use the standard library for C strings), but you&#39;d avoid the allocation overhead as well."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1443023823, "post_id": 32743714, "comment_id": 53329253, "body": "Is is a typo, or <code>Key</code> is just a single char ?"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1443023951, "post_id": 32743714, "comment_id": 53329331, "body": "@SergeBallesta Its a placeholder for retrieving the pointer only"}], "answers": [{"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 1, "last_activity_date": 1443023259, "creation_date": 1443023259, "answer_id": 32744041, "question_id": 32743714, "link": "https://stackoverflow.com/questions/32743714/create-a-stdstring-with-fixed-data-location/32744041#32744041", "title": "Create a std::string with fixed data location", "body": "<blockquote>\n  <p>... if it was possible to create an std::string with a fixed char*(pointing to where the char Key currently is) for where it keeps the actual data?</p>\n</blockquote>\n\n<p>Not really - std::string explicitly and very clearly manages its own memory. You could perhaps hack it with a custom allocator, but I'm inclined to think it would be awful.</p>\n\n<p>If you just want something <em>like</em> a <code>std::string</code> (ie, having the same operators and public interface) but not owning its own memory, just use a <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/utility/doc/html/string_ref.html\" rel=\"nofollow\">Boost.String_Ref</a>, which does what you (seem to) want without hacks.</p>\n"}, {"tags": [], "owner": {"reputation": 70070, "user_id": 9611, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/749b73007119baf94fc077c50bcc58e8?s=128&d=identicon&r=PG", "display_name": "shoosh", "link": "https://stackoverflow.com/users/9611/shoosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1443023275, "creation_date": 1443023275, "answer_id": 32744048, "question_id": 32743714, "link": "https://stackoverflow.com/questions/32743714/create-a-stdstring-with-fixed-data-location/32744048#32744048", "title": "Create a std::string with fixed data location", "body": "<p>No, that is not possible.<br>\nMoreover, when you return an <code>std::string</code> in <code>GetKey()</code> you're actually copying the string. <code>std::string</code> always managers its own memory. One good reason for this is that the pointer can change without any warning and you can never rely on where it is at.<br>\nMost implementation of <code>std::string</code> have a \"short string optimization\" where for strings shorter than 16 chars, the memory is actually right there inside the string object as an array. for anything longer, the memory is allocated. This sort of invariant (if len&lt;16 pointer is A else pointer is B) cannot be maintained if the pointer can come from outside.</p>\n"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 32744041, "answer_count": 2, "score": 1, "last_activity_date": 1443029127, "creation_date": 1443022268, "last_edit_date": 1443029127, "question_id": 32743714, "link": "https://stackoverflow.com/questions/32743714/create-a-stdstring-with-fixed-data-location", "title": "Create a std::string with fixed data location", "body": "<p>Currently I have this going on:</p>\n\n<pre><code>struct HashItem {\n    uint32_t Value;\n    char Key;\n\n    uint32_t GetSize() {\n        return 4 + GetKey().size();\n    }\n\n    void SetKey(std::string &amp;Key) {\n        memcpy(&amp;(this-&gt;Key), Key.c_str(), Key.size());\n    }\n    std::string GetKey() {\n        return std::string(&amp;Key);\n    }\n\n    static HashItem* Cast(void* p) {\n        return reinterpret_cast&lt;HashItem*&gt;(p);\n    }\n};\n</code></pre>\n\n<p>That struct is meant to be an interpretation of a pointer location in a MMF. At the start of it, I have a hash table and right after it are those HashItems in series. I was wondering though if it was possible to create an std::string with a fixed char*(pointing to where the char Key currently is) for where it keeps the actual data? </p>\n\n<p>That memory is manually managed anyway and having a string field instead of a char field would be more convenient.</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-type-erasure"], "answers": [{"comments": [{"owner": {"reputation": 1495, "user_id": 96690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/929d72a8b499e80e80eef85bad93632d?s=128&d=identicon&r=PG", "display_name": "Kevin Dungs", "link": "https://stackoverflow.com/users/96690/kevin-dungs"}, "edited": false, "score": 0, "creation_date": 1443045507, "post_id": 32749144, "comment_id": 53340979, "body": "I was sure I had tried it this way. Probably put the <code>const _self</code> outside of the vector. Thanks a lot!"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1495, "user_id": 96690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/929d72a8b499e80e80eef85bad93632d?s=128&d=identicon&r=PG", "display_name": "Kevin Dungs", "link": "https://stackoverflow.com/users/96690/kevin-dungs"}, "edited": false, "score": 0, "creation_date": 1443046702, "post_id": 32749144, "comment_id": 53341419, "body": "@KevinDungs you should have mentioned it in the question :) I wouldn&#39;t want to admit how much time I wasted scavenging through the source before I ran into that bit in the docs"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1443041083, "creation_date": 1443041083, "answer_id": 32749144, "question_id": 32743594, "link": "https://stackoverflow.com/questions/32743594/boost-type-erasure-any-with-const-member-function/32749144#32749144", "title": "Boost type_erasure any with const member function", "body": "<p>You need to specify the const-ness in the concept like this:</p>\n\n<pre><code>using AnyTest = any&lt;mpl::vector&lt;\n                    copy_constructible&lt;&gt;, \n                    has_test&lt;int(double), const _self&gt;, relaxed&gt; \n                  &gt;;\n</code></pre>\n\n<p>Found on the documentation <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/boost_typeerasure/basic.html\" rel=\"nofollow\">page \"Basic Usage\"</a></p>\n\n<hr>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/46ae7e2694c24184\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>// http://stackoverflow.com/questions/32743594/boost-type-erasure-any-with-const-member-function\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n#include &lt;boost/mpl/vector.hpp&gt;\n#include &lt;boost/type_erasure/any.hpp&gt;\n#include &lt;boost/type_erasure/member.hpp&gt;\n\nusing namespace boost;\nusing namespace boost::type_erasure;\n\nBOOST_TYPE_ERASURE_MEMBER((has_test), test, 1)\n\nusing AnyTest = any&lt;mpl::vector&lt;\n                    copy_constructible&lt;&gt;, \n                    has_test&lt;int(double), const _self&gt;, relaxed&gt; \n                  &gt;;\n\nstruct ATest {\n    int test(double) const { return 5; }\n};\n\nint main() {\n    auto xs = std::vector&lt;AnyTest&gt;{};\n    xs.push_back(ATest{});\n\n    for (auto const &amp;x : xs) {\n        std::cout &lt;&lt; x.test(42.0) &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>5\n</code></pre>\n"}], "owner": {"reputation": 1495, "user_id": 96690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/929d72a8b499e80e80eef85bad93632d?s=128&d=identicon&r=PG", "display_name": "Kevin Dungs", "link": "https://stackoverflow.com/users/96690/kevin-dungs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 2, "accepted_answer_id": 32749144, "answer_count": 1, "score": 7, "last_activity_date": 1443041083, "creation_date": 1443021895, "question_id": 32743594, "link": "https://stackoverflow.com/questions/32743594/boost-type-erasure-any-with-const-member-function", "title": "Boost type_erasure any with const member function", "body": "<p>I want to access a getter of type-erased types in a vector. The getter is marked const. Somehow, the const-ness does not propagate to the boost::any wrapper object. The minimal example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n#include &lt;boost/mpl/vector.hpp&gt;\n#include &lt;boost/type_erasure/any.hpp&gt;\n#include &lt;boost/type_erasure/member.hpp&gt;\n\nusing namespace boost;\nusing namespace boost::type_erasure;\n\nBOOST_TYPE_ERASURE_MEMBER((has_test), test, 1)\n\nusing AnyTest = any&lt;mpl::vector&lt;copy_constructible&lt;&gt;,\n                                has_test&lt;int(double)&gt;,\n                                relaxed&gt;&gt;;\n\nstruct ATest {\n  int test(double x) const {\n    return 5;\n  }\n};\n\nint main() {\n  auto xs = std::vector&lt;AnyTest&gt;{};\n  xs.push_back(ATest{});\n\n  for (const auto&amp; x : xs) {\n    std::cout &lt;&lt; x.test(42.0) &lt;&lt; '\\n';\n  }\n}\n</code></pre>\n\n<p>results in an error saying</p>\n\n<pre><code>clang++ -O3 -std=c++14    minimal.cc   -o minimal\nminimal.cc:28:18: error: member function 'test' not viable: 'this' argument has type 'const\n      boost::type_erasure::any&lt;boost::mpl::vector&lt;boost::type_erasure::copy_constructible&lt;boost::type_erasure::_self&gt;, has_test&lt;int (double),\n      boost::type_erasure::_self&gt;, boost::type_erasure::relaxed, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na&gt;, boost::type_erasure::_self&gt;', but\n      function is not marked const\n    std::cout &lt;&lt; x.test(42.0) &lt;&lt; '\\n';\n                 ^\nminimal.cc:11:39: note: 'test' declared here\nBOOST_TYPE_ERASURE_MEMBER((has_test), test, 1)\n                                      ^\n/opt/local/include/boost/type_erasure/member.hpp:133:9: note: expanded from macro 'BOOST_TYPE_ERASURE_MEMBER'\n        member,                                                                             \\\n        ^\n/opt/local/include/boost/type_erasure/member.hpp:242:64: note: expanded from macro 'BOOST_TYPE_ERASURE_MEMBER_I'\n    BOOST_TYPE_ERASURE_MEMBER_II(namespace_name, concept_name, member, N)\n                                                               ^\n/opt/local/include/boost/type_erasure/member.hpp:170:44: note: expanded from macro 'BOOST_TYPE_ERASURE_MEMBER_II'\n        typename rebind_any&lt;Base, R&gt;::type member(                                              \\\n                                           ^\n1 error generated.\nmake: *** [minimal] Error 1\n</code></pre>\n\n<p>However, once <code>const auto&amp; x</code> in the for-loop is changed to just <code>auto&amp; x</code>, it works. What's the reason for this and how can I require the wrapper object to respect constness?</p>\n"}, {"tags": ["c++", "opencv", "cross-compiling", "linaro"], "comments": [{"owner": {"reputation": 164, "user_id": 4646269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e12cf6752437688aa0dec7ba18abc45?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijat Biswas", "link": "https://stackoverflow.com/users/4646269/abhijat-biswas"}, "edited": false, "score": 0, "creation_date": 1443034222, "post_id": 32743543, "comment_id": 53335188, "body": "What about using the standalone toolchains from the NDK?"}, {"owner": {"reputation": 51, "user_id": 2940423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f620a33901f18034520d61c19eb51e7c?s=128&d=identicon&r=PG&f=1", "display_name": "jojolepirate", "link": "https://stackoverflow.com/users/2940423/jojolepirate"}, "reply_to_user": {"reputation": 164, "user_id": 4646269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e12cf6752437688aa0dec7ba18abc45?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijat Biswas", "link": "https://stackoverflow.com/users/4646269/abhijat-biswas"}, "edited": false, "score": 0, "creation_date": 1443034362, "post_id": 32743543, "comment_id": 53335250, "body": "Well I&#39;m not compiling for Android, but for an arm version of debian on the BeagleBone Black"}, {"owner": {"reputation": 164, "user_id": 4646269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e12cf6752437688aa0dec7ba18abc45?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijat Biswas", "link": "https://stackoverflow.com/users/4646269/abhijat-biswas"}, "edited": false, "score": 0, "creation_date": 1443034541, "post_id": 32743543, "comment_id": 53335367, "body": "Which functions from highgui are working?"}, {"owner": {"reputation": 51, "user_id": 2940423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f620a33901f18034520d61c19eb51e7c?s=128&d=identicon&r=PG&f=1", "display_name": "jojolepirate", "link": "https://stackoverflow.com/users/2940423/jojolepirate"}, "reply_to_user": {"reputation": 164, "user_id": 4646269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e12cf6752437688aa0dec7ba18abc45?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijat Biswas", "link": "https://stackoverflow.com/users/4646269/abhijat-biswas"}, "edited": false, "score": 0, "creation_date": 1443037078, "post_id": 32743543, "comment_id": 53336825, "body": "I&#39;m using waitKey, which is in the highgui library (<a href=\"http://docs.opencv.org/modules/highgui/doc/highgui.html\" rel=\"nofollow noreferrer\">docs.opencv.org/modules/highgui/doc/highgui.html</a>) and it is resolved correctly during link"}, {"owner": {"reputation": 51, "user_id": 2940423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f620a33901f18034520d61c19eb51e7c?s=128&d=identicon&r=PG&f=1", "display_name": "jojolepirate", "link": "https://stackoverflow.com/users/2940423/jojolepirate"}, "reply_to_user": {"reputation": 164, "user_id": 4646269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e12cf6752437688aa0dec7ba18abc45?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijat Biswas", "link": "https://stackoverflow.com/users/4646269/abhijat-biswas"}, "edited": false, "score": 0, "creation_date": 1443039081, "post_id": 32743543, "comment_id": 53337916, "body": "Perhaps if I cross compile openCV and use the resulting libs instead?"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2940423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f620a33901f18034520d61c19eb51e7c?s=128&d=identicon&r=PG&f=1", "display_name": "jojolepirate", "link": "https://stackoverflow.com/users/2940423/jojolepirate"}, "is_accepted": false, "score": 0, "last_activity_date": 1443040901, "creation_date": 1443040901, "answer_id": 32749096, "question_id": 32743543, "link": "https://stackoverflow.com/questions/32743543/link-error-when-cross-compiling-opencv-app/32749096#32749096", "title": "Link error when cross compiling opencv app", "body": "<p>Well I just used different libraries with Eclipse which I found here <a href=\"https://github.com/Nolaan/libopencv_24\" rel=\"nofollow\">https://github.com/Nolaan/libopencv_24</a> instead, and it works. Odd problem.</p>\n"}], "owner": {"reputation": 51, "user_id": 2940423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f620a33901f18034520d61c19eb51e7c?s=128&d=identicon&r=PG&f=1", "display_name": "jojolepirate", "link": "https://stackoverflow.com/users/2940423/jojolepirate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443040901, "creation_date": 1443021745, "last_edit_date": 1495541200, "question_id": 32743543, "link": "https://stackoverflow.com/questions/32743543/link-error-when-cross-compiling-opencv-app", "title": "Link error when cross compiling opencv app", "body": "<p>So I am cross compiling an opencv application on Windows for a linux arm os.</p>\n\n<ul>\n<li><p>I am using the newest linaro toolchain with Eclipse.</p></li>\n<li><p>I have built opencv on the target OS and taken the built libs to put them in linaro's libraries.</p></li>\n<li><p>Compilation and link of my application works on the target OS.</p></li>\n<li><p>Compilation works with Eclipse, however link fails for some particular \nopencv function in the highgui library:</p></li>\n</ul>\n\n<p>errors during link process:</p>\n\n<pre><code>main.cpp:79: undefined reference to `cv::imread(std::string const&amp;, int)'\nmain.cpp:235: undefined reference to `cv::putText(cv::Mat&amp;, std::string const&amp;, cv::Point_&lt;int&gt;, int, double, cv::Scalar_&lt;double&gt;, int, int, bool)'\nmain.cpp:237: undefined reference to `cv::putText(cv::Mat&amp;, std::string const&amp;, cv::Point_&lt;int&gt;, int, double, cv::Scalar_&lt;double&gt;, int, int, bool)'\n</code></pre>\n\n<p>Please note: I am using many other opencv functions found in other libraries which compile and link fine (I tested by commenting the three lines associated with the error and recompiling). Even some functions present on the highgui library link fine...  So the problem seems to come from specific functions in the highgui library.</p>\n\n<p>I am sure I am using the same libraries than the ones used on the target arm OS, with the same compilation parameters which work on the target OS.</p>\n\n<p>I have seen some other posts about this (<a href=\"https://stackoverflow.com/questions/31921830/cross-compiling-opencv-app-undefined-reference-to?rq=1\">Cross compiling opencv app, undefined reference to</a>), but found no solution.</p>\n\n<p>Would you have any ideas? Thanks!</p>\n"}, {"tags": ["c++", "c++11", "visual-studio-2013", "std-function", "boost-function"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1443021445, "post_id": 32743363, "comment_id": 53327616, "body": "what is the error message?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1443021596, "post_id": 32743363, "comment_id": 53327717, "body": "<code>std::function</code> works fine using GCC: <a href=\"http://melpon.org/wandbox/permlink/UIH8HupaFEyRa8bz\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/UIH8HupaFEyRa8bz</a>"}], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 5351066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9f7218625b0c9aa1215cc8fa661175?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Rossmanith", "link": "https://stackoverflow.com/users/5351066/alexander-rossmanith"}, "is_accepted": true, "score": 1, "last_activity_date": 1443194607, "last_edit_date": 1495535227, "creation_date": 1443194607, "answer_id": 32785541, "question_id": 32743363, "link": "https://stackoverflow.com/questions/32743363/using-stdfunction-in-a-stdmap/32785541#32785541", "title": "using std::function in a std::map", "body": "<p>It works with GCC and Clang (see Jonathan's comment). To make it work in VS2013, you can add std::mem_fn() around the pointers to the member functions:</p>\n\n<pre><code>const C::fnCmdMap C::m_fnCmd =\n{\n    {std::make_pair(ECmd::one, std::mem_fn(&amp;C::One))},\n    {std::make_pair(ECmd::two, std::mem_fn(&amp;C::Two))},\n    {std::make_pair(ECmd::three, std::mem_fn(&amp;C::Three))},\n};\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/23778883/vs2013-stdfunction-with-member-function\">VS2013 std::function with member function</a></p>\n"}], "owner": {"reputation": 27, "user_id": 2992673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e900de2c1fbbdad885397d9acf687ac0?s=128&d=identicon&r=PG&f=1", "display_name": "RobinI", "link": "https://stackoverflow.com/users/2992673/robini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2022, "favorite_count": 0, "accepted_answer_id": 32785541, "answer_count": 1, "score": 0, "last_activity_date": 1444762651, "creation_date": 1443021260, "last_edit_date": 1444762651, "question_id": 32743363, "link": "https://stackoverflow.com/questions/32743363/using-stdfunction-in-a-stdmap", "title": "using std::function in a std::map", "body": "<p>I have a class...</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;map&gt;\n#include &lt;boost/function.hpp&gt;\n\nenum class ECmd { one, two, three };\n\nclass C\n{\npublic:\n\n    void Command(ECmd e)\n    {\n        auto pos = m_fnCmd.find(e);\n\n        if (pos != m_fnCmd.end())\n        {\n            // call the function\n            (pos-&gt;second)(this);\n         }\n        else\n        {\n            printf(\"no command!\\n\");\n        }\n    }\n\nprotected:\n    using fnCmd = boost::function&lt;void(C*)&gt;;\n    using fnCmdMap = std::map&lt;ECmd, fnCmd&gt;;\n\n    static const fnCmdMap m_fnCmd;\n\n    // the command functions\n    void One() { printf(\"one.\\n\"); }\n    void Two() { printf(\"Two.\\n\"); }\n    void Three() { printf(\"Three.\\n\"); }\n};\n\nconst C::fnCmdMap C::m_fnCmd =\n{\n    {std::make_pair(ECmd::one, &amp;C::One)},\n    {std::make_pair(ECmd::two, &amp;C::Two)},\n    {std::make_pair(ECmd::three, &amp;C::Three)},\n};\n</code></pre>\n\n<p>Which demonstrates a technique i use for processing id based commands. This code works just fine, however when i change the class to use std::function instead of boost::function it fails to compile - does not like initializing C::m_fnCmd.</p>\n\n<p>The error message is:</p>\n\n<pre><code>1&gt;c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(506): error C2664: 'void std::_Func_class&lt;_Ret,C *&gt;::_Set(std::_Func_base&lt;_Ret,C *&gt; *)' : cannot convert argument 1 from '_Myimpl *' to 'std::_Func_base&lt;_Ret,C *&gt; *'\n1&gt;          with\n1&gt;          [\n1&gt;              _Ret=void\n1&gt;          ]\n1&gt;          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(442) : see reference to function template instantiation 'void std::_Func_class&lt;_Ret,C *&gt;::_Do_alloc&lt;_Myimpl,_Fret(__thiscall C::* const &amp;)(void),_Alloc&gt;(_Fty,_Alloc)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ret=void\n1&gt;  ,            _Fret=void\n1&gt;  ,            _Alloc=std::allocator&lt;std::_Func_class&lt;void,C *&gt;&gt;\n1&gt;  ,            _Fty=void (__thiscall C::* const &amp;)(void)\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(442) : see reference to function template instantiation 'void std::_Func_class&lt;_Ret,C *&gt;::_Do_alloc&lt;_Myimpl,_Fret(__thiscall C::* const &amp;)(void),_Alloc&gt;(_Fty,_Alloc)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ret=void\n1&gt;  ,            _Fret=void\n1&gt;  ,            _Alloc=std::allocator&lt;std::_Func_class&lt;void,C *&gt;&gt;\n1&gt;  ,            _Fty=void (__thiscall C::* const &amp;)(void)\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(442) : see reference to function template instantiation 'void std::_Func_class&lt;_Ret,C *&gt;::_Reset_alloc&lt;_Fret,C,,std::allocator&lt;std::_Func_class&lt;_Ret,C *&gt;&gt;&gt;(_Fret (__thiscall C::* const )(void),_Alloc)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ret=void\n1&gt;  ,            _Fret=void\n1&gt;  ,            _Alloc=std::allocator&lt;std::_Func_class&lt;void,C *&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(442) : see reference to function template instantiation 'void std::_Func_class&lt;_Ret,C *&gt;::_Reset_alloc&lt;_Fret,C,,std::allocator&lt;std::_Func_class&lt;_Ret,C *&gt;&gt;&gt;(_Fret (__thiscall C::* const )(void),_Alloc)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ret=void\n1&gt;  ,            _Fret=void\n1&gt;  ,            _Alloc=std::allocator&lt;std::_Func_class&lt;void,C *&gt;&gt;\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(671) : see reference to function template instantiation 'void std::_Func_class&lt;_Ret,C *&gt;::_Reset&lt;void,C,&gt;(_Fret (__thiscall C::* const )(void))' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ret=void\n1&gt;  ,            _Fret=void\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(671) : see reference to function template instantiation 'void std::_Func_class&lt;_Ret,C *&gt;::_Reset&lt;void,C,&gt;(_Fret (__thiscall C::* const )(void))' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Ret=void\n1&gt;  ,            _Fret=void\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\utility(157) : see reference to function template instantiation 'std::function&lt;void (C *)&gt;::function&lt;_From&gt;(_Fx &amp;&amp;)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _From=void (__thiscall C::* )(void)\n1&gt;  ,            _Fx=void (__thiscall C::* )(void)\n1&gt;          ]\n1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\utility(157) : see reference to function template instantiation 'std::function&lt;void (C *)&gt;::function&lt;_From&gt;(_Fx &amp;&amp;)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _From=void (__thiscall C::* )(void)\n1&gt;  ,            _Fx=void (__thiscall C::* )(void)\n1&gt;          ]\n1&gt;          c:\\projects\\test\\fntest\\fntest.cpp(60) : see reference to function template instantiation 'std::pair&lt;const _Kty,_Ty&gt;::pair&lt;ECmd,void(__thiscall C::* )(void),void&gt;(std::pair&lt;ECmd,void (__thiscall C::* )(void)&gt; &amp;&amp;)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Kty=ECmd\n1&gt;  ,            _Ty=C::fnCmd\n1&gt;          ]\n1&gt;          c:\\projects\\test\\fntest\\fntest.cpp(60) : see reference to function template instantiation 'std::pair&lt;const _Kty,_Ty&gt;::pair&lt;ECmd,void(__thiscall C::* )(void),void&gt;(std::pair&lt;ECmd,void (__thiscall C::* )(void)&gt; &amp;&amp;)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              _Kty=ECmd\n1&gt;  ,            _Ty=C::fnCmd\n1&gt;          ]\n1&gt;\n</code></pre>\n"}, {"tags": ["c++", "gsl"], "comments": [{"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 1, "creation_date": 1443022085, "post_id": 32743293, "comment_id": 53328095, "body": "btw, you dont have to explicitly allocate something to get the variable pointer. For example, you could have declared <code>double outcos;</code> and called the function passing its pointer using <code>&amp;outcos</code>. Something like <a href=\"https://ideone.com/kPDYvO\" rel=\"nofollow noreferrer\">this</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2060, "user_id": 3854322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EQMf.jpg?s=128&g=1", "display_name": "BlackDwarf", "link": "https://stackoverflow.com/users/3854322/blackdwarf"}, "is_accepted": true, "score": 3, "last_activity_date": 1443022492, "last_edit_date": 1443022492, "creation_date": 1443021948, "answer_id": 32743613, "question_id": 32743293, "link": "https://stackoverflow.com/questions/32743293/returning-double-in-function-argument/32743613#32743613", "title": "Returning double * in function argument", "body": "<p>I sum up what you do with the parameter <code>rescos</code> in your <code>fetch_eigenvalue</code> function:</p>\n\n<pre><code>double fetch_eigenvalue(gsl_matrix *M, gsl_vector *v, double *rescos)\n{\n    double cos;\n    // some code\n    rescos = &amp;cos;\n    // some code\n    return(result);\n}\n</code></pre>\n\n<p>Here you're not modifying the double value pointed by <code>rescos</code>, you're modifying the varaible <code>rescos</code> itself, which is a copy of the variable <code>outcos</code> used in your main.</p>\n\n<p>What you want to do in <code>fetch_eigenvalue</code> is copying the value of <code>cos</code> into the variable pointed by <code>rescos</code>:</p>\n\n<pre><code>double fetch_eigenvalue(gsl_matrix *M, gsl_vector *v, double *rescos)\n{\n    double cos;\n    // some code\n    *rescos = cos;\n    // some code\n    return(result);\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> As stated by the other answers, it's better to avoid malloc when you can, and here you can:</p>\n\n<pre><code>double outcos;\nfetch_eigenvalue(unit_matrix, v, &amp;outcos);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "is_accepted": false, "score": 2, "last_activity_date": 1443022186, "creation_date": 1443022186, "answer_id": 32743695, "question_id": 32743293, "link": "https://stackoverflow.com/questions/32743293/returning-double-in-function-argument/32743695#32743695", "title": "Returning double * in function argument", "body": "<p>I suspect that this is because the statement <code>rescos = &amp;cos;</code> saves into <code>rescos</code> the address of the local variable <code>cos</code>. However, the scope of this variable is only local so that you can not then use it in the <code>main()</code>. I guess what you want to do is to:</p>\n\n<ol>\n<li><p>change <code>rescos = &amp;cos;</code> to <code>*rescos = cos;</code> in the <code>fetch_eigenvalue</code> function so that the value of <code>cos</code> is stored at the address pointed to by <code>rescos</code></p></li>\n<li><p>use merely <code>double outcos;</code> in the <code>main()</code> function, i.e., don't use pointer</p></li>\n<li>call <code>fetch_eigenvalue</code> as <code>fetch_eigenvalue(unit_matrix, v, &amp;outcos);</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1873, "user_id": 613288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mshoB.gif?s=128&g=1", "display_name": "ecotax", "link": "https://stackoverflow.com/users/613288/ecotax"}, "is_accepted": false, "score": 1, "last_activity_date": 1443022392, "creation_date": 1443022392, "answer_id": 32743752, "question_id": 32743293, "link": "https://stackoverflow.com/questions/32743293/returning-double-in-function-argument/32743752#32743752", "title": "Returning double * in function argument", "body": "<p>I don't know anything about GSL, but it appears to be a library that uses C-style interface. To set values from a function, they use pointers. You don't seem to know how to use such an API yet, so here's some hints.</p>\n\n<p>The statements </p>\n\n<pre><code>double *outcos = (double*)malloc(sizeof(double) );\n...\nfetch_eigenvalue(unit_matrix, v, outcos);   \n</code></pre>\n\n<p>is not how you want to use such an API. Instead, you just define a double variable, and use the address of operator in the call:</p>\n\n<pre><code>double outcos;\n...\nfetch_eigenvalue(unit_matrix, v, &amp;outcos);   \n</code></pre>\n\n<p>Also, in your method, to assign a value, use don't use</p>\n\n<pre><code>        cos = fabs(cos);\n        rescos = &amp;cos;\n</code></pre>\n\n<p>but</p>\n\n<pre><code>        cos = fabs(cos);\n        *rescos = cos;\n</code></pre>\n\n<p>to assign the value to the variable pointed to, not to the pointer.\nHope this helps.</p>\n"}], "owner": {"reputation": 431, "user_id": 1816316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/c3qfl.jpg?s=128&g=1", "display_name": "Ludi", "link": "https://stackoverflow.com/users/1816316/ludi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 32743613, "answer_count": 3, "score": 0, "last_activity_date": 1443022492, "creation_date": 1443021109, "question_id": 32743293, "link": "https://stackoverflow.com/questions/32743293/returning-double-in-function-argument", "title": "Returning double * in function argument", "body": "<p>Countless GSL functions return their result as a pointer in their first argument. For instance</p>\n\n<blockquote>\n  <p>int gsl_matrix_get_col (gsl_vector * v, const gsl_matrix * m, size_t j)</p>\n</blockquote>\n\n<p>My programming level is very low, but I was told such things were impossible with local variables (deleted on end of function), but possible with pointers, as long as they were declared and allocated correctly by the caller function. I find it very strange, such fundamental difference should exist between pointers and normal variables, but I tried to use this storing of results in variables for a simple GSL programme, where I want a function (<strong>fetch_eigenvalue()</strong>) to output two things. And I fail. My programme is the following:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;gsl/gsl_matrix.h&gt;\n#include &lt;gsl/gsl_blas.h&gt;\n\n\n/* Parameters */\n#define N 3\n\n\nint CREATE_MATRIX_AND_VECTOR(gsl_matrix *m, gsl_vector *v);\ndouble fetch_eigenvalue(gsl_matrix *M, gsl_vector *v, double *rescos);\n\nint main()\n{\ngsl_matrix *unit_matrix = gsl_matrix_calloc(N, N); //soon to be unity \ngsl_vector *v = gsl_vector_calloc(N);          //soon to be unit x vector\ndouble *outcos = (double*)malloc(sizeof(double) );\n\nprintf(\"**********************************************\\n\");\nCREATE_MATRIX_AND_VECTOR(unit_matrix, v);\nfetch_eigenvalue(unit_matrix, v, outcos);   \nprintf(\"==IN MAIN: outcos = %e\\n\", *outcos);\n\nfree((void *)outcos);\ngsl_vector_free(v);\ngsl_matrix_free(unit_matrix);\nprintf(\"**********************************************\\n\");\nreturn(0);\n}\n\nint CREATE_MATRIX_AND_VECTOR(gsl_matrix * m, gsl_vector *v)\n{\nint i;\n\n    for (i = 0; i &lt; N; i++)\n    {\n        gsl_matrix_set(m, i, i, 1.0);\n    }\n\n    gsl_vector_set(v, 0, 1.0);\n\nreturn(0);\n}\n\ndouble fetch_eigenvalue(gsl_matrix *M, gsl_vector *v, double *rescos)   //fetches eigenvalue, if Mv is parallel to v within accuracy gvaccu\n                                    //rescos is the cosine of the angle between Mv and v\n{\n\nint i,lv;\ndouble v0, v1, cos;\ndouble result;\ndouble vnorm, pnorm;\ndouble rdot;\nlv = v-&gt;size;\n\ndouble gvaccu = 1e-10;\n\n\n            gsl_vector *prod = gsl_vector_calloc(lv);\n            gsl_matrix_get_row(prod, M, 0);\n\n            if(gsl_blas_dnrm2(prod)==0.0)\n            {\n                result = 0.0;\n            }\n            else\n            {\n                gsl_blas_dgemv( CblasNoTrans,1.0, M, v, 0.0, prod);\n                gsl_blas_ddot(prod, v, &amp;rdot);\n                pnorm = gsl_blas_dnrm2(prod);\n                vnorm = gsl_blas_dnrm2(v);\n                cos = rdot/pnorm/vnorm;\n                cos = fabs(cos);\n                rescos = &amp;cos;\n\n                if(fabs(cos -1.0) &gt; gvaccu)\n                {\n                    result = -1.0;\n                }\n                else\n                {\n                v0 = gsl_vector_get(v,0);\n                v1 = gsl_vector_get(prod,0);\n                result = v1/v0;\n                }\n            }\n        printf(\"==IN FETCH_EV: COS = %e\\n\", cos);//print cheat!!\n        printf(\"==IN FETCH_EV: RESCOS = %e\\n\", *rescos);//print cheat!!\ngsl_vector_free(prod);\nreturn(result);     \n}\n</code></pre>\n\n<p>I run it and get the following output:</p>\n\n<pre><code>ludi@ludi-M17xR4:~/Desktop/Healpix_3.20$ g++ -o wrong_output wrong_output.c -L. -L/sw/lib -I/sw/include -lgsl -lblas &amp;&amp; ./wrong_output \n**********************************************\n==IN FETCH_EV: COS = 1.000000e+00\n==IN FETCH_EV: RESCOS = 1.000000e+00\n==IN MAIN: outcos = 0.000000e+00\n**********************************************\nludi@ludi-M17xR4:~/Desktop/Healpix_3.20$ \n</code></pre>\n\n<p>So, the caller main() knows nothing about what happened inside fetch_eigenvalue(), eventhough I used a pointer. What am I doing wrong? I have the feeling, that I have misunderstood something very essential.</p>\n"}, {"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 23051, "user_id": 84507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b5ec4a143dd4a12a8be0a65f71b0df?s=128&d=identicon&r=PG", "display_name": "Sergey Vlasov", "link": "https://stackoverflow.com/users/84507/sergey-vlasov"}, "edited": false, "score": 0, "creation_date": 1443068945, "post_id": 32743186, "comment_id": 53346864, "body": "Try to run Visual Studio in safe mode (Devenv.exe /SafeMode) to check if your problem is caused by a third-party extension <a href=\"https://msdn.microsoft.com/en-us/library/ms241278.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms241278.aspx</a>"}, {"owner": {"reputation": 1, "user_id": 3220896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73911baa861fd71b7779061afbab840?s=128&d=identicon&r=PG&f=1", "display_name": "xMrAx", "link": "https://stackoverflow.com/users/3220896/xmrax"}, "reply_to_user": {"reputation": 23051, "user_id": 84507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b5ec4a143dd4a12a8be0a65f71b0df?s=128&d=identicon&r=PG", "display_name": "Sergey Vlasov", "link": "https://stackoverflow.com/users/84507/sergey-vlasov"}, "edited": false, "score": 0, "creation_date": 1443101148, "post_id": 32743186, "comment_id": 53364256, "body": "Thanks for the suggestion. The behavior worked correctly in debug mode suggesting we still had an extension installed. We narrowed it down to an internal company extension that we had completely forgotten about was installed."}], "owner": {"reputation": 1, "user_id": 3220896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73911baa861fd71b7779061afbab840?s=128&d=identicon&r=PG&f=1", "display_name": "xMrAx", "link": "https://stackoverflow.com/users/3220896/xmrax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443020843, "creation_date": 1443020843, "question_id": 32743186, "link": "https://stackoverflow.com/questions/32743186/visual-studio-2013-opening-right-click-context-menu-removes-selection-of-text", "title": "Visual Studio 2013 opening right click context menu removes selection of text", "body": "<p>Recently our group has updated to Visual Studio 2013 and we have run into a problem that is driving us insane. </p>\n\n<p>Whenever we have a .cpp file open in the editor we have problems right clicking on highlighted text. If we select text and then right click to open the context menu, the text selection is removed and any associated text options are grayed out. This happens regardless if we right click with the mouse or use the keyboard shortcut to open the menu. Copying and cutting with keyboard shortcuts still works, but as we are using Visual Assist X, all our refactoring options are useless. This behavior is only replicated in .cpp files. </p>\n\n<p>We've noticed similar behavior across different machines and have even removed Visual Assist X to ensure it was not the culprit. I've searched through the Visual Studio options, but have not been able to find anything that could be causing this behavior. After finding nothing through google any help would be greatly appreciated to solve this issue.</p>\n"}, {"tags": ["c++", "class", "object", "reference"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1443020788, "post_id": 32743135, "comment_id": 53327138, "body": "It depends on the desired semantics. Which you haven&#39;t fully specified."}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 1, "creation_date": 1443020900, "post_id": 32743135, "comment_id": 53327229, "body": "Answered something similar today: <a href=\"http://stackoverflow.com/questions/32734938/c-most-efficient-and-concise-way-to-access-a-heavy-member-variable-in-a-large/32735003#32735003\" title=\"c most efficient and concise way to access a heavy member variable in a large\">stackoverflow.com/questions/32734938/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 5, "creation_date": 1443021082, "post_id": 32743135, "comment_id": 53327374, "body": "If you need to modify private data outisde of the class, why did you make it private in the first place?"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1443021141, "creation_date": 1443021141, "answer_id": 32743307, "question_id": 32743135, "link": "https://stackoverflow.com/questions/32743135/ways-to-return-an-object-in-c-method/32743307#32743307", "title": "Ways to return an object in C++ method", "body": "<p>I know of the following ways to return an <code>Animal</code> from <code>MyAnimals</code>.</p>\n\n<ol>\n<li><p>By <code>const</code> reference. This allows you to avoid making a copy when you need to just query the object.</p>\n\n<pre><code>Animal const&amp; getAnimal(int index) const;\n</code></pre></li>\n<li><p>By reference. This allows you to modify the object inside a <code>MyAnimals</code>.</p>\n\n<pre><code>Animal&amp; getAnimal(int index);\n</code></pre></li>\n<li><p>By value. This is the safest method to return an <code>Animal</code> as far as the contents of <code>MyAnimals</code> is concerned but is also the most inefficient.</p>\n\n<pre><code>Animal getAnimal(int index) const;\n</code></pre></li>\n<li><p>Provide access to the elements through iterators.</p>\n\n<pre><code>class MyAnimals\n{\n   public:\n      typedef vector&lt;Animal&gt;::iterator iterator;\n      typedef vector&lt;Animal&gt;::const_iterator const_iterator;\n\n      iterator begin();\n      iterator end;\n\n      const_iterator begin() const;\n      const_iterator end const;\n\n      Animal getAnimal(int index){\n         return animals.at(index);\n      }\n   private:\n      vector&lt;Animal&gt; animals;\n};\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 249, "user_id": 4375752, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a537943456f7fdf5236cc63551bf98ad?s=128&d=identicon&r=PG&f=1", "display_name": "user249806", "link": "https://stackoverflow.com/users/4375752/user249806"}, "edited": false, "score": 0, "creation_date": 1443022541, "post_id": 32743383, "comment_id": 53328382, "body": "Yes It sounds like you want a variable &quot;a&quot; and you want to reassign that to different Objects in the myAnimals vector.  The solution from Chris is exactly how I would go about that by using pointers."}], "tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": false, "score": 1, "last_activity_date": 1443021308, "creation_date": 1443021308, "answer_id": 32743383, "question_id": 32743135, "link": "https://stackoverflow.com/questions/32743135/ways-to-return-an-object-in-c-method/32743383#32743383", "title": "Ways to return an object in C++ method", "body": "<p>You can't \"reassign\" a reference by design. But you can reassign a pointer. So if you have a <code>getAnimal()</code> that returns a reference you can write:</p>\n\n<pre><code>Animal* a = &amp;myanimals.getAnimal(1);\na = &amp;myanimals.getAnimal(2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1443021599, "post_id": 32743392, "comment_id": 53327718, "body": "It&#39;s also probably worth noting, as the comments to the question were hinting at, that often if you need to reference private data members outside of a class, there might be an architectural issue with how you&#39;ve laid out your code. It&#39;s not a rule, there are definitely legitimate use-cases for wanting to do that, but it should at least make you ask the question &quot;is there a better way to structure this?&quot;"}, {"owner": {"reputation": 799, "user_id": 3424868, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcf80fb1346a0df9496355febe08ef3b?s=128&d=identicon&r=PG", "display_name": "Weston", "link": "https://stackoverflow.com/users/3424868/weston"}, "edited": false, "score": 0, "creation_date": 1443024279, "post_id": 32743392, "comment_id": 53329551, "body": "It&#39;s been awhile since I&#39;ve worked in a Java/C++ like language, but isn&#39;t this general convention for OOP? Never directly accessing class properties and instead accessing them through getters and setters?"}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "reply_to_user": {"reputation": 799, "user_id": 3424868, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcf80fb1346a0df9496355febe08ef3b?s=128&d=identicon&r=PG", "display_name": "Weston", "link": "https://stackoverflow.com/users/3424868/weston"}, "edited": false, "score": 0, "creation_date": 1443024361, "post_id": 32743392, "comment_id": 53329602, "body": "@Weston Yes, because you can provide validation (among other things) in your getter/setter functions."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 7, "last_activity_date": 1443021624, "last_edit_date": 1443021624, "creation_date": 1443021335, "answer_id": 32743392, "question_id": 32743135, "link": "https://stackoverflow.com/questions/32743135/ways-to-return-an-object-in-c-method/32743392#32743392", "title": "Ways to return an object in C++ method", "body": "<blockquote>\n  <p>From what I've learned about C++ so far, I think getAnimal currently returns a copy of the animal, not a reference like in Java.</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>I've seen this suggested as the correct way to go about returning objects</p>\n</blockquote>\n\n<p>If you intend to return a copy, then yes.</p>\n\n<blockquote>\n  <p>I'd just be changing the copy of it and the actual animal inside of MyAnimals.animals would remain unchanged.</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>One way I've seen to get around this is to return Animal&amp; instead of Animal, and that seems to work for the most part</p>\n</blockquote>\n\n<p>Yes, references are exactly what you need for that.</p>\n\n<blockquote>\n  <p>but what if I want to reassign the variable the was assigned to that returned Animal?</p>\n</blockquote>\n\n<p>Well, typically there is no need to do re-assign an existing reference  (which is not allowed anyway). Instead of what you did, you could do:</p>\n\n<pre><code>Animal&amp; a = myanimals.getAnimal(1);\nAnimal&amp; b = myanimals.getAnimal(2);\n</code></pre>\n\n<p>If you for some reason need to, then use a pointer instead, to get around the limitation. You can do this even when you return a reference:</p>\n\n<pre><code>Animal* a = &amp;myanimals.getAnimal(1);\na = &amp;myanimals.getAnimal(2);\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 3424868, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcf80fb1346a0df9496355febe08ef3b?s=128&d=identicon&r=PG", "display_name": "Weston", "link": "https://stackoverflow.com/users/3424868/weston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 32743392, "answer_count": 3, "score": 4, "last_activity_date": 1443021624, "creation_date": 1443020699, "question_id": 32743135, "link": "https://stackoverflow.com/questions/32743135/ways-to-return-an-object-in-c-method", "title": "Ways to return an object in C++ method", "body": "<p>Say I have a class that looks like this</p>\n\n<pre><code>class MyAnimals{\npublic:\n    Animal getAnimal(int index){\n        return animals.at(index);\n    }\nprivate:\n    vector&lt;Animal&gt; animals;\n}\n</code></pre>\n\n<p>From what I've learned about C++ so far, I think <code>getAnimal</code> currently returns a copy of the animal, not a reference like in Java. I've seen this suggested as the correct way to go about returning objects, but what if you want to modify that animal once it's returned? I'd just be changing the copy of it and the actual animal inside of MyAnimals.animals would remain unchanged. One way I've seen to get around this is to return <code>Animal&amp;</code> instead of <code>Animal</code>, and that seems to work for the most part, but what if I want to reassign the variable the was assigned to that returned Animal? For example,</p>\n\n<pre><code>Animal&amp; a = myanimals.getAnimal(1);\na = myanimals.getAnimal(2);\n</code></pre>\n\n<p>From what I get, this would change the animal at <code>myanimals.animals[1]</code> to be the same exact object as <code>myanimals.animals[2]</code>, since a was a reference. What are the different ways to go about returning objects?</p>\n"}, {"tags": ["c++", "c", "windows", "hook", "reverse-engineering"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443020642, "post_id": 32743059, "comment_id": 53327037, "body": "This does not look like C++ code. Do not add irrelevant tags."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1502256"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1443020827, "post_id": 32743059, "comment_id": 53327172, "body": "@Olaf It can be either C++ or C as you probably know. Do not add irrelevant comments."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443034139, "post_id": 32743059, "comment_id": 53335134, "body": "An answer might depend on the actual language, as you probably know. If not, you apparently do not know C++. However, you are invoking undefined bahaviour, so there is no use in further investigation."}], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 4928207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122e2222eb8cace8c9d2e67ea65d8c47?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Jansen", "link": "https://stackoverflow.com/users/4928207/mark-jansen"}, "is_accepted": true, "score": 1, "last_activity_date": 1444290824, "creation_date": 1444290824, "answer_id": 33009802, "question_id": 32743059, "link": "https://stackoverflow.com/questions/32743059/function-hook-address-copied-incorrect/33009802#33009802", "title": "Function hook address copied incorrect", "body": "<p>A <code>jmp dword</code> instruction has a 2-byte opcode, you only skip one byte of this. \n(See the <code>#define FUNC_ADDR   (FUNC_JMP+1)</code></p>\n\n<p>So you are overwriting a part of the instruction, and ignoring a part of the address.\nThis is also indicated by the second instruction you posted, because now it's an <code>jmp fword</code> instead of <code>jmp dword</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1502256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 33009802, "answer_count": 1, "score": 1, "last_activity_date": 1444290824, "creation_date": 1443020486, "question_id": 32743059, "link": "https://stackoverflow.com/questions/32743059/function-hook-address-copied-incorrect", "title": "Function hook address copied incorrect", "body": "<p>I am trying to hook an application with a dll I injected. At the moment the dll contains a hook, a function trampoline and an empty function. However the target application crashes when the hooked function is called. I looked what went wrong and it seems that the replaced jump instruction jumps to an unknown place I didn't specify. Upon closer inspection I realized that this unknown address look remarkably similar to the correct one. It seems like the unknown address is the correct address shifted to the right with 4 junk bits in front of it. So my question is how did this happen and can I correct this?</p>\n\n<pre><code>#define FUNC_JMP    0x00433504\n#define FUNC_ADDR   (FUNC_JMP+1)\n\n// Trampoline\n__declspec(naked) void setup (void) { ... }    \n\nvoid hook (void)\n{\n    DWORD protect, buf;\n    DWORD adr = (DWORD) ((BYTE*) &amp;setup - (FUNC_ADDR + 4));\n\n    VirtualProtect ((void*) FUNC_ADDR, 4, PAGE_EXECUTE_READWRITE, &amp;protect);\n    memcpy ((void*) FUNC_ADDR, &amp;adr, 4);\n    VirtualProtect ((void*) FUNC_ADDR, 4, protect, &amp;buf);\n}\n</code></pre>\n\n<p>Before 0x00433504: <code>jmp    dword ptr ds:[0x1F8BAC4]</code></p>\n\n<p>After  0x00433504: <code>jmp    fword ptr ds:[0x10B51DC]</code></p>\n\n<p>Actual value of adr: <code>0x0B51DC2D</code></p>\n\n<p>TLDR; Why is the value I memcpy'd incomplete and shifted 4 bits to the right.</p>\n"}, {"tags": ["c++", "json", "datetime", "jsoncpp"], "comments": [{"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1443021526, "post_id": 32742752, "comment_id": 53327678, "body": "The question is not very clear do you need to convert a string into a DateTime object in C# ?"}, {"owner": {"reputation": 63, "user_id": 4261232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4DVS6BAbXWg/AAAAAAAAAAI/AAAAAAAAAFE/K5sfDt9dTU0/photo.jpg?sz=128", "display_name": "Paulo Fernando Oz&#243;rio Ferraz", "link": "https://stackoverflow.com/users/4261232/paulo-fernando-oz%c3%b3rio-ferraz"}, "reply_to_user": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1443030888, "post_id": 32742752, "comment_id": 53333274, "body": "@Marco, the datetime was created in C#, passed through Json in this format: <code>2015-06-08T11:17:23.746389-03:00</code>, than I need to convert and compare in C++"}, {"owner": {"reputation": 4208, "user_id": 212380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db51613a76e04ff15c814a9b3ae71046?s=128&d=identicon&r=PG", "display_name": "dschulz", "link": "https://stackoverflow.com/users/212380/dschulz"}, "edited": false, "score": 0, "creation_date": 1443033344, "post_id": 32742752, "comment_id": 53334736, "body": "I think you should consider using something like Boost.Date_Time to parse the string representing the timestamp and then doing the required comparison."}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1443035128, "post_id": 32742752, "comment_id": 53335727, "body": "Are you using plain c++ (gcc) or you have some library like boost or Qt and which compiler?"}, {"owner": {"reputation": 63, "user_id": 4261232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4DVS6BAbXWg/AAAAAAAAAAI/AAAAAAAAAFE/K5sfDt9dTU0/photo.jpg?sz=128", "display_name": "Paulo Fernando Oz&#243;rio Ferraz", "link": "https://stackoverflow.com/users/4261232/paulo-fernando-oz%c3%b3rio-ferraz"}, "reply_to_user": {"reputation": 4208, "user_id": 212380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db51613a76e04ff15c814a9b3ae71046?s=128&d=identicon&r=PG", "display_name": "dschulz", "link": "https://stackoverflow.com/users/212380/dschulz"}, "edited": false, "score": 0, "creation_date": 1443036676, "post_id": 32742752, "comment_id": 53336601, "body": "No library, I&#39;m looking Boost now how @dschulz suggests. I&#39;m compiling with Visual Studio."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1444083553, "post_id": 32742752, "comment_id": 53742579, "body": "Correct me if I&#39;m wrong but, despite the tag, this has nothing to do with JSON or with JsonCPP?"}, {"owner": {"reputation": 63, "user_id": 4261232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4DVS6BAbXWg/AAAAAAAAAAI/AAAAAAAAAFE/K5sfDt9dTU0/photo.jpg?sz=128", "display_name": "Paulo Fernando Oz&#243;rio Ferraz", "link": "https://stackoverflow.com/users/4261232/paulo-fernando-oz%c3%b3rio-ferraz"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1445186458, "post_id": 32742752, "comment_id": 54205615, "body": "@LightnessRacesinOrbit I tagged JSON and JsonCPP because the data were in JSON format and I was using JsonCPP to handling this data. So, I expected that someone could help me with this maybe using JsonCPP own."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 4261232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4DVS6BAbXWg/AAAAAAAAAAI/AAAAAAAAAFE/K5sfDt9dTU0/photo.jpg?sz=128", "display_name": "Paulo Fernando Oz&#243;rio Ferraz", "link": "https://stackoverflow.com/users/4261232/paulo-fernando-oz%c3%b3rio-ferraz"}, "is_accepted": true, "score": 2, "last_activity_date": 1443206661, "creation_date": 1443206661, "answer_id": 32788696, "question_id": 32742752, "link": "https://stackoverflow.com/questions/32742752/c-compare-2-dates-and-check-the-minutes-difference/32788696#32788696", "title": "C++ Compare 2 dates and check the minutes difference", "body": "<p>Well, I got it. Not the best way neither the pretty one, but it works since I know that the two dates were set on the same server and always comes in the same format <code>\\\"2015-01-01T23:40:00.000000-03:00\\\"</code></p>\n\n<p>Here's what I did:</p>\n\n<pre><code>int convertToInt(std::string number_str){\n    int number;\n    std::istringstream ss(number_str);\n    ss.imbue(std::locale::classic());\n    ss &gt;&gt; number;\n    return number;\n}\n\ntime_t convertDatetime(std::string date_str) {\n    time_t rawtime;\n    struct tm date;\n    int year, month, day, hour, min, sec;\n\n    date_str.erase(std::remove_if(date_str.begin(), date_str.end(), isspace), date_str.end());\n\n    year = convertToInt(date_str.substr(1, 4));\n    month = convertToInt(date_str.substr(6, 2));\n    day = convertToInt(date_str.substr(9, 2));\n    hour = convertToInt(date_str.substr(12, 2));\n    min = convertToInt(date_str.substr(15, 2));\n    sec = convertToInt(date_str.substr(18, 2));\n\n    time(&amp;rawtime);\n    localtime_s(&amp;date, &amp;rawtime);\n    date.tm_year = year - 1900;\n    date.tm_mon = month - 1;\n    date.tm_mday = day;\n    date.tm_hour = hour;\n    date.tm_min = min;\n    date.tm_sec = sec;\n\n    return mktime(&amp;date);\n}\n\nbool isValidIntervalDatetime(std::string actualDatetime_str, std::string oldDatetime_str, int maxMinutesInterval) {\n    double maxSecondsInterval = 60 * maxMinutesInterval;\n    time_t actualDatetime = convertDatetime(actualDatetime_str);\n    time_t oldDatetime = convertDatetime(oldDatetime_str);\n\n    double secondsDiff = difftime(actualDatetime, oldDatetime);\n\n    return secondsDiff &lt;= maxSecondsInterval;\n}\n\nint main(int argc, char* argv[])\n{\n    auto maxMinutesInterval = 20;\n    auto actuaDatetime = JsonConverter::toString(actualAccess[\"Date\"]); // \\\"2015-01-02T00:00:00.000000-03:00\\\"\n    auto oldDatetime = JsonConverter::toString(oldAccess[\"Date\"]); // \\\"2015-01-01T23:40:00.000000-03:00\\\"\n\n    if (isValidIntervalDatetime(actuaDatetime, oldDatetime, maxMinutesInterval){\n        //do something\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4261232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4DVS6BAbXWg/AAAAAAAAAAI/AAAAAAAAAFE/K5sfDt9dTU0/photo.jpg?sz=128", "display_name": "Paulo Fernando Oz&#243;rio Ferraz", "link": "https://stackoverflow.com/users/4261232/paulo-fernando-oz%c3%b3rio-ferraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "accepted_answer_id": 32788696, "answer_count": 1, "score": 1, "last_activity_date": 1443206743, "creation_date": 1443019658, "last_edit_date": 1443206743, "question_id": 32742752, "link": "https://stackoverflow.com/questions/32742752/c-compare-2-dates-and-check-the-minutes-difference", "title": "C++ Compare 2 dates and check the minutes difference", "body": "<p>Here's the thing:</p>\n\n<p>A datetime access is created with C# using <code>DateTime.Now</code>. This datetime is passed through JSON to a C++ method. I'm using JsonCpp to handle the Json data, but I'm not sure how to handle when the data is a datetime.</p>\n\n<p>I want to compare this datetime that I received with the actual datetime and check the minutes difference between this two (if the difference is on a interval that was defined).</p>\n\n<p>If I convert the Json datetime to a string using JsonCpp I have this format:</p>\n\n<pre><code>2015-06-08T11:17:23.746389-03:00\n</code></pre>\n\n<p>So what I'm trying to do is something like this:</p>\n\n<pre><code>var d1 = oldAccess[\"Date\"].ToString(); //Json datetime converted to a string\nvar d2 = actualAccess[\"Date\"].ToString()\nif((d2 - d1) &lt; 20) { //Difference between the two dates needs to be less than 20 minutes\n    return true;\n} else return false;\n</code></pre>\n\n<p>I'm new in C++, even looking for I don't discovered how to do this.</p>\n"}, {"tags": ["c++", "clang", "c++14", "unique-ptr"], "comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 4, "creation_date": 1443019838, "post_id": 32742741, "comment_id": 53326445, "body": "Could you provide an <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1443019924, "post_id": 32742741, "comment_id": 53326498, "body": "I assume that <code>VectorList</code> is derived from the base class <code>IList</code> (judging by the names)?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1443019978, "post_id": 32742741, "comment_id": 53326549, "body": "@CoryKramer The question explicitly states that. &quot;I have base object called <code>IList</code>. Then I have <code>VectorList</code>, that inherits <code>IList</code>.&quot;"}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1443019986, "post_id": 32742741, "comment_id": 53326556, "body": "yes, I used java word &quot;inherits&quot;, sorry for that"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1443020109, "post_id": 32742741, "comment_id": 53326640, "body": "If your classes are set up as you describe, <a href=\"http://cpp.sh/46y6\" rel=\"nofollow noreferrer\">they will have no such issue</a>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1443020152, "post_id": 32742741, "comment_id": 53326660, "body": "@CoryKramer Your example code is not 100% identical to this one. There&#39;s a difference between returning an rvalue and an lvalue, <i>especially</i> for a move-only type."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1443020207, "post_id": 32742741, "comment_id": 53326697, "body": "@Angew I agree, but you <a href=\"https://stackoverflow.com/questions/4316727/returning-unique-ptr-from-functions\">shouldn&#39;t have to explicitly <code>std::move</code> during a return</a>"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 3, "creation_date": 1443020239, "post_id": 32742741, "comment_id": 53326726, "body": "Don&#39;t forget the virtual destructor for this to work correctly with <code>unique_ptr</code>."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1443020362, "post_id": 32742741, "comment_id": 53326825, "body": "code is identical, classes are present (in includes). code compiles under gcc. there is virtual destructor in IList. Code compiles If I do it the &quot;old&quot; way, e.g. create class with new, add it to uniq_ptr of function return type etc."}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1443020374, "post_id": 32742741, "comment_id": 53326834, "body": "I&#39;d say this is a clang bug since it works when NOT using <code>auto</code>, see <a href=\"http://melpon.org/wandbox/permlink/BES2pVxe8hsN6Awa\" rel=\"nofollow noreferrer\">this live example</a>"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1443020375, "post_id": 32742741, "comment_id": 53326835, "body": "@Rostislav Isn&#39;t it more of an issue of deleting via the base pointer versus an issue specific to usage of <code>std::unique_ptr</code>?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1443020402, "post_id": 32742741, "comment_id": 53326857, "body": "@CoryKramer The point here is that the type of <code>vlist</code> is <i>not</i> the same as the return type. <code>vlist</code> is <code>unique_ptr&lt;VectorList&gt;</code>, the return type is <code>unique_ptr&lt;IList&gt;</code>. So that clause of the standard (&quot;try a move first&quot;) does not apply."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1443020439, "post_id": 32742741, "comment_id": 53326887, "body": "@m.s. But you&#39;ve given it a <i>different</i> type than what <code>auto</code> does. Try it again with <code>std::unique_ptr&lt;VectorList&gt;</code>."}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1443020526, "post_id": 32742741, "comment_id": 53326940, "body": "@Angew you are right! so clang not applying copy elision seems to be fine in this case and GCC is not complying to the standard then?"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1443020568, "post_id": 32742741, "comment_id": 53326972, "body": "@JamesAdkison <code>shared_ptr</code> can handle this without a virtual destructor, so I thought it was worth mentioning."}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1443020957, "post_id": 32743110, "comment_id": 53327269, "body": "@Barry I&#39;ve added a quote from N4140. They didn&#39;t change copy elision requirements, but relaxed those on <code>return</code> statements."}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1443021290, "post_id": 32743110, "comment_id": 53327516, "body": "then <a href=\"http://melpon.org/wandbox/permlink/N5nHpyWXdvRlhMkO\" rel=\"nofollow noreferrer\">this</a> should not compile using <code>g++ -std=c++11</code>, right?"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1443022264, "post_id": 32743110, "comment_id": 53328216, "body": "@Barry I believe that the &quot;or&quot; has weaker binding than the &quot;and&quot;, i.e. I read it as &quot;When the criteria for copy elision are met.... or when the <i>expression</i> in...&quot;"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 4, "creation_date": 1443022444, "post_id": 32743110, "comment_id": 53328338, "body": "@Columbo Oh so (Criteria Met And Not Exception And Lvalue) Or (Return Statement Names Object)? This is why we don&#39;t write 82-word sentences, boys and girls."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1443025471, "post_id": 32743110, "comment_id": 53330287, "body": "@m.s. no it does not compile under c++11, also make unique is not present under c++11"}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1443077389, "post_id": 32743110, "comment_id": 53349833, "body": "I can confirm that the code is compiled without warning under clang."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443090199, "post_id": 32743110, "comment_id": 53357002, "body": "This is a DR against C++11 and so applies retroactively. See <a href=\"http://wg21.link/cwg1579\" rel=\"nofollow noreferrer\">CWG 1579</a>."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443090417, "post_id": 32743110, "comment_id": 53357119, "body": "@T.C. Can you explain what &quot;applies retroactively&quot; means? Does a C++11 compiler have to implement the C++14 wording to be a conforming C++11 compiler?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1443091301, "post_id": 32743110, "comment_id": 53357587, "body": "@Angew Well, nobody is selling a &quot;conforming C++11&quot; certification for compilers. It basically means that you can expect to see compilers implement the C++14 behavior even in their C++11 modes."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1443100457, "post_id": 32743110, "comment_id": 53363677, "body": "@T.C. Makes sense, especially since the C++14 behaviour is strictly superior to the C++11 one. Thanks for clarifying."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1461184051, "post_id": 32743110, "comment_id": 61089274, "body": "@Columbo OMG, 7 months later I make the <a href=\"http://stackoverflow.com/revisions/36752874/1\">exact same mistake about this wording</a>... SMH... I should write a proposal solely to address the grammar here."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1461186007, "post_id": 32743110, "comment_id": 61090369, "body": "@Barry I reckon you can get this fixed editorially. See the draft repo."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1461188223, "post_id": 32743110, "comment_id": 61091503, "body": "@Columbo Threw out an <a href=\"https://github.com/cplusplus/draft/issues/712\" rel=\"nofollow noreferrer\">issue</a> with the first wording I thought of. Wonder what&#39;ll happen."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 17, "last_activity_date": 1443020904, "last_edit_date": 1443020904, "creation_date": 1443020639, "answer_id": 32743110, "question_id": 32742741, "link": "https://stackoverflow.com/questions/32742741/clang-error-with-stdunique-ptr/32743110#32743110", "title": "clang error with std::unique_ptr", "body": "<p>It appears (your version of) Clang is still following C++11 behaviour in this regard. In C++11, you had to use <code>std::move</code> in this case, because the type of <code>vlist</code> is different from the return type, and so the clause of \"when returning an lvalue, try it as an rvalue first\" did not apply.</p>\n\n<p>In C++14, this restriction of \"same types required\" was lifted, and so in C++14, you shouldn't need the <code>std::move</code> in the return statement. But if you need your code to compile with your current toolchain, simply add it there:</p>\n\n<pre><code>return std::move(vlist);\n</code></pre>\n\n<hr>\n\n<p>The exact C++11 wording was this:</p>\n\n<blockquote>\n  <p><strong>12.8/32</strong> When the criteria for elision of a copy operation are met or would be met save for the fact that the source\n  object is a function parameter, and the object to be copied is designated by an lvalue, overload resolution to\n  select the constructor for the copy is first performed as if the object were designated by an rvalue. ...</p>\n</blockquote>\n\n<p>The criteria for copy elision (which include \"same type\") have to be met; they're just slightly extended to cover parameters as well.</p>\n\n<p>In C++14 (N4140), the wording is broader:</p>\n\n<blockquote>\n  <p><strong>12.8/32</strong> When the criteria for elision of a copy/move operation are met, but not for an <em>exception-declaration,</em> and the\n  object to be copied is designated by an lvalue, <strong>or when the expression in a <code>return</code> statement is a (possibly\n  parenthesized) <em>id-expression</em> that names an object with automatic storage duration declared in the body or\n  <em>parameter-declaration-clause</em> of the innermost enclosing function or <em>lambda-expression,</em></strong> overload resolution\n  to select the constructor for the copy is first performed as if the object were designated by an rvalue.</p>\n</blockquote>\n\n<p>(Emphasis mine)</p>\n\n<p>As you can see, copy elision criteria are no longer required for the <code>return</code> case.</p>\n"}], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1955, "favorite_count": 4, "accepted_answer_id": 32743110, "answer_count": 1, "score": 11, "last_activity_date": 1443020904, "creation_date": 1443019628, "question_id": 32742741, "link": "https://stackoverflow.com/questions/32742741/clang-error-with-stdunique-ptr", "title": "clang error with std::unique_ptr", "body": "<p>I have base object called <code>IList</code>. Then I have <code>VectorList</code>, that inherits <code>IList</code>.</p>\n\n<p>then I have function like this:</p>\n\n<pre><code>std::unique_ptr&lt;IList&gt; factory(){\n    auto vlist = std::make_unique&lt;VectorList&gt;();\n    return vlist;\n}\n</code></pre>\n\n<p>This compiles without problem under <code>gcc</code>, but <code>clang</code> gives following error:</p>\n\n<pre><code>test_file.cc:26:9: error: no viable conversion from 'unique_ptr&lt;VectorList, default_delete&lt;VectorList&gt;&gt;' to\n      'unique_ptr&lt;IList, default_delete&lt;IList&gt;&gt;'\n        return vlist;\n</code></pre>\n\n<p>How is proper way to handle this kind of errors? </p>\n"}, {"tags": ["c++", "c++11", "stl", "c++14", "allocator"], "comments": [{"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 0, "creation_date": 1443020264, "post_id": 32742671, "comment_id": 53326746, "body": "You could make your own allocator."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1443020856, "post_id": 32742671, "comment_id": 53327200, "body": "Related: <a href=\"http://stackoverflow.com/q/28521203/\">stackoverflow.com/q/28521203</a>"}], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 2543838, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65e8b5832ea1ad8dff0c4dd7f66523a7?s=128&d=identicon&r=PG", "display_name": "Hrant", "link": "https://stackoverflow.com/users/2543838/hrant"}, "edited": false, "score": 0, "creation_date": 1443027002, "post_id": 32743006, "comment_id": 53331130, "body": "If I define <code>m_data</code> as <code>Allocator::pointer</code>, what should <code>std::vector::data()</code> function return? Its return type is <code>T*</code>."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "reply_to_user": {"reputation": 436, "user_id": 2543838, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65e8b5832ea1ad8dff0c4dd7f66523a7?s=128&d=identicon&r=PG", "display_name": "Hrant", "link": "https://stackoverflow.com/users/2543838/hrant"}, "edited": false, "score": 0, "creation_date": 1443031290, "post_id": 32743006, "comment_id": 53333501, "body": "@Hrant You should return <code>std::addressof(*m_data)</code>"}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": true, "score": 7, "last_activity_date": 1443020335, "creation_date": 1443020335, "answer_id": 32743006, "question_id": 32742671, "link": "https://stackoverflow.com/questions/32742671/correctly-allocate-memory-in-vector/32743006#32743006", "title": "Correctly allocate memory in vector", "body": "<p>You should make your <code>m_data</code> member an <code>Allocator::pointer</code>. (You should probably make a local alias of that type in your vector, if you want to follow the standard interface.)</p>\n\n<p>The type is there because some allocators don't deal in raw pointers, like the Boost.Interprocess shared memory allocator, which may use smart pointers depending on configuration.</p>\n"}], "owner": {"reputation": 436, "user_id": 2543838, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65e8b5832ea1ad8dff0c4dd7f66523a7?s=128&d=identicon&r=PG", "display_name": "Hrant", "link": "https://stackoverflow.com/users/2543838/hrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 32743006, "answer_count": 1, "score": 8, "last_activity_date": 1443020417, "creation_date": 1443019408, "question_id": 32742671, "link": "https://stackoverflow.com/questions/32742671/correctly-allocate-memory-in-vector", "title": "Correctly allocate memory in vector", "body": "<p>I am trying to implement <code>std::vector</code> as a programming exercise.</p>\n\n<p>Consider the following code snippet:</p>\n\n<pre><code>template &lt;class T, class Allocator = std::allocator&lt;T&gt;&gt;\nclass vector\n{\npublic:\n    using size_type = size_t;\n    using allocator_type = Allocator;\n    ...\nprivate:\n    T* m_data;\n    allocator_type m_alloc;\n    size_type m_capacity;\n    ...\n}; \n</code></pre>\n\n<p><code>m_data</code> has type <code>T*</code>. \nI need to allocate memory using <code>std::allocator_traits&lt;allocator_type&gt;::allocate(m_alloc, m_capacity)</code> which returns <code>std::allocator_traits&lt;allocator_type&gt;::pointer</code>.</p>\n\n<p>Can I assume that <code>pointer</code> can be implicitly cast to <code>T*</code> and assign the value returned from <code>allocate</code> to <code>m_data</code>?</p>\n\n<p>If not, how to correctly allocate memory in <code>vector</code>?</p>\n"}, {"tags": ["c++", "c++11", "protocol-buffers", "descriptor", "proto3"], "comments": [{"owner": {"reputation": 3253, "user_id": 891439, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ada8f2c41ec630fd97a051b3369e8d59?s=128&d=identicon&r=PG", "display_name": "Florian Wolters", "link": "https://stackoverflow.com/users/891439/florian-wolters"}, "edited": false, "score": 1, "creation_date": 1443019713, "post_id": 32742601, "comment_id": 53326357, "body": "Is it possible that it is related to the Protocol Buffers Compiler <code>protoc</code>? I&#39;ve just stumbled upon the <code>protoc</code> arguments <code>-o</code> and <code>--include_source_info</code>. Do I have to create a <code>FileDescriptorSet</code> in order to retrieve comments?"}], "answers": [{"comments": [{"owner": {"reputation": 3253, "user_id": 891439, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ada8f2c41ec630fd97a051b3369e8d59?s=128&d=identicon&r=PG", "display_name": "Florian Wolters", "link": "https://stackoverflow.com/users/891439/florian-wolters"}, "edited": false, "score": 0, "creation_date": 1443170116, "post_id": 32775546, "comment_id": 53394507, "body": "Thank you for your comment and the explaination! I&#39;ve updated my question again for clarification. I will add a working example later, maybe someone can review it then."}, {"owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "reply_to_user": {"reputation": 3253, "user_id": 891439, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ada8f2c41ec630fd97a051b3369e8d59?s=128&d=identicon&r=PG", "display_name": "Florian Wolters", "link": "https://stackoverflow.com/users/891439/florian-wolters"}, "edited": false, "score": 1, "creation_date": 1443573546, "post_id": 32775546, "comment_id": 53545437, "body": "@FlorianWolters Thanks for the clarification. I disagree with the suggestion, though: source locations are an obscure, rarely-used part of the descriptor interface. It doesn&#39;t make sense to add complexity to the class hierarchy specifically to distinguish descriptors with and without source info. Plus, some Message subclasses (like DynamicMessage) could actually have source info in their descriptors. (Of course, I don&#39;t work on protobufs anymore so it&#39;s not my call in any case.)"}], "tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": true, "score": 4, "last_activity_date": 1443159651, "creation_date": 1443159651, "answer_id": 32775546, "question_id": 32742601, "link": "https://stackoverflow.com/questions/32742601/reading-comments-from-proto-files-using-a-protocol-buffers-descriptor-object/32775546#32775546", "title": "Reading comments from .proto files using a Protocol Buffers descriptor object", "body": "<p>It sounds like you've basically figured it out.</p>\n\n<p>You're getting deep into APIs inside the protocol compiler which were not really designed for public consumption. It gets complicated because no one has written a helper layer to simplify things, because not many people use these features.</p>\n\n<p>I am not sure what you mean about <code>Message</code> being a \"God class\". <code>Message</code> is merely the abstract interface for a protobuf instance. Descriptors describe <em>types</em> of protobuf instances. <code>Message::getDescriptor()</code> returns the type of a message, but beyond that there isn't much direct connection between these APIs...</p>\n\n<blockquote>\n  <p>Isn't there a way to include the source information without using a FileDescriptorSet?</p>\n</blockquote>\n\n<p>The comments are intentionally stripped from the descriptors embedded into the generated code, so you need to run the parser separately, generate a descriptor set, and consume it dynamically.</p>\n\n<blockquote>\n  <p>Is it possible to \"connect\"/set the FileDescriptorSet with a concrete Message class/instance, since that would drastically simplify things?</p>\n</blockquote>\n\n<p>Do you mean that you want Message::getDescriptor() to return a descriptor that includes the comment data from the source file? That would require that the comment data be embedded into generated code, which would be trivial for <code>protoc</code> to implement (it currently intentionally strips them out, so it would just have to <em>not</em> do that) but potentially bloat-y and dangerous (could reveal secrets for people shipping closed-source binaries built with protobufs).</p>\n"}], "owner": {"reputation": 3253, "user_id": 891439, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ada8f2c41ec630fd97a051b3369e8d59?s=128&d=identicon&r=PG", "display_name": "Florian Wolters", "link": "https://stackoverflow.com/users/891439/florian-wolters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3503, "favorite_count": 0, "accepted_answer_id": 32775546, "answer_count": 1, "score": 6, "last_activity_date": 1443170068, "creation_date": 1443019201, "last_edit_date": 1443170068, "question_id": 32742601, "link": "https://stackoverflow.com/questions/32742601/reading-comments-from-proto-files-using-a-protocol-buffers-descriptor-object", "title": "Reading comments from .proto files using a Protocol Buffers descriptor object", "body": "<p>I am currently revisiting a project using Google <a href=\"https://developers.google.com/protocol-buffers\" rel=\"noreferrer\">Protocol Buffers</a>.</p>\n\n<p>In the project I want to make use of the features <em>Descriptors</em> and <em>Reflection</em> of Protocol Buffers.</p>\n\n<p>The official documentation states that the comments of <code>.proto</code> files can be read:</p>\n\n<ol>\n<li>With the function <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor#DebugStringOptions\" rel=\"noreferrer\"><code>DebugStringWithOptions()</code></a>, called on a message or descriptor.</li>\n<li>With the function <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor#Descriptor.GetSourceLocation.details\" rel=\"noreferrer\"><code>GetSourceLocation()</code></a>, called on a descriptor.</li>\n</ol>\n\n<p>I am unable to retrieve comments, so I think I am doing something completely wrong or that feature isn't fully implemented in Protocol Buffers, yet.</p>\n\n<p>Here are some code snippets:</p>\n\n<pre><code>google::protobuf::DebugStringOptions options;\noptions.include_comments = true;\nstd::cout &lt;&lt; \"google::protobuf::Descriptor::DebugStringWithOptions(): \"\n          &lt;&lt; message.descriptor()-&gt;DebugStringWithOptions(options) &lt;&lt; std::endl\n          &lt;&lt; std::endl;\n\nconst google::protobuf::FieldDescriptor* field_descriptor{\n    message.descriptor()-&gt;field(1)};\n\n// TODO(wolters): Why doesn't this work?\ngoogle::protobuf::SourceLocation* source_location{\n    new google::protobuf::SourceLocation};\nfield_descriptor-&gt;GetSourceLocation(source_location);\n\n// if (field_descriptor-&gt;GetSourceLocation(source_location)) {\nstd::cout &lt;&lt; \"start_line: \" &lt;&lt; source_location-&gt;leading_comments\n          &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"end_line: \" &lt;&lt; source_location-&gt;leading_comments &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"start_column: \" &lt;&lt; source_location-&gt;start_column &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"end_column: \" &lt;&lt; source_location-&gt;end_column &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"leading_comments: \" &lt;&lt; source_location-&gt;leading_comments\n          &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"trailing_comments: \" &lt;&lt; source_location-&gt;trailing_comments\n          &lt;&lt; std::endl;\n// }\n</code></pre>\n\n<p>I've tried using the following two syntaxes for comments in the <code>.proto</code> file,\nbut none of them seems to work:</p>\n\n<pre><code>MessageHeader header = 1;  // The header of this `Message`.\n\n/**\n * The header of this `Message`.\n */\nMessageHeader header = 1;\n</code></pre>\n\n<p>I am using GCC 4.7.1 (with C++11 support enabled) and the latest Protocol Buffers version 3.0.0-alpha-4.1.</p>\n\n<p>Can someone guide me into the correct direction and/or provide me an working example?</p>\n\n<p><strong>EDIT 2015-09-24:</strong></p>\n\n<p>After rearding the <a href=\"https://developers.google.com/protocol-buffers/docs/techniques#self-description\" rel=\"noreferrer\">Self Describing Messages</a> section in the official documentation and testing lots of stuff, it seems to me that I have a bit better understanding of protobuf descriptors.</p>\n\n<p>Correct me if one or more of the following statements are incorrect:</p>\n\n<ol>\n<li>The <code>SelfDescribingMessage</code> proto is <strong>only</strong> useful if the other end does not know the .proto definitions.</li>\n<li>The only way to access the comments of the proto definition is by creating a .desc file using the <code>protoc</code> application.</li>\n<li>To obtain a comment, the GetSourceLocation member function can only be used if the \"top\" element is either <code>FileDescriptorSet</code>, <code>FileDescriptorProto</code> or <code>FileDesriptor</code>. If this is correct, Protocol Buffers has a poor API design, since the <code>google::protobuf::Message</code> class is a God Class (providing access to the complete file descriptor API, but the values are not provided at all).</li>\n<li>The call <code>concrete_message.descriptor()-&gt;file()</code> does not (<strong>and</strong> can not) contain source comments information, since it is not part of the compiled code. </li>\n</ol>\n\n<p>It seems to me that the only way to make this work is:</p>\n\n<ol>\n<li><p>Invoke protoc for theMessage.proto file (which references all other messages) with the arguments:</p>\n\n<pre><code>--include_imports --include_source_info and --descriptor_set_out=message.desc\n</code></pre></li>\n<li><p>Ship the <code>message.desc</code> file together with the application/library to be able to read it during runtime (see below).</p></li>\n<li>Create a <code>google::protobuf::FileDescriptorSet</code> from that file.</li>\n<li>Iterate over all <code>google::protobuf::FileDescriptorProto</code> of the <code>FileDescriptorSet</code>.</li>\n<li>Convert each FileDescriptorProto to a <code>google::protobuf::FileDescriptor</code> using <code>google::protobuf::DescriptorPool::BuildFile()</code>.</li>\n<li>Lookup the message and/or fields with one of the <code>Find\u2026</code> functions, applied on the <code>FileDescriptor</code> instance.</li>\n<li>Call the function <code>GetSourceLocation</code> on the message/field descriptor instance.</li>\n<li>Read the comments via <code>google::protobuf::SourceLocation::leading_comments</code> and <code>google::protobuf::SourceLocation::trailing_comments</code>.</li>\n</ol>\n\n<p>This seems pretty complicated to me, so I have two additional questions:</p>\n\n<ol>\n<li>Isn't there a way to include the source information without using a FileDescriptorSet?</li>\n<li>Is it possible to \"connect\"/set the <code>FileDescriptorSet</code> with a concrete Message class/instance, since that would drastically simplify things?</li>\n</ol>\n\n<p><strong>EDIT 2015-09-25:</strong> By <em>God Class</em> I mean that the <code>Message</code> class and/or the descriptor classes offer public functions that are more or less useless, since they provide no information when used by a client. Take a \"normal\" message for example: So the generated code does <strong>not</strong> contain source comment information, therefore the <code>GetSourceLocation</code> method in all descriptor classes (e.g. <code>Descriptor</code> and <code>FieldDescriptor</code>) is completely useless. From a logical perspective separate instances <code>DescriptorLite</code> and <code>FieldDescriptorLite</code> should be provided if dealing with messages and <code>Descriptor</code> and <code>FieldDescriptor</code> if dealing with information from a <code>FileDescriptorSet</code> (whose source is normally a .desc file generated from a .proto file). A <code>[...]Lite</code> class would then be the parent class of a \"normal\" class. The argument that <code>protoc</code> will possibly never include source comments, underlines my point.</p>\n\n<p>By \"connecting\", I mean an API function to <strong>update</strong> the descriptor information in the message with the descriptor information from the .desc file (which is always a superset of the descriptors provided by the message, if I understood correctly).</p>\n"}, {"tags": ["c++", "cout", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 342, "user_id": 3399143, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/lhsuA.jpg?s=128&g=1", "display_name": "radscheit", "link": "https://stackoverflow.com/users/3399143/radscheit"}, "edited": false, "score": 2, "creation_date": 1443018780, "post_id": 32742405, "comment_id": 53325606, "body": "std::cout contains a wrong concetenation...."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1443018826, "post_id": 32742405, "comment_id": 53325640, "body": "@Downvoters: make a habit to specify reason for downvote. What&#39;s wrong in question?"}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "reply_to_user": {"reputation": 342, "user_id": 3399143, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/lhsuA.jpg?s=128&g=1", "display_name": "radscheit", "link": "https://stackoverflow.com/users/3399143/radscheit"}, "edited": false, "score": 1, "creation_date": 1443018906, "post_id": 32742405, "comment_id": 53325707, "body": "@radscheit: I know it. I intentionally use + operator see what happens? How I got F as output?"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 2, "creation_date": 1443018958, "post_id": 32742405, "comment_id": 53325750, "body": "Look at bku_drytt&#39;s answer, you got undefined behaviour."}, {"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 2, "creation_date": 1443019037, "post_id": 32742405, "comment_id": 53325802, "body": "This is undefined behavior, you happen to have the value of <code>F</code> when you go 345 past the start of the <code>&quot;num &quot;</code> array of <code>char</code>&#39;s. This does not produce the same results on my local machine."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "reply_to_user": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 0, "creation_date": 1443019148, "post_id": 32742405, "comment_id": 53325881, "body": "@shuttle87: yes now it makes sense."}, {"owner": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "edited": false, "score": 0, "creation_date": 1443019360, "post_id": 32742405, "comment_id": 53326038, "body": "The way I learned why this happens is that in C++ <code>&quot;A&quot; + 1 == &quot;B&quot;</code>"}, {"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "reply_to_user": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "edited": false, "score": 1, "creation_date": 1443019515, "post_id": 32742405, "comment_id": 53326161, "body": "@McLeary <a href=\"http://coliru.stacked-crooked.com/a/03f73f096ccb6db0\" rel=\"nofollow noreferrer\">But it is not</a>"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "reply_to_user": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "edited": false, "score": 4, "creation_date": 1443019563, "post_id": 32742405, "comment_id": 53326212, "body": "@McLeary Perhaps you meant <code>&#39;A&#39; + 1</code>."}, {"owner": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "reply_to_user": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1443019805, "post_id": 32742405, "comment_id": 53326419, "body": "@aslg thats right, my bad!"}, {"owner": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "reply_to_user": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 0, "creation_date": 1443019911, "post_id": 32742405, "comment_id": 53326492, "body": "@rozina <a href=\"http://coliru.stacked-crooked.com/a/7cfe0bf1f2039482\" rel=\"nofollow noreferrer\">Now it is</a>.  I typed &quot; instead of &#39;."}, {"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "reply_to_user": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "edited": false, "score": 0, "creation_date": 1443020183, "post_id": 32742405, "comment_id": 53326681, "body": "@McLeary indeed it is :) However, there is no pointer arithmetic happening here, so it is not the same as OP&#39;s case."}, {"owner": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "reply_to_user": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 0, "creation_date": 1443020456, "post_id": 32742405, "comment_id": 53326897, "body": "@rozina agreed, my comment&#39;s intent was to show this peculiar thing C/C++ has that other languages don&#39;t have."}, {"owner": {"reputation": 2315, "user_id": 1928529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQIRE.jpg?s=128&g=1", "display_name": "Dennis van der Schagt", "link": "https://stackoverflow.com/users/1928529/dennis-van-der-schagt"}, "edited": false, "score": 2, "creation_date": 1443023106, "post_id": 32742405, "comment_id": 53328729, "body": "@pravasi I didn&#39;t downvote but I think your title is downvote worthy because of it being not descriptive at all."}, {"owner": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "reply_to_user": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "edited": false, "score": 0, "creation_date": 1443023529, "post_id": 32742405, "comment_id": 53329023, "body": "@McLeary Why is it peculiar? Also, this happens in many other languages."}, {"owner": {"reputation": 1105, "user_id": 1089788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSff.jpg?s=128&g=1", "display_name": "McLeary", "link": "https://stackoverflow.com/users/1089788/mcleary"}, "reply_to_user": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 0, "creation_date": 1443023921, "post_id": 32742405, "comment_id": 53329313, "body": "@JorenHeit I didn&#39;t mean to cause any trouble with my words. The peculiar part is that, in my way of seeing thing, the nature of C++ allows two apparently distinct types to be &#39;added&#39; (char and int). I know it happens with other languages as well, but it may seem a little bit confusing. It was for me in the beginning at least."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "reply_to_user": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 0, "creation_date": 1443025194, "post_id": 32742405, "comment_id": 53330146, "body": "@rozina: In the case of &#39;A&#39; +1 you said no pointer arithmetic happens. Then what happens? Is it unspecified or undefined/ well defined behavior to perform &#39;A&#39;+1?"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 3, "creation_date": 1443025847, "post_id": 32742405, "comment_id": 53330530, "body": "@PravasiMeet the difference is that <code>&quot;A&quot;</code> is a <code>string</code>, and <code>&#39;A&#39;</code> is a <code>char</code>. And a character is no more than a single-byte integer (unlike a string). If you add one, you will simply increment its value by one. And in the ascii table &#39;B&#39; (66) comes right after &#39;A&#39; (65)."}], "answers": [{"comments": [{"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 0, "creation_date": 1443019580, "post_id": 32742446, "comment_id": 53326229, "body": "&quot;because you are accessing memory locations outside of the bounds&quot; Where did he do that?"}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "reply_to_user": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 3, "creation_date": 1443019747, "post_id": 32742446, "comment_id": 53326373, "body": "@rozina Outside of the bounds of his array, yes. His array is const char[5], therefore his memory is from <code>char[0]</code> to <code>char[4]</code>, he is accessing <code>char[345]</code> which is not in his range, and could print anything from that location until the first <code>&#39;\\0&#39;</code> character was found."}], "tags": [], "owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "is_accepted": true, "score": 14, "last_activity_date": 1443020065, "last_edit_date": 1443020065, "creation_date": 1443018784, "answer_id": 32742446, "question_id": 32742405, "link": "https://stackoverflow.com/questions/32742405/what-happens-in-this-c-program/32742446#32742446", "title": "what happens in this C++ program?", "body": "<p>String literal <code>\"num \"</code> is <code>const char[5]</code> which decays to <code>const char*</code> to which you are adding an offset.</p>\n\n<p>The following piece of code is equivalent to what you are doing:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main()\n{\n    int num = 345;\n    const char* c_str = \"num \";\n    std::cout &lt;&lt; c_str + num &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p><strong>A:</strong> You have undefined behaviour because you are accessing memory locations outside of the bounds of your array. You are violating memory safety.</p>\n\n<p>Since <code>cout</code> will only stop printing once it finds a <code>'\\0</code>' for c-strings, you could potentially keep printing until it does. You can't know when that value will next happen thus you have undefined behaviour as explained in <strong>A</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "is_accepted": false, "score": 6, "last_activity_date": 1443019221, "creation_date": 1443019221, "answer_id": 32742604, "question_id": 32742405, "link": "https://stackoverflow.com/questions/32742405/what-happens-in-this-c-program/32742604#32742604", "title": "what happens in this C++ program?", "body": "<p>It's very instructive to compile with all warnings:</p>\n\n<pre><code>g++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\nmain.cpp: In function 'int main()':\nmain.cpp:6:25: warning: array subscript is above array bounds [-Warray-bounds]\n     std::cout&lt;&lt;\"num \" + num&lt;&lt;'\\n';\n\n                         ^\n</code></pre>\n\n<p>See <a href=\"http://coliru.stacked-crooked.com/a/1e11c9c0cbb89946\">here</a></p>\n\n<p>Essentially the compiler is telling you that you have done pointer arithmetic here on the underlying array that stores <code>\"num \"</code>. In essence <code>\"num \"</code> is an array that stores the characters needed for that string literal. When you perform arithmetic on it this decays to a <code>const char*</code> which you then add 345 to the pointer address. This memory address is outside the defined array and on <em>your specific machine</em> this happens to be the value <code>F</code>. This is however undefined behavior, the output could be something else entirely on a different machine.</p>\n\n<p>Often these compiler warnings are the results of bugs, so paying attention to what the compiler is telling you is often very valuable.</p>\n"}, {"tags": [], "owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "is_accepted": false, "score": 7, "last_activity_date": 1443019680, "creation_date": 1443019680, "answer_id": 32742758, "question_id": 32742405, "link": "https://stackoverflow.com/questions/32742405/what-happens-in-this-c-program/32742758#32742758", "title": "what happens in this C++ program?", "body": "<p>Let's say you have your <code>\"num\"</code> string. In memory it may look like,</p>\n\n<pre><code> 0  1  2  3  4\n[n][u][m][ ][\\0]\n</code></pre>\n\n<p>When you print it, it will be used as a pointer. And now you add an offset of 345 to it.</p>\n\n<pre><code> 0  1  2  3  4   5  6  7     345\n[n][u][m][ ][\\0][?][?][?]....[F][?][?]\n</code></pre>\n\n<p>Your program may have printed more than just an F though, it stops on the first <code>\\0</code> found. It's undefined behaviour because your program could print just about anything, and will access invalid memory adresses.</p>\n\n<p>If your goal was to print an integer, then you could write</p>\n\n<pre><code>std::cout &lt;&lt; \"num\" &lt;&lt; num &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 32742446, "answer_count": 3, "score": 0, "last_activity_date": 1443020065, "creation_date": 1443018670, "question_id": 32742405, "link": "https://stackoverflow.com/questions/32742405/what-happens-in-this-c-program", "title": "what happens in this C++ program?", "body": "<p>consider following program:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main()\n{\n    int num=345;\n    std::cout&lt;&lt;\"num \" + num&lt;&lt;'\\n';\n}\n</code></pre>\n\n<p>When I run this program it displays F as an output. How? Is pointer arithmetic being performed here? If I use - sign instead of + then blank output appears. </p>\n"}, {"tags": ["c++", "c", "code-generation", "bazel"], "answers": [{"tags": [], "owner": {"reputation": 21554, "user_id": 4243, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/501b2f1d20a7a8f9539d46776a640225?s=128&d=identicon&r=PG", "display_name": "kristina", "link": "https://stackoverflow.com/users/4243/kristina"}, "is_accepted": true, "score": 9, "last_activity_date": 1443031011, "creation_date": 1443031011, "answer_id": 32746379, "question_id": 32742382, "link": "https://stackoverflow.com/questions/32742382/bazel-header-file-code-generator/32746379#32746379", "title": "Bazel header file code generator", "body": "<p>Two possible solutions:</p>\n\n<p>1) Use the <code>output_to_genfiles</code> attribute:</p>\n\n<pre><code>code_generate = rule(\n  implementation = _impl,\n  output_to_genfiles = True,\n  attrs = {...}\n)\n</code></pre>\n\n<p>Basically it'll put your generated output in bazel-genfiles and cc_* does look there for headers.  It's not-very-thoroughly documented <a href=\"http://bazel.io/docs/skylark/lib/globals.html#rule\" rel=\"noreferrer\">here</a>.</p>\n\n<p>2) You could create a genrule that runs <code>python codegen.py</code> (instead of doing it in a Skylark rule).</p>\n"}], "owner": {"reputation": 1171, "user_id": 2576250, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ac46baf88aae36ef981fe3a8315ca54f?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/2576250/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2719, "favorite_count": 2, "accepted_answer_id": 32746379, "answer_count": 1, "score": 8, "last_activity_date": 1443031011, "creation_date": 1443018625, "question_id": 32742382, "link": "https://stackoverflow.com/questions/32742382/bazel-header-file-code-generator", "title": "Bazel header file code generator", "body": "<p>I am trying to add a code generator to my bazel build by writing a rule to execute the generator, but i am stuck at adding the generated header file as an include path dependency to the library i am trying to build.</p>\n\n<p>The rule looks like this: </p>\n\n<pre><code>def _impl(ctx):\n  output = ctx.outputs.out\n  input = ctx.attr.defs\n  md_dir = list(ctx.attr.md_dir.files)[0]\n  print(\"generating\", output.path)\n  ctx.action(\n      outputs=[output],\n      progress_message=\"Generating %s\" % md_dir,\n      command=\"python codegen.py -md_dir %s %s -o %s\" % (md_dir.path, input, output.path)\n  )\n\ncode_generate = rule(\n  implementation=_impl,\n  attrs={\n       \"defs\": attr.string(),\n       \"md_dir\": attr.label(allow_files=True, single_file=True),\n       \"out\": attr.output()\n       },\n)\n</code></pre>\n\n<p>and the BUILD file like this:</p>\n\n<pre><code>load(\"/common/code_generate\", \"code_generate\")\n\ncode_generate(\n  name=\"generate_header_defs\",\n  defs=\"common/header_definition_file\",\n  md_dir=\"header_defs\",\n  out=\"gen_header.h\",\n)\n\ncc_library(\n  name=\"lnt\",\n  hdrs=glob([\"*.h\"]),\n  srcs=[\"source.c\":gen_header.h\"],\n  visibility=[\"//visibility:public\"],\n  deps=[\"@dep1//:x\", \"@dep2//:y\", \"@dep3//:z\"],\n)\n</code></pre>\n\n<p>The code generation works and writes the code to <em>bazel-out/local-fastbuild/bin/common/gen_header.h</em> but the gcc command line does not add the include path to the generated header file what leads to <em>error: gen_header.h: No such file or directory</em></p>\n"}, {"tags": ["c++", "multithreading", "webrtc"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443028753, "post_id": 32742170, "comment_id": 53332090, "body": "There is no question in the post, yet somehow it was upvoted 2 times. I wonder who did the upvoting and why."}, {"owner": {"reputation": 532, "user_id": 5214654, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1be385df293d6493dcd859d0ee910a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Aagman", "link": "https://stackoverflow.com/users/5214654/aagman"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443075372, "post_id": 32742170, "comment_id": 53348985, "body": "@SergeyA I need the solution that why its not working out for me, is there any way to solve this issue? And what else do you need to know please let me know."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1443104292, "post_id": 32742170, "comment_id": 53366537, "body": "It isn&#39;t clear how the backtrace relates to the code posted. What happens at offset 816 from <code>rtc::MessageQueue::Get</code>? Why and when is that function called? From the <code>pthread</code> lines, I&#39;m guessing this is happening in one of the background threads. Can you tell which?"}, {"owner": {"reputation": 532, "user_id": 5214654, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1be385df293d6493dcd859d0ee910a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Aagman", "link": "https://stackoverflow.com/users/5214654/aagman"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1443161020, "post_id": 32742170, "comment_id": 53390081, "body": "@AustinMullins - &#39;rtc::MessageQueue::Get&#39;  this method get called when my signaling thread starts. And yes ,there is a backgroud thread which is invoking this above mentioned code basically this set of code is for making Peer to Peer  Webrtc connection."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1443180997, "post_id": 32742170, "comment_id": 53400904, "body": "Can you edit your question to include the Get method? That&#39;s where the segfault (Bad Access) is."}, {"owner": {"reputation": 532, "user_id": 5214654, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1be385df293d6493dcd859d0ee910a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Aagman", "link": "https://stackoverflow.com/users/5214654/aagman"}, "edited": false, "score": 0, "creation_date": 1443181539, "post_id": 32742170, "comment_id": 53401217, "body": "@AustinMullins-Its a part Of WebRTC delivered library .We just need to start the threads from our end .My problem is similar to the problem discussed here <a href=\"https://code.google.com/p/webrtc/issues/detail?id=4196\" rel=\"nofollow noreferrer\">link</a>.The problem is because of the WebRtc threads."}], "answers": [{"comments": [{"owner": {"reputation": 3607, "user_id": 2924421, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AcGoY.jpg?s=128&g=1", "display_name": "Phylliida", "link": "https://stackoverflow.com/users/2924421/phylliida"}, "edited": false, "score": 1, "creation_date": 1516475183, "post_id": 40062170, "comment_id": 83706761, "body": "Why do you call <code>release()</code> on the peerConnectionFactory?"}, {"owner": {"reputation": 1658, "user_id": 1246037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54a3fc498a7193c9f1bf39de227bd43e?s=128&d=identicon&r=PG", "display_name": "JSON", "link": "https://stackoverflow.com/users/1246037/json"}, "edited": false, "score": 0, "creation_date": 1533490871, "post_id": 40062170, "comment_id": 90354845, "body": "Yes, why do you call .release() on peerConnectionFactory object?"}, {"owner": {"reputation": 13193, "user_id": 213871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c228b6e11e7b817fd504a144ffbd773?s=128&d=identicon&r=PG", "display_name": "ceztko", "link": "https://stackoverflow.com/users/213871/ceztko"}, "reply_to_user": {"reputation": 3607, "user_id": 2924421, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AcGoY.jpg?s=128&g=1", "display_name": "Phylliida", "link": "https://stackoverflow.com/users/2924421/phylliida"}, "edited": false, "score": 2, "creation_date": 1536016777, "post_id": 40062170, "comment_id": 91264338, "body": "@Phylliida @JSON returned value was <code>std::unique_ptr</code>, so he wants to take ownership of the pointer"}], "tags": [], "owner": {"reputation": 1915, "user_id": 1025222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FzmRn.jpg?s=128&g=1", "display_name": "Axel Isouard", "link": "https://stackoverflow.com/users/1025222/axel-isouard"}, "is_accepted": true, "score": 5, "last_activity_date": 1476552871, "creation_date": 1476552871, "answer_id": 40062170, "question_id": 32742170, "link": "https://stackoverflow.com/questions/32742170/webrtc-peer-to-peer-connection/40062170#40062170", "title": "WebRTC Peer to Peer Connection", "body": "<p>After taking a look at the PeerConnection samples located inside the WebRTC's source code, I always initialize SSL modules before creating the threads like this:</p>\n\n<pre><code>bool Core::Init() {\n  rtc::InitializeSSL();\n  rtc::InitRandom(rtc::Time());\n  rtc::ThreadManager::Instance()-&gt;WrapCurrentThread();\n\n  _signalingThread = new rtc::Thread();\n  _workerThread = new rtc::Thread();\n\n  _signalingThread-&gt;SetName(\"signaling_thread\", NULL);\n  _workerThread-&gt;SetName(\"worker_thread\", NULL);\n\n  if (!_signalingThread-&gt;Start() || !_workerThread-&gt;Start()) {\n    return false;\n  }\n\n  _peerConnectionFactory =\n      webrtc::CreatePeerConnectionFactory(_signalingThread,\n                                          _workerThread,\n                                          NULL, NULL, NULL).release();\n\n  return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 5214654, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1be385df293d6493dcd859d0ee910a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Aagman", "link": "https://stackoverflow.com/users/5214654/aagman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3023, "favorite_count": 0, "accepted_answer_id": 40062170, "answer_count": 1, "score": 6, "last_activity_date": 1476552871, "creation_date": 1443018071, "last_edit_date": 1443103838, "question_id": 32742170, "link": "https://stackoverflow.com/questions/32742170/webrtc-peer-to-peer-connection", "title": "WebRTC Peer to Peer Connection", "body": "<p>I am Implementing a WebRTC Peer to Peer connection for Audio Calling using C++.</p>\n\n<p>I have two threads <code>_worker_thread</code> and <code>_signaling_thread</code>. Now when I try to create <code>_peerConnectionFactory</code> by calling the method <code>webrtc::CreatePeerConnectionFactory()</code>, my app crashes. How can I make it work?</p>\n\n<pre><code>_signaling_thread.reset(new rtc::Thread());\nif(!_signaling_thread-&gt;Start())\n{\n    printf(\"_signaling_thread is Failed\");\n    return;\n}\n_worker_thread.reset(new rtc::Thread());\nif (!_worker_thread-&gt;Start()) {\n    printf( \"_worker_thread is Failed\");\n    return;\n}\n\n_peerConnectionFactory = webrtc::CreatePeerConnectionFactory(_worker_thread.get(),_signaling_thread.get(),NULL,NULL,NULL);\n</code></pre>\n\n<p>This is the backtrace I am getting</p>\n\n<pre><code>* thread #15: tid = 0x17e516, 0x00000001008d5674 MyAPP`rtc::MessageQueue::Get(rtc::Message*, int, bool) + 816, stop reason =  EXC_BAD_ACCESS (code=1, address=0x100000038)                                              \n* frame #0: 0x00000001008d5674 MyAPP`rtc::MessageQueue::Get(rtc::Message*, int, bool) + 816\nframe #1: 0x00000001008e5fb0 MyAPP`rtc::Thread::ProcessMessages(int) + 100\nframe #2: 0x00000001008e5e44 MyAPP`rtc::Thread::PreRun(void*) + 88\nframe #3: 0x0000000199337b3c libsystem_pthread.dylib`_pthread_body + 156\nframe #4: 0x0000000199337aa0 libsystem_pthread.dylib`_pthread_start + 1\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-debugging"], "answers": [{"comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1443309704, "post_id": 32780592, "comment_id": 53443248, "body": "<a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/11/21/native-memory-diagnostics-in-vs2015-preview.aspx\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/vcblog/archive/2014/11/21/&hellip;</a>"}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": true, "score": 1, "last_activity_date": 1443422255, "last_edit_date": 1443422255, "creation_date": 1443178434, "answer_id": 32780592, "question_id": 32742055, "link": "https://stackoverflow.com/questions/32742055/vs-studio-debugger-get-and-watch-all-instances-of-a-type/32780592#32780592", "title": "VS Studio Debugger - Get (and watch) all instances of a type", "body": "<h2>Heap Manager</h2>\n\n<p>From C++ runtime perspective, the heap manager allocates bytes via <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366597%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">HeapAlloc (MSDN)</a>. The signature is</p>\n\n<pre><code>LPVOID WINAPI HeapAlloc(\n  _In_ HANDLE hHeap,\n  _In_ DWORD  dwFlags,\n  _In_ SIZE_T dwBytes\n);\n</code></pre>\n\n<p>So if the heap manager allocates memory, it allocates a number of <strong>bytes</strong>, not memory for a <strong>type</strong>.</p>\n\n<p>One helpful thing (not for Visual Studio though), at least for objects on the heap is to enable GFlags' \"User mode stack trace database\". With that enabled, it tracks allocations on the heap and associates it with a stack. That way, you still cannot see the type information, but at least find out in which method the memory was allocated. In small methods, you may find from the <em>dwBytes</em> information, which type it is - but still you have to do it manually.</p>\n\n<h2>Debug Heap Manager</h2>\n\n<p>If you have a debug build, you can use <a href=\"https://msdn.microsoft.com/en-us/library/x98tx3cf.aspx\" rel=\"nofollow noreferrer\">Debug Heap Manager</a> to help you keep track of allocations.</p>\n\n<p>However, this is not completely without source code changes. You need to import the debug headers.</p>\n\n<h2>Visual Studio 2013 Update 2</h2>\n\n<p>Since Visual Studio 2013 Update 2, there is a <a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/11/21/native-memory-diagnostics-in-vs2015-preview.aspx\" rel=\"nofollow noreferrer\">memory diagnostic tool</a>, which even allows you to track the types of objects that are lost.</p>\n\n<p>It does so by analyzing the PDBs and it fails for libraries where PDBs are not available.</p>\n\n<p><a href=\"http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-65-69/6813.8.png\" rel=\"nofollow noreferrer\">Screenshot http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-65-69/6813.8.png</a></p>\n"}], "owner": {"reputation": 4913, "user_id": 859434, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aTTwX.png?s=128&g=1", "display_name": "jab", "link": "https://stackoverflow.com/users/859434/jab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 32780592, "answer_count": 1, "score": 2, "last_activity_date": 1443422255, "creation_date": 1443017793, "last_edit_date": 1443018378, "question_id": 32742055, "link": "https://stackoverflow.com/questions/32742055/vs-studio-debugger-get-and-watch-all-instances-of-a-type", "title": "VS Studio Debugger - Get (and watch) all instances of a type", "body": "<p>For a given stack frame, is there a quick a way (or an easy way to construct a way) to get all instances of a certain class/type for a given stack frame (stack and heap variables)? I would like to do this without any source code changes -- with additional functionality only coming from VS/VS-Debugger.</p>\n\n<p>I'm envisioning this behavior would be quite useful when making changes to datatypes used throughout a large codebase.</p>\n"}, {"tags": ["c++", "linux", "pty"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1443018345, "post_id": 32742052, "comment_id": 53325263, "body": "The first possibility that springs to mind is that <code>string(execResult) != &quot;fail&quot;</code>."}, {"owner": {"reputation": 19, "user_id": 1533754, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2daa273aa8be82a4c4c94a3e55626c7c?s=128&d=identicon&r=PG", "display_name": "user1533754", "link": "https://stackoverflow.com/users/1533754/user1533754"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1443019471, "post_id": 32742052, "comment_id": 53326127, "body": "Sorry forget to say that execResult is not initialized, but if the execution will not work it will be initialized with &quot;fail&quot;. It is an char[] array."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1443021993, "post_id": 32742052, "comment_id": 53328021, "body": "You haven&#39;t given us enough to reproduce the error, but you can <i>simplify</i> and improve the diagnostics. If <code>printDbg</code> just wraps <code>cout</code>, then remove it and use <code>cout</code>. At the top of the &quot;parent&quot; block, print <code>execResult</code>; if it is not &quot;fail&quot;, then you have your answer, and if it <i>is</i> &quot;fail&quot; then we can try some other things."}, {"owner": {"reputation": 19, "user_id": 1533754, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2daa273aa8be82a4c4c94a3e55626c7c?s=128&d=identicon&r=PG", "display_name": "user1533754", "link": "https://stackoverflow.com/users/1533754/user1533754"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1443029097, "post_id": 32742052, "comment_id": 53332261, "body": "Thanks for your answer, but i already did that (use direct cout and print execResult). The problem is i can see the debug message on my GUI (gui -&gt; appendDbg() WORKS). It just does not print the &quot;printDbg&quot; message to console from within the &quot;if exec == fail&quot; part."}, {"owner": {"reputation": 19, "user_id": 1533754, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2daa273aa8be82a4c4c94a3e55626c7c?s=128&d=identicon&r=PG", "display_name": "user1533754", "link": "https://stackoverflow.com/users/1533754/user1533754"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1443029820, "post_id": 32742052, "comment_id": 53332650, "body": "OH MY GOD, found my mistake! The debug message was not a normal cout, it was an cerr and i started my application quiet with 2&gt; /dev/null. Embarrassing, but thank you very much anyway."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1443031218, "post_id": 32742052, "comment_id": 53333457, "body": "Chalk one up for the power of simplify!"}], "owner": {"reputation": 19, "user_id": 1533754, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2daa273aa8be82a4c4c94a3e55626c7c?s=128&d=identicon&r=PG", "display_name": "user1533754", "link": "https://stackoverflow.com/users/1533754/user1533754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443019591, "creation_date": 1443017785, "last_edit_date": 1443019591, "question_id": 32742052, "link": "https://stackoverflow.com/questions/32742052/cout-to-parent-terminal-after-a-forked-pseudo-terminal", "title": "Cout to parent-terminal after a forked pseudo-terminal", "body": "<p>First I'll show you up some little pseudo code:</p>\n\n<pre><code>cpid = forkpty (&amp;compipe, NULL, NULL, NULL);\n\n//yes i have some error handling here, but its not important yet\n\nif (cpid == 0) //child process\n{\n    //here are some pipes closed,\n    //and the forked child will exec(ute) third party process\n}\n\nelse //parent process\n{\n    //here are just closing some other pipe ends,\n    //and settings up some fcntl flags like O_NONBLOCK\n\n    if (string (execResult) == \"fail\")\n    {\n        //HERE ARE THE PROBLEM!!\n        //This debug message will print to the pseudo-terminal (i think)\n        //because it is not visible in \"main\"-terminal / console\n        gui -&gt; appendDbg (Output::EROR, \"Could not execute FOO\");\n        printDbg (EROR, \"Could not execute FOO\");\n    }\n\n    else\n    {\n        //But I don't understand why this debug message prints to\n        //the \"main\"-terminal where the application was started from\n        printDbg (INFO, \"Starting child process: 'FOO' with PID: \" +to_string (cpid));\n        printChildsOut();\n    }\n}\n</code></pre>\n\n<p>Ok, my problem is described inside the if-else part where the exec(ution)Result will be checked.</p>\n\n<p>The thing is I can not see my debug message called 'EROR...\"', but i can see the info debug message called 'INFO...' in my \"main\"-terminal where the application was started from.</p>\n\n<p>By the way, the function 'printDbg' is developed by myself and it just prints messages via 'cout'.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1443018018, "post_id": 32742034, "comment_id": 53325010, "body": "<code>ostream</code> is the base class providing the high-level <b>output</b> interface. (That is why it is called <b>o</b>stream). If you want to <b>read</b> from an <code>ostream</code> object, <a href=\"http://en.cppreference.com/w/cpp/io\" rel=\"nofollow noreferrer\">you&#39;re doing something wrong</a>."}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 542749, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/df759c5b3be941c9f4f039ec27dc247c?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/542749/matt"}, "edited": false, "score": 0, "creation_date": 1443021651, "post_id": 32742149, "comment_id": 53327761, "body": "I&#39;d use std::ostringstream here. It&#39;s OK to use an output stream since only the whole string is being read."}], "tags": [], "owner": {"reputation": 485, "user_id": 3311445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f4224b52916f76eabde956674ca468?s=128&d=identicon&r=PG", "display_name": "proycon", "link": "https://stackoverflow.com/users/3311445/proycon"}, "is_accepted": false, "score": 2, "last_activity_date": 1443018019, "creation_date": 1443018019, "answer_id": 32742149, "question_id": 32742034, "link": "https://stackoverflow.com/questions/32742034/how-to-write-ostream-contents-to-ofstream-with-open-file/32742149#32742149", "title": "how to write ostream contents to ofstream with open file", "body": "<p>It is an output stream, not an input stream, so it's not really intended for reading its contents. You may look for <code>stringstream</code> instead.</p>\n\n<pre><code>stringstream ss;\nss &lt;&lt; \"Hello there\" &lt;&lt; endl;\nofs &lt;&lt; ss.str();\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 1971455, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c453e93b01bc12365b1aa85c6a262df8?s=128&d=identicon&r=PG", "display_name": "user1971455", "link": "https://stackoverflow.com/users/1971455/user1971455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443018260, "creation_date": 1443017721, "last_edit_date": 1443017800, "question_id": 32742034, "link": "https://stackoverflow.com/questions/32742034/how-to-write-ostream-contents-to-ofstream-with-open-file", "title": "how to write ostream contents to ofstream with open file", "body": "<p>Suppose I have an ostream os that I have been adding text to like so:</p>\n\n<pre><code>os &lt;&lt; \"Hello there\" &lt;&lt; endl;\n</code></pre>\n\n<p>...and I want to send the text of os to an ofstream ofs with an open file. When I do it like this I seem to get the address of os and not the contents:</p>\n\n<pre><code>ofs &lt;&lt; os;\n</code></pre>\n\n<p>What is the correct way? </p>\n"}]